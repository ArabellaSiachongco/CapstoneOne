function dO(n,e){for(var t=0;t<e.length;t++){const i=e[t];if(typeof i!="string"&&!Array.isArray(i)){for(const r in i)if(r!=="default"&&!(r in n)){const s=Object.getOwnPropertyDescriptor(i,r);s&&Object.defineProperty(n,r,s.get?s:{enumerable:!0,get:()=>i[r]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function t(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(r){if(r.ep)return;r.ep=!0;const s=t(r);fetch(r.href,s)}})();function K_(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}function AH(n){if(n.__esModule)return n;var e=n.default;if(typeof e=="function"){var t=function i(){return this instanceof i?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(n).forEach(function(i){var r=Object.getOwnPropertyDescriptor(n,i);Object.defineProperty(t,i,r.get?r:{enumerable:!0,get:function(){return n[i]}})}),t}var fO={exports:{}},Y_={},pO={exports:{}},mn={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Og=Symbol.for("react.element"),MH=Symbol.for("react.portal"),IH=Symbol.for("react.fragment"),PH=Symbol.for("react.strict_mode"),RH=Symbol.for("react.profiler"),NH=Symbol.for("react.provider"),DH=Symbol.for("react.context"),LH=Symbol.for("react.forward_ref"),kH=Symbol.for("react.suspense"),OH=Symbol.for("react.memo"),UH=Symbol.for("react.lazy"),xR=Symbol.iterator;function FH(n){return n===null||typeof n!="object"?null:(n=xR&&n[xR]||n["@@iterator"],typeof n=="function"?n:null)}var mO={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},gO=Object.assign,yO={};function Tf(n,e,t){this.props=n,this.context=e,this.refs=yO,this.updater=t||mO}Tf.prototype.isReactComponent={};Tf.prototype.setState=function(n,e){if(typeof n!="object"&&typeof n!="function"&&n!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,n,e,"setState")};Tf.prototype.forceUpdate=function(n){this.updater.enqueueForceUpdate(this,n,"forceUpdate")};function vO(){}vO.prototype=Tf.prototype;function _C(n,e,t){this.props=n,this.context=e,this.refs=yO,this.updater=t||mO}var wC=_C.prototype=new vO;wC.constructor=_C;gO(wC,Tf.prototype);wC.isPureReactComponent=!0;var _R=Array.isArray,xO=Object.prototype.hasOwnProperty,bC={current:null},_O={key:!0,ref:!0,__self:!0,__source:!0};function wO(n,e,t){var i,r={},s=null,o=null;if(e!=null)for(i in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)xO.call(e,i)&&!_O.hasOwnProperty(i)&&(r[i]=e[i]);var a=arguments.length-2;if(a===1)r.children=t;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];r.children=l}if(n&&n.defaultProps)for(i in a=n.defaultProps,a)r[i]===void 0&&(r[i]=a[i]);return{$$typeof:Og,type:n,key:s,ref:o,props:r,_owner:bC.current}}function jH(n,e){return{$$typeof:Og,type:n.type,key:e,ref:n.ref,props:n.props,_owner:n._owner}}function SC(n){return typeof n=="object"&&n!==null&&n.$$typeof===Og}function VH(n){var e={"=":"=0",":":"=2"};return"$"+n.replace(/[=:]/g,function(t){return e[t]})}var wR=/\/+/g;function vS(n,e){return typeof n=="object"&&n!==null&&n.key!=null?VH(""+n.key):e.toString(36)}function Ax(n,e,t,i,r){var s=typeof n;(s==="undefined"||s==="boolean")&&(n=null);var o=!1;if(n===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(n.$$typeof){case Og:case MH:o=!0}}if(o)return o=n,r=r(o),n=i===""?"."+vS(o,0):i,_R(r)?(t="",n!=null&&(t=n.replace(wR,"$&/")+"/"),Ax(r,e,t,"",function(c){return c})):r!=null&&(SC(r)&&(r=jH(r,t+(!r.key||o&&o.key===r.key?"":(""+r.key).replace(wR,"$&/")+"/")+n)),e.push(r)),1;if(o=0,i=i===""?".":i+":",_R(n))for(var a=0;a<n.length;a++){s=n[a];var l=i+vS(s,a);o+=Ax(s,e,t,l,r)}else if(l=FH(n),typeof l=="function")for(n=l.call(n),a=0;!(s=n.next()).done;)s=s.value,l=i+vS(s,a++),o+=Ax(s,e,t,l,r);else if(s==="object")throw e=String(n),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function rv(n,e,t){if(n==null)return n;var i=[],r=0;return Ax(n,i,"","",function(s){return e.call(t,s,r++)}),i}function BH(n){if(n._status===-1){var e=n._result;e=e(),e.then(function(t){(n._status===0||n._status===-1)&&(n._status=1,n._result=t)},function(t){(n._status===0||n._status===-1)&&(n._status=2,n._result=t)}),n._status===-1&&(n._status=0,n._result=e)}if(n._status===1)return n._result.default;throw n._result}var Zr={current:null},Mx={transition:null},zH={ReactCurrentDispatcher:Zr,ReactCurrentBatchConfig:Mx,ReactCurrentOwner:bC};function bO(){throw Error("act(...) is not supported in production builds of React.")}mn.Children={map:rv,forEach:function(n,e,t){rv(n,function(){e.apply(this,arguments)},t)},count:function(n){var e=0;return rv(n,function(){e++}),e},toArray:function(n){return rv(n,function(e){return e})||[]},only:function(n){if(!SC(n))throw Error("React.Children.only expected to receive a single React element child.");return n}};mn.Component=Tf;mn.Fragment=IH;mn.Profiler=RH;mn.PureComponent=_C;mn.StrictMode=PH;mn.Suspense=kH;mn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=zH;mn.act=bO;mn.cloneElement=function(n,e,t){if(n==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+n+".");var i=gO({},n.props),r=n.key,s=n.ref,o=n._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=bC.current),e.key!==void 0&&(r=""+e.key),n.type&&n.type.defaultProps)var a=n.type.defaultProps;for(l in e)xO.call(e,l)&&!_O.hasOwnProperty(l)&&(i[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)i.children=t;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];i.children=a}return{$$typeof:Og,type:n.type,key:r,ref:s,props:i,_owner:o}};mn.createContext=function(n){return n={$$typeof:DH,_currentValue:n,_currentValue2:n,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},n.Provider={$$typeof:NH,_context:n},n.Consumer=n};mn.createElement=wO;mn.createFactory=function(n){var e=wO.bind(null,n);return e.type=n,e};mn.createRef=function(){return{current:null}};mn.forwardRef=function(n){return{$$typeof:LH,render:n}};mn.isValidElement=SC;mn.lazy=function(n){return{$$typeof:UH,_payload:{_status:-1,_result:n},_init:BH}};mn.memo=function(n,e){return{$$typeof:OH,type:n,compare:e===void 0?null:e}};mn.startTransition=function(n){var e=Mx.transition;Mx.transition={};try{n()}finally{Mx.transition=e}};mn.unstable_act=bO;mn.useCallback=function(n,e){return Zr.current.useCallback(n,e)};mn.useContext=function(n){return Zr.current.useContext(n)};mn.useDebugValue=function(){};mn.useDeferredValue=function(n){return Zr.current.useDeferredValue(n)};mn.useEffect=function(n,e){return Zr.current.useEffect(n,e)};mn.useId=function(){return Zr.current.useId()};mn.useImperativeHandle=function(n,e,t){return Zr.current.useImperativeHandle(n,e,t)};mn.useInsertionEffect=function(n,e){return Zr.current.useInsertionEffect(n,e)};mn.useLayoutEffect=function(n,e){return Zr.current.useLayoutEffect(n,e)};mn.useMemo=function(n,e){return Zr.current.useMemo(n,e)};mn.useReducer=function(n,e,t){return Zr.current.useReducer(n,e,t)};mn.useRef=function(n){return Zr.current.useRef(n)};mn.useState=function(n){return Zr.current.useState(n)};mn.useSyncExternalStore=function(n,e,t){return Zr.current.useSyncExternalStore(n,e,t)};mn.useTransition=function(){return Zr.current.useTransition()};mn.version="18.3.1";pO.exports=mn;var V=pO.exports;const Qo=K_(V),HH=dO({__proto__:null,default:Qo},[V]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var GH=V,WH=Symbol.for("react.element"),qH=Symbol.for("react.fragment"),$H=Object.prototype.hasOwnProperty,XH=GH.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,KH={key:!0,ref:!0,__self:!0,__source:!0};function SO(n,e,t){var i,r={},s=null,o=null;t!==void 0&&(s=""+t),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(i in e)$H.call(e,i)&&!KH.hasOwnProperty(i)&&(r[i]=e[i]);if(n&&n.defaultProps)for(i in e=n.defaultProps,e)r[i]===void 0&&(r[i]=e[i]);return{$$typeof:WH,type:n,key:s,ref:o,props:r,_owner:XH.current}}Y_.Fragment=qH;Y_.jsx=SO;Y_.jsxs=SO;fO.exports=Y_;var d=fO.exports,TO={exports:{}},Gs={},EO={exports:{}},CO={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(n){function e(W,Z){var F=W.length;W.push(Z);e:for(;0<F;){var J=F-1>>>1,ue=W[J];if(0<r(ue,Z))W[J]=Z,W[F]=ue,F=J;else break e}}function t(W){return W.length===0?null:W[0]}function i(W){if(W.length===0)return null;var Z=W[0],F=W.pop();if(F!==Z){W[0]=F;e:for(var J=0,ue=W.length,ye=ue>>>1;J<ye;){var le=2*(J+1)-1,xe=W[le],Pe=le+1,Me=W[Pe];if(0>r(xe,F))Pe<ue&&0>r(Me,xe)?(W[J]=Me,W[Pe]=F,J=Pe):(W[J]=xe,W[le]=F,J=le);else if(Pe<ue&&0>r(Me,F))W[J]=Me,W[Pe]=F,J=Pe;else break e}}return Z}function r(W,Z){var F=W.sortIndex-Z.sortIndex;return F!==0?F:W.id-Z.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;n.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();n.unstable_now=function(){return o.now()-a}}var l=[],c=[],u=1,f=null,m=3,g=!1,x=!1,b=!1,w=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,S=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function E(W){for(var Z=t(c);Z!==null;){if(Z.callback===null)i(c);else if(Z.startTime<=W)i(c),Z.sortIndex=Z.expirationTime,e(l,Z);else break;Z=t(c)}}function I(W){if(b=!1,E(W),!x)if(t(l)!==null)x=!0,pe(U);else{var Z=t(c);Z!==null&&de(I,Z.startTime-W)}}function U(W,Z){x=!1,b&&(b=!1,v(P),P=-1),g=!0;var F=m;try{for(E(Z),f=t(l);f!==null&&(!(f.expirationTime>Z)||W&&!D());){var J=f.callback;if(typeof J=="function"){f.callback=null,m=f.priorityLevel;var ue=J(f.expirationTime<=Z);Z=n.unstable_now(),typeof ue=="function"?f.callback=ue:f===t(l)&&i(l),E(Z)}else i(l);f=t(l)}if(f!==null)var ye=!0;else{var le=t(c);le!==null&&de(I,le.startTime-Z),ye=!1}return ye}finally{f=null,m=F,g=!1}}var O=!1,C=null,P=-1,M=5,A=-1;function D(){return!(n.unstable_now()-A<M)}function B(){if(C!==null){var W=n.unstable_now();A=W;var Z=!0;try{Z=C(!0,W)}finally{Z?j():(O=!1,C=null)}}else O=!1}var j;if(typeof S=="function")j=function(){S(B)};else if(typeof MessageChannel<"u"){var te=new MessageChannel,ce=te.port2;te.port1.onmessage=B,j=function(){ce.postMessage(null)}}else j=function(){w(B,0)};function pe(W){C=W,O||(O=!0,j())}function de(W,Z){P=w(function(){W(n.unstable_now())},Z)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(W){W.callback=null},n.unstable_continueExecution=function(){x||g||(x=!0,pe(U))},n.unstable_forceFrameRate=function(W){0>W||125<W?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):M=0<W?Math.floor(1e3/W):5},n.unstable_getCurrentPriorityLevel=function(){return m},n.unstable_getFirstCallbackNode=function(){return t(l)},n.unstable_next=function(W){switch(m){case 1:case 2:case 3:var Z=3;break;default:Z=m}var F=m;m=Z;try{return W()}finally{m=F}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(W,Z){switch(W){case 1:case 2:case 3:case 4:case 5:break;default:W=3}var F=m;m=W;try{return Z()}finally{m=F}},n.unstable_scheduleCallback=function(W,Z,F){var J=n.unstable_now();switch(typeof F=="object"&&F!==null?(F=F.delay,F=typeof F=="number"&&0<F?J+F:J):F=J,W){case 1:var ue=-1;break;case 2:ue=250;break;case 5:ue=1073741823;break;case 4:ue=1e4;break;default:ue=5e3}return ue=F+ue,W={id:u++,callback:Z,priorityLevel:W,startTime:F,expirationTime:ue,sortIndex:-1},F>J?(W.sortIndex=F,e(c,W),t(l)===null&&W===t(c)&&(b?(v(P),P=-1):b=!0,de(I,F-J))):(W.sortIndex=ue,e(l,W),x||g||(x=!0,pe(U))),W},n.unstable_shouldYield=D,n.unstable_wrapCallback=function(W){var Z=m;return function(){var F=m;m=Z;try{return W.apply(this,arguments)}finally{m=F}}}})(CO);EO.exports=CO;var YH=EO.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var JH=V,Bs=YH;function je(n){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+n,t=1;t<arguments.length;t++)e+="&args[]="+encodeURIComponent(arguments[t]);return"Minified React error #"+n+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var AO=new Set,Dm={};function ch(n,e){Zd(n,e),Zd(n+"Capture",e)}function Zd(n,e){for(Dm[n]=e,n=0;n<e.length;n++)AO.add(e[n])}var Wa=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),fE=Object.prototype.hasOwnProperty,QH=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,bR={},SR={};function ZH(n){return fE.call(SR,n)?!0:fE.call(bR,n)?!1:QH.test(n)?SR[n]=!0:(bR[n]=!0,!1)}function eG(n,e,t,i){if(t!==null&&t.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return i?!1:t!==null?!t.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function tG(n,e,t,i){if(e===null||typeof e>"u"||eG(n,e,t,i))return!0;if(i)return!1;if(t!==null)switch(t.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function es(n,e,t,i,r,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=i,this.attributeNamespace=r,this.mustUseProperty=t,this.propertyName=n,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var gr={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){gr[n]=new es(n,0,!1,n,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var e=n[0];gr[e]=new es(e,1,!1,n[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(n){gr[n]=new es(n,2,!1,n.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){gr[n]=new es(n,2,!1,n,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){gr[n]=new es(n,3,!1,n.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(n){gr[n]=new es(n,3,!0,n,null,!1,!1)});["capture","download"].forEach(function(n){gr[n]=new es(n,4,!1,n,null,!1,!1)});["cols","rows","size","span"].forEach(function(n){gr[n]=new es(n,6,!1,n,null,!1,!1)});["rowSpan","start"].forEach(function(n){gr[n]=new es(n,5,!1,n.toLowerCase(),null,!1,!1)});var TC=/[\-:]([a-z])/g;function EC(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var e=n.replace(TC,EC);gr[e]=new es(e,1,!1,n,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var e=n.replace(TC,EC);gr[e]=new es(e,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(n){var e=n.replace(TC,EC);gr[e]=new es(e,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(n){gr[n]=new es(n,1,!1,n.toLowerCase(),null,!1,!1)});gr.xlinkHref=new es("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(n){gr[n]=new es(n,1,!1,n.toLowerCase(),null,!0,!0)});function CC(n,e,t,i){var r=gr.hasOwnProperty(e)?gr[e]:null;(r!==null?r.type!==0:i||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(tG(e,t,r,i)&&(t=null),i||r===null?ZH(e)&&(t===null?n.removeAttribute(e):n.setAttribute(e,""+t)):r.mustUseProperty?n[r.propertyName]=t===null?r.type===3?!1:"":t:(e=r.attributeName,i=r.attributeNamespace,t===null?n.removeAttribute(e):(r=r.type,t=r===3||r===4&&t===!0?"":""+t,i?n.setAttributeNS(i,e,t):n.setAttribute(e,t))))}var rl=JH.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,sv=Symbol.for("react.element"),pd=Symbol.for("react.portal"),md=Symbol.for("react.fragment"),AC=Symbol.for("react.strict_mode"),pE=Symbol.for("react.profiler"),MO=Symbol.for("react.provider"),IO=Symbol.for("react.context"),MC=Symbol.for("react.forward_ref"),mE=Symbol.for("react.suspense"),gE=Symbol.for("react.suspense_list"),IC=Symbol.for("react.memo"),Pl=Symbol.for("react.lazy"),PO=Symbol.for("react.offscreen"),TR=Symbol.iterator;function pp(n){return n===null||typeof n!="object"?null:(n=TR&&n[TR]||n["@@iterator"],typeof n=="function"?n:null)}var pi=Object.assign,xS;function zp(n){if(xS===void 0)try{throw Error()}catch(t){var e=t.stack.trim().match(/\n( *(at )?)/);xS=e&&e[1]||""}return`
`+xS+n}var _S=!1;function wS(n,e){if(!n||_S)return"";_S=!0;var t=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var i=c}Reflect.construct(n,[],e)}else{try{e.call()}catch(c){i=c}n.call(e.prototype)}else{try{throw Error()}catch(c){i=c}n()}}catch(c){if(c&&i&&typeof c.stack=="string"){for(var r=c.stack.split(`
`),s=i.stack.split(`
`),o=r.length-1,a=s.length-1;1<=o&&0<=a&&r[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(r[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||r[o]!==s[a]){var l=`
`+r[o].replace(" at new "," at ");return n.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",n.displayName)),l}while(1<=o&&0<=a);break}}}finally{_S=!1,Error.prepareStackTrace=t}return(n=n?n.displayName||n.name:"")?zp(n):""}function nG(n){switch(n.tag){case 5:return zp(n.type);case 16:return zp("Lazy");case 13:return zp("Suspense");case 19:return zp("SuspenseList");case 0:case 2:case 15:return n=wS(n.type,!1),n;case 11:return n=wS(n.type.render,!1),n;case 1:return n=wS(n.type,!0),n;default:return""}}function yE(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case md:return"Fragment";case pd:return"Portal";case pE:return"Profiler";case AC:return"StrictMode";case mE:return"Suspense";case gE:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case IO:return(n.displayName||"Context")+".Consumer";case MO:return(n._context.displayName||"Context")+".Provider";case MC:var e=n.render;return n=n.displayName,n||(n=e.displayName||e.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case IC:return e=n.displayName||null,e!==null?e:yE(n.type)||"Memo";case Pl:e=n._payload,n=n._init;try{return yE(n(e))}catch{}}return null}function iG(n){var e=n.type;switch(n.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=e.render,n=n.displayName||n.name||"",e.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return yE(e);case 8:return e===AC?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function ac(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function RO(n){var e=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function rG(n){var e=RO(n)?"checked":"value",t=Object.getOwnPropertyDescriptor(n.constructor.prototype,e),i=""+n[e];if(!n.hasOwnProperty(e)&&typeof t<"u"&&typeof t.get=="function"&&typeof t.set=="function"){var r=t.get,s=t.set;return Object.defineProperty(n,e,{configurable:!0,get:function(){return r.call(this)},set:function(o){i=""+o,s.call(this,o)}}),Object.defineProperty(n,e,{enumerable:t.enumerable}),{getValue:function(){return i},setValue:function(o){i=""+o},stopTracking:function(){n._valueTracker=null,delete n[e]}}}}function ov(n){n._valueTracker||(n._valueTracker=rG(n))}function NO(n){if(!n)return!1;var e=n._valueTracker;if(!e)return!0;var t=e.getValue(),i="";return n&&(i=RO(n)?n.checked?"true":"false":n.value),n=i,n!==t?(e.setValue(n),!0):!1}function s0(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function vE(n,e){var t=e.checked;return pi({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:t??n._wrapperState.initialChecked})}function ER(n,e){var t=e.defaultValue==null?"":e.defaultValue,i=e.checked!=null?e.checked:e.defaultChecked;t=ac(e.value!=null?e.value:t),n._wrapperState={initialChecked:i,initialValue:t,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function DO(n,e){e=e.checked,e!=null&&CC(n,"checked",e,!1)}function xE(n,e){DO(n,e);var t=ac(e.value),i=e.type;if(t!=null)i==="number"?(t===0&&n.value===""||n.value!=t)&&(n.value=""+t):n.value!==""+t&&(n.value=""+t);else if(i==="submit"||i==="reset"){n.removeAttribute("value");return}e.hasOwnProperty("value")?_E(n,e.type,t):e.hasOwnProperty("defaultValue")&&_E(n,e.type,ac(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(n.defaultChecked=!!e.defaultChecked)}function CR(n,e,t){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var i=e.type;if(!(i!=="submit"&&i!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+n._wrapperState.initialValue,t||e===n.value||(n.value=e),n.defaultValue=e}t=n.name,t!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,t!==""&&(n.name=t)}function _E(n,e,t){(e!=="number"||s0(n.ownerDocument)!==n)&&(t==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+t&&(n.defaultValue=""+t))}var Hp=Array.isArray;function Bd(n,e,t,i){if(n=n.options,e){e={};for(var r=0;r<t.length;r++)e["$"+t[r]]=!0;for(t=0;t<n.length;t++)r=e.hasOwnProperty("$"+n[t].value),n[t].selected!==r&&(n[t].selected=r),r&&i&&(n[t].defaultSelected=!0)}else{for(t=""+ac(t),e=null,r=0;r<n.length;r++){if(n[r].value===t){n[r].selected=!0,i&&(n[r].defaultSelected=!0);return}e!==null||n[r].disabled||(e=n[r])}e!==null&&(e.selected=!0)}}function wE(n,e){if(e.dangerouslySetInnerHTML!=null)throw Error(je(91));return pi({},e,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function AR(n,e){var t=e.value;if(t==null){if(t=e.children,e=e.defaultValue,t!=null){if(e!=null)throw Error(je(92));if(Hp(t)){if(1<t.length)throw Error(je(93));t=t[0]}e=t}e==null&&(e=""),t=e}n._wrapperState={initialValue:ac(t)}}function LO(n,e){var t=ac(e.value),i=ac(e.defaultValue);t!=null&&(t=""+t,t!==n.value&&(n.value=t),e.defaultValue==null&&n.defaultValue!==t&&(n.defaultValue=t)),i!=null&&(n.defaultValue=""+i)}function MR(n){var e=n.textContent;e===n._wrapperState.initialValue&&e!==""&&e!==null&&(n.value=e)}function kO(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function bE(n,e){return n==null||n==="http://www.w3.org/1999/xhtml"?kO(e):n==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var av,OO=function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,t,i,r){MSApp.execUnsafeLocalFunction(function(){return n(e,t,i,r)})}:n}(function(n,e){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=e;else{for(av=av||document.createElement("div"),av.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=av.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;e.firstChild;)n.appendChild(e.firstChild)}});function Lm(n,e){if(e){var t=n.firstChild;if(t&&t===n.lastChild&&t.nodeType===3){t.nodeValue=e;return}}n.textContent=e}var rm={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},sG=["Webkit","ms","Moz","O"];Object.keys(rm).forEach(function(n){sG.forEach(function(e){e=e+n.charAt(0).toUpperCase()+n.substring(1),rm[e]=rm[n]})});function UO(n,e,t){return e==null||typeof e=="boolean"||e===""?"":t||typeof e!="number"||e===0||rm.hasOwnProperty(n)&&rm[n]?(""+e).trim():e+"px"}function FO(n,e){n=n.style;for(var t in e)if(e.hasOwnProperty(t)){var i=t.indexOf("--")===0,r=UO(t,e[t],i);t==="float"&&(t="cssFloat"),i?n.setProperty(t,r):n[t]=r}}var oG=pi({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function SE(n,e){if(e){if(oG[n]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(je(137,n));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(je(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(je(61))}if(e.style!=null&&typeof e.style!="object")throw Error(je(62))}}function TE(n,e){if(n.indexOf("-")===-1)return typeof e.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var EE=null;function PC(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var CE=null,zd=null,Hd=null;function IR(n){if(n=jg(n)){if(typeof CE!="function")throw Error(je(280));var e=n.stateNode;e&&(e=tw(e),CE(n.stateNode,n.type,e))}}function jO(n){zd?Hd?Hd.push(n):Hd=[n]:zd=n}function VO(){if(zd){var n=zd,e=Hd;if(Hd=zd=null,IR(n),e)for(n=0;n<e.length;n++)IR(e[n])}}function BO(n,e){return n(e)}function zO(){}var bS=!1;function HO(n,e,t){if(bS)return n(e,t);bS=!0;try{return BO(n,e,t)}finally{bS=!1,(zd!==null||Hd!==null)&&(zO(),VO())}}function km(n,e){var t=n.stateNode;if(t===null)return null;var i=tw(t);if(i===null)return null;t=i[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(n=n.type,i=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!i;break e;default:n=!1}if(n)return null;if(t&&typeof t!="function")throw Error(je(231,e,typeof t));return t}var AE=!1;if(Wa)try{var mp={};Object.defineProperty(mp,"passive",{get:function(){AE=!0}}),window.addEventListener("test",mp,mp),window.removeEventListener("test",mp,mp)}catch{AE=!1}function aG(n,e,t,i,r,s,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(t,c)}catch(u){this.onError(u)}}var sm=!1,o0=null,a0=!1,ME=null,lG={onError:function(n){sm=!0,o0=n}};function cG(n,e,t,i,r,s,o,a,l){sm=!1,o0=null,aG.apply(lG,arguments)}function uG(n,e,t,i,r,s,o,a,l){if(cG.apply(this,arguments),sm){if(sm){var c=o0;sm=!1,o0=null}else throw Error(je(198));a0||(a0=!0,ME=c)}}function uh(n){var e=n,t=n;if(n.alternate)for(;e.return;)e=e.return;else{n=e;do e=n,e.flags&4098&&(t=e.return),n=e.return;while(n)}return e.tag===3?t:null}function GO(n){if(n.tag===13){var e=n.memoizedState;if(e===null&&(n=n.alternate,n!==null&&(e=n.memoizedState)),e!==null)return e.dehydrated}return null}function PR(n){if(uh(n)!==n)throw Error(je(188))}function hG(n){var e=n.alternate;if(!e){if(e=uh(n),e===null)throw Error(je(188));return e!==n?null:n}for(var t=n,i=e;;){var r=t.return;if(r===null)break;var s=r.alternate;if(s===null){if(i=r.return,i!==null){t=i;continue}break}if(r.child===s.child){for(s=r.child;s;){if(s===t)return PR(r),n;if(s===i)return PR(r),e;s=s.sibling}throw Error(je(188))}if(t.return!==i.return)t=r,i=s;else{for(var o=!1,a=r.child;a;){if(a===t){o=!0,t=r,i=s;break}if(a===i){o=!0,i=r,t=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===t){o=!0,t=s,i=r;break}if(a===i){o=!0,i=s,t=r;break}a=a.sibling}if(!o)throw Error(je(189))}}if(t.alternate!==i)throw Error(je(190))}if(t.tag!==3)throw Error(je(188));return t.stateNode.current===t?n:e}function WO(n){return n=hG(n),n!==null?qO(n):null}function qO(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var e=qO(n);if(e!==null)return e;n=n.sibling}return null}var $O=Bs.unstable_scheduleCallback,RR=Bs.unstable_cancelCallback,dG=Bs.unstable_shouldYield,fG=Bs.unstable_requestPaint,Ai=Bs.unstable_now,pG=Bs.unstable_getCurrentPriorityLevel,RC=Bs.unstable_ImmediatePriority,XO=Bs.unstable_UserBlockingPriority,l0=Bs.unstable_NormalPriority,mG=Bs.unstable_LowPriority,KO=Bs.unstable_IdlePriority,J_=null,Zo=null;function gG(n){if(Zo&&typeof Zo.onCommitFiberRoot=="function")try{Zo.onCommitFiberRoot(J_,n,void 0,(n.current.flags&128)===128)}catch{}}var Po=Math.clz32?Math.clz32:xG,yG=Math.log,vG=Math.LN2;function xG(n){return n>>>=0,n===0?32:31-(yG(n)/vG|0)|0}var lv=64,cv=4194304;function Gp(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function c0(n,e){var t=n.pendingLanes;if(t===0)return 0;var i=0,r=n.suspendedLanes,s=n.pingedLanes,o=t&268435455;if(o!==0){var a=o&~r;a!==0?i=Gp(a):(s&=o,s!==0&&(i=Gp(s)))}else o=t&~r,o!==0?i=Gp(o):s!==0&&(i=Gp(s));if(i===0)return 0;if(e!==0&&e!==i&&!(e&r)&&(r=i&-i,s=e&-e,r>=s||r===16&&(s&4194240)!==0))return e;if(i&4&&(i|=t&16),e=n.entangledLanes,e!==0)for(n=n.entanglements,e&=i;0<e;)t=31-Po(e),r=1<<t,i|=n[t],e&=~r;return i}function _G(n,e){switch(n){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function wG(n,e){for(var t=n.suspendedLanes,i=n.pingedLanes,r=n.expirationTimes,s=n.pendingLanes;0<s;){var o=31-Po(s),a=1<<o,l=r[o];l===-1?(!(a&t)||a&i)&&(r[o]=_G(a,e)):l<=e&&(n.expiredLanes|=a),s&=~a}}function IE(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function YO(){var n=lv;return lv<<=1,!(lv&4194240)&&(lv=64),n}function SS(n){for(var e=[],t=0;31>t;t++)e.push(n);return e}function Ug(n,e,t){n.pendingLanes|=e,e!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,e=31-Po(e),n[e]=t}function bG(n,e){var t=n.pendingLanes&~e;n.pendingLanes=e,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=e,n.mutableReadLanes&=e,n.entangledLanes&=e,e=n.entanglements;var i=n.eventTimes;for(n=n.expirationTimes;0<t;){var r=31-Po(t),s=1<<r;e[r]=0,i[r]=-1,n[r]=-1,t&=~s}}function NC(n,e){var t=n.entangledLanes|=e;for(n=n.entanglements;t;){var i=31-Po(t),r=1<<i;r&e|n[i]&e&&(n[i]|=e),t&=~r}}var qn=0;function JO(n){return n&=-n,1<n?4<n?n&268435455?16:536870912:4:1}var QO,DC,ZO,eU,tU,PE=!1,uv=[],$l=null,Xl=null,Kl=null,Om=new Map,Um=new Map,Ll=[],SG="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function NR(n,e){switch(n){case"focusin":case"focusout":$l=null;break;case"dragenter":case"dragleave":Xl=null;break;case"mouseover":case"mouseout":Kl=null;break;case"pointerover":case"pointerout":Om.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Um.delete(e.pointerId)}}function gp(n,e,t,i,r,s){return n===null||n.nativeEvent!==s?(n={blockedOn:e,domEventName:t,eventSystemFlags:i,nativeEvent:s,targetContainers:[r]},e!==null&&(e=jg(e),e!==null&&DC(e)),n):(n.eventSystemFlags|=i,e=n.targetContainers,r!==null&&e.indexOf(r)===-1&&e.push(r),n)}function TG(n,e,t,i,r){switch(e){case"focusin":return $l=gp($l,n,e,t,i,r),!0;case"dragenter":return Xl=gp(Xl,n,e,t,i,r),!0;case"mouseover":return Kl=gp(Kl,n,e,t,i,r),!0;case"pointerover":var s=r.pointerId;return Om.set(s,gp(Om.get(s)||null,n,e,t,i,r)),!0;case"gotpointercapture":return s=r.pointerId,Um.set(s,gp(Um.get(s)||null,n,e,t,i,r)),!0}return!1}function nU(n){var e=Eu(n.target);if(e!==null){var t=uh(e);if(t!==null){if(e=t.tag,e===13){if(e=GO(t),e!==null){n.blockedOn=e,tU(n.priority,function(){ZO(t)});return}}else if(e===3&&t.stateNode.current.memoizedState.isDehydrated){n.blockedOn=t.tag===3?t.stateNode.containerInfo:null;return}}}n.blockedOn=null}function Ix(n){if(n.blockedOn!==null)return!1;for(var e=n.targetContainers;0<e.length;){var t=RE(n.domEventName,n.eventSystemFlags,e[0],n.nativeEvent);if(t===null){t=n.nativeEvent;var i=new t.constructor(t.type,t);EE=i,t.target.dispatchEvent(i),EE=null}else return e=jg(t),e!==null&&DC(e),n.blockedOn=t,!1;e.shift()}return!0}function DR(n,e,t){Ix(n)&&t.delete(e)}function EG(){PE=!1,$l!==null&&Ix($l)&&($l=null),Xl!==null&&Ix(Xl)&&(Xl=null),Kl!==null&&Ix(Kl)&&(Kl=null),Om.forEach(DR),Um.forEach(DR)}function yp(n,e){n.blockedOn===e&&(n.blockedOn=null,PE||(PE=!0,Bs.unstable_scheduleCallback(Bs.unstable_NormalPriority,EG)))}function Fm(n){function e(r){return yp(r,n)}if(0<uv.length){yp(uv[0],n);for(var t=1;t<uv.length;t++){var i=uv[t];i.blockedOn===n&&(i.blockedOn=null)}}for($l!==null&&yp($l,n),Xl!==null&&yp(Xl,n),Kl!==null&&yp(Kl,n),Om.forEach(e),Um.forEach(e),t=0;t<Ll.length;t++)i=Ll[t],i.blockedOn===n&&(i.blockedOn=null);for(;0<Ll.length&&(t=Ll[0],t.blockedOn===null);)nU(t),t.blockedOn===null&&Ll.shift()}var Gd=rl.ReactCurrentBatchConfig,u0=!0;function CG(n,e,t,i){var r=qn,s=Gd.transition;Gd.transition=null;try{qn=1,LC(n,e,t,i)}finally{qn=r,Gd.transition=s}}function AG(n,e,t,i){var r=qn,s=Gd.transition;Gd.transition=null;try{qn=4,LC(n,e,t,i)}finally{qn=r,Gd.transition=s}}function LC(n,e,t,i){if(u0){var r=RE(n,e,t,i);if(r===null)DS(n,e,i,h0,t),NR(n,i);else if(TG(r,n,e,t,i))i.stopPropagation();else if(NR(n,i),e&4&&-1<SG.indexOf(n)){for(;r!==null;){var s=jg(r);if(s!==null&&QO(s),s=RE(n,e,t,i),s===null&&DS(n,e,i,h0,t),s===r)break;r=s}r!==null&&i.stopPropagation()}else DS(n,e,i,null,t)}}var h0=null;function RE(n,e,t,i){if(h0=null,n=PC(i),n=Eu(n),n!==null)if(e=uh(n),e===null)n=null;else if(t=e.tag,t===13){if(n=GO(e),n!==null)return n;n=null}else if(t===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;n=null}else e!==n&&(n=null);return h0=n,null}function iU(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(pG()){case RC:return 1;case XO:return 4;case l0:case mG:return 16;case KO:return 536870912;default:return 16}default:return 16}}var zl=null,kC=null,Px=null;function rU(){if(Px)return Px;var n,e=kC,t=e.length,i,r="value"in zl?zl.value:zl.textContent,s=r.length;for(n=0;n<t&&e[n]===r[n];n++);var o=t-n;for(i=1;i<=o&&e[t-i]===r[s-i];i++);return Px=r.slice(n,1<i?1-i:void 0)}function Rx(n){var e=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&e===13&&(n=13)):n=e,n===10&&(n=13),32<=n||n===13?n:0}function hv(){return!0}function LR(){return!1}function Ws(n){function e(t,i,r,s,o){this._reactName=t,this._targetInst=r,this.type=i,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in n)n.hasOwnProperty(a)&&(t=n[a],this[a]=t?t(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?hv:LR,this.isPropagationStopped=LR,this}return pi(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():typeof t.returnValue!="unknown"&&(t.returnValue=!1),this.isDefaultPrevented=hv)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():typeof t.cancelBubble!="unknown"&&(t.cancelBubble=!0),this.isPropagationStopped=hv)},persist:function(){},isPersistent:hv}),e}var Ef={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},OC=Ws(Ef),Fg=pi({},Ef,{view:0,detail:0}),MG=Ws(Fg),TS,ES,vp,Q_=pi({},Fg,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:UC,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==vp&&(vp&&n.type==="mousemove"?(TS=n.screenX-vp.screenX,ES=n.screenY-vp.screenY):ES=TS=0,vp=n),TS)},movementY:function(n){return"movementY"in n?n.movementY:ES}}),kR=Ws(Q_),IG=pi({},Q_,{dataTransfer:0}),PG=Ws(IG),RG=pi({},Fg,{relatedTarget:0}),CS=Ws(RG),NG=pi({},Ef,{animationName:0,elapsedTime:0,pseudoElement:0}),DG=Ws(NG),LG=pi({},Ef,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),kG=Ws(LG),OG=pi({},Ef,{data:0}),OR=Ws(OG),UG={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},FG={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},jG={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function VG(n){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(n):(n=jG[n])?!!e[n]:!1}function UC(){return VG}var BG=pi({},Fg,{key:function(n){if(n.key){var e=UG[n.key]||n.key;if(e!=="Unidentified")return e}return n.type==="keypress"?(n=Rx(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?FG[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:UC,charCode:function(n){return n.type==="keypress"?Rx(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?Rx(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),zG=Ws(BG),HG=pi({},Q_,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),UR=Ws(HG),GG=pi({},Fg,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:UC}),WG=Ws(GG),qG=pi({},Ef,{propertyName:0,elapsedTime:0,pseudoElement:0}),$G=Ws(qG),XG=pi({},Q_,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),KG=Ws(XG),YG=[9,13,27,32],FC=Wa&&"CompositionEvent"in window,om=null;Wa&&"documentMode"in document&&(om=document.documentMode);var JG=Wa&&"TextEvent"in window&&!om,sU=Wa&&(!FC||om&&8<om&&11>=om),FR=" ",jR=!1;function oU(n,e){switch(n){case"keyup":return YG.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function aU(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var gd=!1;function QG(n,e){switch(n){case"compositionend":return aU(e);case"keypress":return e.which!==32?null:(jR=!0,FR);case"textInput":return n=e.data,n===FR&&jR?null:n;default:return null}}function ZG(n,e){if(gd)return n==="compositionend"||!FC&&oU(n,e)?(n=rU(),Px=kC=zl=null,gd=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return sU&&e.locale!=="ko"?null:e.data;default:return null}}var eW={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function VR(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e==="input"?!!eW[n.type]:e==="textarea"}function lU(n,e,t,i){jO(i),e=d0(e,"onChange"),0<e.length&&(t=new OC("onChange","change",null,t,i),n.push({event:t,listeners:e}))}var am=null,jm=null;function tW(n){xU(n,0)}function Z_(n){var e=xd(n);if(NO(e))return n}function nW(n,e){if(n==="change")return e}var cU=!1;if(Wa){var AS;if(Wa){var MS="oninput"in document;if(!MS){var BR=document.createElement("div");BR.setAttribute("oninput","return;"),MS=typeof BR.oninput=="function"}AS=MS}else AS=!1;cU=AS&&(!document.documentMode||9<document.documentMode)}function zR(){am&&(am.detachEvent("onpropertychange",uU),jm=am=null)}function uU(n){if(n.propertyName==="value"&&Z_(jm)){var e=[];lU(e,jm,n,PC(n)),HO(tW,e)}}function iW(n,e,t){n==="focusin"?(zR(),am=e,jm=t,am.attachEvent("onpropertychange",uU)):n==="focusout"&&zR()}function rW(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return Z_(jm)}function sW(n,e){if(n==="click")return Z_(e)}function oW(n,e){if(n==="input"||n==="change")return Z_(e)}function aW(n,e){return n===e&&(n!==0||1/n===1/e)||n!==n&&e!==e}var Do=typeof Object.is=="function"?Object.is:aW;function Vm(n,e){if(Do(n,e))return!0;if(typeof n!="object"||n===null||typeof e!="object"||e===null)return!1;var t=Object.keys(n),i=Object.keys(e);if(t.length!==i.length)return!1;for(i=0;i<t.length;i++){var r=t[i];if(!fE.call(e,r)||!Do(n[r],e[r]))return!1}return!0}function HR(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function GR(n,e){var t=HR(n);n=0;for(var i;t;){if(t.nodeType===3){if(i=n+t.textContent.length,n<=e&&i>=e)return{node:t,offset:e-n};n=i}e:{for(;t;){if(t.nextSibling){t=t.nextSibling;break e}t=t.parentNode}t=void 0}t=HR(t)}}function hU(n,e){return n&&e?n===e?!0:n&&n.nodeType===3?!1:e&&e.nodeType===3?hU(n,e.parentNode):"contains"in n?n.contains(e):n.compareDocumentPosition?!!(n.compareDocumentPosition(e)&16):!1:!1}function dU(){for(var n=window,e=s0();e instanceof n.HTMLIFrameElement;){try{var t=typeof e.contentWindow.location.href=="string"}catch{t=!1}if(t)n=e.contentWindow;else break;e=s0(n.document)}return e}function jC(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e&&(e==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||e==="textarea"||n.contentEditable==="true")}function lW(n){var e=dU(),t=n.focusedElem,i=n.selectionRange;if(e!==t&&t&&t.ownerDocument&&hU(t.ownerDocument.documentElement,t)){if(i!==null&&jC(t)){if(e=i.start,n=i.end,n===void 0&&(n=e),"selectionStart"in t)t.selectionStart=e,t.selectionEnd=Math.min(n,t.value.length);else if(n=(e=t.ownerDocument||document)&&e.defaultView||window,n.getSelection){n=n.getSelection();var r=t.textContent.length,s=Math.min(i.start,r);i=i.end===void 0?s:Math.min(i.end,r),!n.extend&&s>i&&(r=i,i=s,s=r),r=GR(t,s);var o=GR(t,i);r&&o&&(n.rangeCount!==1||n.anchorNode!==r.node||n.anchorOffset!==r.offset||n.focusNode!==o.node||n.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(r.node,r.offset),n.removeAllRanges(),s>i?(n.addRange(e),n.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),n.addRange(e)))}}for(e=[],n=t;n=n.parentNode;)n.nodeType===1&&e.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof t.focus=="function"&&t.focus(),t=0;t<e.length;t++)n=e[t],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var cW=Wa&&"documentMode"in document&&11>=document.documentMode,yd=null,NE=null,lm=null,DE=!1;function WR(n,e,t){var i=t.window===t?t.document:t.nodeType===9?t:t.ownerDocument;DE||yd==null||yd!==s0(i)||(i=yd,"selectionStart"in i&&jC(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),lm&&Vm(lm,i)||(lm=i,i=d0(NE,"onSelect"),0<i.length&&(e=new OC("onSelect","select",null,e,t),n.push({event:e,listeners:i}),e.target=yd)))}function dv(n,e){var t={};return t[n.toLowerCase()]=e.toLowerCase(),t["Webkit"+n]="webkit"+e,t["Moz"+n]="moz"+e,t}var vd={animationend:dv("Animation","AnimationEnd"),animationiteration:dv("Animation","AnimationIteration"),animationstart:dv("Animation","AnimationStart"),transitionend:dv("Transition","TransitionEnd")},IS={},fU={};Wa&&(fU=document.createElement("div").style,"AnimationEvent"in window||(delete vd.animationend.animation,delete vd.animationiteration.animation,delete vd.animationstart.animation),"TransitionEvent"in window||delete vd.transitionend.transition);function ew(n){if(IS[n])return IS[n];if(!vd[n])return n;var e=vd[n],t;for(t in e)if(e.hasOwnProperty(t)&&t in fU)return IS[n]=e[t];return n}var pU=ew("animationend"),mU=ew("animationiteration"),gU=ew("animationstart"),yU=ew("transitionend"),vU=new Map,qR="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Sc(n,e){vU.set(n,e),ch(e,[n])}for(var PS=0;PS<qR.length;PS++){var RS=qR[PS],uW=RS.toLowerCase(),hW=RS[0].toUpperCase()+RS.slice(1);Sc(uW,"on"+hW)}Sc(pU,"onAnimationEnd");Sc(mU,"onAnimationIteration");Sc(gU,"onAnimationStart");Sc("dblclick","onDoubleClick");Sc("focusin","onFocus");Sc("focusout","onBlur");Sc(yU,"onTransitionEnd");Zd("onMouseEnter",["mouseout","mouseover"]);Zd("onMouseLeave",["mouseout","mouseover"]);Zd("onPointerEnter",["pointerout","pointerover"]);Zd("onPointerLeave",["pointerout","pointerover"]);ch("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));ch("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));ch("onBeforeInput",["compositionend","keypress","textInput","paste"]);ch("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));ch("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));ch("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Wp="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),dW=new Set("cancel close invalid load scroll toggle".split(" ").concat(Wp));function $R(n,e,t){var i=n.type||"unknown-event";n.currentTarget=t,uG(i,e,void 0,n),n.currentTarget=null}function xU(n,e){e=(e&4)!==0;for(var t=0;t<n.length;t++){var i=n[t],r=i.event;i=i.listeners;e:{var s=void 0;if(e)for(var o=i.length-1;0<=o;o--){var a=i[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==s&&r.isPropagationStopped())break e;$R(r,a,c),s=l}else for(o=0;o<i.length;o++){if(a=i[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==s&&r.isPropagationStopped())break e;$R(r,a,c),s=l}}}if(a0)throw n=ME,a0=!1,ME=null,n}function ei(n,e){var t=e[FE];t===void 0&&(t=e[FE]=new Set);var i=n+"__bubble";t.has(i)||(_U(e,n,2,!1),t.add(i))}function NS(n,e,t){var i=0;e&&(i|=4),_U(t,n,i,e)}var fv="_reactListening"+Math.random().toString(36).slice(2);function Bm(n){if(!n[fv]){n[fv]=!0,AO.forEach(function(t){t!=="selectionchange"&&(dW.has(t)||NS(t,!1,n),NS(t,!0,n))});var e=n.nodeType===9?n:n.ownerDocument;e===null||e[fv]||(e[fv]=!0,NS("selectionchange",!1,e))}}function _U(n,e,t,i){switch(iU(e)){case 1:var r=CG;break;case 4:r=AG;break;default:r=LC}t=r.bind(null,e,t,n),r=void 0,!AE||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(r=!0),i?r!==void 0?n.addEventListener(e,t,{capture:!0,passive:r}):n.addEventListener(e,t,!0):r!==void 0?n.addEventListener(e,t,{passive:r}):n.addEventListener(e,t,!1)}function DS(n,e,t,i,r){var s=i;if(!(e&1)&&!(e&2)&&i!==null)e:for(;;){if(i===null)return;var o=i.tag;if(o===3||o===4){var a=i.stateNode.containerInfo;if(a===r||a.nodeType===8&&a.parentNode===r)break;if(o===4)for(o=i.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===r||l.nodeType===8&&l.parentNode===r))return;o=o.return}for(;a!==null;){if(o=Eu(a),o===null)return;if(l=o.tag,l===5||l===6){i=s=o;continue e}a=a.parentNode}}i=i.return}HO(function(){var c=s,u=PC(t),f=[];e:{var m=vU.get(n);if(m!==void 0){var g=OC,x=n;switch(n){case"keypress":if(Rx(t)===0)break e;case"keydown":case"keyup":g=zG;break;case"focusin":x="focus",g=CS;break;case"focusout":x="blur",g=CS;break;case"beforeblur":case"afterblur":g=CS;break;case"click":if(t.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":g=kR;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":g=PG;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":g=WG;break;case pU:case mU:case gU:g=DG;break;case yU:g=$G;break;case"scroll":g=MG;break;case"wheel":g=KG;break;case"copy":case"cut":case"paste":g=kG;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":g=UR}var b=(e&4)!==0,w=!b&&n==="scroll",v=b?m!==null?m+"Capture":null:m;b=[];for(var S=c,E;S!==null;){E=S;var I=E.stateNode;if(E.tag===5&&I!==null&&(E=I,v!==null&&(I=km(S,v),I!=null&&b.push(zm(S,I,E)))),w)break;S=S.return}0<b.length&&(m=new g(m,x,null,t,u),f.push({event:m,listeners:b}))}}if(!(e&7)){e:{if(m=n==="mouseover"||n==="pointerover",g=n==="mouseout"||n==="pointerout",m&&t!==EE&&(x=t.relatedTarget||t.fromElement)&&(Eu(x)||x[qa]))break e;if((g||m)&&(m=u.window===u?u:(m=u.ownerDocument)?m.defaultView||m.parentWindow:window,g?(x=t.relatedTarget||t.toElement,g=c,x=x?Eu(x):null,x!==null&&(w=uh(x),x!==w||x.tag!==5&&x.tag!==6)&&(x=null)):(g=null,x=c),g!==x)){if(b=kR,I="onMouseLeave",v="onMouseEnter",S="mouse",(n==="pointerout"||n==="pointerover")&&(b=UR,I="onPointerLeave",v="onPointerEnter",S="pointer"),w=g==null?m:xd(g),E=x==null?m:xd(x),m=new b(I,S+"leave",g,t,u),m.target=w,m.relatedTarget=E,I=null,Eu(u)===c&&(b=new b(v,S+"enter",x,t,u),b.target=E,b.relatedTarget=w,I=b),w=I,g&&x)t:{for(b=g,v=x,S=0,E=b;E;E=jh(E))S++;for(E=0,I=v;I;I=jh(I))E++;for(;0<S-E;)b=jh(b),S--;for(;0<E-S;)v=jh(v),E--;for(;S--;){if(b===v||v!==null&&b===v.alternate)break t;b=jh(b),v=jh(v)}b=null}else b=null;g!==null&&XR(f,m,g,b,!1),x!==null&&w!==null&&XR(f,w,x,b,!0)}}e:{if(m=c?xd(c):window,g=m.nodeName&&m.nodeName.toLowerCase(),g==="select"||g==="input"&&m.type==="file")var U=nW;else if(VR(m))if(cU)U=oW;else{U=rW;var O=iW}else(g=m.nodeName)&&g.toLowerCase()==="input"&&(m.type==="checkbox"||m.type==="radio")&&(U=sW);if(U&&(U=U(n,c))){lU(f,U,t,u);break e}O&&O(n,m,c),n==="focusout"&&(O=m._wrapperState)&&O.controlled&&m.type==="number"&&_E(m,"number",m.value)}switch(O=c?xd(c):window,n){case"focusin":(VR(O)||O.contentEditable==="true")&&(yd=O,NE=c,lm=null);break;case"focusout":lm=NE=yd=null;break;case"mousedown":DE=!0;break;case"contextmenu":case"mouseup":case"dragend":DE=!1,WR(f,t,u);break;case"selectionchange":if(cW)break;case"keydown":case"keyup":WR(f,t,u)}var C;if(FC)e:{switch(n){case"compositionstart":var P="onCompositionStart";break e;case"compositionend":P="onCompositionEnd";break e;case"compositionupdate":P="onCompositionUpdate";break e}P=void 0}else gd?oU(n,t)&&(P="onCompositionEnd"):n==="keydown"&&t.keyCode===229&&(P="onCompositionStart");P&&(sU&&t.locale!=="ko"&&(gd||P!=="onCompositionStart"?P==="onCompositionEnd"&&gd&&(C=rU()):(zl=u,kC="value"in zl?zl.value:zl.textContent,gd=!0)),O=d0(c,P),0<O.length&&(P=new OR(P,n,null,t,u),f.push({event:P,listeners:O}),C?P.data=C:(C=aU(t),C!==null&&(P.data=C)))),(C=JG?QG(n,t):ZG(n,t))&&(c=d0(c,"onBeforeInput"),0<c.length&&(u=new OR("onBeforeInput","beforeinput",null,t,u),f.push({event:u,listeners:c}),u.data=C))}xU(f,e)})}function zm(n,e,t){return{instance:n,listener:e,currentTarget:t}}function d0(n,e){for(var t=e+"Capture",i=[];n!==null;){var r=n,s=r.stateNode;r.tag===5&&s!==null&&(r=s,s=km(n,t),s!=null&&i.unshift(zm(n,s,r)),s=km(n,e),s!=null&&i.push(zm(n,s,r))),n=n.return}return i}function jh(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function XR(n,e,t,i,r){for(var s=e._reactName,o=[];t!==null&&t!==i;){var a=t,l=a.alternate,c=a.stateNode;if(l!==null&&l===i)break;a.tag===5&&c!==null&&(a=c,r?(l=km(t,s),l!=null&&o.unshift(zm(t,l,a))):r||(l=km(t,s),l!=null&&o.push(zm(t,l,a)))),t=t.return}o.length!==0&&n.push({event:e,listeners:o})}var fW=/\r\n?/g,pW=/\u0000|\uFFFD/g;function KR(n){return(typeof n=="string"?n:""+n).replace(fW,`
`).replace(pW,"")}function pv(n,e,t){if(e=KR(e),KR(n)!==e&&t)throw Error(je(425))}function f0(){}var LE=null,kE=null;function OE(n,e){return n==="textarea"||n==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var UE=typeof setTimeout=="function"?setTimeout:void 0,mW=typeof clearTimeout=="function"?clearTimeout:void 0,YR=typeof Promise=="function"?Promise:void 0,gW=typeof queueMicrotask=="function"?queueMicrotask:typeof YR<"u"?function(n){return YR.resolve(null).then(n).catch(yW)}:UE;function yW(n){setTimeout(function(){throw n})}function LS(n,e){var t=e,i=0;do{var r=t.nextSibling;if(n.removeChild(t),r&&r.nodeType===8)if(t=r.data,t==="/$"){if(i===0){n.removeChild(r),Fm(e);return}i--}else t!=="$"&&t!=="$?"&&t!=="$!"||i++;t=r}while(t);Fm(e)}function Yl(n){for(;n!=null;n=n.nextSibling){var e=n.nodeType;if(e===1||e===3)break;if(e===8){if(e=n.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return n}function JR(n){n=n.previousSibling;for(var e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="$"||t==="$!"||t==="$?"){if(e===0)return n;e--}else t==="/$"&&e++}n=n.previousSibling}return null}var Cf=Math.random().toString(36).slice(2),Ko="__reactFiber$"+Cf,Hm="__reactProps$"+Cf,qa="__reactContainer$"+Cf,FE="__reactEvents$"+Cf,vW="__reactListeners$"+Cf,xW="__reactHandles$"+Cf;function Eu(n){var e=n[Ko];if(e)return e;for(var t=n.parentNode;t;){if(e=t[qa]||t[Ko]){if(t=e.alternate,e.child!==null||t!==null&&t.child!==null)for(n=JR(n);n!==null;){if(t=n[Ko])return t;n=JR(n)}return e}n=t,t=n.parentNode}return null}function jg(n){return n=n[Ko]||n[qa],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function xd(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(je(33))}function tw(n){return n[Hm]||null}var jE=[],_d=-1;function Tc(n){return{current:n}}function ii(n){0>_d||(n.current=jE[_d],jE[_d]=null,_d--)}function Qn(n,e){_d++,jE[_d]=n.current,n.current=e}var lc={},jr=Tc(lc),ys=Tc(!1),Gu=lc;function ef(n,e){var t=n.type.contextTypes;if(!t)return lc;var i=n.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===e)return i.__reactInternalMemoizedMaskedChildContext;var r={},s;for(s in t)r[s]=e[s];return i&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=e,n.__reactInternalMemoizedMaskedChildContext=r),r}function vs(n){return n=n.childContextTypes,n!=null}function p0(){ii(ys),ii(jr)}function QR(n,e,t){if(jr.current!==lc)throw Error(je(168));Qn(jr,e),Qn(ys,t)}function wU(n,e,t){var i=n.stateNode;if(e=e.childContextTypes,typeof i.getChildContext!="function")return t;i=i.getChildContext();for(var r in i)if(!(r in e))throw Error(je(108,iG(n)||"Unknown",r));return pi({},t,i)}function m0(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||lc,Gu=jr.current,Qn(jr,n),Qn(ys,ys.current),!0}function ZR(n,e,t){var i=n.stateNode;if(!i)throw Error(je(169));t?(n=wU(n,e,Gu),i.__reactInternalMemoizedMergedChildContext=n,ii(ys),ii(jr),Qn(jr,n)):ii(ys),Qn(ys,t)}var Ma=null,nw=!1,kS=!1;function bU(n){Ma===null?Ma=[n]:Ma.push(n)}function _W(n){nw=!0,bU(n)}function Ec(){if(!kS&&Ma!==null){kS=!0;var n=0,e=qn;try{var t=Ma;for(qn=1;n<t.length;n++){var i=t[n];do i=i(!0);while(i!==null)}Ma=null,nw=!1}catch(r){throw Ma!==null&&(Ma=Ma.slice(n+1)),$O(RC,Ec),r}finally{qn=e,kS=!1}}return null}var wd=[],bd=0,g0=null,y0=0,ro=[],so=0,Wu=null,Ra=1,Na="";function pu(n,e){wd[bd++]=y0,wd[bd++]=g0,g0=n,y0=e}function SU(n,e,t){ro[so++]=Ra,ro[so++]=Na,ro[so++]=Wu,Wu=n;var i=Ra;n=Na;var r=32-Po(i)-1;i&=~(1<<r),t+=1;var s=32-Po(e)+r;if(30<s){var o=r-r%5;s=(i&(1<<o)-1).toString(32),i>>=o,r-=o,Ra=1<<32-Po(e)+r|t<<r|i,Na=s+n}else Ra=1<<s|t<<r|i,Na=n}function VC(n){n.return!==null&&(pu(n,1),SU(n,1,0))}function BC(n){for(;n===g0;)g0=wd[--bd],wd[bd]=null,y0=wd[--bd],wd[bd]=null;for(;n===Wu;)Wu=ro[--so],ro[so]=null,Na=ro[--so],ro[so]=null,Ra=ro[--so],ro[so]=null}var Os=null,Ls=null,li=!1,Co=null;function TU(n,e){var t=ao(5,null,null,0);t.elementType="DELETED",t.stateNode=e,t.return=n,e=n.deletions,e===null?(n.deletions=[t],n.flags|=16):e.push(t)}function eN(n,e){switch(n.tag){case 5:var t=n.type;return e=e.nodeType!==1||t.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(n.stateNode=e,Os=n,Ls=Yl(e.firstChild),!0):!1;case 6:return e=n.pendingProps===""||e.nodeType!==3?null:e,e!==null?(n.stateNode=e,Os=n,Ls=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(t=Wu!==null?{id:Ra,overflow:Na}:null,n.memoizedState={dehydrated:e,treeContext:t,retryLane:1073741824},t=ao(18,null,null,0),t.stateNode=e,t.return=n,n.child=t,Os=n,Ls=null,!0):!1;default:return!1}}function VE(n){return(n.mode&1)!==0&&(n.flags&128)===0}function BE(n){if(li){var e=Ls;if(e){var t=e;if(!eN(n,e)){if(VE(n))throw Error(je(418));e=Yl(t.nextSibling);var i=Os;e&&eN(n,e)?TU(i,t):(n.flags=n.flags&-4097|2,li=!1,Os=n)}}else{if(VE(n))throw Error(je(418));n.flags=n.flags&-4097|2,li=!1,Os=n}}}function tN(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;Os=n}function mv(n){if(n!==Os)return!1;if(!li)return tN(n),li=!0,!1;var e;if((e=n.tag!==3)&&!(e=n.tag!==5)&&(e=n.type,e=e!=="head"&&e!=="body"&&!OE(n.type,n.memoizedProps)),e&&(e=Ls)){if(VE(n))throw EU(),Error(je(418));for(;e;)TU(n,e),e=Yl(e.nextSibling)}if(tN(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(je(317));e:{for(n=n.nextSibling,e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="/$"){if(e===0){Ls=Yl(n.nextSibling);break e}e--}else t!=="$"&&t!=="$!"&&t!=="$?"||e++}n=n.nextSibling}Ls=null}}else Ls=Os?Yl(n.stateNode.nextSibling):null;return!0}function EU(){for(var n=Ls;n;)n=Yl(n.nextSibling)}function tf(){Ls=Os=null,li=!1}function zC(n){Co===null?Co=[n]:Co.push(n)}var wW=rl.ReactCurrentBatchConfig;function xp(n,e,t){if(n=t.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(t._owner){if(t=t._owner,t){if(t.tag!==1)throw Error(je(309));var i=t.stateNode}if(!i)throw Error(je(147,n));var r=i,s=""+n;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=r.refs;o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof n!="string")throw Error(je(284));if(!t._owner)throw Error(je(290,n))}return n}function gv(n,e){throw n=Object.prototype.toString.call(e),Error(je(31,n==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":n))}function nN(n){var e=n._init;return e(n._payload)}function CU(n){function e(v,S){if(n){var E=v.deletions;E===null?(v.deletions=[S],v.flags|=16):E.push(S)}}function t(v,S){if(!n)return null;for(;S!==null;)e(v,S),S=S.sibling;return null}function i(v,S){for(v=new Map;S!==null;)S.key!==null?v.set(S.key,S):v.set(S.index,S),S=S.sibling;return v}function r(v,S){return v=ec(v,S),v.index=0,v.sibling=null,v}function s(v,S,E){return v.index=E,n?(E=v.alternate,E!==null?(E=E.index,E<S?(v.flags|=2,S):E):(v.flags|=2,S)):(v.flags|=1048576,S)}function o(v){return n&&v.alternate===null&&(v.flags|=2),v}function a(v,S,E,I){return S===null||S.tag!==6?(S=zS(E,v.mode,I),S.return=v,S):(S=r(S,E),S.return=v,S)}function l(v,S,E,I){var U=E.type;return U===md?u(v,S,E.props.children,I,E.key):S!==null&&(S.elementType===U||typeof U=="object"&&U!==null&&U.$$typeof===Pl&&nN(U)===S.type)?(I=r(S,E.props),I.ref=xp(v,S,E),I.return=v,I):(I=Fx(E.type,E.key,E.props,null,v.mode,I),I.ref=xp(v,S,E),I.return=v,I)}function c(v,S,E,I){return S===null||S.tag!==4||S.stateNode.containerInfo!==E.containerInfo||S.stateNode.implementation!==E.implementation?(S=HS(E,v.mode,I),S.return=v,S):(S=r(S,E.children||[]),S.return=v,S)}function u(v,S,E,I,U){return S===null||S.tag!==7?(S=ku(E,v.mode,I,U),S.return=v,S):(S=r(S,E),S.return=v,S)}function f(v,S,E){if(typeof S=="string"&&S!==""||typeof S=="number")return S=zS(""+S,v.mode,E),S.return=v,S;if(typeof S=="object"&&S!==null){switch(S.$$typeof){case sv:return E=Fx(S.type,S.key,S.props,null,v.mode,E),E.ref=xp(v,null,S),E.return=v,E;case pd:return S=HS(S,v.mode,E),S.return=v,S;case Pl:var I=S._init;return f(v,I(S._payload),E)}if(Hp(S)||pp(S))return S=ku(S,v.mode,E,null),S.return=v,S;gv(v,S)}return null}function m(v,S,E,I){var U=S!==null?S.key:null;if(typeof E=="string"&&E!==""||typeof E=="number")return U!==null?null:a(v,S,""+E,I);if(typeof E=="object"&&E!==null){switch(E.$$typeof){case sv:return E.key===U?l(v,S,E,I):null;case pd:return E.key===U?c(v,S,E,I):null;case Pl:return U=E._init,m(v,S,U(E._payload),I)}if(Hp(E)||pp(E))return U!==null?null:u(v,S,E,I,null);gv(v,E)}return null}function g(v,S,E,I,U){if(typeof I=="string"&&I!==""||typeof I=="number")return v=v.get(E)||null,a(S,v,""+I,U);if(typeof I=="object"&&I!==null){switch(I.$$typeof){case sv:return v=v.get(I.key===null?E:I.key)||null,l(S,v,I,U);case pd:return v=v.get(I.key===null?E:I.key)||null,c(S,v,I,U);case Pl:var O=I._init;return g(v,S,E,O(I._payload),U)}if(Hp(I)||pp(I))return v=v.get(E)||null,u(S,v,I,U,null);gv(S,I)}return null}function x(v,S,E,I){for(var U=null,O=null,C=S,P=S=0,M=null;C!==null&&P<E.length;P++){C.index>P?(M=C,C=null):M=C.sibling;var A=m(v,C,E[P],I);if(A===null){C===null&&(C=M);break}n&&C&&A.alternate===null&&e(v,C),S=s(A,S,P),O===null?U=A:O.sibling=A,O=A,C=M}if(P===E.length)return t(v,C),li&&pu(v,P),U;if(C===null){for(;P<E.length;P++)C=f(v,E[P],I),C!==null&&(S=s(C,S,P),O===null?U=C:O.sibling=C,O=C);return li&&pu(v,P),U}for(C=i(v,C);P<E.length;P++)M=g(C,v,P,E[P],I),M!==null&&(n&&M.alternate!==null&&C.delete(M.key===null?P:M.key),S=s(M,S,P),O===null?U=M:O.sibling=M,O=M);return n&&C.forEach(function(D){return e(v,D)}),li&&pu(v,P),U}function b(v,S,E,I){var U=pp(E);if(typeof U!="function")throw Error(je(150));if(E=U.call(E),E==null)throw Error(je(151));for(var O=U=null,C=S,P=S=0,M=null,A=E.next();C!==null&&!A.done;P++,A=E.next()){C.index>P?(M=C,C=null):M=C.sibling;var D=m(v,C,A.value,I);if(D===null){C===null&&(C=M);break}n&&C&&D.alternate===null&&e(v,C),S=s(D,S,P),O===null?U=D:O.sibling=D,O=D,C=M}if(A.done)return t(v,C),li&&pu(v,P),U;if(C===null){for(;!A.done;P++,A=E.next())A=f(v,A.value,I),A!==null&&(S=s(A,S,P),O===null?U=A:O.sibling=A,O=A);return li&&pu(v,P),U}for(C=i(v,C);!A.done;P++,A=E.next())A=g(C,v,P,A.value,I),A!==null&&(n&&A.alternate!==null&&C.delete(A.key===null?P:A.key),S=s(A,S,P),O===null?U=A:O.sibling=A,O=A);return n&&C.forEach(function(B){return e(v,B)}),li&&pu(v,P),U}function w(v,S,E,I){if(typeof E=="object"&&E!==null&&E.type===md&&E.key===null&&(E=E.props.children),typeof E=="object"&&E!==null){switch(E.$$typeof){case sv:e:{for(var U=E.key,O=S;O!==null;){if(O.key===U){if(U=E.type,U===md){if(O.tag===7){t(v,O.sibling),S=r(O,E.props.children),S.return=v,v=S;break e}}else if(O.elementType===U||typeof U=="object"&&U!==null&&U.$$typeof===Pl&&nN(U)===O.type){t(v,O.sibling),S=r(O,E.props),S.ref=xp(v,O,E),S.return=v,v=S;break e}t(v,O);break}else e(v,O);O=O.sibling}E.type===md?(S=ku(E.props.children,v.mode,I,E.key),S.return=v,v=S):(I=Fx(E.type,E.key,E.props,null,v.mode,I),I.ref=xp(v,S,E),I.return=v,v=I)}return o(v);case pd:e:{for(O=E.key;S!==null;){if(S.key===O)if(S.tag===4&&S.stateNode.containerInfo===E.containerInfo&&S.stateNode.implementation===E.implementation){t(v,S.sibling),S=r(S,E.children||[]),S.return=v,v=S;break e}else{t(v,S);break}else e(v,S);S=S.sibling}S=HS(E,v.mode,I),S.return=v,v=S}return o(v);case Pl:return O=E._init,w(v,S,O(E._payload),I)}if(Hp(E))return x(v,S,E,I);if(pp(E))return b(v,S,E,I);gv(v,E)}return typeof E=="string"&&E!==""||typeof E=="number"?(E=""+E,S!==null&&S.tag===6?(t(v,S.sibling),S=r(S,E),S.return=v,v=S):(t(v,S),S=zS(E,v.mode,I),S.return=v,v=S),o(v)):t(v,S)}return w}var nf=CU(!0),AU=CU(!1),v0=Tc(null),x0=null,Sd=null,HC=null;function GC(){HC=Sd=x0=null}function WC(n){var e=v0.current;ii(v0),n._currentValue=e}function zE(n,e,t){for(;n!==null;){var i=n.alternate;if((n.childLanes&e)!==e?(n.childLanes|=e,i!==null&&(i.childLanes|=e)):i!==null&&(i.childLanes&e)!==e&&(i.childLanes|=e),n===t)break;n=n.return}}function Wd(n,e){x0=n,HC=Sd=null,n=n.dependencies,n!==null&&n.firstContext!==null&&(n.lanes&e&&(ms=!0),n.firstContext=null)}function uo(n){var e=n._currentValue;if(HC!==n)if(n={context:n,memoizedValue:e,next:null},Sd===null){if(x0===null)throw Error(je(308));Sd=n,x0.dependencies={lanes:0,firstContext:n}}else Sd=Sd.next=n;return e}var Cu=null;function qC(n){Cu===null?Cu=[n]:Cu.push(n)}function MU(n,e,t,i){var r=e.interleaved;return r===null?(t.next=t,qC(e)):(t.next=r.next,r.next=t),e.interleaved=t,$a(n,i)}function $a(n,e){n.lanes|=e;var t=n.alternate;for(t!==null&&(t.lanes|=e),t=n,n=n.return;n!==null;)n.childLanes|=e,t=n.alternate,t!==null&&(t.childLanes|=e),t=n,n=n.return;return t.tag===3?t.stateNode:null}var Rl=!1;function $C(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function IU(n,e){n=n.updateQueue,e.updateQueue===n&&(e.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function Ua(n,e){return{eventTime:n,lane:e,tag:0,payload:null,callback:null,next:null}}function Jl(n,e,t){var i=n.updateQueue;if(i===null)return null;if(i=i.shared,Nn&2){var r=i.pending;return r===null?e.next=e:(e.next=r.next,r.next=e),i.pending=e,$a(n,t)}return r=i.interleaved,r===null?(e.next=e,qC(i)):(e.next=r.next,r.next=e),i.interleaved=e,$a(n,t)}function Nx(n,e,t){if(e=e.updateQueue,e!==null&&(e=e.shared,(t&4194240)!==0)){var i=e.lanes;i&=n.pendingLanes,t|=i,e.lanes=t,NC(n,t)}}function iN(n,e){var t=n.updateQueue,i=n.alternate;if(i!==null&&(i=i.updateQueue,t===i)){var r=null,s=null;if(t=t.firstBaseUpdate,t!==null){do{var o={eventTime:t.eventTime,lane:t.lane,tag:t.tag,payload:t.payload,callback:t.callback,next:null};s===null?r=s=o:s=s.next=o,t=t.next}while(t!==null);s===null?r=s=e:s=s.next=e}else r=s=e;t={baseState:i.baseState,firstBaseUpdate:r,lastBaseUpdate:s,shared:i.shared,effects:i.effects},n.updateQueue=t;return}n=t.lastBaseUpdate,n===null?t.firstBaseUpdate=e:n.next=e,t.lastBaseUpdate=e}function _0(n,e,t,i){var r=n.updateQueue;Rl=!1;var s=r.firstBaseUpdate,o=r.lastBaseUpdate,a=r.shared.pending;if(a!==null){r.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?s=c:o.next=c,o=l;var u=n.alternate;u!==null&&(u=u.updateQueue,a=u.lastBaseUpdate,a!==o&&(a===null?u.firstBaseUpdate=c:a.next=c,u.lastBaseUpdate=l))}if(s!==null){var f=r.baseState;o=0,u=c=l=null,a=s;do{var m=a.lane,g=a.eventTime;if((i&m)===m){u!==null&&(u=u.next={eventTime:g,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var x=n,b=a;switch(m=e,g=t,b.tag){case 1:if(x=b.payload,typeof x=="function"){f=x.call(g,f,m);break e}f=x;break e;case 3:x.flags=x.flags&-65537|128;case 0:if(x=b.payload,m=typeof x=="function"?x.call(g,f,m):x,m==null)break e;f=pi({},f,m);break e;case 2:Rl=!0}}a.callback!==null&&a.lane!==0&&(n.flags|=64,m=r.effects,m===null?r.effects=[a]:m.push(a))}else g={eventTime:g,lane:m,tag:a.tag,payload:a.payload,callback:a.callback,next:null},u===null?(c=u=g,l=f):u=u.next=g,o|=m;if(a=a.next,a===null){if(a=r.shared.pending,a===null)break;m=a,a=m.next,m.next=null,r.lastBaseUpdate=m,r.shared.pending=null}}while(!0);if(u===null&&(l=f),r.baseState=l,r.firstBaseUpdate=c,r.lastBaseUpdate=u,e=r.shared.interleaved,e!==null){r=e;do o|=r.lane,r=r.next;while(r!==e)}else s===null&&(r.shared.lanes=0);$u|=o,n.lanes=o,n.memoizedState=f}}function rN(n,e,t){if(n=e.effects,e.effects=null,n!==null)for(e=0;e<n.length;e++){var i=n[e],r=i.callback;if(r!==null){if(i.callback=null,i=t,typeof r!="function")throw Error(je(191,r));r.call(i)}}}var Vg={},ea=Tc(Vg),Gm=Tc(Vg),Wm=Tc(Vg);function Au(n){if(n===Vg)throw Error(je(174));return n}function XC(n,e){switch(Qn(Wm,e),Qn(Gm,n),Qn(ea,Vg),n=e.nodeType,n){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:bE(null,"");break;default:n=n===8?e.parentNode:e,e=n.namespaceURI||null,n=n.tagName,e=bE(e,n)}ii(ea),Qn(ea,e)}function rf(){ii(ea),ii(Gm),ii(Wm)}function PU(n){Au(Wm.current);var e=Au(ea.current),t=bE(e,n.type);e!==t&&(Qn(Gm,n),Qn(ea,t))}function KC(n){Gm.current===n&&(ii(ea),ii(Gm))}var ui=Tc(0);function w0(n){for(var e=n;e!==null;){if(e.tag===13){var t=e.memoizedState;if(t!==null&&(t=t.dehydrated,t===null||t.data==="$?"||t.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var OS=[];function YC(){for(var n=0;n<OS.length;n++)OS[n]._workInProgressVersionPrimary=null;OS.length=0}var Dx=rl.ReactCurrentDispatcher,US=rl.ReactCurrentBatchConfig,qu=0,fi=null,qi=null,ir=null,b0=!1,cm=!1,qm=0,bW=0;function Tr(){throw Error(je(321))}function JC(n,e){if(e===null)return!1;for(var t=0;t<e.length&&t<n.length;t++)if(!Do(n[t],e[t]))return!1;return!0}function QC(n,e,t,i,r,s){if(qu=s,fi=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Dx.current=n===null||n.memoizedState===null?CW:AW,n=t(i,r),cm){s=0;do{if(cm=!1,qm=0,25<=s)throw Error(je(301));s+=1,ir=qi=null,e.updateQueue=null,Dx.current=MW,n=t(i,r)}while(cm)}if(Dx.current=S0,e=qi!==null&&qi.next!==null,qu=0,ir=qi=fi=null,b0=!1,e)throw Error(je(300));return n}function ZC(){var n=qm!==0;return qm=0,n}function $o(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return ir===null?fi.memoizedState=ir=n:ir=ir.next=n,ir}function ho(){if(qi===null){var n=fi.alternate;n=n!==null?n.memoizedState:null}else n=qi.next;var e=ir===null?fi.memoizedState:ir.next;if(e!==null)ir=e,qi=n;else{if(n===null)throw Error(je(310));qi=n,n={memoizedState:qi.memoizedState,baseState:qi.baseState,baseQueue:qi.baseQueue,queue:qi.queue,next:null},ir===null?fi.memoizedState=ir=n:ir=ir.next=n}return ir}function $m(n,e){return typeof e=="function"?e(n):e}function FS(n){var e=ho(),t=e.queue;if(t===null)throw Error(je(311));t.lastRenderedReducer=n;var i=qi,r=i.baseQueue,s=t.pending;if(s!==null){if(r!==null){var o=r.next;r.next=s.next,s.next=o}i.baseQueue=r=s,t.pending=null}if(r!==null){s=r.next,i=i.baseState;var a=o=null,l=null,c=s;do{var u=c.lane;if((qu&u)===u)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),i=c.hasEagerState?c.eagerState:n(i,c.action);else{var f={lane:u,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=f,o=i):l=l.next=f,fi.lanes|=u,$u|=u}c=c.next}while(c!==null&&c!==s);l===null?o=i:l.next=a,Do(i,e.memoizedState)||(ms=!0),e.memoizedState=i,e.baseState=o,e.baseQueue=l,t.lastRenderedState=i}if(n=t.interleaved,n!==null){r=n;do s=r.lane,fi.lanes|=s,$u|=s,r=r.next;while(r!==n)}else r===null&&(t.lanes=0);return[e.memoizedState,t.dispatch]}function jS(n){var e=ho(),t=e.queue;if(t===null)throw Error(je(311));t.lastRenderedReducer=n;var i=t.dispatch,r=t.pending,s=e.memoizedState;if(r!==null){t.pending=null;var o=r=r.next;do s=n(s,o.action),o=o.next;while(o!==r);Do(s,e.memoizedState)||(ms=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),t.lastRenderedState=s}return[s,i]}function RU(){}function NU(n,e){var t=fi,i=ho(),r=e(),s=!Do(i.memoizedState,r);if(s&&(i.memoizedState=r,ms=!0),i=i.queue,eA(kU.bind(null,t,i,n),[n]),i.getSnapshot!==e||s||ir!==null&&ir.memoizedState.tag&1){if(t.flags|=2048,Xm(9,LU.bind(null,t,i,r,e),void 0,null),rr===null)throw Error(je(349));qu&30||DU(t,e,r)}return r}function DU(n,e,t){n.flags|=16384,n={getSnapshot:e,value:t},e=fi.updateQueue,e===null?(e={lastEffect:null,stores:null},fi.updateQueue=e,e.stores=[n]):(t=e.stores,t===null?e.stores=[n]:t.push(n))}function LU(n,e,t,i){e.value=t,e.getSnapshot=i,OU(e)&&UU(n)}function kU(n,e,t){return t(function(){OU(e)&&UU(n)})}function OU(n){var e=n.getSnapshot;n=n.value;try{var t=e();return!Do(n,t)}catch{return!0}}function UU(n){var e=$a(n,1);e!==null&&Ro(e,n,1,-1)}function sN(n){var e=$o();return typeof n=="function"&&(n=n()),e.memoizedState=e.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:$m,lastRenderedState:n},e.queue=n,n=n.dispatch=EW.bind(null,fi,n),[e.memoizedState,n]}function Xm(n,e,t,i){return n={tag:n,create:e,destroy:t,deps:i,next:null},e=fi.updateQueue,e===null?(e={lastEffect:null,stores:null},fi.updateQueue=e,e.lastEffect=n.next=n):(t=e.lastEffect,t===null?e.lastEffect=n.next=n:(i=t.next,t.next=n,n.next=i,e.lastEffect=n)),n}function FU(){return ho().memoizedState}function Lx(n,e,t,i){var r=$o();fi.flags|=n,r.memoizedState=Xm(1|e,t,void 0,i===void 0?null:i)}function iw(n,e,t,i){var r=ho();i=i===void 0?null:i;var s=void 0;if(qi!==null){var o=qi.memoizedState;if(s=o.destroy,i!==null&&JC(i,o.deps)){r.memoizedState=Xm(e,t,s,i);return}}fi.flags|=n,r.memoizedState=Xm(1|e,t,s,i)}function oN(n,e){return Lx(8390656,8,n,e)}function eA(n,e){return iw(2048,8,n,e)}function jU(n,e){return iw(4,2,n,e)}function VU(n,e){return iw(4,4,n,e)}function BU(n,e){if(typeof e=="function")return n=n(),e(n),function(){e(null)};if(e!=null)return n=n(),e.current=n,function(){e.current=null}}function zU(n,e,t){return t=t!=null?t.concat([n]):null,iw(4,4,BU.bind(null,e,n),t)}function tA(){}function HU(n,e){var t=ho();e=e===void 0?null:e;var i=t.memoizedState;return i!==null&&e!==null&&JC(e,i[1])?i[0]:(t.memoizedState=[n,e],n)}function GU(n,e){var t=ho();e=e===void 0?null:e;var i=t.memoizedState;return i!==null&&e!==null&&JC(e,i[1])?i[0]:(n=n(),t.memoizedState=[n,e],n)}function WU(n,e,t){return qu&21?(Do(t,e)||(t=YO(),fi.lanes|=t,$u|=t,n.baseState=!0),e):(n.baseState&&(n.baseState=!1,ms=!0),n.memoizedState=t)}function SW(n,e){var t=qn;qn=t!==0&&4>t?t:4,n(!0);var i=US.transition;US.transition={};try{n(!1),e()}finally{qn=t,US.transition=i}}function qU(){return ho().memoizedState}function TW(n,e,t){var i=Zl(n);if(t={lane:i,action:t,hasEagerState:!1,eagerState:null,next:null},$U(n))XU(e,t);else if(t=MU(n,e,t,i),t!==null){var r=Yr();Ro(t,n,i,r),KU(t,e,i)}}function EW(n,e,t){var i=Zl(n),r={lane:i,action:t,hasEagerState:!1,eagerState:null,next:null};if($U(n))XU(e,r);else{var s=n.alternate;if(n.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,t);if(r.hasEagerState=!0,r.eagerState=a,Do(a,o)){var l=e.interleaved;l===null?(r.next=r,qC(e)):(r.next=l.next,l.next=r),e.interleaved=r;return}}catch{}finally{}t=MU(n,e,r,i),t!==null&&(r=Yr(),Ro(t,n,i,r),KU(t,e,i))}}function $U(n){var e=n.alternate;return n===fi||e!==null&&e===fi}function XU(n,e){cm=b0=!0;var t=n.pending;t===null?e.next=e:(e.next=t.next,t.next=e),n.pending=e}function KU(n,e,t){if(t&4194240){var i=e.lanes;i&=n.pendingLanes,t|=i,e.lanes=t,NC(n,t)}}var S0={readContext:uo,useCallback:Tr,useContext:Tr,useEffect:Tr,useImperativeHandle:Tr,useInsertionEffect:Tr,useLayoutEffect:Tr,useMemo:Tr,useReducer:Tr,useRef:Tr,useState:Tr,useDebugValue:Tr,useDeferredValue:Tr,useTransition:Tr,useMutableSource:Tr,useSyncExternalStore:Tr,useId:Tr,unstable_isNewReconciler:!1},CW={readContext:uo,useCallback:function(n,e){return $o().memoizedState=[n,e===void 0?null:e],n},useContext:uo,useEffect:oN,useImperativeHandle:function(n,e,t){return t=t!=null?t.concat([n]):null,Lx(4194308,4,BU.bind(null,e,n),t)},useLayoutEffect:function(n,e){return Lx(4194308,4,n,e)},useInsertionEffect:function(n,e){return Lx(4,2,n,e)},useMemo:function(n,e){var t=$o();return e=e===void 0?null:e,n=n(),t.memoizedState=[n,e],n},useReducer:function(n,e,t){var i=$o();return e=t!==void 0?t(e):e,i.memoizedState=i.baseState=e,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:e},i.queue=n,n=n.dispatch=TW.bind(null,fi,n),[i.memoizedState,n]},useRef:function(n){var e=$o();return n={current:n},e.memoizedState=n},useState:sN,useDebugValue:tA,useDeferredValue:function(n){return $o().memoizedState=n},useTransition:function(){var n=sN(!1),e=n[0];return n=SW.bind(null,n[1]),$o().memoizedState=n,[e,n]},useMutableSource:function(){},useSyncExternalStore:function(n,e,t){var i=fi,r=$o();if(li){if(t===void 0)throw Error(je(407));t=t()}else{if(t=e(),rr===null)throw Error(je(349));qu&30||DU(i,e,t)}r.memoizedState=t;var s={value:t,getSnapshot:e};return r.queue=s,oN(kU.bind(null,i,s,n),[n]),i.flags|=2048,Xm(9,LU.bind(null,i,s,t,e),void 0,null),t},useId:function(){var n=$o(),e=rr.identifierPrefix;if(li){var t=Na,i=Ra;t=(i&~(1<<32-Po(i)-1)).toString(32)+t,e=":"+e+"R"+t,t=qm++,0<t&&(e+="H"+t.toString(32)),e+=":"}else t=bW++,e=":"+e+"r"+t.toString(32)+":";return n.memoizedState=e},unstable_isNewReconciler:!1},AW={readContext:uo,useCallback:HU,useContext:uo,useEffect:eA,useImperativeHandle:zU,useInsertionEffect:jU,useLayoutEffect:VU,useMemo:GU,useReducer:FS,useRef:FU,useState:function(){return FS($m)},useDebugValue:tA,useDeferredValue:function(n){var e=ho();return WU(e,qi.memoizedState,n)},useTransition:function(){var n=FS($m)[0],e=ho().memoizedState;return[n,e]},useMutableSource:RU,useSyncExternalStore:NU,useId:qU,unstable_isNewReconciler:!1},MW={readContext:uo,useCallback:HU,useContext:uo,useEffect:eA,useImperativeHandle:zU,useInsertionEffect:jU,useLayoutEffect:VU,useMemo:GU,useReducer:jS,useRef:FU,useState:function(){return jS($m)},useDebugValue:tA,useDeferredValue:function(n){var e=ho();return qi===null?e.memoizedState=n:WU(e,qi.memoizedState,n)},useTransition:function(){var n=jS($m)[0],e=ho().memoizedState;return[n,e]},useMutableSource:RU,useSyncExternalStore:NU,useId:qU,unstable_isNewReconciler:!1};function bo(n,e){if(n&&n.defaultProps){e=pi({},e),n=n.defaultProps;for(var t in n)e[t]===void 0&&(e[t]=n[t]);return e}return e}function HE(n,e,t,i){e=n.memoizedState,t=t(i,e),t=t==null?e:pi({},e,t),n.memoizedState=t,n.lanes===0&&(n.updateQueue.baseState=t)}var rw={isMounted:function(n){return(n=n._reactInternals)?uh(n)===n:!1},enqueueSetState:function(n,e,t){n=n._reactInternals;var i=Yr(),r=Zl(n),s=Ua(i,r);s.payload=e,t!=null&&(s.callback=t),e=Jl(n,s,r),e!==null&&(Ro(e,n,r,i),Nx(e,n,r))},enqueueReplaceState:function(n,e,t){n=n._reactInternals;var i=Yr(),r=Zl(n),s=Ua(i,r);s.tag=1,s.payload=e,t!=null&&(s.callback=t),e=Jl(n,s,r),e!==null&&(Ro(e,n,r,i),Nx(e,n,r))},enqueueForceUpdate:function(n,e){n=n._reactInternals;var t=Yr(),i=Zl(n),r=Ua(t,i);r.tag=2,e!=null&&(r.callback=e),e=Jl(n,r,i),e!==null&&(Ro(e,n,i,t),Nx(e,n,i))}};function aN(n,e,t,i,r,s,o){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(i,s,o):e.prototype&&e.prototype.isPureReactComponent?!Vm(t,i)||!Vm(r,s):!0}function YU(n,e,t){var i=!1,r=lc,s=e.contextType;return typeof s=="object"&&s!==null?s=uo(s):(r=vs(e)?Gu:jr.current,i=e.contextTypes,s=(i=i!=null)?ef(n,r):lc),e=new e(t,s),n.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=rw,n.stateNode=e,e._reactInternals=n,i&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=r,n.__reactInternalMemoizedMaskedChildContext=s),e}function lN(n,e,t,i){n=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(t,i),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(t,i),e.state!==n&&rw.enqueueReplaceState(e,e.state,null)}function GE(n,e,t,i){var r=n.stateNode;r.props=t,r.state=n.memoizedState,r.refs={},$C(n);var s=e.contextType;typeof s=="object"&&s!==null?r.context=uo(s):(s=vs(e)?Gu:jr.current,r.context=ef(n,s)),r.state=n.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(HE(n,e,s,t),r.state=n.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof r.getSnapshotBeforeUpdate=="function"||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(e=r.state,typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount(),e!==r.state&&rw.enqueueReplaceState(r,r.state,null),_0(n,t,r,i),r.state=n.memoizedState),typeof r.componentDidMount=="function"&&(n.flags|=4194308)}function sf(n,e){try{var t="",i=e;do t+=nG(i),i=i.return;while(i);var r=t}catch(s){r=`
Error generating stack: `+s.message+`
`+s.stack}return{value:n,source:e,stack:r,digest:null}}function VS(n,e,t){return{value:n,source:null,stack:t??null,digest:e??null}}function WE(n,e){try{console.error(e.value)}catch(t){setTimeout(function(){throw t})}}var IW=typeof WeakMap=="function"?WeakMap:Map;function JU(n,e,t){t=Ua(-1,t),t.tag=3,t.payload={element:null};var i=e.value;return t.callback=function(){E0||(E0=!0,t1=i),WE(n,e)},t}function QU(n,e,t){t=Ua(-1,t),t.tag=3;var i=n.type.getDerivedStateFromError;if(typeof i=="function"){var r=e.value;t.payload=function(){return i(r)},t.callback=function(){WE(n,e)}}var s=n.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(t.callback=function(){WE(n,e),typeof i!="function"&&(Ql===null?Ql=new Set([this]):Ql.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),t}function cN(n,e,t){var i=n.pingCache;if(i===null){i=n.pingCache=new IW;var r=new Set;i.set(e,r)}else r=i.get(e),r===void 0&&(r=new Set,i.set(e,r));r.has(t)||(r.add(t),n=HW.bind(null,n,e,t),e.then(n,n))}function uN(n){do{var e;if((e=n.tag===13)&&(e=n.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return n;n=n.return}while(n!==null);return null}function hN(n,e,t,i,r){return n.mode&1?(n.flags|=65536,n.lanes=r,n):(n===e?n.flags|=65536:(n.flags|=128,t.flags|=131072,t.flags&=-52805,t.tag===1&&(t.alternate===null?t.tag=17:(e=Ua(-1,1),e.tag=2,Jl(t,e,1))),t.lanes|=1),n)}var PW=rl.ReactCurrentOwner,ms=!1;function Xr(n,e,t,i){e.child=n===null?AU(e,null,t,i):nf(e,n.child,t,i)}function dN(n,e,t,i,r){t=t.render;var s=e.ref;return Wd(e,r),i=QC(n,e,t,i,s,r),t=ZC(),n!==null&&!ms?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~r,Xa(n,e,r)):(li&&t&&VC(e),e.flags|=1,Xr(n,e,i,r),e.child)}function fN(n,e,t,i,r){if(n===null){var s=t.type;return typeof s=="function"&&!cA(s)&&s.defaultProps===void 0&&t.compare===null&&t.defaultProps===void 0?(e.tag=15,e.type=s,ZU(n,e,s,i,r)):(n=Fx(t.type,null,i,e,e.mode,r),n.ref=e.ref,n.return=e,e.child=n)}if(s=n.child,!(n.lanes&r)){var o=s.memoizedProps;if(t=t.compare,t=t!==null?t:Vm,t(o,i)&&n.ref===e.ref)return Xa(n,e,r)}return e.flags|=1,n=ec(s,i),n.ref=e.ref,n.return=e,e.child=n}function ZU(n,e,t,i,r){if(n!==null){var s=n.memoizedProps;if(Vm(s,i)&&n.ref===e.ref)if(ms=!1,e.pendingProps=i=s,(n.lanes&r)!==0)n.flags&131072&&(ms=!0);else return e.lanes=n.lanes,Xa(n,e,r)}return qE(n,e,t,i,r)}function eF(n,e,t){var i=e.pendingProps,r=i.children,s=n!==null?n.memoizedState:null;if(i.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Qn(Ed,Ns),Ns|=t;else{if(!(t&1073741824))return n=s!==null?s.baseLanes|t:t,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:n,cachePool:null,transitions:null},e.updateQueue=null,Qn(Ed,Ns),Ns|=n,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=s!==null?s.baseLanes:t,Qn(Ed,Ns),Ns|=i}else s!==null?(i=s.baseLanes|t,e.memoizedState=null):i=t,Qn(Ed,Ns),Ns|=i;return Xr(n,e,r,t),e.child}function tF(n,e){var t=e.ref;(n===null&&t!==null||n!==null&&n.ref!==t)&&(e.flags|=512,e.flags|=2097152)}function qE(n,e,t,i,r){var s=vs(t)?Gu:jr.current;return s=ef(e,s),Wd(e,r),t=QC(n,e,t,i,s,r),i=ZC(),n!==null&&!ms?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~r,Xa(n,e,r)):(li&&i&&VC(e),e.flags|=1,Xr(n,e,t,r),e.child)}function pN(n,e,t,i,r){if(vs(t)){var s=!0;m0(e)}else s=!1;if(Wd(e,r),e.stateNode===null)kx(n,e),YU(e,t,i),GE(e,t,i,r),i=!0;else if(n===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,c=t.contextType;typeof c=="object"&&c!==null?c=uo(c):(c=vs(t)?Gu:jr.current,c=ef(e,c));var u=t.getDerivedStateFromProps,f=typeof u=="function"||typeof o.getSnapshotBeforeUpdate=="function";f||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==i||l!==c)&&lN(e,o,i,c),Rl=!1;var m=e.memoizedState;o.state=m,_0(e,i,o,r),l=e.memoizedState,a!==i||m!==l||ys.current||Rl?(typeof u=="function"&&(HE(e,t,u,i),l=e.memoizedState),(a=Rl||aN(e,t,a,i,m,l,c))?(f||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=i,e.memoizedState=l),o.props=i,o.state=l,o.context=c,i=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),i=!1)}else{o=e.stateNode,IU(n,e),a=e.memoizedProps,c=e.type===e.elementType?a:bo(e.type,a),o.props=c,f=e.pendingProps,m=o.context,l=t.contextType,typeof l=="object"&&l!==null?l=uo(l):(l=vs(t)?Gu:jr.current,l=ef(e,l));var g=t.getDerivedStateFromProps;(u=typeof g=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==f||m!==l)&&lN(e,o,i,l),Rl=!1,m=e.memoizedState,o.state=m,_0(e,i,o,r);var x=e.memoizedState;a!==f||m!==x||ys.current||Rl?(typeof g=="function"&&(HE(e,t,g,i),x=e.memoizedState),(c=Rl||aN(e,t,c,i,m,x,l)||!1)?(u||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(i,x,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(i,x,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===n.memoizedProps&&m===n.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===n.memoizedProps&&m===n.memoizedState||(e.flags|=1024),e.memoizedProps=i,e.memoizedState=x),o.props=i,o.state=x,o.context=l,i=c):(typeof o.componentDidUpdate!="function"||a===n.memoizedProps&&m===n.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===n.memoizedProps&&m===n.memoizedState||(e.flags|=1024),i=!1)}return $E(n,e,t,i,s,r)}function $E(n,e,t,i,r,s){tF(n,e);var o=(e.flags&128)!==0;if(!i&&!o)return r&&ZR(e,t,!1),Xa(n,e,s);i=e.stateNode,PW.current=e;var a=o&&typeof t.getDerivedStateFromError!="function"?null:i.render();return e.flags|=1,n!==null&&o?(e.child=nf(e,n.child,null,s),e.child=nf(e,null,a,s)):Xr(n,e,a,s),e.memoizedState=i.state,r&&ZR(e,t,!0),e.child}function nF(n){var e=n.stateNode;e.pendingContext?QR(n,e.pendingContext,e.pendingContext!==e.context):e.context&&QR(n,e.context,!1),XC(n,e.containerInfo)}function mN(n,e,t,i,r){return tf(),zC(r),e.flags|=256,Xr(n,e,t,i),e.child}var XE={dehydrated:null,treeContext:null,retryLane:0};function KE(n){return{baseLanes:n,cachePool:null,transitions:null}}function iF(n,e,t){var i=e.pendingProps,r=ui.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=n!==null&&n.memoizedState===null?!1:(r&2)!==0),a?(s=!0,e.flags&=-129):(n===null||n.memoizedState!==null)&&(r|=1),Qn(ui,r&1),n===null)return BE(e),n=e.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?(e.mode&1?n.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=i.children,n=i.fallback,s?(i=e.mode,s=e.child,o={mode:"hidden",children:o},!(i&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=aw(o,i,0,null),n=ku(n,i,t,null),s.return=e,n.return=e,s.sibling=n,e.child=s,e.child.memoizedState=KE(t),e.memoizedState=XE,n):nA(e,o));if(r=n.memoizedState,r!==null&&(a=r.dehydrated,a!==null))return RW(n,e,o,i,a,r,t);if(s){s=i.fallback,o=e.mode,r=n.child,a=r.sibling;var l={mode:"hidden",children:i.children};return!(o&1)&&e.child!==r?(i=e.child,i.childLanes=0,i.pendingProps=l,e.deletions=null):(i=ec(r,l),i.subtreeFlags=r.subtreeFlags&14680064),a!==null?s=ec(a,s):(s=ku(s,o,t,null),s.flags|=2),s.return=e,i.return=e,i.sibling=s,e.child=i,i=s,s=e.child,o=n.child.memoizedState,o=o===null?KE(t):{baseLanes:o.baseLanes|t,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=n.childLanes&~t,e.memoizedState=XE,i}return s=n.child,n=s.sibling,i=ec(s,{mode:"visible",children:i.children}),!(e.mode&1)&&(i.lanes=t),i.return=e,i.sibling=null,n!==null&&(t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)),e.child=i,e.memoizedState=null,i}function nA(n,e){return e=aw({mode:"visible",children:e},n.mode,0,null),e.return=n,n.child=e}function yv(n,e,t,i){return i!==null&&zC(i),nf(e,n.child,null,t),n=nA(e,e.pendingProps.children),n.flags|=2,e.memoizedState=null,n}function RW(n,e,t,i,r,s,o){if(t)return e.flags&256?(e.flags&=-257,i=VS(Error(je(422))),yv(n,e,o,i)):e.memoizedState!==null?(e.child=n.child,e.flags|=128,null):(s=i.fallback,r=e.mode,i=aw({mode:"visible",children:i.children},r,0,null),s=ku(s,r,o,null),s.flags|=2,i.return=e,s.return=e,i.sibling=s,e.child=i,e.mode&1&&nf(e,n.child,null,o),e.child.memoizedState=KE(o),e.memoizedState=XE,s);if(!(e.mode&1))return yv(n,e,o,null);if(r.data==="$!"){if(i=r.nextSibling&&r.nextSibling.dataset,i)var a=i.dgst;return i=a,s=Error(je(419)),i=VS(s,i,void 0),yv(n,e,o,i)}if(a=(o&n.childLanes)!==0,ms||a){if(i=rr,i!==null){switch(o&-o){case 4:r=2;break;case 16:r=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:r=32;break;case 536870912:r=268435456;break;default:r=0}r=r&(i.suspendedLanes|o)?0:r,r!==0&&r!==s.retryLane&&(s.retryLane=r,$a(n,r),Ro(i,n,r,-1))}return lA(),i=VS(Error(je(421))),yv(n,e,o,i)}return r.data==="$?"?(e.flags|=128,e.child=n.child,e=GW.bind(null,n),r._reactRetry=e,null):(n=s.treeContext,Ls=Yl(r.nextSibling),Os=e,li=!0,Co=null,n!==null&&(ro[so++]=Ra,ro[so++]=Na,ro[so++]=Wu,Ra=n.id,Na=n.overflow,Wu=e),e=nA(e,i.children),e.flags|=4096,e)}function gN(n,e,t){n.lanes|=e;var i=n.alternate;i!==null&&(i.lanes|=e),zE(n.return,e,t)}function BS(n,e,t,i,r){var s=n.memoizedState;s===null?n.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:i,tail:t,tailMode:r}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=i,s.tail=t,s.tailMode=r)}function rF(n,e,t){var i=e.pendingProps,r=i.revealOrder,s=i.tail;if(Xr(n,e,i.children,t),i=ui.current,i&2)i=i&1|2,e.flags|=128;else{if(n!==null&&n.flags&128)e:for(n=e.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&gN(n,t,e);else if(n.tag===19)gN(n,t,e);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break e;for(;n.sibling===null;){if(n.return===null||n.return===e)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}i&=1}if(Qn(ui,i),!(e.mode&1))e.memoizedState=null;else switch(r){case"forwards":for(t=e.child,r=null;t!==null;)n=t.alternate,n!==null&&w0(n)===null&&(r=t),t=t.sibling;t=r,t===null?(r=e.child,e.child=null):(r=t.sibling,t.sibling=null),BS(e,!1,r,t,s);break;case"backwards":for(t=null,r=e.child,e.child=null;r!==null;){if(n=r.alternate,n!==null&&w0(n)===null){e.child=r;break}n=r.sibling,r.sibling=t,t=r,r=n}BS(e,!0,t,null,s);break;case"together":BS(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function kx(n,e){!(e.mode&1)&&n!==null&&(n.alternate=null,e.alternate=null,e.flags|=2)}function Xa(n,e,t){if(n!==null&&(e.dependencies=n.dependencies),$u|=e.lanes,!(t&e.childLanes))return null;if(n!==null&&e.child!==n.child)throw Error(je(153));if(e.child!==null){for(n=e.child,t=ec(n,n.pendingProps),e.child=t,t.return=e;n.sibling!==null;)n=n.sibling,t=t.sibling=ec(n,n.pendingProps),t.return=e;t.sibling=null}return e.child}function NW(n,e,t){switch(e.tag){case 3:nF(e),tf();break;case 5:PU(e);break;case 1:vs(e.type)&&m0(e);break;case 4:XC(e,e.stateNode.containerInfo);break;case 10:var i=e.type._context,r=e.memoizedProps.value;Qn(v0,i._currentValue),i._currentValue=r;break;case 13:if(i=e.memoizedState,i!==null)return i.dehydrated!==null?(Qn(ui,ui.current&1),e.flags|=128,null):t&e.child.childLanes?iF(n,e,t):(Qn(ui,ui.current&1),n=Xa(n,e,t),n!==null?n.sibling:null);Qn(ui,ui.current&1);break;case 19:if(i=(t&e.childLanes)!==0,n.flags&128){if(i)return rF(n,e,t);e.flags|=128}if(r=e.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),Qn(ui,ui.current),i)break;return null;case 22:case 23:return e.lanes=0,eF(n,e,t)}return Xa(n,e,t)}var sF,YE,oF,aF;sF=function(n,e){for(var t=e.child;t!==null;){if(t.tag===5||t.tag===6)n.appendChild(t.stateNode);else if(t.tag!==4&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return;t=t.return}t.sibling.return=t.return,t=t.sibling}};YE=function(){};oF=function(n,e,t,i){var r=n.memoizedProps;if(r!==i){n=e.stateNode,Au(ea.current);var s=null;switch(t){case"input":r=vE(n,r),i=vE(n,i),s=[];break;case"select":r=pi({},r,{value:void 0}),i=pi({},i,{value:void 0}),s=[];break;case"textarea":r=wE(n,r),i=wE(n,i),s=[];break;default:typeof r.onClick!="function"&&typeof i.onClick=="function"&&(n.onclick=f0)}SE(t,i);var o;t=null;for(c in r)if(!i.hasOwnProperty(c)&&r.hasOwnProperty(c)&&r[c]!=null)if(c==="style"){var a=r[c];for(o in a)a.hasOwnProperty(o)&&(t||(t={}),t[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(Dm.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in i){var l=i[c];if(a=r?.[c],i.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(t||(t={}),t[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(t||(t={}),t[o]=l[o])}else t||(s||(s=[]),s.push(c,t)),t=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(Dm.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&ei("scroll",n),s||a===l||(s=[])):(s=s||[]).push(c,l))}t&&(s=s||[]).push("style",t);var c=s;(e.updateQueue=c)&&(e.flags|=4)}};aF=function(n,e,t,i){t!==i&&(e.flags|=4)};function _p(n,e){if(!li)switch(n.tailMode){case"hidden":e=n.tail;for(var t=null;e!==null;)e.alternate!==null&&(t=e),e=e.sibling;t===null?n.tail=null:t.sibling=null;break;case"collapsed":t=n.tail;for(var i=null;t!==null;)t.alternate!==null&&(i=t),t=t.sibling;i===null?e||n.tail===null?n.tail=null:n.tail.sibling=null:i.sibling=null}}function Er(n){var e=n.alternate!==null&&n.alternate.child===n.child,t=0,i=0;if(e)for(var r=n.child;r!==null;)t|=r.lanes|r.childLanes,i|=r.subtreeFlags&14680064,i|=r.flags&14680064,r.return=n,r=r.sibling;else for(r=n.child;r!==null;)t|=r.lanes|r.childLanes,i|=r.subtreeFlags,i|=r.flags,r.return=n,r=r.sibling;return n.subtreeFlags|=i,n.childLanes=t,e}function DW(n,e,t){var i=e.pendingProps;switch(BC(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Er(e),null;case 1:return vs(e.type)&&p0(),Er(e),null;case 3:return i=e.stateNode,rf(),ii(ys),ii(jr),YC(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(n===null||n.child===null)&&(mv(e)?e.flags|=4:n===null||n.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Co!==null&&(r1(Co),Co=null))),YE(n,e),Er(e),null;case 5:KC(e);var r=Au(Wm.current);if(t=e.type,n!==null&&e.stateNode!=null)oF(n,e,t,i,r),n.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!i){if(e.stateNode===null)throw Error(je(166));return Er(e),null}if(n=Au(ea.current),mv(e)){i=e.stateNode,t=e.type;var s=e.memoizedProps;switch(i[Ko]=e,i[Hm]=s,n=(e.mode&1)!==0,t){case"dialog":ei("cancel",i),ei("close",i);break;case"iframe":case"object":case"embed":ei("load",i);break;case"video":case"audio":for(r=0;r<Wp.length;r++)ei(Wp[r],i);break;case"source":ei("error",i);break;case"img":case"image":case"link":ei("error",i),ei("load",i);break;case"details":ei("toggle",i);break;case"input":ER(i,s),ei("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!s.multiple},ei("invalid",i);break;case"textarea":AR(i,s),ei("invalid",i)}SE(t,s),r=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?i.textContent!==a&&(s.suppressHydrationWarning!==!0&&pv(i.textContent,a,n),r=["children",a]):typeof a=="number"&&i.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&pv(i.textContent,a,n),r=["children",""+a]):Dm.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&ei("scroll",i)}switch(t){case"input":ov(i),CR(i,s,!0);break;case"textarea":ov(i),MR(i);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(i.onclick=f0)}i=r,e.updateQueue=i,i!==null&&(e.flags|=4)}else{o=r.nodeType===9?r:r.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=kO(t)),n==="http://www.w3.org/1999/xhtml"?t==="script"?(n=o.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof i.is=="string"?n=o.createElement(t,{is:i.is}):(n=o.createElement(t),t==="select"&&(o=n,i.multiple?o.multiple=!0:i.size&&(o.size=i.size))):n=o.createElementNS(n,t),n[Ko]=e,n[Hm]=i,sF(n,e,!1,!1),e.stateNode=n;e:{switch(o=TE(t,i),t){case"dialog":ei("cancel",n),ei("close",n),r=i;break;case"iframe":case"object":case"embed":ei("load",n),r=i;break;case"video":case"audio":for(r=0;r<Wp.length;r++)ei(Wp[r],n);r=i;break;case"source":ei("error",n),r=i;break;case"img":case"image":case"link":ei("error",n),ei("load",n),r=i;break;case"details":ei("toggle",n),r=i;break;case"input":ER(n,i),r=vE(n,i),ei("invalid",n);break;case"option":r=i;break;case"select":n._wrapperState={wasMultiple:!!i.multiple},r=pi({},i,{value:void 0}),ei("invalid",n);break;case"textarea":AR(n,i),r=wE(n,i),ei("invalid",n);break;default:r=i}SE(t,r),a=r;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?FO(n,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&OO(n,l)):s==="children"?typeof l=="string"?(t!=="textarea"||l!=="")&&Lm(n,l):typeof l=="number"&&Lm(n,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Dm.hasOwnProperty(s)?l!=null&&s==="onScroll"&&ei("scroll",n):l!=null&&CC(n,s,l,o))}switch(t){case"input":ov(n),CR(n,i,!1);break;case"textarea":ov(n),MR(n);break;case"option":i.value!=null&&n.setAttribute("value",""+ac(i.value));break;case"select":n.multiple=!!i.multiple,s=i.value,s!=null?Bd(n,!!i.multiple,s,!1):i.defaultValue!=null&&Bd(n,!!i.multiple,i.defaultValue,!0);break;default:typeof r.onClick=="function"&&(n.onclick=f0)}switch(t){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Er(e),null;case 6:if(n&&e.stateNode!=null)aF(n,e,n.memoizedProps,i);else{if(typeof i!="string"&&e.stateNode===null)throw Error(je(166));if(t=Au(Wm.current),Au(ea.current),mv(e)){if(i=e.stateNode,t=e.memoizedProps,i[Ko]=e,(s=i.nodeValue!==t)&&(n=Os,n!==null))switch(n.tag){case 3:pv(i.nodeValue,t,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&pv(i.nodeValue,t,(n.mode&1)!==0)}s&&(e.flags|=4)}else i=(t.nodeType===9?t:t.ownerDocument).createTextNode(i),i[Ko]=e,e.stateNode=i}return Er(e),null;case 13:if(ii(ui),i=e.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(li&&Ls!==null&&e.mode&1&&!(e.flags&128))EU(),tf(),e.flags|=98560,s=!1;else if(s=mv(e),i!==null&&i.dehydrated!==null){if(n===null){if(!s)throw Error(je(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(je(317));s[Ko]=e}else tf(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Er(e),s=!1}else Co!==null&&(r1(Co),Co=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=t,e):(i=i!==null,i!==(n!==null&&n.memoizedState!==null)&&i&&(e.child.flags|=8192,e.mode&1&&(n===null||ui.current&1?$i===0&&($i=3):lA())),e.updateQueue!==null&&(e.flags|=4),Er(e),null);case 4:return rf(),YE(n,e),n===null&&Bm(e.stateNode.containerInfo),Er(e),null;case 10:return WC(e.type._context),Er(e),null;case 17:return vs(e.type)&&p0(),Er(e),null;case 19:if(ii(ui),s=e.memoizedState,s===null)return Er(e),null;if(i=(e.flags&128)!==0,o=s.rendering,o===null)if(i)_p(s,!1);else{if($i!==0||n!==null&&n.flags&128)for(n=e.child;n!==null;){if(o=w0(n),o!==null){for(e.flags|=128,_p(s,!1),i=o.updateQueue,i!==null&&(e.updateQueue=i,e.flags|=4),e.subtreeFlags=0,i=t,t=e.child;t!==null;)s=t,n=i,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=n,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,n=o.dependencies,s.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),t=t.sibling;return Qn(ui,ui.current&1|2),e.child}n=n.sibling}s.tail!==null&&Ai()>of&&(e.flags|=128,i=!0,_p(s,!1),e.lanes=4194304)}else{if(!i)if(n=w0(o),n!==null){if(e.flags|=128,i=!0,t=n.updateQueue,t!==null&&(e.updateQueue=t,e.flags|=4),_p(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!li)return Er(e),null}else 2*Ai()-s.renderingStartTime>of&&t!==1073741824&&(e.flags|=128,i=!0,_p(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(t=s.last,t!==null?t.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=Ai(),e.sibling=null,t=ui.current,Qn(ui,i?t&1|2:t&1),e):(Er(e),null);case 22:case 23:return aA(),i=e.memoizedState!==null,n!==null&&n.memoizedState!==null!==i&&(e.flags|=8192),i&&e.mode&1?Ns&1073741824&&(Er(e),e.subtreeFlags&6&&(e.flags|=8192)):Er(e),null;case 24:return null;case 25:return null}throw Error(je(156,e.tag))}function LW(n,e){switch(BC(e),e.tag){case 1:return vs(e.type)&&p0(),n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 3:return rf(),ii(ys),ii(jr),YC(),n=e.flags,n&65536&&!(n&128)?(e.flags=n&-65537|128,e):null;case 5:return KC(e),null;case 13:if(ii(ui),n=e.memoizedState,n!==null&&n.dehydrated!==null){if(e.alternate===null)throw Error(je(340));tf()}return n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 19:return ii(ui),null;case 4:return rf(),null;case 10:return WC(e.type._context),null;case 22:case 23:return aA(),null;case 24:return null;default:return null}}var vv=!1,Nr=!1,kW=typeof WeakSet=="function"?WeakSet:Set,St=null;function Td(n,e){var t=n.ref;if(t!==null)if(typeof t=="function")try{t(null)}catch(i){xi(n,e,i)}else t.current=null}function JE(n,e,t){try{t()}catch(i){xi(n,e,i)}}var yN=!1;function OW(n,e){if(LE=u0,n=dU(),jC(n)){if("selectionStart"in n)var t={start:n.selectionStart,end:n.selectionEnd};else e:{t=(t=n.ownerDocument)&&t.defaultView||window;var i=t.getSelection&&t.getSelection();if(i&&i.rangeCount!==0){t=i.anchorNode;var r=i.anchorOffset,s=i.focusNode;i=i.focusOffset;try{t.nodeType,s.nodeType}catch{t=null;break e}var o=0,a=-1,l=-1,c=0,u=0,f=n,m=null;t:for(;;){for(var g;f!==t||r!==0&&f.nodeType!==3||(a=o+r),f!==s||i!==0&&f.nodeType!==3||(l=o+i),f.nodeType===3&&(o+=f.nodeValue.length),(g=f.firstChild)!==null;)m=f,f=g;for(;;){if(f===n)break t;if(m===t&&++c===r&&(a=o),m===s&&++u===i&&(l=o),(g=f.nextSibling)!==null)break;f=m,m=f.parentNode}f=g}t=a===-1||l===-1?null:{start:a,end:l}}else t=null}t=t||{start:0,end:0}}else t=null;for(kE={focusedElem:n,selectionRange:t},u0=!1,St=e;St!==null;)if(e=St,n=e.child,(e.subtreeFlags&1028)!==0&&n!==null)n.return=e,St=n;else for(;St!==null;){e=St;try{var x=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(x!==null){var b=x.memoizedProps,w=x.memoizedState,v=e.stateNode,S=v.getSnapshotBeforeUpdate(e.elementType===e.type?b:bo(e.type,b),w);v.__reactInternalSnapshotBeforeUpdate=S}break;case 3:var E=e.stateNode.containerInfo;E.nodeType===1?E.textContent="":E.nodeType===9&&E.documentElement&&E.removeChild(E.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(je(163))}}catch(I){xi(e,e.return,I)}if(n=e.sibling,n!==null){n.return=e.return,St=n;break}St=e.return}return x=yN,yN=!1,x}function um(n,e,t){var i=e.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var r=i=i.next;do{if((r.tag&n)===n){var s=r.destroy;r.destroy=void 0,s!==void 0&&JE(e,t,s)}r=r.next}while(r!==i)}}function sw(n,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var t=e=e.next;do{if((t.tag&n)===n){var i=t.create;t.destroy=i()}t=t.next}while(t!==e)}}function QE(n){var e=n.ref;if(e!==null){var t=n.stateNode;switch(n.tag){case 5:n=t;break;default:n=t}typeof e=="function"?e(n):e.current=n}}function lF(n){var e=n.alternate;e!==null&&(n.alternate=null,lF(e)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(e=n.stateNode,e!==null&&(delete e[Ko],delete e[Hm],delete e[FE],delete e[vW],delete e[xW])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function cF(n){return n.tag===5||n.tag===3||n.tag===4}function vN(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||cF(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function ZE(n,e,t){var i=n.tag;if(i===5||i===6)n=n.stateNode,e?t.nodeType===8?t.parentNode.insertBefore(n,e):t.insertBefore(n,e):(t.nodeType===8?(e=t.parentNode,e.insertBefore(n,t)):(e=t,e.appendChild(n)),t=t._reactRootContainer,t!=null||e.onclick!==null||(e.onclick=f0));else if(i!==4&&(n=n.child,n!==null))for(ZE(n,e,t),n=n.sibling;n!==null;)ZE(n,e,t),n=n.sibling}function e1(n,e,t){var i=n.tag;if(i===5||i===6)n=n.stateNode,e?t.insertBefore(n,e):t.appendChild(n);else if(i!==4&&(n=n.child,n!==null))for(e1(n,e,t),n=n.sibling;n!==null;)e1(n,e,t),n=n.sibling}var cr=null,To=!1;function yl(n,e,t){for(t=t.child;t!==null;)uF(n,e,t),t=t.sibling}function uF(n,e,t){if(Zo&&typeof Zo.onCommitFiberUnmount=="function")try{Zo.onCommitFiberUnmount(J_,t)}catch{}switch(t.tag){case 5:Nr||Td(t,e);case 6:var i=cr,r=To;cr=null,yl(n,e,t),cr=i,To=r,cr!==null&&(To?(n=cr,t=t.stateNode,n.nodeType===8?n.parentNode.removeChild(t):n.removeChild(t)):cr.removeChild(t.stateNode));break;case 18:cr!==null&&(To?(n=cr,t=t.stateNode,n.nodeType===8?LS(n.parentNode,t):n.nodeType===1&&LS(n,t),Fm(n)):LS(cr,t.stateNode));break;case 4:i=cr,r=To,cr=t.stateNode.containerInfo,To=!0,yl(n,e,t),cr=i,To=r;break;case 0:case 11:case 14:case 15:if(!Nr&&(i=t.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){r=i=i.next;do{var s=r,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&JE(t,e,o),r=r.next}while(r!==i)}yl(n,e,t);break;case 1:if(!Nr&&(Td(t,e),i=t.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=t.memoizedProps,i.state=t.memoizedState,i.componentWillUnmount()}catch(a){xi(t,e,a)}yl(n,e,t);break;case 21:yl(n,e,t);break;case 22:t.mode&1?(Nr=(i=Nr)||t.memoizedState!==null,yl(n,e,t),Nr=i):yl(n,e,t);break;default:yl(n,e,t)}}function xN(n){var e=n.updateQueue;if(e!==null){n.updateQueue=null;var t=n.stateNode;t===null&&(t=n.stateNode=new kW),e.forEach(function(i){var r=WW.bind(null,n,i);t.has(i)||(t.add(i),i.then(r,r))})}}function yo(n,e){var t=e.deletions;if(t!==null)for(var i=0;i<t.length;i++){var r=t[i];try{var s=n,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:cr=a.stateNode,To=!1;break e;case 3:cr=a.stateNode.containerInfo,To=!0;break e;case 4:cr=a.stateNode.containerInfo,To=!0;break e}a=a.return}if(cr===null)throw Error(je(160));uF(s,o,r),cr=null,To=!1;var l=r.alternate;l!==null&&(l.return=null),r.return=null}catch(c){xi(r,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)hF(e,n),e=e.sibling}function hF(n,e){var t=n.alternate,i=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(yo(e,n),qo(n),i&4){try{um(3,n,n.return),sw(3,n)}catch(b){xi(n,n.return,b)}try{um(5,n,n.return)}catch(b){xi(n,n.return,b)}}break;case 1:yo(e,n),qo(n),i&512&&t!==null&&Td(t,t.return);break;case 5:if(yo(e,n),qo(n),i&512&&t!==null&&Td(t,t.return),n.flags&32){var r=n.stateNode;try{Lm(r,"")}catch(b){xi(n,n.return,b)}}if(i&4&&(r=n.stateNode,r!=null)){var s=n.memoizedProps,o=t!==null?t.memoizedProps:s,a=n.type,l=n.updateQueue;if(n.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&DO(r,s),TE(a,o);var c=TE(a,s);for(o=0;o<l.length;o+=2){var u=l[o],f=l[o+1];u==="style"?FO(r,f):u==="dangerouslySetInnerHTML"?OO(r,f):u==="children"?Lm(r,f):CC(r,u,f,c)}switch(a){case"input":xE(r,s);break;case"textarea":LO(r,s);break;case"select":var m=r._wrapperState.wasMultiple;r._wrapperState.wasMultiple=!!s.multiple;var g=s.value;g!=null?Bd(r,!!s.multiple,g,!1):m!==!!s.multiple&&(s.defaultValue!=null?Bd(r,!!s.multiple,s.defaultValue,!0):Bd(r,!!s.multiple,s.multiple?[]:"",!1))}r[Hm]=s}catch(b){xi(n,n.return,b)}}break;case 6:if(yo(e,n),qo(n),i&4){if(n.stateNode===null)throw Error(je(162));r=n.stateNode,s=n.memoizedProps;try{r.nodeValue=s}catch(b){xi(n,n.return,b)}}break;case 3:if(yo(e,n),qo(n),i&4&&t!==null&&t.memoizedState.isDehydrated)try{Fm(e.containerInfo)}catch(b){xi(n,n.return,b)}break;case 4:yo(e,n),qo(n);break;case 13:yo(e,n),qo(n),r=n.child,r.flags&8192&&(s=r.memoizedState!==null,r.stateNode.isHidden=s,!s||r.alternate!==null&&r.alternate.memoizedState!==null||(sA=Ai())),i&4&&xN(n);break;case 22:if(u=t!==null&&t.memoizedState!==null,n.mode&1?(Nr=(c=Nr)||u,yo(e,n),Nr=c):yo(e,n),qo(n),i&8192){if(c=n.memoizedState!==null,(n.stateNode.isHidden=c)&&!u&&n.mode&1)for(St=n,u=n.child;u!==null;){for(f=St=u;St!==null;){switch(m=St,g=m.child,m.tag){case 0:case 11:case 14:case 15:um(4,m,m.return);break;case 1:Td(m,m.return);var x=m.stateNode;if(typeof x.componentWillUnmount=="function"){i=m,t=m.return;try{e=i,x.props=e.memoizedProps,x.state=e.memoizedState,x.componentWillUnmount()}catch(b){xi(i,t,b)}}break;case 5:Td(m,m.return);break;case 22:if(m.memoizedState!==null){wN(f);continue}}g!==null?(g.return=m,St=g):wN(f)}u=u.sibling}e:for(u=null,f=n;;){if(f.tag===5){if(u===null){u=f;try{r=f.stateNode,c?(s=r.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=f.stateNode,l=f.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=UO("display",o))}catch(b){xi(n,n.return,b)}}}else if(f.tag===6){if(u===null)try{f.stateNode.nodeValue=c?"":f.memoizedProps}catch(b){xi(n,n.return,b)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===n)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===n)break e;for(;f.sibling===null;){if(f.return===null||f.return===n)break e;u===f&&(u=null),f=f.return}u===f&&(u=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:yo(e,n),qo(n),i&4&&xN(n);break;case 21:break;default:yo(e,n),qo(n)}}function qo(n){var e=n.flags;if(e&2){try{e:{for(var t=n.return;t!==null;){if(cF(t)){var i=t;break e}t=t.return}throw Error(je(160))}switch(i.tag){case 5:var r=i.stateNode;i.flags&32&&(Lm(r,""),i.flags&=-33);var s=vN(n);e1(n,s,r);break;case 3:case 4:var o=i.stateNode.containerInfo,a=vN(n);ZE(n,a,o);break;default:throw Error(je(161))}}catch(l){xi(n,n.return,l)}n.flags&=-3}e&4096&&(n.flags&=-4097)}function UW(n,e,t){St=n,dF(n)}function dF(n,e,t){for(var i=(n.mode&1)!==0;St!==null;){var r=St,s=r.child;if(r.tag===22&&i){var o=r.memoizedState!==null||vv;if(!o){var a=r.alternate,l=a!==null&&a.memoizedState!==null||Nr;a=vv;var c=Nr;if(vv=o,(Nr=l)&&!c)for(St=r;St!==null;)o=St,l=o.child,o.tag===22&&o.memoizedState!==null?bN(r):l!==null?(l.return=o,St=l):bN(r);for(;s!==null;)St=s,dF(s),s=s.sibling;St=r,vv=a,Nr=c}_N(n)}else r.subtreeFlags&8772&&s!==null?(s.return=r,St=s):_N(n)}}function _N(n){for(;St!==null;){var e=St;if(e.flags&8772){var t=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Nr||sw(5,e);break;case 1:var i=e.stateNode;if(e.flags&4&&!Nr)if(t===null)i.componentDidMount();else{var r=e.elementType===e.type?t.memoizedProps:bo(e.type,t.memoizedProps);i.componentDidUpdate(r,t.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&rN(e,s,i);break;case 3:var o=e.updateQueue;if(o!==null){if(t=null,e.child!==null)switch(e.child.tag){case 5:t=e.child.stateNode;break;case 1:t=e.child.stateNode}rN(e,o,t)}break;case 5:var a=e.stateNode;if(t===null&&e.flags&4){t=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&t.focus();break;case"img":l.src&&(t.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var u=c.memoizedState;if(u!==null){var f=u.dehydrated;f!==null&&Fm(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(je(163))}Nr||e.flags&512&&QE(e)}catch(m){xi(e,e.return,m)}}if(e===n){St=null;break}if(t=e.sibling,t!==null){t.return=e.return,St=t;break}St=e.return}}function wN(n){for(;St!==null;){var e=St;if(e===n){St=null;break}var t=e.sibling;if(t!==null){t.return=e.return,St=t;break}St=e.return}}function bN(n){for(;St!==null;){var e=St;try{switch(e.tag){case 0:case 11:case 15:var t=e.return;try{sw(4,e)}catch(l){xi(e,t,l)}break;case 1:var i=e.stateNode;if(typeof i.componentDidMount=="function"){var r=e.return;try{i.componentDidMount()}catch(l){xi(e,r,l)}}var s=e.return;try{QE(e)}catch(l){xi(e,s,l)}break;case 5:var o=e.return;try{QE(e)}catch(l){xi(e,o,l)}}}catch(l){xi(e,e.return,l)}if(e===n){St=null;break}var a=e.sibling;if(a!==null){a.return=e.return,St=a;break}St=e.return}}var FW=Math.ceil,T0=rl.ReactCurrentDispatcher,iA=rl.ReactCurrentOwner,co=rl.ReactCurrentBatchConfig,Nn=0,rr=null,Fi=null,pr=0,Ns=0,Ed=Tc(0),$i=0,Km=null,$u=0,ow=0,rA=0,hm=null,hs=null,sA=0,of=1/0,Aa=null,E0=!1,t1=null,Ql=null,xv=!1,Hl=null,C0=0,dm=0,n1=null,Ox=-1,Ux=0;function Yr(){return Nn&6?Ai():Ox!==-1?Ox:Ox=Ai()}function Zl(n){return n.mode&1?Nn&2&&pr!==0?pr&-pr:wW.transition!==null?(Ux===0&&(Ux=YO()),Ux):(n=qn,n!==0||(n=window.event,n=n===void 0?16:iU(n.type)),n):1}function Ro(n,e,t,i){if(50<dm)throw dm=0,n1=null,Error(je(185));Ug(n,t,i),(!(Nn&2)||n!==rr)&&(n===rr&&(!(Nn&2)&&(ow|=t),$i===4&&kl(n,pr)),xs(n,i),t===1&&Nn===0&&!(e.mode&1)&&(of=Ai()+500,nw&&Ec()))}function xs(n,e){var t=n.callbackNode;wG(n,e);var i=c0(n,n===rr?pr:0);if(i===0)t!==null&&RR(t),n.callbackNode=null,n.callbackPriority=0;else if(e=i&-i,n.callbackPriority!==e){if(t!=null&&RR(t),e===1)n.tag===0?_W(SN.bind(null,n)):bU(SN.bind(null,n)),gW(function(){!(Nn&6)&&Ec()}),t=null;else{switch(JO(i)){case 1:t=RC;break;case 4:t=XO;break;case 16:t=l0;break;case 536870912:t=KO;break;default:t=l0}t=_F(t,fF.bind(null,n))}n.callbackPriority=e,n.callbackNode=t}}function fF(n,e){if(Ox=-1,Ux=0,Nn&6)throw Error(je(327));var t=n.callbackNode;if(qd()&&n.callbackNode!==t)return null;var i=c0(n,n===rr?pr:0);if(i===0)return null;if(i&30||i&n.expiredLanes||e)e=A0(n,i);else{e=i;var r=Nn;Nn|=2;var s=mF();(rr!==n||pr!==e)&&(Aa=null,of=Ai()+500,Lu(n,e));do try{BW();break}catch(a){pF(n,a)}while(!0);GC(),T0.current=s,Nn=r,Fi!==null?e=0:(rr=null,pr=0,e=$i)}if(e!==0){if(e===2&&(r=IE(n),r!==0&&(i=r,e=i1(n,r))),e===1)throw t=Km,Lu(n,0),kl(n,i),xs(n,Ai()),t;if(e===6)kl(n,i);else{if(r=n.current.alternate,!(i&30)&&!jW(r)&&(e=A0(n,i),e===2&&(s=IE(n),s!==0&&(i=s,e=i1(n,s))),e===1))throw t=Km,Lu(n,0),kl(n,i),xs(n,Ai()),t;switch(n.finishedWork=r,n.finishedLanes=i,e){case 0:case 1:throw Error(je(345));case 2:mu(n,hs,Aa);break;case 3:if(kl(n,i),(i&130023424)===i&&(e=sA+500-Ai(),10<e)){if(c0(n,0)!==0)break;if(r=n.suspendedLanes,(r&i)!==i){Yr(),n.pingedLanes|=n.suspendedLanes&r;break}n.timeoutHandle=UE(mu.bind(null,n,hs,Aa),e);break}mu(n,hs,Aa);break;case 4:if(kl(n,i),(i&4194240)===i)break;for(e=n.eventTimes,r=-1;0<i;){var o=31-Po(i);s=1<<o,o=e[o],o>r&&(r=o),i&=~s}if(i=r,i=Ai()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*FW(i/1960))-i,10<i){n.timeoutHandle=UE(mu.bind(null,n,hs,Aa),i);break}mu(n,hs,Aa);break;case 5:mu(n,hs,Aa);break;default:throw Error(je(329))}}}return xs(n,Ai()),n.callbackNode===t?fF.bind(null,n):null}function i1(n,e){var t=hm;return n.current.memoizedState.isDehydrated&&(Lu(n,e).flags|=256),n=A0(n,e),n!==2&&(e=hs,hs=t,e!==null&&r1(e)),n}function r1(n){hs===null?hs=n:hs.push.apply(hs,n)}function jW(n){for(var e=n;;){if(e.flags&16384){var t=e.updateQueue;if(t!==null&&(t=t.stores,t!==null))for(var i=0;i<t.length;i++){var r=t[i],s=r.getSnapshot;r=r.value;try{if(!Do(s(),r))return!1}catch{return!1}}}if(t=e.child,e.subtreeFlags&16384&&t!==null)t.return=e,e=t;else{if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function kl(n,e){for(e&=~rA,e&=~ow,n.suspendedLanes|=e,n.pingedLanes&=~e,n=n.expirationTimes;0<e;){var t=31-Po(e),i=1<<t;n[t]=-1,e&=~i}}function SN(n){if(Nn&6)throw Error(je(327));qd();var e=c0(n,0);if(!(e&1))return xs(n,Ai()),null;var t=A0(n,e);if(n.tag!==0&&t===2){var i=IE(n);i!==0&&(e=i,t=i1(n,i))}if(t===1)throw t=Km,Lu(n,0),kl(n,e),xs(n,Ai()),t;if(t===6)throw Error(je(345));return n.finishedWork=n.current.alternate,n.finishedLanes=e,mu(n,hs,Aa),xs(n,Ai()),null}function oA(n,e){var t=Nn;Nn|=1;try{return n(e)}finally{Nn=t,Nn===0&&(of=Ai()+500,nw&&Ec())}}function Xu(n){Hl!==null&&Hl.tag===0&&!(Nn&6)&&qd();var e=Nn;Nn|=1;var t=co.transition,i=qn;try{if(co.transition=null,qn=1,n)return n()}finally{qn=i,co.transition=t,Nn=e,!(Nn&6)&&Ec()}}function aA(){Ns=Ed.current,ii(Ed)}function Lu(n,e){n.finishedWork=null,n.finishedLanes=0;var t=n.timeoutHandle;if(t!==-1&&(n.timeoutHandle=-1,mW(t)),Fi!==null)for(t=Fi.return;t!==null;){var i=t;switch(BC(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&p0();break;case 3:rf(),ii(ys),ii(jr),YC();break;case 5:KC(i);break;case 4:rf();break;case 13:ii(ui);break;case 19:ii(ui);break;case 10:WC(i.type._context);break;case 22:case 23:aA()}t=t.return}if(rr=n,Fi=n=ec(n.current,null),pr=Ns=e,$i=0,Km=null,rA=ow=$u=0,hs=hm=null,Cu!==null){for(e=0;e<Cu.length;e++)if(t=Cu[e],i=t.interleaved,i!==null){t.interleaved=null;var r=i.next,s=t.pending;if(s!==null){var o=s.next;s.next=r,i.next=o}t.pending=i}Cu=null}return n}function pF(n,e){do{var t=Fi;try{if(GC(),Dx.current=S0,b0){for(var i=fi.memoizedState;i!==null;){var r=i.queue;r!==null&&(r.pending=null),i=i.next}b0=!1}if(qu=0,ir=qi=fi=null,cm=!1,qm=0,iA.current=null,t===null||t.return===null){$i=1,Km=e,Fi=null;break}e:{var s=n,o=t.return,a=t,l=e;if(e=pr,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,u=a,f=u.tag;if(!(u.mode&1)&&(f===0||f===11||f===15)){var m=u.alternate;m?(u.updateQueue=m.updateQueue,u.memoizedState=m.memoizedState,u.lanes=m.lanes):(u.updateQueue=null,u.memoizedState=null)}var g=uN(o);if(g!==null){g.flags&=-257,hN(g,o,a,s,e),g.mode&1&&cN(s,c,e),e=g,l=c;var x=e.updateQueue;if(x===null){var b=new Set;b.add(l),e.updateQueue=b}else x.add(l);break e}else{if(!(e&1)){cN(s,c,e),lA();break e}l=Error(je(426))}}else if(li&&a.mode&1){var w=uN(o);if(w!==null){!(w.flags&65536)&&(w.flags|=256),hN(w,o,a,s,e),zC(sf(l,a));break e}}s=l=sf(l,a),$i!==4&&($i=2),hm===null?hm=[s]:hm.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var v=JU(s,l,e);iN(s,v);break e;case 1:a=l;var S=s.type,E=s.stateNode;if(!(s.flags&128)&&(typeof S.getDerivedStateFromError=="function"||E!==null&&typeof E.componentDidCatch=="function"&&(Ql===null||!Ql.has(E)))){s.flags|=65536,e&=-e,s.lanes|=e;var I=QU(s,a,e);iN(s,I);break e}}s=s.return}while(s!==null)}yF(t)}catch(U){e=U,Fi===t&&t!==null&&(Fi=t=t.return);continue}break}while(!0)}function mF(){var n=T0.current;return T0.current=S0,n===null?S0:n}function lA(){($i===0||$i===3||$i===2)&&($i=4),rr===null||!($u&268435455)&&!(ow&268435455)||kl(rr,pr)}function A0(n,e){var t=Nn;Nn|=2;var i=mF();(rr!==n||pr!==e)&&(Aa=null,Lu(n,e));do try{VW();break}catch(r){pF(n,r)}while(!0);if(GC(),Nn=t,T0.current=i,Fi!==null)throw Error(je(261));return rr=null,pr=0,$i}function VW(){for(;Fi!==null;)gF(Fi)}function BW(){for(;Fi!==null&&!dG();)gF(Fi)}function gF(n){var e=xF(n.alternate,n,Ns);n.memoizedProps=n.pendingProps,e===null?yF(n):Fi=e,iA.current=null}function yF(n){var e=n;do{var t=e.alternate;if(n=e.return,e.flags&32768){if(t=LW(t,e),t!==null){t.flags&=32767,Fi=t;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{$i=6,Fi=null;return}}else if(t=DW(t,e,Ns),t!==null){Fi=t;return}if(e=e.sibling,e!==null){Fi=e;return}Fi=e=n}while(e!==null);$i===0&&($i=5)}function mu(n,e,t){var i=qn,r=co.transition;try{co.transition=null,qn=1,zW(n,e,t,i)}finally{co.transition=r,qn=i}return null}function zW(n,e,t,i){do qd();while(Hl!==null);if(Nn&6)throw Error(je(327));t=n.finishedWork;var r=n.finishedLanes;if(t===null)return null;if(n.finishedWork=null,n.finishedLanes=0,t===n.current)throw Error(je(177));n.callbackNode=null,n.callbackPriority=0;var s=t.lanes|t.childLanes;if(bG(n,s),n===rr&&(Fi=rr=null,pr=0),!(t.subtreeFlags&2064)&&!(t.flags&2064)||xv||(xv=!0,_F(l0,function(){return qd(),null})),s=(t.flags&15990)!==0,t.subtreeFlags&15990||s){s=co.transition,co.transition=null;var o=qn;qn=1;var a=Nn;Nn|=4,iA.current=null,OW(n,t),hF(t,n),lW(kE),u0=!!LE,kE=LE=null,n.current=t,UW(t),fG(),Nn=a,qn=o,co.transition=s}else n.current=t;if(xv&&(xv=!1,Hl=n,C0=r),s=n.pendingLanes,s===0&&(Ql=null),gG(t.stateNode),xs(n,Ai()),e!==null)for(i=n.onRecoverableError,t=0;t<e.length;t++)r=e[t],i(r.value,{componentStack:r.stack,digest:r.digest});if(E0)throw E0=!1,n=t1,t1=null,n;return C0&1&&n.tag!==0&&qd(),s=n.pendingLanes,s&1?n===n1?dm++:(dm=0,n1=n):dm=0,Ec(),null}function qd(){if(Hl!==null){var n=JO(C0),e=co.transition,t=qn;try{if(co.transition=null,qn=16>n?16:n,Hl===null)var i=!1;else{if(n=Hl,Hl=null,C0=0,Nn&6)throw Error(je(331));var r=Nn;for(Nn|=4,St=n.current;St!==null;){var s=St,o=s.child;if(St.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(St=c;St!==null;){var u=St;switch(u.tag){case 0:case 11:case 15:um(8,u,s)}var f=u.child;if(f!==null)f.return=u,St=f;else for(;St!==null;){u=St;var m=u.sibling,g=u.return;if(lF(u),u===c){St=null;break}if(m!==null){m.return=g,St=m;break}St=g}}}var x=s.alternate;if(x!==null){var b=x.child;if(b!==null){x.child=null;do{var w=b.sibling;b.sibling=null,b=w}while(b!==null)}}St=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,St=o;else e:for(;St!==null;){if(s=St,s.flags&2048)switch(s.tag){case 0:case 11:case 15:um(9,s,s.return)}var v=s.sibling;if(v!==null){v.return=s.return,St=v;break e}St=s.return}}var S=n.current;for(St=S;St!==null;){o=St;var E=o.child;if(o.subtreeFlags&2064&&E!==null)E.return=o,St=E;else e:for(o=S;St!==null;){if(a=St,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:sw(9,a)}}catch(U){xi(a,a.return,U)}if(a===o){St=null;break e}var I=a.sibling;if(I!==null){I.return=a.return,St=I;break e}St=a.return}}if(Nn=r,Ec(),Zo&&typeof Zo.onPostCommitFiberRoot=="function")try{Zo.onPostCommitFiberRoot(J_,n)}catch{}i=!0}return i}finally{qn=t,co.transition=e}}return!1}function TN(n,e,t){e=sf(t,e),e=JU(n,e,1),n=Jl(n,e,1),e=Yr(),n!==null&&(Ug(n,1,e),xs(n,e))}function xi(n,e,t){if(n.tag===3)TN(n,n,t);else for(;e!==null;){if(e.tag===3){TN(e,n,t);break}else if(e.tag===1){var i=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(Ql===null||!Ql.has(i))){n=sf(t,n),n=QU(e,n,1),e=Jl(e,n,1),n=Yr(),e!==null&&(Ug(e,1,n),xs(e,n));break}}e=e.return}}function HW(n,e,t){var i=n.pingCache;i!==null&&i.delete(e),e=Yr(),n.pingedLanes|=n.suspendedLanes&t,rr===n&&(pr&t)===t&&($i===4||$i===3&&(pr&130023424)===pr&&500>Ai()-sA?Lu(n,0):rA|=t),xs(n,e)}function vF(n,e){e===0&&(n.mode&1?(e=cv,cv<<=1,!(cv&130023424)&&(cv=4194304)):e=1);var t=Yr();n=$a(n,e),n!==null&&(Ug(n,e,t),xs(n,t))}function GW(n){var e=n.memoizedState,t=0;e!==null&&(t=e.retryLane),vF(n,t)}function WW(n,e){var t=0;switch(n.tag){case 13:var i=n.stateNode,r=n.memoizedState;r!==null&&(t=r.retryLane);break;case 19:i=n.stateNode;break;default:throw Error(je(314))}i!==null&&i.delete(e),vF(n,t)}var xF;xF=function(n,e,t){if(n!==null)if(n.memoizedProps!==e.pendingProps||ys.current)ms=!0;else{if(!(n.lanes&t)&&!(e.flags&128))return ms=!1,NW(n,e,t);ms=!!(n.flags&131072)}else ms=!1,li&&e.flags&1048576&&SU(e,y0,e.index);switch(e.lanes=0,e.tag){case 2:var i=e.type;kx(n,e),n=e.pendingProps;var r=ef(e,jr.current);Wd(e,t),r=QC(null,e,i,n,r,t);var s=ZC();return e.flags|=1,typeof r=="object"&&r!==null&&typeof r.render=="function"&&r.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,vs(i)?(s=!0,m0(e)):s=!1,e.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,$C(e),r.updater=rw,e.stateNode=r,r._reactInternals=e,GE(e,i,n,t),e=$E(null,e,i,!0,s,t)):(e.tag=0,li&&s&&VC(e),Xr(null,e,r,t),e=e.child),e;case 16:i=e.elementType;e:{switch(kx(n,e),n=e.pendingProps,r=i._init,i=r(i._payload),e.type=i,r=e.tag=$W(i),n=bo(i,n),r){case 0:e=qE(null,e,i,n,t);break e;case 1:e=pN(null,e,i,n,t);break e;case 11:e=dN(null,e,i,n,t);break e;case 14:e=fN(null,e,i,bo(i.type,n),t);break e}throw Error(je(306,i,""))}return e;case 0:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:bo(i,r),qE(n,e,i,r,t);case 1:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:bo(i,r),pN(n,e,i,r,t);case 3:e:{if(nF(e),n===null)throw Error(je(387));i=e.pendingProps,s=e.memoizedState,r=s.element,IU(n,e),_0(e,i,null,t);var o=e.memoizedState;if(i=o.element,s.isDehydrated)if(s={element:i,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){r=sf(Error(je(423)),e),e=mN(n,e,i,t,r);break e}else if(i!==r){r=sf(Error(je(424)),e),e=mN(n,e,i,t,r);break e}else for(Ls=Yl(e.stateNode.containerInfo.firstChild),Os=e,li=!0,Co=null,t=AU(e,null,i,t),e.child=t;t;)t.flags=t.flags&-3|4096,t=t.sibling;else{if(tf(),i===r){e=Xa(n,e,t);break e}Xr(n,e,i,t)}e=e.child}return e;case 5:return PU(e),n===null&&BE(e),i=e.type,r=e.pendingProps,s=n!==null?n.memoizedProps:null,o=r.children,OE(i,r)?o=null:s!==null&&OE(i,s)&&(e.flags|=32),tF(n,e),Xr(n,e,o,t),e.child;case 6:return n===null&&BE(e),null;case 13:return iF(n,e,t);case 4:return XC(e,e.stateNode.containerInfo),i=e.pendingProps,n===null?e.child=nf(e,null,i,t):Xr(n,e,i,t),e.child;case 11:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:bo(i,r),dN(n,e,i,r,t);case 7:return Xr(n,e,e.pendingProps,t),e.child;case 8:return Xr(n,e,e.pendingProps.children,t),e.child;case 12:return Xr(n,e,e.pendingProps.children,t),e.child;case 10:e:{if(i=e.type._context,r=e.pendingProps,s=e.memoizedProps,o=r.value,Qn(v0,i._currentValue),i._currentValue=o,s!==null)if(Do(s.value,o)){if(s.children===r.children&&!ys.current){e=Xa(n,e,t);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===i){if(s.tag===1){l=Ua(-1,t&-t),l.tag=2;var c=s.updateQueue;if(c!==null){c=c.shared;var u=c.pending;u===null?l.next=l:(l.next=u.next,u.next=l),c.pending=l}}s.lanes|=t,l=s.alternate,l!==null&&(l.lanes|=t),zE(s.return,t,e),a.lanes|=t;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(je(341));o.lanes|=t,a=o.alternate,a!==null&&(a.lanes|=t),zE(o,t,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}Xr(n,e,r.children,t),e=e.child}return e;case 9:return r=e.type,i=e.pendingProps.children,Wd(e,t),r=uo(r),i=i(r),e.flags|=1,Xr(n,e,i,t),e.child;case 14:return i=e.type,r=bo(i,e.pendingProps),r=bo(i.type,r),fN(n,e,i,r,t);case 15:return ZU(n,e,e.type,e.pendingProps,t);case 17:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:bo(i,r),kx(n,e),e.tag=1,vs(i)?(n=!0,m0(e)):n=!1,Wd(e,t),YU(e,i,r),GE(e,i,r,t),$E(null,e,i,!0,n,t);case 19:return rF(n,e,t);case 22:return eF(n,e,t)}throw Error(je(156,e.tag))};function _F(n,e){return $O(n,e)}function qW(n,e,t,i){this.tag=n,this.key=t,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function ao(n,e,t,i){return new qW(n,e,t,i)}function cA(n){return n=n.prototype,!(!n||!n.isReactComponent)}function $W(n){if(typeof n=="function")return cA(n)?1:0;if(n!=null){if(n=n.$$typeof,n===MC)return 11;if(n===IC)return 14}return 2}function ec(n,e){var t=n.alternate;return t===null?(t=ao(n.tag,e,n.key,n.mode),t.elementType=n.elementType,t.type=n.type,t.stateNode=n.stateNode,t.alternate=n,n.alternate=t):(t.pendingProps=e,t.type=n.type,t.flags=0,t.subtreeFlags=0,t.deletions=null),t.flags=n.flags&14680064,t.childLanes=n.childLanes,t.lanes=n.lanes,t.child=n.child,t.memoizedProps=n.memoizedProps,t.memoizedState=n.memoizedState,t.updateQueue=n.updateQueue,e=n.dependencies,t.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},t.sibling=n.sibling,t.index=n.index,t.ref=n.ref,t}function Fx(n,e,t,i,r,s){var o=2;if(i=n,typeof n=="function")cA(n)&&(o=1);else if(typeof n=="string")o=5;else e:switch(n){case md:return ku(t.children,r,s,e);case AC:o=8,r|=8;break;case pE:return n=ao(12,t,e,r|2),n.elementType=pE,n.lanes=s,n;case mE:return n=ao(13,t,e,r),n.elementType=mE,n.lanes=s,n;case gE:return n=ao(19,t,e,r),n.elementType=gE,n.lanes=s,n;case PO:return aw(t,r,s,e);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case MO:o=10;break e;case IO:o=9;break e;case MC:o=11;break e;case IC:o=14;break e;case Pl:o=16,i=null;break e}throw Error(je(130,n==null?n:typeof n,""))}return e=ao(o,t,e,r),e.elementType=n,e.type=i,e.lanes=s,e}function ku(n,e,t,i){return n=ao(7,n,i,e),n.lanes=t,n}function aw(n,e,t,i){return n=ao(22,n,i,e),n.elementType=PO,n.lanes=t,n.stateNode={isHidden:!1},n}function zS(n,e,t){return n=ao(6,n,null,e),n.lanes=t,n}function HS(n,e,t){return e=ao(4,n.children!==null?n.children:[],n.key,e),e.lanes=t,e.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},e}function XW(n,e,t,i,r){this.tag=e,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=SS(0),this.expirationTimes=SS(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=SS(0),this.identifierPrefix=i,this.onRecoverableError=r,this.mutableSourceEagerHydrationData=null}function uA(n,e,t,i,r,s,o,a,l){return n=new XW(n,e,t,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=ao(3,null,null,e),n.current=s,s.stateNode=n,s.memoizedState={element:i,isDehydrated:t,cache:null,transitions:null,pendingSuspenseBoundaries:null},$C(s),n}function KW(n,e,t){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:pd,key:i==null?null:""+i,children:n,containerInfo:e,implementation:t}}function wF(n){if(!n)return lc;n=n._reactInternals;e:{if(uh(n)!==n||n.tag!==1)throw Error(je(170));var e=n;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(vs(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(je(171))}if(n.tag===1){var t=n.type;if(vs(t))return wU(n,t,e)}return e}function bF(n,e,t,i,r,s,o,a,l){return n=uA(t,i,!0,n,r,s,o,a,l),n.context=wF(null),t=n.current,i=Yr(),r=Zl(t),s=Ua(i,r),s.callback=e??null,Jl(t,s,r),n.current.lanes=r,Ug(n,r,i),xs(n,i),n}function lw(n,e,t,i){var r=e.current,s=Yr(),o=Zl(r);return t=wF(t),e.context===null?e.context=t:e.pendingContext=t,e=Ua(s,o),e.payload={element:n},i=i===void 0?null:i,i!==null&&(e.callback=i),n=Jl(r,e,o),n!==null&&(Ro(n,r,o,s),Nx(n,r,o)),o}function M0(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function EN(n,e){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var t=n.retryLane;n.retryLane=t!==0&&t<e?t:e}}function hA(n,e){EN(n,e),(n=n.alternate)&&EN(n,e)}function YW(){return null}var SF=typeof reportError=="function"?reportError:function(n){console.error(n)};function dA(n){this._internalRoot=n}cw.prototype.render=dA.prototype.render=function(n){var e=this._internalRoot;if(e===null)throw Error(je(409));lw(n,e,null,null)};cw.prototype.unmount=dA.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var e=n.containerInfo;Xu(function(){lw(null,n,null,null)}),e[qa]=null}};function cw(n){this._internalRoot=n}cw.prototype.unstable_scheduleHydration=function(n){if(n){var e=eU();n={blockedOn:null,target:n,priority:e};for(var t=0;t<Ll.length&&e!==0&&e<Ll[t].priority;t++);Ll.splice(t,0,n),t===0&&nU(n)}};function fA(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function uw(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function CN(){}function JW(n,e,t,i,r){if(r){if(typeof i=="function"){var s=i;i=function(){var c=M0(o);s.call(c)}}var o=bF(e,i,n,0,null,!1,!1,"",CN);return n._reactRootContainer=o,n[qa]=o.current,Bm(n.nodeType===8?n.parentNode:n),Xu(),o}for(;r=n.lastChild;)n.removeChild(r);if(typeof i=="function"){var a=i;i=function(){var c=M0(l);a.call(c)}}var l=uA(n,0,!1,null,null,!1,!1,"",CN);return n._reactRootContainer=l,n[qa]=l.current,Bm(n.nodeType===8?n.parentNode:n),Xu(function(){lw(e,l,t,i)}),l}function hw(n,e,t,i,r){var s=t._reactRootContainer;if(s){var o=s;if(typeof r=="function"){var a=r;r=function(){var l=M0(o);a.call(l)}}lw(e,o,n,r)}else o=JW(t,e,n,r,i);return M0(o)}QO=function(n){switch(n.tag){case 3:var e=n.stateNode;if(e.current.memoizedState.isDehydrated){var t=Gp(e.pendingLanes);t!==0&&(NC(e,t|1),xs(e,Ai()),!(Nn&6)&&(of=Ai()+500,Ec()))}break;case 13:Xu(function(){var i=$a(n,1);if(i!==null){var r=Yr();Ro(i,n,1,r)}}),hA(n,1)}};DC=function(n){if(n.tag===13){var e=$a(n,134217728);if(e!==null){var t=Yr();Ro(e,n,134217728,t)}hA(n,134217728)}};ZO=function(n){if(n.tag===13){var e=Zl(n),t=$a(n,e);if(t!==null){var i=Yr();Ro(t,n,e,i)}hA(n,e)}};eU=function(){return qn};tU=function(n,e){var t=qn;try{return qn=n,e()}finally{qn=t}};CE=function(n,e,t){switch(e){case"input":if(xE(n,t),e=t.name,t.type==="radio"&&e!=null){for(t=n;t.parentNode;)t=t.parentNode;for(t=t.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<t.length;e++){var i=t[e];if(i!==n&&i.form===n.form){var r=tw(i);if(!r)throw Error(je(90));NO(i),xE(i,r)}}}break;case"textarea":LO(n,t);break;case"select":e=t.value,e!=null&&Bd(n,!!t.multiple,e,!1)}};BO=oA;zO=Xu;var QW={usingClientEntryPoint:!1,Events:[jg,xd,tw,jO,VO,oA]},wp={findFiberByHostInstance:Eu,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},ZW={bundleType:wp.bundleType,version:wp.version,rendererPackageName:wp.rendererPackageName,rendererConfig:wp.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:rl.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=WO(n),n===null?null:n.stateNode},findFiberByHostInstance:wp.findFiberByHostInstance||YW,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var _v=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!_v.isDisabled&&_v.supportsFiber)try{J_=_v.inject(ZW),Zo=_v}catch{}}Gs.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=QW;Gs.createPortal=function(n,e){var t=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!fA(e))throw Error(je(200));return KW(n,e,null,t)};Gs.createRoot=function(n,e){if(!fA(n))throw Error(je(299));var t=!1,i="",r=SF;return e!=null&&(e.unstable_strictMode===!0&&(t=!0),e.identifierPrefix!==void 0&&(i=e.identifierPrefix),e.onRecoverableError!==void 0&&(r=e.onRecoverableError)),e=uA(n,1,!1,null,null,t,!1,i,r),n[qa]=e.current,Bm(n.nodeType===8?n.parentNode:n),new dA(e)};Gs.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var e=n._reactInternals;if(e===void 0)throw typeof n.render=="function"?Error(je(188)):(n=Object.keys(n).join(","),Error(je(268,n)));return n=WO(e),n=n===null?null:n.stateNode,n};Gs.flushSync=function(n){return Xu(n)};Gs.hydrate=function(n,e,t){if(!uw(e))throw Error(je(200));return hw(null,n,e,!0,t)};Gs.hydrateRoot=function(n,e,t){if(!fA(n))throw Error(je(405));var i=t!=null&&t.hydratedSources||null,r=!1,s="",o=SF;if(t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(s=t.identifierPrefix),t.onRecoverableError!==void 0&&(o=t.onRecoverableError)),e=bF(e,null,n,1,t??null,r,!1,s,o),n[qa]=e.current,Bm(n),i)for(n=0;n<i.length;n++)t=i[n],r=t._getVersion,r=r(t._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[t,r]:e.mutableSourceEagerHydrationData.push(t,r);return new cw(e)};Gs.render=function(n,e,t){if(!uw(e))throw Error(je(200));return hw(null,n,e,!1,t)};Gs.unmountComponentAtNode=function(n){if(!uw(n))throw Error(je(40));return n._reactRootContainer?(Xu(function(){hw(null,null,n,!1,function(){n._reactRootContainer=null,n[qa]=null})}),!0):!1};Gs.unstable_batchedUpdates=oA;Gs.unstable_renderSubtreeIntoContainer=function(n,e,t,i){if(!uw(t))throw Error(je(200));if(n==null||n._reactInternals===void 0)throw Error(je(38));return hw(n,e,t,!1,i)};Gs.version="18.3.1-next-f1338f8080-20240426";function TF(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(TF)}catch(n){console.error(n)}}TF(),TO.exports=Gs;var pA=TO.exports;const e9=K_(pA),t9=dO({__proto__:null,default:e9},[pA]);var mA,AN=pA;mA=AN.createRoot,AN.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ai(){return ai=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},ai.apply(this,arguments)}var Oi;(function(n){n.Pop="POP",n.Push="PUSH",n.Replace="REPLACE"})(Oi||(Oi={}));const MN="popstate";function n9(n){n===void 0&&(n={});function e(i,r){let{pathname:s,search:o,hash:a}=i.location;return Ym("",{pathname:s,search:o,hash:a},r.state&&r.state.usr||null,r.state&&r.state.key||"default")}function t(i,r){return typeof r=="string"?r:Ku(r)}return r9(e,t,null,n)}function xn(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function af(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function i9(){return Math.random().toString(36).substr(2,8)}function IN(n,e){return{usr:n.state,key:n.key,idx:e}}function Ym(n,e,t,i){return t===void 0&&(t=null),ai({pathname:typeof n=="string"?n:n.pathname,search:"",hash:""},typeof e=="string"?Cc(e):e,{state:t,key:e&&e.key||i||i9()})}function Ku(n){let{pathname:e="/",search:t="",hash:i=""}=n;return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),i&&i!=="#"&&(e+=i.charAt(0)==="#"?i:"#"+i),e}function Cc(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substr(t),n=n.substr(0,t));let i=n.indexOf("?");i>=0&&(e.search=n.substr(i),n=n.substr(0,i)),n&&(e.pathname=n)}return e}function r9(n,e,t,i){i===void 0&&(i={});let{window:r=document.defaultView,v5Compat:s=!1}=i,o=r.history,a=Oi.Pop,l=null,c=u();c==null&&(c=0,o.replaceState(ai({},o.state,{idx:c}),""));function u(){return(o.state||{idx:null}).idx}function f(){a=Oi.Pop;let w=u(),v=w==null?null:w-c;c=w,l&&l({action:a,location:b.location,delta:v})}function m(w,v){a=Oi.Push;let S=Ym(b.location,w,v);c=u()+1;let E=IN(S,c),I=b.createHref(S);try{o.pushState(E,"",I)}catch(U){if(U instanceof DOMException&&U.name==="DataCloneError")throw U;r.location.assign(I)}s&&l&&l({action:a,location:b.location,delta:1})}function g(w,v){a=Oi.Replace;let S=Ym(b.location,w,v);c=u();let E=IN(S,c),I=b.createHref(S);o.replaceState(E,"",I),s&&l&&l({action:a,location:b.location,delta:0})}function x(w){let v=r.location.origin!=="null"?r.location.origin:r.location.href,S=typeof w=="string"?w:Ku(w);return S=S.replace(/ $/,"%20"),xn(v,"No window.location.(origin|href) available to create URL for href: "+S),new URL(S,v)}let b={get action(){return a},get location(){return n(r,o)},listen(w){if(l)throw new Error("A history only accepts one active listener");return r.addEventListener(MN,f),l=w,()=>{r.removeEventListener(MN,f),l=null}},createHref(w){return e(r,w)},createURL:x,encodeLocation(w){let v=x(w);return{pathname:v.pathname,search:v.search,hash:v.hash}},push:m,replace:g,go(w){return o.go(w)}};return b}var Wn;(function(n){n.data="data",n.deferred="deferred",n.redirect="redirect",n.error="error"})(Wn||(Wn={}));const s9=new Set(["lazy","caseSensitive","path","id","index","children"]);function o9(n){return n.index===!0}function I0(n,e,t,i){return t===void 0&&(t=[]),i===void 0&&(i={}),n.map((r,s)=>{let o=[...t,String(s)],a=typeof r.id=="string"?r.id:o.join("-");if(xn(r.index!==!0||!r.children,"Cannot specify children on an index route"),xn(!i[a],'Found a route id collision on id "'+a+`".  Route id's must be globally unique within Data Router usages`),o9(r)){let l=ai({},r,e(r),{id:a});return i[a]=l,l}else{let l=ai({},r,e(r),{id:a,children:void 0});return i[a]=l,r.children&&(l.children=I0(r.children,e,o,i)),l}})}function bu(n,e,t){return t===void 0&&(t="/"),jx(n,e,t,!1)}function jx(n,e,t,i){let r=typeof e=="string"?Cc(e):e,s=Af(r.pathname||"/",t);if(s==null)return null;let o=EF(n);l9(o);let a=null;for(let l=0;a==null&&l<o.length;++l){let c=x9(s);a=y9(o[l],c,i)}return a}function a9(n,e){let{route:t,pathname:i,params:r}=n;return{id:t.id,pathname:i,params:r,data:e[t.id],handle:t.handle}}function EF(n,e,t,i){e===void 0&&(e=[]),t===void 0&&(t=[]),i===void 0&&(i="");let r=(s,o,a)=>{let l={relativePath:a===void 0?s.path||"":a,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};l.relativePath.startsWith("/")&&(xn(l.relativePath.startsWith(i),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+i+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(i.length));let c=Fa([i,l.relativePath]),u=t.concat(l);s.children&&s.children.length>0&&(xn(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),EF(s.children,e,u,c)),!(s.path==null&&!s.index)&&e.push({path:c,score:m9(c,s.index),routesMeta:u})};return n.forEach((s,o)=>{var a;if(s.path===""||!((a=s.path)!=null&&a.includes("?")))r(s,o);else for(let l of CF(s.path))r(s,o,l)}),e}function CF(n){let e=n.split("/");if(e.length===0)return[];let[t,...i]=e,r=t.endsWith("?"),s=t.replace(/\?$/,"");if(i.length===0)return r?[s,""]:[s];let o=CF(i.join("/")),a=[];return a.push(...o.map(l=>l===""?s:[s,l].join("/"))),r&&a.push(...o),a.map(l=>n.startsWith("/")&&l===""?"/":l)}function l9(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:g9(e.routesMeta.map(i=>i.childrenIndex),t.routesMeta.map(i=>i.childrenIndex)))}const c9=/^:[\w-]+$/,u9=3,h9=2,d9=1,f9=10,p9=-2,PN=n=>n==="*";function m9(n,e){let t=n.split("/"),i=t.length;return t.some(PN)&&(i+=p9),e&&(i+=h9),t.filter(r=>!PN(r)).reduce((r,s)=>r+(c9.test(s)?u9:s===""?d9:f9),i)}function g9(n,e){return n.length===e.length&&n.slice(0,-1).every((i,r)=>i===e[r])?n[n.length-1]-e[e.length-1]:0}function y9(n,e,t){t===void 0&&(t=!1);let{routesMeta:i}=n,r={},s="/",o=[];for(let a=0;a<i.length;++a){let l=i[a],c=a===i.length-1,u=s==="/"?e:e.slice(s.length)||"/",f=RN({path:l.relativePath,caseSensitive:l.caseSensitive,end:c},u),m=l.route;if(!f&&c&&t&&!i[i.length-1].route.index&&(f=RN({path:l.relativePath,caseSensitive:l.caseSensitive,end:!1},u)),!f)return null;Object.assign(r,f.params),o.push({params:r,pathname:Fa([s,f.pathname]),pathnameBase:b9(Fa([s,f.pathnameBase])),route:m}),f.pathnameBase!=="/"&&(s=Fa([s,f.pathnameBase]))}return o}function RN(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,i]=v9(n.path,n.caseSensitive,n.end),r=e.match(t);if(!r)return null;let s=r[0],o=s.replace(/(.)\/+$/,"$1"),a=r.slice(1);return{params:i.reduce((c,u,f)=>{let{paramName:m,isOptional:g}=u;if(m==="*"){let b=a[f]||"";o=s.slice(0,s.length-b.length).replace(/(.)\/+$/,"$1")}const x=a[f];return g&&!x?c[m]=void 0:c[m]=(x||"").replace(/%2F/g,"/"),c},{}),pathname:s,pathnameBase:o,pattern:n}}function v9(n,e,t){e===void 0&&(e=!1),t===void 0&&(t=!0),af(n==="*"||!n.endsWith("*")||n.endsWith("/*"),'Route path "'+n+'" will be treated as if it were '+('"'+n.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+n.replace(/\*$/,"/*")+'".'));let i=[],r="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,l)=>(i.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return n.endsWith("*")?(i.push({paramName:"*"}),r+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?r+="\\/*$":n!==""&&n!=="/"&&(r+="(?:(?=\\/|$))"),[new RegExp(r,e?void 0:"i"),i]}function x9(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return af(!1,'The URL path "'+n+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),n}}function Af(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,i=n.charAt(t);return i&&i!=="/"?null:n.slice(t)||"/"}function _9(n,e){e===void 0&&(e="/");let{pathname:t,search:i="",hash:r=""}=typeof n=="string"?Cc(n):n;return{pathname:t?t.startsWith("/")?t:w9(t,e):e,search:S9(i),hash:T9(r)}}function w9(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(r=>{r===".."?t.length>1&&t.pop():r!=="."&&t.push(r)}),t.length>1?t.join("/"):"/"}function GS(n,e,t,i){return"Cannot include a '"+n+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(i)+"].  Please separate it out to the ")+("`to."+t+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function AF(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function gA(n,e){let t=AF(n);return e?t.map((i,r)=>r===t.length-1?i.pathname:i.pathnameBase):t.map(i=>i.pathnameBase)}function yA(n,e,t,i){i===void 0&&(i=!1);let r;typeof n=="string"?r=Cc(n):(r=ai({},n),xn(!r.pathname||!r.pathname.includes("?"),GS("?","pathname","search",r)),xn(!r.pathname||!r.pathname.includes("#"),GS("#","pathname","hash",r)),xn(!r.search||!r.search.includes("#"),GS("#","search","hash",r)));let s=n===""||r.pathname==="",o=s?"/":r.pathname,a;if(o==null)a=t;else{let f=e.length-1;if(!i&&o.startsWith("..")){let m=o.split("/");for(;m[0]==="..";)m.shift(),f-=1;r.pathname=m.join("/")}a=f>=0?e[f]:"/"}let l=_9(r,a),c=o&&o!=="/"&&o.endsWith("/"),u=(s||o===".")&&t.endsWith("/");return!l.pathname.endsWith("/")&&(c||u)&&(l.pathname+="/"),l}const Fa=n=>n.join("/").replace(/\/\/+/g,"/"),b9=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),S9=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,T9=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;class P0{constructor(e,t,i,r){r===void 0&&(r=!1),this.status=e,this.statusText=t||"",this.internal=r,i instanceof Error?(this.data=i.toString(),this.error=i):this.data=i}}function Jm(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}const MF=["post","put","patch","delete"],E9=new Set(MF),C9=["get",...MF],A9=new Set(C9),M9=new Set([301,302,303,307,308]),I9=new Set([307,308]),WS={state:"idle",location:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},P9={state:"idle",data:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},bp={state:"unblocked",proceed:void 0,reset:void 0,location:void 0},vA=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,R9=n=>({hasErrorBoundary:!!n.hasErrorBoundary}),IF="remix-router-transitions";function N9(n){const e=n.window?n.window:typeof window<"u"?window:void 0,t=typeof e<"u"&&typeof e.document<"u"&&typeof e.document.createElement<"u",i=!t;xn(n.routes.length>0,"You must provide a non-empty routes array to createRouter");let r;if(n.mapRouteProperties)r=n.mapRouteProperties;else if(n.detectErrorBoundary){let Q=n.detectErrorBoundary;r=se=>({hasErrorBoundary:Q(se)})}else r=R9;let s={},o=I0(n.routes,r,void 0,s),a,l=n.basename||"/",c=n.dataStrategy||O9,u=n.patchRoutesOnNavigation,f=ai({v7_fetcherPersist:!1,v7_normalizeFormMethod:!1,v7_partialHydration:!1,v7_prependBasename:!1,v7_relativeSplatPath:!1,v7_skipActionErrorRevalidation:!1},n.future),m=null,g=new Set,x=null,b=null,w=null,v=n.hydrationData!=null,S=bu(o,n.history.location,l),E=!1,I=null;if(S==null&&!u){let Q=ls(404,{pathname:n.history.location.pathname}),{matches:se,route:ge}=zN(o);S=se,I={[ge.id]:Q}}S&&!n.hydrationData&&Xn(S,o,n.history.location.pathname).active&&(S=null);let U;if(S)if(S.some(Q=>Q.route.lazy))U=!1;else if(!S.some(Q=>Q.route.loader))U=!0;else if(f.v7_partialHydration){let Q=n.hydrationData?n.hydrationData.loaderData:null,se=n.hydrationData?n.hydrationData.errors:null;if(se){let ge=S.findIndex(ke=>se[ke.route.id]!==void 0);U=S.slice(0,ge+1).every(ke=>!o1(ke.route,Q,se))}else U=S.every(ge=>!o1(ge.route,Q,se))}else U=n.hydrationData!=null;else if(U=!1,S=[],f.v7_partialHydration){let Q=Xn(null,o,n.history.location.pathname);Q.active&&Q.matches&&(E=!0,S=Q.matches)}let O,C={historyAction:n.history.action,location:n.history.location,matches:S,initialized:U,navigation:WS,restoreScrollPosition:n.hydrationData!=null?!1:null,preventScrollReset:!1,revalidation:"idle",loaderData:n.hydrationData&&n.hydrationData.loaderData||{},actionData:n.hydrationData&&n.hydrationData.actionData||null,errors:n.hydrationData&&n.hydrationData.errors||I,fetchers:new Map,blockers:new Map},P=Oi.Pop,M=!1,A,D=!1,B=new Map,j=null,te=!1,ce=!1,pe=[],de=new Set,W=new Map,Z=0,F=-1,J=new Map,ue=new Set,ye=new Map,le=new Map,xe=new Set,Pe=new Map,Me=new Map,gt;function Kt(){if(m=n.history.listen(Q=>{let{action:se,location:ge,delta:ke}=Q;if(gt){gt(),gt=void 0;return}af(Me.size===0||ke!=null,"You are trying to use a blocker on a POP navigation to a location that was not created by @remix-run/router. This will fail silently in production. This can happen if you are navigating outside the router via `window.history.pushState`/`window.location.hash` instead of using router navigation APIs.  This can also happen if you are using createHashRouter and the user manually changes the URL.");let Je=Ze({currentLocation:C.location,nextLocation:ge,historyAction:se});if(Je&&ke!=null){let mt=new Promise(Nt=>{gt=Nt});n.history.go(ke*-1),ee(Je,{state:"blocked",location:ge,proceed(){ee(Je,{state:"proceeding",proceed:void 0,reset:void 0,location:ge}),mt.then(()=>n.history.go(ke))},reset(){let Nt=new Map(C.blockers);Nt.set(Je,bp),Ae({blockers:Nt})}});return}return Oe(se,ge)}),t){Y9(e,B);let Q=()=>J9(e,B);e.addEventListener("pagehide",Q),j=()=>e.removeEventListener("pagehide",Q)}return C.initialized||Oe(Oi.Pop,C.location,{initialHydration:!0}),O}function Ye(){m&&m(),j&&j(),g.clear(),A&&A.abort(),C.fetchers.forEach((Q,se)=>Fe(se)),C.blockers.forEach((Q,se)=>wn(se))}function rt(Q){return g.add(Q),()=>g.delete(Q)}function Ae(Q,se){se===void 0&&(se={}),C=ai({},C,Q);let ge=[],ke=[];f.v7_fetcherPersist&&C.fetchers.forEach((Je,mt)=>{Je.state==="idle"&&(xe.has(mt)?ke.push(mt):ge.push(mt))}),xe.forEach(Je=>{!C.fetchers.has(Je)&&!W.has(Je)&&ke.push(Je)}),[...g].forEach(Je=>Je(C,{deletedFetchers:ke,viewTransitionOpts:se.viewTransitionOpts,flushSync:se.flushSync===!0})),f.v7_fetcherPersist?(ge.forEach(Je=>C.fetchers.delete(Je)),ke.forEach(Je=>Fe(Je))):ke.forEach(Je=>xe.delete(Je))}function Ee(Q,se,ge){var ke,Je;let{flushSync:mt}=ge===void 0?{}:ge,Nt=C.actionData!=null&&C.navigation.formMethod!=null&&Eo(C.navigation.formMethod)&&C.navigation.state==="loading"&&((ke=Q.state)==null?void 0:ke._isRedirect)!==!0,yt;se.actionData?Object.keys(se.actionData).length>0?yt=se.actionData:yt=null:Nt?yt=C.actionData:yt=null;let ht=se.loaderData?VN(C.loaderData,se.loaderData,se.matches||[],se.errors):C.loaderData,dt=C.blockers;dt.size>0&&(dt=new Map(dt),dt.forEach((Wt,Zn)=>dt.set(Zn,bp)));let bt=M===!0||C.navigation.formMethod!=null&&Eo(C.navigation.formMethod)&&((Je=Q.state)==null?void 0:Je._isRedirect)!==!0;a&&(o=a,a=void 0),te||P===Oi.Pop||(P===Oi.Push?n.history.push(Q,Q.state):P===Oi.Replace&&n.history.replace(Q,Q.state));let Ot;if(P===Oi.Pop){let Wt=B.get(C.location.pathname);Wt&&Wt.has(Q.pathname)?Ot={currentLocation:C.location,nextLocation:Q}:B.has(Q.pathname)&&(Ot={currentLocation:Q,nextLocation:C.location})}else if(D){let Wt=B.get(C.location.pathname);Wt?Wt.add(Q.pathname):(Wt=new Set([Q.pathname]),B.set(C.location.pathname,Wt)),Ot={currentLocation:C.location,nextLocation:Q}}Ae(ai({},se,{actionData:yt,loaderData:ht,historyAction:P,location:Q,initialized:!0,navigation:WS,revalidation:"idle",restoreScrollPosition:kn(Q,se.matches||C.matches),preventScrollReset:bt,blockers:dt}),{viewTransitionOpts:Ot,flushSync:mt===!0}),P=Oi.Pop,M=!1,D=!1,te=!1,ce=!1,pe=[]}async function X(Q,se){if(typeof Q=="number"){n.history.go(Q);return}let ge=s1(C.location,C.matches,l,f.v7_prependBasename,Q,f.v7_relativeSplatPath,se?.fromRouteId,se?.relative),{path:ke,submission:Je,error:mt}=NN(f.v7_normalizeFormMethod,!1,ge,se),Nt=C.location,yt=Ym(C.location,ke,se&&se.state);yt=ai({},yt,n.history.encodeLocation(yt));let ht=se&&se.replace!=null?se.replace:void 0,dt=Oi.Push;ht===!0?dt=Oi.Replace:ht===!1||Je!=null&&Eo(Je.formMethod)&&Je.formAction===C.location.pathname+C.location.search&&(dt=Oi.Replace);let bt=se&&"preventScrollReset"in se?se.preventScrollReset===!0:void 0,Ot=(se&&se.flushSync)===!0,Wt=Ze({currentLocation:Nt,nextLocation:yt,historyAction:dt});if(Wt){ee(Wt,{state:"blocked",location:yt,proceed(){ee(Wt,{state:"proceeding",proceed:void 0,reset:void 0,location:yt}),X(Q,se)},reset(){let Zn=new Map(C.blockers);Zn.set(Wt,bp),Ae({blockers:Zn})}});return}return await Oe(dt,yt,{submission:Je,pendingError:mt,preventScrollReset:bt,replace:se&&se.replace,enableViewTransition:se&&se.viewTransition,flushSync:Ot})}function pt(){if(He(),Ae({revalidation:"loading"}),C.navigation.state!=="submitting"){if(C.navigation.state==="idle"){Oe(C.historyAction,C.location,{startUninterruptedRevalidation:!0});return}Oe(P||C.historyAction,C.navigation.location,{overrideNavigation:C.navigation,enableViewTransition:D===!0})}}async function Oe(Q,se,ge){A&&A.abort(),A=null,P=Q,te=(ge&&ge.startUninterruptedRevalidation)===!0,Ft(C.location,C.matches),M=(ge&&ge.preventScrollReset)===!0,D=(ge&&ge.enableViewTransition)===!0;let ke=a||o,Je=ge&&ge.overrideNavigation,mt=ge!=null&&ge.initialHydration&&C.matches&&C.matches.length>0&&!E?C.matches:bu(ke,se,l),Nt=(ge&&ge.flushSync)===!0;if(mt&&C.initialized&&!ce&&z9(C.location,se)&&!(ge&&ge.submission&&Eo(ge.submission.formMethod))){Ee(se,{matches:mt},{flushSync:Nt});return}let yt=Xn(mt,ke,se.pathname);if(yt.active&&yt.matches&&(mt=yt.matches),!mt){let{error:Mn,notFoundMatches:dn,route:jn}=be(se.pathname);Ee(se,{matches:dn,loaderData:{},errors:{[jn.id]:Mn}},{flushSync:Nt});return}A=new AbortController;let ht=Vh(n.history,se,A.signal,ge&&ge.submission),dt;if(ge&&ge.pendingError)dt=[Su(mt).route.id,{type:Wn.error,error:ge.pendingError}];else if(ge&&ge.submission&&Eo(ge.submission.formMethod)){let Mn=await tt(ht,se,ge.submission,mt,yt.active,{replace:ge.replace,flushSync:Nt});if(Mn.shortCircuited)return;if(Mn.pendingActionResult){let[dn,jn]=Mn.pendingActionResult;if(Ds(jn)&&Jm(jn.error)&&jn.error.status===404){A=null,Ee(se,{matches:Mn.matches,loaderData:{},errors:{[dn]:jn.error}});return}}mt=Mn.matches||mt,dt=Mn.pendingActionResult,Je=qS(se,ge.submission),Nt=!1,yt.active=!1,ht=Vh(n.history,ht.url,ht.signal)}let{shortCircuited:bt,matches:Ot,loaderData:Wt,errors:Zn}=await Ve(ht,se,mt,yt.active,Je,ge&&ge.submission,ge&&ge.fetcherSubmission,ge&&ge.replace,ge&&ge.initialHydration===!0,Nt,dt);bt||(A=null,Ee(se,ai({matches:Ot||mt},BN(dt),{loaderData:Wt,errors:Zn})))}async function tt(Q,se,ge,ke,Je,mt){mt===void 0&&(mt={}),He();let Nt=X9(se,ge);if(Ae({navigation:Nt},{flushSync:mt.flushSync===!0}),Je){let dt=await Zt(ke,se.pathname,Q.signal);if(dt.type==="aborted")return{shortCircuited:!0};if(dt.type==="error"){let bt=Su(dt.partialMatches).route.id;return{matches:dt.partialMatches,pendingActionResult:[bt,{type:Wn.error,error:dt.error}]}}else if(dt.matches)ke=dt.matches;else{let{notFoundMatches:bt,error:Ot,route:Wt}=be(se.pathname);return{matches:bt,pendingActionResult:[Wt.id,{type:Wn.error,error:Ot}]}}}let yt,ht=qp(ke,se);if(!ht.route.action&&!ht.route.lazy)yt={type:Wn.error,error:ls(405,{method:Q.method,pathname:se.pathname,routeId:ht.route.id})};else if(yt=(await Re("action",C,Q,[ht],ke,null))[ht.route.id],Q.signal.aborted)return{shortCircuited:!0};if(Mu(yt)){let dt;return mt&&mt.replace!=null?dt=mt.replace:dt=UN(yt.response.headers.get("Location"),new URL(Q.url),l)===C.location.pathname+C.location.search,await Se(Q,yt,!0,{submission:ge,replace:dt}),{shortCircuited:!0}}if(Gl(yt))throw ls(400,{type:"defer-action"});if(Ds(yt)){let dt=Su(ke,ht.route.id);return(mt&&mt.replace)!==!0&&(P=Oi.Push),{matches:ke,pendingActionResult:[dt.route.id,yt]}}return{matches:ke,pendingActionResult:[ht.route.id,yt]}}async function Ve(Q,se,ge,ke,Je,mt,Nt,yt,ht,dt,bt){let Ot=Je||qS(se,mt),Wt=mt||Nt||GN(Ot),Zn=!te&&(!f.v7_partialHydration||!ht);if(ke){if(Zn){let nt=Mt(bt);Ae(ai({navigation:Ot},nt!==void 0?{actionData:nt}:{}),{flushSync:dt})}let $e=await Zt(ge,se.pathname,Q.signal);if($e.type==="aborted")return{shortCircuited:!0};if($e.type==="error"){let nt=Su($e.partialMatches).route.id;return{matches:$e.partialMatches,loaderData:{},errors:{[nt]:$e.error}}}else if($e.matches)ge=$e.matches;else{let{error:nt,notFoundMatches:We,route:vt}=be(se.pathname);return{matches:We,loaderData:{},errors:{[vt.id]:nt}}}}let Mn=a||o,[dn,jn]=LN(n.history,C,ge,Wt,se,f.v7_partialHydration&&ht===!0,f.v7_skipActionErrorRevalidation,ce,pe,de,xe,ye,ue,Mn,l,bt);if(Ie($e=>!(ge&&ge.some(nt=>nt.route.id===$e))||dn&&dn.some(nt=>nt.route.id===$e)),F=++Z,dn.length===0&&jn.length===0){let $e=ut();return Ee(se,ai({matches:ge,loaderData:{},errors:bt&&Ds(bt[1])?{[bt[0]]:bt[1].error}:null},BN(bt),$e?{fetchers:new Map(C.fetchers)}:{}),{flushSync:dt}),{shortCircuited:!0}}if(Zn){let $e={};if(!ke){$e.navigation=Ot;let nt=Mt(bt);nt!==void 0&&($e.actionData=nt)}jn.length>0&&($e.fetchers=Xe(jn)),Ae($e,{flushSync:dt})}jn.forEach($e=>{Ct($e.key),$e.controller&&W.set($e.key,$e.controller)});let H=()=>jn.forEach($e=>Ct($e.key));A&&A.signal.addEventListener("abort",H);let{loaderResults:ne,fetcherResults:me}=await we(C,ge,dn,jn,Q);if(Q.signal.aborted)return{shortCircuited:!0};A&&A.signal.removeEventListener("abort",H),jn.forEach($e=>W.delete($e.key));let fe=wv(ne);if(fe)return await Se(Q,fe.result,!0,{replace:yt}),{shortCircuited:!0};if(fe=wv(me),fe)return ue.add(fe.key),await Se(Q,fe.result,!0,{replace:yt}),{shortCircuited:!0};let{loaderData:re,errors:Ue}=jN(C,ge,ne,bt,jn,me,Pe);Pe.forEach(($e,nt)=>{$e.subscribe(We=>{(We||$e.done)&&Pe.delete(nt)})}),f.v7_partialHydration&&ht&&C.errors&&(Ue=ai({},C.errors,Ue));let ze=ut(),et=an(F),st=ze||et||jn.length>0;return ai({matches:ge,loaderData:re,errors:Ue},st?{fetchers:new Map(C.fetchers)}:{})}function Mt(Q){if(Q&&!Ds(Q[1]))return{[Q[0]]:Q[1].data};if(C.actionData)return Object.keys(C.actionData).length===0?null:C.actionData}function Xe(Q){return Q.forEach(se=>{let ge=C.fetchers.get(se.key),ke=Sp(void 0,ge?ge.data:void 0);C.fetchers.set(se.key,ke)}),new Map(C.fetchers)}function $(Q,se,ge,ke){if(i)throw new Error("router.fetch() was called during the server render, but it shouldn't be. You are likely calling a useFetcher() method in the body of your component. Try moving it to a useEffect or a callback.");Ct(Q);let Je=(ke&&ke.flushSync)===!0,mt=a||o,Nt=s1(C.location,C.matches,l,f.v7_prependBasename,ge,f.v7_relativeSplatPath,se,ke?.relative),yt=bu(mt,Nt,l),ht=Xn(yt,mt,Nt);if(ht.active&&ht.matches&&(yt=ht.matches),!yt){Qe(Q,se,ls(404,{pathname:Nt}),{flushSync:Je});return}let{path:dt,submission:bt,error:Ot}=NN(f.v7_normalizeFormMethod,!0,Nt,ke);if(Ot){Qe(Q,se,Ot,{flushSync:Je});return}let Wt=qp(yt,dt),Zn=(ke&&ke.preventScrollReset)===!0;if(bt&&Eo(bt.formMethod)){z(Q,se,dt,Wt,yt,ht.active,Je,Zn,bt);return}ye.set(Q,{routeId:se,path:dt}),he(Q,se,dt,Wt,yt,ht.active,Je,Zn,bt)}async function z(Q,se,ge,ke,Je,mt,Nt,yt,ht){He(),ye.delete(Q);function dt(Et){if(!Et.route.action&&!Et.route.lazy){let zt=ls(405,{method:ht.formMethod,pathname:ge,routeId:se});return Qe(Q,se,zt,{flushSync:Nt}),!0}return!1}if(!mt&&dt(ke))return;let bt=C.fetchers.get(Q);Ge(Q,K9(ht,bt),{flushSync:Nt});let Ot=new AbortController,Wt=Vh(n.history,ge,Ot.signal,ht);if(mt){let Et=await Zt(Je,new URL(Wt.url).pathname,Wt.signal,Q);if(Et.type==="aborted")return;if(Et.type==="error"){Qe(Q,se,Et.error,{flushSync:Nt});return}else if(Et.matches){if(Je=Et.matches,ke=qp(Je,ge),dt(ke))return}else{Qe(Q,se,ls(404,{pathname:ge}),{flushSync:Nt});return}}W.set(Q,Ot);let Zn=Z,dn=(await Re("action",C,Wt,[ke],Je,Q))[ke.route.id];if(Wt.signal.aborted){W.get(Q)===Ot&&W.delete(Q);return}if(f.v7_fetcherPersist&&xe.has(Q)){if(Mu(dn)||Ds(dn)){Ge(Q,Ml(void 0));return}}else{if(Mu(dn))if(W.delete(Q),F>Zn){Ge(Q,Ml(void 0));return}else return ue.add(Q),Ge(Q,Sp(ht)),Se(Wt,dn,!1,{fetcherSubmission:ht,preventScrollReset:yt});if(Ds(dn)){Qe(Q,se,dn.error);return}}if(Gl(dn))throw ls(400,{type:"defer-action"});let jn=C.navigation.location||C.location,H=Vh(n.history,jn,Ot.signal),ne=a||o,me=C.navigation.state!=="idle"?bu(ne,C.navigation.location,l):C.matches;xn(me,"Didn't find any matches after fetcher action");let fe=++Z;J.set(Q,fe);let re=Sp(ht,dn.data);C.fetchers.set(Q,re);let[Ue,ze]=LN(n.history,C,me,ht,jn,!1,f.v7_skipActionErrorRevalidation,ce,pe,de,xe,ye,ue,ne,l,[ke.route.id,dn]);ze.filter(Et=>Et.key!==Q).forEach(Et=>{let zt=Et.key,en=C.fetchers.get(zt),$t=Sp(void 0,en?en.data:void 0);C.fetchers.set(zt,$t),Ct(zt),Et.controller&&W.set(zt,Et.controller)}),Ae({fetchers:new Map(C.fetchers)});let et=()=>ze.forEach(Et=>Ct(Et.key));Ot.signal.addEventListener("abort",et);let{loaderResults:st,fetcherResults:$e}=await we(C,me,Ue,ze,H);if(Ot.signal.aborted)return;Ot.signal.removeEventListener("abort",et),J.delete(Q),W.delete(Q),ze.forEach(Et=>W.delete(Et.key));let nt=wv(st);if(nt)return Se(H,nt.result,!1,{preventScrollReset:yt});if(nt=wv($e),nt)return ue.add(nt.key),Se(H,nt.result,!1,{preventScrollReset:yt});let{loaderData:We,errors:vt}=jN(C,me,st,void 0,ze,$e,Pe);if(C.fetchers.has(Q)){let Et=Ml(dn.data);C.fetchers.set(Q,Et)}an(fe),C.navigation.state==="loading"&&fe>F?(xn(P,"Expected pending action"),A&&A.abort(),Ee(C.navigation.location,{matches:me,loaderData:We,errors:vt,fetchers:new Map(C.fetchers)})):(Ae({errors:vt,loaderData:VN(C.loaderData,We,me,vt),fetchers:new Map(C.fetchers)}),ce=!1)}async function he(Q,se,ge,ke,Je,mt,Nt,yt,ht){let dt=C.fetchers.get(Q);Ge(Q,Sp(ht,dt?dt.data:void 0),{flushSync:Nt});let bt=new AbortController,Ot=Vh(n.history,ge,bt.signal);if(mt){let dn=await Zt(Je,new URL(Ot.url).pathname,Ot.signal,Q);if(dn.type==="aborted")return;if(dn.type==="error"){Qe(Q,se,dn.error,{flushSync:Nt});return}else if(dn.matches)Je=dn.matches,ke=qp(Je,ge);else{Qe(Q,se,ls(404,{pathname:ge}),{flushSync:Nt});return}}W.set(Q,bt);let Wt=Z,Mn=(await Re("loader",C,Ot,[ke],Je,Q))[ke.route.id];if(Gl(Mn)&&(Mn=await xA(Mn,Ot.signal,!0)||Mn),W.get(Q)===bt&&W.delete(Q),!Ot.signal.aborted){if(xe.has(Q)){Ge(Q,Ml(void 0));return}if(Mu(Mn))if(F>Wt){Ge(Q,Ml(void 0));return}else{ue.add(Q),await Se(Ot,Mn,!1,{preventScrollReset:yt});return}if(Ds(Mn)){Qe(Q,se,Mn.error);return}xn(!Gl(Mn),"Unhandled fetcher deferred data"),Ge(Q,Ml(Mn.data))}}async function Se(Q,se,ge,ke){let{submission:Je,fetcherSubmission:mt,preventScrollReset:Nt,replace:yt}=ke===void 0?{}:ke;se.response.headers.has("X-Remix-Revalidate")&&(ce=!0);let ht=se.response.headers.get("Location");xn(ht,"Expected a Location header on the redirect Response"),ht=UN(ht,new URL(Q.url),l);let dt=Ym(C.location,ht,{_isRedirect:!0});if(t){let dn=!1;if(se.response.headers.has("X-Remix-Reload-Document"))dn=!0;else if(vA.test(ht)){const jn=n.history.createURL(ht);dn=jn.origin!==e.location.origin||Af(jn.pathname,l)==null}if(dn){yt?e.location.replace(ht):e.location.assign(ht);return}}A=null;let bt=yt===!0||se.response.headers.has("X-Remix-Replace")?Oi.Replace:Oi.Push,{formMethod:Ot,formAction:Wt,formEncType:Zn}=C.navigation;!Je&&!mt&&Ot&&Wt&&Zn&&(Je=GN(C.navigation));let Mn=Je||mt;if(I9.has(se.response.status)&&Mn&&Eo(Mn.formMethod))await Oe(bt,dt,{submission:ai({},Mn,{formAction:ht}),preventScrollReset:Nt||M,enableViewTransition:ge?D:void 0});else{let dn=qS(dt,Je);await Oe(bt,dt,{overrideNavigation:dn,fetcherSubmission:mt,preventScrollReset:Nt||M,enableViewTransition:ge?D:void 0})}}async function Re(Q,se,ge,ke,Je,mt){let Nt,yt={};try{Nt=await U9(c,Q,se,ge,ke,Je,mt,s,r)}catch(ht){return ke.forEach(dt=>{yt[dt.route.id]={type:Wn.error,error:ht}}),yt}for(let[ht,dt]of Object.entries(Nt))if(H9(dt)){let bt=dt.result;yt[ht]={type:Wn.redirect,response:V9(bt,ge,ht,Je,l,f.v7_relativeSplatPath)}}else yt[ht]=await j9(dt);return yt}async function we(Q,se,ge,ke,Je){let mt=Q.matches,Nt=Re("loader",Q,Je,ge,se,null),yt=Promise.all(ke.map(async bt=>{if(bt.matches&&bt.match&&bt.controller){let Wt=(await Re("loader",Q,Vh(n.history,bt.path,bt.controller.signal),[bt.match],bt.matches,bt.key))[bt.match.route.id];return{[bt.key]:Wt}}else return Promise.resolve({[bt.key]:{type:Wn.error,error:ls(404,{pathname:bt.path})}})})),ht=await Nt,dt=(await yt).reduce((bt,Ot)=>Object.assign(bt,Ot),{});return await Promise.all([q9(se,ht,Je.signal,mt,Q.loaderData),$9(se,dt,ke)]),{loaderResults:ht,fetcherResults:dt}}function He(){ce=!0,pe.push(...Ie()),ye.forEach((Q,se)=>{W.has(se)&&de.add(se),Ct(se)})}function Ge(Q,se,ge){ge===void 0&&(ge={}),C.fetchers.set(Q,se),Ae({fetchers:new Map(C.fetchers)},{flushSync:(ge&&ge.flushSync)===!0})}function Qe(Q,se,ge,ke){ke===void 0&&(ke={});let Je=Su(C.matches,se);Fe(Q),Ae({errors:{[Je.route.id]:ge},fetchers:new Map(C.fetchers)},{flushSync:(ke&&ke.flushSync)===!0})}function Yt(Q){return le.set(Q,(le.get(Q)||0)+1),xe.has(Q)&&xe.delete(Q),C.fetchers.get(Q)||P9}function Fe(Q){let se=C.fetchers.get(Q);W.has(Q)&&!(se&&se.state==="loading"&&J.has(Q))&&Ct(Q),ye.delete(Q),J.delete(Q),ue.delete(Q),f.v7_fetcherPersist&&xe.delete(Q),de.delete(Q),C.fetchers.delete(Q)}function lt(Q){let se=(le.get(Q)||0)-1;se<=0?(le.delete(Q),xe.add(Q),f.v7_fetcherPersist||Fe(Q)):le.set(Q,se),Ae({fetchers:new Map(C.fetchers)})}function Ct(Q){let se=W.get(Q);se&&(se.abort(),W.delete(Q))}function Lt(Q){for(let se of Q){let ge=Yt(se),ke=Ml(ge.data);C.fetchers.set(se,ke)}}function ut(){let Q=[],se=!1;for(let ge of ue){let ke=C.fetchers.get(ge);xn(ke,"Expected fetcher: "+ge),ke.state==="loading"&&(ue.delete(ge),Q.push(ge),se=!0)}return Lt(Q),se}function an(Q){let se=[];for(let[ge,ke]of J)if(ke<Q){let Je=C.fetchers.get(ge);xn(Je,"Expected fetcher: "+ge),Je.state==="loading"&&(Ct(ge),J.delete(ge),se.push(ge))}return Lt(se),se.length>0}function Gt(Q,se){let ge=C.blockers.get(Q)||bp;return Me.get(Q)!==se&&Me.set(Q,se),ge}function wn(Q){C.blockers.delete(Q),Me.delete(Q)}function ee(Q,se){let ge=C.blockers.get(Q)||bp;xn(ge.state==="unblocked"&&se.state==="blocked"||ge.state==="blocked"&&se.state==="blocked"||ge.state==="blocked"&&se.state==="proceeding"||ge.state==="blocked"&&se.state==="unblocked"||ge.state==="proceeding"&&se.state==="unblocked","Invalid blocker state transition: "+ge.state+" -> "+se.state);let ke=new Map(C.blockers);ke.set(Q,se),Ae({blockers:ke})}function Ze(Q){let{currentLocation:se,nextLocation:ge,historyAction:ke}=Q;if(Me.size===0)return;Me.size>1&&af(!1,"A router only supports one blocker at a time");let Je=Array.from(Me.entries()),[mt,Nt]=Je[Je.length-1],yt=C.blockers.get(mt);if(!(yt&&yt.state==="proceeding")&&Nt({currentLocation:se,nextLocation:ge,historyAction:ke}))return mt}function be(Q){let se=ls(404,{pathname:Q}),ge=a||o,{matches:ke,route:Je}=zN(ge);return Ie(),{notFoundMatches:ke,route:Je,error:se}}function Ie(Q){let se=[];return Pe.forEach((ge,ke)=>{(!Q||Q(ke))&&(ge.cancel(),se.push(ke),Pe.delete(ke))}),se}function it(Q,se,ge){if(x=Q,w=se,b=ge||null,!v&&C.navigation===WS){v=!0;let ke=kn(C.location,C.matches);ke!=null&&Ae({restoreScrollPosition:ke})}return()=>{x=null,w=null,b=null}}function Ke(Q,se){return b&&b(Q,se.map(ke=>a9(ke,C.loaderData)))||Q.key}function Ft(Q,se){if(x&&w){let ge=Ke(Q,se);x[ge]=w()}}function kn(Q,se){if(x){let ge=Ke(Q,se),ke=x[ge];if(typeof ke=="number")return ke}return null}function Xn(Q,se,ge){if(u)if(Q){if(Object.keys(Q[0].params).length>0)return{active:!0,matches:jx(se,ge,l,!0)}}else return{active:!0,matches:jx(se,ge,l,!0)||[]};return{active:!1,matches:null}}async function Zt(Q,se,ge,ke){if(!u)return{type:"success",matches:Q};let Je=Q;for(;;){let mt=a==null,Nt=a||o,yt=s;try{await u({signal:ge,path:se,matches:Je,fetcherKey:ke,patch:(bt,Ot)=>{ge.aborted||ON(bt,Ot,Nt,yt,r)}})}catch(bt){return{type:"error",error:bt,partialMatches:Je}}finally{mt&&!ge.aborted&&(o=[...o])}if(ge.aborted)return{type:"aborted"};let ht=bu(Nt,se,l);if(ht)return{type:"success",matches:ht};let dt=jx(Nt,se,l,!0);if(!dt||Je.length===dt.length&&Je.every((bt,Ot)=>bt.route.id===dt[Ot].route.id))return{type:"success",matches:null};Je=dt}}function zi(Q){s={},a=I0(Q,r,void 0,s)}function Hn(Q,se){let ge=a==null;ON(Q,se,a||o,s,r),ge&&(o=[...o],Ae({}))}return O={get basename(){return l},get future(){return f},get state(){return C},get routes(){return o},get window(){return e},initialize:Kt,subscribe:rt,enableScrollRestoration:it,navigate:X,fetch:$,revalidate:pt,createHref:Q=>n.history.createHref(Q),encodeLocation:Q=>n.history.encodeLocation(Q),getFetcher:Yt,deleteFetcher:lt,dispose:Ye,getBlocker:Gt,deleteBlocker:wn,patchRoutes:Hn,_internalFetchControllers:W,_internalActiveDeferreds:Pe,_internalSetRoutes:zi},O}function D9(n){return n!=null&&("formData"in n&&n.formData!=null||"body"in n&&n.body!==void 0)}function s1(n,e,t,i,r,s,o,a){let l,c;if(o){l=[];for(let f of e)if(l.push(f),f.route.id===o){c=f;break}}else l=e,c=e[e.length-1];let u=yA(r||".",gA(l,s),Af(n.pathname,t)||n.pathname,a==="path");if(r==null&&(u.search=n.search,u.hash=n.hash),(r==null||r===""||r===".")&&c){let f=_A(u.search);if(c.route.index&&!f)u.search=u.search?u.search.replace(/^\?/,"?index&"):"?index";else if(!c.route.index&&f){let m=new URLSearchParams(u.search),g=m.getAll("index");m.delete("index"),g.filter(b=>b).forEach(b=>m.append("index",b));let x=m.toString();u.search=x?"?"+x:""}}return i&&t!=="/"&&(u.pathname=u.pathname==="/"?t:Fa([t,u.pathname])),Ku(u)}function NN(n,e,t,i){if(!i||!D9(i))return{path:t};if(i.formMethod&&!W9(i.formMethod))return{path:t,error:ls(405,{method:i.formMethod})};let r=()=>({path:t,error:ls(400,{type:"invalid-body"})}),s=i.formMethod||"get",o=n?s.toUpperCase():s.toLowerCase(),a=NF(t);if(i.body!==void 0){if(i.formEncType==="text/plain"){if(!Eo(o))return r();let m=typeof i.body=="string"?i.body:i.body instanceof FormData||i.body instanceof URLSearchParams?Array.from(i.body.entries()).reduce((g,x)=>{let[b,w]=x;return""+g+b+"="+w+`
`},""):String(i.body);return{path:t,submission:{formMethod:o,formAction:a,formEncType:i.formEncType,formData:void 0,json:void 0,text:m}}}else if(i.formEncType==="application/json"){if(!Eo(o))return r();try{let m=typeof i.body=="string"?JSON.parse(i.body):i.body;return{path:t,submission:{formMethod:o,formAction:a,formEncType:i.formEncType,formData:void 0,json:m,text:void 0}}}catch{return r()}}}xn(typeof FormData=="function","FormData is not available in this environment");let l,c;if(i.formData)l=a1(i.formData),c=i.formData;else if(i.body instanceof FormData)l=a1(i.body),c=i.body;else if(i.body instanceof URLSearchParams)l=i.body,c=FN(l);else if(i.body==null)l=new URLSearchParams,c=new FormData;else try{l=new URLSearchParams(i.body),c=FN(l)}catch{return r()}let u={formMethod:o,formAction:a,formEncType:i&&i.formEncType||"application/x-www-form-urlencoded",formData:c,json:void 0,text:void 0};if(Eo(u.formMethod))return{path:t,submission:u};let f=Cc(t);return e&&f.search&&_A(f.search)&&l.append("index",""),f.search="?"+l,{path:Ku(f),submission:u}}function DN(n,e,t){t===void 0&&(t=!1);let i=n.findIndex(r=>r.route.id===e);return i>=0?n.slice(0,t?i+1:i):n}function LN(n,e,t,i,r,s,o,a,l,c,u,f,m,g,x,b){let w=b?Ds(b[1])?b[1].error:b[1].data:void 0,v=n.createURL(e.location),S=n.createURL(r),E=t;s&&e.errors?E=DN(t,Object.keys(e.errors)[0],!0):b&&Ds(b[1])&&(E=DN(t,b[0]));let I=b?b[1].statusCode:void 0,U=o&&I&&I>=400,O=E.filter((P,M)=>{let{route:A}=P;if(A.lazy)return!0;if(A.loader==null)return!1;if(s)return o1(A,e.loaderData,e.errors);if(L9(e.loaderData,e.matches[M],P)||l.some(j=>j===P.route.id))return!0;let D=e.matches[M],B=P;return kN(P,ai({currentUrl:v,currentParams:D.params,nextUrl:S,nextParams:B.params},i,{actionResult:w,actionStatus:I,defaultShouldRevalidate:U?!1:a||v.pathname+v.search===S.pathname+S.search||v.search!==S.search||PF(D,B)}))}),C=[];return f.forEach((P,M)=>{if(s||!t.some(te=>te.route.id===P.routeId)||u.has(M))return;let A=bu(g,P.path,x);if(!A){C.push({key:M,routeId:P.routeId,path:P.path,matches:null,match:null,controller:null});return}let D=e.fetchers.get(M),B=qp(A,P.path),j=!1;m.has(M)?j=!1:c.has(M)?(c.delete(M),j=!0):D&&D.state!=="idle"&&D.data===void 0?j=a:j=kN(B,ai({currentUrl:v,currentParams:e.matches[e.matches.length-1].params,nextUrl:S,nextParams:t[t.length-1].params},i,{actionResult:w,actionStatus:I,defaultShouldRevalidate:U?!1:a})),j&&C.push({key:M,routeId:P.routeId,path:P.path,matches:A,match:B,controller:new AbortController})}),[O,C]}function o1(n,e,t){if(n.lazy)return!0;if(!n.loader)return!1;let i=e!=null&&e[n.id]!==void 0,r=t!=null&&t[n.id]!==void 0;return!i&&r?!1:typeof n.loader=="function"&&n.loader.hydrate===!0?!0:!i&&!r}function L9(n,e,t){let i=!e||t.route.id!==e.route.id,r=n[t.route.id]===void 0;return i||r}function PF(n,e){let t=n.route.path;return n.pathname!==e.pathname||t!=null&&t.endsWith("*")&&n.params["*"]!==e.params["*"]}function kN(n,e){if(n.route.shouldRevalidate){let t=n.route.shouldRevalidate(e);if(typeof t=="boolean")return t}return e.defaultShouldRevalidate}function ON(n,e,t,i,r){var s;let o;if(n){let c=i[n];xn(c,"No route found to patch children into: routeId = "+n),c.children||(c.children=[]),o=c.children}else o=t;let a=e.filter(c=>!o.some(u=>RF(c,u))),l=I0(a,r,[n||"_","patch",String(((s=o)==null?void 0:s.length)||"0")],i);o.push(...l)}function RF(n,e){return"id"in n&&"id"in e&&n.id===e.id?!0:n.index===e.index&&n.path===e.path&&n.caseSensitive===e.caseSensitive?(!n.children||n.children.length===0)&&(!e.children||e.children.length===0)?!0:n.children.every((t,i)=>{var r;return(r=e.children)==null?void 0:r.some(s=>RF(t,s))}):!1}async function k9(n,e,t){if(!n.lazy)return;let i=await n.lazy();if(!n.lazy)return;let r=t[n.id];xn(r,"No route found in manifest");let s={};for(let o in i){let l=r[o]!==void 0&&o!=="hasErrorBoundary";af(!l,'Route "'+r.id+'" has a static property "'+o+'" defined but its lazy function is also returning a value for this property. '+('The lazy route property "'+o+'" will be ignored.')),!l&&!s9.has(o)&&(s[o]=i[o])}Object.assign(r,s),Object.assign(r,ai({},e(r),{lazy:void 0}))}async function O9(n){let{matches:e}=n,t=e.filter(r=>r.shouldLoad);return(await Promise.all(t.map(r=>r.resolve()))).reduce((r,s,o)=>Object.assign(r,{[t[o].route.id]:s}),{})}async function U9(n,e,t,i,r,s,o,a,l,c){let u=s.map(g=>g.route.lazy?k9(g.route,l,a):void 0),f=s.map((g,x)=>{let b=u[x],w=r.some(S=>S.route.id===g.route.id);return ai({},g,{shouldLoad:w,resolve:async S=>(S&&i.method==="GET"&&(g.route.lazy||g.route.loader)&&(w=!0),w?F9(e,i,g,b,S,c):Promise.resolve({type:Wn.data,result:void 0}))})}),m=await n({matches:f,request:i,params:s[0].params,fetcherKey:o,context:c});try{await Promise.all(u)}catch{}return m}async function F9(n,e,t,i,r,s){let o,a,l=c=>{let u,f=new Promise((x,b)=>u=b);a=()=>u(),e.signal.addEventListener("abort",a);let m=x=>typeof c!="function"?Promise.reject(new Error("You cannot call the handler for a route which defines a boolean "+('"'+n+'" [routeId: '+t.route.id+"]"))):c({request:e,params:t.params,context:s},...x!==void 0?[x]:[]),g=(async()=>{try{return{type:"data",result:await(r?r(b=>m(b)):m())}}catch(x){return{type:"error",result:x}}})();return Promise.race([g,f])};try{let c=t.route[n];if(i)if(c){let u,[f]=await Promise.all([l(c).catch(m=>{u=m}),i]);if(u!==void 0)throw u;o=f}else if(await i,c=t.route[n],c)o=await l(c);else if(n==="action"){let u=new URL(e.url),f=u.pathname+u.search;throw ls(405,{method:e.method,pathname:f,routeId:t.route.id})}else return{type:Wn.data,result:void 0};else if(c)o=await l(c);else{let u=new URL(e.url),f=u.pathname+u.search;throw ls(404,{pathname:f})}xn(o.result!==void 0,"You defined "+(n==="action"?"an action":"a loader")+" for route "+('"'+t.route.id+"\" but didn't return anything from your `"+n+"` ")+"function. Please return a value or `null`.")}catch(c){return{type:Wn.error,result:c}}finally{a&&e.signal.removeEventListener("abort",a)}return o}async function j9(n){let{result:e,type:t}=n;if(DF(e)){let f;try{let m=e.headers.get("Content-Type");m&&/\bapplication\/json\b/.test(m)?e.body==null?f=null:f=await e.json():f=await e.text()}catch(m){return{type:Wn.error,error:m}}return t===Wn.error?{type:Wn.error,error:new P0(e.status,e.statusText,f),statusCode:e.status,headers:e.headers}:{type:Wn.data,data:f,statusCode:e.status,headers:e.headers}}if(t===Wn.error){if(HN(e)){var i,r;if(e.data instanceof Error){var s,o;return{type:Wn.error,error:e.data,statusCode:(s=e.init)==null?void 0:s.status,headers:(o=e.init)!=null&&o.headers?new Headers(e.init.headers):void 0}}return{type:Wn.error,error:new P0(((i=e.init)==null?void 0:i.status)||500,void 0,e.data),statusCode:Jm(e)?e.status:void 0,headers:(r=e.init)!=null&&r.headers?new Headers(e.init.headers):void 0}}return{type:Wn.error,error:e,statusCode:Jm(e)?e.status:void 0}}if(G9(e)){var a,l;return{type:Wn.deferred,deferredData:e,statusCode:(a=e.init)==null?void 0:a.status,headers:((l=e.init)==null?void 0:l.headers)&&new Headers(e.init.headers)}}if(HN(e)){var c,u;return{type:Wn.data,data:e.data,statusCode:(c=e.init)==null?void 0:c.status,headers:(u=e.init)!=null&&u.headers?new Headers(e.init.headers):void 0}}return{type:Wn.data,data:e}}function V9(n,e,t,i,r,s){let o=n.headers.get("Location");if(xn(o,"Redirects returned/thrown from loaders/actions must have a Location header"),!vA.test(o)){let a=i.slice(0,i.findIndex(l=>l.route.id===t)+1);o=s1(new URL(e.url),a,r,!0,o,s),n.headers.set("Location",o)}return n}function UN(n,e,t){if(vA.test(n)){let i=n,r=i.startsWith("//")?new URL(e.protocol+i):new URL(i),s=Af(r.pathname,t)!=null;if(r.origin===e.origin&&s)return r.pathname+r.search+r.hash}return n}function Vh(n,e,t,i){let r=n.createURL(NF(e)).toString(),s={signal:t};if(i&&Eo(i.formMethod)){let{formMethod:o,formEncType:a}=i;s.method=o.toUpperCase(),a==="application/json"?(s.headers=new Headers({"Content-Type":a}),s.body=JSON.stringify(i.json)):a==="text/plain"?s.body=i.text:a==="application/x-www-form-urlencoded"&&i.formData?s.body=a1(i.formData):s.body=i.formData}return new Request(r,s)}function a1(n){let e=new URLSearchParams;for(let[t,i]of n.entries())e.append(t,typeof i=="string"?i:i.name);return e}function FN(n){let e=new FormData;for(let[t,i]of n.entries())e.append(t,i);return e}function B9(n,e,t,i,r){let s={},o=null,a,l=!1,c={},u=t&&Ds(t[1])?t[1].error:void 0;return n.forEach(f=>{if(!(f.route.id in e))return;let m=f.route.id,g=e[m];if(xn(!Mu(g),"Cannot handle redirect results in processLoaderData"),Ds(g)){let x=g.error;u!==void 0&&(x=u,u=void 0),o=o||{};{let b=Su(n,m);o[b.route.id]==null&&(o[b.route.id]=x)}s[m]=void 0,l||(l=!0,a=Jm(g.error)?g.error.status:500),g.headers&&(c[m]=g.headers)}else Gl(g)?(i.set(m,g.deferredData),s[m]=g.deferredData.data,g.statusCode!=null&&g.statusCode!==200&&!l&&(a=g.statusCode),g.headers&&(c[m]=g.headers)):(s[m]=g.data,g.statusCode&&g.statusCode!==200&&!l&&(a=g.statusCode),g.headers&&(c[m]=g.headers))}),u!==void 0&&t&&(o={[t[0]]:u},s[t[0]]=void 0),{loaderData:s,errors:o,statusCode:a||200,loaderHeaders:c}}function jN(n,e,t,i,r,s,o){let{loaderData:a,errors:l}=B9(e,t,i,o);return r.forEach(c=>{let{key:u,match:f,controller:m}=c,g=s[u];if(xn(g,"Did not find corresponding fetcher result"),!(m&&m.signal.aborted))if(Ds(g)){let x=Su(n.matches,f?.route.id);l&&l[x.route.id]||(l=ai({},l,{[x.route.id]:g.error})),n.fetchers.delete(u)}else if(Mu(g))xn(!1,"Unhandled fetcher revalidation redirect");else if(Gl(g))xn(!1,"Unhandled fetcher deferred data");else{let x=Ml(g.data);n.fetchers.set(u,x)}}),{loaderData:a,errors:l}}function VN(n,e,t,i){let r=ai({},e);for(let s of t){let o=s.route.id;if(e.hasOwnProperty(o)?e[o]!==void 0&&(r[o]=e[o]):n[o]!==void 0&&s.route.loader&&(r[o]=n[o]),i&&i.hasOwnProperty(o))break}return r}function BN(n){return n?Ds(n[1])?{actionData:{}}:{actionData:{[n[0]]:n[1].data}}:{}}function Su(n,e){return(e?n.slice(0,n.findIndex(i=>i.route.id===e)+1):[...n]).reverse().find(i=>i.route.hasErrorBoundary===!0)||n[0]}function zN(n){let e=n.length===1?n[0]:n.find(t=>t.index||!t.path||t.path==="/")||{id:"__shim-error-route__"};return{matches:[{params:{},pathname:"",pathnameBase:"",route:e}],route:e}}function ls(n,e){let{pathname:t,routeId:i,method:r,type:s,message:o}=e===void 0?{}:e,a="Unknown Server Error",l="Unknown @remix-run/router error";return n===400?(a="Bad Request",r&&t&&i?l="You made a "+r+' request to "'+t+'" but '+('did not provide a `loader` for route "'+i+'", ')+"so there is no way to handle the request.":s==="defer-action"?l="defer() is not supported in actions":s==="invalid-body"&&(l="Unable to encode submission body")):n===403?(a="Forbidden",l='Route "'+i+'" does not match URL "'+t+'"'):n===404?(a="Not Found",l='No route matches URL "'+t+'"'):n===405&&(a="Method Not Allowed",r&&t&&i?l="You made a "+r.toUpperCase()+' request to "'+t+'" but '+('did not provide an `action` for route "'+i+'", ')+"so there is no way to handle the request.":r&&(l='Invalid request method "'+r.toUpperCase()+'"')),new P0(n||500,a,new Error(l),!0)}function wv(n){let e=Object.entries(n);for(let t=e.length-1;t>=0;t--){let[i,r]=e[t];if(Mu(r))return{key:i,result:r}}}function NF(n){let e=typeof n=="string"?Cc(n):n;return Ku(ai({},e,{hash:""}))}function z9(n,e){return n.pathname!==e.pathname||n.search!==e.search?!1:n.hash===""?e.hash!=="":n.hash===e.hash?!0:e.hash!==""}function H9(n){return DF(n.result)&&M9.has(n.result.status)}function Gl(n){return n.type===Wn.deferred}function Ds(n){return n.type===Wn.error}function Mu(n){return(n&&n.type)===Wn.redirect}function HN(n){return typeof n=="object"&&n!=null&&"type"in n&&"data"in n&&"init"in n&&n.type==="DataWithResponseInit"}function G9(n){let e=n;return e&&typeof e=="object"&&typeof e.data=="object"&&typeof e.subscribe=="function"&&typeof e.cancel=="function"&&typeof e.resolveData=="function"}function DF(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.headers=="object"&&typeof n.body<"u"}function W9(n){return A9.has(n.toLowerCase())}function Eo(n){return E9.has(n.toLowerCase())}async function q9(n,e,t,i,r){let s=Object.entries(e);for(let o=0;o<s.length;o++){let[a,l]=s[o],c=n.find(m=>m?.route.id===a);if(!c)continue;let u=i.find(m=>m.route.id===c.route.id),f=u!=null&&!PF(u,c)&&(r&&r[c.route.id])!==void 0;Gl(l)&&f&&await xA(l,t,!1).then(m=>{m&&(e[a]=m)})}}async function $9(n,e,t){for(let i=0;i<t.length;i++){let{key:r,routeId:s,controller:o}=t[i],a=e[r];n.find(c=>c?.route.id===s)&&Gl(a)&&(xn(o,"Expected an AbortController for revalidating fetcher deferred result"),await xA(a,o.signal,!0).then(c=>{c&&(e[r]=c)}))}}async function xA(n,e,t){if(t===void 0&&(t=!1),!await n.deferredData.resolveData(e)){if(t)try{return{type:Wn.data,data:n.deferredData.unwrappedData}}catch(r){return{type:Wn.error,error:r}}return{type:Wn.data,data:n.deferredData.data}}}function _A(n){return new URLSearchParams(n).getAll("index").some(e=>e==="")}function qp(n,e){let t=typeof e=="string"?Cc(e).search:e.search;if(n[n.length-1].route.index&&_A(t||""))return n[n.length-1];let i=AF(n);return i[i.length-1]}function GN(n){let{formMethod:e,formAction:t,formEncType:i,text:r,formData:s,json:o}=n;if(!(!e||!t||!i)){if(r!=null)return{formMethod:e,formAction:t,formEncType:i,formData:void 0,json:void 0,text:r};if(s!=null)return{formMethod:e,formAction:t,formEncType:i,formData:s,json:void 0,text:void 0};if(o!==void 0)return{formMethod:e,formAction:t,formEncType:i,formData:void 0,json:o,text:void 0}}}function qS(n,e){return e?{state:"loading",location:n,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}:{state:"loading",location:n,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0}}function X9(n,e){return{state:"submitting",location:n,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}}function Sp(n,e){return n?{state:"loading",formMethod:n.formMethod,formAction:n.formAction,formEncType:n.formEncType,formData:n.formData,json:n.json,text:n.text,data:e}:{state:"loading",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:e}}function K9(n,e){return{state:"submitting",formMethod:n.formMethod,formAction:n.formAction,formEncType:n.formEncType,formData:n.formData,json:n.json,text:n.text,data:e?e.data:void 0}}function Ml(n){return{state:"idle",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:n}}function Y9(n,e){try{let t=n.sessionStorage.getItem(IF);if(t){let i=JSON.parse(t);for(let[r,s]of Object.entries(i||{}))s&&Array.isArray(s)&&e.set(r,new Set(s||[]))}}catch{}}function J9(n,e){if(e.size>0){let t={};for(let[i,r]of e)t[i]=[...r];try{n.sessionStorage.setItem(IF,JSON.stringify(t))}catch(i){af(!1,"Failed to save applied view transitions in sessionStorage ("+i+").")}}}/**
 * React Router v6.30.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function R0(){return R0=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},R0.apply(this,arguments)}const dw=V.createContext(null),LF=V.createContext(null),hh=V.createContext(null),wA=V.createContext(null),Ac=V.createContext({outlet:null,matches:[],isDataRoute:!1}),kF=V.createContext(null);function Q9(n,e){let{relative:t}=e===void 0?{}:e;Bg()||xn(!1);let{basename:i,navigator:r}=V.useContext(hh),{hash:s,pathname:o,search:a}=UF(n,{relative:t}),l=o;return i!=="/"&&(l=o==="/"?i:Fa([i,o])),r.createHref({pathname:l,search:a,hash:s})}function Bg(){return V.useContext(wA)!=null}function Fo(){return Bg()||xn(!1),V.useContext(wA).location}function OF(n){V.useContext(hh).static||V.useLayoutEffect(n)}function qt(){let{isDataRoute:n}=V.useContext(Ac);return n?d8():Z9()}function Z9(){Bg()||xn(!1);let n=V.useContext(dw),{basename:e,future:t,navigator:i}=V.useContext(hh),{matches:r}=V.useContext(Ac),{pathname:s}=Fo(),o=JSON.stringify(gA(r,t.v7_relativeSplatPath)),a=V.useRef(!1);return OF(()=>{a.current=!0}),V.useCallback(function(c,u){if(u===void 0&&(u={}),!a.current)return;if(typeof c=="number"){i.go(c);return}let f=yA(c,JSON.parse(o),s,u.relative==="path");n==null&&e!=="/"&&(f.pathname=f.pathname==="/"?e:Fa([e,f.pathname])),(u.replace?i.replace:i.push)(f,u.state,u)},[e,i,o,s,n])}const e8=V.createContext(null);function t8(n){let e=V.useContext(Ac).outlet;return e&&V.createElement(e8.Provider,{value:n},e)}function UF(n,e){let{relative:t}=e===void 0?{}:e,{future:i}=V.useContext(hh),{matches:r}=V.useContext(Ac),{pathname:s}=Fo(),o=JSON.stringify(gA(r,i.v7_relativeSplatPath));return V.useMemo(()=>yA(n,JSON.parse(o),s,t==="path"),[n,o,s,t])}function n8(n,e,t,i){Bg()||xn(!1);let{navigator:r,static:s}=V.useContext(hh),{matches:o}=V.useContext(Ac),a=o[o.length-1],l=a?a.params:{};a&&a.pathname;let c=a?a.pathnameBase:"/";a&&a.route;let u=Fo(),f;f=u;let m=f.pathname||"/",g=m;if(c!=="/"){let w=c.replace(/^\//,"").split("/");g="/"+m.replace(/^\//,"").split("/").slice(w.length).join("/")}let x=!s&&t&&t.matches&&t.matches.length>0?t.matches:bu(n,{pathname:g});return a8(x&&x.map(w=>Object.assign({},w,{params:Object.assign({},l,w.params),pathname:Fa([c,r.encodeLocation?r.encodeLocation(w.pathname).pathname:w.pathname]),pathnameBase:w.pathnameBase==="/"?c:Fa([c,r.encodeLocation?r.encodeLocation(w.pathnameBase).pathname:w.pathnameBase])})),o,t,i)}function i8(){let n=h8(),e=Jm(n)?n.status+" "+n.statusText:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,r={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return V.createElement(V.Fragment,null,V.createElement("h2",null,"Unexpected Application Error!"),V.createElement("h3",{style:{fontStyle:"italic"}},e),t?V.createElement("pre",{style:r},t):null,null)}const r8=V.createElement(i8,null);class s8 extends V.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error!==void 0?V.createElement(Ac.Provider,{value:this.props.routeContext},V.createElement(kF.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function o8(n){let{routeContext:e,match:t,children:i}=n,r=V.useContext(dw);return r&&r.static&&r.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=t.route.id),V.createElement(Ac.Provider,{value:e},i)}function a8(n,e,t,i){var r;if(e===void 0&&(e=[]),t===void 0&&(t=null),i===void 0&&(i=null),n==null){var s;if(!t)return null;if(t.errors)n=t.matches;else if((s=i)!=null&&s.v7_partialHydration&&e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let o=n,a=(r=t)==null?void 0:r.errors;if(a!=null){let u=o.findIndex(f=>f.route.id&&a?.[f.route.id]!==void 0);u>=0||xn(!1),o=o.slice(0,Math.min(o.length,u+1))}let l=!1,c=-1;if(t&&i&&i.v7_partialHydration)for(let u=0;u<o.length;u++){let f=o[u];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(c=u),f.route.id){let{loaderData:m,errors:g}=t,x=f.route.loader&&m[f.route.id]===void 0&&(!g||g[f.route.id]===void 0);if(f.route.lazy||x){l=!0,c>=0?o=o.slice(0,c+1):o=[o[0]];break}}}return o.reduceRight((u,f,m)=>{let g,x=!1,b=null,w=null;t&&(g=a&&f.route.id?a[f.route.id]:void 0,b=f.route.errorElement||r8,l&&(c<0&&m===0?(f8("route-fallback"),x=!0,w=null):c===m&&(x=!0,w=f.route.hydrateFallbackElement||null)));let v=e.concat(o.slice(0,m+1)),S=()=>{let E;return g?E=b:x?E=w:f.route.Component?E=V.createElement(f.route.Component,null):f.route.element?E=f.route.element:E=u,V.createElement(o8,{match:f,routeContext:{outlet:u,matches:v,isDataRoute:t!=null},children:E})};return t&&(f.route.ErrorBoundary||f.route.errorElement||m===0)?V.createElement(s8,{location:t.location,revalidation:t.revalidation,component:b,error:g,children:S(),routeContext:{outlet:null,matches:v,isDataRoute:!0}}):S()},null)}var FF=function(n){return n.UseBlocker="useBlocker",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n}(FF||{}),jF=function(n){return n.UseBlocker="useBlocker",n.UseLoaderData="useLoaderData",n.UseActionData="useActionData",n.UseRouteError="useRouteError",n.UseNavigation="useNavigation",n.UseRouteLoaderData="useRouteLoaderData",n.UseMatches="useMatches",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n.UseRouteId="useRouteId",n}(jF||{});function l8(n){let e=V.useContext(dw);return e||xn(!1),e}function c8(n){let e=V.useContext(LF);return e||xn(!1),e}function u8(n){let e=V.useContext(Ac);return e||xn(!1),e}function VF(n){let e=u8(),t=e.matches[e.matches.length-1];return t.route.id||xn(!1),t.route.id}function h8(){var n;let e=V.useContext(kF),t=c8(jF.UseRouteError),i=VF();return e!==void 0?e:(n=t.errors)==null?void 0:n[i]}function d8(){let{router:n}=l8(FF.UseNavigateStable),e=VF(),t=V.useRef(!1);return OF(()=>{t.current=!0}),V.useCallback(function(r,s){s===void 0&&(s={}),t.current&&(typeof r=="number"?n.navigate(r):n.navigate(r,R0({fromRouteId:e},s)))},[n,e])}const WN={};function f8(n,e,t){WN[n]||(WN[n]=!0)}function p8(n,e){n?.v7_startTransition,n?.v7_relativeSplatPath===void 0&&(!e||e.v7_relativeSplatPath),e&&(e.v7_fetcherPersist,e.v7_normalizeFormMethod,e.v7_partialHydration,e.v7_skipActionErrorRevalidation)}function m8(n){return t8(n.context)}function g8(n){let{basename:e="/",children:t=null,location:i,navigationType:r=Oi.Pop,navigator:s,static:o=!1,future:a}=n;Bg()&&xn(!1);let l=e.replace(/^\/*/,"/"),c=V.useMemo(()=>({basename:l,navigator:s,static:o,future:R0({v7_relativeSplatPath:!1},a)}),[l,a,s,o]);typeof i=="string"&&(i=Cc(i));let{pathname:u="/",search:f="",hash:m="",state:g=null,key:x="default"}=i,b=V.useMemo(()=>{let w=Af(u,l);return w==null?null:{location:{pathname:w,search:f,hash:m,state:g,key:x},navigationType:r}},[l,u,f,m,g,x,r]);return b==null?null:V.createElement(hh.Provider,{value:c},V.createElement(wA.Provider,{children:t,value:b}))}new Promise(()=>{});function y8(n){let e={hasErrorBoundary:n.ErrorBoundary!=null||n.errorElement!=null};return n.Component&&Object.assign(e,{element:V.createElement(n.Component),Component:void 0}),n.HydrateFallback&&Object.assign(e,{hydrateFallbackElement:V.createElement(n.HydrateFallback),HydrateFallback:void 0}),n.ErrorBoundary&&Object.assign(e,{errorElement:V.createElement(n.ErrorBoundary),ErrorBoundary:void 0}),e}/**
 * React Router DOM v6.30.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Qm(){return Qm=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},Qm.apply(this,arguments)}function v8(n,e){if(n==null)return{};var t={},i=Object.keys(n),r,s;for(s=0;s<i.length;s++)r=i[s],!(e.indexOf(r)>=0)&&(t[r]=n[r]);return t}function x8(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function _8(n,e){return n.button===0&&(!e||e==="_self")&&!x8(n)}const w8=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],b8="6";try{window.__reactRouterVersion=b8}catch{}function S8(n,e){return N9({basename:void 0,future:Qm({},void 0,{v7_prependBasename:!0}),history:n9({window:void 0}),hydrationData:T8(),routes:n,mapRouteProperties:y8,dataStrategy:void 0,patchRoutesOnNavigation:void 0,window:void 0}).initialize()}function T8(){var n;let e=(n=window)==null?void 0:n.__staticRouterHydrationData;return e&&e.errors&&(e=Qm({},e,{errors:E8(e.errors)})),e}function E8(n){if(!n)return null;let e=Object.entries(n),t={};for(let[i,r]of e)if(r&&r.__type==="RouteErrorResponse")t[i]=new P0(r.status,r.statusText,r.data,r.internal===!0);else if(r&&r.__type==="Error"){if(r.__subType){let s=window[r.__subType];if(typeof s=="function")try{let o=new s(r.message);o.stack="",t[i]=o}catch{}}if(t[i]==null){let s=new Error(r.message);s.stack="",t[i]=s}}else t[i]=r;return t}const C8=V.createContext({isTransitioning:!1}),A8=V.createContext(new Map),M8="startTransition",qN=HH[M8],I8="flushSync",$N=t9[I8];function P8(n){qN?qN(n):n()}function Tp(n){$N?$N(n):n()}let R8=class{constructor(){this.status="pending",this.promise=new Promise((e,t)=>{this.resolve=i=>{this.status==="pending"&&(this.status="resolved",e(i))},this.reject=i=>{this.status==="pending"&&(this.status="rejected",t(i))}})}};function N8(n){let{fallbackElement:e,router:t,future:i}=n,[r,s]=V.useState(t.state),[o,a]=V.useState(),[l,c]=V.useState({isTransitioning:!1}),[u,f]=V.useState(),[m,g]=V.useState(),[x,b]=V.useState(),w=V.useRef(new Map),{v7_startTransition:v}=i||{},S=V.useCallback(P=>{v?P8(P):P()},[v]),E=V.useCallback((P,M)=>{let{deletedFetchers:A,flushSync:D,viewTransitionOpts:B}=M;P.fetchers.forEach((te,ce)=>{te.data!==void 0&&w.current.set(ce,te.data)}),A.forEach(te=>w.current.delete(te));let j=t.window==null||t.window.document==null||typeof t.window.document.startViewTransition!="function";if(!B||j){D?Tp(()=>s(P)):S(()=>s(P));return}if(D){Tp(()=>{m&&(u&&u.resolve(),m.skipTransition()),c({isTransitioning:!0,flushSync:!0,currentLocation:B.currentLocation,nextLocation:B.nextLocation})});let te=t.window.document.startViewTransition(()=>{Tp(()=>s(P))});te.finished.finally(()=>{Tp(()=>{f(void 0),g(void 0),a(void 0),c({isTransitioning:!1})})}),Tp(()=>g(te));return}m?(u&&u.resolve(),m.skipTransition(),b({state:P,currentLocation:B.currentLocation,nextLocation:B.nextLocation})):(a(P),c({isTransitioning:!0,flushSync:!1,currentLocation:B.currentLocation,nextLocation:B.nextLocation}))},[t.window,m,u,w,S]);V.useLayoutEffect(()=>t.subscribe(E),[t,E]),V.useEffect(()=>{l.isTransitioning&&!l.flushSync&&f(new R8)},[l]),V.useEffect(()=>{if(u&&o&&t.window){let P=o,M=u.promise,A=t.window.document.startViewTransition(async()=>{S(()=>s(P)),await M});A.finished.finally(()=>{f(void 0),g(void 0),a(void 0),c({isTransitioning:!1})}),g(A)}},[S,o,u,t.window]),V.useEffect(()=>{u&&o&&r.location.key===o.location.key&&u.resolve()},[u,m,r.location,o]),V.useEffect(()=>{!l.isTransitioning&&x&&(a(x.state),c({isTransitioning:!0,flushSync:!1,currentLocation:x.currentLocation,nextLocation:x.nextLocation}),b(void 0))},[l.isTransitioning,x]),V.useEffect(()=>{},[]);let I=V.useMemo(()=>({createHref:t.createHref,encodeLocation:t.encodeLocation,go:P=>t.navigate(P),push:(P,M,A)=>t.navigate(P,{state:M,preventScrollReset:A?.preventScrollReset}),replace:(P,M,A)=>t.navigate(P,{replace:!0,state:M,preventScrollReset:A?.preventScrollReset})}),[t]),U=t.basename||"/",O=V.useMemo(()=>({router:t,navigator:I,static:!1,basename:U}),[t,I,U]),C=V.useMemo(()=>({v7_relativeSplatPath:t.future.v7_relativeSplatPath}),[t.future.v7_relativeSplatPath]);return V.useEffect(()=>p8(i,t.future),[i,t.future]),V.createElement(V.Fragment,null,V.createElement(dw.Provider,{value:O},V.createElement(LF.Provider,{value:r},V.createElement(A8.Provider,{value:w.current},V.createElement(C8.Provider,{value:l},V.createElement(g8,{basename:U,location:r.location,navigationType:r.historyAction,navigator:I,future:C},r.initialized||t.future.v7_partialHydration?V.createElement(D8,{routes:t.routes,future:t.future,state:r}):e))))),null)}const D8=V.memo(L8);function L8(n){let{routes:e,future:t,state:i}=n;return n8(e,void 0,i,t)}const k8=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",O8=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Us=V.forwardRef(function(e,t){let{onClick:i,relative:r,reloadDocument:s,replace:o,state:a,target:l,to:c,preventScrollReset:u,viewTransition:f}=e,m=v8(e,w8),{basename:g}=V.useContext(hh),x,b=!1;if(typeof c=="string"&&O8.test(c)&&(x=c,k8))try{let E=new URL(window.location.href),I=c.startsWith("//")?new URL(E.protocol+c):new URL(c),U=Af(I.pathname,g);I.origin===E.origin&&U!=null?c=U+I.search+I.hash:b=!0}catch{}let w=Q9(c,{relative:r}),v=U8(c,{replace:o,state:a,target:l,preventScrollReset:u,relative:r,viewTransition:f});function S(E){i&&i(E),E.defaultPrevented||v(E)}return V.createElement("a",Qm({},m,{href:x||w,onClick:b||s?i:S,ref:t,target:l}))});var XN;(function(n){n.UseScrollRestoration="useScrollRestoration",n.UseSubmit="useSubmit",n.UseSubmitFetcher="useSubmitFetcher",n.UseFetcher="useFetcher",n.useViewTransitionState="useViewTransitionState"})(XN||(XN={}));var KN;(function(n){n.UseFetcher="useFetcher",n.UseFetchers="useFetchers",n.UseScrollRestoration="useScrollRestoration"})(KN||(KN={}));function U8(n,e){let{target:t,replace:i,state:r,preventScrollReset:s,relative:o,viewTransition:a}=e===void 0?{}:e,l=qt(),c=Fo(),u=UF(n,{relative:o});return V.useCallback(f=>{if(_8(f,t)){f.preventDefault();let m=i!==void 0?i:Ku(c)===Ku(u);l(n,{replace:m,state:r,preventScrollReset:s,relative:o,viewTransition:a})}},[c,l,u,i,r,t,n,s,o,a])}var YN;(function(n){n.STRING="string",n.NUMBER="number",n.INTEGER="integer",n.BOOLEAN="boolean",n.ARRAY="array",n.OBJECT="object"})(YN||(YN={}));/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var JN;(function(n){n.LANGUAGE_UNSPECIFIED="language_unspecified",n.PYTHON="python"})(JN||(JN={}));var QN;(function(n){n.OUTCOME_UNSPECIFIED="outcome_unspecified",n.OUTCOME_OK="outcome_ok",n.OUTCOME_FAILED="outcome_failed",n.OUTCOME_DEADLINE_EXCEEDED="outcome_deadline_exceeded"})(QN||(QN={}));/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZN=["user","model","function","system"];var Cd;(function(n){n.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",n.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",n.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",n.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",n.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT"})(Cd||(Cd={}));var Ad;(function(n){n.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",n.BLOCK_NONE="BLOCK_NONE"})(Ad||(Ad={}));var e2;(function(n){n.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",n.NEGLIGIBLE="NEGLIGIBLE",n.LOW="LOW",n.MEDIUM="MEDIUM",n.HIGH="HIGH"})(e2||(e2={}));var t2;(function(n){n.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",n.SAFETY="SAFETY",n.OTHER="OTHER"})(t2||(t2={}));var fm;(function(n){n.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",n.STOP="STOP",n.MAX_TOKENS="MAX_TOKENS",n.SAFETY="SAFETY",n.RECITATION="RECITATION",n.LANGUAGE="LANGUAGE",n.BLOCKLIST="BLOCKLIST",n.PROHIBITED_CONTENT="PROHIBITED_CONTENT",n.SPII="SPII",n.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",n.OTHER="OTHER"})(fm||(fm={}));var n2;(function(n){n.TASK_TYPE_UNSPECIFIED="TASK_TYPE_UNSPECIFIED",n.RETRIEVAL_QUERY="RETRIEVAL_QUERY",n.RETRIEVAL_DOCUMENT="RETRIEVAL_DOCUMENT",n.SEMANTIC_SIMILARITY="SEMANTIC_SIMILARITY",n.CLASSIFICATION="CLASSIFICATION",n.CLUSTERING="CLUSTERING"})(n2||(n2={}));var i2;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.AUTO="AUTO",n.ANY="ANY",n.NONE="NONE"})(i2||(i2={}));var r2;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.MODE_DYNAMIC="MODE_DYNAMIC"})(r2||(r2={}));/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ds extends Error{constructor(e){super(`[GoogleGenerativeAI Error]: ${e}`)}}class Bh extends ds{constructor(e,t){super(e),this.response=t}}class BF extends ds{constructor(e,t,i,r){super(e),this.status=t,this.statusText=i,this.errorDetails=r}}class tc extends ds{}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const F8="https://generativelanguage.googleapis.com",j8="v1beta",V8="0.22.0",B8="genai-js";var Yu;(function(n){n.GENERATE_CONTENT="generateContent",n.STREAM_GENERATE_CONTENT="streamGenerateContent",n.COUNT_TOKENS="countTokens",n.EMBED_CONTENT="embedContent",n.BATCH_EMBED_CONTENTS="batchEmbedContents"})(Yu||(Yu={}));class z8{constructor(e,t,i,r,s){this.model=e,this.task=t,this.apiKey=i,this.stream=r,this.requestOptions=s}toString(){var e,t;const i=((e=this.requestOptions)===null||e===void 0?void 0:e.apiVersion)||j8;let s=`${((t=this.requestOptions)===null||t===void 0?void 0:t.baseUrl)||F8}/${i}/${this.model}:${this.task}`;return this.stream&&(s+="?alt=sse"),s}}function H8(n){const e=[];return n?.apiClient&&e.push(n.apiClient),e.push(`${B8}/${V8}`),e.join(" ")}async function G8(n){var e;const t=new Headers;t.append("Content-Type","application/json"),t.append("x-goog-api-client",H8(n.requestOptions)),t.append("x-goog-api-key",n.apiKey);let i=(e=n.requestOptions)===null||e===void 0?void 0:e.customHeaders;if(i){if(!(i instanceof Headers))try{i=new Headers(i)}catch(r){throw new tc(`unable to convert customHeaders value ${JSON.stringify(i)} to Headers: ${r.message}`)}for(const[r,s]of i.entries()){if(r==="x-goog-api-key")throw new tc(`Cannot set reserved header name ${r}`);if(r==="x-goog-api-client")throw new tc(`Header name ${r} can only be set using the apiClient field`);t.append(r,s)}}return t}async function W8(n,e,t,i,r,s){const o=new z8(n,e,t,i,s);return{url:o.toString(),fetchOptions:Object.assign(Object.assign({},K8(s)),{method:"POST",headers:await G8(o),body:r})}}async function zg(n,e,t,i,r,s={},o=fetch){const{url:a,fetchOptions:l}=await W8(n,e,t,i,r,s);return q8(a,l,o)}async function q8(n,e,t=fetch){let i;try{i=await t(n,e)}catch(r){$8(r,n)}return i.ok||await X8(i,n),i}function $8(n,e){let t=n;throw n instanceof BF||n instanceof tc||(t=new ds(`Error fetching from ${e.toString()}: ${n.message}`),t.stack=n.stack),t}async function X8(n,e){let t="",i;try{const r=await n.json();t=r.error.message,r.error.details&&(t+=` ${JSON.stringify(r.error.details)}`,i=r.error.details)}catch{}throw new BF(`Error fetching from ${e.toString()}: [${n.status} ${n.statusText}] ${t}`,n.status,n.statusText,i)}function K8(n){const e={};if(n?.signal!==void 0||n?.timeout>=0){const t=new AbortController;n?.timeout>=0&&setTimeout(()=>t.abort(),n.timeout),n?.signal&&n.signal.addEventListener("abort",()=>{t.abort()}),e.signal=t.signal}return e}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bA(n){return n.text=()=>{if(n.candidates&&n.candidates.length>0){if(n.candidates.length>1&&console.warn(`This response had ${n.candidates.length} candidates. Returning text from the first candidate only. Access response.candidates directly to use the other candidates.`),Vx(n.candidates[0]))throw new Bh(`${Nl(n)}`,n);return Y8(n)}else if(n.promptFeedback)throw new Bh(`Text not available. ${Nl(n)}`,n);return""},n.functionCall=()=>{if(n.candidates&&n.candidates.length>0){if(n.candidates.length>1&&console.warn(`This response had ${n.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`),Vx(n.candidates[0]))throw new Bh(`${Nl(n)}`,n);return console.warn("response.functionCall() is deprecated. Use response.functionCalls() instead."),s2(n)[0]}else if(n.promptFeedback)throw new Bh(`Function call not available. ${Nl(n)}`,n)},n.functionCalls=()=>{if(n.candidates&&n.candidates.length>0){if(n.candidates.length>1&&console.warn(`This response had ${n.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`),Vx(n.candidates[0]))throw new Bh(`${Nl(n)}`,n);return s2(n)}else if(n.promptFeedback)throw new Bh(`Function call not available. ${Nl(n)}`,n)},n}function Y8(n){var e,t,i,r;const s=[];if(!((t=(e=n.candidates)===null||e===void 0?void 0:e[0].content)===null||t===void 0)&&t.parts)for(const o of(r=(i=n.candidates)===null||i===void 0?void 0:i[0].content)===null||r===void 0?void 0:r.parts)o.text&&s.push(o.text),o.executableCode&&s.push("\n```"+o.executableCode.language+`
`+o.executableCode.code+"\n```\n"),o.codeExecutionResult&&s.push("\n```\n"+o.codeExecutionResult.output+"\n```\n");return s.length>0?s.join(""):""}function s2(n){var e,t,i,r;const s=[];if(!((t=(e=n.candidates)===null||e===void 0?void 0:e[0].content)===null||t===void 0)&&t.parts)for(const o of(r=(i=n.candidates)===null||i===void 0?void 0:i[0].content)===null||r===void 0?void 0:r.parts)o.functionCall&&s.push(o.functionCall);if(s.length>0)return s}const J8=[fm.RECITATION,fm.SAFETY,fm.LANGUAGE];function Vx(n){return!!n.finishReason&&J8.includes(n.finishReason)}function Nl(n){var e,t,i;let r="";if((!n.candidates||n.candidates.length===0)&&n.promptFeedback)r+="Response was blocked",!((e=n.promptFeedback)===null||e===void 0)&&e.blockReason&&(r+=` due to ${n.promptFeedback.blockReason}`),!((t=n.promptFeedback)===null||t===void 0)&&t.blockReasonMessage&&(r+=`: ${n.promptFeedback.blockReasonMessage}`);else if(!((i=n.candidates)===null||i===void 0)&&i[0]){const s=n.candidates[0];Vx(s)&&(r+=`Candidate was blocked due to ${s.finishReason}`,s.finishMessage&&(r+=`: ${s.finishMessage}`))}return r}function Zm(n){return this instanceof Zm?(this.v=n,this):new Zm(n)}function Q8(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=t.apply(n,e||[]),r,s=[];return r={},o("next"),o("throw"),o("return"),r[Symbol.asyncIterator]=function(){return this},r;function o(m){i[m]&&(r[m]=function(g){return new Promise(function(x,b){s.push([m,g,x,b])>1||a(m,g)})})}function a(m,g){try{l(i[m](g))}catch(x){f(s[0][3],x)}}function l(m){m.value instanceof Zm?Promise.resolve(m.value.v).then(c,u):f(s[0][2],m)}function c(m){a("next",m)}function u(m){a("throw",m)}function f(m,g){m(g),s.shift(),s.length&&a(s[0][0],s[0][1])}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o2=/^data\: (.*)(?:\n\n|\r\r|\r\n\r\n)/;function Z8(n){const e=n.body.pipeThrough(new TextDecoderStream("utf8",{fatal:!0})),t=n7(e),[i,r]=t.tee();return{stream:t7(i),response:e7(r)}}async function e7(n){const e=[],t=n.getReader();for(;;){const{done:i,value:r}=await t.read();if(i)return bA(i7(e));e.push(r)}}function t7(n){return Q8(this,arguments,function*(){const t=n.getReader();for(;;){const{value:i,done:r}=yield Zm(t.read());if(r)break;yield yield Zm(bA(i))}})}function n7(n){const e=n.getReader();return new ReadableStream({start(i){let r="";return s();function s(){return e.read().then(({value:o,done:a})=>{if(a){if(r.trim()){i.error(new ds("Failed to parse stream"));return}i.close();return}r+=o;let l=r.match(o2),c;for(;l;){try{c=JSON.parse(l[1])}catch{i.error(new ds(`Error parsing JSON response: "${l[1]}"`));return}i.enqueue(c),r=r.substring(l[0].length),l=r.match(o2)}return s()})}}})}function i7(n){const e=n[n.length-1],t={promptFeedback:e?.promptFeedback};for(const i of n){if(i.candidates){let r=0;for(const s of i.candidates)if(t.candidates||(t.candidates=[]),t.candidates[r]||(t.candidates[r]={index:r}),t.candidates[r].citationMetadata=s.citationMetadata,t.candidates[r].groundingMetadata=s.groundingMetadata,t.candidates[r].finishReason=s.finishReason,t.candidates[r].finishMessage=s.finishMessage,t.candidates[r].safetyRatings=s.safetyRatings,s.content&&s.content.parts){t.candidates[r].content||(t.candidates[r].content={role:s.content.role||"user",parts:[]});const o={};for(const a of s.content.parts)a.text&&(o.text=a.text),a.functionCall&&(o.functionCall=a.functionCall),a.executableCode&&(o.executableCode=a.executableCode),a.codeExecutionResult&&(o.codeExecutionResult=a.codeExecutionResult),Object.keys(o).length===0&&(o.text=""),t.candidates[r].content.parts.push(o)}r++}i.usageMetadata&&(t.usageMetadata=i.usageMetadata)}return t}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function zF(n,e,t,i){const r=await zg(e,Yu.STREAM_GENERATE_CONTENT,n,!0,JSON.stringify(t),i);return Z8(r)}async function HF(n,e,t,i){const s=await(await zg(e,Yu.GENERATE_CONTENT,n,!1,JSON.stringify(t),i)).json();return{response:bA(s)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GF(n){if(n!=null){if(typeof n=="string")return{role:"system",parts:[{text:n}]};if(n.text)return{role:"system",parts:[n]};if(n.parts)return n.role?n:{role:"system",parts:n.parts}}}function eg(n){let e=[];if(typeof n=="string")e=[{text:n}];else for(const t of n)typeof t=="string"?e.push({text:t}):e.push(t);return r7(e)}function r7(n){const e={role:"user",parts:[]},t={role:"function",parts:[]};let i=!1,r=!1;for(const s of n)"functionResponse"in s?(t.parts.push(s),r=!0):(e.parts.push(s),i=!0);if(i&&r)throw new ds("Within a single message, FunctionResponse cannot be mixed with other type of part in the request for sending chat message.");if(!i&&!r)throw new ds("No content is provided for sending chat message.");return i?e:t}function s7(n,e){var t;let i={model:e?.model,generationConfig:e?.generationConfig,safetySettings:e?.safetySettings,tools:e?.tools,toolConfig:e?.toolConfig,systemInstruction:e?.systemInstruction,cachedContent:(t=e?.cachedContent)===null||t===void 0?void 0:t.name,contents:[]};const r=n.generateContentRequest!=null;if(n.contents){if(r)throw new tc("CountTokensRequest must have one of contents or generateContentRequest, not both.");i.contents=n.contents}else if(r)i=Object.assign(Object.assign({},i),n.generateContentRequest);else{const s=eg(n);i.contents=[s]}return{generateContentRequest:i}}function a2(n){let e;return n.contents?e=n:e={contents:[eg(n)]},n.systemInstruction&&(e.systemInstruction=GF(n.systemInstruction)),e}function o7(n){return typeof n=="string"||Array.isArray(n)?{content:eg(n)}:n}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const l2=["text","inlineData","functionCall","functionResponse","executableCode","codeExecutionResult"],a7={user:["text","inlineData"],function:["functionResponse"],model:["text","functionCall","executableCode","codeExecutionResult"],system:["text"]};function l7(n){let e=!1;for(const t of n){const{role:i,parts:r}=t;if(!e&&i!=="user")throw new ds(`First content should be with role 'user', got ${i}`);if(!ZN.includes(i))throw new ds(`Each item should include role field. Got ${i} but valid roles are: ${JSON.stringify(ZN)}`);if(!Array.isArray(r))throw new ds("Content should have 'parts' property with an array of Parts");if(r.length===0)throw new ds("Each Content should have at least one part");const s={text:0,inlineData:0,functionCall:0,functionResponse:0,fileData:0,executableCode:0,codeExecutionResult:0};for(const a of r)for(const l of l2)l in a&&(s[l]+=1);const o=a7[i];for(const a of l2)if(!o.includes(a)&&s[a]>0)throw new ds(`Content with role '${i}' can't contain '${a}' part`);e=!0}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const c2="SILENT_ERROR";class c7{constructor(e,t,i,r={}){this.model=t,this.params=i,this._requestOptions=r,this._history=[],this._sendPromise=Promise.resolve(),this._apiKey=e,i?.history&&(l7(i.history),this._history=i.history)}async getHistory(){return await this._sendPromise,this._history}async sendMessage(e,t={}){var i,r,s,o,a,l;await this._sendPromise;const c=eg(e),u={safetySettings:(i=this.params)===null||i===void 0?void 0:i.safetySettings,generationConfig:(r=this.params)===null||r===void 0?void 0:r.generationConfig,tools:(s=this.params)===null||s===void 0?void 0:s.tools,toolConfig:(o=this.params)===null||o===void 0?void 0:o.toolConfig,systemInstruction:(a=this.params)===null||a===void 0?void 0:a.systemInstruction,cachedContent:(l=this.params)===null||l===void 0?void 0:l.cachedContent,contents:[...this._history,c]},f=Object.assign(Object.assign({},this._requestOptions),t);let m;return this._sendPromise=this._sendPromise.then(()=>HF(this._apiKey,this.model,u,f)).then(g=>{var x,b;if(g.response.candidates&&g.response.candidates.length>0&&((x=g.response.candidates[0])===null||x===void 0?void 0:x.content)!==void 0){this._history.push(c);const w=Object.assign({parts:[],role:"model"},(b=g.response.candidates)===null||b===void 0?void 0:b[0].content);this._history.push(w)}else{const w=Nl(g.response);w&&console.warn(`sendMessage() was unsuccessful. ${w}. Inspect response object for details.`)}m=g}),await this._sendPromise,m}async sendMessageStream(e,t={}){var i,r,s,o,a,l;await this._sendPromise;const c=eg(e),u={safetySettings:(i=this.params)===null||i===void 0?void 0:i.safetySettings,generationConfig:(r=this.params)===null||r===void 0?void 0:r.generationConfig,tools:(s=this.params)===null||s===void 0?void 0:s.tools,toolConfig:(o=this.params)===null||o===void 0?void 0:o.toolConfig,systemInstruction:(a=this.params)===null||a===void 0?void 0:a.systemInstruction,cachedContent:(l=this.params)===null||l===void 0?void 0:l.cachedContent,contents:[...this._history,c]},f=Object.assign(Object.assign({},this._requestOptions),t),m=zF(this._apiKey,this.model,u,f);return this._sendPromise=this._sendPromise.then(()=>m).catch(g=>{throw new Error(c2)}).then(g=>g.response).then(g=>{var x;if(g.candidates&&g.candidates.length>0&&((x=g.candidates[0])===null||x===void 0?void 0:x.content)!==void 0){this._history.push(c);const b=Object.assign({},g.candidates[0].content);b.role||(b.role="model"),this._history.push(b)}else{const b=Nl(g);b&&console.warn(`sendMessageStream() was unsuccessful. ${b}. Inspect response object for details.`)}}).catch(g=>{g.message!==c2&&console.error(g)}),m}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function u7(n,e,t,i){return(await zg(e,Yu.COUNT_TOKENS,n,!1,JSON.stringify(t),i)).json()}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function h7(n,e,t,i){return(await zg(e,Yu.EMBED_CONTENT,n,!1,JSON.stringify(t),i)).json()}async function d7(n,e,t,i){const r=t.requests.map(o=>Object.assign(Object.assign({},o),{model:e}));return(await zg(e,Yu.BATCH_EMBED_CONTENTS,n,!1,JSON.stringify({requests:r}),i)).json()}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class u2{constructor(e,t,i={}){this.apiKey=e,this._requestOptions=i,t.model.includes("/")?this.model=t.model:this.model=`models/${t.model}`,this.generationConfig=t.generationConfig||{},this.safetySettings=t.safetySettings||[],this.tools=t.tools,this.toolConfig=t.toolConfig,this.systemInstruction=GF(t.systemInstruction),this.cachedContent=t.cachedContent}async generateContent(e,t={}){var i;const r=a2(e),s=Object.assign(Object.assign({},this._requestOptions),t);return HF(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(i=this.cachedContent)===null||i===void 0?void 0:i.name},r),s)}async generateContentStream(e,t={}){var i;const r=a2(e),s=Object.assign(Object.assign({},this._requestOptions),t);return zF(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(i=this.cachedContent)===null||i===void 0?void 0:i.name},r),s)}startChat(e){var t;return new c7(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(t=this.cachedContent)===null||t===void 0?void 0:t.name},e),this._requestOptions)}async countTokens(e,t={}){const i=s7(e,{model:this.model,generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:this.cachedContent}),r=Object.assign(Object.assign({},this._requestOptions),t);return u7(this.apiKey,this.model,i,r)}async embedContent(e,t={}){const i=o7(e),r=Object.assign(Object.assign({},this._requestOptions),t);return h7(this.apiKey,this.model,i,r)}async batchEmbedContents(e,t={}){const i=Object.assign(Object.assign({},this._requestOptions),t);return d7(this.apiKey,this.model,e,i)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f7{constructor(e){this.apiKey=e}getGenerativeModel(e,t){if(!e.model)throw new ds("Must provide a model name. Example: genai.getGenerativeModel({ model: 'my-model-name' })");return new u2(this.apiKey,e,t)}getGenerativeModelFromCachedContent(e,t,i){if(!e.name)throw new tc("Cached content must contain a `name` field.");if(!e.model)throw new tc("Cached content must contain a `model` field.");const r=["model","systemInstruction"];for(const o of r)if(t?.[o]&&e[o]&&t?.[o]!==e[o]){if(o==="model"){const a=t.model.startsWith("models/")?t.model.replace("models/",""):t.model,l=e.model.startsWith("models/")?e.model.replace("models/",""):e.model;if(a===l)continue}throw new tc(`Different value for "${o}" specified in modelParams (${t[o]}) and cachedContent (${e[o]})`)}const s=Object.assign(Object.assign({},t),{model:e.model,tools:e.tools,toolConfig:e.toolConfig,systemInstruction:e.systemInstruction,cachedContent:e});return new u2(this.apiKey,s,i)}}const p7="gemini-1.5-pro",m7="AIzaSyDR3vXyfe-NWbMwQvaypVyOWJKZP15FghI";async function h2(n){const t=new f7(m7).getGenerativeModel({model:p7}),i={temperature:.9,topP:1,topK:1,maxOutputTokens:2048},r=[{category:Cd.HARM_CATEGORY_HARASSMENT,threshold:Ad.BLOCK_MEDIUM_AND_ABOVE},{category:Cd.HARM_CATEGORY_HATE_SPEECH,threshold:Ad.BLOCK_MEDIUM_AND_ABOVE},{category:Cd.HARM_CATEGORY_SEXUALLY_EXPLICIT,threshold:Ad.BLOCK_MEDIUM_AND_ABOVE},{category:Cd.HARM_CATEGORY_DANGEROUS_CONTENT,threshold:Ad.BLOCK_MEDIUM_AND_ABOVE}],s=t.startChat({generationConfig:i,safetySettings:r,history:[]}),o=`
    You are Karapatan Ko, an AI legal assistant specializing in **Philippine Law**. You can say Hi or Hello.
    Provide a **clear, concise, and structured answers** based on laws in the Philippines, such as:
    - The 1987 Constitution
    - Civil Code, Revised Penal Code, Family Code, Labor Code, 
    - Other relevant statutes (e.g., Data Privacy Act, Cybercrime Prevention Act)
    
    **Response Guidelines**
    - **Be concise & well-structured** (use bullet points when necessary).
    - **Provide citations** where applicable.
    - **Avoid unnecessary explanations or disclamers**.
    - **Explain in simple words and make it more humanize**.
    
    Question: ${n}
    `,l=(await s.sendMessage(o)).response;return console.log(l.text()),l.text()}const tg=V.createContext(),g7=n=>{const[e,t]=V.useState(""),[i,r]=V.useState(""),[s,o]=V.useState([]),[a,l]=V.useState(!1),[c,u]=V.useState(!1),[f,m]=V.useState(""),[g,x]=V.useState(localStorage.getItem("darkMode")==="true"),[b,w]=V.useState(null),v=(C,P)=>{setTimeout(function(){m(M=>M+P)},75*C)},S=()=>{u(!1),l(!1)};let E=0;const I=5e3,O={prevPrompts:s,setPrevPrompts:o,onSent:async C=>{const P=Date.now();if(P-E<I){alert("Please wait a few seconds. Thank you!");return}E=P,m(""),u(!0),l(!0);let M;C!=null?(M=await h2(C),r(C)):(o(te=>[...te,e]),r(e),M=await h2(e));let A=M.split("**"),D="";for(let te=0;te<A.length;te++)te===0||te%2!==1?D+=A[te]:D+="<b>"+A[te]+"</b>";let j=D.split("*").join("</br>").split(" ");for(let te=0;te<j.length;te++){const ce=j[te];v(te,ce+" ")}u(!1),t("")},setRecentPrompt:r,recentPrompt:i,showResult:a,loading:c,resultData:f,input:e,setInput:t,newChat:S,darkMode:g,setDarkMode:x,selectedMessage:b,setSelectedMessage:w};return V.useEffect(()=>{localStorage.setItem("darkMode",g)},[g]),d.jsx(tg.Provider,{value:O,children:n.children})};/**
 * @license
 * Copyright 2010-2025 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const Hg="174",y7={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},v7={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},WF=0,l1=1,qF=2,x7=3,$F=0,fw=1,pm=2,So=3,Ka=0,Jr=1,Mo=2,ja=0,Ou=1,c1=2,u1=3,h1=4,XF=5,Ol=100,KF=101,YF=102,JF=103,QF=104,ZF=200,ej=201,tj=202,nj=203,N0=204,D0=205,ij=206,rj=207,sj=208,oj=209,aj=210,lj=211,cj=212,uj=213,hj=214,L0=0,k0=1,O0=2,Ju=3,U0=4,F0=5,j0=6,V0=7,Gg=0,dj=1,fj=2,ta=0,pj=1,mj=2,gj=3,SA=4,yj=5,vj=6,xj=7,d1="attached",_j="detached",pw=300,Ya=301,cc=302,ng=303,ig=304,Mf=306,rg=1e3,lo=1001,sg=1002,mr=1003,TA=1004,_7=1004,Md=1005,w7=1005,Xi=1006,mm=1007,b7=1007,Yo=1008,S7=1008,Lo=1009,EA=1010,CA=1011,lf=1012,mw=1013,Ja=1014,gs=1015,If=1016,gw=1017,yw=1018,Qu=1020,AA=35902,MA=1021,IA=1022,Lr=1023,PA=1024,RA=1025,Uu=1026,Zu=1027,vw=1028,Wg=1029,NA=1030,xw=1031,T7=1032,_w=1033,gm=33776,ym=33777,vm=33778,xm=33779,B0=35840,z0=35841,H0=35842,G0=35843,W0=36196,q0=37492,$0=37496,X0=37808,K0=37809,Y0=37810,J0=37811,Q0=37812,Z0=37813,e_=37814,t_=37815,n_=37816,i_=37817,r_=37818,s_=37819,o_=37820,a_=37821,_m=36492,l_=36494,c_=36495,DA=36283,u_=36284,h_=36285,d_=36286,wj=2200,bj=2201,Sj=2202,og=2300,f_=2301,Bx=2302,Iu=2400,Pu=2401,ag=2402,ww=2500,LA=2501,E7=0,C7=1,A7=2,Tj=3200,Ej=3201,M7=3202,I7=3203,Mc=0,Cj=1,Ia="",us="srgb",eh="srgb-linear",lg="linear",Gn="srgb",P7=0,gu=7680,R7=7681,N7=7682,D7=7683,L7=34055,k7=34056,O7=5386,U7=512,F7=513,j7=514,V7=515,B7=516,z7=517,H7=518,f1=519,Aj=512,Mj=513,Ij=514,kA=515,Pj=516,Rj=517,Nj=518,Dj=519,cg=35044,Fu=35048,G7=35040,W7=35045,q7=35049,$7=35041,X7=35046,K7=35050,Y7=35042,J7="100",p1="300 es",Io=2e3,ug=2001,Q7={COMPUTE:"compute",RENDER:"render"};class da{addEventListener(e,t){this._listeners===void 0&&(this._listeners={});const i=this._listeners;i[e]===void 0&&(i[e]=[]),i[e].indexOf(t)===-1&&i[e].push(t)}hasEventListener(e,t){const i=this._listeners;return i===void 0?!1:i[e]!==void 0&&i[e].indexOf(t)!==-1}removeEventListener(e,t){const i=this._listeners;if(i===void 0)return;const r=i[e];if(r!==void 0){const s=r.indexOf(t);s!==-1&&r.splice(s,1)}}dispatchEvent(e){const t=this._listeners;if(t===void 0)return;const i=t[e.type];if(i!==void 0){e.target=this;const r=i.slice(0);for(let s=0,o=r.length;s<o;s++)r[s].call(this,e);e.target=null}}}const Cr=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let d2=1234567;const ju=Math.PI/180,cf=180/Math.PI;function Fs(){const n=Math.random()*4294967295|0,e=Math.random()*4294967295|0,t=Math.random()*4294967295|0,i=Math.random()*4294967295|0;return(Cr[n&255]+Cr[n>>8&255]+Cr[n>>16&255]+Cr[n>>24&255]+"-"+Cr[e&255]+Cr[e>>8&255]+"-"+Cr[e>>16&15|64]+Cr[e>>24&255]+"-"+Cr[t&63|128]+Cr[t>>8&255]+"-"+Cr[t>>16&255]+Cr[t>>24&255]+Cr[i&255]+Cr[i>>8&255]+Cr[i>>16&255]+Cr[i>>24&255]).toLowerCase()}function Jt(n,e,t){return Math.max(e,Math.min(t,n))}function OA(n,e){return(n%e+e)%e}function Z7(n,e,t,i,r){return i+(n-e)*(r-i)/(t-e)}function eq(n,e,t){return n!==e?(t-n)/(e-n):0}function wm(n,e,t){return(1-t)*n+t*e}function tq(n,e,t,i){return wm(n,e,1-Math.exp(-t*i))}function nq(n,e=1){return e-Math.abs(OA(n,e*2)-e)}function iq(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e),n*n*(3-2*n))}function rq(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e),n*n*n*(n*(n*6-15)+10))}function sq(n,e){return n+Math.floor(Math.random()*(e-n+1))}function oq(n,e){return n+Math.random()*(e-n)}function aq(n){return n*(.5-Math.random())}function lq(n){n!==void 0&&(d2=n);let e=d2+=1831565813;return e=Math.imul(e^e>>>15,e|1),e^=e+Math.imul(e^e>>>7,e|61),((e^e>>>14)>>>0)/4294967296}function cq(n){return n*ju}function uq(n){return n*cf}function hq(n){return(n&n-1)===0&&n!==0}function dq(n){return Math.pow(2,Math.ceil(Math.log(n)/Math.LN2))}function fq(n){return Math.pow(2,Math.floor(Math.log(n)/Math.LN2))}function pq(n,e,t,i,r){const s=Math.cos,o=Math.sin,a=s(t/2),l=o(t/2),c=s((e+i)/2),u=o((e+i)/2),f=s((e-i)/2),m=o((e-i)/2),g=s((i-e)/2),x=o((i-e)/2);switch(r){case"XYX":n.set(a*u,l*f,l*m,a*c);break;case"YZY":n.set(l*m,a*u,l*f,a*c);break;case"ZXZ":n.set(l*f,l*m,a*u,a*c);break;case"XZX":n.set(a*u,l*x,l*g,a*c);break;case"YXY":n.set(l*g,a*u,l*x,a*c);break;case"ZYZ":n.set(l*x,l*g,a*u,a*c);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+r)}}function Kr(n,e){switch(e.constructor){case Float32Array:return n;case Uint32Array:return n/4294967295;case Uint16Array:return n/65535;case Uint8Array:return n/255;case Int32Array:return Math.max(n/2147483647,-1);case Int16Array:return Math.max(n/32767,-1);case Int8Array:return Math.max(n/127,-1);default:throw new Error("Invalid component type.")}}function on(n,e){switch(e.constructor){case Float32Array:return n;case Uint32Array:return Math.round(n*4294967295);case Uint16Array:return Math.round(n*65535);case Uint8Array:return Math.round(n*255);case Int32Array:return Math.round(n*2147483647);case Int16Array:return Math.round(n*32767);case Int8Array:return Math.round(n*127);default:throw new Error("Invalid component type.")}}const mq={DEG2RAD:ju,RAD2DEG:cf,generateUUID:Fs,clamp:Jt,euclideanModulo:OA,mapLinear:Z7,inverseLerp:eq,lerp:wm,damp:tq,pingpong:nq,smoothstep:iq,smootherstep:rq,randInt:sq,randFloat:oq,randFloatSpread:aq,seededRandom:lq,degToRad:cq,radToDeg:uq,isPowerOfTwo:hq,ceilPowerOfTwo:dq,floorPowerOfTwo:fq,setQuaternionFromProperEuler:pq,normalize:on,denormalize:Kr};class Le{constructor(e=0,t=0){Le.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,i=this.y,r=e.elements;return this.x=r[0]*t+r[3]*i+r[6],this.y=r[1]*t+r[4]*i+r[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Jt(this.x,e.x,t.x),this.y=Jt(this.y,e.y,t.y),this}clampScalar(e,t){return this.x=Jt(this.x,e,t),this.y=Jt(this.y,e,t),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Jt(i,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const i=this.dot(e)/t;return Math.acos(Jt(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,i=this.y-e.y;return t*t+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const i=Math.cos(t),r=Math.sin(t),s=this.x-e.x,o=this.y-e.y;return this.x=s*i-o*r+e.x,this.y=s*r+o*i+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class sn{constructor(e,t,i,r,s,o,a,l,c){sn.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],e!==void 0&&this.set(e,t,i,r,s,o,a,l,c)}set(e,t,i,r,s,o,a,l,c){const u=this.elements;return u[0]=e,u[1]=r,u[2]=a,u[3]=t,u[4]=s,u[5]=l,u[6]=i,u[7]=o,u[8]=c,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],this}extractBasis(e,t,i){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),i.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const i=e.elements,r=t.elements,s=this.elements,o=i[0],a=i[3],l=i[6],c=i[1],u=i[4],f=i[7],m=i[2],g=i[5],x=i[8],b=r[0],w=r[3],v=r[6],S=r[1],E=r[4],I=r[7],U=r[2],O=r[5],C=r[8];return s[0]=o*b+a*S+l*U,s[3]=o*w+a*E+l*O,s[6]=o*v+a*I+l*C,s[1]=c*b+u*S+f*U,s[4]=c*w+u*E+f*O,s[7]=c*v+u*I+f*C,s[2]=m*b+g*S+x*U,s[5]=m*w+g*E+x*O,s[8]=m*v+g*I+x*C,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],i=e[1],r=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],u=e[8];return t*o*u-t*a*c-i*s*u+i*a*l+r*s*c-r*o*l}invert(){const e=this.elements,t=e[0],i=e[1],r=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],u=e[8],f=u*o-a*c,m=a*l-u*s,g=c*s-o*l,x=t*f+i*m+r*g;if(x===0)return this.set(0,0,0,0,0,0,0,0,0);const b=1/x;return e[0]=f*b,e[1]=(r*c-u*i)*b,e[2]=(a*i-r*o)*b,e[3]=m*b,e[4]=(u*t-r*l)*b,e[5]=(r*s-a*t)*b,e[6]=g*b,e[7]=(i*l-c*t)*b,e[8]=(o*t-i*s)*b,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,i,r,s,o,a){const l=Math.cos(s),c=Math.sin(s);return this.set(i*l,i*c,-i*(l*o+c*a)+o+e,-r*c,r*l,-r*(-c*o+l*a)+a+t,0,0,1),this}scale(e,t){return this.premultiply($S.makeScale(e,t)),this}rotate(e){return this.premultiply($S.makeRotation(-e)),this}translate(e,t){return this.premultiply($S.makeTranslation(e,t)),this}makeTranslation(e,t){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,t,0,0,1),this}makeRotation(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,-i,0,i,t,0,0,0,1),this}makeScale(e,t){return this.set(e,0,0,0,t,0,0,0,1),this}equals(e){const t=this.elements,i=e.elements;for(let r=0;r<9;r++)if(t[r]!==i[r])return!1;return!0}fromArray(e,t=0){for(let i=0;i<9;i++)this.elements[i]=e[i+t];return this}toArray(e=[],t=0){const i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e}clone(){return new this.constructor().fromArray(this.elements)}}const $S=new sn;function Lj(n){for(let e=n.length-1;e>=0;--e)if(n[e]>=65535)return!0;return!1}const gq={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function Id(n,e){return new gq[n](e)}function hg(n){return document.createElementNS("http://www.w3.org/1999/xhtml",n)}function kj(){const n=hg("canvas");return n.style.display="block",n}const f2={};function yu(n){n in f2||(f2[n]=!0,console.warn(n))}function yq(n,e,t){return new Promise(function(i,r){function s(){switch(n.clientWaitSync(e,n.SYNC_FLUSH_COMMANDS_BIT,0)){case n.WAIT_FAILED:r();break;case n.TIMEOUT_EXPIRED:setTimeout(s,t);break;default:i()}}setTimeout(s,t)})}function vq(n){const e=n.elements;e[2]=.5*e[2]+.5*e[3],e[6]=.5*e[6]+.5*e[7],e[10]=.5*e[10]+.5*e[11],e[14]=.5*e[14]+.5*e[15]}function xq(n){const e=n.elements;e[11]===-1?(e[10]=-e[10]-1,e[14]=-e[14]):(e[10]=-e[10],e[14]=-e[14]+1)}const p2=new sn().set(.4123908,.3575843,.1804808,.212639,.7151687,.0721923,.0193308,.1191948,.9505322),m2=new sn().set(3.2409699,-1.5373832,-.4986108,-.9692436,1.8759675,.0415551,.0556301,-.203977,1.0569715);function _q(){const n={enabled:!0,workingColorSpace:eh,spaces:{},convert:function(r,s,o){return this.enabled===!1||s===o||!s||!o||(this.spaces[s].transfer===Gn&&(r.r=Va(r.r),r.g=Va(r.g),r.b=Va(r.b)),this.spaces[s].primaries!==this.spaces[o].primaries&&(r.applyMatrix3(this.spaces[s].toXYZ),r.applyMatrix3(this.spaces[o].fromXYZ)),this.spaces[o].transfer===Gn&&(r.r=$d(r.r),r.g=$d(r.g),r.b=$d(r.b))),r},fromWorkingColorSpace:function(r,s){return this.convert(r,this.workingColorSpace,s)},toWorkingColorSpace:function(r,s){return this.convert(r,s,this.workingColorSpace)},getPrimaries:function(r){return this.spaces[r].primaries},getTransfer:function(r){return r===Ia?lg:this.spaces[r].transfer},getLuminanceCoefficients:function(r,s=this.workingColorSpace){return r.fromArray(this.spaces[s].luminanceCoefficients)},define:function(r){Object.assign(this.spaces,r)},_getMatrix:function(r,s,o){return r.copy(this.spaces[s].toXYZ).multiply(this.spaces[o].fromXYZ)},_getDrawingBufferColorSpace:function(r){return this.spaces[r].outputColorSpaceConfig.drawingBufferColorSpace},_getUnpackColorSpace:function(r=this.workingColorSpace){return this.spaces[r].workingColorSpaceConfig.unpackColorSpace}},e=[.64,.33,.3,.6,.15,.06],t=[.2126,.7152,.0722],i=[.3127,.329];return n.define({[eh]:{primaries:e,whitePoint:i,transfer:lg,toXYZ:p2,fromXYZ:m2,luminanceCoefficients:t,workingColorSpaceConfig:{unpackColorSpace:us},outputColorSpaceConfig:{drawingBufferColorSpace:us}},[us]:{primaries:e,whitePoint:i,transfer:Gn,toXYZ:p2,fromXYZ:m2,luminanceCoefficients:t,outputColorSpaceConfig:{drawingBufferColorSpace:us}}}),n}const An=_q();function Va(n){return n<.04045?n*.0773993808:Math.pow(n*.9478672986+.0521327014,2.4)}function $d(n){return n<.0031308?n*12.92:1.055*Math.pow(n,.41666)-.055}let zh;class Oj{static getDataURL(e){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let t;if(e instanceof HTMLCanvasElement)t=e;else{zh===void 0&&(zh=hg("canvas")),zh.width=e.width,zh.height=e.height;const i=zh.getContext("2d");e instanceof ImageData?i.putImageData(e,0,0):i.drawImage(e,0,0,e.width,e.height),t=zh}return t.toDataURL("image/png")}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const t=hg("canvas");t.width=e.width,t.height=e.height;const i=t.getContext("2d");i.drawImage(e,0,0,e.width,e.height);const r=i.getImageData(0,0,e.width,e.height),s=r.data;for(let o=0;o<s.length;o++)s[o]=Va(s[o]/255)*255;return i.putImageData(r,0,0),t}else if(e.data){const t=e.data.slice(0);for(let i=0;i<t.length;i++)t instanceof Uint8Array||t instanceof Uint8ClampedArray?t[i]=Math.floor(Va(t[i]/255)*255):t[i]=Va(t[i]);return{data:t,width:e.width,height:e.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}let wq=0;class Wl{constructor(e=null){this.isSource=!0,Object.defineProperty(this,"id",{value:wq++}),this.uuid=Fs(),this.data=e,this.dataReady=!0,this.version=0}set needsUpdate(e){e===!0&&this.version++}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.images[this.uuid]!==void 0)return e.images[this.uuid];const i={uuid:this.uuid,url:""},r=this.data;if(r!==null){let s;if(Array.isArray(r)){s=[];for(let o=0,a=r.length;o<a;o++)r[o].isDataTexture?s.push(XS(r[o].image)):s.push(XS(r[o]))}else s=XS(r);i.url=s}return t||(e.images[this.uuid]=i),i}}function XS(n){return typeof HTMLImageElement<"u"&&n instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&n instanceof ImageBitmap?Oj.getDataURL(n):n.data?{data:Array.from(n.data),width:n.width,height:n.height,type:n.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let bq=0;class _i extends da{constructor(e=_i.DEFAULT_IMAGE,t=_i.DEFAULT_MAPPING,i=lo,r=lo,s=Xi,o=Yo,a=Lr,l=Lo,c=_i.DEFAULT_ANISOTROPY,u=Ia){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:bq++}),this.uuid=Fs(),this.name="",this.source=new Wl(e),this.mipmaps=[],this.mapping=t,this.channel=0,this.wrapS=i,this.wrapT=r,this.magFilter=s,this.minFilter=o,this.anisotropy=c,this.format=a,this.internalFormat=null,this.type=l,this.offset=new Le(0,0),this.repeat=new Le(1,1),this.center=new Le(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new sn,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.colorSpace=u,this.userData={},this.version=0,this.onUpdate=null,this.renderTarget=null,this.isRenderTargetTexture=!1,this.pmremVersion=0}get image(){return this.source.data}set image(e=null){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.colorSpace=e.colorSpace,this.renderTarget=e.renderTarget,this.isRenderTargetTexture=e.isRenderTargetTexture,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const i={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(i.userData=this.userData),t||(e.textures[this.uuid]=i),i}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==pw)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case rg:e.x=e.x-Math.floor(e.x);break;case lo:e.x=e.x<0?0:1;break;case sg:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case rg:e.y=e.y-Math.floor(e.y);break;case lo:e.y=e.y<0?0:1;break;case sg:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}set needsPMREMUpdate(e){e===!0&&this.pmremVersion++}}_i.DEFAULT_IMAGE=null;_i.DEFAULT_MAPPING=pw;_i.DEFAULT_ANISOTROPY=1;class Rn{constructor(e=0,t=0,i=0,r=1){Rn.prototype.isVector4=!0,this.x=e,this.y=t,this.z=i,this.w=r}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,i,r){return this.x=e,this.y=t,this.z=i,this.w=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,i=this.y,r=this.z,s=this.w,o=e.elements;return this.x=o[0]*t+o[4]*i+o[8]*r+o[12]*s,this.y=o[1]*t+o[5]*i+o[9]*r+o[13]*s,this.z=o[2]*t+o[6]*i+o[10]*r+o[14]*s,this.w=o[3]*t+o[7]*i+o[11]*r+o[15]*s,this}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this.w/=e.w,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,i,r,s;const l=e.elements,c=l[0],u=l[4],f=l[8],m=l[1],g=l[5],x=l[9],b=l[2],w=l[6],v=l[10];if(Math.abs(u-m)<.01&&Math.abs(f-b)<.01&&Math.abs(x-w)<.01){if(Math.abs(u+m)<.1&&Math.abs(f+b)<.1&&Math.abs(x+w)<.1&&Math.abs(c+g+v-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;const E=(c+1)/2,I=(g+1)/2,U=(v+1)/2,O=(u+m)/4,C=(f+b)/4,P=(x+w)/4;return E>I&&E>U?E<.01?(i=0,r=.707106781,s=.707106781):(i=Math.sqrt(E),r=O/i,s=C/i):I>U?I<.01?(i=.707106781,r=0,s=.707106781):(r=Math.sqrt(I),i=O/r,s=P/r):U<.01?(i=.707106781,r=.707106781,s=0):(s=Math.sqrt(U),i=C/s,r=P/s),this.set(i,r,s,t),this}let S=Math.sqrt((w-x)*(w-x)+(f-b)*(f-b)+(m-u)*(m-u));return Math.abs(S)<.001&&(S=1),this.x=(w-x)/S,this.y=(f-b)/S,this.z=(m-u)/S,this.w=Math.acos((c+g+v-1)/2),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this.w=t[15],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Jt(this.x,e.x,t.x),this.y=Jt(this.y,e.y,t.y),this.z=Jt(this.z,e.z,t.z),this.w=Jt(this.w,e.w,t.w),this}clampScalar(e,t){return this.x=Jt(this.x,e,t),this.y=Jt(this.y,e,t),this.z=Jt(this.z,e,t),this.w=Jt(this.w,e,t),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Jt(i,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this.z=e.z+(t.z-e.z)*i,this.w=e.w+(t.w-e.w)*i,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class bw extends da{constructor(e=1,t=1,i={}){super(),this.isRenderTarget=!0,this.width=e,this.height=t,this.depth=1,this.scissor=new Rn(0,0,e,t),this.scissorTest=!1,this.viewport=new Rn(0,0,e,t);const r={width:e,height:t,depth:1};i=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:Xi,depthBuffer:!0,stencilBuffer:!1,resolveDepthBuffer:!0,resolveStencilBuffer:!0,depthTexture:null,samples:0,count:1},i);const s=new _i(r,i.mapping,i.wrapS,i.wrapT,i.magFilter,i.minFilter,i.format,i.type,i.anisotropy,i.colorSpace);s.flipY=!1,s.generateMipmaps=i.generateMipmaps,s.internalFormat=i.internalFormat,this.textures=[];const o=i.count;for(let a=0;a<o;a++)this.textures[a]=s.clone(),this.textures[a].isRenderTargetTexture=!0,this.textures[a].renderTarget=this;this.depthBuffer=i.depthBuffer,this.stencilBuffer=i.stencilBuffer,this.resolveDepthBuffer=i.resolveDepthBuffer,this.resolveStencilBuffer=i.resolveStencilBuffer,this._depthTexture=null,this.depthTexture=i.depthTexture,this.samples=i.samples}get texture(){return this.textures[0]}set texture(e){this.textures[0]=e}set depthTexture(e){this._depthTexture!==null&&(this._depthTexture.renderTarget=null),e!==null&&(e.renderTarget=this),this._depthTexture=e}get depthTexture(){return this._depthTexture}setSize(e,t,i=1){if(this.width!==e||this.height!==t||this.depth!==i){this.width=e,this.height=t,this.depth=i;for(let r=0,s=this.textures.length;r<s;r++)this.textures[r].image.width=e,this.textures[r].image.height=t,this.textures[r].image.depth=i;this.dispose()}this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.textures.length=0;for(let t=0,i=e.textures.length;t<i;t++){this.textures[t]=e.textures[t].clone(),this.textures[t].isRenderTargetTexture=!0,this.textures[t].renderTarget=this;const r=Object.assign({},e.textures[t].image);this.textures[t].source=new Wl(r)}return this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.resolveDepthBuffer=e.resolveDepthBuffer,this.resolveStencilBuffer=e.resolveStencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class ua extends bw{constructor(e=1,t=1,i={}){super(e,t,i),this.isWebGLRenderTarget=!0}}class qg extends _i{constructor(e=null,t=1,i=1,r=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:i,depth:r},this.magFilter=mr,this.minFilter=mr,this.wrapR=lo,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}}class Sq extends ua{constructor(e=1,t=1,i=1,r={}){super(e,t,r),this.isWebGLArrayRenderTarget=!0,this.depth=i,this.texture=new qg(null,e,t,i),this.texture.isRenderTargetTexture=!0}}class Sw extends _i{constructor(e=null,t=1,i=1,r=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:i,depth:r},this.magFilter=mr,this.minFilter=mr,this.wrapR=lo,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class Tq extends ua{constructor(e=1,t=1,i=1,r={}){super(e,t,r),this.isWebGL3DRenderTarget=!0,this.depth=i,this.texture=new Sw(null,e,t,i),this.texture.isRenderTargetTexture=!0}}class _s{constructor(e=0,t=0,i=0,r=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=i,this._w=r}static slerpFlat(e,t,i,r,s,o,a){let l=i[r+0],c=i[r+1],u=i[r+2],f=i[r+3];const m=s[o+0],g=s[o+1],x=s[o+2],b=s[o+3];if(a===0){e[t+0]=l,e[t+1]=c,e[t+2]=u,e[t+3]=f;return}if(a===1){e[t+0]=m,e[t+1]=g,e[t+2]=x,e[t+3]=b;return}if(f!==b||l!==m||c!==g||u!==x){let w=1-a;const v=l*m+c*g+u*x+f*b,S=v>=0?1:-1,E=1-v*v;if(E>Number.EPSILON){const U=Math.sqrt(E),O=Math.atan2(U,v*S);w=Math.sin(w*O)/U,a=Math.sin(a*O)/U}const I=a*S;if(l=l*w+m*I,c=c*w+g*I,u=u*w+x*I,f=f*w+b*I,w===1-a){const U=1/Math.sqrt(l*l+c*c+u*u+f*f);l*=U,c*=U,u*=U,f*=U}}e[t]=l,e[t+1]=c,e[t+2]=u,e[t+3]=f}static multiplyQuaternionsFlat(e,t,i,r,s,o){const a=i[r],l=i[r+1],c=i[r+2],u=i[r+3],f=s[o],m=s[o+1],g=s[o+2],x=s[o+3];return e[t]=a*x+u*f+l*g-c*m,e[t+1]=l*x+u*m+c*f-a*g,e[t+2]=c*x+u*g+a*m-l*f,e[t+3]=u*x-a*f-l*m-c*g,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,i,r){return this._x=e,this._y=t,this._z=i,this._w=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t=!0){const i=e._x,r=e._y,s=e._z,o=e._order,a=Math.cos,l=Math.sin,c=a(i/2),u=a(r/2),f=a(s/2),m=l(i/2),g=l(r/2),x=l(s/2);switch(o){case"XYZ":this._x=m*u*f+c*g*x,this._y=c*g*f-m*u*x,this._z=c*u*x+m*g*f,this._w=c*u*f-m*g*x;break;case"YXZ":this._x=m*u*f+c*g*x,this._y=c*g*f-m*u*x,this._z=c*u*x-m*g*f,this._w=c*u*f+m*g*x;break;case"ZXY":this._x=m*u*f-c*g*x,this._y=c*g*f+m*u*x,this._z=c*u*x+m*g*f,this._w=c*u*f-m*g*x;break;case"ZYX":this._x=m*u*f-c*g*x,this._y=c*g*f+m*u*x,this._z=c*u*x-m*g*f,this._w=c*u*f+m*g*x;break;case"YZX":this._x=m*u*f+c*g*x,this._y=c*g*f+m*u*x,this._z=c*u*x-m*g*f,this._w=c*u*f-m*g*x;break;case"XZY":this._x=m*u*f-c*g*x,this._y=c*g*f-m*u*x,this._z=c*u*x+m*g*f,this._w=c*u*f+m*g*x;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+o)}return t===!0&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const i=t/2,r=Math.sin(i);return this._x=e.x*r,this._y=e.y*r,this._z=e.z*r,this._w=Math.cos(i),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,i=t[0],r=t[4],s=t[8],o=t[1],a=t[5],l=t[9],c=t[2],u=t[6],f=t[10],m=i+a+f;if(m>0){const g=.5/Math.sqrt(m+1);this._w=.25/g,this._x=(u-l)*g,this._y=(s-c)*g,this._z=(o-r)*g}else if(i>a&&i>f){const g=2*Math.sqrt(1+i-a-f);this._w=(u-l)/g,this._x=.25*g,this._y=(r+o)/g,this._z=(s+c)/g}else if(a>f){const g=2*Math.sqrt(1+a-i-f);this._w=(s-c)/g,this._x=(r+o)/g,this._y=.25*g,this._z=(l+u)/g}else{const g=2*Math.sqrt(1+f-i-a);this._w=(o-r)/g,this._x=(s+c)/g,this._y=(l+u)/g,this._z=.25*g}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let i=e.dot(t)+1;return i<Number.EPSILON?(i=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=i):(this._x=0,this._y=-e.z,this._z=e.y,this._w=i)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=i),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(Jt(this.dot(e),-1,1)))}rotateTowards(e,t){const i=this.angleTo(e);if(i===0)return this;const r=Math.min(1,t/i);return this.slerp(e,r),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const i=e._x,r=e._y,s=e._z,o=e._w,a=t._x,l=t._y,c=t._z,u=t._w;return this._x=i*u+o*a+r*c-s*l,this._y=r*u+o*l+s*a-i*c,this._z=s*u+o*c+i*l-r*a,this._w=o*u-i*a-r*l-s*c,this._onChangeCallback(),this}slerp(e,t){if(t===0)return this;if(t===1)return this.copy(e);const i=this._x,r=this._y,s=this._z,o=this._w;let a=o*e._w+i*e._x+r*e._y+s*e._z;if(a<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,a=-a):this.copy(e),a>=1)return this._w=o,this._x=i,this._y=r,this._z=s,this;const l=1-a*a;if(l<=Number.EPSILON){const g=1-t;return this._w=g*o+t*this._w,this._x=g*i+t*this._x,this._y=g*r+t*this._y,this._z=g*s+t*this._z,this.normalize(),this}const c=Math.sqrt(l),u=Math.atan2(c,a),f=Math.sin((1-t)*u)/c,m=Math.sin(t*u)/c;return this._w=o*f+this._w*m,this._x=i*f+this._x*m,this._y=r*f+this._y*m,this._z=s*f+this._z*m,this._onChangeCallback(),this}slerpQuaternions(e,t,i){return this.copy(e).slerp(t,i)}random(){const e=2*Math.PI*Math.random(),t=2*Math.PI*Math.random(),i=Math.random(),r=Math.sqrt(1-i),s=Math.sqrt(i);return this.set(r*Math.sin(e),r*Math.cos(e),s*Math.sin(t),s*Math.cos(t))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class K{constructor(e=0,t=0,i=0){K.prototype.isVector3=!0,this.x=e,this.y=t,this.z=i}set(e,t,i){return i===void 0&&(i=this.z),this.x=e,this.y=t,this.z=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(g2.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(g2.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,i=this.y,r=this.z,s=e.elements;return this.x=s[0]*t+s[3]*i+s[6]*r,this.y=s[1]*t+s[4]*i+s[7]*r,this.z=s[2]*t+s[5]*i+s[8]*r,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,i=this.y,r=this.z,s=e.elements,o=1/(s[3]*t+s[7]*i+s[11]*r+s[15]);return this.x=(s[0]*t+s[4]*i+s[8]*r+s[12])*o,this.y=(s[1]*t+s[5]*i+s[9]*r+s[13])*o,this.z=(s[2]*t+s[6]*i+s[10]*r+s[14])*o,this}applyQuaternion(e){const t=this.x,i=this.y,r=this.z,s=e.x,o=e.y,a=e.z,l=e.w,c=2*(o*r-a*i),u=2*(a*t-s*r),f=2*(s*i-o*t);return this.x=t+l*c+o*f-a*u,this.y=i+l*u+a*c-s*f,this.z=r+l*f+s*u-o*c,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,i=this.y,r=this.z,s=e.elements;return this.x=s[0]*t+s[4]*i+s[8]*r,this.y=s[1]*t+s[5]*i+s[9]*r,this.z=s[2]*t+s[6]*i+s[10]*r,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Jt(this.x,e.x,t.x),this.y=Jt(this.y,e.y,t.y),this.z=Jt(this.z,e.z,t.z),this}clampScalar(e,t){return this.x=Jt(this.x,e,t),this.y=Jt(this.y,e,t),this.z=Jt(this.z,e,t),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Jt(i,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this.z=e.z+(t.z-e.z)*i,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){const i=e.x,r=e.y,s=e.z,o=t.x,a=t.y,l=t.z;return this.x=r*l-s*a,this.y=s*o-i*l,this.z=i*a-r*o,this}projectOnVector(e){const t=e.lengthSq();if(t===0)return this.set(0,0,0);const i=e.dot(this)/t;return this.copy(e).multiplyScalar(i)}projectOnPlane(e){return KS.copy(this).projectOnVector(e),this.sub(KS)}reflect(e){return this.sub(KS.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const i=this.dot(e)/t;return Math.acos(Jt(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,i=this.y-e.y,r=this.z-e.z;return t*t+i*i+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,i){const r=Math.sin(t)*e;return this.x=r*Math.sin(i),this.y=Math.cos(t)*e,this.z=r*Math.cos(i),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,i){return this.x=e*Math.sin(t),this.y=i,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),i=this.setFromMatrixColumn(e,1).length(),r=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=i,this.z=r,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,t*4)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,t*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=Math.random()*Math.PI*2,t=Math.random()*2-1,i=Math.sqrt(1-t*t);return this.x=i*Math.cos(e),this.y=t,this.z=i*Math.sin(e),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const KS=new K,g2=new _s;class Qr{constructor(e=new K(1/0,1/0,1/0),t=new K(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t+=3)this.expandByPoint(vo.fromArray(e,t));return this}setFromBufferAttribute(e){this.makeEmpty();for(let t=0,i=e.count;t<i;t++)this.expandByPoint(vo.fromBufferAttribute(e,t));return this}setFromPoints(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const i=vo.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){e.updateWorldMatrix(!1,!1);const i=e.geometry;if(i!==void 0){const s=i.getAttribute("position");if(t===!0&&s!==void 0&&e.isInstancedMesh!==!0)for(let o=0,a=s.count;o<a;o++)e.isMesh===!0?e.getVertexPosition(o,vo):vo.fromBufferAttribute(s,o),vo.applyMatrix4(e.matrixWorld),this.expandByPoint(vo);else e.boundingBox!==void 0?(e.boundingBox===null&&e.computeBoundingBox(),bv.copy(e.boundingBox)):(i.boundingBox===null&&i.computeBoundingBox(),bv.copy(i.boundingBox)),bv.applyMatrix4(e.matrixWorld),this.union(bv)}const r=e.children;for(let s=0,o=r.length;s<o;s++)this.expandByObject(r[s],t);return this}containsPoint(e){return e.x>=this.min.x&&e.x<=this.max.x&&e.y>=this.min.y&&e.y<=this.max.y&&e.z>=this.min.z&&e.z<=this.max.z}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return e.max.x>=this.min.x&&e.min.x<=this.max.x&&e.max.y>=this.min.y&&e.min.y<=this.max.y&&e.max.z>=this.min.z&&e.min.z<=this.max.z}intersectsSphere(e){return this.clampPoint(e.center,vo),vo.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,i;return e.normal.x>0?(t=e.normal.x*this.min.x,i=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,i=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,i+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,i+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,i+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,i+=e.normal.z*this.min.z),t<=-e.constant&&i>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(Ep),Sv.subVectors(this.max,Ep),Hh.subVectors(e.a,Ep),Gh.subVectors(e.b,Ep),Wh.subVectors(e.c,Ep),vl.subVectors(Gh,Hh),xl.subVectors(Wh,Gh),Zc.subVectors(Hh,Wh);let t=[0,-vl.z,vl.y,0,-xl.z,xl.y,0,-Zc.z,Zc.y,vl.z,0,-vl.x,xl.z,0,-xl.x,Zc.z,0,-Zc.x,-vl.y,vl.x,0,-xl.y,xl.x,0,-Zc.y,Zc.x,0];return!YS(t,Hh,Gh,Wh,Sv)||(t=[1,0,0,0,1,0,0,0,1],!YS(t,Hh,Gh,Wh,Sv))?!1:(Tv.crossVectors(vl,xl),t=[Tv.x,Tv.y,Tv.z],YS(t,Hh,Gh,Wh,Sv))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,vo).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=this.getSize(vo).length()*.5),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(wa[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),wa[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),wa[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),wa[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),wa[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),wa[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),wa[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),wa[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(wa),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const wa=[new K,new K,new K,new K,new K,new K,new K,new K],vo=new K,bv=new Qr,Hh=new K,Gh=new K,Wh=new K,vl=new K,xl=new K,Zc=new K,Ep=new K,Sv=new K,Tv=new K,eu=new K;function YS(n,e,t,i,r){for(let s=0,o=n.length-3;s<=o;s+=3){eu.fromArray(n,s);const a=r.x*Math.abs(eu.x)+r.y*Math.abs(eu.y)+r.z*Math.abs(eu.z),l=e.dot(eu),c=t.dot(eu),u=i.dot(eu);if(Math.max(-Math.max(l,c,u),Math.min(l,c,u))>a)return!1}return!0}const Eq=new Qr,Cp=new K,JS=new K;class Ur{constructor(e=new K,t=-1){this.isSphere=!0,this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const i=this.center;t!==void 0?i.copy(t):Eq.setFromPoints(e).getCenter(i);let r=0;for(let s=0,o=e.length;s<o;s++)r=Math.max(r,i.distanceToSquared(e[s]));return this.radius=Math.sqrt(r),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const i=this.center.distanceToSquared(e);return t.copy(e),i>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;Cp.subVectors(e,this.center);const t=Cp.lengthSq();if(t>this.radius*this.radius){const i=Math.sqrt(t),r=(i-this.radius)*.5;this.center.addScaledVector(Cp,r/i),this.radius+=r}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(this.center.equals(e.center)===!0?this.radius=Math.max(this.radius,e.radius):(JS.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(Cp.copy(e.center).add(JS)),this.expandByPoint(Cp.copy(e.center).sub(JS))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}}const ba=new K,QS=new K,Ev=new K,_l=new K,ZS=new K,Cv=new K,eT=new K;class Pf{constructor(e=new K,t=new K(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,ba)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const i=t.dot(this.direction);return i<0?t.copy(this.origin):t.copy(this.origin).addScaledVector(this.direction,i)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=ba.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(ba.copy(this.origin).addScaledVector(this.direction,t),ba.distanceToSquared(e))}distanceSqToSegment(e,t,i,r){QS.copy(e).add(t).multiplyScalar(.5),Ev.copy(t).sub(e).normalize(),_l.copy(this.origin).sub(QS);const s=e.distanceTo(t)*.5,o=-this.direction.dot(Ev),a=_l.dot(this.direction),l=-_l.dot(Ev),c=_l.lengthSq(),u=Math.abs(1-o*o);let f,m,g,x;if(u>0)if(f=o*l-a,m=o*a-l,x=s*u,f>=0)if(m>=-x)if(m<=x){const b=1/u;f*=b,m*=b,g=f*(f+o*m+2*a)+m*(o*f+m+2*l)+c}else m=s,f=Math.max(0,-(o*m+a)),g=-f*f+m*(m+2*l)+c;else m=-s,f=Math.max(0,-(o*m+a)),g=-f*f+m*(m+2*l)+c;else m<=-x?(f=Math.max(0,-(-o*s+a)),m=f>0?-s:Math.min(Math.max(-s,-l),s),g=-f*f+m*(m+2*l)+c):m<=x?(f=0,m=Math.min(Math.max(-s,-l),s),g=m*(m+2*l)+c):(f=Math.max(0,-(o*s+a)),m=f>0?s:Math.min(Math.max(-s,-l),s),g=-f*f+m*(m+2*l)+c);else m=o>0?-s:s,f=Math.max(0,-(o*m+a)),g=-f*f+m*(m+2*l)+c;return i&&i.copy(this.origin).addScaledVector(this.direction,f),r&&r.copy(QS).addScaledVector(Ev,m),g}intersectSphere(e,t){ba.subVectors(e.center,this.origin);const i=ba.dot(this.direction),r=ba.dot(ba)-i*i,s=e.radius*e.radius;if(r>s)return null;const o=Math.sqrt(s-r),a=i-o,l=i+o;return l<0?null:a<0?this.at(l,t):this.at(a,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(t===0)return e.distanceToPoint(this.origin)===0?0:null;const i=-(this.origin.dot(e.normal)+e.constant)/t;return i>=0?i:null}intersectPlane(e,t){const i=this.distanceToPlane(e);return i===null?null:this.at(i,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);return t===0||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let i,r,s,o,a,l;const c=1/this.direction.x,u=1/this.direction.y,f=1/this.direction.z,m=this.origin;return c>=0?(i=(e.min.x-m.x)*c,r=(e.max.x-m.x)*c):(i=(e.max.x-m.x)*c,r=(e.min.x-m.x)*c),u>=0?(s=(e.min.y-m.y)*u,o=(e.max.y-m.y)*u):(s=(e.max.y-m.y)*u,o=(e.min.y-m.y)*u),i>o||s>r||((s>i||isNaN(i))&&(i=s),(o<r||isNaN(r))&&(r=o),f>=0?(a=(e.min.z-m.z)*f,l=(e.max.z-m.z)*f):(a=(e.max.z-m.z)*f,l=(e.min.z-m.z)*f),i>l||a>r)||((a>i||i!==i)&&(i=a),(l<r||r!==r)&&(r=l),r<0)?null:this.at(i>=0?i:r,t)}intersectsBox(e){return this.intersectBox(e,ba)!==null}intersectTriangle(e,t,i,r,s){ZS.subVectors(t,e),Cv.subVectors(i,e),eT.crossVectors(ZS,Cv);let o=this.direction.dot(eT),a;if(o>0){if(r)return null;a=1}else if(o<0)a=-1,o=-o;else return null;_l.subVectors(this.origin,e);const l=a*this.direction.dot(Cv.crossVectors(_l,Cv));if(l<0)return null;const c=a*this.direction.dot(ZS.cross(_l));if(c<0||l+c>o)return null;const u=-a*_l.dot(eT);return u<0?null:this.at(u/o,s)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class Vt{constructor(e,t,i,r,s,o,a,l,c,u,f,m,g,x,b,w){Vt.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],e!==void 0&&this.set(e,t,i,r,s,o,a,l,c,u,f,m,g,x,b,w)}set(e,t,i,r,s,o,a,l,c,u,f,m,g,x,b,w){const v=this.elements;return v[0]=e,v[4]=t,v[8]=i,v[12]=r,v[1]=s,v[5]=o,v[9]=a,v[13]=l,v[2]=c,v[6]=u,v[10]=f,v[14]=m,v[3]=g,v[7]=x,v[11]=b,v[15]=w,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new Vt().fromArray(this.elements)}copy(e){const t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],t[9]=i[9],t[10]=i[10],t[11]=i[11],t[12]=i[12],t[13]=i[13],t[14]=i[14],t[15]=i[15],this}copyPosition(e){const t=this.elements,i=e.elements;return t[12]=i[12],t[13]=i[13],t[14]=i[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,i){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),i.setFromMatrixColumn(this,2),this}makeBasis(e,t,i){return this.set(e.x,t.x,i.x,0,e.y,t.y,i.y,0,e.z,t.z,i.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,i=e.elements,r=1/qh.setFromMatrixColumn(e,0).length(),s=1/qh.setFromMatrixColumn(e,1).length(),o=1/qh.setFromMatrixColumn(e,2).length();return t[0]=i[0]*r,t[1]=i[1]*r,t[2]=i[2]*r,t[3]=0,t[4]=i[4]*s,t[5]=i[5]*s,t[6]=i[6]*s,t[7]=0,t[8]=i[8]*o,t[9]=i[9]*o,t[10]=i[10]*o,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){const t=this.elements,i=e.x,r=e.y,s=e.z,o=Math.cos(i),a=Math.sin(i),l=Math.cos(r),c=Math.sin(r),u=Math.cos(s),f=Math.sin(s);if(e.order==="XYZ"){const m=o*u,g=o*f,x=a*u,b=a*f;t[0]=l*u,t[4]=-l*f,t[8]=c,t[1]=g+x*c,t[5]=m-b*c,t[9]=-a*l,t[2]=b-m*c,t[6]=x+g*c,t[10]=o*l}else if(e.order==="YXZ"){const m=l*u,g=l*f,x=c*u,b=c*f;t[0]=m+b*a,t[4]=x*a-g,t[8]=o*c,t[1]=o*f,t[5]=o*u,t[9]=-a,t[2]=g*a-x,t[6]=b+m*a,t[10]=o*l}else if(e.order==="ZXY"){const m=l*u,g=l*f,x=c*u,b=c*f;t[0]=m-b*a,t[4]=-o*f,t[8]=x+g*a,t[1]=g+x*a,t[5]=o*u,t[9]=b-m*a,t[2]=-o*c,t[6]=a,t[10]=o*l}else if(e.order==="ZYX"){const m=o*u,g=o*f,x=a*u,b=a*f;t[0]=l*u,t[4]=x*c-g,t[8]=m*c+b,t[1]=l*f,t[5]=b*c+m,t[9]=g*c-x,t[2]=-c,t[6]=a*l,t[10]=o*l}else if(e.order==="YZX"){const m=o*l,g=o*c,x=a*l,b=a*c;t[0]=l*u,t[4]=b-m*f,t[8]=x*f+g,t[1]=f,t[5]=o*u,t[9]=-a*u,t[2]=-c*u,t[6]=g*f+x,t[10]=m-b*f}else if(e.order==="XZY"){const m=o*l,g=o*c,x=a*l,b=a*c;t[0]=l*u,t[4]=-f,t[8]=c*u,t[1]=m*f+b,t[5]=o*u,t[9]=g*f-x,t[2]=x*f-g,t[6]=a*u,t[10]=b*f+m}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(Cq,e,Aq)}lookAt(e,t,i){const r=this.elements;return Ps.subVectors(e,t),Ps.lengthSq()===0&&(Ps.z=1),Ps.normalize(),wl.crossVectors(i,Ps),wl.lengthSq()===0&&(Math.abs(i.z)===1?Ps.x+=1e-4:Ps.z+=1e-4,Ps.normalize(),wl.crossVectors(i,Ps)),wl.normalize(),Av.crossVectors(Ps,wl),r[0]=wl.x,r[4]=Av.x,r[8]=Ps.x,r[1]=wl.y,r[5]=Av.y,r[9]=Ps.y,r[2]=wl.z,r[6]=Av.z,r[10]=Ps.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const i=e.elements,r=t.elements,s=this.elements,o=i[0],a=i[4],l=i[8],c=i[12],u=i[1],f=i[5],m=i[9],g=i[13],x=i[2],b=i[6],w=i[10],v=i[14],S=i[3],E=i[7],I=i[11],U=i[15],O=r[0],C=r[4],P=r[8],M=r[12],A=r[1],D=r[5],B=r[9],j=r[13],te=r[2],ce=r[6],pe=r[10],de=r[14],W=r[3],Z=r[7],F=r[11],J=r[15];return s[0]=o*O+a*A+l*te+c*W,s[4]=o*C+a*D+l*ce+c*Z,s[8]=o*P+a*B+l*pe+c*F,s[12]=o*M+a*j+l*de+c*J,s[1]=u*O+f*A+m*te+g*W,s[5]=u*C+f*D+m*ce+g*Z,s[9]=u*P+f*B+m*pe+g*F,s[13]=u*M+f*j+m*de+g*J,s[2]=x*O+b*A+w*te+v*W,s[6]=x*C+b*D+w*ce+v*Z,s[10]=x*P+b*B+w*pe+v*F,s[14]=x*M+b*j+w*de+v*J,s[3]=S*O+E*A+I*te+U*W,s[7]=S*C+E*D+I*ce+U*Z,s[11]=S*P+E*B+I*pe+U*F,s[15]=S*M+E*j+I*de+U*J,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],i=e[4],r=e[8],s=e[12],o=e[1],a=e[5],l=e[9],c=e[13],u=e[2],f=e[6],m=e[10],g=e[14],x=e[3],b=e[7],w=e[11],v=e[15];return x*(+s*l*f-r*c*f-s*a*m+i*c*m+r*a*g-i*l*g)+b*(+t*l*g-t*c*m+s*o*m-r*o*g+r*c*u-s*l*u)+w*(+t*c*f-t*a*g-s*o*f+i*o*g+s*a*u-i*c*u)+v*(-r*a*u-t*l*f+t*a*m+r*o*f-i*o*m+i*l*u)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,i){const r=this.elements;return e.isVector3?(r[12]=e.x,r[13]=e.y,r[14]=e.z):(r[12]=e,r[13]=t,r[14]=i),this}invert(){const e=this.elements,t=e[0],i=e[1],r=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],u=e[8],f=e[9],m=e[10],g=e[11],x=e[12],b=e[13],w=e[14],v=e[15],S=f*w*c-b*m*c+b*l*g-a*w*g-f*l*v+a*m*v,E=x*m*c-u*w*c-x*l*g+o*w*g+u*l*v-o*m*v,I=u*b*c-x*f*c+x*a*g-o*b*g-u*a*v+o*f*v,U=x*f*l-u*b*l-x*a*m+o*b*m+u*a*w-o*f*w,O=t*S+i*E+r*I+s*U;if(O===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const C=1/O;return e[0]=S*C,e[1]=(b*m*s-f*w*s-b*r*g+i*w*g+f*r*v-i*m*v)*C,e[2]=(a*w*s-b*l*s+b*r*c-i*w*c-a*r*v+i*l*v)*C,e[3]=(f*l*s-a*m*s-f*r*c+i*m*c+a*r*g-i*l*g)*C,e[4]=E*C,e[5]=(u*w*s-x*m*s+x*r*g-t*w*g-u*r*v+t*m*v)*C,e[6]=(x*l*s-o*w*s-x*r*c+t*w*c+o*r*v-t*l*v)*C,e[7]=(o*m*s-u*l*s+u*r*c-t*m*c-o*r*g+t*l*g)*C,e[8]=I*C,e[9]=(x*f*s-u*b*s-x*i*g+t*b*g+u*i*v-t*f*v)*C,e[10]=(o*b*s-x*a*s+x*i*c-t*b*c-o*i*v+t*a*v)*C,e[11]=(u*a*s-o*f*s-u*i*c+t*f*c+o*i*g-t*a*g)*C,e[12]=U*C,e[13]=(u*b*r-x*f*r+x*i*m-t*b*m-u*i*w+t*f*w)*C,e[14]=(x*a*r-o*b*r-x*i*l+t*b*l+o*i*w-t*a*w)*C,e[15]=(o*f*r-u*a*r+u*i*l-t*f*l-o*i*m+t*a*m)*C,this}scale(e){const t=this.elements,i=e.x,r=e.y,s=e.z;return t[0]*=i,t[4]*=r,t[8]*=s,t[1]*=i,t[5]*=r,t[9]*=s,t[2]*=i,t[6]*=r,t[10]*=s,t[3]*=i,t[7]*=r,t[11]*=s,this}getMaxScaleOnAxis(){const e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],i=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],r=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,i,r))}makeTranslation(e,t,i){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,t,0,0,1,i,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),i=Math.sin(e);return this.set(1,0,0,0,0,t,-i,0,0,i,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,0,i,0,0,1,0,0,-i,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,-i,0,0,i,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const i=Math.cos(t),r=Math.sin(t),s=1-i,o=e.x,a=e.y,l=e.z,c=s*o,u=s*a;return this.set(c*o+i,c*a-r*l,c*l+r*a,0,c*a+r*l,u*a+i,u*l-r*o,0,c*l-r*a,u*l+r*o,s*l*l+i,0,0,0,0,1),this}makeScale(e,t,i){return this.set(e,0,0,0,0,t,0,0,0,0,i,0,0,0,0,1),this}makeShear(e,t,i,r,s,o){return this.set(1,i,s,0,e,1,o,0,t,r,1,0,0,0,0,1),this}compose(e,t,i){const r=this.elements,s=t._x,o=t._y,a=t._z,l=t._w,c=s+s,u=o+o,f=a+a,m=s*c,g=s*u,x=s*f,b=o*u,w=o*f,v=a*f,S=l*c,E=l*u,I=l*f,U=i.x,O=i.y,C=i.z;return r[0]=(1-(b+v))*U,r[1]=(g+I)*U,r[2]=(x-E)*U,r[3]=0,r[4]=(g-I)*O,r[5]=(1-(m+v))*O,r[6]=(w+S)*O,r[7]=0,r[8]=(x+E)*C,r[9]=(w-S)*C,r[10]=(1-(m+b))*C,r[11]=0,r[12]=e.x,r[13]=e.y,r[14]=e.z,r[15]=1,this}decompose(e,t,i){const r=this.elements;let s=qh.set(r[0],r[1],r[2]).length();const o=qh.set(r[4],r[5],r[6]).length(),a=qh.set(r[8],r[9],r[10]).length();this.determinant()<0&&(s=-s),e.x=r[12],e.y=r[13],e.z=r[14],xo.copy(this);const c=1/s,u=1/o,f=1/a;return xo.elements[0]*=c,xo.elements[1]*=c,xo.elements[2]*=c,xo.elements[4]*=u,xo.elements[5]*=u,xo.elements[6]*=u,xo.elements[8]*=f,xo.elements[9]*=f,xo.elements[10]*=f,t.setFromRotationMatrix(xo),i.x=s,i.y=o,i.z=a,this}makePerspective(e,t,i,r,s,o,a=Io){const l=this.elements,c=2*s/(t-e),u=2*s/(i-r),f=(t+e)/(t-e),m=(i+r)/(i-r);let g,x;if(a===Io)g=-(o+s)/(o-s),x=-2*o*s/(o-s);else if(a===ug)g=-o/(o-s),x=-o*s/(o-s);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+a);return l[0]=c,l[4]=0,l[8]=f,l[12]=0,l[1]=0,l[5]=u,l[9]=m,l[13]=0,l[2]=0,l[6]=0,l[10]=g,l[14]=x,l[3]=0,l[7]=0,l[11]=-1,l[15]=0,this}makeOrthographic(e,t,i,r,s,o,a=Io){const l=this.elements,c=1/(t-e),u=1/(i-r),f=1/(o-s),m=(t+e)*c,g=(i+r)*u;let x,b;if(a===Io)x=(o+s)*f,b=-2*f;else if(a===ug)x=s*f,b=-1*f;else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+a);return l[0]=2*c,l[4]=0,l[8]=0,l[12]=-m,l[1]=0,l[5]=2*u,l[9]=0,l[13]=-g,l[2]=0,l[6]=0,l[10]=b,l[14]=-x,l[3]=0,l[7]=0,l[11]=0,l[15]=1,this}equals(e){const t=this.elements,i=e.elements;for(let r=0;r<16;r++)if(t[r]!==i[r])return!1;return!0}fromArray(e,t=0){for(let i=0;i<16;i++)this.elements[i]=e[i+t];return this}toArray(e=[],t=0){const i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e[t+9]=i[9],e[t+10]=i[10],e[t+11]=i[11],e[t+12]=i[12],e[t+13]=i[13],e[t+14]=i[14],e[t+15]=i[15],e}}const qh=new K,xo=new Vt,Cq=new K(0,0,0),Aq=new K(1,1,1),wl=new K,Av=new K,Ps=new K,y2=new Vt,v2=new _s;class zs{constructor(e=0,t=0,i=0,r=zs.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=t,this._z=i,this._order=r}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,i,r=this._order){return this._x=e,this._y=t,this._z=i,this._order=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t=this._order,i=!0){const r=e.elements,s=r[0],o=r[4],a=r[8],l=r[1],c=r[5],u=r[9],f=r[2],m=r[6],g=r[10];switch(t){case"XYZ":this._y=Math.asin(Jt(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(-u,g),this._z=Math.atan2(-o,s)):(this._x=Math.atan2(m,c),this._z=0);break;case"YXZ":this._x=Math.asin(-Jt(u,-1,1)),Math.abs(u)<.9999999?(this._y=Math.atan2(a,g),this._z=Math.atan2(l,c)):(this._y=Math.atan2(-f,s),this._z=0);break;case"ZXY":this._x=Math.asin(Jt(m,-1,1)),Math.abs(m)<.9999999?(this._y=Math.atan2(-f,g),this._z=Math.atan2(-o,c)):(this._y=0,this._z=Math.atan2(l,s));break;case"ZYX":this._y=Math.asin(-Jt(f,-1,1)),Math.abs(f)<.9999999?(this._x=Math.atan2(m,g),this._z=Math.atan2(l,s)):(this._x=0,this._z=Math.atan2(-o,c));break;case"YZX":this._z=Math.asin(Jt(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-u,c),this._y=Math.atan2(-f,s)):(this._x=0,this._y=Math.atan2(a,g));break;case"XZY":this._z=Math.asin(-Jt(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(m,c),this._y=Math.atan2(a,s)):(this._x=Math.atan2(-u,g),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,i===!0&&this._onChangeCallback(),this}setFromQuaternion(e,t,i){return y2.makeRotationFromQuaternion(e),this.setFromRotationMatrix(y2,t,i)}setFromVector3(e,t=this._order){return this.set(e.x,e.y,e.z,t)}reorder(e){return v2.setFromEuler(this),this.setFromQuaternion(v2,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}zs.DEFAULT_ORDER="XYZ";class Vu{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}}let Mq=0;const x2=new K,$h=new _s,Sa=new Vt,Mv=new K,Ap=new K,Iq=new K,Pq=new _s,_2=new K(1,0,0),w2=new K(0,1,0),b2=new K(0,0,1),S2={type:"added"},Rq={type:"removed"},Xh={type:"childadded",child:null},tT={type:"childremoved",child:null};class Dn extends da{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:Mq++}),this.uuid=Fs(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=Dn.DEFAULT_UP.clone();const e=new K,t=new zs,i=new _s,r=new K(1,1,1);function s(){i.setFromEuler(t,!1)}function o(){t.setFromQuaternion(i,void 0,!1)}t._onChange(s),i._onChange(o),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:i},scale:{configurable:!0,enumerable:!0,value:r},modelViewMatrix:{value:new Vt},normalMatrix:{value:new sn}}),this.matrix=new Vt,this.matrixWorld=new Vt,this.matrixAutoUpdate=Dn.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=Dn.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new Vu,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return $h.setFromAxisAngle(e,t),this.quaternion.multiply($h),this}rotateOnWorldAxis(e,t){return $h.setFromAxisAngle(e,t),this.quaternion.premultiply($h),this}rotateX(e){return this.rotateOnAxis(_2,e)}rotateY(e){return this.rotateOnAxis(w2,e)}rotateZ(e){return this.rotateOnAxis(b2,e)}translateOnAxis(e,t){return x2.copy(e).applyQuaternion(this.quaternion),this.position.add(x2.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(_2,e)}translateY(e){return this.translateOnAxis(w2,e)}translateZ(e){return this.translateOnAxis(b2,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(Sa.copy(this.matrixWorld).invert())}lookAt(e,t,i){e.isVector3?Mv.copy(e):Mv.set(e,t,i);const r=this.parent;this.updateWorldMatrix(!0,!1),Ap.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Sa.lookAt(Ap,Mv,this.up):Sa.lookAt(Mv,Ap,this.up),this.quaternion.setFromRotationMatrix(Sa),r&&(Sa.extractRotation(r.matrixWorld),$h.setFromRotationMatrix(Sa),this.quaternion.premultiply($h.invert()))}add(e){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.removeFromParent(),e.parent=this,this.children.push(e),e.dispatchEvent(S2),Xh.child=e,this.dispatchEvent(Xh),Xh.child=null):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let i=0;i<arguments.length;i++)this.remove(arguments[i]);return this}const t=this.children.indexOf(e);return t!==-1&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(Rq),tT.child=e,this.dispatchEvent(tT),tT.child=null),this}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}clear(){return this.remove(...this.children)}attach(e){return this.updateWorldMatrix(!0,!1),Sa.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),Sa.multiply(e.parent.matrixWorld)),e.applyMatrix4(Sa),e.removeFromParent(),e.parent=this,this.children.push(e),e.updateWorldMatrix(!1,!0),e.dispatchEvent(S2),Xh.child=e,this.dispatchEvent(Xh),Xh.child=null,this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let i=0,r=this.children.length;i<r;i++){const o=this.children[i].getObjectByProperty(e,t);if(o!==void 0)return o}}getObjectsByProperty(e,t,i=[]){this[e]===t&&i.push(this);const r=this.children;for(let s=0,o=r.length;s<o;s++)r[s].getObjectsByProperty(e,t,i);return i}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Ap,e,Iq),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Ap,Pq,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);const t=this.children;for(let i=0,r=t.length;i<r;i++)t[i].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const t=this.children;for(let i=0,r=t.length;i<r;i++)t[i].traverseVisible(e)}traverseAncestors(e){const t=this.parent;t!==null&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),this.matrixWorldNeedsUpdate=!1,e=!0);const t=this.children;for(let i=0,r=t.length;i<r;i++)t[i].updateMatrixWorld(e)}updateWorldMatrix(e,t){const i=this.parent;if(e===!0&&i!==null&&i.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),t===!0){const r=this.children;for(let s=0,o=r.length;s<o;s++)r[s].updateWorldMatrix(!1,!0)}}toJSON(e){const t=e===void 0||typeof e=="string",i={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},i.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"});const r={};r.uuid=this.uuid,r.type=this.type,this.name!==""&&(r.name=this.name),this.castShadow===!0&&(r.castShadow=!0),this.receiveShadow===!0&&(r.receiveShadow=!0),this.visible===!1&&(r.visible=!1),this.frustumCulled===!1&&(r.frustumCulled=!1),this.renderOrder!==0&&(r.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(r.userData=this.userData),r.layers=this.layers.mask,r.matrix=this.matrix.toArray(),r.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(r.matrixAutoUpdate=!1),this.isInstancedMesh&&(r.type="InstancedMesh",r.count=this.count,r.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(r.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(r.type="BatchedMesh",r.perObjectFrustumCulled=this.perObjectFrustumCulled,r.sortObjects=this.sortObjects,r.drawRanges=this._drawRanges,r.reservedRanges=this._reservedRanges,r.visibility=this._visibility,r.active=this._active,r.bounds=this._bounds.map(a=>({boxInitialized:a.boxInitialized,boxMin:a.box.min.toArray(),boxMax:a.box.max.toArray(),sphereInitialized:a.sphereInitialized,sphereRadius:a.sphere.radius,sphereCenter:a.sphere.center.toArray()})),r.maxInstanceCount=this._maxInstanceCount,r.maxVertexCount=this._maxVertexCount,r.maxIndexCount=this._maxIndexCount,r.geometryInitialized=this._geometryInitialized,r.geometryCount=this._geometryCount,r.matricesTexture=this._matricesTexture.toJSON(e),this._colorsTexture!==null&&(r.colorsTexture=this._colorsTexture.toJSON(e)),this.boundingSphere!==null&&(r.boundingSphere={center:r.boundingSphere.center.toArray(),radius:r.boundingSphere.radius}),this.boundingBox!==null&&(r.boundingBox={min:r.boundingBox.min.toArray(),max:r.boundingBox.max.toArray()}));function s(a,l){return a[l.uuid]===void 0&&(a[l.uuid]=l.toJSON(e)),l.uuid}if(this.isScene)this.background&&(this.background.isColor?r.background=this.background.toJSON():this.background.isTexture&&(r.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(r.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){r.geometry=s(e.geometries,this.geometry);const a=this.geometry.parameters;if(a!==void 0&&a.shapes!==void 0){const l=a.shapes;if(Array.isArray(l))for(let c=0,u=l.length;c<u;c++){const f=l[c];s(e.shapes,f)}else s(e.shapes,l)}}if(this.isSkinnedMesh&&(r.bindMode=this.bindMode,r.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(s(e.skeletons,this.skeleton),r.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const a=[];for(let l=0,c=this.material.length;l<c;l++)a.push(s(e.materials,this.material[l]));r.material=a}else r.material=s(e.materials,this.material);if(this.children.length>0){r.children=[];for(let a=0;a<this.children.length;a++)r.children.push(this.children[a].toJSON(e).object)}if(this.animations.length>0){r.animations=[];for(let a=0;a<this.animations.length;a++){const l=this.animations[a];r.animations.push(s(e.animations,l))}}if(t){const a=o(e.geometries),l=o(e.materials),c=o(e.textures),u=o(e.images),f=o(e.shapes),m=o(e.skeletons),g=o(e.animations),x=o(e.nodes);a.length>0&&(i.geometries=a),l.length>0&&(i.materials=l),c.length>0&&(i.textures=c),u.length>0&&(i.images=u),f.length>0&&(i.shapes=f),m.length>0&&(i.skeletons=m),g.length>0&&(i.animations=g),x.length>0&&(i.nodes=x)}return i.object=r,i;function o(a){const l=[];for(const c in a){const u=a[c];delete u.metadata,l.push(u)}return l}}clone(e){return new this.constructor().copy(this,e)}copy(e,t=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.animations=e.animations.slice(),this.userData=JSON.parse(JSON.stringify(e.userData)),t===!0)for(let i=0;i<e.children.length;i++){const r=e.children[i];this.add(r.clone())}return this}}Dn.DEFAULT_UP=new K(0,1,0);Dn.DEFAULT_MATRIX_AUTO_UPDATE=!0;Dn.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const _o=new K,Ta=new K,nT=new K,Ea=new K,Kh=new K,Yh=new K,T2=new K,iT=new K,rT=new K,sT=new K,oT=new Rn,aT=new Rn,lT=new Rn;class fs{constructor(e=new K,t=new K,i=new K){this.a=e,this.b=t,this.c=i}static getNormal(e,t,i,r){r.subVectors(i,t),_o.subVectors(e,t),r.cross(_o);const s=r.lengthSq();return s>0?r.multiplyScalar(1/Math.sqrt(s)):r.set(0,0,0)}static getBarycoord(e,t,i,r,s){_o.subVectors(r,t),Ta.subVectors(i,t),nT.subVectors(e,t);const o=_o.dot(_o),a=_o.dot(Ta),l=_o.dot(nT),c=Ta.dot(Ta),u=Ta.dot(nT),f=o*c-a*a;if(f===0)return s.set(0,0,0),null;const m=1/f,g=(c*l-a*u)*m,x=(o*u-a*l)*m;return s.set(1-g-x,x,g)}static containsPoint(e,t,i,r){return this.getBarycoord(e,t,i,r,Ea)===null?!1:Ea.x>=0&&Ea.y>=0&&Ea.x+Ea.y<=1}static getInterpolation(e,t,i,r,s,o,a,l){return this.getBarycoord(e,t,i,r,Ea)===null?(l.x=0,l.y=0,"z"in l&&(l.z=0),"w"in l&&(l.w=0),null):(l.setScalar(0),l.addScaledVector(s,Ea.x),l.addScaledVector(o,Ea.y),l.addScaledVector(a,Ea.z),l)}static getInterpolatedAttribute(e,t,i,r,s,o){return oT.setScalar(0),aT.setScalar(0),lT.setScalar(0),oT.fromBufferAttribute(e,t),aT.fromBufferAttribute(e,i),lT.fromBufferAttribute(e,r),o.setScalar(0),o.addScaledVector(oT,s.x),o.addScaledVector(aT,s.y),o.addScaledVector(lT,s.z),o}static isFrontFacing(e,t,i,r){return _o.subVectors(i,t),Ta.subVectors(e,t),_o.cross(Ta).dot(r)<0}set(e,t,i){return this.a.copy(e),this.b.copy(t),this.c.copy(i),this}setFromPointsAndIndices(e,t,i,r){return this.a.copy(e[t]),this.b.copy(e[i]),this.c.copy(e[r]),this}setFromAttributeAndIndices(e,t,i,r){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,i),this.c.fromBufferAttribute(e,r),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return _o.subVectors(this.c,this.b),Ta.subVectors(this.a,this.b),_o.cross(Ta).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return fs.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return fs.getBarycoord(e,this.a,this.b,this.c,t)}getInterpolation(e,t,i,r,s){return fs.getInterpolation(e,this.a,this.b,this.c,t,i,r,s)}containsPoint(e){return fs.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return fs.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const i=this.a,r=this.b,s=this.c;let o,a;Kh.subVectors(r,i),Yh.subVectors(s,i),iT.subVectors(e,i);const l=Kh.dot(iT),c=Yh.dot(iT);if(l<=0&&c<=0)return t.copy(i);rT.subVectors(e,r);const u=Kh.dot(rT),f=Yh.dot(rT);if(u>=0&&f<=u)return t.copy(r);const m=l*f-u*c;if(m<=0&&l>=0&&u<=0)return o=l/(l-u),t.copy(i).addScaledVector(Kh,o);sT.subVectors(e,s);const g=Kh.dot(sT),x=Yh.dot(sT);if(x>=0&&g<=x)return t.copy(s);const b=g*c-l*x;if(b<=0&&c>=0&&x<=0)return a=c/(c-x),t.copy(i).addScaledVector(Yh,a);const w=u*x-g*f;if(w<=0&&f-u>=0&&g-x>=0)return T2.subVectors(s,r),a=(f-u)/(f-u+(g-x)),t.copy(r).addScaledVector(T2,a);const v=1/(w+b+m);return o=b*v,a=m*v,t.copy(i).addScaledVector(Kh,o).addScaledVector(Yh,a)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}const Uj={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},bl={h:0,s:0,l:0},Iv={h:0,s:0,l:0};function cT(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*6*(2/3-t):n}class xt{constructor(e,t,i){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,t,i)}set(e,t,i){if(t===void 0&&i===void 0){const r=e;r&&r.isColor?this.copy(r):typeof r=="number"?this.setHex(r):typeof r=="string"&&this.setStyle(r)}else this.setRGB(e,t,i);return this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,t=us){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,An.toWorkingColorSpace(this,t),this}setRGB(e,t,i,r=An.workingColorSpace){return this.r=e,this.g=t,this.b=i,An.toWorkingColorSpace(this,r),this}setHSL(e,t,i,r=An.workingColorSpace){if(e=OA(e,1),t=Jt(t,0,1),i=Jt(i,0,1),t===0)this.r=this.g=this.b=i;else{const s=i<=.5?i*(1+t):i+t-i*t,o=2*i-s;this.r=cT(o,s,e+1/3),this.g=cT(o,s,e),this.b=cT(o,s,e-1/3)}return An.toWorkingColorSpace(this,r),this}setStyle(e,t=us){function i(s){s!==void 0&&parseFloat(s)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let r;if(r=/^(\w+)\(([^\)]*)\)/.exec(e)){let s;const o=r[1],a=r[2];switch(o){case"rgb":case"rgba":if(s=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return i(s[4]),this.setRGB(Math.min(255,parseInt(s[1],10))/255,Math.min(255,parseInt(s[2],10))/255,Math.min(255,parseInt(s[3],10))/255,t);if(s=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return i(s[4]),this.setRGB(Math.min(100,parseInt(s[1],10))/100,Math.min(100,parseInt(s[2],10))/100,Math.min(100,parseInt(s[3],10))/100,t);break;case"hsl":case"hsla":if(s=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return i(s[4]),this.setHSL(parseFloat(s[1])/360,parseFloat(s[2])/100,parseFloat(s[3])/100,t);break;default:console.warn("THREE.Color: Unknown color model "+e)}}else if(r=/^\#([A-Fa-f\d]+)$/.exec(e)){const s=r[1],o=s.length;if(o===3)return this.setRGB(parseInt(s.charAt(0),16)/15,parseInt(s.charAt(1),16)/15,parseInt(s.charAt(2),16)/15,t);if(o===6)return this.setHex(parseInt(s,16),t);console.warn("THREE.Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,t);return this}setColorName(e,t=us){const i=Uj[e.toLowerCase()];return i!==void 0?this.setHex(i,t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=Va(e.r),this.g=Va(e.g),this.b=Va(e.b),this}copyLinearToSRGB(e){return this.r=$d(e.r),this.g=$d(e.g),this.b=$d(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=us){return An.fromWorkingColorSpace(Ar.copy(this),e),Math.round(Jt(Ar.r*255,0,255))*65536+Math.round(Jt(Ar.g*255,0,255))*256+Math.round(Jt(Ar.b*255,0,255))}getHexString(e=us){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,t=An.workingColorSpace){An.fromWorkingColorSpace(Ar.copy(this),t);const i=Ar.r,r=Ar.g,s=Ar.b,o=Math.max(i,r,s),a=Math.min(i,r,s);let l,c;const u=(a+o)/2;if(a===o)l=0,c=0;else{const f=o-a;switch(c=u<=.5?f/(o+a):f/(2-o-a),o){case i:l=(r-s)/f+(r<s?6:0);break;case r:l=(s-i)/f+2;break;case s:l=(i-r)/f+4;break}l/=6}return e.h=l,e.s=c,e.l=u,e}getRGB(e,t=An.workingColorSpace){return An.fromWorkingColorSpace(Ar.copy(this),t),e.r=Ar.r,e.g=Ar.g,e.b=Ar.b,e}getStyle(e=us){An.fromWorkingColorSpace(Ar.copy(this),e);const t=Ar.r,i=Ar.g,r=Ar.b;return e!==us?`color(${e} ${t.toFixed(3)} ${i.toFixed(3)} ${r.toFixed(3)})`:`rgb(${Math.round(t*255)},${Math.round(i*255)},${Math.round(r*255)})`}offsetHSL(e,t,i){return this.getHSL(bl),this.setHSL(bl.h+e,bl.s+t,bl.l+i)}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,i){return this.r=e.r+(t.r-e.r)*i,this.g=e.g+(t.g-e.g)*i,this.b=e.b+(t.b-e.b)*i,this}lerpHSL(e,t){this.getHSL(bl),e.getHSL(Iv);const i=wm(bl.h,Iv.h,t),r=wm(bl.s,Iv.s,t),s=wm(bl.l,Iv.l,t);return this.setHSL(i,r,s),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){const t=this.r,i=this.g,r=this.b,s=e.elements;return this.r=s[0]*t+s[3]*i+s[6]*r,this.g=s[1]*t+s[4]*i+s[7]*r,this.b=s[2]*t+s[5]*i+s[8]*r,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const Ar=new xt;xt.NAMES=Uj;let Nq=0;class Br extends da{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:Nq++}),this.uuid=Fs(),this.name="",this.type="Material",this.blending=Ou,this.side=Ka,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=N0,this.blendDst=D0,this.blendEquation=Ol,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new xt(0,0,0),this.blendAlpha=0,this.depthFunc=Ju,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=f1,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=gu,this.stencilZFail=gu,this.stencilZPass=gu,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(const t in e){const i=e[t];if(i===void 0){console.warn(`THREE.Material: parameter '${t}' has value of undefined.`);continue}const r=this[t];if(r===void 0){console.warn(`THREE.Material: '${t}' is not a property of THREE.${this.type}.`);continue}r&&r.isColor?r.set(i):r&&r.isVector3&&i&&i.isVector3?r.copy(i):this[t]=i}}toJSON(e){const t=e===void 0||typeof e=="string";t&&(e={textures:{},images:{}});const i={metadata:{version:4.6,type:"Material",generator:"Material.toJSON"}};i.uuid=this.uuid,i.type=this.type,this.name!==""&&(i.name=this.name),this.color&&this.color.isColor&&(i.color=this.color.getHex()),this.roughness!==void 0&&(i.roughness=this.roughness),this.metalness!==void 0&&(i.metalness=this.metalness),this.sheen!==void 0&&(i.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(i.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(i.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(i.emissive=this.emissive.getHex()),this.emissiveIntensity!==void 0&&this.emissiveIntensity!==1&&(i.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(i.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(i.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(i.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(i.shininess=this.shininess),this.clearcoat!==void 0&&(i.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(i.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(i.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(i.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(i.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,i.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.dispersion!==void 0&&(i.dispersion=this.dispersion),this.iridescence!==void 0&&(i.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(i.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(i.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(i.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(i.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.anisotropy!==void 0&&(i.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&&(i.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(i.anisotropyMap=this.anisotropyMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(i.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(i.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(i.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(i.lightMap=this.lightMap.toJSON(e).uuid,i.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(i.aoMap=this.aoMap.toJSON(e).uuid,i.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(i.bumpMap=this.bumpMap.toJSON(e).uuid,i.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(i.normalMap=this.normalMap.toJSON(e).uuid,i.normalMapType=this.normalMapType,i.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(i.displacementMap=this.displacementMap.toJSON(e).uuid,i.displacementScale=this.displacementScale,i.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(i.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(i.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(i.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(i.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(i.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(i.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(i.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(i.combine=this.combine)),this.envMapRotation!==void 0&&(i.envMapRotation=this.envMapRotation.toArray()),this.envMapIntensity!==void 0&&(i.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(i.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(i.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(i.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(i.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(i.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(i.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(i.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(i.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(i.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(i.size=this.size),this.shadowSide!==null&&(i.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(i.sizeAttenuation=this.sizeAttenuation),this.blending!==Ou&&(i.blending=this.blending),this.side!==Ka&&(i.side=this.side),this.vertexColors===!0&&(i.vertexColors=!0),this.opacity<1&&(i.opacity=this.opacity),this.transparent===!0&&(i.transparent=!0),this.blendSrc!==N0&&(i.blendSrc=this.blendSrc),this.blendDst!==D0&&(i.blendDst=this.blendDst),this.blendEquation!==Ol&&(i.blendEquation=this.blendEquation),this.blendSrcAlpha!==null&&(i.blendSrcAlpha=this.blendSrcAlpha),this.blendDstAlpha!==null&&(i.blendDstAlpha=this.blendDstAlpha),this.blendEquationAlpha!==null&&(i.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(i.blendColor=this.blendColor.getHex()),this.blendAlpha!==0&&(i.blendAlpha=this.blendAlpha),this.depthFunc!==Ju&&(i.depthFunc=this.depthFunc),this.depthTest===!1&&(i.depthTest=this.depthTest),this.depthWrite===!1&&(i.depthWrite=this.depthWrite),this.colorWrite===!1&&(i.colorWrite=this.colorWrite),this.stencilWriteMask!==255&&(i.stencilWriteMask=this.stencilWriteMask),this.stencilFunc!==f1&&(i.stencilFunc=this.stencilFunc),this.stencilRef!==0&&(i.stencilRef=this.stencilRef),this.stencilFuncMask!==255&&(i.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==gu&&(i.stencilFail=this.stencilFail),this.stencilZFail!==gu&&(i.stencilZFail=this.stencilZFail),this.stencilZPass!==gu&&(i.stencilZPass=this.stencilZPass),this.stencilWrite===!0&&(i.stencilWrite=this.stencilWrite),this.rotation!==void 0&&this.rotation!==0&&(i.rotation=this.rotation),this.polygonOffset===!0&&(i.polygonOffset=!0),this.polygonOffsetFactor!==0&&(i.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(i.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(i.linewidth=this.linewidth),this.dashSize!==void 0&&(i.dashSize=this.dashSize),this.gapSize!==void 0&&(i.gapSize=this.gapSize),this.scale!==void 0&&(i.scale=this.scale),this.dithering===!0&&(i.dithering=!0),this.alphaTest>0&&(i.alphaTest=this.alphaTest),this.alphaHash===!0&&(i.alphaHash=!0),this.alphaToCoverage===!0&&(i.alphaToCoverage=!0),this.premultipliedAlpha===!0&&(i.premultipliedAlpha=!0),this.forceSinglePass===!0&&(i.forceSinglePass=!0),this.wireframe===!0&&(i.wireframe=!0),this.wireframeLinewidth>1&&(i.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(i.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(i.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(i.flatShading=!0),this.visible===!1&&(i.visible=!1),this.toneMapped===!1&&(i.toneMapped=!1),this.fog===!1&&(i.fog=!1),Object.keys(this.userData).length>0&&(i.userData=this.userData);function r(s){const o=[];for(const a in s){const l=s[a];delete l.metadata,o.push(l)}return o}if(t){const s=r(e.textures),o=r(e.images);s.length>0&&(i.textures=s),o.length>0&&(i.images=o)}return i}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.blendColor.copy(e.blendColor),this.blendAlpha=e.blendAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let i=null;if(t!==null){const r=t.length;i=new Array(r);for(let s=0;s!==r;++s)i[s]=t[s].clone()}return this.clippingPlanes=i,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaHash=e.alphaHash,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}onBuild(){console.warn("Material: onBuild() has been removed.")}}class Ic extends Br{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new xt(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new zs,this.combine=Gg,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const Pa=Dq();function Dq(){const n=new ArrayBuffer(4),e=new Float32Array(n),t=new Uint32Array(n),i=new Uint32Array(512),r=new Uint32Array(512);for(let l=0;l<256;++l){const c=l-127;c<-27?(i[l]=0,i[l|256]=32768,r[l]=24,r[l|256]=24):c<-14?(i[l]=1024>>-c-14,i[l|256]=1024>>-c-14|32768,r[l]=-c-1,r[l|256]=-c-1):c<=15?(i[l]=c+15<<10,i[l|256]=c+15<<10|32768,r[l]=13,r[l|256]=13):c<128?(i[l]=31744,i[l|256]=64512,r[l]=24,r[l|256]=24):(i[l]=31744,i[l|256]=64512,r[l]=13,r[l|256]=13)}const s=new Uint32Array(2048),o=new Uint32Array(64),a=new Uint32Array(64);for(let l=1;l<1024;++l){let c=l<<13,u=0;for(;!(c&8388608);)c<<=1,u-=8388608;c&=-8388609,u+=947912704,s[l]=c|u}for(let l=1024;l<2048;++l)s[l]=939524096+(l-1024<<13);for(let l=1;l<31;++l)o[l]=l<<23;o[31]=1199570944,o[32]=2147483648;for(let l=33;l<63;++l)o[l]=2147483648+(l-32<<23);o[63]=3347054592;for(let l=1;l<64;++l)l!==32&&(a[l]=1024);return{floatView:e,uint32View:t,baseTable:i,shiftTable:r,mantissaTable:s,exponentTable:o,offsetTable:a}}function as(n){Math.abs(n)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),n=Jt(n,-65504,65504),Pa.floatView[0]=n;const e=Pa.uint32View[0],t=e>>23&511;return Pa.baseTable[t]+((e&8388607)>>Pa.shiftTable[t])}function $p(n){const e=n>>10;return Pa.uint32View[0]=Pa.mantissaTable[Pa.offsetTable[e]+(n&1023)]+Pa.exponentTable[e],Pa.floatView[0]}class Lq{static toHalfFloat(e){return as(e)}static fromHalfFloat(e){return $p(e)}}const Li=new K,Pv=new Le;let kq=0;class $n{constructor(e,t,i=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,Object.defineProperty(this,"id",{value:kq++}),this.name="",this.array=e,this.itemSize=t,this.count=e!==void 0?e.length/t:0,this.normalized=i,this.usage=cg,this.updateRanges=[],this.gpuType=gs,this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}copyAt(e,t,i){e*=this.itemSize,i*=t.itemSize;for(let r=0,s=this.itemSize;r<s;r++)this.array[e+r]=t.array[i+r];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let t=0,i=this.count;t<i;t++)Pv.fromBufferAttribute(this,t),Pv.applyMatrix3(e),this.setXY(t,Pv.x,Pv.y);else if(this.itemSize===3)for(let t=0,i=this.count;t<i;t++)Li.fromBufferAttribute(this,t),Li.applyMatrix3(e),this.setXYZ(t,Li.x,Li.y,Li.z);return this}applyMatrix4(e){for(let t=0,i=this.count;t<i;t++)Li.fromBufferAttribute(this,t),Li.applyMatrix4(e),this.setXYZ(t,Li.x,Li.y,Li.z);return this}applyNormalMatrix(e){for(let t=0,i=this.count;t<i;t++)Li.fromBufferAttribute(this,t),Li.applyNormalMatrix(e),this.setXYZ(t,Li.x,Li.y,Li.z);return this}transformDirection(e){for(let t=0,i=this.count;t<i;t++)Li.fromBufferAttribute(this,t),Li.transformDirection(e),this.setXYZ(t,Li.x,Li.y,Li.z);return this}set(e,t=0){return this.array.set(e,t),this}getComponent(e,t){let i=this.array[e*this.itemSize+t];return this.normalized&&(i=Kr(i,this.array)),i}setComponent(e,t,i){return this.normalized&&(i=on(i,this.array)),this.array[e*this.itemSize+t]=i,this}getX(e){let t=this.array[e*this.itemSize];return this.normalized&&(t=Kr(t,this.array)),t}setX(e,t){return this.normalized&&(t=on(t,this.array)),this.array[e*this.itemSize]=t,this}getY(e){let t=this.array[e*this.itemSize+1];return this.normalized&&(t=Kr(t,this.array)),t}setY(e,t){return this.normalized&&(t=on(t,this.array)),this.array[e*this.itemSize+1]=t,this}getZ(e){let t=this.array[e*this.itemSize+2];return this.normalized&&(t=Kr(t,this.array)),t}setZ(e,t){return this.normalized&&(t=on(t,this.array)),this.array[e*this.itemSize+2]=t,this}getW(e){let t=this.array[e*this.itemSize+3];return this.normalized&&(t=Kr(t,this.array)),t}setW(e,t){return this.normalized&&(t=on(t,this.array)),this.array[e*this.itemSize+3]=t,this}setXY(e,t,i){return e*=this.itemSize,this.normalized&&(t=on(t,this.array),i=on(i,this.array)),this.array[e+0]=t,this.array[e+1]=i,this}setXYZ(e,t,i,r){return e*=this.itemSize,this.normalized&&(t=on(t,this.array),i=on(i,this.array),r=on(r,this.array)),this.array[e+0]=t,this.array[e+1]=i,this.array[e+2]=r,this}setXYZW(e,t,i,r,s){return e*=this.itemSize,this.normalized&&(t=on(t,this.array),i=on(i,this.array),r=on(r,this.array),s=on(s,this.array)),this.array[e+0]=t,this.array[e+1]=i,this.array[e+2]=r,this.array[e+3]=s,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==cg&&(e.usage=this.usage),e}}class Oq extends $n{constructor(e,t,i){super(new Int8Array(e),t,i)}}class Uq extends $n{constructor(e,t,i){super(new Uint8Array(e),t,i)}}class Fq extends $n{constructor(e,t,i){super(new Uint8ClampedArray(e),t,i)}}class jq extends $n{constructor(e,t,i){super(new Int16Array(e),t,i)}}class UA extends $n{constructor(e,t,i){super(new Uint16Array(e),t,i)}}class Vq extends $n{constructor(e,t,i){super(new Int32Array(e),t,i)}}class FA extends $n{constructor(e,t,i){super(new Uint32Array(e),t,i)}}class Bq extends $n{constructor(e,t,i){super(new Uint16Array(e),t,i),this.isFloat16BufferAttribute=!0}getX(e){let t=$p(this.array[e*this.itemSize]);return this.normalized&&(t=Kr(t,this.array)),t}setX(e,t){return this.normalized&&(t=on(t,this.array)),this.array[e*this.itemSize]=as(t),this}getY(e){let t=$p(this.array[e*this.itemSize+1]);return this.normalized&&(t=Kr(t,this.array)),t}setY(e,t){return this.normalized&&(t=on(t,this.array)),this.array[e*this.itemSize+1]=as(t),this}getZ(e){let t=$p(this.array[e*this.itemSize+2]);return this.normalized&&(t=Kr(t,this.array)),t}setZ(e,t){return this.normalized&&(t=on(t,this.array)),this.array[e*this.itemSize+2]=as(t),this}getW(e){let t=$p(this.array[e*this.itemSize+3]);return this.normalized&&(t=Kr(t,this.array)),t}setW(e,t){return this.normalized&&(t=on(t,this.array)),this.array[e*this.itemSize+3]=as(t),this}setXY(e,t,i){return e*=this.itemSize,this.normalized&&(t=on(t,this.array),i=on(i,this.array)),this.array[e+0]=as(t),this.array[e+1]=as(i),this}setXYZ(e,t,i,r){return e*=this.itemSize,this.normalized&&(t=on(t,this.array),i=on(i,this.array),r=on(r,this.array)),this.array[e+0]=as(t),this.array[e+1]=as(i),this.array[e+2]=as(r),this}setXYZW(e,t,i,r,s){return e*=this.itemSize,this.normalized&&(t=on(t,this.array),i=on(i,this.array),r=on(r,this.array),s=on(s,this.array)),this.array[e+0]=as(t),this.array[e+1]=as(i),this.array[e+2]=as(r),this.array[e+3]=as(s),this}}class At extends $n{constructor(e,t,i){super(new Float32Array(e),t,i)}}let zq=0;const eo=new Vt,uT=new Dn,Jh=new K,Rs=new Qr,Mp=new Qr,tr=new K;class un extends da{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:zq++}),this.uuid=Fs(),this.name="",this.type="BufferGeometry",this.index=null,this.indirect=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(Lj(e)?FA:UA)(e,1):this.index=e,this}setIndirect(e){return this.indirect=e,this}getIndirect(){return this.indirect}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,t,i=0){this.groups.push({start:e,count:t,materialIndex:i})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;t!==void 0&&(t.applyMatrix4(e),t.needsUpdate=!0);const i=this.attributes.normal;if(i!==void 0){const s=new sn().getNormalMatrix(e);i.applyNormalMatrix(s),i.needsUpdate=!0}const r=this.attributes.tangent;return r!==void 0&&(r.transformDirection(e),r.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return eo.makeRotationFromQuaternion(e),this.applyMatrix4(eo),this}rotateX(e){return eo.makeRotationX(e),this.applyMatrix4(eo),this}rotateY(e){return eo.makeRotationY(e),this.applyMatrix4(eo),this}rotateZ(e){return eo.makeRotationZ(e),this.applyMatrix4(eo),this}translate(e,t,i){return eo.makeTranslation(e,t,i),this.applyMatrix4(eo),this}scale(e,t,i){return eo.makeScale(e,t,i),this.applyMatrix4(eo),this}lookAt(e){return uT.lookAt(e),uT.updateMatrix(),this.applyMatrix4(uT.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(Jh).negate(),this.translate(Jh.x,Jh.y,Jh.z),this}setFromPoints(e){const t=this.getAttribute("position");if(t===void 0){const i=[];for(let r=0,s=e.length;r<s;r++){const o=e[r];i.push(o.x,o.y,o.z||0)}this.setAttribute("position",new At(i,3))}else{const i=Math.min(e.length,t.count);for(let r=0;r<i;r++){const s=e[r];t.setXYZ(r,s.x,s.y,s.z||0)}e.length>t.count&&console.warn("THREE.BufferGeometry: Buffer size too small for points data. Use .dispose() and create a new geometry."),t.needsUpdate=!0}return this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Qr);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box.",this),this.boundingBox.set(new K(-1/0,-1/0,-1/0),new K(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),t)for(let i=0,r=t.length;i<r;i++){const s=t[i];Rs.setFromBufferAttribute(s),this.morphTargetsRelative?(tr.addVectors(this.boundingBox.min,Rs.min),this.boundingBox.expandByPoint(tr),tr.addVectors(this.boundingBox.max,Rs.max),this.boundingBox.expandByPoint(tr)):(this.boundingBox.expandByPoint(Rs.min),this.boundingBox.expandByPoint(Rs.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new Ur);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere.",this),this.boundingSphere.set(new K,1/0);return}if(e){const i=this.boundingSphere.center;if(Rs.setFromBufferAttribute(e),t)for(let s=0,o=t.length;s<o;s++){const a=t[s];Mp.setFromBufferAttribute(a),this.morphTargetsRelative?(tr.addVectors(Rs.min,Mp.min),Rs.expandByPoint(tr),tr.addVectors(Rs.max,Mp.max),Rs.expandByPoint(tr)):(Rs.expandByPoint(Mp.min),Rs.expandByPoint(Mp.max))}Rs.getCenter(i);let r=0;for(let s=0,o=e.count;s<o;s++)tr.fromBufferAttribute(e,s),r=Math.max(r,i.distanceToSquared(tr));if(t)for(let s=0,o=t.length;s<o;s++){const a=t[s],l=this.morphTargetsRelative;for(let c=0,u=a.count;c<u;c++)tr.fromBufferAttribute(a,c),l&&(Jh.fromBufferAttribute(e,c),tr.add(Jh)),r=Math.max(r,i.distanceToSquared(tr))}this.boundingSphere.radius=Math.sqrt(r),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,t=this.attributes;if(e===null||t.position===void 0||t.normal===void 0||t.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const i=t.position,r=t.normal,s=t.uv;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new $n(new Float32Array(4*i.count),4));const o=this.getAttribute("tangent"),a=[],l=[];for(let P=0;P<i.count;P++)a[P]=new K,l[P]=new K;const c=new K,u=new K,f=new K,m=new Le,g=new Le,x=new Le,b=new K,w=new K;function v(P,M,A){c.fromBufferAttribute(i,P),u.fromBufferAttribute(i,M),f.fromBufferAttribute(i,A),m.fromBufferAttribute(s,P),g.fromBufferAttribute(s,M),x.fromBufferAttribute(s,A),u.sub(c),f.sub(c),g.sub(m),x.sub(m);const D=1/(g.x*x.y-x.x*g.y);isFinite(D)&&(b.copy(u).multiplyScalar(x.y).addScaledVector(f,-g.y).multiplyScalar(D),w.copy(f).multiplyScalar(g.x).addScaledVector(u,-x.x).multiplyScalar(D),a[P].add(b),a[M].add(b),a[A].add(b),l[P].add(w),l[M].add(w),l[A].add(w))}let S=this.groups;S.length===0&&(S=[{start:0,count:e.count}]);for(let P=0,M=S.length;P<M;++P){const A=S[P],D=A.start,B=A.count;for(let j=D,te=D+B;j<te;j+=3)v(e.getX(j+0),e.getX(j+1),e.getX(j+2))}const E=new K,I=new K,U=new K,O=new K;function C(P){U.fromBufferAttribute(r,P),O.copy(U);const M=a[P];E.copy(M),E.sub(U.multiplyScalar(U.dot(M))).normalize(),I.crossVectors(O,M);const D=I.dot(l[P])<0?-1:1;o.setXYZW(P,E.x,E.y,E.z,D)}for(let P=0,M=S.length;P<M;++P){const A=S[P],D=A.start,B=A.count;for(let j=D,te=D+B;j<te;j+=3)C(e.getX(j+0)),C(e.getX(j+1)),C(e.getX(j+2))}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(t!==void 0){let i=this.getAttribute("normal");if(i===void 0)i=new $n(new Float32Array(t.count*3),3),this.setAttribute("normal",i);else for(let m=0,g=i.count;m<g;m++)i.setXYZ(m,0,0,0);const r=new K,s=new K,o=new K,a=new K,l=new K,c=new K,u=new K,f=new K;if(e)for(let m=0,g=e.count;m<g;m+=3){const x=e.getX(m+0),b=e.getX(m+1),w=e.getX(m+2);r.fromBufferAttribute(t,x),s.fromBufferAttribute(t,b),o.fromBufferAttribute(t,w),u.subVectors(o,s),f.subVectors(r,s),u.cross(f),a.fromBufferAttribute(i,x),l.fromBufferAttribute(i,b),c.fromBufferAttribute(i,w),a.add(u),l.add(u),c.add(u),i.setXYZ(x,a.x,a.y,a.z),i.setXYZ(b,l.x,l.y,l.z),i.setXYZ(w,c.x,c.y,c.z)}else for(let m=0,g=t.count;m<g;m+=3)r.fromBufferAttribute(t,m+0),s.fromBufferAttribute(t,m+1),o.fromBufferAttribute(t,m+2),u.subVectors(o,s),f.subVectors(r,s),u.cross(f),i.setXYZ(m+0,u.x,u.y,u.z),i.setXYZ(m+1,u.x,u.y,u.z),i.setXYZ(m+2,u.x,u.y,u.z);this.normalizeNormals(),i.needsUpdate=!0}}normalizeNormals(){const e=this.attributes.normal;for(let t=0,i=e.count;t<i;t++)tr.fromBufferAttribute(e,t),tr.normalize(),e.setXYZ(t,tr.x,tr.y,tr.z)}toNonIndexed(){function e(a,l){const c=a.array,u=a.itemSize,f=a.normalized,m=new c.constructor(l.length*u);let g=0,x=0;for(let b=0,w=l.length;b<w;b++){a.isInterleavedBufferAttribute?g=l[b]*a.data.stride+a.offset:g=l[b]*u;for(let v=0;v<u;v++)m[x++]=c[g++]}return new $n(m,u,f)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new un,i=this.index.array,r=this.attributes;for(const a in r){const l=r[a],c=e(l,i);t.setAttribute(a,c)}const s=this.morphAttributes;for(const a in s){const l=[],c=s[a];for(let u=0,f=c.length;u<f;u++){const m=c[u],g=e(m,i);l.push(g)}t.morphAttributes[a]=l}t.morphTargetsRelative=this.morphTargetsRelative;const o=this.groups;for(let a=0,l=o.length;a<l;a++){const c=o[a];t.addGroup(c.start,c.count,c.materialIndex)}return t}toJSON(){const e={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const l=this.parameters;for(const c in l)l[c]!==void 0&&(e[c]=l[c]);return e}e.data={attributes:{}};const t=this.index;t!==null&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const i=this.attributes;for(const l in i){const c=i[l];e.data.attributes[l]=c.toJSON(e.data)}const r={};let s=!1;for(const l in this.morphAttributes){const c=this.morphAttributes[l],u=[];for(let f=0,m=c.length;f<m;f++){const g=c[f];u.push(g.toJSON(e.data))}u.length>0&&(r[l]=u,s=!0)}s&&(e.data.morphAttributes=r,e.data.morphTargetsRelative=this.morphTargetsRelative);const o=this.groups;o.length>0&&(e.data.groups=JSON.parse(JSON.stringify(o)));const a=this.boundingSphere;return a!==null&&(e.data.boundingSphere={center:a.center.toArray(),radius:a.radius}),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const i=e.index;i!==null&&this.setIndex(i.clone(t));const r=e.attributes;for(const c in r){const u=r[c];this.setAttribute(c,u.clone(t))}const s=e.morphAttributes;for(const c in s){const u=[],f=s[c];for(let m=0,g=f.length;m<g;m++)u.push(f[m].clone(t));this.morphAttributes[c]=u}this.morphTargetsRelative=e.morphTargetsRelative;const o=e.groups;for(let c=0,u=o.length;c<u;c++){const f=o[c];this.addGroup(f.start,f.count,f.materialIndex)}const a=e.boundingBox;a!==null&&(this.boundingBox=a.clone());const l=e.boundingSphere;return l!==null&&(this.boundingSphere=l.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const E2=new Vt,tu=new Pf,Rv=new Ur,C2=new K,Nv=new K,Dv=new K,Lv=new K,hT=new K,kv=new K,A2=new K,Ov=new K;class Vi extends Dn{constructor(e=new un,t=new Ic){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}updateMorphTargets(){const t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){const r=t[i[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=r.length;s<o;s++){const a=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}getVertexPosition(e,t){const i=this.geometry,r=i.attributes.position,s=i.morphAttributes.position,o=i.morphTargetsRelative;t.fromBufferAttribute(r,e);const a=this.morphTargetInfluences;if(s&&a){kv.set(0,0,0);for(let l=0,c=s.length;l<c;l++){const u=a[l],f=s[l];u!==0&&(hT.fromBufferAttribute(f,e),o?kv.addScaledVector(hT,u):kv.addScaledVector(hT.sub(t),u))}t.add(kv)}return t}raycast(e,t){const i=this.geometry,r=this.material,s=this.matrixWorld;r!==void 0&&(i.boundingSphere===null&&i.computeBoundingSphere(),Rv.copy(i.boundingSphere),Rv.applyMatrix4(s),tu.copy(e.ray).recast(e.near),!(Rv.containsPoint(tu.origin)===!1&&(tu.intersectSphere(Rv,C2)===null||tu.origin.distanceToSquared(C2)>(e.far-e.near)**2))&&(E2.copy(s).invert(),tu.copy(e.ray).applyMatrix4(E2),!(i.boundingBox!==null&&tu.intersectsBox(i.boundingBox)===!1)&&this._computeIntersections(e,t,tu)))}_computeIntersections(e,t,i){let r;const s=this.geometry,o=this.material,a=s.index,l=s.attributes.position,c=s.attributes.uv,u=s.attributes.uv1,f=s.attributes.normal,m=s.groups,g=s.drawRange;if(a!==null)if(Array.isArray(o))for(let x=0,b=m.length;x<b;x++){const w=m[x],v=o[w.materialIndex],S=Math.max(w.start,g.start),E=Math.min(a.count,Math.min(w.start+w.count,g.start+g.count));for(let I=S,U=E;I<U;I+=3){const O=a.getX(I),C=a.getX(I+1),P=a.getX(I+2);r=Uv(this,v,e,i,c,u,f,O,C,P),r&&(r.faceIndex=Math.floor(I/3),r.face.materialIndex=w.materialIndex,t.push(r))}}else{const x=Math.max(0,g.start),b=Math.min(a.count,g.start+g.count);for(let w=x,v=b;w<v;w+=3){const S=a.getX(w),E=a.getX(w+1),I=a.getX(w+2);r=Uv(this,o,e,i,c,u,f,S,E,I),r&&(r.faceIndex=Math.floor(w/3),t.push(r))}}else if(l!==void 0)if(Array.isArray(o))for(let x=0,b=m.length;x<b;x++){const w=m[x],v=o[w.materialIndex],S=Math.max(w.start,g.start),E=Math.min(l.count,Math.min(w.start+w.count,g.start+g.count));for(let I=S,U=E;I<U;I+=3){const O=I,C=I+1,P=I+2;r=Uv(this,v,e,i,c,u,f,O,C,P),r&&(r.faceIndex=Math.floor(I/3),r.face.materialIndex=w.materialIndex,t.push(r))}}else{const x=Math.max(0,g.start),b=Math.min(l.count,g.start+g.count);for(let w=x,v=b;w<v;w+=3){const S=w,E=w+1,I=w+2;r=Uv(this,o,e,i,c,u,f,S,E,I),r&&(r.faceIndex=Math.floor(w/3),t.push(r))}}}}function Hq(n,e,t,i,r,s,o,a){let l;if(e.side===Jr?l=i.intersectTriangle(o,s,r,!0,a):l=i.intersectTriangle(r,s,o,e.side===Ka,a),l===null)return null;Ov.copy(a),Ov.applyMatrix4(n.matrixWorld);const c=t.ray.origin.distanceTo(Ov);return c<t.near||c>t.far?null:{distance:c,point:Ov.clone(),object:n}}function Uv(n,e,t,i,r,s,o,a,l,c){n.getVertexPosition(a,Nv),n.getVertexPosition(l,Dv),n.getVertexPosition(c,Lv);const u=Hq(n,e,t,i,Nv,Dv,Lv,A2);if(u){const f=new K;fs.getBarycoord(A2,Nv,Dv,Lv,f),r&&(u.uv=fs.getInterpolatedAttribute(r,a,l,c,f,new Le)),s&&(u.uv1=fs.getInterpolatedAttribute(s,a,l,c,f,new Le)),o&&(u.normal=fs.getInterpolatedAttribute(o,a,l,c,f,new K),u.normal.dot(i.direction)>0&&u.normal.multiplyScalar(-1));const m={a,b:l,c,normal:new K,materialIndex:0};fs.getNormal(Nv,Dv,Lv,m.normal),u.face=m,u.barycoord=f}return u}class dh extends un{constructor(e=1,t=1,i=1,r=1,s=1,o=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:i,widthSegments:r,heightSegments:s,depthSegments:o};const a=this;r=Math.floor(r),s=Math.floor(s),o=Math.floor(o);const l=[],c=[],u=[],f=[];let m=0,g=0;x("z","y","x",-1,-1,i,t,e,o,s,0),x("z","y","x",1,-1,i,t,-e,o,s,1),x("x","z","y",1,1,e,i,t,r,o,2),x("x","z","y",1,-1,e,i,-t,r,o,3),x("x","y","z",1,-1,e,t,i,r,s,4),x("x","y","z",-1,-1,e,t,-i,r,s,5),this.setIndex(l),this.setAttribute("position",new At(c,3)),this.setAttribute("normal",new At(u,3)),this.setAttribute("uv",new At(f,2));function x(b,w,v,S,E,I,U,O,C,P,M){const A=I/C,D=U/P,B=I/2,j=U/2,te=O/2,ce=C+1,pe=P+1;let de=0,W=0;const Z=new K;for(let F=0;F<pe;F++){const J=F*D-j;for(let ue=0;ue<ce;ue++){const ye=ue*A-B;Z[b]=ye*S,Z[w]=J*E,Z[v]=te,c.push(Z.x,Z.y,Z.z),Z[b]=0,Z[w]=0,Z[v]=O>0?1:-1,u.push(Z.x,Z.y,Z.z),f.push(ue/C),f.push(1-F/P),de+=1}}for(let F=0;F<P;F++)for(let J=0;J<C;J++){const ue=m+J+ce*F,ye=m+J+ce*(F+1),le=m+(J+1)+ce*(F+1),xe=m+(J+1)+ce*F;l.push(ue,ye,xe),l.push(ye,le,xe),W+=6}a.addGroup(g,W,M),g+=W,m+=de}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new dh(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function uf(n){const e={};for(const t in n){e[t]={};for(const i in n[t]){const r=n[t][i];r&&(r.isColor||r.isMatrix3||r.isMatrix4||r.isVector2||r.isVector3||r.isVector4||r.isTexture||r.isQuaternion)?r.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),e[t][i]=null):e[t][i]=r.clone():Array.isArray(r)?e[t][i]=r.slice():e[t][i]=r}}return e}function $r(n){const e={};for(let t=0;t<n.length;t++){const i=uf(n[t]);for(const r in i)e[r]=i[r]}return e}function Gq(n){const e=[];for(let t=0;t<n.length;t++)e.push(n[t].clone());return e}function Fj(n){const e=n.getRenderTarget();return e===null?n.outputColorSpace:e.isXRRenderTarget===!0?e.texture.colorSpace:An.workingColorSpace}const jj={clone:uf,merge:$r};var Wq=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,qq=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class ko extends Br{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=Wq,this.fragmentShader=qq,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={clipCullDistance:!1,multiDraw:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=uf(e.uniforms),this.uniformsGroups=Gq(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const r in this.uniforms){const o=this.uniforms[r].value;o&&o.isTexture?t.uniforms[r]={type:"t",value:o.toJSON(e).uuid}:o&&o.isColor?t.uniforms[r]={type:"c",value:o.getHex()}:o&&o.isVector2?t.uniforms[r]={type:"v2",value:o.toArray()}:o&&o.isVector3?t.uniforms[r]={type:"v3",value:o.toArray()}:o&&o.isVector4?t.uniforms[r]={type:"v4",value:o.toArray()}:o&&o.isMatrix3?t.uniforms[r]={type:"m3",value:o.toArray()}:o&&o.isMatrix4?t.uniforms[r]={type:"m4",value:o.toArray()}:t.uniforms[r]={value:o}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader,t.lights=this.lights,t.clipping=this.clipping;const i={};for(const r in this.extensions)this.extensions[r]===!0&&(i[r]=!0);return Object.keys(i).length>0&&(t.extensions=i),t}}class $g extends Dn{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new Vt,this.projectionMatrix=new Vt,this.projectionMatrixInverse=new Vt,this.coordinateSystem=Io}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}getWorldDirection(e){return super.getWorldDirection(e).negate()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}const Sl=new K,M2=new Le,I2=new Le;class Ui extends $g{constructor(e=50,t=1,i=.1,r=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=i,this.far=r,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=cf*2*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(ju*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return cf*2*Math.atan(Math.tan(ju*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}getViewBounds(e,t,i){Sl.set(-1,-1,.5).applyMatrix4(this.projectionMatrixInverse),t.set(Sl.x,Sl.y).multiplyScalar(-e/Sl.z),Sl.set(1,1,.5).applyMatrix4(this.projectionMatrixInverse),i.set(Sl.x,Sl.y).multiplyScalar(-e/Sl.z)}getViewSize(e,t){return this.getViewBounds(e,M2,I2),t.subVectors(I2,M2)}setViewOffset(e,t,i,r,s,o){this.aspect=e/t,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=r,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(ju*.5*this.fov)/this.zoom,i=2*t,r=this.aspect*i,s=-.5*r;const o=this.view;if(this.view!==null&&this.view.enabled){const l=o.fullWidth,c=o.fullHeight;s+=o.offsetX*r/l,t-=o.offsetY*i/c,r*=o.width/l,i*=o.height/c}const a=this.filmOffset;a!==0&&(s+=e*a/this.getFilmWidth()),this.projectionMatrix.makePerspective(s,s+r,t,t-i,e,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,this.view!==null&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}const Qh=-90,Zh=1;class jA extends Dn{constructor(e,t,i){super(),this.type="CubeCamera",this.renderTarget=i,this.coordinateSystem=null,this.activeMipmapLevel=0;const r=new Ui(Qh,Zh,e,t);r.layers=this.layers,this.add(r);const s=new Ui(Qh,Zh,e,t);s.layers=this.layers,this.add(s);const o=new Ui(Qh,Zh,e,t);o.layers=this.layers,this.add(o);const a=new Ui(Qh,Zh,e,t);a.layers=this.layers,this.add(a);const l=new Ui(Qh,Zh,e,t);l.layers=this.layers,this.add(l);const c=new Ui(Qh,Zh,e,t);c.layers=this.layers,this.add(c)}updateCoordinateSystem(){const e=this.coordinateSystem,t=this.children.concat(),[i,r,s,o,a,l]=t;for(const c of t)this.remove(c);if(e===Io)i.up.set(0,1,0),i.lookAt(1,0,0),r.up.set(0,1,0),r.lookAt(-1,0,0),s.up.set(0,0,-1),s.lookAt(0,1,0),o.up.set(0,0,1),o.lookAt(0,-1,0),a.up.set(0,1,0),a.lookAt(0,0,1),l.up.set(0,1,0),l.lookAt(0,0,-1);else if(e===ug)i.up.set(0,-1,0),i.lookAt(-1,0,0),r.up.set(0,-1,0),r.lookAt(1,0,0),s.up.set(0,0,1),s.lookAt(0,1,0),o.up.set(0,0,-1),o.lookAt(0,-1,0),a.up.set(0,-1,0),a.lookAt(0,0,1),l.up.set(0,-1,0),l.lookAt(0,0,-1);else throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+e);for(const c of t)this.add(c),c.updateMatrixWorld()}update(e,t){this.parent===null&&this.updateMatrixWorld();const{renderTarget:i,activeMipmapLevel:r}=this;this.coordinateSystem!==e.coordinateSystem&&(this.coordinateSystem=e.coordinateSystem,this.updateCoordinateSystem());const[s,o,a,l,c,u]=this.children,f=e.getRenderTarget(),m=e.getActiveCubeFace(),g=e.getActiveMipmapLevel(),x=e.xr.enabled;e.xr.enabled=!1;const b=i.texture.generateMipmaps;i.texture.generateMipmaps=!1,e.setRenderTarget(i,0,r),e.render(t,s),e.setRenderTarget(i,1,r),e.render(t,o),e.setRenderTarget(i,2,r),e.render(t,a),e.setRenderTarget(i,3,r),e.render(t,l),e.setRenderTarget(i,4,r),e.render(t,c),i.texture.generateMipmaps=b,e.setRenderTarget(i,5,r),e.render(t,u),e.setRenderTarget(f,m,g),e.xr.enabled=x,i.texture.needsPMREMUpdate=!0}}class Xg extends _i{constructor(e,t,i,r,s,o,a,l,c,u){e=e!==void 0?e:[],t=t!==void 0?t:Ya,super(e,t,i,r,s,o,a,l,c,u),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class VA extends ua{constructor(e=1,t={}){super(e,e,t),this.isWebGLCubeRenderTarget=!0;const i={width:e,height:e,depth:1},r=[i,i,i,i,i,i];this.texture=new Xg(r,t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=t.generateMipmaps!==void 0?t.generateMipmaps:!1,this.texture.minFilter=t.minFilter!==void 0?t.minFilter:Xi}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.colorSpace=t.colorSpace,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const i={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},r=new dh(5,5,5),s=new ko({name:"CubemapFromEquirect",uniforms:uf(i.uniforms),vertexShader:i.vertexShader,fragmentShader:i.fragmentShader,side:Jr,blending:ja});s.uniforms.tEquirect.value=t;const o=new Vi(r,s),a=t.minFilter;return t.minFilter===Yo&&(t.minFilter=Xi),new jA(1,10,this).update(e,o),t.minFilter=a,o.geometry.dispose(),o.material.dispose(),this}clear(e,t,i,r){const s=e.getRenderTarget();for(let o=0;o<6;o++)e.setRenderTarget(this,o),e.clear(t,i,r);e.setRenderTarget(s)}}class Pd extends Dn{constructor(){super(),this.isGroup=!0,this.type="Group"}}const $q={type:"move"};class zx{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new Pd,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new Pd,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new K,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new K),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new Pd,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new K,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new K),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const t=this._hand;if(t)for(const i of e.hand.values())this._getHandJoint(t,i)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,t,i){let r=null,s=null,o=null;const a=this._targetRay,l=this._grip,c=this._hand;if(e&&t.session.visibilityState!=="visible-blurred"){if(c&&e.hand){o=!0;for(const b of e.hand.values()){const w=t.getJointPose(b,i),v=this._getHandJoint(c,b);w!==null&&(v.matrix.fromArray(w.transform.matrix),v.matrix.decompose(v.position,v.rotation,v.scale),v.matrixWorldNeedsUpdate=!0,v.jointRadius=w.radius),v.visible=w!==null}const u=c.joints["index-finger-tip"],f=c.joints["thumb-tip"],m=u.position.distanceTo(f.position),g=.02,x=.005;c.inputState.pinching&&m>g+x?(c.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!c.inputState.pinching&&m<=g-x&&(c.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else l!==null&&e.gripSpace&&(s=t.getPose(e.gripSpace,i),s!==null&&(l.matrix.fromArray(s.transform.matrix),l.matrix.decompose(l.position,l.rotation,l.scale),l.matrixWorldNeedsUpdate=!0,s.linearVelocity?(l.hasLinearVelocity=!0,l.linearVelocity.copy(s.linearVelocity)):l.hasLinearVelocity=!1,s.angularVelocity?(l.hasAngularVelocity=!0,l.angularVelocity.copy(s.angularVelocity)):l.hasAngularVelocity=!1));a!==null&&(r=t.getPose(e.targetRaySpace,i),r===null&&s!==null&&(r=s),r!==null&&(a.matrix.fromArray(r.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale),a.matrixWorldNeedsUpdate=!0,r.linearVelocity?(a.hasLinearVelocity=!0,a.linearVelocity.copy(r.linearVelocity)):a.hasLinearVelocity=!1,r.angularVelocity?(a.hasAngularVelocity=!0,a.angularVelocity.copy(r.angularVelocity)):a.hasAngularVelocity=!1,this.dispatchEvent($q)))}return a!==null&&(a.visible=r!==null),l!==null&&(l.visible=s!==null),c!==null&&(c.visible=o!==null),this}_getHandJoint(e,t){if(e.joints[t.jointName]===void 0){const i=new Pd;i.matrixAutoUpdate=!1,i.visible=!1,e.joints[t.jointName]=i,e.add(i)}return e.joints[t.jointName]}}class Tw{constructor(e,t=25e-5){this.isFogExp2=!0,this.name="",this.color=new xt(e),this.density=t}clone(){return new Tw(this.color,this.density)}toJSON(){return{type:"FogExp2",name:this.name,color:this.color.getHex(),density:this.density}}}class Ew{constructor(e,t=1,i=1e3){this.isFog=!0,this.name="",this.color=new xt(e),this.near=t,this.far=i}clone(){return new Ew(this.color,this.near,this.far)}toJSON(){return{type:"Fog",name:this.name,color:this.color.getHex(),near:this.near,far:this.far}}}class BA extends Dn{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.backgroundRotation=new zs,this.environmentIntensity=1,this.environmentRotation=new zs,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,this.backgroundRotation.copy(e.backgroundRotation),this.environmentIntensity=e.environmentIntensity,this.environmentRotation.copy(e.environmentRotation),e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return this.fog!==null&&(t.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(t.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(t.object.backgroundIntensity=this.backgroundIntensity),t.object.backgroundRotation=this.backgroundRotation.toArray(),this.environmentIntensity!==1&&(t.object.environmentIntensity=this.environmentIntensity),t.object.environmentRotation=this.environmentRotation.toArray(),t}}class Cw{constructor(e,t){this.isInterleavedBuffer=!0,this.array=e,this.stride=t,this.count=e!==void 0?e.length/t:0,this.usage=cg,this.updateRanges=[],this.version=0,this.uuid=Fs()}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,i){e*=this.stride,i*=t.stride;for(let r=0,s=this.stride;r<s;r++)this.array[e+r]=t.array[i+r];return this}set(e,t=0){return this.array.set(e,t),this}clone(e){e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Fs()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),i=new this.constructor(t,this.stride);return i.setUsage(this.usage),i}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=Fs()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const qr=new K;class th{constructor(e,t,i,r=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=t,this.offset=i,this.normalized=r}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,i=this.data.count;t<i;t++)qr.fromBufferAttribute(this,t),qr.applyMatrix4(e),this.setXYZ(t,qr.x,qr.y,qr.z);return this}applyNormalMatrix(e){for(let t=0,i=this.count;t<i;t++)qr.fromBufferAttribute(this,t),qr.applyNormalMatrix(e),this.setXYZ(t,qr.x,qr.y,qr.z);return this}transformDirection(e){for(let t=0,i=this.count;t<i;t++)qr.fromBufferAttribute(this,t),qr.transformDirection(e),this.setXYZ(t,qr.x,qr.y,qr.z);return this}getComponent(e,t){let i=this.array[e*this.data.stride+this.offset+t];return this.normalized&&(i=Kr(i,this.array)),i}setComponent(e,t,i){return this.normalized&&(i=on(i,this.array)),this.data.array[e*this.data.stride+this.offset+t]=i,this}setX(e,t){return this.normalized&&(t=on(t,this.array)),this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.normalized&&(t=on(t,this.array)),this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.normalized&&(t=on(t,this.array)),this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.normalized&&(t=on(t,this.array)),this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){let t=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(t=Kr(t,this.array)),t}getY(e){let t=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(t=Kr(t,this.array)),t}getZ(e){let t=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(t=Kr(t,this.array)),t}getW(e){let t=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(t=Kr(t,this.array)),t}setXY(e,t,i){return e=e*this.data.stride+this.offset,this.normalized&&(t=on(t,this.array),i=on(i,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this}setXYZ(e,t,i,r){return e=e*this.data.stride+this.offset,this.normalized&&(t=on(t,this.array),i=on(i,this.array),r=on(r,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this.data.array[e+2]=r,this}setXYZW(e,t,i,r,s){return e=e*this.data.stride+this.offset,this.normalized&&(t=on(t,this.array),i=on(i,this.array),r=on(r,this.array),s=on(s,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this.data.array[e+2]=r,this.data.array[e+3]=s,this}clone(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let i=0;i<this.count;i++){const r=i*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)t.push(this.data.array[r+s])}return new $n(new this.array.constructor(t),this.itemSize,this.normalized)}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new th(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let i=0;i<this.count;i++){const r=i*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)t.push(this.data.array[r+s])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}class zA extends Br{constructor(e){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new xt(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}let ed;const Ip=new K,td=new K,nd=new K,id=new Le,Pp=new Le,Vj=new Vt,Fv=new K,Rp=new K,jv=new K,P2=new Le,dT=new Le,R2=new Le;class Bj extends Dn{constructor(e=new zA){if(super(),this.isSprite=!0,this.type="Sprite",ed===void 0){ed=new un;const t=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),i=new Cw(t,5);ed.setIndex([0,1,2,0,2,3]),ed.setAttribute("position",new th(i,3,0,!1)),ed.setAttribute("uv",new th(i,2,3,!1))}this.geometry=ed,this.material=e,this.center=new Le(.5,.5)}raycast(e,t){e.camera===null&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),td.setFromMatrixScale(this.matrixWorld),Vj.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),nd.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&td.multiplyScalar(-nd.z);const i=this.material.rotation;let r,s;i!==0&&(s=Math.cos(i),r=Math.sin(i));const o=this.center;Vv(Fv.set(-.5,-.5,0),nd,o,td,r,s),Vv(Rp.set(.5,-.5,0),nd,o,td,r,s),Vv(jv.set(.5,.5,0),nd,o,td,r,s),P2.set(0,0),dT.set(1,0),R2.set(1,1);let a=e.ray.intersectTriangle(Fv,Rp,jv,!1,Ip);if(a===null&&(Vv(Rp.set(-.5,.5,0),nd,o,td,r,s),dT.set(0,1),a=e.ray.intersectTriangle(Fv,jv,Rp,!1,Ip),a===null))return;const l=e.ray.origin.distanceTo(Ip);l<e.near||l>e.far||t.push({distance:l,point:Ip.clone(),uv:fs.getInterpolation(Ip,Fv,Rp,jv,P2,dT,R2,new Le),face:null,object:this})}copy(e,t){return super.copy(e,t),e.center!==void 0&&this.center.copy(e.center),this.material=e.material,this}}function Vv(n,e,t,i,r,s){id.subVectors(n,t).addScalar(.5).multiply(i),r!==void 0?(Pp.x=s*id.x-r*id.y,Pp.y=r*id.x+s*id.y):Pp.copy(id),n.copy(e),n.x+=Pp.x,n.y+=Pp.y,n.applyMatrix4(Vj)}const Bv=new K,N2=new K;class zj extends Dn{constructor(){super(),this.isLOD=!0,this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]}}),this.autoUpdate=!0}copy(e){super.copy(e,!1);const t=e.levels;for(let i=0,r=t.length;i<r;i++){const s=t[i];this.addLevel(s.object.clone(),s.distance,s.hysteresis)}return this.autoUpdate=e.autoUpdate,this}addLevel(e,t=0,i=0){t=Math.abs(t);const r=this.levels;let s;for(s=0;s<r.length&&!(t<r[s].distance);s++);return r.splice(s,0,{distance:t,hysteresis:i,object:e}),this.add(e),this}removeLevel(e){const t=this.levels;for(let i=0;i<t.length;i++)if(t[i].distance===e){const r=t.splice(i,1);return this.remove(r[0].object),!0}return!1}getCurrentLevel(){return this._currentLevel}getObjectForDistance(e){const t=this.levels;if(t.length>0){let i,r;for(i=1,r=t.length;i<r;i++){let s=t[i].distance;if(t[i].object.visible&&(s-=s*t[i].hysteresis),e<s)break}return t[i-1].object}return null}raycast(e,t){if(this.levels.length>0){Bv.setFromMatrixPosition(this.matrixWorld);const r=e.ray.origin.distanceTo(Bv);this.getObjectForDistance(r).raycast(e,t)}}update(e){const t=this.levels;if(t.length>1){Bv.setFromMatrixPosition(e.matrixWorld),N2.setFromMatrixPosition(this.matrixWorld);const i=Bv.distanceTo(N2)/e.zoom;t[0].object.visible=!0;let r,s;for(r=1,s=t.length;r<s;r++){let o=t[r].distance;if(t[r].object.visible&&(o-=o*t[r].hysteresis),i>=o)t[r-1].object.visible=!1,t[r].object.visible=!0;else break}for(this._currentLevel=r-1;r<s;r++)t[r].object.visible=!1}}toJSON(e){const t=super.toJSON(e);this.autoUpdate===!1&&(t.object.autoUpdate=!1),t.object.levels=[];const i=this.levels;for(let r=0,s=i.length;r<s;r++){const o=i[r];t.object.levels.push({object:o.object.uuid,distance:o.distance,hysteresis:o.hysteresis})}return t}}const D2=new K,L2=new Rn,k2=new Rn,Xq=new K,O2=new Vt,zv=new K,fT=new Ur,U2=new Vt,pT=new Pf;class Hj extends Vi{constructor(e,t){super(e,t),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode=d1,this.bindMatrix=new Vt,this.bindMatrixInverse=new Vt,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){const e=this.geometry;this.boundingBox===null&&(this.boundingBox=new Qr),this.boundingBox.makeEmpty();const t=e.getAttribute("position");for(let i=0;i<t.count;i++)this.getVertexPosition(i,zv),this.boundingBox.expandByPoint(zv)}computeBoundingSphere(){const e=this.geometry;this.boundingSphere===null&&(this.boundingSphere=new Ur),this.boundingSphere.makeEmpty();const t=e.getAttribute("position");for(let i=0;i<t.count;i++)this.getVertexPosition(i,zv),this.boundingSphere.expandByPoint(zv)}copy(e,t){return super.copy(e,t),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}raycast(e,t){const i=this.material,r=this.matrixWorld;i!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),fT.copy(this.boundingSphere),fT.applyMatrix4(r),e.ray.intersectsSphere(fT)!==!1&&(U2.copy(r).invert(),pT.copy(e.ray).applyMatrix4(U2),!(this.boundingBox!==null&&pT.intersectsBox(this.boundingBox)===!1)&&this._computeIntersections(e,t,pT)))}getVertexPosition(e,t){return super.getVertexPosition(e,t),this.applyBoneTransform(e,t),t}bind(e,t){this.skeleton=e,t===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new Rn,t=this.geometry.attributes.skinWeight;for(let i=0,r=t.count;i<r;i++){e.fromBufferAttribute(t,i);const s=1/e.manhattanLength();s!==1/0?e.multiplyScalar(s):e.set(1,0,0,0),t.setXYZW(i,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode===d1?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode===_j?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}applyBoneTransform(e,t){const i=this.skeleton,r=this.geometry;L2.fromBufferAttribute(r.attributes.skinIndex,e),k2.fromBufferAttribute(r.attributes.skinWeight,e),D2.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let s=0;s<4;s++){const o=k2.getComponent(s);if(o!==0){const a=L2.getComponent(s);O2.multiplyMatrices(i.bones[a].matrixWorld,i.boneInverses[a]),t.addScaledVector(Xq.copy(D2).applyMatrix4(O2),o)}}return t.applyMatrix4(this.bindMatrixInverse)}}class HA extends Dn{constructor(){super(),this.isBone=!0,this.type="Bone"}}class na extends _i{constructor(e=null,t=1,i=1,r,s,o,a,l,c=mr,u=mr,f,m){super(null,o,a,l,c,u,r,s,f,m),this.isDataTexture=!0,this.image={data:e,width:t,height:i},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const F2=new Vt,Kq=new Vt;class Aw{constructor(e=[],t=[]){this.uuid=Fs(),this.bones=e.slice(0),this.boneInverses=t,this.boneMatrices=null,this.boneTexture=null,this.init()}init(){const e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(e.length*16),t.length===0)this.calculateInverses();else if(e.length!==t.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let i=0,r=this.bones.length;i<r;i++)this.boneInverses.push(new Vt)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,t=this.bones.length;e<t;e++){const i=new Vt;this.bones[e]&&i.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(i)}}pose(){for(let e=0,t=this.bones.length;e<t;e++){const i=this.bones[e];i&&i.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,t=this.bones.length;e<t;e++){const i=this.bones[e];i&&(i.parent&&i.parent.isBone?(i.matrix.copy(i.parent.matrixWorld).invert(),i.matrix.multiply(i.matrixWorld)):i.matrix.copy(i.matrixWorld),i.matrix.decompose(i.position,i.quaternion,i.scale))}}update(){const e=this.bones,t=this.boneInverses,i=this.boneMatrices,r=this.boneTexture;for(let s=0,o=e.length;s<o;s++){const a=e[s]?e[s].matrixWorld:Kq;F2.multiplyMatrices(a,t[s]),F2.toArray(i,s*16)}r!==null&&(r.needsUpdate=!0)}clone(){return new Aw(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(this.bones.length*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);const t=new Float32Array(e*e*4);t.set(this.boneMatrices);const i=new na(t,e,e,Lr,gs);return i.needsUpdate=!0,this.boneMatrices=t,this.boneTexture=i,this}getBoneByName(e){for(let t=0,i=this.bones.length;t<i;t++){const r=this.bones[t];if(r.name===e)return r}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,t){this.uuid=e.uuid;for(let i=0,r=e.bones.length;i<r;i++){const s=e.bones[i];let o=t[s];o===void 0&&(console.warn("THREE.Skeleton: No bone found with UUID:",s),o=new HA),this.bones.push(o),this.boneInverses.push(new Vt().fromArray(e.boneInverses[i]))}return this.init(),this}toJSON(){const e={metadata:{version:4.6,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const t=this.bones,i=this.boneInverses;for(let r=0,s=t.length;r<s;r++){const o=t[r];e.bones.push(o.uuid);const a=i[r];e.boneInverses.push(a.toArray())}return e}}class hf extends $n{constructor(e,t,i,r=1){super(e,t,i),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=r}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}const rd=new Vt,j2=new Vt,Hv=[],V2=new Qr,Yq=new Vt,Np=new Vi,Dp=new Ur;class Gj extends Vi{constructor(e,t,i){super(e,t),this.isInstancedMesh=!0,this.instanceMatrix=new hf(new Float32Array(i*16),16),this.instanceColor=null,this.morphTexture=null,this.count=i,this.boundingBox=null,this.boundingSphere=null;for(let r=0;r<i;r++)this.setMatrixAt(r,Yq)}computeBoundingBox(){const e=this.geometry,t=this.count;this.boundingBox===null&&(this.boundingBox=new Qr),e.boundingBox===null&&e.computeBoundingBox(),this.boundingBox.makeEmpty();for(let i=0;i<t;i++)this.getMatrixAt(i,rd),V2.copy(e.boundingBox).applyMatrix4(rd),this.boundingBox.union(V2)}computeBoundingSphere(){const e=this.geometry,t=this.count;this.boundingSphere===null&&(this.boundingSphere=new Ur),e.boundingSphere===null&&e.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(let i=0;i<t;i++)this.getMatrixAt(i,rd),Dp.copy(e.boundingSphere).applyMatrix4(rd),this.boundingSphere.union(Dp)}copy(e,t){return super.copy(e,t),this.instanceMatrix.copy(e.instanceMatrix),e.morphTexture!==null&&(this.morphTexture=e.morphTexture.clone()),e.instanceColor!==null&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}getColorAt(e,t){t.fromArray(this.instanceColor.array,e*3)}getMatrixAt(e,t){t.fromArray(this.instanceMatrix.array,e*16)}getMorphAt(e,t){const i=t.morphTargetInfluences,r=this.morphTexture.source.data.data,s=i.length+1,o=e*s+1;for(let a=0;a<i.length;a++)i[a]=r[o+a]}raycast(e,t){const i=this.matrixWorld,r=this.count;if(Np.geometry=this.geometry,Np.material=this.material,Np.material!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),Dp.copy(this.boundingSphere),Dp.applyMatrix4(i),e.ray.intersectsSphere(Dp)!==!1))for(let s=0;s<r;s++){this.getMatrixAt(s,rd),j2.multiplyMatrices(i,rd),Np.matrixWorld=j2,Np.raycast(e,Hv);for(let o=0,a=Hv.length;o<a;o++){const l=Hv[o];l.instanceId=s,l.object=this,t.push(l)}Hv.length=0}}setColorAt(e,t){this.instanceColor===null&&(this.instanceColor=new hf(new Float32Array(this.instanceMatrix.count*3).fill(1),3)),t.toArray(this.instanceColor.array,e*3)}setMatrixAt(e,t){t.toArray(this.instanceMatrix.array,e*16)}setMorphAt(e,t){const i=t.morphTargetInfluences,r=i.length+1;this.morphTexture===null&&(this.morphTexture=new na(new Float32Array(r*this.count),r,this.count,vw,gs));const s=this.morphTexture.source.data.data;let o=0;for(let c=0;c<i.length;c++)o+=i[c];const a=this.geometry.morphTargetsRelative?1:1-o,l=r*e;s[l]=a,s.set(i,l+1)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"}),this.morphTexture!==null&&(this.morphTexture.dispose(),this.morphTexture=null)}}const mT=new K,Jq=new K,Qq=new sn;class Dl{constructor(e=new K(1,0,0),t=0){this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,i,r){return this.normal.set(e,t,i),this.constant=r,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,i){const r=mT.subVectors(i,t).cross(Jq.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(r,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,t){const i=e.delta(mT),r=this.normal.dot(i);if(r===0)return this.distanceToPoint(e.start)===0?t.copy(e.start):null;const s=-(e.start.dot(this.normal)+this.constant)/r;return s<0||s>1?null:t.copy(e.start).addScaledVector(i,s)}intersectsLine(e){const t=this.distanceToPoint(e.start),i=this.distanceToPoint(e.end);return t<0&&i>0||i<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const i=t||Qq.getNormalMatrix(e),r=this.coplanarPoint(mT).applyMatrix4(e),s=this.normal.applyMatrix3(i).normalize();return this.constant=-r.dot(s),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}}const nu=new Ur,Gv=new K;class Kg{constructor(e=new Dl,t=new Dl,i=new Dl,r=new Dl,s=new Dl,o=new Dl){this.planes=[e,t,i,r,s,o]}set(e,t,i,r,s,o){const a=this.planes;return a[0].copy(e),a[1].copy(t),a[2].copy(i),a[3].copy(r),a[4].copy(s),a[5].copy(o),this}copy(e){const t=this.planes;for(let i=0;i<6;i++)t[i].copy(e.planes[i]);return this}setFromProjectionMatrix(e,t=Io){const i=this.planes,r=e.elements,s=r[0],o=r[1],a=r[2],l=r[3],c=r[4],u=r[5],f=r[6],m=r[7],g=r[8],x=r[9],b=r[10],w=r[11],v=r[12],S=r[13],E=r[14],I=r[15];if(i[0].setComponents(l-s,m-c,w-g,I-v).normalize(),i[1].setComponents(l+s,m+c,w+g,I+v).normalize(),i[2].setComponents(l+o,m+u,w+x,I+S).normalize(),i[3].setComponents(l-o,m-u,w-x,I-S).normalize(),i[4].setComponents(l-a,m-f,w-b,I-E).normalize(),t===Io)i[5].setComponents(l+a,m+f,w+b,I+E).normalize();else if(t===ug)i[5].setComponents(a,f,b,E).normalize();else throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+t);return this}intersectsObject(e){if(e.boundingSphere!==void 0)e.boundingSphere===null&&e.computeBoundingSphere(),nu.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{const t=e.geometry;t.boundingSphere===null&&t.computeBoundingSphere(),nu.copy(t.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(nu)}intersectsSprite(e){return nu.center.set(0,0,0),nu.radius=.7071067811865476,nu.applyMatrix4(e.matrixWorld),this.intersectsSphere(nu)}intersectsSphere(e){const t=this.planes,i=e.center,r=-e.radius;for(let s=0;s<6;s++)if(t[s].distanceToPoint(i)<r)return!1;return!0}intersectsBox(e){const t=this.planes;for(let i=0;i<6;i++){const r=t[i];if(Gv.x=r.normal.x>0?e.max.x:e.min.x,Gv.y=r.normal.y>0?e.max.y:e.min.y,Gv.z=r.normal.z>0?e.max.z:e.min.z,r.distanceToPoint(Gv)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let i=0;i<6;i++)if(t[i].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}function gT(n,e){return n-e}function Zq(n,e){return n.z-e.z}function e$(n,e){return e.z-n.z}class t${constructor(){this.index=0,this.pool=[],this.list=[]}push(e,t,i,r){const s=this.pool,o=this.list;this.index>=s.length&&s.push({start:-1,count:-1,z:-1,index:-1});const a=s[this.index];o.push(a),this.index++,a.start=e,a.count=t,a.z=i,a.index=r}reset(){this.list.length=0,this.index=0}}const os=new Vt,n$=new xt(1,1,1),yT=new Kg,Wv=new Qr,iu=new Ur,Lp=new K,B2=new K,i$=new K,vT=new t$,Mr=new Vi,qv=[];function r$(n,e,t=0){const i=e.itemSize;if(n.isInterleavedBufferAttribute||n.array.constructor!==e.array.constructor){const r=n.count;for(let s=0;s<r;s++)for(let o=0;o<i;o++)e.setComponent(s+t,o,n.getComponent(s,o))}else e.array.set(n.array,t*i);e.needsUpdate=!0}function ru(n,e){if(n.constructor!==e.constructor){const t=Math.min(n.length,e.length);for(let i=0;i<t;i++)e[i]=n[i]}else{const t=Math.min(n.length,e.length);e.set(new n.constructor(n.buffer,0,t))}}class Wj extends Vi{constructor(e,t,i=t*2,r){super(new un,r),this.isBatchedMesh=!0,this.perObjectFrustumCulled=!0,this.sortObjects=!0,this.boundingBox=null,this.boundingSphere=null,this.customSort=null,this._instanceInfo=[],this._geometryInfo=[],this._availableInstanceIds=[],this._availableGeometryIds=[],this._nextIndexStart=0,this._nextVertexStart=0,this._geometryCount=0,this._visibilityChanged=!0,this._geometryInitialized=!1,this._maxInstanceCount=e,this._maxVertexCount=t,this._maxIndexCount=i,this._multiDrawCounts=new Int32Array(e),this._multiDrawStarts=new Int32Array(e),this._multiDrawCount=0,this._multiDrawInstances=null,this._matricesTexture=null,this._indirectTexture=null,this._colorsTexture=null,this._initMatricesTexture(),this._initIndirectTexture()}get maxInstanceCount(){return this._maxInstanceCount}get instanceCount(){return this._instanceInfo.length-this._availableInstanceIds.length}get unusedVertexCount(){return this._maxVertexCount-this._nextVertexStart}get unusedIndexCount(){return this._maxIndexCount-this._nextIndexStart}_initMatricesTexture(){let e=Math.sqrt(this._maxInstanceCount*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);const t=new Float32Array(e*e*4),i=new na(t,e,e,Lr,gs);this._matricesTexture=i}_initIndirectTexture(){let e=Math.sqrt(this._maxInstanceCount);e=Math.ceil(e);const t=new Uint32Array(e*e),i=new na(t,e,e,Wg,Ja);this._indirectTexture=i}_initColorsTexture(){let e=Math.sqrt(this._maxInstanceCount);e=Math.ceil(e);const t=new Float32Array(e*e*4).fill(1),i=new na(t,e,e,Lr,gs);i.colorSpace=An.workingColorSpace,this._colorsTexture=i}_initializeGeometry(e){const t=this.geometry,i=this._maxVertexCount,r=this._maxIndexCount;if(this._geometryInitialized===!1){for(const s in e.attributes){const o=e.getAttribute(s),{array:a,itemSize:l,normalized:c}=o,u=new a.constructor(i*l),f=new $n(u,l,c);t.setAttribute(s,f)}if(e.getIndex()!==null){const s=i>65535?new Uint32Array(r):new Uint16Array(r);t.setIndex(new $n(s,1))}this._geometryInitialized=!0}}_validateGeometry(e){const t=this.geometry;if(!!e.getIndex()!=!!t.getIndex())throw new Error('THREE.BatchedMesh: All geometries must consistently have "index".');for(const i in t.attributes){if(!e.hasAttribute(i))throw new Error(`THREE.BatchedMesh: Added geometry missing "${i}". All geometries must have consistent attributes.`);const r=e.getAttribute(i),s=t.getAttribute(i);if(r.itemSize!==s.itemSize||r.normalized!==s.normalized)throw new Error("THREE.BatchedMesh: All attributes must have a consistent itemSize and normalized value.")}}validateInstanceId(e){const t=this._instanceInfo;if(e<0||e>=t.length||t[e].active===!1)throw new Error(`THREE.BatchedMesh: Invalid instanceId ${e}. Instance is either out of range or has been deleted.`)}validateGeometryId(e){const t=this._geometryInfo;if(e<0||e>=t.length||t[e].active===!1)throw new Error(`THREE.BatchedMesh: Invalid geometryId ${e}. Geometry is either out of range or has been deleted.`)}setCustomSort(e){return this.customSort=e,this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Qr);const e=this.boundingBox,t=this._instanceInfo;e.makeEmpty();for(let i=0,r=t.length;i<r;i++){if(t[i].active===!1)continue;const s=t[i].geometryIndex;this.getMatrixAt(i,os),this.getBoundingBoxAt(s,Wv).applyMatrix4(os),e.union(Wv)}}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new Ur);const e=this.boundingSphere,t=this._instanceInfo;e.makeEmpty();for(let i=0,r=t.length;i<r;i++){if(t[i].active===!1)continue;const s=t[i].geometryIndex;this.getMatrixAt(i,os),this.getBoundingSphereAt(s,iu).applyMatrix4(os),e.union(iu)}}addInstance(e){if(this._instanceInfo.length>=this.maxInstanceCount&&this._availableInstanceIds.length===0)throw new Error("THREE.BatchedMesh: Maximum item count reached.");const i={visible:!0,active:!0,geometryIndex:e};let r=null;this._availableInstanceIds.length>0?(this._availableInstanceIds.sort(gT),r=this._availableInstanceIds.shift(),this._instanceInfo[r]=i):(r=this._instanceInfo.length,this._instanceInfo.push(i));const s=this._matricesTexture;os.identity().toArray(s.image.data,r*16),s.needsUpdate=!0;const o=this._colorsTexture;return o&&(n$.toArray(o.image.data,r*4),o.needsUpdate=!0),this._visibilityChanged=!0,r}addGeometry(e,t=-1,i=-1){this._initializeGeometry(e),this._validateGeometry(e);const r={vertexStart:-1,vertexCount:-1,reservedVertexCount:-1,indexStart:-1,indexCount:-1,reservedIndexCount:-1,start:-1,count:-1,boundingBox:null,boundingSphere:null,active:!0},s=this._geometryInfo;r.vertexStart=this._nextVertexStart,r.reservedVertexCount=t===-1?e.getAttribute("position").count:t;const o=e.getIndex();if(o!==null&&(r.indexStart=this._nextIndexStart,r.reservedIndexCount=i===-1?o.count:i),r.indexStart!==-1&&r.indexStart+r.reservedIndexCount>this._maxIndexCount||r.vertexStart+r.reservedVertexCount>this._maxVertexCount)throw new Error("THREE.BatchedMesh: Reserved space request exceeds the maximum buffer size.");let l;return this._availableGeometryIds.length>0?(this._availableGeometryIds.sort(gT),l=this._availableGeometryIds.shift(),s[l]=r):(l=this._geometryCount,this._geometryCount++,s.push(r)),this.setGeometryAt(l,e),this._nextIndexStart=r.indexStart+r.reservedIndexCount,this._nextVertexStart=r.vertexStart+r.reservedVertexCount,l}setGeometryAt(e,t){if(e>=this._geometryCount)throw new Error("THREE.BatchedMesh: Maximum geometry count reached.");this._validateGeometry(t);const i=this.geometry,r=i.getIndex()!==null,s=i.getIndex(),o=t.getIndex(),a=this._geometryInfo[e];if(r&&o.count>a.reservedIndexCount||t.attributes.position.count>a.reservedVertexCount)throw new Error("THREE.BatchedMesh: Reserved space not large enough for provided geometry.");const l=a.vertexStart,c=a.reservedVertexCount;a.vertexCount=t.getAttribute("position").count;for(const u in i.attributes){const f=t.getAttribute(u),m=i.getAttribute(u);r$(f,m,l);const g=f.itemSize;for(let x=f.count,b=c;x<b;x++){const w=l+x;for(let v=0;v<g;v++)m.setComponent(w,v,0)}m.needsUpdate=!0,m.addUpdateRange(l*g,c*g)}if(r){const u=a.indexStart,f=a.reservedIndexCount;a.indexCount=t.getIndex().count;for(let m=0;m<o.count;m++)s.setX(u+m,l+o.getX(m));for(let m=o.count,g=f;m<g;m++)s.setX(u+m,l);s.needsUpdate=!0,s.addUpdateRange(u,a.reservedIndexCount)}return a.start=r?a.indexStart:a.vertexStart,a.count=r?a.indexCount:a.vertexCount,a.boundingBox=null,t.boundingBox!==null&&(a.boundingBox=t.boundingBox.clone()),a.boundingSphere=null,t.boundingSphere!==null&&(a.boundingSphere=t.boundingSphere.clone()),this._visibilityChanged=!0,e}deleteGeometry(e){const t=this._geometryInfo;if(e>=t.length||t[e].active===!1)return this;const i=this._instanceInfo;for(let r=0,s=i.length;r<s;r++)i[r].active&&i[r].geometryIndex===e&&this.deleteInstance(r);return t[e].active=!1,this._availableGeometryIds.push(e),this._visibilityChanged=!0,this}deleteInstance(e){return this.validateInstanceId(e),this._instanceInfo[e].active=!1,this._availableInstanceIds.push(e),this._visibilityChanged=!0,this}optimize(){let e=0,t=0;const i=this._geometryInfo,r=i.map((o,a)=>a).sort((o,a)=>i[o].vertexStart-i[a].vertexStart),s=this.geometry;for(let o=0,a=i.length;o<a;o++){const l=r[o],c=i[l];if(c.active!==!1){if(s.index!==null){if(c.indexStart!==t){const{indexStart:u,vertexStart:f,reservedIndexCount:m}=c,g=s.index,x=g.array,b=e-f;for(let w=u;w<u+m;w++)x[w]=x[w]+b;g.array.copyWithin(t,u,u+m),g.addUpdateRange(t,m),c.indexStart=t}t+=c.reservedIndexCount}if(c.vertexStart!==e){const{vertexStart:u,reservedVertexCount:f}=c,m=s.attributes;for(const g in m){const x=m[g],{array:b,itemSize:w}=x;b.copyWithin(e*w,u*w,(u+f)*w),x.addUpdateRange(e*w,f*w)}c.vertexStart=e}e+=c.reservedVertexCount,c.start=s.index?c.indexStart:c.vertexStart,this._nextIndexStart=s.index?c.indexStart+c.reservedIndexCount:0,this._nextVertexStart=c.vertexStart+c.reservedVertexCount}}return this}getBoundingBoxAt(e,t){if(e>=this._geometryCount)return null;const i=this.geometry,r=this._geometryInfo[e];if(r.boundingBox===null){const s=new Qr,o=i.index,a=i.attributes.position;for(let l=r.start,c=r.start+r.count;l<c;l++){let u=l;o&&(u=o.getX(u)),s.expandByPoint(Lp.fromBufferAttribute(a,u))}r.boundingBox=s}return t.copy(r.boundingBox),t}getBoundingSphereAt(e,t){if(e>=this._geometryCount)return null;const i=this.geometry,r=this._geometryInfo[e];if(r.boundingSphere===null){const s=new Ur;this.getBoundingBoxAt(e,Wv),Wv.getCenter(s.center);const o=i.index,a=i.attributes.position;let l=0;for(let c=r.start,u=r.start+r.count;c<u;c++){let f=c;o&&(f=o.getX(f)),Lp.fromBufferAttribute(a,f),l=Math.max(l,s.center.distanceToSquared(Lp))}s.radius=Math.sqrt(l),r.boundingSphere=s}return t.copy(r.boundingSphere),t}setMatrixAt(e,t){this.validateInstanceId(e);const i=this._matricesTexture,r=this._matricesTexture.image.data;return t.toArray(r,e*16),i.needsUpdate=!0,this}getMatrixAt(e,t){return this.validateInstanceId(e),t.fromArray(this._matricesTexture.image.data,e*16)}setColorAt(e,t){return this.validateInstanceId(e),this._colorsTexture===null&&this._initColorsTexture(),t.toArray(this._colorsTexture.image.data,e*4),this._colorsTexture.needsUpdate=!0,this}getColorAt(e,t){return this.validateInstanceId(e),t.fromArray(this._colorsTexture.image.data,e*4)}setVisibleAt(e,t){return this.validateInstanceId(e),this._instanceInfo[e].visible===t?this:(this._instanceInfo[e].visible=t,this._visibilityChanged=!0,this)}getVisibleAt(e){return this.validateInstanceId(e),this._instanceInfo[e].visible}setGeometryIdAt(e,t){return this.validateInstanceId(e),this.validateGeometryId(t),this._instanceInfo[e].geometryIndex=t,this}getGeometryIdAt(e){return this.validateInstanceId(e),this._instanceInfo[e].geometryIndex}getGeometryRangeAt(e,t={}){this.validateGeometryId(e);const i=this._geometryInfo[e];return t.vertexStart=i.vertexStart,t.vertexCount=i.vertexCount,t.reservedVertexCount=i.reservedVertexCount,t.indexStart=i.indexStart,t.indexCount=i.indexCount,t.reservedIndexCount=i.reservedIndexCount,t.start=i.start,t.count=i.count,t}setInstanceCount(e){const t=this._availableInstanceIds,i=this._instanceInfo;for(t.sort(gT);t[t.length-1]===i.length;)i.pop(),t.pop();if(e<i.length)throw new Error(`BatchedMesh: Instance ids outside the range ${e} are being used. Cannot shrink instance count.`);const r=new Int32Array(e),s=new Int32Array(e);ru(this._multiDrawCounts,r),ru(this._multiDrawStarts,s),this._multiDrawCounts=r,this._multiDrawStarts=s,this._maxInstanceCount=e;const o=this._indirectTexture,a=this._matricesTexture,l=this._colorsTexture;o.dispose(),this._initIndirectTexture(),ru(o.image.data,this._indirectTexture.image.data),a.dispose(),this._initMatricesTexture(),ru(a.image.data,this._matricesTexture.image.data),l&&(l.dispose(),this._initColorsTexture(),ru(l.image.data,this._colorsTexture.image.data))}setGeometrySize(e,t){const i=[...this._geometryInfo].filter(a=>a.active);if(Math.max(...i.map(a=>a.vertexStart+a.reservedVertexCount))>e)throw new Error(`BatchedMesh: Geometry vertex values are being used outside the range ${t}. Cannot shrink further.`);if(this.geometry.index&&Math.max(...i.map(l=>l.indexStart+l.reservedIndexCount))>t)throw new Error(`BatchedMesh: Geometry index values are being used outside the range ${t}. Cannot shrink further.`);const s=this.geometry;s.dispose(),this._maxVertexCount=e,this._maxIndexCount=t,this._geometryInitialized&&(this._geometryInitialized=!1,this.geometry=new un,this._initializeGeometry(s));const o=this.geometry;s.index&&ru(s.index.array,o.index.array);for(const a in s.attributes)ru(s.attributes[a].array,o.attributes[a].array)}raycast(e,t){const i=this._instanceInfo,r=this._geometryInfo,s=this.matrixWorld,o=this.geometry;Mr.material=this.material,Mr.geometry.index=o.index,Mr.geometry.attributes=o.attributes,Mr.geometry.boundingBox===null&&(Mr.geometry.boundingBox=new Qr),Mr.geometry.boundingSphere===null&&(Mr.geometry.boundingSphere=new Ur);for(let a=0,l=i.length;a<l;a++){if(!i[a].visible||!i[a].active)continue;const c=i[a].geometryIndex,u=r[c];Mr.geometry.setDrawRange(u.start,u.count),this.getMatrixAt(a,Mr.matrixWorld).premultiply(s),this.getBoundingBoxAt(c,Mr.geometry.boundingBox),this.getBoundingSphereAt(c,Mr.geometry.boundingSphere),Mr.raycast(e,qv);for(let f=0,m=qv.length;f<m;f++){const g=qv[f];g.object=this,g.batchId=a,t.push(g)}qv.length=0}Mr.material=null,Mr.geometry.index=null,Mr.geometry.attributes={},Mr.geometry.setDrawRange(0,1/0)}copy(e){return super.copy(e),this.geometry=e.geometry.clone(),this.perObjectFrustumCulled=e.perObjectFrustumCulled,this.sortObjects=e.sortObjects,this.boundingBox=e.boundingBox!==null?e.boundingBox.clone():null,this.boundingSphere=e.boundingSphere!==null?e.boundingSphere.clone():null,this._geometryInfo=e._geometryInfo.map(t=>({...t,boundingBox:t.boundingBox!==null?t.boundingBox.clone():null,boundingSphere:t.boundingSphere!==null?t.boundingSphere.clone():null})),this._instanceInfo=e._instanceInfo.map(t=>({...t})),this._maxInstanceCount=e._maxInstanceCount,this._maxVertexCount=e._maxVertexCount,this._maxIndexCount=e._maxIndexCount,this._geometryInitialized=e._geometryInitialized,this._geometryCount=e._geometryCount,this._multiDrawCounts=e._multiDrawCounts.slice(),this._multiDrawStarts=e._multiDrawStarts.slice(),this._matricesTexture=e._matricesTexture.clone(),this._matricesTexture.image.data=this._matricesTexture.image.data.slice(),this._colorsTexture!==null&&(this._colorsTexture=e._colorsTexture.clone(),this._colorsTexture.image.data=this._colorsTexture.image.data.slice()),this}dispose(){this.geometry.dispose(),this._matricesTexture.dispose(),this._matricesTexture=null,this._indirectTexture.dispose(),this._indirectTexture=null,this._colorsTexture!==null&&(this._colorsTexture.dispose(),this._colorsTexture=null)}onBeforeRender(e,t,i,r,s){if(!this._visibilityChanged&&!this.perObjectFrustumCulled&&!this.sortObjects)return;const o=r.getIndex(),a=o===null?1:o.array.BYTES_PER_ELEMENT,l=this._instanceInfo,c=this._multiDrawStarts,u=this._multiDrawCounts,f=this._geometryInfo,m=this.perObjectFrustumCulled,g=this._indirectTexture,x=g.image.data;m&&(os.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse).multiply(this.matrixWorld),yT.setFromProjectionMatrix(os,e.coordinateSystem));let b=0;if(this.sortObjects){os.copy(this.matrixWorld).invert(),Lp.setFromMatrixPosition(i.matrixWorld).applyMatrix4(os),B2.set(0,0,-1).transformDirection(i.matrixWorld).transformDirection(os);for(let S=0,E=l.length;S<E;S++)if(l[S].visible&&l[S].active){const I=l[S].geometryIndex;this.getMatrixAt(S,os),this.getBoundingSphereAt(I,iu).applyMatrix4(os);let U=!1;if(m&&(U=!yT.intersectsSphere(iu)),!U){const O=f[I],C=i$.subVectors(iu.center,Lp).dot(B2);vT.push(O.start,O.count,C,S)}}const w=vT.list,v=this.customSort;v===null?w.sort(s.transparent?e$:Zq):v.call(this,w,i);for(let S=0,E=w.length;S<E;S++){const I=w[S];c[b]=I.start*a,u[b]=I.count,x[b]=I.index,b++}vT.reset()}else for(let w=0,v=l.length;w<v;w++)if(l[w].visible&&l[w].active){const S=l[w].geometryIndex;let E=!1;if(m&&(this.getMatrixAt(w,os),this.getBoundingSphereAt(S,iu).applyMatrix4(os),E=!yT.intersectsSphere(iu)),!E){const I=f[S];c[b]=I.start*a,u[b]=I.count,x[b]=w,b++}}g.needsUpdate=!0,this._multiDrawCount=b,this._visibilityChanged=!1}onBeforeShadow(e,t,i,r,s,o){this.onBeforeRender(e,null,r,s,o)}}class ts extends Br{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new xt(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const p_=new K,m_=new K,z2=new Vt,kp=new Pf,$v=new Ur,xT=new K,H2=new K;class uc extends Dn{constructor(e=new un,t=new ts){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=t,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,i=[0];for(let r=1,s=t.count;r<s;r++)p_.fromBufferAttribute(t,r-1),m_.fromBufferAttribute(t,r),i[r]=i[r-1],i[r]+=p_.distanceTo(m_);e.setAttribute("lineDistance",new At(i,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,t){const i=this.geometry,r=this.matrixWorld,s=e.params.Line.threshold,o=i.drawRange;if(i.boundingSphere===null&&i.computeBoundingSphere(),$v.copy(i.boundingSphere),$v.applyMatrix4(r),$v.radius+=s,e.ray.intersectsSphere($v)===!1)return;z2.copy(r).invert(),kp.copy(e.ray).applyMatrix4(z2);const a=s/((this.scale.x+this.scale.y+this.scale.z)/3),l=a*a,c=this.isLineSegments?2:1,u=i.index,m=i.attributes.position;if(u!==null){const g=Math.max(0,o.start),x=Math.min(u.count,o.start+o.count);for(let b=g,w=x-1;b<w;b+=c){const v=u.getX(b),S=u.getX(b+1),E=Xv(this,e,kp,l,v,S,b);E&&t.push(E)}if(this.isLineLoop){const b=u.getX(x-1),w=u.getX(g),v=Xv(this,e,kp,l,b,w,x-1);v&&t.push(v)}}else{const g=Math.max(0,o.start),x=Math.min(m.count,o.start+o.count);for(let b=g,w=x-1;b<w;b+=c){const v=Xv(this,e,kp,l,b,b+1,b);v&&t.push(v)}if(this.isLineLoop){const b=Xv(this,e,kp,l,x-1,g,x-1);b&&t.push(b)}}}updateMorphTargets(){const t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){const r=t[i[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=r.length;s<o;s++){const a=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}}function Xv(n,e,t,i,r,s,o){const a=n.geometry.attributes.position;if(p_.fromBufferAttribute(a,r),m_.fromBufferAttribute(a,s),t.distanceSqToSegment(p_,m_,xT,H2)>i)return;xT.applyMatrix4(n.matrixWorld);const c=e.ray.origin.distanceTo(xT);if(!(c<e.near||c>e.far))return{distance:c,point:H2.clone().applyMatrix4(n.matrixWorld),index:o,face:null,faceIndex:null,barycoord:null,object:n}}const G2=new K,W2=new K;class fa extends uc{constructor(e,t){super(e,t),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,i=[];for(let r=0,s=t.count;r<s;r+=2)G2.fromBufferAttribute(t,r),W2.fromBufferAttribute(t,r+1),i[r]=r===0?0:i[r-1],i[r+1]=i[r]+G2.distanceTo(W2);e.setAttribute("lineDistance",new At(i,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class qj extends uc{constructor(e,t){super(e,t),this.isLineLoop=!0,this.type="LineLoop"}}class Mw extends Br{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new xt(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}const q2=new Vt,m1=new Pf,Kv=new Ur,Yv=new K;let $j=class extends Dn{constructor(e=new un,t=new Mw){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=t,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}raycast(e,t){const i=this.geometry,r=this.matrixWorld,s=e.params.Points.threshold,o=i.drawRange;if(i.boundingSphere===null&&i.computeBoundingSphere(),Kv.copy(i.boundingSphere),Kv.applyMatrix4(r),Kv.radius+=s,e.ray.intersectsSphere(Kv)===!1)return;q2.copy(r).invert(),m1.copy(e.ray).applyMatrix4(q2);const a=s/((this.scale.x+this.scale.y+this.scale.z)/3),l=a*a,c=i.index,f=i.attributes.position;if(c!==null){const m=Math.max(0,o.start),g=Math.min(c.count,o.start+o.count);for(let x=m,b=g;x<b;x++){const w=c.getX(x);Yv.fromBufferAttribute(f,w),$2(Yv,w,l,r,e,t,this)}}else{const m=Math.max(0,o.start),g=Math.min(f.count,o.start+o.count);for(let x=m,b=g;x<b;x++)Yv.fromBufferAttribute(f,x),$2(Yv,x,l,r,e,t,this)}}updateMorphTargets(){const t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){const r=t[i[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=r.length;s<o;s++){const a=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}};function $2(n,e,t,i,r,s,o){const a=m1.distanceSqToPoint(n);if(a<t){const l=new K;m1.closestPointToPoint(n,l),l.applyMatrix4(i);const c=r.ray.origin.distanceTo(l);if(c<r.near||c>r.far)return;s.push({distance:c,distanceToRay:Math.sqrt(a),point:l,index:e,face:null,faceIndex:null,barycoord:null,object:o})}}class Xj extends _i{constructor(e,t,i,r,s,o,a,l,c){super(e,t,i,r,s,o,a,l,c),this.isVideoTexture=!0,this.minFilter=o!==void 0?o:Xi,this.magFilter=s!==void 0?s:Xi,this.generateMipmaps=!1;const u=this;function f(){u.needsUpdate=!0,e.requestVideoFrameCallback(f)}"requestVideoFrameCallback"in e&&e.requestVideoFrameCallback(f)}clone(){return new this.constructor(this.image).copy(this)}update(){const e=this.image;"requestVideoFrameCallback"in e===!1&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}class s$ extends Xj{constructor(e,t,i,r,s,o,a,l){super({},e,t,i,r,s,o,a,l),this.isVideoFrameTexture=!0}update(){}clone(){return new this.constructor().copy(this)}setFrame(e){this.image=e,this.needsUpdate=!0}}class o$ extends _i{constructor(e,t){super({width:e,height:t}),this.isFramebufferTexture=!0,this.magFilter=mr,this.minFilter=mr,this.generateMipmaps=!1,this.needsUpdate=!0}}class Iw extends _i{constructor(e,t,i,r,s,o,a,l,c,u,f,m){super(null,o,a,l,c,u,r,s,f,m),this.isCompressedTexture=!0,this.image={width:t,height:i},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}}class a$ extends Iw{constructor(e,t,i,r,s,o){super(e,t,i,s,o),this.isCompressedArrayTexture=!0,this.image.depth=r,this.wrapR=lo,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}}class l$ extends Iw{constructor(e,t,i){super(void 0,e[0].width,e[0].height,t,i,Ya),this.isCompressedCubeTexture=!0,this.isCubeTexture=!0,this.image=e}}class c$ extends _i{constructor(e,t,i,r,s,o,a,l,c){super(e,t,i,r,s,o,a,l,c),this.isCanvasTexture=!0,this.needsUpdate=!0}}class GA extends _i{constructor(e,t,i,r,s,o,a,l,c,u=Uu){if(u!==Uu&&u!==Zu)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");i===void 0&&u===Uu&&(i=Ja),i===void 0&&u===Zu&&(i=Qu),super(null,r,s,o,a,l,u,i,c),this.isDepthTexture=!0,this.image={width:e,height:t},this.magFilter=a!==void 0?a:mr,this.minFilter=l!==void 0?l:mr,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(e){return super.copy(e),this.source=new Wl(Object.assign({},e.image)),this.compareFunction=e.compareFunction,this}toJSON(e){const t=super.toJSON(e);return this.compareFunction!==null&&(t.compareFunction=this.compareFunction),t}}class jo{constructor(){this.type="Curve",this.arcLengthDivisions=200,this.needsUpdate=!1,this.cacheArcLengths=null}getPoint(){console.warn("THREE.Curve: .getPoint() not implemented.")}getPointAt(e,t){const i=this.getUtoTmapping(e);return this.getPoint(i,t)}getPoints(e=5){const t=[];for(let i=0;i<=e;i++)t.push(this.getPoint(i/e));return t}getSpacedPoints(e=5){const t=[];for(let i=0;i<=e;i++)t.push(this.getPointAt(i/e));return t}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const t=[];let i,r=this.getPoint(0),s=0;t.push(0);for(let o=1;o<=e;o++)i=this.getPoint(o/e),s+=i.distanceTo(r),t.push(s),r=i;return this.cacheArcLengths=t,t}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,t=null){const i=this.getLengths();let r=0;const s=i.length;let o;t?o=t:o=e*i[s-1];let a=0,l=s-1,c;for(;a<=l;)if(r=Math.floor(a+(l-a)/2),c=i[r]-o,c<0)a=r+1;else if(c>0)l=r-1;else{l=r;break}if(r=l,i[r]===o)return r/(s-1);const u=i[r],m=i[r+1]-u,g=(o-u)/m;return(r+g)/(s-1)}getTangent(e,t){let r=e-1e-4,s=e+1e-4;r<0&&(r=0),s>1&&(s=1);const o=this.getPoint(r),a=this.getPoint(s),l=t||(o.isVector2?new Le:new K);return l.copy(a).sub(o).normalize(),l}getTangentAt(e,t){const i=this.getUtoTmapping(e);return this.getTangent(i,t)}computeFrenetFrames(e,t=!1){const i=new K,r=[],s=[],o=[],a=new K,l=new Vt;for(let g=0;g<=e;g++){const x=g/e;r[g]=this.getTangentAt(x,new K)}s[0]=new K,o[0]=new K;let c=Number.MAX_VALUE;const u=Math.abs(r[0].x),f=Math.abs(r[0].y),m=Math.abs(r[0].z);u<=c&&(c=u,i.set(1,0,0)),f<=c&&(c=f,i.set(0,1,0)),m<=c&&i.set(0,0,1),a.crossVectors(r[0],i).normalize(),s[0].crossVectors(r[0],a),o[0].crossVectors(r[0],s[0]);for(let g=1;g<=e;g++){if(s[g]=s[g-1].clone(),o[g]=o[g-1].clone(),a.crossVectors(r[g-1],r[g]),a.length()>Number.EPSILON){a.normalize();const x=Math.acos(Jt(r[g-1].dot(r[g]),-1,1));s[g].applyMatrix4(l.makeRotationAxis(a,x))}o[g].crossVectors(r[g],s[g])}if(t===!0){let g=Math.acos(Jt(s[0].dot(s[e]),-1,1));g/=e,r[0].dot(a.crossVectors(s[0],s[e]))>0&&(g=-g);for(let x=1;x<=e;x++)s[x].applyMatrix4(l.makeRotationAxis(r[x],g*x)),o[x].crossVectors(r[x],s[x])}return{tangents:r,normals:s,binormals:o}}clone(){return new this.constructor().copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.6,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class Pw extends jo{constructor(e=0,t=0,i=1,r=1,s=0,o=Math.PI*2,a=!1,l=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=e,this.aY=t,this.xRadius=i,this.yRadius=r,this.aStartAngle=s,this.aEndAngle=o,this.aClockwise=a,this.aRotation=l}getPoint(e,t=new Le){const i=t,r=Math.PI*2;let s=this.aEndAngle-this.aStartAngle;const o=Math.abs(s)<Number.EPSILON;for(;s<0;)s+=r;for(;s>r;)s-=r;s<Number.EPSILON&&(o?s=0:s=r),this.aClockwise===!0&&!o&&(s===r?s=-r:s=s-r);const a=this.aStartAngle+e*s;let l=this.aX+this.xRadius*Math.cos(a),c=this.aY+this.yRadius*Math.sin(a);if(this.aRotation!==0){const u=Math.cos(this.aRotation),f=Math.sin(this.aRotation),m=l-this.aX,g=c-this.aY;l=m*u-g*f+this.aX,c=m*f+g*u+this.aY}return i.set(l,c)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}class Kj extends Pw{constructor(e,t,i,r,s,o){super(e,t,i,i,r,s,o),this.isArcCurve=!0,this.type="ArcCurve"}}function WA(){let n=0,e=0,t=0,i=0;function r(s,o,a,l){n=s,e=a,t=-3*s+3*o-2*a-l,i=2*s-2*o+a+l}return{initCatmullRom:function(s,o,a,l,c){r(o,a,c*(a-s),c*(l-o))},initNonuniformCatmullRom:function(s,o,a,l,c,u,f){let m=(o-s)/c-(a-s)/(c+u)+(a-o)/u,g=(a-o)/u-(l-o)/(u+f)+(l-a)/f;m*=u,g*=u,r(o,a,m,g)},calc:function(s){const o=s*s,a=o*s;return n+e*s+t*o+i*a}}}const Jv=new K,_T=new WA,wT=new WA,bT=new WA;class Yj extends jo{constructor(e=[],t=!1,i="centripetal",r=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=e,this.closed=t,this.curveType=i,this.tension=r}getPoint(e,t=new K){const i=t,r=this.points,s=r.length,o=(s-(this.closed?0:1))*e;let a=Math.floor(o),l=o-a;this.closed?a+=a>0?0:(Math.floor(Math.abs(a)/s)+1)*s:l===0&&a===s-1&&(a=s-2,l=1);let c,u;this.closed||a>0?c=r[(a-1)%s]:(Jv.subVectors(r[0],r[1]).add(r[0]),c=Jv);const f=r[a%s],m=r[(a+1)%s];if(this.closed||a+2<s?u=r[(a+2)%s]:(Jv.subVectors(r[s-1],r[s-2]).add(r[s-1]),u=Jv),this.curveType==="centripetal"||this.curveType==="chordal"){const g=this.curveType==="chordal"?.5:.25;let x=Math.pow(c.distanceToSquared(f),g),b=Math.pow(f.distanceToSquared(m),g),w=Math.pow(m.distanceToSquared(u),g);b<1e-4&&(b=1),x<1e-4&&(x=b),w<1e-4&&(w=b),_T.initNonuniformCatmullRom(c.x,f.x,m.x,u.x,x,b,w),wT.initNonuniformCatmullRom(c.y,f.y,m.y,u.y,x,b,w),bT.initNonuniformCatmullRom(c.z,f.z,m.z,u.z,x,b,w)}else this.curveType==="catmullrom"&&(_T.initCatmullRom(c.x,f.x,m.x,u.x,this.tension),wT.initCatmullRom(c.y,f.y,m.y,u.y,this.tension),bT.initCatmullRom(c.z,f.z,m.z,u.z,this.tension));return i.set(_T.calc(l),wT.calc(l),bT.calc(l)),i}copy(e){super.copy(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const r=e.points[t];this.points.push(r.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,i=this.points.length;t<i;t++){const r=this.points[t];e.points.push(r.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const r=e.points[t];this.points.push(new K().fromArray(r))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}function X2(n,e,t,i,r){const s=(i-e)*.5,o=(r-t)*.5,a=n*n,l=n*a;return(2*t-2*i+s+o)*l+(-3*t+3*i-2*s-o)*a+s*n+t}function u$(n,e){const t=1-n;return t*t*e}function h$(n,e){return 2*(1-n)*n*e}function d$(n,e){return n*n*e}function bm(n,e,t,i){return u$(n,e)+h$(n,t)+d$(n,i)}function f$(n,e){const t=1-n;return t*t*t*e}function p$(n,e){const t=1-n;return 3*t*t*n*e}function m$(n,e){return 3*(1-n)*n*n*e}function g$(n,e){return n*n*n*e}function Sm(n,e,t,i,r){return f$(n,e)+p$(n,t)+m$(n,i)+g$(n,r)}class qA extends jo{constructor(e=new Le,t=new Le,i=new Le,r=new Le){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=e,this.v1=t,this.v2=i,this.v3=r}getPoint(e,t=new Le){const i=t,r=this.v0,s=this.v1,o=this.v2,a=this.v3;return i.set(Sm(e,r.x,s.x,o.x,a.x),Sm(e,r.y,s.y,o.y,a.y)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class Jj extends jo{constructor(e=new K,t=new K,i=new K,r=new K){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=e,this.v1=t,this.v2=i,this.v3=r}getPoint(e,t=new K){const i=t,r=this.v0,s=this.v1,o=this.v2,a=this.v3;return i.set(Sm(e,r.x,s.x,o.x,a.x),Sm(e,r.y,s.y,o.y,a.y),Sm(e,r.z,s.z,o.z,a.z)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class $A extends jo{constructor(e=new Le,t=new Le){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=e,this.v2=t}getPoint(e,t=new Le){const i=t;return e===1?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(e).add(this.v1)),i}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new Le){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class Qj extends jo{constructor(e=new K,t=new K){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=e,this.v2=t}getPoint(e,t=new K){const i=t;return e===1?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(e).add(this.v1)),i}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new K){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class XA extends jo{constructor(e=new Le,t=new Le,i=new Le){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=e,this.v1=t,this.v2=i}getPoint(e,t=new Le){const i=t,r=this.v0,s=this.v1,o=this.v2;return i.set(bm(e,r.x,s.x,o.x),bm(e,r.y,s.y,o.y)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class KA extends jo{constructor(e=new K,t=new K,i=new K){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=e,this.v1=t,this.v2=i}getPoint(e,t=new K){const i=t,r=this.v0,s=this.v1,o=this.v2;return i.set(bm(e,r.x,s.x,o.x),bm(e,r.y,s.y,o.y),bm(e,r.z,s.z,o.z)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class YA extends jo{constructor(e=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=e}getPoint(e,t=new Le){const i=t,r=this.points,s=(r.length-1)*e,o=Math.floor(s),a=s-o,l=r[o===0?o:o-1],c=r[o],u=r[o>r.length-2?r.length-1:o+1],f=r[o>r.length-3?r.length-1:o+2];return i.set(X2(a,l.x,c.x,u.x,f.x),X2(a,l.y,c.y,u.y,f.y)),i}copy(e){super.copy(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const r=e.points[t];this.points.push(r.clone())}return this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,i=this.points.length;t<i;t++){const r=this.points[t];e.points.push(r.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const r=e.points[t];this.points.push(new Le().fromArray(r))}return this}}var g_=Object.freeze({__proto__:null,ArcCurve:Kj,CatmullRomCurve3:Yj,CubicBezierCurve:qA,CubicBezierCurve3:Jj,EllipseCurve:Pw,LineCurve:$A,LineCurve3:Qj,QuadraticBezierCurve:XA,QuadraticBezierCurve3:KA,SplineCurve:YA});class Zj extends jo{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){const e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);if(!e.equals(t)){const i=e.isVector2===!0?"LineCurve":"LineCurve3";this.curves.push(new g_[i](t,e))}return this}getPoint(e,t){const i=e*this.getLength(),r=this.getCurveLengths();let s=0;for(;s<r.length;){if(r[s]>=i){const o=r[s]-i,a=this.curves[s],l=a.getLength(),c=l===0?0:1-o/l;return a.getPointAt(c,t)}s++}return null}getLength(){const e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let t=0;for(let i=0,r=this.curves.length;i<r;i++)t+=this.curves[i].getLength(),e.push(t);return this.cacheLengths=e,e}getSpacedPoints(e=40){const t=[];for(let i=0;i<=e;i++)t.push(this.getPoint(i/e));return this.autoClose&&t.push(t[0]),t}getPoints(e=12){const t=[];let i;for(let r=0,s=this.curves;r<s.length;r++){const o=s[r],a=o.isEllipseCurve?e*2:o.isLineCurve||o.isLineCurve3?1:o.isSplineCurve?e*o.points.length:e,l=o.getPoints(a);for(let c=0;c<l.length;c++){const u=l[c];i&&i.equals(u)||(t.push(u),i=u)}}return this.autoClose&&t.length>1&&!t[t.length-1].equals(t[0])&&t.push(t[0]),t}copy(e){super.copy(e),this.curves=[];for(let t=0,i=e.curves.length;t<i;t++){const r=e.curves[t];this.curves.push(r.clone())}return this.autoClose=e.autoClose,this}toJSON(){const e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let t=0,i=this.curves.length;t<i;t++){const r=this.curves[t];e.curves.push(r.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let t=0,i=e.curves.length;t<i;t++){const r=e.curves[t];this.curves.push(new g_[r.type]().fromJSON(r))}return this}}class dg extends Zj{constructor(e){super(),this.type="Path",this.currentPoint=new Le,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let t=1,i=e.length;t<i;t++)this.lineTo(e[t].x,e[t].y);return this}moveTo(e,t){return this.currentPoint.set(e,t),this}lineTo(e,t){const i=new $A(this.currentPoint.clone(),new Le(e,t));return this.curves.push(i),this.currentPoint.set(e,t),this}quadraticCurveTo(e,t,i,r){const s=new XA(this.currentPoint.clone(),new Le(e,t),new Le(i,r));return this.curves.push(s),this.currentPoint.set(i,r),this}bezierCurveTo(e,t,i,r,s,o){const a=new qA(this.currentPoint.clone(),new Le(e,t),new Le(i,r),new Le(s,o));return this.curves.push(a),this.currentPoint.set(s,o),this}splineThru(e){const t=[this.currentPoint.clone()].concat(e),i=new YA(t);return this.curves.push(i),this.currentPoint.copy(e[e.length-1]),this}arc(e,t,i,r,s,o){const a=this.currentPoint.x,l=this.currentPoint.y;return this.absarc(e+a,t+l,i,r,s,o),this}absarc(e,t,i,r,s,o){return this.absellipse(e,t,i,i,r,s,o),this}ellipse(e,t,i,r,s,o,a,l){const c=this.currentPoint.x,u=this.currentPoint.y;return this.absellipse(e+c,t+u,i,r,s,o,a,l),this}absellipse(e,t,i,r,s,o,a,l){const c=new Pw(e,t,i,r,s,o,a,l);if(this.curves.length>0){const f=c.getPoint(0);f.equals(this.currentPoint)||this.lineTo(f.x,f.y)}this.curves.push(c);const u=c.getPoint(1);return this.currentPoint.copy(u),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){const e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}}class Yg extends un{constructor(e=[new Le(0,-.5),new Le(.5,0),new Le(0,.5)],t=12,i=0,r=Math.PI*2){super(),this.type="LatheGeometry",this.parameters={points:e,segments:t,phiStart:i,phiLength:r},t=Math.floor(t),r=Jt(r,0,Math.PI*2);const s=[],o=[],a=[],l=[],c=[],u=1/t,f=new K,m=new Le,g=new K,x=new K,b=new K;let w=0,v=0;for(let S=0;S<=e.length-1;S++)switch(S){case 0:w=e[S+1].x-e[S].x,v=e[S+1].y-e[S].y,g.x=v*1,g.y=-w,g.z=v*0,b.copy(g),g.normalize(),l.push(g.x,g.y,g.z);break;case e.length-1:l.push(b.x,b.y,b.z);break;default:w=e[S+1].x-e[S].x,v=e[S+1].y-e[S].y,g.x=v*1,g.y=-w,g.z=v*0,x.copy(g),g.x+=b.x,g.y+=b.y,g.z+=b.z,g.normalize(),l.push(g.x,g.y,g.z),b.copy(x)}for(let S=0;S<=t;S++){const E=i+S*u*r,I=Math.sin(E),U=Math.cos(E);for(let O=0;O<=e.length-1;O++){f.x=e[O].x*I,f.y=e[O].y,f.z=e[O].x*U,o.push(f.x,f.y,f.z),m.x=S/t,m.y=O/(e.length-1),a.push(m.x,m.y);const C=l[3*O+0]*I,P=l[3*O+1],M=l[3*O+0]*U;c.push(C,P,M)}}for(let S=0;S<t;S++)for(let E=0;E<e.length-1;E++){const I=E+S*e.length,U=I,O=I+e.length,C=I+e.length+1,P=I+1;s.push(U,O,P),s.push(C,P,O)}this.setIndex(s),this.setAttribute("position",new At(o,3)),this.setAttribute("uv",new At(a,2)),this.setAttribute("normal",new At(c,3))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Yg(e.points,e.segments,e.phiStart,e.phiLength)}}class Rw extends Yg{constructor(e=1,t=1,i=4,r=8){const s=new dg;s.absarc(0,-t/2,e,Math.PI*1.5,0),s.absarc(0,t/2,e,0,Math.PI*.5),super(s.getPoints(i),r),this.type="CapsuleGeometry",this.parameters={radius:e,length:t,capSegments:i,radialSegments:r}}static fromJSON(e){return new Rw(e.radius,e.length,e.capSegments,e.radialSegments)}}class Nw extends un{constructor(e=1,t=32,i=0,r=Math.PI*2){super(),this.type="CircleGeometry",this.parameters={radius:e,segments:t,thetaStart:i,thetaLength:r},t=Math.max(3,t);const s=[],o=[],a=[],l=[],c=new K,u=new Le;o.push(0,0,0),a.push(0,0,1),l.push(.5,.5);for(let f=0,m=3;f<=t;f++,m+=3){const g=i+f/t*r;c.x=e*Math.cos(g),c.y=e*Math.sin(g),o.push(c.x,c.y,c.z),a.push(0,0,1),u.x=(o[m]/e+1)/2,u.y=(o[m+1]/e+1)/2,l.push(u.x,u.y)}for(let f=1;f<=t;f++)s.push(f,f+1,0);this.setIndex(s),this.setAttribute("position",new At(o,3)),this.setAttribute("normal",new At(a,3)),this.setAttribute("uv",new At(l,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Nw(e.radius,e.segments,e.thetaStart,e.thetaLength)}}class Rf extends un{constructor(e=1,t=1,i=1,r=32,s=1,o=!1,a=0,l=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:i,radialSegments:r,heightSegments:s,openEnded:o,thetaStart:a,thetaLength:l};const c=this;r=Math.floor(r),s=Math.floor(s);const u=[],f=[],m=[],g=[];let x=0;const b=[],w=i/2;let v=0;S(),o===!1&&(e>0&&E(!0),t>0&&E(!1)),this.setIndex(u),this.setAttribute("position",new At(f,3)),this.setAttribute("normal",new At(m,3)),this.setAttribute("uv",new At(g,2));function S(){const I=new K,U=new K;let O=0;const C=(t-e)/i;for(let P=0;P<=s;P++){const M=[],A=P/s,D=A*(t-e)+e;for(let B=0;B<=r;B++){const j=B/r,te=j*l+a,ce=Math.sin(te),pe=Math.cos(te);U.x=D*ce,U.y=-A*i+w,U.z=D*pe,f.push(U.x,U.y,U.z),I.set(ce,C,pe).normalize(),m.push(I.x,I.y,I.z),g.push(j,1-A),M.push(x++)}b.push(M)}for(let P=0;P<r;P++)for(let M=0;M<s;M++){const A=b[M][P],D=b[M+1][P],B=b[M+1][P+1],j=b[M][P+1];(e>0||M!==0)&&(u.push(A,D,j),O+=3),(t>0||M!==s-1)&&(u.push(D,B,j),O+=3)}c.addGroup(v,O,0),v+=O}function E(I){const U=x,O=new Le,C=new K;let P=0;const M=I===!0?e:t,A=I===!0?1:-1;for(let B=1;B<=r;B++)f.push(0,w*A,0),m.push(0,A,0),g.push(.5,.5),x++;const D=x;for(let B=0;B<=r;B++){const te=B/r*l+a,ce=Math.cos(te),pe=Math.sin(te);C.x=M*pe,C.y=w*A,C.z=M*ce,f.push(C.x,C.y,C.z),m.push(0,A,0),O.x=ce*.5+.5,O.y=pe*.5*A+.5,g.push(O.x,O.y),x++}for(let B=0;B<r;B++){const j=U+B,te=D+B;I===!0?u.push(te,te+1,j):u.push(te+1,te,j),P+=3}c.addGroup(v,P,I===!0?1:2),v+=P}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Rf(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class Dw extends Rf{constructor(e=1,t=1,i=32,r=1,s=!1,o=0,a=Math.PI*2){super(0,e,t,i,r,s,o,a),this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:i,heightSegments:r,openEnded:s,thetaStart:o,thetaLength:a}}static fromJSON(e){return new Dw(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class Pc extends un{constructor(e=[],t=[],i=1,r=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:t,radius:i,detail:r};const s=[],o=[];a(r),c(i),u(),this.setAttribute("position",new At(s,3)),this.setAttribute("normal",new At(s.slice(),3)),this.setAttribute("uv",new At(o,2)),r===0?this.computeVertexNormals():this.normalizeNormals();function a(S){const E=new K,I=new K,U=new K;for(let O=0;O<t.length;O+=3)g(t[O+0],E),g(t[O+1],I),g(t[O+2],U),l(E,I,U,S)}function l(S,E,I,U){const O=U+1,C=[];for(let P=0;P<=O;P++){C[P]=[];const M=S.clone().lerp(I,P/O),A=E.clone().lerp(I,P/O),D=O-P;for(let B=0;B<=D;B++)B===0&&P===O?C[P][B]=M:C[P][B]=M.clone().lerp(A,B/D)}for(let P=0;P<O;P++)for(let M=0;M<2*(O-P)-1;M++){const A=Math.floor(M/2);M%2===0?(m(C[P][A+1]),m(C[P+1][A]),m(C[P][A])):(m(C[P][A+1]),m(C[P+1][A+1]),m(C[P+1][A]))}}function c(S){const E=new K;for(let I=0;I<s.length;I+=3)E.x=s[I+0],E.y=s[I+1],E.z=s[I+2],E.normalize().multiplyScalar(S),s[I+0]=E.x,s[I+1]=E.y,s[I+2]=E.z}function u(){const S=new K;for(let E=0;E<s.length;E+=3){S.x=s[E+0],S.y=s[E+1],S.z=s[E+2];const I=w(S)/2/Math.PI+.5,U=v(S)/Math.PI+.5;o.push(I,1-U)}x(),f()}function f(){for(let S=0;S<o.length;S+=6){const E=o[S+0],I=o[S+2],U=o[S+4],O=Math.max(E,I,U),C=Math.min(E,I,U);O>.9&&C<.1&&(E<.2&&(o[S+0]+=1),I<.2&&(o[S+2]+=1),U<.2&&(o[S+4]+=1))}}function m(S){s.push(S.x,S.y,S.z)}function g(S,E){const I=S*3;E.x=e[I+0],E.y=e[I+1],E.z=e[I+2]}function x(){const S=new K,E=new K,I=new K,U=new K,O=new Le,C=new Le,P=new Le;for(let M=0,A=0;M<s.length;M+=9,A+=6){S.set(s[M+0],s[M+1],s[M+2]),E.set(s[M+3],s[M+4],s[M+5]),I.set(s[M+6],s[M+7],s[M+8]),O.set(o[A+0],o[A+1]),C.set(o[A+2],o[A+3]),P.set(o[A+4],o[A+5]),U.copy(S).add(E).add(I).divideScalar(3);const D=w(U);b(O,A+0,S,D),b(C,A+2,E,D),b(P,A+4,I,D)}}function b(S,E,I,U){U<0&&S.x===1&&(o[E]=S.x-1),I.x===0&&I.z===0&&(o[E]=U/2/Math.PI+.5)}function w(S){return Math.atan2(S.z,-S.x)}function v(S){return Math.atan2(-S.y,Math.sqrt(S.x*S.x+S.z*S.z))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Pc(e.vertices,e.indices,e.radius,e.details)}}class Lw extends Pc{constructor(e=1,t=0){const i=(1+Math.sqrt(5))/2,r=1/i,s=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-r,-i,0,-r,i,0,r,-i,0,r,i,-r,-i,0,-r,i,0,r,-i,0,r,i,0,-i,0,-r,i,0,-r,-i,0,r,i,0,r],o=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];super(s,o,e,t),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new Lw(e.radius,e.detail)}}const Qv=new K,Zv=new K,ST=new K,ex=new fs;class eV extends un{constructor(e=null,t=1){if(super(),this.type="EdgesGeometry",this.parameters={geometry:e,thresholdAngle:t},e!==null){const r=Math.pow(10,4),s=Math.cos(ju*t),o=e.getIndex(),a=e.getAttribute("position"),l=o?o.count:a.count,c=[0,0,0],u=["a","b","c"],f=new Array(3),m={},g=[];for(let x=0;x<l;x+=3){o?(c[0]=o.getX(x),c[1]=o.getX(x+1),c[2]=o.getX(x+2)):(c[0]=x,c[1]=x+1,c[2]=x+2);const{a:b,b:w,c:v}=ex;if(b.fromBufferAttribute(a,c[0]),w.fromBufferAttribute(a,c[1]),v.fromBufferAttribute(a,c[2]),ex.getNormal(ST),f[0]=`${Math.round(b.x*r)},${Math.round(b.y*r)},${Math.round(b.z*r)}`,f[1]=`${Math.round(w.x*r)},${Math.round(w.y*r)},${Math.round(w.z*r)}`,f[2]=`${Math.round(v.x*r)},${Math.round(v.y*r)},${Math.round(v.z*r)}`,!(f[0]===f[1]||f[1]===f[2]||f[2]===f[0]))for(let S=0;S<3;S++){const E=(S+1)%3,I=f[S],U=f[E],O=ex[u[S]],C=ex[u[E]],P=`${I}_${U}`,M=`${U}_${I}`;M in m&&m[M]?(ST.dot(m[M].normal)<=s&&(g.push(O.x,O.y,O.z),g.push(C.x,C.y,C.z)),m[M]=null):P in m||(m[P]={index0:c[S],index1:c[E],normal:ST.clone()})}}for(const x in m)if(m[x]){const{index0:b,index1:w}=m[x];Qv.fromBufferAttribute(a,b),Zv.fromBufferAttribute(a,w),g.push(Qv.x,Qv.y,Qv.z),g.push(Zv.x,Zv.y,Zv.z)}this.setAttribute("position",new At(g,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}class Bu extends dg{constructor(e){super(e),this.uuid=Fs(),this.type="Shape",this.holes=[]}getPointsHoles(e){const t=[];for(let i=0,r=this.holes.length;i<r;i++)t[i]=this.holes[i].getPoints(e);return t}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let t=0,i=e.holes.length;t<i;t++){const r=e.holes[t];this.holes.push(r.clone())}return this}toJSON(){const e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let t=0,i=this.holes.length;t<i;t++){const r=this.holes[t];e.holes.push(r.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let t=0,i=e.holes.length;t<i;t++){const r=e.holes[t];this.holes.push(new dg().fromJSON(r))}return this}}class y${static triangulate(e,t,i=2){const r=t&&t.length,s=r?t[0]*i:e.length;let o=tV(e,0,s,i,!0);const a=[];if(!o||o.next===o.prev)return a;let l,c,u,f,m,g,x;if(r&&(o=b$(e,t,o,i)),e.length>80*i){l=u=e[0],c=f=e[1];for(let b=i;b<s;b+=i)m=e[b],g=e[b+1],m<l&&(l=m),g<c&&(c=g),m>u&&(u=m),g>f&&(f=g);x=Math.max(u-l,f-c),x=x!==0?32767/x:0}return fg(o,a,i,l,c,x,0),a}}function tV(n,e,t,i,r){let s,o;if(r===D$(n,e,t,i)>0)for(s=e;s<t;s+=i)o=K2(s,n[s],n[s+1],o);else for(s=t-i;s>=e;s-=i)o=K2(s,n[s],n[s+1],o);return o&&kw(o,o.next)&&(mg(o),o=o.next),o}function nh(n,e){if(!n)return n;e||(e=n);let t=n,i;do if(i=!1,!t.steiner&&(kw(t,t.next)||hi(t.prev,t,t.next)===0)){if(mg(t),t=e=t.prev,t===t.next)break;i=!0}else t=t.next;while(i||t!==e);return e}function fg(n,e,t,i,r,s,o){if(!n)return;!o&&s&&A$(n,i,r,s);let a=n,l,c;for(;n.prev!==n.next;){if(l=n.prev,c=n.next,s?x$(n,i,r,s):v$(n)){e.push(l.i/t|0),e.push(n.i/t|0),e.push(c.i/t|0),mg(n),n=c.next,a=c.next;continue}if(n=c,n===a){o?o===1?(n=_$(nh(n),e,t),fg(n,e,t,i,r,s,2)):o===2&&w$(n,e,t,i,r,s):fg(nh(n),e,t,i,r,s,1);break}}}function v$(n){const e=n.prev,t=n,i=n.next;if(hi(e,t,i)>=0)return!1;const r=e.x,s=t.x,o=i.x,a=e.y,l=t.y,c=i.y,u=r<s?r<o?r:o:s<o?s:o,f=a<l?a<c?a:c:l<c?l:c,m=r>s?r>o?r:o:s>o?s:o,g=a>l?a>c?a:c:l>c?l:c;let x=i.next;for(;x!==e;){if(x.x>=u&&x.x<=m&&x.y>=f&&x.y<=g&&Rd(r,a,s,l,o,c,x.x,x.y)&&hi(x.prev,x,x.next)>=0)return!1;x=x.next}return!0}function x$(n,e,t,i){const r=n.prev,s=n,o=n.next;if(hi(r,s,o)>=0)return!1;const a=r.x,l=s.x,c=o.x,u=r.y,f=s.y,m=o.y,g=a<l?a<c?a:c:l<c?l:c,x=u<f?u<m?u:m:f<m?f:m,b=a>l?a>c?a:c:l>c?l:c,w=u>f?u>m?u:m:f>m?f:m,v=g1(g,x,e,t,i),S=g1(b,w,e,t,i);let E=n.prevZ,I=n.nextZ;for(;E&&E.z>=v&&I&&I.z<=S;){if(E.x>=g&&E.x<=b&&E.y>=x&&E.y<=w&&E!==r&&E!==o&&Rd(a,u,l,f,c,m,E.x,E.y)&&hi(E.prev,E,E.next)>=0||(E=E.prevZ,I.x>=g&&I.x<=b&&I.y>=x&&I.y<=w&&I!==r&&I!==o&&Rd(a,u,l,f,c,m,I.x,I.y)&&hi(I.prev,I,I.next)>=0))return!1;I=I.nextZ}for(;E&&E.z>=v;){if(E.x>=g&&E.x<=b&&E.y>=x&&E.y<=w&&E!==r&&E!==o&&Rd(a,u,l,f,c,m,E.x,E.y)&&hi(E.prev,E,E.next)>=0)return!1;E=E.prevZ}for(;I&&I.z<=S;){if(I.x>=g&&I.x<=b&&I.y>=x&&I.y<=w&&I!==r&&I!==o&&Rd(a,u,l,f,c,m,I.x,I.y)&&hi(I.prev,I,I.next)>=0)return!1;I=I.nextZ}return!0}function _$(n,e,t){let i=n;do{const r=i.prev,s=i.next.next;!kw(r,s)&&nV(r,i,i.next,s)&&pg(r,s)&&pg(s,r)&&(e.push(r.i/t|0),e.push(i.i/t|0),e.push(s.i/t|0),mg(i),mg(i.next),i=n=s),i=i.next}while(i!==n);return nh(i)}function w$(n,e,t,i,r,s){let o=n;do{let a=o.next.next;for(;a!==o.prev;){if(o.i!==a.i&&P$(o,a)){let l=iV(o,a);o=nh(o,o.next),l=nh(l,l.next),fg(o,e,t,i,r,s,0),fg(l,e,t,i,r,s,0);return}a=a.next}o=o.next}while(o!==n)}function b$(n,e,t,i){const r=[];let s,o,a,l,c;for(s=0,o=e.length;s<o;s++)a=e[s]*i,l=s<o-1?e[s+1]*i:n.length,c=tV(n,a,l,i,!1),c===c.next&&(c.steiner=!0),r.push(I$(c));for(r.sort(S$),s=0;s<r.length;s++)t=T$(r[s],t);return t}function S$(n,e){return n.x-e.x}function T$(n,e){const t=E$(n,e);if(!t)return e;const i=iV(t,n);return nh(i,i.next),nh(t,t.next)}function E$(n,e){let t=e,i=-1/0,r;const s=n.x,o=n.y;do{if(o<=t.y&&o>=t.next.y&&t.next.y!==t.y){const m=t.x+(o-t.y)*(t.next.x-t.x)/(t.next.y-t.y);if(m<=s&&m>i&&(i=m,r=t.x<t.next.x?t:t.next,m===s))return r}t=t.next}while(t!==e);if(!r)return null;const a=r,l=r.x,c=r.y;let u=1/0,f;t=r;do s>=t.x&&t.x>=l&&s!==t.x&&Rd(o<c?s:i,o,l,c,o<c?i:s,o,t.x,t.y)&&(f=Math.abs(o-t.y)/(s-t.x),pg(t,n)&&(f<u||f===u&&(t.x>r.x||t.x===r.x&&C$(r,t)))&&(r=t,u=f)),t=t.next;while(t!==a);return r}function C$(n,e){return hi(n.prev,n,e.prev)<0&&hi(e.next,n,n.next)<0}function A$(n,e,t,i){let r=n;do r.z===0&&(r.z=g1(r.x,r.y,e,t,i)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next;while(r!==n);r.prevZ.nextZ=null,r.prevZ=null,M$(r)}function M$(n){let e,t,i,r,s,o,a,l,c=1;do{for(t=n,n=null,s=null,o=0;t;){for(o++,i=t,a=0,e=0;e<c&&(a++,i=i.nextZ,!!i);e++);for(l=c;a>0||l>0&&i;)a!==0&&(l===0||!i||t.z<=i.z)?(r=t,t=t.nextZ,a--):(r=i,i=i.nextZ,l--),s?s.nextZ=r:n=r,r.prevZ=s,s=r;t=i}s.nextZ=null,c*=2}while(o>1);return n}function g1(n,e,t,i,r){return n=(n-t)*r|0,e=(e-i)*r|0,n=(n|n<<8)&16711935,n=(n|n<<4)&252645135,n=(n|n<<2)&858993459,n=(n|n<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,n|e<<1}function I$(n){let e=n,t=n;do(e.x<t.x||e.x===t.x&&e.y<t.y)&&(t=e),e=e.next;while(e!==n);return t}function Rd(n,e,t,i,r,s,o,a){return(r-o)*(e-a)>=(n-o)*(s-a)&&(n-o)*(i-a)>=(t-o)*(e-a)&&(t-o)*(s-a)>=(r-o)*(i-a)}function P$(n,e){return n.next.i!==e.i&&n.prev.i!==e.i&&!R$(n,e)&&(pg(n,e)&&pg(e,n)&&N$(n,e)&&(hi(n.prev,n,e.prev)||hi(n,e.prev,e))||kw(n,e)&&hi(n.prev,n,n.next)>0&&hi(e.prev,e,e.next)>0)}function hi(n,e,t){return(e.y-n.y)*(t.x-e.x)-(e.x-n.x)*(t.y-e.y)}function kw(n,e){return n.x===e.x&&n.y===e.y}function nV(n,e,t,i){const r=nx(hi(n,e,t)),s=nx(hi(n,e,i)),o=nx(hi(t,i,n)),a=nx(hi(t,i,e));return!!(r!==s&&o!==a||r===0&&tx(n,t,e)||s===0&&tx(n,i,e)||o===0&&tx(t,n,i)||a===0&&tx(t,e,i))}function tx(n,e,t){return e.x<=Math.max(n.x,t.x)&&e.x>=Math.min(n.x,t.x)&&e.y<=Math.max(n.y,t.y)&&e.y>=Math.min(n.y,t.y)}function nx(n){return n>0?1:n<0?-1:0}function R$(n,e){let t=n;do{if(t.i!==n.i&&t.next.i!==n.i&&t.i!==e.i&&t.next.i!==e.i&&nV(t,t.next,n,e))return!0;t=t.next}while(t!==n);return!1}function pg(n,e){return hi(n.prev,n,n.next)<0?hi(n,e,n.next)>=0&&hi(n,n.prev,e)>=0:hi(n,e,n.prev)<0||hi(n,n.next,e)<0}function N$(n,e){let t=n,i=!1;const r=(n.x+e.x)/2,s=(n.y+e.y)/2;do t.y>s!=t.next.y>s&&t.next.y!==t.y&&r<(t.next.x-t.x)*(s-t.y)/(t.next.y-t.y)+t.x&&(i=!i),t=t.next;while(t!==n);return i}function iV(n,e){const t=new y1(n.i,n.x,n.y),i=new y1(e.i,e.x,e.y),r=n.next,s=e.prev;return n.next=e,e.prev=n,t.next=r,r.prev=t,i.next=t,t.prev=i,s.next=i,i.prev=s,i}function K2(n,e,t,i){const r=new y1(n,e,t);return i?(r.next=i.next,r.prev=i,i.next.prev=r,i.next=r):(r.prev=r,r.next=r),r}function mg(n){n.next.prev=n.prev,n.prev.next=n.next,n.prevZ&&(n.prevZ.nextZ=n.nextZ),n.nextZ&&(n.nextZ.prevZ=n.prevZ)}function y1(n,e,t){this.i=n,this.x=e,this.y=t,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function D$(n,e,t,i){let r=0;for(let s=e,o=t-i;s<t;s+=i)r+=(n[o]-n[s])*(n[s+1]+n[o+1]),o=s;return r}class ia{static area(e){const t=e.length;let i=0;for(let r=t-1,s=0;s<t;r=s++)i+=e[r].x*e[s].y-e[s].x*e[r].y;return i*.5}static isClockWise(e){return ia.area(e)<0}static triangulateShape(e,t){const i=[],r=[],s=[];Y2(e),J2(i,e);let o=e.length;t.forEach(Y2);for(let l=0;l<t.length;l++)r.push(o),o+=t[l].length,J2(i,t[l]);const a=y$.triangulate(i,r);for(let l=0;l<a.length;l+=3)s.push(a.slice(l,l+3));return s}}function Y2(n){const e=n.length;e>2&&n[e-1].equals(n[0])&&n.pop()}function J2(n,e){for(let t=0;t<e.length;t++)n.push(e[t].x),n.push(e[t].y)}class Ow extends un{constructor(e=new Bu([new Le(.5,.5),new Le(-.5,.5),new Le(-.5,-.5),new Le(.5,-.5)]),t={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},e=Array.isArray(e)?e:[e];const i=this,r=[],s=[];for(let a=0,l=e.length;a<l;a++){const c=e[a];o(c)}this.setAttribute("position",new At(r,3)),this.setAttribute("uv",new At(s,2)),this.computeVertexNormals();function o(a){const l=[],c=t.curveSegments!==void 0?t.curveSegments:12,u=t.steps!==void 0?t.steps:1,f=t.depth!==void 0?t.depth:1;let m=t.bevelEnabled!==void 0?t.bevelEnabled:!0,g=t.bevelThickness!==void 0?t.bevelThickness:.2,x=t.bevelSize!==void 0?t.bevelSize:g-.1,b=t.bevelOffset!==void 0?t.bevelOffset:0,w=t.bevelSegments!==void 0?t.bevelSegments:3;const v=t.extrudePath,S=t.UVGenerator!==void 0?t.UVGenerator:L$;let E,I=!1,U,O,C,P;v&&(E=v.getSpacedPoints(u),I=!0,m=!1,U=v.computeFrenetFrames(u,!1),O=new K,C=new K,P=new K),m||(w=0,g=0,x=0,b=0);const M=a.extractPoints(c);let A=M.shape;const D=M.holes;if(!ia.isClockWise(A)){A=A.reverse();for(let Ae=0,Ee=D.length;Ae<Ee;Ae++){const X=D[Ae];ia.isClockWise(X)&&(D[Ae]=X.reverse())}}const j=ia.triangulateShape(A,D),te=A;for(let Ae=0,Ee=D.length;Ae<Ee;Ae++){const X=D[Ae];A=A.concat(X)}function ce(Ae,Ee,X){return Ee||console.error("THREE.ExtrudeGeometry: vec does not exist"),Ae.clone().addScaledVector(Ee,X)}const pe=A.length,de=j.length;function W(Ae,Ee,X){let pt,Oe,tt;const Ve=Ae.x-Ee.x,Mt=Ae.y-Ee.y,Xe=X.x-Ae.x,$=X.y-Ae.y,z=Ve*Ve+Mt*Mt,he=Ve*$-Mt*Xe;if(Math.abs(he)>Number.EPSILON){const Se=Math.sqrt(z),Re=Math.sqrt(Xe*Xe+$*$),we=Ee.x-Mt/Se,He=Ee.y+Ve/Se,Ge=X.x-$/Re,Qe=X.y+Xe/Re,Yt=((Ge-we)*$-(Qe-He)*Xe)/(Ve*$-Mt*Xe);pt=we+Ve*Yt-Ae.x,Oe=He+Mt*Yt-Ae.y;const Fe=pt*pt+Oe*Oe;if(Fe<=2)return new Le(pt,Oe);tt=Math.sqrt(Fe/2)}else{let Se=!1;Ve>Number.EPSILON?Xe>Number.EPSILON&&(Se=!0):Ve<-Number.EPSILON?Xe<-Number.EPSILON&&(Se=!0):Math.sign(Mt)===Math.sign($)&&(Se=!0),Se?(pt=-Mt,Oe=Ve,tt=Math.sqrt(z)):(pt=Ve,Oe=Mt,tt=Math.sqrt(z/2))}return new Le(pt/tt,Oe/tt)}const Z=[];for(let Ae=0,Ee=te.length,X=Ee-1,pt=Ae+1;Ae<Ee;Ae++,X++,pt++)X===Ee&&(X=0),pt===Ee&&(pt=0),Z[Ae]=W(te[Ae],te[X],te[pt]);const F=[];let J,ue=Z.concat();for(let Ae=0,Ee=D.length;Ae<Ee;Ae++){const X=D[Ae];J=[];for(let pt=0,Oe=X.length,tt=Oe-1,Ve=pt+1;pt<Oe;pt++,tt++,Ve++)tt===Oe&&(tt=0),Ve===Oe&&(Ve=0),J[pt]=W(X[pt],X[tt],X[Ve]);F.push(J),ue=ue.concat(J)}for(let Ae=0;Ae<w;Ae++){const Ee=Ae/w,X=g*Math.cos(Ee*Math.PI/2),pt=x*Math.sin(Ee*Math.PI/2)+b;for(let Oe=0,tt=te.length;Oe<tt;Oe++){const Ve=ce(te[Oe],Z[Oe],pt);Me(Ve.x,Ve.y,-X)}for(let Oe=0,tt=D.length;Oe<tt;Oe++){const Ve=D[Oe];J=F[Oe];for(let Mt=0,Xe=Ve.length;Mt<Xe;Mt++){const $=ce(Ve[Mt],J[Mt],pt);Me($.x,$.y,-X)}}}const ye=x+b;for(let Ae=0;Ae<pe;Ae++){const Ee=m?ce(A[Ae],ue[Ae],ye):A[Ae];I?(C.copy(U.normals[0]).multiplyScalar(Ee.x),O.copy(U.binormals[0]).multiplyScalar(Ee.y),P.copy(E[0]).add(C).add(O),Me(P.x,P.y,P.z)):Me(Ee.x,Ee.y,0)}for(let Ae=1;Ae<=u;Ae++)for(let Ee=0;Ee<pe;Ee++){const X=m?ce(A[Ee],ue[Ee],ye):A[Ee];I?(C.copy(U.normals[Ae]).multiplyScalar(X.x),O.copy(U.binormals[Ae]).multiplyScalar(X.y),P.copy(E[Ae]).add(C).add(O),Me(P.x,P.y,P.z)):Me(X.x,X.y,f/u*Ae)}for(let Ae=w-1;Ae>=0;Ae--){const Ee=Ae/w,X=g*Math.cos(Ee*Math.PI/2),pt=x*Math.sin(Ee*Math.PI/2)+b;for(let Oe=0,tt=te.length;Oe<tt;Oe++){const Ve=ce(te[Oe],Z[Oe],pt);Me(Ve.x,Ve.y,f+X)}for(let Oe=0,tt=D.length;Oe<tt;Oe++){const Ve=D[Oe];J=F[Oe];for(let Mt=0,Xe=Ve.length;Mt<Xe;Mt++){const $=ce(Ve[Mt],J[Mt],pt);I?Me($.x,$.y+E[u-1].y,E[u-1].x+X):Me($.x,$.y,f+X)}}}le(),xe();function le(){const Ae=r.length/3;if(m){let Ee=0,X=pe*Ee;for(let pt=0;pt<de;pt++){const Oe=j[pt];gt(Oe[2]+X,Oe[1]+X,Oe[0]+X)}Ee=u+w*2,X=pe*Ee;for(let pt=0;pt<de;pt++){const Oe=j[pt];gt(Oe[0]+X,Oe[1]+X,Oe[2]+X)}}else{for(let Ee=0;Ee<de;Ee++){const X=j[Ee];gt(X[2],X[1],X[0])}for(let Ee=0;Ee<de;Ee++){const X=j[Ee];gt(X[0]+pe*u,X[1]+pe*u,X[2]+pe*u)}}i.addGroup(Ae,r.length/3-Ae,0)}function xe(){const Ae=r.length/3;let Ee=0;Pe(te,Ee),Ee+=te.length;for(let X=0,pt=D.length;X<pt;X++){const Oe=D[X];Pe(Oe,Ee),Ee+=Oe.length}i.addGroup(Ae,r.length/3-Ae,1)}function Pe(Ae,Ee){let X=Ae.length;for(;--X>=0;){const pt=X;let Oe=X-1;Oe<0&&(Oe=Ae.length-1);for(let tt=0,Ve=u+w*2;tt<Ve;tt++){const Mt=pe*tt,Xe=pe*(tt+1),$=Ee+pt+Mt,z=Ee+Oe+Mt,he=Ee+Oe+Xe,Se=Ee+pt+Xe;Kt($,z,he,Se)}}}function Me(Ae,Ee,X){l.push(Ae),l.push(Ee),l.push(X)}function gt(Ae,Ee,X){Ye(Ae),Ye(Ee),Ye(X);const pt=r.length/3,Oe=S.generateTopUV(i,r,pt-3,pt-2,pt-1);rt(Oe[0]),rt(Oe[1]),rt(Oe[2])}function Kt(Ae,Ee,X,pt){Ye(Ae),Ye(Ee),Ye(pt),Ye(Ee),Ye(X),Ye(pt);const Oe=r.length/3,tt=S.generateSideWallUV(i,r,Oe-6,Oe-3,Oe-2,Oe-1);rt(tt[0]),rt(tt[1]),rt(tt[3]),rt(tt[1]),rt(tt[2]),rt(tt[3])}function Ye(Ae){r.push(l[Ae*3+0]),r.push(l[Ae*3+1]),r.push(l[Ae*3+2])}function rt(Ae){s.push(Ae.x),s.push(Ae.y)}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),t=this.parameters.shapes,i=this.parameters.options;return k$(t,i,e)}static fromJSON(e,t){const i=[];for(let s=0,o=e.shapes.length;s<o;s++){const a=t[e.shapes[s]];i.push(a)}const r=e.options.extrudePath;return r!==void 0&&(e.options.extrudePath=new g_[r.type]().fromJSON(r)),new Ow(i,e.options)}}const L$={generateTopUV:function(n,e,t,i,r){const s=e[t*3],o=e[t*3+1],a=e[i*3],l=e[i*3+1],c=e[r*3],u=e[r*3+1];return[new Le(s,o),new Le(a,l),new Le(c,u)]},generateSideWallUV:function(n,e,t,i,r,s){const o=e[t*3],a=e[t*3+1],l=e[t*3+2],c=e[i*3],u=e[i*3+1],f=e[i*3+2],m=e[r*3],g=e[r*3+1],x=e[r*3+2],b=e[s*3],w=e[s*3+1],v=e[s*3+2];return Math.abs(a-u)<Math.abs(o-c)?[new Le(o,1-l),new Le(c,1-f),new Le(m,1-x),new Le(b,1-v)]:[new Le(a,1-l),new Le(u,1-f),new Le(g,1-x),new Le(w,1-v)]}};function k$(n,e,t){if(t.shapes=[],Array.isArray(n))for(let i=0,r=n.length;i<r;i++){const s=n[i];t.shapes.push(s.uuid)}else t.shapes.push(n.uuid);return t.options=Object.assign({},e),e.extrudePath!==void 0&&(t.options.extrudePath=e.extrudePath.toJSON()),t}class Uw extends Pc{constructor(e=1,t=0){const i=(1+Math.sqrt(5))/2,r=[-1,i,0,1,i,0,-1,-i,0,1,-i,0,0,-1,i,0,1,i,0,-1,-i,0,1,-i,i,0,-1,i,0,1,-i,0,-1,-i,0,1],s=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];super(r,s,e,t),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new Uw(e.radius,e.detail)}}class Jg extends Pc{constructor(e=1,t=0){const i=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],r=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];super(i,r,e,t),this.type="OctahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new Jg(e.radius,e.detail)}}class Nf extends un{constructor(e=1,t=1,i=1,r=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:i,heightSegments:r};const s=e/2,o=t/2,a=Math.floor(i),l=Math.floor(r),c=a+1,u=l+1,f=e/a,m=t/l,g=[],x=[],b=[],w=[];for(let v=0;v<u;v++){const S=v*m-o;for(let E=0;E<c;E++){const I=E*f-s;x.push(I,-S,0),b.push(0,0,1),w.push(E/a),w.push(1-v/l)}}for(let v=0;v<l;v++)for(let S=0;S<a;S++){const E=S+c*v,I=S+c*(v+1),U=S+1+c*(v+1),O=S+1+c*v;g.push(E,I,O),g.push(I,U,O)}this.setIndex(g),this.setAttribute("position",new At(x,3)),this.setAttribute("normal",new At(b,3)),this.setAttribute("uv",new At(w,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Nf(e.width,e.height,e.widthSegments,e.heightSegments)}}class Fw extends un{constructor(e=.5,t=1,i=32,r=1,s=0,o=Math.PI*2){super(),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:i,phiSegments:r,thetaStart:s,thetaLength:o},i=Math.max(3,i),r=Math.max(1,r);const a=[],l=[],c=[],u=[];let f=e;const m=(t-e)/r,g=new K,x=new Le;for(let b=0;b<=r;b++){for(let w=0;w<=i;w++){const v=s+w/i*o;g.x=f*Math.cos(v),g.y=f*Math.sin(v),l.push(g.x,g.y,g.z),c.push(0,0,1),x.x=(g.x/t+1)/2,x.y=(g.y/t+1)/2,u.push(x.x,x.y)}f+=m}for(let b=0;b<r;b++){const w=b*(i+1);for(let v=0;v<i;v++){const S=v+w,E=S,I=S+i+1,U=S+i+2,O=S+1;a.push(E,I,O),a.push(I,U,O)}}this.setIndex(a),this.setAttribute("position",new At(l,3)),this.setAttribute("normal",new At(c,3)),this.setAttribute("uv",new At(u,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Fw(e.innerRadius,e.outerRadius,e.thetaSegments,e.phiSegments,e.thetaStart,e.thetaLength)}}class jw extends un{constructor(e=new Bu([new Le(0,.5),new Le(-.5,-.5),new Le(.5,-.5)]),t=12){super(),this.type="ShapeGeometry",this.parameters={shapes:e,curveSegments:t};const i=[],r=[],s=[],o=[];let a=0,l=0;if(Array.isArray(e)===!1)c(e);else for(let u=0;u<e.length;u++)c(e[u]),this.addGroup(a,l,u),a+=l,l=0;this.setIndex(i),this.setAttribute("position",new At(r,3)),this.setAttribute("normal",new At(s,3)),this.setAttribute("uv",new At(o,2));function c(u){const f=r.length/3,m=u.extractPoints(t);let g=m.shape;const x=m.holes;ia.isClockWise(g)===!1&&(g=g.reverse());for(let w=0,v=x.length;w<v;w++){const S=x[w];ia.isClockWise(S)===!0&&(x[w]=S.reverse())}const b=ia.triangulateShape(g,x);for(let w=0,v=x.length;w<v;w++){const S=x[w];g=g.concat(S)}for(let w=0,v=g.length;w<v;w++){const S=g[w];r.push(S.x,S.y,0),s.push(0,0,1),o.push(S.x,S.y)}for(let w=0,v=b.length;w<v;w++){const S=b[w],E=S[0]+f,I=S[1]+f,U=S[2]+f;i.push(E,I,U),l+=3}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),t=this.parameters.shapes;return O$(t,e)}static fromJSON(e,t){const i=[];for(let r=0,s=e.shapes.length;r<s;r++){const o=t[e.shapes[r]];i.push(o)}return new jw(i,e.curveSegments)}}function O$(n,e){if(e.shapes=[],Array.isArray(n))for(let t=0,i=n.length;t<i;t++){const r=n[t];e.shapes.push(r.uuid)}else e.shapes.push(n.uuid);return e}class Qg extends un{constructor(e=1,t=32,i=16,r=0,s=Math.PI*2,o=0,a=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:i,phiStart:r,phiLength:s,thetaStart:o,thetaLength:a},t=Math.max(3,Math.floor(t)),i=Math.max(2,Math.floor(i));const l=Math.min(o+a,Math.PI);let c=0;const u=[],f=new K,m=new K,g=[],x=[],b=[],w=[];for(let v=0;v<=i;v++){const S=[],E=v/i;let I=0;v===0&&o===0?I=.5/t:v===i&&l===Math.PI&&(I=-.5/t);for(let U=0;U<=t;U++){const O=U/t;f.x=-e*Math.cos(r+O*s)*Math.sin(o+E*a),f.y=e*Math.cos(o+E*a),f.z=e*Math.sin(r+O*s)*Math.sin(o+E*a),x.push(f.x,f.y,f.z),m.copy(f).normalize(),b.push(m.x,m.y,m.z),w.push(O+I,1-E),S.push(c++)}u.push(S)}for(let v=0;v<i;v++)for(let S=0;S<t;S++){const E=u[v][S+1],I=u[v][S],U=u[v+1][S],O=u[v+1][S+1];(v!==0||o>0)&&g.push(E,I,O),(v!==i-1||l<Math.PI)&&g.push(I,U,O)}this.setIndex(g),this.setAttribute("position",new At(x,3)),this.setAttribute("normal",new At(b,3)),this.setAttribute("uv",new At(w,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Qg(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class Vw extends Pc{constructor(e=1,t=0){const i=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],r=[2,1,0,0,3,2,1,3,0,2,3,1];super(i,r,e,t),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new Vw(e.radius,e.detail)}}class Bw extends un{constructor(e=1,t=.4,i=12,r=48,s=Math.PI*2){super(),this.type="TorusGeometry",this.parameters={radius:e,tube:t,radialSegments:i,tubularSegments:r,arc:s},i=Math.floor(i),r=Math.floor(r);const o=[],a=[],l=[],c=[],u=new K,f=new K,m=new K;for(let g=0;g<=i;g++)for(let x=0;x<=r;x++){const b=x/r*s,w=g/i*Math.PI*2;f.x=(e+t*Math.cos(w))*Math.cos(b),f.y=(e+t*Math.cos(w))*Math.sin(b),f.z=t*Math.sin(w),a.push(f.x,f.y,f.z),u.x=e*Math.cos(b),u.y=e*Math.sin(b),m.subVectors(f,u).normalize(),l.push(m.x,m.y,m.z),c.push(x/r),c.push(g/i)}for(let g=1;g<=i;g++)for(let x=1;x<=r;x++){const b=(r+1)*g+x-1,w=(r+1)*(g-1)+x-1,v=(r+1)*(g-1)+x,S=(r+1)*g+x;o.push(b,w,S),o.push(w,v,S)}this.setIndex(o),this.setAttribute("position",new At(a,3)),this.setAttribute("normal",new At(l,3)),this.setAttribute("uv",new At(c,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Bw(e.radius,e.tube,e.radialSegments,e.tubularSegments,e.arc)}}class zw extends un{constructor(e=1,t=.4,i=64,r=8,s=2,o=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:t,tubularSegments:i,radialSegments:r,p:s,q:o},i=Math.floor(i),r=Math.floor(r);const a=[],l=[],c=[],u=[],f=new K,m=new K,g=new K,x=new K,b=new K,w=new K,v=new K;for(let E=0;E<=i;++E){const I=E/i*s*Math.PI*2;S(I,s,o,e,g),S(I+.01,s,o,e,x),w.subVectors(x,g),v.addVectors(x,g),b.crossVectors(w,v),v.crossVectors(b,w),b.normalize(),v.normalize();for(let U=0;U<=r;++U){const O=U/r*Math.PI*2,C=-t*Math.cos(O),P=t*Math.sin(O);f.x=g.x+(C*v.x+P*b.x),f.y=g.y+(C*v.y+P*b.y),f.z=g.z+(C*v.z+P*b.z),l.push(f.x,f.y,f.z),m.subVectors(f,g).normalize(),c.push(m.x,m.y,m.z),u.push(E/i),u.push(U/r)}}for(let E=1;E<=i;E++)for(let I=1;I<=r;I++){const U=(r+1)*(E-1)+(I-1),O=(r+1)*E+(I-1),C=(r+1)*E+I,P=(r+1)*(E-1)+I;a.push(U,O,P),a.push(O,C,P)}this.setIndex(a),this.setAttribute("position",new At(l,3)),this.setAttribute("normal",new At(c,3)),this.setAttribute("uv",new At(u,2));function S(E,I,U,O,C){const P=Math.cos(E),M=Math.sin(E),A=U/I*E,D=Math.cos(A);C.x=O*(2+D)*.5*P,C.y=O*(2+D)*M*.5,C.z=O*Math.sin(A)*.5}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new zw(e.radius,e.tube,e.tubularSegments,e.radialSegments,e.p,e.q)}}class Hw extends un{constructor(e=new KA(new K(-1,-1,0),new K(-1,1,0),new K(1,1,0)),t=64,i=1,r=8,s=!1){super(),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:t,radius:i,radialSegments:r,closed:s};const o=e.computeFrenetFrames(t,s);this.tangents=o.tangents,this.normals=o.normals,this.binormals=o.binormals;const a=new K,l=new K,c=new Le;let u=new K;const f=[],m=[],g=[],x=[];b(),this.setIndex(x),this.setAttribute("position",new At(f,3)),this.setAttribute("normal",new At(m,3)),this.setAttribute("uv",new At(g,2));function b(){for(let E=0;E<t;E++)w(E);w(s===!1?t:0),S(),v()}function w(E){u=e.getPointAt(E/t,u);const I=o.normals[E],U=o.binormals[E];for(let O=0;O<=r;O++){const C=O/r*Math.PI*2,P=Math.sin(C),M=-Math.cos(C);l.x=M*I.x+P*U.x,l.y=M*I.y+P*U.y,l.z=M*I.z+P*U.z,l.normalize(),m.push(l.x,l.y,l.z),a.x=u.x+i*l.x,a.y=u.y+i*l.y,a.z=u.z+i*l.z,f.push(a.x,a.y,a.z)}}function v(){for(let E=1;E<=t;E++)for(let I=1;I<=r;I++){const U=(r+1)*(E-1)+(I-1),O=(r+1)*E+(I-1),C=(r+1)*E+I,P=(r+1)*(E-1)+I;x.push(U,O,P),x.push(O,C,P)}}function S(){for(let E=0;E<=t;E++)for(let I=0;I<=r;I++)c.x=E/t,c.y=I/r,g.push(c.x,c.y)}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON();return e.path=this.parameters.path.toJSON(),e}static fromJSON(e){return new Hw(new g_[e.path.type]().fromJSON(e.path),e.tubularSegments,e.radius,e.radialSegments,e.closed)}}class rV extends un{constructor(e=null){if(super(),this.type="WireframeGeometry",this.parameters={geometry:e},e!==null){const t=[],i=new Set,r=new K,s=new K;if(e.index!==null){const o=e.attributes.position,a=e.index;let l=e.groups;l.length===0&&(l=[{start:0,count:a.count,materialIndex:0}]);for(let c=0,u=l.length;c<u;++c){const f=l[c],m=f.start,g=f.count;for(let x=m,b=m+g;x<b;x+=3)for(let w=0;w<3;w++){const v=a.getX(x+w),S=a.getX(x+(w+1)%3);r.fromBufferAttribute(o,v),s.fromBufferAttribute(o,S),Q2(r,s,i)===!0&&(t.push(r.x,r.y,r.z),t.push(s.x,s.y,s.z))}}}else{const o=e.attributes.position;for(let a=0,l=o.count/3;a<l;a++)for(let c=0;c<3;c++){const u=3*a+c,f=3*a+(c+1)%3;r.fromBufferAttribute(o,u),s.fromBufferAttribute(o,f),Q2(r,s,i)===!0&&(t.push(r.x,r.y,r.z),t.push(s.x,s.y,s.z))}}this.setAttribute("position",new At(t,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}function Q2(n,e,t){const i=`${n.x},${n.y},${n.z}-${e.x},${e.y},${e.z}`,r=`${e.x},${e.y},${e.z}-${n.x},${n.y},${n.z}`;return t.has(i)===!0||t.has(r)===!0?!1:(t.add(i),t.add(r),!0)}var Z2=Object.freeze({__proto__:null,BoxGeometry:dh,CapsuleGeometry:Rw,CircleGeometry:Nw,ConeGeometry:Dw,CylinderGeometry:Rf,DodecahedronGeometry:Lw,EdgesGeometry:eV,ExtrudeGeometry:Ow,IcosahedronGeometry:Uw,LatheGeometry:Yg,OctahedronGeometry:Jg,PlaneGeometry:Nf,PolyhedronGeometry:Pc,RingGeometry:Fw,ShapeGeometry:jw,SphereGeometry:Qg,TetrahedronGeometry:Vw,TorusGeometry:Bw,TorusKnotGeometry:zw,TubeGeometry:Hw,WireframeGeometry:rV});class sV extends Br{constructor(e){super(),this.isShadowMaterial=!0,this.type="ShadowMaterial",this.color=new xt(0),this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.fog=e.fog,this}}class oV extends ko{constructor(e){super(e),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}}class JA extends Br{constructor(e){super(),this.isMeshStandardMaterial=!0,this.type="MeshStandardMaterial",this.defines={STANDARD:""},this.color=new xt(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new xt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Mc,this.normalScale=new Le(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new zs,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class aV extends JA{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.anisotropyRotation=0,this.anisotropyMap=null,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new Le(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return Jt(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(t){this.ior=(1+.4*t)/(1-.4*t)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new xt(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new xt(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new xt(1,1,1),this.specularColorMap=null,this._anisotropy=0,this._clearcoat=0,this._dispersion=0,this._iridescence=0,this._sheen=0,this._transmission=0,this.setValues(e)}get anisotropy(){return this._anisotropy}set anisotropy(e){this._anisotropy>0!=e>0&&this.version++,this._anisotropy=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!=e>0&&this.version++,this._iridescence=e}get dispersion(){return this._dispersion}set dispersion(e){this._dispersion>0!=e>0&&this.version++,this._dispersion=e}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.anisotropy=e.anisotropy,this.anisotropyRotation=e.anisotropyRotation,this.anisotropyMap=e.anisotropyMap,this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.dispersion=e.dispersion,this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}class lV extends Br{constructor(e){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new xt(16777215),this.specular=new xt(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new xt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Mc,this.normalScale=new Le(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new zs,this.combine=Gg,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class cV extends Br{constructor(e){super(),this.isMeshToonMaterial=!0,this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new xt(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new xt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Mc,this.normalScale=new Le(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}class uV extends Br{constructor(e){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Mc,this.normalScale=new Le(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}class hV extends Br{constructor(e){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new xt(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new xt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Mc,this.normalScale=new Le(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new zs,this.combine=Gg,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class QA extends Br{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=Tj,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class ZA extends Br{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}class dV extends Br{constructor(e){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new xt(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Mc,this.normalScale=new Le(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.flatShading=e.flatShading,this.fog=e.fog,this}}class fV extends ts{constructor(e){super(),this.isLineDashedMaterial=!0,this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}copy(e){return super.copy(e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}function Ru(n,e,t){return!n||!t&&n.constructor===e?n:typeof e.BYTES_PER_ELEMENT=="number"?new e(n):Array.prototype.slice.call(n)}function pV(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}function mV(n){function e(r,s){return n[r]-n[s]}const t=n.length,i=new Array(t);for(let r=0;r!==t;++r)i[r]=r;return i.sort(e),i}function v1(n,e,t){const i=n.length,r=new n.constructor(i);for(let s=0,o=0;o!==i;++s){const a=t[s]*e;for(let l=0;l!==e;++l)r[o++]=n[a+l]}return r}function eM(n,e,t,i){let r=1,s=n[0];for(;s!==void 0&&s[i]===void 0;)s=n[r++];if(s===void 0)return;let o=s[i];if(o!==void 0)if(Array.isArray(o))do o=s[i],o!==void 0&&(e.push(s.time),t.push(...o)),s=n[r++];while(s!==void 0);else if(o.toArray!==void 0)do o=s[i],o!==void 0&&(e.push(s.time),o.toArray(t,t.length)),s=n[r++];while(s!==void 0);else do o=s[i],o!==void 0&&(e.push(s.time),t.push(o)),s=n[r++];while(s!==void 0)}function U$(n,e,t,i,r=30){const s=n.clone();s.name=e;const o=[];for(let l=0;l<s.tracks.length;++l){const c=s.tracks[l],u=c.getValueSize(),f=[],m=[];for(let g=0;g<c.times.length;++g){const x=c.times[g]*r;if(!(x<t||x>=i)){f.push(c.times[g]);for(let b=0;b<u;++b)m.push(c.values[g*u+b])}}f.length!==0&&(c.times=Ru(f,c.times.constructor),c.values=Ru(m,c.values.constructor),o.push(c))}s.tracks=o;let a=1/0;for(let l=0;l<s.tracks.length;++l)a>s.tracks[l].times[0]&&(a=s.tracks[l].times[0]);for(let l=0;l<s.tracks.length;++l)s.tracks[l].shift(-1*a);return s.resetDuration(),s}function F$(n,e=0,t=n,i=30){i<=0&&(i=30);const r=t.tracks.length,s=e/i;for(let o=0;o<r;++o){const a=t.tracks[o],l=a.ValueTypeName;if(l==="bool"||l==="string")continue;const c=n.tracks.find(function(v){return v.name===a.name&&v.ValueTypeName===l});if(c===void 0)continue;let u=0;const f=a.getValueSize();a.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(u=f/3);let m=0;const g=c.getValueSize();c.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(m=g/3);const x=a.times.length-1;let b;if(s<=a.times[0]){const v=u,S=f-u;b=a.values.slice(v,S)}else if(s>=a.times[x]){const v=x*f+u,S=v+f-u;b=a.values.slice(v,S)}else{const v=a.createInterpolant(),S=u,E=f-u;v.evaluate(s),b=v.resultBuffer.slice(S,E)}l==="quaternion"&&new _s().fromArray(b).normalize().conjugate().toArray(b);const w=c.times.length;for(let v=0;v<w;++v){const S=v*g+m;if(l==="quaternion")_s.multiplyQuaternionsFlat(c.values,S,b,0,c.values,S);else{const E=g-m*2;for(let I=0;I<E;++I)c.values[S+I]-=b[I]}}}return n.blendMode=LA,n}const j$={convertArray:Ru,isTypedArray:pV,getKeyframeOrder:mV,sortedArray:v1,flattenJSON:eM,subclip:U$,makeClipAdditive:F$};class Zg{constructor(e,t,i,r){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=r!==void 0?r:new t.constructor(i),this.sampleValues=t,this.valueSize=i,this.settings=null,this.DefaultSettings_={}}evaluate(e){const t=this.parameterPositions;let i=this._cachedIndex,r=t[i],s=t[i-1];e:{t:{let o;n:{i:if(!(e<r)){for(let a=i+2;;){if(r===void 0){if(e<s)break i;return i=t.length,this._cachedIndex=i,this.copySampleValue_(i-1)}if(i===a)break;if(s=r,r=t[++i],e<r)break t}o=t.length;break n}if(!(e>=s)){const a=t[1];e<a&&(i=2,s=a);for(let l=i-2;;){if(s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(i===l)break;if(r=s,s=t[--i-1],e>=s)break t}o=i,i=0;break n}break e}for(;i<o;){const a=i+o>>>1;e<t[a]?o=a:i=a+1}if(r=t[i],s=t[i-1],s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(r===void 0)return i=t.length,this._cachedIndex=i,this.copySampleValue_(i-1)}this._cachedIndex=i,this.intervalChanged_(i,s,r)}return this.interpolate_(i,s,e,r)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const t=this.resultBuffer,i=this.sampleValues,r=this.valueSize,s=e*r;for(let o=0;o!==r;++o)t[o]=i[s+o];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class gV extends Zg{constructor(e,t,i,r){super(e,t,i,r),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:Iu,endingEnd:Iu}}intervalChanged_(e,t,i){const r=this.parameterPositions;let s=e-2,o=e+1,a=r[s],l=r[o];if(a===void 0)switch(this.getSettings_().endingStart){case Pu:s=e,a=2*t-i;break;case ag:s=r.length-2,a=t+r[s]-r[s+1];break;default:s=e,a=i}if(l===void 0)switch(this.getSettings_().endingEnd){case Pu:o=e,l=2*i-t;break;case ag:o=1,l=i+r[1]-r[0];break;default:o=e-1,l=t}const c=(i-t)*.5,u=this.valueSize;this._weightPrev=c/(t-a),this._weightNext=c/(l-i),this._offsetPrev=s*u,this._offsetNext=o*u}interpolate_(e,t,i,r){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=e*a,c=l-a,u=this._offsetPrev,f=this._offsetNext,m=this._weightPrev,g=this._weightNext,x=(i-t)/(r-t),b=x*x,w=b*x,v=-m*w+2*m*b-m*x,S=(1+m)*w+(-1.5-2*m)*b+(-.5+m)*x+1,E=(-1-g)*w+(1.5+g)*b+.5*x,I=g*w-g*b;for(let U=0;U!==a;++U)s[U]=v*o[u+U]+S*o[c+U]+E*o[l+U]+I*o[f+U];return s}}class tM extends Zg{constructor(e,t,i,r){super(e,t,i,r)}interpolate_(e,t,i,r){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=e*a,c=l-a,u=(i-t)/(r-t),f=1-u;for(let m=0;m!==a;++m)s[m]=o[c+m]*f+o[l+m]*u;return s}}class yV extends Zg{constructor(e,t,i,r){super(e,t,i,r)}interpolate_(e){return this.copySampleValue_(e-1)}}class Vo{constructor(e,t,i,r){if(e===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(t===void 0||t.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=Ru(t,this.TimeBufferType),this.values=Ru(i,this.ValueBufferType),this.setInterpolation(r||this.DefaultInterpolation)}static toJSON(e){const t=e.constructor;let i;if(t.toJSON!==this.toJSON)i=t.toJSON(e);else{i={name:e.name,times:Ru(e.times,Array),values:Ru(e.values,Array)};const r=e.getInterpolation();r!==e.DefaultInterpolation&&(i.interpolation=r)}return i.type=e.ValueTypeName,i}InterpolantFactoryMethodDiscrete(e){return new yV(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new tM(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new gV(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case og:t=this.InterpolantFactoryMethodDiscrete;break;case f_:t=this.InterpolantFactoryMethodLinear;break;case Bx:t=this.InterpolantFactoryMethodSmooth;break}if(t===void 0){const i="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(i);return console.warn("THREE.KeyframeTrack:",i),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return og;case this.InterpolantFactoryMethodLinear:return f_;case this.InterpolantFactoryMethodSmooth:return Bx}}getValueSize(){return this.values.length/this.times.length}shift(e){if(e!==0){const t=this.times;for(let i=0,r=t.length;i!==r;++i)t[i]+=e}return this}scale(e){if(e!==1){const t=this.times;for(let i=0,r=t.length;i!==r;++i)t[i]*=e}return this}trim(e,t){const i=this.times,r=i.length;let s=0,o=r-1;for(;s!==r&&i[s]<e;)++s;for(;o!==-1&&i[o]>t;)--o;if(++o,s!==0||o!==r){s>=o&&(o=Math.max(o,1),s=o-1);const a=this.getValueSize();this.times=i.slice(s,o),this.values=this.values.slice(s*a,o*a)}return this}validate(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const i=this.times,r=this.values,s=i.length;s===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let o=null;for(let a=0;a!==s;a++){const l=i[a];if(typeof l=="number"&&isNaN(l)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,a,l),e=!1;break}if(o!==null&&o>l){console.error("THREE.KeyframeTrack: Out of order keys.",this,a,l,o),e=!1;break}o=l}if(r!==void 0&&pV(r))for(let a=0,l=r.length;a!==l;++a){const c=r[a];if(isNaN(c)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,a,c),e=!1;break}}return e}optimize(){const e=this.times.slice(),t=this.values.slice(),i=this.getValueSize(),r=this.getInterpolation()===Bx,s=e.length-1;let o=1;for(let a=1;a<s;++a){let l=!1;const c=e[a],u=e[a+1];if(c!==u&&(a!==1||c!==e[0]))if(r)l=!0;else{const f=a*i,m=f-i,g=f+i;for(let x=0;x!==i;++x){const b=t[f+x];if(b!==t[m+x]||b!==t[g+x]){l=!0;break}}}if(l){if(a!==o){e[o]=e[a];const f=a*i,m=o*i;for(let g=0;g!==i;++g)t[m+g]=t[f+g]}++o}}if(s>0){e[o]=e[s];for(let a=s*i,l=o*i,c=0;c!==i;++c)t[l+c]=t[a+c];++o}return o!==e.length?(this.times=e.slice(0,o),this.values=t.slice(0,o*i)):(this.times=e,this.values=t),this}clone(){const e=this.times.slice(),t=this.values.slice(),i=this.constructor,r=new i(this.name,e,t);return r.createInterpolant=this.createInterpolant,r}}Vo.prototype.TimeBufferType=Float32Array;Vo.prototype.ValueBufferType=Float32Array;Vo.prototype.DefaultInterpolation=f_;class fh extends Vo{constructor(e,t,i){super(e,t,i)}}fh.prototype.ValueTypeName="bool";fh.prototype.ValueBufferType=Array;fh.prototype.DefaultInterpolation=og;fh.prototype.InterpolantFactoryMethodLinear=void 0;fh.prototype.InterpolantFactoryMethodSmooth=void 0;class nM extends Vo{}nM.prototype.ValueTypeName="color";class gg extends Vo{}gg.prototype.ValueTypeName="number";class vV extends Zg{constructor(e,t,i,r){super(e,t,i,r)}interpolate_(e,t,i,r){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=(i-t)/(r-t);let c=e*a;for(let u=c+a;c!==u;c+=4)_s.slerpFlat(s,0,o,c-a,o,c,l);return s}}class ey extends Vo{InterpolantFactoryMethodLinear(e){return new vV(this.times,this.values,this.getValueSize(),e)}}ey.prototype.ValueTypeName="quaternion";ey.prototype.InterpolantFactoryMethodSmooth=void 0;class ph extends Vo{constructor(e,t,i){super(e,t,i)}}ph.prototype.ValueTypeName="string";ph.prototype.ValueBufferType=Array;ph.prototype.DefaultInterpolation=og;ph.prototype.InterpolantFactoryMethodLinear=void 0;ph.prototype.InterpolantFactoryMethodSmooth=void 0;class yg extends Vo{}yg.prototype.ValueTypeName="vector";class vg{constructor(e="",t=-1,i=[],r=ww){this.name=e,this.tracks=i,this.duration=t,this.blendMode=r,this.uuid=Fs(),this.duration<0&&this.resetDuration()}static parse(e){const t=[],i=e.tracks,r=1/(e.fps||1);for(let o=0,a=i.length;o!==a;++o)t.push(B$(i[o]).scale(r));const s=new this(e.name,e.duration,t,e.blendMode);return s.uuid=e.uuid,s}static toJSON(e){const t=[],i=e.tracks,r={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode};for(let s=0,o=i.length;s!==o;++s)t.push(Vo.toJSON(i[s]));return r}static CreateFromMorphTargetSequence(e,t,i,r){const s=t.length,o=[];for(let a=0;a<s;a++){let l=[],c=[];l.push((a+s-1)%s,a,(a+1)%s),c.push(0,1,0);const u=mV(l);l=v1(l,1,u),c=v1(c,1,u),!r&&l[0]===0&&(l.push(s),c.push(c[0])),o.push(new gg(".morphTargetInfluences["+t[a].name+"]",l,c).scale(1/i))}return new this(e,-1,o)}static findByName(e,t){let i=e;if(!Array.isArray(e)){const r=e;i=r.geometry&&r.geometry.animations||r.animations}for(let r=0;r<i.length;r++)if(i[r].name===t)return i[r];return null}static CreateClipsFromMorphTargetSequences(e,t,i){const r={},s=/^([\w-]*?)([\d]+)$/;for(let a=0,l=e.length;a<l;a++){const c=e[a],u=c.name.match(s);if(u&&u.length>1){const f=u[1];let m=r[f];m||(r[f]=m=[]),m.push(c)}}const o=[];for(const a in r)o.push(this.CreateFromMorphTargetSequence(a,r[a],t,i));return o}static parseAnimation(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const i=function(f,m,g,x,b){if(g.length!==0){const w=[],v=[];eM(g,w,v,x),w.length!==0&&b.push(new f(m,w,v))}},r=[],s=e.name||"default",o=e.fps||30,a=e.blendMode;let l=e.length||-1;const c=e.hierarchy||[];for(let f=0;f<c.length;f++){const m=c[f].keys;if(!(!m||m.length===0))if(m[0].morphTargets){const g={};let x;for(x=0;x<m.length;x++)if(m[x].morphTargets)for(let b=0;b<m[x].morphTargets.length;b++)g[m[x].morphTargets[b]]=-1;for(const b in g){const w=[],v=[];for(let S=0;S!==m[x].morphTargets.length;++S){const E=m[x];w.push(E.time),v.push(E.morphTarget===b?1:0)}r.push(new gg(".morphTargetInfluence["+b+"]",w,v))}l=g.length*o}else{const g=".bones["+t[f].name+"]";i(yg,g+".position",m,"pos",r),i(ey,g+".quaternion",m,"rot",r),i(yg,g+".scale",m,"scl",r)}}return r.length===0?null:new this(s,l,r,a)}resetDuration(){const e=this.tracks;let t=0;for(let i=0,r=e.length;i!==r;++i){const s=this.tracks[i];t=Math.max(t,s.times[s.times.length-1])}return this.duration=t,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function V$(n){switch(n.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return gg;case"vector":case"vector2":case"vector3":case"vector4":return yg;case"color":return nM;case"quaternion":return ey;case"bool":case"boolean":return fh;case"string":return ph}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+n)}function B$(n){if(n.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=V$(n.type);if(n.times===void 0){const t=[],i=[];eM(n.keys,t,i,"value"),n.times=t,n.values=i}return e.parse!==void 0?e.parse(n):new e(n.name,n.times,n.values,n.interpolation)}const Da={enabled:!1,files:{},add:function(n,e){this.enabled!==!1&&(this.files[n]=e)},get:function(n){if(this.enabled!==!1)return this.files[n]},remove:function(n){delete this.files[n]},clear:function(){this.files={}}};class iM{constructor(e,t,i){const r=this;let s=!1,o=0,a=0,l;const c=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=i,this.itemStart=function(u){a++,s===!1&&r.onStart!==void 0&&r.onStart(u,o,a),s=!0},this.itemEnd=function(u){o++,r.onProgress!==void 0&&r.onProgress(u,o,a),o===a&&(s=!1,r.onLoad!==void 0&&r.onLoad())},this.itemError=function(u){r.onError!==void 0&&r.onError(u)},this.resolveURL=function(u){return l?l(u):u},this.setURLModifier=function(u){return l=u,this},this.addHandler=function(u,f){return c.push(u,f),this},this.removeHandler=function(u){const f=c.indexOf(u);return f!==-1&&c.splice(f,2),this},this.getHandler=function(u){for(let f=0,m=c.length;f<m;f+=2){const g=c[f],x=c[f+1];if(g.global&&(g.lastIndex=0),g.test(u))return x}return null}}}const Nd=new iM;let ws=class{constructor(e){this.manager=e!==void 0?e:Nd,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){const i=this;return new Promise(function(r,s){i.load(e,r,t,s)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}};ws.DEFAULT_MATERIAL_NAME="__DEFAULT";const Ca={};class z$ extends Error{constructor(e,t){super(e),this.response=t}}class Qa extends ws{constructor(e){super(e)}load(e,t,i,r){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=Da.get(e);if(s!==void 0)return this.manager.itemStart(e),setTimeout(()=>{t&&t(s),this.manager.itemEnd(e)},0),s;if(Ca[e]!==void 0){Ca[e].push({onLoad:t,onProgress:i,onError:r});return}Ca[e]=[],Ca[e].push({onLoad:t,onProgress:i,onError:r});const o=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),a=this.mimeType,l=this.responseType;fetch(o).then(c=>{if(c.status===200||c.status===0){if(c.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||c.body===void 0||c.body.getReader===void 0)return c;const u=Ca[e],f=c.body.getReader(),m=c.headers.get("X-File-Size")||c.headers.get("Content-Length"),g=m?parseInt(m):0,x=g!==0;let b=0;const w=new ReadableStream({start(v){S();function S(){f.read().then(({done:E,value:I})=>{if(E)v.close();else{b+=I.byteLength;const U=new ProgressEvent("progress",{lengthComputable:x,loaded:b,total:g});for(let O=0,C=u.length;O<C;O++){const P=u[O];P.onProgress&&P.onProgress(U)}v.enqueue(I),S()}},E=>{v.error(E)})}}});return new Response(w)}else throw new z$(`fetch for "${c.url}" responded with ${c.status}: ${c.statusText}`,c)}).then(c=>{switch(l){case"arraybuffer":return c.arrayBuffer();case"blob":return c.blob();case"document":return c.text().then(u=>new DOMParser().parseFromString(u,a));case"json":return c.json();default:if(a===void 0)return c.text();{const f=/charset="?([^;"\s]*)"?/i.exec(a),m=f&&f[1]?f[1].toLowerCase():void 0,g=new TextDecoder(m);return c.arrayBuffer().then(x=>g.decode(x))}}}).then(c=>{Da.add(e,c);const u=Ca[e];delete Ca[e];for(let f=0,m=u.length;f<m;f++){const g=u[f];g.onLoad&&g.onLoad(c)}}).catch(c=>{const u=Ca[e];if(u===void 0)throw this.manager.itemError(e),c;delete Ca[e];for(let f=0,m=u.length;f<m;f++){const g=u[f];g.onError&&g.onError(c)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}}class H$ extends ws{constructor(e){super(e)}load(e,t,i,r){const s=this,o=new Qa(this.manager);o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(a){try{t(s.parse(JSON.parse(a)))}catch(l){r?r(l):console.error(l),s.manager.itemError(e)}},i,r)}parse(e){const t=[];for(let i=0;i<e.length;i++){const r=vg.parse(e[i]);t.push(r)}return t}}class G$ extends ws{constructor(e){super(e)}load(e,t,i,r){const s=this,o=[],a=new Iw,l=new Qa(this.manager);l.setPath(this.path),l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setWithCredentials(s.withCredentials);let c=0;function u(f){l.load(e[f],function(m){const g=s.parse(m,!0);o[f]={width:g.width,height:g.height,format:g.format,mipmaps:g.mipmaps},c+=1,c===6&&(g.mipmapCount===1&&(a.minFilter=Xi),a.image=o,a.format=g.format,a.needsUpdate=!0,t&&t(a))},i,r)}if(Array.isArray(e))for(let f=0,m=e.length;f<m;++f)u(f);else l.load(e,function(f){const m=s.parse(f,!0);if(m.isCubemap){const g=m.mipmaps.length/m.mipmapCount;for(let x=0;x<g;x++){o[x]={mipmaps:[]};for(let b=0;b<m.mipmapCount;b++)o[x].mipmaps.push(m.mipmaps[x*m.mipmapCount+b]),o[x].format=m.format,o[x].width=m.width,o[x].height=m.height}a.image=o}else a.image.width=m.width,a.image.height=m.height,a.mipmaps=m.mipmaps;m.mipmapCount===1&&(a.minFilter=Xi),a.format=m.format,a.needsUpdate=!0,t&&t(a)},i,r);return a}}class xg extends ws{constructor(e){super(e)}load(e,t,i,r){this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,o=Da.get(e);if(o!==void 0)return s.manager.itemStart(e),setTimeout(function(){t&&t(o),s.manager.itemEnd(e)},0),o;const a=hg("img");function l(){u(),Da.add(e,this),t&&t(this),s.manager.itemEnd(e)}function c(f){u(),r&&r(f),s.manager.itemError(e),s.manager.itemEnd(e)}function u(){a.removeEventListener("load",l,!1),a.removeEventListener("error",c,!1)}return a.addEventListener("load",l,!1),a.addEventListener("error",c,!1),e.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(a.crossOrigin=this.crossOrigin),s.manager.itemStart(e),a.src=e,a}}class W$ extends ws{constructor(e){super(e)}load(e,t,i,r){const s=new Xg;s.colorSpace=us;const o=new xg(this.manager);o.setCrossOrigin(this.crossOrigin),o.setPath(this.path);let a=0;function l(c){o.load(e[c],function(u){s.images[c]=u,a++,a===6&&(s.needsUpdate=!0,t&&t(s))},void 0,r)}for(let c=0;c<e.length;++c)l(c);return s}}class q$ extends ws{constructor(e){super(e)}load(e,t,i,r){const s=this,o=new na,a=new Qa(this.manager);return a.setResponseType("arraybuffer"),a.setRequestHeader(this.requestHeader),a.setPath(this.path),a.setWithCredentials(s.withCredentials),a.load(e,function(l){let c;try{c=s.parse(l)}catch(u){if(r!==void 0)r(u);else{console.error(u);return}}c.image!==void 0?o.image=c.image:c.data!==void 0&&(o.image.width=c.width,o.image.height=c.height,o.image.data=c.data),o.wrapS=c.wrapS!==void 0?c.wrapS:lo,o.wrapT=c.wrapT!==void 0?c.wrapT:lo,o.magFilter=c.magFilter!==void 0?c.magFilter:Xi,o.minFilter=c.minFilter!==void 0?c.minFilter:Xi,o.anisotropy=c.anisotropy!==void 0?c.anisotropy:1,c.colorSpace!==void 0&&(o.colorSpace=c.colorSpace),c.flipY!==void 0&&(o.flipY=c.flipY),c.format!==void 0&&(o.format=c.format),c.type!==void 0&&(o.type=c.type),c.mipmaps!==void 0&&(o.mipmaps=c.mipmaps,o.minFilter=Yo),c.mipmapCount===1&&(o.minFilter=Xi),c.generateMipmaps!==void 0&&(o.generateMipmaps=c.generateMipmaps),o.needsUpdate=!0,t&&t(o,c)},i,r),o}}class $$ extends ws{constructor(e){super(e)}load(e,t,i,r){const s=new _i,o=new xg(this.manager);return o.setCrossOrigin(this.crossOrigin),o.setPath(this.path),o.load(e,function(a){s.image=a,s.needsUpdate=!0,t!==void 0&&t(s)},i,r),s}}class Rc extends Dn{constructor(e,t=1){super(),this.isLight=!0,this.type="Light",this.color=new xt(e),this.intensity=t}dispose(){}copy(e,t){return super.copy(e,t),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,this.groundColor!==void 0&&(t.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(t.object.distance=this.distance),this.angle!==void 0&&(t.object.angle=this.angle),this.decay!==void 0&&(t.object.decay=this.decay),this.penumbra!==void 0&&(t.object.penumbra=this.penumbra),this.shadow!==void 0&&(t.object.shadow=this.shadow.toJSON()),this.target!==void 0&&(t.object.target=this.target.uuid),t}}class xV extends Rc{constructor(e,t,i){super(e,i),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(Dn.DEFAULT_UP),this.updateMatrix(),this.groundColor=new xt(t)}copy(e,t){return super.copy(e,t),this.groundColor.copy(e.groundColor),this}}const TT=new Vt,eD=new K,tD=new K;class rM{constructor(e){this.camera=e,this.intensity=1,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new Le(512,512),this.map=null,this.mapPass=null,this.matrix=new Vt,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new Kg,this._frameExtents=new Le(1,1),this._viewportCount=1,this._viewports=[new Rn(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const t=this.camera,i=this.matrix;eD.setFromMatrixPosition(e.matrixWorld),t.position.copy(eD),tD.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(tD),t.updateMatrixWorld(),TT.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(TT),i.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),i.multiply(TT)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.intensity=e.intensity,this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const e={};return this.intensity!==1&&(e.intensity=this.intensity),this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class X$ extends rM{constructor(){super(new Ui(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(e){const t=this.camera,i=cf*2*e.angle*this.focus,r=this.mapSize.width/this.mapSize.height,s=e.distance||t.far;(i!==t.fov||r!==t.aspect||s!==t.far)&&(t.fov=i,t.aspect=r,t.far=s,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}class _V extends Rc{constructor(e,t,i=0,r=Math.PI/3,s=0,o=2){super(e,t),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(Dn.DEFAULT_UP),this.updateMatrix(),this.target=new Dn,this.distance=i,this.angle=r,this.penumbra=s,this.decay=o,this.map=null,this.shadow=new X$}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}const nD=new Vt,Op=new K,ET=new K;class K$ extends rM{constructor(){super(new Ui(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new Le(4,2),this._viewportCount=6,this._viewports=[new Rn(2,1,1,1),new Rn(0,1,1,1),new Rn(3,1,1,1),new Rn(1,1,1,1),new Rn(3,0,1,1),new Rn(1,0,1,1)],this._cubeDirections=[new K(1,0,0),new K(-1,0,0),new K(0,0,1),new K(0,0,-1),new K(0,1,0),new K(0,-1,0)],this._cubeUps=[new K(0,1,0),new K(0,1,0),new K(0,1,0),new K(0,1,0),new K(0,0,1),new K(0,0,-1)]}updateMatrices(e,t=0){const i=this.camera,r=this.matrix,s=e.distance||i.far;s!==i.far&&(i.far=s,i.updateProjectionMatrix()),Op.setFromMatrixPosition(e.matrixWorld),i.position.copy(Op),ET.copy(i.position),ET.add(this._cubeDirections[t]),i.up.copy(this._cubeUps[t]),i.lookAt(ET),i.updateMatrixWorld(),r.makeTranslation(-Op.x,-Op.y,-Op.z),nD.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse),this._frustum.setFromProjectionMatrix(nD)}}class wV extends Rc{constructor(e,t,i=0,r=2){super(e,t),this.isPointLight=!0,this.type="PointLight",this.distance=i,this.decay=r,this.shadow=new K$}get power(){return this.intensity*4*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}class mh extends $g{constructor(e=-1,t=1,i=1,r=-1,s=.1,o=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=i,this.bottom=r,this.near=s,this.far=o,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,t,i,r,s,o){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=r,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),i=(this.right+this.left)/2,r=(this.top+this.bottom)/2;let s=i-e,o=i+e,a=r+t,l=r-t;if(this.view!==null&&this.view.enabled){const c=(this.right-this.left)/this.view.fullWidth/this.zoom,u=(this.top-this.bottom)/this.view.fullHeight/this.zoom;s+=c*this.view.offsetX,o=s+c*this.view.width,a-=u*this.view.offsetY,l=a-u*this.view.height}this.projectionMatrix.makeOrthographic(s,o,a,l,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,this.view!==null&&(t.object.view=Object.assign({},this.view)),t}}class Y$ extends rM{constructor(){super(new mh(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class bV extends Rc{constructor(e,t){super(e,t),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(Dn.DEFAULT_UP),this.updateMatrix(),this.target=new Dn,this.shadow=new Y$}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}class SV extends Rc{constructor(e,t){super(e,t),this.isAmbientLight=!0,this.type="AmbientLight"}}class TV extends Rc{constructor(e,t,i=10,r=10){super(e,t),this.isRectAreaLight=!0,this.type="RectAreaLight",this.width=i,this.height=r}get power(){return this.intensity*this.width*this.height*Math.PI}set power(e){this.intensity=e/(this.width*this.height*Math.PI)}copy(e){return super.copy(e),this.width=e.width,this.height=e.height,this}toJSON(e){const t=super.toJSON(e);return t.object.width=this.width,t.object.height=this.height,t}}class EV{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new K)}set(e){for(let t=0;t<9;t++)this.coefficients[t].copy(e[t]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,t){const i=e.x,r=e.y,s=e.z,o=this.coefficients;return t.copy(o[0]).multiplyScalar(.282095),t.addScaledVector(o[1],.488603*r),t.addScaledVector(o[2],.488603*s),t.addScaledVector(o[3],.488603*i),t.addScaledVector(o[4],1.092548*(i*r)),t.addScaledVector(o[5],1.092548*(r*s)),t.addScaledVector(o[6],.315392*(3*s*s-1)),t.addScaledVector(o[7],1.092548*(i*s)),t.addScaledVector(o[8],.546274*(i*i-r*r)),t}getIrradianceAt(e,t){const i=e.x,r=e.y,s=e.z,o=this.coefficients;return t.copy(o[0]).multiplyScalar(.886227),t.addScaledVector(o[1],2*.511664*r),t.addScaledVector(o[2],2*.511664*s),t.addScaledVector(o[3],2*.511664*i),t.addScaledVector(o[4],2*.429043*i*r),t.addScaledVector(o[5],2*.429043*r*s),t.addScaledVector(o[6],.743125*s*s-.247708),t.addScaledVector(o[7],2*.429043*i*s),t.addScaledVector(o[8],.429043*(i*i-r*r)),t}add(e){for(let t=0;t<9;t++)this.coefficients[t].add(e.coefficients[t]);return this}addScaledSH(e,t){for(let i=0;i<9;i++)this.coefficients[i].addScaledVector(e.coefficients[i],t);return this}scale(e){for(let t=0;t<9;t++)this.coefficients[t].multiplyScalar(e);return this}lerp(e,t){for(let i=0;i<9;i++)this.coefficients[i].lerp(e.coefficients[i],t);return this}equals(e){for(let t=0;t<9;t++)if(!this.coefficients[t].equals(e.coefficients[t]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return new this.constructor().copy(this)}fromArray(e,t=0){const i=this.coefficients;for(let r=0;r<9;r++)i[r].fromArray(e,t+r*3);return this}toArray(e=[],t=0){const i=this.coefficients;for(let r=0;r<9;r++)i[r].toArray(e,t+r*3);return e}static getBasisAt(e,t){const i=e.x,r=e.y,s=e.z;t[0]=.282095,t[1]=.488603*r,t[2]=.488603*s,t[3]=.488603*i,t[4]=1.092548*i*r,t[5]=1.092548*r*s,t[6]=.315392*(3*s*s-1),t[7]=1.092548*i*s,t[8]=.546274*(i*i-r*r)}}class CV extends Rc{constructor(e=new EV,t=1){super(void 0,t),this.isLightProbe=!0,this.sh=e}copy(e){return super.copy(e),this.sh.copy(e.sh),this}fromJSON(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this}toJSON(e){const t=super.toJSON(e);return t.object.sh=this.sh.toArray(),t}}class Gw extends ws{constructor(e){super(e),this.textures={}}load(e,t,i,r){const s=this,o=new Qa(s.manager);o.setPath(s.path),o.setRequestHeader(s.requestHeader),o.setWithCredentials(s.withCredentials),o.load(e,function(a){try{t(s.parse(JSON.parse(a)))}catch(l){r?r(l):console.error(l),s.manager.itemError(e)}},i,r)}parse(e){const t=this.textures;function i(s){return t[s]===void 0&&console.warn("THREE.MaterialLoader: Undefined texture",s),t[s]}const r=this.createMaterialFromType(e.type);if(e.uuid!==void 0&&(r.uuid=e.uuid),e.name!==void 0&&(r.name=e.name),e.color!==void 0&&r.color!==void 0&&r.color.setHex(e.color),e.roughness!==void 0&&(r.roughness=e.roughness),e.metalness!==void 0&&(r.metalness=e.metalness),e.sheen!==void 0&&(r.sheen=e.sheen),e.sheenColor!==void 0&&(r.sheenColor=new xt().setHex(e.sheenColor)),e.sheenRoughness!==void 0&&(r.sheenRoughness=e.sheenRoughness),e.emissive!==void 0&&r.emissive!==void 0&&r.emissive.setHex(e.emissive),e.specular!==void 0&&r.specular!==void 0&&r.specular.setHex(e.specular),e.specularIntensity!==void 0&&(r.specularIntensity=e.specularIntensity),e.specularColor!==void 0&&r.specularColor!==void 0&&r.specularColor.setHex(e.specularColor),e.shininess!==void 0&&(r.shininess=e.shininess),e.clearcoat!==void 0&&(r.clearcoat=e.clearcoat),e.clearcoatRoughness!==void 0&&(r.clearcoatRoughness=e.clearcoatRoughness),e.dispersion!==void 0&&(r.dispersion=e.dispersion),e.iridescence!==void 0&&(r.iridescence=e.iridescence),e.iridescenceIOR!==void 0&&(r.iridescenceIOR=e.iridescenceIOR),e.iridescenceThicknessRange!==void 0&&(r.iridescenceThicknessRange=e.iridescenceThicknessRange),e.transmission!==void 0&&(r.transmission=e.transmission),e.thickness!==void 0&&(r.thickness=e.thickness),e.attenuationDistance!==void 0&&(r.attenuationDistance=e.attenuationDistance),e.attenuationColor!==void 0&&r.attenuationColor!==void 0&&r.attenuationColor.setHex(e.attenuationColor),e.anisotropy!==void 0&&(r.anisotropy=e.anisotropy),e.anisotropyRotation!==void 0&&(r.anisotropyRotation=e.anisotropyRotation),e.fog!==void 0&&(r.fog=e.fog),e.flatShading!==void 0&&(r.flatShading=e.flatShading),e.blending!==void 0&&(r.blending=e.blending),e.combine!==void 0&&(r.combine=e.combine),e.side!==void 0&&(r.side=e.side),e.shadowSide!==void 0&&(r.shadowSide=e.shadowSide),e.opacity!==void 0&&(r.opacity=e.opacity),e.transparent!==void 0&&(r.transparent=e.transparent),e.alphaTest!==void 0&&(r.alphaTest=e.alphaTest),e.alphaHash!==void 0&&(r.alphaHash=e.alphaHash),e.depthFunc!==void 0&&(r.depthFunc=e.depthFunc),e.depthTest!==void 0&&(r.depthTest=e.depthTest),e.depthWrite!==void 0&&(r.depthWrite=e.depthWrite),e.colorWrite!==void 0&&(r.colorWrite=e.colorWrite),e.blendSrc!==void 0&&(r.blendSrc=e.blendSrc),e.blendDst!==void 0&&(r.blendDst=e.blendDst),e.blendEquation!==void 0&&(r.blendEquation=e.blendEquation),e.blendSrcAlpha!==void 0&&(r.blendSrcAlpha=e.blendSrcAlpha),e.blendDstAlpha!==void 0&&(r.blendDstAlpha=e.blendDstAlpha),e.blendEquationAlpha!==void 0&&(r.blendEquationAlpha=e.blendEquationAlpha),e.blendColor!==void 0&&r.blendColor!==void 0&&r.blendColor.setHex(e.blendColor),e.blendAlpha!==void 0&&(r.blendAlpha=e.blendAlpha),e.stencilWriteMask!==void 0&&(r.stencilWriteMask=e.stencilWriteMask),e.stencilFunc!==void 0&&(r.stencilFunc=e.stencilFunc),e.stencilRef!==void 0&&(r.stencilRef=e.stencilRef),e.stencilFuncMask!==void 0&&(r.stencilFuncMask=e.stencilFuncMask),e.stencilFail!==void 0&&(r.stencilFail=e.stencilFail),e.stencilZFail!==void 0&&(r.stencilZFail=e.stencilZFail),e.stencilZPass!==void 0&&(r.stencilZPass=e.stencilZPass),e.stencilWrite!==void 0&&(r.stencilWrite=e.stencilWrite),e.wireframe!==void 0&&(r.wireframe=e.wireframe),e.wireframeLinewidth!==void 0&&(r.wireframeLinewidth=e.wireframeLinewidth),e.wireframeLinecap!==void 0&&(r.wireframeLinecap=e.wireframeLinecap),e.wireframeLinejoin!==void 0&&(r.wireframeLinejoin=e.wireframeLinejoin),e.rotation!==void 0&&(r.rotation=e.rotation),e.linewidth!==void 0&&(r.linewidth=e.linewidth),e.dashSize!==void 0&&(r.dashSize=e.dashSize),e.gapSize!==void 0&&(r.gapSize=e.gapSize),e.scale!==void 0&&(r.scale=e.scale),e.polygonOffset!==void 0&&(r.polygonOffset=e.polygonOffset),e.polygonOffsetFactor!==void 0&&(r.polygonOffsetFactor=e.polygonOffsetFactor),e.polygonOffsetUnits!==void 0&&(r.polygonOffsetUnits=e.polygonOffsetUnits),e.dithering!==void 0&&(r.dithering=e.dithering),e.alphaToCoverage!==void 0&&(r.alphaToCoverage=e.alphaToCoverage),e.premultipliedAlpha!==void 0&&(r.premultipliedAlpha=e.premultipliedAlpha),e.forceSinglePass!==void 0&&(r.forceSinglePass=e.forceSinglePass),e.visible!==void 0&&(r.visible=e.visible),e.toneMapped!==void 0&&(r.toneMapped=e.toneMapped),e.userData!==void 0&&(r.userData=e.userData),e.vertexColors!==void 0&&(typeof e.vertexColors=="number"?r.vertexColors=e.vertexColors>0:r.vertexColors=e.vertexColors),e.uniforms!==void 0)for(const s in e.uniforms){const o=e.uniforms[s];switch(r.uniforms[s]={},o.type){case"t":r.uniforms[s].value=i(o.value);break;case"c":r.uniforms[s].value=new xt().setHex(o.value);break;case"v2":r.uniforms[s].value=new Le().fromArray(o.value);break;case"v3":r.uniforms[s].value=new K().fromArray(o.value);break;case"v4":r.uniforms[s].value=new Rn().fromArray(o.value);break;case"m3":r.uniforms[s].value=new sn().fromArray(o.value);break;case"m4":r.uniforms[s].value=new Vt().fromArray(o.value);break;default:r.uniforms[s].value=o.value}}if(e.defines!==void 0&&(r.defines=e.defines),e.vertexShader!==void 0&&(r.vertexShader=e.vertexShader),e.fragmentShader!==void 0&&(r.fragmentShader=e.fragmentShader),e.glslVersion!==void 0&&(r.glslVersion=e.glslVersion),e.extensions!==void 0)for(const s in e.extensions)r.extensions[s]=e.extensions[s];if(e.lights!==void 0&&(r.lights=e.lights),e.clipping!==void 0&&(r.clipping=e.clipping),e.size!==void 0&&(r.size=e.size),e.sizeAttenuation!==void 0&&(r.sizeAttenuation=e.sizeAttenuation),e.map!==void 0&&(r.map=i(e.map)),e.matcap!==void 0&&(r.matcap=i(e.matcap)),e.alphaMap!==void 0&&(r.alphaMap=i(e.alphaMap)),e.bumpMap!==void 0&&(r.bumpMap=i(e.bumpMap)),e.bumpScale!==void 0&&(r.bumpScale=e.bumpScale),e.normalMap!==void 0&&(r.normalMap=i(e.normalMap)),e.normalMapType!==void 0&&(r.normalMapType=e.normalMapType),e.normalScale!==void 0){let s=e.normalScale;Array.isArray(s)===!1&&(s=[s,s]),r.normalScale=new Le().fromArray(s)}return e.displacementMap!==void 0&&(r.displacementMap=i(e.displacementMap)),e.displacementScale!==void 0&&(r.displacementScale=e.displacementScale),e.displacementBias!==void 0&&(r.displacementBias=e.displacementBias),e.roughnessMap!==void 0&&(r.roughnessMap=i(e.roughnessMap)),e.metalnessMap!==void 0&&(r.metalnessMap=i(e.metalnessMap)),e.emissiveMap!==void 0&&(r.emissiveMap=i(e.emissiveMap)),e.emissiveIntensity!==void 0&&(r.emissiveIntensity=e.emissiveIntensity),e.specularMap!==void 0&&(r.specularMap=i(e.specularMap)),e.specularIntensityMap!==void 0&&(r.specularIntensityMap=i(e.specularIntensityMap)),e.specularColorMap!==void 0&&(r.specularColorMap=i(e.specularColorMap)),e.envMap!==void 0&&(r.envMap=i(e.envMap)),e.envMapRotation!==void 0&&r.envMapRotation.fromArray(e.envMapRotation),e.envMapIntensity!==void 0&&(r.envMapIntensity=e.envMapIntensity),e.reflectivity!==void 0&&(r.reflectivity=e.reflectivity),e.refractionRatio!==void 0&&(r.refractionRatio=e.refractionRatio),e.lightMap!==void 0&&(r.lightMap=i(e.lightMap)),e.lightMapIntensity!==void 0&&(r.lightMapIntensity=e.lightMapIntensity),e.aoMap!==void 0&&(r.aoMap=i(e.aoMap)),e.aoMapIntensity!==void 0&&(r.aoMapIntensity=e.aoMapIntensity),e.gradientMap!==void 0&&(r.gradientMap=i(e.gradientMap)),e.clearcoatMap!==void 0&&(r.clearcoatMap=i(e.clearcoatMap)),e.clearcoatRoughnessMap!==void 0&&(r.clearcoatRoughnessMap=i(e.clearcoatRoughnessMap)),e.clearcoatNormalMap!==void 0&&(r.clearcoatNormalMap=i(e.clearcoatNormalMap)),e.clearcoatNormalScale!==void 0&&(r.clearcoatNormalScale=new Le().fromArray(e.clearcoatNormalScale)),e.iridescenceMap!==void 0&&(r.iridescenceMap=i(e.iridescenceMap)),e.iridescenceThicknessMap!==void 0&&(r.iridescenceThicknessMap=i(e.iridescenceThicknessMap)),e.transmissionMap!==void 0&&(r.transmissionMap=i(e.transmissionMap)),e.thicknessMap!==void 0&&(r.thicknessMap=i(e.thicknessMap)),e.anisotropyMap!==void 0&&(r.anisotropyMap=i(e.anisotropyMap)),e.sheenColorMap!==void 0&&(r.sheenColorMap=i(e.sheenColorMap)),e.sheenRoughnessMap!==void 0&&(r.sheenRoughnessMap=i(e.sheenRoughnessMap)),r}setTextures(e){return this.textures=e,this}createMaterialFromType(e){return Gw.createMaterialFromType(e)}static createMaterialFromType(e){const t={ShadowMaterial:sV,SpriteMaterial:zA,RawShaderMaterial:oV,ShaderMaterial:ko,PointsMaterial:Mw,MeshPhysicalMaterial:aV,MeshStandardMaterial:JA,MeshPhongMaterial:lV,MeshToonMaterial:cV,MeshNormalMaterial:uV,MeshLambertMaterial:hV,MeshDepthMaterial:QA,MeshDistanceMaterial:ZA,MeshBasicMaterial:Ic,MeshMatcapMaterial:dV,LineDashedMaterial:fV,LineBasicMaterial:ts,Material:Br};return new t[e]}}class x1{static decodeText(e){if(console.warn("THREE.LoaderUtils: decodeText() has been deprecated with r165 and will be removed with r175. Use TextDecoder instead."),typeof TextDecoder<"u")return new TextDecoder().decode(e);let t="";for(let i=0,r=e.length;i<r;i++)t+=String.fromCharCode(e[i]);try{return decodeURIComponent(escape(t))}catch{return t}}static extractUrlBase(e){const t=e.lastIndexOf("/");return t===-1?"./":e.slice(0,t+1)}static resolveURL(e,t){return typeof e!="string"||e===""?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}}class AV extends un{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}toJSON(){const e=super.toJSON();return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}class MV extends ws{constructor(e){super(e)}load(e,t,i,r){const s=this,o=new Qa(s.manager);o.setPath(s.path),o.setRequestHeader(s.requestHeader),o.setWithCredentials(s.withCredentials),o.load(e,function(a){try{t(s.parse(JSON.parse(a)))}catch(l){r?r(l):console.error(l),s.manager.itemError(e)}},i,r)}parse(e){const t={},i={};function r(g,x){if(t[x]!==void 0)return t[x];const w=g.interleavedBuffers[x],v=s(g,w.buffer),S=Id(w.type,v),E=new Cw(S,w.stride);return E.uuid=w.uuid,t[x]=E,E}function s(g,x){if(i[x]!==void 0)return i[x];const w=g.arrayBuffers[x],v=new Uint32Array(w).buffer;return i[x]=v,v}const o=e.isInstancedBufferGeometry?new AV:new un,a=e.data.index;if(a!==void 0){const g=Id(a.type,a.array);o.setIndex(new $n(g,1))}const l=e.data.attributes;for(const g in l){const x=l[g];let b;if(x.isInterleavedBufferAttribute){const w=r(e.data,x.data);b=new th(w,x.itemSize,x.offset,x.normalized)}else{const w=Id(x.type,x.array),v=x.isInstancedBufferAttribute?hf:$n;b=new v(w,x.itemSize,x.normalized)}x.name!==void 0&&(b.name=x.name),x.usage!==void 0&&b.setUsage(x.usage),o.setAttribute(g,b)}const c=e.data.morphAttributes;if(c)for(const g in c){const x=c[g],b=[];for(let w=0,v=x.length;w<v;w++){const S=x[w];let E;if(S.isInterleavedBufferAttribute){const I=r(e.data,S.data);E=new th(I,S.itemSize,S.offset,S.normalized)}else{const I=Id(S.type,S.array);E=new $n(I,S.itemSize,S.normalized)}S.name!==void 0&&(E.name=S.name),b.push(E)}o.morphAttributes[g]=b}e.data.morphTargetsRelative&&(o.morphTargetsRelative=!0);const f=e.data.groups||e.data.drawcalls||e.data.offsets;if(f!==void 0)for(let g=0,x=f.length;g!==x;++g){const b=f[g];o.addGroup(b.start,b.count,b.materialIndex)}const m=e.data.boundingSphere;if(m!==void 0){const g=new K;m.center!==void 0&&g.fromArray(m.center),o.boundingSphere=new Ur(g,m.radius)}return e.name&&(o.name=e.name),e.userData&&(o.userData=e.userData),o}}class J$ extends ws{constructor(e){super(e)}load(e,t,i,r){const s=this,o=this.path===""?x1.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||o;const a=new Qa(this.manager);a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,function(l){let c=null;try{c=JSON.parse(l)}catch(f){r!==void 0&&r(f),console.error("THREE:ObjectLoader: Can't parse "+e+".",f.message);return}const u=c.metadata;if(u===void 0||u.type===void 0||u.type.toLowerCase()==="geometry"){r!==void 0&&r(new Error("THREE.ObjectLoader: Can't load "+e)),console.error("THREE.ObjectLoader: Can't load "+e);return}s.parse(c,t)},i,r)}async loadAsync(e,t){const i=this,r=this.path===""?x1.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||r;const s=new Qa(this.manager);s.setPath(this.path),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials);const o=await s.loadAsync(e,t),a=JSON.parse(o),l=a.metadata;if(l===void 0||l.type===void 0||l.type.toLowerCase()==="geometry")throw new Error("THREE.ObjectLoader: Can't load "+e);return await i.parseAsync(a)}parse(e,t){const i=this.parseAnimations(e.animations),r=this.parseShapes(e.shapes),s=this.parseGeometries(e.geometries,r),o=this.parseImages(e.images,function(){t!==void 0&&t(c)}),a=this.parseTextures(e.textures,o),l=this.parseMaterials(e.materials,a),c=this.parseObject(e.object,s,l,a,i),u=this.parseSkeletons(e.skeletons,c);if(this.bindSkeletons(c,u),this.bindLightTargets(c),t!==void 0){let f=!1;for(const m in o)if(o[m].data instanceof HTMLImageElement){f=!0;break}f===!1&&t(c)}return c}async parseAsync(e){const t=this.parseAnimations(e.animations),i=this.parseShapes(e.shapes),r=this.parseGeometries(e.geometries,i),s=await this.parseImagesAsync(e.images),o=this.parseTextures(e.textures,s),a=this.parseMaterials(e.materials,o),l=this.parseObject(e.object,r,a,o,t),c=this.parseSkeletons(e.skeletons,l);return this.bindSkeletons(l,c),this.bindLightTargets(l),l}parseShapes(e){const t={};if(e!==void 0)for(let i=0,r=e.length;i<r;i++){const s=new Bu().fromJSON(e[i]);t[s.uuid]=s}return t}parseSkeletons(e,t){const i={},r={};if(t.traverse(function(s){s.isBone&&(r[s.uuid]=s)}),e!==void 0)for(let s=0,o=e.length;s<o;s++){const a=new Aw().fromJSON(e[s],r);i[a.uuid]=a}return i}parseGeometries(e,t){const i={};if(e!==void 0){const r=new MV;for(let s=0,o=e.length;s<o;s++){let a;const l=e[s];switch(l.type){case"BufferGeometry":case"InstancedBufferGeometry":a=r.parse(l);break;default:l.type in Z2?a=Z2[l.type].fromJSON(l,t):console.warn(`THREE.ObjectLoader: Unsupported geometry type "${l.type}"`)}a.uuid=l.uuid,l.name!==void 0&&(a.name=l.name),l.userData!==void 0&&(a.userData=l.userData),i[l.uuid]=a}}return i}parseMaterials(e,t){const i={},r={};if(e!==void 0){const s=new Gw;s.setTextures(t);for(let o=0,a=e.length;o<a;o++){const l=e[o];i[l.uuid]===void 0&&(i[l.uuid]=s.parse(l)),r[l.uuid]=i[l.uuid]}}return r}parseAnimations(e){const t={};if(e!==void 0)for(let i=0;i<e.length;i++){const r=e[i],s=vg.parse(r);t[s.uuid]=s}return t}parseImages(e,t){const i=this,r={};let s;function o(l){return i.manager.itemStart(l),s.load(l,function(){i.manager.itemEnd(l)},void 0,function(){i.manager.itemError(l),i.manager.itemEnd(l)})}function a(l){if(typeof l=="string"){const c=l,u=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(c)?c:i.resourcePath+c;return o(u)}else return l.data?{data:Id(l.type,l.data),width:l.width,height:l.height}:null}if(e!==void 0&&e.length>0){const l=new iM(t);s=new xg(l),s.setCrossOrigin(this.crossOrigin);for(let c=0,u=e.length;c<u;c++){const f=e[c],m=f.url;if(Array.isArray(m)){const g=[];for(let x=0,b=m.length;x<b;x++){const w=m[x],v=a(w);v!==null&&(v instanceof HTMLImageElement?g.push(v):g.push(new na(v.data,v.width,v.height)))}r[f.uuid]=new Wl(g)}else{const g=a(f.url);r[f.uuid]=new Wl(g)}}}return r}async parseImagesAsync(e){const t=this,i={};let r;async function s(o){if(typeof o=="string"){const a=o,l=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(a)?a:t.resourcePath+a;return await r.loadAsync(l)}else return o.data?{data:Id(o.type,o.data),width:o.width,height:o.height}:null}if(e!==void 0&&e.length>0){r=new xg(this.manager),r.setCrossOrigin(this.crossOrigin);for(let o=0,a=e.length;o<a;o++){const l=e[o],c=l.url;if(Array.isArray(c)){const u=[];for(let f=0,m=c.length;f<m;f++){const g=c[f],x=await s(g);x!==null&&(x instanceof HTMLImageElement?u.push(x):u.push(new na(x.data,x.width,x.height)))}i[l.uuid]=new Wl(u)}else{const u=await s(l.url);i[l.uuid]=new Wl(u)}}}return i}parseTextures(e,t){function i(s,o){return typeof s=="number"?s:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",s),o[s])}const r={};if(e!==void 0)for(let s=0,o=e.length;s<o;s++){const a=e[s];a.image===void 0&&console.warn('THREE.ObjectLoader: No "image" specified for',a.uuid),t[a.image]===void 0&&console.warn("THREE.ObjectLoader: Undefined image",a.image);const l=t[a.image],c=l.data;let u;Array.isArray(c)?(u=new Xg,c.length===6&&(u.needsUpdate=!0)):(c&&c.data?u=new na:u=new _i,c&&(u.needsUpdate=!0)),u.source=l,u.uuid=a.uuid,a.name!==void 0&&(u.name=a.name),a.mapping!==void 0&&(u.mapping=i(a.mapping,Q$)),a.channel!==void 0&&(u.channel=a.channel),a.offset!==void 0&&u.offset.fromArray(a.offset),a.repeat!==void 0&&u.repeat.fromArray(a.repeat),a.center!==void 0&&u.center.fromArray(a.center),a.rotation!==void 0&&(u.rotation=a.rotation),a.wrap!==void 0&&(u.wrapS=i(a.wrap[0],iD),u.wrapT=i(a.wrap[1],iD)),a.format!==void 0&&(u.format=a.format),a.internalFormat!==void 0&&(u.internalFormat=a.internalFormat),a.type!==void 0&&(u.type=a.type),a.colorSpace!==void 0&&(u.colorSpace=a.colorSpace),a.minFilter!==void 0&&(u.minFilter=i(a.minFilter,rD)),a.magFilter!==void 0&&(u.magFilter=i(a.magFilter,rD)),a.anisotropy!==void 0&&(u.anisotropy=a.anisotropy),a.flipY!==void 0&&(u.flipY=a.flipY),a.generateMipmaps!==void 0&&(u.generateMipmaps=a.generateMipmaps),a.premultiplyAlpha!==void 0&&(u.premultiplyAlpha=a.premultiplyAlpha),a.unpackAlignment!==void 0&&(u.unpackAlignment=a.unpackAlignment),a.compareFunction!==void 0&&(u.compareFunction=a.compareFunction),a.userData!==void 0&&(u.userData=a.userData),r[a.uuid]=u}return r}parseObject(e,t,i,r,s){let o;function a(m){return t[m]===void 0&&console.warn("THREE.ObjectLoader: Undefined geometry",m),t[m]}function l(m){if(m!==void 0){if(Array.isArray(m)){const g=[];for(let x=0,b=m.length;x<b;x++){const w=m[x];i[w]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",w),g.push(i[w])}return g}return i[m]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",m),i[m]}}function c(m){return r[m]===void 0&&console.warn("THREE.ObjectLoader: Undefined texture",m),r[m]}let u,f;switch(e.type){case"Scene":o=new BA,e.background!==void 0&&(Number.isInteger(e.background)?o.background=new xt(e.background):o.background=c(e.background)),e.environment!==void 0&&(o.environment=c(e.environment)),e.fog!==void 0&&(e.fog.type==="Fog"?o.fog=new Ew(e.fog.color,e.fog.near,e.fog.far):e.fog.type==="FogExp2"&&(o.fog=new Tw(e.fog.color,e.fog.density)),e.fog.name!==""&&(o.fog.name=e.fog.name)),e.backgroundBlurriness!==void 0&&(o.backgroundBlurriness=e.backgroundBlurriness),e.backgroundIntensity!==void 0&&(o.backgroundIntensity=e.backgroundIntensity),e.backgroundRotation!==void 0&&o.backgroundRotation.fromArray(e.backgroundRotation),e.environmentIntensity!==void 0&&(o.environmentIntensity=e.environmentIntensity),e.environmentRotation!==void 0&&o.environmentRotation.fromArray(e.environmentRotation);break;case"PerspectiveCamera":o=new Ui(e.fov,e.aspect,e.near,e.far),e.focus!==void 0&&(o.focus=e.focus),e.zoom!==void 0&&(o.zoom=e.zoom),e.filmGauge!==void 0&&(o.filmGauge=e.filmGauge),e.filmOffset!==void 0&&(o.filmOffset=e.filmOffset),e.view!==void 0&&(o.view=Object.assign({},e.view));break;case"OrthographicCamera":o=new mh(e.left,e.right,e.top,e.bottom,e.near,e.far),e.zoom!==void 0&&(o.zoom=e.zoom),e.view!==void 0&&(o.view=Object.assign({},e.view));break;case"AmbientLight":o=new SV(e.color,e.intensity);break;case"DirectionalLight":o=new bV(e.color,e.intensity),o.target=e.target||"";break;case"PointLight":o=new wV(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":o=new TV(e.color,e.intensity,e.width,e.height);break;case"SpotLight":o=new _V(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay),o.target=e.target||"";break;case"HemisphereLight":o=new xV(e.color,e.groundColor,e.intensity);break;case"LightProbe":o=new CV().fromJSON(e);break;case"SkinnedMesh":u=a(e.geometry),f=l(e.material),o=new Hj(u,f),e.bindMode!==void 0&&(o.bindMode=e.bindMode),e.bindMatrix!==void 0&&o.bindMatrix.fromArray(e.bindMatrix),e.skeleton!==void 0&&(o.skeleton=e.skeleton);break;case"Mesh":u=a(e.geometry),f=l(e.material),o=new Vi(u,f);break;case"InstancedMesh":u=a(e.geometry),f=l(e.material);const m=e.count,g=e.instanceMatrix,x=e.instanceColor;o=new Gj(u,f,m),o.instanceMatrix=new hf(new Float32Array(g.array),16),x!==void 0&&(o.instanceColor=new hf(new Float32Array(x.array),x.itemSize));break;case"BatchedMesh":u=a(e.geometry),f=l(e.material),o=new Wj(e.maxInstanceCount,e.maxVertexCount,e.maxIndexCount,f),o.geometry=u,o.perObjectFrustumCulled=e.perObjectFrustumCulled,o.sortObjects=e.sortObjects,o._drawRanges=e.drawRanges,o._reservedRanges=e.reservedRanges,o._visibility=e.visibility,o._active=e.active,o._bounds=e.bounds.map(b=>{const w=new Qr;w.min.fromArray(b.boxMin),w.max.fromArray(b.boxMax);const v=new Ur;return v.radius=b.sphereRadius,v.center.fromArray(b.sphereCenter),{boxInitialized:b.boxInitialized,box:w,sphereInitialized:b.sphereInitialized,sphere:v}}),o._maxInstanceCount=e.maxInstanceCount,o._maxVertexCount=e.maxVertexCount,o._maxIndexCount=e.maxIndexCount,o._geometryInitialized=e.geometryInitialized,o._geometryCount=e.geometryCount,o._matricesTexture=c(e.matricesTexture.uuid),e.colorsTexture!==void 0&&(o._colorsTexture=c(e.colorsTexture.uuid));break;case"LOD":o=new zj;break;case"Line":o=new uc(a(e.geometry),l(e.material));break;case"LineLoop":o=new qj(a(e.geometry),l(e.material));break;case"LineSegments":o=new fa(a(e.geometry),l(e.material));break;case"PointCloud":case"Points":o=new $j(a(e.geometry),l(e.material));break;case"Sprite":o=new Bj(l(e.material));break;case"Group":o=new Pd;break;case"Bone":o=new HA;break;default:o=new Dn}if(o.uuid=e.uuid,e.name!==void 0&&(o.name=e.name),e.matrix!==void 0?(o.matrix.fromArray(e.matrix),e.matrixAutoUpdate!==void 0&&(o.matrixAutoUpdate=e.matrixAutoUpdate),o.matrixAutoUpdate&&o.matrix.decompose(o.position,o.quaternion,o.scale)):(e.position!==void 0&&o.position.fromArray(e.position),e.rotation!==void 0&&o.rotation.fromArray(e.rotation),e.quaternion!==void 0&&o.quaternion.fromArray(e.quaternion),e.scale!==void 0&&o.scale.fromArray(e.scale)),e.up!==void 0&&o.up.fromArray(e.up),e.castShadow!==void 0&&(o.castShadow=e.castShadow),e.receiveShadow!==void 0&&(o.receiveShadow=e.receiveShadow),e.shadow&&(e.shadow.intensity!==void 0&&(o.shadow.intensity=e.shadow.intensity),e.shadow.bias!==void 0&&(o.shadow.bias=e.shadow.bias),e.shadow.normalBias!==void 0&&(o.shadow.normalBias=e.shadow.normalBias),e.shadow.radius!==void 0&&(o.shadow.radius=e.shadow.radius),e.shadow.mapSize!==void 0&&o.shadow.mapSize.fromArray(e.shadow.mapSize),e.shadow.camera!==void 0&&(o.shadow.camera=this.parseObject(e.shadow.camera))),e.visible!==void 0&&(o.visible=e.visible),e.frustumCulled!==void 0&&(o.frustumCulled=e.frustumCulled),e.renderOrder!==void 0&&(o.renderOrder=e.renderOrder),e.userData!==void 0&&(o.userData=e.userData),e.layers!==void 0&&(o.layers.mask=e.layers),e.children!==void 0){const m=e.children;for(let g=0;g<m.length;g++)o.add(this.parseObject(m[g],t,i,r,s))}if(e.animations!==void 0){const m=e.animations;for(let g=0;g<m.length;g++){const x=m[g];o.animations.push(s[x])}}if(e.type==="LOD"){e.autoUpdate!==void 0&&(o.autoUpdate=e.autoUpdate);const m=e.levels;for(let g=0;g<m.length;g++){const x=m[g],b=o.getObjectByProperty("uuid",x.object);b!==void 0&&o.addLevel(b,x.distance,x.hysteresis)}}return o}bindSkeletons(e,t){Object.keys(t).length!==0&&e.traverse(function(i){if(i.isSkinnedMesh===!0&&i.skeleton!==void 0){const r=t[i.skeleton];r===void 0?console.warn("THREE.ObjectLoader: No skeleton found with UUID:",i.skeleton):i.bind(r,i.bindMatrix)}})}bindLightTargets(e){e.traverse(function(t){if(t.isDirectionalLight||t.isSpotLight){const i=t.target,r=e.getObjectByProperty("uuid",i);r!==void 0?t.target=r:t.target=new Dn}})}}const Q$={UVMapping:pw,CubeReflectionMapping:Ya,CubeRefractionMapping:cc,EquirectangularReflectionMapping:ng,EquirectangularRefractionMapping:ig,CubeUVReflectionMapping:Mf},iD={RepeatWrapping:rg,ClampToEdgeWrapping:lo,MirroredRepeatWrapping:sg},rD={NearestFilter:mr,NearestMipmapNearestFilter:TA,NearestMipmapLinearFilter:Md,LinearFilter:Xi,LinearMipmapNearestFilter:mm,LinearMipmapLinearFilter:Yo};class Z$ extends ws{constructor(e){super(e),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(e){return this.options=e,this}load(e,t,i,r){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,o=Da.get(e);if(o!==void 0){if(s.manager.itemStart(e),o.then){o.then(c=>{t&&t(c),s.manager.itemEnd(e)}).catch(c=>{r&&r(c)});return}return setTimeout(function(){t&&t(o),s.manager.itemEnd(e)},0),o}const a={};a.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",a.headers=this.requestHeader;const l=fetch(e,a).then(function(c){return c.blob()}).then(function(c){return createImageBitmap(c,Object.assign(s.options,{colorSpaceConversion:"none"}))}).then(function(c){return Da.add(e,c),t&&t(c),s.manager.itemEnd(e),c}).catch(function(c){r&&r(c),Da.remove(e),s.manager.itemError(e),s.manager.itemEnd(e)});Da.add(e,l),s.manager.itemStart(e)}}let ix;class sM{static getContext(){return ix===void 0&&(ix=new(window.AudioContext||window.webkitAudioContext)),ix}static setContext(e){ix=e}}class eX extends ws{constructor(e){super(e)}load(e,t,i,r){const s=this,o=new Qa(this.manager);o.setResponseType("arraybuffer"),o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(l){try{const c=l.slice(0);sM.getContext().decodeAudioData(c,function(f){t(f)}).catch(a)}catch(c){a(c)}},i,r);function a(l){r?r(l):console.error(l),s.manager.itemError(e)}}}const sD=new Vt,oD=new Vt,su=new Vt;class tX{constructor(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new Ui,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new Ui,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(e){const t=this._cache;if(t.focus!==e.focus||t.fov!==e.fov||t.aspect!==e.aspect*this.aspect||t.near!==e.near||t.far!==e.far||t.zoom!==e.zoom||t.eyeSep!==this.eyeSep){t.focus=e.focus,t.fov=e.fov,t.aspect=e.aspect*this.aspect,t.near=e.near,t.far=e.far,t.zoom=e.zoom,t.eyeSep=this.eyeSep,su.copy(e.projectionMatrix);const r=t.eyeSep/2,s=r*t.near/t.focus,o=t.near*Math.tan(ju*t.fov*.5)/t.zoom;let a,l;oD.elements[12]=-r,sD.elements[12]=r,a=-o*t.aspect+s,l=o*t.aspect+s,su.elements[0]=2*t.near/(l-a),su.elements[8]=(l+a)/(l-a),this.cameraL.projectionMatrix.copy(su),a=-o*t.aspect-s,l=o*t.aspect-s,su.elements[0]=2*t.near/(l-a),su.elements[8]=(l+a)/(l-a),this.cameraR.projectionMatrix.copy(su)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(oD),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(sD)}}class IV extends Ui{constructor(e=[]){super(),this.isArrayCamera=!0,this.cameras=e,this.index=0}}class oM{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=aD(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const t=aD();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}}function aD(){return performance.now()}const ou=new K,lD=new _s,nX=new K,au=new K;class iX extends Dn{constructor(){super(),this.type="AudioListener",this.context=sM.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new oM}getInput(){return this.gain}removeFilter(){return this.filter!==null&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(e){return this.filter!==null?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}updateMatrixWorld(e){super.updateMatrixWorld(e);const t=this.context.listener,i=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(ou,lD,nX),au.set(0,0,-1).applyQuaternion(lD),t.positionX){const r=this.context.currentTime+this.timeDelta;t.positionX.linearRampToValueAtTime(ou.x,r),t.positionY.linearRampToValueAtTime(ou.y,r),t.positionZ.linearRampToValueAtTime(ou.z,r),t.forwardX.linearRampToValueAtTime(au.x,r),t.forwardY.linearRampToValueAtTime(au.y,r),t.forwardZ.linearRampToValueAtTime(au.z,r),t.upX.linearRampToValueAtTime(i.x,r),t.upY.linearRampToValueAtTime(i.y,r),t.upZ.linearRampToValueAtTime(i.z,r)}else t.setPosition(ou.x,ou.y,ou.z),t.setOrientation(au.x,au.y,au.z,i.x,i.y,i.z)}}class PV extends Dn{constructor(e){super(),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}setMediaElementSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}setMediaStreamSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}setBuffer(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}play(e=0){if(this.isPlaying===!0){console.warn("THREE.Audio: Audio is already playing.");return}if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}this._startedAt=this.context.currentTime+e;const t=this.context.createBufferSource();return t.buffer=this.buffer,t.loop=this.loop,t.loopStart=this.loopStart,t.loopEnd=this.loopEnd,t.onended=this.onEnded.bind(this),t.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=t,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.isPlaying===!0&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,this.loop===!0&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this}stop(e=0){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this._progress=0,this.source!==null&&(this.source.stop(this.context.currentTime+e),this.source.onended=null),this.isPlaying=!1,this}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this._connected!==!1){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}}getFilters(){return this.filters}setFilters(e){return e||(e=[]),this._connected===!0?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}setDetune(e){return this.detune=e,this.isPlaying===!0&&this.source.detune!==void 0&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(e){return this.setFilters(e?[e]:[])}setPlaybackRate(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.playbackRate=e,this.isPlaying===!0&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1,this._progress=0}getLoop(){return this.hasPlaybackControl===!1?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.loop=e,this.isPlaying===!0&&(this.source.loop=this.loop),this}setLoopStart(e){return this.loopStart=e,this}setLoopEnd(e){return this.loopEnd=e,this}getVolume(){return this.gain.gain.value}setVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}copy(e,t){return super.copy(e,t),e.sourceType!=="buffer"?(console.warn("THREE.Audio: Audio source type cannot be copied."),this):(this.autoplay=e.autoplay,this.buffer=e.buffer,this.detune=e.detune,this.loop=e.loop,this.loopStart=e.loopStart,this.loopEnd=e.loopEnd,this.offset=e.offset,this.duration=e.duration,this.playbackRate=e.playbackRate,this.hasPlaybackControl=e.hasPlaybackControl,this.sourceType=e.sourceType,this.filters=e.filters.slice(),this)}clone(e){return new this.constructor(this.listener).copy(this,e)}}const lu=new K,cD=new _s,rX=new K,cu=new K;class sX extends PV{constructor(e){super(e),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}connect(){return super.connect(),this.panner.connect(this.gain),this}disconnect(){return super.disconnect(),this.panner.disconnect(this.gain),this}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(e){return this.panner.refDistance=e,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(e){return this.panner.rolloffFactor=e,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(e){return this.panner.distanceModel=e,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(e){return this.panner.maxDistance=e,this}setDirectionalCone(e,t,i){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=t,this.panner.coneOuterGain=i,this}updateMatrixWorld(e){if(super.updateMatrixWorld(e),this.hasPlaybackControl===!0&&this.isPlaying===!1)return;this.matrixWorld.decompose(lu,cD,rX),cu.set(0,0,1).applyQuaternion(cD);const t=this.panner;if(t.positionX){const i=this.context.currentTime+this.listener.timeDelta;t.positionX.linearRampToValueAtTime(lu.x,i),t.positionY.linearRampToValueAtTime(lu.y,i),t.positionZ.linearRampToValueAtTime(lu.z,i),t.orientationX.linearRampToValueAtTime(cu.x,i),t.orientationY.linearRampToValueAtTime(cu.y,i),t.orientationZ.linearRampToValueAtTime(cu.z,i)}else t.setPosition(lu.x,lu.y,lu.z),t.setOrientation(cu.x,cu.y,cu.z)}}class oX{constructor(e,t=2048){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=t,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let e=0;const t=this.getFrequencyData();for(let i=0;i<t.length;i++)e+=t[i];return e/t.length}}class RV{constructor(e,t,i){this.binding=e,this.valueSize=i;let r,s,o;switch(t){case"quaternion":r=this._slerp,s=this._slerpAdditive,o=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(i*6),this._workIndex=5;break;case"string":case"bool":r=this._select,s=this._select,o=this._setAdditiveIdentityOther,this.buffer=new Array(i*5);break;default:r=this._lerp,s=this._lerpAdditive,o=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(i*5)}this._mixBufferRegion=r,this._mixBufferRegionAdditive=s,this._setIdentity=o,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,t){const i=this.buffer,r=this.valueSize,s=e*r+r;let o=this.cumulativeWeight;if(o===0){for(let a=0;a!==r;++a)i[s+a]=i[a];o=t}else{o+=t;const a=t/o;this._mixBufferRegion(i,s,0,a,r)}this.cumulativeWeight=o}accumulateAdditive(e){const t=this.buffer,i=this.valueSize,r=i*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(t,r,0,e,i),this.cumulativeWeightAdditive+=e}apply(e){const t=this.valueSize,i=this.buffer,r=e*t+t,s=this.cumulativeWeight,o=this.cumulativeWeightAdditive,a=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,s<1){const l=t*this._origIndex;this._mixBufferRegion(i,r,l,1-s,t)}o>0&&this._mixBufferRegionAdditive(i,r,this._addIndex*t,1,t);for(let l=t,c=t+t;l!==c;++l)if(i[l]!==i[l+t]){a.setValue(i,r);break}}saveOriginalState(){const e=this.binding,t=this.buffer,i=this.valueSize,r=i*this._origIndex;e.getValue(t,r);for(let s=i,o=r;s!==o;++s)t[s]=t[r+s%i];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const e=this.valueSize*3;this.binding.setValue(this.buffer,e)}_setAdditiveIdentityNumeric(){const e=this._addIndex*this.valueSize,t=e+this.valueSize;for(let i=e;i<t;i++)this.buffer[i]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const e=this._origIndex*this.valueSize,t=this._addIndex*this.valueSize;for(let i=0;i<this.valueSize;i++)this.buffer[t+i]=this.buffer[e+i]}_select(e,t,i,r,s){if(r>=.5)for(let o=0;o!==s;++o)e[t+o]=e[i+o]}_slerp(e,t,i,r){_s.slerpFlat(e,t,e,t,e,i,r)}_slerpAdditive(e,t,i,r,s){const o=this._workIndex*s;_s.multiplyQuaternionsFlat(e,o,e,t,e,i),_s.slerpFlat(e,t,e,t,e,o,r)}_lerp(e,t,i,r,s){const o=1-r;for(let a=0;a!==s;++a){const l=t+a;e[l]=e[l]*o+e[i+a]*r}}_lerpAdditive(e,t,i,r,s){for(let o=0;o!==s;++o){const a=t+o;e[a]=e[a]+e[i+o]*r}}}const aM="\\[\\]\\.:\\/",aX=new RegExp("["+aM+"]","g"),lM="[^"+aM+"]",lX="[^"+aM.replace("\\.","")+"]",cX=/((?:WC+[\/:])*)/.source.replace("WC",lM),uX=/(WCOD+)?/.source.replace("WCOD",lX),hX=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",lM),dX=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",lM),fX=new RegExp("^"+cX+uX+hX+dX+"$"),pX=["material","materials","bones","map"];class mX{constructor(e,t,i){const r=i||In.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,r)}getValue(e,t){this.bind();const i=this._targetGroup.nCachedObjects_,r=this._bindings[i];r!==void 0&&r.getValue(e,t)}setValue(e,t){const i=this._bindings;for(let r=this._targetGroup.nCachedObjects_,s=i.length;r!==s;++r)i[r].setValue(e,t)}bind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,i=e.length;t!==i;++t)e[t].bind()}unbind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,i=e.length;t!==i;++t)e[t].unbind()}}class In{constructor(e,t,i){this.path=t,this.parsedPath=i||In.parseTrackName(t),this.node=In.findNode(e,this.parsedPath.nodeName),this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,t,i){return e&&e.isAnimationObjectGroup?new In.Composite(e,t,i):new In(e,t,i)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(aX,"")}static parseTrackName(e){const t=fX.exec(e);if(t===null)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const i={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},r=i.nodeName&&i.nodeName.lastIndexOf(".");if(r!==void 0&&r!==-1){const s=i.nodeName.substring(r+1);pX.indexOf(s)!==-1&&(i.nodeName=i.nodeName.substring(0,r),i.objectName=s)}if(i.propertyName===null||i.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return i}static findNode(e,t){if(t===void 0||t===""||t==="."||t===-1||t===e.name||t===e.uuid)return e;if(e.skeleton){const i=e.skeleton.getBoneByName(t);if(i!==void 0)return i}if(e.children){const i=function(s){for(let o=0;o<s.length;o++){const a=s[o];if(a.name===t||a.uuid===t)return a;const l=i(a.children);if(l)return l}return null},r=i(e.children);if(r)return r}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,t){e[t]=this.targetObject[this.propertyName]}_getValue_array(e,t){const i=this.resolvedProperty;for(let r=0,s=i.length;r!==s;++r)e[t++]=i[r]}_getValue_arrayElement(e,t){e[t]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,t){this.resolvedProperty.toArray(e,t)}_setValue_direct(e,t){this.targetObject[this.propertyName]=e[t]}_setValue_direct_setNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,t){const i=this.resolvedProperty;for(let r=0,s=i.length;r!==s;++r)i[r]=e[t++]}_setValue_array_setNeedsUpdate(e,t){const i=this.resolvedProperty;for(let r=0,s=i.length;r!==s;++r)i[r]=e[t++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,t){const i=this.resolvedProperty;for(let r=0,s=i.length;r!==s;++r)i[r]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,t){this.resolvedProperty[this.propertyIndex]=e[t]}_setValue_arrayElement_setNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,t){this.resolvedProperty.fromArray(e,t)}_setValue_fromArray_setNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,t){this.bind(),this.getValue(e,t)}_setValue_unbound(e,t){this.bind(),this.setValue(e,t)}bind(){let e=this.node;const t=this.parsedPath,i=t.objectName,r=t.propertyName;let s=t.propertyIndex;if(e||(e=In.findNode(this.rootNode,t.nodeName),this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e){console.warn("THREE.PropertyBinding: No target node found for track: "+this.path+".");return}if(i){let c=t.objectIndex;switch(i){case"materials":if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}e=e.material.materials;break;case"bones":if(!e.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}e=e.skeleton.bones;for(let u=0;u<e.length;u++)if(e[u].name===c){c=u;break}break;case"map":if("map"in e){e=e.map;break}if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.map){console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}e=e.material.map;break;default:if(e[i]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}e=e[i]}if(c!==void 0){if(e[c]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);return}e=e[c]}}const o=e[r];if(o===void 0){const c=t.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+c+"."+r+" but it wasn't found.",e);return}let a=this.Versioning.None;this.targetObject=e,e.isMaterial===!0?a=this.Versioning.NeedsUpdate:e.isObject3D===!0&&(a=this.Versioning.MatrixWorldNeedsUpdate);let l=this.BindingType.Direct;if(s!==void 0){if(r==="morphTargetInfluences"){if(!e.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!e.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}e.morphTargetDictionary[s]!==void 0&&(s=e.morphTargetDictionary[s])}l=this.BindingType.ArrayElement,this.resolvedProperty=o,this.propertyIndex=s}else o.fromArray!==void 0&&o.toArray!==void 0?(l=this.BindingType.HasFromToArray,this.resolvedProperty=o):Array.isArray(o)?(l=this.BindingType.EntireArray,this.resolvedProperty=o):this.propertyName=r;this.getValue=this.GetterByBindingType[l],this.setValue=this.SetterByBindingTypeAndVersioning[l][a]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}In.Composite=mX;In.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};In.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};In.prototype.GetterByBindingType=[In.prototype._getValue_direct,In.prototype._getValue_array,In.prototype._getValue_arrayElement,In.prototype._getValue_toArray];In.prototype.SetterByBindingTypeAndVersioning=[[In.prototype._setValue_direct,In.prototype._setValue_direct_setNeedsUpdate,In.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[In.prototype._setValue_array,In.prototype._setValue_array_setNeedsUpdate,In.prototype._setValue_array_setMatrixWorldNeedsUpdate],[In.prototype._setValue_arrayElement,In.prototype._setValue_arrayElement_setNeedsUpdate,In.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[In.prototype._setValue_fromArray,In.prototype._setValue_fromArray_setNeedsUpdate,In.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class gX{constructor(){this.isAnimationObjectGroup=!0,this.uuid=Fs(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const e={};this._indicesByUUID=e;for(let i=0,r=arguments.length;i!==r;++i)e[arguments[i].uuid]=i;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const t=this;this.stats={objects:{get total(){return t._objects.length},get inUse(){return this.total-t.nCachedObjects_}},get bindingsPerObject(){return t._bindings.length}}}add(){const e=this._objects,t=this._indicesByUUID,i=this._paths,r=this._parsedPaths,s=this._bindings,o=s.length;let a,l=e.length,c=this.nCachedObjects_;for(let u=0,f=arguments.length;u!==f;++u){const m=arguments[u],g=m.uuid;let x=t[g];if(x===void 0){x=l++,t[g]=x,e.push(m);for(let b=0,w=o;b!==w;++b)s[b].push(new In(m,i[b],r[b]))}else if(x<c){a=e[x];const b=--c,w=e[b];t[w.uuid]=x,e[x]=w,t[g]=b,e[b]=m;for(let v=0,S=o;v!==S;++v){const E=s[v],I=E[b];let U=E[x];E[x]=I,U===void 0&&(U=new In(m,i[v],r[v])),E[b]=U}}else e[x]!==a&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=c}remove(){const e=this._objects,t=this._indicesByUUID,i=this._bindings,r=i.length;let s=this.nCachedObjects_;for(let o=0,a=arguments.length;o!==a;++o){const l=arguments[o],c=l.uuid,u=t[c];if(u!==void 0&&u>=s){const f=s++,m=e[f];t[m.uuid]=u,e[u]=m,t[c]=f,e[f]=l;for(let g=0,x=r;g!==x;++g){const b=i[g],w=b[f],v=b[u];b[u]=w,b[f]=v}}}this.nCachedObjects_=s}uncache(){const e=this._objects,t=this._indicesByUUID,i=this._bindings,r=i.length;let s=this.nCachedObjects_,o=e.length;for(let a=0,l=arguments.length;a!==l;++a){const c=arguments[a],u=c.uuid,f=t[u];if(f!==void 0)if(delete t[u],f<s){const m=--s,g=e[m],x=--o,b=e[x];t[g.uuid]=f,e[f]=g,t[b.uuid]=m,e[m]=b,e.pop();for(let w=0,v=r;w!==v;++w){const S=i[w],E=S[m],I=S[x];S[f]=E,S[m]=I,S.pop()}}else{const m=--o,g=e[m];m>0&&(t[g.uuid]=f),e[f]=g,e.pop();for(let x=0,b=r;x!==b;++x){const w=i[x];w[f]=w[m],w.pop()}}}this.nCachedObjects_=s}subscribe_(e,t){const i=this._bindingsIndicesByPath;let r=i[e];const s=this._bindings;if(r!==void 0)return s[r];const o=this._paths,a=this._parsedPaths,l=this._objects,c=l.length,u=this.nCachedObjects_,f=new Array(c);r=s.length,i[e]=r,o.push(e),a.push(t),s.push(f);for(let m=u,g=l.length;m!==g;++m){const x=l[m];f[m]=new In(x,e,t)}return f}unsubscribe_(e){const t=this._bindingsIndicesByPath,i=t[e];if(i!==void 0){const r=this._paths,s=this._parsedPaths,o=this._bindings,a=o.length-1,l=o[a],c=e[a];t[c]=i,o[i]=l,o.pop(),s[i]=s[a],s.pop(),r[i]=r[a],r.pop()}}}class NV{constructor(e,t,i=null,r=t.blendMode){this._mixer=e,this._clip=t,this._localRoot=i,this.blendMode=r;const s=t.tracks,o=s.length,a=new Array(o),l={endingStart:Iu,endingEnd:Iu};for(let c=0;c!==o;++c){const u=s[c].createInterpolant(null);a[c]=u,u.settings=l}this._interpolantSettings=l,this._interpolants=a,this._propertyBindings=new Array(o),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=bj,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,t){return this.loop=e,this.repetitions=t,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,t,i){if(e.fadeOut(t),this.fadeIn(t),i){const r=this._clip.duration,s=e._clip.duration,o=s/r,a=r/s;e.warp(1,o,t),this.warp(a,1,t)}return this}crossFadeTo(e,t,i){return e.crossFadeFrom(this,t,i)}stopFading(){const e=this._weightInterpolant;return e!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,t,i){const r=this._mixer,s=r.time,o=this.timeScale;let a=this._timeScaleInterpolant;a===null&&(a=r._lendControlInterpolant(),this._timeScaleInterpolant=a);const l=a.parameterPositions,c=a.sampleValues;return l[0]=s,l[1]=s+i,c[0]=e/o,c[1]=t/o,this}stopWarping(){const e=this._timeScaleInterpolant;return e!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,t,i,r){if(!this.enabled){this._updateWeight(e);return}const s=this._startTime;if(s!==null){const l=(e-s)*i;l<0||i===0?t=0:(this._startTime=null,t=i*l)}t*=this._updateTimeScale(e);const o=this._updateTime(t),a=this._updateWeight(e);if(a>0){const l=this._interpolants,c=this._propertyBindings;switch(this.blendMode){case LA:for(let u=0,f=l.length;u!==f;++u)l[u].evaluate(o),c[u].accumulateAdditive(a);break;case ww:default:for(let u=0,f=l.length;u!==f;++u)l[u].evaluate(o),c[u].accumulate(r,a)}}}_updateWeight(e){let t=0;if(this.enabled){t=this.weight;const i=this._weightInterpolant;if(i!==null){const r=i.evaluate(e)[0];t*=r,e>i.parameterPositions[1]&&(this.stopFading(),r===0&&(this.enabled=!1))}}return this._effectiveWeight=t,t}_updateTimeScale(e){let t=0;if(!this.paused){t=this.timeScale;const i=this._timeScaleInterpolant;if(i!==null){const r=i.evaluate(e)[0];t*=r,e>i.parameterPositions[1]&&(this.stopWarping(),t===0?this.paused=!0:this.timeScale=t)}}return this._effectiveTimeScale=t,t}_updateTime(e){const t=this._clip.duration,i=this.loop;let r=this.time+e,s=this._loopCount;const o=i===Sj;if(e===0)return s===-1?r:o&&(s&1)===1?t-r:r;if(i===wj){s===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(r>=t)r=t;else if(r<0)r=0;else{this.time=r;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(s===-1&&(e>=0?(s=0,this._setEndings(!0,this.repetitions===0,o)):this._setEndings(this.repetitions===0,!0,o)),r>=t||r<0){const a=Math.floor(r/t);r-=t*a,s+=Math.abs(a);const l=this.repetitions-s;if(l<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,r=e>0?t:0,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(l===1){const c=e<0;this._setEndings(c,!c,o)}else this._setEndings(!1,!1,o);this._loopCount=s,this.time=r,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:a})}}else this.time=r;if(o&&(s&1)===1)return t-r}return r}_setEndings(e,t,i){const r=this._interpolantSettings;i?(r.endingStart=Pu,r.endingEnd=Pu):(e?r.endingStart=this.zeroSlopeAtStart?Pu:Iu:r.endingStart=ag,t?r.endingEnd=this.zeroSlopeAtEnd?Pu:Iu:r.endingEnd=ag)}_scheduleFading(e,t,i){const r=this._mixer,s=r.time;let o=this._weightInterpolant;o===null&&(o=r._lendControlInterpolant(),this._weightInterpolant=o);const a=o.parameterPositions,l=o.sampleValues;return a[0]=s,l[0]=t,a[1]=s+e,l[1]=i,this}}const yX=new Float32Array(1);class vX extends da{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,t){const i=e._localRoot||this._root,r=e._clip.tracks,s=r.length,o=e._propertyBindings,a=e._interpolants,l=i.uuid,c=this._bindingsByRootAndName;let u=c[l];u===void 0&&(u={},c[l]=u);for(let f=0;f!==s;++f){const m=r[f],g=m.name;let x=u[g];if(x!==void 0)++x.referenceCount,o[f]=x;else{if(x=o[f],x!==void 0){x._cacheIndex===null&&(++x.referenceCount,this._addInactiveBinding(x,l,g));continue}const b=t&&t._propertyBindings[f].binding.parsedPath;x=new RV(In.create(i,g,b),m.ValueTypeName,m.getValueSize()),++x.referenceCount,this._addInactiveBinding(x,l,g),o[f]=x}a[f].resultBuffer=x.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(e._cacheIndex===null){const i=(e._localRoot||this._root).uuid,r=e._clip.uuid,s=this._actionsByClip[r];this._bindAction(e,s&&s.knownActions[0]),this._addInactiveAction(e,r,i)}const t=e._propertyBindings;for(let i=0,r=t.length;i!==r;++i){const s=t[i];s.useCount++===0&&(this._lendBinding(s),s.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){const t=e._propertyBindings;for(let i=0,r=t.length;i!==r;++i){const s=t[i];--s.useCount===0&&(s.restoreOriginalState(),this._takeBackBinding(s))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){const t=e._cacheIndex;return t!==null&&t<this._nActiveActions}_addInactiveAction(e,t,i){const r=this._actions,s=this._actionsByClip;let o=s[t];if(o===void 0)o={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,s[t]=o;else{const a=o.knownActions;e._byClipCacheIndex=a.length,a.push(e)}e._cacheIndex=r.length,r.push(e),o.actionByRoot[i]=e}_removeInactiveAction(e){const t=this._actions,i=t[t.length-1],r=e._cacheIndex;i._cacheIndex=r,t[r]=i,t.pop(),e._cacheIndex=null;const s=e._clip.uuid,o=this._actionsByClip,a=o[s],l=a.knownActions,c=l[l.length-1],u=e._byClipCacheIndex;c._byClipCacheIndex=u,l[u]=c,l.pop(),e._byClipCacheIndex=null;const f=a.actionByRoot,m=(e._localRoot||this._root).uuid;delete f[m],l.length===0&&delete o[s],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){const t=e._propertyBindings;for(let i=0,r=t.length;i!==r;++i){const s=t[i];--s.referenceCount===0&&this._removeInactiveBinding(s)}}_lendAction(e){const t=this._actions,i=e._cacheIndex,r=this._nActiveActions++,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=i,t[i]=s}_takeBackAction(e){const t=this._actions,i=e._cacheIndex,r=--this._nActiveActions,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=i,t[i]=s}_addInactiveBinding(e,t,i){const r=this._bindingsByRootAndName,s=this._bindings;let o=r[t];o===void 0&&(o={},r[t]=o),o[i]=e,e._cacheIndex=s.length,s.push(e)}_removeInactiveBinding(e){const t=this._bindings,i=e.binding,r=i.rootNode.uuid,s=i.path,o=this._bindingsByRootAndName,a=o[r],l=t[t.length-1],c=e._cacheIndex;l._cacheIndex=c,t[c]=l,t.pop(),delete a[s],Object.keys(a).length===0&&delete o[r]}_lendBinding(e){const t=this._bindings,i=e._cacheIndex,r=this._nActiveBindings++,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=i,t[i]=s}_takeBackBinding(e){const t=this._bindings,i=e._cacheIndex,r=--this._nActiveBindings,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=i,t[i]=s}_lendControlInterpolant(){const e=this._controlInterpolants,t=this._nActiveControlInterpolants++;let i=e[t];return i===void 0&&(i=new tM(new Float32Array(2),new Float32Array(2),1,yX),i.__cacheIndex=t,e[t]=i),i}_takeBackControlInterpolant(e){const t=this._controlInterpolants,i=e.__cacheIndex,r=--this._nActiveControlInterpolants,s=t[r];e.__cacheIndex=r,t[r]=e,s.__cacheIndex=i,t[i]=s}clipAction(e,t,i){const r=t||this._root,s=r.uuid;let o=typeof e=="string"?vg.findByName(r,e):e;const a=o!==null?o.uuid:e,l=this._actionsByClip[a];let c=null;if(i===void 0&&(o!==null?i=o.blendMode:i=ww),l!==void 0){const f=l.actionByRoot[s];if(f!==void 0&&f.blendMode===i)return f;c=l.knownActions[0],o===null&&(o=c._clip)}if(o===null)return null;const u=new NV(this,o,t,i);return this._bindAction(u,c),this._addInactiveAction(u,a,s),u}existingAction(e,t){const i=t||this._root,r=i.uuid,s=typeof e=="string"?vg.findByName(i,e):e,o=s?s.uuid:e,a=this._actionsByClip[o];return a!==void 0&&a.actionByRoot[r]||null}stopAllAction(){const e=this._actions,t=this._nActiveActions;for(let i=t-1;i>=0;--i)e[i].stop();return this}update(e){e*=this.timeScale;const t=this._actions,i=this._nActiveActions,r=this.time+=e,s=Math.sign(e),o=this._accuIndex^=1;for(let c=0;c!==i;++c)t[c]._update(r,e,s,o);const a=this._bindings,l=this._nActiveBindings;for(let c=0;c!==l;++c)a[c].apply(o);return this}setTime(e){this.time=0;for(let t=0;t<this._actions.length;t++)this._actions[t].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){const t=this._actions,i=e.uuid,r=this._actionsByClip,s=r[i];if(s!==void 0){const o=s.knownActions;for(let a=0,l=o.length;a!==l;++a){const c=o[a];this._deactivateAction(c);const u=c._cacheIndex,f=t[t.length-1];c._cacheIndex=null,c._byClipCacheIndex=null,f._cacheIndex=u,t[u]=f,t.pop(),this._removeInactiveBindingsForAction(c)}delete r[i]}}uncacheRoot(e){const t=e.uuid,i=this._actionsByClip;for(const o in i){const a=i[o].actionByRoot,l=a[t];l!==void 0&&(this._deactivateAction(l),this._removeInactiveAction(l))}const r=this._bindingsByRootAndName,s=r[t];if(s!==void 0)for(const o in s){const a=s[o];a.restoreOriginalState(),this._removeInactiveBinding(a)}}uncacheAction(e,t){const i=this.existingAction(e,t);i!==null&&(this._deactivateAction(i),this._removeInactiveAction(i))}}class xX extends bw{constructor(e=1,t=1,i=1,r={}){super(e,t,r),this.isRenderTarget3D=!0,this.depth=i,this.texture=new Sw(null,e,t,i),this.texture.isRenderTargetTexture=!0}}class _X extends bw{constructor(e=1,t=1,i=1,r={}){super(e,t,r),this.isRenderTargetArray=!0,this.depth=i,this.texture=new qg(null,e,t,i),this.texture.isRenderTargetTexture=!0}}class cM{constructor(e){this.value=e}clone(){return new cM(this.value.clone===void 0?this.value:this.value.clone())}}let wX=0;class bX extends da{constructor(){super(),this.isUniformsGroup=!0,Object.defineProperty(this,"id",{value:wX++}),this.name="",this.usage=cg,this.uniforms=[]}add(e){return this.uniforms.push(e),this}remove(e){const t=this.uniforms.indexOf(e);return t!==-1&&this.uniforms.splice(t,1),this}setName(e){return this.name=e,this}setUsage(e){return this.usage=e,this}dispose(){return this.dispatchEvent({type:"dispose"}),this}copy(e){this.name=e.name,this.usage=e.usage;const t=e.uniforms;this.uniforms.length=0;for(let i=0,r=t.length;i<r;i++){const s=Array.isArray(t[i])?t[i]:[t[i]];for(let o=0;o<s.length;o++)this.uniforms.push(s[o].clone())}return this}clone(){return new this.constructor().copy(this)}}class SX extends Cw{constructor(e,t,i=1){super(e,t),this.isInstancedInterleavedBuffer=!0,this.meshPerAttribute=i}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}clone(e){const t=super.clone(e);return t.meshPerAttribute=this.meshPerAttribute,t}toJSON(e){const t=super.toJSON(e);return t.isInstancedInterleavedBuffer=!0,t.meshPerAttribute=this.meshPerAttribute,t}}class TX{constructor(e,t,i,r,s){this.isGLBufferAttribute=!0,this.name="",this.buffer=e,this.type=t,this.itemSize=i,this.elementSize=r,this.count=s,this.version=0}set needsUpdate(e){e===!0&&this.version++}setBuffer(e){return this.buffer=e,this}setType(e,t){return this.type=e,this.elementSize=t,this}setItemSize(e){return this.itemSize=e,this}setCount(e){return this.count=e,this}}const uD=new Vt;class DV{constructor(e,t,i=0,r=1/0){this.ray=new Pf(e,t),this.near=i,this.far=r,this.camera=null,this.layers=new Vu,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,t){this.ray.set(e,t)}setFromCamera(e,t){t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):console.error("THREE.Raycaster: Unsupported camera type: "+t.type)}setFromXRController(e){return uD.identity().extractRotation(e.matrixWorld),this.ray.origin.setFromMatrixPosition(e.matrixWorld),this.ray.direction.set(0,0,-1).applyMatrix4(uD),this}intersectObject(e,t=!0,i=[]){return _1(e,this,i,t),i.sort(hD),i}intersectObjects(e,t=!0,i=[]){for(let r=0,s=e.length;r<s;r++)_1(e[r],this,i,t);return i.sort(hD),i}}function hD(n,e){return n.distance-e.distance}function _1(n,e,t,i){let r=!0;if(n.layers.test(e.layers)&&n.raycast(e,t)===!1&&(r=!1),r===!0&&i===!0){const s=n.children;for(let o=0,a=s.length;o<a;o++)_1(s[o],e,t,!0)}}class EX{constructor(e=1,t=0,i=0){this.radius=e,this.phi=t,this.theta=i}set(e,t,i){return this.radius=e,this.phi=t,this.theta=i,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=Jt(this.phi,1e-6,Math.PI-1e-6),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,i){return this.radius=Math.sqrt(e*e+t*t+i*i),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,i),this.phi=Math.acos(Jt(t/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}class CX{constructor(e=1,t=0,i=0){this.radius=e,this.theta=t,this.y=i}set(e,t,i){return this.radius=e,this.theta=t,this.y=i,this}copy(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,i){return this.radius=Math.sqrt(e*e+i*i),this.theta=Math.atan2(e,i),this.y=t,this}clone(){return new this.constructor().copy(this)}}class uM{constructor(e,t,i,r){uM.prototype.isMatrix2=!0,this.elements=[1,0,0,1],e!==void 0&&this.set(e,t,i,r)}identity(){return this.set(1,0,0,1),this}fromArray(e,t=0){for(let i=0;i<4;i++)this.elements[i]=e[i+t];return this}set(e,t,i,r){const s=this.elements;return s[0]=e,s[2]=t,s[1]=i,s[3]=r,this}}const dD=new Le;class AX{constructor(e=new Le(1/0,1/0),t=new Le(-1/0,-1/0)){this.isBox2=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromPoints(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const i=dD.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}containsPoint(e){return e.x>=this.min.x&&e.x<=this.max.x&&e.y>=this.min.y&&e.y<=this.max.y}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(e){return e.max.x>=this.min.x&&e.min.x<=this.max.x&&e.max.y>=this.min.y&&e.min.y<=this.max.y}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,dD).distanceTo(e)}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const fD=new K,rx=new K;class MX{constructor(e=new K,t=new K){this.start=e,this.end=t}set(e,t){return this.start.copy(e),this.end.copy(t),this}copy(e){return this.start.copy(e.start),this.end.copy(e.end),this}getCenter(e){return e.addVectors(this.start,this.end).multiplyScalar(.5)}delta(e){return e.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(e,t){return this.delta(t).multiplyScalar(e).add(this.start)}closestPointToPointParameter(e,t){fD.subVectors(e,this.start),rx.subVectors(this.end,this.start);const i=rx.dot(rx);let s=rx.dot(fD)/i;return t&&(s=Jt(s,0,1)),s}closestPointToPoint(e,t,i){const r=this.closestPointToPointParameter(e,t);return this.delta(i).multiplyScalar(r).add(this.start)}applyMatrix4(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}equals(e){return e.start.equals(this.start)&&e.end.equals(this.end)}clone(){return new this.constructor().copy(this)}}const pD=new K;class IX extends Dn{constructor(e,t){super(),this.light=e,this.matrixAutoUpdate=!1,this.color=t,this.type="SpotLightHelper";const i=new un,r=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let o=0,a=1,l=32;o<l;o++,a++){const c=o/l*Math.PI*2,u=a/l*Math.PI*2;r.push(Math.cos(c),Math.sin(c),1,Math.cos(u),Math.sin(u),1)}i.setAttribute("position",new At(r,3));const s=new ts({fog:!1,toneMapped:!1});this.cone=new fa(i,s),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),this.parent?(this.parent.updateWorldMatrix(!0),this.matrix.copy(this.parent.matrixWorld).invert().multiply(this.light.matrixWorld)):this.matrix.copy(this.light.matrixWorld),this.matrixWorld.copy(this.light.matrixWorld);const e=this.light.distance?this.light.distance:1e3,t=e*Math.tan(this.light.angle);this.cone.scale.set(t,t,e),pD.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(pD),this.color!==void 0?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}const Tl=new K,sx=new Vt,CT=new Vt;class PX extends fa{constructor(e){const t=LV(e),i=new un,r=[],s=[],o=new xt(0,0,1),a=new xt(0,1,0);for(let c=0;c<t.length;c++){const u=t[c];u.parent&&u.parent.isBone&&(r.push(0,0,0),r.push(0,0,0),s.push(o.r,o.g,o.b),s.push(a.r,a.g,a.b))}i.setAttribute("position",new At(r,3)),i.setAttribute("color",new At(s,3));const l=new ts({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});super(i,l),this.isSkeletonHelper=!0,this.type="SkeletonHelper",this.root=e,this.bones=t,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(e){const t=this.bones,i=this.geometry,r=i.getAttribute("position");CT.copy(this.root.matrixWorld).invert();for(let s=0,o=0;s<t.length;s++){const a=t[s];a.parent&&a.parent.isBone&&(sx.multiplyMatrices(CT,a.matrixWorld),Tl.setFromMatrixPosition(sx),r.setXYZ(o,Tl.x,Tl.y,Tl.z),sx.multiplyMatrices(CT,a.parent.matrixWorld),Tl.setFromMatrixPosition(sx),r.setXYZ(o+1,Tl.x,Tl.y,Tl.z),o+=2)}i.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose()}}function LV(n){const e=[];n.isBone===!0&&e.push(n);for(let t=0;t<n.children.length;t++)e.push(...LV(n.children[t]));return e}class RX extends Vi{constructor(e,t,i){const r=new Qg(t,4,2),s=new Ic({wireframe:!0,fog:!1,toneMapped:!1});super(r,s),this.light=e,this.color=i,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.color!==void 0?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}const NX=new K,mD=new xt,gD=new xt;class DX extends Dn{constructor(e,t,i){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=i,this.type="HemisphereLightHelper";const r=new Jg(t);r.rotateY(Math.PI*.5),this.material=new Ic({wireframe:!0,fog:!1,toneMapped:!1}),this.color===void 0&&(this.material.vertexColors=!0);const s=r.getAttribute("position"),o=new Float32Array(s.count*3);r.setAttribute("color",new $n(o,3)),this.add(new Vi(r,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const e=this.children[0];if(this.color!==void 0)this.material.color.set(this.color);else{const t=e.geometry.getAttribute("color");mD.copy(this.light.color),gD.copy(this.light.groundColor);for(let i=0,r=t.count;i<r;i++){const s=i<r/2?mD:gD;t.setXYZ(i,s.r,s.g,s.b)}t.needsUpdate=!0}this.light.updateWorldMatrix(!0,!1),e.lookAt(NX.setFromMatrixPosition(this.light.matrixWorld).negate())}}class LX extends fa{constructor(e=10,t=10,i=4473924,r=8947848){i=new xt(i),r=new xt(r);const s=t/2,o=e/t,a=e/2,l=[],c=[];for(let m=0,g=0,x=-a;m<=t;m++,x+=o){l.push(-a,0,x,a,0,x),l.push(x,0,-a,x,0,a);const b=m===s?i:r;b.toArray(c,g),g+=3,b.toArray(c,g),g+=3,b.toArray(c,g),g+=3,b.toArray(c,g),g+=3}const u=new un;u.setAttribute("position",new At(l,3)),u.setAttribute("color",new At(c,3));const f=new ts({vertexColors:!0,toneMapped:!1});super(u,f),this.type="GridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}class kX extends fa{constructor(e=10,t=16,i=8,r=64,s=4473924,o=8947848){s=new xt(s),o=new xt(o);const a=[],l=[];if(t>1)for(let f=0;f<t;f++){const m=f/t*(Math.PI*2),g=Math.sin(m)*e,x=Math.cos(m)*e;a.push(0,0,0),a.push(g,0,x);const b=f&1?s:o;l.push(b.r,b.g,b.b),l.push(b.r,b.g,b.b)}for(let f=0;f<i;f++){const m=f&1?s:o,g=e-e/i*f;for(let x=0;x<r;x++){let b=x/r*(Math.PI*2),w=Math.sin(b)*g,v=Math.cos(b)*g;a.push(w,0,v),l.push(m.r,m.g,m.b),b=(x+1)/r*(Math.PI*2),w=Math.sin(b)*g,v=Math.cos(b)*g,a.push(w,0,v),l.push(m.r,m.g,m.b)}}const c=new un;c.setAttribute("position",new At(a,3)),c.setAttribute("color",new At(l,3));const u=new ts({vertexColors:!0,toneMapped:!1});super(c,u),this.type="PolarGridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}const yD=new K,ox=new K,vD=new K;class OX extends Dn{constructor(e,t,i){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=i,this.type="DirectionalLightHelper",t===void 0&&(t=1);let r=new un;r.setAttribute("position",new At([-t,t,0,t,t,0,t,-t,0,-t,-t,0,-t,t,0],3));const s=new ts({fog:!1,toneMapped:!1});this.lightPlane=new uc(r,s),this.add(this.lightPlane),r=new un,r.setAttribute("position",new At([0,0,0,0,0,1],3)),this.targetLine=new uc(r,s),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),yD.setFromMatrixPosition(this.light.matrixWorld),ox.setFromMatrixPosition(this.light.target.matrixWorld),vD.subVectors(ox,yD),this.lightPlane.lookAt(ox),this.color!==void 0?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(ox),this.targetLine.scale.z=vD.length()}}const ax=new K,yi=new $g;class UX extends fa{constructor(e){const t=new un,i=new ts({color:16777215,vertexColors:!0,toneMapped:!1}),r=[],s=[],o={};a("n1","n2"),a("n2","n4"),a("n4","n3"),a("n3","n1"),a("f1","f2"),a("f2","f4"),a("f4","f3"),a("f3","f1"),a("n1","f1"),a("n2","f2"),a("n3","f3"),a("n4","f4"),a("p","n1"),a("p","n2"),a("p","n3"),a("p","n4"),a("u1","u2"),a("u2","u3"),a("u3","u1"),a("c","t"),a("p","c"),a("cn1","cn2"),a("cn3","cn4"),a("cf1","cf2"),a("cf3","cf4");function a(x,b){l(x),l(b)}function l(x){r.push(0,0,0),s.push(0,0,0),o[x]===void 0&&(o[x]=[]),o[x].push(r.length/3-1)}t.setAttribute("position",new At(r,3)),t.setAttribute("color",new At(s,3)),super(t,i),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=o,this.update();const c=new xt(16755200),u=new xt(16711680),f=new xt(43775),m=new xt(16777215),g=new xt(3355443);this.setColors(c,u,f,m,g)}setColors(e,t,i,r,s){const a=this.geometry.getAttribute("color");a.setXYZ(0,e.r,e.g,e.b),a.setXYZ(1,e.r,e.g,e.b),a.setXYZ(2,e.r,e.g,e.b),a.setXYZ(3,e.r,e.g,e.b),a.setXYZ(4,e.r,e.g,e.b),a.setXYZ(5,e.r,e.g,e.b),a.setXYZ(6,e.r,e.g,e.b),a.setXYZ(7,e.r,e.g,e.b),a.setXYZ(8,e.r,e.g,e.b),a.setXYZ(9,e.r,e.g,e.b),a.setXYZ(10,e.r,e.g,e.b),a.setXYZ(11,e.r,e.g,e.b),a.setXYZ(12,e.r,e.g,e.b),a.setXYZ(13,e.r,e.g,e.b),a.setXYZ(14,e.r,e.g,e.b),a.setXYZ(15,e.r,e.g,e.b),a.setXYZ(16,e.r,e.g,e.b),a.setXYZ(17,e.r,e.g,e.b),a.setXYZ(18,e.r,e.g,e.b),a.setXYZ(19,e.r,e.g,e.b),a.setXYZ(20,e.r,e.g,e.b),a.setXYZ(21,e.r,e.g,e.b),a.setXYZ(22,e.r,e.g,e.b),a.setXYZ(23,e.r,e.g,e.b),a.setXYZ(24,t.r,t.g,t.b),a.setXYZ(25,t.r,t.g,t.b),a.setXYZ(26,t.r,t.g,t.b),a.setXYZ(27,t.r,t.g,t.b),a.setXYZ(28,t.r,t.g,t.b),a.setXYZ(29,t.r,t.g,t.b),a.setXYZ(30,t.r,t.g,t.b),a.setXYZ(31,t.r,t.g,t.b),a.setXYZ(32,i.r,i.g,i.b),a.setXYZ(33,i.r,i.g,i.b),a.setXYZ(34,i.r,i.g,i.b),a.setXYZ(35,i.r,i.g,i.b),a.setXYZ(36,i.r,i.g,i.b),a.setXYZ(37,i.r,i.g,i.b),a.setXYZ(38,r.r,r.g,r.b),a.setXYZ(39,r.r,r.g,r.b),a.setXYZ(40,s.r,s.g,s.b),a.setXYZ(41,s.r,s.g,s.b),a.setXYZ(42,s.r,s.g,s.b),a.setXYZ(43,s.r,s.g,s.b),a.setXYZ(44,s.r,s.g,s.b),a.setXYZ(45,s.r,s.g,s.b),a.setXYZ(46,s.r,s.g,s.b),a.setXYZ(47,s.r,s.g,s.b),a.setXYZ(48,s.r,s.g,s.b),a.setXYZ(49,s.r,s.g,s.b),a.needsUpdate=!0}update(){const e=this.geometry,t=this.pointMap,i=1,r=1;yi.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse);const s=this.camera.coordinateSystem===Io?-1:0;Si("c",t,e,yi,0,0,s),Si("t",t,e,yi,0,0,1),Si("n1",t,e,yi,-1,-1,s),Si("n2",t,e,yi,i,-1,s),Si("n3",t,e,yi,-1,r,s),Si("n4",t,e,yi,i,r,s),Si("f1",t,e,yi,-1,-1,1),Si("f2",t,e,yi,i,-1,1),Si("f3",t,e,yi,-1,r,1),Si("f4",t,e,yi,i,r,1),Si("u1",t,e,yi,i*.7,r*1.1,s),Si("u2",t,e,yi,-1*.7,r*1.1,s),Si("u3",t,e,yi,0,r*2,s),Si("cf1",t,e,yi,-1,0,1),Si("cf2",t,e,yi,i,0,1),Si("cf3",t,e,yi,0,-1,1),Si("cf4",t,e,yi,0,r,1),Si("cn1",t,e,yi,-1,0,s),Si("cn2",t,e,yi,i,0,s),Si("cn3",t,e,yi,0,-1,s),Si("cn4",t,e,yi,0,r,s),e.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}}function Si(n,e,t,i,r,s,o){ax.set(r,s,o).unproject(i);const a=e[n];if(a!==void 0){const l=t.getAttribute("position");for(let c=0,u=a.length;c<u;c++)l.setXYZ(a[c],ax.x,ax.y,ax.z)}}const lx=new Qr;class FX extends fa{constructor(e,t=16776960){const i=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=new Float32Array(8*3),s=new un;s.setIndex(new $n(i,1)),s.setAttribute("position",new $n(r,3)),super(s,new ts({color:t,toneMapped:!1})),this.object=e,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(){if(this.object!==void 0&&lx.setFromObject(this.object),lx.isEmpty())return;const e=lx.min,t=lx.max,i=this.geometry.attributes.position,r=i.array;r[0]=t.x,r[1]=t.y,r[2]=t.z,r[3]=e.x,r[4]=t.y,r[5]=t.z,r[6]=e.x,r[7]=e.y,r[8]=t.z,r[9]=t.x,r[10]=e.y,r[11]=t.z,r[12]=t.x,r[13]=t.y,r[14]=e.z,r[15]=e.x,r[16]=t.y,r[17]=e.z,r[18]=e.x,r[19]=e.y,r[20]=e.z,r[21]=t.x,r[22]=e.y,r[23]=e.z,i.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(e){return this.object=e,this.update(),this}copy(e,t){return super.copy(e,t),this.object=e.object,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class jX extends fa{constructor(e,t=16776960){const i=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],s=new un;s.setIndex(new $n(i,1)),s.setAttribute("position",new At(r,3)),super(s,new ts({color:t,toneMapped:!1})),this.box=e,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(e){const t=this.box;t.isEmpty()||(t.getCenter(this.position),t.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(e))}dispose(){this.geometry.dispose(),this.material.dispose()}}class VX extends uc{constructor(e,t=1,i=16776960){const r=i,s=[1,-1,0,-1,1,0,-1,-1,0,1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],o=new un;o.setAttribute("position",new At(s,3)),o.computeBoundingSphere(),super(o,new ts({color:r,toneMapped:!1})),this.type="PlaneHelper",this.plane=e,this.size=t;const a=[1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],l=new un;l.setAttribute("position",new At(a,3)),l.computeBoundingSphere(),this.add(new Vi(l,new Ic({color:r,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(e){this.position.set(0,0,0),this.scale.set(.5*this.size,.5*this.size,1),this.lookAt(this.plane.normal),this.translateZ(-this.plane.constant),super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()}}const xD=new K;let cx,AT;class BX extends Dn{constructor(e=new K(0,0,1),t=new K(0,0,0),i=1,r=16776960,s=i*.2,o=s*.2){super(),this.type="ArrowHelper",cx===void 0&&(cx=new un,cx.setAttribute("position",new At([0,0,0,0,1,0],3)),AT=new Rf(0,.5,1,5,1),AT.translate(0,-.5,0)),this.position.copy(t),this.line=new uc(cx,new ts({color:r,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new Vi(AT,new Ic({color:r,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(i,s,o)}setDirection(e){if(e.y>.99999)this.quaternion.set(0,0,0,1);else if(e.y<-.99999)this.quaternion.set(1,0,0,0);else{xD.set(e.z,0,-e.x).normalize();const t=Math.acos(e.y);this.quaternion.setFromAxisAngle(xD,t)}}setLength(e,t=e*.2,i=t*.2){this.line.scale.set(1,Math.max(1e-4,e-t),1),this.line.updateMatrix(),this.cone.scale.set(i,t,i),this.cone.position.y=e,this.cone.updateMatrix()}setColor(e){this.line.material.color.set(e),this.cone.material.color.set(e)}copy(e){return super.copy(e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this}dispose(){this.line.geometry.dispose(),this.line.material.dispose(),this.cone.geometry.dispose(),this.cone.material.dispose()}}class zX extends fa{constructor(e=1){const t=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],i=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],r=new un;r.setAttribute("position",new At(t,3)),r.setAttribute("color",new At(i,3));const s=new ts({vertexColors:!0,toneMapped:!1});super(r,s),this.type="AxesHelper"}setColors(e,t,i){const r=new xt,s=this.geometry.attributes.color.array;return r.set(e),r.toArray(s,0),r.toArray(s,3),r.set(t),r.toArray(s,6),r.toArray(s,9),r.set(i),r.toArray(s,12),r.toArray(s,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class HX{constructor(){this.type="ShapePath",this.color=new xt,this.subPaths=[],this.currentPath=null}moveTo(e,t){return this.currentPath=new dg,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t),this}lineTo(e,t){return this.currentPath.lineTo(e,t),this}quadraticCurveTo(e,t,i,r){return this.currentPath.quadraticCurveTo(e,t,i,r),this}bezierCurveTo(e,t,i,r,s,o){return this.currentPath.bezierCurveTo(e,t,i,r,s,o),this}splineThru(e){return this.currentPath.splineThru(e),this}toShapes(e){function t(v){const S=[];for(let E=0,I=v.length;E<I;E++){const U=v[E],O=new Bu;O.curves=U.curves,S.push(O)}return S}function i(v,S){const E=S.length;let I=!1;for(let U=E-1,O=0;O<E;U=O++){let C=S[U],P=S[O],M=P.x-C.x,A=P.y-C.y;if(Math.abs(A)>Number.EPSILON){if(A<0&&(C=S[O],M=-M,P=S[U],A=-A),v.y<C.y||v.y>P.y)continue;if(v.y===C.y){if(v.x===C.x)return!0}else{const D=A*(v.x-C.x)-M*(v.y-C.y);if(D===0)return!0;if(D<0)continue;I=!I}}else{if(v.y!==C.y)continue;if(P.x<=v.x&&v.x<=C.x||C.x<=v.x&&v.x<=P.x)return!0}}return I}const r=ia.isClockWise,s=this.subPaths;if(s.length===0)return[];let o,a,l;const c=[];if(s.length===1)return a=s[0],l=new Bu,l.curves=a.curves,c.push(l),c;let u=!r(s[0].getPoints());u=e?!u:u;const f=[],m=[];let g=[],x=0,b;m[x]=void 0,g[x]=[];for(let v=0,S=s.length;v<S;v++)a=s[v],b=a.getPoints(),o=r(b),o=e?!o:o,o?(!u&&m[x]&&x++,m[x]={s:new Bu,p:b},m[x].s.curves=a.curves,u&&x++,g[x]=[]):g[x].push({h:a,p:b[0]});if(!m[0])return t(s);if(m.length>1){let v=!1,S=0;for(let E=0,I=m.length;E<I;E++)f[E]=[];for(let E=0,I=m.length;E<I;E++){const U=g[E];for(let O=0;O<U.length;O++){const C=U[O];let P=!0;for(let M=0;M<m.length;M++)i(C.p,m[M].p)&&(E!==M&&S++,P?(P=!1,f[M].push(C)):v=!0);P&&f[E].push(C)}}S>0&&v===!1&&(g=f)}let w;for(let v=0,S=m.length;v<S;v++){l=m[v].s,c.push(l),w=g[v];for(let E=0,I=w.length;E<I;E++)l.holes.push(w[E].h)}return c}}class GX extends da{constructor(e,t=null){super(),this.object=e,this.domElement=t,this.enabled=!0,this.state=-1,this.keys={},this.mouseButtons={LEFT:null,MIDDLE:null,RIGHT:null},this.touches={ONE:null,TWO:null}}connect(){}disconnect(){}dispose(){}update(){}}function WX(n,e){const t=n.image&&n.image.width?n.image.width/n.image.height:1;return t>e?(n.repeat.x=1,n.repeat.y=t/e,n.offset.x=0,n.offset.y=(1-n.repeat.y)/2):(n.repeat.x=e/t,n.repeat.y=1,n.offset.x=(1-n.repeat.x)/2,n.offset.y=0),n}function qX(n,e){const t=n.image&&n.image.width?n.image.width/n.image.height:1;return t>e?(n.repeat.x=e/t,n.repeat.y=1,n.offset.x=(1-n.repeat.x)/2,n.offset.y=0):(n.repeat.x=1,n.repeat.y=t/e,n.offset.x=0,n.offset.y=(1-n.repeat.y)/2),n}function $X(n){return n.repeat.x=1,n.repeat.y=1,n.offset.x=0,n.offset.y=0,n}function w1(n,e,t,i){const r=XX(i);switch(t){case MA:return n*e;case PA:return n*e;case RA:return n*e*2;case vw:return n*e/r.components*r.byteLength;case Wg:return n*e/r.components*r.byteLength;case NA:return n*e*2/r.components*r.byteLength;case xw:return n*e*2/r.components*r.byteLength;case IA:return n*e*3/r.components*r.byteLength;case Lr:return n*e*4/r.components*r.byteLength;case _w:return n*e*4/r.components*r.byteLength;case gm:case ym:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*8;case vm:case xm:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*16;case z0:case G0:return Math.max(n,16)*Math.max(e,8)/4;case B0:case H0:return Math.max(n,8)*Math.max(e,8)/2;case W0:case q0:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*8;case $0:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*16;case X0:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*16;case K0:return Math.floor((n+4)/5)*Math.floor((e+3)/4)*16;case Y0:return Math.floor((n+4)/5)*Math.floor((e+4)/5)*16;case J0:return Math.floor((n+5)/6)*Math.floor((e+4)/5)*16;case Q0:return Math.floor((n+5)/6)*Math.floor((e+5)/6)*16;case Z0:return Math.floor((n+7)/8)*Math.floor((e+4)/5)*16;case e_:return Math.floor((n+7)/8)*Math.floor((e+5)/6)*16;case t_:return Math.floor((n+7)/8)*Math.floor((e+7)/8)*16;case n_:return Math.floor((n+9)/10)*Math.floor((e+4)/5)*16;case i_:return Math.floor((n+9)/10)*Math.floor((e+5)/6)*16;case r_:return Math.floor((n+9)/10)*Math.floor((e+7)/8)*16;case s_:return Math.floor((n+9)/10)*Math.floor((e+9)/10)*16;case o_:return Math.floor((n+11)/12)*Math.floor((e+9)/10)*16;case a_:return Math.floor((n+11)/12)*Math.floor((e+11)/12)*16;case _m:case l_:case c_:return Math.ceil(n/4)*Math.ceil(e/4)*16;case DA:case u_:return Math.ceil(n/4)*Math.ceil(e/4)*8;case h_:case d_:return Math.ceil(n/4)*Math.ceil(e/4)*16}throw new Error(`Unable to determine texture byte length for ${t} format.`)}function XX(n){switch(n){case Lo:case EA:return{byteLength:1,components:1};case lf:case CA:case If:return{byteLength:2,components:1};case gw:case yw:return{byteLength:2,components:4};case Ja:case mw:case gs:return{byteLength:4,components:1};case AA:return{byteLength:4,components:3}}throw new Error(`Unknown texture type ${n}.`)}class KX{static contain(e,t){return WX(e,t)}static cover(e,t){return qX(e,t)}static fill(e){return $X(e)}static getByteLength(e,t,i,r){return w1(e,t,i,r)}}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:Hg}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=Hg);/**
 * @license
 * Copyright 2010-2025 Three.js Authors
 * SPDX-License-Identifier: MIT
 */function kV(){let n=null,e=!1,t=null,i=null;function r(s,o){t(s,o),i=n.requestAnimationFrame(r)}return{start:function(){e!==!0&&t!==null&&(i=n.requestAnimationFrame(r),e=!0)},stop:function(){n.cancelAnimationFrame(i),e=!1},setAnimationLoop:function(s){t=s},setContext:function(s){n=s}}}function YX(n){const e=new WeakMap;function t(a,l){const c=a.array,u=a.usage,f=c.byteLength,m=n.createBuffer();n.bindBuffer(l,m),n.bufferData(l,c,u),a.onUploadCallback();let g;if(c instanceof Float32Array)g=n.FLOAT;else if(c instanceof Uint16Array)a.isFloat16BufferAttribute?g=n.HALF_FLOAT:g=n.UNSIGNED_SHORT;else if(c instanceof Int16Array)g=n.SHORT;else if(c instanceof Uint32Array)g=n.UNSIGNED_INT;else if(c instanceof Int32Array)g=n.INT;else if(c instanceof Int8Array)g=n.BYTE;else if(c instanceof Uint8Array)g=n.UNSIGNED_BYTE;else if(c instanceof Uint8ClampedArray)g=n.UNSIGNED_BYTE;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+c);return{buffer:m,type:g,bytesPerElement:c.BYTES_PER_ELEMENT,version:a.version,size:f}}function i(a,l,c){const u=l.array,f=l.updateRanges;if(n.bindBuffer(c,a),f.length===0)n.bufferSubData(c,0,u);else{f.sort((g,x)=>g.start-x.start);let m=0;for(let g=1;g<f.length;g++){const x=f[m],b=f[g];b.start<=x.start+x.count+1?x.count=Math.max(x.count,b.start+b.count-x.start):(++m,f[m]=b)}f.length=m+1;for(let g=0,x=f.length;g<x;g++){const b=f[g];n.bufferSubData(c,b.start*u.BYTES_PER_ELEMENT,u,b.start,b.count)}l.clearUpdateRanges()}l.onUploadCallback()}function r(a){return a.isInterleavedBufferAttribute&&(a=a.data),e.get(a)}function s(a){a.isInterleavedBufferAttribute&&(a=a.data);const l=e.get(a);l&&(n.deleteBuffer(l.buffer),e.delete(a))}function o(a,l){if(a.isInterleavedBufferAttribute&&(a=a.data),a.isGLBufferAttribute){const u=e.get(a);(!u||u.version<a.version)&&e.set(a,{buffer:a.buffer,type:a.type,bytesPerElement:a.elementSize,version:a.version});return}const c=e.get(a);if(c===void 0)e.set(a,t(a,l));else if(c.version<a.version){if(c.size!==a.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");i(c.buffer,a,l),c.version=a.version}}return{get:r,remove:s,update:o}}var JX=`#ifdef USE_ALPHAHASH
	if ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;
#endif`,QX=`#ifdef USE_ALPHAHASH
	const float ALPHA_HASH_SCALE = 0.05;
	float hash2D( vec2 value ) {
		return fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );
	}
	float hash3D( vec3 value ) {
		return hash2D( vec2( hash2D( value.xy ), value.z ) );
	}
	float getAlphaHashThreshold( vec3 position ) {
		float maxDeriv = max(
			length( dFdx( position.xyz ) ),
			length( dFdy( position.xyz ) )
		);
		float pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );
		vec2 pixScales = vec2(
			exp2( floor( log2( pixScale ) ) ),
			exp2( ceil( log2( pixScale ) ) )
		);
		vec2 alpha = vec2(
			hash3D( floor( pixScales.x * position.xyz ) ),
			hash3D( floor( pixScales.y * position.xyz ) )
		);
		float lerpFactor = fract( log2( pixScale ) );
		float x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;
		float a = min( lerpFactor, 1.0 - lerpFactor );
		vec3 cases = vec3(
			x * x / ( 2.0 * a * ( 1.0 - a ) ),
			( x - 0.5 * a ) / ( 1.0 - a ),
			1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )
		);
		float threshold = ( x < ( 1.0 - a ) )
			? ( ( x < a ) ? cases.x : cases.y )
			: cases.z;
		return clamp( threshold , 1.0e-6, 1.0 );
	}
#endif`,ZX=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`,eK=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,tK=`#ifdef USE_ALPHATEST
	#ifdef ALPHA_TO_COVERAGE
	diffuseColor.a = smoothstep( alphaTest, alphaTest + fwidth( diffuseColor.a ), diffuseColor.a );
	if ( diffuseColor.a == 0.0 ) discard;
	#else
	if ( diffuseColor.a < alphaTest ) discard;
	#endif
#endif`,nK=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,iK=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_CLEARCOAT ) 
		clearcoatSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_SHEEN ) 
		sheenSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometryNormal, geometryViewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,rK=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,sK=`#ifdef USE_BATCHING
	#if ! defined( GL_ANGLE_multi_draw )
	#define gl_DrawID _gl_DrawID
	uniform int _gl_DrawID;
	#endif
	uniform highp sampler2D batchingTexture;
	uniform highp usampler2D batchingIdTexture;
	mat4 getBatchingMatrix( const in float i ) {
		int size = textureSize( batchingTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
	float getIndirectIndex( const in int i ) {
		int size = textureSize( batchingIdTexture, 0 ).x;
		int x = i % size;
		int y = i / size;
		return float( texelFetch( batchingIdTexture, ivec2( x, y ), 0 ).r );
	}
#endif
#ifdef USE_BATCHING_COLOR
	uniform sampler2D batchingColorTexture;
	vec3 getBatchingColor( const in float i ) {
		int size = textureSize( batchingColorTexture, 0 ).x;
		int j = int( i );
		int x = j % size;
		int y = j / size;
		return texelFetch( batchingColorTexture, ivec2( x, y ), 0 ).rgb;
	}
#endif`,oK=`#ifdef USE_BATCHING
	mat4 batchingMatrix = getBatchingMatrix( getIndirectIndex( gl_DrawID ) );
#endif`,aK=`vec3 transformed = vec3( position );
#ifdef USE_ALPHAHASH
	vPosition = vec3( position );
#endif`,lK=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,cK=`float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
} // validated`,uK=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,hK=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vBumpMapUv );
		vec2 dSTdy = dFdy( vBumpMapUv );
		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );
		vec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,dK=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#ifdef ALPHA_TO_COVERAGE
		float distanceToPlane, distanceGradient;
		float clipOpacity = 1.0;
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
			distanceGradient = fwidth( distanceToPlane ) / 2.0;
			clipOpacity *= smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			if ( clipOpacity == 0.0 ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			float unionClipOpacity = 1.0;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
				distanceGradient = fwidth( distanceToPlane ) / 2.0;
				unionClipOpacity *= 1.0 - smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			}
			#pragma unroll_loop_end
			clipOpacity *= 1.0 - unionClipOpacity;
		#endif
		diffuseColor.a *= clipOpacity;
		if ( diffuseColor.a == 0.0 ) discard;
	#else
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			bool clipped = true;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
			}
			#pragma unroll_loop_end
			if ( clipped ) discard;
		#endif
	#endif
#endif`,fK=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,pK=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,mK=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,gK=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,yK=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,vK=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	varying vec3 vColor;
#endif`,xK=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif
#ifdef USE_BATCHING_COLOR
	vec3 batchingColor = getBatchingColor( getIndirectIndex( gl_DrawID ) );
	vColor.xyz *= batchingColor.xyz;
#endif`,_K=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
#ifdef USE_ALPHAHASH
	varying vec3 vPosition;
#endif
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
} // validated`,wK=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,bK=`vec3 transformedNormal = objectNormal;
#ifdef USE_TANGENT
	vec3 transformedTangent = objectTangent;
#endif
#ifdef USE_BATCHING
	mat3 bm = mat3( batchingMatrix );
	transformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );
	transformedNormal = bm * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = bm * transformedTangent;
	#endif
#endif
#ifdef USE_INSTANCING
	mat3 im = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );
	transformedNormal = im * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = im * transformedTangent;
	#endif
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	transformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,SK=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,TK=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`,EK=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
	#ifdef DECODE_VIDEO_TEXTURE_EMISSIVE
		emissiveColor = sRGBTransferEOTF( emissiveColor );
	#endif
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,CK=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,AK="gl_FragColor = linearToOutputTexel( gl_FragColor );",MK=`vec4 LinearTransferOETF( in vec4 value ) {
	return value;
}
vec4 sRGBTransferEOTF( in vec4 value ) {
	return vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );
}
vec4 sRGBTransferOETF( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,IK=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, envMapRotation * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,PK=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	uniform mat3 envMapRotation;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,RK=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,NK=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,DK=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,LK=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,kK=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,OK=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,UK=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,FK=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,jK=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,VK=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,BK=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,zK=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
#if defined( USE_LIGHT_PROBES )
	uniform vec3 lightProbe[ 9 ];
#endif
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
	if ( cutoffDistance > 0.0 ) {
		distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
	}
	return distanceFalloff;
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,HK=`#ifdef USE_ENVMAP
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	#ifdef USE_ANISOTROPY
		vec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {
			#ifdef ENVMAP_TYPE_CUBE_UV
				vec3 bentNormal = cross( bitangent, viewDir );
				bentNormal = normalize( cross( bentNormal, bitangent ) );
				bentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );
				return getIBLRadiance( viewDir, bentNormal, roughness );
			#else
				return vec3( 0.0 );
			#endif
		}
	#endif
#endif`,GK=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,WK=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,qK=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,$K=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,XK=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef USE_SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULAR_COLORMAP
			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
		#endif
		#ifdef USE_SPECULAR_INTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_DISPERSION
	material.dispersion = dispersion;
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEEN_COLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEEN_ROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
	#endif
#endif
#ifdef USE_ANISOTROPY
	#ifdef USE_ANISOTROPYMAP
		mat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );
		vec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;
		vec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;
	#else
		vec2 anisotropyV = anisotropyVector;
	#endif
	material.anisotropy = length( anisotropyV );
	if( material.anisotropy == 0.0 ) {
		anisotropyV = vec2( 1.0, 0.0 );
	} else {
		anisotropyV /= material.anisotropy;
		material.anisotropy = saturate( material.anisotropy );
	}
	material.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );
	material.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;
	material.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;
#endif`,KK=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	float dispersion;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
	#ifdef USE_ANISOTROPY
		float anisotropy;
		float alphaT;
		vec3 anisotropyT;
		vec3 anisotropyB;
	#endif
};
vec3 clearcoatSpecularDirect = vec3( 0.0 );
vec3 clearcoatSpecularIndirect = vec3( 0.0 );
vec3 sheenSpecularDirect = vec3( 0.0 );
vec3 sheenSpecularIndirect = vec3(0.0 );
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
#ifdef USE_ANISOTROPY
	float V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {
		float gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );
		float gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );
		float v = 0.5 / ( gv + gl );
		return saturate(v);
	}
	float D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {
		float a2 = alphaT * alphaB;
		highp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );
		highp float v2 = dot( v, v );
		float w2 = a2 / v2;
		return RECIPROCAL_PI * a2 * pow2 ( w2 );
	}
#endif
#ifdef USE_CLEARCOAT
	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
		vec3 f0 = material.clearcoatF0;
		float f90 = material.clearcoatF90;
		float roughness = material.clearcoatRoughness;
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = F_Schlick( f0, f90, dotVH );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 f0 = material.specularColor;
	float f90 = material.specularF90;
	float roughness = material.roughness;
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	#ifdef USE_IRIDESCENCE
		F = mix( F, material.iridescenceFresnel, material.iridescence );
	#endif
	#ifdef USE_ANISOTROPY
		float dotTL = dot( material.anisotropyT, lightDir );
		float dotTV = dot( material.anisotropyT, viewDir );
		float dotTH = dot( material.anisotropyT, halfDir );
		float dotBL = dot( material.anisotropyB, lightDir );
		float dotBV = dot( material.anisotropyB, viewDir );
		float dotBH = dot( material.anisotropyB, halfDir );
		float V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );
		float D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );
	#else
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
	#endif
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometryNormal;
		vec3 viewDir = geometryViewDir;
		vec3 position = geometryPosition;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );
	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometryViewDir, geometryNormal, material );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,YK=`
vec3 geometryPosition = - vViewPosition;
vec3 geometryNormal = normal;
vec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
vec3 geometryClearcoatNormal = vec3( 0.0 );
#ifdef USE_CLEARCOAT
	geometryClearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometryViewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometryPosition, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowIntensity, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometryPosition, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowIntensity, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowIntensity, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	#if defined( USE_LIGHT_PROBES )
		irradiance += getLightProbeIrradiance( lightProbe, geometryNormal );
	#endif
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,JK=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometryNormal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	#ifdef USE_ANISOTROPY
		radiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );
	#else
		radiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );
	#endif
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,QK=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif`,ZK=`#if defined( USE_LOGDEPTHBUF )
	gl_FragDepth = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,eY=`#if defined( USE_LOGDEPTHBUF )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,tY=`#ifdef USE_LOGDEPTHBUF
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,nY=`#ifdef USE_LOGDEPTHBUF
	vFragDepth = 1.0 + gl_Position.w;
	vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
#endif`,iY=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vMapUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = sRGBTransferEOTF( sampledDiffuseColor );
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,rY=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,sY=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	#if defined( USE_POINTS_UV )
		vec2 uv = vUv;
	#else
		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	#endif
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,oY=`#if defined( USE_POINTS_UV )
	varying vec2 vUv;
#else
	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
		uniform mat3 uvTransform;
	#endif
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,aY=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
	metalnessFactor *= texelMetalness.b;
#endif`,lY=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,cY=`#ifdef USE_INSTANCING_MORPH
	float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	float morphTargetBaseInfluence = texelFetch( morphTexture, ivec2( 0, gl_InstanceID ), 0 ).r;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		morphTargetInfluences[i] =  texelFetch( morphTexture, ivec2( i + 1, gl_InstanceID ), 0 ).r;
	}
#endif`,uY=`#if defined( USE_MORPHCOLORS )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,hY=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,dY=`#ifdef USE_MORPHTARGETS
	#ifndef USE_INSTANCING_MORPH
		uniform float morphTargetBaseInfluence;
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	#endif
	uniform sampler2DArray morphTargetsTexture;
	uniform ivec2 morphTargetsTextureSize;
	vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
		int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
		int y = texelIndex / morphTargetsTextureSize.x;
		int x = texelIndex - y * morphTargetsTextureSize.x;
		ivec3 morphUV = ivec3( x, y, morphTargetIndex );
		return texelFetch( morphTargetsTexture, morphUV, 0 );
	}
#endif`,fY=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,pY=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal *= faceDirection;
	#endif
#endif
#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )
	#ifdef USE_TANGENT
		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn = getTangentFrame( - vViewPosition, normal,
		#if defined( USE_NORMALMAP )
			vNormalMapUv
		#elif defined( USE_CLEARCOAT_NORMALMAP )
			vClearcoatNormalMapUv
		#else
			vUv
		#endif
		);
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn[0] *= faceDirection;
		tbn[1] *= faceDirection;
	#endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	#ifdef USE_TANGENT
		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn2[0] *= faceDirection;
		tbn2[1] *= faceDirection;
	#endif
#endif
vec3 nonPerturbedNormal = normal;`,mY=`#ifdef USE_NORMALMAP_OBJECTSPACE
	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( USE_NORMALMAP_TANGENTSPACE )
	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	normal = normalize( tbn * mapN );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,gY=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,yY=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,vY=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,xY=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )
	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( uv.st );
		vec2 st1 = dFdy( uv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
		return mat3( T * scale, B * scale, N );
	}
#endif`,_Y=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = nonPerturbedNormal;
#endif`,wY=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	clearcoatNormal = normalize( tbn2 * clearcoatMapN );
#endif`,bY=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif`,SY=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,TY=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,EY=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;const float ShiftRight8 = 1. / 256.;
const float Inv255 = 1. / 255.;
const vec4 PackFactors = vec4( 1.0, 256.0, 256.0 * 256.0, 256.0 * 256.0 * 256.0 );
const vec2 UnpackFactors2 = vec2( UnpackDownscale, 1.0 / PackFactors.g );
const vec3 UnpackFactors3 = vec3( UnpackDownscale / PackFactors.rg, 1.0 / PackFactors.b );
const vec4 UnpackFactors4 = vec4( UnpackDownscale / PackFactors.rgb, 1.0 / PackFactors.a );
vec4 packDepthToRGBA( const in float v ) {
	if( v <= 0.0 )
		return vec4( 0., 0., 0., 0. );
	if( v >= 1.0 )
		return vec4( 1., 1., 1., 1. );
	float vuf;
	float af = modf( v * PackFactors.a, vuf );
	float bf = modf( vuf * ShiftRight8, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec4( vuf * Inv255, gf * PackUpscale, bf * PackUpscale, af );
}
vec3 packDepthToRGB( const in float v ) {
	if( v <= 0.0 )
		return vec3( 0., 0., 0. );
	if( v >= 1.0 )
		return vec3( 1., 1., 1. );
	float vuf;
	float bf = modf( v * PackFactors.b, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec3( vuf * Inv255, gf * PackUpscale, bf );
}
vec2 packDepthToRG( const in float v ) {
	if( v <= 0.0 )
		return vec2( 0., 0. );
	if( v >= 1.0 )
		return vec2( 1., 1. );
	float vuf;
	float gf = modf( v * 256., vuf );
	return vec2( vuf * Inv255, gf );
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors4 );
}
float unpackRGBToDepth( const in vec3 v ) {
	return dot( v, UnpackFactors3 );
}
float unpackRGToDepth( const in vec2 v ) {
	return v.r * UnpackFactors2.r + v.g * UnpackFactors2.g;
}
vec4 pack2HalfToRGBA( const in vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( const in vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return depth * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * depth - far );
}`,CY=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,AY=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_BATCHING
	mvPosition = batchingMatrix * mvPosition;
#endif
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,MY=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,IY=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,PY=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
	roughnessFactor *= texelRoughness.g;
#endif`,RY=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,NY=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		float shadow = 1.0;
		vec3 lightToPosition = shadowCoord.xyz;
		
		float lightToPositionLength = length( lightToPosition );
		if ( lightToPositionLength - shadowCameraFar <= 0.0 && lightToPositionLength - shadowCameraNear >= 0.0 ) {
			float dp = ( lightToPositionLength - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );			dp += shadowBias;
			vec3 bd3D = normalize( lightToPosition );
			vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
			#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
				vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
				shadow = (
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
				) * ( 1.0 / 9.0 );
			#else
				shadow = texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
			#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
#endif`,DY=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,LY=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,kY=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowIntensity, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowIntensity, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowIntensity, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,OY=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,UY=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	mat4 getBoneMatrix( const in float i ) {
		int size = textureSize( boneTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif`,FY=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,jY=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,VY=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,BY=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,zY=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,HY=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return saturate( toneMappingExposure * color );
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 CineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
const mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(
	vec3( 1.6605, - 0.1246, - 0.0182 ),
	vec3( - 0.5876, 1.1329, - 0.1006 ),
	vec3( - 0.0728, - 0.0083, 1.1187 )
);
const mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(
	vec3( 0.6274, 0.0691, 0.0164 ),
	vec3( 0.3293, 0.9195, 0.0880 ),
	vec3( 0.0433, 0.0113, 0.8956 )
);
vec3 agxDefaultContrastApprox( vec3 x ) {
	vec3 x2 = x * x;
	vec3 x4 = x2 * x2;
	return + 15.5 * x4 * x2
		- 40.14 * x4 * x
		+ 31.96 * x4
		- 6.868 * x2 * x
		+ 0.4298 * x2
		+ 0.1191 * x
		- 0.00232;
}
vec3 AgXToneMapping( vec3 color ) {
	const mat3 AgXInsetMatrix = mat3(
		vec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),
		vec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),
		vec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )
	);
	const mat3 AgXOutsetMatrix = mat3(
		vec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),
		vec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),
		vec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )
	);
	const float AgxMinEv = - 12.47393;	const float AgxMaxEv = 4.026069;
	color *= toneMappingExposure;
	color = LINEAR_SRGB_TO_LINEAR_REC2020 * color;
	color = AgXInsetMatrix * color;
	color = max( color, 1e-10 );	color = log2( color );
	color = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );
	color = clamp( color, 0.0, 1.0 );
	color = agxDefaultContrastApprox( color );
	color = AgXOutsetMatrix * color;
	color = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );
	color = LINEAR_REC2020_TO_LINEAR_SRGB * color;
	color = clamp( color, 0.0, 1.0 );
	return color;
}
vec3 NeutralToneMapping( vec3 color ) {
	const float StartCompression = 0.8 - 0.04;
	const float Desaturation = 0.15;
	color *= toneMappingExposure;
	float x = min( color.r, min( color.g, color.b ) );
	float offset = x < 0.08 ? x - 6.25 * x * x : 0.04;
	color -= offset;
	float peak = max( color.r, max( color.g, color.b ) );
	if ( peak < StartCompression ) return color;
	float d = 1. - StartCompression;
	float newPeak = 1. - d * d / ( peak + d - StartCompression );
	color *= newPeak / peak;
	float g = 1. - 1. / ( Desaturation * ( peak - newPeak ) + 1. );
	return mix( color, vec3( newPeak ), g );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,GY=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmitted = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.dispersion, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );
#endif`,WY=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return vec3( 1.0 );
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float dispersion, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec4 transmittedLight;
		vec3 transmittance;
		#ifdef USE_DISPERSION
			float halfSpread = ( ior - 1.0 ) * 0.025 * dispersion;
			vec3 iors = vec3( ior - halfSpread, ior, ior + halfSpread );
			for ( int i = 0; i < 3; i ++ ) {
				vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, iors[ i ], modelMatrix );
				vec3 refractedRayExit = position + transmissionRay;
				vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
				vec2 refractionCoords = ndcPos.xy / ndcPos.w;
				refractionCoords += 1.0;
				refractionCoords /= 2.0;
				vec4 transmissionSample = getTransmissionSample( refractionCoords, roughness, iors[ i ] );
				transmittedLight[ i ] = transmissionSample[ i ];
				transmittedLight.a += transmissionSample.a;
				transmittance[ i ] = diffuseColor[ i ] * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance )[ i ];
			}
			transmittedLight.a /= 3.0;
		#else
			vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
			vec3 refractedRayExit = position + transmissionRay;
			vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
			vec2 refractionCoords = ndcPos.xy / ndcPos.w;
			refractionCoords += 1.0;
			refractionCoords /= 2.0;
			transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
			transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );
		#endif
		vec3 attenuatedColor = transmittance * transmittedLight.rgb;
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		float transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;
		return vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );
	}
#endif`,qY=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_SPECULARMAP
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,$Y=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	uniform mat3 mapTransform;
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	uniform mat3 alphaMapTransform;
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	uniform mat3 lightMapTransform;
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	uniform mat3 aoMapTransform;
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	uniform mat3 bumpMapTransform;
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	uniform mat3 normalMapTransform;
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_DISPLACEMENTMAP
	uniform mat3 displacementMapTransform;
	varying vec2 vDisplacementMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	uniform mat3 emissiveMapTransform;
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	uniform mat3 metalnessMapTransform;
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	uniform mat3 roughnessMapTransform;
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	uniform mat3 anisotropyMapTransform;
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	uniform mat3 clearcoatMapTransform;
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform mat3 clearcoatNormalMapTransform;
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform mat3 clearcoatRoughnessMapTransform;
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	uniform mat3 sheenColorMapTransform;
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	uniform mat3 sheenRoughnessMapTransform;
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	uniform mat3 iridescenceMapTransform;
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform mat3 iridescenceThicknessMapTransform;
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SPECULARMAP
	uniform mat3 specularMapTransform;
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	uniform mat3 specularColorMapTransform;
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	uniform mat3 specularIntensityMapTransform;
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,XY=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	vUv = vec3( uv, 1 ).xy;
#endif
#ifdef USE_MAP
	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ANISOTROPYMAP
	vAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
#endif`,KY=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_BATCHING
		worldPosition = batchingMatrix * worldPosition;
	#endif
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const YY=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,JY=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,QY=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,ZY=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
uniform mat3 backgroundRotation;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, backgroundRotation * vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, backgroundRotation * vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,eJ=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,tJ=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,nJ=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,iJ=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#elif DEPTH_PACKING == 3202
		gl_FragColor = vec4( packDepthToRGB( fragCoordZ ), 1.0 );
	#elif DEPTH_PACKING == 3203
		gl_FragColor = vec4( packDepthToRG( fragCoordZ ), 0.0, 1.0 );
	#endif
}`,rJ=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,sJ=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,oJ=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,aJ=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,lJ=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,cJ=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,uJ=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,hJ=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,dJ=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,fJ=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,pJ=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,mJ=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,gJ=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	vViewPosition = - mvPosition.xyz;
#endif
}`,yJ=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( 0.0, 0.0, 0.0, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), diffuseColor.a );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,vJ=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,xJ=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,_J=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,wJ=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define USE_SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef USE_SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULAR_COLORMAP
		uniform sampler2D specularColorMap;
	#endif
	#ifdef USE_SPECULAR_INTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_DISPERSION
	uniform float dispersion;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEEN_COLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEEN_ROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
#ifdef USE_ANISOTROPY
	uniform vec2 anisotropyVector;
	#ifdef USE_ANISOTROPYMAP
		uniform sampler2D anisotropyMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;
	#endif
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,bJ=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,SJ=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,TJ=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
#ifdef USE_POINTS_UV
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif
void main() {
	#ifdef USE_POINTS_UV
		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	#endif
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,EJ=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,CJ=`#include <common>
#include <batching_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,AJ=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,MJ=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix[ 3 ];
	vec2 scale = vec2( length( modelMatrix[ 0 ].xyz ), length( modelMatrix[ 1 ].xyz ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,IJ=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,cn={alphahash_fragment:JX,alphahash_pars_fragment:QX,alphamap_fragment:ZX,alphamap_pars_fragment:eK,alphatest_fragment:tK,alphatest_pars_fragment:nK,aomap_fragment:iK,aomap_pars_fragment:rK,batching_pars_vertex:sK,batching_vertex:oK,begin_vertex:aK,beginnormal_vertex:lK,bsdfs:cK,iridescence_fragment:uK,bumpmap_pars_fragment:hK,clipping_planes_fragment:dK,clipping_planes_pars_fragment:fK,clipping_planes_pars_vertex:pK,clipping_planes_vertex:mK,color_fragment:gK,color_pars_fragment:yK,color_pars_vertex:vK,color_vertex:xK,common:_K,cube_uv_reflection_fragment:wK,defaultnormal_vertex:bK,displacementmap_pars_vertex:SK,displacementmap_vertex:TK,emissivemap_fragment:EK,emissivemap_pars_fragment:CK,colorspace_fragment:AK,colorspace_pars_fragment:MK,envmap_fragment:IK,envmap_common_pars_fragment:PK,envmap_pars_fragment:RK,envmap_pars_vertex:NK,envmap_physical_pars_fragment:HK,envmap_vertex:DK,fog_vertex:LK,fog_pars_vertex:kK,fog_fragment:OK,fog_pars_fragment:UK,gradientmap_pars_fragment:FK,lightmap_pars_fragment:jK,lights_lambert_fragment:VK,lights_lambert_pars_fragment:BK,lights_pars_begin:zK,lights_toon_fragment:GK,lights_toon_pars_fragment:WK,lights_phong_fragment:qK,lights_phong_pars_fragment:$K,lights_physical_fragment:XK,lights_physical_pars_fragment:KK,lights_fragment_begin:YK,lights_fragment_maps:JK,lights_fragment_end:QK,logdepthbuf_fragment:ZK,logdepthbuf_pars_fragment:eY,logdepthbuf_pars_vertex:tY,logdepthbuf_vertex:nY,map_fragment:iY,map_pars_fragment:rY,map_particle_fragment:sY,map_particle_pars_fragment:oY,metalnessmap_fragment:aY,metalnessmap_pars_fragment:lY,morphinstance_vertex:cY,morphcolor_vertex:uY,morphnormal_vertex:hY,morphtarget_pars_vertex:dY,morphtarget_vertex:fY,normal_fragment_begin:pY,normal_fragment_maps:mY,normal_pars_fragment:gY,normal_pars_vertex:yY,normal_vertex:vY,normalmap_pars_fragment:xY,clearcoat_normal_fragment_begin:_Y,clearcoat_normal_fragment_maps:wY,clearcoat_pars_fragment:bY,iridescence_pars_fragment:SY,opaque_fragment:TY,packing:EY,premultiplied_alpha_fragment:CY,project_vertex:AY,dithering_fragment:MY,dithering_pars_fragment:IY,roughnessmap_fragment:PY,roughnessmap_pars_fragment:RY,shadowmap_pars_fragment:NY,shadowmap_pars_vertex:DY,shadowmap_vertex:LY,shadowmask_pars_fragment:kY,skinbase_vertex:OY,skinning_pars_vertex:UY,skinning_vertex:FY,skinnormal_vertex:jY,specularmap_fragment:VY,specularmap_pars_fragment:BY,tonemapping_fragment:zY,tonemapping_pars_fragment:HY,transmission_fragment:GY,transmission_pars_fragment:WY,uv_pars_fragment:qY,uv_pars_vertex:$Y,uv_vertex:XY,worldpos_vertex:KY,background_vert:YY,background_frag:JY,backgroundCube_vert:QY,backgroundCube_frag:ZY,cube_vert:eJ,cube_frag:tJ,depth_vert:nJ,depth_frag:iJ,distanceRGBA_vert:rJ,distanceRGBA_frag:sJ,equirect_vert:oJ,equirect_frag:aJ,linedashed_vert:lJ,linedashed_frag:cJ,meshbasic_vert:uJ,meshbasic_frag:hJ,meshlambert_vert:dJ,meshlambert_frag:fJ,meshmatcap_vert:pJ,meshmatcap_frag:mJ,meshnormal_vert:gJ,meshnormal_frag:yJ,meshphong_vert:vJ,meshphong_frag:xJ,meshphysical_vert:_J,meshphysical_frag:wJ,meshtoon_vert:bJ,meshtoon_frag:SJ,points_vert:TJ,points_frag:EJ,shadow_vert:CJ,shadow_frag:AJ,sprite_vert:MJ,sprite_frag:IJ},ot={common:{diffuse:{value:new xt(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new sn},alphaMap:{value:null},alphaMapTransform:{value:new sn},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new sn}},envmap:{envMap:{value:null},envMapRotation:{value:new sn},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new sn}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new sn}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new sn},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new sn},normalScale:{value:new Le(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new sn},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new sn}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new sn}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new sn}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new xt(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new xt(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new sn},alphaTest:{value:0},uvTransform:{value:new sn}},sprite:{diffuse:{value:new xt(16777215)},opacity:{value:1},center:{value:new Le(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new sn},alphaMap:{value:null},alphaMapTransform:{value:new sn},alphaTest:{value:0}}},Ao={basic:{uniforms:$r([ot.common,ot.specularmap,ot.envmap,ot.aomap,ot.lightmap,ot.fog]),vertexShader:cn.meshbasic_vert,fragmentShader:cn.meshbasic_frag},lambert:{uniforms:$r([ot.common,ot.specularmap,ot.envmap,ot.aomap,ot.lightmap,ot.emissivemap,ot.bumpmap,ot.normalmap,ot.displacementmap,ot.fog,ot.lights,{emissive:{value:new xt(0)}}]),vertexShader:cn.meshlambert_vert,fragmentShader:cn.meshlambert_frag},phong:{uniforms:$r([ot.common,ot.specularmap,ot.envmap,ot.aomap,ot.lightmap,ot.emissivemap,ot.bumpmap,ot.normalmap,ot.displacementmap,ot.fog,ot.lights,{emissive:{value:new xt(0)},specular:{value:new xt(1118481)},shininess:{value:30}}]),vertexShader:cn.meshphong_vert,fragmentShader:cn.meshphong_frag},standard:{uniforms:$r([ot.common,ot.envmap,ot.aomap,ot.lightmap,ot.emissivemap,ot.bumpmap,ot.normalmap,ot.displacementmap,ot.roughnessmap,ot.metalnessmap,ot.fog,ot.lights,{emissive:{value:new xt(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:cn.meshphysical_vert,fragmentShader:cn.meshphysical_frag},toon:{uniforms:$r([ot.common,ot.aomap,ot.lightmap,ot.emissivemap,ot.bumpmap,ot.normalmap,ot.displacementmap,ot.gradientmap,ot.fog,ot.lights,{emissive:{value:new xt(0)}}]),vertexShader:cn.meshtoon_vert,fragmentShader:cn.meshtoon_frag},matcap:{uniforms:$r([ot.common,ot.bumpmap,ot.normalmap,ot.displacementmap,ot.fog,{matcap:{value:null}}]),vertexShader:cn.meshmatcap_vert,fragmentShader:cn.meshmatcap_frag},points:{uniforms:$r([ot.points,ot.fog]),vertexShader:cn.points_vert,fragmentShader:cn.points_frag},dashed:{uniforms:$r([ot.common,ot.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:cn.linedashed_vert,fragmentShader:cn.linedashed_frag},depth:{uniforms:$r([ot.common,ot.displacementmap]),vertexShader:cn.depth_vert,fragmentShader:cn.depth_frag},normal:{uniforms:$r([ot.common,ot.bumpmap,ot.normalmap,ot.displacementmap,{opacity:{value:1}}]),vertexShader:cn.meshnormal_vert,fragmentShader:cn.meshnormal_frag},sprite:{uniforms:$r([ot.sprite,ot.fog]),vertexShader:cn.sprite_vert,fragmentShader:cn.sprite_frag},background:{uniforms:{uvTransform:{value:new sn},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:cn.background_vert,fragmentShader:cn.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1},backgroundRotation:{value:new sn}},vertexShader:cn.backgroundCube_vert,fragmentShader:cn.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:cn.cube_vert,fragmentShader:cn.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:cn.equirect_vert,fragmentShader:cn.equirect_frag},distanceRGBA:{uniforms:$r([ot.common,ot.displacementmap,{referencePosition:{value:new K},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:cn.distanceRGBA_vert,fragmentShader:cn.distanceRGBA_frag},shadow:{uniforms:$r([ot.lights,ot.fog,{color:{value:new xt(0)},opacity:{value:1}}]),vertexShader:cn.shadow_vert,fragmentShader:cn.shadow_frag}};Ao.physical={uniforms:$r([Ao.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new sn},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new sn},clearcoatNormalScale:{value:new Le(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new sn},dispersion:{value:0},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new sn},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new sn},sheen:{value:0},sheenColor:{value:new xt(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new sn},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new sn},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new sn},transmissionSamplerSize:{value:new Le},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new sn},attenuationDistance:{value:0},attenuationColor:{value:new xt(0)},specularColor:{value:new xt(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new sn},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new sn},anisotropyVector:{value:new Le},anisotropyMap:{value:null},anisotropyMapTransform:{value:new sn}}]),vertexShader:cn.meshphysical_vert,fragmentShader:cn.meshphysical_frag};const ux={r:0,b:0,g:0},uu=new zs,PJ=new Vt;function RJ(n,e,t,i,r,s,o){const a=new xt(0);let l=s===!0?0:1,c,u,f=null,m=0,g=null;function x(E){let I=E.isScene===!0?E.background:null;return I&&I.isTexture&&(I=(E.backgroundBlurriness>0?t:e).get(I)),I}function b(E){let I=!1;const U=x(E);U===null?v(a,l):U&&U.isColor&&(v(U,1),I=!0);const O=n.xr.getEnvironmentBlendMode();O==="additive"?i.buffers.color.setClear(0,0,0,1,o):O==="alpha-blend"&&i.buffers.color.setClear(0,0,0,0,o),(n.autoClear||I)&&(i.buffers.depth.setTest(!0),i.buffers.depth.setMask(!0),i.buffers.color.setMask(!0),n.clear(n.autoClearColor,n.autoClearDepth,n.autoClearStencil))}function w(E,I){const U=x(I);U&&(U.isCubeTexture||U.mapping===Mf)?(u===void 0&&(u=new Vi(new dh(1,1,1),new ko({name:"BackgroundCubeMaterial",uniforms:uf(Ao.backgroundCube.uniforms),vertexShader:Ao.backgroundCube.vertexShader,fragmentShader:Ao.backgroundCube.fragmentShader,side:Jr,depthTest:!1,depthWrite:!1,fog:!1})),u.geometry.deleteAttribute("normal"),u.geometry.deleteAttribute("uv"),u.onBeforeRender=function(O,C,P){this.matrixWorld.copyPosition(P.matrixWorld)},Object.defineProperty(u.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),r.update(u)),uu.copy(I.backgroundRotation),uu.x*=-1,uu.y*=-1,uu.z*=-1,U.isCubeTexture&&U.isRenderTargetTexture===!1&&(uu.y*=-1,uu.z*=-1),u.material.uniforms.envMap.value=U,u.material.uniforms.flipEnvMap.value=U.isCubeTexture&&U.isRenderTargetTexture===!1?-1:1,u.material.uniforms.backgroundBlurriness.value=I.backgroundBlurriness,u.material.uniforms.backgroundIntensity.value=I.backgroundIntensity,u.material.uniforms.backgroundRotation.value.setFromMatrix4(PJ.makeRotationFromEuler(uu)),u.material.toneMapped=An.getTransfer(U.colorSpace)!==Gn,(f!==U||m!==U.version||g!==n.toneMapping)&&(u.material.needsUpdate=!0,f=U,m=U.version,g=n.toneMapping),u.layers.enableAll(),E.unshift(u,u.geometry,u.material,0,0,null)):U&&U.isTexture&&(c===void 0&&(c=new Vi(new Nf(2,2),new ko({name:"BackgroundMaterial",uniforms:uf(Ao.background.uniforms),vertexShader:Ao.background.vertexShader,fragmentShader:Ao.background.fragmentShader,side:Ka,depthTest:!1,depthWrite:!1,fog:!1})),c.geometry.deleteAttribute("normal"),Object.defineProperty(c.material,"map",{get:function(){return this.uniforms.t2D.value}}),r.update(c)),c.material.uniforms.t2D.value=U,c.material.uniforms.backgroundIntensity.value=I.backgroundIntensity,c.material.toneMapped=An.getTransfer(U.colorSpace)!==Gn,U.matrixAutoUpdate===!0&&U.updateMatrix(),c.material.uniforms.uvTransform.value.copy(U.matrix),(f!==U||m!==U.version||g!==n.toneMapping)&&(c.material.needsUpdate=!0,f=U,m=U.version,g=n.toneMapping),c.layers.enableAll(),E.unshift(c,c.geometry,c.material,0,0,null))}function v(E,I){E.getRGB(ux,Fj(n)),i.buffers.color.setClear(ux.r,ux.g,ux.b,I,o)}function S(){u!==void 0&&(u.geometry.dispose(),u.material.dispose(),u=void 0),c!==void 0&&(c.geometry.dispose(),c.material.dispose(),c=void 0)}return{getClearColor:function(){return a},setClearColor:function(E,I=1){a.set(E),l=I,v(a,l)},getClearAlpha:function(){return l},setClearAlpha:function(E){l=E,v(a,l)},render:b,addToRenderList:w,dispose:S}}function NJ(n,e){const t=n.getParameter(n.MAX_VERTEX_ATTRIBS),i={},r=m(null);let s=r,o=!1;function a(A,D,B,j,te){let ce=!1;const pe=f(j,B,D);s!==pe&&(s=pe,c(s.object)),ce=g(A,j,B,te),ce&&x(A,j,B,te),te!==null&&e.update(te,n.ELEMENT_ARRAY_BUFFER),(ce||o)&&(o=!1,I(A,D,B,j),te!==null&&n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,e.get(te).buffer))}function l(){return n.createVertexArray()}function c(A){return n.bindVertexArray(A)}function u(A){return n.deleteVertexArray(A)}function f(A,D,B){const j=B.wireframe===!0;let te=i[A.id];te===void 0&&(te={},i[A.id]=te);let ce=te[D.id];ce===void 0&&(ce={},te[D.id]=ce);let pe=ce[j];return pe===void 0&&(pe=m(l()),ce[j]=pe),pe}function m(A){const D=[],B=[],j=[];for(let te=0;te<t;te++)D[te]=0,B[te]=0,j[te]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:D,enabledAttributes:B,attributeDivisors:j,object:A,attributes:{},index:null}}function g(A,D,B,j){const te=s.attributes,ce=D.attributes;let pe=0;const de=B.getAttributes();for(const W in de)if(de[W].location>=0){const F=te[W];let J=ce[W];if(J===void 0&&(W==="instanceMatrix"&&A.instanceMatrix&&(J=A.instanceMatrix),W==="instanceColor"&&A.instanceColor&&(J=A.instanceColor)),F===void 0||F.attribute!==J||J&&F.data!==J.data)return!0;pe++}return s.attributesNum!==pe||s.index!==j}function x(A,D,B,j){const te={},ce=D.attributes;let pe=0;const de=B.getAttributes();for(const W in de)if(de[W].location>=0){let F=ce[W];F===void 0&&(W==="instanceMatrix"&&A.instanceMatrix&&(F=A.instanceMatrix),W==="instanceColor"&&A.instanceColor&&(F=A.instanceColor));const J={};J.attribute=F,F&&F.data&&(J.data=F.data),te[W]=J,pe++}s.attributes=te,s.attributesNum=pe,s.index=j}function b(){const A=s.newAttributes;for(let D=0,B=A.length;D<B;D++)A[D]=0}function w(A){v(A,0)}function v(A,D){const B=s.newAttributes,j=s.enabledAttributes,te=s.attributeDivisors;B[A]=1,j[A]===0&&(n.enableVertexAttribArray(A),j[A]=1),te[A]!==D&&(n.vertexAttribDivisor(A,D),te[A]=D)}function S(){const A=s.newAttributes,D=s.enabledAttributes;for(let B=0,j=D.length;B<j;B++)D[B]!==A[B]&&(n.disableVertexAttribArray(B),D[B]=0)}function E(A,D,B,j,te,ce,pe){pe===!0?n.vertexAttribIPointer(A,D,B,te,ce):n.vertexAttribPointer(A,D,B,j,te,ce)}function I(A,D,B,j){b();const te=j.attributes,ce=B.getAttributes(),pe=D.defaultAttributeValues;for(const de in ce){const W=ce[de];if(W.location>=0){let Z=te[de];if(Z===void 0&&(de==="instanceMatrix"&&A.instanceMatrix&&(Z=A.instanceMatrix),de==="instanceColor"&&A.instanceColor&&(Z=A.instanceColor)),Z!==void 0){const F=Z.normalized,J=Z.itemSize,ue=e.get(Z);if(ue===void 0)continue;const ye=ue.buffer,le=ue.type,xe=ue.bytesPerElement,Pe=le===n.INT||le===n.UNSIGNED_INT||Z.gpuType===mw;if(Z.isInterleavedBufferAttribute){const Me=Z.data,gt=Me.stride,Kt=Z.offset;if(Me.isInstancedInterleavedBuffer){for(let Ye=0;Ye<W.locationSize;Ye++)v(W.location+Ye,Me.meshPerAttribute);A.isInstancedMesh!==!0&&j._maxInstanceCount===void 0&&(j._maxInstanceCount=Me.meshPerAttribute*Me.count)}else for(let Ye=0;Ye<W.locationSize;Ye++)w(W.location+Ye);n.bindBuffer(n.ARRAY_BUFFER,ye);for(let Ye=0;Ye<W.locationSize;Ye++)E(W.location+Ye,J/W.locationSize,le,F,gt*xe,(Kt+J/W.locationSize*Ye)*xe,Pe)}else{if(Z.isInstancedBufferAttribute){for(let Me=0;Me<W.locationSize;Me++)v(W.location+Me,Z.meshPerAttribute);A.isInstancedMesh!==!0&&j._maxInstanceCount===void 0&&(j._maxInstanceCount=Z.meshPerAttribute*Z.count)}else for(let Me=0;Me<W.locationSize;Me++)w(W.location+Me);n.bindBuffer(n.ARRAY_BUFFER,ye);for(let Me=0;Me<W.locationSize;Me++)E(W.location+Me,J/W.locationSize,le,F,J*xe,J/W.locationSize*Me*xe,Pe)}}else if(pe!==void 0){const F=pe[de];if(F!==void 0)switch(F.length){case 2:n.vertexAttrib2fv(W.location,F);break;case 3:n.vertexAttrib3fv(W.location,F);break;case 4:n.vertexAttrib4fv(W.location,F);break;default:n.vertexAttrib1fv(W.location,F)}}}}S()}function U(){P();for(const A in i){const D=i[A];for(const B in D){const j=D[B];for(const te in j)u(j[te].object),delete j[te];delete D[B]}delete i[A]}}function O(A){if(i[A.id]===void 0)return;const D=i[A.id];for(const B in D){const j=D[B];for(const te in j)u(j[te].object),delete j[te];delete D[B]}delete i[A.id]}function C(A){for(const D in i){const B=i[D];if(B[A.id]===void 0)continue;const j=B[A.id];for(const te in j)u(j[te].object),delete j[te];delete B[A.id]}}function P(){M(),o=!0,s!==r&&(s=r,c(s.object))}function M(){r.geometry=null,r.program=null,r.wireframe=!1}return{setup:a,reset:P,resetDefaultState:M,dispose:U,releaseStatesOfGeometry:O,releaseStatesOfProgram:C,initAttributes:b,enableAttribute:w,disableUnusedAttributes:S}}function DJ(n,e,t){let i;function r(c){i=c}function s(c,u){n.drawArrays(i,c,u),t.update(u,i,1)}function o(c,u,f){f!==0&&(n.drawArraysInstanced(i,c,u,f),t.update(u,i,f))}function a(c,u,f){if(f===0)return;e.get("WEBGL_multi_draw").multiDrawArraysWEBGL(i,c,0,u,0,f);let g=0;for(let x=0;x<f;x++)g+=u[x];t.update(g,i,1)}function l(c,u,f,m){if(f===0)return;const g=e.get("WEBGL_multi_draw");if(g===null)for(let x=0;x<c.length;x++)o(c[x],u[x],m[x]);else{g.multiDrawArraysInstancedWEBGL(i,c,0,u,0,m,0,f);let x=0;for(let b=0;b<f;b++)x+=u[b]*m[b];t.update(x,i,1)}}this.setMode=r,this.render=s,this.renderInstances=o,this.renderMultiDraw=a,this.renderMultiDrawInstances=l}function LJ(n,e,t,i){let r;function s(){if(r!==void 0)return r;if(e.has("EXT_texture_filter_anisotropic")===!0){const C=e.get("EXT_texture_filter_anisotropic");r=n.getParameter(C.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else r=0;return r}function o(C){return!(C!==Lr&&i.convert(C)!==n.getParameter(n.IMPLEMENTATION_COLOR_READ_FORMAT))}function a(C){const P=C===If&&(e.has("EXT_color_buffer_half_float")||e.has("EXT_color_buffer_float"));return!(C!==Lo&&i.convert(C)!==n.getParameter(n.IMPLEMENTATION_COLOR_READ_TYPE)&&C!==gs&&!P)}function l(C){if(C==="highp"){if(n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.HIGH_FLOAT).precision>0&&n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.HIGH_FLOAT).precision>0)return"highp";C="mediump"}return C==="mediump"&&n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.MEDIUM_FLOAT).precision>0&&n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}let c=t.precision!==void 0?t.precision:"highp";const u=l(c);u!==c&&(console.warn("THREE.WebGLRenderer:",c,"not supported, using",u,"instead."),c=u);const f=t.logarithmicDepthBuffer===!0,m=t.reverseDepthBuffer===!0&&e.has("EXT_clip_control"),g=n.getParameter(n.MAX_TEXTURE_IMAGE_UNITS),x=n.getParameter(n.MAX_VERTEX_TEXTURE_IMAGE_UNITS),b=n.getParameter(n.MAX_TEXTURE_SIZE),w=n.getParameter(n.MAX_CUBE_MAP_TEXTURE_SIZE),v=n.getParameter(n.MAX_VERTEX_ATTRIBS),S=n.getParameter(n.MAX_VERTEX_UNIFORM_VECTORS),E=n.getParameter(n.MAX_VARYING_VECTORS),I=n.getParameter(n.MAX_FRAGMENT_UNIFORM_VECTORS),U=x>0,O=n.getParameter(n.MAX_SAMPLES);return{isWebGL2:!0,getMaxAnisotropy:s,getMaxPrecision:l,textureFormatReadable:o,textureTypeReadable:a,precision:c,logarithmicDepthBuffer:f,reverseDepthBuffer:m,maxTextures:g,maxVertexTextures:x,maxTextureSize:b,maxCubemapSize:w,maxAttributes:v,maxVertexUniforms:S,maxVaryings:E,maxFragmentUniforms:I,vertexTextures:U,maxSamples:O}}function kJ(n){const e=this;let t=null,i=0,r=!1,s=!1;const o=new Dl,a=new sn,l={value:null,needsUpdate:!1};this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(f,m){const g=f.length!==0||m||i!==0||r;return r=m,i=f.length,g},this.beginShadows=function(){s=!0,u(null)},this.endShadows=function(){s=!1},this.setGlobalState=function(f,m){t=u(f,m,0)},this.setState=function(f,m,g){const x=f.clippingPlanes,b=f.clipIntersection,w=f.clipShadows,v=n.get(f);if(!r||x===null||x.length===0||s&&!w)s?u(null):c();else{const S=s?0:i,E=S*4;let I=v.clippingState||null;l.value=I,I=u(x,m,E,g);for(let U=0;U!==E;++U)I[U]=t[U];v.clippingState=I,this.numIntersection=b?this.numPlanes:0,this.numPlanes+=S}};function c(){l.value!==t&&(l.value=t,l.needsUpdate=i>0),e.numPlanes=i,e.numIntersection=0}function u(f,m,g,x){const b=f!==null?f.length:0;let w=null;if(b!==0){if(w=l.value,x!==!0||w===null){const v=g+b*4,S=m.matrixWorldInverse;a.getNormalMatrix(S),(w===null||w.length<v)&&(w=new Float32Array(v));for(let E=0,I=g;E!==b;++E,I+=4)o.copy(f[E]).applyMatrix4(S,a),o.normal.toArray(w,I),w[I+3]=o.constant}l.value=w,l.needsUpdate=!0}return e.numPlanes=b,e.numIntersection=0,w}}function OJ(n){let e=new WeakMap;function t(o,a){return a===ng?o.mapping=Ya:a===ig&&(o.mapping=cc),o}function i(o){if(o&&o.isTexture){const a=o.mapping;if(a===ng||a===ig)if(e.has(o)){const l=e.get(o).texture;return t(l,o.mapping)}else{const l=o.image;if(l&&l.height>0){const c=new VA(l.height);return c.fromEquirectangularTexture(n,o),e.set(o,c),o.addEventListener("dispose",r),t(c.texture,o.mapping)}else return null}}return o}function r(o){const a=o.target;a.removeEventListener("dispose",r);const l=e.get(a);l!==void 0&&(e.delete(a),l.dispose())}function s(){e=new WeakMap}return{get:i,dispose:s}}const Dd=4,_D=[.125,.215,.35,.446,.526,.582],Tu=20,MT=new mh,wD=new xt;let IT=null,PT=0,RT=0,NT=!1;const vu=(1+Math.sqrt(5))/2,sd=1/vu,bD=[new K(-vu,sd,0),new K(vu,sd,0),new K(-sd,0,vu),new K(sd,0,vu),new K(0,vu,-sd),new K(0,vu,sd),new K(-1,1,-1),new K(1,1,-1),new K(-1,1,1),new K(1,1,1)],UJ=new K;class b1{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,i=.1,r=100,s={}){const{size:o=256,position:a=UJ}=s;IT=this._renderer.getRenderTarget(),PT=this._renderer.getActiveCubeFace(),RT=this._renderer.getActiveMipmapLevel(),NT=this._renderer.xr.enabled,this._renderer.xr.enabled=!1,this._setSize(o);const l=this._allocateTargets();return l.depthBuffer=!0,this._sceneToCubeUV(e,i,r,l,a),t>0&&this._blur(l,0,0,t),this._applyPMREM(l),this._cleanup(l),l}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=ED(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=TD(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(IT,PT,RT),this._renderer.xr.enabled=NT,e.scissorTest=!1,hx(e,0,0,e.width,e.height)}_fromTexture(e,t){e.mapping===Ya||e.mapping===cc?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),IT=this._renderer.getRenderTarget(),PT=this._renderer.getActiveCubeFace(),RT=this._renderer.getActiveMipmapLevel(),NT=this._renderer.xr.enabled,this._renderer.xr.enabled=!1;const i=t||this._allocateTargets();return this._textureToCubeUV(e,i),this._applyPMREM(i),this._cleanup(i),i}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,i={magFilter:Xi,minFilter:Xi,generateMipmaps:!1,type:If,format:Lr,colorSpace:eh,depthBuffer:!1},r=SD(e,t,i);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==t){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=SD(e,t,i);const{_lodMax:s}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=FJ(s)),this._blurMaterial=jJ(s,e,t)}return r}_compileMaterial(e){const t=new Vi(this._lodPlanes[0],e);this._renderer.compile(t,MT)}_sceneToCubeUV(e,t,i,r,s){const l=new Ui(90,1,t,i),c=[1,-1,1,1,1,1],u=[1,1,1,-1,-1,-1],f=this._renderer,m=f.autoClear,g=f.toneMapping;f.getClearColor(wD),f.toneMapping=ta,f.autoClear=!1;const x=new Ic({name:"PMREM.Background",side:Jr,depthWrite:!1,depthTest:!1}),b=new Vi(new dh,x);let w=!1;const v=e.background;v?v.isColor&&(x.color.copy(v),e.background=null,w=!0):(x.color.copy(wD),w=!0);for(let S=0;S<6;S++){const E=S%3;E===0?(l.up.set(0,c[S],0),l.position.set(s.x,s.y,s.z),l.lookAt(s.x+u[S],s.y,s.z)):E===1?(l.up.set(0,0,c[S]),l.position.set(s.x,s.y,s.z),l.lookAt(s.x,s.y+u[S],s.z)):(l.up.set(0,c[S],0),l.position.set(s.x,s.y,s.z),l.lookAt(s.x,s.y,s.z+u[S]));const I=this._cubeSize;hx(r,E*I,S>2?I:0,I,I),f.setRenderTarget(r),w&&f.render(b,l),f.render(e,l)}b.geometry.dispose(),b.material.dispose(),f.toneMapping=g,f.autoClear=m,e.background=v}_textureToCubeUV(e,t){const i=this._renderer,r=e.mapping===Ya||e.mapping===cc;r?(this._cubemapMaterial===null&&(this._cubemapMaterial=ED()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=TD());const s=r?this._cubemapMaterial:this._equirectMaterial,o=new Vi(this._lodPlanes[0],s),a=s.uniforms;a.envMap.value=e;const l=this._cubeSize;hx(t,0,0,3*l,2*l),i.setRenderTarget(t),i.render(o,MT)}_applyPMREM(e){const t=this._renderer,i=t.autoClear;t.autoClear=!1;const r=this._lodPlanes.length;for(let s=1;s<r;s++){const o=Math.sqrt(this._sigmas[s]*this._sigmas[s]-this._sigmas[s-1]*this._sigmas[s-1]),a=bD[(r-s-1)%bD.length];this._blur(e,s-1,s,o,a)}t.autoClear=i}_blur(e,t,i,r,s){const o=this._pingPongRenderTarget;this._halfBlur(e,o,t,i,r,"latitudinal",s),this._halfBlur(o,e,i,i,r,"longitudinal",s)}_halfBlur(e,t,i,r,s,o,a){const l=this._renderer,c=this._blurMaterial;o!=="latitudinal"&&o!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const u=3,f=new Vi(this._lodPlanes[r],c),m=c.uniforms,g=this._sizeLods[i]-1,x=isFinite(s)?Math.PI/(2*g):2*Math.PI/(2*Tu-1),b=s/x,w=isFinite(s)?1+Math.floor(u*b):Tu;w>Tu&&console.warn(`sigmaRadians, ${s}, is too large and will clip, as it requested ${w} samples when the maximum is set to ${Tu}`);const v=[];let S=0;for(let C=0;C<Tu;++C){const P=C/b,M=Math.exp(-P*P/2);v.push(M),C===0?S+=M:C<w&&(S+=2*M)}for(let C=0;C<v.length;C++)v[C]=v[C]/S;m.envMap.value=e.texture,m.samples.value=w,m.weights.value=v,m.latitudinal.value=o==="latitudinal",a&&(m.poleAxis.value=a);const{_lodMax:E}=this;m.dTheta.value=x,m.mipInt.value=E-i;const I=this._sizeLods[r],U=3*I*(r>E-Dd?r-E+Dd:0),O=4*(this._cubeSize-I);hx(t,U,O,3*I,2*I),l.setRenderTarget(t),l.render(f,MT)}}function FJ(n){const e=[],t=[],i=[];let r=n;const s=n-Dd+1+_D.length;for(let o=0;o<s;o++){const a=Math.pow(2,r);t.push(a);let l=1/a;o>n-Dd?l=_D[o-n+Dd-1]:o===0&&(l=0),i.push(l);const c=1/(a-2),u=-c,f=1+c,m=[u,u,f,u,f,f,u,u,f,f,u,f],g=6,x=6,b=3,w=2,v=1,S=new Float32Array(b*x*g),E=new Float32Array(w*x*g),I=new Float32Array(v*x*g);for(let O=0;O<g;O++){const C=O%3*2/3-1,P=O>2?0:-1,M=[C,P,0,C+2/3,P,0,C+2/3,P+1,0,C,P,0,C+2/3,P+1,0,C,P+1,0];S.set(M,b*x*O),E.set(m,w*x*O);const A=[O,O,O,O,O,O];I.set(A,v*x*O)}const U=new un;U.setAttribute("position",new $n(S,b)),U.setAttribute("uv",new $n(E,w)),U.setAttribute("faceIndex",new $n(I,v)),e.push(U),r>Dd&&r--}return{lodPlanes:e,sizeLods:t,sigmas:i}}function SD(n,e,t){const i=new ua(n,e,t);return i.texture.mapping=Mf,i.texture.name="PMREM.cubeUv",i.scissorTest=!0,i}function hx(n,e,t,i,r){n.viewport.set(e,t,i,r),n.scissor.set(e,t,i,r)}function jJ(n,e,t){const i=new Float32Array(Tu),r=new K(0,1,0);return new ko({name:"SphericalGaussianBlur",defines:{n:Tu,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/t,CUBEUV_MAX_MIP:`${n}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:i},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:r}},vertexShader:hM(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:ja,depthTest:!1,depthWrite:!1})}function TD(){return new ko({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:hM(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:ja,depthTest:!1,depthWrite:!1})}function ED(){return new ko({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:hM(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:ja,depthTest:!1,depthWrite:!1})}function hM(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function VJ(n){let e=new WeakMap,t=null;function i(a){if(a&&a.isTexture){const l=a.mapping,c=l===ng||l===ig,u=l===Ya||l===cc;if(c||u){let f=e.get(a);const m=f!==void 0?f.texture.pmremVersion:0;if(a.isRenderTargetTexture&&a.pmremVersion!==m)return t===null&&(t=new b1(n)),f=c?t.fromEquirectangular(a,f):t.fromCubemap(a,f),f.texture.pmremVersion=a.pmremVersion,e.set(a,f),f.texture;if(f!==void 0)return f.texture;{const g=a.image;return c&&g&&g.height>0||u&&g&&r(g)?(t===null&&(t=new b1(n)),f=c?t.fromEquirectangular(a):t.fromCubemap(a),f.texture.pmremVersion=a.pmremVersion,e.set(a,f),a.addEventListener("dispose",s),f.texture):null}}}return a}function r(a){let l=0;const c=6;for(let u=0;u<c;u++)a[u]!==void 0&&l++;return l===c}function s(a){const l=a.target;l.removeEventListener("dispose",s);const c=e.get(l);c!==void 0&&(e.delete(l),c.dispose())}function o(){e=new WeakMap,t!==null&&(t.dispose(),t=null)}return{get:i,dispose:o}}function BJ(n){const e={};function t(i){if(e[i]!==void 0)return e[i];let r;switch(i){case"WEBGL_depth_texture":r=n.getExtension("WEBGL_depth_texture")||n.getExtension("MOZ_WEBGL_depth_texture")||n.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":r=n.getExtension("EXT_texture_filter_anisotropic")||n.getExtension("MOZ_EXT_texture_filter_anisotropic")||n.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=n.getExtension("WEBGL_compressed_texture_s3tc")||n.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=n.getExtension("WEBGL_compressed_texture_pvrtc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:r=n.getExtension(i)}return e[i]=r,r}return{has:function(i){return t(i)!==null},init:function(){t("EXT_color_buffer_float"),t("WEBGL_clip_cull_distance"),t("OES_texture_float_linear"),t("EXT_color_buffer_half_float"),t("WEBGL_multisampled_render_to_texture"),t("WEBGL_render_shared_exponent")},get:function(i){const r=t(i);return r===null&&yu("THREE.WebGLRenderer: "+i+" extension not supported."),r}}}function zJ(n,e,t,i){const r={},s=new WeakMap;function o(f){const m=f.target;m.index!==null&&e.remove(m.index);for(const x in m.attributes)e.remove(m.attributes[x]);m.removeEventListener("dispose",o),delete r[m.id];const g=s.get(m);g&&(e.remove(g),s.delete(m)),i.releaseStatesOfGeometry(m),m.isInstancedBufferGeometry===!0&&delete m._maxInstanceCount,t.memory.geometries--}function a(f,m){return r[m.id]===!0||(m.addEventListener("dispose",o),r[m.id]=!0,t.memory.geometries++),m}function l(f){const m=f.attributes;for(const g in m)e.update(m[g],n.ARRAY_BUFFER)}function c(f){const m=[],g=f.index,x=f.attributes.position;let b=0;if(g!==null){const S=g.array;b=g.version;for(let E=0,I=S.length;E<I;E+=3){const U=S[E+0],O=S[E+1],C=S[E+2];m.push(U,O,O,C,C,U)}}else if(x!==void 0){const S=x.array;b=x.version;for(let E=0,I=S.length/3-1;E<I;E+=3){const U=E+0,O=E+1,C=E+2;m.push(U,O,O,C,C,U)}}else return;const w=new(Lj(m)?FA:UA)(m,1);w.version=b;const v=s.get(f);v&&e.remove(v),s.set(f,w)}function u(f){const m=s.get(f);if(m){const g=f.index;g!==null&&m.version<g.version&&c(f)}else c(f);return s.get(f)}return{get:a,update:l,getWireframeAttribute:u}}function HJ(n,e,t){let i;function r(m){i=m}let s,o;function a(m){s=m.type,o=m.bytesPerElement}function l(m,g){n.drawElements(i,g,s,m*o),t.update(g,i,1)}function c(m,g,x){x!==0&&(n.drawElementsInstanced(i,g,s,m*o,x),t.update(g,i,x))}function u(m,g,x){if(x===0)return;e.get("WEBGL_multi_draw").multiDrawElementsWEBGL(i,g,0,s,m,0,x);let w=0;for(let v=0;v<x;v++)w+=g[v];t.update(w,i,1)}function f(m,g,x,b){if(x===0)return;const w=e.get("WEBGL_multi_draw");if(w===null)for(let v=0;v<m.length;v++)c(m[v]/o,g[v],b[v]);else{w.multiDrawElementsInstancedWEBGL(i,g,0,s,m,0,b,0,x);let v=0;for(let S=0;S<x;S++)v+=g[S]*b[S];t.update(v,i,1)}}this.setMode=r,this.setIndex=a,this.render=l,this.renderInstances=c,this.renderMultiDraw=u,this.renderMultiDrawInstances=f}function GJ(n){const e={geometries:0,textures:0},t={frame:0,calls:0,triangles:0,points:0,lines:0};function i(s,o,a){switch(t.calls++,o){case n.TRIANGLES:t.triangles+=a*(s/3);break;case n.LINES:t.lines+=a*(s/2);break;case n.LINE_STRIP:t.lines+=a*(s-1);break;case n.LINE_LOOP:t.lines+=a*s;break;case n.POINTS:t.points+=a*s;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",o);break}}function r(){t.calls=0,t.triangles=0,t.points=0,t.lines=0}return{memory:e,render:t,programs:null,autoReset:!0,reset:r,update:i}}function WJ(n,e,t){const i=new WeakMap,r=new Rn;function s(o,a,l){const c=o.morphTargetInfluences,u=a.morphAttributes.position||a.morphAttributes.normal||a.morphAttributes.color,f=u!==void 0?u.length:0;let m=i.get(a);if(m===void 0||m.count!==f){let A=function(){P.dispose(),i.delete(a),a.removeEventListener("dispose",A)};var g=A;m!==void 0&&m.texture.dispose();const x=a.morphAttributes.position!==void 0,b=a.morphAttributes.normal!==void 0,w=a.morphAttributes.color!==void 0,v=a.morphAttributes.position||[],S=a.morphAttributes.normal||[],E=a.morphAttributes.color||[];let I=0;x===!0&&(I=1),b===!0&&(I=2),w===!0&&(I=3);let U=a.attributes.position.count*I,O=1;U>e.maxTextureSize&&(O=Math.ceil(U/e.maxTextureSize),U=e.maxTextureSize);const C=new Float32Array(U*O*4*f),P=new qg(C,U,O,f);P.type=gs,P.needsUpdate=!0;const M=I*4;for(let D=0;D<f;D++){const B=v[D],j=S[D],te=E[D],ce=U*O*4*D;for(let pe=0;pe<B.count;pe++){const de=pe*M;x===!0&&(r.fromBufferAttribute(B,pe),C[ce+de+0]=r.x,C[ce+de+1]=r.y,C[ce+de+2]=r.z,C[ce+de+3]=0),b===!0&&(r.fromBufferAttribute(j,pe),C[ce+de+4]=r.x,C[ce+de+5]=r.y,C[ce+de+6]=r.z,C[ce+de+7]=0),w===!0&&(r.fromBufferAttribute(te,pe),C[ce+de+8]=r.x,C[ce+de+9]=r.y,C[ce+de+10]=r.z,C[ce+de+11]=te.itemSize===4?r.w:1)}}m={count:f,texture:P,size:new Le(U,O)},i.set(a,m),a.addEventListener("dispose",A)}if(o.isInstancedMesh===!0&&o.morphTexture!==null)l.getUniforms().setValue(n,"morphTexture",o.morphTexture,t);else{let x=0;for(let w=0;w<c.length;w++)x+=c[w];const b=a.morphTargetsRelative?1:1-x;l.getUniforms().setValue(n,"morphTargetBaseInfluence",b),l.getUniforms().setValue(n,"morphTargetInfluences",c)}l.getUniforms().setValue(n,"morphTargetsTexture",m.texture,t),l.getUniforms().setValue(n,"morphTargetsTextureSize",m.size)}return{update:s}}function qJ(n,e,t,i){let r=new WeakMap;function s(l){const c=i.render.frame,u=l.geometry,f=e.get(l,u);if(r.get(f)!==c&&(e.update(f),r.set(f,c)),l.isInstancedMesh&&(l.hasEventListener("dispose",a)===!1&&l.addEventListener("dispose",a),r.get(l)!==c&&(t.update(l.instanceMatrix,n.ARRAY_BUFFER),l.instanceColor!==null&&t.update(l.instanceColor,n.ARRAY_BUFFER),r.set(l,c))),l.isSkinnedMesh){const m=l.skeleton;r.get(m)!==c&&(m.update(),r.set(m,c))}return f}function o(){r=new WeakMap}function a(l){const c=l.target;c.removeEventListener("dispose",a),t.remove(c.instanceMatrix),c.instanceColor!==null&&t.remove(c.instanceColor)}return{update:s,dispose:o}}const OV=new _i,CD=new GA(1,1),UV=new qg,FV=new Sw,jV=new Xg,AD=[],MD=[],ID=new Float32Array(16),PD=new Float32Array(9),RD=new Float32Array(4);function Df(n,e,t){const i=n[0];if(i<=0||i>0)return n;const r=e*t;let s=AD[r];if(s===void 0&&(s=new Float32Array(r),AD[r]=s),e!==0){i.toArray(s,0);for(let o=1,a=0;o!==e;++o)a+=t,n[o].toArray(s,a)}return s}function Yi(n,e){if(n.length!==e.length)return!1;for(let t=0,i=n.length;t<i;t++)if(n[t]!==e[t])return!1;return!0}function Ji(n,e){for(let t=0,i=e.length;t<i;t++)n[t]=e[t]}function Ww(n,e){let t=MD[e];t===void 0&&(t=new Int32Array(e),MD[e]=t);for(let i=0;i!==e;++i)t[i]=n.allocateTextureUnit();return t}function $J(n,e){const t=this.cache;t[0]!==e&&(n.uniform1f(this.addr,e),t[0]=e)}function XJ(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2f(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Yi(t,e))return;n.uniform2fv(this.addr,e),Ji(t,e)}}function KJ(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3f(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else if(e.r!==void 0)(t[0]!==e.r||t[1]!==e.g||t[2]!==e.b)&&(n.uniform3f(this.addr,e.r,e.g,e.b),t[0]=e.r,t[1]=e.g,t[2]=e.b);else{if(Yi(t,e))return;n.uniform3fv(this.addr,e),Ji(t,e)}}function YJ(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4f(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Yi(t,e))return;n.uniform4fv(this.addr,e),Ji(t,e)}}function JJ(n,e){const t=this.cache,i=e.elements;if(i===void 0){if(Yi(t,e))return;n.uniformMatrix2fv(this.addr,!1,e),Ji(t,e)}else{if(Yi(t,i))return;RD.set(i),n.uniformMatrix2fv(this.addr,!1,RD),Ji(t,i)}}function QJ(n,e){const t=this.cache,i=e.elements;if(i===void 0){if(Yi(t,e))return;n.uniformMatrix3fv(this.addr,!1,e),Ji(t,e)}else{if(Yi(t,i))return;PD.set(i),n.uniformMatrix3fv(this.addr,!1,PD),Ji(t,i)}}function ZJ(n,e){const t=this.cache,i=e.elements;if(i===void 0){if(Yi(t,e))return;n.uniformMatrix4fv(this.addr,!1,e),Ji(t,e)}else{if(Yi(t,i))return;ID.set(i),n.uniformMatrix4fv(this.addr,!1,ID),Ji(t,i)}}function eQ(n,e){const t=this.cache;t[0]!==e&&(n.uniform1i(this.addr,e),t[0]=e)}function tQ(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2i(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Yi(t,e))return;n.uniform2iv(this.addr,e),Ji(t,e)}}function nQ(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3i(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(Yi(t,e))return;n.uniform3iv(this.addr,e),Ji(t,e)}}function iQ(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4i(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Yi(t,e))return;n.uniform4iv(this.addr,e),Ji(t,e)}}function rQ(n,e){const t=this.cache;t[0]!==e&&(n.uniform1ui(this.addr,e),t[0]=e)}function sQ(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2ui(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Yi(t,e))return;n.uniform2uiv(this.addr,e),Ji(t,e)}}function oQ(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3ui(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(Yi(t,e))return;n.uniform3uiv(this.addr,e),Ji(t,e)}}function aQ(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4ui(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Yi(t,e))return;n.uniform4uiv(this.addr,e),Ji(t,e)}}function lQ(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r);let s;this.type===n.SAMPLER_2D_SHADOW?(CD.compareFunction=kA,s=CD):s=OV,t.setTexture2D(e||s,r)}function cQ(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTexture3D(e||FV,r)}function uQ(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTextureCube(e||jV,r)}function hQ(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTexture2DArray(e||UV,r)}function dQ(n){switch(n){case 5126:return $J;case 35664:return XJ;case 35665:return KJ;case 35666:return YJ;case 35674:return JJ;case 35675:return QJ;case 35676:return ZJ;case 5124:case 35670:return eQ;case 35667:case 35671:return tQ;case 35668:case 35672:return nQ;case 35669:case 35673:return iQ;case 5125:return rQ;case 36294:return sQ;case 36295:return oQ;case 36296:return aQ;case 35678:case 36198:case 36298:case 36306:case 35682:return lQ;case 35679:case 36299:case 36307:return cQ;case 35680:case 36300:case 36308:case 36293:return uQ;case 36289:case 36303:case 36311:case 36292:return hQ}}function fQ(n,e){n.uniform1fv(this.addr,e)}function pQ(n,e){const t=Df(e,this.size,2);n.uniform2fv(this.addr,t)}function mQ(n,e){const t=Df(e,this.size,3);n.uniform3fv(this.addr,t)}function gQ(n,e){const t=Df(e,this.size,4);n.uniform4fv(this.addr,t)}function yQ(n,e){const t=Df(e,this.size,4);n.uniformMatrix2fv(this.addr,!1,t)}function vQ(n,e){const t=Df(e,this.size,9);n.uniformMatrix3fv(this.addr,!1,t)}function xQ(n,e){const t=Df(e,this.size,16);n.uniformMatrix4fv(this.addr,!1,t)}function _Q(n,e){n.uniform1iv(this.addr,e)}function wQ(n,e){n.uniform2iv(this.addr,e)}function bQ(n,e){n.uniform3iv(this.addr,e)}function SQ(n,e){n.uniform4iv(this.addr,e)}function TQ(n,e){n.uniform1uiv(this.addr,e)}function EQ(n,e){n.uniform2uiv(this.addr,e)}function CQ(n,e){n.uniform3uiv(this.addr,e)}function AQ(n,e){n.uniform4uiv(this.addr,e)}function MQ(n,e,t){const i=this.cache,r=e.length,s=Ww(t,r);Yi(i,s)||(n.uniform1iv(this.addr,s),Ji(i,s));for(let o=0;o!==r;++o)t.setTexture2D(e[o]||OV,s[o])}function IQ(n,e,t){const i=this.cache,r=e.length,s=Ww(t,r);Yi(i,s)||(n.uniform1iv(this.addr,s),Ji(i,s));for(let o=0;o!==r;++o)t.setTexture3D(e[o]||FV,s[o])}function PQ(n,e,t){const i=this.cache,r=e.length,s=Ww(t,r);Yi(i,s)||(n.uniform1iv(this.addr,s),Ji(i,s));for(let o=0;o!==r;++o)t.setTextureCube(e[o]||jV,s[o])}function RQ(n,e,t){const i=this.cache,r=e.length,s=Ww(t,r);Yi(i,s)||(n.uniform1iv(this.addr,s),Ji(i,s));for(let o=0;o!==r;++o)t.setTexture2DArray(e[o]||UV,s[o])}function NQ(n){switch(n){case 5126:return fQ;case 35664:return pQ;case 35665:return mQ;case 35666:return gQ;case 35674:return yQ;case 35675:return vQ;case 35676:return xQ;case 5124:case 35670:return _Q;case 35667:case 35671:return wQ;case 35668:case 35672:return bQ;case 35669:case 35673:return SQ;case 5125:return TQ;case 36294:return EQ;case 36295:return CQ;case 36296:return AQ;case 35678:case 36198:case 36298:case 36306:case 35682:return MQ;case 35679:case 36299:case 36307:return IQ;case 35680:case 36300:case 36308:case 36293:return PQ;case 36289:case 36303:case 36311:case 36292:return RQ}}class DQ{constructor(e,t,i){this.id=e,this.addr=i,this.cache=[],this.type=t.type,this.setValue=dQ(t.type)}}class LQ{constructor(e,t,i){this.id=e,this.addr=i,this.cache=[],this.type=t.type,this.size=t.size,this.setValue=NQ(t.type)}}class kQ{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,i){const r=this.seq;for(let s=0,o=r.length;s!==o;++s){const a=r[s];a.setValue(e,t[a.id],i)}}}const DT=/(\w+)(\])?(\[|\.)?/g;function ND(n,e){n.seq.push(e),n.map[e.id]=e}function OQ(n,e,t){const i=n.name,r=i.length;for(DT.lastIndex=0;;){const s=DT.exec(i),o=DT.lastIndex;let a=s[1];const l=s[2]==="]",c=s[3];if(l&&(a=a|0),c===void 0||c==="["&&o+2===r){ND(t,c===void 0?new DQ(a,n,e):new LQ(a,n,e));break}else{let f=t.map[a];f===void 0&&(f=new kQ(a),ND(t,f)),t=f}}}class Hx{constructor(e,t){this.seq=[],this.map={};const i=e.getProgramParameter(t,e.ACTIVE_UNIFORMS);for(let r=0;r<i;++r){const s=e.getActiveUniform(t,r),o=e.getUniformLocation(t,s.name);OQ(s,o,this)}}setValue(e,t,i,r){const s=this.map[t];s!==void 0&&s.setValue(e,i,r)}setOptional(e,t,i){const r=t[i];r!==void 0&&this.setValue(e,i,r)}static upload(e,t,i,r){for(let s=0,o=t.length;s!==o;++s){const a=t[s],l=i[a.id];l.needsUpdate!==!1&&a.setValue(e,l.value,r)}}static seqWithValue(e,t){const i=[];for(let r=0,s=e.length;r!==s;++r){const o=e[r];o.id in t&&i.push(o)}return i}}function DD(n,e,t){const i=n.createShader(e);return n.shaderSource(i,t),n.compileShader(i),i}const UQ=37297;let FQ=0;function jQ(n,e){const t=n.split(`
`),i=[],r=Math.max(e-6,0),s=Math.min(e+6,t.length);for(let o=r;o<s;o++){const a=o+1;i.push(`${a===e?">":" "} ${a}: ${t[o]}`)}return i.join(`
`)}const LD=new sn;function VQ(n){An._getMatrix(LD,An.workingColorSpace,n);const e=`mat3( ${LD.elements.map(t=>t.toFixed(4))} )`;switch(An.getTransfer(n)){case lg:return[e,"LinearTransferOETF"];case Gn:return[e,"sRGBTransferOETF"];default:return console.warn("THREE.WebGLProgram: Unsupported color space: ",n),[e,"LinearTransferOETF"]}}function kD(n,e,t){const i=n.getShaderParameter(e,n.COMPILE_STATUS),r=n.getShaderInfoLog(e).trim();if(i&&r==="")return"";const s=/ERROR: 0:(\d+)/.exec(r);if(s){const o=parseInt(s[1]);return t.toUpperCase()+`

`+r+`

`+jQ(n.getShaderSource(e),o)}else return r}function BQ(n,e){const t=VQ(e);return[`vec4 ${n}( vec4 value ) {`,`	return ${t[1]}( vec4( value.rgb * ${t[0]}, value.a ) );`,"}"].join(`
`)}function zQ(n,e){let t;switch(e){case pj:t="Linear";break;case mj:t="Reinhard";break;case gj:t="Cineon";break;case SA:t="ACESFilmic";break;case vj:t="AgX";break;case xj:t="Neutral";break;case yj:t="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),t="Linear"}return"vec3 "+n+"( vec3 color ) { return "+t+"ToneMapping( color ); }"}const dx=new K;function HQ(){An.getLuminanceCoefficients(dx);const n=dx.x.toFixed(4),e=dx.y.toFixed(4),t=dx.z.toFixed(4);return["float luminance( const in vec3 rgb ) {",`	const vec3 weights = vec3( ${n}, ${e}, ${t} );`,"	return dot( weights, rgb );","}"].join(`
`)}function GQ(n){return[n.extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":"",n.extensionMultiDraw?"#extension GL_ANGLE_multi_draw : require":""].filter(Xp).join(`
`)}function WQ(n){const e=[];for(const t in n){const i=n[t];i!==!1&&e.push("#define "+t+" "+i)}return e.join(`
`)}function qQ(n,e){const t={},i=n.getProgramParameter(e,n.ACTIVE_ATTRIBUTES);for(let r=0;r<i;r++){const s=n.getActiveAttrib(e,r),o=s.name;let a=1;s.type===n.FLOAT_MAT2&&(a=2),s.type===n.FLOAT_MAT3&&(a=3),s.type===n.FLOAT_MAT4&&(a=4),t[o]={type:s.type,location:n.getAttribLocation(e,o),locationSize:a}}return t}function Xp(n){return n!==""}function OD(n,e){const t=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return n.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,t).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function UD(n,e){return n.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const $Q=/^[ \t]*#include +<([\w\d./]+)>/gm;function S1(n){return n.replace($Q,KQ)}const XQ=new Map;function KQ(n,e){let t=cn[e];if(t===void 0){const i=XQ.get(e);if(i!==void 0)t=cn[i],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',e,i);else throw new Error("Can not resolve #include <"+e+">")}return S1(t)}const YQ=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function FD(n){return n.replace(YQ,JQ)}function JQ(n,e,t,i){let r="";for(let s=parseInt(e);s<parseInt(t);s++)r+=i.replace(/\[\s*i\s*\]/g,"[ "+s+" ]").replace(/UNROLLED_LOOP_INDEX/g,s);return r}function jD(n){let e=`precision ${n.precision} float;
	precision ${n.precision} int;
	precision ${n.precision} sampler2D;
	precision ${n.precision} samplerCube;
	precision ${n.precision} sampler3D;
	precision ${n.precision} sampler2DArray;
	precision ${n.precision} sampler2DShadow;
	precision ${n.precision} samplerCubeShadow;
	precision ${n.precision} sampler2DArrayShadow;
	precision ${n.precision} isampler2D;
	precision ${n.precision} isampler3D;
	precision ${n.precision} isamplerCube;
	precision ${n.precision} isampler2DArray;
	precision ${n.precision} usampler2D;
	precision ${n.precision} usampler3D;
	precision ${n.precision} usamplerCube;
	precision ${n.precision} usampler2DArray;
	`;return n.precision==="highp"?e+=`
#define HIGH_PRECISION`:n.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:n.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}function QQ(n){let e="SHADOWMAP_TYPE_BASIC";return n.shadowMapType===fw?e="SHADOWMAP_TYPE_PCF":n.shadowMapType===pm?e="SHADOWMAP_TYPE_PCF_SOFT":n.shadowMapType===So&&(e="SHADOWMAP_TYPE_VSM"),e}function ZQ(n){let e="ENVMAP_TYPE_CUBE";if(n.envMap)switch(n.envMapMode){case Ya:case cc:e="ENVMAP_TYPE_CUBE";break;case Mf:e="ENVMAP_TYPE_CUBE_UV";break}return e}function eZ(n){let e="ENVMAP_MODE_REFLECTION";if(n.envMap)switch(n.envMapMode){case cc:e="ENVMAP_MODE_REFRACTION";break}return e}function tZ(n){let e="ENVMAP_BLENDING_NONE";if(n.envMap)switch(n.combine){case Gg:e="ENVMAP_BLENDING_MULTIPLY";break;case dj:e="ENVMAP_BLENDING_MIX";break;case fj:e="ENVMAP_BLENDING_ADD";break}return e}function nZ(n){const e=n.envMapCubeUVHeight;if(e===null)return null;const t=Math.log2(e)-2,i=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,t),7*16)),texelHeight:i,maxMip:t}}function iZ(n,e,t,i){const r=n.getContext(),s=t.defines;let o=t.vertexShader,a=t.fragmentShader;const l=QQ(t),c=ZQ(t),u=eZ(t),f=tZ(t),m=nZ(t),g=GQ(t),x=WQ(s),b=r.createProgram();let w,v,S=t.glslVersion?"#version "+t.glslVersion+`
`:"";t.isRawShaderMaterial?(w=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,x].filter(Xp).join(`
`),w.length>0&&(w+=`
`),v=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,x].filter(Xp).join(`
`),v.length>0&&(v+=`
`)):(w=[jD(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,x,t.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",t.batching?"#define USE_BATCHING":"",t.batchingColor?"#define USE_BATCHING_COLOR":"",t.instancing?"#define USE_INSTANCING":"",t.instancingColor?"#define USE_INSTANCING_COLOR":"",t.instancingMorph?"#define USE_INSTANCING_MORPH":"",t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+u:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.displacementMap?"#define USE_DISPLACEMENTMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.mapUv?"#define MAP_UV "+t.mapUv:"",t.alphaMapUv?"#define ALPHAMAP_UV "+t.alphaMapUv:"",t.lightMapUv?"#define LIGHTMAP_UV "+t.lightMapUv:"",t.aoMapUv?"#define AOMAP_UV "+t.aoMapUv:"",t.emissiveMapUv?"#define EMISSIVEMAP_UV "+t.emissiveMapUv:"",t.bumpMapUv?"#define BUMPMAP_UV "+t.bumpMapUv:"",t.normalMapUv?"#define NORMALMAP_UV "+t.normalMapUv:"",t.displacementMapUv?"#define DISPLACEMENTMAP_UV "+t.displacementMapUv:"",t.metalnessMapUv?"#define METALNESSMAP_UV "+t.metalnessMapUv:"",t.roughnessMapUv?"#define ROUGHNESSMAP_UV "+t.roughnessMapUv:"",t.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+t.anisotropyMapUv:"",t.clearcoatMapUv?"#define CLEARCOATMAP_UV "+t.clearcoatMapUv:"",t.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+t.clearcoatNormalMapUv:"",t.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+t.clearcoatRoughnessMapUv:"",t.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+t.iridescenceMapUv:"",t.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+t.iridescenceThicknessMapUv:"",t.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+t.sheenColorMapUv:"",t.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+t.sheenRoughnessMapUv:"",t.specularMapUv?"#define SPECULARMAP_UV "+t.specularMapUv:"",t.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+t.specularColorMapUv:"",t.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+t.specularIntensityMapUv:"",t.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+t.transmissionMapUv:"",t.thicknessMapUv?"#define THICKNESSMAP_UV "+t.thicknessMapUv:"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.flatShading?"#define FLAT_SHADED":"",t.skinning?"#define USE_SKINNING":"",t.morphTargets?"#define USE_MORPHTARGETS":"",t.morphNormals&&t.flatShading===!1?"#define USE_MORPHNORMALS":"",t.morphColors?"#define USE_MORPHCOLORS":"",t.morphTargetsCount>0?"#define MORPHTARGETS_TEXTURE_STRIDE "+t.morphTextureStride:"",t.morphTargetsCount>0?"#define MORPHTARGETS_COUNT "+t.morphTargetsCount:"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+l:"",t.sizeAttenuation?"#define USE_SIZEATTENUATION":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.reverseDepthBuffer?"#define USE_REVERSEDEPTHBUF":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","#ifdef USE_INSTANCING_MORPH","	uniform sampler2D morphTexture;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(Xp).join(`
`),v=[jD(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,x,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.alphaToCoverage?"#define ALPHA_TO_COVERAGE":"",t.map?"#define USE_MAP":"",t.matcap?"#define USE_MATCAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+c:"",t.envMap?"#define "+u:"",t.envMap?"#define "+f:"",m?"#define CUBEUV_TEXEL_WIDTH "+m.texelWidth:"",m?"#define CUBEUV_TEXEL_HEIGHT "+m.texelHeight:"",m?"#define CUBEUV_MAX_MIP "+m.maxMip+".0":"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoat?"#define USE_CLEARCOAT":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.dispersion?"#define USE_DISPERSION":"",t.iridescence?"#define USE_IRIDESCENCE":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaTest?"#define USE_ALPHATEST":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.sheen?"#define USE_SHEEN":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors||t.instancingColor||t.batchingColor?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.gradientMap?"#define USE_GRADIENTMAP":"",t.flatShading?"#define FLAT_SHADED":"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+l:"",t.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",t.decodeVideoTextureEmissive?"#define DECODE_VIDEO_TEXTURE_EMISSIVE":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.reverseDepthBuffer?"#define USE_REVERSEDEPTHBUF":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",t.toneMapping!==ta?"#define TONE_MAPPING":"",t.toneMapping!==ta?cn.tonemapping_pars_fragment:"",t.toneMapping!==ta?zQ("toneMapping",t.toneMapping):"",t.dithering?"#define DITHERING":"",t.opaque?"#define OPAQUE":"",cn.colorspace_pars_fragment,BQ("linearToOutputTexel",t.outputColorSpace),HQ(),t.useDepthPacking?"#define DEPTH_PACKING "+t.depthPacking:"",`
`].filter(Xp).join(`
`)),o=S1(o),o=OD(o,t),o=UD(o,t),a=S1(a),a=OD(a,t),a=UD(a,t),o=FD(o),a=FD(a),t.isRawShaderMaterial!==!0&&(S=`#version 300 es
`,w=[g,"#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+w,v=["#define varying in",t.glslVersion===p1?"":"layout(location = 0) out highp vec4 pc_fragColor;",t.glslVersion===p1?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+v);const E=S+w+o,I=S+v+a,U=DD(r,r.VERTEX_SHADER,E),O=DD(r,r.FRAGMENT_SHADER,I);r.attachShader(b,U),r.attachShader(b,O),t.index0AttributeName!==void 0?r.bindAttribLocation(b,0,t.index0AttributeName):t.morphTargets===!0&&r.bindAttribLocation(b,0,"position"),r.linkProgram(b);function C(D){if(n.debug.checkShaderErrors){const B=r.getProgramInfoLog(b).trim(),j=r.getShaderInfoLog(U).trim(),te=r.getShaderInfoLog(O).trim();let ce=!0,pe=!0;if(r.getProgramParameter(b,r.LINK_STATUS)===!1)if(ce=!1,typeof n.debug.onShaderError=="function")n.debug.onShaderError(r,b,U,O);else{const de=kD(r,U,"vertex"),W=kD(r,O,"fragment");console.error("THREE.WebGLProgram: Shader Error "+r.getError()+" - VALIDATE_STATUS "+r.getProgramParameter(b,r.VALIDATE_STATUS)+`

Material Name: `+D.name+`
Material Type: `+D.type+`

Program Info Log: `+B+`
`+de+`
`+W)}else B!==""?console.warn("THREE.WebGLProgram: Program Info Log:",B):(j===""||te==="")&&(pe=!1);pe&&(D.diagnostics={runnable:ce,programLog:B,vertexShader:{log:j,prefix:w},fragmentShader:{log:te,prefix:v}})}r.deleteShader(U),r.deleteShader(O),P=new Hx(r,b),M=qQ(r,b)}let P;this.getUniforms=function(){return P===void 0&&C(this),P};let M;this.getAttributes=function(){return M===void 0&&C(this),M};let A=t.rendererExtensionParallelShaderCompile===!1;return this.isReady=function(){return A===!1&&(A=r.getProgramParameter(b,UQ)),A},this.destroy=function(){i.releaseStatesOfProgram(this),r.deleteProgram(b),this.program=void 0},this.type=t.shaderType,this.name=t.shaderName,this.id=FQ++,this.cacheKey=e,this.usedTimes=1,this.program=b,this.vertexShader=U,this.fragmentShader=O,this}let rZ=0;class sZ{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const t=e.vertexShader,i=e.fragmentShader,r=this._getShaderStage(t),s=this._getShaderStage(i),o=this._getShaderCacheForMaterial(e);return o.has(r)===!1&&(o.add(r),r.usedTimes++),o.has(s)===!1&&(o.add(s),s.usedTimes++),this}remove(e){const t=this.materialCache.get(e);for(const i of t)i.usedTimes--,i.usedTimes===0&&this.shaderCache.delete(i.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const t=this.materialCache;let i=t.get(e);return i===void 0&&(i=new Set,t.set(e,i)),i}_getShaderStage(e){const t=this.shaderCache;let i=t.get(e);return i===void 0&&(i=new oZ(e),t.set(e,i)),i}}class oZ{constructor(e){this.id=rZ++,this.code=e,this.usedTimes=0}}function aZ(n,e,t,i,r,s,o){const a=new Vu,l=new sZ,c=new Set,u=[],f=r.logarithmicDepthBuffer,m=r.vertexTextures;let g=r.precision;const x={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function b(M){return c.add(M),M===0?"uv":`uv${M}`}function w(M,A,D,B,j){const te=B.fog,ce=j.geometry,pe=M.isMeshStandardMaterial?B.environment:null,de=(M.isMeshStandardMaterial?t:e).get(M.envMap||pe),W=de&&de.mapping===Mf?de.image.height:null,Z=x[M.type];M.precision!==null&&(g=r.getMaxPrecision(M.precision),g!==M.precision&&console.warn("THREE.WebGLProgram.getParameters:",M.precision,"not supported, using",g,"instead."));const F=ce.morphAttributes.position||ce.morphAttributes.normal||ce.morphAttributes.color,J=F!==void 0?F.length:0;let ue=0;ce.morphAttributes.position!==void 0&&(ue=1),ce.morphAttributes.normal!==void 0&&(ue=2),ce.morphAttributes.color!==void 0&&(ue=3);let ye,le,xe,Pe;if(Z){const Zt=Ao[Z];ye=Zt.vertexShader,le=Zt.fragmentShader}else ye=M.vertexShader,le=M.fragmentShader,l.update(M),xe=l.getVertexShaderID(M),Pe=l.getFragmentShaderID(M);const Me=n.getRenderTarget(),gt=n.state.buffers.depth.getReversed(),Kt=j.isInstancedMesh===!0,Ye=j.isBatchedMesh===!0,rt=!!M.map,Ae=!!M.matcap,Ee=!!de,X=!!M.aoMap,pt=!!M.lightMap,Oe=!!M.bumpMap,tt=!!M.normalMap,Ve=!!M.displacementMap,Mt=!!M.emissiveMap,Xe=!!M.metalnessMap,$=!!M.roughnessMap,z=M.anisotropy>0,he=M.clearcoat>0,Se=M.dispersion>0,Re=M.iridescence>0,we=M.sheen>0,He=M.transmission>0,Ge=z&&!!M.anisotropyMap,Qe=he&&!!M.clearcoatMap,Yt=he&&!!M.clearcoatNormalMap,Fe=he&&!!M.clearcoatRoughnessMap,lt=Re&&!!M.iridescenceMap,Ct=Re&&!!M.iridescenceThicknessMap,Lt=we&&!!M.sheenColorMap,ut=we&&!!M.sheenRoughnessMap,an=!!M.specularMap,Gt=!!M.specularColorMap,wn=!!M.specularIntensityMap,ee=He&&!!M.transmissionMap,Ze=He&&!!M.thicknessMap,be=!!M.gradientMap,Ie=!!M.alphaMap,it=M.alphaTest>0,Ke=!!M.alphaHash,Ft=!!M.extensions;let kn=ta;M.toneMapped&&(Me===null||Me.isXRRenderTarget===!0)&&(kn=n.toneMapping);const Xn={shaderID:Z,shaderType:M.type,shaderName:M.name,vertexShader:ye,fragmentShader:le,defines:M.defines,customVertexShaderID:xe,customFragmentShaderID:Pe,isRawShaderMaterial:M.isRawShaderMaterial===!0,glslVersion:M.glslVersion,precision:g,batching:Ye,batchingColor:Ye&&j._colorsTexture!==null,instancing:Kt,instancingColor:Kt&&j.instanceColor!==null,instancingMorph:Kt&&j.morphTexture!==null,supportsVertexTextures:m,outputColorSpace:Me===null?n.outputColorSpace:Me.isXRRenderTarget===!0?Me.texture.colorSpace:eh,alphaToCoverage:!!M.alphaToCoverage,map:rt,matcap:Ae,envMap:Ee,envMapMode:Ee&&de.mapping,envMapCubeUVHeight:W,aoMap:X,lightMap:pt,bumpMap:Oe,normalMap:tt,displacementMap:m&&Ve,emissiveMap:Mt,normalMapObjectSpace:tt&&M.normalMapType===Cj,normalMapTangentSpace:tt&&M.normalMapType===Mc,metalnessMap:Xe,roughnessMap:$,anisotropy:z,anisotropyMap:Ge,clearcoat:he,clearcoatMap:Qe,clearcoatNormalMap:Yt,clearcoatRoughnessMap:Fe,dispersion:Se,iridescence:Re,iridescenceMap:lt,iridescenceThicknessMap:Ct,sheen:we,sheenColorMap:Lt,sheenRoughnessMap:ut,specularMap:an,specularColorMap:Gt,specularIntensityMap:wn,transmission:He,transmissionMap:ee,thicknessMap:Ze,gradientMap:be,opaque:M.transparent===!1&&M.blending===Ou&&M.alphaToCoverage===!1,alphaMap:Ie,alphaTest:it,alphaHash:Ke,combine:M.combine,mapUv:rt&&b(M.map.channel),aoMapUv:X&&b(M.aoMap.channel),lightMapUv:pt&&b(M.lightMap.channel),bumpMapUv:Oe&&b(M.bumpMap.channel),normalMapUv:tt&&b(M.normalMap.channel),displacementMapUv:Ve&&b(M.displacementMap.channel),emissiveMapUv:Mt&&b(M.emissiveMap.channel),metalnessMapUv:Xe&&b(M.metalnessMap.channel),roughnessMapUv:$&&b(M.roughnessMap.channel),anisotropyMapUv:Ge&&b(M.anisotropyMap.channel),clearcoatMapUv:Qe&&b(M.clearcoatMap.channel),clearcoatNormalMapUv:Yt&&b(M.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:Fe&&b(M.clearcoatRoughnessMap.channel),iridescenceMapUv:lt&&b(M.iridescenceMap.channel),iridescenceThicknessMapUv:Ct&&b(M.iridescenceThicknessMap.channel),sheenColorMapUv:Lt&&b(M.sheenColorMap.channel),sheenRoughnessMapUv:ut&&b(M.sheenRoughnessMap.channel),specularMapUv:an&&b(M.specularMap.channel),specularColorMapUv:Gt&&b(M.specularColorMap.channel),specularIntensityMapUv:wn&&b(M.specularIntensityMap.channel),transmissionMapUv:ee&&b(M.transmissionMap.channel),thicknessMapUv:Ze&&b(M.thicknessMap.channel),alphaMapUv:Ie&&b(M.alphaMap.channel),vertexTangents:!!ce.attributes.tangent&&(tt||z),vertexColors:M.vertexColors,vertexAlphas:M.vertexColors===!0&&!!ce.attributes.color&&ce.attributes.color.itemSize===4,pointsUvs:j.isPoints===!0&&!!ce.attributes.uv&&(rt||Ie),fog:!!te,useFog:M.fog===!0,fogExp2:!!te&&te.isFogExp2,flatShading:M.flatShading===!0,sizeAttenuation:M.sizeAttenuation===!0,logarithmicDepthBuffer:f,reverseDepthBuffer:gt,skinning:j.isSkinnedMesh===!0,morphTargets:ce.morphAttributes.position!==void 0,morphNormals:ce.morphAttributes.normal!==void 0,morphColors:ce.morphAttributes.color!==void 0,morphTargetsCount:J,morphTextureStride:ue,numDirLights:A.directional.length,numPointLights:A.point.length,numSpotLights:A.spot.length,numSpotLightMaps:A.spotLightMap.length,numRectAreaLights:A.rectArea.length,numHemiLights:A.hemi.length,numDirLightShadows:A.directionalShadowMap.length,numPointLightShadows:A.pointShadowMap.length,numSpotLightShadows:A.spotShadowMap.length,numSpotLightShadowsWithMaps:A.numSpotLightShadowsWithMaps,numLightProbes:A.numLightProbes,numClippingPlanes:o.numPlanes,numClipIntersection:o.numIntersection,dithering:M.dithering,shadowMapEnabled:n.shadowMap.enabled&&D.length>0,shadowMapType:n.shadowMap.type,toneMapping:kn,decodeVideoTexture:rt&&M.map.isVideoTexture===!0&&An.getTransfer(M.map.colorSpace)===Gn,decodeVideoTextureEmissive:Mt&&M.emissiveMap.isVideoTexture===!0&&An.getTransfer(M.emissiveMap.colorSpace)===Gn,premultipliedAlpha:M.premultipliedAlpha,doubleSided:M.side===Mo,flipSided:M.side===Jr,useDepthPacking:M.depthPacking>=0,depthPacking:M.depthPacking||0,index0AttributeName:M.index0AttributeName,extensionClipCullDistance:Ft&&M.extensions.clipCullDistance===!0&&i.has("WEBGL_clip_cull_distance"),extensionMultiDraw:(Ft&&M.extensions.multiDraw===!0||Ye)&&i.has("WEBGL_multi_draw"),rendererExtensionParallelShaderCompile:i.has("KHR_parallel_shader_compile"),customProgramCacheKey:M.customProgramCacheKey()};return Xn.vertexUv1s=c.has(1),Xn.vertexUv2s=c.has(2),Xn.vertexUv3s=c.has(3),c.clear(),Xn}function v(M){const A=[];if(M.shaderID?A.push(M.shaderID):(A.push(M.customVertexShaderID),A.push(M.customFragmentShaderID)),M.defines!==void 0)for(const D in M.defines)A.push(D),A.push(M.defines[D]);return M.isRawShaderMaterial===!1&&(S(A,M),E(A,M),A.push(n.outputColorSpace)),A.push(M.customProgramCacheKey),A.join()}function S(M,A){M.push(A.precision),M.push(A.outputColorSpace),M.push(A.envMapMode),M.push(A.envMapCubeUVHeight),M.push(A.mapUv),M.push(A.alphaMapUv),M.push(A.lightMapUv),M.push(A.aoMapUv),M.push(A.bumpMapUv),M.push(A.normalMapUv),M.push(A.displacementMapUv),M.push(A.emissiveMapUv),M.push(A.metalnessMapUv),M.push(A.roughnessMapUv),M.push(A.anisotropyMapUv),M.push(A.clearcoatMapUv),M.push(A.clearcoatNormalMapUv),M.push(A.clearcoatRoughnessMapUv),M.push(A.iridescenceMapUv),M.push(A.iridescenceThicknessMapUv),M.push(A.sheenColorMapUv),M.push(A.sheenRoughnessMapUv),M.push(A.specularMapUv),M.push(A.specularColorMapUv),M.push(A.specularIntensityMapUv),M.push(A.transmissionMapUv),M.push(A.thicknessMapUv),M.push(A.combine),M.push(A.fogExp2),M.push(A.sizeAttenuation),M.push(A.morphTargetsCount),M.push(A.morphAttributeCount),M.push(A.numDirLights),M.push(A.numPointLights),M.push(A.numSpotLights),M.push(A.numSpotLightMaps),M.push(A.numHemiLights),M.push(A.numRectAreaLights),M.push(A.numDirLightShadows),M.push(A.numPointLightShadows),M.push(A.numSpotLightShadows),M.push(A.numSpotLightShadowsWithMaps),M.push(A.numLightProbes),M.push(A.shadowMapType),M.push(A.toneMapping),M.push(A.numClippingPlanes),M.push(A.numClipIntersection),M.push(A.depthPacking)}function E(M,A){a.disableAll(),A.supportsVertexTextures&&a.enable(0),A.instancing&&a.enable(1),A.instancingColor&&a.enable(2),A.instancingMorph&&a.enable(3),A.matcap&&a.enable(4),A.envMap&&a.enable(5),A.normalMapObjectSpace&&a.enable(6),A.normalMapTangentSpace&&a.enable(7),A.clearcoat&&a.enable(8),A.iridescence&&a.enable(9),A.alphaTest&&a.enable(10),A.vertexColors&&a.enable(11),A.vertexAlphas&&a.enable(12),A.vertexUv1s&&a.enable(13),A.vertexUv2s&&a.enable(14),A.vertexUv3s&&a.enable(15),A.vertexTangents&&a.enable(16),A.anisotropy&&a.enable(17),A.alphaHash&&a.enable(18),A.batching&&a.enable(19),A.dispersion&&a.enable(20),A.batchingColor&&a.enable(21),M.push(a.mask),a.disableAll(),A.fog&&a.enable(0),A.useFog&&a.enable(1),A.flatShading&&a.enable(2),A.logarithmicDepthBuffer&&a.enable(3),A.reverseDepthBuffer&&a.enable(4),A.skinning&&a.enable(5),A.morphTargets&&a.enable(6),A.morphNormals&&a.enable(7),A.morphColors&&a.enable(8),A.premultipliedAlpha&&a.enable(9),A.shadowMapEnabled&&a.enable(10),A.doubleSided&&a.enable(11),A.flipSided&&a.enable(12),A.useDepthPacking&&a.enable(13),A.dithering&&a.enable(14),A.transmission&&a.enable(15),A.sheen&&a.enable(16),A.opaque&&a.enable(17),A.pointsUvs&&a.enable(18),A.decodeVideoTexture&&a.enable(19),A.decodeVideoTextureEmissive&&a.enable(20),A.alphaToCoverage&&a.enable(21),M.push(a.mask)}function I(M){const A=x[M.type];let D;if(A){const B=Ao[A];D=jj.clone(B.uniforms)}else D=M.uniforms;return D}function U(M,A){let D;for(let B=0,j=u.length;B<j;B++){const te=u[B];if(te.cacheKey===A){D=te,++D.usedTimes;break}}return D===void 0&&(D=new iZ(n,A,M,s),u.push(D)),D}function O(M){if(--M.usedTimes===0){const A=u.indexOf(M);u[A]=u[u.length-1],u.pop(),M.destroy()}}function C(M){l.remove(M)}function P(){l.dispose()}return{getParameters:w,getProgramCacheKey:v,getUniforms:I,acquireProgram:U,releaseProgram:O,releaseShaderCache:C,programs:u,dispose:P}}function lZ(){let n=new WeakMap;function e(o){return n.has(o)}function t(o){let a=n.get(o);return a===void 0&&(a={},n.set(o,a)),a}function i(o){n.delete(o)}function r(o,a,l){n.get(o)[a]=l}function s(){n=new WeakMap}return{has:e,get:t,remove:i,update:r,dispose:s}}function cZ(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.material.id!==e.material.id?n.material.id-e.material.id:n.z!==e.z?n.z-e.z:n.id-e.id}function VD(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.z!==e.z?e.z-n.z:n.id-e.id}function BD(){const n=[];let e=0;const t=[],i=[],r=[];function s(){e=0,t.length=0,i.length=0,r.length=0}function o(f,m,g,x,b,w){let v=n[e];return v===void 0?(v={id:f.id,object:f,geometry:m,material:g,groupOrder:x,renderOrder:f.renderOrder,z:b,group:w},n[e]=v):(v.id=f.id,v.object=f,v.geometry=m,v.material=g,v.groupOrder=x,v.renderOrder=f.renderOrder,v.z=b,v.group=w),e++,v}function a(f,m,g,x,b,w){const v=o(f,m,g,x,b,w);g.transmission>0?i.push(v):g.transparent===!0?r.push(v):t.push(v)}function l(f,m,g,x,b,w){const v=o(f,m,g,x,b,w);g.transmission>0?i.unshift(v):g.transparent===!0?r.unshift(v):t.unshift(v)}function c(f,m){t.length>1&&t.sort(f||cZ),i.length>1&&i.sort(m||VD),r.length>1&&r.sort(m||VD)}function u(){for(let f=e,m=n.length;f<m;f++){const g=n[f];if(g.id===null)break;g.id=null,g.object=null,g.geometry=null,g.material=null,g.group=null}}return{opaque:t,transmissive:i,transparent:r,init:s,push:a,unshift:l,finish:u,sort:c}}function uZ(){let n=new WeakMap;function e(i,r){const s=n.get(i);let o;return s===void 0?(o=new BD,n.set(i,[o])):r>=s.length?(o=new BD,s.push(o)):o=s[r],o}function t(){n=new WeakMap}return{get:e,dispose:t}}function hZ(){const n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let t;switch(e.type){case"DirectionalLight":t={direction:new K,color:new xt};break;case"SpotLight":t={position:new K,direction:new K,color:new xt,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":t={position:new K,color:new xt,distance:0,decay:0};break;case"HemisphereLight":t={direction:new K,skyColor:new xt,groundColor:new xt};break;case"RectAreaLight":t={color:new xt,position:new K,halfWidth:new K,halfHeight:new K};break}return n[e.id]=t,t}}}function dZ(){const n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let t;switch(e.type){case"DirectionalLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Le};break;case"SpotLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Le};break;case"PointLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Le,shadowCameraNear:1,shadowCameraFar:1e3};break}return n[e.id]=t,t}}}let fZ=0;function pZ(n,e){return(e.castShadow?2:0)-(n.castShadow?2:0)+(e.map?1:0)-(n.map?1:0)}function mZ(n){const e=new hZ,t=dZ(),i={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let c=0;c<9;c++)i.probe.push(new K);const r=new K,s=new Vt,o=new Vt;function a(c){let u=0,f=0,m=0;for(let M=0;M<9;M++)i.probe[M].set(0,0,0);let g=0,x=0,b=0,w=0,v=0,S=0,E=0,I=0,U=0,O=0,C=0;c.sort(pZ);for(let M=0,A=c.length;M<A;M++){const D=c[M],B=D.color,j=D.intensity,te=D.distance,ce=D.shadow&&D.shadow.map?D.shadow.map.texture:null;if(D.isAmbientLight)u+=B.r*j,f+=B.g*j,m+=B.b*j;else if(D.isLightProbe){for(let pe=0;pe<9;pe++)i.probe[pe].addScaledVector(D.sh.coefficients[pe],j);C++}else if(D.isDirectionalLight){const pe=e.get(D);if(pe.color.copy(D.color).multiplyScalar(D.intensity),D.castShadow){const de=D.shadow,W=t.get(D);W.shadowIntensity=de.intensity,W.shadowBias=de.bias,W.shadowNormalBias=de.normalBias,W.shadowRadius=de.radius,W.shadowMapSize=de.mapSize,i.directionalShadow[g]=W,i.directionalShadowMap[g]=ce,i.directionalShadowMatrix[g]=D.shadow.matrix,S++}i.directional[g]=pe,g++}else if(D.isSpotLight){const pe=e.get(D);pe.position.setFromMatrixPosition(D.matrixWorld),pe.color.copy(B).multiplyScalar(j),pe.distance=te,pe.coneCos=Math.cos(D.angle),pe.penumbraCos=Math.cos(D.angle*(1-D.penumbra)),pe.decay=D.decay,i.spot[b]=pe;const de=D.shadow;if(D.map&&(i.spotLightMap[U]=D.map,U++,de.updateMatrices(D),D.castShadow&&O++),i.spotLightMatrix[b]=de.matrix,D.castShadow){const W=t.get(D);W.shadowIntensity=de.intensity,W.shadowBias=de.bias,W.shadowNormalBias=de.normalBias,W.shadowRadius=de.radius,W.shadowMapSize=de.mapSize,i.spotShadow[b]=W,i.spotShadowMap[b]=ce,I++}b++}else if(D.isRectAreaLight){const pe=e.get(D);pe.color.copy(B).multiplyScalar(j),pe.halfWidth.set(D.width*.5,0,0),pe.halfHeight.set(0,D.height*.5,0),i.rectArea[w]=pe,w++}else if(D.isPointLight){const pe=e.get(D);if(pe.color.copy(D.color).multiplyScalar(D.intensity),pe.distance=D.distance,pe.decay=D.decay,D.castShadow){const de=D.shadow,W=t.get(D);W.shadowIntensity=de.intensity,W.shadowBias=de.bias,W.shadowNormalBias=de.normalBias,W.shadowRadius=de.radius,W.shadowMapSize=de.mapSize,W.shadowCameraNear=de.camera.near,W.shadowCameraFar=de.camera.far,i.pointShadow[x]=W,i.pointShadowMap[x]=ce,i.pointShadowMatrix[x]=D.shadow.matrix,E++}i.point[x]=pe,x++}else if(D.isHemisphereLight){const pe=e.get(D);pe.skyColor.copy(D.color).multiplyScalar(j),pe.groundColor.copy(D.groundColor).multiplyScalar(j),i.hemi[v]=pe,v++}}w>0&&(n.has("OES_texture_float_linear")===!0?(i.rectAreaLTC1=ot.LTC_FLOAT_1,i.rectAreaLTC2=ot.LTC_FLOAT_2):(i.rectAreaLTC1=ot.LTC_HALF_1,i.rectAreaLTC2=ot.LTC_HALF_2)),i.ambient[0]=u,i.ambient[1]=f,i.ambient[2]=m;const P=i.hash;(P.directionalLength!==g||P.pointLength!==x||P.spotLength!==b||P.rectAreaLength!==w||P.hemiLength!==v||P.numDirectionalShadows!==S||P.numPointShadows!==E||P.numSpotShadows!==I||P.numSpotMaps!==U||P.numLightProbes!==C)&&(i.directional.length=g,i.spot.length=b,i.rectArea.length=w,i.point.length=x,i.hemi.length=v,i.directionalShadow.length=S,i.directionalShadowMap.length=S,i.pointShadow.length=E,i.pointShadowMap.length=E,i.spotShadow.length=I,i.spotShadowMap.length=I,i.directionalShadowMatrix.length=S,i.pointShadowMatrix.length=E,i.spotLightMatrix.length=I+U-O,i.spotLightMap.length=U,i.numSpotLightShadowsWithMaps=O,i.numLightProbes=C,P.directionalLength=g,P.pointLength=x,P.spotLength=b,P.rectAreaLength=w,P.hemiLength=v,P.numDirectionalShadows=S,P.numPointShadows=E,P.numSpotShadows=I,P.numSpotMaps=U,P.numLightProbes=C,i.version=fZ++)}function l(c,u){let f=0,m=0,g=0,x=0,b=0;const w=u.matrixWorldInverse;for(let v=0,S=c.length;v<S;v++){const E=c[v];if(E.isDirectionalLight){const I=i.directional[f];I.direction.setFromMatrixPosition(E.matrixWorld),r.setFromMatrixPosition(E.target.matrixWorld),I.direction.sub(r),I.direction.transformDirection(w),f++}else if(E.isSpotLight){const I=i.spot[g];I.position.setFromMatrixPosition(E.matrixWorld),I.position.applyMatrix4(w),I.direction.setFromMatrixPosition(E.matrixWorld),r.setFromMatrixPosition(E.target.matrixWorld),I.direction.sub(r),I.direction.transformDirection(w),g++}else if(E.isRectAreaLight){const I=i.rectArea[x];I.position.setFromMatrixPosition(E.matrixWorld),I.position.applyMatrix4(w),o.identity(),s.copy(E.matrixWorld),s.premultiply(w),o.extractRotation(s),I.halfWidth.set(E.width*.5,0,0),I.halfHeight.set(0,E.height*.5,0),I.halfWidth.applyMatrix4(o),I.halfHeight.applyMatrix4(o),x++}else if(E.isPointLight){const I=i.point[m];I.position.setFromMatrixPosition(E.matrixWorld),I.position.applyMatrix4(w),m++}else if(E.isHemisphereLight){const I=i.hemi[b];I.direction.setFromMatrixPosition(E.matrixWorld),I.direction.transformDirection(w),b++}}}return{setup:a,setupView:l,state:i}}function zD(n){const e=new mZ(n),t=[],i=[];function r(u){c.camera=u,t.length=0,i.length=0}function s(u){t.push(u)}function o(u){i.push(u)}function a(){e.setup(t)}function l(u){e.setupView(t,u)}const c={lightsArray:t,shadowsArray:i,camera:null,lights:e,transmissionRenderTarget:{}};return{init:r,state:c,setupLights:a,setupLightsView:l,pushLight:s,pushShadow:o}}function gZ(n){let e=new WeakMap;function t(r,s=0){const o=e.get(r);let a;return o===void 0?(a=new zD(n),e.set(r,[a])):s>=o.length?(a=new zD(n),o.push(a)):a=o[s],a}function i(){e=new WeakMap}return{get:t,dispose:i}}const yZ=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,vZ=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function xZ(n,e,t){let i=new Kg;const r=new Le,s=new Le,o=new Rn,a=new QA({depthPacking:Ej}),l=new ZA,c={},u=t.maxTextureSize,f={[Ka]:Jr,[Jr]:Ka,[Mo]:Mo},m=new ko({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new Le},radius:{value:4}},vertexShader:yZ,fragmentShader:vZ}),g=m.clone();g.defines.HORIZONTAL_PASS=1;const x=new un;x.setAttribute("position",new $n(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const b=new Vi(x,m),w=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=fw;let v=this.type;this.render=function(O,C,P){if(w.enabled===!1||w.autoUpdate===!1&&w.needsUpdate===!1||O.length===0)return;const M=n.getRenderTarget(),A=n.getActiveCubeFace(),D=n.getActiveMipmapLevel(),B=n.state;B.setBlending(ja),B.buffers.color.setClear(1,1,1,1),B.buffers.depth.setTest(!0),B.setScissorTest(!1);const j=v!==So&&this.type===So,te=v===So&&this.type!==So;for(let ce=0,pe=O.length;ce<pe;ce++){const de=O[ce],W=de.shadow;if(W===void 0){console.warn("THREE.WebGLShadowMap:",de,"has no shadow.");continue}if(W.autoUpdate===!1&&W.needsUpdate===!1)continue;r.copy(W.mapSize);const Z=W.getFrameExtents();if(r.multiply(Z),s.copy(W.mapSize),(r.x>u||r.y>u)&&(r.x>u&&(s.x=Math.floor(u/Z.x),r.x=s.x*Z.x,W.mapSize.x=s.x),r.y>u&&(s.y=Math.floor(u/Z.y),r.y=s.y*Z.y,W.mapSize.y=s.y)),W.map===null||j===!0||te===!0){const J=this.type!==So?{minFilter:mr,magFilter:mr}:{};W.map!==null&&W.map.dispose(),W.map=new ua(r.x,r.y,J),W.map.texture.name=de.name+".shadowMap",W.camera.updateProjectionMatrix()}n.setRenderTarget(W.map),n.clear();const F=W.getViewportCount();for(let J=0;J<F;J++){const ue=W.getViewport(J);o.set(s.x*ue.x,s.y*ue.y,s.x*ue.z,s.y*ue.w),B.viewport(o),W.updateMatrices(de,J),i=W.getFrustum(),I(C,P,W.camera,de,this.type)}W.isPointLightShadow!==!0&&this.type===So&&S(W,P),W.needsUpdate=!1}v=this.type,w.needsUpdate=!1,n.setRenderTarget(M,A,D)};function S(O,C){const P=e.update(b);m.defines.VSM_SAMPLES!==O.blurSamples&&(m.defines.VSM_SAMPLES=O.blurSamples,g.defines.VSM_SAMPLES=O.blurSamples,m.needsUpdate=!0,g.needsUpdate=!0),O.mapPass===null&&(O.mapPass=new ua(r.x,r.y)),m.uniforms.shadow_pass.value=O.map.texture,m.uniforms.resolution.value=O.mapSize,m.uniforms.radius.value=O.radius,n.setRenderTarget(O.mapPass),n.clear(),n.renderBufferDirect(C,null,P,m,b,null),g.uniforms.shadow_pass.value=O.mapPass.texture,g.uniforms.resolution.value=O.mapSize,g.uniforms.radius.value=O.radius,n.setRenderTarget(O.map),n.clear(),n.renderBufferDirect(C,null,P,g,b,null)}function E(O,C,P,M){let A=null;const D=P.isPointLight===!0?O.customDistanceMaterial:O.customDepthMaterial;if(D!==void 0)A=D;else if(A=P.isPointLight===!0?l:a,n.localClippingEnabled&&C.clipShadows===!0&&Array.isArray(C.clippingPlanes)&&C.clippingPlanes.length!==0||C.displacementMap&&C.displacementScale!==0||C.alphaMap&&C.alphaTest>0||C.map&&C.alphaTest>0){const B=A.uuid,j=C.uuid;let te=c[B];te===void 0&&(te={},c[B]=te);let ce=te[j];ce===void 0&&(ce=A.clone(),te[j]=ce,C.addEventListener("dispose",U)),A=ce}if(A.visible=C.visible,A.wireframe=C.wireframe,M===So?A.side=C.shadowSide!==null?C.shadowSide:C.side:A.side=C.shadowSide!==null?C.shadowSide:f[C.side],A.alphaMap=C.alphaMap,A.alphaTest=C.alphaTest,A.map=C.map,A.clipShadows=C.clipShadows,A.clippingPlanes=C.clippingPlanes,A.clipIntersection=C.clipIntersection,A.displacementMap=C.displacementMap,A.displacementScale=C.displacementScale,A.displacementBias=C.displacementBias,A.wireframeLinewidth=C.wireframeLinewidth,A.linewidth=C.linewidth,P.isPointLight===!0&&A.isMeshDistanceMaterial===!0){const B=n.properties.get(A);B.light=P}return A}function I(O,C,P,M,A){if(O.visible===!1)return;if(O.layers.test(C.layers)&&(O.isMesh||O.isLine||O.isPoints)&&(O.castShadow||O.receiveShadow&&A===So)&&(!O.frustumCulled||i.intersectsObject(O))){O.modelViewMatrix.multiplyMatrices(P.matrixWorldInverse,O.matrixWorld);const j=e.update(O),te=O.material;if(Array.isArray(te)){const ce=j.groups;for(let pe=0,de=ce.length;pe<de;pe++){const W=ce[pe],Z=te[W.materialIndex];if(Z&&Z.visible){const F=E(O,Z,M,A);O.onBeforeShadow(n,O,C,P,j,F,W),n.renderBufferDirect(P,null,j,F,O,W),O.onAfterShadow(n,O,C,P,j,F,W)}}}else if(te.visible){const ce=E(O,te,M,A);O.onBeforeShadow(n,O,C,P,j,ce,null),n.renderBufferDirect(P,null,j,ce,O,null),O.onAfterShadow(n,O,C,P,j,ce,null)}}const B=O.children;for(let j=0,te=B.length;j<te;j++)I(B[j],C,P,M,A)}function U(O){O.target.removeEventListener("dispose",U);for(const P in c){const M=c[P],A=O.target.uuid;A in M&&(M[A].dispose(),delete M[A])}}}const _Z={[L0]:k0,[O0]:j0,[U0]:V0,[Ju]:F0,[k0]:L0,[j0]:O0,[V0]:U0,[F0]:Ju};function wZ(n,e){function t(){let ee=!1;const Ze=new Rn;let be=null;const Ie=new Rn(0,0,0,0);return{setMask:function(it){be!==it&&!ee&&(n.colorMask(it,it,it,it),be=it)},setLocked:function(it){ee=it},setClear:function(it,Ke,Ft,kn,Xn){Xn===!0&&(it*=kn,Ke*=kn,Ft*=kn),Ze.set(it,Ke,Ft,kn),Ie.equals(Ze)===!1&&(n.clearColor(it,Ke,Ft,kn),Ie.copy(Ze))},reset:function(){ee=!1,be=null,Ie.set(-1,0,0,0)}}}function i(){let ee=!1,Ze=!1,be=null,Ie=null,it=null;return{setReversed:function(Ke){if(Ze!==Ke){const Ft=e.get("EXT_clip_control");Ze?Ft.clipControlEXT(Ft.LOWER_LEFT_EXT,Ft.ZERO_TO_ONE_EXT):Ft.clipControlEXT(Ft.LOWER_LEFT_EXT,Ft.NEGATIVE_ONE_TO_ONE_EXT);const kn=it;it=null,this.setClear(kn)}Ze=Ke},getReversed:function(){return Ze},setTest:function(Ke){Ke?Me(n.DEPTH_TEST):gt(n.DEPTH_TEST)},setMask:function(Ke){be!==Ke&&!ee&&(n.depthMask(Ke),be=Ke)},setFunc:function(Ke){if(Ze&&(Ke=_Z[Ke]),Ie!==Ke){switch(Ke){case L0:n.depthFunc(n.NEVER);break;case k0:n.depthFunc(n.ALWAYS);break;case O0:n.depthFunc(n.LESS);break;case Ju:n.depthFunc(n.LEQUAL);break;case U0:n.depthFunc(n.EQUAL);break;case F0:n.depthFunc(n.GEQUAL);break;case j0:n.depthFunc(n.GREATER);break;case V0:n.depthFunc(n.NOTEQUAL);break;default:n.depthFunc(n.LEQUAL)}Ie=Ke}},setLocked:function(Ke){ee=Ke},setClear:function(Ke){it!==Ke&&(Ze&&(Ke=1-Ke),n.clearDepth(Ke),it=Ke)},reset:function(){ee=!1,be=null,Ie=null,it=null,Ze=!1}}}function r(){let ee=!1,Ze=null,be=null,Ie=null,it=null,Ke=null,Ft=null,kn=null,Xn=null;return{setTest:function(Zt){ee||(Zt?Me(n.STENCIL_TEST):gt(n.STENCIL_TEST))},setMask:function(Zt){Ze!==Zt&&!ee&&(n.stencilMask(Zt),Ze=Zt)},setFunc:function(Zt,zi,Hn){(be!==Zt||Ie!==zi||it!==Hn)&&(n.stencilFunc(Zt,zi,Hn),be=Zt,Ie=zi,it=Hn)},setOp:function(Zt,zi,Hn){(Ke!==Zt||Ft!==zi||kn!==Hn)&&(n.stencilOp(Zt,zi,Hn),Ke=Zt,Ft=zi,kn=Hn)},setLocked:function(Zt){ee=Zt},setClear:function(Zt){Xn!==Zt&&(n.clearStencil(Zt),Xn=Zt)},reset:function(){ee=!1,Ze=null,be=null,Ie=null,it=null,Ke=null,Ft=null,kn=null,Xn=null}}}const s=new t,o=new i,a=new r,l=new WeakMap,c=new WeakMap;let u={},f={},m=new WeakMap,g=[],x=null,b=!1,w=null,v=null,S=null,E=null,I=null,U=null,O=null,C=new xt(0,0,0),P=0,M=!1,A=null,D=null,B=null,j=null,te=null;const ce=n.getParameter(n.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let pe=!1,de=0;const W=n.getParameter(n.VERSION);W.indexOf("WebGL")!==-1?(de=parseFloat(/^WebGL (\d)/.exec(W)[1]),pe=de>=1):W.indexOf("OpenGL ES")!==-1&&(de=parseFloat(/^OpenGL ES (\d)/.exec(W)[1]),pe=de>=2);let Z=null,F={};const J=n.getParameter(n.SCISSOR_BOX),ue=n.getParameter(n.VIEWPORT),ye=new Rn().fromArray(J),le=new Rn().fromArray(ue);function xe(ee,Ze,be,Ie){const it=new Uint8Array(4),Ke=n.createTexture();n.bindTexture(ee,Ke),n.texParameteri(ee,n.TEXTURE_MIN_FILTER,n.NEAREST),n.texParameteri(ee,n.TEXTURE_MAG_FILTER,n.NEAREST);for(let Ft=0;Ft<be;Ft++)ee===n.TEXTURE_3D||ee===n.TEXTURE_2D_ARRAY?n.texImage3D(Ze,0,n.RGBA,1,1,Ie,0,n.RGBA,n.UNSIGNED_BYTE,it):n.texImage2D(Ze+Ft,0,n.RGBA,1,1,0,n.RGBA,n.UNSIGNED_BYTE,it);return Ke}const Pe={};Pe[n.TEXTURE_2D]=xe(n.TEXTURE_2D,n.TEXTURE_2D,1),Pe[n.TEXTURE_CUBE_MAP]=xe(n.TEXTURE_CUBE_MAP,n.TEXTURE_CUBE_MAP_POSITIVE_X,6),Pe[n.TEXTURE_2D_ARRAY]=xe(n.TEXTURE_2D_ARRAY,n.TEXTURE_2D_ARRAY,1,1),Pe[n.TEXTURE_3D]=xe(n.TEXTURE_3D,n.TEXTURE_3D,1,1),s.setClear(0,0,0,1),o.setClear(1),a.setClear(0),Me(n.DEPTH_TEST),o.setFunc(Ju),Oe(!1),tt(l1),Me(n.CULL_FACE),X(ja);function Me(ee){u[ee]!==!0&&(n.enable(ee),u[ee]=!0)}function gt(ee){u[ee]!==!1&&(n.disable(ee),u[ee]=!1)}function Kt(ee,Ze){return f[ee]!==Ze?(n.bindFramebuffer(ee,Ze),f[ee]=Ze,ee===n.DRAW_FRAMEBUFFER&&(f[n.FRAMEBUFFER]=Ze),ee===n.FRAMEBUFFER&&(f[n.DRAW_FRAMEBUFFER]=Ze),!0):!1}function Ye(ee,Ze){let be=g,Ie=!1;if(ee){be=m.get(Ze),be===void 0&&(be=[],m.set(Ze,be));const it=ee.textures;if(be.length!==it.length||be[0]!==n.COLOR_ATTACHMENT0){for(let Ke=0,Ft=it.length;Ke<Ft;Ke++)be[Ke]=n.COLOR_ATTACHMENT0+Ke;be.length=it.length,Ie=!0}}else be[0]!==n.BACK&&(be[0]=n.BACK,Ie=!0);Ie&&n.drawBuffers(be)}function rt(ee){return x!==ee?(n.useProgram(ee),x=ee,!0):!1}const Ae={[Ol]:n.FUNC_ADD,[KF]:n.FUNC_SUBTRACT,[YF]:n.FUNC_REVERSE_SUBTRACT};Ae[JF]=n.MIN,Ae[QF]=n.MAX;const Ee={[ZF]:n.ZERO,[ej]:n.ONE,[tj]:n.SRC_COLOR,[N0]:n.SRC_ALPHA,[aj]:n.SRC_ALPHA_SATURATE,[sj]:n.DST_COLOR,[ij]:n.DST_ALPHA,[nj]:n.ONE_MINUS_SRC_COLOR,[D0]:n.ONE_MINUS_SRC_ALPHA,[oj]:n.ONE_MINUS_DST_COLOR,[rj]:n.ONE_MINUS_DST_ALPHA,[lj]:n.CONSTANT_COLOR,[cj]:n.ONE_MINUS_CONSTANT_COLOR,[uj]:n.CONSTANT_ALPHA,[hj]:n.ONE_MINUS_CONSTANT_ALPHA};function X(ee,Ze,be,Ie,it,Ke,Ft,kn,Xn,Zt){if(ee===ja){b===!0&&(gt(n.BLEND),b=!1);return}if(b===!1&&(Me(n.BLEND),b=!0),ee!==XF){if(ee!==w||Zt!==M){if((v!==Ol||I!==Ol)&&(n.blendEquation(n.FUNC_ADD),v=Ol,I=Ol),Zt)switch(ee){case Ou:n.blendFuncSeparate(n.ONE,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case c1:n.blendFunc(n.ONE,n.ONE);break;case u1:n.blendFuncSeparate(n.ZERO,n.ONE_MINUS_SRC_COLOR,n.ZERO,n.ONE);break;case h1:n.blendFuncSeparate(n.ZERO,n.SRC_COLOR,n.ZERO,n.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",ee);break}else switch(ee){case Ou:n.blendFuncSeparate(n.SRC_ALPHA,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case c1:n.blendFunc(n.SRC_ALPHA,n.ONE);break;case u1:n.blendFuncSeparate(n.ZERO,n.ONE_MINUS_SRC_COLOR,n.ZERO,n.ONE);break;case h1:n.blendFunc(n.ZERO,n.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",ee);break}S=null,E=null,U=null,O=null,C.set(0,0,0),P=0,w=ee,M=Zt}return}it=it||Ze,Ke=Ke||be,Ft=Ft||Ie,(Ze!==v||it!==I)&&(n.blendEquationSeparate(Ae[Ze],Ae[it]),v=Ze,I=it),(be!==S||Ie!==E||Ke!==U||Ft!==O)&&(n.blendFuncSeparate(Ee[be],Ee[Ie],Ee[Ke],Ee[Ft]),S=be,E=Ie,U=Ke,O=Ft),(kn.equals(C)===!1||Xn!==P)&&(n.blendColor(kn.r,kn.g,kn.b,Xn),C.copy(kn),P=Xn),w=ee,M=!1}function pt(ee,Ze){ee.side===Mo?gt(n.CULL_FACE):Me(n.CULL_FACE);let be=ee.side===Jr;Ze&&(be=!be),Oe(be),ee.blending===Ou&&ee.transparent===!1?X(ja):X(ee.blending,ee.blendEquation,ee.blendSrc,ee.blendDst,ee.blendEquationAlpha,ee.blendSrcAlpha,ee.blendDstAlpha,ee.blendColor,ee.blendAlpha,ee.premultipliedAlpha),o.setFunc(ee.depthFunc),o.setTest(ee.depthTest),o.setMask(ee.depthWrite),s.setMask(ee.colorWrite);const Ie=ee.stencilWrite;a.setTest(Ie),Ie&&(a.setMask(ee.stencilWriteMask),a.setFunc(ee.stencilFunc,ee.stencilRef,ee.stencilFuncMask),a.setOp(ee.stencilFail,ee.stencilZFail,ee.stencilZPass)),Mt(ee.polygonOffset,ee.polygonOffsetFactor,ee.polygonOffsetUnits),ee.alphaToCoverage===!0?Me(n.SAMPLE_ALPHA_TO_COVERAGE):gt(n.SAMPLE_ALPHA_TO_COVERAGE)}function Oe(ee){A!==ee&&(ee?n.frontFace(n.CW):n.frontFace(n.CCW),A=ee)}function tt(ee){ee!==WF?(Me(n.CULL_FACE),ee!==D&&(ee===l1?n.cullFace(n.BACK):ee===qF?n.cullFace(n.FRONT):n.cullFace(n.FRONT_AND_BACK))):gt(n.CULL_FACE),D=ee}function Ve(ee){ee!==B&&(pe&&n.lineWidth(ee),B=ee)}function Mt(ee,Ze,be){ee?(Me(n.POLYGON_OFFSET_FILL),(j!==Ze||te!==be)&&(n.polygonOffset(Ze,be),j=Ze,te=be)):gt(n.POLYGON_OFFSET_FILL)}function Xe(ee){ee?Me(n.SCISSOR_TEST):gt(n.SCISSOR_TEST)}function $(ee){ee===void 0&&(ee=n.TEXTURE0+ce-1),Z!==ee&&(n.activeTexture(ee),Z=ee)}function z(ee,Ze,be){be===void 0&&(Z===null?be=n.TEXTURE0+ce-1:be=Z);let Ie=F[be];Ie===void 0&&(Ie={type:void 0,texture:void 0},F[be]=Ie),(Ie.type!==ee||Ie.texture!==Ze)&&(Z!==be&&(n.activeTexture(be),Z=be),n.bindTexture(ee,Ze||Pe[ee]),Ie.type=ee,Ie.texture=Ze)}function he(){const ee=F[Z];ee!==void 0&&ee.type!==void 0&&(n.bindTexture(ee.type,null),ee.type=void 0,ee.texture=void 0)}function Se(){try{n.compressedTexImage2D(...arguments)}catch(ee){console.error("THREE.WebGLState:",ee)}}function Re(){try{n.compressedTexImage3D(...arguments)}catch(ee){console.error("THREE.WebGLState:",ee)}}function we(){try{n.texSubImage2D(...arguments)}catch(ee){console.error("THREE.WebGLState:",ee)}}function He(){try{n.texSubImage3D(...arguments)}catch(ee){console.error("THREE.WebGLState:",ee)}}function Ge(){try{n.compressedTexSubImage2D(...arguments)}catch(ee){console.error("THREE.WebGLState:",ee)}}function Qe(){try{n.compressedTexSubImage3D(...arguments)}catch(ee){console.error("THREE.WebGLState:",ee)}}function Yt(){try{n.texStorage2D(...arguments)}catch(ee){console.error("THREE.WebGLState:",ee)}}function Fe(){try{n.texStorage3D(...arguments)}catch(ee){console.error("THREE.WebGLState:",ee)}}function lt(){try{n.texImage2D(...arguments)}catch(ee){console.error("THREE.WebGLState:",ee)}}function Ct(){try{n.texImage3D(...arguments)}catch(ee){console.error("THREE.WebGLState:",ee)}}function Lt(ee){ye.equals(ee)===!1&&(n.scissor(ee.x,ee.y,ee.z,ee.w),ye.copy(ee))}function ut(ee){le.equals(ee)===!1&&(n.viewport(ee.x,ee.y,ee.z,ee.w),le.copy(ee))}function an(ee,Ze){let be=c.get(Ze);be===void 0&&(be=new WeakMap,c.set(Ze,be));let Ie=be.get(ee);Ie===void 0&&(Ie=n.getUniformBlockIndex(Ze,ee.name),be.set(ee,Ie))}function Gt(ee,Ze){const Ie=c.get(Ze).get(ee);l.get(Ze)!==Ie&&(n.uniformBlockBinding(Ze,Ie,ee.__bindingPointIndex),l.set(Ze,Ie))}function wn(){n.disable(n.BLEND),n.disable(n.CULL_FACE),n.disable(n.DEPTH_TEST),n.disable(n.POLYGON_OFFSET_FILL),n.disable(n.SCISSOR_TEST),n.disable(n.STENCIL_TEST),n.disable(n.SAMPLE_ALPHA_TO_COVERAGE),n.blendEquation(n.FUNC_ADD),n.blendFunc(n.ONE,n.ZERO),n.blendFuncSeparate(n.ONE,n.ZERO,n.ONE,n.ZERO),n.blendColor(0,0,0,0),n.colorMask(!0,!0,!0,!0),n.clearColor(0,0,0,0),n.depthMask(!0),n.depthFunc(n.LESS),o.setReversed(!1),n.clearDepth(1),n.stencilMask(4294967295),n.stencilFunc(n.ALWAYS,0,4294967295),n.stencilOp(n.KEEP,n.KEEP,n.KEEP),n.clearStencil(0),n.cullFace(n.BACK),n.frontFace(n.CCW),n.polygonOffset(0,0),n.activeTexture(n.TEXTURE0),n.bindFramebuffer(n.FRAMEBUFFER,null),n.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),n.bindFramebuffer(n.READ_FRAMEBUFFER,null),n.useProgram(null),n.lineWidth(1),n.scissor(0,0,n.canvas.width,n.canvas.height),n.viewport(0,0,n.canvas.width,n.canvas.height),u={},Z=null,F={},f={},m=new WeakMap,g=[],x=null,b=!1,w=null,v=null,S=null,E=null,I=null,U=null,O=null,C=new xt(0,0,0),P=0,M=!1,A=null,D=null,B=null,j=null,te=null,ye.set(0,0,n.canvas.width,n.canvas.height),le.set(0,0,n.canvas.width,n.canvas.height),s.reset(),o.reset(),a.reset()}return{buffers:{color:s,depth:o,stencil:a},enable:Me,disable:gt,bindFramebuffer:Kt,drawBuffers:Ye,useProgram:rt,setBlending:X,setMaterial:pt,setFlipSided:Oe,setCullFace:tt,setLineWidth:Ve,setPolygonOffset:Mt,setScissorTest:Xe,activeTexture:$,bindTexture:z,unbindTexture:he,compressedTexImage2D:Se,compressedTexImage3D:Re,texImage2D:lt,texImage3D:Ct,updateUBOMapping:an,uniformBlockBinding:Gt,texStorage2D:Yt,texStorage3D:Fe,texSubImage2D:we,texSubImage3D:He,compressedTexSubImage2D:Ge,compressedTexSubImage3D:Qe,scissor:Lt,viewport:ut,reset:wn}}function bZ(n,e,t,i,r,s,o){const a=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,l=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),c=new Le,u=new WeakMap;let f;const m=new WeakMap;let g=!1;try{g=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function x($,z){return g?new OffscreenCanvas($,z):hg("canvas")}function b($,z,he){let Se=1;const Re=Xe($);if((Re.width>he||Re.height>he)&&(Se=he/Math.max(Re.width,Re.height)),Se<1)if(typeof HTMLImageElement<"u"&&$ instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&$ instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&$ instanceof ImageBitmap||typeof VideoFrame<"u"&&$ instanceof VideoFrame){const we=Math.floor(Se*Re.width),He=Math.floor(Se*Re.height);f===void 0&&(f=x(we,He));const Ge=z?x(we,He):f;return Ge.width=we,Ge.height=He,Ge.getContext("2d").drawImage($,0,0,we,He),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+Re.width+"x"+Re.height+") to ("+we+"x"+He+")."),Ge}else return"data"in $&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+Re.width+"x"+Re.height+")."),$;return $}function w($){return $.generateMipmaps}function v($){n.generateMipmap($)}function S($){return $.isWebGLCubeRenderTarget?n.TEXTURE_CUBE_MAP:$.isWebGL3DRenderTarget?n.TEXTURE_3D:$.isWebGLArrayRenderTarget||$.isCompressedArrayTexture?n.TEXTURE_2D_ARRAY:n.TEXTURE_2D}function E($,z,he,Se,Re=!1){if($!==null){if(n[$]!==void 0)return n[$];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+$+"'")}let we=z;if(z===n.RED&&(he===n.FLOAT&&(we=n.R32F),he===n.HALF_FLOAT&&(we=n.R16F),he===n.UNSIGNED_BYTE&&(we=n.R8)),z===n.RED_INTEGER&&(he===n.UNSIGNED_BYTE&&(we=n.R8UI),he===n.UNSIGNED_SHORT&&(we=n.R16UI),he===n.UNSIGNED_INT&&(we=n.R32UI),he===n.BYTE&&(we=n.R8I),he===n.SHORT&&(we=n.R16I),he===n.INT&&(we=n.R32I)),z===n.RG&&(he===n.FLOAT&&(we=n.RG32F),he===n.HALF_FLOAT&&(we=n.RG16F),he===n.UNSIGNED_BYTE&&(we=n.RG8)),z===n.RG_INTEGER&&(he===n.UNSIGNED_BYTE&&(we=n.RG8UI),he===n.UNSIGNED_SHORT&&(we=n.RG16UI),he===n.UNSIGNED_INT&&(we=n.RG32UI),he===n.BYTE&&(we=n.RG8I),he===n.SHORT&&(we=n.RG16I),he===n.INT&&(we=n.RG32I)),z===n.RGB_INTEGER&&(he===n.UNSIGNED_BYTE&&(we=n.RGB8UI),he===n.UNSIGNED_SHORT&&(we=n.RGB16UI),he===n.UNSIGNED_INT&&(we=n.RGB32UI),he===n.BYTE&&(we=n.RGB8I),he===n.SHORT&&(we=n.RGB16I),he===n.INT&&(we=n.RGB32I)),z===n.RGBA_INTEGER&&(he===n.UNSIGNED_BYTE&&(we=n.RGBA8UI),he===n.UNSIGNED_SHORT&&(we=n.RGBA16UI),he===n.UNSIGNED_INT&&(we=n.RGBA32UI),he===n.BYTE&&(we=n.RGBA8I),he===n.SHORT&&(we=n.RGBA16I),he===n.INT&&(we=n.RGBA32I)),z===n.RGB&&he===n.UNSIGNED_INT_5_9_9_9_REV&&(we=n.RGB9_E5),z===n.RGBA){const He=Re?lg:An.getTransfer(Se);he===n.FLOAT&&(we=n.RGBA32F),he===n.HALF_FLOAT&&(we=n.RGBA16F),he===n.UNSIGNED_BYTE&&(we=He===Gn?n.SRGB8_ALPHA8:n.RGBA8),he===n.UNSIGNED_SHORT_4_4_4_4&&(we=n.RGBA4),he===n.UNSIGNED_SHORT_5_5_5_1&&(we=n.RGB5_A1)}return(we===n.R16F||we===n.R32F||we===n.RG16F||we===n.RG32F||we===n.RGBA16F||we===n.RGBA32F)&&e.get("EXT_color_buffer_float"),we}function I($,z){let he;return $?z===null||z===Ja||z===Qu?he=n.DEPTH24_STENCIL8:z===gs?he=n.DEPTH32F_STENCIL8:z===lf&&(he=n.DEPTH24_STENCIL8,console.warn("DepthTexture: 16 bit depth attachment is not supported with stencil. Using 24-bit attachment.")):z===null||z===Ja||z===Qu?he=n.DEPTH_COMPONENT24:z===gs?he=n.DEPTH_COMPONENT32F:z===lf&&(he=n.DEPTH_COMPONENT16),he}function U($,z){return w($)===!0||$.isFramebufferTexture&&$.minFilter!==mr&&$.minFilter!==Xi?Math.log2(Math.max(z.width,z.height))+1:$.mipmaps!==void 0&&$.mipmaps.length>0?$.mipmaps.length:$.isCompressedTexture&&Array.isArray($.image)?z.mipmaps.length:1}function O($){const z=$.target;z.removeEventListener("dispose",O),P(z),z.isVideoTexture&&u.delete(z)}function C($){const z=$.target;z.removeEventListener("dispose",C),A(z)}function P($){const z=i.get($);if(z.__webglInit===void 0)return;const he=$.source,Se=m.get(he);if(Se){const Re=Se[z.__cacheKey];Re.usedTimes--,Re.usedTimes===0&&M($),Object.keys(Se).length===0&&m.delete(he)}i.remove($)}function M($){const z=i.get($);n.deleteTexture(z.__webglTexture);const he=$.source,Se=m.get(he);delete Se[z.__cacheKey],o.memory.textures--}function A($){const z=i.get($);if($.depthTexture&&($.depthTexture.dispose(),i.remove($.depthTexture)),$.isWebGLCubeRenderTarget)for(let Se=0;Se<6;Se++){if(Array.isArray(z.__webglFramebuffer[Se]))for(let Re=0;Re<z.__webglFramebuffer[Se].length;Re++)n.deleteFramebuffer(z.__webglFramebuffer[Se][Re]);else n.deleteFramebuffer(z.__webglFramebuffer[Se]);z.__webglDepthbuffer&&n.deleteRenderbuffer(z.__webglDepthbuffer[Se])}else{if(Array.isArray(z.__webglFramebuffer))for(let Se=0;Se<z.__webglFramebuffer.length;Se++)n.deleteFramebuffer(z.__webglFramebuffer[Se]);else n.deleteFramebuffer(z.__webglFramebuffer);if(z.__webglDepthbuffer&&n.deleteRenderbuffer(z.__webglDepthbuffer),z.__webglMultisampledFramebuffer&&n.deleteFramebuffer(z.__webglMultisampledFramebuffer),z.__webglColorRenderbuffer)for(let Se=0;Se<z.__webglColorRenderbuffer.length;Se++)z.__webglColorRenderbuffer[Se]&&n.deleteRenderbuffer(z.__webglColorRenderbuffer[Se]);z.__webglDepthRenderbuffer&&n.deleteRenderbuffer(z.__webglDepthRenderbuffer)}const he=$.textures;for(let Se=0,Re=he.length;Se<Re;Se++){const we=i.get(he[Se]);we.__webglTexture&&(n.deleteTexture(we.__webglTexture),o.memory.textures--),i.remove(he[Se])}i.remove($)}let D=0;function B(){D=0}function j(){const $=D;return $>=r.maxTextures&&console.warn("THREE.WebGLTextures: Trying to use "+$+" texture units while this GPU supports only "+r.maxTextures),D+=1,$}function te($){const z=[];return z.push($.wrapS),z.push($.wrapT),z.push($.wrapR||0),z.push($.magFilter),z.push($.minFilter),z.push($.anisotropy),z.push($.internalFormat),z.push($.format),z.push($.type),z.push($.generateMipmaps),z.push($.premultiplyAlpha),z.push($.flipY),z.push($.unpackAlignment),z.push($.colorSpace),z.join()}function ce($,z){const he=i.get($);if($.isVideoTexture&&Ve($),$.isRenderTargetTexture===!1&&$.version>0&&he.__version!==$.version){const Se=$.image;if(Se===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(Se.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{le(he,$,z);return}}t.bindTexture(n.TEXTURE_2D,he.__webglTexture,n.TEXTURE0+z)}function pe($,z){const he=i.get($);if($.version>0&&he.__version!==$.version){le(he,$,z);return}t.bindTexture(n.TEXTURE_2D_ARRAY,he.__webglTexture,n.TEXTURE0+z)}function de($,z){const he=i.get($);if($.version>0&&he.__version!==$.version){le(he,$,z);return}t.bindTexture(n.TEXTURE_3D,he.__webglTexture,n.TEXTURE0+z)}function W($,z){const he=i.get($);if($.version>0&&he.__version!==$.version){xe(he,$,z);return}t.bindTexture(n.TEXTURE_CUBE_MAP,he.__webglTexture,n.TEXTURE0+z)}const Z={[rg]:n.REPEAT,[lo]:n.CLAMP_TO_EDGE,[sg]:n.MIRRORED_REPEAT},F={[mr]:n.NEAREST,[TA]:n.NEAREST_MIPMAP_NEAREST,[Md]:n.NEAREST_MIPMAP_LINEAR,[Xi]:n.LINEAR,[mm]:n.LINEAR_MIPMAP_NEAREST,[Yo]:n.LINEAR_MIPMAP_LINEAR},J={[Aj]:n.NEVER,[Dj]:n.ALWAYS,[Mj]:n.LESS,[kA]:n.LEQUAL,[Ij]:n.EQUAL,[Nj]:n.GEQUAL,[Pj]:n.GREATER,[Rj]:n.NOTEQUAL};function ue($,z){if(z.type===gs&&e.has("OES_texture_float_linear")===!1&&(z.magFilter===Xi||z.magFilter===mm||z.magFilter===Md||z.magFilter===Yo||z.minFilter===Xi||z.minFilter===mm||z.minFilter===Md||z.minFilter===Yo)&&console.warn("THREE.WebGLRenderer: Unable to use linear filtering with floating point textures. OES_texture_float_linear not supported on this device."),n.texParameteri($,n.TEXTURE_WRAP_S,Z[z.wrapS]),n.texParameteri($,n.TEXTURE_WRAP_T,Z[z.wrapT]),($===n.TEXTURE_3D||$===n.TEXTURE_2D_ARRAY)&&n.texParameteri($,n.TEXTURE_WRAP_R,Z[z.wrapR]),n.texParameteri($,n.TEXTURE_MAG_FILTER,F[z.magFilter]),n.texParameteri($,n.TEXTURE_MIN_FILTER,F[z.minFilter]),z.compareFunction&&(n.texParameteri($,n.TEXTURE_COMPARE_MODE,n.COMPARE_REF_TO_TEXTURE),n.texParameteri($,n.TEXTURE_COMPARE_FUNC,J[z.compareFunction])),e.has("EXT_texture_filter_anisotropic")===!0){if(z.magFilter===mr||z.minFilter!==Md&&z.minFilter!==Yo||z.type===gs&&e.has("OES_texture_float_linear")===!1)return;if(z.anisotropy>1||i.get(z).__currentAnisotropy){const he=e.get("EXT_texture_filter_anisotropic");n.texParameterf($,he.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(z.anisotropy,r.getMaxAnisotropy())),i.get(z).__currentAnisotropy=z.anisotropy}}}function ye($,z){let he=!1;$.__webglInit===void 0&&($.__webglInit=!0,z.addEventListener("dispose",O));const Se=z.source;let Re=m.get(Se);Re===void 0&&(Re={},m.set(Se,Re));const we=te(z);if(we!==$.__cacheKey){Re[we]===void 0&&(Re[we]={texture:n.createTexture(),usedTimes:0},o.memory.textures++,he=!0),Re[we].usedTimes++;const He=Re[$.__cacheKey];He!==void 0&&(Re[$.__cacheKey].usedTimes--,He.usedTimes===0&&M(z)),$.__cacheKey=we,$.__webglTexture=Re[we].texture}return he}function le($,z,he){let Se=n.TEXTURE_2D;(z.isDataArrayTexture||z.isCompressedArrayTexture)&&(Se=n.TEXTURE_2D_ARRAY),z.isData3DTexture&&(Se=n.TEXTURE_3D);const Re=ye($,z),we=z.source;t.bindTexture(Se,$.__webglTexture,n.TEXTURE0+he);const He=i.get(we);if(we.version!==He.__version||Re===!0){t.activeTexture(n.TEXTURE0+he);const Ge=An.getPrimaries(An.workingColorSpace),Qe=z.colorSpace===Ia?null:An.getPrimaries(z.colorSpace),Yt=z.colorSpace===Ia||Ge===Qe?n.NONE:n.BROWSER_DEFAULT_WEBGL;n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,z.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,z.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,z.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,Yt);let Fe=b(z.image,!1,r.maxTextureSize);Fe=Mt(z,Fe);const lt=s.convert(z.format,z.colorSpace),Ct=s.convert(z.type);let Lt=E(z.internalFormat,lt,Ct,z.colorSpace,z.isVideoTexture);ue(Se,z);let ut;const an=z.mipmaps,Gt=z.isVideoTexture!==!0,wn=He.__version===void 0||Re===!0,ee=we.dataReady,Ze=U(z,Fe);if(z.isDepthTexture)Lt=I(z.format===Zu,z.type),wn&&(Gt?t.texStorage2D(n.TEXTURE_2D,1,Lt,Fe.width,Fe.height):t.texImage2D(n.TEXTURE_2D,0,Lt,Fe.width,Fe.height,0,lt,Ct,null));else if(z.isDataTexture)if(an.length>0){Gt&&wn&&t.texStorage2D(n.TEXTURE_2D,Ze,Lt,an[0].width,an[0].height);for(let be=0,Ie=an.length;be<Ie;be++)ut=an[be],Gt?ee&&t.texSubImage2D(n.TEXTURE_2D,be,0,0,ut.width,ut.height,lt,Ct,ut.data):t.texImage2D(n.TEXTURE_2D,be,Lt,ut.width,ut.height,0,lt,Ct,ut.data);z.generateMipmaps=!1}else Gt?(wn&&t.texStorage2D(n.TEXTURE_2D,Ze,Lt,Fe.width,Fe.height),ee&&t.texSubImage2D(n.TEXTURE_2D,0,0,0,Fe.width,Fe.height,lt,Ct,Fe.data)):t.texImage2D(n.TEXTURE_2D,0,Lt,Fe.width,Fe.height,0,lt,Ct,Fe.data);else if(z.isCompressedTexture)if(z.isCompressedArrayTexture){Gt&&wn&&t.texStorage3D(n.TEXTURE_2D_ARRAY,Ze,Lt,an[0].width,an[0].height,Fe.depth);for(let be=0,Ie=an.length;be<Ie;be++)if(ut=an[be],z.format!==Lr)if(lt!==null)if(Gt){if(ee)if(z.layerUpdates.size>0){const it=w1(ut.width,ut.height,z.format,z.type);for(const Ke of z.layerUpdates){const Ft=ut.data.subarray(Ke*it/ut.data.BYTES_PER_ELEMENT,(Ke+1)*it/ut.data.BYTES_PER_ELEMENT);t.compressedTexSubImage3D(n.TEXTURE_2D_ARRAY,be,0,0,Ke,ut.width,ut.height,1,lt,Ft)}z.clearLayerUpdates()}else t.compressedTexSubImage3D(n.TEXTURE_2D_ARRAY,be,0,0,0,ut.width,ut.height,Fe.depth,lt,ut.data)}else t.compressedTexImage3D(n.TEXTURE_2D_ARRAY,be,Lt,ut.width,ut.height,Fe.depth,0,ut.data,0,0);else console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()");else Gt?ee&&t.texSubImage3D(n.TEXTURE_2D_ARRAY,be,0,0,0,ut.width,ut.height,Fe.depth,lt,Ct,ut.data):t.texImage3D(n.TEXTURE_2D_ARRAY,be,Lt,ut.width,ut.height,Fe.depth,0,lt,Ct,ut.data)}else{Gt&&wn&&t.texStorage2D(n.TEXTURE_2D,Ze,Lt,an[0].width,an[0].height);for(let be=0,Ie=an.length;be<Ie;be++)ut=an[be],z.format!==Lr?lt!==null?Gt?ee&&t.compressedTexSubImage2D(n.TEXTURE_2D,be,0,0,ut.width,ut.height,lt,ut.data):t.compressedTexImage2D(n.TEXTURE_2D,be,Lt,ut.width,ut.height,0,ut.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):Gt?ee&&t.texSubImage2D(n.TEXTURE_2D,be,0,0,ut.width,ut.height,lt,Ct,ut.data):t.texImage2D(n.TEXTURE_2D,be,Lt,ut.width,ut.height,0,lt,Ct,ut.data)}else if(z.isDataArrayTexture)if(Gt){if(wn&&t.texStorage3D(n.TEXTURE_2D_ARRAY,Ze,Lt,Fe.width,Fe.height,Fe.depth),ee)if(z.layerUpdates.size>0){const be=w1(Fe.width,Fe.height,z.format,z.type);for(const Ie of z.layerUpdates){const it=Fe.data.subarray(Ie*be/Fe.data.BYTES_PER_ELEMENT,(Ie+1)*be/Fe.data.BYTES_PER_ELEMENT);t.texSubImage3D(n.TEXTURE_2D_ARRAY,0,0,0,Ie,Fe.width,Fe.height,1,lt,Ct,it)}z.clearLayerUpdates()}else t.texSubImage3D(n.TEXTURE_2D_ARRAY,0,0,0,0,Fe.width,Fe.height,Fe.depth,lt,Ct,Fe.data)}else t.texImage3D(n.TEXTURE_2D_ARRAY,0,Lt,Fe.width,Fe.height,Fe.depth,0,lt,Ct,Fe.data);else if(z.isData3DTexture)Gt?(wn&&t.texStorage3D(n.TEXTURE_3D,Ze,Lt,Fe.width,Fe.height,Fe.depth),ee&&t.texSubImage3D(n.TEXTURE_3D,0,0,0,0,Fe.width,Fe.height,Fe.depth,lt,Ct,Fe.data)):t.texImage3D(n.TEXTURE_3D,0,Lt,Fe.width,Fe.height,Fe.depth,0,lt,Ct,Fe.data);else if(z.isFramebufferTexture){if(wn)if(Gt)t.texStorage2D(n.TEXTURE_2D,Ze,Lt,Fe.width,Fe.height);else{let be=Fe.width,Ie=Fe.height;for(let it=0;it<Ze;it++)t.texImage2D(n.TEXTURE_2D,it,Lt,be,Ie,0,lt,Ct,null),be>>=1,Ie>>=1}}else if(an.length>0){if(Gt&&wn){const be=Xe(an[0]);t.texStorage2D(n.TEXTURE_2D,Ze,Lt,be.width,be.height)}for(let be=0,Ie=an.length;be<Ie;be++)ut=an[be],Gt?ee&&t.texSubImage2D(n.TEXTURE_2D,be,0,0,lt,Ct,ut):t.texImage2D(n.TEXTURE_2D,be,Lt,lt,Ct,ut);z.generateMipmaps=!1}else if(Gt){if(wn){const be=Xe(Fe);t.texStorage2D(n.TEXTURE_2D,Ze,Lt,be.width,be.height)}ee&&t.texSubImage2D(n.TEXTURE_2D,0,0,0,lt,Ct,Fe)}else t.texImage2D(n.TEXTURE_2D,0,Lt,lt,Ct,Fe);w(z)&&v(Se),He.__version=we.version,z.onUpdate&&z.onUpdate(z)}$.__version=z.version}function xe($,z,he){if(z.image.length!==6)return;const Se=ye($,z),Re=z.source;t.bindTexture(n.TEXTURE_CUBE_MAP,$.__webglTexture,n.TEXTURE0+he);const we=i.get(Re);if(Re.version!==we.__version||Se===!0){t.activeTexture(n.TEXTURE0+he);const He=An.getPrimaries(An.workingColorSpace),Ge=z.colorSpace===Ia?null:An.getPrimaries(z.colorSpace),Qe=z.colorSpace===Ia||He===Ge?n.NONE:n.BROWSER_DEFAULT_WEBGL;n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,z.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,z.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,z.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,Qe);const Yt=z.isCompressedTexture||z.image[0].isCompressedTexture,Fe=z.image[0]&&z.image[0].isDataTexture,lt=[];for(let Ie=0;Ie<6;Ie++)!Yt&&!Fe?lt[Ie]=b(z.image[Ie],!0,r.maxCubemapSize):lt[Ie]=Fe?z.image[Ie].image:z.image[Ie],lt[Ie]=Mt(z,lt[Ie]);const Ct=lt[0],Lt=s.convert(z.format,z.colorSpace),ut=s.convert(z.type),an=E(z.internalFormat,Lt,ut,z.colorSpace),Gt=z.isVideoTexture!==!0,wn=we.__version===void 0||Se===!0,ee=Re.dataReady;let Ze=U(z,Ct);ue(n.TEXTURE_CUBE_MAP,z);let be;if(Yt){Gt&&wn&&t.texStorage2D(n.TEXTURE_CUBE_MAP,Ze,an,Ct.width,Ct.height);for(let Ie=0;Ie<6;Ie++){be=lt[Ie].mipmaps;for(let it=0;it<be.length;it++){const Ke=be[it];z.format!==Lr?Lt!==null?Gt?ee&&t.compressedTexSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Ie,it,0,0,Ke.width,Ke.height,Lt,Ke.data):t.compressedTexImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Ie,it,an,Ke.width,Ke.height,0,Ke.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):Gt?ee&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Ie,it,0,0,Ke.width,Ke.height,Lt,ut,Ke.data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Ie,it,an,Ke.width,Ke.height,0,Lt,ut,Ke.data)}}}else{if(be=z.mipmaps,Gt&&wn){be.length>0&&Ze++;const Ie=Xe(lt[0]);t.texStorage2D(n.TEXTURE_CUBE_MAP,Ze,an,Ie.width,Ie.height)}for(let Ie=0;Ie<6;Ie++)if(Fe){Gt?ee&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Ie,0,0,0,lt[Ie].width,lt[Ie].height,Lt,ut,lt[Ie].data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Ie,0,an,lt[Ie].width,lt[Ie].height,0,Lt,ut,lt[Ie].data);for(let it=0;it<be.length;it++){const Ft=be[it].image[Ie].image;Gt?ee&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Ie,it+1,0,0,Ft.width,Ft.height,Lt,ut,Ft.data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Ie,it+1,an,Ft.width,Ft.height,0,Lt,ut,Ft.data)}}else{Gt?ee&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Ie,0,0,0,Lt,ut,lt[Ie]):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Ie,0,an,Lt,ut,lt[Ie]);for(let it=0;it<be.length;it++){const Ke=be[it];Gt?ee&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Ie,it+1,0,0,Lt,ut,Ke.image[Ie]):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Ie,it+1,an,Lt,ut,Ke.image[Ie])}}}w(z)&&v(n.TEXTURE_CUBE_MAP),we.__version=Re.version,z.onUpdate&&z.onUpdate(z)}$.__version=z.version}function Pe($,z,he,Se,Re,we){const He=s.convert(he.format,he.colorSpace),Ge=s.convert(he.type),Qe=E(he.internalFormat,He,Ge,he.colorSpace),Yt=i.get(z),Fe=i.get(he);if(Fe.__renderTarget=z,!Yt.__hasExternalTextures){const lt=Math.max(1,z.width>>we),Ct=Math.max(1,z.height>>we);Re===n.TEXTURE_3D||Re===n.TEXTURE_2D_ARRAY?t.texImage3D(Re,we,Qe,lt,Ct,z.depth,0,He,Ge,null):t.texImage2D(Re,we,Qe,lt,Ct,0,He,Ge,null)}t.bindFramebuffer(n.FRAMEBUFFER,$),tt(z)?a.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,Se,Re,Fe.__webglTexture,0,Oe(z)):(Re===n.TEXTURE_2D||Re>=n.TEXTURE_CUBE_MAP_POSITIVE_X&&Re<=n.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&n.framebufferTexture2D(n.FRAMEBUFFER,Se,Re,Fe.__webglTexture,we),t.bindFramebuffer(n.FRAMEBUFFER,null)}function Me($,z,he){if(n.bindRenderbuffer(n.RENDERBUFFER,$),z.depthBuffer){const Se=z.depthTexture,Re=Se&&Se.isDepthTexture?Se.type:null,we=I(z.stencilBuffer,Re),He=z.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,Ge=Oe(z);tt(z)?a.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,Ge,we,z.width,z.height):he?n.renderbufferStorageMultisample(n.RENDERBUFFER,Ge,we,z.width,z.height):n.renderbufferStorage(n.RENDERBUFFER,we,z.width,z.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,He,n.RENDERBUFFER,$)}else{const Se=z.textures;for(let Re=0;Re<Se.length;Re++){const we=Se[Re],He=s.convert(we.format,we.colorSpace),Ge=s.convert(we.type),Qe=E(we.internalFormat,He,Ge,we.colorSpace),Yt=Oe(z);he&&tt(z)===!1?n.renderbufferStorageMultisample(n.RENDERBUFFER,Yt,Qe,z.width,z.height):tt(z)?a.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,Yt,Qe,z.width,z.height):n.renderbufferStorage(n.RENDERBUFFER,Qe,z.width,z.height)}}n.bindRenderbuffer(n.RENDERBUFFER,null)}function gt($,z){if(z&&z.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(t.bindFramebuffer(n.FRAMEBUFFER,$),!(z.depthTexture&&z.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");const Se=i.get(z.depthTexture);Se.__renderTarget=z,(!Se.__webglTexture||z.depthTexture.image.width!==z.width||z.depthTexture.image.height!==z.height)&&(z.depthTexture.image.width=z.width,z.depthTexture.image.height=z.height,z.depthTexture.needsUpdate=!0),ce(z.depthTexture,0);const Re=Se.__webglTexture,we=Oe(z);if(z.depthTexture.format===Uu)tt(z)?a.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,Re,0,we):n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,Re,0);else if(z.depthTexture.format===Zu)tt(z)?a.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.TEXTURE_2D,Re,0,we):n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.TEXTURE_2D,Re,0);else throw new Error("Unknown depthTexture format")}function Kt($){const z=i.get($),he=$.isWebGLCubeRenderTarget===!0;if(z.__boundDepthTexture!==$.depthTexture){const Se=$.depthTexture;if(z.__depthDisposeCallback&&z.__depthDisposeCallback(),Se){const Re=()=>{delete z.__boundDepthTexture,delete z.__depthDisposeCallback,Se.removeEventListener("dispose",Re)};Se.addEventListener("dispose",Re),z.__depthDisposeCallback=Re}z.__boundDepthTexture=Se}if($.depthTexture&&!z.__autoAllocateDepthBuffer){if(he)throw new Error("target.depthTexture not supported in Cube render targets");gt(z.__webglFramebuffer,$)}else if(he){z.__webglDepthbuffer=[];for(let Se=0;Se<6;Se++)if(t.bindFramebuffer(n.FRAMEBUFFER,z.__webglFramebuffer[Se]),z.__webglDepthbuffer[Se]===void 0)z.__webglDepthbuffer[Se]=n.createRenderbuffer(),Me(z.__webglDepthbuffer[Se],$,!1);else{const Re=$.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,we=z.__webglDepthbuffer[Se];n.bindRenderbuffer(n.RENDERBUFFER,we),n.framebufferRenderbuffer(n.FRAMEBUFFER,Re,n.RENDERBUFFER,we)}}else if(t.bindFramebuffer(n.FRAMEBUFFER,z.__webglFramebuffer),z.__webglDepthbuffer===void 0)z.__webglDepthbuffer=n.createRenderbuffer(),Me(z.__webglDepthbuffer,$,!1);else{const Se=$.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,Re=z.__webglDepthbuffer;n.bindRenderbuffer(n.RENDERBUFFER,Re),n.framebufferRenderbuffer(n.FRAMEBUFFER,Se,n.RENDERBUFFER,Re)}t.bindFramebuffer(n.FRAMEBUFFER,null)}function Ye($,z,he){const Se=i.get($);z!==void 0&&Pe(Se.__webglFramebuffer,$,$.texture,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,0),he!==void 0&&Kt($)}function rt($){const z=$.texture,he=i.get($),Se=i.get(z);$.addEventListener("dispose",C);const Re=$.textures,we=$.isWebGLCubeRenderTarget===!0,He=Re.length>1;if(He||(Se.__webglTexture===void 0&&(Se.__webglTexture=n.createTexture()),Se.__version=z.version,o.memory.textures++),we){he.__webglFramebuffer=[];for(let Ge=0;Ge<6;Ge++)if(z.mipmaps&&z.mipmaps.length>0){he.__webglFramebuffer[Ge]=[];for(let Qe=0;Qe<z.mipmaps.length;Qe++)he.__webglFramebuffer[Ge][Qe]=n.createFramebuffer()}else he.__webglFramebuffer[Ge]=n.createFramebuffer()}else{if(z.mipmaps&&z.mipmaps.length>0){he.__webglFramebuffer=[];for(let Ge=0;Ge<z.mipmaps.length;Ge++)he.__webglFramebuffer[Ge]=n.createFramebuffer()}else he.__webglFramebuffer=n.createFramebuffer();if(He)for(let Ge=0,Qe=Re.length;Ge<Qe;Ge++){const Yt=i.get(Re[Ge]);Yt.__webglTexture===void 0&&(Yt.__webglTexture=n.createTexture(),o.memory.textures++)}if($.samples>0&&tt($)===!1){he.__webglMultisampledFramebuffer=n.createFramebuffer(),he.__webglColorRenderbuffer=[],t.bindFramebuffer(n.FRAMEBUFFER,he.__webglMultisampledFramebuffer);for(let Ge=0;Ge<Re.length;Ge++){const Qe=Re[Ge];he.__webglColorRenderbuffer[Ge]=n.createRenderbuffer(),n.bindRenderbuffer(n.RENDERBUFFER,he.__webglColorRenderbuffer[Ge]);const Yt=s.convert(Qe.format,Qe.colorSpace),Fe=s.convert(Qe.type),lt=E(Qe.internalFormat,Yt,Fe,Qe.colorSpace,$.isXRRenderTarget===!0),Ct=Oe($);n.renderbufferStorageMultisample(n.RENDERBUFFER,Ct,lt,$.width,$.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+Ge,n.RENDERBUFFER,he.__webglColorRenderbuffer[Ge])}n.bindRenderbuffer(n.RENDERBUFFER,null),$.depthBuffer&&(he.__webglDepthRenderbuffer=n.createRenderbuffer(),Me(he.__webglDepthRenderbuffer,$,!0)),t.bindFramebuffer(n.FRAMEBUFFER,null)}}if(we){t.bindTexture(n.TEXTURE_CUBE_MAP,Se.__webglTexture),ue(n.TEXTURE_CUBE_MAP,z);for(let Ge=0;Ge<6;Ge++)if(z.mipmaps&&z.mipmaps.length>0)for(let Qe=0;Qe<z.mipmaps.length;Qe++)Pe(he.__webglFramebuffer[Ge][Qe],$,z,n.COLOR_ATTACHMENT0,n.TEXTURE_CUBE_MAP_POSITIVE_X+Ge,Qe);else Pe(he.__webglFramebuffer[Ge],$,z,n.COLOR_ATTACHMENT0,n.TEXTURE_CUBE_MAP_POSITIVE_X+Ge,0);w(z)&&v(n.TEXTURE_CUBE_MAP),t.unbindTexture()}else if(He){for(let Ge=0,Qe=Re.length;Ge<Qe;Ge++){const Yt=Re[Ge],Fe=i.get(Yt);t.bindTexture(n.TEXTURE_2D,Fe.__webglTexture),ue(n.TEXTURE_2D,Yt),Pe(he.__webglFramebuffer,$,Yt,n.COLOR_ATTACHMENT0+Ge,n.TEXTURE_2D,0),w(Yt)&&v(n.TEXTURE_2D)}t.unbindTexture()}else{let Ge=n.TEXTURE_2D;if(($.isWebGL3DRenderTarget||$.isWebGLArrayRenderTarget)&&(Ge=$.isWebGL3DRenderTarget?n.TEXTURE_3D:n.TEXTURE_2D_ARRAY),t.bindTexture(Ge,Se.__webglTexture),ue(Ge,z),z.mipmaps&&z.mipmaps.length>0)for(let Qe=0;Qe<z.mipmaps.length;Qe++)Pe(he.__webglFramebuffer[Qe],$,z,n.COLOR_ATTACHMENT0,Ge,Qe);else Pe(he.__webglFramebuffer,$,z,n.COLOR_ATTACHMENT0,Ge,0);w(z)&&v(Ge),t.unbindTexture()}$.depthBuffer&&Kt($)}function Ae($){const z=$.textures;for(let he=0,Se=z.length;he<Se;he++){const Re=z[he];if(w(Re)){const we=S($),He=i.get(Re).__webglTexture;t.bindTexture(we,He),v(we),t.unbindTexture()}}}const Ee=[],X=[];function pt($){if($.samples>0){if(tt($)===!1){const z=$.textures,he=$.width,Se=$.height;let Re=n.COLOR_BUFFER_BIT;const we=$.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,He=i.get($),Ge=z.length>1;if(Ge)for(let Qe=0;Qe<z.length;Qe++)t.bindFramebuffer(n.FRAMEBUFFER,He.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+Qe,n.RENDERBUFFER,null),t.bindFramebuffer(n.FRAMEBUFFER,He.__webglFramebuffer),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0+Qe,n.TEXTURE_2D,null,0);t.bindFramebuffer(n.READ_FRAMEBUFFER,He.__webglMultisampledFramebuffer),t.bindFramebuffer(n.DRAW_FRAMEBUFFER,He.__webglFramebuffer);for(let Qe=0;Qe<z.length;Qe++){if($.resolveDepthBuffer&&($.depthBuffer&&(Re|=n.DEPTH_BUFFER_BIT),$.stencilBuffer&&$.resolveStencilBuffer&&(Re|=n.STENCIL_BUFFER_BIT)),Ge){n.framebufferRenderbuffer(n.READ_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.RENDERBUFFER,He.__webglColorRenderbuffer[Qe]);const Yt=i.get(z[Qe]).__webglTexture;n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,Yt,0)}n.blitFramebuffer(0,0,he,Se,0,0,he,Se,Re,n.NEAREST),l===!0&&(Ee.length=0,X.length=0,Ee.push(n.COLOR_ATTACHMENT0+Qe),$.depthBuffer&&$.resolveDepthBuffer===!1&&(Ee.push(we),X.push(we),n.invalidateFramebuffer(n.DRAW_FRAMEBUFFER,X)),n.invalidateFramebuffer(n.READ_FRAMEBUFFER,Ee))}if(t.bindFramebuffer(n.READ_FRAMEBUFFER,null),t.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),Ge)for(let Qe=0;Qe<z.length;Qe++){t.bindFramebuffer(n.FRAMEBUFFER,He.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+Qe,n.RENDERBUFFER,He.__webglColorRenderbuffer[Qe]);const Yt=i.get(z[Qe]).__webglTexture;t.bindFramebuffer(n.FRAMEBUFFER,He.__webglFramebuffer),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0+Qe,n.TEXTURE_2D,Yt,0)}t.bindFramebuffer(n.DRAW_FRAMEBUFFER,He.__webglMultisampledFramebuffer)}else if($.depthBuffer&&$.resolveDepthBuffer===!1&&l){const z=$.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT;n.invalidateFramebuffer(n.DRAW_FRAMEBUFFER,[z])}}}function Oe($){return Math.min(r.maxSamples,$.samples)}function tt($){const z=i.get($);return $.samples>0&&e.has("WEBGL_multisampled_render_to_texture")===!0&&z.__useRenderToTexture!==!1}function Ve($){const z=o.render.frame;u.get($)!==z&&(u.set($,z),$.update())}function Mt($,z){const he=$.colorSpace,Se=$.format,Re=$.type;return $.isCompressedTexture===!0||$.isVideoTexture===!0||he!==eh&&he!==Ia&&(An.getTransfer(he)===Gn?(Se!==Lr||Re!==Lo)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",he)),z}function Xe($){return typeof HTMLImageElement<"u"&&$ instanceof HTMLImageElement?(c.width=$.naturalWidth||$.width,c.height=$.naturalHeight||$.height):typeof VideoFrame<"u"&&$ instanceof VideoFrame?(c.width=$.displayWidth,c.height=$.displayHeight):(c.width=$.width,c.height=$.height),c}this.allocateTextureUnit=j,this.resetTextureUnits=B,this.setTexture2D=ce,this.setTexture2DArray=pe,this.setTexture3D=de,this.setTextureCube=W,this.rebindTextures=Ye,this.setupRenderTarget=rt,this.updateRenderTargetMipmap=Ae,this.updateMultisampleRenderTarget=pt,this.setupDepthRenderbuffer=Kt,this.setupFrameBufferTexture=Pe,this.useMultisampledRTT=tt}function VV(n,e){function t(i,r=Ia){let s;const o=An.getTransfer(r);if(i===Lo)return n.UNSIGNED_BYTE;if(i===gw)return n.UNSIGNED_SHORT_4_4_4_4;if(i===yw)return n.UNSIGNED_SHORT_5_5_5_1;if(i===AA)return n.UNSIGNED_INT_5_9_9_9_REV;if(i===EA)return n.BYTE;if(i===CA)return n.SHORT;if(i===lf)return n.UNSIGNED_SHORT;if(i===mw)return n.INT;if(i===Ja)return n.UNSIGNED_INT;if(i===gs)return n.FLOAT;if(i===If)return n.HALF_FLOAT;if(i===MA)return n.ALPHA;if(i===IA)return n.RGB;if(i===Lr)return n.RGBA;if(i===PA)return n.LUMINANCE;if(i===RA)return n.LUMINANCE_ALPHA;if(i===Uu)return n.DEPTH_COMPONENT;if(i===Zu)return n.DEPTH_STENCIL;if(i===vw)return n.RED;if(i===Wg)return n.RED_INTEGER;if(i===NA)return n.RG;if(i===xw)return n.RG_INTEGER;if(i===_w)return n.RGBA_INTEGER;if(i===gm||i===ym||i===vm||i===xm)if(o===Gn)if(s=e.get("WEBGL_compressed_texture_s3tc_srgb"),s!==null){if(i===gm)return s.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(i===ym)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(i===vm)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(i===xm)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(s=e.get("WEBGL_compressed_texture_s3tc"),s!==null){if(i===gm)return s.COMPRESSED_RGB_S3TC_DXT1_EXT;if(i===ym)return s.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(i===vm)return s.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(i===xm)return s.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(i===B0||i===z0||i===H0||i===G0)if(s=e.get("WEBGL_compressed_texture_pvrtc"),s!==null){if(i===B0)return s.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(i===z0)return s.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(i===H0)return s.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(i===G0)return s.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(i===W0||i===q0||i===$0)if(s=e.get("WEBGL_compressed_texture_etc"),s!==null){if(i===W0||i===q0)return o===Gn?s.COMPRESSED_SRGB8_ETC2:s.COMPRESSED_RGB8_ETC2;if(i===$0)return o===Gn?s.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:s.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(i===X0||i===K0||i===Y0||i===J0||i===Q0||i===Z0||i===e_||i===t_||i===n_||i===i_||i===r_||i===s_||i===o_||i===a_)if(s=e.get("WEBGL_compressed_texture_astc"),s!==null){if(i===X0)return o===Gn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:s.COMPRESSED_RGBA_ASTC_4x4_KHR;if(i===K0)return o===Gn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:s.COMPRESSED_RGBA_ASTC_5x4_KHR;if(i===Y0)return o===Gn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:s.COMPRESSED_RGBA_ASTC_5x5_KHR;if(i===J0)return o===Gn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:s.COMPRESSED_RGBA_ASTC_6x5_KHR;if(i===Q0)return o===Gn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:s.COMPRESSED_RGBA_ASTC_6x6_KHR;if(i===Z0)return o===Gn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:s.COMPRESSED_RGBA_ASTC_8x5_KHR;if(i===e_)return o===Gn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:s.COMPRESSED_RGBA_ASTC_8x6_KHR;if(i===t_)return o===Gn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:s.COMPRESSED_RGBA_ASTC_8x8_KHR;if(i===n_)return o===Gn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:s.COMPRESSED_RGBA_ASTC_10x5_KHR;if(i===i_)return o===Gn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:s.COMPRESSED_RGBA_ASTC_10x6_KHR;if(i===r_)return o===Gn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:s.COMPRESSED_RGBA_ASTC_10x8_KHR;if(i===s_)return o===Gn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:s.COMPRESSED_RGBA_ASTC_10x10_KHR;if(i===o_)return o===Gn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:s.COMPRESSED_RGBA_ASTC_12x10_KHR;if(i===a_)return o===Gn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:s.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(i===_m||i===l_||i===c_)if(s=e.get("EXT_texture_compression_bptc"),s!==null){if(i===_m)return o===Gn?s.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:s.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(i===l_)return s.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(i===c_)return s.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}else return null;if(i===DA||i===u_||i===h_||i===d_)if(s=e.get("EXT_texture_compression_rgtc"),s!==null){if(i===_m)return s.COMPRESSED_RED_RGTC1_EXT;if(i===u_)return s.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(i===h_)return s.COMPRESSED_RED_GREEN_RGTC2_EXT;if(i===d_)return s.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return i===Qu?n.UNSIGNED_INT_24_8:n[i]!==void 0?n[i]:null}return{convert:t}}const SZ=`
void main() {

	gl_Position = vec4( position, 1.0 );

}`,TZ=`
uniform sampler2DArray depthColor;
uniform float depthWidth;
uniform float depthHeight;

void main() {

	vec2 coord = vec2( gl_FragCoord.x / depthWidth, gl_FragCoord.y / depthHeight );

	if ( coord.x >= 1.0 ) {

		gl_FragDepth = texture( depthColor, vec3( coord.x - 1.0, coord.y, 1 ) ).r;

	} else {

		gl_FragDepth = texture( depthColor, vec3( coord.x, coord.y, 0 ) ).r;

	}

}`;class EZ{constructor(){this.texture=null,this.mesh=null,this.depthNear=0,this.depthFar=0}init(e,t,i){if(this.texture===null){const r=new _i,s=e.properties.get(r);s.__webglTexture=t.texture,(t.depthNear!==i.depthNear||t.depthFar!==i.depthFar)&&(this.depthNear=t.depthNear,this.depthFar=t.depthFar),this.texture=r}}getMesh(e){if(this.texture!==null&&this.mesh===null){const t=e.cameras[0].viewport,i=new ko({vertexShader:SZ,fragmentShader:TZ,uniforms:{depthColor:{value:this.texture},depthWidth:{value:t.z},depthHeight:{value:t.w}}});this.mesh=new Vi(new Nf(20,20),i)}return this.mesh}reset(){this.texture=null,this.mesh=null}getDepthTexture(){return this.texture}}class CZ extends da{constructor(e,t){super();const i=this;let r=null,s=1,o=null,a="local-floor",l=1,c=null,u=null,f=null,m=null,g=null,x=null;const b=new EZ,w=t.getContextAttributes();let v=null,S=null;const E=[],I=[],U=new Le;let O=null;const C=new Ui;C.viewport=new Rn;const P=new Ui;P.viewport=new Rn;const M=[C,P],A=new IV;let D=null,B=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(le){let xe=E[le];return xe===void 0&&(xe=new zx,E[le]=xe),xe.getTargetRaySpace()},this.getControllerGrip=function(le){let xe=E[le];return xe===void 0&&(xe=new zx,E[le]=xe),xe.getGripSpace()},this.getHand=function(le){let xe=E[le];return xe===void 0&&(xe=new zx,E[le]=xe),xe.getHandSpace()};function j(le){const xe=I.indexOf(le.inputSource);if(xe===-1)return;const Pe=E[xe];Pe!==void 0&&(Pe.update(le.inputSource,le.frame,c||o),Pe.dispatchEvent({type:le.type,data:le.inputSource}))}function te(){r.removeEventListener("select",j),r.removeEventListener("selectstart",j),r.removeEventListener("selectend",j),r.removeEventListener("squeeze",j),r.removeEventListener("squeezestart",j),r.removeEventListener("squeezeend",j),r.removeEventListener("end",te),r.removeEventListener("inputsourceschange",ce);for(let le=0;le<E.length;le++){const xe=I[le];xe!==null&&(I[le]=null,E[le].disconnect(xe))}D=null,B=null,b.reset(),e.setRenderTarget(v),g=null,m=null,f=null,r=null,S=null,ye.stop(),i.isPresenting=!1,e.setPixelRatio(O),e.setSize(U.width,U.height,!1),i.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(le){s=le,i.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(le){a=le,i.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return c||o},this.setReferenceSpace=function(le){c=le},this.getBaseLayer=function(){return m!==null?m:g},this.getBinding=function(){return f},this.getFrame=function(){return x},this.getSession=function(){return r},this.setSession=async function(le){if(r=le,r!==null){if(v=e.getRenderTarget(),r.addEventListener("select",j),r.addEventListener("selectstart",j),r.addEventListener("selectend",j),r.addEventListener("squeeze",j),r.addEventListener("squeezestart",j),r.addEventListener("squeezeend",j),r.addEventListener("end",te),r.addEventListener("inputsourceschange",ce),w.xrCompatible!==!0&&await t.makeXRCompatible(),O=e.getPixelRatio(),e.getSize(U),typeof XRWebGLBinding<"u"&&"createProjectionLayer"in XRWebGLBinding.prototype){let Pe=null,Me=null,gt=null;w.depth&&(gt=w.stencil?t.DEPTH24_STENCIL8:t.DEPTH_COMPONENT24,Pe=w.stencil?Zu:Uu,Me=w.stencil?Qu:Ja);const Kt={colorFormat:t.RGBA8,depthFormat:gt,scaleFactor:s};f=new XRWebGLBinding(r,t),m=f.createProjectionLayer(Kt),r.updateRenderState({layers:[m]}),e.setPixelRatio(1),e.setSize(m.textureWidth,m.textureHeight,!1),S=new ua(m.textureWidth,m.textureHeight,{format:Lr,type:Lo,depthTexture:new GA(m.textureWidth,m.textureHeight,Me,void 0,void 0,void 0,void 0,void 0,void 0,Pe),stencilBuffer:w.stencil,colorSpace:e.outputColorSpace,samples:w.antialias?4:0,resolveDepthBuffer:m.ignoreDepthValues===!1,resolveStencilBuffer:m.ignoreDepthValues===!1})}else{const Pe={antialias:w.antialias,alpha:!0,depth:w.depth,stencil:w.stencil,framebufferScaleFactor:s};g=new XRWebGLLayer(r,t,Pe),r.updateRenderState({baseLayer:g}),e.setPixelRatio(1),e.setSize(g.framebufferWidth,g.framebufferHeight,!1),S=new ua(g.framebufferWidth,g.framebufferHeight,{format:Lr,type:Lo,colorSpace:e.outputColorSpace,stencilBuffer:w.stencil,resolveDepthBuffer:g.ignoreDepthValues===!1,resolveStencilBuffer:g.ignoreDepthValues===!1})}S.isXRRenderTarget=!0,this.setFoveation(l),c=null,o=await r.requestReferenceSpace(a),ye.setContext(r),ye.start(),i.isPresenting=!0,i.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(r!==null)return r.environmentBlendMode},this.getDepthTexture=function(){return b.getDepthTexture()};function ce(le){for(let xe=0;xe<le.removed.length;xe++){const Pe=le.removed[xe],Me=I.indexOf(Pe);Me>=0&&(I[Me]=null,E[Me].disconnect(Pe))}for(let xe=0;xe<le.added.length;xe++){const Pe=le.added[xe];let Me=I.indexOf(Pe);if(Me===-1){for(let Kt=0;Kt<E.length;Kt++)if(Kt>=I.length){I.push(Pe),Me=Kt;break}else if(I[Kt]===null){I[Kt]=Pe,Me=Kt;break}if(Me===-1)break}const gt=E[Me];gt&&gt.connect(Pe)}}const pe=new K,de=new K;function W(le,xe,Pe){pe.setFromMatrixPosition(xe.matrixWorld),de.setFromMatrixPosition(Pe.matrixWorld);const Me=pe.distanceTo(de),gt=xe.projectionMatrix.elements,Kt=Pe.projectionMatrix.elements,Ye=gt[14]/(gt[10]-1),rt=gt[14]/(gt[10]+1),Ae=(gt[9]+1)/gt[5],Ee=(gt[9]-1)/gt[5],X=(gt[8]-1)/gt[0],pt=(Kt[8]+1)/Kt[0],Oe=Ye*X,tt=Ye*pt,Ve=Me/(-X+pt),Mt=Ve*-X;if(xe.matrixWorld.decompose(le.position,le.quaternion,le.scale),le.translateX(Mt),le.translateZ(Ve),le.matrixWorld.compose(le.position,le.quaternion,le.scale),le.matrixWorldInverse.copy(le.matrixWorld).invert(),gt[10]===-1)le.projectionMatrix.copy(xe.projectionMatrix),le.projectionMatrixInverse.copy(xe.projectionMatrixInverse);else{const Xe=Ye+Ve,$=rt+Ve,z=Oe-Mt,he=tt+(Me-Mt),Se=Ae*rt/$*Xe,Re=Ee*rt/$*Xe;le.projectionMatrix.makePerspective(z,he,Se,Re,Xe,$),le.projectionMatrixInverse.copy(le.projectionMatrix).invert()}}function Z(le,xe){xe===null?le.matrixWorld.copy(le.matrix):le.matrixWorld.multiplyMatrices(xe.matrixWorld,le.matrix),le.matrixWorldInverse.copy(le.matrixWorld).invert()}this.updateCamera=function(le){if(r===null)return;let xe=le.near,Pe=le.far;b.texture!==null&&(b.depthNear>0&&(xe=b.depthNear),b.depthFar>0&&(Pe=b.depthFar)),A.near=P.near=C.near=xe,A.far=P.far=C.far=Pe,(D!==A.near||B!==A.far)&&(r.updateRenderState({depthNear:A.near,depthFar:A.far}),D=A.near,B=A.far),C.layers.mask=le.layers.mask|2,P.layers.mask=le.layers.mask|4,A.layers.mask=C.layers.mask|P.layers.mask;const Me=le.parent,gt=A.cameras;Z(A,Me);for(let Kt=0;Kt<gt.length;Kt++)Z(gt[Kt],Me);gt.length===2?W(A,C,P):A.projectionMatrix.copy(C.projectionMatrix),F(le,A,Me)};function F(le,xe,Pe){Pe===null?le.matrix.copy(xe.matrixWorld):(le.matrix.copy(Pe.matrixWorld),le.matrix.invert(),le.matrix.multiply(xe.matrixWorld)),le.matrix.decompose(le.position,le.quaternion,le.scale),le.updateMatrixWorld(!0),le.projectionMatrix.copy(xe.projectionMatrix),le.projectionMatrixInverse.copy(xe.projectionMatrixInverse),le.isPerspectiveCamera&&(le.fov=cf*2*Math.atan(1/le.projectionMatrix.elements[5]),le.zoom=1)}this.getCamera=function(){return A},this.getFoveation=function(){if(!(m===null&&g===null))return l},this.setFoveation=function(le){l=le,m!==null&&(m.fixedFoveation=le),g!==null&&g.fixedFoveation!==void 0&&(g.fixedFoveation=le)},this.hasDepthSensing=function(){return b.texture!==null},this.getDepthSensingMesh=function(){return b.getMesh(A)};let J=null;function ue(le,xe){if(u=xe.getViewerPose(c||o),x=xe,u!==null){const Pe=u.views;g!==null&&(e.setRenderTargetFramebuffer(S,g.framebuffer),e.setRenderTarget(S));let Me=!1;Pe.length!==A.cameras.length&&(A.cameras.length=0,Me=!0);for(let Ye=0;Ye<Pe.length;Ye++){const rt=Pe[Ye];let Ae=null;if(g!==null)Ae=g.getViewport(rt);else{const X=f.getViewSubImage(m,rt);Ae=X.viewport,Ye===0&&(e.setRenderTargetTextures(S,X.colorTexture,m.ignoreDepthValues?void 0:X.depthStencilTexture),e.setRenderTarget(S))}let Ee=M[Ye];Ee===void 0&&(Ee=new Ui,Ee.layers.enable(Ye),Ee.viewport=new Rn,M[Ye]=Ee),Ee.matrix.fromArray(rt.transform.matrix),Ee.matrix.decompose(Ee.position,Ee.quaternion,Ee.scale),Ee.projectionMatrix.fromArray(rt.projectionMatrix),Ee.projectionMatrixInverse.copy(Ee.projectionMatrix).invert(),Ee.viewport.set(Ae.x,Ae.y,Ae.width,Ae.height),Ye===0&&(A.matrix.copy(Ee.matrix),A.matrix.decompose(A.position,A.quaternion,A.scale)),Me===!0&&A.cameras.push(Ee)}const gt=r.enabledFeatures;if(gt&&gt.includes("depth-sensing")&&r.depthUsage=="gpu-optimized"&&f){const Ye=f.getDepthInformation(Pe[0]);Ye&&Ye.isValid&&Ye.texture&&b.init(e,Ye,r.renderState)}}for(let Pe=0;Pe<E.length;Pe++){const Me=I[Pe],gt=E[Pe];Me!==null&&gt!==void 0&&gt.update(Me,xe,c||o)}J&&J(le,xe),xe.detectedPlanes&&i.dispatchEvent({type:"planesdetected",data:xe}),x=null}const ye=new kV;ye.setAnimationLoop(ue),this.setAnimationLoop=function(le){J=le},this.dispose=function(){}}}const hu=new zs,AZ=new Vt;function MZ(n,e){function t(w,v){w.matrixAutoUpdate===!0&&w.updateMatrix(),v.value.copy(w.matrix)}function i(w,v){v.color.getRGB(w.fogColor.value,Fj(n)),v.isFog?(w.fogNear.value=v.near,w.fogFar.value=v.far):v.isFogExp2&&(w.fogDensity.value=v.density)}function r(w,v,S,E,I){v.isMeshBasicMaterial||v.isMeshLambertMaterial?s(w,v):v.isMeshToonMaterial?(s(w,v),f(w,v)):v.isMeshPhongMaterial?(s(w,v),u(w,v)):v.isMeshStandardMaterial?(s(w,v),m(w,v),v.isMeshPhysicalMaterial&&g(w,v,I)):v.isMeshMatcapMaterial?(s(w,v),x(w,v)):v.isMeshDepthMaterial?s(w,v):v.isMeshDistanceMaterial?(s(w,v),b(w,v)):v.isMeshNormalMaterial?s(w,v):v.isLineBasicMaterial?(o(w,v),v.isLineDashedMaterial&&a(w,v)):v.isPointsMaterial?l(w,v,S,E):v.isSpriteMaterial?c(w,v):v.isShadowMaterial?(w.color.value.copy(v.color),w.opacity.value=v.opacity):v.isShaderMaterial&&(v.uniformsNeedUpdate=!1)}function s(w,v){w.opacity.value=v.opacity,v.color&&w.diffuse.value.copy(v.color),v.emissive&&w.emissive.value.copy(v.emissive).multiplyScalar(v.emissiveIntensity),v.map&&(w.map.value=v.map,t(v.map,w.mapTransform)),v.alphaMap&&(w.alphaMap.value=v.alphaMap,t(v.alphaMap,w.alphaMapTransform)),v.bumpMap&&(w.bumpMap.value=v.bumpMap,t(v.bumpMap,w.bumpMapTransform),w.bumpScale.value=v.bumpScale,v.side===Jr&&(w.bumpScale.value*=-1)),v.normalMap&&(w.normalMap.value=v.normalMap,t(v.normalMap,w.normalMapTransform),w.normalScale.value.copy(v.normalScale),v.side===Jr&&w.normalScale.value.negate()),v.displacementMap&&(w.displacementMap.value=v.displacementMap,t(v.displacementMap,w.displacementMapTransform),w.displacementScale.value=v.displacementScale,w.displacementBias.value=v.displacementBias),v.emissiveMap&&(w.emissiveMap.value=v.emissiveMap,t(v.emissiveMap,w.emissiveMapTransform)),v.specularMap&&(w.specularMap.value=v.specularMap,t(v.specularMap,w.specularMapTransform)),v.alphaTest>0&&(w.alphaTest.value=v.alphaTest);const S=e.get(v),E=S.envMap,I=S.envMapRotation;E&&(w.envMap.value=E,hu.copy(I),hu.x*=-1,hu.y*=-1,hu.z*=-1,E.isCubeTexture&&E.isRenderTargetTexture===!1&&(hu.y*=-1,hu.z*=-1),w.envMapRotation.value.setFromMatrix4(AZ.makeRotationFromEuler(hu)),w.flipEnvMap.value=E.isCubeTexture&&E.isRenderTargetTexture===!1?-1:1,w.reflectivity.value=v.reflectivity,w.ior.value=v.ior,w.refractionRatio.value=v.refractionRatio),v.lightMap&&(w.lightMap.value=v.lightMap,w.lightMapIntensity.value=v.lightMapIntensity,t(v.lightMap,w.lightMapTransform)),v.aoMap&&(w.aoMap.value=v.aoMap,w.aoMapIntensity.value=v.aoMapIntensity,t(v.aoMap,w.aoMapTransform))}function o(w,v){w.diffuse.value.copy(v.color),w.opacity.value=v.opacity,v.map&&(w.map.value=v.map,t(v.map,w.mapTransform))}function a(w,v){w.dashSize.value=v.dashSize,w.totalSize.value=v.dashSize+v.gapSize,w.scale.value=v.scale}function l(w,v,S,E){w.diffuse.value.copy(v.color),w.opacity.value=v.opacity,w.size.value=v.size*S,w.scale.value=E*.5,v.map&&(w.map.value=v.map,t(v.map,w.uvTransform)),v.alphaMap&&(w.alphaMap.value=v.alphaMap,t(v.alphaMap,w.alphaMapTransform)),v.alphaTest>0&&(w.alphaTest.value=v.alphaTest)}function c(w,v){w.diffuse.value.copy(v.color),w.opacity.value=v.opacity,w.rotation.value=v.rotation,v.map&&(w.map.value=v.map,t(v.map,w.mapTransform)),v.alphaMap&&(w.alphaMap.value=v.alphaMap,t(v.alphaMap,w.alphaMapTransform)),v.alphaTest>0&&(w.alphaTest.value=v.alphaTest)}function u(w,v){w.specular.value.copy(v.specular),w.shininess.value=Math.max(v.shininess,1e-4)}function f(w,v){v.gradientMap&&(w.gradientMap.value=v.gradientMap)}function m(w,v){w.metalness.value=v.metalness,v.metalnessMap&&(w.metalnessMap.value=v.metalnessMap,t(v.metalnessMap,w.metalnessMapTransform)),w.roughness.value=v.roughness,v.roughnessMap&&(w.roughnessMap.value=v.roughnessMap,t(v.roughnessMap,w.roughnessMapTransform)),v.envMap&&(w.envMapIntensity.value=v.envMapIntensity)}function g(w,v,S){w.ior.value=v.ior,v.sheen>0&&(w.sheenColor.value.copy(v.sheenColor).multiplyScalar(v.sheen),w.sheenRoughness.value=v.sheenRoughness,v.sheenColorMap&&(w.sheenColorMap.value=v.sheenColorMap,t(v.sheenColorMap,w.sheenColorMapTransform)),v.sheenRoughnessMap&&(w.sheenRoughnessMap.value=v.sheenRoughnessMap,t(v.sheenRoughnessMap,w.sheenRoughnessMapTransform))),v.clearcoat>0&&(w.clearcoat.value=v.clearcoat,w.clearcoatRoughness.value=v.clearcoatRoughness,v.clearcoatMap&&(w.clearcoatMap.value=v.clearcoatMap,t(v.clearcoatMap,w.clearcoatMapTransform)),v.clearcoatRoughnessMap&&(w.clearcoatRoughnessMap.value=v.clearcoatRoughnessMap,t(v.clearcoatRoughnessMap,w.clearcoatRoughnessMapTransform)),v.clearcoatNormalMap&&(w.clearcoatNormalMap.value=v.clearcoatNormalMap,t(v.clearcoatNormalMap,w.clearcoatNormalMapTransform),w.clearcoatNormalScale.value.copy(v.clearcoatNormalScale),v.side===Jr&&w.clearcoatNormalScale.value.negate())),v.dispersion>0&&(w.dispersion.value=v.dispersion),v.iridescence>0&&(w.iridescence.value=v.iridescence,w.iridescenceIOR.value=v.iridescenceIOR,w.iridescenceThicknessMinimum.value=v.iridescenceThicknessRange[0],w.iridescenceThicknessMaximum.value=v.iridescenceThicknessRange[1],v.iridescenceMap&&(w.iridescenceMap.value=v.iridescenceMap,t(v.iridescenceMap,w.iridescenceMapTransform)),v.iridescenceThicknessMap&&(w.iridescenceThicknessMap.value=v.iridescenceThicknessMap,t(v.iridescenceThicknessMap,w.iridescenceThicknessMapTransform))),v.transmission>0&&(w.transmission.value=v.transmission,w.transmissionSamplerMap.value=S.texture,w.transmissionSamplerSize.value.set(S.width,S.height),v.transmissionMap&&(w.transmissionMap.value=v.transmissionMap,t(v.transmissionMap,w.transmissionMapTransform)),w.thickness.value=v.thickness,v.thicknessMap&&(w.thicknessMap.value=v.thicknessMap,t(v.thicknessMap,w.thicknessMapTransform)),w.attenuationDistance.value=v.attenuationDistance,w.attenuationColor.value.copy(v.attenuationColor)),v.anisotropy>0&&(w.anisotropyVector.value.set(v.anisotropy*Math.cos(v.anisotropyRotation),v.anisotropy*Math.sin(v.anisotropyRotation)),v.anisotropyMap&&(w.anisotropyMap.value=v.anisotropyMap,t(v.anisotropyMap,w.anisotropyMapTransform))),w.specularIntensity.value=v.specularIntensity,w.specularColor.value.copy(v.specularColor),v.specularColorMap&&(w.specularColorMap.value=v.specularColorMap,t(v.specularColorMap,w.specularColorMapTransform)),v.specularIntensityMap&&(w.specularIntensityMap.value=v.specularIntensityMap,t(v.specularIntensityMap,w.specularIntensityMapTransform))}function x(w,v){v.matcap&&(w.matcap.value=v.matcap)}function b(w,v){const S=e.get(v).light;w.referencePosition.value.setFromMatrixPosition(S.matrixWorld),w.nearDistance.value=S.shadow.camera.near,w.farDistance.value=S.shadow.camera.far}return{refreshFogUniforms:i,refreshMaterialUniforms:r}}function IZ(n,e,t,i){let r={},s={},o=[];const a=n.getParameter(n.MAX_UNIFORM_BUFFER_BINDINGS);function l(S,E){const I=E.program;i.uniformBlockBinding(S,I)}function c(S,E){let I=r[S.id];I===void 0&&(x(S),I=u(S),r[S.id]=I,S.addEventListener("dispose",w));const U=E.program;i.updateUBOMapping(S,U);const O=e.render.frame;s[S.id]!==O&&(m(S),s[S.id]=O)}function u(S){const E=f();S.__bindingPointIndex=E;const I=n.createBuffer(),U=S.__size,O=S.usage;return n.bindBuffer(n.UNIFORM_BUFFER,I),n.bufferData(n.UNIFORM_BUFFER,U,O),n.bindBuffer(n.UNIFORM_BUFFER,null),n.bindBufferBase(n.UNIFORM_BUFFER,E,I),I}function f(){for(let S=0;S<a;S++)if(o.indexOf(S)===-1)return o.push(S),S;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function m(S){const E=r[S.id],I=S.uniforms,U=S.__cache;n.bindBuffer(n.UNIFORM_BUFFER,E);for(let O=0,C=I.length;O<C;O++){const P=Array.isArray(I[O])?I[O]:[I[O]];for(let M=0,A=P.length;M<A;M++){const D=P[M];if(g(D,O,M,U)===!0){const B=D.__offset,j=Array.isArray(D.value)?D.value:[D.value];let te=0;for(let ce=0;ce<j.length;ce++){const pe=j[ce],de=b(pe);typeof pe=="number"||typeof pe=="boolean"?(D.__data[0]=pe,n.bufferSubData(n.UNIFORM_BUFFER,B+te,D.__data)):pe.isMatrix3?(D.__data[0]=pe.elements[0],D.__data[1]=pe.elements[1],D.__data[2]=pe.elements[2],D.__data[3]=0,D.__data[4]=pe.elements[3],D.__data[5]=pe.elements[4],D.__data[6]=pe.elements[5],D.__data[7]=0,D.__data[8]=pe.elements[6],D.__data[9]=pe.elements[7],D.__data[10]=pe.elements[8],D.__data[11]=0):(pe.toArray(D.__data,te),te+=de.storage/Float32Array.BYTES_PER_ELEMENT)}n.bufferSubData(n.UNIFORM_BUFFER,B,D.__data)}}}n.bindBuffer(n.UNIFORM_BUFFER,null)}function g(S,E,I,U){const O=S.value,C=E+"_"+I;if(U[C]===void 0)return typeof O=="number"||typeof O=="boolean"?U[C]=O:U[C]=O.clone(),!0;{const P=U[C];if(typeof O=="number"||typeof O=="boolean"){if(P!==O)return U[C]=O,!0}else if(P.equals(O)===!1)return P.copy(O),!0}return!1}function x(S){const E=S.uniforms;let I=0;const U=16;for(let C=0,P=E.length;C<P;C++){const M=Array.isArray(E[C])?E[C]:[E[C]];for(let A=0,D=M.length;A<D;A++){const B=M[A],j=Array.isArray(B.value)?B.value:[B.value];for(let te=0,ce=j.length;te<ce;te++){const pe=j[te],de=b(pe),W=I%U,Z=W%de.boundary,F=W+Z;I+=Z,F!==0&&U-F<de.storage&&(I+=U-F),B.__data=new Float32Array(de.storage/Float32Array.BYTES_PER_ELEMENT),B.__offset=I,I+=de.storage}}}const O=I%U;return O>0&&(I+=U-O),S.__size=I,S.__cache={},this}function b(S){const E={boundary:0,storage:0};return typeof S=="number"||typeof S=="boolean"?(E.boundary=4,E.storage=4):S.isVector2?(E.boundary=8,E.storage=8):S.isVector3||S.isColor?(E.boundary=16,E.storage=12):S.isVector4?(E.boundary=16,E.storage=16):S.isMatrix3?(E.boundary=48,E.storage=48):S.isMatrix4?(E.boundary=64,E.storage=64):S.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",S),E}function w(S){const E=S.target;E.removeEventListener("dispose",w);const I=o.indexOf(E.__bindingPointIndex);o.splice(I,1),n.deleteBuffer(r[E.id]),delete r[E.id],delete s[E.id]}function v(){for(const S in r)n.deleteBuffer(r[S]);o=[],r={},s={}}return{bind:l,update:c,dispose:v}}class BV{constructor(e={}){const{canvas:t=kj(),context:i=null,depth:r=!0,stencil:s=!1,alpha:o=!1,antialias:a=!1,premultipliedAlpha:l=!0,preserveDrawingBuffer:c=!1,powerPreference:u="default",failIfMajorPerformanceCaveat:f=!1,reverseDepthBuffer:m=!1}=e;this.isWebGLRenderer=!0;let g;if(i!==null){if(typeof WebGLRenderingContext<"u"&&i instanceof WebGLRenderingContext)throw new Error("THREE.WebGLRenderer: WebGL 1 is not supported since r163.");g=i.getContextAttributes().alpha}else g=o;const x=new Uint32Array(4),b=new Int32Array(4);let w=null,v=null;const S=[],E=[];this.domElement=t,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this._outputColorSpace=us,this.toneMapping=ta,this.toneMappingExposure=1;const I=this;let U=!1,O=0,C=0,P=null,M=-1,A=null;const D=new Rn,B=new Rn;let j=null;const te=new xt(0);let ce=0,pe=t.width,de=t.height,W=1,Z=null,F=null;const J=new Rn(0,0,pe,de),ue=new Rn(0,0,pe,de);let ye=!1;const le=new Kg;let xe=!1,Pe=!1;this.transmissionResolutionScale=1;const Me=new Vt,gt=new Vt,Kt=new K,Ye=new Rn,rt={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};let Ae=!1;function Ee(){return P===null?W:1}let X=i;function pt(H,ne){return t.getContext(H,ne)}try{const H={alpha:!0,depth:r,stencil:s,antialias:a,premultipliedAlpha:l,preserveDrawingBuffer:c,powerPreference:u,failIfMajorPerformanceCaveat:f};if("setAttribute"in t&&t.setAttribute("data-engine",`three.js r${Hg}`),t.addEventListener("webglcontextlost",Ie,!1),t.addEventListener("webglcontextrestored",it,!1),t.addEventListener("webglcontextcreationerror",Ke,!1),X===null){const ne="webgl2";if(X=pt(ne,H),X===null)throw pt(ne)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}}catch(H){throw console.error("THREE.WebGLRenderer: "+H.message),H}let Oe,tt,Ve,Mt,Xe,$,z,he,Se,Re,we,He,Ge,Qe,Yt,Fe,lt,Ct,Lt,ut,an,Gt,wn,ee;function Ze(){Oe=new BJ(X),Oe.init(),Gt=new VV(X,Oe),tt=new LJ(X,Oe,e,Gt),Ve=new wZ(X,Oe),tt.reverseDepthBuffer&&m&&Ve.buffers.depth.setReversed(!0),Mt=new GJ(X),Xe=new lZ,$=new bZ(X,Oe,Ve,Xe,tt,Gt,Mt),z=new OJ(I),he=new VJ(I),Se=new YX(X),wn=new NJ(X,Se),Re=new zJ(X,Se,Mt,wn),we=new qJ(X,Re,Se,Mt),Lt=new WJ(X,tt,$),Fe=new kJ(Xe),He=new aZ(I,z,he,Oe,tt,wn,Fe),Ge=new MZ(I,Xe),Qe=new uZ,Yt=new gZ(Oe),Ct=new RJ(I,z,he,Ve,we,g,l),lt=new xZ(I,we,tt),ee=new IZ(X,Mt,tt,Ve),ut=new DJ(X,Oe,Mt),an=new HJ(X,Oe,Mt),Mt.programs=He.programs,I.capabilities=tt,I.extensions=Oe,I.properties=Xe,I.renderLists=Qe,I.shadowMap=lt,I.state=Ve,I.info=Mt}Ze();const be=new CZ(I,X);this.xr=be,this.getContext=function(){return X},this.getContextAttributes=function(){return X.getContextAttributes()},this.forceContextLoss=function(){const H=Oe.get("WEBGL_lose_context");H&&H.loseContext()},this.forceContextRestore=function(){const H=Oe.get("WEBGL_lose_context");H&&H.restoreContext()},this.getPixelRatio=function(){return W},this.setPixelRatio=function(H){H!==void 0&&(W=H,this.setSize(pe,de,!1))},this.getSize=function(H){return H.set(pe,de)},this.setSize=function(H,ne,me=!0){if(be.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}pe=H,de=ne,t.width=Math.floor(H*W),t.height=Math.floor(ne*W),me===!0&&(t.style.width=H+"px",t.style.height=ne+"px"),this.setViewport(0,0,H,ne)},this.getDrawingBufferSize=function(H){return H.set(pe*W,de*W).floor()},this.setDrawingBufferSize=function(H,ne,me){pe=H,de=ne,W=me,t.width=Math.floor(H*me),t.height=Math.floor(ne*me),this.setViewport(0,0,H,ne)},this.getCurrentViewport=function(H){return H.copy(D)},this.getViewport=function(H){return H.copy(J)},this.setViewport=function(H,ne,me,fe){H.isVector4?J.set(H.x,H.y,H.z,H.w):J.set(H,ne,me,fe),Ve.viewport(D.copy(J).multiplyScalar(W).round())},this.getScissor=function(H){return H.copy(ue)},this.setScissor=function(H,ne,me,fe){H.isVector4?ue.set(H.x,H.y,H.z,H.w):ue.set(H,ne,me,fe),Ve.scissor(B.copy(ue).multiplyScalar(W).round())},this.getScissorTest=function(){return ye},this.setScissorTest=function(H){Ve.setScissorTest(ye=H)},this.setOpaqueSort=function(H){Z=H},this.setTransparentSort=function(H){F=H},this.getClearColor=function(H){return H.copy(Ct.getClearColor())},this.setClearColor=function(){Ct.setClearColor(...arguments)},this.getClearAlpha=function(){return Ct.getClearAlpha()},this.setClearAlpha=function(){Ct.setClearAlpha(...arguments)},this.clear=function(H=!0,ne=!0,me=!0){let fe=0;if(H){let re=!1;if(P!==null){const Ue=P.texture.format;re=Ue===_w||Ue===xw||Ue===Wg}if(re){const Ue=P.texture.type,ze=Ue===Lo||Ue===Ja||Ue===lf||Ue===Qu||Ue===gw||Ue===yw,et=Ct.getClearColor(),st=Ct.getClearAlpha(),$e=et.r,nt=et.g,We=et.b;ze?(x[0]=$e,x[1]=nt,x[2]=We,x[3]=st,X.clearBufferuiv(X.COLOR,0,x)):(b[0]=$e,b[1]=nt,b[2]=We,b[3]=st,X.clearBufferiv(X.COLOR,0,b))}else fe|=X.COLOR_BUFFER_BIT}ne&&(fe|=X.DEPTH_BUFFER_BIT),me&&(fe|=X.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),X.clear(fe)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",Ie,!1),t.removeEventListener("webglcontextrestored",it,!1),t.removeEventListener("webglcontextcreationerror",Ke,!1),Ct.dispose(),Qe.dispose(),Yt.dispose(),Xe.dispose(),z.dispose(),he.dispose(),we.dispose(),wn.dispose(),ee.dispose(),He.dispose(),be.dispose(),be.removeEventListener("sessionstart",Q),be.removeEventListener("sessionend",se),ge.stop()};function Ie(H){H.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),U=!0}function it(){console.log("THREE.WebGLRenderer: Context Restored."),U=!1;const H=Mt.autoReset,ne=lt.enabled,me=lt.autoUpdate,fe=lt.needsUpdate,re=lt.type;Ze(),Mt.autoReset=H,lt.enabled=ne,lt.autoUpdate=me,lt.needsUpdate=fe,lt.type=re}function Ke(H){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",H.statusMessage)}function Ft(H){const ne=H.target;ne.removeEventListener("dispose",Ft),kn(ne)}function kn(H){Xn(H),Xe.remove(H)}function Xn(H){const ne=Xe.get(H).programs;ne!==void 0&&(ne.forEach(function(me){He.releaseProgram(me)}),H.isShaderMaterial&&He.releaseShaderCache(H))}this.renderBufferDirect=function(H,ne,me,fe,re,Ue){ne===null&&(ne=rt);const ze=re.isMesh&&re.matrixWorld.determinant()<0,et=Ot(H,ne,me,fe,re);Ve.setMaterial(fe,ze);let st=me.index,$e=1;if(fe.wireframe===!0){if(st=Re.getWireframeAttribute(me),st===void 0)return;$e=2}const nt=me.drawRange,We=me.attributes.position;let vt=nt.start*$e,Et=(nt.start+nt.count)*$e;Ue!==null&&(vt=Math.max(vt,Ue.start*$e),Et=Math.min(Et,(Ue.start+Ue.count)*$e)),st!==null?(vt=Math.max(vt,0),Et=Math.min(Et,st.count)):We!=null&&(vt=Math.max(vt,0),Et=Math.min(Et,We.count));const zt=Et-vt;if(zt<0||zt===1/0)return;wn.setup(re,fe,et,me,st);let en,$t=ut;if(st!==null&&(en=Se.get(st),$t=an,$t.setIndex(en)),re.isMesh)fe.wireframe===!0?(Ve.setLineWidth(fe.wireframeLinewidth*Ee()),$t.setMode(X.LINES)):$t.setMode(X.TRIANGLES);else if(re.isLine){let It=fe.linewidth;It===void 0&&(It=1),Ve.setLineWidth(It*Ee()),re.isLineSegments?$t.setMode(X.LINES):re.isLineLoop?$t.setMode(X.LINE_LOOP):$t.setMode(X.LINE_STRIP)}else re.isPoints?$t.setMode(X.POINTS):re.isSprite&&$t.setMode(X.TRIANGLES);if(re.isBatchedMesh)if(re._multiDrawInstances!==null)yu("THREE.WebGLRenderer: renderMultiDrawInstances has been deprecated and will be removed in r184. Append to renderMultiDraw arguments and use indirection."),$t.renderMultiDrawInstances(re._multiDrawStarts,re._multiDrawCounts,re._multiDrawCount,re._multiDrawInstances);else if(Oe.get("WEBGL_multi_draw"))$t.renderMultiDraw(re._multiDrawStarts,re._multiDrawCounts,re._multiDrawCount);else{const It=re._multiDrawStarts,En=re._multiDrawCounts,pn=re._multiDrawCount,or=st?Se.get(st).bytesPerElement:1,po=Xe.get(fe).currentProgram.getUniforms();for(let Jn=0;Jn<pn;Jn++)po.setValue(X,"_gl_DrawID",Jn),$t.render(It[Jn]/or,En[Jn])}else if(re.isInstancedMesh)$t.renderInstances(vt,zt,re.count);else if(me.isInstancedBufferGeometry){const It=me._maxInstanceCount!==void 0?me._maxInstanceCount:1/0,En=Math.min(me.instanceCount,It);$t.renderInstances(vt,zt,En)}else $t.render(vt,zt)};function Zt(H,ne,me){H.transparent===!0&&H.side===Mo&&H.forceSinglePass===!1?(H.side=Jr,H.needsUpdate=!0,ht(H,ne,me),H.side=Ka,H.needsUpdate=!0,ht(H,ne,me),H.side=Mo):ht(H,ne,me)}this.compile=function(H,ne,me=null){me===null&&(me=H),v=Yt.get(me),v.init(ne),E.push(v),me.traverseVisible(function(re){re.isLight&&re.layers.test(ne.layers)&&(v.pushLight(re),re.castShadow&&v.pushShadow(re))}),H!==me&&H.traverseVisible(function(re){re.isLight&&re.layers.test(ne.layers)&&(v.pushLight(re),re.castShadow&&v.pushShadow(re))}),v.setupLights();const fe=new Set;return H.traverse(function(re){if(!(re.isMesh||re.isPoints||re.isLine||re.isSprite))return;const Ue=re.material;if(Ue)if(Array.isArray(Ue))for(let ze=0;ze<Ue.length;ze++){const et=Ue[ze];Zt(et,me,re),fe.add(et)}else Zt(Ue,me,re),fe.add(Ue)}),v=E.pop(),fe},this.compileAsync=function(H,ne,me=null){const fe=this.compile(H,ne,me);return new Promise(re=>{function Ue(){if(fe.forEach(function(ze){Xe.get(ze).currentProgram.isReady()&&fe.delete(ze)}),fe.size===0){re(H);return}setTimeout(Ue,10)}Oe.get("KHR_parallel_shader_compile")!==null?Ue():setTimeout(Ue,10)})};let zi=null;function Hn(H){zi&&zi(H)}function Q(){ge.stop()}function se(){ge.start()}const ge=new kV;ge.setAnimationLoop(Hn),typeof self<"u"&&ge.setContext(self),this.setAnimationLoop=function(H){zi=H,be.setAnimationLoop(H),H===null?ge.stop():ge.start()},be.addEventListener("sessionstart",Q),be.addEventListener("sessionend",se),this.render=function(H,ne){if(ne!==void 0&&ne.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(U===!0)return;if(H.matrixWorldAutoUpdate===!0&&H.updateMatrixWorld(),ne.parent===null&&ne.matrixWorldAutoUpdate===!0&&ne.updateMatrixWorld(),be.enabled===!0&&be.isPresenting===!0&&(be.cameraAutoUpdate===!0&&be.updateCamera(ne),ne=be.getCamera()),H.isScene===!0&&H.onBeforeRender(I,H,ne,P),v=Yt.get(H,E.length),v.init(ne),E.push(v),gt.multiplyMatrices(ne.projectionMatrix,ne.matrixWorldInverse),le.setFromProjectionMatrix(gt),Pe=this.localClippingEnabled,xe=Fe.init(this.clippingPlanes,Pe),w=Qe.get(H,S.length),w.init(),S.push(w),be.enabled===!0&&be.isPresenting===!0){const Ue=I.xr.getDepthSensingMesh();Ue!==null&&ke(Ue,ne,-1/0,I.sortObjects)}ke(H,ne,0,I.sortObjects),w.finish(),I.sortObjects===!0&&w.sort(Z,F),Ae=be.enabled===!1||be.isPresenting===!1||be.hasDepthSensing()===!1,Ae&&Ct.addToRenderList(w,H),this.info.render.frame++,xe===!0&&Fe.beginShadows();const me=v.state.shadowsArray;lt.render(me,H,ne),xe===!0&&Fe.endShadows(),this.info.autoReset===!0&&this.info.reset();const fe=w.opaque,re=w.transmissive;if(v.setupLights(),ne.isArrayCamera){const Ue=ne.cameras;if(re.length>0)for(let ze=0,et=Ue.length;ze<et;ze++){const st=Ue[ze];mt(fe,re,H,st)}Ae&&Ct.render(H);for(let ze=0,et=Ue.length;ze<et;ze++){const st=Ue[ze];Je(w,H,st,st.viewport)}}else re.length>0&&mt(fe,re,H,ne),Ae&&Ct.render(H),Je(w,H,ne);P!==null&&C===0&&($.updateMultisampleRenderTarget(P),$.updateRenderTargetMipmap(P)),H.isScene===!0&&H.onAfterRender(I,H,ne),wn.resetDefaultState(),M=-1,A=null,E.pop(),E.length>0?(v=E[E.length-1],xe===!0&&Fe.setGlobalState(I.clippingPlanes,v.state.camera)):v=null,S.pop(),S.length>0?w=S[S.length-1]:w=null};function ke(H,ne,me,fe){if(H.visible===!1)return;if(H.layers.test(ne.layers)){if(H.isGroup)me=H.renderOrder;else if(H.isLOD)H.autoUpdate===!0&&H.update(ne);else if(H.isLight)v.pushLight(H),H.castShadow&&v.pushShadow(H);else if(H.isSprite){if(!H.frustumCulled||le.intersectsSprite(H)){fe&&Ye.setFromMatrixPosition(H.matrixWorld).applyMatrix4(gt);const ze=we.update(H),et=H.material;et.visible&&w.push(H,ze,et,me,Ye.z,null)}}else if((H.isMesh||H.isLine||H.isPoints)&&(!H.frustumCulled||le.intersectsObject(H))){const ze=we.update(H),et=H.material;if(fe&&(H.boundingSphere!==void 0?(H.boundingSphere===null&&H.computeBoundingSphere(),Ye.copy(H.boundingSphere.center)):(ze.boundingSphere===null&&ze.computeBoundingSphere(),Ye.copy(ze.boundingSphere.center)),Ye.applyMatrix4(H.matrixWorld).applyMatrix4(gt)),Array.isArray(et)){const st=ze.groups;for(let $e=0,nt=st.length;$e<nt;$e++){const We=st[$e],vt=et[We.materialIndex];vt&&vt.visible&&w.push(H,ze,vt,me,Ye.z,We)}}else et.visible&&w.push(H,ze,et,me,Ye.z,null)}}const Ue=H.children;for(let ze=0,et=Ue.length;ze<et;ze++)ke(Ue[ze],ne,me,fe)}function Je(H,ne,me,fe){const re=H.opaque,Ue=H.transmissive,ze=H.transparent;v.setupLightsView(me),xe===!0&&Fe.setGlobalState(I.clippingPlanes,me),fe&&Ve.viewport(D.copy(fe)),re.length>0&&Nt(re,ne,me),Ue.length>0&&Nt(Ue,ne,me),ze.length>0&&Nt(ze,ne,me),Ve.buffers.depth.setTest(!0),Ve.buffers.depth.setMask(!0),Ve.buffers.color.setMask(!0),Ve.setPolygonOffset(!1)}function mt(H,ne,me,fe){if((me.isScene===!0?me.overrideMaterial:null)!==null)return;v.state.transmissionRenderTarget[fe.id]===void 0&&(v.state.transmissionRenderTarget[fe.id]=new ua(1,1,{generateMipmaps:!0,type:Oe.has("EXT_color_buffer_half_float")||Oe.has("EXT_color_buffer_float")?If:Lo,minFilter:Yo,samples:4,stencilBuffer:s,resolveDepthBuffer:!1,resolveStencilBuffer:!1,colorSpace:An.workingColorSpace}));const Ue=v.state.transmissionRenderTarget[fe.id],ze=fe.viewport||D;Ue.setSize(ze.z*I.transmissionResolutionScale,ze.w*I.transmissionResolutionScale);const et=I.getRenderTarget();I.setRenderTarget(Ue),I.getClearColor(te),ce=I.getClearAlpha(),ce<1&&I.setClearColor(16777215,.5),I.clear(),Ae&&Ct.render(me);const st=I.toneMapping;I.toneMapping=ta;const $e=fe.viewport;if(fe.viewport!==void 0&&(fe.viewport=void 0),v.setupLightsView(fe),xe===!0&&Fe.setGlobalState(I.clippingPlanes,fe),Nt(H,me,fe),$.updateMultisampleRenderTarget(Ue),$.updateRenderTargetMipmap(Ue),Oe.has("WEBGL_multisampled_render_to_texture")===!1){let nt=!1;for(let We=0,vt=ne.length;We<vt;We++){const Et=ne[We],zt=Et.object,en=Et.geometry,$t=Et.material,It=Et.group;if($t.side===Mo&&zt.layers.test(fe.layers)){const En=$t.side;$t.side=Jr,$t.needsUpdate=!0,yt(zt,me,fe,en,$t,It),$t.side=En,$t.needsUpdate=!0,nt=!0}}nt===!0&&($.updateMultisampleRenderTarget(Ue),$.updateRenderTargetMipmap(Ue))}I.setRenderTarget(et),I.setClearColor(te,ce),$e!==void 0&&(fe.viewport=$e),I.toneMapping=st}function Nt(H,ne,me){const fe=ne.isScene===!0?ne.overrideMaterial:null;for(let re=0,Ue=H.length;re<Ue;re++){const ze=H[re],et=ze.object,st=ze.geometry,$e=fe===null?ze.material:fe,nt=ze.group;et.layers.test(me.layers)&&yt(et,ne,me,st,$e,nt)}}function yt(H,ne,me,fe,re,Ue){H.onBeforeRender(I,ne,me,fe,re,Ue),H.modelViewMatrix.multiplyMatrices(me.matrixWorldInverse,H.matrixWorld),H.normalMatrix.getNormalMatrix(H.modelViewMatrix),re.onBeforeRender(I,ne,me,fe,H,Ue),re.transparent===!0&&re.side===Mo&&re.forceSinglePass===!1?(re.side=Jr,re.needsUpdate=!0,I.renderBufferDirect(me,ne,fe,re,H,Ue),re.side=Ka,re.needsUpdate=!0,I.renderBufferDirect(me,ne,fe,re,H,Ue),re.side=Mo):I.renderBufferDirect(me,ne,fe,re,H,Ue),H.onAfterRender(I,ne,me,fe,re,Ue)}function ht(H,ne,me){ne.isScene!==!0&&(ne=rt);const fe=Xe.get(H),re=v.state.lights,Ue=v.state.shadowsArray,ze=re.state.version,et=He.getParameters(H,re.state,Ue,ne,me),st=He.getProgramCacheKey(et);let $e=fe.programs;fe.environment=H.isMeshStandardMaterial?ne.environment:null,fe.fog=ne.fog,fe.envMap=(H.isMeshStandardMaterial?he:z).get(H.envMap||fe.environment),fe.envMapRotation=fe.environment!==null&&H.envMap===null?ne.environmentRotation:H.envMapRotation,$e===void 0&&(H.addEventListener("dispose",Ft),$e=new Map,fe.programs=$e);let nt=$e.get(st);if(nt!==void 0){if(fe.currentProgram===nt&&fe.lightsStateVersion===ze)return bt(H,et),nt}else et.uniforms=He.getUniforms(H),H.onBeforeCompile(et,I),nt=He.acquireProgram(et,st),$e.set(st,nt),fe.uniforms=et.uniforms;const We=fe.uniforms;return(!H.isShaderMaterial&&!H.isRawShaderMaterial||H.clipping===!0)&&(We.clippingPlanes=Fe.uniform),bt(H,et),fe.needsLights=Zn(H),fe.lightsStateVersion=ze,fe.needsLights&&(We.ambientLightColor.value=re.state.ambient,We.lightProbe.value=re.state.probe,We.directionalLights.value=re.state.directional,We.directionalLightShadows.value=re.state.directionalShadow,We.spotLights.value=re.state.spot,We.spotLightShadows.value=re.state.spotShadow,We.rectAreaLights.value=re.state.rectArea,We.ltc_1.value=re.state.rectAreaLTC1,We.ltc_2.value=re.state.rectAreaLTC2,We.pointLights.value=re.state.point,We.pointLightShadows.value=re.state.pointShadow,We.hemisphereLights.value=re.state.hemi,We.directionalShadowMap.value=re.state.directionalShadowMap,We.directionalShadowMatrix.value=re.state.directionalShadowMatrix,We.spotShadowMap.value=re.state.spotShadowMap,We.spotLightMatrix.value=re.state.spotLightMatrix,We.spotLightMap.value=re.state.spotLightMap,We.pointShadowMap.value=re.state.pointShadowMap,We.pointShadowMatrix.value=re.state.pointShadowMatrix),fe.currentProgram=nt,fe.uniformsList=null,nt}function dt(H){if(H.uniformsList===null){const ne=H.currentProgram.getUniforms();H.uniformsList=Hx.seqWithValue(ne.seq,H.uniforms)}return H.uniformsList}function bt(H,ne){const me=Xe.get(H);me.outputColorSpace=ne.outputColorSpace,me.batching=ne.batching,me.batchingColor=ne.batchingColor,me.instancing=ne.instancing,me.instancingColor=ne.instancingColor,me.instancingMorph=ne.instancingMorph,me.skinning=ne.skinning,me.morphTargets=ne.morphTargets,me.morphNormals=ne.morphNormals,me.morphColors=ne.morphColors,me.morphTargetsCount=ne.morphTargetsCount,me.numClippingPlanes=ne.numClippingPlanes,me.numIntersection=ne.numClipIntersection,me.vertexAlphas=ne.vertexAlphas,me.vertexTangents=ne.vertexTangents,me.toneMapping=ne.toneMapping}function Ot(H,ne,me,fe,re){ne.isScene!==!0&&(ne=rt),$.resetTextureUnits();const Ue=ne.fog,ze=fe.isMeshStandardMaterial?ne.environment:null,et=P===null?I.outputColorSpace:P.isXRRenderTarget===!0?P.texture.colorSpace:eh,st=(fe.isMeshStandardMaterial?he:z).get(fe.envMap||ze),$e=fe.vertexColors===!0&&!!me.attributes.color&&me.attributes.color.itemSize===4,nt=!!me.attributes.tangent&&(!!fe.normalMap||fe.anisotropy>0),We=!!me.morphAttributes.position,vt=!!me.morphAttributes.normal,Et=!!me.morphAttributes.color;let zt=ta;fe.toneMapped&&(P===null||P.isXRRenderTarget===!0)&&(zt=I.toneMapping);const en=me.morphAttributes.position||me.morphAttributes.normal||me.morphAttributes.color,$t=en!==void 0?en.length:0,It=Xe.get(fe),En=v.state.lights;if(xe===!0&&(Pe===!0||H!==A)){const tn=H===A&&fe.id===M;Fe.setState(fe,H,tn)}let pn=!1;fe.version===It.__version?(It.needsLights&&It.lightsStateVersion!==En.state.version||It.outputColorSpace!==et||re.isBatchedMesh&&It.batching===!1||!re.isBatchedMesh&&It.batching===!0||re.isBatchedMesh&&It.batchingColor===!0&&re.colorTexture===null||re.isBatchedMesh&&It.batchingColor===!1&&re.colorTexture!==null||re.isInstancedMesh&&It.instancing===!1||!re.isInstancedMesh&&It.instancing===!0||re.isSkinnedMesh&&It.skinning===!1||!re.isSkinnedMesh&&It.skinning===!0||re.isInstancedMesh&&It.instancingColor===!0&&re.instanceColor===null||re.isInstancedMesh&&It.instancingColor===!1&&re.instanceColor!==null||re.isInstancedMesh&&It.instancingMorph===!0&&re.morphTexture===null||re.isInstancedMesh&&It.instancingMorph===!1&&re.morphTexture!==null||It.envMap!==st||fe.fog===!0&&It.fog!==Ue||It.numClippingPlanes!==void 0&&(It.numClippingPlanes!==Fe.numPlanes||It.numIntersection!==Fe.numIntersection)||It.vertexAlphas!==$e||It.vertexTangents!==nt||It.morphTargets!==We||It.morphNormals!==vt||It.morphColors!==Et||It.toneMapping!==zt||It.morphTargetsCount!==$t)&&(pn=!0):(pn=!0,It.__version=fe.version);let or=It.currentProgram;pn===!0&&(or=ht(fe,ne,re));let po=!1,Jn=!1,Qi=!1;const ln=or.getUniforms(),Hi=It.uniforms;if(Ve.useProgram(or.program)&&(po=!0,Jn=!0,Qi=!0),fe.id!==M&&(M=fe.id,Jn=!0),po||A!==H){Ve.buffers.depth.getReversed()?(Me.copy(H.projectionMatrix),vq(Me),xq(Me),ln.setValue(X,"projectionMatrix",Me)):ln.setValue(X,"projectionMatrix",H.projectionMatrix),ln.setValue(X,"viewMatrix",H.matrixWorldInverse);const si=ln.map.cameraPosition;si!==void 0&&si.setValue(X,Kt.setFromMatrixPosition(H.matrixWorld)),tt.logarithmicDepthBuffer&&ln.setValue(X,"logDepthBufFC",2/(Math.log(H.far+1)/Math.LN2)),(fe.isMeshPhongMaterial||fe.isMeshToonMaterial||fe.isMeshLambertMaterial||fe.isMeshBasicMaterial||fe.isMeshStandardMaterial||fe.isShaderMaterial)&&ln.setValue(X,"isOrthographic",H.isOrthographicCamera===!0),A!==H&&(A=H,Jn=!0,Qi=!0)}if(re.isSkinnedMesh){ln.setOptional(X,re,"bindMatrix"),ln.setOptional(X,re,"bindMatrixInverse");const tn=re.skeleton;tn&&(tn.boneTexture===null&&tn.computeBoneTexture(),ln.setValue(X,"boneTexture",tn.boneTexture,$))}re.isBatchedMesh&&(ln.setOptional(X,re,"batchingTexture"),ln.setValue(X,"batchingTexture",re._matricesTexture,$),ln.setOptional(X,re,"batchingIdTexture"),ln.setValue(X,"batchingIdTexture",re._indirectTexture,$),ln.setOptional(X,re,"batchingColorTexture"),re._colorsTexture!==null&&ln.setValue(X,"batchingColorTexture",re._colorsTexture,$));const ar=me.morphAttributes;if((ar.position!==void 0||ar.normal!==void 0||ar.color!==void 0)&&Lt.update(re,me,or),(Jn||It.receiveShadow!==re.receiveShadow)&&(It.receiveShadow=re.receiveShadow,ln.setValue(X,"receiveShadow",re.receiveShadow)),fe.isMeshGouraudMaterial&&fe.envMap!==null&&(Hi.envMap.value=st,Hi.flipEnvMap.value=st.isCubeTexture&&st.isRenderTargetTexture===!1?-1:1),fe.isMeshStandardMaterial&&fe.envMap===null&&ne.environment!==null&&(Hi.envMapIntensity.value=ne.environmentIntensity),Jn&&(ln.setValue(X,"toneMappingExposure",I.toneMappingExposure),It.needsLights&&Wt(Hi,Qi),Ue&&fe.fog===!0&&Ge.refreshFogUniforms(Hi,Ue),Ge.refreshMaterialUniforms(Hi,fe,W,de,v.state.transmissionRenderTarget[H.id]),Hx.upload(X,dt(It),Hi,$)),fe.isShaderMaterial&&fe.uniformsNeedUpdate===!0&&(Hx.upload(X,dt(It),Hi,$),fe.uniformsNeedUpdate=!1),fe.isSpriteMaterial&&ln.setValue(X,"center",re.center),ln.setValue(X,"modelViewMatrix",re.modelViewMatrix),ln.setValue(X,"normalMatrix",re.normalMatrix),ln.setValue(X,"modelMatrix",re.matrixWorld),fe.isShaderMaterial||fe.isRawShaderMaterial){const tn=fe.uniformsGroups;for(let si=0,ns=tn.length;si<ns;si++){const Gi=tn[si];ee.update(Gi,or),ee.bind(Gi,or)}}return or}function Wt(H,ne){H.ambientLightColor.needsUpdate=ne,H.lightProbe.needsUpdate=ne,H.directionalLights.needsUpdate=ne,H.directionalLightShadows.needsUpdate=ne,H.pointLights.needsUpdate=ne,H.pointLightShadows.needsUpdate=ne,H.spotLights.needsUpdate=ne,H.spotLightShadows.needsUpdate=ne,H.rectAreaLights.needsUpdate=ne,H.hemisphereLights.needsUpdate=ne}function Zn(H){return H.isMeshLambertMaterial||H.isMeshToonMaterial||H.isMeshPhongMaterial||H.isMeshStandardMaterial||H.isShadowMaterial||H.isShaderMaterial&&H.lights===!0}this.getActiveCubeFace=function(){return O},this.getActiveMipmapLevel=function(){return C},this.getRenderTarget=function(){return P},this.setRenderTargetTextures=function(H,ne,me){Xe.get(H.texture).__webglTexture=ne,Xe.get(H.depthTexture).__webglTexture=me;const fe=Xe.get(H);fe.__hasExternalTextures=!0,fe.__autoAllocateDepthBuffer=me===void 0,fe.__autoAllocateDepthBuffer||Oe.has("WEBGL_multisampled_render_to_texture")===!0&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),fe.__useRenderToTexture=!1)},this.setRenderTargetFramebuffer=function(H,ne){const me=Xe.get(H);me.__webglFramebuffer=ne,me.__useDefaultFramebuffer=ne===void 0};const Mn=X.createFramebuffer();this.setRenderTarget=function(H,ne=0,me=0){P=H,O=ne,C=me;let fe=!0,re=null,Ue=!1,ze=!1;if(H){const st=Xe.get(H);if(st.__useDefaultFramebuffer!==void 0)Ve.bindFramebuffer(X.FRAMEBUFFER,null),fe=!1;else if(st.__webglFramebuffer===void 0)$.setupRenderTarget(H);else if(st.__hasExternalTextures)$.rebindTextures(H,Xe.get(H.texture).__webglTexture,Xe.get(H.depthTexture).__webglTexture);else if(H.depthBuffer){const We=H.depthTexture;if(st.__boundDepthTexture!==We){if(We!==null&&Xe.has(We)&&(H.width!==We.image.width||H.height!==We.image.height))throw new Error("WebGLRenderTarget: Attached DepthTexture is initialized to the incorrect size.");$.setupDepthRenderbuffer(H)}}const $e=H.texture;($e.isData3DTexture||$e.isDataArrayTexture||$e.isCompressedArrayTexture)&&(ze=!0);const nt=Xe.get(H).__webglFramebuffer;H.isWebGLCubeRenderTarget?(Array.isArray(nt[ne])?re=nt[ne][me]:re=nt[ne],Ue=!0):H.samples>0&&$.useMultisampledRTT(H)===!1?re=Xe.get(H).__webglMultisampledFramebuffer:Array.isArray(nt)?re=nt[me]:re=nt,D.copy(H.viewport),B.copy(H.scissor),j=H.scissorTest}else D.copy(J).multiplyScalar(W).floor(),B.copy(ue).multiplyScalar(W).floor(),j=ye;if(me!==0&&(re=Mn),Ve.bindFramebuffer(X.FRAMEBUFFER,re)&&fe&&Ve.drawBuffers(H,re),Ve.viewport(D),Ve.scissor(B),Ve.setScissorTest(j),Ue){const st=Xe.get(H.texture);X.framebufferTexture2D(X.FRAMEBUFFER,X.COLOR_ATTACHMENT0,X.TEXTURE_CUBE_MAP_POSITIVE_X+ne,st.__webglTexture,me)}else if(ze){const st=Xe.get(H.texture),$e=ne;X.framebufferTextureLayer(X.FRAMEBUFFER,X.COLOR_ATTACHMENT0,st.__webglTexture,me,$e)}else if(H!==null&&me!==0){const st=Xe.get(H.texture);X.framebufferTexture2D(X.FRAMEBUFFER,X.COLOR_ATTACHMENT0,X.TEXTURE_2D,st.__webglTexture,me)}M=-1},this.readRenderTargetPixels=function(H,ne,me,fe,re,Ue,ze){if(!(H&&H.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let et=Xe.get(H).__webglFramebuffer;if(H.isWebGLCubeRenderTarget&&ze!==void 0&&(et=et[ze]),et){Ve.bindFramebuffer(X.FRAMEBUFFER,et);try{const st=H.texture,$e=st.format,nt=st.type;if(!tt.textureFormatReadable($e)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}if(!tt.textureTypeReadable(nt)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}ne>=0&&ne<=H.width-fe&&me>=0&&me<=H.height-re&&X.readPixels(ne,me,fe,re,Gt.convert($e),Gt.convert(nt),Ue)}finally{const st=P!==null?Xe.get(P).__webglFramebuffer:null;Ve.bindFramebuffer(X.FRAMEBUFFER,st)}}},this.readRenderTargetPixelsAsync=async function(H,ne,me,fe,re,Ue,ze){if(!(H&&H.isWebGLRenderTarget))throw new Error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let et=Xe.get(H).__webglFramebuffer;if(H.isWebGLCubeRenderTarget&&ze!==void 0&&(et=et[ze]),et){const st=H.texture,$e=st.format,nt=st.type;if(!tt.textureFormatReadable($e))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in RGBA or implementation defined format.");if(!tt.textureTypeReadable(nt))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in UnsignedByteType or implementation defined type.");if(ne>=0&&ne<=H.width-fe&&me>=0&&me<=H.height-re){Ve.bindFramebuffer(X.FRAMEBUFFER,et);const We=X.createBuffer();X.bindBuffer(X.PIXEL_PACK_BUFFER,We),X.bufferData(X.PIXEL_PACK_BUFFER,Ue.byteLength,X.STREAM_READ),X.readPixels(ne,me,fe,re,Gt.convert($e),Gt.convert(nt),0);const vt=P!==null?Xe.get(P).__webglFramebuffer:null;Ve.bindFramebuffer(X.FRAMEBUFFER,vt);const Et=X.fenceSync(X.SYNC_GPU_COMMANDS_COMPLETE,0);return X.flush(),await yq(X,Et,4),X.bindBuffer(X.PIXEL_PACK_BUFFER,We),X.getBufferSubData(X.PIXEL_PACK_BUFFER,0,Ue),X.deleteBuffer(We),X.deleteSync(Et),Ue}else throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: requested read bounds are out of range.")}},this.copyFramebufferToTexture=function(H,ne=null,me=0){H.isTexture!==!0&&(yu("WebGLRenderer: copyFramebufferToTexture function signature has changed."),ne=arguments[0]||null,H=arguments[1]);const fe=Math.pow(2,-me),re=Math.floor(H.image.width*fe),Ue=Math.floor(H.image.height*fe),ze=ne!==null?ne.x:0,et=ne!==null?ne.y:0;$.setTexture2D(H,0),X.copyTexSubImage2D(X.TEXTURE_2D,me,0,0,ze,et,re,Ue),Ve.unbindTexture()};const dn=X.createFramebuffer(),jn=X.createFramebuffer();this.copyTextureToTexture=function(H,ne,me=null,fe=null,re=0,Ue=null){H.isTexture!==!0&&(yu("WebGLRenderer: copyTextureToTexture function signature has changed."),fe=arguments[0]||null,H=arguments[1],ne=arguments[2],Ue=arguments[3]||0,me=null),Ue===null&&(re!==0?(yu("WebGLRenderer: copyTextureToTexture function signature has changed to support src and dst mipmap levels."),Ue=re,re=0):Ue=0);let ze,et,st,$e,nt,We,vt,Et,zt;const en=H.isCompressedTexture?H.mipmaps[Ue]:H.image;if(me!==null)ze=me.max.x-me.min.x,et=me.max.y-me.min.y,st=me.isBox3?me.max.z-me.min.z:1,$e=me.min.x,nt=me.min.y,We=me.isBox3?me.min.z:0;else{const ar=Math.pow(2,-re);ze=Math.floor(en.width*ar),et=Math.floor(en.height*ar),H.isDataArrayTexture?st=en.depth:H.isData3DTexture?st=Math.floor(en.depth*ar):st=1,$e=0,nt=0,We=0}fe!==null?(vt=fe.x,Et=fe.y,zt=fe.z):(vt=0,Et=0,zt=0);const $t=Gt.convert(ne.format),It=Gt.convert(ne.type);let En;ne.isData3DTexture?($.setTexture3D(ne,0),En=X.TEXTURE_3D):ne.isDataArrayTexture||ne.isCompressedArrayTexture?($.setTexture2DArray(ne,0),En=X.TEXTURE_2D_ARRAY):($.setTexture2D(ne,0),En=X.TEXTURE_2D),X.pixelStorei(X.UNPACK_FLIP_Y_WEBGL,ne.flipY),X.pixelStorei(X.UNPACK_PREMULTIPLY_ALPHA_WEBGL,ne.premultiplyAlpha),X.pixelStorei(X.UNPACK_ALIGNMENT,ne.unpackAlignment);const pn=X.getParameter(X.UNPACK_ROW_LENGTH),or=X.getParameter(X.UNPACK_IMAGE_HEIGHT),po=X.getParameter(X.UNPACK_SKIP_PIXELS),Jn=X.getParameter(X.UNPACK_SKIP_ROWS),Qi=X.getParameter(X.UNPACK_SKIP_IMAGES);X.pixelStorei(X.UNPACK_ROW_LENGTH,en.width),X.pixelStorei(X.UNPACK_IMAGE_HEIGHT,en.height),X.pixelStorei(X.UNPACK_SKIP_PIXELS,$e),X.pixelStorei(X.UNPACK_SKIP_ROWS,nt),X.pixelStorei(X.UNPACK_SKIP_IMAGES,We);const ln=H.isDataArrayTexture||H.isData3DTexture,Hi=ne.isDataArrayTexture||ne.isData3DTexture;if(H.isDepthTexture){const ar=Xe.get(H),tn=Xe.get(ne),si=Xe.get(ar.__renderTarget),ns=Xe.get(tn.__renderTarget);Ve.bindFramebuffer(X.READ_FRAMEBUFFER,si.__webglFramebuffer),Ve.bindFramebuffer(X.DRAW_FRAMEBUFFER,ns.__webglFramebuffer);for(let Gi=0;Gi<st;Gi++)ln&&(X.framebufferTextureLayer(X.READ_FRAMEBUFFER,X.COLOR_ATTACHMENT0,Xe.get(H).__webglTexture,re,We+Gi),X.framebufferTextureLayer(X.DRAW_FRAMEBUFFER,X.COLOR_ATTACHMENT0,Xe.get(ne).__webglTexture,Ue,zt+Gi)),X.blitFramebuffer($e,nt,ze,et,vt,Et,ze,et,X.DEPTH_BUFFER_BIT,X.NEAREST);Ve.bindFramebuffer(X.READ_FRAMEBUFFER,null),Ve.bindFramebuffer(X.DRAW_FRAMEBUFFER,null)}else if(re!==0||H.isRenderTargetTexture||Xe.has(H)){const ar=Xe.get(H),tn=Xe.get(ne);Ve.bindFramebuffer(X.READ_FRAMEBUFFER,dn),Ve.bindFramebuffer(X.DRAW_FRAMEBUFFER,jn);for(let si=0;si<st;si++)ln?X.framebufferTextureLayer(X.READ_FRAMEBUFFER,X.COLOR_ATTACHMENT0,ar.__webglTexture,re,We+si):X.framebufferTexture2D(X.READ_FRAMEBUFFER,X.COLOR_ATTACHMENT0,X.TEXTURE_2D,ar.__webglTexture,re),Hi?X.framebufferTextureLayer(X.DRAW_FRAMEBUFFER,X.COLOR_ATTACHMENT0,tn.__webglTexture,Ue,zt+si):X.framebufferTexture2D(X.DRAW_FRAMEBUFFER,X.COLOR_ATTACHMENT0,X.TEXTURE_2D,tn.__webglTexture,Ue),re!==0?X.blitFramebuffer($e,nt,ze,et,vt,Et,ze,et,X.COLOR_BUFFER_BIT,X.NEAREST):Hi?X.copyTexSubImage3D(En,Ue,vt,Et,zt+si,$e,nt,ze,et):X.copyTexSubImage2D(En,Ue,vt,Et,$e,nt,ze,et);Ve.bindFramebuffer(X.READ_FRAMEBUFFER,null),Ve.bindFramebuffer(X.DRAW_FRAMEBUFFER,null)}else Hi?H.isDataTexture||H.isData3DTexture?X.texSubImage3D(En,Ue,vt,Et,zt,ze,et,st,$t,It,en.data):ne.isCompressedArrayTexture?X.compressedTexSubImage3D(En,Ue,vt,Et,zt,ze,et,st,$t,en.data):X.texSubImage3D(En,Ue,vt,Et,zt,ze,et,st,$t,It,en):H.isDataTexture?X.texSubImage2D(X.TEXTURE_2D,Ue,vt,Et,ze,et,$t,It,en.data):H.isCompressedTexture?X.compressedTexSubImage2D(X.TEXTURE_2D,Ue,vt,Et,en.width,en.height,$t,en.data):X.texSubImage2D(X.TEXTURE_2D,Ue,vt,Et,ze,et,$t,It,en);X.pixelStorei(X.UNPACK_ROW_LENGTH,pn),X.pixelStorei(X.UNPACK_IMAGE_HEIGHT,or),X.pixelStorei(X.UNPACK_SKIP_PIXELS,po),X.pixelStorei(X.UNPACK_SKIP_ROWS,Jn),X.pixelStorei(X.UNPACK_SKIP_IMAGES,Qi),Ue===0&&ne.generateMipmaps&&X.generateMipmap(En),Ve.unbindTexture()},this.copyTextureToTexture3D=function(H,ne,me=null,fe=null,re=0){return H.isTexture!==!0&&(yu("WebGLRenderer: copyTextureToTexture3D function signature has changed."),me=arguments[0]||null,fe=arguments[1]||null,H=arguments[2],ne=arguments[3],re=arguments[4]||0),yu('WebGLRenderer: copyTextureToTexture3D function has been deprecated. Use "copyTextureToTexture" instead.'),this.copyTextureToTexture(H,ne,me,fe,re)},this.initRenderTarget=function(H){Xe.get(H).__webglFramebuffer===void 0&&$.setupRenderTarget(H)},this.initTexture=function(H){H.isCubeTexture?$.setTextureCube(H,0):H.isData3DTexture?$.setTexture3D(H,0):H.isDataArrayTexture||H.isCompressedArrayTexture?$.setTexture2DArray(H,0):$.setTexture2D(H,0),Ve.unbindTexture()},this.resetState=function(){O=0,C=0,P=null,Ve.reset(),wn.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return Io}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(e){this._outputColorSpace=e;const t=this.getContext();t.drawingBufferColorspace=An._getDrawingBufferColorSpace(e),t.unpackColorSpace=An._getUnpackColorSpace()}}const PZ=Object.freeze(Object.defineProperty({__proto__:null,ACESFilmicToneMapping:SA,AddEquation:Ol,AddOperation:fj,AdditiveAnimationBlendMode:LA,AdditiveBlending:c1,AgXToneMapping:vj,AlphaFormat:MA,AlwaysCompare:Dj,AlwaysDepth:k0,AlwaysStencilFunc:f1,AmbientLight:SV,AnimationAction:NV,AnimationClip:vg,AnimationLoader:H$,AnimationMixer:vX,AnimationObjectGroup:gX,AnimationUtils:j$,ArcCurve:Kj,ArrayCamera:IV,ArrowHelper:BX,AttachedBindMode:d1,Audio:PV,AudioAnalyser:oX,AudioContext:sM,AudioListener:iX,AudioLoader:eX,AxesHelper:zX,BackSide:Jr,BasicDepthPacking:Tj,BasicShadowMap:$F,BatchedMesh:Wj,Bone:HA,BooleanKeyframeTrack:fh,Box2:AX,Box3:Qr,Box3Helper:jX,BoxGeometry:dh,BoxHelper:FX,BufferAttribute:$n,BufferGeometry:un,BufferGeometryLoader:MV,ByteType:EA,Cache:Da,Camera:$g,CameraHelper:UX,CanvasTexture:c$,CapsuleGeometry:Rw,CatmullRomCurve3:Yj,CineonToneMapping:gj,CircleGeometry:Nw,ClampToEdgeWrapping:lo,Clock:oM,Color:xt,ColorKeyframeTrack:nM,ColorManagement:An,CompressedArrayTexture:a$,CompressedCubeTexture:l$,CompressedTexture:Iw,CompressedTextureLoader:G$,ConeGeometry:Dw,ConstantAlphaFactor:uj,ConstantColorFactor:lj,Controls:GX,CubeCamera:jA,CubeReflectionMapping:Ya,CubeRefractionMapping:cc,CubeTexture:Xg,CubeTextureLoader:W$,CubeUVReflectionMapping:Mf,CubicBezierCurve:qA,CubicBezierCurve3:Jj,CubicInterpolant:gV,CullFaceBack:l1,CullFaceFront:qF,CullFaceFrontBack:x7,CullFaceNone:WF,Curve:jo,CurvePath:Zj,CustomBlending:XF,CustomToneMapping:yj,CylinderGeometry:Rf,Cylindrical:CX,Data3DTexture:Sw,DataArrayTexture:qg,DataTexture:na,DataTextureLoader:q$,DataUtils:Lq,DecrementStencilOp:D7,DecrementWrapStencilOp:k7,DefaultLoadingManager:Nd,DepthFormat:Uu,DepthStencilFormat:Zu,DepthTexture:GA,DetachedBindMode:_j,DirectionalLight:bV,DirectionalLightHelper:OX,DiscreteInterpolant:yV,DodecahedronGeometry:Lw,DoubleSide:Mo,DstAlphaFactor:ij,DstColorFactor:sj,DynamicCopyUsage:K7,DynamicDrawUsage:Fu,DynamicReadUsage:q7,EdgesGeometry:eV,EllipseCurve:Pw,EqualCompare:Ij,EqualDepth:U0,EqualStencilFunc:j7,EquirectangularReflectionMapping:ng,EquirectangularRefractionMapping:ig,Euler:zs,EventDispatcher:da,ExtrudeGeometry:Ow,FileLoader:Qa,Float16BufferAttribute:Bq,Float32BufferAttribute:At,FloatType:gs,Fog:Ew,FogExp2:Tw,FramebufferTexture:o$,FrontSide:Ka,Frustum:Kg,GLBufferAttribute:TX,GLSL1:J7,GLSL3:p1,GreaterCompare:Pj,GreaterDepth:j0,GreaterEqualCompare:Nj,GreaterEqualDepth:F0,GreaterEqualStencilFunc:H7,GreaterStencilFunc:B7,GridHelper:LX,Group:Pd,HalfFloatType:If,HemisphereLight:xV,HemisphereLightHelper:DX,IcosahedronGeometry:Uw,ImageBitmapLoader:Z$,ImageLoader:xg,ImageUtils:Oj,IncrementStencilOp:N7,IncrementWrapStencilOp:L7,InstancedBufferAttribute:hf,InstancedBufferGeometry:AV,InstancedInterleavedBuffer:SX,InstancedMesh:Gj,Int16BufferAttribute:jq,Int32BufferAttribute:Vq,Int8BufferAttribute:Oq,IntType:mw,InterleavedBuffer:Cw,InterleavedBufferAttribute:th,Interpolant:Zg,InterpolateDiscrete:og,InterpolateLinear:f_,InterpolateSmooth:Bx,InvertStencilOp:O7,KeepStencilOp:gu,KeyframeTrack:Vo,LOD:zj,LatheGeometry:Yg,Layers:Vu,LessCompare:Mj,LessDepth:O0,LessEqualCompare:kA,LessEqualDepth:Ju,LessEqualStencilFunc:V7,LessStencilFunc:F7,Light:Rc,LightProbe:CV,Line:uc,Line3:MX,LineBasicMaterial:ts,LineCurve:$A,LineCurve3:Qj,LineDashedMaterial:fV,LineLoop:qj,LineSegments:fa,LinearFilter:Xi,LinearInterpolant:tM,LinearMipMapLinearFilter:S7,LinearMipMapNearestFilter:b7,LinearMipmapLinearFilter:Yo,LinearMipmapNearestFilter:mm,LinearSRGBColorSpace:eh,LinearToneMapping:pj,LinearTransfer:lg,Loader:ws,LoaderUtils:x1,LoadingManager:iM,LoopOnce:wj,LoopPingPong:Sj,LoopRepeat:bj,LuminanceAlphaFormat:RA,LuminanceFormat:PA,MOUSE:y7,Material:Br,MaterialLoader:Gw,MathUtils:mq,Matrix2:uM,Matrix3:sn,Matrix4:Vt,MaxEquation:QF,Mesh:Vi,MeshBasicMaterial:Ic,MeshDepthMaterial:QA,MeshDistanceMaterial:ZA,MeshLambertMaterial:hV,MeshMatcapMaterial:dV,MeshNormalMaterial:uV,MeshPhongMaterial:lV,MeshPhysicalMaterial:aV,MeshStandardMaterial:JA,MeshToonMaterial:cV,MinEquation:JF,MirroredRepeatWrapping:sg,MixOperation:dj,MultiplyBlending:h1,MultiplyOperation:Gg,NearestFilter:mr,NearestMipMapLinearFilter:w7,NearestMipMapNearestFilter:_7,NearestMipmapLinearFilter:Md,NearestMipmapNearestFilter:TA,NeutralToneMapping:xj,NeverCompare:Aj,NeverDepth:L0,NeverStencilFunc:U7,NoBlending:ja,NoColorSpace:Ia,NoToneMapping:ta,NormalAnimationBlendMode:ww,NormalBlending:Ou,NotEqualCompare:Rj,NotEqualDepth:V0,NotEqualStencilFunc:z7,NumberKeyframeTrack:gg,Object3D:Dn,ObjectLoader:J$,ObjectSpaceNormalMap:Cj,OctahedronGeometry:Jg,OneFactor:ej,OneMinusConstantAlphaFactor:hj,OneMinusConstantColorFactor:cj,OneMinusDstAlphaFactor:rj,OneMinusDstColorFactor:oj,OneMinusSrcAlphaFactor:D0,OneMinusSrcColorFactor:nj,OrthographicCamera:mh,PCFShadowMap:fw,PCFSoftShadowMap:pm,PMREMGenerator:b1,Path:dg,PerspectiveCamera:Ui,Plane:Dl,PlaneGeometry:Nf,PlaneHelper:VX,PointLight:wV,PointLightHelper:RX,Points:$j,PointsMaterial:Mw,PolarGridHelper:kX,PolyhedronGeometry:Pc,PositionalAudio:sX,PropertyBinding:In,PropertyMixer:RV,QuadraticBezierCurve:XA,QuadraticBezierCurve3:KA,Quaternion:_s,QuaternionKeyframeTrack:ey,QuaternionLinearInterpolant:vV,RED_GREEN_RGTC2_Format:h_,RED_RGTC1_Format:DA,REVISION:Hg,RGBADepthPacking:Ej,RGBAFormat:Lr,RGBAIntegerFormat:_w,RGBA_ASTC_10x10_Format:s_,RGBA_ASTC_10x5_Format:n_,RGBA_ASTC_10x6_Format:i_,RGBA_ASTC_10x8_Format:r_,RGBA_ASTC_12x10_Format:o_,RGBA_ASTC_12x12_Format:a_,RGBA_ASTC_4x4_Format:X0,RGBA_ASTC_5x4_Format:K0,RGBA_ASTC_5x5_Format:Y0,RGBA_ASTC_6x5_Format:J0,RGBA_ASTC_6x6_Format:Q0,RGBA_ASTC_8x5_Format:Z0,RGBA_ASTC_8x6_Format:e_,RGBA_ASTC_8x8_Format:t_,RGBA_BPTC_Format:_m,RGBA_ETC2_EAC_Format:$0,RGBA_PVRTC_2BPPV1_Format:G0,RGBA_PVRTC_4BPPV1_Format:H0,RGBA_S3TC_DXT1_Format:ym,RGBA_S3TC_DXT3_Format:vm,RGBA_S3TC_DXT5_Format:xm,RGBDepthPacking:M7,RGBFormat:IA,RGBIntegerFormat:T7,RGB_BPTC_SIGNED_Format:l_,RGB_BPTC_UNSIGNED_Format:c_,RGB_ETC1_Format:W0,RGB_ETC2_Format:q0,RGB_PVRTC_2BPPV1_Format:z0,RGB_PVRTC_4BPPV1_Format:B0,RGB_S3TC_DXT1_Format:gm,RGDepthPacking:I7,RGFormat:NA,RGIntegerFormat:xw,RawShaderMaterial:oV,Ray:Pf,Raycaster:DV,RectAreaLight:TV,RedFormat:vw,RedIntegerFormat:Wg,ReinhardToneMapping:mj,RenderTarget:bw,RenderTarget3D:xX,RenderTargetArray:_X,RepeatWrapping:rg,ReplaceStencilOp:R7,ReverseSubtractEquation:YF,RingGeometry:Fw,SIGNED_RED_GREEN_RGTC2_Format:d_,SIGNED_RED_RGTC1_Format:u_,SRGBColorSpace:us,SRGBTransfer:Gn,Scene:BA,ShaderChunk:cn,ShaderLib:Ao,ShaderMaterial:ko,ShadowMaterial:sV,Shape:Bu,ShapeGeometry:jw,ShapePath:HX,ShapeUtils:ia,ShortType:CA,Skeleton:Aw,SkeletonHelper:PX,SkinnedMesh:Hj,Source:Wl,Sphere:Ur,SphereGeometry:Qg,Spherical:EX,SphericalHarmonics3:EV,SplineCurve:YA,SpotLight:_V,SpotLightHelper:IX,Sprite:Bj,SpriteMaterial:zA,SrcAlphaFactor:N0,SrcAlphaSaturateFactor:aj,SrcColorFactor:tj,StaticCopyUsage:X7,StaticDrawUsage:cg,StaticReadUsage:W7,StereoCamera:tX,StreamCopyUsage:Y7,StreamDrawUsage:G7,StreamReadUsage:$7,StringKeyframeTrack:ph,SubtractEquation:KF,SubtractiveBlending:u1,TOUCH:v7,TangentSpaceNormalMap:Mc,TetrahedronGeometry:Vw,Texture:_i,TextureLoader:$$,TextureUtils:KX,TimestampQuery:Q7,TorusGeometry:Bw,TorusKnotGeometry:zw,Triangle:fs,TriangleFanDrawMode:A7,TriangleStripDrawMode:C7,TrianglesDrawMode:E7,TubeGeometry:Hw,UVMapping:pw,Uint16BufferAttribute:UA,Uint32BufferAttribute:FA,Uint8BufferAttribute:Uq,Uint8ClampedBufferAttribute:Fq,Uniform:cM,UniformsGroup:bX,UniformsLib:ot,UniformsUtils:jj,UnsignedByteType:Lo,UnsignedInt248Type:Qu,UnsignedInt5999Type:AA,UnsignedIntType:Ja,UnsignedShort4444Type:gw,UnsignedShort5551Type:yw,UnsignedShortType:lf,VSMShadowMap:So,Vector2:Le,Vector3:K,Vector4:Rn,VectorKeyframeTrack:yg,VideoFrameTexture:s$,VideoTexture:Xj,WebGL3DRenderTarget:Tq,WebGLArrayRenderTarget:Sq,WebGLCoordinateSystem:Io,WebGLCubeRenderTarget:VA,WebGLRenderTarget:ua,WebGLRenderer:BV,WebGLUtils:VV,WebGPUCoordinateSystem:ug,WebXRController:zx,WireframeGeometry:rV,WrapAroundEnding:ag,ZeroCurvatureEnding:Iu,ZeroFactor:ZF,ZeroSlopeEnding:Pu,ZeroStencilOp:P7,createCanvasElement:kj},Symbol.toStringTag,{value:"Module"}));var zV={exports:{}},gh={};/**
 * @license React
 * react-reconciler-constants.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */gh.ConcurrentRoot=1;gh.ContinuousEventPriority=4;gh.DefaultEventPriority=16;gh.DiscreteEventPriority=1;gh.IdleEventPriority=536870912;gh.LegacyRoot=0;zV.exports=gh;var Ld=zV.exports;function RZ(n){let e;const t=new Set,i=(c,u)=>{const f=typeof c=="function"?c(e):c;if(f!==e){const m=e;e=u?f:Object.assign({},e,f),t.forEach(g=>g(e,m))}},r=()=>e,s=(c,u=r,f=Object.is)=>{console.warn("[DEPRECATED] Please use `subscribeWithSelector` middleware");let m=u(e);function g(){const x=u(e);if(!f(m,x)){const b=m;c(m=x,b)}}return t.add(g),()=>t.delete(g)},l={setState:i,getState:r,subscribe:(c,u,f)=>u||f?s(c,u,f):(t.add(c),()=>t.delete(c)),destroy:()=>t.clear()};return e=n(i,r,l),l}const NZ=typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),HD=NZ?V.useEffect:V.useLayoutEffect;function DZ(n){const e=typeof n=="function"?RZ(n):n,t=(i=e.getState,r=Object.is)=>{const[,s]=V.useReducer(w=>w+1,0),o=e.getState(),a=V.useRef(o),l=V.useRef(i),c=V.useRef(r),u=V.useRef(!1),f=V.useRef();f.current===void 0&&(f.current=i(o));let m,g=!1;(a.current!==o||l.current!==i||c.current!==r||u.current)&&(m=i(o),g=!r(f.current,m)),HD(()=>{g&&(f.current=m),a.current=o,l.current=i,c.current=r,u.current=!1});const x=V.useRef(o);HD(()=>{const w=()=>{try{const S=e.getState(),E=l.current(S);c.current(f.current,E)||(a.current=S,f.current=E,s())}catch{u.current=!0,s()}},v=e.subscribe(w);return e.getState()!==x.current&&w(),v},[]);const b=g?m:f.current;return V.useDebugValue(b),b};return Object.assign(t,e),t[Symbol.iterator]=function(){console.warn("[useStore, api] = create() is deprecated and will be removed in v4");const i=[t,e];return{next(){const r=i.length<=0;return{value:i.shift(),done:r}}}},t}var HV={exports:{}},GV={exports:{}},WV={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(n){function e(W,Z){var F=W.length;W.push(Z);e:for(;0<F;){var J=F-1>>>1,ue=W[J];if(0<r(ue,Z))W[J]=Z,W[F]=ue,F=J;else break e}}function t(W){return W.length===0?null:W[0]}function i(W){if(W.length===0)return null;var Z=W[0],F=W.pop();if(F!==Z){W[0]=F;e:for(var J=0,ue=W.length,ye=ue>>>1;J<ye;){var le=2*(J+1)-1,xe=W[le],Pe=le+1,Me=W[Pe];if(0>r(xe,F))Pe<ue&&0>r(Me,xe)?(W[J]=Me,W[Pe]=F,J=Pe):(W[J]=xe,W[le]=F,J=le);else if(Pe<ue&&0>r(Me,F))W[J]=Me,W[Pe]=F,J=Pe;else break e}}return Z}function r(W,Z){var F=W.sortIndex-Z.sortIndex;return F!==0?F:W.id-Z.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;n.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();n.unstable_now=function(){return o.now()-a}}var l=[],c=[],u=1,f=null,m=3,g=!1,x=!1,b=!1,w=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,S=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function E(W){for(var Z=t(c);Z!==null;){if(Z.callback===null)i(c);else if(Z.startTime<=W)i(c),Z.sortIndex=Z.expirationTime,e(l,Z);else break;Z=t(c)}}function I(W){if(b=!1,E(W),!x)if(t(l)!==null)x=!0,pe(U);else{var Z=t(c);Z!==null&&de(I,Z.startTime-W)}}function U(W,Z){x=!1,b&&(b=!1,v(P),P=-1),g=!0;var F=m;try{for(E(Z),f=t(l);f!==null&&(!(f.expirationTime>Z)||W&&!D());){var J=f.callback;if(typeof J=="function"){f.callback=null,m=f.priorityLevel;var ue=J(f.expirationTime<=Z);Z=n.unstable_now(),typeof ue=="function"?f.callback=ue:f===t(l)&&i(l),E(Z)}else i(l);f=t(l)}if(f!==null)var ye=!0;else{var le=t(c);le!==null&&de(I,le.startTime-Z),ye=!1}return ye}finally{f=null,m=F,g=!1}}var O=!1,C=null,P=-1,M=5,A=-1;function D(){return!(n.unstable_now()-A<M)}function B(){if(C!==null){var W=n.unstable_now();A=W;var Z=!0;try{Z=C(!0,W)}finally{Z?j():(O=!1,C=null)}}else O=!1}var j;if(typeof S=="function")j=function(){S(B)};else if(typeof MessageChannel<"u"){var te=new MessageChannel,ce=te.port2;te.port1.onmessage=B,j=function(){ce.postMessage(null)}}else j=function(){w(B,0)};function pe(W){C=W,O||(O=!0,j())}function de(W,Z){P=w(function(){W(n.unstable_now())},Z)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(W){W.callback=null},n.unstable_continueExecution=function(){x||g||(x=!0,pe(U))},n.unstable_forceFrameRate=function(W){0>W||125<W?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):M=0<W?Math.floor(1e3/W):5},n.unstable_getCurrentPriorityLevel=function(){return m},n.unstable_getFirstCallbackNode=function(){return t(l)},n.unstable_next=function(W){switch(m){case 1:case 2:case 3:var Z=3;break;default:Z=m}var F=m;m=Z;try{return W()}finally{m=F}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(W,Z){switch(W){case 1:case 2:case 3:case 4:case 5:break;default:W=3}var F=m;m=W;try{return Z()}finally{m=F}},n.unstable_scheduleCallback=function(W,Z,F){var J=n.unstable_now();switch(typeof F=="object"&&F!==null?(F=F.delay,F=typeof F=="number"&&0<F?J+F:J):F=J,W){case 1:var ue=-1;break;case 2:ue=250;break;case 5:ue=1073741823;break;case 4:ue=1e4;break;default:ue=5e3}return ue=F+ue,W={id:u++,callback:Z,priorityLevel:W,startTime:F,expirationTime:ue,sortIndex:-1},F>J?(W.sortIndex=F,e(c,W),t(l)===null&&W===t(c)&&(b?(v(P),P=-1):b=!0,de(I,F-J))):(W.sortIndex=ue,e(l,W),x||g||(x=!0,pe(U))),W},n.unstable_shouldYield=D,n.unstable_wrapCallback=function(W){var Z=m;return function(){var F=m;m=Z;try{return W.apply(this,arguments)}finally{m=F}}}})(WV);GV.exports=WV;var T1=GV.exports;/**
 * @license React
 * react-reconciler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var LZ=function(e){var t={},i=V,r=T1,s=Object.assign;function o(h){for(var p="https://reactjs.org/docs/error-decoder.html?invariant="+h,_=1;_<arguments.length;_++)p+="&args[]="+encodeURIComponent(arguments[_]);return"Minified React error #"+h+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var a=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,l=Symbol.for("react.element"),c=Symbol.for("react.portal"),u=Symbol.for("react.fragment"),f=Symbol.for("react.strict_mode"),m=Symbol.for("react.profiler"),g=Symbol.for("react.provider"),x=Symbol.for("react.context"),b=Symbol.for("react.forward_ref"),w=Symbol.for("react.suspense"),v=Symbol.for("react.suspense_list"),S=Symbol.for("react.memo"),E=Symbol.for("react.lazy"),I=Symbol.for("react.offscreen"),U=Symbol.iterator;function O(h){return h===null||typeof h!="object"?null:(h=U&&h[U]||h["@@iterator"],typeof h=="function"?h:null)}function C(h){if(h==null)return null;if(typeof h=="function")return h.displayName||h.name||null;if(typeof h=="string")return h;switch(h){case u:return"Fragment";case c:return"Portal";case m:return"Profiler";case f:return"StrictMode";case w:return"Suspense";case v:return"SuspenseList"}if(typeof h=="object")switch(h.$$typeof){case x:return(h.displayName||"Context")+".Consumer";case g:return(h._context.displayName||"Context")+".Provider";case b:var p=h.render;return h=h.displayName,h||(h=p.displayName||p.name||"",h=h!==""?"ForwardRef("+h+")":"ForwardRef"),h;case S:return p=h.displayName||null,p!==null?p:C(h.type)||"Memo";case E:p=h._payload,h=h._init;try{return C(h(p))}catch{}}return null}function P(h){var p=h.type;switch(h.tag){case 24:return"Cache";case 9:return(p.displayName||"Context")+".Consumer";case 10:return(p._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return h=p.render,h=h.displayName||h.name||"",p.displayName||(h!==""?"ForwardRef("+h+")":"ForwardRef");case 7:return"Fragment";case 5:return p;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return C(p);case 8:return p===f?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof p=="function")return p.displayName||p.name||null;if(typeof p=="string")return p}return null}function M(h){var p=h,_=h;if(h.alternate)for(;p.return;)p=p.return;else{h=p;do p=h,p.flags&4098&&(_=p.return),h=p.return;while(h)}return p.tag===3?_:null}function A(h){if(M(h)!==h)throw Error(o(188))}function D(h){var p=h.alternate;if(!p){if(p=M(h),p===null)throw Error(o(188));return p!==h?null:h}for(var _=h,T=p;;){var R=_.return;if(R===null)break;var k=R.alternate;if(k===null){if(T=R.return,T!==null){_=T;continue}break}if(R.child===k.child){for(k=R.child;k;){if(k===_)return A(R),h;if(k===T)return A(R),p;k=k.sibling}throw Error(o(188))}if(_.return!==T.return)_=R,T=k;else{for(var Y=!1,ie=R.child;ie;){if(ie===_){Y=!0,_=R,T=k;break}if(ie===T){Y=!0,T=R,_=k;break}ie=ie.sibling}if(!Y){for(ie=k.child;ie;){if(ie===_){Y=!0,_=k,T=R;break}if(ie===T){Y=!0,T=k,_=R;break}ie=ie.sibling}if(!Y)throw Error(o(189))}}if(_.alternate!==T)throw Error(o(190))}if(_.tag!==3)throw Error(o(188));return _.stateNode.current===_?h:p}function B(h){return h=D(h),h!==null?j(h):null}function j(h){if(h.tag===5||h.tag===6)return h;for(h=h.child;h!==null;){var p=j(h);if(p!==null)return p;h=h.sibling}return null}function te(h){if(h.tag===5||h.tag===6)return h;for(h=h.child;h!==null;){if(h.tag!==4){var p=te(h);if(p!==null)return p}h=h.sibling}return null}var ce=Array.isArray,pe=e.getPublicInstance,de=e.getRootHostContext,W=e.getChildHostContext,Z=e.prepareForCommit,F=e.resetAfterCommit,J=e.createInstance,ue=e.appendInitialChild,ye=e.finalizeInitialChildren,le=e.prepareUpdate,xe=e.shouldSetTextContent,Pe=e.createTextInstance,Me=e.scheduleTimeout,gt=e.cancelTimeout,Kt=e.noTimeout,Ye=e.isPrimaryRenderer,rt=e.supportsMutation,Ae=e.supportsPersistence,Ee=e.supportsHydration,X=e.getInstanceFromNode,pt=e.preparePortalMount,Oe=e.getCurrentEventPriority,tt=e.detachDeletedInstance,Ve=e.supportsMicrotasks,Mt=e.scheduleMicrotask,Xe=e.supportsTestSelectors,$=e.findFiberRoot,z=e.getBoundingRect,he=e.getTextContent,Se=e.isHiddenSubtree,Re=e.matchAccessibilityRole,we=e.setFocusIfFocusable,He=e.setupIntersectionObserver,Ge=e.appendChild,Qe=e.appendChildToContainer,Yt=e.commitTextUpdate,Fe=e.commitMount,lt=e.commitUpdate,Ct=e.insertBefore,Lt=e.insertInContainerBefore,ut=e.removeChild,an=e.removeChildFromContainer,Gt=e.resetTextContent,wn=e.hideInstance,ee=e.hideTextInstance,Ze=e.unhideInstance,be=e.unhideTextInstance,Ie=e.clearContainer,it=e.cloneInstance,Ke=e.createContainerChildSet,Ft=e.appendChildToContainerChildSet,kn=e.finalizeContainerChildren,Xn=e.replaceContainerChildren,Zt=e.cloneHiddenInstance,zi=e.cloneHiddenTextInstance,Hn=e.canHydrateInstance,Q=e.canHydrateTextInstance,se=e.canHydrateSuspenseInstance,ge=e.isSuspenseInstancePending,ke=e.isSuspenseInstanceFallback,Je=e.registerSuspenseInstanceRetry,mt=e.getNextHydratableSibling,Nt=e.getFirstHydratableChild,yt=e.getFirstHydratableChildWithinContainer,ht=e.getFirstHydratableChildWithinSuspenseInstance,dt=e.hydrateInstance,bt=e.hydrateTextInstance,Ot=e.hydrateSuspenseInstance,Wt=e.getNextHydratableInstanceAfterSuspenseInstance,Zn=e.commitHydratedContainer,Mn=e.commitHydratedSuspenseInstance,dn=e.clearSuspenseBoundary,jn=e.clearSuspenseBoundaryFromContainer,H=e.shouldDeleteUnhydratedTailInstances,ne=e.didNotMatchHydratedContainerTextInstance,me=e.didNotMatchHydratedTextInstance,fe;function re(h){if(fe===void 0)try{throw Error()}catch(_){var p=_.stack.trim().match(/\n( *(at )?)/);fe=p&&p[1]||""}return`
`+fe+h}var Ue=!1;function ze(h,p){if(!h||Ue)return"";Ue=!0;var _=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(p)if(p=function(){throw Error()},Object.defineProperty(p.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(p,[])}catch(qe){var T=qe}Reflect.construct(h,[],p)}else{try{p.call()}catch(qe){T=qe}h.call(p.prototype)}else{try{throw Error()}catch(qe){T=qe}h()}}catch(qe){if(qe&&T&&typeof qe.stack=="string"){for(var R=qe.stack.split(`
`),k=T.stack.split(`
`),Y=R.length-1,ie=k.length-1;1<=Y&&0<=ie&&R[Y]!==k[ie];)ie--;for(;1<=Y&&0<=ie;Y--,ie--)if(R[Y]!==k[ie]){if(Y!==1||ie!==1)do if(Y--,ie--,0>ie||R[Y]!==k[ie]){var Ce=`
`+R[Y].replace(" at new "," at ");return h.displayName&&Ce.includes("<anonymous>")&&(Ce=Ce.replace("<anonymous>",h.displayName)),Ce}while(1<=Y&&0<=ie);break}}}finally{Ue=!1,Error.prepareStackTrace=_}return(h=h?h.displayName||h.name:"")?re(h):""}var et=Object.prototype.hasOwnProperty,st=[],$e=-1;function nt(h){return{current:h}}function We(h){0>$e||(h.current=st[$e],st[$e]=null,$e--)}function vt(h,p){$e++,st[$e]=h.current,h.current=p}var Et={},zt=nt(Et),en=nt(!1),$t=Et;function It(h,p){var _=h.type.contextTypes;if(!_)return Et;var T=h.stateNode;if(T&&T.__reactInternalMemoizedUnmaskedChildContext===p)return T.__reactInternalMemoizedMaskedChildContext;var R={},k;for(k in _)R[k]=p[k];return T&&(h=h.stateNode,h.__reactInternalMemoizedUnmaskedChildContext=p,h.__reactInternalMemoizedMaskedChildContext=R),R}function En(h){return h=h.childContextTypes,h!=null}function pn(){We(en),We(zt)}function or(h,p,_){if(zt.current!==Et)throw Error(o(168));vt(zt,p),vt(en,_)}function po(h,p,_){var T=h.stateNode;if(p=p.childContextTypes,typeof T.getChildContext!="function")return _;T=T.getChildContext();for(var R in T)if(!(R in p))throw Error(o(108,P(h)||"Unknown",R));return s({},_,T)}function Jn(h){return h=(h=h.stateNode)&&h.__reactInternalMemoizedMergedChildContext||Et,$t=zt.current,vt(zt,h),vt(en,en.current),!0}function Qi(h,p,_){var T=h.stateNode;if(!T)throw Error(o(169));_?(h=po(h,p,$t),T.__reactInternalMemoizedMergedChildContext=h,We(en),We(zt),vt(zt,h)):We(en),vt(en,_)}var ln=Math.clz32?Math.clz32:tn,Hi=Math.log,ar=Math.LN2;function tn(h){return h>>>=0,h===0?32:31-(Hi(h)/ar|0)|0}var si=64,ns=4194304;function Gi(h){switch(h&-h){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return h&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return h&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return h}}function wh(h,p){var _=h.pendingLanes;if(_===0)return 0;var T=0,R=h.suspendedLanes,k=h.pingedLanes,Y=_&268435455;if(Y!==0){var ie=Y&~R;ie!==0?T=Gi(ie):(k&=Y,k!==0&&(T=Gi(k)))}else Y=_&~R,Y!==0?T=Gi(Y):k!==0&&(T=Gi(k));if(T===0)return 0;if(p!==0&&p!==T&&!(p&R)&&(R=T&-T,k=p&-p,R>=k||R===16&&(k&4194240)!==0))return p;if(T&4&&(T|=_&16),p=h.entangledLanes,p!==0)for(h=h.entanglements,p&=T;0<p;)_=31-ln(p),R=1<<_,T|=h[_],p&=~R;return T}function _y(h,p){switch(h){case 1:case 2:case 4:return p+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return p+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Cb(h,p){for(var _=h.suspendedLanes,T=h.pingedLanes,R=h.expirationTimes,k=h.pendingLanes;0<k;){var Y=31-ln(k),ie=1<<Y,Ce=R[Y];Ce===-1?(!(ie&_)||ie&T)&&(R[Y]=_y(ie,p)):Ce<=p&&(h.expiredLanes|=ie),k&=~ie}}function Gf(h){return h=h.pendingLanes&-1073741825,h!==0?h:h&1073741824?1073741824:0}function Wf(h){for(var p=[],_=0;31>_;_++)p.push(h);return p}function Oc(h,p,_){h.pendingLanes|=p,p!==536870912&&(h.suspendedLanes=0,h.pingedLanes=0),h=h.eventTimes,p=31-ln(p),h[p]=_}function Uc(h,p){var _=h.pendingLanes&~p;h.pendingLanes=p,h.suspendedLanes=0,h.pingedLanes=0,h.expiredLanes&=p,h.mutableReadLanes&=p,h.entangledLanes&=p,p=h.entanglements;var T=h.eventTimes;for(h=h.expirationTimes;0<_;){var R=31-ln(_),k=1<<R;p[R]=0,T[R]=-1,h[R]=-1,_&=~k}}function qs(h,p){var _=h.entangledLanes|=p;for(h=h.entanglements;_;){var T=31-ln(_),R=1<<T;R&p|h[T]&p&&(h[T]|=p),_&=~R}}var bn=0;function qf(h){return h&=-h,1<h?4<h?h&268435455?16:536870912:4:1}var bh=r.unstable_scheduleCallback,pa=r.unstable_cancelCallback,Ab=r.unstable_shouldYield,Mb=r.unstable_requestPaint,Mi=r.unstable_now,$s=r.unstable_ImmediatePriority,Ib=r.unstable_UserBlockingPriority,$f=r.unstable_NormalPriority,Sh=r.unstable_IdlePriority,ma=null,bs=null;function Fc(h){if(bs&&typeof bs.onCommitFiberRoot=="function")try{bs.onCommitFiberRoot(ma,h,void 0,(h.current.flags&128)===128)}catch{}}function jc(h,p){return h===p&&(h!==0||1/h===1/p)||h!==h&&p!==p}var Ss=typeof Object.is=="function"?Object.is:jc,Ts=null,Kn=!1,Xf=!1;function wy(h){Ts===null?Ts=[h]:Ts.push(h)}function by(h){Kn=!0,wy(h)}function Es(){if(!Xf&&Ts!==null){Xf=!0;var h=0,p=bn;try{var _=Ts;for(bn=1;h<_.length;h++){var T=_[h];do T=T(!0);while(T!==null)}Ts=null,Kn=!1}catch(R){throw Ts!==null&&(Ts=Ts.slice(h+1)),bh($s,Es),R}finally{bn=p,Xf=!1}}return null}var Sy=a.ReactCurrentBatchConfig;function ga(h,p){if(Ss(h,p))return!0;if(typeof h!="object"||h===null||typeof p!="object"||p===null)return!1;var _=Object.keys(h),T=Object.keys(p);if(_.length!==T.length)return!1;for(T=0;T<_.length;T++){var R=_[T];if(!et.call(p,R)||!Ss(h[R],p[R]))return!1}return!0}function Ty(h){switch(h.tag){case 5:return re(h.type);case 16:return re("Lazy");case 13:return re("Suspense");case 19:return re("SuspenseList");case 0:case 2:case 15:return h=ze(h.type,!1),h;case 11:return h=ze(h.type.render,!1),h;case 1:return h=ze(h.type,!0),h;default:return""}}function wi(h,p){if(h&&h.defaultProps){p=s({},p),h=h.defaultProps;for(var _ in h)p[_]===void 0&&(p[_]=h[_]);return p}return p}var Vc=nt(null),Th=null,Xs=null,Eh=null;function Bc(){Eh=Xs=Th=null}function zc(h,p,_){Ye?(vt(Vc,p._currentValue),p._currentValue=_):(vt(Vc,p._currentValue2),p._currentValue2=_)}function Ch(h){var p=Vc.current;We(Vc),Ye?h._currentValue=p:h._currentValue2=p}function cl(h,p,_){for(;h!==null;){var T=h.alternate;if((h.childLanes&p)!==p?(h.childLanes|=p,T!==null&&(T.childLanes|=p)):T!==null&&(T.childLanes&p)!==p&&(T.childLanes|=p),h===_)break;h=h.return}}function ul(h,p){Th=h,Eh=Xs=null,h=h.dependencies,h!==null&&h.firstContext!==null&&(h.lanes&p&&(Ms=!0),h.firstContext=null)}function zr(h){var p=Ye?h._currentValue:h._currentValue2;if(Eh!==h)if(h={context:h,memoizedValue:p,next:null},Xs===null){if(Th===null)throw Error(o(308));Xs=h,Th.dependencies={lanes:0,firstContext:h}}else Xs=Xs.next=h;return p}var vr=null,mo=!1;function Ah(h){h.updateQueue={baseState:h.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Mh(h,p){h=h.updateQueue,p.updateQueue===h&&(p.updateQueue={baseState:h.baseState,firstBaseUpdate:h.firstBaseUpdate,lastBaseUpdate:h.lastBaseUpdate,shared:h.shared,effects:h.effects})}function Cs(h,p){return{eventTime:h,lane:p,tag:0,payload:null,callback:null,next:null}}function go(h,p){var _=h.updateQueue;_!==null&&(_=_.shared,Ni!==null&&h.mode&1&&!(fn&2)?(h=_.interleaved,h===null?(p.next=p,vr===null?vr=[_]:vr.push(_)):(p.next=h.next,h.next=p),_.interleaved=p):(h=_.pending,h===null?p.next=p:(p.next=h.next,h.next=p),_.pending=p))}function ya(h,p,_){if(p=p.updateQueue,p!==null&&(p=p.shared,(_&4194240)!==0)){var T=p.lanes;T&=h.pendingLanes,_|=T,p.lanes=_,qs(h,_)}}function Kf(h,p){var _=h.updateQueue,T=h.alternate;if(T!==null&&(T=T.updateQueue,_===T)){var R=null,k=null;if(_=_.firstBaseUpdate,_!==null){do{var Y={eventTime:_.eventTime,lane:_.lane,tag:_.tag,payload:_.payload,callback:_.callback,next:null};k===null?R=k=Y:k=k.next=Y,_=_.next}while(_!==null);k===null?R=k=p:k=k.next=p}else R=k=p;_={baseState:T.baseState,firstBaseUpdate:R,lastBaseUpdate:k,shared:T.shared,effects:T.effects},h.updateQueue=_;return}h=_.lastBaseUpdate,h===null?_.firstBaseUpdate=p:h.next=p,_.lastBaseUpdate=p}function Hc(h,p,_,T){var R=h.updateQueue;mo=!1;var k=R.firstBaseUpdate,Y=R.lastBaseUpdate,ie=R.shared.pending;if(ie!==null){R.shared.pending=null;var Ce=ie,qe=Ce.next;Ce.next=null,Y===null?k=qe:Y.next=qe,Y=Ce;var Tt=h.alternate;Tt!==null&&(Tt=Tt.updateQueue,ie=Tt.lastBaseUpdate,ie!==Y&&(ie===null?Tt.firstBaseUpdate=qe:ie.next=qe,Tt.lastBaseUpdate=Ce))}if(k!==null){var nn=R.baseState;Y=0,Tt=qe=Ce=null,ie=k;do{var kt=ie.lane,Yn=ie.eventTime;if((T&kt)===kt){Tt!==null&&(Tt=Tt.next={eventTime:Yn,lane:0,tag:ie.tag,payload:ie.payload,callback:ie.callback,next:null});e:{var Rt=h,Sr=ie;switch(kt=p,Yn=_,Sr.tag){case 1:if(Rt=Sr.payload,typeof Rt=="function"){nn=Rt.call(Yn,nn,kt);break e}nn=Rt;break e;case 3:Rt.flags=Rt.flags&-65537|128;case 0:if(Rt=Sr.payload,kt=typeof Rt=="function"?Rt.call(Yn,nn,kt):Rt,kt==null)break e;nn=s({},nn,kt);break e;case 2:mo=!0}}ie.callback!==null&&ie.lane!==0&&(h.flags|=64,kt=R.effects,kt===null?R.effects=[ie]:kt.push(ie))}else Yn={eventTime:Yn,lane:kt,tag:ie.tag,payload:ie.payload,callback:ie.callback,next:null},Tt===null?(qe=Tt=Yn,Ce=nn):Tt=Tt.next=Yn,Y|=kt;if(ie=ie.next,ie===null){if(ie=R.shared.pending,ie===null)break;kt=ie,ie=kt.next,kt.next=null,R.lastBaseUpdate=kt,R.shared.pending=null}}while(!0);if(Tt===null&&(Ce=nn),R.baseState=Ce,R.firstBaseUpdate=qe,R.lastBaseUpdate=Tt,p=R.shared.interleaved,p!==null){R=p;do Y|=R.lane,R=R.next;while(R!==p)}else k===null&&(R.shared.lanes=0);Uh|=Y,h.lanes=Y,h.memoizedState=nn}}function Bo(h,p,_){if(h=p.effects,p.effects=null,h!==null)for(p=0;p<h.length;p++){var T=h[p],R=T.callback;if(R!==null){if(T.callback=null,T=_,typeof R!="function")throw Error(o(191,R));R.call(T)}}}var Yf=new i.Component().refs;function Ih(h,p,_,T){p=h.memoizedState,_=_(T,p),_=_==null?p:s({},p,_),h.memoizedState=_,h.lanes===0&&(h.updateQueue.baseState=_)}var Gc={isMounted:function(h){return(h=h._reactInternals)?M(h)===h:!1},enqueueSetState:function(h,p,_){h=h._reactInternals;var T=Wr(),R=fl(h),k=Cs(T,R);k.payload=p,_!=null&&(k.callback=_),go(h,k),p=Js(h,R,T),p!==null&&ya(p,h,R)},enqueueReplaceState:function(h,p,_){h=h._reactInternals;var T=Wr(),R=fl(h),k=Cs(T,R);k.tag=1,k.payload=p,_!=null&&(k.callback=_),go(h,k),p=Js(h,R,T),p!==null&&ya(p,h,R)},enqueueForceUpdate:function(h,p){h=h._reactInternals;var _=Wr(),T=fl(h),R=Cs(_,T);R.tag=2,p!=null&&(R.callback=p),go(h,R),p=Js(h,T,_),p!==null&&ya(p,h,T)}};function Jf(h,p,_,T,R,k,Y){return h=h.stateNode,typeof h.shouldComponentUpdate=="function"?h.shouldComponentUpdate(T,k,Y):p.prototype&&p.prototype.isPureReactComponent?!ga(_,T)||!ga(R,k):!0}function Wc(h,p,_){var T=!1,R=Et,k=p.contextType;return typeof k=="object"&&k!==null?k=zr(k):(R=En(p)?$t:zt.current,T=p.contextTypes,k=(T=T!=null)?It(h,R):Et),p=new p(_,k),h.memoizedState=p.state!==null&&p.state!==void 0?p.state:null,p.updater=Gc,h.stateNode=p,p._reactInternals=h,T&&(h=h.stateNode,h.__reactInternalMemoizedUnmaskedChildContext=R,h.__reactInternalMemoizedMaskedChildContext=k),p}function xr(h,p,_,T){h=p.state,typeof p.componentWillReceiveProps=="function"&&p.componentWillReceiveProps(_,T),typeof p.UNSAFE_componentWillReceiveProps=="function"&&p.UNSAFE_componentWillReceiveProps(_,T),p.state!==h&&Gc.enqueueReplaceState(p,p.state,null)}function Ph(h,p,_,T){var R=h.stateNode;R.props=_,R.state=h.memoizedState,R.refs=Yf,Ah(h);var k=p.contextType;typeof k=="object"&&k!==null?R.context=zr(k):(k=En(p)?$t:zt.current,R.context=It(h,k)),R.state=h.memoizedState,k=p.getDerivedStateFromProps,typeof k=="function"&&(Ih(h,p,k,_),R.state=h.memoizedState),typeof p.getDerivedStateFromProps=="function"||typeof R.getSnapshotBeforeUpdate=="function"||typeof R.UNSAFE_componentWillMount!="function"&&typeof R.componentWillMount!="function"||(p=R.state,typeof R.componentWillMount=="function"&&R.componentWillMount(),typeof R.UNSAFE_componentWillMount=="function"&&R.UNSAFE_componentWillMount(),p!==R.state&&Gc.enqueueReplaceState(R,R.state,null),Hc(h,_,R,T),R.state=h.memoizedState),typeof R.componentDidMount=="function"&&(h.flags|=4194308)}var va=[],As=0,y=null,N=0,L=[],G=0,ae=null,_e=1,Be="";function Sn(h,p){va[As++]=N,va[As++]=y,y=h,N=p}function Ii(h,p,_){L[G++]=_e,L[G++]=Be,L[G++]=ae,ae=h;var T=_e;h=Be;var R=32-ln(T)-1;T&=~(1<<R),_+=1;var k=32-ln(p)+R;if(30<k){var Y=R-R%5;k=(T&(1<<Y)-1).toString(32),T>>=Y,R-=Y,_e=1<<32-ln(p)+R|_<<R|T,Be=k+h}else _e=1<<k|_<<R|T,Be=h}function gn(h){h.return!==null&&(Sn(h,1),Ii(h,1,0))}function Pi(h){for(;h===y;)y=va[--As],va[As]=null,N=va[--As],va[As]=null;for(;h===ae;)ae=L[--G],L[G]=null,Be=L[--G],L[G]=null,_e=L[--G],L[G]=null}var Vn=null,Ri=null,yn=!1,zo=!1,Hr=null;function eP(h,p){var _=Qs(5,null,null,0);_.elementType="DELETED",_.stateNode=p,_.return=h,p=h.deletions,p===null?(h.deletions=[_],h.flags|=16):p.push(_)}function tP(h,p){switch(h.tag){case 5:return p=Hn(p,h.type,h.pendingProps),p!==null?(h.stateNode=p,Vn=h,Ri=Nt(p),!0):!1;case 6:return p=Q(p,h.pendingProps),p!==null?(h.stateNode=p,Vn=h,Ri=null,!0):!1;case 13:if(p=se(p),p!==null){var _=ae!==null?{id:_e,overflow:Be}:null;return h.memoizedState={dehydrated:p,treeContext:_,retryLane:1073741824},_=Qs(18,null,null,0),_.stateNode=p,_.return=h,h.child=_,Vn=h,Ri=null,!0}return!1;default:return!1}}function Pb(h){return(h.mode&1)!==0&&(h.flags&128)===0}function Rb(h){if(yn){var p=Ri;if(p){var _=p;if(!tP(h,p)){if(Pb(h))throw Error(o(418));p=mt(_);var T=Vn;p&&tP(h,p)?eP(T,_):(h.flags=h.flags&-4097|2,yn=!1,Vn=h)}}else{if(Pb(h))throw Error(o(418));h.flags=h.flags&-4097|2,yn=!1,Vn=h}}}function nP(h){for(h=h.return;h!==null&&h.tag!==5&&h.tag!==3&&h.tag!==13;)h=h.return;Vn=h}function Qf(h){if(!Ee||h!==Vn)return!1;if(!yn)return nP(h),yn=!0,!1;if(h.tag!==3&&(h.tag!==5||H(h.type)&&!xe(h.type,h.memoizedProps))){var p=Ri;if(p){if(Pb(h)){for(h=Ri;h;)h=mt(h);throw Error(o(418))}for(;p;)eP(h,p),p=mt(p)}}if(nP(h),h.tag===13){if(!Ee)throw Error(o(316));if(h=h.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(o(317));Ri=Wt(h)}else Ri=Vn?mt(h.stateNode):null;return!0}function Rh(){Ee&&(Ri=Vn=null,zo=yn=!1)}function Nb(h){Hr===null?Hr=[h]:Hr.push(h)}function Zf(h,p,_){if(h=_.ref,h!==null&&typeof h!="function"&&typeof h!="object"){if(_._owner){if(_=_._owner,_){if(_.tag!==1)throw Error(o(309));var T=_.stateNode}if(!T)throw Error(o(147,h));var R=T,k=""+h;return p!==null&&p.ref!==null&&typeof p.ref=="function"&&p.ref._stringRef===k?p.ref:(p=function(Y){var ie=R.refs;ie===Yf&&(ie=R.refs={}),Y===null?delete ie[k]:ie[k]=Y},p._stringRef=k,p)}if(typeof h!="string")throw Error(o(284));if(!_._owner)throw Error(o(290,h))}return h}function Ey(h,p){throw h=Object.prototype.toString.call(p),Error(o(31,h==="[object Object]"?"object with keys {"+Object.keys(p).join(", ")+"}":h))}function iP(h){var p=h._init;return p(h._payload)}function rP(h){function p(ve,oe){if(h){var Te=ve.deletions;Te===null?(ve.deletions=[oe],ve.flags|=16):Te.push(oe)}}function _(ve,oe){if(!h)return null;for(;oe!==null;)p(ve,oe),oe=oe.sibling;return null}function T(ve,oe){for(ve=new Map;oe!==null;)oe.key!==null?ve.set(oe.key,oe):ve.set(oe.index,oe),oe=oe.sibling;return ve}function R(ve,oe){return ve=ml(ve,oe),ve.index=0,ve.sibling=null,ve}function k(ve,oe,Te){return ve.index=Te,h?(Te=ve.alternate,Te!==null?(Te=Te.index,Te<oe?(ve.flags|=2,oe):Te):(ve.flags|=2,oe)):(ve.flags|=1048576,oe)}function Y(ve){return h&&ve.alternate===null&&(ve.flags|=2),ve}function ie(ve,oe,Te,ft){return oe===null||oe.tag!==6?(oe=mS(Te,ve.mode,ft),oe.return=ve,oe):(oe=R(oe,Te),oe.return=ve,oe)}function Ce(ve,oe,Te,ft){var Pt=Te.type;return Pt===u?Tt(ve,oe,Te.props.children,ft,Te.key):oe!==null&&(oe.elementType===Pt||typeof Pt=="object"&&Pt!==null&&Pt.$$typeof===E&&iP(Pt)===oe.type)?(ft=R(oe,Te.props),ft.ref=Zf(ve,oe,Te),ft.return=ve,ft):(ft=nv(Te.type,Te.key,Te.props,null,ve.mode,ft),ft.ref=Zf(ve,oe,Te),ft.return=ve,ft)}function qe(ve,oe,Te,ft){return oe===null||oe.tag!==4||oe.stateNode.containerInfo!==Te.containerInfo||oe.stateNode.implementation!==Te.implementation?(oe=gS(Te,ve.mode,ft),oe.return=ve,oe):(oe=R(oe,Te.children||[]),oe.return=ve,oe)}function Tt(ve,oe,Te,ft,Pt){return oe===null||oe.tag!==7?(oe=Qc(Te,ve.mode,ft,Pt),oe.return=ve,oe):(oe=R(oe,Te),oe.return=ve,oe)}function nn(ve,oe,Te){if(typeof oe=="string"&&oe!==""||typeof oe=="number")return oe=mS(""+oe,ve.mode,Te),oe.return=ve,oe;if(typeof oe=="object"&&oe!==null){switch(oe.$$typeof){case l:return Te=nv(oe.type,oe.key,oe.props,null,ve.mode,Te),Te.ref=Zf(ve,null,oe),Te.return=ve,Te;case c:return oe=gS(oe,ve.mode,Te),oe.return=ve,oe;case E:var ft=oe._init;return nn(ve,ft(oe._payload),Te)}if(ce(oe)||O(oe))return oe=Qc(oe,ve.mode,Te,null),oe.return=ve,oe;Ey(ve,oe)}return null}function kt(ve,oe,Te,ft){var Pt=oe!==null?oe.key:null;if(typeof Te=="string"&&Te!==""||typeof Te=="number")return Pt!==null?null:ie(ve,oe,""+Te,ft);if(typeof Te=="object"&&Te!==null){switch(Te.$$typeof){case l:return Te.key===Pt?Ce(ve,oe,Te,ft):null;case c:return Te.key===Pt?qe(ve,oe,Te,ft):null;case E:return Pt=Te._init,kt(ve,oe,Pt(Te._payload),ft)}if(ce(Te)||O(Te))return Pt!==null?null:Tt(ve,oe,Te,ft,null);Ey(ve,Te)}return null}function Yn(ve,oe,Te,ft,Pt){if(typeof ft=="string"&&ft!==""||typeof ft=="number")return ve=ve.get(Te)||null,ie(oe,ve,""+ft,Pt);if(typeof ft=="object"&&ft!==null){switch(ft.$$typeof){case l:return ve=ve.get(ft.key===null?Te:ft.key)||null,Ce(oe,ve,ft,Pt);case c:return ve=ve.get(ft.key===null?Te:ft.key)||null,qe(oe,ve,ft,Pt);case E:var hn=ft._init;return Yn(ve,oe,Te,hn(ft._payload),Pt)}if(ce(ft)||O(ft))return ve=ve.get(Te)||null,Tt(oe,ve,ft,Pt,null);Ey(oe,ft)}return null}function Rt(ve,oe,Te,ft){for(var Pt=null,hn=null,rn=oe,On=oe=0,er=null;rn!==null&&On<Te.length;On++){rn.index>On?(er=rn,rn=null):er=rn.sibling;var Un=kt(ve,rn,Te[On],ft);if(Un===null){rn===null&&(rn=er);break}h&&rn&&Un.alternate===null&&p(ve,rn),oe=k(Un,oe,On),hn===null?Pt=Un:hn.sibling=Un,hn=Un,rn=er}if(On===Te.length)return _(ve,rn),yn&&Sn(ve,On),Pt;if(rn===null){for(;On<Te.length;On++)rn=nn(ve,Te[On],ft),rn!==null&&(oe=k(rn,oe,On),hn===null?Pt=rn:hn.sibling=rn,hn=rn);return yn&&Sn(ve,On),Pt}for(rn=T(ve,rn);On<Te.length;On++)er=Yn(rn,ve,On,Te[On],ft),er!==null&&(h&&er.alternate!==null&&rn.delete(er.key===null?On:er.key),oe=k(er,oe,On),hn===null?Pt=er:hn.sibling=er,hn=er);return h&&rn.forEach(function(gl){return p(ve,gl)}),yn&&Sn(ve,On),Pt}function Sr(ve,oe,Te,ft){var Pt=O(Te);if(typeof Pt!="function")throw Error(o(150));if(Te=Pt.call(Te),Te==null)throw Error(o(151));for(var hn=Pt=null,rn=oe,On=oe=0,er=null,Un=Te.next();rn!==null&&!Un.done;On++,Un=Te.next()){rn.index>On?(er=rn,rn=null):er=rn.sibling;var gl=kt(ve,rn,Un.value,ft);if(gl===null){rn===null&&(rn=er);break}h&&rn&&gl.alternate===null&&p(ve,rn),oe=k(gl,oe,On),hn===null?Pt=gl:hn.sibling=gl,hn=gl,rn=er}if(Un.done)return _(ve,rn),yn&&Sn(ve,On),Pt;if(rn===null){for(;!Un.done;On++,Un=Te.next())Un=nn(ve,Un.value,ft),Un!==null&&(oe=k(Un,oe,On),hn===null?Pt=Un:hn.sibling=Un,hn=Un);return yn&&Sn(ve,On),Pt}for(rn=T(ve,rn);!Un.done;On++,Un=Te.next())Un=Yn(rn,ve,On,Un.value,ft),Un!==null&&(h&&Un.alternate!==null&&rn.delete(Un.key===null?On:Un.key),oe=k(Un,oe,On),hn===null?Pt=Un:hn.sibling=Un,hn=Un);return h&&rn.forEach(function(CH){return p(ve,CH)}),yn&&Sn(ve,On),Pt}function Zs(ve,oe,Te,ft){if(typeof Te=="object"&&Te!==null&&Te.type===u&&Te.key===null&&(Te=Te.props.children),typeof Te=="object"&&Te!==null){switch(Te.$$typeof){case l:e:{for(var Pt=Te.key,hn=oe;hn!==null;){if(hn.key===Pt){if(Pt=Te.type,Pt===u){if(hn.tag===7){_(ve,hn.sibling),oe=R(hn,Te.props.children),oe.return=ve,ve=oe;break e}}else if(hn.elementType===Pt||typeof Pt=="object"&&Pt!==null&&Pt.$$typeof===E&&iP(Pt)===hn.type){_(ve,hn.sibling),oe=R(hn,Te.props),oe.ref=Zf(ve,hn,Te),oe.return=ve,ve=oe;break e}_(ve,hn);break}else p(ve,hn);hn=hn.sibling}Te.type===u?(oe=Qc(Te.props.children,ve.mode,ft,Te.key),oe.return=ve,ve=oe):(ft=nv(Te.type,Te.key,Te.props,null,ve.mode,ft),ft.ref=Zf(ve,oe,Te),ft.return=ve,ve=ft)}return Y(ve);case c:e:{for(hn=Te.key;oe!==null;){if(oe.key===hn)if(oe.tag===4&&oe.stateNode.containerInfo===Te.containerInfo&&oe.stateNode.implementation===Te.implementation){_(ve,oe.sibling),oe=R(oe,Te.children||[]),oe.return=ve,ve=oe;break e}else{_(ve,oe);break}else p(ve,oe);oe=oe.sibling}oe=gS(Te,ve.mode,ft),oe.return=ve,ve=oe}return Y(ve);case E:return hn=Te._init,Zs(ve,oe,hn(Te._payload),ft)}if(ce(Te))return Rt(ve,oe,Te,ft);if(O(Te))return Sr(ve,oe,Te,ft);Ey(ve,Te)}return typeof Te=="string"&&Te!==""||typeof Te=="number"?(Te=""+Te,oe!==null&&oe.tag===6?(_(ve,oe.sibling),oe=R(oe,Te),oe.return=ve,ve=oe):(_(ve,oe),oe=mS(Te,ve.mode,ft),oe.return=ve,ve=oe),Y(ve)):_(ve,oe)}return Zs}var Nh=rP(!0),sP=rP(!1),ep={},Ks=nt(ep),tp=nt(ep),Dh=nt(ep);function Ho(h){if(h===ep)throw Error(o(174));return h}function Db(h,p){vt(Dh,p),vt(tp,h),vt(Ks,ep),h=de(p),We(Ks),vt(Ks,h)}function Lh(){We(Ks),We(tp),We(Dh)}function oP(h){var p=Ho(Dh.current),_=Ho(Ks.current);p=W(_,h.type,p),_!==p&&(vt(tp,h),vt(Ks,p))}function Lb(h){tp.current===h&&(We(Ks),We(tp))}var ci=nt(0);function Cy(h){for(var p=h;p!==null;){if(p.tag===13){var _=p.memoizedState;if(_!==null&&(_=_.dehydrated,_===null||ge(_)||ke(_)))return p}else if(p.tag===19&&p.memoizedProps.revealOrder!==void 0){if(p.flags&128)return p}else if(p.child!==null){p.child.return=p,p=p.child;continue}if(p===h)break;for(;p.sibling===null;){if(p.return===null||p.return===h)return null;p=p.return}p.sibling.return=p.return,p=p.sibling}return null}var kb=[];function Ob(){for(var h=0;h<kb.length;h++){var p=kb[h];Ye?p._workInProgressVersionPrimary=null:p._workInProgressVersionSecondary=null}kb.length=0}var Ay=a.ReactCurrentDispatcher,Ys=a.ReactCurrentBatchConfig,kh=0,gi=null,_r=null,Zi=null,My=!1,np=!1,ip=0,J6=0;function wr(){throw Error(o(321))}function Ub(h,p){if(p===null)return!1;for(var _=0;_<p.length&&_<h.length;_++)if(!Ss(h[_],p[_]))return!1;return!0}function Fb(h,p,_,T,R,k){if(kh=k,gi=p,p.memoizedState=null,p.updateQueue=null,p.lanes=0,Ay.current=h===null||h.memoizedState===null?tH:nH,h=_(T,R),np){k=0;do{if(np=!1,ip=0,25<=k)throw Error(o(301));k+=1,Zi=_r=null,p.updateQueue=null,Ay.current=iH,h=_(T,R)}while(np)}if(Ay.current=Dy,p=_r!==null&&_r.next!==null,kh=0,Zi=_r=gi=null,My=!1,p)throw Error(o(300));return h}function jb(){var h=ip!==0;return ip=0,h}function xa(){var h={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Zi===null?gi.memoizedState=Zi=h:Zi=Zi.next=h,Zi}function Go(){if(_r===null){var h=gi.alternate;h=h!==null?h.memoizedState:null}else h=_r.next;var p=Zi===null?gi.memoizedState:Zi.next;if(p!==null)Zi=p,_r=h;else{if(h===null)throw Error(o(310));_r=h,h={memoizedState:_r.memoizedState,baseState:_r.baseState,baseQueue:_r.baseQueue,queue:_r.queue,next:null},Zi===null?gi.memoizedState=Zi=h:Zi=Zi.next=h}return Zi}function qc(h,p){return typeof p=="function"?p(h):p}function Iy(h){var p=Go(),_=p.queue;if(_===null)throw Error(o(311));_.lastRenderedReducer=h;var T=_r,R=T.baseQueue,k=_.pending;if(k!==null){if(R!==null){var Y=R.next;R.next=k.next,k.next=Y}T.baseQueue=R=k,_.pending=null}if(R!==null){k=R.next,T=T.baseState;var ie=Y=null,Ce=null,qe=k;do{var Tt=qe.lane;if((kh&Tt)===Tt)Ce!==null&&(Ce=Ce.next={lane:0,action:qe.action,hasEagerState:qe.hasEagerState,eagerState:qe.eagerState,next:null}),T=qe.hasEagerState?qe.eagerState:h(T,qe.action);else{var nn={lane:Tt,action:qe.action,hasEagerState:qe.hasEagerState,eagerState:qe.eagerState,next:null};Ce===null?(ie=Ce=nn,Y=T):Ce=Ce.next=nn,gi.lanes|=Tt,Uh|=Tt}qe=qe.next}while(qe!==null&&qe!==k);Ce===null?Y=T:Ce.next=ie,Ss(T,p.memoizedState)||(Ms=!0),p.memoizedState=T,p.baseState=Y,p.baseQueue=Ce,_.lastRenderedState=T}if(h=_.interleaved,h!==null){R=h;do k=R.lane,gi.lanes|=k,Uh|=k,R=R.next;while(R!==h)}else R===null&&(_.lanes=0);return[p.memoizedState,_.dispatch]}function Py(h){var p=Go(),_=p.queue;if(_===null)throw Error(o(311));_.lastRenderedReducer=h;var T=_.dispatch,R=_.pending,k=p.memoizedState;if(R!==null){_.pending=null;var Y=R=R.next;do k=h(k,Y.action),Y=Y.next;while(Y!==R);Ss(k,p.memoizedState)||(Ms=!0),p.memoizedState=k,p.baseQueue===null&&(p.baseState=k),_.lastRenderedState=k}return[k,T]}function aP(){}function lP(h,p){var _=gi,T=Go(),R=p(),k=!Ss(T.memoizedState,R);if(k&&(T.memoizedState=R,Ms=!0),T=T.queue,sp(hP.bind(null,_,T,h),[h]),T.getSnapshot!==p||k||Zi!==null&&Zi.memoizedState.tag&1){if(_.flags|=2048,rp(9,uP.bind(null,_,T,R,p),void 0,null),Ni===null)throw Error(o(349));kh&30||cP(_,p,R)}return R}function cP(h,p,_){h.flags|=16384,h={getSnapshot:p,value:_},p=gi.updateQueue,p===null?(p={lastEffect:null,stores:null},gi.updateQueue=p,p.stores=[h]):(_=p.stores,_===null?p.stores=[h]:_.push(h))}function uP(h,p,_,T){p.value=_,p.getSnapshot=T,dP(p)&&Js(h,1,-1)}function hP(h,p,_){return _(function(){dP(p)&&Js(h,1,-1)})}function dP(h){var p=h.getSnapshot;h=h.value;try{var _=p();return!Ss(h,_)}catch{return!0}}function Vb(h){var p=xa();return typeof h=="function"&&(h=h()),p.memoizedState=p.baseState=h,h={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:qc,lastRenderedState:h},p.queue=h,h=h.dispatch=eH.bind(null,gi,h),[p.memoizedState,h]}function rp(h,p,_,T){return h={tag:h,create:p,destroy:_,deps:T,next:null},p=gi.updateQueue,p===null?(p={lastEffect:null,stores:null},gi.updateQueue=p,p.lastEffect=h.next=h):(_=p.lastEffect,_===null?p.lastEffect=h.next=h:(T=_.next,_.next=h,h.next=T,p.lastEffect=h)),h}function fP(){return Go().memoizedState}function Ry(h,p,_,T){var R=xa();gi.flags|=h,R.memoizedState=rp(1|p,_,void 0,T===void 0?null:T)}function Ny(h,p,_,T){var R=Go();T=T===void 0?null:T;var k=void 0;if(_r!==null){var Y=_r.memoizedState;if(k=Y.destroy,T!==null&&Ub(T,Y.deps)){R.memoizedState=rp(p,_,k,T);return}}gi.flags|=h,R.memoizedState=rp(1|p,_,k,T)}function Bb(h,p){return Ry(8390656,8,h,p)}function sp(h,p){return Ny(2048,8,h,p)}function pP(h,p){return Ny(4,2,h,p)}function mP(h,p){return Ny(4,4,h,p)}function gP(h,p){if(typeof p=="function")return h=h(),p(h),function(){p(null)};if(p!=null)return h=h(),p.current=h,function(){p.current=null}}function yP(h,p,_){return _=_!=null?_.concat([h]):null,Ny(4,4,gP.bind(null,p,h),_)}function zb(){}function vP(h,p){var _=Go();p=p===void 0?null:p;var T=_.memoizedState;return T!==null&&p!==null&&Ub(p,T[1])?T[0]:(_.memoizedState=[h,p],h)}function xP(h,p){var _=Go();p=p===void 0?null:p;var T=_.memoizedState;return T!==null&&p!==null&&Ub(p,T[1])?T[0]:(h=h(),_.memoizedState=[h,p],h)}function Q6(h,p){var _=bn;bn=_!==0&&4>_?_:4,h(!0);var T=Ys.transition;Ys.transition={};try{h(!1),p()}finally{bn=_,Ys.transition=T}}function _P(){return Go().memoizedState}function Z6(h,p,_){var T=fl(h);_={lane:T,action:_,hasEagerState:!1,eagerState:null,next:null},wP(h)?bP(p,_):(SP(h,p,_),_=Wr(),h=Js(h,T,_),h!==null&&TP(h,p,T))}function eH(h,p,_){var T=fl(h),R={lane:T,action:_,hasEagerState:!1,eagerState:null,next:null};if(wP(h))bP(p,R);else{SP(h,p,R);var k=h.alternate;if(h.lanes===0&&(k===null||k.lanes===0)&&(k=p.lastRenderedReducer,k!==null))try{var Y=p.lastRenderedState,ie=k(Y,_);if(R.hasEagerState=!0,R.eagerState=ie,Ss(ie,Y))return}catch{}finally{}_=Wr(),h=Js(h,T,_),h!==null&&TP(h,p,T)}}function wP(h){var p=h.alternate;return h===gi||p!==null&&p===gi}function bP(h,p){np=My=!0;var _=h.pending;_===null?p.next=p:(p.next=_.next,_.next=p),h.pending=p}function SP(h,p,_){Ni!==null&&h.mode&1&&!(fn&2)?(h=p.interleaved,h===null?(_.next=_,vr===null?vr=[p]:vr.push(p)):(_.next=h.next,h.next=_),p.interleaved=_):(h=p.pending,h===null?_.next=_:(_.next=h.next,h.next=_),p.pending=_)}function TP(h,p,_){if(_&4194240){var T=p.lanes;T&=h.pendingLanes,_|=T,p.lanes=_,qs(h,_)}}var Dy={readContext:zr,useCallback:wr,useContext:wr,useEffect:wr,useImperativeHandle:wr,useInsertionEffect:wr,useLayoutEffect:wr,useMemo:wr,useReducer:wr,useRef:wr,useState:wr,useDebugValue:wr,useDeferredValue:wr,useTransition:wr,useMutableSource:wr,useSyncExternalStore:wr,useId:wr,unstable_isNewReconciler:!1},tH={readContext:zr,useCallback:function(h,p){return xa().memoizedState=[h,p===void 0?null:p],h},useContext:zr,useEffect:Bb,useImperativeHandle:function(h,p,_){return _=_!=null?_.concat([h]):null,Ry(4194308,4,gP.bind(null,p,h),_)},useLayoutEffect:function(h,p){return Ry(4194308,4,h,p)},useInsertionEffect:function(h,p){return Ry(4,2,h,p)},useMemo:function(h,p){var _=xa();return p=p===void 0?null:p,h=h(),_.memoizedState=[h,p],h},useReducer:function(h,p,_){var T=xa();return p=_!==void 0?_(p):p,T.memoizedState=T.baseState=p,h={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:h,lastRenderedState:p},T.queue=h,h=h.dispatch=Z6.bind(null,gi,h),[T.memoizedState,h]},useRef:function(h){var p=xa();return h={current:h},p.memoizedState=h},useState:Vb,useDebugValue:zb,useDeferredValue:function(h){var p=Vb(h),_=p[0],T=p[1];return Bb(function(){var R=Ys.transition;Ys.transition={};try{T(h)}finally{Ys.transition=R}},[h]),_},useTransition:function(){var h=Vb(!1),p=h[0];return h=Q6.bind(null,h[1]),xa().memoizedState=h,[p,h]},useMutableSource:function(){},useSyncExternalStore:function(h,p,_){var T=gi,R=xa();if(yn){if(_===void 0)throw Error(o(407));_=_()}else{if(_=p(),Ni===null)throw Error(o(349));kh&30||cP(T,p,_)}R.memoizedState=_;var k={value:_,getSnapshot:p};return R.queue=k,Bb(hP.bind(null,T,k,h),[h]),T.flags|=2048,rp(9,uP.bind(null,T,k,_,p),void 0,null),_},useId:function(){var h=xa(),p=Ni.identifierPrefix;if(yn){var _=Be,T=_e;_=(T&~(1<<32-ln(T)-1)).toString(32)+_,p=":"+p+"R"+_,_=ip++,0<_&&(p+="H"+_.toString(32)),p+=":"}else _=J6++,p=":"+p+"r"+_.toString(32)+":";return h.memoizedState=p},unstable_isNewReconciler:!1},nH={readContext:zr,useCallback:vP,useContext:zr,useEffect:sp,useImperativeHandle:yP,useInsertionEffect:pP,useLayoutEffect:mP,useMemo:xP,useReducer:Iy,useRef:fP,useState:function(){return Iy(qc)},useDebugValue:zb,useDeferredValue:function(h){var p=Iy(qc),_=p[0],T=p[1];return sp(function(){var R=Ys.transition;Ys.transition={};try{T(h)}finally{Ys.transition=R}},[h]),_},useTransition:function(){var h=Iy(qc)[0],p=Go().memoizedState;return[h,p]},useMutableSource:aP,useSyncExternalStore:lP,useId:_P,unstable_isNewReconciler:!1},iH={readContext:zr,useCallback:vP,useContext:zr,useEffect:sp,useImperativeHandle:yP,useInsertionEffect:pP,useLayoutEffect:mP,useMemo:xP,useReducer:Py,useRef:fP,useState:function(){return Py(qc)},useDebugValue:zb,useDeferredValue:function(h){var p=Py(qc),_=p[0],T=p[1];return sp(function(){var R=Ys.transition;Ys.transition={};try{T(h)}finally{Ys.transition=R}},[h]),_},useTransition:function(){var h=Py(qc)[0],p=Go().memoizedState;return[h,p]},useMutableSource:aP,useSyncExternalStore:lP,useId:_P,unstable_isNewReconciler:!1};function Hb(h,p){try{var _="",T=p;do _+=Ty(T),T=T.return;while(T);var R=_}catch(k){R=`
Error generating stack: `+k.message+`
`+k.stack}return{value:h,source:p,stack:R}}function Gb(h,p){try{console.error(p.value)}catch(_){setTimeout(function(){throw _})}}var rH=typeof WeakMap=="function"?WeakMap:Map;function EP(h,p,_){_=Cs(-1,_),_.tag=3,_.payload={element:null};var T=p.value;return _.callback=function(){Ky||(Ky=!0,lS=T),Gb(h,p)},_}function CP(h,p,_){_=Cs(-1,_),_.tag=3;var T=h.type.getDerivedStateFromError;if(typeof T=="function"){var R=p.value;_.payload=function(){return T(R)},_.callback=function(){Gb(h,p)}}var k=h.stateNode;return k!==null&&typeof k.componentDidCatch=="function"&&(_.callback=function(){Gb(h,p),typeof T!="function"&&(hl===null?hl=new Set([this]):hl.add(this));var Y=p.stack;this.componentDidCatch(p.value,{componentStack:Y!==null?Y:""})}),_}function AP(h,p,_){var T=h.pingCache;if(T===null){T=h.pingCache=new rH;var R=new Set;T.set(p,R)}else R=T.get(p),R===void 0&&(R=new Set,T.set(p,R));R.has(_)||(R.add(_),h=vH.bind(null,h,p,_),p.then(h,h))}function MP(h){do{var p;if((p=h.tag===13)&&(p=h.memoizedState,p=p!==null?p.dehydrated!==null:!0),p)return h;h=h.return}while(h!==null);return null}function IP(h,p,_,T,R){return h.mode&1?(h.flags|=65536,h.lanes=R,h):(h===p?h.flags|=65536:(h.flags|=128,_.flags|=131072,_.flags&=-52805,_.tag===1&&(_.alternate===null?_.tag=17:(p=Cs(-1,1),p.tag=2,go(_,p))),_.lanes|=1),h)}function Wo(h){h.flags|=4}function PP(h,p){if(h!==null&&h.child===p.child)return!0;if(p.flags&16)return!1;for(h=p.child;h!==null;){if(h.flags&12854||h.subtreeFlags&12854)return!1;h=h.sibling}return!0}var op,ap,Ly,ky;if(rt)op=function(h,p){for(var _=p.child;_!==null;){if(_.tag===5||_.tag===6)ue(h,_.stateNode);else if(_.tag!==4&&_.child!==null){_.child.return=_,_=_.child;continue}if(_===p)break;for(;_.sibling===null;){if(_.return===null||_.return===p)return;_=_.return}_.sibling.return=_.return,_=_.sibling}},ap=function(){},Ly=function(h,p,_,T,R){if(h=h.memoizedProps,h!==T){var k=p.stateNode,Y=Ho(Ks.current);_=le(k,_,h,T,R,Y),(p.updateQueue=_)&&Wo(p)}},ky=function(h,p,_,T){_!==T&&Wo(p)};else if(Ae){op=function(h,p,_,T){for(var R=p.child;R!==null;){if(R.tag===5){var k=R.stateNode;_&&T&&(k=Zt(k,R.type,R.memoizedProps,R)),ue(h,k)}else if(R.tag===6)k=R.stateNode,_&&T&&(k=zi(k,R.memoizedProps,R)),ue(h,k);else if(R.tag!==4){if(R.tag===22&&R.memoizedState!==null)k=R.child,k!==null&&(k.return=R),op(h,R,!0,!0);else if(R.child!==null){R.child.return=R,R=R.child;continue}}if(R===p)break;for(;R.sibling===null;){if(R.return===null||R.return===p)return;R=R.return}R.sibling.return=R.return,R=R.sibling}};var RP=function(h,p,_,T){for(var R=p.child;R!==null;){if(R.tag===5){var k=R.stateNode;_&&T&&(k=Zt(k,R.type,R.memoizedProps,R)),Ft(h,k)}else if(R.tag===6)k=R.stateNode,_&&T&&(k=zi(k,R.memoizedProps,R)),Ft(h,k);else if(R.tag!==4){if(R.tag===22&&R.memoizedState!==null)k=R.child,k!==null&&(k.return=R),RP(h,R,!0,!0);else if(R.child!==null){R.child.return=R,R=R.child;continue}}if(R===p)break;for(;R.sibling===null;){if(R.return===null||R.return===p)return;R=R.return}R.sibling.return=R.return,R=R.sibling}};ap=function(h,p){var _=p.stateNode;if(!PP(h,p)){h=_.containerInfo;var T=Ke(h);RP(T,p,!1,!1),_.pendingChildren=T,Wo(p),kn(h,T)}},Ly=function(h,p,_,T,R){var k=h.stateNode,Y=h.memoizedProps;if((h=PP(h,p))&&Y===T)p.stateNode=k;else{var ie=p.stateNode,Ce=Ho(Ks.current),qe=null;Y!==T&&(qe=le(ie,_,Y,T,R,Ce)),h&&qe===null?p.stateNode=k:(k=it(k,qe,_,Y,T,p,h,ie),ye(k,_,T,R,Ce)&&Wo(p),p.stateNode=k,h?Wo(p):op(k,p,!1,!1))}},ky=function(h,p,_,T){_!==T?(h=Ho(Dh.current),_=Ho(Ks.current),p.stateNode=Pe(T,h,_,p),Wo(p)):p.stateNode=h.stateNode}}else ap=function(){},Ly=function(){},ky=function(){};function lp(h,p){if(!yn)switch(h.tailMode){case"hidden":p=h.tail;for(var _=null;p!==null;)p.alternate!==null&&(_=p),p=p.sibling;_===null?h.tail=null:_.sibling=null;break;case"collapsed":_=h.tail;for(var T=null;_!==null;)_.alternate!==null&&(T=_),_=_.sibling;T===null?p||h.tail===null?h.tail=null:h.tail.sibling=null:T.sibling=null}}function br(h){var p=h.alternate!==null&&h.alternate.child===h.child,_=0,T=0;if(p)for(var R=h.child;R!==null;)_|=R.lanes|R.childLanes,T|=R.subtreeFlags&14680064,T|=R.flags&14680064,R.return=h,R=R.sibling;else for(R=h.child;R!==null;)_|=R.lanes|R.childLanes,T|=R.subtreeFlags,T|=R.flags,R.return=h,R=R.sibling;return h.subtreeFlags|=T,h.childLanes=_,p}function sH(h,p,_){var T=p.pendingProps;switch(Pi(p),p.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return br(p),null;case 1:return En(p.type)&&pn(),br(p),null;case 3:return T=p.stateNode,Lh(),We(en),We(zt),Ob(),T.pendingContext&&(T.context=T.pendingContext,T.pendingContext=null),(h===null||h.child===null)&&(Qf(p)?Wo(p):h===null||h.memoizedState.isDehydrated&&!(p.flags&256)||(p.flags|=1024,Hr!==null&&(hS(Hr),Hr=null))),ap(h,p),br(p),null;case 5:Lb(p),_=Ho(Dh.current);var R=p.type;if(h!==null&&p.stateNode!=null)Ly(h,p,R,T,_),h.ref!==p.ref&&(p.flags|=512,p.flags|=2097152);else{if(!T){if(p.stateNode===null)throw Error(o(166));return br(p),null}if(h=Ho(Ks.current),Qf(p)){if(!Ee)throw Error(o(175));h=dt(p.stateNode,p.type,p.memoizedProps,_,h,p,!zo),p.updateQueue=h,h!==null&&Wo(p)}else{var k=J(R,T,_,h,p);op(k,p,!1,!1),p.stateNode=k,ye(k,R,T,_,h)&&Wo(p)}p.ref!==null&&(p.flags|=512,p.flags|=2097152)}return br(p),null;case 6:if(h&&p.stateNode!=null)ky(h,p,h.memoizedProps,T);else{if(typeof T!="string"&&p.stateNode===null)throw Error(o(166));if(h=Ho(Dh.current),_=Ho(Ks.current),Qf(p)){if(!Ee)throw Error(o(176));if(h=p.stateNode,T=p.memoizedProps,(_=bt(h,T,p,!zo))&&(R=Vn,R!==null))switch(k=(R.mode&1)!==0,R.tag){case 3:ne(R.stateNode.containerInfo,h,T,k);break;case 5:me(R.type,R.memoizedProps,R.stateNode,h,T,k)}_&&Wo(p)}else p.stateNode=Pe(T,h,_,p)}return br(p),null;case 13:if(We(ci),T=p.memoizedState,yn&&Ri!==null&&p.mode&1&&!(p.flags&128)){for(h=Ri;h;)h=mt(h);return Rh(),p.flags|=98560,p}if(T!==null&&T.dehydrated!==null){if(T=Qf(p),h===null){if(!T)throw Error(o(318));if(!Ee)throw Error(o(344));if(h=p.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(o(317));Ot(h,p)}else Rh(),!(p.flags&128)&&(p.memoizedState=null),p.flags|=4;return br(p),null}return Hr!==null&&(hS(Hr),Hr=null),p.flags&128?(p.lanes=_,p):(T=T!==null,_=!1,h===null?Qf(p):_=h.memoizedState!==null,T&&!_&&(p.child.flags|=8192,p.mode&1&&(h===null||ci.current&1?Wi===0&&(Wi=3):fS())),p.updateQueue!==null&&(p.flags|=4),br(p),null);case 4:return Lh(),ap(h,p),h===null&&pt(p.stateNode.containerInfo),br(p),null;case 10:return Ch(p.type._context),br(p),null;case 17:return En(p.type)&&pn(),br(p),null;case 19:if(We(ci),R=p.memoizedState,R===null)return br(p),null;if(T=(p.flags&128)!==0,k=R.rendering,k===null)if(T)lp(R,!1);else{if(Wi!==0||h!==null&&h.flags&128)for(h=p.child;h!==null;){if(k=Cy(h),k!==null){for(p.flags|=128,lp(R,!1),h=k.updateQueue,h!==null&&(p.updateQueue=h,p.flags|=4),p.subtreeFlags=0,h=_,T=p.child;T!==null;)_=T,R=h,_.flags&=14680066,k=_.alternate,k===null?(_.childLanes=0,_.lanes=R,_.child=null,_.subtreeFlags=0,_.memoizedProps=null,_.memoizedState=null,_.updateQueue=null,_.dependencies=null,_.stateNode=null):(_.childLanes=k.childLanes,_.lanes=k.lanes,_.child=k.child,_.subtreeFlags=0,_.deletions=null,_.memoizedProps=k.memoizedProps,_.memoizedState=k.memoizedState,_.updateQueue=k.updateQueue,_.type=k.type,R=k.dependencies,_.dependencies=R===null?null:{lanes:R.lanes,firstContext:R.firstContext}),T=T.sibling;return vt(ci,ci.current&1|2),p.child}h=h.sibling}R.tail!==null&&Mi()>aS&&(p.flags|=128,T=!0,lp(R,!1),p.lanes=4194304)}else{if(!T)if(h=Cy(k),h!==null){if(p.flags|=128,T=!0,h=h.updateQueue,h!==null&&(p.updateQueue=h,p.flags|=4),lp(R,!0),R.tail===null&&R.tailMode==="hidden"&&!k.alternate&&!yn)return br(p),null}else 2*Mi()-R.renderingStartTime>aS&&_!==1073741824&&(p.flags|=128,T=!0,lp(R,!1),p.lanes=4194304);R.isBackwards?(k.sibling=p.child,p.child=k):(h=R.last,h!==null?h.sibling=k:p.child=k,R.last=k)}return R.tail!==null?(p=R.tail,R.rendering=p,R.tail=p.sibling,R.renderingStartTime=Mi(),p.sibling=null,h=ci.current,vt(ci,T?h&1|2:h&1),p):(br(p),null);case 22:case 23:return dS(),T=p.memoizedState!==null,h!==null&&h.memoizedState!==null!==T&&(p.flags|=8192),T&&p.mode&1?Is&1073741824&&(br(p),rt&&p.subtreeFlags&6&&(p.flags|=8192)):br(p),null;case 24:return null;case 25:return null}throw Error(o(156,p.tag))}var oH=a.ReactCurrentOwner,Ms=!1;function Gr(h,p,_,T){p.child=h===null?sP(p,null,_,T):Nh(p,h.child,_,T)}function NP(h,p,_,T,R){_=_.render;var k=p.ref;return ul(p,R),T=Fb(h,p,_,T,k,R),_=jb(),h!==null&&!Ms?(p.updateQueue=h.updateQueue,p.flags&=-2053,h.lanes&=~R,_a(h,p,R)):(yn&&_&&gn(p),p.flags|=1,Gr(h,p,T,R),p.child)}function DP(h,p,_,T,R){if(h===null){var k=_.type;return typeof k=="function"&&!pS(k)&&k.defaultProps===void 0&&_.compare===null&&_.defaultProps===void 0?(p.tag=15,p.type=k,LP(h,p,k,T,R)):(h=nv(_.type,null,T,p,p.mode,R),h.ref=p.ref,h.return=p,p.child=h)}if(k=h.child,!(h.lanes&R)){var Y=k.memoizedProps;if(_=_.compare,_=_!==null?_:ga,_(Y,T)&&h.ref===p.ref)return _a(h,p,R)}return p.flags|=1,h=ml(k,T),h.ref=p.ref,h.return=p,p.child=h}function LP(h,p,_,T,R){if(h!==null&&ga(h.memoizedProps,T)&&h.ref===p.ref)if(Ms=!1,(h.lanes&R)!==0)h.flags&131072&&(Ms=!0);else return p.lanes=h.lanes,_a(h,p,R);return Wb(h,p,_,T,R)}function kP(h,p,_){var T=p.pendingProps,R=T.children,k=h!==null?h.memoizedState:null;if(T.mode==="hidden")if(!(p.mode&1))p.memoizedState={baseLanes:0,cachePool:null},vt(Oh,Is),Is|=_;else if(_&1073741824)p.memoizedState={baseLanes:0,cachePool:null},T=k!==null?k.baseLanes:_,vt(Oh,Is),Is|=T;else return h=k!==null?k.baseLanes|_:_,p.lanes=p.childLanes=1073741824,p.memoizedState={baseLanes:h,cachePool:null},p.updateQueue=null,vt(Oh,Is),Is|=h,null;else k!==null?(T=k.baseLanes|_,p.memoizedState=null):T=_,vt(Oh,Is),Is|=T;return Gr(h,p,R,_),p.child}function OP(h,p){var _=p.ref;(h===null&&_!==null||h!==null&&h.ref!==_)&&(p.flags|=512,p.flags|=2097152)}function Wb(h,p,_,T,R){var k=En(_)?$t:zt.current;return k=It(p,k),ul(p,R),_=Fb(h,p,_,T,k,R),T=jb(),h!==null&&!Ms?(p.updateQueue=h.updateQueue,p.flags&=-2053,h.lanes&=~R,_a(h,p,R)):(yn&&T&&gn(p),p.flags|=1,Gr(h,p,_,R),p.child)}function UP(h,p,_,T,R){if(En(_)){var k=!0;Jn(p)}else k=!1;if(ul(p,R),p.stateNode===null)h!==null&&(h.alternate=null,p.alternate=null,p.flags|=2),Wc(p,_,T),Ph(p,_,T,R),T=!0;else if(h===null){var Y=p.stateNode,ie=p.memoizedProps;Y.props=ie;var Ce=Y.context,qe=_.contextType;typeof qe=="object"&&qe!==null?qe=zr(qe):(qe=En(_)?$t:zt.current,qe=It(p,qe));var Tt=_.getDerivedStateFromProps,nn=typeof Tt=="function"||typeof Y.getSnapshotBeforeUpdate=="function";nn||typeof Y.UNSAFE_componentWillReceiveProps!="function"&&typeof Y.componentWillReceiveProps!="function"||(ie!==T||Ce!==qe)&&xr(p,Y,T,qe),mo=!1;var kt=p.memoizedState;Y.state=kt,Hc(p,T,Y,R),Ce=p.memoizedState,ie!==T||kt!==Ce||en.current||mo?(typeof Tt=="function"&&(Ih(p,_,Tt,T),Ce=p.memoizedState),(ie=mo||Jf(p,_,ie,T,kt,Ce,qe))?(nn||typeof Y.UNSAFE_componentWillMount!="function"&&typeof Y.componentWillMount!="function"||(typeof Y.componentWillMount=="function"&&Y.componentWillMount(),typeof Y.UNSAFE_componentWillMount=="function"&&Y.UNSAFE_componentWillMount()),typeof Y.componentDidMount=="function"&&(p.flags|=4194308)):(typeof Y.componentDidMount=="function"&&(p.flags|=4194308),p.memoizedProps=T,p.memoizedState=Ce),Y.props=T,Y.state=Ce,Y.context=qe,T=ie):(typeof Y.componentDidMount=="function"&&(p.flags|=4194308),T=!1)}else{Y=p.stateNode,Mh(h,p),ie=p.memoizedProps,qe=p.type===p.elementType?ie:wi(p.type,ie),Y.props=qe,nn=p.pendingProps,kt=Y.context,Ce=_.contextType,typeof Ce=="object"&&Ce!==null?Ce=zr(Ce):(Ce=En(_)?$t:zt.current,Ce=It(p,Ce));var Yn=_.getDerivedStateFromProps;(Tt=typeof Yn=="function"||typeof Y.getSnapshotBeforeUpdate=="function")||typeof Y.UNSAFE_componentWillReceiveProps!="function"&&typeof Y.componentWillReceiveProps!="function"||(ie!==nn||kt!==Ce)&&xr(p,Y,T,Ce),mo=!1,kt=p.memoizedState,Y.state=kt,Hc(p,T,Y,R);var Rt=p.memoizedState;ie!==nn||kt!==Rt||en.current||mo?(typeof Yn=="function"&&(Ih(p,_,Yn,T),Rt=p.memoizedState),(qe=mo||Jf(p,_,qe,T,kt,Rt,Ce)||!1)?(Tt||typeof Y.UNSAFE_componentWillUpdate!="function"&&typeof Y.componentWillUpdate!="function"||(typeof Y.componentWillUpdate=="function"&&Y.componentWillUpdate(T,Rt,Ce),typeof Y.UNSAFE_componentWillUpdate=="function"&&Y.UNSAFE_componentWillUpdate(T,Rt,Ce)),typeof Y.componentDidUpdate=="function"&&(p.flags|=4),typeof Y.getSnapshotBeforeUpdate=="function"&&(p.flags|=1024)):(typeof Y.componentDidUpdate!="function"||ie===h.memoizedProps&&kt===h.memoizedState||(p.flags|=4),typeof Y.getSnapshotBeforeUpdate!="function"||ie===h.memoizedProps&&kt===h.memoizedState||(p.flags|=1024),p.memoizedProps=T,p.memoizedState=Rt),Y.props=T,Y.state=Rt,Y.context=Ce,T=qe):(typeof Y.componentDidUpdate!="function"||ie===h.memoizedProps&&kt===h.memoizedState||(p.flags|=4),typeof Y.getSnapshotBeforeUpdate!="function"||ie===h.memoizedProps&&kt===h.memoizedState||(p.flags|=1024),T=!1)}return qb(h,p,_,T,k,R)}function qb(h,p,_,T,R,k){OP(h,p);var Y=(p.flags&128)!==0;if(!T&&!Y)return R&&Qi(p,_,!1),_a(h,p,k);T=p.stateNode,oH.current=p;var ie=Y&&typeof _.getDerivedStateFromError!="function"?null:T.render();return p.flags|=1,h!==null&&Y?(p.child=Nh(p,h.child,null,k),p.child=Nh(p,null,ie,k)):Gr(h,p,ie,k),p.memoizedState=T.state,R&&Qi(p,_,!0),p.child}function FP(h){var p=h.stateNode;p.pendingContext?or(h,p.pendingContext,p.pendingContext!==p.context):p.context&&or(h,p.context,!1),Db(h,p.containerInfo)}function jP(h,p,_,T,R){return Rh(),Nb(R),p.flags|=256,Gr(h,p,_,T),p.child}var Oy={dehydrated:null,treeContext:null,retryLane:0};function Uy(h){return{baseLanes:h,cachePool:null}}function VP(h,p,_){var T=p.pendingProps,R=ci.current,k=!1,Y=(p.flags&128)!==0,ie;if((ie=Y)||(ie=h!==null&&h.memoizedState===null?!1:(R&2)!==0),ie?(k=!0,p.flags&=-129):(h===null||h.memoizedState!==null)&&(R|=1),vt(ci,R&1),h===null)return Rb(p),h=p.memoizedState,h!==null&&(h=h.dehydrated,h!==null)?(p.mode&1?ke(h)?p.lanes=8:p.lanes=1073741824:p.lanes=1,null):(R=T.children,h=T.fallback,k?(T=p.mode,k=p.child,R={mode:"hidden",children:R},!(T&1)&&k!==null?(k.childLanes=0,k.pendingProps=R):k=iv(R,T,0,null),h=Qc(h,T,_,null),k.return=p,h.return=p,k.sibling=h,p.child=k,p.child.memoizedState=Uy(_),p.memoizedState=Oy,h):$b(p,R));if(R=h.memoizedState,R!==null){if(ie=R.dehydrated,ie!==null){if(Y)return p.flags&256?(p.flags&=-257,Fy(h,p,_,Error(o(422)))):p.memoizedState!==null?(p.child=h.child,p.flags|=128,null):(k=T.fallback,R=p.mode,T=iv({mode:"visible",children:T.children},R,0,null),k=Qc(k,R,_,null),k.flags|=2,T.return=p,k.return=p,T.sibling=k,p.child=T,p.mode&1&&Nh(p,h.child,null,_),p.child.memoizedState=Uy(_),p.memoizedState=Oy,k);if(!(p.mode&1))p=Fy(h,p,_,null);else if(ke(ie))p=Fy(h,p,_,Error(o(419)));else if(T=(_&h.childLanes)!==0,Ms||T){if(T=Ni,T!==null){switch(_&-_){case 4:k=2;break;case 16:k=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:k=32;break;case 536870912:k=268435456;break;default:k=0}T=k&(T.suspendedLanes|_)?0:k,T!==0&&T!==R.retryLane&&(R.retryLane=T,Js(h,T,-1))}fS(),p=Fy(h,p,_,Error(o(421)))}else ge(ie)?(p.flags|=128,p.child=h.child,p=xH.bind(null,h),Je(ie,p),p=null):(_=R.treeContext,Ee&&(Ri=ht(ie),Vn=p,yn=!0,Hr=null,zo=!1,_!==null&&(L[G++]=_e,L[G++]=Be,L[G++]=ae,_e=_.id,Be=_.overflow,ae=p)),p=$b(p,p.pendingProps.children),p.flags|=4096);return p}return k?(T=zP(h,p,T.children,T.fallback,_),k=p.child,R=h.child.memoizedState,k.memoizedState=R===null?Uy(_):{baseLanes:R.baseLanes|_,cachePool:null},k.childLanes=h.childLanes&~_,p.memoizedState=Oy,T):(_=BP(h,p,T.children,_),p.memoizedState=null,_)}return k?(T=zP(h,p,T.children,T.fallback,_),k=p.child,R=h.child.memoizedState,k.memoizedState=R===null?Uy(_):{baseLanes:R.baseLanes|_,cachePool:null},k.childLanes=h.childLanes&~_,p.memoizedState=Oy,T):(_=BP(h,p,T.children,_),p.memoizedState=null,_)}function $b(h,p){return p=iv({mode:"visible",children:p},h.mode,0,null),p.return=h,h.child=p}function BP(h,p,_,T){var R=h.child;return h=R.sibling,_=ml(R,{mode:"visible",children:_}),!(p.mode&1)&&(_.lanes=T),_.return=p,_.sibling=null,h!==null&&(T=p.deletions,T===null?(p.deletions=[h],p.flags|=16):T.push(h)),p.child=_}function zP(h,p,_,T,R){var k=p.mode;h=h.child;var Y=h.sibling,ie={mode:"hidden",children:_};return!(k&1)&&p.child!==h?(_=p.child,_.childLanes=0,_.pendingProps=ie,p.deletions=null):(_=ml(h,ie),_.subtreeFlags=h.subtreeFlags&14680064),Y!==null?T=ml(Y,T):(T=Qc(T,k,R,null),T.flags|=2),T.return=p,_.return=p,_.sibling=T,p.child=_,T}function Fy(h,p,_,T){return T!==null&&Nb(T),Nh(p,h.child,null,_),h=$b(p,p.pendingProps.children),h.flags|=2,p.memoizedState=null,h}function HP(h,p,_){h.lanes|=p;var T=h.alternate;T!==null&&(T.lanes|=p),cl(h.return,p,_)}function Xb(h,p,_,T,R){var k=h.memoizedState;k===null?h.memoizedState={isBackwards:p,rendering:null,renderingStartTime:0,last:T,tail:_,tailMode:R}:(k.isBackwards=p,k.rendering=null,k.renderingStartTime=0,k.last=T,k.tail=_,k.tailMode=R)}function GP(h,p,_){var T=p.pendingProps,R=T.revealOrder,k=T.tail;if(Gr(h,p,T.children,_),T=ci.current,T&2)T=T&1|2,p.flags|=128;else{if(h!==null&&h.flags&128)e:for(h=p.child;h!==null;){if(h.tag===13)h.memoizedState!==null&&HP(h,_,p);else if(h.tag===19)HP(h,_,p);else if(h.child!==null){h.child.return=h,h=h.child;continue}if(h===p)break e;for(;h.sibling===null;){if(h.return===null||h.return===p)break e;h=h.return}h.sibling.return=h.return,h=h.sibling}T&=1}if(vt(ci,T),!(p.mode&1))p.memoizedState=null;else switch(R){case"forwards":for(_=p.child,R=null;_!==null;)h=_.alternate,h!==null&&Cy(h)===null&&(R=_),_=_.sibling;_=R,_===null?(R=p.child,p.child=null):(R=_.sibling,_.sibling=null),Xb(p,!1,R,_,k);break;case"backwards":for(_=null,R=p.child,p.child=null;R!==null;){if(h=R.alternate,h!==null&&Cy(h)===null){p.child=R;break}h=R.sibling,R.sibling=_,_=R,R=h}Xb(p,!0,_,null,k);break;case"together":Xb(p,!1,null,null,void 0);break;default:p.memoizedState=null}return p.child}function _a(h,p,_){if(h!==null&&(p.dependencies=h.dependencies),Uh|=p.lanes,!(_&p.childLanes))return null;if(h!==null&&p.child!==h.child)throw Error(o(153));if(p.child!==null){for(h=p.child,_=ml(h,h.pendingProps),p.child=_,_.return=p;h.sibling!==null;)h=h.sibling,_=_.sibling=ml(h,h.pendingProps),_.return=p;_.sibling=null}return p.child}function aH(h,p,_){switch(p.tag){case 3:FP(p),Rh();break;case 5:oP(p);break;case 1:En(p.type)&&Jn(p);break;case 4:Db(p,p.stateNode.containerInfo);break;case 10:zc(p,p.type._context,p.memoizedProps.value);break;case 13:var T=p.memoizedState;if(T!==null)return T.dehydrated!==null?(vt(ci,ci.current&1),p.flags|=128,null):_&p.child.childLanes?VP(h,p,_):(vt(ci,ci.current&1),h=_a(h,p,_),h!==null?h.sibling:null);vt(ci,ci.current&1);break;case 19:if(T=(_&p.childLanes)!==0,h.flags&128){if(T)return GP(h,p,_);p.flags|=128}var R=p.memoizedState;if(R!==null&&(R.rendering=null,R.tail=null,R.lastEffect=null),vt(ci,ci.current),T)break;return null;case 22:case 23:return p.lanes=0,kP(h,p,_)}return _a(h,p,_)}function lH(h,p){switch(Pi(p),p.tag){case 1:return En(p.type)&&pn(),h=p.flags,h&65536?(p.flags=h&-65537|128,p):null;case 3:return Lh(),We(en),We(zt),Ob(),h=p.flags,h&65536&&!(h&128)?(p.flags=h&-65537|128,p):null;case 5:return Lb(p),null;case 13:if(We(ci),h=p.memoizedState,h!==null&&h.dehydrated!==null){if(p.alternate===null)throw Error(o(340));Rh()}return h=p.flags,h&65536?(p.flags=h&-65537|128,p):null;case 19:return We(ci),null;case 4:return Lh(),null;case 10:return Ch(p.type._context),null;case 22:case 23:return dS(),null;case 24:return null;default:return null}}var jy=!1,$c=!1,cH=typeof WeakSet=="function"?WeakSet:Set,at=null;function Vy(h,p){var _=h.ref;if(_!==null)if(typeof _=="function")try{_(null)}catch(T){ss(h,p,T)}else _.current=null}function Kb(h,p,_){try{_()}catch(T){ss(h,p,T)}}var WP=!1;function uH(h,p){for(Z(h.containerInfo),at=p;at!==null;)if(h=at,p=h.child,(h.subtreeFlags&1028)!==0&&p!==null)p.return=h,at=p;else for(;at!==null;){h=at;try{var _=h.alternate;if(h.flags&1024)switch(h.tag){case 0:case 11:case 15:break;case 1:if(_!==null){var T=_.memoizedProps,R=_.memoizedState,k=h.stateNode,Y=k.getSnapshotBeforeUpdate(h.elementType===h.type?T:wi(h.type,T),R);k.__reactInternalSnapshotBeforeUpdate=Y}break;case 3:rt&&Ie(h.stateNode.containerInfo);break;case 5:case 6:case 4:case 17:break;default:throw Error(o(163))}}catch(ie){ss(h,h.return,ie)}if(p=h.sibling,p!==null){p.return=h.return,at=p;break}at=h.return}return _=WP,WP=!1,_}function Xc(h,p,_){var T=p.updateQueue;if(T=T!==null?T.lastEffect:null,T!==null){var R=T=T.next;do{if((R.tag&h)===h){var k=R.destroy;R.destroy=void 0,k!==void 0&&Kb(p,_,k)}R=R.next}while(R!==T)}}function cp(h,p){if(p=p.updateQueue,p=p!==null?p.lastEffect:null,p!==null){var _=p=p.next;do{if((_.tag&h)===h){var T=_.create;_.destroy=T()}_=_.next}while(_!==p)}}function Yb(h){var p=h.ref;if(p!==null){var _=h.stateNode;switch(h.tag){case 5:h=pe(_);break;default:h=_}typeof p=="function"?p(h):p.current=h}}function qP(h,p,_){if(bs&&typeof bs.onCommitFiberUnmount=="function")try{bs.onCommitFiberUnmount(ma,p)}catch{}switch(p.tag){case 0:case 11:case 14:case 15:if(h=p.updateQueue,h!==null&&(h=h.lastEffect,h!==null)){var T=h=h.next;do{var R=T,k=R.destroy;R=R.tag,k!==void 0&&(R&2||R&4)&&Kb(p,_,k),T=T.next}while(T!==h)}break;case 1:if(Vy(p,_),h=p.stateNode,typeof h.componentWillUnmount=="function")try{h.props=p.memoizedProps,h.state=p.memoizedState,h.componentWillUnmount()}catch(Y){ss(p,_,Y)}break;case 5:Vy(p,_);break;case 4:rt?QP(h,p,_):Ae&&Ae&&(p=p.stateNode.containerInfo,_=Ke(p),Xn(p,_))}}function $P(h,p,_){for(var T=p;;)if(qP(h,T,_),T.child===null||rt&&T.tag===4){if(T===p)break;for(;T.sibling===null;){if(T.return===null||T.return===p)return;T=T.return}T.sibling.return=T.return,T=T.sibling}else T.child.return=T,T=T.child}function XP(h){var p=h.alternate;p!==null&&(h.alternate=null,XP(p)),h.child=null,h.deletions=null,h.sibling=null,h.tag===5&&(p=h.stateNode,p!==null&&tt(p)),h.stateNode=null,h.return=null,h.dependencies=null,h.memoizedProps=null,h.memoizedState=null,h.pendingProps=null,h.stateNode=null,h.updateQueue=null}function KP(h){return h.tag===5||h.tag===3||h.tag===4}function YP(h){e:for(;;){for(;h.sibling===null;){if(h.return===null||KP(h.return))return null;h=h.return}for(h.sibling.return=h.return,h=h.sibling;h.tag!==5&&h.tag!==6&&h.tag!==18;){if(h.flags&2||h.child===null||h.tag===4)continue e;h.child.return=h,h=h.child}if(!(h.flags&2))return h.stateNode}}function JP(h){if(rt){e:{for(var p=h.return;p!==null;){if(KP(p))break e;p=p.return}throw Error(o(160))}var _=p;switch(_.tag){case 5:p=_.stateNode,_.flags&32&&(Gt(p),_.flags&=-33),_=YP(h),Qb(h,_,p);break;case 3:case 4:p=_.stateNode.containerInfo,_=YP(h),Jb(h,_,p);break;default:throw Error(o(161))}}}function Jb(h,p,_){var T=h.tag;if(T===5||T===6)h=h.stateNode,p?Lt(_,h,p):Qe(_,h);else if(T!==4&&(h=h.child,h!==null))for(Jb(h,p,_),h=h.sibling;h!==null;)Jb(h,p,_),h=h.sibling}function Qb(h,p,_){var T=h.tag;if(T===5||T===6)h=h.stateNode,p?Ct(_,h,p):Ge(_,h);else if(T!==4&&(h=h.child,h!==null))for(Qb(h,p,_),h=h.sibling;h!==null;)Qb(h,p,_),h=h.sibling}function QP(h,p,_){for(var T=p,R=!1,k,Y;;){if(!R){R=T.return;e:for(;;){if(R===null)throw Error(o(160));switch(k=R.stateNode,R.tag){case 5:Y=!1;break e;case 3:k=k.containerInfo,Y=!0;break e;case 4:k=k.containerInfo,Y=!0;break e}R=R.return}R=!0}if(T.tag===5||T.tag===6)$P(h,T,_),Y?an(k,T.stateNode):ut(k,T.stateNode);else if(T.tag===18)Y?jn(k,T.stateNode):dn(k,T.stateNode);else if(T.tag===4){if(T.child!==null){k=T.stateNode.containerInfo,Y=!0,T.child.return=T,T=T.child;continue}}else if(qP(h,T,_),T.child!==null){T.child.return=T,T=T.child;continue}if(T===p)break;for(;T.sibling===null;){if(T.return===null||T.return===p)return;T=T.return,T.tag===4&&(R=!1)}T.sibling.return=T.return,T=T.sibling}}function Zb(h,p){if(rt){switch(p.tag){case 0:case 11:case 14:case 15:Xc(3,p,p.return),cp(3,p),Xc(5,p,p.return);return;case 1:return;case 5:var _=p.stateNode;if(_!=null){var T=p.memoizedProps;h=h!==null?h.memoizedProps:T;var R=p.type,k=p.updateQueue;p.updateQueue=null,k!==null&&lt(_,k,R,h,T,p)}return;case 6:if(p.stateNode===null)throw Error(o(162));_=p.memoizedProps,Yt(p.stateNode,h!==null?h.memoizedProps:_,_);return;case 3:Ee&&h!==null&&h.memoizedState.isDehydrated&&Zn(p.stateNode.containerInfo);return;case 12:return;case 13:By(p);return;case 19:By(p);return;case 17:return}throw Error(o(163))}switch(p.tag){case 0:case 11:case 14:case 15:Xc(3,p,p.return),cp(3,p),Xc(5,p,p.return);return;case 12:return;case 13:By(p);return;case 19:By(p);return;case 3:Ee&&h!==null&&h.memoizedState.isDehydrated&&Zn(p.stateNode.containerInfo);break;case 22:case 23:return}e:if(Ae){switch(p.tag){case 1:case 5:case 6:break e;case 3:case 4:p=p.stateNode,Xn(p.containerInfo,p.pendingChildren);break e}throw Error(o(163))}}function By(h){var p=h.updateQueue;if(p!==null){h.updateQueue=null;var _=h.stateNode;_===null&&(_=h.stateNode=new cH),p.forEach(function(T){var R=_H.bind(null,h,T);_.has(T)||(_.add(T),T.then(R,R))})}}function hH(h,p){for(at=p;at!==null;){p=at;var _=p.deletions;if(_!==null)for(var T=0;T<_.length;T++){var R=_[T];try{var k=h;rt?QP(k,R,p):$P(k,R,p);var Y=R.alternate;Y!==null&&(Y.return=null),R.return=null}catch(Pt){ss(R,p,Pt)}}if(_=p.child,p.subtreeFlags&12854&&_!==null)_.return=p,at=_;else for(;at!==null;){p=at;try{var ie=p.flags;if(ie&32&&rt&&Gt(p.stateNode),ie&512){var Ce=p.alternate;if(Ce!==null){var qe=Ce.ref;qe!==null&&(typeof qe=="function"?qe(null):qe.current=null)}}if(ie&8192)switch(p.tag){case 13:if(p.memoizedState!==null){var Tt=p.alternate;(Tt===null||Tt.memoizedState===null)&&(oS=Mi())}break;case 22:var nn=p.memoizedState!==null,kt=p.alternate,Yn=kt!==null&&kt.memoizedState!==null;if(_=p,rt){e:if(T=_,R=nn,k=null,rt)for(var Rt=T;;){if(Rt.tag===5){if(k===null){k=Rt;var Sr=Rt.stateNode;R?wn(Sr):Ze(Rt.stateNode,Rt.memoizedProps)}}else if(Rt.tag===6){if(k===null){var Zs=Rt.stateNode;R?ee(Zs):be(Zs,Rt.memoizedProps)}}else if((Rt.tag!==22&&Rt.tag!==23||Rt.memoizedState===null||Rt===T)&&Rt.child!==null){Rt.child.return=Rt,Rt=Rt.child;continue}if(Rt===T)break;for(;Rt.sibling===null;){if(Rt.return===null||Rt.return===T)break e;k===Rt&&(k=null),Rt=Rt.return}k===Rt&&(k=null),Rt.sibling.return=Rt.return,Rt=Rt.sibling}}if(nn&&!Yn&&_.mode&1){at=_;for(var ve=_.child;ve!==null;){for(_=at=ve;at!==null;){T=at;var oe=T.child;switch(T.tag){case 0:case 11:case 14:case 15:Xc(4,T,T.return);break;case 1:Vy(T,T.return);var Te=T.stateNode;if(typeof Te.componentWillUnmount=="function"){var ft=T.return;try{Te.props=T.memoizedProps,Te.state=T.memoizedState,Te.componentWillUnmount()}catch(Pt){ss(T,ft,Pt)}}break;case 5:Vy(T,T.return);break;case 22:if(T.memoizedState!==null){tR(_);continue}}oe!==null?(oe.return=T,at=oe):tR(_)}ve=ve.sibling}}}switch(ie&4102){case 2:JP(p),p.flags&=-3;break;case 6:JP(p),p.flags&=-3,Zb(p.alternate,p);break;case 4096:p.flags&=-4097;break;case 4100:p.flags&=-4097,Zb(p.alternate,p);break;case 4:Zb(p.alternate,p)}}catch(Pt){ss(p,p.return,Pt)}if(_=p.sibling,_!==null){_.return=p.return,at=_;break}at=p.return}}}function dH(h,p,_){at=h,ZP(h)}function ZP(h,p,_){for(var T=(h.mode&1)!==0;at!==null;){var R=at,k=R.child;if(R.tag===22&&T){var Y=R.memoizedState!==null||jy;if(!Y){var ie=R.alternate,Ce=ie!==null&&ie.memoizedState!==null||$c;ie=jy;var qe=$c;if(jy=Y,($c=Ce)&&!qe)for(at=R;at!==null;)Y=at,Ce=Y.child,Y.tag===22&&Y.memoizedState!==null?nR(R):Ce!==null?(Ce.return=Y,at=Ce):nR(R);for(;k!==null;)at=k,ZP(k),k=k.sibling;at=R,jy=ie,$c=qe}eR(h)}else R.subtreeFlags&8772&&k!==null?(k.return=R,at=k):eR(h)}}function eR(h){for(;at!==null;){var p=at;if(p.flags&8772){var _=p.alternate;try{if(p.flags&8772)switch(p.tag){case 0:case 11:case 15:$c||cp(5,p);break;case 1:var T=p.stateNode;if(p.flags&4&&!$c)if(_===null)T.componentDidMount();else{var R=p.elementType===p.type?_.memoizedProps:wi(p.type,_.memoizedProps);T.componentDidUpdate(R,_.memoizedState,T.__reactInternalSnapshotBeforeUpdate)}var k=p.updateQueue;k!==null&&Bo(p,k,T);break;case 3:var Y=p.updateQueue;if(Y!==null){if(_=null,p.child!==null)switch(p.child.tag){case 5:_=pe(p.child.stateNode);break;case 1:_=p.child.stateNode}Bo(p,Y,_)}break;case 5:var ie=p.stateNode;_===null&&p.flags&4&&Fe(ie,p.type,p.memoizedProps,p);break;case 6:break;case 4:break;case 12:break;case 13:if(Ee&&p.memoizedState===null){var Ce=p.alternate;if(Ce!==null){var qe=Ce.memoizedState;if(qe!==null){var Tt=qe.dehydrated;Tt!==null&&Mn(Tt)}}}break;case 19:case 17:case 21:case 22:case 23:break;default:throw Error(o(163))}$c||p.flags&512&&Yb(p)}catch(nn){ss(p,p.return,nn)}}if(p===h){at=null;break}if(_=p.sibling,_!==null){_.return=p.return,at=_;break}at=p.return}}function tR(h){for(;at!==null;){var p=at;if(p===h){at=null;break}var _=p.sibling;if(_!==null){_.return=p.return,at=_;break}at=p.return}}function nR(h){for(;at!==null;){var p=at;try{switch(p.tag){case 0:case 11:case 15:var _=p.return;try{cp(4,p)}catch(Ce){ss(p,_,Ce)}break;case 1:var T=p.stateNode;if(typeof T.componentDidMount=="function"){var R=p.return;try{T.componentDidMount()}catch(Ce){ss(p,R,Ce)}}var k=p.return;try{Yb(p)}catch(Ce){ss(p,k,Ce)}break;case 5:var Y=p.return;try{Yb(p)}catch(Ce){ss(p,Y,Ce)}}}catch(Ce){ss(p,p.return,Ce)}if(p===h){at=null;break}var ie=p.sibling;if(ie!==null){ie.return=p.return,at=ie;break}at=p.return}}var zy=0,Hy=1,Gy=2,Wy=3,qy=4;if(typeof Symbol=="function"&&Symbol.for){var up=Symbol.for;zy=up("selector.component"),Hy=up("selector.has_pseudo_class"),Gy=up("selector.role"),Wy=up("selector.test_id"),qy=up("selector.text")}function eS(h){var p=X(h);if(p!=null){if(typeof p.memoizedProps["data-testname"]!="string")throw Error(o(364));return p}if(h=$(h),h===null)throw Error(o(362));return h.stateNode.current}function tS(h,p){switch(p.$$typeof){case zy:if(h.type===p.value)return!0;break;case Hy:e:{p=p.value,h=[h,0];for(var _=0;_<h.length;){var T=h[_++],R=h[_++],k=p[R];if(T.tag!==5||!Se(T)){for(;k!=null&&tS(T,k);)R++,k=p[R];if(R===p.length){p=!0;break e}else for(T=T.child;T!==null;)h.push(T,R),T=T.sibling}}p=!1}return p;case Gy:if(h.tag===5&&Re(h.stateNode,p.value))return!0;break;case qy:if((h.tag===5||h.tag===6)&&(h=he(h),h!==null&&0<=h.indexOf(p.value)))return!0;break;case Wy:if(h.tag===5&&(h=h.memoizedProps["data-testname"],typeof h=="string"&&h.toLowerCase()===p.value.toLowerCase()))return!0;break;default:throw Error(o(365))}return!1}function nS(h){switch(h.$$typeof){case zy:return"<"+(C(h.value)||"Unknown")+">";case Hy:return":has("+(nS(h)||"")+")";case Gy:return'[role="'+h.value+'"]';case qy:return'"'+h.value+'"';case Wy:return'[data-testname="'+h.value+'"]';default:throw Error(o(365))}}function iR(h,p){var _=[];h=[h,0];for(var T=0;T<h.length;){var R=h[T++],k=h[T++],Y=p[k];if(R.tag!==5||!Se(R)){for(;Y!=null&&tS(R,Y);)k++,Y=p[k];if(k===p.length)_.push(R);else for(R=R.child;R!==null;)h.push(R,k),R=R.sibling}}return _}function iS(h,p){if(!Xe)throw Error(o(363));h=eS(h),h=iR(h,p),p=[],h=Array.from(h);for(var _=0;_<h.length;){var T=h[_++];if(T.tag===5)Se(T)||p.push(T.stateNode);else for(T=T.child;T!==null;)h.push(T),T=T.sibling}return p}var fH=Math.ceil,$y=a.ReactCurrentDispatcher,rS=a.ReactCurrentOwner,bi=a.ReactCurrentBatchConfig,fn=0,Ni=null,Di=null,lr=0,Is=0,Oh=nt(0),Wi=0,hp=null,Uh=0,Xy=0,sS=0,dp=null,is=null,oS=0,aS=1/0;function Fh(){aS=Mi()+500}var Ky=!1,lS=null,hl=null,Yy=!1,dl=null,Jy=0,fp=0,cS=null,Qy=-1,Zy=0;function Wr(){return fn&6?Mi():Qy!==-1?Qy:Qy=Mi()}function fl(h){return h.mode&1?fn&2&&lr!==0?lr&-lr:Sy.transition!==null?(Zy===0&&(h=si,si<<=1,!(si&4194240)&&(si=64),Zy=h),Zy):(h=bn,h!==0?h:Oe()):1}function Js(h,p,_){if(50<fp)throw fp=0,cS=null,Error(o(185));var T=ev(h,p);return T===null?null:(Oc(T,p,_),(!(fn&2)||T!==Ni)&&(T===Ni&&(!(fn&2)&&(Xy|=p),Wi===4&&pl(T,lr)),rs(T,_),p===1&&fn===0&&!(h.mode&1)&&(Fh(),Kn&&Es())),T)}function ev(h,p){h.lanes|=p;var _=h.alternate;for(_!==null&&(_.lanes|=p),_=h,h=h.return;h!==null;)h.childLanes|=p,_=h.alternate,_!==null&&(_.childLanes|=p),_=h,h=h.return;return _.tag===3?_.stateNode:null}function rs(h,p){var _=h.callbackNode;Cb(h,p);var T=wh(h,h===Ni?lr:0);if(T===0)_!==null&&pa(_),h.callbackNode=null,h.callbackPriority=0;else if(p=T&-T,h.callbackPriority!==p){if(_!=null&&pa(_),p===1)h.tag===0?by(sR.bind(null,h)):wy(sR.bind(null,h)),Ve?Mt(function(){fn===0&&Es()}):bh($s,Es),_=null;else{switch(qf(T)){case 1:_=$s;break;case 4:_=Ib;break;case 16:_=$f;break;case 536870912:_=Sh;break;default:_=$f}_=pR(_,rR.bind(null,h))}h.callbackPriority=p,h.callbackNode=_}}function rR(h,p){if(Qy=-1,Zy=0,fn&6)throw Error(o(327));var _=h.callbackNode;if(Jc()&&h.callbackNode!==_)return null;var T=wh(h,h===Ni?lr:0);if(T===0)return null;if(T&30||T&h.expiredLanes||p)p=tv(h,T);else{p=T;var R=fn;fn|=2;var k=lR();(Ni!==h||lr!==p)&&(Fh(),Kc(h,p));do try{gH();break}catch(ie){aR(h,ie)}while(!0);Bc(),$y.current=k,fn=R,Di!==null?p=0:(Ni=null,lr=0,p=Wi)}if(p!==0){if(p===2&&(R=Gf(h),R!==0&&(T=R,p=uS(h,R))),p===1)throw _=hp,Kc(h,0),pl(h,T),rs(h,Mi()),_;if(p===6)pl(h,T);else{if(R=h.current.alternate,!(T&30)&&!pH(R)&&(p=tv(h,T),p===2&&(k=Gf(h),k!==0&&(T=k,p=uS(h,k))),p===1))throw _=hp,Kc(h,0),pl(h,T),rs(h,Mi()),_;switch(h.finishedWork=R,h.finishedLanes=T,p){case 0:case 1:throw Error(o(345));case 2:Yc(h,is);break;case 3:if(pl(h,T),(T&130023424)===T&&(p=oS+500-Mi(),10<p)){if(wh(h,0)!==0)break;if(R=h.suspendedLanes,(R&T)!==T){Wr(),h.pingedLanes|=h.suspendedLanes&R;break}h.timeoutHandle=Me(Yc.bind(null,h,is),p);break}Yc(h,is);break;case 4:if(pl(h,T),(T&4194240)===T)break;for(p=h.eventTimes,R=-1;0<T;){var Y=31-ln(T);k=1<<Y,Y=p[Y],Y>R&&(R=Y),T&=~k}if(T=R,T=Mi()-T,T=(120>T?120:480>T?480:1080>T?1080:1920>T?1920:3e3>T?3e3:4320>T?4320:1960*fH(T/1960))-T,10<T){h.timeoutHandle=Me(Yc.bind(null,h,is),T);break}Yc(h,is);break;case 5:Yc(h,is);break;default:throw Error(o(329))}}}return rs(h,Mi()),h.callbackNode===_?rR.bind(null,h):null}function uS(h,p){var _=dp;return h.current.memoizedState.isDehydrated&&(Kc(h,p).flags|=256),h=tv(h,p),h!==2&&(p=is,is=_,p!==null&&hS(p)),h}function hS(h){is===null?is=h:is.push.apply(is,h)}function pH(h){for(var p=h;;){if(p.flags&16384){var _=p.updateQueue;if(_!==null&&(_=_.stores,_!==null))for(var T=0;T<_.length;T++){var R=_[T],k=R.getSnapshot;R=R.value;try{if(!Ss(k(),R))return!1}catch{return!1}}}if(_=p.child,p.subtreeFlags&16384&&_!==null)_.return=p,p=_;else{if(p===h)break;for(;p.sibling===null;){if(p.return===null||p.return===h)return!0;p=p.return}p.sibling.return=p.return,p=p.sibling}}return!0}function pl(h,p){for(p&=~sS,p&=~Xy,h.suspendedLanes|=p,h.pingedLanes&=~p,h=h.expirationTimes;0<p;){var _=31-ln(p),T=1<<_;h[_]=-1,p&=~T}}function sR(h){if(fn&6)throw Error(o(327));Jc();var p=wh(h,0);if(!(p&1))return rs(h,Mi()),null;var _=tv(h,p);if(h.tag!==0&&_===2){var T=Gf(h);T!==0&&(p=T,_=uS(h,T))}if(_===1)throw _=hp,Kc(h,0),pl(h,p),rs(h,Mi()),_;if(_===6)throw Error(o(345));return h.finishedWork=h.current.alternate,h.finishedLanes=p,Yc(h,is),rs(h,Mi()),null}function oR(h){dl!==null&&dl.tag===0&&!(fn&6)&&Jc();var p=fn;fn|=1;var _=bi.transition,T=bn;try{if(bi.transition=null,bn=1,h)return h()}finally{bn=T,bi.transition=_,fn=p,!(fn&6)&&Es()}}function dS(){Is=Oh.current,We(Oh)}function Kc(h,p){h.finishedWork=null,h.finishedLanes=0;var _=h.timeoutHandle;if(_!==Kt&&(h.timeoutHandle=Kt,gt(_)),Di!==null)for(_=Di.return;_!==null;){var T=_;switch(Pi(T),T.tag){case 1:T=T.type.childContextTypes,T!=null&&pn();break;case 3:Lh(),We(en),We(zt),Ob();break;case 5:Lb(T);break;case 4:Lh();break;case 13:We(ci);break;case 19:We(ci);break;case 10:Ch(T.type._context);break;case 22:case 23:dS()}_=_.return}if(Ni=h,Di=h=ml(h.current,null),lr=Is=p,Wi=0,hp=null,sS=Xy=Uh=0,is=dp=null,vr!==null){for(p=0;p<vr.length;p++)if(_=vr[p],T=_.interleaved,T!==null){_.interleaved=null;var R=T.next,k=_.pending;if(k!==null){var Y=k.next;k.next=R,T.next=Y}_.pending=T}vr=null}return h}function aR(h,p){do{var _=Di;try{if(Bc(),Ay.current=Dy,My){for(var T=gi.memoizedState;T!==null;){var R=T.queue;R!==null&&(R.pending=null),T=T.next}My=!1}if(kh=0,Zi=_r=gi=null,np=!1,ip=0,rS.current=null,_===null||_.return===null){Wi=1,hp=p,Di=null;break}e:{var k=h,Y=_.return,ie=_,Ce=p;if(p=lr,ie.flags|=32768,Ce!==null&&typeof Ce=="object"&&typeof Ce.then=="function"){var qe=Ce,Tt=ie,nn=Tt.tag;if(!(Tt.mode&1)&&(nn===0||nn===11||nn===15)){var kt=Tt.alternate;kt?(Tt.updateQueue=kt.updateQueue,Tt.memoizedState=kt.memoizedState,Tt.lanes=kt.lanes):(Tt.updateQueue=null,Tt.memoizedState=null)}var Yn=MP(Y);if(Yn!==null){Yn.flags&=-257,IP(Yn,Y,ie,k,p),Yn.mode&1&&AP(k,qe,p),p=Yn,Ce=qe;var Rt=p.updateQueue;if(Rt===null){var Sr=new Set;Sr.add(Ce),p.updateQueue=Sr}else Rt.add(Ce);break e}else{if(!(p&1)){AP(k,qe,p),fS();break e}Ce=Error(o(426))}}else if(yn&&ie.mode&1){var Zs=MP(Y);if(Zs!==null){!(Zs.flags&65536)&&(Zs.flags|=256),IP(Zs,Y,ie,k,p),Nb(Ce);break e}}k=Ce,Wi!==4&&(Wi=2),dp===null?dp=[k]:dp.push(k),Ce=Hb(Ce,ie),ie=Y;do{switch(ie.tag){case 3:ie.flags|=65536,p&=-p,ie.lanes|=p;var ve=EP(ie,Ce,p);Kf(ie,ve);break e;case 1:k=Ce;var oe=ie.type,Te=ie.stateNode;if(!(ie.flags&128)&&(typeof oe.getDerivedStateFromError=="function"||Te!==null&&typeof Te.componentDidCatch=="function"&&(hl===null||!hl.has(Te)))){ie.flags|=65536,p&=-p,ie.lanes|=p;var ft=CP(ie,k,p);Kf(ie,ft);break e}}ie=ie.return}while(ie!==null)}uR(_)}catch(Pt){p=Pt,Di===_&&_!==null&&(Di=_=_.return);continue}break}while(!0)}function lR(){var h=$y.current;return $y.current=Dy,h===null?Dy:h}function fS(){(Wi===0||Wi===3||Wi===2)&&(Wi=4),Ni===null||!(Uh&268435455)&&!(Xy&268435455)||pl(Ni,lr)}function tv(h,p){var _=fn;fn|=2;var T=lR();Ni===h&&lr===p||Kc(h,p);do try{mH();break}catch(R){aR(h,R)}while(!0);if(Bc(),fn=_,$y.current=T,Di!==null)throw Error(o(261));return Ni=null,lr=0,Wi}function mH(){for(;Di!==null;)cR(Di)}function gH(){for(;Di!==null&&!Ab();)cR(Di)}function cR(h){var p=fR(h.alternate,h,Is);h.memoizedProps=h.pendingProps,p===null?uR(h):Di=p,rS.current=null}function uR(h){var p=h;do{var _=p.alternate;if(h=p.return,p.flags&32768){if(_=lH(_,p),_!==null){_.flags&=32767,Di=_;return}if(h!==null)h.flags|=32768,h.subtreeFlags=0,h.deletions=null;else{Wi=6,Di=null;return}}else if(_=sH(_,p,Is),_!==null){Di=_;return}if(p=p.sibling,p!==null){Di=p;return}Di=p=h}while(p!==null);Wi===0&&(Wi=5)}function Yc(h,p){var _=bn,T=bi.transition;try{bi.transition=null,bn=1,yH(h,p,_)}finally{bi.transition=T,bn=_}return null}function yH(h,p,_){do Jc();while(dl!==null);if(fn&6)throw Error(o(327));var T=h.finishedWork,R=h.finishedLanes;if(T===null)return null;if(h.finishedWork=null,h.finishedLanes=0,T===h.current)throw Error(o(177));h.callbackNode=null,h.callbackPriority=0;var k=T.lanes|T.childLanes;if(Uc(h,k),h===Ni&&(Di=Ni=null,lr=0),!(T.subtreeFlags&2064)&&!(T.flags&2064)||Yy||(Yy=!0,pR($f,function(){return Jc(),null})),k=(T.flags&15990)!==0,T.subtreeFlags&15990||k){k=bi.transition,bi.transition=null;var Y=bn;bn=1;var ie=fn;fn|=4,rS.current=null,uH(h,T),hH(h,T),F(h.containerInfo),h.current=T,dH(T),Mb(),fn=ie,bn=Y,bi.transition=k}else h.current=T;if(Yy&&(Yy=!1,dl=h,Jy=R),k=h.pendingLanes,k===0&&(hl=null),Fc(T.stateNode),rs(h,Mi()),p!==null)for(_=h.onRecoverableError,T=0;T<p.length;T++)_(p[T]);if(Ky)throw Ky=!1,h=lS,lS=null,h;return Jy&1&&h.tag!==0&&Jc(),k=h.pendingLanes,k&1?h===cS?fp++:(fp=0,cS=h):fp=0,Es(),null}function Jc(){if(dl!==null){var h=qf(Jy),p=bi.transition,_=bn;try{if(bi.transition=null,bn=16>h?16:h,dl===null)var T=!1;else{if(h=dl,dl=null,Jy=0,fn&6)throw Error(o(331));var R=fn;for(fn|=4,at=h.current;at!==null;){var k=at,Y=k.child;if(at.flags&16){var ie=k.deletions;if(ie!==null){for(var Ce=0;Ce<ie.length;Ce++){var qe=ie[Ce];for(at=qe;at!==null;){var Tt=at;switch(Tt.tag){case 0:case 11:case 15:Xc(8,Tt,k)}var nn=Tt.child;if(nn!==null)nn.return=Tt,at=nn;else for(;at!==null;){Tt=at;var kt=Tt.sibling,Yn=Tt.return;if(XP(Tt),Tt===qe){at=null;break}if(kt!==null){kt.return=Yn,at=kt;break}at=Yn}}}var Rt=k.alternate;if(Rt!==null){var Sr=Rt.child;if(Sr!==null){Rt.child=null;do{var Zs=Sr.sibling;Sr.sibling=null,Sr=Zs}while(Sr!==null)}}at=k}}if(k.subtreeFlags&2064&&Y!==null)Y.return=k,at=Y;else e:for(;at!==null;){if(k=at,k.flags&2048)switch(k.tag){case 0:case 11:case 15:Xc(9,k,k.return)}var ve=k.sibling;if(ve!==null){ve.return=k.return,at=ve;break e}at=k.return}}var oe=h.current;for(at=oe;at!==null;){Y=at;var Te=Y.child;if(Y.subtreeFlags&2064&&Te!==null)Te.return=Y,at=Te;else e:for(Y=oe;at!==null;){if(ie=at,ie.flags&2048)try{switch(ie.tag){case 0:case 11:case 15:cp(9,ie)}}catch(Pt){ss(ie,ie.return,Pt)}if(ie===Y){at=null;break e}var ft=ie.sibling;if(ft!==null){ft.return=ie.return,at=ft;break e}at=ie.return}}if(fn=R,Es(),bs&&typeof bs.onPostCommitFiberRoot=="function")try{bs.onPostCommitFiberRoot(ma,h)}catch{}T=!0}return T}finally{bn=_,bi.transition=p}}return!1}function hR(h,p,_){p=Hb(_,p),p=EP(h,p,1),go(h,p),p=Wr(),h=ev(h,1),h!==null&&(Oc(h,1,p),rs(h,p))}function ss(h,p,_){if(h.tag===3)hR(h,h,_);else for(;p!==null;){if(p.tag===3){hR(p,h,_);break}else if(p.tag===1){var T=p.stateNode;if(typeof p.type.getDerivedStateFromError=="function"||typeof T.componentDidCatch=="function"&&(hl===null||!hl.has(T))){h=Hb(_,h),h=CP(p,h,1),go(p,h),h=Wr(),p=ev(p,1),p!==null&&(Oc(p,1,h),rs(p,h));break}}p=p.return}}function vH(h,p,_){var T=h.pingCache;T!==null&&T.delete(p),p=Wr(),h.pingedLanes|=h.suspendedLanes&_,Ni===h&&(lr&_)===_&&(Wi===4||Wi===3&&(lr&130023424)===lr&&500>Mi()-oS?Kc(h,0):sS|=_),rs(h,p)}function dR(h,p){p===0&&(h.mode&1?(p=ns,ns<<=1,!(ns&130023424)&&(ns=4194304)):p=1);var _=Wr();h=ev(h,p),h!==null&&(Oc(h,p,_),rs(h,_))}function xH(h){var p=h.memoizedState,_=0;p!==null&&(_=p.retryLane),dR(h,_)}function _H(h,p){var _=0;switch(h.tag){case 13:var T=h.stateNode,R=h.memoizedState;R!==null&&(_=R.retryLane);break;case 19:T=h.stateNode;break;default:throw Error(o(314))}T!==null&&T.delete(p),dR(h,_)}var fR;fR=function(h,p,_){if(h!==null)if(h.memoizedProps!==p.pendingProps||en.current)Ms=!0;else{if(!(h.lanes&_)&&!(p.flags&128))return Ms=!1,aH(h,p,_);Ms=!!(h.flags&131072)}else Ms=!1,yn&&p.flags&1048576&&Ii(p,N,p.index);switch(p.lanes=0,p.tag){case 2:var T=p.type;h!==null&&(h.alternate=null,p.alternate=null,p.flags|=2),h=p.pendingProps;var R=It(p,zt.current);ul(p,_),R=Fb(null,p,T,h,R,_);var k=jb();return p.flags|=1,typeof R=="object"&&R!==null&&typeof R.render=="function"&&R.$$typeof===void 0?(p.tag=1,p.memoizedState=null,p.updateQueue=null,En(T)?(k=!0,Jn(p)):k=!1,p.memoizedState=R.state!==null&&R.state!==void 0?R.state:null,Ah(p),R.updater=Gc,p.stateNode=R,R._reactInternals=p,Ph(p,T,h,_),p=qb(null,p,T,!0,k,_)):(p.tag=0,yn&&k&&gn(p),Gr(null,p,R,_),p=p.child),p;case 16:T=p.elementType;e:{switch(h!==null&&(h.alternate=null,p.alternate=null,p.flags|=2),h=p.pendingProps,R=T._init,T=R(T._payload),p.type=T,R=p.tag=bH(T),h=wi(T,h),R){case 0:p=Wb(null,p,T,h,_);break e;case 1:p=UP(null,p,T,h,_);break e;case 11:p=NP(null,p,T,h,_);break e;case 14:p=DP(null,p,T,wi(T.type,h),_);break e}throw Error(o(306,T,""))}return p;case 0:return T=p.type,R=p.pendingProps,R=p.elementType===T?R:wi(T,R),Wb(h,p,T,R,_);case 1:return T=p.type,R=p.pendingProps,R=p.elementType===T?R:wi(T,R),UP(h,p,T,R,_);case 3:e:{if(FP(p),h===null)throw Error(o(387));T=p.pendingProps,k=p.memoizedState,R=k.element,Mh(h,p),Hc(p,T,null,_);var Y=p.memoizedState;if(T=Y.element,Ee&&k.isDehydrated)if(k={element:T,isDehydrated:!1,cache:Y.cache,transitions:Y.transitions},p.updateQueue.baseState=k,p.memoizedState=k,p.flags&256){R=Error(o(423)),p=jP(h,p,T,_,R);break e}else if(T!==R){R=Error(o(424)),p=jP(h,p,T,_,R);break e}else for(Ee&&(Ri=yt(p.stateNode.containerInfo),Vn=p,yn=!0,Hr=null,zo=!1),_=sP(p,null,T,_),p.child=_;_;)_.flags=_.flags&-3|4096,_=_.sibling;else{if(Rh(),T===R){p=_a(h,p,_);break e}Gr(h,p,T,_)}p=p.child}return p;case 5:return oP(p),h===null&&Rb(p),T=p.type,R=p.pendingProps,k=h!==null?h.memoizedProps:null,Y=R.children,xe(T,R)?Y=null:k!==null&&xe(T,k)&&(p.flags|=32),OP(h,p),Gr(h,p,Y,_),p.child;case 6:return h===null&&Rb(p),null;case 13:return VP(h,p,_);case 4:return Db(p,p.stateNode.containerInfo),T=p.pendingProps,h===null?p.child=Nh(p,null,T,_):Gr(h,p,T,_),p.child;case 11:return T=p.type,R=p.pendingProps,R=p.elementType===T?R:wi(T,R),NP(h,p,T,R,_);case 7:return Gr(h,p,p.pendingProps,_),p.child;case 8:return Gr(h,p,p.pendingProps.children,_),p.child;case 12:return Gr(h,p,p.pendingProps.children,_),p.child;case 10:e:{if(T=p.type._context,R=p.pendingProps,k=p.memoizedProps,Y=R.value,zc(p,T,Y),k!==null)if(Ss(k.value,Y)){if(k.children===R.children&&!en.current){p=_a(h,p,_);break e}}else for(k=p.child,k!==null&&(k.return=p);k!==null;){var ie=k.dependencies;if(ie!==null){Y=k.child;for(var Ce=ie.firstContext;Ce!==null;){if(Ce.context===T){if(k.tag===1){Ce=Cs(-1,_&-_),Ce.tag=2;var qe=k.updateQueue;if(qe!==null){qe=qe.shared;var Tt=qe.pending;Tt===null?Ce.next=Ce:(Ce.next=Tt.next,Tt.next=Ce),qe.pending=Ce}}k.lanes|=_,Ce=k.alternate,Ce!==null&&(Ce.lanes|=_),cl(k.return,_,p),ie.lanes|=_;break}Ce=Ce.next}}else if(k.tag===10)Y=k.type===p.type?null:k.child;else if(k.tag===18){if(Y=k.return,Y===null)throw Error(o(341));Y.lanes|=_,ie=Y.alternate,ie!==null&&(ie.lanes|=_),cl(Y,_,p),Y=k.sibling}else Y=k.child;if(Y!==null)Y.return=k;else for(Y=k;Y!==null;){if(Y===p){Y=null;break}if(k=Y.sibling,k!==null){k.return=Y.return,Y=k;break}Y=Y.return}k=Y}Gr(h,p,R.children,_),p=p.child}return p;case 9:return R=p.type,T=p.pendingProps.children,ul(p,_),R=zr(R),T=T(R),p.flags|=1,Gr(h,p,T,_),p.child;case 14:return T=p.type,R=wi(T,p.pendingProps),R=wi(T.type,R),DP(h,p,T,R,_);case 15:return LP(h,p,p.type,p.pendingProps,_);case 17:return T=p.type,R=p.pendingProps,R=p.elementType===T?R:wi(T,R),h!==null&&(h.alternate=null,p.alternate=null,p.flags|=2),p.tag=1,En(T)?(h=!0,Jn(p)):h=!1,ul(p,_),Wc(p,T,R),Ph(p,T,R,_),qb(null,p,T,!0,h,_);case 19:return GP(h,p,_);case 22:return kP(h,p,_)}throw Error(o(156,p.tag))};function pR(h,p){return bh(h,p)}function wH(h,p,_,T){this.tag=h,this.key=_,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=p,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=T,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Qs(h,p,_,T){return new wH(h,p,_,T)}function pS(h){return h=h.prototype,!(!h||!h.isReactComponent)}function bH(h){if(typeof h=="function")return pS(h)?1:0;if(h!=null){if(h=h.$$typeof,h===b)return 11;if(h===S)return 14}return 2}function ml(h,p){var _=h.alternate;return _===null?(_=Qs(h.tag,p,h.key,h.mode),_.elementType=h.elementType,_.type=h.type,_.stateNode=h.stateNode,_.alternate=h,h.alternate=_):(_.pendingProps=p,_.type=h.type,_.flags=0,_.subtreeFlags=0,_.deletions=null),_.flags=h.flags&14680064,_.childLanes=h.childLanes,_.lanes=h.lanes,_.child=h.child,_.memoizedProps=h.memoizedProps,_.memoizedState=h.memoizedState,_.updateQueue=h.updateQueue,p=h.dependencies,_.dependencies=p===null?null:{lanes:p.lanes,firstContext:p.firstContext},_.sibling=h.sibling,_.index=h.index,_.ref=h.ref,_}function nv(h,p,_,T,R,k){var Y=2;if(T=h,typeof h=="function")pS(h)&&(Y=1);else if(typeof h=="string")Y=5;else e:switch(h){case u:return Qc(_.children,R,k,p);case f:Y=8,R|=8;break;case m:return h=Qs(12,_,p,R|2),h.elementType=m,h.lanes=k,h;case w:return h=Qs(13,_,p,R),h.elementType=w,h.lanes=k,h;case v:return h=Qs(19,_,p,R),h.elementType=v,h.lanes=k,h;case I:return iv(_,R,k,p);default:if(typeof h=="object"&&h!==null)switch(h.$$typeof){case g:Y=10;break e;case x:Y=9;break e;case b:Y=11;break e;case S:Y=14;break e;case E:Y=16,T=null;break e}throw Error(o(130,h==null?h:typeof h,""))}return p=Qs(Y,_,p,R),p.elementType=h,p.type=T,p.lanes=k,p}function Qc(h,p,_,T){return h=Qs(7,h,T,p),h.lanes=_,h}function iv(h,p,_,T){return h=Qs(22,h,T,p),h.elementType=I,h.lanes=_,h.stateNode={},h}function mS(h,p,_){return h=Qs(6,h,null,p),h.lanes=_,h}function gS(h,p,_){return p=Qs(4,h.children!==null?h.children:[],h.key,p),p.lanes=_,p.stateNode={containerInfo:h.containerInfo,pendingChildren:null,implementation:h.implementation},p}function SH(h,p,_,T,R){this.tag=p,this.containerInfo=h,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=Kt,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Wf(0),this.expirationTimes=Wf(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Wf(0),this.identifierPrefix=T,this.onRecoverableError=R,Ee&&(this.mutableSourceEagerHydrationData=null)}function mR(h,p,_,T,R,k,Y,ie,Ce){return h=new SH(h,p,_,ie,Ce),p===1?(p=1,k===!0&&(p|=8)):p=0,k=Qs(3,null,null,p),h.current=k,k.stateNode=h,k.memoizedState={element:T,isDehydrated:_,cache:null,transitions:null},Ah(k),h}function gR(h){if(!h)return Et;h=h._reactInternals;e:{if(M(h)!==h||h.tag!==1)throw Error(o(170));var p=h;do{switch(p.tag){case 3:p=p.stateNode.context;break e;case 1:if(En(p.type)){p=p.stateNode.__reactInternalMemoizedMergedChildContext;break e}}p=p.return}while(p!==null);throw Error(o(171))}if(h.tag===1){var _=h.type;if(En(_))return po(h,_,p)}return p}function yR(h){var p=h._reactInternals;if(p===void 0)throw typeof h.render=="function"?Error(o(188)):(h=Object.keys(h).join(","),Error(o(268,h)));return h=B(p),h===null?null:h.stateNode}function vR(h,p){if(h=h.memoizedState,h!==null&&h.dehydrated!==null){var _=h.retryLane;h.retryLane=_!==0&&_<p?_:p}}function yS(h,p){vR(h,p),(h=h.alternate)&&vR(h,p)}function TH(h){return h=B(h),h===null?null:h.stateNode}function EH(){return null}return t.attemptContinuousHydration=function(h){if(h.tag===13){var p=Wr();Js(h,134217728,p),yS(h,134217728)}},t.attemptHydrationAtCurrentPriority=function(h){if(h.tag===13){var p=Wr(),_=fl(h);Js(h,_,p),yS(h,_)}},t.attemptSynchronousHydration=function(h){switch(h.tag){case 3:var p=h.stateNode;if(p.current.memoizedState.isDehydrated){var _=Gi(p.pendingLanes);_!==0&&(qs(p,_|1),rs(p,Mi()),!(fn&6)&&(Fh(),Es()))}break;case 13:var T=Wr();oR(function(){return Js(h,1,T)}),yS(h,1)}},t.batchedUpdates=function(h,p){var _=fn;fn|=1;try{return h(p)}finally{fn=_,fn===0&&(Fh(),Kn&&Es())}},t.createComponentSelector=function(h){return{$$typeof:zy,value:h}},t.createContainer=function(h,p,_,T,R,k,Y){return mR(h,p,!1,null,_,T,R,k,Y)},t.createHasPseudoClassSelector=function(h){return{$$typeof:Hy,value:h}},t.createHydrationContainer=function(h,p,_,T,R,k,Y,ie,Ce){return h=mR(_,T,!0,h,R,k,Y,ie,Ce),h.context=gR(null),_=h.current,T=Wr(),R=fl(_),k=Cs(T,R),k.callback=p??null,go(_,k),h.current.lanes=R,Oc(h,R,T),rs(h,T),h},t.createPortal=function(h,p,_){var T=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:c,key:T==null?null:""+T,children:h,containerInfo:p,implementation:_}},t.createRoleSelector=function(h){return{$$typeof:Gy,value:h}},t.createTestNameSelector=function(h){return{$$typeof:Wy,value:h}},t.createTextSelector=function(h){return{$$typeof:qy,value:h}},t.deferredUpdates=function(h){var p=bn,_=bi.transition;try{return bi.transition=null,bn=16,h()}finally{bn=p,bi.transition=_}},t.discreteUpdates=function(h,p,_,T,R){var k=bn,Y=bi.transition;try{return bi.transition=null,bn=1,h(p,_,T,R)}finally{bn=k,bi.transition=Y,fn===0&&Fh()}},t.findAllNodes=iS,t.findBoundingRects=function(h,p){if(!Xe)throw Error(o(363));p=iS(h,p),h=[];for(var _=0;_<p.length;_++)h.push(z(p[_]));for(p=h.length-1;0<p;p--){_=h[p];for(var T=_.x,R=T+_.width,k=_.y,Y=k+_.height,ie=p-1;0<=ie;ie--)if(p!==ie){var Ce=h[ie],qe=Ce.x,Tt=qe+Ce.width,nn=Ce.y,kt=nn+Ce.height;if(T>=qe&&k>=nn&&R<=Tt&&Y<=kt){h.splice(p,1);break}else if(T!==qe||_.width!==Ce.width||kt<k||nn>Y){if(!(k!==nn||_.height!==Ce.height||Tt<T||qe>R)){qe>T&&(Ce.width+=qe-T,Ce.x=T),Tt<R&&(Ce.width=R-qe),h.splice(p,1);break}}else{nn>k&&(Ce.height+=nn-k,Ce.y=k),kt<Y&&(Ce.height=Y-nn),h.splice(p,1);break}}}return h},t.findHostInstance=yR,t.findHostInstanceWithNoPortals=function(h){return h=D(h),h=h!==null?te(h):null,h===null?null:h.stateNode},t.findHostInstanceWithWarning=function(h){return yR(h)},t.flushControlled=function(h){var p=fn;fn|=1;var _=bi.transition,T=bn;try{bi.transition=null,bn=1,h()}finally{bn=T,bi.transition=_,fn=p,fn===0&&(Fh(),Es())}},t.flushPassiveEffects=Jc,t.flushSync=oR,t.focusWithin=function(h,p){if(!Xe)throw Error(o(363));for(h=eS(h),p=iR(h,p),p=Array.from(p),h=0;h<p.length;){var _=p[h++];if(!Se(_)){if(_.tag===5&&we(_.stateNode))return!0;for(_=_.child;_!==null;)p.push(_),_=_.sibling}}return!1},t.getCurrentUpdatePriority=function(){return bn},t.getFindAllNodesFailureDescription=function(h,p){if(!Xe)throw Error(o(363));var _=0,T=[];h=[eS(h),0];for(var R=0;R<h.length;){var k=h[R++],Y=h[R++],ie=p[Y];if((k.tag!==5||!Se(k))&&(tS(k,ie)&&(T.push(nS(ie)),Y++,Y>_&&(_=Y)),Y<p.length))for(k=k.child;k!==null;)h.push(k,Y),k=k.sibling}if(_<p.length){for(h=[];_<p.length;_++)h.push(nS(p[_]));return`findAllNodes was able to match part of the selector:
  `+(T.join(" > ")+`

No matching component was found for:
  `)+h.join(" > ")}return null},t.getPublicRootInstance=function(h){if(h=h.current,!h.child)return null;switch(h.child.tag){case 5:return pe(h.child.stateNode);default:return h.child.stateNode}},t.injectIntoDevTools=function(h){if(h={bundleType:h.bundleType,version:h.version,rendererPackageName:h.rendererPackageName,rendererConfig:h.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:a.ReactCurrentDispatcher,findHostInstanceByFiber:TH,findFiberByHostInstance:h.findFiberByHostInstance||EH,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.0.0-fc46dba67-20220329"},typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")h=!1;else{var p=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(p.isDisabled||!p.supportsFiber)h=!0;else{try{ma=p.inject(h),bs=p}catch{}h=!!p.checkDCE}}return h},t.isAlreadyRendering=function(){return!1},t.observeVisibleRects=function(h,p,_,T){if(!Xe)throw Error(o(363));h=iS(h,p);var R=He(h,_,T).disconnect;return{disconnect:function(){R()}}},t.registerMutableSourceForHydration=function(h,p){var _=p._getVersion;_=_(p._source),h.mutableSourceEagerHydrationData==null?h.mutableSourceEagerHydrationData=[p,_]:h.mutableSourceEagerHydrationData.push(p,_)},t.runWithPriority=function(h,p){var _=bn;try{return bn=h,p()}finally{bn=_}},t.shouldError=function(){return null},t.shouldSuspend=function(){return!1},t.updateContainer=function(h,p,_,T){var R=p.current,k=Wr(),Y=fl(R);return _=gR(_),p.context===null?p.context=_:p.pendingContext=_,p=Cs(k,Y),p.payload={element:h},T=T===void 0?null:T,T!==null&&(p.callback=T),go(R,p),h=Js(R,Y,k),h!==null&&ya(h,R,Y),Y},t};HV.exports=LZ;var kZ=HV.exports;const OZ=K_(kZ),dM={},UZ=n=>void Object.assign(dM,n);function FZ(n,e){function t(u,{args:f=[],attach:m,...g},x){let b=`${u[0].toUpperCase()}${u.slice(1)}`,w;if(u==="primitive"){if(g.object===void 0)throw new Error("R3F: Primitives without 'object' are invalid!");const v=g.object;w=ld(v,{type:u,root:x,attach:m,primitive:!0})}else{const v=dM[b];if(!v)throw new Error(`R3F: ${b} is not part of the THREE namespace! Did you forget to extend? See: https://docs.pmnd.rs/react-three-fiber/api/objects#using-3rd-party-objects-declaratively`);if(!Array.isArray(f))throw new Error("R3F: The args prop must be an array!");w=ld(new v(...f),{type:u,root:x,attach:m,memoizedProps:{args:f}})}return w.__r3f.attach===void 0&&(w.isBufferGeometry?w.__r3f.attach="geometry":w.isMaterial&&(w.__r3f.attach="material")),b!=="inject"&&OT(w,g),w}function i(u,f){let m=!1;if(f){var g,x;(g=f.__r3f)!=null&&g.attach?kT(u,f,f.__r3f.attach):f.isObject3D&&u.isObject3D&&(u.add(f),m=!0),m||(x=u.__r3f)==null||x.objects.push(f),f.__r3f||ld(f,{}),f.__r3f.parent=u,C1(f),cd(f)}}function r(u,f,m){let g=!1;if(f){var x,b;if((x=f.__r3f)!=null&&x.attach)kT(u,f,f.__r3f.attach);else if(f.isObject3D&&u.isObject3D){f.parent=u,f.dispatchEvent({type:"added"}),u.dispatchEvent({type:"childadded",child:f});const w=u.children.filter(S=>S!==f),v=w.indexOf(m);u.children=[...w.slice(0,v),f,...w.slice(v)],g=!0}g||(b=u.__r3f)==null||b.objects.push(f),f.__r3f||ld(f,{}),f.__r3f.parent=u,C1(f),cd(f)}}function s(u,f,m=!1){u&&[...u].forEach(g=>o(f,g,m))}function o(u,f,m){if(f){var g,x,b;if(f.__r3f&&(f.__r3f.parent=null),(g=u.__r3f)!=null&&g.objects&&(u.__r3f.objects=u.__r3f.objects.filter(I=>I!==f)),(x=f.__r3f)!=null&&x.attach)XD(u,f,f.__r3f.attach);else if(f.isObject3D&&u.isObject3D){var w;u.remove(f),(w=f.__r3f)!=null&&w.root&&WZ(Gx(f),f)}const S=(b=f.__r3f)==null?void 0:b.primitive,E=!S&&(m===void 0?f.dispose!==null:m);if(!S){var v;s((v=f.__r3f)==null?void 0:v.objects,f,E),s(f.children,f,E)}if(delete f.__r3f,E&&f.dispose&&f.type!=="Scene"){const I=()=>{try{f.dispose()}catch{}};typeof IS_REACT_ACT_ENVIRONMENT>"u"?T1.unstable_scheduleCallback(T1.unstable_IdlePriority,I):I()}cd(u)}}function a(u,f,m,g){var x;const b=(x=u.__r3f)==null?void 0:x.parent;if(!b)return;const w=t(f,m,u.__r3f.root);if(u.children){for(const v of u.children)v.__r3f&&i(w,v);u.children=u.children.filter(v=>!v.__r3f)}u.__r3f.objects.forEach(v=>i(w,v)),u.__r3f.objects=[],u.__r3f.autoRemovedBeforeAppend||o(b,u),w.parent&&(w.__r3f.autoRemovedBeforeAppend=!0),i(b,w),w.raycast&&w.__r3f.eventCount&&Gx(w).getState().internal.interaction.push(w),[g,g.alternate].forEach(v=>{v!==null&&(v.stateNode=w,v.ref&&(typeof v.ref=="function"?v.ref(w):v.ref.current=w))})}const l=()=>{};return{reconciler:OZ({createInstance:t,removeChild:o,appendChild:i,appendInitialChild:i,insertBefore:r,supportsMutation:!0,isPrimaryRenderer:!1,supportsPersistence:!1,supportsHydration:!1,noTimeout:-1,appendChildToContainer:(u,f)=>{if(!f)return;const m=u.getState().scene;m.__r3f&&(m.__r3f.root=u,i(m,f))},removeChildFromContainer:(u,f)=>{f&&o(u.getState().scene,f)},insertInContainerBefore:(u,f,m)=>{if(!f||!m)return;const g=u.getState().scene;g.__r3f&&r(g,f,m)},getRootHostContext:()=>null,getChildHostContext:u=>u,finalizeInitialChildren(u){var f;return!!((f=u?.__r3f)!=null?f:{}).handlers},prepareUpdate(u,f,m,g){var x;if(((x=u?.__r3f)!=null?x:{}).primitive&&g.object&&g.object!==u)return[!0];{const{args:w=[],children:v,...S}=g,{args:E=[],children:I,...U}=m;if(!Array.isArray(w))throw new Error("R3F: the args prop must be an array!");if(w.some((C,P)=>C!==E[P]))return[!0];const O=QV(u,S,U,!0);return O.changes.length?[!1,O]:null}},commitUpdate(u,[f,m],g,x,b,w){f?a(u,g,b,w):OT(u,m)},commitMount(u,f,m,g){var x;const b=(x=u.__r3f)!=null?x:{};u.raycast&&b.handlers&&b.eventCount&&Gx(u).getState().internal.interaction.push(u)},getPublicInstance:u=>u,prepareForCommit:()=>null,preparePortalMount:u=>ld(u.getState().scene),resetAfterCommit:()=>{},shouldSetTextContent:()=>!1,clearContainer:()=>!1,hideInstance(u){var f;const{attach:m,parent:g}=(f=u.__r3f)!=null?f:{};m&&g&&XD(g,u,m),u.isObject3D&&(u.visible=!1),cd(u)},unhideInstance(u,f){var m;const{attach:g,parent:x}=(m=u.__r3f)!=null?m:{};g&&x&&kT(x,u,g),(u.isObject3D&&f.visible==null||f.visible)&&(u.visible=!0),cd(u)},createTextInstance:l,hideTextInstance:l,unhideTextInstance:l,getCurrentEventPriority:()=>e?e():Ld.DefaultEventPriority,beforeActiveInstanceBlur:()=>{},afterActiveInstanceBlur:()=>{},detachDeletedInstance:()=>{},now:typeof performance<"u"&&ti.fun(performance.now)?performance.now:ti.fun(Date.now)?Date.now:()=>0,scheduleTimeout:ti.fun(setTimeout)?setTimeout:void 0,cancelTimeout:ti.fun(clearTimeout)?clearTimeout:void 0}),applyProps:OT}}var GD,WD;const LT=n=>"colorSpace"in n||"outputColorSpace"in n,qV=()=>{var n;return(n=dM.ColorManagement)!=null?n:null},$V=n=>n&&n.isOrthographicCamera,jZ=n=>n&&n.hasOwnProperty("current"),ty=typeof window<"u"&&((GD=window.document)!=null&&GD.createElement||((WD=window.navigator)==null?void 0:WD.product)==="ReactNative")?V.useLayoutEffect:V.useEffect;function XV(n){const e=V.useRef(n);return ty(()=>void(e.current=n),[n]),e}function VZ({set:n}){return ty(()=>(n(new Promise(()=>null)),()=>n(!1)),[n]),null}class KV extends V.Component{constructor(...e){super(...e),this.state={error:!1}}componentDidCatch(e){this.props.set(e)}render(){return this.state.error?null:this.props.children}}KV.getDerivedStateFromError=()=>({error:!0});const YV="__default",qD=new Map,BZ=n=>n&&!!n.memoized&&!!n.changes;function JV(n){var e;const t=typeof window<"u"?(e=window.devicePixelRatio)!=null?e:2:1;return Array.isArray(n)?Math.min(Math.max(n[0],t),n[1]):n}const Up=n=>{var e;return(e=n.__r3f)==null?void 0:e.root.getState()};function Gx(n){let e=n.__r3f.root;for(;e.getState().previousRoot;)e=e.getState().previousRoot;return e}const ti={obj:n=>n===Object(n)&&!ti.arr(n)&&typeof n!="function",fun:n=>typeof n=="function",str:n=>typeof n=="string",num:n=>typeof n=="number",boo:n=>typeof n=="boolean",und:n=>n===void 0,arr:n=>Array.isArray(n),equ(n,e,{arrays:t="shallow",objects:i="reference",strict:r=!0}={}){if(typeof n!=typeof e||!!n!=!!e)return!1;if(ti.str(n)||ti.num(n)||ti.boo(n))return n===e;const s=ti.obj(n);if(s&&i==="reference")return n===e;const o=ti.arr(n);if(o&&t==="reference")return n===e;if((o||s)&&n===e)return!0;let a;for(a in n)if(!(a in e))return!1;if(s&&t==="shallow"&&i==="shallow"){for(a in r?e:n)if(!ti.equ(n[a],e[a],{strict:r,objects:"reference"}))return!1}else for(a in r?e:n)if(n[a]!==e[a])return!1;if(ti.und(a)){if(o&&n.length===0&&e.length===0||s&&Object.keys(n).length===0&&Object.keys(e).length===0)return!0;if(n!==e)return!1}return!0}};function zZ(n){n.dispose&&n.type!=="Scene"&&n.dispose();for(const e in n)e.dispose==null||e.dispose(),delete n[e]}function ld(n,e){const t=n;return t.__r3f={type:"",root:null,previousAttach:null,memoizedProps:{},eventCount:0,handlers:{},objects:[],parent:null,...e},n}function E1(n,e){let t=n;if(e.includes("-")){const i=e.split("-"),r=i.pop();return t=i.reduce((s,o)=>s[o],n),{target:t,key:r}}else return{target:t,key:e}}const $D=/-\d+$/;function kT(n,e,t){if(ti.str(t)){if($D.test(t)){const s=t.replace($D,""),{target:o,key:a}=E1(n,s);Array.isArray(o[a])||(o[a]=[])}const{target:i,key:r}=E1(n,t);e.__r3f.previousAttach=i[r],i[r]=e}else e.__r3f.previousAttach=t(n,e)}function XD(n,e,t){var i,r;if(ti.str(t)){const{target:s,key:o}=E1(n,t),a=e.__r3f.previousAttach;a===void 0?delete s[o]:s[o]=a}else(i=e.__r3f)==null||i.previousAttach==null||i.previousAttach(n,e);(r=e.__r3f)==null||delete r.previousAttach}function QV(n,{children:e,key:t,ref:i,...r},{children:s,key:o,ref:a,...l}={},c=!1){const u=n.__r3f,f=Object.entries(r),m=[];if(c){const x=Object.keys(l);for(let b=0;b<x.length;b++)r.hasOwnProperty(x[b])||f.unshift([x[b],YV+"remove"])}f.forEach(([x,b])=>{var w;if((w=n.__r3f)!=null&&w.primitive&&x==="object"||ti.equ(b,l[x]))return;if(/^on(Pointer|Click|DoubleClick|ContextMenu|Wheel)/.test(x))return m.push([x,b,!0,[]]);let v=[];x.includes("-")&&(v=x.split("-")),m.push([x,b,!1,v]);for(const S in r){const E=r[S];S.startsWith(`${x}-`)&&m.push([S,E,!1,S.split("-")])}});const g={...r};return u!=null&&u.memoizedProps&&u!=null&&u.memoizedProps.args&&(g.args=u.memoizedProps.args),u!=null&&u.memoizedProps&&u!=null&&u.memoizedProps.attach&&(g.attach=u.memoizedProps.attach),{memoized:g,changes:m}}function OT(n,e){var t;const i=n.__r3f,r=i?.root,s=r==null||r.getState==null?void 0:r.getState(),{memoized:o,changes:a}=BZ(e)?e:QV(n,e),l=i?.eventCount;n.__r3f&&(n.__r3f.memoizedProps=o);for(let m=0;m<a.length;m++){let[g,x,b,w]=a[m];if(LT(n)){const I="srgb",U="srgb-linear";g==="encoding"?(g="colorSpace",x=x===3001?I:U):g==="outputEncoding"&&(g="outputColorSpace",x=x===3001?I:U)}let v=n,S=v[g];if(w.length&&(S=w.reduce((E,I)=>E[I],n),!(S&&S.set))){const[E,...I]=w.reverse();v=I.reverse().reduce((U,O)=>U[O],n),g=E}if(x===YV+"remove")if(v.constructor){let E=qD.get(v.constructor);E||(E=new v.constructor,qD.set(v.constructor,E)),x=E[g]}else x=0;if(b&&i)x?i.handlers[g]=x:delete i.handlers[g],i.eventCount=Object.keys(i.handlers).length;else if(S&&S.set&&(S.copy||S instanceof Vu)){if(Array.isArray(x))S.fromArray?S.fromArray(x):S.set(...x);else if(S.copy&&x&&x.constructor&&S.constructor===x.constructor)S.copy(x);else if(x!==void 0){var c;const E=(c=S)==null?void 0:c.isColor;!E&&S.setScalar?S.setScalar(x):S instanceof Vu&&x instanceof Vu?S.mask=x.mask:S.set(x),!qV()&&s&&!s.linear&&E&&S.convertSRGBToLinear()}}else{var u;if(v[g]=x,(u=v[g])!=null&&u.isTexture&&v[g].format===Lr&&v[g].type===Lo&&s){const E=v[g];LT(E)&&LT(s.gl)?E.colorSpace=s.gl.outputColorSpace:E.encoding=s.gl.outputEncoding}}cd(n)}if(i&&i.parent&&n.raycast&&l!==i.eventCount){const m=Gx(n).getState().internal,g=m.interaction.indexOf(n);g>-1&&m.interaction.splice(g,1),i.eventCount&&m.interaction.push(n)}return!(a.length===1&&a[0][0]==="onUpdate")&&a.length&&(t=n.__r3f)!=null&&t.parent&&C1(n),n}function cd(n){var e,t;const i=(e=n.__r3f)==null||(t=e.root)==null||t.getState==null?void 0:t.getState();i&&i.internal.frames===0&&i.invalidate()}function C1(n){n.onUpdate==null||n.onUpdate(n)}function HZ(n,e){n.manual||($V(n)?(n.left=e.width/-2,n.right=e.width/2,n.top=e.height/2,n.bottom=e.height/-2):n.aspect=e.width/e.height,n.updateProjectionMatrix(),n.updateMatrixWorld())}function fx(n){return(n.eventObject||n.object).uuid+"/"+n.index+n.instanceId}function GZ(){var n;const e=typeof self<"u"&&self||typeof window<"u"&&window;if(!e)return Ld.DefaultEventPriority;switch((n=e.event)==null?void 0:n.type){case"click":case"contextmenu":case"dblclick":case"pointercancel":case"pointerdown":case"pointerup":return Ld.DiscreteEventPriority;case"pointermove":case"pointerout":case"pointerover":case"pointerenter":case"pointerleave":case"wheel":return Ld.ContinuousEventPriority;default:return Ld.DefaultEventPriority}}function ZV(n,e,t,i){const r=t.get(e);r&&(t.delete(e),t.size===0&&(n.delete(i),r.target.releasePointerCapture(i)))}function WZ(n,e){const{internal:t}=n.getState();t.interaction=t.interaction.filter(i=>i!==e),t.initialHits=t.initialHits.filter(i=>i!==e),t.hovered.forEach((i,r)=>{(i.eventObject===e||i.object===e)&&t.hovered.delete(r)}),t.capturedMap.forEach((i,r)=>{ZV(t.capturedMap,e,i,r)})}function qZ(n){function e(l){const{internal:c}=n.getState(),u=l.offsetX-c.initialClick[0],f=l.offsetY-c.initialClick[1];return Math.round(Math.sqrt(u*u+f*f))}function t(l){return l.filter(c=>["Move","Over","Enter","Out","Leave"].some(u=>{var f;return(f=c.__r3f)==null?void 0:f.handlers["onPointer"+u]}))}function i(l,c){const u=n.getState(),f=new Set,m=[],g=c?c(u.internal.interaction):u.internal.interaction;for(let v=0;v<g.length;v++){const S=Up(g[v]);S&&(S.raycaster.camera=void 0)}u.previousRoot||u.events.compute==null||u.events.compute(l,u);function x(v){const S=Up(v);if(!S||!S.events.enabled||S.raycaster.camera===null)return[];if(S.raycaster.camera===void 0){var E;S.events.compute==null||S.events.compute(l,S,(E=S.previousRoot)==null?void 0:E.getState()),S.raycaster.camera===void 0&&(S.raycaster.camera=null)}return S.raycaster.camera?S.raycaster.intersectObject(v,!0):[]}let b=g.flatMap(x).sort((v,S)=>{const E=Up(v.object),I=Up(S.object);return!E||!I?v.distance-S.distance:I.events.priority-E.events.priority||v.distance-S.distance}).filter(v=>{const S=fx(v);return f.has(S)?!1:(f.add(S),!0)});u.events.filter&&(b=u.events.filter(b,u));for(const v of b){let S=v.object;for(;S;){var w;(w=S.__r3f)!=null&&w.eventCount&&m.push({...v,eventObject:S}),S=S.parent}}if("pointerId"in l&&u.internal.capturedMap.has(l.pointerId))for(let v of u.internal.capturedMap.get(l.pointerId).values())f.has(fx(v.intersection))||m.push(v.intersection);return m}function r(l,c,u,f){const m=n.getState();if(l.length){const g={stopped:!1};for(const x of l){const b=Up(x.object)||m,{raycaster:w,pointer:v,camera:S,internal:E}=b,I=new K(v.x,v.y,0).unproject(S),U=A=>{var D,B;return(D=(B=E.capturedMap.get(A))==null?void 0:B.has(x.eventObject))!=null?D:!1},O=A=>{const D={intersection:x,target:c.target};E.capturedMap.has(A)?E.capturedMap.get(A).set(x.eventObject,D):E.capturedMap.set(A,new Map([[x.eventObject,D]])),c.target.setPointerCapture(A)},C=A=>{const D=E.capturedMap.get(A);D&&ZV(E.capturedMap,x.eventObject,D,A)};let P={};for(let A in c){let D=c[A];typeof D!="function"&&(P[A]=D)}let M={...x,...P,pointer:v,intersections:l,stopped:g.stopped,delta:u,unprojectedPoint:I,ray:w.ray,camera:S,stopPropagation(){const A="pointerId"in c&&E.capturedMap.get(c.pointerId);if((!A||A.has(x.eventObject))&&(M.stopped=g.stopped=!0,E.hovered.size&&Array.from(E.hovered.values()).find(D=>D.eventObject===x.eventObject))){const D=l.slice(0,l.indexOf(x));s([...D,x])}},target:{hasPointerCapture:U,setPointerCapture:O,releasePointerCapture:C},currentTarget:{hasPointerCapture:U,setPointerCapture:O,releasePointerCapture:C},nativeEvent:c};if(f(M),g.stopped===!0)break}}return l}function s(l){const{internal:c}=n.getState();for(const u of c.hovered.values())if(!l.length||!l.find(f=>f.object===u.object&&f.index===u.index&&f.instanceId===u.instanceId)){const m=u.eventObject.__r3f,g=m?.handlers;if(c.hovered.delete(fx(u)),m!=null&&m.eventCount){const x={...u,intersections:l};g.onPointerOut==null||g.onPointerOut(x),g.onPointerLeave==null||g.onPointerLeave(x)}}}function o(l,c){for(let u=0;u<c.length;u++){const f=c[u].__r3f;f==null||f.handlers.onPointerMissed==null||f.handlers.onPointerMissed(l)}}function a(l){switch(l){case"onPointerLeave":case"onPointerCancel":return()=>s([]);case"onLostPointerCapture":return c=>{const{internal:u}=n.getState();"pointerId"in c&&u.capturedMap.has(c.pointerId)&&requestAnimationFrame(()=>{u.capturedMap.has(c.pointerId)&&(u.capturedMap.delete(c.pointerId),s([]))})}}return function(u){const{onPointerMissed:f,internal:m}=n.getState();m.lastEvent.current=u;const g=l==="onPointerMove",x=l==="onClick"||l==="onContextMenu"||l==="onDoubleClick",w=i(u,g?t:void 0),v=x?e(u):0;l==="onPointerDown"&&(m.initialClick=[u.offsetX,u.offsetY],m.initialHits=w.map(E=>E.eventObject)),x&&!w.length&&v<=2&&(o(u,m.interaction),f&&f(u)),g&&s(w);function S(E){const I=E.eventObject,U=I.__r3f,O=U?.handlers;if(U!=null&&U.eventCount)if(g){if(O.onPointerOver||O.onPointerEnter||O.onPointerOut||O.onPointerLeave){const C=fx(E),P=m.hovered.get(C);P?P.stopped&&E.stopPropagation():(m.hovered.set(C,E),O.onPointerOver==null||O.onPointerOver(E),O.onPointerEnter==null||O.onPointerEnter(E))}O.onPointerMove==null||O.onPointerMove(E)}else{const C=O[l];C?(!x||m.initialHits.includes(I))&&(o(u,m.interaction.filter(P=>!m.initialHits.includes(P))),C(E)):x&&m.initialHits.includes(I)&&o(u,m.interaction.filter(P=>!m.initialHits.includes(P)))}}r(w,u,v,S)}}return{handlePointer:a}}const e4=n=>!!(n!=null&&n.render),t4=V.createContext(null),$Z=(n,e)=>{const t=DZ((a,l)=>{const c=new K,u=new K,f=new K;function m(v=l().camera,S=u,E=l().size){const{width:I,height:U,top:O,left:C}=E,P=I/U;S.isVector3?f.copy(S):f.set(...S);const M=v.getWorldPosition(c).distanceTo(f);if($V(v))return{width:I/v.zoom,height:U/v.zoom,top:O,left:C,factor:1,distance:M,aspect:P};{const A=v.fov*Math.PI/180,D=2*Math.tan(A/2)*M,B=D*(I/U);return{width:B,height:D,top:O,left:C,factor:I/B,distance:M,aspect:P}}}let g;const x=v=>a(S=>({performance:{...S.performance,current:v}})),b=new Le;return{set:a,get:l,gl:null,camera:null,raycaster:null,events:{priority:1,enabled:!0,connected:!1},xr:null,scene:null,invalidate:(v=1)=>n(l(),v),advance:(v,S)=>e(v,S,l()),legacy:!1,linear:!1,flat:!1,controls:null,clock:new oM,pointer:b,mouse:b,frameloop:"always",onPointerMissed:void 0,performance:{current:1,min:.5,max:1,debounce:200,regress:()=>{const v=l();g&&clearTimeout(g),v.performance.current!==v.performance.min&&x(v.performance.min),g=setTimeout(()=>x(l().performance.max),v.performance.debounce)}},size:{width:0,height:0,top:0,left:0,updateStyle:!1},viewport:{initialDpr:0,dpr:0,width:0,height:0,top:0,left:0,aspect:0,distance:0,factor:0,getCurrentViewport:m},setEvents:v=>a(S=>({...S,events:{...S.events,...v}})),setSize:(v,S,E,I,U)=>{const O=l().camera,C={width:v,height:S,top:I||0,left:U||0,updateStyle:E};a(P=>({size:C,viewport:{...P.viewport,...m(O,u,C)}}))},setDpr:v=>a(S=>{const E=JV(v);return{viewport:{...S.viewport,dpr:E,initialDpr:S.viewport.initialDpr||E}}}),setFrameloop:(v="always")=>{const S=l().clock;S.stop(),S.elapsedTime=0,v!=="never"&&(S.start(),S.elapsedTime=0),a(()=>({frameloop:v}))},previousRoot:void 0,internal:{active:!1,priority:0,frames:0,lastEvent:V.createRef(),interaction:[],hovered:new Map,subscribers:[],initialClick:[0,0],initialHits:[],capturedMap:new Map,subscribe:(v,S,E)=>{const I=l().internal;return I.priority=I.priority+(S>0?1:0),I.subscribers.push({ref:v,priority:S,store:E}),I.subscribers=I.subscribers.sort((U,O)=>U.priority-O.priority),()=>{const U=l().internal;U!=null&&U.subscribers&&(U.priority=U.priority-(S>0?1:0),U.subscribers=U.subscribers.filter(O=>O.ref!==v))}}}}}),i=t.getState();let r=i.size,s=i.viewport.dpr,o=i.camera;return t.subscribe(()=>{const{camera:a,size:l,viewport:c,gl:u,set:f}=t.getState();if(l.width!==r.width||l.height!==r.height||c.dpr!==s){var m;r=l,s=c.dpr,HZ(a,l),u.setPixelRatio(c.dpr);const g=(m=l.updateStyle)!=null?m:typeof HTMLCanvasElement<"u"&&u.domElement instanceof HTMLCanvasElement;u.setSize(l.width,l.height,g)}a!==o&&(o=a,f(g=>({viewport:{...g.viewport,...g.viewport.getCurrentViewport(a)}})))}),t.subscribe(a=>n(a)),t};let px,XZ=new Set,KZ=new Set,YZ=new Set;function UT(n,e){if(n.size)for(const{callback:t}of n.values())t(e)}function Fp(n,e){switch(n){case"before":return UT(XZ,e);case"after":return UT(KZ,e);case"tail":return UT(YZ,e)}}let FT,jT;function VT(n,e,t){let i=e.clock.getDelta();for(e.frameloop==="never"&&typeof n=="number"&&(i=n-e.clock.elapsedTime,e.clock.oldTime=e.clock.elapsedTime,e.clock.elapsedTime=n),FT=e.internal.subscribers,px=0;px<FT.length;px++)jT=FT[px],jT.ref.current(jT.store.getState(),i,t);return!e.internal.priority&&e.gl.render&&e.gl.render(e.scene,e.camera),e.internal.frames=Math.max(0,e.internal.frames-1),e.frameloop==="always"?1:e.internal.frames}function JZ(n){let e=!1,t=!1,i,r,s;function o(c){r=requestAnimationFrame(o),e=!0,i=0,Fp("before",c),t=!0;for(const f of n.values()){var u;s=f.store.getState(),s.internal.active&&(s.frameloop==="always"||s.internal.frames>0)&&!((u=s.gl.xr)!=null&&u.isPresenting)&&(i+=VT(c,s))}if(t=!1,Fp("after",c),i===0)return Fp("tail",c),e=!1,cancelAnimationFrame(r)}function a(c,u=1){var f;if(!c)return n.forEach(m=>a(m.store.getState(),u));(f=c.gl.xr)!=null&&f.isPresenting||!c.internal.active||c.frameloop==="never"||(u>1?c.internal.frames=Math.min(60,c.internal.frames+u):t?c.internal.frames=2:c.internal.frames=1,e||(e=!0,requestAnimationFrame(o)))}function l(c,u=!0,f,m){if(u&&Fp("before",c),f)VT(c,f,m);else for(const g of n.values())VT(c,g.store.getState());u&&Fp("after",c)}return{loop:o,invalidate:a,advance:l}}function n4(){const n=V.useContext(t4);if(!n)throw new Error("R3F: Hooks can only be used within the Canvas component!");return n}function Wx(n=t=>t,e){return n4()(n,e)}function qw(n,e=0){const t=n4(),i=t.getState().internal.subscribe,r=XV(n);return ty(()=>i(r,e,t),[e,i,t]),null}const df=new Map,{invalidate:KD,advance:YD}=JZ(df),{reconciler:y_,applyProps:od}=FZ(df,GZ),ad={objects:"shallow",strict:!1},QZ=(n,e)=>{const t=typeof n=="function"?n(e):n;return e4(t)?t:new BV({powerPreference:"high-performance",canvas:e,antialias:!0,alpha:!0,...n})};function ZZ(n,e){const t=typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement;if(e){const{width:i,height:r,top:s,left:o,updateStyle:a=t}=e;return{width:i,height:r,top:s,left:o,updateStyle:a}}else if(typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement&&n.parentElement){const{width:i,height:r,top:s,left:o}=n.parentElement.getBoundingClientRect();return{width:i,height:r,top:s,left:o,updateStyle:t}}else if(typeof OffscreenCanvas<"u"&&n instanceof OffscreenCanvas)return{width:n.width,height:n.height,top:0,left:0,updateStyle:t};return{width:0,height:0,top:0,left:0}}function eee(n){const e=df.get(n),t=e?.fiber,i=e?.store;e&&console.warn("R3F.createRoot should only be called once!");const r=typeof reportError=="function"?reportError:console.error,s=i||$Z(KD,YD),o=t||y_.createContainer(s,Ld.ConcurrentRoot,null,!1,null,"",r,null);e||df.set(n,{fiber:o,store:s});let a,l=!1,c;return{configure(u={}){let{gl:f,size:m,scene:g,events:x,onCreated:b,shadows:w=!1,linear:v=!1,flat:S=!1,legacy:E=!1,orthographic:I=!1,frameloop:U="always",dpr:O=[1,2],performance:C,raycaster:P,camera:M,onPointerMissed:A}=u,D=s.getState(),B=D.gl;D.gl||D.set({gl:B=QZ(f,n)});let j=D.raycaster;j||D.set({raycaster:j=new DV});const{params:te,...ce}=P||{};if(ti.equ(ce,j,ad)||od(j,{...ce}),ti.equ(te,j.params,ad)||od(j,{params:{...j.params,...te}}),!D.camera||D.camera===c&&!ti.equ(c,M,ad)){c=M;const F=M instanceof $g,J=F?M:I?new mh(0,0,0,0,.1,1e3):new Ui(75,0,.1,1e3);F||(J.position.z=5,M&&(od(J,M),("aspect"in M||"left"in M||"right"in M||"bottom"in M||"top"in M)&&(J.manual=!0,J.updateProjectionMatrix())),!D.camera&&!(M!=null&&M.rotation)&&J.lookAt(0,0,0)),D.set({camera:J}),j.camera=J}if(!D.scene){let F;g!=null&&g.isScene?F=g:(F=new BA,g&&od(F,g)),D.set({scene:ld(F)})}if(!D.xr){var pe;const F=(ye,le)=>{const xe=s.getState();xe.frameloop!=="never"&&YD(ye,!0,xe,le)},J=()=>{const ye=s.getState();ye.gl.xr.enabled=ye.gl.xr.isPresenting,ye.gl.xr.setAnimationLoop(ye.gl.xr.isPresenting?F:null),ye.gl.xr.isPresenting||KD(ye)},ue={connect(){const ye=s.getState().gl;ye.xr.addEventListener("sessionstart",J),ye.xr.addEventListener("sessionend",J)},disconnect(){const ye=s.getState().gl;ye.xr.removeEventListener("sessionstart",J),ye.xr.removeEventListener("sessionend",J)}};typeof((pe=B.xr)==null?void 0:pe.addEventListener)=="function"&&ue.connect(),D.set({xr:ue})}if(B.shadowMap){const F=B.shadowMap.enabled,J=B.shadowMap.type;if(B.shadowMap.enabled=!!w,ti.boo(w))B.shadowMap.type=pm;else if(ti.str(w)){var de;const ue={basic:$F,percentage:fw,soft:pm,variance:So};B.shadowMap.type=(de=ue[w])!=null?de:pm}else ti.obj(w)&&Object.assign(B.shadowMap,w);(F!==B.shadowMap.enabled||J!==B.shadowMap.type)&&(B.shadowMap.needsUpdate=!0)}const W=qV();W&&("enabled"in W?W.enabled=!E:"legacyMode"in W&&(W.legacyMode=E)),l||od(B,{outputEncoding:v?3e3:3001,toneMapping:S?ta:SA}),D.legacy!==E&&D.set(()=>({legacy:E})),D.linear!==v&&D.set(()=>({linear:v})),D.flat!==S&&D.set(()=>({flat:S})),f&&!ti.fun(f)&&!e4(f)&&!ti.equ(f,B,ad)&&od(B,f),x&&!D.events.handlers&&D.set({events:x(s)});const Z=ZZ(n,m);return ti.equ(Z,D.size,ad)||D.setSize(Z.width,Z.height,Z.updateStyle,Z.top,Z.left),O&&D.viewport.dpr!==JV(O)&&D.setDpr(O),D.frameloop!==U&&D.setFrameloop(U),D.onPointerMissed||D.set({onPointerMissed:A}),C&&!ti.equ(C,D.performance,ad)&&D.set(F=>({performance:{...F.performance,...C}})),a=b,l=!0,this},render(u){return l||this.configure(),y_.updateContainer(d.jsx(tee,{store:s,children:u,onCreated:a,rootElement:n}),o,null,()=>{}),s},unmount(){i4(n)}}}function tee({store:n,children:e,onCreated:t,rootElement:i}){return ty(()=>{const r=n.getState();r.set(s=>({internal:{...s.internal,active:!0}})),t&&t(r),n.getState().events.connected||r.events.connect==null||r.events.connect(i)},[]),d.jsx(t4.Provider,{value:n,children:e})}function i4(n,e){const t=df.get(n),i=t?.fiber;if(i){const r=t?.store.getState();r&&(r.internal.active=!1),y_.updateContainer(null,i,null,()=>{r&&setTimeout(()=>{try{var s,o,a,l;r.events.disconnect==null||r.events.disconnect(),(s=r.gl)==null||(o=s.renderLists)==null||o.dispose==null||o.dispose(),(a=r.gl)==null||a.forceContextLoss==null||a.forceContextLoss(),(l=r.gl)!=null&&l.xr&&r.xr.disconnect(),zZ(r),df.delete(n)}catch{}},500)})}}y_.injectIntoDevTools({bundleType:0,rendererPackageName:"@react-three/fiber",version:V.version});const BT={onClick:["click",!1],onContextMenu:["contextmenu",!1],onDoubleClick:["dblclick",!1],onWheel:["wheel",!0],onPointerDown:["pointerdown",!0],onPointerUp:["pointerup",!0],onPointerLeave:["pointerleave",!0],onPointerMove:["pointermove",!0],onPointerCancel:["pointercancel",!0],onLostPointerCapture:["lostpointercapture",!0]};function nee(n){const{handlePointer:e}=qZ(n);return{priority:1,enabled:!0,compute(t,i,r){i.pointer.set(t.offsetX/i.size.width*2-1,-(t.offsetY/i.size.height)*2+1),i.raycaster.setFromCamera(i.pointer,i.camera)},connected:void 0,handlers:Object.keys(BT).reduce((t,i)=>({...t,[i]:e(i)}),{}),update:()=>{var t;const{events:i,internal:r}=n.getState();(t=r.lastEvent)!=null&&t.current&&i.handlers&&i.handlers.onPointerMove(r.lastEvent.current)},connect:t=>{var i;const{set:r,events:s}=n.getState();s.disconnect==null||s.disconnect(),r(o=>({events:{...o.events,connected:t}})),Object.entries((i=s.handlers)!=null?i:[]).forEach(([o,a])=>{const[l,c]=BT[o];t.addEventListener(l,a,{passive:c})})},disconnect:()=>{const{set:t,events:i}=n.getState();if(i.connected){var r;Object.entries((r=i.handlers)!=null?r:[]).forEach(([s,o])=>{if(i&&i.connected instanceof HTMLElement){const[a]=BT[s];i.connected.removeEventListener(a,o)}}),t(s=>({events:{...s.events,connected:void 0}}))}}}}function JD(n,e){let t;return(...i)=>{window.clearTimeout(t),t=window.setTimeout(()=>n(...i),e)}}function iee({debounce:n,scroll:e,polyfill:t,offsetSize:i}={debounce:0,scroll:!1,offsetSize:!1}){const r=t||(typeof window>"u"?class{}:window.ResizeObserver);if(!r)throw new Error("This browser does not support ResizeObserver out of the box. See: https://github.com/react-spring/react-use-measure/#resize-observer-polyfills");const[s,o]=V.useState({left:0,top:0,width:0,height:0,bottom:0,right:0,x:0,y:0}),a=V.useRef({element:null,scrollContainers:null,resizeObserver:null,lastBounds:s,orientationHandler:null}),l=n?typeof n=="number"?n:n.scroll:null,c=n?typeof n=="number"?n:n.resize:null,u=V.useRef(!1);V.useEffect(()=>(u.current=!0,()=>void(u.current=!1)));const[f,m,g]=V.useMemo(()=>{const v=()=>{if(!a.current.element)return;const{left:S,top:E,width:I,height:U,bottom:O,right:C,x:P,y:M}=a.current.element.getBoundingClientRect(),A={left:S,top:E,width:I,height:U,bottom:O,right:C,x:P,y:M};a.current.element instanceof HTMLElement&&i&&(A.height=a.current.element.offsetHeight,A.width=a.current.element.offsetWidth),Object.freeze(A),u.current&&!aee(a.current.lastBounds,A)&&o(a.current.lastBounds=A)};return[v,c?JD(v,c):v,l?JD(v,l):v]},[o,i,l,c]);function x(){a.current.scrollContainers&&(a.current.scrollContainers.forEach(v=>v.removeEventListener("scroll",g,!0)),a.current.scrollContainers=null),a.current.resizeObserver&&(a.current.resizeObserver.disconnect(),a.current.resizeObserver=null),a.current.orientationHandler&&("orientation"in screen&&"removeEventListener"in screen.orientation?screen.orientation.removeEventListener("change",a.current.orientationHandler):"onorientationchange"in window&&window.removeEventListener("orientationchange",a.current.orientationHandler))}function b(){a.current.element&&(a.current.resizeObserver=new r(g),a.current.resizeObserver.observe(a.current.element),e&&a.current.scrollContainers&&a.current.scrollContainers.forEach(v=>v.addEventListener("scroll",g,{capture:!0,passive:!0})),a.current.orientationHandler=()=>{g()},"orientation"in screen&&"addEventListener"in screen.orientation?screen.orientation.addEventListener("change",a.current.orientationHandler):"onorientationchange"in window&&window.addEventListener("orientationchange",a.current.orientationHandler))}const w=v=>{!v||v===a.current.element||(x(),a.current.element=v,a.current.scrollContainers=r4(v),b())};return see(g,!!e),ree(m),V.useEffect(()=>{x(),b()},[e,g,m]),V.useEffect(()=>x,[]),[w,s,f]}function ree(n){V.useEffect(()=>{const e=n;return window.addEventListener("resize",e),()=>void window.removeEventListener("resize",e)},[n])}function see(n,e){V.useEffect(()=>{if(e){const t=n;return window.addEventListener("scroll",t,{capture:!0,passive:!0}),()=>void window.removeEventListener("scroll",t,!0)}},[n,e])}function r4(n){const e=[];if(!n||n===document.body)return e;const{overflow:t,overflowX:i,overflowY:r}=window.getComputedStyle(n);return[t,i,r].some(s=>s==="auto"||s==="scroll")&&e.push(n),[...e,...r4(n.parentElement)]}const oee=["x","y","top","bottom","left","right","width","height"],aee=(n,e)=>oee.every(t=>n[t]===e[t]);var lee=Object.defineProperty,cee=Object.defineProperties,uee=Object.getOwnPropertyDescriptors,QD=Object.getOwnPropertySymbols,hee=Object.prototype.hasOwnProperty,dee=Object.prototype.propertyIsEnumerable,ZD=(n,e,t)=>e in n?lee(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,eL=(n,e)=>{for(var t in e||(e={}))hee.call(e,t)&&ZD(n,t,e[t]);if(QD)for(var t of QD(e))dee.call(e,t)&&ZD(n,t,e[t]);return n},fee=(n,e)=>cee(n,uee(e)),tL,nL;typeof window<"u"&&((tL=window.document)!=null&&tL.createElement||((nL=window.navigator)==null?void 0:nL.product)==="ReactNative")?V.useLayoutEffect:V.useEffect;function s4(n,e,t){if(!n)return;if(t(n)===!0)return n;let i=n.child;for(;i;){const r=s4(i,e,t);if(r)return r;i=i.sibling}}function o4(n){try{return Object.defineProperties(n,{_currentRenderer:{get(){return null},set(){}},_currentRenderer2:{get(){return null},set(){}}})}catch{return n}}const iL=console.error;console.error=function(){const n=[...arguments].join("");if(n?.startsWith("Warning:")&&n.includes("useContext")){console.error=iL;return}return iL.apply(this,arguments)};const fM=o4(V.createContext(null));class a4 extends V.Component{render(){return V.createElement(fM.Provider,{value:this._reactInternals},this.props.children)}}function pee(){const n=V.useContext(fM);if(n===null)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");const e=V.useId();return V.useMemo(()=>{for(const i of[n,n?.alternate]){if(!i)continue;const r=s4(i,!1,s=>{let o=s.memoizedState;for(;o;){if(o.memoizedState===e)return!0;o=o.next}});if(r)return r}},[n,e])}function mee(){const n=pee(),[e]=V.useState(()=>new Map);e.clear();let t=n;for(;t;){if(t.type&&typeof t.type=="object"){const r=t.type._context===void 0&&t.type.Provider===t.type?t.type:t.type._context;r&&r!==fM&&!e.has(r)&&e.set(r,V.useContext(o4(r)))}t=t.return}return e}function gee(){const n=mee();return V.useMemo(()=>Array.from(n.keys()).reduce((e,t)=>i=>V.createElement(e,null,V.createElement(t.Provider,fee(eL({},i),{value:n.get(t)}))),e=>V.createElement(a4,eL({},e))),[n])}const yee=V.forwardRef(function({children:e,fallback:t,resize:i,style:r,gl:s,events:o=nee,eventSource:a,eventPrefix:l,shadows:c,linear:u,flat:f,legacy:m,orthographic:g,frameloop:x,dpr:b,performance:w,raycaster:v,camera:S,scene:E,onPointerMissed:I,onCreated:U,...O},C){V.useMemo(()=>UZ(PZ),[]);const P=gee(),[M,A]=iee({scroll:!0,debounce:{scroll:50,resize:0},...i}),D=V.useRef(null),B=V.useRef(null);V.useImperativeHandle(C,()=>D.current);const j=XV(I),[te,ce]=V.useState(!1),[pe,de]=V.useState(!1);if(te)throw te;if(pe)throw pe;const W=V.useRef(null);ty(()=>{const F=D.current;A.width>0&&A.height>0&&F&&(W.current||(W.current=eee(F)),W.current.configure({gl:s,events:o,shadows:c,linear:u,flat:f,legacy:m,orthographic:g,frameloop:x,dpr:b,performance:w,raycaster:v,camera:S,scene:E,size:A,onPointerMissed:(...J)=>j.current==null?void 0:j.current(...J),onCreated:J=>{J.events.connect==null||J.events.connect(a?jZ(a)?a.current:a:B.current),l&&J.setEvents({compute:(ue,ye)=>{const le=ue[l+"X"],xe=ue[l+"Y"];ye.pointer.set(le/ye.size.width*2-1,-(xe/ye.size.height)*2+1),ye.raycaster.setFromCamera(ye.pointer,ye.camera)}}),U?.(J)}}),W.current.render(d.jsx(P,{children:d.jsx(KV,{set:de,children:d.jsx(V.Suspense,{fallback:d.jsx(VZ,{set:ce}),children:e??null})})})))}),V.useEffect(()=>{const F=D.current;if(F)return()=>i4(F)},[]);const Z=a?"none":"auto";return d.jsx("div",{ref:B,style:{position:"relative",width:"100%",height:"100%",overflow:"hidden",pointerEvents:Z,...r},...O,children:d.jsx("div",{ref:M,style:{width:"100%",height:"100%"},children:d.jsx("canvas",{ref:D,style:{display:"block"},children:t})})})}),l4=V.forwardRef(function(e,t){return d.jsx(a4,{children:d.jsx(yee,{...e,ref:t})})});function hc(){return hc=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)({}).hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},hc.apply(null,arguments)}const ny=new K,pM=new K,vee=new K,rL=new Le;function xee(n,e,t){const i=ny.setFromMatrixPosition(n.matrixWorld);i.project(e);const r=t.width/2,s=t.height/2;return[i.x*r+r,-(i.y*s)+s]}function _ee(n,e){const t=ny.setFromMatrixPosition(n.matrixWorld),i=pM.setFromMatrixPosition(e.matrixWorld),r=t.sub(i),s=e.getWorldDirection(vee);return r.angleTo(s)>Math.PI/2}function wee(n,e,t,i){const r=ny.setFromMatrixPosition(n.matrixWorld),s=r.clone();s.project(e),rL.set(s.x,s.y),t.setFromCamera(rL,e);const o=t.intersectObjects(i,!0);if(o.length){const a=o[0].distance;return r.distanceTo(t.ray.origin)<a}return!0}function bee(n,e){if(e instanceof mh)return e.zoom;if(e instanceof Ui){const t=ny.setFromMatrixPosition(n.matrixWorld),i=pM.setFromMatrixPosition(e.matrixWorld),r=e.fov*Math.PI/180,s=t.distanceTo(i);return 1/(2*Math.tan(r/2)*s)}else return 1}function See(n,e,t){if(e instanceof Ui||e instanceof mh){const i=ny.setFromMatrixPosition(n.matrixWorld),r=pM.setFromMatrixPosition(e.matrixWorld),s=i.distanceTo(r),o=(t[1]-t[0])/(e.far-e.near),a=t[1]-o*e.far;return Math.round(o*s+a)}}const A1=n=>Math.abs(n)<1e-10?0:n;function c4(n,e,t=""){let i="matrix3d(";for(let r=0;r!==16;r++)i+=A1(e[r]*n.elements[r])+(r!==15?",":")");return t+i}const Tee=(n=>e=>c4(e,n))([1,-1,1,1,1,-1,1,1,1,-1,1,1,1,-1,1,1]),Eee=(n=>(e,t)=>c4(e,n(t),"translate(-50%,-50%)"))(n=>[1/n,1/n,1/n,1,-1/n,-1/n,-1/n,-1,1/n,1/n,1/n,1,1,1,1,1]);function Cee(n){return n&&typeof n=="object"&&"current"in n}const Aee=V.forwardRef(({children:n,eps:e=.001,style:t,className:i,prepend:r,center:s,fullscreen:o,portal:a,distanceFactor:l,sprite:c=!1,transform:u=!1,occlude:f,onOcclude:m,castShadow:g,receiveShadow:x,material:b,geometry:w,zIndexRange:v=[16777271,0],calculatePosition:S=xee,as:E="div",wrapperClass:I,pointerEvents:U="auto",...O},C)=>{const{gl:P,camera:M,scene:A,size:D,raycaster:B,events:j,viewport:te}=Wx(),[ce]=V.useState(()=>document.createElement(E)),pe=V.useRef(),de=V.useRef(null),W=V.useRef(0),Z=V.useRef([0,0]),F=V.useRef(null),J=V.useRef(null),ue=a?.current||j.connected||P.domElement.parentNode,ye=V.useRef(null),le=V.useRef(!1),xe=V.useMemo(()=>f&&f!=="blending"||Array.isArray(f)&&f.length&&Cee(f[0]),[f]);V.useLayoutEffect(()=>{const Ye=P.domElement;f&&f==="blending"?(Ye.style.zIndex=`${Math.floor(v[0]/2)}`,Ye.style.position="absolute",Ye.style.pointerEvents="none"):(Ye.style.zIndex=null,Ye.style.position=null,Ye.style.pointerEvents=null)},[f]),V.useLayoutEffect(()=>{if(de.current){const Ye=pe.current=mA(ce);if(A.updateMatrixWorld(),u)ce.style.cssText="position:absolute;top:0;left:0;pointer-events:none;overflow:hidden;";else{const rt=S(de.current,M,D);ce.style.cssText=`position:absolute;top:0;left:0;transform:translate3d(${rt[0]}px,${rt[1]}px,0);transform-origin:0 0;`}return ue&&(r?ue.prepend(ce):ue.appendChild(ce)),()=>{ue&&ue.removeChild(ce),Ye.unmount()}}},[ue,u]),V.useLayoutEffect(()=>{I&&(ce.className=I)},[I]);const Pe=V.useMemo(()=>u?{position:"absolute",top:0,left:0,width:D.width,height:D.height,transformStyle:"preserve-3d",pointerEvents:"none"}:{position:"absolute",transform:s?"translate3d(-50%,-50%,0)":"none",...o&&{top:-D.height/2,left:-D.width/2,width:D.width,height:D.height},...t},[t,s,o,D,u]),Me=V.useMemo(()=>({position:"absolute",pointerEvents:U}),[U]);V.useLayoutEffect(()=>{if(le.current=!1,u){var Ye;(Ye=pe.current)==null||Ye.render(V.createElement("div",{ref:F,style:Pe},V.createElement("div",{ref:J,style:Me},V.createElement("div",{ref:C,className:i,style:t,children:n}))))}else{var rt;(rt=pe.current)==null||rt.render(V.createElement("div",{ref:C,style:Pe,className:i,children:n}))}});const gt=V.useRef(!0);qw(Ye=>{if(de.current){M.updateMatrixWorld(),de.current.updateWorldMatrix(!0,!1);const rt=u?Z.current:S(de.current,M,D);if(u||Math.abs(W.current-M.zoom)>e||Math.abs(Z.current[0]-rt[0])>e||Math.abs(Z.current[1]-rt[1])>e){const Ae=_ee(de.current,M);let Ee=!1;xe&&(Array.isArray(f)?Ee=f.map(tt=>tt.current):f!=="blending"&&(Ee=[A]));const X=gt.current;if(Ee){const tt=wee(de.current,M,B,Ee);gt.current=tt&&!Ae}else gt.current=!Ae;X!==gt.current&&(m?m(!gt.current):ce.style.display=gt.current?"block":"none");const pt=Math.floor(v[0]/2),Oe=f?xe?[v[0],pt]:[pt-1,0]:v;if(ce.style.zIndex=`${See(de.current,M,Oe)}`,u){const[tt,Ve]=[D.width/2,D.height/2],Mt=M.projectionMatrix.elements[5]*Ve,{isOrthographicCamera:Xe,top:$,left:z,bottom:he,right:Se}=M,Re=Tee(M.matrixWorldInverse),we=Xe?`scale(${Mt})translate(${A1(-(Se+z)/2)}px,${A1(($+he)/2)}px)`:`translateZ(${Mt}px)`;let He=de.current.matrixWorld;c&&(He=M.matrixWorldInverse.clone().transpose().copyPosition(He).scale(de.current.scale),He.elements[3]=He.elements[7]=He.elements[11]=0,He.elements[15]=1),ce.style.width=D.width+"px",ce.style.height=D.height+"px",ce.style.perspective=Xe?"":`${Mt}px`,F.current&&J.current&&(F.current.style.transform=`${we}${Re}translate(${tt}px,${Ve}px)`,J.current.style.transform=Eee(He,1/((l||10)/400)))}else{const tt=l===void 0?1:bee(de.current,M)*l;ce.style.transform=`translate3d(${rt[0]}px,${rt[1]}px,0) scale(${tt})`}Z.current=rt,W.current=M.zoom}}if(!xe&&ye.current&&!le.current)if(u){if(F.current){const rt=F.current.children[0];if(rt!=null&&rt.clientWidth&&rt!=null&&rt.clientHeight){const{isOrthographicCamera:Ae}=M;if(Ae||w)O.scale&&(Array.isArray(O.scale)?O.scale instanceof K?ye.current.scale.copy(O.scale.clone().divideScalar(1)):ye.current.scale.set(1/O.scale[0],1/O.scale[1],1/O.scale[2]):ye.current.scale.setScalar(1/O.scale));else{const Ee=(l||10)/400,X=rt.clientWidth*Ee,pt=rt.clientHeight*Ee;ye.current.scale.set(X,pt,1)}le.current=!0}}}else{const rt=ce.children[0];if(rt!=null&&rt.clientWidth&&rt!=null&&rt.clientHeight){const Ae=1/te.factor,Ee=rt.clientWidth*Ae,X=rt.clientHeight*Ae;ye.current.scale.set(Ee,X,1),le.current=!0}ye.current.lookAt(Ye.camera.position)}});const Kt=V.useMemo(()=>({vertexShader:u?void 0:`
          /*
            This shader is from the THREE's SpriteMaterial.
            We need to turn the backing plane into a Sprite
            (make it always face the camera) if "transfrom"
            is false.
          */
          #include <common>

          void main() {
            vec2 center = vec2(0., 1.);
            float rotation = 0.0;

            // This is somewhat arbitrary, but it seems to work well
            // Need to figure out how to derive this dynamically if it even matters
            float size = 0.03;

            vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
            vec2 scale;
            scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
            scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );

            bool isPerspective = isPerspectiveMatrix( projectionMatrix );
            if ( isPerspective ) scale *= - mvPosition.z;

            vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale * size;
            vec2 rotatedPosition;
            rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
            rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
            mvPosition.xy += rotatedPosition;

            gl_Position = projectionMatrix * mvPosition;
          }
      `,fragmentShader:`
        void main() {
          gl_FragColor = vec4(0.0, 0.0, 0.0, 0.0);
        }
      `}),[u]);return V.createElement("group",hc({},O,{ref:de}),f&&!xe&&V.createElement("mesh",{castShadow:g,receiveShadow:x,ref:ye},w||V.createElement("planeGeometry",null),b||V.createElement("shaderMaterial",{side:Mo,vertexShader:Kt.vertexShader,fragmentShader:Kt.fragmentShader})))}),sL=n=>{let e;const t=new Set,i=(c,u)=>{const f=typeof c=="function"?c(e):c;if(!Object.is(f,e)){const m=e;e=u??(typeof f!="object"||f===null)?f:Object.assign({},e,f),t.forEach(g=>g(e,m))}},r=()=>e,a={setState:i,getState:r,getInitialState:()=>l,subscribe:c=>(t.add(c),()=>t.delete(c))},l=e=n(i,r,a);return a},Mee=n=>n?sL(n):sL,Iee=n=>n;function Pee(n,e=Iee){const t=Qo.useSyncExternalStore(n.subscribe,()=>e(n.getState()),()=>e(n.getInitialState()));return Qo.useDebugValue(t),t}const oL=n=>{const e=Mee(n),t=i=>Pee(e,i);return Object.assign(t,e),t},Ree=n=>n?oL(n):oL;let jp=0;const Nee=Ree(n=>(Nd.onStart=(e,t,i)=>{n({active:!0,item:e,loaded:t,total:i,progress:(t-jp)/(i-jp)*100})},Nd.onLoad=()=>{n({active:!1})},Nd.onError=e=>n(t=>({errors:[...t.errors,e]})),Nd.onProgress=(e,t,i)=>{t===i&&(jp=i),n({active:!0,item:e,loaded:t,total:i,progress:(t-jp)/(i-jp)*100||100})},{errors:[],active:!1,progress:0,item:"",loaded:0,total:0}));function Xd(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function aL(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),t.push.apply(t,i)}return t}function lL(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?aL(Object(t),!0).forEach(function(i){Xd(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):aL(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}new Le;new Le;function u4(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}var to=function n(e,t,i){var r=this;u4(this,n),Xd(this,"dot2",function(s,o){return r.x*s+r.y*o}),Xd(this,"dot3",function(s,o,a){return r.x*s+r.y*o+r.z*a}),this.x=e,this.y=t,this.z=i},Dee=[new to(1,1,0),new to(-1,1,0),new to(1,-1,0),new to(-1,-1,0),new to(1,0,1),new to(-1,0,1),new to(1,0,-1),new to(-1,0,-1),new to(0,1,1),new to(0,-1,1),new to(0,1,-1),new to(0,-1,-1)],cL=[151,160,137,91,90,15,131,13,201,95,96,53,194,233,7,225,140,36,103,30,69,142,8,99,37,240,21,10,23,190,6,148,247,120,234,75,0,26,197,62,94,252,219,203,117,35,11,32,57,177,33,88,237,149,56,87,174,20,125,136,171,168,68,175,74,165,71,134,139,48,27,166,77,146,158,231,83,111,229,122,60,211,133,230,220,105,92,41,55,46,245,40,244,102,143,54,65,25,63,161,1,216,80,73,209,76,132,187,208,89,18,169,200,196,135,130,116,188,159,86,164,100,109,198,173,186,3,64,52,217,226,250,124,123,5,202,38,147,118,126,255,82,85,212,207,206,59,227,47,16,58,17,182,189,28,42,223,183,170,213,119,248,152,2,44,154,163,70,221,153,101,155,167,43,172,9,129,22,39,253,19,98,108,110,79,113,224,232,178,185,112,104,218,246,97,228,251,34,242,193,238,210,144,12,191,179,162,241,81,51,145,235,249,14,239,107,49,192,214,31,181,199,106,157,184,84,204,176,115,121,50,45,127,4,150,254,138,236,205,93,222,114,67,29,24,72,243,141,128,195,78,66,215,61,156,180],uL=new Array(512),hL=new Array(512),Lee=function(e){e>0&&e<1&&(e*=65536),e=Math.floor(e),e<256&&(e|=e<<8);for(var t=0;t<256;t++){var i;t&1?i=cL[t]^e&255:i=cL[t]^e>>8&255,uL[t]=uL[t+256]=i,hL[t]=hL[t+256]=Dee[i%12]}};Lee(0);function kee(n){if(typeof n=="number")n=Math.abs(n);else if(typeof n=="string"){var e=n;n=0;for(var t=0;t<e.length;t++)n=(n+(t+1)*(e.charCodeAt(t)%96))%2147483647}return n===0&&(n=311),n}function dL(n){var e=kee(n);return function(){var t=e*48271%2147483647;return e=t,t/2147483647}}var Oee=function n(e){var t=this;u4(this,n),Xd(this,"seed",0),Xd(this,"init",function(i){t.seed=i,t.value=dL(i)}),Xd(this,"value",dL(this.seed)),this.init(e)},Uee=new Oee(Math.random()),Fee={radius:1,center:[0,0,0]};function jee(n,e){for(var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Uee,i=lL(lL({},Fee),e),r=i.radius,s=i.center,o=0;o<n.length;o+=3){var a=Math.pow(t.value(),.3333333333333333),l=t.value()*2-1,c=t.value()*2-1,u=t.value()*2-1,f=Math.sqrt(l*l+c*c+u*u);l=a*l/f,c=a*c/f,u=a*u/f,n[o]=l*r+s[0],n[o+1]=c*r+s[1],n[o+2]=u*r+s[2]}return n}const Vee=()=>parseInt(Hg.replace(/\D+/g,"")),h4=Vee();var d4={exports:{}},Bee="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",zee=Bee,Hee=zee;function f4(){}function p4(){}p4.resetWarningCache=f4;var Gee=function(){function n(i,r,s,o,a,l){if(l!==Hee){var c=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw c.name="Invariant Violation",c}}n.isRequired=n;function e(){return n}var t={array:n,bigint:n,bool:n,func:n,number:n,object:n,string:n,symbol:n,any:n,arrayOf:e,element:n,elementType:n,instanceOf:e,node:n,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:p4,resetWarningCache:f4};return t.PropTypes=t,t};d4.exports=Gee();var mM=d4.exports;const ct=K_(mM),zT=h4>=154?"opaque_fragment":"output_fragment";class Wee extends Mw{constructor(e){super(e),this.onBeforeCompile=(t,i)=>{const{isWebGL2:r}=i.capabilities;t.fragmentShader=t.fragmentShader.replace(`#include <${zT}>`,`
        ${r?`#include <${zT}>`:`#extension GL_OES_standard_derivatives : enable
#include <${zT}>`}
      vec2 cxy = 2.0 * gl_PointCoord - 1.0;
      float r = dot(cxy, cxy);
      float delta = fwidth(r);     
      float mask = 1.0 - smoothstep(1.0 - delta, 1.0 + delta, r);
      gl_FragColor = vec4(gl_FragColor.rgb, mask * gl_FragColor.a );
      #include <tonemapping_fragment>
      #include <${h4>=154?"colorspace_fragment":"encodings_fragment"}>
      `)}}}const qee=V.forwardRef((n,e)=>{const[t]=V.useState(()=>new Wee(null));return V.createElement("primitive",hc({},n,{object:t,ref:e,attach:"material"}))});let du,Vp;const $ee=V.createContext(null),fL=new Vt,pL=new K,Xee=V.forwardRef(({children:n,range:e,limit:t=1e3,...i},r)=>{const s=V.useRef(null);V.useImperativeHandle(r,()=>s.current,[]);const[o,a]=V.useState([]),[[l,c,u]]=V.useState(()=>[new Float32Array(t*3),Float32Array.from({length:t*3},()=>1),Float32Array.from({length:t},()=>1)]);V.useEffect(()=>{s.current.geometry.attributes.position.needsUpdate=!0}),qw(()=>{for(s.current.updateMatrix(),s.current.updateMatrixWorld(),fL.copy(s.current.matrixWorld).invert(),s.current.geometry.drawRange.count=Math.min(t,e!==void 0?e:t,o.length),du=0;du<o.length;du++)Vp=o[du].current,Vp.getWorldPosition(pL).applyMatrix4(fL),pL.toArray(l,du*3),s.current.geometry.attributes.position.needsUpdate=!0,Vp.matrixWorldNeedsUpdate=!0,Vp.color.toArray(c,du*3),s.current.geometry.attributes.color.needsUpdate=!0,u.set([Vp.size],du),s.current.geometry.attributes.size.needsUpdate=!0});const f=V.useMemo(()=>({getParent:()=>s,subscribe:m=>(a(g=>[...g,m]),()=>a(g=>g.filter(x=>x.current!==m.current)))}),[]);return V.createElement("points",hc({userData:{instances:o},matrixAutoUpdate:!1,ref:s,raycast:()=>null},i),V.createElement("bufferGeometry",null,V.createElement("bufferAttribute",{attach:"attributes-position",count:l.length/3,array:l,itemSize:3,usage:Fu}),V.createElement("bufferAttribute",{attach:"attributes-color",count:c.length/3,array:c,itemSize:3,usage:Fu}),V.createElement("bufferAttribute",{attach:"attributes-size",count:u.length,array:u,itemSize:1,usage:Fu})),V.createElement($ee.Provider,{value:f},n))}),Kee=V.forwardRef(({children:n,positions:e,colors:t,sizes:i,stride:r=3,...s},o)=>{const a=V.useRef(null);return V.useImperativeHandle(o,()=>a.current,[]),qw(()=>{const l=a.current.geometry.attributes;l.position.needsUpdate=!0,t&&(l.color.needsUpdate=!0),i&&(l.size.needsUpdate=!0)}),V.createElement("points",hc({ref:a},s),V.createElement("bufferGeometry",null,V.createElement("bufferAttribute",{attach:"attributes-position",count:e.length/r,array:e,itemSize:r,usage:Fu}),t&&V.createElement("bufferAttribute",{attach:"attributes-color",count:t.length/r,array:t,itemSize:3,usage:Fu}),i&&V.createElement("bufferAttribute",{attach:"attributes-size",count:i.length/r,array:i,itemSize:1,usage:Fu})),n)}),Yee=V.forwardRef((n,e)=>n.positions instanceof Float32Array?V.createElement(Kee,hc({},n,{ref:e})):V.createElement(Xee,hc({},n,{ref:e})));function Jee({all:n,scene:e,camera:t}){const i=Wx(({gl:o})=>o),r=Wx(({camera:o})=>o),s=Wx(({scene:o})=>o);return V.useLayoutEffect(()=>{const o=[];n&&(e||s).traverse(c=>{c.visible===!1&&(o.push(c),c.visible=!0)}),i.compile(e||s,t||r);const a=new VA(128);new jA(.01,1e5,a).update(i,e||s),a.dispose(),o.forEach(c=>c.visible=!1)},[]),null}const Qee=n=>{const e=V.useRef(),[t]=V.useState(()=>jee(new Float32Array(5e3),{radius:1.2}));return qw((i,r)=>{e.current.rotation.x-=r/10,e.current.rotation.y-=r/15}),d.jsx("group",{rotation:[0,0,Math.PI/4],children:d.jsx(Yee,{ref:e,positions:t,stride:3,frustumCulled:!0,...n,children:d.jsx(qee,{transparent:!0,color:"#f272c8",size:.004,sizeAtttenuation:!0,depthWrite:!1})})})},Zee=()=>d.jsx("div",{className:"w-full h-auto absolute inset-0 z-[-1]",children:d.jsxs(l4,{camera:{position:[0,0,1]},children:[d.jsx(V.Suspense,{fallback:null,children:d.jsx(Qee,{})}),d.jsx(Jee,{all:!0})]})}),m4=V.createContext({});function ete(n){const e=V.useRef(null);return e.current===null&&(e.current=n()),e.current}const gM=V.createContext(null),g4=V.createContext({transformPagePoint:n=>n,isStatic:!1,reducedMotion:"never"});function tte(n=!0){const e=V.useContext(gM);if(e===null)return[!0,null];const{isPresent:t,onExitComplete:i,register:r}=e,s=V.useId();V.useEffect(()=>{n&&r(s)},[n]);const o=V.useCallback(()=>n&&i&&i(s),[s,i,n]);return!t&&i?[!1,o]:[!0]}const yM=typeof window<"u",nte=yM?V.useLayoutEffect:V.useEffect,js=n=>n;let y4=js;function vM(n){let e;return()=>(e===void 0&&(e=n()),e)}const ff=(n,e,t)=>{const i=e-n;return i===0?1:(t-n)/i},Ba=n=>n*1e3,za=n=>n/1e3,ite={useManualTiming:!1};function rte(n){let e=new Set,t=new Set,i=!1,r=!1;const s=new WeakSet;let o={delta:0,timestamp:0,isProcessing:!1};function a(c){s.has(c)&&(l.schedule(c),n()),c(o)}const l={schedule:(c,u=!1,f=!1)=>{const g=f&&i?e:t;return u&&s.add(c),g.has(c)||g.add(c),c},cancel:c=>{t.delete(c),s.delete(c)},process:c=>{if(o=c,i){r=!0;return}i=!0,[e,t]=[t,e],e.forEach(a),e.clear(),i=!1,r&&(r=!1,l.process(c))}};return l}const mx=["read","resolveKeyframes","update","preRender","render","postRender"],ste=40;function v4(n,e){let t=!1,i=!0;const r={delta:0,timestamp:0,isProcessing:!1},s=()=>t=!0,o=mx.reduce((v,S)=>(v[S]=rte(s),v),{}),{read:a,resolveKeyframes:l,update:c,preRender:u,render:f,postRender:m}=o,g=()=>{const v=performance.now();t=!1,r.delta=i?1e3/60:Math.max(Math.min(v-r.timestamp,ste),1),r.timestamp=v,r.isProcessing=!0,a.process(r),l.process(r),c.process(r),u.process(r),f.process(r),m.process(r),r.isProcessing=!1,t&&e&&(i=!1,n(g))},x=()=>{t=!0,i=!0,r.isProcessing||n(g)};return{schedule:mx.reduce((v,S)=>{const E=o[S];return v[S]=(I,U=!1,O=!1)=>(t||x(),E.schedule(I,U,O)),v},{}),cancel:v=>{for(let S=0;S<mx.length;S++)o[mx[S]].cancel(v)},state:r,steps:o}}const{schedule:ri,cancel:dc,state:ur,steps:HT}=v4(typeof requestAnimationFrame<"u"?requestAnimationFrame:js,!0),x4=V.createContext({strict:!1}),mL={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},pf={};for(const n in mL)pf[n]={isEnabled:e=>mL[n].some(t=>!!e[t])};function ote(n){for(const e in n)pf[e]={...pf[e],...n[e]}}const ate=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function v_(n){return n.startsWith("while")||n.startsWith("drag")&&n!=="draggable"||n.startsWith("layout")||n.startsWith("onTap")||n.startsWith("onPan")||n.startsWith("onLayout")||ate.has(n)}let _4=n=>!v_(n);function lte(n){n&&(_4=e=>e.startsWith("on")?!v_(e):n(e))}try{lte(require("@emotion/is-prop-valid").default)}catch{}function cte(n,e,t){const i={};for(const r in n)r==="values"&&typeof n.values=="object"||(_4(r)||t===!0&&v_(r)||!e&&!v_(r)||n.draggable&&r.startsWith("onDrag"))&&(i[r]=n[r]);return i}function ute(n){if(typeof Proxy>"u")return n;const e=new Map,t=(...i)=>n(...i);return new Proxy(t,{get:(i,r)=>r==="create"?n:(e.has(r)||e.set(r,n(r)),e.get(r))})}const $w=V.createContext({});function _g(n){return typeof n=="string"||Array.isArray(n)}function Xw(n){return n!==null&&typeof n=="object"&&typeof n.start=="function"}const xM=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],_M=["initial",...xM];function Kw(n){return Xw(n.animate)||_M.some(e=>_g(n[e]))}function w4(n){return!!(Kw(n)||n.variants)}function hte(n,e){if(Kw(n)){const{initial:t,animate:i}=n;return{initial:t===!1||_g(t)?t:void 0,animate:_g(i)?i:void 0}}return n.inherit!==!1?e:{}}function dte(n){const{initial:e,animate:t}=hte(n,V.useContext($w));return V.useMemo(()=>({initial:e,animate:t}),[gL(e),gL(t)])}function gL(n){return Array.isArray(n)?n.join(" "):n}const fte=Symbol.for("motionComponentSymbol");function kd(n){return n&&typeof n=="object"&&Object.prototype.hasOwnProperty.call(n,"current")}function pte(n,e,t){return V.useCallback(i=>{i&&n.onMount&&n.onMount(i),e&&(i?e.mount(i):e.unmount()),t&&(typeof t=="function"?t(i):kd(t)&&(t.current=i))},[e])}const wM=n=>n.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),mte="framerAppearId",b4="data-"+wM(mte),{schedule:bM}=v4(queueMicrotask,!1),S4=V.createContext({});function gte(n,e,t,i,r){var s,o;const{visualElement:a}=V.useContext($w),l=V.useContext(x4),c=V.useContext(gM),u=V.useContext(g4).reducedMotion,f=V.useRef(null);i=i||l.renderer,!f.current&&i&&(f.current=i(n,{visualState:e,parent:a,props:t,presenceContext:c,blockInitialAnimation:c?c.initial===!1:!1,reducedMotionConfig:u}));const m=f.current,g=V.useContext(S4);m&&!m.projection&&r&&(m.type==="html"||m.type==="svg")&&yte(f.current,t,r,g);const x=V.useRef(!1);V.useInsertionEffect(()=>{m&&x.current&&m.update(t,c)});const b=t[b4],w=V.useRef(!!b&&!(!((s=window.MotionHandoffIsComplete)===null||s===void 0)&&s.call(window,b))&&((o=window.MotionHasOptimisedAnimation)===null||o===void 0?void 0:o.call(window,b)));return nte(()=>{m&&(x.current=!0,window.MotionIsMounted=!0,m.updateFeatures(),bM.render(m.render),w.current&&m.animationState&&m.animationState.animateChanges())}),V.useEffect(()=>{m&&(!w.current&&m.animationState&&m.animationState.animateChanges(),w.current&&(queueMicrotask(()=>{var v;(v=window.MotionHandoffMarkAsComplete)===null||v===void 0||v.call(window,b)}),w.current=!1))}),m}function yte(n,e,t,i){const{layoutId:r,layout:s,drag:o,dragConstraints:a,layoutScroll:l,layoutRoot:c}=e;n.projection=new t(n.latestValues,e["data-framer-portal-id"]?void 0:T4(n.parent)),n.projection.setOptions({layoutId:r,layout:s,alwaysMeasureLayout:!!o||a&&kd(a),visualElement:n,animationType:typeof s=="string"?s:"both",initialPromotionConfig:i,layoutScroll:l,layoutRoot:c})}function T4(n){if(n)return n.options.allowProjection!==!1?n.projection:T4(n.parent)}function vte({preloadedFeatures:n,createVisualElement:e,useRender:t,useVisualState:i,Component:r}){var s,o;n&&ote(n);function a(c,u){let f;const m={...V.useContext(g4),...c,layoutId:xte(c)},{isStatic:g}=m,x=dte(c),b=i(c,g);if(!g&&yM){_te();const w=wte(m);f=w.MeasureLayout,x.visualElement=gte(r,b,m,e,w.ProjectionNode)}return d.jsxs($w.Provider,{value:x,children:[f&&x.visualElement?d.jsx(f,{visualElement:x.visualElement,...m}):null,t(r,c,pte(b,x.visualElement,u),b,g,x.visualElement)]})}a.displayName=`motion.${typeof r=="string"?r:`create(${(o=(s=r.displayName)!==null&&s!==void 0?s:r.name)!==null&&o!==void 0?o:""})`}`;const l=V.forwardRef(a);return l[fte]=r,l}function xte({layoutId:n}){const e=V.useContext(m4).id;return e&&n!==void 0?e+"-"+n:n}function _te(n,e){V.useContext(x4).strict}function wte(n){const{drag:e,layout:t}=pf;if(!e&&!t)return{};const i={...e,...t};return{MeasureLayout:e?.isEnabled(n)||t?.isEnabled(n)?i.MeasureLayout:void 0,ProjectionNode:i.ProjectionNode}}const bte=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function SM(n){return typeof n!="string"||n.includes("-")?!1:!!(bte.indexOf(n)>-1||/[A-Z]/u.test(n))}function yL(n){const e=[{},{}];return n?.values.forEach((t,i)=>{e[0][i]=t.get(),e[1][i]=t.getVelocity()}),e}function TM(n,e,t,i){if(typeof e=="function"){const[r,s]=yL(i);e=e(t!==void 0?t:n.custom,r,s)}if(typeof e=="string"&&(e=n.variants&&n.variants[e]),typeof e=="function"){const[r,s]=yL(i);e=e(t!==void 0?t:n.custom,r,s)}return e}const M1=n=>Array.isArray(n),Ste=n=>!!(n&&typeof n=="object"&&n.mix&&n.toValue),Tte=n=>M1(n)?n[n.length-1]||0:n,kr=n=>!!(n&&n.getVelocity);function qx(n){const e=kr(n)?n.get():n;return Ste(e)?e.toValue():e}function Ete({scrapeMotionValuesFromProps:n,createRenderState:e,onUpdate:t},i,r,s){const o={latestValues:Cte(i,r,s,n),renderState:e()};return t&&(o.onMount=a=>t({props:i,current:a,...o}),o.onUpdate=a=>t(a)),o}const E4=n=>(e,t)=>{const i=V.useContext($w),r=V.useContext(gM),s=()=>Ete(n,e,i,r);return t?s():ete(s)};function Cte(n,e,t,i){const r={},s=i(n,{});for(const m in s)r[m]=qx(s[m]);let{initial:o,animate:a}=n;const l=Kw(n),c=w4(n);e&&c&&!l&&n.inherit!==!1&&(o===void 0&&(o=e.initial),a===void 0&&(a=e.animate));let u=t?t.initial===!1:!1;u=u||o===!1;const f=u?a:o;if(f&&typeof f!="boolean"&&!Xw(f)){const m=Array.isArray(f)?f:[f];for(let g=0;g<m.length;g++){const x=TM(n,m[g]);if(x){const{transitionEnd:b,transition:w,...v}=x;for(const S in v){let E=v[S];if(Array.isArray(E)){const I=u?E.length-1:0;E=E[I]}E!==null&&(r[S]=E)}for(const S in b)r[S]=b[S]}}}return r}const Lf=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],yh=new Set(Lf),C4=n=>e=>typeof e=="string"&&e.startsWith(n),A4=C4("--"),Ate=C4("var(--"),EM=n=>Ate(n)?Mte.test(n.split("/*")[0].trim()):!1,Mte=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,M4=(n,e)=>e&&typeof n=="number"?e.transform(n):n,Za=(n,e,t)=>t>e?e:t<n?n:t,kf={test:n=>typeof n=="number",parse:parseFloat,transform:n=>n},wg={...kf,transform:n=>Za(0,1,n)},gx={...kf,default:1},iy=n=>({test:e=>typeof e=="string"&&e.endsWith(n)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${n}`}),Il=iy("deg"),ra=iy("%"),Ut=iy("px"),Ite=iy("vh"),Pte=iy("vw"),vL={...ra,parse:n=>ra.parse(n)/100,transform:n=>ra.transform(n*100)},Rte={borderWidth:Ut,borderTopWidth:Ut,borderRightWidth:Ut,borderBottomWidth:Ut,borderLeftWidth:Ut,borderRadius:Ut,radius:Ut,borderTopLeftRadius:Ut,borderTopRightRadius:Ut,borderBottomRightRadius:Ut,borderBottomLeftRadius:Ut,width:Ut,maxWidth:Ut,height:Ut,maxHeight:Ut,top:Ut,right:Ut,bottom:Ut,left:Ut,padding:Ut,paddingTop:Ut,paddingRight:Ut,paddingBottom:Ut,paddingLeft:Ut,margin:Ut,marginTop:Ut,marginRight:Ut,marginBottom:Ut,marginLeft:Ut,backgroundPositionX:Ut,backgroundPositionY:Ut},Nte={rotate:Il,rotateX:Il,rotateY:Il,rotateZ:Il,scale:gx,scaleX:gx,scaleY:gx,scaleZ:gx,skew:Il,skewX:Il,skewY:Il,distance:Ut,translateX:Ut,translateY:Ut,translateZ:Ut,x:Ut,y:Ut,z:Ut,perspective:Ut,transformPerspective:Ut,opacity:wg,originX:vL,originY:vL,originZ:Ut},xL={...kf,transform:Math.round},CM={...Rte,...Nte,zIndex:xL,size:Ut,fillOpacity:wg,strokeOpacity:wg,numOctaves:xL},Dte={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},Lte=Lf.length;function kte(n,e,t){let i="",r=!0;for(let s=0;s<Lte;s++){const o=Lf[s],a=n[o];if(a===void 0)continue;let l=!0;if(typeof a=="number"?l=a===(o.startsWith("scale")?1:0):l=parseFloat(a)===0,!l||t){const c=M4(a,CM[o]);if(!l){r=!1;const u=Dte[o]||o;i+=`${u}(${c}) `}t&&(e[o]=c)}}return i=i.trim(),t?i=t(e,r?"":i):r&&(i="none"),i}function AM(n,e,t){const{style:i,vars:r,transformOrigin:s}=n;let o=!1,a=!1;for(const l in e){const c=e[l];if(yh.has(l)){o=!0;continue}else if(A4(l)){r[l]=c;continue}else{const u=M4(c,CM[l]);l.startsWith("origin")?(a=!0,s[l]=u):i[l]=u}}if(e.transform||(o||t?i.transform=kte(e,n.transform,t):i.transform&&(i.transform="none")),a){const{originX:l="50%",originY:c="50%",originZ:u=0}=s;i.transformOrigin=`${l} ${c} ${u}`}}const Ote={offset:"stroke-dashoffset",array:"stroke-dasharray"},Ute={offset:"strokeDashoffset",array:"strokeDasharray"};function Fte(n,e,t=1,i=0,r=!0){n.pathLength=1;const s=r?Ote:Ute;n[s.offset]=Ut.transform(-i);const o=Ut.transform(e),a=Ut.transform(t);n[s.array]=`${o} ${a}`}function _L(n,e,t){return typeof n=="string"?n:Ut.transform(e+t*n)}function jte(n,e,t){const i=_L(e,n.x,n.width),r=_L(t,n.y,n.height);return`${i} ${r}`}function MM(n,{attrX:e,attrY:t,attrScale:i,originX:r,originY:s,pathLength:o,pathSpacing:a=1,pathOffset:l=0,...c},u,f){if(AM(n,c,f),u){n.style.viewBox&&(n.attrs.viewBox=n.style.viewBox);return}n.attrs=n.style,n.style={};const{attrs:m,style:g,dimensions:x}=n;m.transform&&(x&&(g.transform=m.transform),delete m.transform),x&&(r!==void 0||s!==void 0||g.transform)&&(g.transformOrigin=jte(x,r!==void 0?r:.5,s!==void 0?s:.5)),e!==void 0&&(m.x=e),t!==void 0&&(m.y=t),i!==void 0&&(m.scale=i),o!==void 0&&Fte(m,o,a,l,!1)}const IM=()=>({style:{},transform:{},transformOrigin:{},vars:{}}),I4=()=>({...IM(),attrs:{}}),PM=n=>typeof n=="string"&&n.toLowerCase()==="svg";function P4(n,{style:e,vars:t},i,r){Object.assign(n.style,e,r&&r.getProjectionStyles(i));for(const s in t)n.style.setProperty(s,t[s])}const R4=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function N4(n,e,t,i){P4(n,e,void 0,i);for(const r in e.attrs)n.setAttribute(R4.has(r)?r:wM(r),e.attrs[r])}const x_={};function Vte(n){Object.assign(x_,n)}function D4(n,{layout:e,layoutId:t}){return yh.has(n)||n.startsWith("origin")||(e||t!==void 0)&&(!!x_[n]||n==="opacity")}function RM(n,e,t){var i;const{style:r}=n,s={};for(const o in r)(kr(r[o])||e.style&&kr(e.style[o])||D4(o,n)||((i=t?.getValue(o))===null||i===void 0?void 0:i.liveStyle)!==void 0)&&(s[o]=r[o]);return s}function L4(n,e,t){const i=RM(n,e,t);for(const r in n)if(kr(n[r])||kr(e[r])){const s=Lf.indexOf(r)!==-1?"attr"+r.charAt(0).toUpperCase()+r.substring(1):r;i[s]=n[r]}return i}function Bte(n,e){try{e.dimensions=typeof n.getBBox=="function"?n.getBBox():n.getBoundingClientRect()}catch{e.dimensions={x:0,y:0,width:0,height:0}}}const wL=["x","y","width","height","cx","cy","r"],zte={useVisualState:E4({scrapeMotionValuesFromProps:L4,createRenderState:I4,onUpdate:({props:n,prevProps:e,current:t,renderState:i,latestValues:r})=>{if(!t)return;let s=!!n.drag;if(!s){for(const a in r)if(yh.has(a)){s=!0;break}}if(!s)return;let o=!e;if(e)for(let a=0;a<wL.length;a++){const l=wL[a];n[l]!==e[l]&&(o=!0)}o&&ri.read(()=>{Bte(t,i),ri.render(()=>{MM(i,r,PM(t.tagName),n.transformTemplate),N4(t,i)})})}})},Hte={useVisualState:E4({scrapeMotionValuesFromProps:RM,createRenderState:IM})};function k4(n,e,t){for(const i in e)!kr(e[i])&&!D4(i,t)&&(n[i]=e[i])}function Gte({transformTemplate:n},e){return V.useMemo(()=>{const t=IM();return AM(t,e,n),Object.assign({},t.vars,t.style)},[e])}function Wte(n,e){const t=n.style||{},i={};return k4(i,t,n),Object.assign(i,Gte(n,e)),i}function qte(n,e){const t={},i=Wte(n,e);return n.drag&&n.dragListener!==!1&&(t.draggable=!1,i.userSelect=i.WebkitUserSelect=i.WebkitTouchCallout="none",i.touchAction=n.drag===!0?"none":`pan-${n.drag==="x"?"y":"x"}`),n.tabIndex===void 0&&(n.onTap||n.onTapStart||n.whileTap)&&(t.tabIndex=0),t.style=i,t}function $te(n,e,t,i){const r=V.useMemo(()=>{const s=I4();return MM(s,e,PM(i),n.transformTemplate),{...s.attrs,style:{...s.style}}},[e]);if(n.style){const s={};k4(s,n.style,n),r.style={...s,...r.style}}return r}function Xte(n=!1){return(t,i,r,{latestValues:s},o)=>{const l=(SM(t)?$te:qte)(i,s,o,t),c=cte(i,typeof t=="string",n),u=t!==V.Fragment?{...c,...l,ref:r}:{},{children:f}=i,m=V.useMemo(()=>kr(f)?f.get():f,[f]);return V.createElement(t,{...u,children:m})}}function Kte(n,e){return function(i,{forwardMotionProps:r}={forwardMotionProps:!1}){const o={...SM(i)?zte:Hte,preloadedFeatures:n,useRender:Xte(r),createVisualElement:e,Component:i};return vte(o)}}function O4(n,e){if(!Array.isArray(e))return!1;const t=e.length;if(t!==n.length)return!1;for(let i=0;i<t;i++)if(e[i]!==n[i])return!1;return!0}function Yw(n,e,t){const i=n.getProps();return TM(i,e,t!==void 0?t:i.custom,n)}const Yte=vM(()=>window.ScrollTimeline!==void 0);class Jte{constructor(e){this.stop=()=>this.runAll("stop"),this.animations=e.filter(Boolean)}get finished(){return Promise.all(this.animations.map(e=>"finished"in e?e.finished:e))}getAll(e){return this.animations[0][e]}setAll(e,t){for(let i=0;i<this.animations.length;i++)this.animations[i][e]=t}attachTimeline(e,t){const i=this.animations.map(r=>{if(Yte()&&r.attachTimeline)return r.attachTimeline(e);if(typeof t=="function")return t(r)});return()=>{i.forEach((r,s)=>{r&&r(),this.animations[s].stop()})}}get time(){return this.getAll("time")}set time(e){this.setAll("time",e)}get speed(){return this.getAll("speed")}set speed(e){this.setAll("speed",e)}get startTime(){return this.getAll("startTime")}get duration(){let e=0;for(let t=0;t<this.animations.length;t++)e=Math.max(e,this.animations[t].duration);return e}runAll(e){this.animations.forEach(t=>t[e]())}flatten(){this.runAll("flatten")}play(){this.runAll("play")}pause(){this.runAll("pause")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}class Qte extends Jte{then(e,t){return Promise.all(this.animations).then(e).catch(t)}}function NM(n,e){return n?n[e]||n.default||n:void 0}const I1=2e4;function U4(n){let e=0;const t=50;let i=n.next(e);for(;!i.done&&e<I1;)e+=t,i=n.next(e);return e>=I1?1/0:e}function DM(n){return typeof n=="function"}function bL(n,e){n.timeline=e,n.onfinish=null}const LM=n=>Array.isArray(n)&&typeof n[0]=="number",Zte={linearEasing:void 0};function ene(n,e){const t=vM(n);return()=>{var i;return(i=Zte[e])!==null&&i!==void 0?i:t()}}const __=ene(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),F4=(n,e,t=10)=>{let i="";const r=Math.max(Math.round(e/t),2);for(let s=0;s<r;s++)i+=n(ff(0,r-1,s))+", ";return`linear(${i.substring(0,i.length-2)})`};function j4(n){return!!(typeof n=="function"&&__()||!n||typeof n=="string"&&(n in P1||__())||LM(n)||Array.isArray(n)&&n.every(j4))}const Kp=([n,e,t,i])=>`cubic-bezier(${n}, ${e}, ${t}, ${i})`,P1={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Kp([0,.65,.55,1]),circOut:Kp([.55,0,1,.45]),backIn:Kp([.31,.01,.66,-.59]),backOut:Kp([.33,1.53,.69,.99])};function V4(n,e){if(n)return typeof n=="function"&&__()?F4(n,e):LM(n)?Kp(n):Array.isArray(n)?n.map(t=>V4(t,e)||P1.easeOut):P1[n]}const wo={x:!1,y:!1};function B4(){return wo.x||wo.y}function tne(n,e,t){var i;if(n instanceof Element)return[n];if(typeof n=="string"){let r=document;const s=(i=void 0)!==null&&i!==void 0?i:r.querySelectorAll(n);return s?Array.from(s):[]}return Array.from(n)}function z4(n,e){const t=tne(n),i=new AbortController,r={passive:!0,...e,signal:i.signal};return[t,r,()=>i.abort()]}function SL(n){return e=>{e.pointerType==="touch"||B4()||n(e)}}function nne(n,e,t={}){const[i,r,s]=z4(n,t),o=SL(a=>{const{target:l}=a,c=e(a);if(typeof c!="function"||!l)return;const u=SL(f=>{c(f),l.removeEventListener("pointerleave",u)});l.addEventListener("pointerleave",u,r)});return i.forEach(a=>{a.addEventListener("pointerenter",o,r)}),s}const H4=(n,e)=>e?n===e?!0:H4(n,e.parentElement):!1,kM=n=>n.pointerType==="mouse"?typeof n.button!="number"||n.button<=0:n.isPrimary!==!1,ine=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function rne(n){return ine.has(n.tagName)||n.tabIndex!==-1}const Yp=new WeakSet;function TL(n){return e=>{e.key==="Enter"&&n(e)}}function GT(n,e){n.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const sne=(n,e)=>{const t=n.currentTarget;if(!t)return;const i=TL(()=>{if(Yp.has(t))return;GT(t,"down");const r=TL(()=>{GT(t,"up")}),s=()=>GT(t,"cancel");t.addEventListener("keyup",r,e),t.addEventListener("blur",s,e)});t.addEventListener("keydown",i,e),t.addEventListener("blur",()=>t.removeEventListener("keydown",i),e)};function EL(n){return kM(n)&&!B4()}function one(n,e,t={}){const[i,r,s]=z4(n,t),o=a=>{const l=a.currentTarget;if(!EL(a)||Yp.has(l))return;Yp.add(l);const c=e(a),u=(g,x)=>{window.removeEventListener("pointerup",f),window.removeEventListener("pointercancel",m),!(!EL(g)||!Yp.has(l))&&(Yp.delete(l),typeof c=="function"&&c(g,{success:x}))},f=g=>{u(g,t.useGlobalTarget||H4(l,g.target))},m=g=>{u(g,!1)};window.addEventListener("pointerup",f,r),window.addEventListener("pointercancel",m,r)};return i.forEach(a=>{!rne(a)&&a.getAttribute("tabindex")===null&&(a.tabIndex=0),(t.useGlobalTarget?window:a).addEventListener("pointerdown",o,r),a.addEventListener("focus",c=>sne(c,r),r)}),s}function ane(n){return n==="x"||n==="y"?wo[n]?null:(wo[n]=!0,()=>{wo[n]=!1}):wo.x||wo.y?null:(wo.x=wo.y=!0,()=>{wo.x=wo.y=!1})}const G4=new Set(["width","height","top","left","right","bottom",...Lf]);let $x;function lne(){$x=void 0}const sa={now:()=>($x===void 0&&sa.set(ur.isProcessing||ite.useManualTiming?ur.timestamp:performance.now()),$x),set:n=>{$x=n,queueMicrotask(lne)}};function OM(n,e){n.indexOf(e)===-1&&n.push(e)}function UM(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}class FM{constructor(){this.subscriptions=[]}add(e){return OM(this.subscriptions,e),()=>UM(this.subscriptions,e)}notify(e,t,i){const r=this.subscriptions.length;if(r)if(r===1)this.subscriptions[0](e,t,i);else for(let s=0;s<r;s++){const o=this.subscriptions[s];o&&o(e,t,i)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}function W4(n,e){return e?n*(1e3/e):0}const CL=30,cne=n=>!isNaN(parseFloat(n));class une{constructor(e,t={}){this.version="11.18.2",this.canTrackVelocity=null,this.events={},this.updateAndNotify=(i,r=!0)=>{const s=sa.now();this.updatedAt!==s&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(i),this.current!==this.prev&&this.events.change&&this.events.change.notify(this.current),r&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.hasAnimated=!1,this.setCurrent(e),this.owner=t.owner}setCurrent(e){this.current=e,this.updatedAt=sa.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=cne(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,t){this.events[e]||(this.events[e]=new FM);const i=this.events[e].add(t);return e==="change"?()=>{i(),ri.read(()=>{this.events.change.getSize()||this.stop()})}:i}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,t){this.passiveEffect=e,this.stopPassiveEffect=t}set(e,t=!0){!t||!this.passiveEffect?this.updateAndNotify(e,t):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,t,i){this.set(t),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-i}jump(e,t=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,t&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=sa.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>CL)return 0;const t=Math.min(this.updatedAt-this.prevUpdatedAt,CL);return W4(parseFloat(this.current)-parseFloat(this.prevFrameValue),t)}start(e){return this.stop(),new Promise(t=>{this.hasAnimated=!0,this.animation=e(t),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function bg(n,e){return new une(n,e)}function hne(n,e,t){n.hasValue(e)?n.getValue(e).set(t):n.addValue(e,bg(t))}function dne(n,e){const t=Yw(n,e);let{transitionEnd:i={},transition:r={},...s}=t||{};s={...s,...i};for(const o in s){const a=Tte(s[o]);hne(n,o,a)}}function fne(n){return!!(kr(n)&&n.add)}function R1(n,e){const t=n.getValue("willChange");if(fne(t))return t.add(e)}function q4(n){return n.props[b4]}const $4=(n,e,t)=>(((1-3*t+3*e)*n+(3*t-6*e))*n+3*e)*n,pne=1e-7,mne=12;function gne(n,e,t,i,r){let s,o,a=0;do o=e+(t-e)/2,s=$4(o,i,r)-n,s>0?t=o:e=o;while(Math.abs(s)>pne&&++a<mne);return o}function ry(n,e,t,i){if(n===e&&t===i)return js;const r=s=>gne(s,0,1,n,t);return s=>s===0||s===1?s:$4(r(s),e,i)}const X4=n=>e=>e<=.5?n(2*e)/2:(2-n(2*(1-e)))/2,K4=n=>e=>1-n(1-e),Y4=ry(.33,1.53,.69,.99),jM=K4(Y4),J4=X4(jM),Q4=n=>(n*=2)<1?.5*jM(n):.5*(2-Math.pow(2,-10*(n-1))),VM=n=>1-Math.sin(Math.acos(n)),Z4=K4(VM),eB=X4(VM),tB=n=>/^0[^.\s]+$/u.test(n);function yne(n){return typeof n=="number"?n===0:n!==null?n==="none"||n==="0"||tB(n):!0}const Tm=n=>Math.round(n*1e5)/1e5,BM=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function vne(n){return n==null}const xne=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,zM=(n,e)=>t=>!!(typeof t=="string"&&xne.test(t)&&t.startsWith(n)||e&&!vne(t)&&Object.prototype.hasOwnProperty.call(t,e)),nB=(n,e,t)=>i=>{if(typeof i!="string")return i;const[r,s,o,a]=i.match(BM);return{[n]:parseFloat(r),[e]:parseFloat(s),[t]:parseFloat(o),alpha:a!==void 0?parseFloat(a):1}},_ne=n=>Za(0,255,n),WT={...kf,transform:n=>Math.round(_ne(n))},Nu={test:zM("rgb","red"),parse:nB("red","green","blue"),transform:({red:n,green:e,blue:t,alpha:i=1})=>"rgba("+WT.transform(n)+", "+WT.transform(e)+", "+WT.transform(t)+", "+Tm(wg.transform(i))+")"};function wne(n){let e="",t="",i="",r="";return n.length>5?(e=n.substring(1,3),t=n.substring(3,5),i=n.substring(5,7),r=n.substring(7,9)):(e=n.substring(1,2),t=n.substring(2,3),i=n.substring(3,4),r=n.substring(4,5),e+=e,t+=t,i+=i,r+=r),{red:parseInt(e,16),green:parseInt(t,16),blue:parseInt(i,16),alpha:r?parseInt(r,16)/255:1}}const N1={test:zM("#"),parse:wne,transform:Nu.transform},Od={test:zM("hsl","hue"),parse:nB("hue","saturation","lightness"),transform:({hue:n,saturation:e,lightness:t,alpha:i=1})=>"hsla("+Math.round(n)+", "+ra.transform(Tm(e))+", "+ra.transform(Tm(t))+", "+Tm(wg.transform(i))+")"},Pr={test:n=>Nu.test(n)||N1.test(n)||Od.test(n),parse:n=>Nu.test(n)?Nu.parse(n):Od.test(n)?Od.parse(n):N1.parse(n),transform:n=>typeof n=="string"?n:n.hasOwnProperty("red")?Nu.transform(n):Od.transform(n)},bne=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function Sne(n){var e,t;return isNaN(n)&&typeof n=="string"&&(((e=n.match(BM))===null||e===void 0?void 0:e.length)||0)+(((t=n.match(bne))===null||t===void 0?void 0:t.length)||0)>0}const iB="number",rB="color",Tne="var",Ene="var(",AL="${}",Cne=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Sg(n){const e=n.toString(),t=[],i={color:[],number:[],var:[]},r=[];let s=0;const a=e.replace(Cne,l=>(Pr.test(l)?(i.color.push(s),r.push(rB),t.push(Pr.parse(l))):l.startsWith(Ene)?(i.var.push(s),r.push(Tne),t.push(l)):(i.number.push(s),r.push(iB),t.push(parseFloat(l))),++s,AL)).split(AL);return{values:t,split:a,indexes:i,types:r}}function sB(n){return Sg(n).values}function oB(n){const{split:e,types:t}=Sg(n),i=e.length;return r=>{let s="";for(let o=0;o<i;o++)if(s+=e[o],r[o]!==void 0){const a=t[o];a===iB?s+=Tm(r[o]):a===rB?s+=Pr.transform(r[o]):s+=r[o]}return s}}const Ane=n=>typeof n=="number"?0:n;function Mne(n){const e=sB(n);return oB(n)(e.map(Ane))}const fc={test:Sne,parse:sB,createTransformer:oB,getAnimatableNone:Mne},Ine=new Set(["brightness","contrast","saturate","opacity"]);function Pne(n){const[e,t]=n.slice(0,-1).split("(");if(e==="drop-shadow")return n;const[i]=t.match(BM)||[];if(!i)return n;const r=t.replace(i,"");let s=Ine.has(e)?1:0;return i!==t&&(s*=100),e+"("+s+r+")"}const Rne=/\b([a-z-]*)\(.*?\)/gu,D1={...fc,getAnimatableNone:n=>{const e=n.match(Rne);return e?e.map(Pne).join(" "):n}},Nne={...CM,color:Pr,backgroundColor:Pr,outlineColor:Pr,fill:Pr,stroke:Pr,borderColor:Pr,borderTopColor:Pr,borderRightColor:Pr,borderBottomColor:Pr,borderLeftColor:Pr,filter:D1,WebkitFilter:D1},HM=n=>Nne[n];function aB(n,e){let t=HM(n);return t!==D1&&(t=fc),t.getAnimatableNone?t.getAnimatableNone(e):void 0}const Dne=new Set(["auto","none","0"]);function Lne(n,e,t){let i=0,r;for(;i<n.length&&!r;){const s=n[i];typeof s=="string"&&!Dne.has(s)&&Sg(s).values.length&&(r=n[i]),i++}if(r&&t)for(const s of e)n[s]=aB(t,r)}const ML=n=>n===kf||n===Ut,IL=(n,e)=>parseFloat(n.split(", ")[e]),PL=(n,e)=>(t,{transform:i})=>{if(i==="none"||!i)return 0;const r=i.match(/^matrix3d\((.+)\)$/u);if(r)return IL(r[1],e);{const s=i.match(/^matrix\((.+)\)$/u);return s?IL(s[1],n):0}},kne=new Set(["x","y","z"]),One=Lf.filter(n=>!kne.has(n));function Une(n){const e=[];return One.forEach(t=>{const i=n.getValue(t);i!==void 0&&(e.push([t,i.get()]),i.set(t.startsWith("scale")?1:0))}),e}const mf={width:({x:n},{paddingLeft:e="0",paddingRight:t="0"})=>n.max-n.min-parseFloat(e)-parseFloat(t),height:({y:n},{paddingTop:e="0",paddingBottom:t="0"})=>n.max-n.min-parseFloat(e)-parseFloat(t),top:(n,{top:e})=>parseFloat(e),left:(n,{left:e})=>parseFloat(e),bottom:({y:n},{top:e})=>parseFloat(e)+(n.max-n.min),right:({x:n},{left:e})=>parseFloat(e)+(n.max-n.min),x:PL(4,13),y:PL(5,14)};mf.translateX=mf.x;mf.translateY=mf.y;const zu=new Set;let L1=!1,k1=!1;function lB(){if(k1){const n=Array.from(zu).filter(i=>i.needsMeasurement),e=new Set(n.map(i=>i.element)),t=new Map;e.forEach(i=>{const r=Une(i);r.length&&(t.set(i,r),i.render())}),n.forEach(i=>i.measureInitialState()),e.forEach(i=>{i.render();const r=t.get(i);r&&r.forEach(([s,o])=>{var a;(a=i.getValue(s))===null||a===void 0||a.set(o)})}),n.forEach(i=>i.measureEndState()),n.forEach(i=>{i.suspendedScrollY!==void 0&&window.scrollTo(0,i.suspendedScrollY)})}k1=!1,L1=!1,zu.forEach(n=>n.complete()),zu.clear()}function cB(){zu.forEach(n=>{n.readKeyframes(),n.needsMeasurement&&(k1=!0)})}function Fne(){cB(),lB()}class GM{constructor(e,t,i,r,s,o=!1){this.isComplete=!1,this.isAsync=!1,this.needsMeasurement=!1,this.isScheduled=!1,this.unresolvedKeyframes=[...e],this.onComplete=t,this.name=i,this.motionValue=r,this.element=s,this.isAsync=o}scheduleResolve(){this.isScheduled=!0,this.isAsync?(zu.add(this),L1||(L1=!0,ri.read(cB),ri.resolveKeyframes(lB))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:t,element:i,motionValue:r}=this;for(let s=0;s<e.length;s++)if(e[s]===null)if(s===0){const o=r?.get(),a=e[e.length-1];if(o!==void 0)e[0]=o;else if(i&&t){const l=i.readValue(t,a);l!=null&&(e[0]=l)}e[0]===void 0&&(e[0]=a),r&&o===void 0&&r.set(e[0])}else e[s]=e[s-1]}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(){this.isComplete=!0,this.onComplete(this.unresolvedKeyframes,this.finalKeyframe),zu.delete(this)}cancel(){this.isComplete||(this.isScheduled=!1,zu.delete(this))}resume(){this.isComplete||this.scheduleResolve()}}const uB=n=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(n),jne=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function Vne(n){const e=jne.exec(n);if(!e)return[,];const[,t,i,r]=e;return[`--${t??i}`,r]}function hB(n,e,t=1){const[i,r]=Vne(n);if(!i)return;const s=window.getComputedStyle(e).getPropertyValue(i);if(s){const o=s.trim();return uB(o)?parseFloat(o):o}return EM(r)?hB(r,e,t+1):r}const dB=n=>e=>e.test(n),Bne={test:n=>n==="auto",parse:n=>n},fB=[kf,Ut,ra,Il,Pte,Ite,Bne],RL=n=>fB.find(dB(n));class pB extends GM{constructor(e,t,i,r,s){super(e,t,i,r,s,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:t,name:i}=this;if(!t||!t.current)return;super.readKeyframes();for(let l=0;l<e.length;l++){let c=e[l];if(typeof c=="string"&&(c=c.trim(),EM(c))){const u=hB(c,t.current);u!==void 0&&(e[l]=u),l===e.length-1&&(this.finalKeyframe=c)}}if(this.resolveNoneKeyframes(),!G4.has(i)||e.length!==2)return;const[r,s]=e,o=RL(r),a=RL(s);if(o!==a)if(ML(o)&&ML(a))for(let l=0;l<e.length;l++){const c=e[l];typeof c=="string"&&(e[l]=parseFloat(c))}else this.needsMeasurement=!0}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:t}=this,i=[];for(let r=0;r<e.length;r++)yne(e[r])&&i.push(r);i.length&&Lne(e,i,t)}measureInitialState(){const{element:e,unresolvedKeyframes:t,name:i}=this;if(!e||!e.current)return;i==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=mf[i](e.measureViewportBox(),window.getComputedStyle(e.current)),t[0]=this.measuredOrigin;const r=t[t.length-1];r!==void 0&&e.getValue(i,r).jump(r,!1)}measureEndState(){var e;const{element:t,name:i,unresolvedKeyframes:r}=this;if(!t||!t.current)return;const s=t.getValue(i);s&&s.jump(this.measuredOrigin,!1);const o=r.length-1,a=r[o];r[o]=mf[i](t.measureViewportBox(),window.getComputedStyle(t.current)),a!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=a),!((e=this.removedTransforms)===null||e===void 0)&&e.length&&this.removedTransforms.forEach(([l,c])=>{t.getValue(l).set(c)}),this.resolveNoneKeyframes()}}const NL=(n,e)=>e==="zIndex"?!1:!!(typeof n=="number"||Array.isArray(n)||typeof n=="string"&&(fc.test(n)||n==="0")&&!n.startsWith("url("));function zne(n){const e=n[0];if(n.length===1)return!0;for(let t=0;t<n.length;t++)if(n[t]!==e)return!0}function Hne(n,e,t,i){const r=n[0];if(r===null)return!1;if(e==="display"||e==="visibility")return!0;const s=n[n.length-1],o=NL(r,e),a=NL(s,e);return!o||!a?!1:zne(n)||(t==="spring"||DM(t))&&i}const Gne=n=>n!==null;function Jw(n,{repeat:e,repeatType:t="loop"},i){const r=n.filter(Gne),s=e&&t!=="loop"&&e%2===1?0:r.length-1;return!s||i===void 0?r[s]:i}const Wne=40;class mB{constructor({autoplay:e=!0,delay:t=0,type:i="keyframes",repeat:r=0,repeatDelay:s=0,repeatType:o="loop",...a}){this.isStopped=!1,this.hasAttemptedResolve=!1,this.createdAt=sa.now(),this.options={autoplay:e,delay:t,type:i,repeat:r,repeatDelay:s,repeatType:o,...a},this.updateFinishedPromise()}calcStartTime(){return this.resolvedAt?this.resolvedAt-this.createdAt>Wne?this.resolvedAt:this.createdAt:this.createdAt}get resolved(){return!this._resolved&&!this.hasAttemptedResolve&&Fne(),this._resolved}onKeyframesResolved(e,t){this.resolvedAt=sa.now(),this.hasAttemptedResolve=!0;const{name:i,type:r,velocity:s,delay:o,onComplete:a,onUpdate:l,isGenerator:c}=this.options;if(!c&&!Hne(e,i,r,s))if(o)this.options.duration=0;else{l&&l(Jw(e,this.options,t)),a&&a(),this.resolveFinishedPromise();return}const u=this.initPlayback(e,t);u!==!1&&(this._resolved={keyframes:e,finalKeyframe:t,...u},this.onPostResolved())}onPostResolved(){}then(e,t){return this.currentFinishedPromise.then(e,t)}flatten(){this.options.type="keyframes",this.options.ease="linear"}updateFinishedPromise(){this.currentFinishedPromise=new Promise(e=>{this.resolveFinishedPromise=e})}}const di=(n,e,t)=>n+(e-n)*t;function qT(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*(2/3-t)*6:n}function qne({hue:n,saturation:e,lightness:t,alpha:i}){n/=360,e/=100,t/=100;let r=0,s=0,o=0;if(!e)r=s=o=t;else{const a=t<.5?t*(1+e):t+e-t*e,l=2*t-a;r=qT(l,a,n+1/3),s=qT(l,a,n),o=qT(l,a,n-1/3)}return{red:Math.round(r*255),green:Math.round(s*255),blue:Math.round(o*255),alpha:i}}function w_(n,e){return t=>t>0?e:n}const $T=(n,e,t)=>{const i=n*n,r=t*(e*e-i)+i;return r<0?0:Math.sqrt(r)},$ne=[N1,Nu,Od],Xne=n=>$ne.find(e=>e.test(n));function DL(n){const e=Xne(n);if(!e)return!1;let t=e.parse(n);return e===Od&&(t=qne(t)),t}const LL=(n,e)=>{const t=DL(n),i=DL(e);if(!t||!i)return w_(n,e);const r={...t};return s=>(r.red=$T(t.red,i.red,s),r.green=$T(t.green,i.green,s),r.blue=$T(t.blue,i.blue,s),r.alpha=di(t.alpha,i.alpha,s),Nu.transform(r))},Kne=(n,e)=>t=>e(n(t)),sy=(...n)=>n.reduce(Kne),O1=new Set(["none","hidden"]);function Yne(n,e){return O1.has(n)?t=>t<=0?n:e:t=>t>=1?e:n}function Jne(n,e){return t=>di(n,e,t)}function WM(n){return typeof n=="number"?Jne:typeof n=="string"?EM(n)?w_:Pr.test(n)?LL:eie:Array.isArray(n)?gB:typeof n=="object"?Pr.test(n)?LL:Qne:w_}function gB(n,e){const t=[...n],i=t.length,r=n.map((s,o)=>WM(s)(s,e[o]));return s=>{for(let o=0;o<i;o++)t[o]=r[o](s);return t}}function Qne(n,e){const t={...n,...e},i={};for(const r in t)n[r]!==void 0&&e[r]!==void 0&&(i[r]=WM(n[r])(n[r],e[r]));return r=>{for(const s in i)t[s]=i[s](r);return t}}function Zne(n,e){var t;const i=[],r={color:0,var:0,number:0};for(let s=0;s<e.values.length;s++){const o=e.types[s],a=n.indexes[o][r[o]],l=(t=n.values[a])!==null&&t!==void 0?t:0;i[s]=l,r[o]++}return i}const eie=(n,e)=>{const t=fc.createTransformer(e),i=Sg(n),r=Sg(e);return i.indexes.var.length===r.indexes.var.length&&i.indexes.color.length===r.indexes.color.length&&i.indexes.number.length>=r.indexes.number.length?O1.has(n)&&!r.values.length||O1.has(e)&&!i.values.length?Yne(n,e):sy(gB(Zne(i,r),r.values),t):w_(n,e)};function yB(n,e,t){return typeof n=="number"&&typeof e=="number"&&typeof t=="number"?di(n,e,t):WM(n)(n,e)}const tie=5;function vB(n,e,t){const i=Math.max(e-tie,0);return W4(t-n(i),e-i)}const vi={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},kL=.001;function nie({duration:n=vi.duration,bounce:e=vi.bounce,velocity:t=vi.velocity,mass:i=vi.mass}){let r,s,o=1-e;o=Za(vi.minDamping,vi.maxDamping,o),n=Za(vi.minDuration,vi.maxDuration,za(n)),o<1?(r=c=>{const u=c*o,f=u*n,m=u-t,g=U1(c,o),x=Math.exp(-f);return kL-m/g*x},s=c=>{const f=c*o*n,m=f*t+t,g=Math.pow(o,2)*Math.pow(c,2)*n,x=Math.exp(-f),b=U1(Math.pow(c,2),o);return(-r(c)+kL>0?-1:1)*((m-g)*x)/b}):(r=c=>{const u=Math.exp(-c*n),f=(c-t)*n+1;return-.001+u*f},s=c=>{const u=Math.exp(-c*n),f=(t-c)*(n*n);return u*f});const a=5/n,l=rie(r,s,a);if(n=Ba(n),isNaN(l))return{stiffness:vi.stiffness,damping:vi.damping,duration:n};{const c=Math.pow(l,2)*i;return{stiffness:c,damping:o*2*Math.sqrt(i*c),duration:n}}}const iie=12;function rie(n,e,t){let i=t;for(let r=1;r<iie;r++)i=i-n(i)/e(i);return i}function U1(n,e){return n*Math.sqrt(1-e*e)}const sie=["duration","bounce"],oie=["stiffness","damping","mass"];function OL(n,e){return e.some(t=>n[t]!==void 0)}function aie(n){let e={velocity:vi.velocity,stiffness:vi.stiffness,damping:vi.damping,mass:vi.mass,isResolvedFromDuration:!1,...n};if(!OL(n,oie)&&OL(n,sie))if(n.visualDuration){const t=n.visualDuration,i=2*Math.PI/(t*1.2),r=i*i,s=2*Za(.05,1,1-(n.bounce||0))*Math.sqrt(r);e={...e,mass:vi.mass,stiffness:r,damping:s}}else{const t=nie(n);e={...e,...t,mass:vi.mass},e.isResolvedFromDuration=!0}return e}function xB(n=vi.visualDuration,e=vi.bounce){const t=typeof n!="object"?{visualDuration:n,keyframes:[0,1],bounce:e}:n;let{restSpeed:i,restDelta:r}=t;const s=t.keyframes[0],o=t.keyframes[t.keyframes.length-1],a={done:!1,value:s},{stiffness:l,damping:c,mass:u,duration:f,velocity:m,isResolvedFromDuration:g}=aie({...t,velocity:-za(t.velocity||0)}),x=m||0,b=c/(2*Math.sqrt(l*u)),w=o-s,v=za(Math.sqrt(l/u)),S=Math.abs(w)<5;i||(i=S?vi.restSpeed.granular:vi.restSpeed.default),r||(r=S?vi.restDelta.granular:vi.restDelta.default);let E;if(b<1){const U=U1(v,b);E=O=>{const C=Math.exp(-b*v*O);return o-C*((x+b*v*w)/U*Math.sin(U*O)+w*Math.cos(U*O))}}else if(b===1)E=U=>o-Math.exp(-v*U)*(w+(x+v*w)*U);else{const U=v*Math.sqrt(b*b-1);E=O=>{const C=Math.exp(-b*v*O),P=Math.min(U*O,300);return o-C*((x+b*v*w)*Math.sinh(P)+U*w*Math.cosh(P))/U}}const I={calculatedDuration:g&&f||null,next:U=>{const O=E(U);if(g)a.done=U>=f;else{let C=0;b<1&&(C=U===0?Ba(x):vB(E,U,O));const P=Math.abs(C)<=i,M=Math.abs(o-O)<=r;a.done=P&&M}return a.value=a.done?o:O,a},toString:()=>{const U=Math.min(U4(I),I1),O=F4(C=>I.next(U*C).value,U,30);return U+"ms "+O}};return I}function UL({keyframes:n,velocity:e=0,power:t=.8,timeConstant:i=325,bounceDamping:r=10,bounceStiffness:s=500,modifyTarget:o,min:a,max:l,restDelta:c=.5,restSpeed:u}){const f=n[0],m={done:!1,value:f},g=P=>a!==void 0&&P<a||l!==void 0&&P>l,x=P=>a===void 0?l:l===void 0||Math.abs(a-P)<Math.abs(l-P)?a:l;let b=t*e;const w=f+b,v=o===void 0?w:o(w);v!==w&&(b=v-f);const S=P=>-b*Math.exp(-P/i),E=P=>v+S(P),I=P=>{const M=S(P),A=E(P);m.done=Math.abs(M)<=c,m.value=m.done?v:A};let U,O;const C=P=>{g(m.value)&&(U=P,O=xB({keyframes:[m.value,x(m.value)],velocity:vB(E,P,m.value),damping:r,stiffness:s,restDelta:c,restSpeed:u}))};return C(0),{calculatedDuration:null,next:P=>{let M=!1;return!O&&U===void 0&&(M=!0,I(P),C(P)),U!==void 0&&P>=U?O.next(P-U):(!M&&I(P),m)}}}const lie=ry(.42,0,1,1),cie=ry(0,0,.58,1),_B=ry(.42,0,.58,1),uie=n=>Array.isArray(n)&&typeof n[0]!="number",hie={linear:js,easeIn:lie,easeInOut:_B,easeOut:cie,circIn:VM,circInOut:eB,circOut:Z4,backIn:jM,backInOut:J4,backOut:Y4,anticipate:Q4},FL=n=>{if(LM(n)){y4(n.length===4);const[e,t,i,r]=n;return ry(e,t,i,r)}else if(typeof n=="string")return hie[n];return n};function die(n,e,t){const i=[],r=t||yB,s=n.length-1;for(let o=0;o<s;o++){let a=r(n[o],n[o+1]);if(e){const l=Array.isArray(e)?e[o]||js:e;a=sy(l,a)}i.push(a)}return i}function fie(n,e,{clamp:t=!0,ease:i,mixer:r}={}){const s=n.length;if(y4(s===e.length),s===1)return()=>e[0];if(s===2&&e[0]===e[1])return()=>e[1];const o=n[0]===n[1];n[0]>n[s-1]&&(n=[...n].reverse(),e=[...e].reverse());const a=die(e,i,r),l=a.length,c=u=>{if(o&&u<n[0])return e[0];let f=0;if(l>1)for(;f<n.length-2&&!(u<n[f+1]);f++);const m=ff(n[f],n[f+1],u);return a[f](m)};return t?u=>c(Za(n[0],n[s-1],u)):c}function pie(n,e){const t=n[n.length-1];for(let i=1;i<=e;i++){const r=ff(0,e,i);n.push(di(t,1,r))}}function mie(n){const e=[0];return pie(e,n.length-1),e}function gie(n,e){return n.map(t=>t*e)}function yie(n,e){return n.map(()=>e||_B).splice(0,n.length-1)}function b_({duration:n=300,keyframes:e,times:t,ease:i="easeInOut"}){const r=uie(i)?i.map(FL):FL(i),s={done:!1,value:e[0]},o=gie(t&&t.length===e.length?t:mie(e),n),a=fie(o,e,{ease:Array.isArray(r)?r:yie(e,r)});return{calculatedDuration:n,next:l=>(s.value=a(l),s.done=l>=n,s)}}const vie=n=>{const e=({timestamp:t})=>n(t);return{start:()=>ri.update(e,!0),stop:()=>dc(e),now:()=>ur.isProcessing?ur.timestamp:sa.now()}},xie={decay:UL,inertia:UL,tween:b_,keyframes:b_,spring:xB},_ie=n=>n/100;class qM extends mB{constructor(e){super(e),this.holdTime=null,this.cancelTime=null,this.currentTime=0,this.playbackSpeed=1,this.pendingPlayState="running",this.startTime=null,this.state="idle",this.stop=()=>{if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.teardown();const{onStop:l}=this.options;l&&l()};const{name:t,motionValue:i,element:r,keyframes:s}=this.options,o=r?.KeyframeResolver||GM,a=(l,c)=>this.onKeyframesResolved(l,c);this.resolver=new o(s,a,t,i,r),this.resolver.scheduleResolve()}flatten(){super.flatten(),this._resolved&&Object.assign(this._resolved,this.initPlayback(this._resolved.keyframes))}initPlayback(e){const{type:t="keyframes",repeat:i=0,repeatDelay:r=0,repeatType:s,velocity:o=0}=this.options,a=DM(t)?t:xie[t]||b_;let l,c;a!==b_&&typeof e[0]!="number"&&(l=sy(_ie,yB(e[0],e[1])),e=[0,100]);const u=a({...this.options,keyframes:e});s==="mirror"&&(c=a({...this.options,keyframes:[...e].reverse(),velocity:-o})),u.calculatedDuration===null&&(u.calculatedDuration=U4(u));const{calculatedDuration:f}=u,m=f+r,g=m*(i+1)-r;return{generator:u,mirroredGenerator:c,mapPercentToKeyframes:l,calculatedDuration:f,resolvedDuration:m,totalDuration:g}}onPostResolved(){const{autoplay:e=!0}=this.options;this.play(),this.pendingPlayState==="paused"||!e?this.pause():this.state=this.pendingPlayState}tick(e,t=!1){const{resolved:i}=this;if(!i){const{keyframes:P}=this.options;return{done:!0,value:P[P.length-1]}}const{finalKeyframe:r,generator:s,mirroredGenerator:o,mapPercentToKeyframes:a,keyframes:l,calculatedDuration:c,totalDuration:u,resolvedDuration:f}=i;if(this.startTime===null)return s.next(0);const{delay:m,repeat:g,repeatType:x,repeatDelay:b,onUpdate:w}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-u/this.speed,this.startTime)),t?this.currentTime=e:this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=Math.round(e-this.startTime)*this.speed;const v=this.currentTime-m*(this.speed>=0?1:-1),S=this.speed>=0?v<0:v>u;this.currentTime=Math.max(v,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=u);let E=this.currentTime,I=s;if(g){const P=Math.min(this.currentTime,u)/f;let M=Math.floor(P),A=P%1;!A&&P>=1&&(A=1),A===1&&M--,M=Math.min(M,g+1),!!(M%2)&&(x==="reverse"?(A=1-A,b&&(A-=b/f)):x==="mirror"&&(I=o)),E=Za(0,1,A)*f}const U=S?{done:!1,value:l[0]}:I.next(E);a&&(U.value=a(U.value));let{done:O}=U;!S&&c!==null&&(O=this.speed>=0?this.currentTime>=u:this.currentTime<=0);const C=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&O);return C&&r!==void 0&&(U.value=Jw(l,this.options,r)),w&&w(U.value),C&&this.finish(),U}get duration(){const{resolved:e}=this;return e?za(e.calculatedDuration):0}get time(){return za(this.currentTime)}set time(e){e=Ba(e),this.currentTime=e,this.holdTime!==null||this.speed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.speed)}get speed(){return this.playbackSpeed}set speed(e){const t=this.playbackSpeed!==e;this.playbackSpeed=e,t&&(this.time=za(this.currentTime))}play(){if(this.resolver.isScheduled||this.resolver.resume(),!this._resolved){this.pendingPlayState="running";return}if(this.isStopped)return;const{driver:e=vie,onPlay:t,startTime:i}=this.options;this.driver||(this.driver=e(s=>this.tick(s))),t&&t();const r=this.driver.now();this.holdTime!==null?this.startTime=r-this.holdTime:this.startTime?this.state==="finished"&&(this.startTime=r):this.startTime=i??this.calcStartTime(),this.state==="finished"&&this.updateFinishedPromise(),this.cancelTime=this.startTime,this.holdTime=null,this.state="running",this.driver.start()}pause(){var e;if(!this._resolved){this.pendingPlayState="paused";return}this.state="paused",this.holdTime=(e=this.currentTime)!==null&&e!==void 0?e:0}complete(){this.state!=="running"&&this.play(),this.pendingPlayState=this.state="finished",this.holdTime=null}finish(){this.teardown(),this.state="finished";const{onComplete:e}=this.options;e&&e()}cancel(){this.cancelTime!==null&&this.tick(this.cancelTime),this.teardown(),this.updateFinishedPromise()}teardown(){this.state="idle",this.stopDriver(),this.resolveFinishedPromise(),this.updateFinishedPromise(),this.startTime=this.cancelTime=null,this.resolver.cancel()}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}}const wie=new Set(["opacity","clipPath","filter","transform"]);function bie(n,e,t,{delay:i=0,duration:r=300,repeat:s=0,repeatType:o="loop",ease:a="easeInOut",times:l}={}){const c={[e]:t};l&&(c.offset=l);const u=V4(a,r);return Array.isArray(u)&&(c.easing=u),n.animate(c,{delay:i,duration:r,easing:Array.isArray(u)?"linear":u,fill:"both",iterations:s+1,direction:o==="reverse"?"alternate":"normal"})}const Sie=vM(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),S_=10,Tie=2e4;function Eie(n){return DM(n.type)||n.type==="spring"||!j4(n.ease)}function Cie(n,e){const t=new qM({...e,keyframes:n,repeat:0,delay:0,isGenerator:!0});let i={done:!1,value:n[0]};const r=[];let s=0;for(;!i.done&&s<Tie;)i=t.sample(s),r.push(i.value),s+=S_;return{times:void 0,keyframes:r,duration:s-S_,ease:"linear"}}const wB={anticipate:Q4,backInOut:J4,circInOut:eB};function Aie(n){return n in wB}class jL extends mB{constructor(e){super(e);const{name:t,motionValue:i,element:r,keyframes:s}=this.options;this.resolver=new pB(s,(o,a)=>this.onKeyframesResolved(o,a),t,i,r),this.resolver.scheduleResolve()}initPlayback(e,t){let{duration:i=300,times:r,ease:s,type:o,motionValue:a,name:l,startTime:c}=this.options;if(!a.owner||!a.owner.current)return!1;if(typeof s=="string"&&__()&&Aie(s)&&(s=wB[s]),Eie(this.options)){const{onComplete:f,onUpdate:m,motionValue:g,element:x,...b}=this.options,w=Cie(e,b);e=w.keyframes,e.length===1&&(e[1]=e[0]),i=w.duration,r=w.times,s=w.ease,o="keyframes"}const u=bie(a.owner.current,l,e,{...this.options,duration:i,times:r,ease:s});return u.startTime=c??this.calcStartTime(),this.pendingTimeline?(bL(u,this.pendingTimeline),this.pendingTimeline=void 0):u.onfinish=()=>{const{onComplete:f}=this.options;a.set(Jw(e,this.options,t)),f&&f(),this.cancel(),this.resolveFinishedPromise()},{animation:u,duration:i,times:r,type:o,ease:s,keyframes:e}}get duration(){const{resolved:e}=this;if(!e)return 0;const{duration:t}=e;return za(t)}get time(){const{resolved:e}=this;if(!e)return 0;const{animation:t}=e;return za(t.currentTime||0)}set time(e){const{resolved:t}=this;if(!t)return;const{animation:i}=t;i.currentTime=Ba(e)}get speed(){const{resolved:e}=this;if(!e)return 1;const{animation:t}=e;return t.playbackRate}set speed(e){const{resolved:t}=this;if(!t)return;const{animation:i}=t;i.playbackRate=e}get state(){const{resolved:e}=this;if(!e)return"idle";const{animation:t}=e;return t.playState}get startTime(){const{resolved:e}=this;if(!e)return null;const{animation:t}=e;return t.startTime}attachTimeline(e){if(!this._resolved)this.pendingTimeline=e;else{const{resolved:t}=this;if(!t)return js;const{animation:i}=t;bL(i,e)}return js}play(){if(this.isStopped)return;const{resolved:e}=this;if(!e)return;const{animation:t}=e;t.playState==="finished"&&this.updateFinishedPromise(),t.play()}pause(){const{resolved:e}=this;if(!e)return;const{animation:t}=e;t.pause()}stop(){if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.resolveFinishedPromise(),this.updateFinishedPromise();const{resolved:e}=this;if(!e)return;const{animation:t,keyframes:i,duration:r,type:s,ease:o,times:a}=e;if(t.playState==="idle"||t.playState==="finished")return;if(this.time){const{motionValue:c,onUpdate:u,onComplete:f,element:m,...g}=this.options,x=new qM({...g,keyframes:i,duration:r,type:s,ease:o,times:a,isGenerator:!0}),b=Ba(this.time);c.setWithVelocity(x.sample(b-S_).value,x.sample(b).value,S_)}const{onStop:l}=this.options;l&&l(),this.cancel()}complete(){const{resolved:e}=this;e&&e.animation.finish()}cancel(){const{resolved:e}=this;e&&e.animation.cancel()}static supports(e){const{motionValue:t,name:i,repeatDelay:r,repeatType:s,damping:o,type:a}=e;if(!t||!t.owner||!(t.owner.current instanceof HTMLElement))return!1;const{onUpdate:l,transformTemplate:c}=t.owner.getProps();return Sie()&&i&&wie.has(i)&&!l&&!c&&!r&&s!=="mirror"&&o!==0&&a!=="inertia"}}const Mie={type:"spring",stiffness:500,damping:25,restSpeed:10},Iie=n=>({type:"spring",stiffness:550,damping:n===0?2*Math.sqrt(550):30,restSpeed:10}),Pie={type:"keyframes",duration:.8},Rie={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},Nie=(n,{keyframes:e})=>e.length>2?Pie:yh.has(n)?n.startsWith("scale")?Iie(e[1]):Mie:Rie;function Die({when:n,delay:e,delayChildren:t,staggerChildren:i,staggerDirection:r,repeat:s,repeatType:o,repeatDelay:a,from:l,elapsed:c,...u}){return!!Object.keys(u).length}const $M=(n,e,t,i={},r,s)=>o=>{const a=NM(i,n)||{},l=a.delay||i.delay||0;let{elapsed:c=0}=i;c=c-Ba(l);let u={keyframes:Array.isArray(t)?t:[null,t],ease:"easeOut",velocity:e.getVelocity(),...a,delay:-c,onUpdate:m=>{e.set(m),a.onUpdate&&a.onUpdate(m)},onComplete:()=>{o(),a.onComplete&&a.onComplete()},name:n,motionValue:e,element:s?void 0:r};Die(a)||(u={...u,...Nie(n,u)}),u.duration&&(u.duration=Ba(u.duration)),u.repeatDelay&&(u.repeatDelay=Ba(u.repeatDelay)),u.from!==void 0&&(u.keyframes[0]=u.from);let f=!1;if((u.type===!1||u.duration===0&&!u.repeatDelay)&&(u.duration=0,u.delay===0&&(f=!0)),f&&!s&&e.get()!==void 0){const m=Jw(u.keyframes,a);if(m!==void 0)return ri.update(()=>{u.onUpdate(m),u.onComplete()}),new Qte([])}return!s&&jL.supports(u)?new jL(u):new qM(u)};function Lie({protectedKeys:n,needsAnimating:e},t){const i=n.hasOwnProperty(t)&&e[t]!==!0;return e[t]=!1,i}function bB(n,e,{delay:t=0,transitionOverride:i,type:r}={}){var s;let{transition:o=n.getDefaultTransition(),transitionEnd:a,...l}=e;i&&(o=i);const c=[],u=r&&n.animationState&&n.animationState.getState()[r];for(const f in l){const m=n.getValue(f,(s=n.latestValues[f])!==null&&s!==void 0?s:null),g=l[f];if(g===void 0||u&&Lie(u,f))continue;const x={delay:t,...NM(o||{},f)};let b=!1;if(window.MotionHandoffAnimation){const v=q4(n);if(v){const S=window.MotionHandoffAnimation(v,f,ri);S!==null&&(x.startTime=S,b=!0)}}R1(n,f),m.start($M(f,m,g,n.shouldReduceMotion&&G4.has(f)?{type:!1}:x,n,b));const w=m.animation;w&&c.push(w)}return a&&Promise.all(c).then(()=>{ri.update(()=>{a&&dne(n,a)})}),c}function F1(n,e,t={}){var i;const r=Yw(n,e,t.type==="exit"?(i=n.presenceContext)===null||i===void 0?void 0:i.custom:void 0);let{transition:s=n.getDefaultTransition()||{}}=r||{};t.transitionOverride&&(s=t.transitionOverride);const o=r?()=>Promise.all(bB(n,r,t)):()=>Promise.resolve(),a=n.variantChildren&&n.variantChildren.size?(c=0)=>{const{delayChildren:u=0,staggerChildren:f,staggerDirection:m}=s;return kie(n,e,u+c,f,m,t)}:()=>Promise.resolve(),{when:l}=s;if(l){const[c,u]=l==="beforeChildren"?[o,a]:[a,o];return c().then(()=>u())}else return Promise.all([o(),a(t.delay)])}function kie(n,e,t=0,i=0,r=1,s){const o=[],a=(n.variantChildren.size-1)*i,l=r===1?(c=0)=>c*i:(c=0)=>a-c*i;return Array.from(n.variantChildren).sort(Oie).forEach((c,u)=>{c.notify("AnimationStart",e),o.push(F1(c,e,{...s,delay:t+l(u)}).then(()=>c.notify("AnimationComplete",e)))}),Promise.all(o)}function Oie(n,e){return n.sortNodePosition(e)}function Uie(n,e,t={}){n.notify("AnimationStart",e);let i;if(Array.isArray(e)){const r=e.map(s=>F1(n,s,t));i=Promise.all(r)}else if(typeof e=="string")i=F1(n,e,t);else{const r=typeof e=="function"?Yw(n,e,t.custom):e;i=Promise.all(bB(n,r,t))}return i.then(()=>{n.notify("AnimationComplete",e)})}const Fie=_M.length;function SB(n){if(!n)return;if(!n.isControllingVariants){const t=n.parent?SB(n.parent)||{}:{};return n.props.initial!==void 0&&(t.initial=n.props.initial),t}const e={};for(let t=0;t<Fie;t++){const i=_M[t],r=n.props[i];(_g(r)||r===!1)&&(e[i]=r)}return e}const jie=[...xM].reverse(),Vie=xM.length;function Bie(n){return e=>Promise.all(e.map(({animation:t,options:i})=>Uie(n,t,i)))}function zie(n){let e=Bie(n),t=VL(),i=!0;const r=l=>(c,u)=>{var f;const m=Yw(n,u,l==="exit"?(f=n.presenceContext)===null||f===void 0?void 0:f.custom:void 0);if(m){const{transition:g,transitionEnd:x,...b}=m;c={...c,...b,...x}}return c};function s(l){e=l(n)}function o(l){const{props:c}=n,u=SB(n.parent)||{},f=[],m=new Set;let g={},x=1/0;for(let w=0;w<Vie;w++){const v=jie[w],S=t[v],E=c[v]!==void 0?c[v]:u[v],I=_g(E),U=v===l?S.isActive:null;U===!1&&(x=w);let O=E===u[v]&&E!==c[v]&&I;if(O&&i&&n.manuallyAnimateOnMount&&(O=!1),S.protectedKeys={...g},!S.isActive&&U===null||!E&&!S.prevProp||Xw(E)||typeof E=="boolean")continue;const C=Hie(S.prevProp,E);let P=C||v===l&&S.isActive&&!O&&I||w>x&&I,M=!1;const A=Array.isArray(E)?E:[E];let D=A.reduce(r(v),{});U===!1&&(D={});const{prevResolvedValues:B={}}=S,j={...B,...D},te=de=>{P=!0,m.has(de)&&(M=!0,m.delete(de)),S.needsAnimating[de]=!0;const W=n.getValue(de);W&&(W.liveStyle=!1)};for(const de in j){const W=D[de],Z=B[de];if(g.hasOwnProperty(de))continue;let F=!1;M1(W)&&M1(Z)?F=!O4(W,Z):F=W!==Z,F?W!=null?te(de):m.add(de):W!==void 0&&m.has(de)?te(de):S.protectedKeys[de]=!0}S.prevProp=E,S.prevResolvedValues=D,S.isActive&&(g={...g,...D}),i&&n.blockInitialAnimation&&(P=!1),P&&(!(O&&C)||M)&&f.push(...A.map(de=>({animation:de,options:{type:v}})))}if(m.size){const w={};m.forEach(v=>{const S=n.getBaseTarget(v),E=n.getValue(v);E&&(E.liveStyle=!0),w[v]=S??null}),f.push({animation:w})}let b=!!f.length;return i&&(c.initial===!1||c.initial===c.animate)&&!n.manuallyAnimateOnMount&&(b=!1),i=!1,b?e(f):Promise.resolve()}function a(l,c){var u;if(t[l].isActive===c)return Promise.resolve();(u=n.variantChildren)===null||u===void 0||u.forEach(m=>{var g;return(g=m.animationState)===null||g===void 0?void 0:g.setActive(l,c)}),t[l].isActive=c;const f=o(l);for(const m in t)t[m].protectedKeys={};return f}return{animateChanges:o,setActive:a,setAnimateFunction:s,getState:()=>t,reset:()=>{t=VL(),i=!0}}}function Hie(n,e){return typeof e=="string"?e!==n:Array.isArray(e)?!O4(e,n):!1}function fu(n=!1){return{isActive:n,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function VL(){return{animate:fu(!0),whileInView:fu(),whileHover:fu(),whileTap:fu(),whileDrag:fu(),whileFocus:fu(),exit:fu()}}class Nc{constructor(e){this.isMounted=!1,this.node=e}update(){}}class Gie extends Nc{constructor(e){super(e),e.animationState||(e.animationState=zie(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();Xw(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:t}=this.node.prevProps||{};e!==t&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)===null||e===void 0||e.call(this)}}let Wie=0;class qie extends Nc{constructor(){super(...arguments),this.id=Wie++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:t}=this.node.presenceContext,{isPresent:i}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===i)return;const r=this.node.animationState.setActive("exit",!e);t&&!e&&r.then(()=>t(this.id))}mount(){const{register:e}=this.node.presenceContext||{};e&&(this.unmount=e(this.id))}unmount(){}}const $ie={animation:{Feature:Gie},exit:{Feature:qie}};function Tg(n,e,t,i={passive:!0}){return n.addEventListener(e,t,i),()=>n.removeEventListener(e,t)}function oy(n){return{point:{x:n.pageX,y:n.pageY}}}const Xie=n=>e=>kM(e)&&n(e,oy(e));function Em(n,e,t,i){return Tg(n,e,Xie(t),i)}const BL=(n,e)=>Math.abs(n-e);function Kie(n,e){const t=BL(n.x,e.x),i=BL(n.y,e.y);return Math.sqrt(t**2+i**2)}class TB{constructor(e,t,{transformPagePoint:i,contextWindow:r,dragSnapToOrigin:s=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const f=KT(this.lastMoveEventInfo,this.history),m=this.startEvent!==null,g=Kie(f.offset,{x:0,y:0})>=3;if(!m&&!g)return;const{point:x}=f,{timestamp:b}=ur;this.history.push({...x,timestamp:b});const{onStart:w,onMove:v}=this.handlers;m||(w&&w(this.lastMoveEvent,f),this.startEvent=this.lastMoveEvent),v&&v(this.lastMoveEvent,f)},this.handlePointerMove=(f,m)=>{this.lastMoveEvent=f,this.lastMoveEventInfo=XT(m,this.transformPagePoint),ri.update(this.updatePoint,!0)},this.handlePointerUp=(f,m)=>{this.end();const{onEnd:g,onSessionEnd:x,resumeAnimation:b}=this.handlers;if(this.dragSnapToOrigin&&b&&b(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const w=KT(f.type==="pointercancel"?this.lastMoveEventInfo:XT(m,this.transformPagePoint),this.history);this.startEvent&&g&&g(f,w),x&&x(f,w)},!kM(e))return;this.dragSnapToOrigin=s,this.handlers=t,this.transformPagePoint=i,this.contextWindow=r||window;const o=oy(e),a=XT(o,this.transformPagePoint),{point:l}=a,{timestamp:c}=ur;this.history=[{...l,timestamp:c}];const{onSessionStart:u}=t;u&&u(e,KT(a,this.history)),this.removeListeners=sy(Em(this.contextWindow,"pointermove",this.handlePointerMove),Em(this.contextWindow,"pointerup",this.handlePointerUp),Em(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),dc(this.updatePoint)}}function XT(n,e){return e?{point:e(n.point)}:n}function zL(n,e){return{x:n.x-e.x,y:n.y-e.y}}function KT({point:n},e){return{point:n,delta:zL(n,EB(e)),offset:zL(n,Yie(e)),velocity:Jie(e,.1)}}function Yie(n){return n[0]}function EB(n){return n[n.length-1]}function Jie(n,e){if(n.length<2)return{x:0,y:0};let t=n.length-1,i=null;const r=EB(n);for(;t>=0&&(i=n[t],!(r.timestamp-i.timestamp>Ba(e)));)t--;if(!i)return{x:0,y:0};const s=za(r.timestamp-i.timestamp);if(s===0)return{x:0,y:0};const o={x:(r.x-i.x)/s,y:(r.y-i.y)/s};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}const CB=1e-4,Qie=1-CB,Zie=1+CB,AB=.01,ere=0-AB,tre=0+AB;function Hs(n){return n.max-n.min}function nre(n,e,t){return Math.abs(n-e)<=t}function HL(n,e,t,i=.5){n.origin=i,n.originPoint=di(e.min,e.max,n.origin),n.scale=Hs(t)/Hs(e),n.translate=di(t.min,t.max,n.origin)-n.originPoint,(n.scale>=Qie&&n.scale<=Zie||isNaN(n.scale))&&(n.scale=1),(n.translate>=ere&&n.translate<=tre||isNaN(n.translate))&&(n.translate=0)}function Cm(n,e,t,i){HL(n.x,e.x,t.x,i?i.originX:void 0),HL(n.y,e.y,t.y,i?i.originY:void 0)}function GL(n,e,t){n.min=t.min+e.min,n.max=n.min+Hs(e)}function ire(n,e,t){GL(n.x,e.x,t.x),GL(n.y,e.y,t.y)}function WL(n,e,t){n.min=e.min-t.min,n.max=n.min+Hs(e)}function Am(n,e,t){WL(n.x,e.x,t.x),WL(n.y,e.y,t.y)}function rre(n,{min:e,max:t},i){return e!==void 0&&n<e?n=i?di(e,n,i.min):Math.max(n,e):t!==void 0&&n>t&&(n=i?di(t,n,i.max):Math.min(n,t)),n}function qL(n,e,t){return{min:e!==void 0?n.min+e:void 0,max:t!==void 0?n.max+t-(n.max-n.min):void 0}}function sre(n,{top:e,left:t,bottom:i,right:r}){return{x:qL(n.x,t,r),y:qL(n.y,e,i)}}function $L(n,e){let t=e.min-n.min,i=e.max-n.max;return e.max-e.min<n.max-n.min&&([t,i]=[i,t]),{min:t,max:i}}function ore(n,e){return{x:$L(n.x,e.x),y:$L(n.y,e.y)}}function are(n,e){let t=.5;const i=Hs(n),r=Hs(e);return r>i?t=ff(e.min,e.max-i,n.min):i>r&&(t=ff(n.min,n.max-r,e.min)),Za(0,1,t)}function lre(n,e){const t={};return e.min!==void 0&&(t.min=e.min-n.min),e.max!==void 0&&(t.max=e.max-n.min),t}const j1=.35;function cre(n=j1){return n===!1?n=0:n===!0&&(n=j1),{x:XL(n,"left","right"),y:XL(n,"top","bottom")}}function XL(n,e,t){return{min:KL(n,e),max:KL(n,t)}}function KL(n,e){return typeof n=="number"?n:n[e]||0}const YL=()=>({translate:0,scale:1,origin:0,originPoint:0}),Ud=()=>({x:YL(),y:YL()}),JL=()=>({min:0,max:0}),Ti=()=>({x:JL(),y:JL()});function io(n){return[n("x"),n("y")]}function MB({top:n,left:e,right:t,bottom:i}){return{x:{min:e,max:t},y:{min:n,max:i}}}function ure({x:n,y:e}){return{top:e.min,right:n.max,bottom:e.max,left:n.min}}function hre(n,e){if(!e)return n;const t=e({x:n.left,y:n.top}),i=e({x:n.right,y:n.bottom});return{top:t.y,left:t.x,bottom:i.y,right:i.x}}function YT(n){return n===void 0||n===1}function V1({scale:n,scaleX:e,scaleY:t}){return!YT(n)||!YT(e)||!YT(t)}function xu(n){return V1(n)||IB(n)||n.z||n.rotate||n.rotateX||n.rotateY||n.skewX||n.skewY}function IB(n){return QL(n.x)||QL(n.y)}function QL(n){return n&&n!=="0%"}function T_(n,e,t){const i=n-t,r=e*i;return t+r}function ZL(n,e,t,i,r){return r!==void 0&&(n=T_(n,r,i)),T_(n,t,i)+e}function B1(n,e=0,t=1,i,r){n.min=ZL(n.min,e,t,i,r),n.max=ZL(n.max,e,t,i,r)}function PB(n,{x:e,y:t}){B1(n.x,e.translate,e.scale,e.originPoint),B1(n.y,t.translate,t.scale,t.originPoint)}const ek=.999999999999,tk=1.0000000000001;function dre(n,e,t,i=!1){const r=t.length;if(!r)return;e.x=e.y=1;let s,o;for(let a=0;a<r;a++){s=t[a],o=s.projectionDelta;const{visualElement:l}=s.options;l&&l.props.style&&l.props.style.display==="contents"||(i&&s.options.layoutScroll&&s.scroll&&s!==s.root&&jd(n,{x:-s.scroll.offset.x,y:-s.scroll.offset.y}),o&&(e.x*=o.x.scale,e.y*=o.y.scale,PB(n,o)),i&&xu(s.latestValues)&&jd(n,s.latestValues))}e.x<tk&&e.x>ek&&(e.x=1),e.y<tk&&e.y>ek&&(e.y=1)}function Fd(n,e){n.min=n.min+e,n.max=n.max+e}function nk(n,e,t,i,r=.5){const s=di(n.min,n.max,r);B1(n,e,t,s,i)}function jd(n,e){nk(n.x,e.x,e.scaleX,e.scale,e.originX),nk(n.y,e.y,e.scaleY,e.scale,e.originY)}function RB(n,e){return MB(hre(n.getBoundingClientRect(),e))}function fre(n,e,t){const i=RB(n,t),{scroll:r}=e;return r&&(Fd(i.x,r.offset.x),Fd(i.y,r.offset.y)),i}const NB=({current:n})=>n?n.ownerDocument.defaultView:null,pre=new WeakMap;class mre{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=Ti(),this.visualElement=e}start(e,{snapToCursor:t=!1}={}){const{presenceContext:i}=this.visualElement;if(i&&i.isPresent===!1)return;const r=u=>{const{dragSnapToOrigin:f}=this.getProps();f?this.pauseAnimation():this.stopAnimation(),t&&this.snapToCursor(oy(u).point)},s=(u,f)=>{const{drag:m,dragPropagation:g,onDragStart:x}=this.getProps();if(m&&!g&&(this.openDragLock&&this.openDragLock(),this.openDragLock=ane(m),!this.openDragLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),io(w=>{let v=this.getAxisMotionValue(w).get()||0;if(ra.test(v)){const{projection:S}=this.visualElement;if(S&&S.layout){const E=S.layout.layoutBox[w];E&&(v=Hs(E)*(parseFloat(v)/100))}}this.originPoint[w]=v}),x&&ri.postRender(()=>x(u,f)),R1(this.visualElement,"transform");const{animationState:b}=this.visualElement;b&&b.setActive("whileDrag",!0)},o=(u,f)=>{const{dragPropagation:m,dragDirectionLock:g,onDirectionLock:x,onDrag:b}=this.getProps();if(!m&&!this.openDragLock)return;const{offset:w}=f;if(g&&this.currentDirection===null){this.currentDirection=gre(w),this.currentDirection!==null&&x&&x(this.currentDirection);return}this.updateAxis("x",f.point,w),this.updateAxis("y",f.point,w),this.visualElement.render(),b&&b(u,f)},a=(u,f)=>this.stop(u,f),l=()=>io(u=>{var f;return this.getAnimationState(u)==="paused"&&((f=this.getAxisMotionValue(u).animation)===null||f===void 0?void 0:f.play())}),{dragSnapToOrigin:c}=this.getProps();this.panSession=new TB(e,{onSessionStart:r,onStart:s,onMove:o,onSessionEnd:a,resumeAnimation:l},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:c,contextWindow:NB(this.visualElement)})}stop(e,t){const i=this.isDragging;if(this.cancel(),!i)return;const{velocity:r}=t;this.startAnimation(r);const{onDragEnd:s}=this.getProps();s&&ri.postRender(()=>s(e,t))}cancel(){this.isDragging=!1;const{projection:e,animationState:t}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:i}=this.getProps();!i&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),t&&t.setActive("whileDrag",!1)}updateAxis(e,t,i){const{drag:r}=this.getProps();if(!i||!yx(e,r,this.currentDirection))return;const s=this.getAxisMotionValue(e);let o=this.originPoint[e]+i[e];this.constraints&&this.constraints[e]&&(o=rre(o,this.constraints[e],this.elastic[e])),s.set(o)}resolveConstraints(){var e;const{dragConstraints:t,dragElastic:i}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(e=this.visualElement.projection)===null||e===void 0?void 0:e.layout,s=this.constraints;t&&kd(t)?this.constraints||(this.constraints=this.resolveRefConstraints()):t&&r?this.constraints=sre(r.layoutBox,t):this.constraints=!1,this.elastic=cre(i),s!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&io(o=>{this.constraints!==!1&&this.getAxisMotionValue(o)&&(this.constraints[o]=lre(r.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:t}=this.getProps();if(!e||!kd(e))return!1;const i=e.current,{projection:r}=this.visualElement;if(!r||!r.layout)return!1;const s=fre(i,r.root,this.visualElement.getTransformPagePoint());let o=ore(r.layout.layoutBox,s);if(t){const a=t(ure(o));this.hasMutatedConstraints=!!a,a&&(o=MB(a))}return o}startAnimation(e){const{drag:t,dragMomentum:i,dragElastic:r,dragTransition:s,dragSnapToOrigin:o,onDragTransitionEnd:a}=this.getProps(),l=this.constraints||{},c=io(u=>{if(!yx(u,t,this.currentDirection))return;let f=l&&l[u]||{};o&&(f={min:0,max:0});const m=r?200:1e6,g=r?40:1e7,x={type:"inertia",velocity:i?e[u]:0,bounceStiffness:m,bounceDamping:g,timeConstant:750,restDelta:1,restSpeed:10,...s,...f};return this.startAxisValueAnimation(u,x)});return Promise.all(c).then(a)}startAxisValueAnimation(e,t){const i=this.getAxisMotionValue(e);return R1(this.visualElement,e),i.start($M(e,i,0,t,this.visualElement,!1))}stopAnimation(){io(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){io(e=>{var t;return(t=this.getAxisMotionValue(e).animation)===null||t===void 0?void 0:t.pause()})}getAnimationState(e){var t;return(t=this.getAxisMotionValue(e).animation)===null||t===void 0?void 0:t.state}getAxisMotionValue(e){const t=`_drag${e.toUpperCase()}`,i=this.visualElement.getProps(),r=i[t];return r||this.visualElement.getValue(e,(i.initial?i.initial[e]:void 0)||0)}snapToCursor(e){io(t=>{const{drag:i}=this.getProps();if(!yx(t,i,this.currentDirection))return;const{projection:r}=this.visualElement,s=this.getAxisMotionValue(t);if(r&&r.layout){const{min:o,max:a}=r.layout.layoutBox[t];s.set(e[t]-di(o,a,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:t}=this.getProps(),{projection:i}=this.visualElement;if(!kd(t)||!i||!this.constraints)return;this.stopAnimation();const r={x:0,y:0};io(o=>{const a=this.getAxisMotionValue(o);if(a&&this.constraints!==!1){const l=a.get();r[o]=are({min:l,max:l},this.constraints[o])}});const{transformTemplate:s}=this.visualElement.getProps();this.visualElement.current.style.transform=s?s({},""):"none",i.root&&i.root.updateScroll(),i.updateLayout(),this.resolveConstraints(),io(o=>{if(!yx(o,e,null))return;const a=this.getAxisMotionValue(o),{min:l,max:c}=this.constraints[o];a.set(di(l,c,r[o]))})}addListeners(){if(!this.visualElement.current)return;pre.set(this.visualElement,this);const e=this.visualElement.current,t=Em(e,"pointerdown",l=>{const{drag:c,dragListener:u=!0}=this.getProps();c&&u&&this.start(l)}),i=()=>{const{dragConstraints:l}=this.getProps();kd(l)&&l.current&&(this.constraints=this.resolveRefConstraints())},{projection:r}=this.visualElement,s=r.addEventListener("measure",i);r&&!r.layout&&(r.root&&r.root.updateScroll(),r.updateLayout()),ri.read(i);const o=Tg(window,"resize",()=>this.scalePositionWithinConstraints()),a=r.addEventListener("didUpdate",({delta:l,hasLayoutChanged:c})=>{this.isDragging&&c&&(io(u=>{const f=this.getAxisMotionValue(u);f&&(this.originPoint[u]+=l[u].translate,f.set(f.get()+l[u].translate))}),this.visualElement.render())});return()=>{o(),t(),s(),a&&a()}}getProps(){const e=this.visualElement.getProps(),{drag:t=!1,dragDirectionLock:i=!1,dragPropagation:r=!1,dragConstraints:s=!1,dragElastic:o=j1,dragMomentum:a=!0}=e;return{...e,drag:t,dragDirectionLock:i,dragPropagation:r,dragConstraints:s,dragElastic:o,dragMomentum:a}}}function yx(n,e,t){return(e===!0||e===n)&&(t===null||t===n)}function gre(n,e=10){let t=null;return Math.abs(n.y)>e?t="y":Math.abs(n.x)>e&&(t="x"),t}class yre extends Nc{constructor(e){super(e),this.removeGroupControls=js,this.removeListeners=js,this.controls=new mre(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||js}unmount(){this.removeGroupControls(),this.removeListeners()}}const ik=n=>(e,t)=>{n&&ri.postRender(()=>n(e,t))};class vre extends Nc{constructor(){super(...arguments),this.removePointerDownListener=js}onPointerDown(e){this.session=new TB(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:NB(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:t,onPan:i,onPanEnd:r}=this.node.getProps();return{onSessionStart:ik(e),onStart:ik(t),onMove:i,onEnd:(s,o)=>{delete this.session,r&&ri.postRender(()=>r(s,o))}}}mount(){this.removePointerDownListener=Em(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const Xx={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function rk(n,e){return e.max===e.min?0:n/(e.max-e.min)*100}const Bp={correct:(n,e)=>{if(!e.target)return n;if(typeof n=="string")if(Ut.test(n))n=parseFloat(n);else return n;const t=rk(n,e.target.x),i=rk(n,e.target.y);return`${t}% ${i}%`}},xre={correct:(n,{treeScale:e,projectionDelta:t})=>{const i=n,r=fc.parse(n);if(r.length>5)return i;const s=fc.createTransformer(n),o=typeof r[0]!="number"?1:0,a=t.x.scale*e.x,l=t.y.scale*e.y;r[0+o]/=a,r[1+o]/=l;const c=di(a,l,.5);return typeof r[2+o]=="number"&&(r[2+o]/=c),typeof r[3+o]=="number"&&(r[3+o]/=c),s(r)}};class _re extends V.Component{componentDidMount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:i,layoutId:r}=this.props,{projection:s}=e;Vte(wre),s&&(t.group&&t.group.add(s),i&&i.register&&r&&i.register(s),s.root.didUpdate(),s.addEventListener("animationComplete",()=>{this.safeToRemove()}),s.setOptions({...s.options,onExitComplete:()=>this.safeToRemove()})),Xx.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:t,visualElement:i,drag:r,isPresent:s}=this.props,o=i.projection;return o&&(o.isPresent=s,r||e.layoutDependency!==t||t===void 0?o.willUpdate():this.safeToRemove(),e.isPresent!==s&&(s?o.promote():o.relegate()||ri.postRender(()=>{const a=o.getStack();(!a||!a.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),bM.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:i}=this.props,{projection:r}=e;r&&(r.scheduleCheckAfterUnmount(),t&&t.group&&t.group.remove(r),i&&i.deregister&&i.deregister(r))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function DB(n){const[e,t]=tte(),i=V.useContext(m4);return d.jsx(_re,{...n,layoutGroup:i,switchLayoutGroup:V.useContext(S4),isPresent:e,safeToRemove:t})}const wre={borderRadius:{...Bp,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Bp,borderTopRightRadius:Bp,borderBottomLeftRadius:Bp,borderBottomRightRadius:Bp,boxShadow:xre};function bre(n,e,t){const i=kr(n)?n:bg(n);return i.start($M("",i,e,t)),i.animation}function Sre(n){return n instanceof SVGElement&&n.tagName!=="svg"}const Tre=(n,e)=>n.depth-e.depth;class Ere{constructor(){this.children=[],this.isDirty=!1}add(e){OM(this.children,e),this.isDirty=!0}remove(e){UM(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(Tre),this.isDirty=!1,this.children.forEach(e)}}function Cre(n,e){const t=sa.now(),i=({timestamp:r})=>{const s=r-t;s>=e&&(dc(i),n(s-e))};return ri.read(i,!0),()=>dc(i)}const LB=["TopLeft","TopRight","BottomLeft","BottomRight"],Are=LB.length,sk=n=>typeof n=="string"?parseFloat(n):n,ok=n=>typeof n=="number"||Ut.test(n);function Mre(n,e,t,i,r,s){r?(n.opacity=di(0,t.opacity!==void 0?t.opacity:1,Ire(i)),n.opacityExit=di(e.opacity!==void 0?e.opacity:1,0,Pre(i))):s&&(n.opacity=di(e.opacity!==void 0?e.opacity:1,t.opacity!==void 0?t.opacity:1,i));for(let o=0;o<Are;o++){const a=`border${LB[o]}Radius`;let l=ak(e,a),c=ak(t,a);if(l===void 0&&c===void 0)continue;l||(l=0),c||(c=0),l===0||c===0||ok(l)===ok(c)?(n[a]=Math.max(di(sk(l),sk(c),i),0),(ra.test(c)||ra.test(l))&&(n[a]+="%")):n[a]=c}(e.rotate||t.rotate)&&(n.rotate=di(e.rotate||0,t.rotate||0,i))}function ak(n,e){return n[e]!==void 0?n[e]:n.borderRadius}const Ire=kB(0,.5,Z4),Pre=kB(.5,.95,js);function kB(n,e,t){return i=>i<n?0:i>e?1:t(ff(n,e,i))}function lk(n,e){n.min=e.min,n.max=e.max}function no(n,e){lk(n.x,e.x),lk(n.y,e.y)}function ck(n,e){n.translate=e.translate,n.scale=e.scale,n.originPoint=e.originPoint,n.origin=e.origin}function uk(n,e,t,i,r){return n-=e,n=T_(n,1/t,i),r!==void 0&&(n=T_(n,1/r,i)),n}function Rre(n,e=0,t=1,i=.5,r,s=n,o=n){if(ra.test(e)&&(e=parseFloat(e),e=di(o.min,o.max,e/100)-o.min),typeof e!="number")return;let a=di(s.min,s.max,i);n===s&&(a-=e),n.min=uk(n.min,e,t,a,r),n.max=uk(n.max,e,t,a,r)}function hk(n,e,[t,i,r],s,o){Rre(n,e[t],e[i],e[r],e.scale,s,o)}const Nre=["x","scaleX","originX"],Dre=["y","scaleY","originY"];function dk(n,e,t,i){hk(n.x,e,Nre,t?t.x:void 0,i?i.x:void 0),hk(n.y,e,Dre,t?t.y:void 0,i?i.y:void 0)}function fk(n){return n.translate===0&&n.scale===1}function OB(n){return fk(n.x)&&fk(n.y)}function pk(n,e){return n.min===e.min&&n.max===e.max}function Lre(n,e){return pk(n.x,e.x)&&pk(n.y,e.y)}function mk(n,e){return Math.round(n.min)===Math.round(e.min)&&Math.round(n.max)===Math.round(e.max)}function UB(n,e){return mk(n.x,e.x)&&mk(n.y,e.y)}function gk(n){return Hs(n.x)/Hs(n.y)}function yk(n,e){return n.translate===e.translate&&n.scale===e.scale&&n.originPoint===e.originPoint}class kre{constructor(){this.members=[]}add(e){OM(this.members,e),e.scheduleRender()}remove(e){if(UM(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const t=this.members[this.members.length-1];t&&this.promote(t)}}relegate(e){const t=this.members.findIndex(r=>e===r);if(t===0)return!1;let i;for(let r=t;r>=0;r--){const s=this.members[r];if(s.isPresent!==!1){i=s;break}}return i?(this.promote(i),!0):!1}promote(e,t){const i=this.lead;if(e!==i&&(this.prevLead=i,this.lead=e,e.show(),i)){i.instance&&i.scheduleRender(),e.scheduleRender(),e.resumeFrom=i,t&&(e.resumeFrom.preserveOpacity=!0),i.snapshot&&(e.snapshot=i.snapshot,e.snapshot.latestValues=i.animationValues||i.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:r}=e.options;r===!1&&i.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:t,resumingFrom:i}=e;t.onExitComplete&&t.onExitComplete(),i&&i.options.onExitComplete&&i.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function Ore(n,e,t){let i="";const r=n.x.translate/e.x,s=n.y.translate/e.y,o=t?.z||0;if((r||s||o)&&(i=`translate3d(${r}px, ${s}px, ${o}px) `),(e.x!==1||e.y!==1)&&(i+=`scale(${1/e.x}, ${1/e.y}) `),t){const{transformPerspective:c,rotate:u,rotateX:f,rotateY:m,skewX:g,skewY:x}=t;c&&(i=`perspective(${c}px) ${i}`),u&&(i+=`rotate(${u}deg) `),f&&(i+=`rotateX(${f}deg) `),m&&(i+=`rotateY(${m}deg) `),g&&(i+=`skewX(${g}deg) `),x&&(i+=`skewY(${x}deg) `)}const a=n.x.scale*e.x,l=n.y.scale*e.y;return(a!==1||l!==1)&&(i+=`scale(${a}, ${l})`),i||"none"}const _u={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0},Jp=typeof window<"u"&&window.MotionDebug!==void 0,JT=["","X","Y","Z"],Ure={visibility:"hidden"},vk=1e3;let Fre=0;function QT(n,e,t,i){const{latestValues:r}=e;r[n]&&(t[n]=r[n],e.setStaticValue(n,0),i&&(i[n]=0))}function FB(n){if(n.hasCheckedOptimisedAppear=!0,n.root===n)return;const{visualElement:e}=n.options;if(!e)return;const t=q4(e);if(window.MotionHasOptimisedAnimation(t,"transform")){const{layout:r,layoutId:s}=n.options;window.MotionCancelOptimisedAnimation(t,"transform",ri,!(r||s))}const{parent:i}=n;i&&!i.hasCheckedOptimisedAppear&&FB(i)}function jB({attachResizeListener:n,defaultParent:e,measureScroll:t,checkIsScrollRoot:i,resetTransform:r}){return class{constructor(o={},a=e?.()){this.id=Fre++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,Jp&&(_u.totalNodes=_u.resolvedTargetDeltas=_u.recalculatedProjection=0),this.nodes.forEach(Bre),this.nodes.forEach(qre),this.nodes.forEach($re),this.nodes.forEach(zre),Jp&&window.MotionDebug.record(_u)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=a?a.root||a:this,this.path=a?[...a.path,a]:[],this.parent=a,this.depth=a?a.depth+1:0;for(let l=0;l<this.path.length;l++)this.path[l].shouldResetTransform=!0;this.root===this&&(this.nodes=new Ere)}addEventListener(o,a){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new FM),this.eventHandlers.get(o).add(a)}notifyListeners(o,...a){const l=this.eventHandlers.get(o);l&&l.notify(...a)}hasListeners(o){return this.eventHandlers.has(o)}mount(o,a=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=Sre(o),this.instance=o;const{layoutId:l,layout:c,visualElement:u}=this.options;if(u&&!u.current&&u.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),a&&(c||l)&&(this.isLayoutDirty=!0),n){let f;const m=()=>this.root.updateBlockedByResize=!1;n(o,()=>{this.root.updateBlockedByResize=!0,f&&f(),f=Cre(m,250),Xx.hasAnimatedSinceResize&&(Xx.hasAnimatedSinceResize=!1,this.nodes.forEach(_k))})}l&&this.root.registerSharedNode(l,this),this.options.animate!==!1&&u&&(l||c)&&this.addEventListener("didUpdate",({delta:f,hasLayoutChanged:m,hasRelativeTargetChanged:g,layout:x})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const b=this.options.transition||u.getDefaultTransition()||Qre,{onLayoutAnimationStart:w,onLayoutAnimationComplete:v}=u.getProps(),S=!this.targetLayout||!UB(this.targetLayout,x)||g,E=!m&&g;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||E||m&&(S||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(f,E);const I={...NM(b,"layout"),onPlay:w,onComplete:v};(u.shouldReduceMotion||this.options.layoutRoot)&&(I.delay=0,I.type=!1),this.startAnimation(I)}else m||_k(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=x})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,dc(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(Xre),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&FB(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let u=0;u<this.path.length;u++){const f=this.path[u];f.shouldResetTransform=!0,f.updateScroll("snapshot"),f.options.layoutRoot&&f.willUpdate(!1)}const{layoutId:a,layout:l}=this.options;if(a===void 0&&!l)return;const c=this.getTransformTemplate();this.prevTransformTemplateValue=c?c(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(xk);return}this.isUpdating||this.nodes.forEach(Gre),this.isUpdating=!1,this.nodes.forEach(Wre),this.nodes.forEach(jre),this.nodes.forEach(Vre),this.clearAllSnapshots();const a=sa.now();ur.delta=Za(0,1e3/60,a-ur.timestamp),ur.timestamp=a,ur.isProcessing=!0,HT.update.process(ur),HT.preRender.process(ur),HT.render.process(ur),ur.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,bM.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(Hre),this.sharedNodes.forEach(Kre)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,ri.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){ri.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let l=0;l<this.path.length;l++)this.path[l].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutCorrected=Ti(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:a}=this.options;a&&a.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let a=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(a=!1),a){const l=i(this.instance);this.scroll={animationId:this.root.animationId,phase:o,isRoot:l,offset:t(this.instance),wasRoot:this.scroll?this.scroll.isRoot:l}}}resetTransform(){if(!r)return;const o=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,a=this.projectionDelta&&!OB(this.projectionDelta),l=this.getTransformTemplate(),c=l?l(this.latestValues,""):void 0,u=c!==this.prevTransformTemplateValue;o&&(a||xu(this.latestValues)||u)&&(r(this.instance,c),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const a=this.measurePageBox();let l=this.removeElementScroll(a);return o&&(l=this.removeTransform(l)),Zre(l),{animationId:this.root.animationId,measuredBox:a,layoutBox:l,latestValues:{},source:this.id}}measurePageBox(){var o;const{visualElement:a}=this.options;if(!a)return Ti();const l=a.measureViewportBox();if(!(((o=this.scroll)===null||o===void 0?void 0:o.wasRoot)||this.path.some(ese))){const{scroll:u}=this.root;u&&(Fd(l.x,u.offset.x),Fd(l.y,u.offset.y))}return l}removeElementScroll(o){var a;const l=Ti();if(no(l,o),!((a=this.scroll)===null||a===void 0)&&a.wasRoot)return l;for(let c=0;c<this.path.length;c++){const u=this.path[c],{scroll:f,options:m}=u;u!==this.root&&f&&m.layoutScroll&&(f.wasRoot&&no(l,o),Fd(l.x,f.offset.x),Fd(l.y,f.offset.y))}return l}applyTransform(o,a=!1){const l=Ti();no(l,o);for(let c=0;c<this.path.length;c++){const u=this.path[c];!a&&u.options.layoutScroll&&u.scroll&&u!==u.root&&jd(l,{x:-u.scroll.offset.x,y:-u.scroll.offset.y}),xu(u.latestValues)&&jd(l,u.latestValues)}return xu(this.latestValues)&&jd(l,this.latestValues),l}removeTransform(o){const a=Ti();no(a,o);for(let l=0;l<this.path.length;l++){const c=this.path[l];if(!c.instance||!xu(c.latestValues))continue;V1(c.latestValues)&&c.updateSnapshot();const u=Ti(),f=c.measurePageBox();no(u,f),dk(a,c.latestValues,c.snapshot?c.snapshot.layoutBox:void 0,u)}return xu(this.latestValues)&&dk(a,this.latestValues),a}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==ur.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){var a;const l=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=l.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=l.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=l.isSharedProjectionDirty);const c=!!this.resumingFrom||this!==l;if(!(o||c&&this.isSharedProjectionDirty||this.isProjectionDirty||!((a=this.parent)===null||a===void 0)&&a.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:f,layoutId:m}=this.options;if(!(!this.layout||!(f||m))){if(this.resolvedRelativeTargetAt=ur.timestamp,!this.targetDelta&&!this.relativeTarget){const g=this.getClosestProjectingParent();g&&g.layout&&this.animationProgress!==1?(this.relativeParent=g,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Ti(),this.relativeTargetOrigin=Ti(),Am(this.relativeTargetOrigin,this.layout.layoutBox,g.layout.layoutBox),no(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=Ti(),this.targetWithTransforms=Ti()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),ire(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):no(this.target,this.layout.layoutBox),PB(this.target,this.targetDelta)):no(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const g=this.getClosestProjectingParent();g&&!!g.resumingFrom==!!this.resumingFrom&&!g.options.layoutScroll&&g.target&&this.animationProgress!==1?(this.relativeParent=g,this.forceRelativeParentToResolveTarget(),this.relativeTarget=Ti(),this.relativeTargetOrigin=Ti(),Am(this.relativeTargetOrigin,this.target,g.target),no(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}Jp&&_u.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||V1(this.parent.latestValues)||IB(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var o;const a=this.getLead(),l=!!this.resumingFrom||this!==a;let c=!0;if((this.isProjectionDirty||!((o=this.parent)===null||o===void 0)&&o.isProjectionDirty)&&(c=!1),l&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(c=!1),this.resolvedRelativeTargetAt===ur.timestamp&&(c=!1),c)return;const{layout:u,layoutId:f}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(u||f))return;no(this.layoutCorrected,this.layout.layoutBox);const m=this.treeScale.x,g=this.treeScale.y;dre(this.layoutCorrected,this.treeScale,this.path,l),a.layout&&!a.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(a.target=a.layout.layoutBox,a.targetWithTransforms=Ti());const{target:x}=a;if(!x){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(ck(this.prevProjectionDelta.x,this.projectionDelta.x),ck(this.prevProjectionDelta.y,this.projectionDelta.y)),Cm(this.projectionDelta,this.layoutCorrected,x,this.latestValues),(this.treeScale.x!==m||this.treeScale.y!==g||!yk(this.projectionDelta.x,this.prevProjectionDelta.x)||!yk(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",x)),Jp&&_u.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){var a;if((a=this.options.visualElement)===null||a===void 0||a.scheduleRender(),o){const l=this.getStack();l&&l.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Ud(),this.projectionDelta=Ud(),this.projectionDeltaWithTransform=Ud()}setAnimationOrigin(o,a=!1){const l=this.snapshot,c=l?l.latestValues:{},u={...this.latestValues},f=Ud();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!a;const m=Ti(),g=l?l.source:void 0,x=this.layout?this.layout.source:void 0,b=g!==x,w=this.getStack(),v=!w||w.members.length<=1,S=!!(b&&!v&&this.options.crossfade===!0&&!this.path.some(Jre));this.animationProgress=0;let E;this.mixTargetDelta=I=>{const U=I/1e3;wk(f.x,o.x,U),wk(f.y,o.y,U),this.setTargetDelta(f),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Am(m,this.layout.layoutBox,this.relativeParent.layout.layoutBox),Yre(this.relativeTarget,this.relativeTargetOrigin,m,U),E&&Lre(this.relativeTarget,E)&&(this.isProjectionDirty=!1),E||(E=Ti()),no(E,this.relativeTarget)),b&&(this.animationValues=u,Mre(u,c,this.latestValues,U,S,v)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=U},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(dc(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=ri.update(()=>{Xx.hasAnimatedSinceResize=!0,this.currentAnimation=bre(0,vk,{...o,onUpdate:a=>{this.mixTargetDelta(a),o.onUpdate&&o.onUpdate(a)},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(vk),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:a,target:l,layout:c,latestValues:u}=o;if(!(!a||!l||!c)){if(this!==o&&this.layout&&c&&VB(this.options.animationType,this.layout.layoutBox,c.layoutBox)){l=this.target||Ti();const f=Hs(this.layout.layoutBox.x);l.x.min=o.target.x.min,l.x.max=l.x.min+f;const m=Hs(this.layout.layoutBox.y);l.y.min=o.target.y.min,l.y.max=l.y.min+m}no(a,l),jd(a,u),Cm(this.projectionDeltaWithTransform,this.layoutCorrected,a,u)}}registerSharedNode(o,a){this.sharedNodes.has(o)||this.sharedNodes.set(o,new kre),this.sharedNodes.get(o).add(a);const c=a.options.initialPromotionConfig;a.promote({transition:c?c.transition:void 0,preserveFollowOpacity:c&&c.shouldPreserveFollowOpacity?c.shouldPreserveFollowOpacity(a):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){var o;const{layoutId:a}=this.options;return a?((o=this.getStack())===null||o===void 0?void 0:o.lead)||this:this}getPrevLead(){var o;const{layoutId:a}=this.options;return a?(o=this.getStack())===null||o===void 0?void 0:o.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:a,preserveFollowOpacity:l}={}){const c=this.getStack();c&&c.promote(this,l),o&&(this.projectionDelta=void 0,this.needsReset=!0),a&&this.setOptions({transition:a})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetSkewAndRotation(){const{visualElement:o}=this.options;if(!o)return;let a=!1;const{latestValues:l}=o;if((l.z||l.rotate||l.rotateX||l.rotateY||l.rotateZ||l.skewX||l.skewY)&&(a=!0),!a)return;const c={};l.z&&QT("z",o,c,this.animationValues);for(let u=0;u<JT.length;u++)QT(`rotate${JT[u]}`,o,c,this.animationValues),QT(`skew${JT[u]}`,o,c,this.animationValues);o.render();for(const u in c)o.setStaticValue(u,c[u]),this.animationValues&&(this.animationValues[u]=c[u]);o.scheduleRender()}getProjectionStyles(o){var a,l;if(!this.instance||this.isSVG)return;if(!this.isVisible)return Ure;const c={visibility:""},u=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,c.opacity="",c.pointerEvents=qx(o?.pointerEvents)||"",c.transform=u?u(this.latestValues,""):"none",c;const f=this.getLead();if(!this.projectionDelta||!this.layout||!f.target){const b={};return this.options.layoutId&&(b.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,b.pointerEvents=qx(o?.pointerEvents)||""),this.hasProjected&&!xu(this.latestValues)&&(b.transform=u?u({},""):"none",this.hasProjected=!1),b}const m=f.animationValues||f.latestValues;this.applyTransformsToTarget(),c.transform=Ore(this.projectionDeltaWithTransform,this.treeScale,m),u&&(c.transform=u(m,c.transform));const{x:g,y:x}=this.projectionDelta;c.transformOrigin=`${g.origin*100}% ${x.origin*100}% 0`,f.animationValues?c.opacity=f===this?(l=(a=m.opacity)!==null&&a!==void 0?a:this.latestValues.opacity)!==null&&l!==void 0?l:1:this.preserveOpacity?this.latestValues.opacity:m.opacityExit:c.opacity=f===this?m.opacity!==void 0?m.opacity:"":m.opacityExit!==void 0?m.opacityExit:0;for(const b in x_){if(m[b]===void 0)continue;const{correct:w,applyTo:v}=x_[b],S=c.transform==="none"?m[b]:w(m[b],f);if(v){const E=v.length;for(let I=0;I<E;I++)c[v[I]]=S}else c[b]=S}return this.options.layoutId&&(c.pointerEvents=f===this?qx(o?.pointerEvents)||"":"none"),c}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>{var a;return(a=o.currentAnimation)===null||a===void 0?void 0:a.stop()}),this.root.nodes.forEach(xk),this.root.sharedNodes.clear()}}}function jre(n){n.updateLayout()}function Vre(n){var e;const t=((e=n.resumeFrom)===null||e===void 0?void 0:e.snapshot)||n.snapshot;if(n.isLead()&&n.layout&&t&&n.hasListeners("didUpdate")){const{layoutBox:i,measuredBox:r}=n.layout,{animationType:s}=n.options,o=t.source!==n.layout.source;s==="size"?io(f=>{const m=o?t.measuredBox[f]:t.layoutBox[f],g=Hs(m);m.min=i[f].min,m.max=m.min+g}):VB(s,t.layoutBox,i)&&io(f=>{const m=o?t.measuredBox[f]:t.layoutBox[f],g=Hs(i[f]);m.max=m.min+g,n.relativeTarget&&!n.currentAnimation&&(n.isProjectionDirty=!0,n.relativeTarget[f].max=n.relativeTarget[f].min+g)});const a=Ud();Cm(a,i,t.layoutBox);const l=Ud();o?Cm(l,n.applyTransform(r,!0),t.measuredBox):Cm(l,i,t.layoutBox);const c=!OB(a);let u=!1;if(!n.resumeFrom){const f=n.getClosestProjectingParent();if(f&&!f.resumeFrom){const{snapshot:m,layout:g}=f;if(m&&g){const x=Ti();Am(x,t.layoutBox,m.layoutBox);const b=Ti();Am(b,i,g.layoutBox),UB(x,b)||(u=!0),f.options.layoutRoot&&(n.relativeTarget=b,n.relativeTargetOrigin=x,n.relativeParent=f)}}}n.notifyListeners("didUpdate",{layout:i,snapshot:t,delta:l,layoutDelta:a,hasLayoutChanged:c,hasRelativeTargetChanged:u})}else if(n.isLead()){const{onExitComplete:i}=n.options;i&&i()}n.options.transition=void 0}function Bre(n){Jp&&_u.totalNodes++,n.parent&&(n.isProjecting()||(n.isProjectionDirty=n.parent.isProjectionDirty),n.isSharedProjectionDirty||(n.isSharedProjectionDirty=!!(n.isProjectionDirty||n.parent.isProjectionDirty||n.parent.isSharedProjectionDirty)),n.isTransformDirty||(n.isTransformDirty=n.parent.isTransformDirty))}function zre(n){n.isProjectionDirty=n.isSharedProjectionDirty=n.isTransformDirty=!1}function Hre(n){n.clearSnapshot()}function xk(n){n.clearMeasurements()}function Gre(n){n.isLayoutDirty=!1}function Wre(n){const{visualElement:e}=n.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),n.resetTransform()}function _k(n){n.finishAnimation(),n.targetDelta=n.relativeTarget=n.target=void 0,n.isProjectionDirty=!0}function qre(n){n.resolveTargetDelta()}function $re(n){n.calcProjection()}function Xre(n){n.resetSkewAndRotation()}function Kre(n){n.removeLeadSnapshot()}function wk(n,e,t){n.translate=di(e.translate,0,t),n.scale=di(e.scale,1,t),n.origin=e.origin,n.originPoint=e.originPoint}function bk(n,e,t,i){n.min=di(e.min,t.min,i),n.max=di(e.max,t.max,i)}function Yre(n,e,t,i){bk(n.x,e.x,t.x,i),bk(n.y,e.y,t.y,i)}function Jre(n){return n.animationValues&&n.animationValues.opacityExit!==void 0}const Qre={duration:.45,ease:[.4,0,.1,1]},Sk=n=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(n),Tk=Sk("applewebkit/")&&!Sk("chrome/")?Math.round:js;function Ek(n){n.min=Tk(n.min),n.max=Tk(n.max)}function Zre(n){Ek(n.x),Ek(n.y)}function VB(n,e,t){return n==="position"||n==="preserve-aspect"&&!nre(gk(e),gk(t),.2)}function ese(n){var e;return n!==n.root&&((e=n.scroll)===null||e===void 0?void 0:e.wasRoot)}const tse=jB({attachResizeListener:(n,e)=>Tg(n,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),ZT={current:void 0},BB=jB({measureScroll:n=>({x:n.scrollLeft,y:n.scrollTop}),defaultParent:()=>{if(!ZT.current){const n=new tse({});n.mount(window),n.setOptions({layoutScroll:!0}),ZT.current=n}return ZT.current},resetTransform:(n,e)=>{n.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:n=>window.getComputedStyle(n).position==="fixed"}),nse={pan:{Feature:vre},drag:{Feature:yre,ProjectionNode:BB,MeasureLayout:DB}};function Ck(n,e,t){const{props:i}=n;n.animationState&&i.whileHover&&n.animationState.setActive("whileHover",t==="Start");const r="onHover"+t,s=i[r];s&&ri.postRender(()=>s(e,oy(e)))}class ise extends Nc{mount(){const{current:e}=this.node;e&&(this.unmount=nne(e,t=>(Ck(this.node,t,"Start"),i=>Ck(this.node,i,"End"))))}unmount(){}}class rse extends Nc{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=sy(Tg(this.node.current,"focus",()=>this.onFocus()),Tg(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function Ak(n,e,t){const{props:i}=n;n.animationState&&i.whileTap&&n.animationState.setActive("whileTap",t==="Start");const r="onTap"+(t==="End"?"":t),s=i[r];s&&ri.postRender(()=>s(e,oy(e)))}class sse extends Nc{mount(){const{current:e}=this.node;e&&(this.unmount=one(e,t=>(Ak(this.node,t,"Start"),(i,{success:r})=>Ak(this.node,i,r?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const z1=new WeakMap,eE=new WeakMap,ose=n=>{const e=z1.get(n.target);e&&e(n)},ase=n=>{n.forEach(ose)};function lse({root:n,...e}){const t=n||document;eE.has(t)||eE.set(t,{});const i=eE.get(t),r=JSON.stringify(e);return i[r]||(i[r]=new IntersectionObserver(ase,{root:n,...e})),i[r]}function cse(n,e,t){const i=lse(e);return z1.set(n,t),i.observe(n),()=>{z1.delete(n),i.unobserve(n)}}const use={some:0,all:1};class hse extends Nc{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:t,margin:i,amount:r="some",once:s}=e,o={root:t?t.current:void 0,rootMargin:i,threshold:typeof r=="number"?r:use[r]},a=l=>{const{isIntersecting:c}=l;if(this.isInView===c||(this.isInView=c,s&&!c&&this.hasEnteredView))return;c&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",c);const{onViewportEnter:u,onViewportLeave:f}=this.node.getProps(),m=c?u:f;m&&m(l)};return cse(this.node.current,o,a)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:t}=this.node;["amount","margin","root"].some(dse(e,t))&&this.startObserver()}unmount(){}}function dse({viewport:n={}},{viewport:e={}}={}){return t=>n[t]!==e[t]}const fse={inView:{Feature:hse},tap:{Feature:sse},focus:{Feature:rse},hover:{Feature:ise}},pse={layout:{ProjectionNode:BB,MeasureLayout:DB}},H1={current:null},zB={current:!1};function mse(){if(zB.current=!0,!!yM)if(window.matchMedia){const n=window.matchMedia("(prefers-reduced-motion)"),e=()=>H1.current=n.matches;n.addListener(e),e()}else H1.current=!1}const gse=[...fB,Pr,fc],yse=n=>gse.find(dB(n)),Mk=new WeakMap;function vse(n,e,t){for(const i in e){const r=e[i],s=t[i];if(kr(r))n.addValue(i,r);else if(kr(s))n.addValue(i,bg(r,{owner:n}));else if(s!==r)if(n.hasValue(i)){const o=n.getValue(i);o.liveStyle===!0?o.jump(r):o.hasAnimated||o.set(r)}else{const o=n.getStaticValue(i);n.addValue(i,bg(o!==void 0?o:r,{owner:n}))}}for(const i in t)e[i]===void 0&&n.removeValue(i);return e}const Ik=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class xse{scrapeMotionValuesFromProps(e,t,i){return{}}constructor({parent:e,props:t,presenceContext:i,reducedMotionConfig:r,blockInitialAnimation:s,visualState:o},a={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=GM,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const g=sa.now();this.renderScheduledAt<g&&(this.renderScheduledAt=g,ri.render(this.render,!1,!0))};const{latestValues:l,renderState:c,onUpdate:u}=o;this.onUpdate=u,this.latestValues=l,this.baseTarget={...l},this.initialValues=t.initial?{...l}:{},this.renderState=c,this.parent=e,this.props=t,this.presenceContext=i,this.depth=e?e.depth+1:0,this.reducedMotionConfig=r,this.options=a,this.blockInitialAnimation=!!s,this.isControllingVariants=Kw(t),this.isVariantNode=w4(t),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:f,...m}=this.scrapeMotionValuesFromProps(t,{},this);for(const g in m){const x=m[g];l[g]!==void 0&&kr(x)&&x.set(l[g],!1)}}mount(e){this.current=e,Mk.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((t,i)=>this.bindToMotionValue(i,t)),zB.current||mse(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:H1.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){Mk.delete(this.current),this.projection&&this.projection.unmount(),dc(this.notifyUpdate),dc(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const t=this.features[e];t&&(t.unmount(),t.isMounted=!1)}this.current=null}bindToMotionValue(e,t){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const i=yh.has(e),r=t.on("change",a=>{this.latestValues[e]=a,this.props.onUpdate&&ri.preRender(this.notifyUpdate),i&&this.projection&&(this.projection.isTransformDirty=!0)}),s=t.on("renderRequest",this.scheduleRender);let o;window.MotionCheckAppearSync&&(o=window.MotionCheckAppearSync(this,e,t)),this.valueSubscriptions.set(e,()=>{r(),s(),o&&o(),t.owner&&t.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in pf){const t=pf[e];if(!t)continue;const{isEnabled:i,Feature:r}=t;if(!this.features[e]&&r&&i(this.props)&&(this.features[e]=new r(this)),this.features[e]){const s=this.features[e];s.isMounted?s.update():(s.mount(),s.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):Ti()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,t){this.latestValues[e]=t}update(e,t){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=t;for(let i=0;i<Ik.length;i++){const r=Ik[i];this.propEventSubscriptions[r]&&(this.propEventSubscriptions[r](),delete this.propEventSubscriptions[r]);const s="on"+r,o=e[s];o&&(this.propEventSubscriptions[r]=this.on(r,o))}this.prevMotionValues=vse(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue(),this.onUpdate&&this.onUpdate(this)}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const t=this.getClosestVariantNode();if(t)return t.variantChildren&&t.variantChildren.add(e),()=>t.variantChildren.delete(e)}addValue(e,t){const i=this.values.get(e);t!==i&&(i&&this.removeValue(e),this.bindToMotionValue(e,t),this.values.set(e,t),this.latestValues[e]=t.get())}removeValue(e){this.values.delete(e);const t=this.valueSubscriptions.get(e);t&&(t(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,t){if(this.props.values&&this.props.values[e])return this.props.values[e];let i=this.values.get(e);return i===void 0&&t!==void 0&&(i=bg(t===null?void 0:t,{owner:this}),this.addValue(e,i)),i}readValue(e,t){var i;let r=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:(i=this.getBaseTargetFromProps(this.props,e))!==null&&i!==void 0?i:this.readValueFromInstance(this.current,e,this.options);return r!=null&&(typeof r=="string"&&(uB(r)||tB(r))?r=parseFloat(r):!yse(r)&&fc.test(t)&&(r=aB(e,t)),this.setBaseTarget(e,kr(r)?r.get():r)),kr(r)?r.get():r}setBaseTarget(e,t){this.baseTarget[e]=t}getBaseTarget(e){var t;const{initial:i}=this.props;let r;if(typeof i=="string"||typeof i=="object"){const o=TM(this.props,i,(t=this.presenceContext)===null||t===void 0?void 0:t.custom);o&&(r=o[e])}if(i&&r!==void 0)return r;const s=this.getBaseTargetFromProps(this.props,e);return s!==void 0&&!kr(s)?s:this.initialValues[e]!==void 0&&r===void 0?void 0:this.baseTarget[e]}on(e,t){return this.events[e]||(this.events[e]=new FM),this.events[e].add(t)}notify(e,...t){this.events[e]&&this.events[e].notify(...t)}}class HB extends xse{constructor(){super(...arguments),this.KeyframeResolver=pB}sortInstanceNodePosition(e,t){return e.compareDocumentPosition(t)&2?1:-1}getBaseTargetFromProps(e,t){return e.style?e.style[t]:void 0}removeValueFromRenderState(e,{vars:t,style:i}){delete t[e],delete i[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;kr(e)&&(this.childSubscription=e.on("change",t=>{this.current&&(this.current.textContent=`${t}`)}))}}function _se(n){return window.getComputedStyle(n)}class wse extends HB{constructor(){super(...arguments),this.type="html",this.renderInstance=P4}readValueFromInstance(e,t){if(yh.has(t)){const i=HM(t);return i&&i.default||0}else{const i=_se(e),r=(A4(t)?i.getPropertyValue(t):i[t])||0;return typeof r=="string"?r.trim():r}}measureInstanceViewportBox(e,{transformPagePoint:t}){return RB(e,t)}build(e,t,i){AM(e,t,i.transformTemplate)}scrapeMotionValuesFromProps(e,t,i){return RM(e,t,i)}}class bse extends HB{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=Ti}getBaseTargetFromProps(e,t){return e[t]}readValueFromInstance(e,t){if(yh.has(t)){const i=HM(t);return i&&i.default||0}return t=R4.has(t)?t:wM(t),e.getAttribute(t)}scrapeMotionValuesFromProps(e,t,i){return L4(e,t,i)}build(e,t,i){MM(e,t,this.isSVGTag,i.transformTemplate)}renderInstance(e,t,i,r){N4(e,t,i,r)}mount(e){this.isSVGTag=PM(e.tagName),super.mount(e)}}const Sse=(n,e)=>SM(n)?new bse(e):new wse(e,{allowProjection:n!==V.Fragment}),Tse=Kte({...$ie,...fse,...nse,...pse},Sse),Pn=ute(Tse),q={paddingX:"sm:px-16 px-6",paddingY:"sm:py-16 py-6",padding:"sm:px-16 px-6 sm:py-16 py-10",headText:"font-black text-white lg:text-[80px] sm:text-[60px] xs:text-[50px] text-[40px] lg:leading-[98px] mt-2",headSubText:"text-[#dfd9ff] font-medium lg:text-[30px] sm:text-[26px] xs:text-[20px] text-[16px] lg:leading-[40px]",paragraphHeadText:"text-white font-black md:text-[60px] sm:text-[50px] xs:text-[40px] text-[30px]",paragraphSubText:"sm:text-[18px] text-[14px] text-secondary uppercase tracking-wider",paragraphSubTextLower:"sm:text-[18px] text-[14px] text-secondary tracking-wider",dictionaryText:"text-black sm:text-[18px] text-[14px] tracking-wider uppercase mb-2",appointmentSubTextLower:"font-medium sm:text-[20px] text-[14px] text-secondary tracking-wide text-left"},Ei=(n,e,t,i)=>({hidden:{x:n==="left"||n==="right"?100:0,y:n==="top"||n==="bottom"?100:0,opacity:0},show:{x:0,y:0,opacity:1,transition:{type:e,delay:t,duration:i,ease:"easeOut"}}}),E_=n=>({hidden:{y:-50,opacity:0},show:{y:0,opacity:1,transition:{type:"spring",duration:1.25,delay:n}}}),GB=(n,e)=>({hidden:{},show:{transition:{staggerChildren:n,delayChildren:e||0}}}),Bt=(n,e)=>function(i){return d.jsxs(Pn.section,{variants:GB(),initial:"hidden",whileInView:"show",viewport:{once:!0,amount:.25},className:`${q.padding} max-w-7xl mx-auto relative z-0`,children:[d.jsxs("span",{className:"hash-span",id:e,children:[" "," "," "]}),d.jsx(n,{...i})]})},Ln=({children:n})=>(V.useEffect(()=>{window.scrollTo(0,0)},[]),d.jsx(d.Fragment,{children:n})),Ese=()=>{const{progress:n}=Nee();return d.jsxs(Aee,{as:"div",center:!0,style:{display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column"},children:[d.jsx("span",{className:"canvas-loader"}),d.jsxs("p",{style:{fontSize:14,color:"#F1F1F1",fontWeight:800,marginTop:40},children:[n.toFixed(2),"%"]})]})},WB=()=>d.jsx(l4,{children:d.jsx(Ese,{})});var qB={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},Pk=Qo.createContext&&Qo.createContext(qB),Cse=["attr","size","title"];function Ase(n,e){if(n==null)return{};var t=Mse(n,e),i,r;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);for(r=0;r<s.length;r++)i=s[r],!(e.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(n,i)&&(t[i]=n[i])}return t}function Mse(n,e){if(n==null)return{};var t={};for(var i in n)if(Object.prototype.hasOwnProperty.call(n,i)){if(e.indexOf(i)>=0)continue;t[i]=n[i]}return t}function C_(){return C_=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},C_.apply(this,arguments)}function Rk(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),t.push.apply(t,i)}return t}function A_(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Rk(Object(t),!0).forEach(function(i){Ise(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):Rk(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}function Ise(n,e,t){return e=Pse(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Pse(n){var e=Rse(n,"string");return typeof e=="symbol"?e:e+""}function Rse(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function $B(n){return n&&n.map((e,t)=>Qo.createElement(e.tag,A_({key:t},e.attr),$B(e.child)))}function vh(n){return e=>Qo.createElement(Nse,C_({attr:A_({},n.attr)},e),$B(n.child))}function Nse(n){var e=t=>{var{attr:i,size:r,title:s}=n,o=Ase(n,Cse),a=r||t.size||"1em",l;return t.className&&(l=t.className),n.className&&(l=(l?l+" ":"")+n.className),Qo.createElement("svg",C_({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,i,o,{className:l,style:A_(A_({color:n.color||t.color},t.style),n.style),height:a,width:a,xmlns:"http://www.w3.org/2000/svg"}),s&&Qo.createElement("title",null,s),n.children)};return Pk!==void 0?Qo.createElement(Pk.Consumer,null,t=>e(t)):e(qB)}function XB(n){return vh({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M634 471L36 3.51A16 16 0 0 0 13.51 6l-10 12.49A16 16 0 0 0 6 41l598 467.49a16 16 0 0 0 22.49-2.49l10-12.49A16 16 0 0 0 634 471zM296.79 146.47l134.79 105.38C429.36 191.91 380.48 144 320 144a112.26 112.26 0 0 0-23.21 2.47zm46.42 219.07L208.42 260.16C210.65 320.09 259.53 368 320 368a113 113 0 0 0 23.21-2.46zM320 112c98.65 0 189.09 55 237.93 144a285.53 285.53 0 0 1-44 60.2l37.74 29.5a333.7 333.7 0 0 0 52.9-75.11 32.35 32.35 0 0 0 0-29.19C550.29 135.59 442.93 64 320 64c-36.7 0-71.71 7-104.63 18.81l46.41 36.29c18.94-4.3 38.34-7.1 58.22-7.1zm0 288c-98.65 0-189.08-55-237.93-144a285.47 285.47 0 0 1 44.05-60.19l-37.74-29.5a333.6 333.6 0 0 0-52.89 75.1 32.35 32.35 0 0 0 0 29.19C89.72 376.41 197.08 448 320 448c36.7 0 71.71-7.05 104.63-18.81l-46.41-36.28C359.28 397.2 339.89 400 320 400z"},child:[]}]})(n)}function KB(n){return vh({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M288 144a110.94 110.94 0 0 0-31.24 5 55.4 55.4 0 0 1 7.24 27 56 56 0 0 1-56 56 55.4 55.4 0 0 1-27-7.24A111.71 111.71 0 1 0 288 144zm284.52 97.4C518.29 135.59 410.93 64 288 64S57.68 135.64 3.48 241.41a32.35 32.35 0 0 0 0 29.19C57.71 376.41 165.07 448 288 448s230.32-71.64 284.52-177.41a32.35 32.35 0 0 0 0-29.19zM288 400c-98.65 0-189.09-55-237.93-144C98.91 167 189.34 112 288 112s189.09 55 237.93 144C477.1 345 386.66 400 288 400z"},child:[]}]})(n)}const Dse="/assets/logoLandscape.png",Lse=()=>{};var Nk={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YB=function(n){const e=[];let t=0;for(let i=0;i<n.length;i++){let r=n.charCodeAt(i);r<128?e[t++]=r:r<2048?(e[t++]=r>>6|192,e[t++]=r&63|128):(r&64512)===55296&&i+1<n.length&&(n.charCodeAt(i+1)&64512)===56320?(r=65536+((r&1023)<<10)+(n.charCodeAt(++i)&1023),e[t++]=r>>18|240,e[t++]=r>>12&63|128,e[t++]=r>>6&63|128,e[t++]=r&63|128):(e[t++]=r>>12|224,e[t++]=r>>6&63|128,e[t++]=r&63|128)}return e},kse=function(n){const e=[];let t=0,i=0;for(;t<n.length;){const r=n[t++];if(r<128)e[i++]=String.fromCharCode(r);else if(r>191&&r<224){const s=n[t++];e[i++]=String.fromCharCode((r&31)<<6|s&63)}else if(r>239&&r<365){const s=n[t++],o=n[t++],a=n[t++],l=((r&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[i++]=String.fromCharCode(55296+(l>>10)),e[i++]=String.fromCharCode(56320+(l&1023))}else{const s=n[t++],o=n[t++];e[i++]=String.fromCharCode((r&15)<<12|(s&63)<<6|o&63)}}return e.join("")},JB={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let r=0;r<n.length;r+=3){const s=n[r],o=r+1<n.length,a=o?n[r+1]:0,l=r+2<n.length,c=l?n[r+2]:0,u=s>>2,f=(s&3)<<4|a>>4;let m=(a&15)<<2|c>>6,g=c&63;l||(g=64,o||(m=64)),i.push(t[u],t[f],t[m],t[g])}return i.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(YB(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):kse(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let r=0;r<n.length;){const s=t[n.charAt(r++)],a=r<n.length?t[n.charAt(r)]:0;++r;const c=r<n.length?t[n.charAt(r)]:64;++r;const f=r<n.length?t[n.charAt(r)]:64;if(++r,s==null||a==null||c==null||f==null)throw new Ose;const m=s<<2|a>>4;if(i.push(m),c!==64){const g=a<<4&240|c>>2;if(i.push(g),f!==64){const x=c<<6&192|f;i.push(x)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class Ose extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Use=function(n){const e=YB(n);return JB.encodeByteArray(e,!0)},M_=function(n){return Use(n).replace(/\./g,"")},QB=function(n){try{return JB.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fse(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jse=()=>Fse().__FIREBASE_DEFAULTS__,Vse=()=>{if(typeof process>"u"||typeof Nk>"u")return;const n=Nk.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},Bse=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&QB(n[1]);return e&&JSON.parse(e)},Qw=()=>{try{return Lse()||jse()||Vse()||Bse()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},ZB=n=>{var e,t;return(t=(e=Qw())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},zse=n=>{const e=ZB(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),i]:[e.substring(0,t),i]},ez=()=>{var n;return(n=Qw())===null||n===void 0?void 0:n.config},tz=n=>{var e;return(e=Qw())===null||e===void 0?void 0:e[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hse{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,i)=>{t?this.reject(t):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,i))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gse(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},i=e||"demo-project",r=n.iat||0,s=n.sub||n.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:r,exp:r+3600,auth_time:r,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},n);return[M_(JSON.stringify(t)),M_(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vr(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Wse(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Vr())}function qse(){var n;const e=(n=Qw())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function $se(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function Xse(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function Kse(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Yse(){const n=Vr();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function Jse(){return!qse()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Qse(){try{return typeof indexedDB=="object"}catch{return!1}}function Zse(){return new Promise((n,e)=>{try{let t=!0;const i="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(i);r.onsuccess=()=>{r.result.close(),t||self.indexedDB.deleteDatabase(i),n(!0)},r.onupgradeneeded=()=>{t=!1},r.onerror=()=>{var s;e(((s=r.error)===null||s===void 0?void 0:s.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eoe="FirebaseError";class sl extends Error{constructor(e,t,i){super(t),this.code=e,this.customData=i,this.name=eoe,Object.setPrototypeOf(this,sl.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ay.prototype.create)}}class ay{constructor(e,t,i){this.service=e,this.serviceName=t,this.errors=i}create(e,...t){const i=t[0]||{},r=`${this.service}/${e}`,s=this.errors[e],o=s?toe(s,i):"Error",a=`${this.serviceName}: ${o} (${r}).`;return new sl(r,a,i)}}function toe(n,e){return n.replace(noe,(t,i)=>{const r=e[i];return r!=null?String(r):`<${i}?>`})}const noe=/\{\$([^}]+)}/g;function ioe(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function ih(n,e){if(n===e)return!0;const t=Object.keys(n),i=Object.keys(e);for(const r of t){if(!i.includes(r))return!1;const s=n[r],o=e[r];if(Dk(s)&&Dk(o)){if(!ih(s,o))return!1}else if(s!==o)return!1}for(const r of i)if(!t.includes(r))return!1;return!0}function Dk(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ly(n){const e=[];for(const[t,i]of Object.entries(n))Array.isArray(i)?i.forEach(r=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(r))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function Qp(n){const e={};return n.replace(/^\?/,"").split("&").forEach(i=>{if(i){const[r,s]=i.split("=");e[decodeURIComponent(r)]=decodeURIComponent(s)}}),e}function Zp(n){const e=n.indexOf("?");if(!e)return"";const t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function roe(n,e){const t=new soe(n,e);return t.subscribe.bind(t)}class soe{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,i){let r;if(e===void 0&&t===void 0&&i===void 0)throw new Error("Missing Observer.");ooe(e,["next","error","complete"])?r=e:r={next:e,error:t,complete:i},r.next===void 0&&(r.next=tE),r.error===void 0&&(r.error=tE),r.complete===void 0&&(r.complete=tE);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch{}}),this.observers.push(r),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function ooe(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function tE(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sr(n){return n&&n._delegate?n._delegate:n}class rh{constructor(e,t,i){this.name=e,this.instanceFactory=t,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wu="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aoe{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const i=new Hse;if(this.instancesDeferred.set(t,i),this.isInitialized(t)||this.shouldAutoInitialize())try{const r=this.getOrInitializeService({instanceIdentifier:t});r&&i.resolve(r)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const i=this.normalizeInstanceIdentifier(e?.identifier),r=(t=e?.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(s){if(r)return null;throw s}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(coe(e))try{this.getOrInitializeService({instanceIdentifier:wu})}catch{}for(const[t,i]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(t);try{const s=this.getOrInitializeService({instanceIdentifier:r});i.resolve(s)}catch{}}}}clearInstance(e=wu){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=wu){return this.instances.has(e)}getOptions(e=wu){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:i,options:t});for(const[s,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(s);i===a&&o.resolve(r)}return r}onInit(e,t){var i;const r=this.normalizeInstanceIdentifier(t),s=(i=this.onInitCallbacks.get(r))!==null&&i!==void 0?i:new Set;s.add(e),this.onInitCallbacks.set(r,s);const o=this.instances.get(r);return o&&e(o,r),()=>{s.delete(e)}}invokeOnInitCallbacks(e,t){const i=this.onInitCallbacks.get(t);if(i)for(const r of i)try{r(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:loe(e),options:t}),this.instances.set(e,i),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=wu){return this.component?this.component.multipleInstances?e:wu:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function loe(n){return n===wu?void 0:n}function coe(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uoe{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new aoe(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var vn;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(vn||(vn={}));const hoe={debug:vn.DEBUG,verbose:vn.VERBOSE,info:vn.INFO,warn:vn.WARN,error:vn.ERROR,silent:vn.SILENT},doe=vn.INFO,foe={[vn.DEBUG]:"log",[vn.VERBOSE]:"log",[vn.INFO]:"info",[vn.WARN]:"warn",[vn.ERROR]:"error"},poe=(n,e,...t)=>{if(e<n.logLevel)return;const i=new Date().toISOString(),r=foe[e];if(r)console[r](`[${i}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class XM{constructor(e){this.name=e,this._logLevel=doe,this._logHandler=poe,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in vn))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?hoe[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,vn.DEBUG,...e),this._logHandler(this,vn.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,vn.VERBOSE,...e),this._logHandler(this,vn.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,vn.INFO,...e),this._logHandler(this,vn.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,vn.WARN,...e),this._logHandler(this,vn.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,vn.ERROR,...e),this._logHandler(this,vn.ERROR,...e)}}const moe=(n,e)=>e.some(t=>n instanceof t);let Lk,kk;function goe(){return Lk||(Lk=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function yoe(){return kk||(kk=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const nz=new WeakMap,G1=new WeakMap,iz=new WeakMap,nE=new WeakMap,KM=new WeakMap;function voe(n){const e=new Promise((t,i)=>{const r=()=>{n.removeEventListener("success",s),n.removeEventListener("error",o)},s=()=>{t(nc(n.result)),r()},o=()=>{i(n.error),r()};n.addEventListener("success",s),n.addEventListener("error",o)});return e.then(t=>{t instanceof IDBCursor&&nz.set(t,n)}).catch(()=>{}),KM.set(e,n),e}function xoe(n){if(G1.has(n))return;const e=new Promise((t,i)=>{const r=()=>{n.removeEventListener("complete",s),n.removeEventListener("error",o),n.removeEventListener("abort",o)},s=()=>{t(),r()},o=()=>{i(n.error||new DOMException("AbortError","AbortError")),r()};n.addEventListener("complete",s),n.addEventListener("error",o),n.addEventListener("abort",o)});G1.set(n,e)}let W1={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return G1.get(n);if(e==="objectStoreNames")return n.objectStoreNames||iz.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return nc(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function _oe(n){W1=n(W1)}function woe(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const i=n.call(iE(this),e,...t);return iz.set(i,e.sort?e.sort():[e]),nc(i)}:yoe().includes(n)?function(...e){return n.apply(iE(this),e),nc(nz.get(this))}:function(...e){return nc(n.apply(iE(this),e))}}function boe(n){return typeof n=="function"?woe(n):(n instanceof IDBTransaction&&xoe(n),moe(n,goe())?new Proxy(n,W1):n)}function nc(n){if(n instanceof IDBRequest)return voe(n);if(nE.has(n))return nE.get(n);const e=boe(n);return e!==n&&(nE.set(n,e),KM.set(e,n)),e}const iE=n=>KM.get(n);function Soe(n,e,{blocked:t,upgrade:i,blocking:r,terminated:s}={}){const o=indexedDB.open(n,e),a=nc(o);return i&&o.addEventListener("upgradeneeded",l=>{i(nc(o.result),l.oldVersion,l.newVersion,nc(o.transaction),l)}),t&&o.addEventListener("blocked",l=>t(l.oldVersion,l.newVersion,l)),a.then(l=>{s&&l.addEventListener("close",()=>s()),r&&l.addEventListener("versionchange",c=>r(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}const Toe=["get","getKey","getAll","getAllKeys","count"],Eoe=["put","add","delete","clear"],rE=new Map;function Ok(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(rE.get(e))return rE.get(e);const t=e.replace(/FromIndex$/,""),i=e!==t,r=Eoe.includes(t);if(!(t in(i?IDBIndex:IDBObjectStore).prototype)||!(r||Toe.includes(t)))return;const s=async function(o,...a){const l=this.transaction(o,r?"readwrite":"readonly");let c=l.store;return i&&(c=c.index(a.shift())),(await Promise.all([c[t](...a),r&&l.done]))[0]};return rE.set(e,s),s}_oe(n=>({...n,get:(e,t,i)=>Ok(e,t)||n.get(e,t,i),has:(e,t)=>!!Ok(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Coe{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(Aoe(t)){const i=t.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(t=>t).join(" ")}}function Aoe(n){const e=n.getComponent();return e?.type==="VERSION"}const q1="@firebase/app",Uk="0.11.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const el=new XM("@firebase/app"),Moe="@firebase/app-compat",Ioe="@firebase/analytics-compat",Poe="@firebase/analytics",Roe="@firebase/app-check-compat",Noe="@firebase/app-check",Doe="@firebase/auth",Loe="@firebase/auth-compat",koe="@firebase/database",Ooe="@firebase/data-connect",Uoe="@firebase/database-compat",Foe="@firebase/functions",joe="@firebase/functions-compat",Voe="@firebase/installations",Boe="@firebase/installations-compat",zoe="@firebase/messaging",Hoe="@firebase/messaging-compat",Goe="@firebase/performance",Woe="@firebase/performance-compat",qoe="@firebase/remote-config",$oe="@firebase/remote-config-compat",Xoe="@firebase/storage",Koe="@firebase/storage-compat",Yoe="@firebase/firestore",Joe="@firebase/vertexai",Qoe="@firebase/firestore-compat",Zoe="firebase",eae="11.4.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $1="[DEFAULT]",tae={[q1]:"fire-core",[Moe]:"fire-core-compat",[Poe]:"fire-analytics",[Ioe]:"fire-analytics-compat",[Noe]:"fire-app-check",[Roe]:"fire-app-check-compat",[Doe]:"fire-auth",[Loe]:"fire-auth-compat",[koe]:"fire-rtdb",[Ooe]:"fire-data-connect",[Uoe]:"fire-rtdb-compat",[Foe]:"fire-fn",[joe]:"fire-fn-compat",[Voe]:"fire-iid",[Boe]:"fire-iid-compat",[zoe]:"fire-fcm",[Hoe]:"fire-fcm-compat",[Goe]:"fire-perf",[Woe]:"fire-perf-compat",[qoe]:"fire-rc",[$oe]:"fire-rc-compat",[Xoe]:"fire-gcs",[Koe]:"fire-gcs-compat",[Yoe]:"fire-fst",[Qoe]:"fire-fst-compat",[Joe]:"fire-vertex","fire-js":"fire-js",[Zoe]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I_=new Map,nae=new Map,X1=new Map;function Fk(n,e){try{n.container.addComponent(e)}catch(t){el.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function gf(n){const e=n.name;if(X1.has(e))return el.debug(`There were multiple attempts to register component ${e}.`),!1;X1.set(e,n);for(const t of I_.values())Fk(t,n);for(const t of nae.values())Fk(t,n);return!0}function YM(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function oo(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iae={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},ic=new ay("app","Firebase",iae);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rae{constructor(e,t,i){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new rh("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw ic.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Of=eae;function rz(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const i=Object.assign({name:$1,automaticDataCollectionEnabled:!1},e),r=i.name;if(typeof r!="string"||!r)throw ic.create("bad-app-name",{appName:String(r)});if(t||(t=ez()),!t)throw ic.create("no-options");const s=I_.get(r);if(s){if(ih(t,s.options)&&ih(i,s.config))return s;throw ic.create("duplicate-app",{appName:r})}const o=new uoe(r);for(const l of X1.values())o.addComponent(l);const a=new rae(t,i,o);return I_.set(r,a),a}function sz(n=$1){const e=I_.get(n);if(!e&&n===$1&&ez())return rz();if(!e)throw ic.create("no-app",{appName:n});return e}function rc(n,e,t){var i;let r=(i=tae[n])!==null&&i!==void 0?i:n;t&&(r+=`-${t}`);const s=r.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const a=[`Unable to register library "${r}" with version "${e}":`];s&&a.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),el.warn(a.join(" "));return}gf(new rh(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sae="firebase-heartbeat-database",oae=1,Eg="firebase-heartbeat-store";let sE=null;function oz(){return sE||(sE=Soe(sae,oae,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(Eg)}catch(t){console.warn(t)}}}}).catch(n=>{throw ic.create("idb-open",{originalErrorMessage:n.message})})),sE}async function aae(n){try{const t=(await oz()).transaction(Eg),i=await t.objectStore(Eg).get(az(n));return await t.done,i}catch(e){if(e instanceof sl)el.warn(e.message);else{const t=ic.create("idb-get",{originalErrorMessage:e?.message});el.warn(t.message)}}}async function jk(n,e){try{const i=(await oz()).transaction(Eg,"readwrite");await i.objectStore(Eg).put(e,az(n)),await i.done}catch(t){if(t instanceof sl)el.warn(t.message);else{const i=ic.create("idb-set",{originalErrorMessage:t?.message});el.warn(i.message)}}}function az(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lae=1024,cae=30;class uae{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new dae(t),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,t;try{const r=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=Vk();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:r}),this._heartbeatsCache.heartbeats.length>cae){const o=fae(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(i){el.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=Vk(),{heartbeatsToSend:i,unsentEntries:r}=hae(this._heartbeatsCache.heartbeats),s=M_(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(t){return el.warn(t),""}}}function Vk(){return new Date().toISOString().substring(0,10)}function hae(n,e=lae){const t=[];let i=n.slice();for(const r of n){const s=t.find(o=>o.agent===r.agent);if(s){if(s.dates.push(r.date),Bk(t)>e){s.dates.pop();break}}else if(t.push({agent:r.agent,dates:[r.date]}),Bk(t)>e){t.pop();break}i=i.slice(1)}return{heartbeatsToSend:t,unsentEntries:i}}class dae{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Qse()?Zse().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await aae(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const r=await this.read();return jk(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const r=await this.read();return jk(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function Bk(n){return M_(JSON.stringify({version:2,heartbeats:n})).length}function fae(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let i=1;i<n.length;i++)n[i].date<t&&(t=n[i].date,e=i);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pae(n){gf(new rh("platform-logger",e=>new Coe(e),"PRIVATE")),gf(new rh("heartbeat",e=>new uae(e),"PRIVATE")),rc(q1,Uk,n),rc(q1,Uk,"esm2017"),rc("fire-js","")}pae("");var mae="firebase",gae="11.4.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */rc(mae,gae,"app");function JM(n,e){var t={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(t[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(n);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(n,i[r])&&(t[i[r]]=n[i[r]]);return t}function lz(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const yae=lz,cz=new ay("auth","Firebase",lz());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const P_=new XM("@firebase/auth");function vae(n,...e){P_.logLevel<=vn.WARN&&P_.warn(`Auth (${Of}): ${n}`,...e)}function Kx(n,...e){P_.logLevel<=vn.ERROR&&P_.error(`Auth (${Of}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Oo(n,...e){throw QM(n,...e)}function oa(n,...e){return QM(n,...e)}function uz(n,e,t){const i=Object.assign(Object.assign({},yae()),{[e]:t});return new ay("auth","Firebase",i).create(e,{appName:n.name})}function Ha(n){return uz(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function QM(n,...e){if(typeof n!="string"){const t=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=n.name),n._errorFactory.create(t,...i)}return cz.create(n,...e)}function jt(n,e,...t){if(!n)throw QM(e,...t)}function La(n){const e="INTERNAL ASSERTION FAILED: "+n;throw Kx(e),new Error(e)}function tl(n,e){n||La(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function K1(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function xae(){return zk()==="http:"||zk()==="https:"}function zk(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _ae(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(xae()||Xse()||"connection"in navigator)?navigator.onLine:!0}function wae(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cy{constructor(e,t){this.shortDelay=e,this.longDelay=t,tl(t>e,"Short delay should be less than long delay!"),this.isMobile=Wse()||Kse()}get(){return _ae()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZM(n,e){tl(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hz{static initialize(e,t,i){this.fetchImpl=e,t&&(this.headersImpl=t),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;La("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;La("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;La("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bae={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sae=new cy(3e4,6e4);function ol(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}async function al(n,e,t,i,r={}){return dz(n,r,async()=>{let s={},o={};i&&(e==="GET"?o=i:s={body:JSON.stringify(i)});const a=ly(Object.assign({key:n.config.apiKey},o)).slice(1),l=await n._getAdditionalHeaders();l["Content-Type"]="application/json",n.languageCode&&(l["X-Firebase-Locale"]=n.languageCode);const c=Object.assign({method:e,headers:l},s);return $se()||(c.referrerPolicy="no-referrer"),hz.fetch()(fz(n,n.config.apiHost,t,a),c)})}async function dz(n,e,t){n._canInitEmulator=!1;const i=Object.assign(Object.assign({},bae),e);try{const r=new Eae(n),s=await Promise.race([t(),r.promise]);r.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw vx(n,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const a=s.ok?o.errorMessage:o.error.message,[l,c]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw vx(n,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw vx(n,"email-already-in-use",o);if(l==="USER_DISABLED")throw vx(n,"user-disabled",o);const u=i[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw uz(n,u,c);Oo(n,u)}}catch(r){if(r instanceof sl)throw r;Oo(n,"network-request-failed",{message:String(r)})}}async function uy(n,e,t,i,r={}){const s=await al(n,e,t,i,r);return"mfaPendingCredential"in s&&Oo(n,"multi-factor-auth-required",{_serverResponse:s}),s}function fz(n,e,t,i){const r=`${e}${t}?${i}`;return n.config.emulator?ZM(n.config,r):`${n.config.apiScheme}://${r}`}function Tae(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class Eae{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,i)=>{this.timer=setTimeout(()=>i(oa(this.auth,"network-request-failed")),Sae.get())})}}function vx(n,e,t){const i={appName:n.name};t.email&&(i.email=t.email),t.phoneNumber&&(i.phoneNumber=t.phoneNumber);const r=oa(n,e,i);return r.customData._tokenResponse=t,r}function Hk(n){return n!==void 0&&n.enterprise!==void 0}class Cae{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return Tae(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function Aae(n,e){return al(n,"GET","/v2/recaptchaConfig",ol(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Mae(n,e){return al(n,"POST","/v1/accounts:delete",e)}async function pz(n,e){return al(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mm(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function Iae(n,e=!1){const t=sr(n),i=await t.getIdToken(e),r=eI(i);jt(r&&r.exp&&r.auth_time&&r.iat,t.auth,"internal-error");const s=typeof r.firebase=="object"?r.firebase:void 0,o=s?.sign_in_provider;return{claims:r,token:i,authTime:Mm(oE(r.auth_time)),issuedAtTime:Mm(oE(r.iat)),expirationTime:Mm(oE(r.exp)),signInProvider:o||null,signInSecondFactor:s?.sign_in_second_factor||null}}function oE(n){return Number(n)*1e3}function eI(n){const[e,t,i]=n.split(".");if(e===void 0||t===void 0||i===void 0)return Kx("JWT malformed, contained fewer than 3 sections"),null;try{const r=QB(t);return r?JSON.parse(r):(Kx("Failed to decode base64 JWT payload"),null)}catch(r){return Kx("Caught error parsing JWT payload as JSON",r?.toString()),null}}function Gk(n){const e=eI(n);return jt(e,"internal-error"),jt(typeof e.exp<"u","internal-error"),jt(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Cg(n,e,t=!1){if(t)return e;try{return await e}catch(i){throw i instanceof sl&&Pae(i)&&n.auth.currentUser===n&&await n.auth.signOut(),i}}function Pae({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rae{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const i=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),i}else{this.errorBackoff=3e4;const r=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Y1{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Mm(this.lastLoginAt),this.creationTime=Mm(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function R_(n){var e;const t=n.auth,i=await n.getIdToken(),r=await Cg(n,pz(t,{idToken:i}));jt(r?.users.length,t,"internal-error");const s=r.users[0];n._notifyReloadListener(s);const o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?mz(s.providerUserInfo):[],a=Dae(n.providerData,o),l=n.isAnonymous,c=!(n.email&&s.passwordHash)&&!a?.length,u=l?c:!1,f={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new Y1(s.createdAt,s.lastLoginAt),isAnonymous:u};Object.assign(n,f)}async function Nae(n){const e=sr(n);await R_(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function Dae(n,e){return[...n.filter(i=>!e.some(r=>r.providerId===i.providerId)),...e]}function mz(n){return n.map(e=>{var{providerId:t}=e,i=JM(e,["providerId"]);return{providerId:t,uid:i.rawId||"",displayName:i.displayName||null,email:i.email||null,phoneNumber:i.phoneNumber||null,photoURL:i.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Lae(n,e){const t=await dz(n,{},async()=>{const i=ly({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:r,apiKey:s}=n.config,o=fz(n,r,"/v1/token",`key=${s}`),a=await n._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",hz.fetch()(o,{method:"POST",headers:a,body:i})});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function kae(n,e){return al(n,"POST","/v2/accounts:revokeToken",ol(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kd{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){jt(e.idToken,"internal-error"),jt(typeof e.idToken<"u","internal-error"),jt(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Gk(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){jt(e.length!==0,"internal-error");const t=Gk(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(jt(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:i,refreshToken:r,expiresIn:s}=await Lae(e,t);this.updateTokensAndExpiration(i,r,Number(s))}updateTokensAndExpiration(e,t,i){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,t){const{refreshToken:i,accessToken:r,expirationTime:s}=t,o=new Kd;return i&&(jt(typeof i=="string","internal-error",{appName:e}),o.refreshToken=i),r&&(jt(typeof r=="string","internal-error",{appName:e}),o.accessToken=r),s&&(jt(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Kd,this.toJSON())}_performRefresh(){return La("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function El(n,e){jt(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class ka{constructor(e){var{uid:t,auth:i,stsTokenManager:r}=e,s=JM(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Rae(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=i,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new Y1(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const t=await Cg(this,this.stsTokenManager.getToken(this.auth,e));return jt(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return Iae(this,e)}reload(){return Nae(this)}_assign(e){this!==e&&(jt(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new ka(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){jt(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),t&&await R_(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(oo(this.auth.app))return Promise.reject(Ha(this.auth));const e=await this.getIdToken();return await Cg(this,Mae(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var i,r,s,o,a,l,c,u;const f=(i=t.displayName)!==null&&i!==void 0?i:void 0,m=(r=t.email)!==null&&r!==void 0?r:void 0,g=(s=t.phoneNumber)!==null&&s!==void 0?s:void 0,x=(o=t.photoURL)!==null&&o!==void 0?o:void 0,b=(a=t.tenantId)!==null&&a!==void 0?a:void 0,w=(l=t._redirectEventId)!==null&&l!==void 0?l:void 0,v=(c=t.createdAt)!==null&&c!==void 0?c:void 0,S=(u=t.lastLoginAt)!==null&&u!==void 0?u:void 0,{uid:E,emailVerified:I,isAnonymous:U,providerData:O,stsTokenManager:C}=t;jt(E&&C,e,"internal-error");const P=Kd.fromJSON(this.name,C);jt(typeof E=="string",e,"internal-error"),El(f,e.name),El(m,e.name),jt(typeof I=="boolean",e,"internal-error"),jt(typeof U=="boolean",e,"internal-error"),El(g,e.name),El(x,e.name),El(b,e.name),El(w,e.name),El(v,e.name),El(S,e.name);const M=new ka({uid:E,auth:e,email:m,emailVerified:I,displayName:f,isAnonymous:U,photoURL:x,phoneNumber:g,tenantId:b,stsTokenManager:P,createdAt:v,lastLoginAt:S});return O&&Array.isArray(O)&&(M.providerData=O.map(A=>Object.assign({},A))),w&&(M._redirectEventId=w),M}static async _fromIdTokenResponse(e,t,i=!1){const r=new Kd;r.updateFromServerResponse(t);const s=new ka({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:i});return await R_(s),s}static async _fromGetAccountInfoResponse(e,t,i){const r=t.users[0];jt(r.localId!==void 0,"internal-error");const s=r.providerUserInfo!==void 0?mz(r.providerUserInfo):[],o=!(r.email&&r.passwordHash)&&!s?.length,a=new Kd;a.updateFromIdToken(i);const l=new ka({uid:r.localId,auth:e,stsTokenManager:a,isAnonymous:o}),c={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:s,metadata:new Y1(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!s?.length};return Object.assign(l,c),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Wk=new Map;function Oa(n){tl(n instanceof Function,"Expected a class definition");let e=Wk.get(n);return e?(tl(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,Wk.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gz{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}gz.type="NONE";const qk=gz;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Yx(n,e,t){return`firebase:${n}:${e}:${t}`}class Yd{constructor(e,t,i){this.persistence=e,this.auth=t,this.userKey=i;const{config:r,name:s}=this.auth;this.fullUserKey=Yx(this.userKey,r.apiKey,s),this.fullPersistenceKey=Yx("persistence",r.apiKey,s),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?ka._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,i="authUser"){if(!t.length)return new Yd(Oa(qk),e,i);const r=(await Promise.all(t.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let s=r[0]||Oa(qk);const o=Yx(i,e.config.apiKey,e.name);let a=null;for(const c of t)try{const u=await c._get(o);if(u){const f=ka._fromJSON(e,u);c!==s&&(a=f),s=c;break}}catch{}const l=r.filter(c=>c._shouldAllowMigration);return!s._shouldAllowMigration||!l.length?new Yd(s,e,i):(s=l[0],a&&await s._set(o,a.toJSON()),await Promise.all(t.map(async c=>{if(c!==s)try{await c._remove(o)}catch{}})),new Yd(s,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $k(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(_z(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(yz(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(bz(e))return"Blackberry";if(Sz(e))return"Webos";if(vz(e))return"Safari";if((e.includes("chrome/")||xz(e))&&!e.includes("edge/"))return"Chrome";if(wz(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=n.match(t);if(i?.length===2)return i[1]}return"Other"}function yz(n=Vr()){return/firefox\//i.test(n)}function vz(n=Vr()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function xz(n=Vr()){return/crios\//i.test(n)}function _z(n=Vr()){return/iemobile/i.test(n)}function wz(n=Vr()){return/android/i.test(n)}function bz(n=Vr()){return/blackberry/i.test(n)}function Sz(n=Vr()){return/webos/i.test(n)}function tI(n=Vr()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function Oae(n=Vr()){var e;return tI(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function Uae(){return Yse()&&document.documentMode===10}function Tz(n=Vr()){return tI(n)||wz(n)||Sz(n)||bz(n)||/windows phone/i.test(n)||_z(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ez(n,e=[]){let t;switch(n){case"Browser":t=$k(Vr());break;case"Worker":t=`${$k(Vr())}-${n}`;break;default:t=n}const i=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Of}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fae{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const i=s=>new Promise((o,a)=>{try{const l=e(s);o(l)}catch(l){a(l)}});i.onAbort=t,this.queue.push(i);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const i of this.queue)await i(e),i.onAbort&&t.push(i.onAbort)}catch(i){t.reverse();for(const r of t)try{r()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i?.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jae(n,e={}){return al(n,"GET","/v2/passwordPolicy",ol(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vae=6;class Bae{constructor(e){var t,i,r,s;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=o.minPasswordLength)!==null&&t!==void 0?t:Vae,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(r=(i=e.allowedNonAlphanumericCharacters)===null||i===void 0?void 0:i.join(""))!==null&&r!==void 0?r:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,i,r,s,o,a;const l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,l),this.validatePasswordCharacterOptions(e,l),l.isValid&&(l.isValid=(t=l.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),l.isValid&&(l.isValid=(i=l.meetsMaxPasswordLength)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(r=l.containsLowercaseLetter)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(s=l.containsUppercaseLetter)!==null&&s!==void 0?s:!0),l.isValid&&(l.isValid=(o=l.containsNumericCharacter)!==null&&o!==void 0?o:!0),l.isValid&&(l.isValid=(a=l.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),l}validatePasswordLengthOptions(e,t){const i=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;i&&(t.meetsMinPasswordLength=e.length>=i),r&&(t.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let i;for(let r=0;r<e.length;r++)i=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(t,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,t,i,r,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zae{constructor(e,t,i,r){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=i,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Xk(this),this.idTokenSubscription=new Xk(this),this.beforeStateQueue=new Fae(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=cz,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=Oa(t)),this._initializationPromise=this.queue(async()=>{var i,r;if(!this._deleted&&(this.persistenceManager=await Yd.create(this,e),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((r=this.currentUser)===null||r===void 0?void 0:r.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await pz(this,{idToken:e}),i=await ka._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(i)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(oo(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const i=await this.assertedPersistence.getCurrentUser();let r=i,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,a=r?._redirectEventId,l=await this.tryRedirectSignIn(e);(!o||o===a)&&l?.user&&(r=l.user,s=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(r)}catch(o){r=i,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return jt(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await R_(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=wae()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(oo(this.app))return Promise.reject(Ha(this));const t=e?sr(e):null;return t&&jt(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&jt(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return oo(this.app)?Promise.reject(Ha(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return oo(this.app)?Promise.reject(Ha(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(Oa(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await jae(this),t=new Bae(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new ay("auth","Firebase",e())}onAuthStateChanged(e,t,i){return this.registerStateListener(this.authStateSubscription,e,t,i)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,i){return this.registerStateListener(this.idTokenSubscription,e,t,i)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(i.tenantId=this.tenantId),await kae(this,i)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){const i=await this.getOrInitRedirectPersistenceManager(t);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&Oa(e)||this._popupRedirectResolver;jt(t,this,"argument-error"),this.redirectPersistenceManager=await Yd.create(this,[Oa(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,i;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((i=this.redirectUser)===null||i===void 0?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const i=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==i&&(this.lastNotifiedUid=i,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,i,r){if(this._deleted)return()=>{};const s=typeof t=="function"?t:t.next.bind(t);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(jt(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof t=="function"){const l=e.addObserver(t,i,r);return()=>{o=!0,l()}}else{const l=e.addObserver(t);return()=>{o=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return jt(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Ez(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const i=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());i&&(t["X-Firebase-Client"]=i);const r=await this._getAppCheckToken();return r&&(t["X-Firebase-AppCheck"]=r),t}async _getAppCheckToken(){var e;if(oo(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t?.error&&vae(`Error while retrieving App Check token: ${t.error}`),t?.token}}function Dc(n){return sr(n)}class Xk{constructor(e){this.auth=e,this.observer=null,this.addObserver=roe(t=>this.observer=t)}get next(){return jt(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Zw={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function Hae(n){Zw=n}function Cz(n){return Zw.loadJS(n)}function Gae(){return Zw.recaptchaEnterpriseScript}function Wae(){return Zw.gapiScript}function qae(n){return`__${n}${Math.floor(Math.random()*1e6)}`}class $ae{constructor(){this.enterprise=new Xae}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class Xae{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const Kae="recaptcha-enterprise",Az="NO_RECAPTCHA";class Yae{constructor(e){this.type=Kae,this.auth=Dc(e)}async verify(e="verify",t=!1){async function i(s){if(!t){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise(async(o,a)=>{Aae(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{const c=new Cae(l);return s.tenantId==null?s._agentRecaptchaConfig=c:s._tenantRecaptchaConfigs[s.tenantId]=c,o(c.siteKey)}}).catch(l=>{a(l)})})}function r(s,o,a){const l=window.grecaptcha;Hk(l)?l.enterprise.ready(()=>{l.enterprise.execute(s,{action:e}).then(c=>{o(c)}).catch(()=>{o(Az)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new $ae().execute("siteKey",{action:"verify"}):new Promise((s,o)=>{i(this.auth).then(a=>{if(!t&&Hk(window.grecaptcha))r(a,s,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let l=Gae();l.length!==0&&(l+=a),Cz(l).then(()=>{r(a,s,o)}).catch(c=>{o(c)})}}).catch(a=>{o(a)})})}}async function Kk(n,e,t,i=!1,r=!1){const s=new Yae(n);let o;if(r)o=Az;else try{o=await s.verify(t)}catch{o=await s.verify(t,!0)}const a=Object.assign({},e);if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in a){const l=a.phoneEnrollmentInfo.phoneNumber,c=a.phoneEnrollmentInfo.recaptchaToken;Object.assign(a,{phoneEnrollmentInfo:{phoneNumber:l,recaptchaToken:c,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in a){const l=a.phoneSignInInfo.recaptchaToken;Object.assign(a,{phoneSignInInfo:{recaptchaToken:l,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return a}return i?Object.assign(a,{captchaResp:o}):Object.assign(a,{captchaResponse:o}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a}async function N_(n,e,t,i,r){var s;if(!((s=n._getRecaptchaConfig())===null||s===void 0)&&s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const o=await Kk(n,e,t,t==="getOobCode");return i(n,o)}else return i(n,e).catch(async o=>{if(o.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const a=await Kk(n,e,t,t==="getOobCode");return i(n,a)}else return Promise.reject(o)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jae(n,e){const t=YM(n,"auth");if(t.isInitialized()){const r=t.getImmediate(),s=t.getOptions();if(ih(s,e??{}))return r;Oo(r,"already-initialized")}return t.initialize({options:e})}function Qae(n,e){const t=e?.persistence||[],i=(Array.isArray(t)?t:[t]).map(Oa);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(i,e?.popupRedirectResolver)}function Zae(n,e,t){const i=Dc(n);jt(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const r=!1,s=Mz(e),{host:o,port:a}=ele(e),l=a===null?"":`:${a}`,c={url:`${s}//${o}${l}/`},u=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:r})});if(!i._canInitEmulator){jt(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),jt(ih(c,i.config.emulator)&&ih(u,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=c,i.emulatorConfig=u,i.settings.appVerificationDisabledForTesting=!0,tle()}function Mz(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function ele(n){const e=Mz(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const i=t[2].split("@").pop()||"",r=/^(\[[^\]]+\])(:|$)/.exec(i);if(r){const s=r[1];return{host:s,port:Yk(i.substr(s.length+1))}}else{const[s,o]=i.split(":");return{host:s,port:Yk(o)}}}function Yk(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function tle(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nI{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return La("not implemented")}_getIdTokenResponse(e){return La("not implemented")}_linkToIdToken(e,t){return La("not implemented")}_getReauthenticationResolver(e){return La("not implemented")}}async function nle(n,e){return al(n,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ile(n,e){return uy(n,"POST","/v1/accounts:signInWithPassword",ol(n,e))}async function rle(n,e){return al(n,"POST","/v1/accounts:sendOobCode",ol(n,e))}async function sle(n,e){return rle(n,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ole(n,e){return uy(n,"POST","/v1/accounts:signInWithEmailLink",ol(n,e))}async function ale(n,e){return uy(n,"POST","/v1/accounts:signInWithEmailLink",ol(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ag extends nI{constructor(e,t,i,r=null){super("password",i),this._email=e,this._password=t,this._tenantId=r}static _fromEmailAndPassword(e,t){return new Ag(e,t,"password")}static _fromEmailAndCode(e,t,i=null){return new Ag(e,t,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t?.email&&t?.password){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return N_(e,t,"signInWithPassword",ile);case"emailLink":return ole(e,{email:this._email,oobCode:this._password});default:Oo(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const i={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return N_(e,i,"signUpPassword",nle);case"emailLink":return ale(e,{idToken:t,email:this._email,oobCode:this._password});default:Oo(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Jd(n,e){return uy(n,"POST","/v1/accounts:signInWithIdp",ol(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lle="http://localhost";class sh extends nI{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new sh(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Oo("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:r}=t,s=JM(t,["providerId","signInMethod"]);if(!i||!r)return null;const o=new sh(i,r);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){const t=this.buildRequest();return Jd(e,t)}_linkToIdToken(e,t){const i=this.buildRequest();return i.idToken=t,Jd(e,i)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Jd(e,t)}buildRequest(){const e={requestUri:lle,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=ly(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cle(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function ule(n){const e=Qp(Zp(n)).link,t=e?Qp(Zp(e)).deep_link_id:null,i=Qp(Zp(n)).deep_link_id;return(i?Qp(Zp(i)).link:null)||i||t||e||n}class iI{constructor(e){var t,i,r,s,o,a;const l=Qp(Zp(e)),c=(t=l.apiKey)!==null&&t!==void 0?t:null,u=(i=l.oobCode)!==null&&i!==void 0?i:null,f=cle((r=l.mode)!==null&&r!==void 0?r:null);jt(c&&u&&f,"argument-error"),this.apiKey=c,this.operation=f,this.code=u,this.continueUrl=(s=l.continueUrl)!==null&&s!==void 0?s:null,this.languageCode=(o=l.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(a=l.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){const t=ule(e);try{return new iI(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uf{constructor(){this.providerId=Uf.PROVIDER_ID}static credential(e,t){return Ag._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const i=iI.parseLink(t);return jt(i,"argument-error"),Ag._fromEmailAndCode(e,i.code,i.tenantId)}}Uf.PROVIDER_ID="password";Uf.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Uf.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iz{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hy extends Iz{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ul extends hy{constructor(){super("facebook.com")}static credential(e){return sh._fromParams({providerId:Ul.PROVIDER_ID,signInMethod:Ul.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ul.credentialFromTaggedObject(e)}static credentialFromError(e){return Ul.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ul.credential(e.oauthAccessToken)}catch{return null}}}Ul.FACEBOOK_SIGN_IN_METHOD="facebook.com";Ul.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fl extends hy{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return sh._fromParams({providerId:Fl.PROVIDER_ID,signInMethod:Fl.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Fl.credentialFromTaggedObject(e)}static credentialFromError(e){return Fl.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:i}=e;if(!t&&!i)return null;try{return Fl.credential(t,i)}catch{return null}}}Fl.GOOGLE_SIGN_IN_METHOD="google.com";Fl.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jl extends hy{constructor(){super("github.com")}static credential(e){return sh._fromParams({providerId:jl.PROVIDER_ID,signInMethod:jl.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return jl.credentialFromTaggedObject(e)}static credentialFromError(e){return jl.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return jl.credential(e.oauthAccessToken)}catch{return null}}}jl.GITHUB_SIGN_IN_METHOD="github.com";jl.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vl extends hy{constructor(){super("twitter.com")}static credential(e,t){return sh._fromParams({providerId:Vl.PROVIDER_ID,signInMethod:Vl.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Vl.credentialFromTaggedObject(e)}static credentialFromError(e){return Vl.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:i}=e;if(!t||!i)return null;try{return Vl.credential(t,i)}catch{return null}}}Vl.TWITTER_SIGN_IN_METHOD="twitter.com";Vl.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function hle(n,e){return uy(n,"POST","/v1/accounts:signUp",ol(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oh{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,i,r=!1){const s=await ka._fromIdTokenResponse(e,i,r),o=Jk(i);return new oh({user:s,providerId:o,_tokenResponse:i,operationType:t})}static async _forOperation(e,t,i){await e._updateTokensIfNecessary(i,!0);const r=Jk(i);return new oh({user:e,providerId:r,_tokenResponse:i,operationType:t})}}function Jk(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D_ extends sl{constructor(e,t,i,r){var s;super(t.code,t.message),this.operationType=i,this.user=r,Object.setPrototypeOf(this,D_.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:t.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,t,i,r){return new D_(e,t,i,r)}}function Pz(n,e,t,i){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?D_._fromErrorAndOperation(n,s,e,i):s})}async function dle(n,e,t=!1){const i=await Cg(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return oh._forOperation(n,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fle(n,e,t=!1){const{auth:i}=n;if(oo(i.app))return Promise.reject(Ha(i));const r="reauthenticate";try{const s=await Cg(n,Pz(i,r,e,n),t);jt(s.idToken,i,"internal-error");const o=eI(s.idToken);jt(o,i,"internal-error");const{sub:a}=o;return jt(n.uid===a,i,"user-mismatch"),oh._forOperation(n,r,s)}catch(s){throw s?.code==="auth/user-not-found"&&Oo(i,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Rz(n,e,t=!1){if(oo(n.app))return Promise.reject(Ha(n));const i="signIn",r=await Pz(n,i,e),s=await oh._fromIdTokenResponse(n,i,r);return t||await n._updateCurrentUser(s.user),s}async function ple(n,e){return Rz(Dc(n),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Nz(n){const e=Dc(n);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function mle(n,e,t){const i=Dc(n);await N_(i,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",sle)}async function gle(n,e,t){if(oo(n.app))return Promise.reject(Ha(n));const i=Dc(n),o=await N_(i,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",hle).catch(l=>{throw l.code==="auth/password-does-not-meet-requirements"&&Nz(n),l}),a=await oh._fromIdTokenResponse(i,"signIn",o);return await i._updateCurrentUser(a.user),a}function yle(n,e,t){return oo(n.app)?Promise.reject(Ha(n)):ple(sr(n),Uf.credential(e,t)).catch(async i=>{throw i.code==="auth/password-does-not-meet-requirements"&&Nz(n),i})}function vle(n,e,t,i){return sr(n).onIdTokenChanged(e,t,i)}function xle(n,e,t){return sr(n).beforeAuthStateChanged(e,t)}function dy(n,e,t,i){return sr(n).onAuthStateChanged(e,t,i)}const L_="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dz{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(L_,"1"),this.storage.removeItem(L_),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _le=1e3,wle=10;class Lz extends Dz{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Tz(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const i=this.storage.getItem(t),r=this.localCache[t];i!==r&&e(t,r,i)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const i=e.key;t?this.detachListener():this.stopPolling();const r=()=>{const o=this.storage.getItem(i);!t&&this.localCache[i]===o||this.notifyListeners(i,o)},s=this.storage.getItem(i);Uae()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,wle):r()}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const r of Array.from(i))r(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:i}),!0)})},_le)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}Lz.type="LOCAL";const ble=Lz;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kz extends Dz{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}kz.type="SESSION";const Oz=kz;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sle(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eb{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(r=>r.isListeningto(e));if(t)return t;const i=new eb(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:i,eventType:r,data:s}=t.data,o=this.handlersMap[r];if(!o?.size)return;t.ports[0].postMessage({status:"ack",eventId:i,eventType:r});const a=Array.from(o).map(async c=>c(t.origin,s)),l=await Sle(a);t.ports[0].postMessage({status:"done",eventId:i,eventType:r,response:l})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}eb.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rI(n="",e=10){let t="";for(let i=0;i<e;i++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tle{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,i=50){const r=typeof MessageChannel<"u"?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let s,o;return new Promise((a,l)=>{const c=rI("",20);r.port1.start();const u=setTimeout(()=>{l(new Error("unsupported_event"))},i);o={messageChannel:r,onMessage(f){const m=f;if(m.data.eventId===c)switch(m.data.status){case"ack":clearTimeout(u),s=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(m.data.response);break;default:clearTimeout(u),clearTimeout(s),l(new Error("invalid_response"));break}}},this.handlers.add(o),r.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:c,data:t},[r.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aa(){return window}function Ele(n){aa().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uz(){return typeof aa().WorkerGlobalScope<"u"&&typeof aa().importScripts=="function"}async function Cle(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function Ale(){var n;return((n=navigator?.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function Mle(){return Uz()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fz="firebaseLocalStorageDb",Ile=1,k_="firebaseLocalStorage",jz="fbase_key";class fy{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function tb(n,e){return n.transaction([k_],e?"readwrite":"readonly").objectStore(k_)}function Ple(){const n=indexedDB.deleteDatabase(Fz);return new fy(n).toPromise()}function J1(){const n=indexedDB.open(Fz,Ile);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const i=n.result;try{i.createObjectStore(k_,{keyPath:jz})}catch(r){t(r)}}),n.addEventListener("success",async()=>{const i=n.result;i.objectStoreNames.contains(k_)?e(i):(i.close(),await Ple(),e(await J1()))})})}async function Qk(n,e,t){const i=tb(n,!0).put({[jz]:e,value:t});return new fy(i).toPromise()}async function Rle(n,e){const t=tb(n,!1).get(e),i=await new fy(t).toPromise();return i===void 0?null:i.value}function Zk(n,e){const t=tb(n,!0).delete(e);return new fy(t).toPromise()}const Nle=800,Dle=3;class Vz{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await J1(),this.db)}async _withRetries(e){let t=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(t++>Dle)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Uz()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=eb._getInstance(Mle()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await Cle(),!this.activeServiceWorker)return;this.sender=new Tle(this.activeServiceWorker);const i=await this.sender._send("ping",{},800);i&&!((e=i[0])===null||e===void 0)&&e.fulfilled&&!((t=i[0])===null||t===void 0)&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||Ale()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await J1();return await Qk(e,L_,"1"),await Zk(e,L_),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(i=>Qk(i,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(i=>Rle(i,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>Zk(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(r=>{const s=tb(r,!1).getAll();return new fy(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],i=new Set;if(e.length!==0)for(const{fbase_key:r,value:s}of e)i.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(s)&&(this.notifyListeners(r,s),t.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!i.has(r)&&(this.notifyListeners(r,null),t.push(r));return t}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const r of Array.from(i))r(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),Nle)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Vz.type="LOCAL";const Lle=Vz;new cy(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kle(n,e){return e?Oa(e):(jt(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sI extends nI{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Jd(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Jd(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Jd(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function Ole(n){return Rz(n.auth,new sI(n),n.bypassAuthState)}function Ule(n){const{auth:e,user:t}=n;return jt(t,e,"internal-error"),fle(t,new sI(n),n.bypassAuthState)}async function Fle(n){const{auth:e,user:t}=n;return jt(t,e,"internal-error"),dle(t,new sI(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bz{constructor(e,t,i,r,s=!1){this.auth=e,this.resolver=i,this.user=r,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:i,postBody:r,tenantId:s,error:o,type:a}=e;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:t,sessionId:i,tenantId:s||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Ole;case"linkViaPopup":case"linkViaRedirect":return Fle;case"reauthViaPopup":case"reauthViaRedirect":return Ule;default:Oo(this.auth,"internal-error")}}resolve(e){tl(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){tl(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jle=new cy(2e3,1e4);class Vd extends Bz{constructor(e,t,i,r,s){super(e,t,r,s),this.provider=i,this.authWindow=null,this.pollId=null,Vd.currentPopupAction&&Vd.currentPopupAction.cancel(),Vd.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return jt(e,this.auth,"internal-error"),e}async onExecution(){tl(this.filter.length===1,"Popup operations only handle one event");const e=rI();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(oa(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(oa(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Vd.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,i;if(!((i=(t=this.authWindow)===null||t===void 0?void 0:t.window)===null||i===void 0)&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(oa(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,jle.get())};e()}}Vd.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vle="pendingRedirect",Jx=new Map;class Ble extends Bz{constructor(e,t,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,i),this.eventId=null}async execute(){let e=Jx.get(this.auth._key());if(!e){try{const i=await zle(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(t){e=()=>Promise.reject(t)}Jx.set(this.auth._key(),e)}return this.bypassAuthState||Jx.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function zle(n,e){const t=Wle(e),i=Gle(n);if(!await i._isAvailable())return!1;const r=await i._get(t)==="true";return await i._remove(t),r}function Hle(n,e){Jx.set(n._key(),e)}function Gle(n){return Oa(n._redirectPersistence)}function Wle(n){return Yx(Vle,n.config.apiKey,n.name)}async function qle(n,e,t=!1){if(oo(n.app))return Promise.reject(Ha(n));const i=Dc(n),r=kle(i,e),o=await new Ble(i,r,t).execute();return o&&!t&&(delete o.user._redirectEventId,await i._persistUserIfCurrent(o.user),await i._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $le=10*60*1e3;class Xle{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(t=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!Kle(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var i;if(e.error&&!zz(e)){const r=((i=e.error.code)===null||i===void 0?void 0:i.split("auth/")[1])||"internal-error";t.onError(oa(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const i=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=$le&&this.cachedEventUids.clear(),this.cachedEventUids.has(e3(e))}saveEventToCache(e){this.cachedEventUids.add(e3(e)),this.lastProcessedEventTime=Date.now()}}function e3(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function zz({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function Kle(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return zz(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Yle(n,e={}){return al(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jle=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,Qle=/^https?/;async function Zle(n){if(n.config.emulator)return;const{authorizedDomains:e}=await Yle(n);for(const t of e)try{if(ece(t))return}catch{}Oo(n,"unauthorized-domain")}function ece(n){const e=K1(),{protocol:t,hostname:i}=new URL(e);if(n.startsWith("chrome-extension://")){const o=new URL(n);return o.hostname===""&&i===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&o.hostname===i}if(!Qle.test(t))return!1;if(Jle.test(n))return i===n;const r=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tce=new cy(3e4,6e4);function t3(){const n=aa().___jsl;if(n?.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function nce(n){return new Promise((e,t)=>{var i,r,s;function o(){t3(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{t3(),t(oa(n,"network-request-failed"))},timeout:tce.get()})}if(!((r=(i=aa().gapi)===null||i===void 0?void 0:i.iframes)===null||r===void 0)&&r.Iframe)e(gapi.iframes.getContext());else if(!((s=aa().gapi)===null||s===void 0)&&s.load)o();else{const a=qae("iframefcb");return aa()[a]=()=>{gapi.load?o():t(oa(n,"network-request-failed"))},Cz(`${Wae()}?onload=${a}`).catch(l=>t(l))}}).catch(e=>{throw Qx=null,e})}let Qx=null;function ice(n){return Qx=Qx||nce(n),Qx}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rce=new cy(5e3,15e3),sce="__/auth/iframe",oce="emulator/auth/iframe",ace={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},lce=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function cce(n){const e=n.config;jt(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?ZM(e,oce):`https://${n.config.authDomain}/${sce}`,i={apiKey:e.apiKey,appName:n.name,v:Of},r=lce.get(n.config.apiHost);r&&(i.eid=r);const s=n._getFrameworks();return s.length&&(i.fw=s.join(",")),`${t}?${ly(i).slice(1)}`}async function uce(n){const e=await ice(n),t=aa().gapi;return jt(t,n,"internal-error"),e.open({where:document.body,url:cce(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:ace,dontclear:!0},i=>new Promise(async(r,s)=>{await i.restyle({setHideOnLeave:!1});const o=oa(n,"network-request-failed"),a=aa().setTimeout(()=>{s(o)},rce.get());function l(){aa().clearTimeout(a),r(i)}i.ping(l).then(l,()=>{s(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hce={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},dce=500,fce=600,pce="_blank",mce="http://localhost";class n3{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function gce(n,e,t,i=dce,r=fce){const s=Math.max((window.screen.availHeight-r)/2,0).toString(),o=Math.max((window.screen.availWidth-i)/2,0).toString();let a="";const l=Object.assign(Object.assign({},hce),{width:i.toString(),height:r.toString(),top:s,left:o}),c=Vr().toLowerCase();t&&(a=xz(c)?pce:t),yz(c)&&(e=e||mce,l.scrollbars="yes");const u=Object.entries(l).reduce((m,[g,x])=>`${m}${g}=${x},`,"");if(Oae(c)&&a!=="_self")return yce(e||"",a),new n3(null);const f=window.open(e||"",a,u);jt(f,n,"popup-blocked");try{f.focus()}catch{}return new n3(f)}function yce(n,e){const t=document.createElement("a");t.href=n,t.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vce="__/auth/handler",xce="emulator/auth/handler",_ce=encodeURIComponent("fac");async function i3(n,e,t,i,r,s){jt(n.config.authDomain,n,"auth-domain-config-required"),jt(n.config.apiKey,n,"invalid-api-key");const o={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:i,v:Of,eventId:r};if(e instanceof Iz){e.setDefaultLanguage(n.languageCode),o.providerId=e.providerId||"",ioe(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[u,f]of Object.entries({}))o[u]=f}if(e instanceof hy){const u=e.getScopes().filter(f=>f!=="");u.length>0&&(o.scopes=u.join(","))}n.tenantId&&(o.tid=n.tenantId);const a=o;for(const u of Object.keys(a))a[u]===void 0&&delete a[u];const l=await n._getAppCheckToken(),c=l?`#${_ce}=${encodeURIComponent(l)}`:"";return`${wce(n)}?${ly(a).slice(1)}${c}`}function wce({config:n}){return n.emulator?ZM(n,xce):`https://${n.authDomain}/${vce}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aE="webStorageSupport";class bce{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Oz,this._completeRedirectFn=qle,this._overrideRedirectResult=Hle}async _openPopup(e,t,i,r){var s;tl((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const o=await i3(e,t,i,K1(),r);return gce(e,o,rI())}async _openRedirect(e,t,i,r){await this._originValidation(e);const s=await i3(e,t,i,K1(),r);return Ele(s),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:r,promise:s}=this.eventManagers[t];return r?Promise.resolve(r):(tl(s,"If manager is not set, promise should be"),s)}const i=this.initAndGetManager(e);return this.eventManagers[t]={promise:i},i.catch(()=>{delete this.eventManagers[t]}),i}async initAndGetManager(e){const t=await uce(e),i=new Xle(e);return t.register("authEvent",r=>(jt(r?.authEvent,e,"invalid-auth-event"),{status:i.onEvent(r.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=t,i}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(aE,{type:aE},r=>{var s;const o=(s=r?.[0])===null||s===void 0?void 0:s[aE];o!==void 0&&t(!!o),Oo(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=Zle(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return Tz()||vz()||tI()}}const Sce=bce;var r3="@firebase/auth",s3="1.9.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tce{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(i=>{e(i?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){jt(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ece(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function Cce(n){gf(new rh("auth",(e,{options:t})=>{const i=e.getProvider("app").getImmediate(),r=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=i.options;jt(o&&!o.includes(":"),"invalid-api-key",{appName:i.name});const l={apiKey:o,authDomain:a,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Ez(n)},c=new zae(i,r,s,l);return Qae(c,t),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,i)=>{e.getProvider("auth-internal").initialize()})),gf(new rh("auth-internal",e=>{const t=Dc(e.getProvider("auth").getImmediate());return(i=>new Tce(i))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),rc(r3,s3,Ece(n)),rc(r3,s3,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ace=5*60,Mce=tz("authIdTokenMaxAge")||Ace;let o3=null;const Ice=n=>async e=>{const t=e&&await e.getIdTokenResult(),i=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(i&&i>Mce)return;const r=t?.token;o3!==r&&(o3=r,await fetch(n,{method:r?"POST":"DELETE",headers:r?{Authorization:`Bearer ${r}`}:{}}))};function pc(n=sz()){const e=YM(n,"auth");if(e.isInitialized())return e.getImmediate();const t=Jae(n,{popupRedirectResolver:Sce,persistence:[Lle,ble,Oz]}),i=tz("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(i,location.origin);if(location.origin===s.origin){const o=Ice(s.toString());xle(t,o,()=>o(t.currentUser)),vle(t,a=>o(a))}}const r=ZB("auth");return r&&Zae(t,`http://${r}`),t}function Pce(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}Hae({loadJS(n){return new Promise((e,t)=>{const i=document.createElement("script");i.setAttribute("src",n),i.onload=e,i.onerror=r=>{const s=oa("internal-error");s.customData=r,t(s)},i.type="text/javascript",i.charset="UTF-8",Pce().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});Cce("Browser");var a3=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var sc,Hz;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(C,P){function M(){}M.prototype=P.prototype,C.D=P.prototype,C.prototype=new M,C.prototype.constructor=C,C.C=function(A,D,B){for(var j=Array(arguments.length-2),te=2;te<arguments.length;te++)j[te-2]=arguments[te];return P.prototype[D].apply(A,j)}}function t(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(i,t),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function r(C,P,M){M||(M=0);var A=Array(16);if(typeof P=="string")for(var D=0;16>D;++D)A[D]=P.charCodeAt(M++)|P.charCodeAt(M++)<<8|P.charCodeAt(M++)<<16|P.charCodeAt(M++)<<24;else for(D=0;16>D;++D)A[D]=P[M++]|P[M++]<<8|P[M++]<<16|P[M++]<<24;P=C.g[0],M=C.g[1],D=C.g[2];var B=C.g[3],j=P+(B^M&(D^B))+A[0]+3614090360&4294967295;P=M+(j<<7&4294967295|j>>>25),j=B+(D^P&(M^D))+A[1]+3905402710&4294967295,B=P+(j<<12&4294967295|j>>>20),j=D+(M^B&(P^M))+A[2]+606105819&4294967295,D=B+(j<<17&4294967295|j>>>15),j=M+(P^D&(B^P))+A[3]+3250441966&4294967295,M=D+(j<<22&4294967295|j>>>10),j=P+(B^M&(D^B))+A[4]+4118548399&4294967295,P=M+(j<<7&4294967295|j>>>25),j=B+(D^P&(M^D))+A[5]+1200080426&4294967295,B=P+(j<<12&4294967295|j>>>20),j=D+(M^B&(P^M))+A[6]+2821735955&4294967295,D=B+(j<<17&4294967295|j>>>15),j=M+(P^D&(B^P))+A[7]+4249261313&4294967295,M=D+(j<<22&4294967295|j>>>10),j=P+(B^M&(D^B))+A[8]+1770035416&4294967295,P=M+(j<<7&4294967295|j>>>25),j=B+(D^P&(M^D))+A[9]+2336552879&4294967295,B=P+(j<<12&4294967295|j>>>20),j=D+(M^B&(P^M))+A[10]+4294925233&4294967295,D=B+(j<<17&4294967295|j>>>15),j=M+(P^D&(B^P))+A[11]+2304563134&4294967295,M=D+(j<<22&4294967295|j>>>10),j=P+(B^M&(D^B))+A[12]+1804603682&4294967295,P=M+(j<<7&4294967295|j>>>25),j=B+(D^P&(M^D))+A[13]+4254626195&4294967295,B=P+(j<<12&4294967295|j>>>20),j=D+(M^B&(P^M))+A[14]+2792965006&4294967295,D=B+(j<<17&4294967295|j>>>15),j=M+(P^D&(B^P))+A[15]+1236535329&4294967295,M=D+(j<<22&4294967295|j>>>10),j=P+(D^B&(M^D))+A[1]+4129170786&4294967295,P=M+(j<<5&4294967295|j>>>27),j=B+(M^D&(P^M))+A[6]+3225465664&4294967295,B=P+(j<<9&4294967295|j>>>23),j=D+(P^M&(B^P))+A[11]+643717713&4294967295,D=B+(j<<14&4294967295|j>>>18),j=M+(B^P&(D^B))+A[0]+3921069994&4294967295,M=D+(j<<20&4294967295|j>>>12),j=P+(D^B&(M^D))+A[5]+3593408605&4294967295,P=M+(j<<5&4294967295|j>>>27),j=B+(M^D&(P^M))+A[10]+38016083&4294967295,B=P+(j<<9&4294967295|j>>>23),j=D+(P^M&(B^P))+A[15]+3634488961&4294967295,D=B+(j<<14&4294967295|j>>>18),j=M+(B^P&(D^B))+A[4]+3889429448&4294967295,M=D+(j<<20&4294967295|j>>>12),j=P+(D^B&(M^D))+A[9]+568446438&4294967295,P=M+(j<<5&4294967295|j>>>27),j=B+(M^D&(P^M))+A[14]+3275163606&4294967295,B=P+(j<<9&4294967295|j>>>23),j=D+(P^M&(B^P))+A[3]+4107603335&4294967295,D=B+(j<<14&4294967295|j>>>18),j=M+(B^P&(D^B))+A[8]+1163531501&4294967295,M=D+(j<<20&4294967295|j>>>12),j=P+(D^B&(M^D))+A[13]+2850285829&4294967295,P=M+(j<<5&4294967295|j>>>27),j=B+(M^D&(P^M))+A[2]+4243563512&4294967295,B=P+(j<<9&4294967295|j>>>23),j=D+(P^M&(B^P))+A[7]+1735328473&4294967295,D=B+(j<<14&4294967295|j>>>18),j=M+(B^P&(D^B))+A[12]+2368359562&4294967295,M=D+(j<<20&4294967295|j>>>12),j=P+(M^D^B)+A[5]+4294588738&4294967295,P=M+(j<<4&4294967295|j>>>28),j=B+(P^M^D)+A[8]+2272392833&4294967295,B=P+(j<<11&4294967295|j>>>21),j=D+(B^P^M)+A[11]+1839030562&4294967295,D=B+(j<<16&4294967295|j>>>16),j=M+(D^B^P)+A[14]+4259657740&4294967295,M=D+(j<<23&4294967295|j>>>9),j=P+(M^D^B)+A[1]+2763975236&4294967295,P=M+(j<<4&4294967295|j>>>28),j=B+(P^M^D)+A[4]+1272893353&4294967295,B=P+(j<<11&4294967295|j>>>21),j=D+(B^P^M)+A[7]+4139469664&4294967295,D=B+(j<<16&4294967295|j>>>16),j=M+(D^B^P)+A[10]+3200236656&4294967295,M=D+(j<<23&4294967295|j>>>9),j=P+(M^D^B)+A[13]+681279174&4294967295,P=M+(j<<4&4294967295|j>>>28),j=B+(P^M^D)+A[0]+3936430074&4294967295,B=P+(j<<11&4294967295|j>>>21),j=D+(B^P^M)+A[3]+3572445317&4294967295,D=B+(j<<16&4294967295|j>>>16),j=M+(D^B^P)+A[6]+76029189&4294967295,M=D+(j<<23&4294967295|j>>>9),j=P+(M^D^B)+A[9]+3654602809&4294967295,P=M+(j<<4&4294967295|j>>>28),j=B+(P^M^D)+A[12]+3873151461&4294967295,B=P+(j<<11&4294967295|j>>>21),j=D+(B^P^M)+A[15]+530742520&4294967295,D=B+(j<<16&4294967295|j>>>16),j=M+(D^B^P)+A[2]+3299628645&4294967295,M=D+(j<<23&4294967295|j>>>9),j=P+(D^(M|~B))+A[0]+4096336452&4294967295,P=M+(j<<6&4294967295|j>>>26),j=B+(M^(P|~D))+A[7]+1126891415&4294967295,B=P+(j<<10&4294967295|j>>>22),j=D+(P^(B|~M))+A[14]+2878612391&4294967295,D=B+(j<<15&4294967295|j>>>17),j=M+(B^(D|~P))+A[5]+4237533241&4294967295,M=D+(j<<21&4294967295|j>>>11),j=P+(D^(M|~B))+A[12]+1700485571&4294967295,P=M+(j<<6&4294967295|j>>>26),j=B+(M^(P|~D))+A[3]+2399980690&4294967295,B=P+(j<<10&4294967295|j>>>22),j=D+(P^(B|~M))+A[10]+4293915773&4294967295,D=B+(j<<15&4294967295|j>>>17),j=M+(B^(D|~P))+A[1]+2240044497&4294967295,M=D+(j<<21&4294967295|j>>>11),j=P+(D^(M|~B))+A[8]+1873313359&4294967295,P=M+(j<<6&4294967295|j>>>26),j=B+(M^(P|~D))+A[15]+4264355552&4294967295,B=P+(j<<10&4294967295|j>>>22),j=D+(P^(B|~M))+A[6]+2734768916&4294967295,D=B+(j<<15&4294967295|j>>>17),j=M+(B^(D|~P))+A[13]+1309151649&4294967295,M=D+(j<<21&4294967295|j>>>11),j=P+(D^(M|~B))+A[4]+4149444226&4294967295,P=M+(j<<6&4294967295|j>>>26),j=B+(M^(P|~D))+A[11]+3174756917&4294967295,B=P+(j<<10&4294967295|j>>>22),j=D+(P^(B|~M))+A[2]+718787259&4294967295,D=B+(j<<15&4294967295|j>>>17),j=M+(B^(D|~P))+A[9]+3951481745&4294967295,C.g[0]=C.g[0]+P&4294967295,C.g[1]=C.g[1]+(D+(j<<21&4294967295|j>>>11))&4294967295,C.g[2]=C.g[2]+D&4294967295,C.g[3]=C.g[3]+B&4294967295}i.prototype.u=function(C,P){P===void 0&&(P=C.length);for(var M=P-this.blockSize,A=this.B,D=this.h,B=0;B<P;){if(D==0)for(;B<=M;)r(this,C,B),B+=this.blockSize;if(typeof C=="string"){for(;B<P;)if(A[D++]=C.charCodeAt(B++),D==this.blockSize){r(this,A),D=0;break}}else for(;B<P;)if(A[D++]=C[B++],D==this.blockSize){r(this,A),D=0;break}}this.h=D,this.o+=P},i.prototype.v=function(){var C=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);C[0]=128;for(var P=1;P<C.length-8;++P)C[P]=0;var M=8*this.o;for(P=C.length-8;P<C.length;++P)C[P]=M&255,M/=256;for(this.u(C),C=Array(16),P=M=0;4>P;++P)for(var A=0;32>A;A+=8)C[M++]=this.g[P]>>>A&255;return C};function s(C,P){var M=a;return Object.prototype.hasOwnProperty.call(M,C)?M[C]:M[C]=P(C)}function o(C,P){this.h=P;for(var M=[],A=!0,D=C.length-1;0<=D;D--){var B=C[D]|0;A&&B==P||(M[D]=B,A=!1)}this.g=M}var a={};function l(C){return-128<=C&&128>C?s(C,function(P){return new o([P|0],0>P?-1:0)}):new o([C|0],0>C?-1:0)}function c(C){if(isNaN(C)||!isFinite(C))return f;if(0>C)return w(c(-C));for(var P=[],M=1,A=0;C>=M;A++)P[A]=C/M|0,M*=4294967296;return new o(P,0)}function u(C,P){if(C.length==0)throw Error("number format error: empty string");if(P=P||10,2>P||36<P)throw Error("radix out of range: "+P);if(C.charAt(0)=="-")return w(u(C.substring(1),P));if(0<=C.indexOf("-"))throw Error('number format error: interior "-" character');for(var M=c(Math.pow(P,8)),A=f,D=0;D<C.length;D+=8){var B=Math.min(8,C.length-D),j=parseInt(C.substring(D,D+B),P);8>B?(B=c(Math.pow(P,B)),A=A.j(B).add(c(j))):(A=A.j(M),A=A.add(c(j)))}return A}var f=l(0),m=l(1),g=l(16777216);n=o.prototype,n.m=function(){if(b(this))return-w(this).m();for(var C=0,P=1,M=0;M<this.g.length;M++){var A=this.i(M);C+=(0<=A?A:4294967296+A)*P,P*=4294967296}return C},n.toString=function(C){if(C=C||10,2>C||36<C)throw Error("radix out of range: "+C);if(x(this))return"0";if(b(this))return"-"+w(this).toString(C);for(var P=c(Math.pow(C,6)),M=this,A="";;){var D=I(M,P).g;M=v(M,D.j(P));var B=((0<M.g.length?M.g[0]:M.h)>>>0).toString(C);if(M=D,x(M))return B+A;for(;6>B.length;)B="0"+B;A=B+A}},n.i=function(C){return 0>C?0:C<this.g.length?this.g[C]:this.h};function x(C){if(C.h!=0)return!1;for(var P=0;P<C.g.length;P++)if(C.g[P]!=0)return!1;return!0}function b(C){return C.h==-1}n.l=function(C){return C=v(this,C),b(C)?-1:x(C)?0:1};function w(C){for(var P=C.g.length,M=[],A=0;A<P;A++)M[A]=~C.g[A];return new o(M,~C.h).add(m)}n.abs=function(){return b(this)?w(this):this},n.add=function(C){for(var P=Math.max(this.g.length,C.g.length),M=[],A=0,D=0;D<=P;D++){var B=A+(this.i(D)&65535)+(C.i(D)&65535),j=(B>>>16)+(this.i(D)>>>16)+(C.i(D)>>>16);A=j>>>16,B&=65535,j&=65535,M[D]=j<<16|B}return new o(M,M[M.length-1]&-2147483648?-1:0)};function v(C,P){return C.add(w(P))}n.j=function(C){if(x(this)||x(C))return f;if(b(this))return b(C)?w(this).j(w(C)):w(w(this).j(C));if(b(C))return w(this.j(w(C)));if(0>this.l(g)&&0>C.l(g))return c(this.m()*C.m());for(var P=this.g.length+C.g.length,M=[],A=0;A<2*P;A++)M[A]=0;for(A=0;A<this.g.length;A++)for(var D=0;D<C.g.length;D++){var B=this.i(A)>>>16,j=this.i(A)&65535,te=C.i(D)>>>16,ce=C.i(D)&65535;M[2*A+2*D]+=j*ce,S(M,2*A+2*D),M[2*A+2*D+1]+=B*ce,S(M,2*A+2*D+1),M[2*A+2*D+1]+=j*te,S(M,2*A+2*D+1),M[2*A+2*D+2]+=B*te,S(M,2*A+2*D+2)}for(A=0;A<P;A++)M[A]=M[2*A+1]<<16|M[2*A];for(A=P;A<2*P;A++)M[A]=0;return new o(M,0)};function S(C,P){for(;(C[P]&65535)!=C[P];)C[P+1]+=C[P]>>>16,C[P]&=65535,P++}function E(C,P){this.g=C,this.h=P}function I(C,P){if(x(P))throw Error("division by zero");if(x(C))return new E(f,f);if(b(C))return P=I(w(C),P),new E(w(P.g),w(P.h));if(b(P))return P=I(C,w(P)),new E(w(P.g),P.h);if(30<C.g.length){if(b(C)||b(P))throw Error("slowDivide_ only works with positive integers.");for(var M=m,A=P;0>=A.l(C);)M=U(M),A=U(A);var D=O(M,1),B=O(A,1);for(A=O(A,2),M=O(M,2);!x(A);){var j=B.add(A);0>=j.l(C)&&(D=D.add(M),B=j),A=O(A,1),M=O(M,1)}return P=v(C,D.j(P)),new E(D,P)}for(D=f;0<=C.l(P);){for(M=Math.max(1,Math.floor(C.m()/P.m())),A=Math.ceil(Math.log(M)/Math.LN2),A=48>=A?1:Math.pow(2,A-48),B=c(M),j=B.j(P);b(j)||0<j.l(C);)M-=A,B=c(M),j=B.j(P);x(B)&&(B=m),D=D.add(B),C=v(C,j)}return new E(D,C)}n.A=function(C){return I(this,C).h},n.and=function(C){for(var P=Math.max(this.g.length,C.g.length),M=[],A=0;A<P;A++)M[A]=this.i(A)&C.i(A);return new o(M,this.h&C.h)},n.or=function(C){for(var P=Math.max(this.g.length,C.g.length),M=[],A=0;A<P;A++)M[A]=this.i(A)|C.i(A);return new o(M,this.h|C.h)},n.xor=function(C){for(var P=Math.max(this.g.length,C.g.length),M=[],A=0;A<P;A++)M[A]=this.i(A)^C.i(A);return new o(M,this.h^C.h)};function U(C){for(var P=C.g.length+1,M=[],A=0;A<P;A++)M[A]=C.i(A)<<1|C.i(A-1)>>>31;return new o(M,C.h)}function O(C,P){var M=P>>5;P%=32;for(var A=C.g.length-M,D=[],B=0;B<A;B++)D[B]=0<P?C.i(B+M)>>>P|C.i(B+M+1)<<32-P:C.i(B+M);return new o(D,C.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,Hz=i,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=c,o.fromString=u,sc=o}).apply(typeof a3<"u"?a3:typeof self<"u"?self:typeof window<"u"?window:{});var xx=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Gz,em,Wz,Zx,Q1,qz,$z,Xz;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(y,N,L){return y==Array.prototype||y==Object.prototype||(y[N]=L.value),y};function t(y){y=[typeof globalThis=="object"&&globalThis,y,typeof window=="object"&&window,typeof self=="object"&&self,typeof xx=="object"&&xx];for(var N=0;N<y.length;++N){var L=y[N];if(L&&L.Math==Math)return L}throw Error("Cannot find global object")}var i=t(this);function r(y,N){if(N)e:{var L=i;y=y.split(".");for(var G=0;G<y.length-1;G++){var ae=y[G];if(!(ae in L))break e;L=L[ae]}y=y[y.length-1],G=L[y],N=N(G),N!=G&&N!=null&&e(L,y,{configurable:!0,writable:!0,value:N})}}function s(y,N){y instanceof String&&(y+="");var L=0,G=!1,ae={next:function(){if(!G&&L<y.length){var _e=L++;return{value:N(_e,y[_e]),done:!1}}return G=!0,{done:!0,value:void 0}}};return ae[Symbol.iterator]=function(){return ae},ae}r("Array.prototype.values",function(y){return y||function(){return s(this,function(N,L){return L})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function l(y){var N=typeof y;return N=N!="object"?N:y?Array.isArray(y)?"array":N:"null",N=="array"||N=="object"&&typeof y.length=="number"}function c(y){var N=typeof y;return N=="object"&&y!=null||N=="function"}function u(y,N,L){return y.call.apply(y.bind,arguments)}function f(y,N,L){if(!y)throw Error();if(2<arguments.length){var G=Array.prototype.slice.call(arguments,2);return function(){var ae=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(ae,G),y.apply(N,ae)}}return function(){return y.apply(N,arguments)}}function m(y,N,L){return m=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?u:f,m.apply(null,arguments)}function g(y,N){var L=Array.prototype.slice.call(arguments,1);return function(){var G=L.slice();return G.push.apply(G,arguments),y.apply(this,G)}}function x(y,N){function L(){}L.prototype=N.prototype,y.aa=N.prototype,y.prototype=new L,y.prototype.constructor=y,y.Qb=function(G,ae,_e){for(var Be=Array(arguments.length-2),Sn=2;Sn<arguments.length;Sn++)Be[Sn-2]=arguments[Sn];return N.prototype[ae].apply(G,Be)}}function b(y){const N=y.length;if(0<N){const L=Array(N);for(let G=0;G<N;G++)L[G]=y[G];return L}return[]}function w(y,N){for(let L=1;L<arguments.length;L++){const G=arguments[L];if(l(G)){const ae=y.length||0,_e=G.length||0;y.length=ae+_e;for(let Be=0;Be<_e;Be++)y[ae+Be]=G[Be]}else y.push(G)}}class v{constructor(N,L){this.i=N,this.j=L,this.h=0,this.g=null}get(){let N;return 0<this.h?(this.h--,N=this.g,this.g=N.next,N.next=null):N=this.i(),N}}function S(y){return/^[\s\xa0]*$/.test(y)}function E(){var y=a.navigator;return y&&(y=y.userAgent)?y:""}function I(y){return I[" "](y),y}I[" "]=function(){};var U=E().indexOf("Gecko")!=-1&&!(E().toLowerCase().indexOf("webkit")!=-1&&E().indexOf("Edge")==-1)&&!(E().indexOf("Trident")!=-1||E().indexOf("MSIE")!=-1)&&E().indexOf("Edge")==-1;function O(y,N,L){for(const G in y)N.call(L,y[G],G,y)}function C(y,N){for(const L in y)N.call(void 0,y[L],L,y)}function P(y){const N={};for(const L in y)N[L]=y[L];return N}const M="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function A(y,N){let L,G;for(let ae=1;ae<arguments.length;ae++){G=arguments[ae];for(L in G)y[L]=G[L];for(let _e=0;_e<M.length;_e++)L=M[_e],Object.prototype.hasOwnProperty.call(G,L)&&(y[L]=G[L])}}function D(y){var N=1;y=y.split(":");const L=[];for(;0<N&&y.length;)L.push(y.shift()),N--;return y.length&&L.push(y.join(":")),L}function B(y){a.setTimeout(()=>{throw y},0)}function j(){var y=Z;let N=null;return y.g&&(N=y.g,y.g=y.g.next,y.g||(y.h=null),N.next=null),N}class te{constructor(){this.h=this.g=null}add(N,L){const G=ce.get();G.set(N,L),this.h?this.h.next=G:this.g=G,this.h=G}}var ce=new v(()=>new pe,y=>y.reset());class pe{constructor(){this.next=this.g=this.h=null}set(N,L){this.h=N,this.g=L,this.next=null}reset(){this.next=this.g=this.h=null}}let de,W=!1,Z=new te,F=()=>{const y=a.Promise.resolve(void 0);de=()=>{y.then(J)}};var J=()=>{for(var y;y=j();){try{y.h.call(y.g)}catch(L){B(L)}var N=ce;N.j(y),100>N.h&&(N.h++,y.next=N.g,N.g=y)}W=!1};function ue(){this.s=this.s,this.C=this.C}ue.prototype.s=!1,ue.prototype.ma=function(){this.s||(this.s=!0,this.N())},ue.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function ye(y,N){this.type=y,this.g=this.target=N,this.defaultPrevented=!1}ye.prototype.h=function(){this.defaultPrevented=!0};var le=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var y=!1,N=Object.defineProperty({},"passive",{get:function(){y=!0}});try{const L=()=>{};a.addEventListener("test",L,N),a.removeEventListener("test",L,N)}catch{}return y}();function xe(y,N){if(ye.call(this,y?y.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,y){var L=this.type=y.type,G=y.changedTouches&&y.changedTouches.length?y.changedTouches[0]:null;if(this.target=y.target||y.srcElement,this.g=N,N=y.relatedTarget){if(U){e:{try{I(N.nodeName);var ae=!0;break e}catch{}ae=!1}ae||(N=null)}}else L=="mouseover"?N=y.fromElement:L=="mouseout"&&(N=y.toElement);this.relatedTarget=N,G?(this.clientX=G.clientX!==void 0?G.clientX:G.pageX,this.clientY=G.clientY!==void 0?G.clientY:G.pageY,this.screenX=G.screenX||0,this.screenY=G.screenY||0):(this.clientX=y.clientX!==void 0?y.clientX:y.pageX,this.clientY=y.clientY!==void 0?y.clientY:y.pageY,this.screenX=y.screenX||0,this.screenY=y.screenY||0),this.button=y.button,this.key=y.key||"",this.ctrlKey=y.ctrlKey,this.altKey=y.altKey,this.shiftKey=y.shiftKey,this.metaKey=y.metaKey,this.pointerId=y.pointerId||0,this.pointerType=typeof y.pointerType=="string"?y.pointerType:Pe[y.pointerType]||"",this.state=y.state,this.i=y,y.defaultPrevented&&xe.aa.h.call(this)}}x(xe,ye);var Pe={2:"touch",3:"pen",4:"mouse"};xe.prototype.h=function(){xe.aa.h.call(this);var y=this.i;y.preventDefault?y.preventDefault():y.returnValue=!1};var Me="closure_listenable_"+(1e6*Math.random()|0),gt=0;function Kt(y,N,L,G,ae){this.listener=y,this.proxy=null,this.src=N,this.type=L,this.capture=!!G,this.ha=ae,this.key=++gt,this.da=this.fa=!1}function Ye(y){y.da=!0,y.listener=null,y.proxy=null,y.src=null,y.ha=null}function rt(y){this.src=y,this.g={},this.h=0}rt.prototype.add=function(y,N,L,G,ae){var _e=y.toString();y=this.g[_e],y||(y=this.g[_e]=[],this.h++);var Be=Ee(y,N,G,ae);return-1<Be?(N=y[Be],L||(N.fa=!1)):(N=new Kt(N,this.src,_e,!!G,ae),N.fa=L,y.push(N)),N};function Ae(y,N){var L=N.type;if(L in y.g){var G=y.g[L],ae=Array.prototype.indexOf.call(G,N,void 0),_e;(_e=0<=ae)&&Array.prototype.splice.call(G,ae,1),_e&&(Ye(N),y.g[L].length==0&&(delete y.g[L],y.h--))}}function Ee(y,N,L,G){for(var ae=0;ae<y.length;++ae){var _e=y[ae];if(!_e.da&&_e.listener==N&&_e.capture==!!L&&_e.ha==G)return ae}return-1}var X="closure_lm_"+(1e6*Math.random()|0),pt={};function Oe(y,N,L,G,ae){if(Array.isArray(N)){for(var _e=0;_e<N.length;_e++)Oe(y,N[_e],L,G,ae);return null}return L=Re(L),y&&y[Me]?y.K(N,L,c(G)?!!G.capture:!1,ae):tt(y,N,L,!1,G,ae)}function tt(y,N,L,G,ae,_e){if(!N)throw Error("Invalid event type");var Be=c(ae)?!!ae.capture:!!ae,Sn=he(y);if(Sn||(y[X]=Sn=new rt(y)),L=Sn.add(N,L,G,Be,_e),L.proxy)return L;if(G=Ve(),L.proxy=G,G.src=y,G.listener=L,y.addEventListener)le||(ae=Be),ae===void 0&&(ae=!1),y.addEventListener(N.toString(),G,ae);else if(y.attachEvent)y.attachEvent($(N.toString()),G);else if(y.addListener&&y.removeListener)y.addListener(G);else throw Error("addEventListener and attachEvent are unavailable.");return L}function Ve(){function y(L){return N.call(y.src,y.listener,L)}const N=z;return y}function Mt(y,N,L,G,ae){if(Array.isArray(N))for(var _e=0;_e<N.length;_e++)Mt(y,N[_e],L,G,ae);else G=c(G)?!!G.capture:!!G,L=Re(L),y&&y[Me]?(y=y.i,N=String(N).toString(),N in y.g&&(_e=y.g[N],L=Ee(_e,L,G,ae),-1<L&&(Ye(_e[L]),Array.prototype.splice.call(_e,L,1),_e.length==0&&(delete y.g[N],y.h--)))):y&&(y=he(y))&&(N=y.g[N.toString()],y=-1,N&&(y=Ee(N,L,G,ae)),(L=-1<y?N[y]:null)&&Xe(L))}function Xe(y){if(typeof y!="number"&&y&&!y.da){var N=y.src;if(N&&N[Me])Ae(N.i,y);else{var L=y.type,G=y.proxy;N.removeEventListener?N.removeEventListener(L,G,y.capture):N.detachEvent?N.detachEvent($(L),G):N.addListener&&N.removeListener&&N.removeListener(G),(L=he(N))?(Ae(L,y),L.h==0&&(L.src=null,N[X]=null)):Ye(y)}}}function $(y){return y in pt?pt[y]:pt[y]="on"+y}function z(y,N){if(y.da)y=!0;else{N=new xe(N,this);var L=y.listener,G=y.ha||y.src;y.fa&&Xe(y),y=L.call(G,N)}return y}function he(y){return y=y[X],y instanceof rt?y:null}var Se="__closure_events_fn_"+(1e9*Math.random()>>>0);function Re(y){return typeof y=="function"?y:(y[Se]||(y[Se]=function(N){return y.handleEvent(N)}),y[Se])}function we(){ue.call(this),this.i=new rt(this),this.M=this,this.F=null}x(we,ue),we.prototype[Me]=!0,we.prototype.removeEventListener=function(y,N,L,G){Mt(this,y,N,L,G)};function He(y,N){var L,G=y.F;if(G)for(L=[];G;G=G.F)L.push(G);if(y=y.M,G=N.type||N,typeof N=="string")N=new ye(N,y);else if(N instanceof ye)N.target=N.target||y;else{var ae=N;N=new ye(G,y),A(N,ae)}if(ae=!0,L)for(var _e=L.length-1;0<=_e;_e--){var Be=N.g=L[_e];ae=Ge(Be,G,!0,N)&&ae}if(Be=N.g=y,ae=Ge(Be,G,!0,N)&&ae,ae=Ge(Be,G,!1,N)&&ae,L)for(_e=0;_e<L.length;_e++)Be=N.g=L[_e],ae=Ge(Be,G,!1,N)&&ae}we.prototype.N=function(){if(we.aa.N.call(this),this.i){var y=this.i,N;for(N in y.g){for(var L=y.g[N],G=0;G<L.length;G++)Ye(L[G]);delete y.g[N],y.h--}}this.F=null},we.prototype.K=function(y,N,L,G){return this.i.add(String(y),N,!1,L,G)},we.prototype.L=function(y,N,L,G){return this.i.add(String(y),N,!0,L,G)};function Ge(y,N,L,G){if(N=y.i.g[String(N)],!N)return!0;N=N.concat();for(var ae=!0,_e=0;_e<N.length;++_e){var Be=N[_e];if(Be&&!Be.da&&Be.capture==L){var Sn=Be.listener,Ii=Be.ha||Be.src;Be.fa&&Ae(y.i,Be),ae=Sn.call(Ii,G)!==!1&&ae}}return ae&&!G.defaultPrevented}function Qe(y,N,L){if(typeof y=="function")L&&(y=m(y,L));else if(y&&typeof y.handleEvent=="function")y=m(y.handleEvent,y);else throw Error("Invalid listener argument");return 2147483647<Number(N)?-1:a.setTimeout(y,N||0)}function Yt(y){y.g=Qe(()=>{y.g=null,y.i&&(y.i=!1,Yt(y))},y.l);const N=y.h;y.h=null,y.m.apply(null,N)}class Fe extends ue{constructor(N,L){super(),this.m=N,this.l=L,this.h=null,this.i=!1,this.g=null}j(N){this.h=arguments,this.g?this.i=!0:Yt(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function lt(y){ue.call(this),this.h=y,this.g={}}x(lt,ue);var Ct=[];function Lt(y){O(y.g,function(N,L){this.g.hasOwnProperty(L)&&Xe(N)},y),y.g={}}lt.prototype.N=function(){lt.aa.N.call(this),Lt(this)},lt.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ut=a.JSON.stringify,an=a.JSON.parse,Gt=class{stringify(y){return a.JSON.stringify(y,void 0)}parse(y){return a.JSON.parse(y,void 0)}};function wn(){}wn.prototype.h=null;function ee(y){return y.h||(y.h=y.i())}function Ze(){}var be={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Ie(){ye.call(this,"d")}x(Ie,ye);function it(){ye.call(this,"c")}x(it,ye);var Ke={},Ft=null;function kn(){return Ft=Ft||new we}Ke.La="serverreachability";function Xn(y){ye.call(this,Ke.La,y)}x(Xn,ye);function Zt(y){const N=kn();He(N,new Xn(N))}Ke.STAT_EVENT="statevent";function zi(y,N){ye.call(this,Ke.STAT_EVENT,y),this.stat=N}x(zi,ye);function Hn(y){const N=kn();He(N,new zi(N,y))}Ke.Ma="timingevent";function Q(y,N){ye.call(this,Ke.Ma,y),this.size=N}x(Q,ye);function se(y,N){if(typeof y!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){y()},N)}function ge(){this.g=!0}ge.prototype.xa=function(){this.g=!1};function ke(y,N,L,G,ae,_e){y.info(function(){if(y.g)if(_e)for(var Be="",Sn=_e.split("&"),Ii=0;Ii<Sn.length;Ii++){var gn=Sn[Ii].split("=");if(1<gn.length){var Pi=gn[0];gn=gn[1];var Vn=Pi.split("_");Be=2<=Vn.length&&Vn[1]=="type"?Be+(Pi+"="+gn+"&"):Be+(Pi+"=redacted&")}}else Be=null;else Be=_e;return"XMLHTTP REQ ("+G+") [attempt "+ae+"]: "+N+`
`+L+`
`+Be})}function Je(y,N,L,G,ae,_e,Be){y.info(function(){return"XMLHTTP RESP ("+G+") [ attempt "+ae+"]: "+N+`
`+L+`
`+_e+" "+Be})}function mt(y,N,L,G){y.info(function(){return"XMLHTTP TEXT ("+N+"): "+yt(y,L)+(G?" "+G:"")})}function Nt(y,N){y.info(function(){return"TIMEOUT: "+N})}ge.prototype.info=function(){};function yt(y,N){if(!y.g)return N;if(!N)return null;try{var L=JSON.parse(N);if(L){for(y=0;y<L.length;y++)if(Array.isArray(L[y])){var G=L[y];if(!(2>G.length)){var ae=G[1];if(Array.isArray(ae)&&!(1>ae.length)){var _e=ae[0];if(_e!="noop"&&_e!="stop"&&_e!="close")for(var Be=1;Be<ae.length;Be++)ae[Be]=""}}}}return ut(L)}catch{return N}}var ht={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},dt={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},bt;function Ot(){}x(Ot,wn),Ot.prototype.g=function(){return new XMLHttpRequest},Ot.prototype.i=function(){return{}},bt=new Ot;function Wt(y,N,L,G){this.j=y,this.i=N,this.l=L,this.R=G||1,this.U=new lt(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Zn}function Zn(){this.i=null,this.g="",this.h=!1}var Mn={},dn={};function jn(y,N,L){y.L=1,y.v=si(Qi(N)),y.m=L,y.P=!0,H(y,null)}function H(y,N){y.F=Date.now(),fe(y),y.A=Qi(y.v);var L=y.A,G=y.R;Array.isArray(G)||(G=[String(G)]),bh(L.i,"t",G),y.C=0,L=y.j.J,y.h=new Zn,y.g=Gc(y.j,L?N:null,!y.m),0<y.O&&(y.M=new Fe(m(y.Y,y,y.g),y.O)),N=y.U,L=y.g,G=y.ca;var ae="readystatechange";Array.isArray(ae)||(ae&&(Ct[0]=ae.toString()),ae=Ct);for(var _e=0;_e<ae.length;_e++){var Be=Oe(L,ae[_e],G||N.handleEvent,!1,N.h||N);if(!Be)break;N.g[Be.key]=Be}N=y.H?P(y.H):{},y.m?(y.u||(y.u="POST"),N["Content-Type"]="application/x-www-form-urlencoded",y.g.ea(y.A,y.u,y.m,N)):(y.u="GET",y.g.ea(y.A,y.u,null,N)),Zt(),ke(y.i,y.u,y.A,y.l,y.R,y.m)}Wt.prototype.ca=function(y){y=y.target;const N=this.M;N&&wi(y)==3?N.j():this.Y(y)},Wt.prototype.Y=function(y){try{if(y==this.g)e:{const Vn=wi(this.g);var N=this.g.Ba();const Ri=this.g.Z();if(!(3>Vn)&&(Vn!=3||this.g&&(this.h.h||this.g.oa()||Vc(this.g)))){this.J||Vn!=4||N==7||(N==8||0>=Ri?Zt(3):Zt(2)),Ue(this);var L=this.g.Z();this.X=L;t:if(ne(this)){var G=Vc(this.g);y="";var ae=G.length,_e=wi(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){et(this),ze(this);var Be="";break t}this.h.i=new a.TextDecoder}for(N=0;N<ae;N++)this.h.h=!0,y+=this.h.i.decode(G[N],{stream:!(_e&&N==ae-1)});G.length=0,this.h.g+=y,this.C=0,Be=this.h.g}else Be=this.g.oa();if(this.o=L==200,Je(this.i,this.u,this.A,this.l,this.R,Vn,L),this.o){if(this.T&&!this.K){t:{if(this.g){var Sn,Ii=this.g;if((Sn=Ii.g?Ii.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!S(Sn)){var gn=Sn;break t}}gn=null}if(L=gn)mt(this.i,this.l,L,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,st(this,L);else{this.o=!1,this.s=3,Hn(12),et(this),ze(this);break e}}if(this.P){L=!0;let yn;for(;!this.J&&this.C<Be.length;)if(yn=me(this,Be),yn==dn){Vn==4&&(this.s=4,Hn(14),L=!1),mt(this.i,this.l,null,"[Incomplete Response]");break}else if(yn==Mn){this.s=4,Hn(15),mt(this.i,this.l,Be,"[Invalid Chunk]"),L=!1;break}else mt(this.i,this.l,yn,null),st(this,yn);if(ne(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Vn!=4||Be.length!=0||this.h.h||(this.s=1,Hn(16),L=!1),this.o=this.o&&L,!L)mt(this.i,this.l,Be,"[Invalid Chunked Response]"),et(this),ze(this);else if(0<Be.length&&!this.W){this.W=!0;var Pi=this.j;Pi.g==this&&Pi.ba&&!Pi.M&&(Pi.j.info("Great, no buffering proxy detected. Bytes received: "+Be.length),Cs(Pi),Pi.M=!0,Hn(11))}}else mt(this.i,this.l,Be,null),st(this,Be);Vn==4&&et(this),this.o&&!this.J&&(Vn==4?Kf(this.j,this):(this.o=!1,fe(this)))}else Th(this.g),L==400&&0<Be.indexOf("Unknown SID")?(this.s=3,Hn(12)):(this.s=0,Hn(13)),et(this),ze(this)}}}catch{}finally{}};function ne(y){return y.g?y.u=="GET"&&y.L!=2&&y.j.Ca:!1}function me(y,N){var L=y.C,G=N.indexOf(`
`,L);return G==-1?dn:(L=Number(N.substring(L,G)),isNaN(L)?Mn:(G+=1,G+L>N.length?dn:(N=N.slice(G,G+L),y.C=G+L,N)))}Wt.prototype.cancel=function(){this.J=!0,et(this)};function fe(y){y.S=Date.now()+y.I,re(y,y.I)}function re(y,N){if(y.B!=null)throw Error("WatchDog timer not null");y.B=se(m(y.ba,y),N)}function Ue(y){y.B&&(a.clearTimeout(y.B),y.B=null)}Wt.prototype.ba=function(){this.B=null;const y=Date.now();0<=y-this.S?(Nt(this.i,this.A),this.L!=2&&(Zt(),Hn(17)),et(this),this.s=2,ze(this)):re(this,this.S-y)};function ze(y){y.j.G==0||y.J||Kf(y.j,y)}function et(y){Ue(y);var N=y.M;N&&typeof N.ma=="function"&&N.ma(),y.M=null,Lt(y.U),y.g&&(N=y.g,y.g=null,N.abort(),N.ma())}function st(y,N){try{var L=y.j;if(L.G!=0&&(L.g==y||Et(L.h,y))){if(!y.K&&Et(L.h,y)&&L.G==3){try{var G=L.Da.g.parse(N)}catch{G=null}if(Array.isArray(G)&&G.length==3){var ae=G;if(ae[0]==0){e:if(!L.u){if(L.g)if(L.g.F+3e3<y.F)ya(L),zc(L);else break e;Mh(L),Hn(18)}}else L.za=ae[1],0<L.za-L.T&&37500>ae[2]&&L.F&&L.v==0&&!L.C&&(L.C=se(m(L.Za,L),6e3));if(1>=vt(L.h)&&L.ca){try{L.ca()}catch{}L.ca=void 0}}else Bo(L,11)}else if((y.K||L.g==y)&&ya(L),!S(N))for(ae=L.Da.g.parse(N),N=0;N<ae.length;N++){let gn=ae[N];if(L.T=gn[0],gn=gn[1],L.G==2)if(gn[0]=="c"){L.K=gn[1],L.ia=gn[2];const Pi=gn[3];Pi!=null&&(L.la=Pi,L.j.info("VER="+L.la));const Vn=gn[4];Vn!=null&&(L.Aa=Vn,L.j.info("SVER="+L.Aa));const Ri=gn[5];Ri!=null&&typeof Ri=="number"&&0<Ri&&(G=1.5*Ri,L.L=G,L.j.info("backChannelRequestTimeoutMs_="+G)),G=L;const yn=y.g;if(yn){const zo=yn.g?yn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(zo){var _e=G.h;_e.g||zo.indexOf("spdy")==-1&&zo.indexOf("quic")==-1&&zo.indexOf("h2")==-1||(_e.j=_e.l,_e.g=new Set,_e.h&&(zt(_e,_e.h),_e.h=null))}if(G.D){const Hr=yn.g?yn.g.getResponseHeader("X-HTTP-Session-Id"):null;Hr&&(G.ya=Hr,tn(G.I,G.D,Hr))}}L.G=3,L.l&&L.l.ua(),L.ba&&(L.R=Date.now()-y.F,L.j.info("Handshake RTT: "+L.R+"ms")),G=L;var Be=y;if(G.qa=Ih(G,G.J?G.ia:null,G.W),Be.K){en(G.h,Be);var Sn=Be,Ii=G.L;Ii&&(Sn.I=Ii),Sn.B&&(Ue(Sn),fe(Sn)),G.g=Be}else Ah(G);0<L.i.length&&cl(L)}else gn[0]!="stop"&&gn[0]!="close"||Bo(L,7);else L.G==3&&(gn[0]=="stop"||gn[0]=="close"?gn[0]=="stop"?Bo(L,7):Bc(L):gn[0]!="noop"&&L.l&&L.l.ta(gn),L.v=0)}}Zt(4)}catch{}}var $e=class{constructor(y,N){this.g=y,this.map=N}};function nt(y){this.l=y||10,a.PerformanceNavigationTiming?(y=a.performance.getEntriesByType("navigation"),y=0<y.length&&(y[0].nextHopProtocol=="hq"||y[0].nextHopProtocol=="h2")):y=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=y?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function We(y){return y.h?!0:y.g?y.g.size>=y.j:!1}function vt(y){return y.h?1:y.g?y.g.size:0}function Et(y,N){return y.h?y.h==N:y.g?y.g.has(N):!1}function zt(y,N){y.g?y.g.add(N):y.h=N}function en(y,N){y.h&&y.h==N?y.h=null:y.g&&y.g.has(N)&&y.g.delete(N)}nt.prototype.cancel=function(){if(this.i=$t(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const y of this.g.values())y.cancel();this.g.clear()}};function $t(y){if(y.h!=null)return y.i.concat(y.h.D);if(y.g!=null&&y.g.size!==0){let N=y.i;for(const L of y.g.values())N=N.concat(L.D);return N}return b(y.i)}function It(y){if(y.V&&typeof y.V=="function")return y.V();if(typeof Map<"u"&&y instanceof Map||typeof Set<"u"&&y instanceof Set)return Array.from(y.values());if(typeof y=="string")return y.split("");if(l(y)){for(var N=[],L=y.length,G=0;G<L;G++)N.push(y[G]);return N}N=[],L=0;for(G in y)N[L++]=y[G];return N}function En(y){if(y.na&&typeof y.na=="function")return y.na();if(!y.V||typeof y.V!="function"){if(typeof Map<"u"&&y instanceof Map)return Array.from(y.keys());if(!(typeof Set<"u"&&y instanceof Set)){if(l(y)||typeof y=="string"){var N=[];y=y.length;for(var L=0;L<y;L++)N.push(L);return N}N=[],L=0;for(const G in y)N[L++]=G;return N}}}function pn(y,N){if(y.forEach&&typeof y.forEach=="function")y.forEach(N,void 0);else if(l(y)||typeof y=="string")Array.prototype.forEach.call(y,N,void 0);else for(var L=En(y),G=It(y),ae=G.length,_e=0;_e<ae;_e++)N.call(void 0,G[_e],L&&L[_e],y)}var or=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function po(y,N){if(y){y=y.split("&");for(var L=0;L<y.length;L++){var G=y[L].indexOf("="),ae=null;if(0<=G){var _e=y[L].substring(0,G);ae=y[L].substring(G+1)}else _e=y[L];N(_e,ae?decodeURIComponent(ae.replace(/\+/g," ")):"")}}}function Jn(y){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,y instanceof Jn){this.h=y.h,ln(this,y.j),this.o=y.o,this.g=y.g,Hi(this,y.s),this.l=y.l;var N=y.i,L=new Uc;L.i=N.i,N.g&&(L.g=new Map(N.g),L.h=N.h),ar(this,L),this.m=y.m}else y&&(N=String(y).match(or))?(this.h=!1,ln(this,N[1]||"",!0),this.o=ns(N[2]||""),this.g=ns(N[3]||"",!0),Hi(this,N[4]),this.l=ns(N[5]||"",!0),ar(this,N[6]||"",!0),this.m=ns(N[7]||"")):(this.h=!1,this.i=new Uc(null,this.h))}Jn.prototype.toString=function(){var y=[],N=this.j;N&&y.push(Gi(N,_y,!0),":");var L=this.g;return(L||N=="file")&&(y.push("//"),(N=this.o)&&y.push(Gi(N,_y,!0),"@"),y.push(encodeURIComponent(String(L)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),L=this.s,L!=null&&y.push(":",String(L))),(L=this.l)&&(this.g&&L.charAt(0)!="/"&&y.push("/"),y.push(Gi(L,L.charAt(0)=="/"?Gf:Cb,!0))),(L=this.i.toString())&&y.push("?",L),(L=this.m)&&y.push("#",Gi(L,Oc)),y.join("")};function Qi(y){return new Jn(y)}function ln(y,N,L){y.j=L?ns(N,!0):N,y.j&&(y.j=y.j.replace(/:$/,""))}function Hi(y,N){if(N){if(N=Number(N),isNaN(N)||0>N)throw Error("Bad port number "+N);y.s=N}else y.s=null}function ar(y,N,L){N instanceof Uc?(y.i=N,Ab(y.i,y.h)):(L||(N=Gi(N,Wf)),y.i=new Uc(N,y.h))}function tn(y,N,L){y.i.set(N,L)}function si(y){return tn(y,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),y}function ns(y,N){return y?N?decodeURI(y.replace(/%25/g,"%2525")):decodeURIComponent(y):""}function Gi(y,N,L){return typeof y=="string"?(y=encodeURI(y).replace(N,wh),L&&(y=y.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),y):null}function wh(y){return y=y.charCodeAt(0),"%"+(y>>4&15).toString(16)+(y&15).toString(16)}var _y=/[#\/\?@]/g,Cb=/[#\?:]/g,Gf=/[#\?]/g,Wf=/[#\?@]/g,Oc=/#/g;function Uc(y,N){this.h=this.g=null,this.i=y||null,this.j=!!N}function qs(y){y.g||(y.g=new Map,y.h=0,y.i&&po(y.i,function(N,L){y.add(decodeURIComponent(N.replace(/\+/g," ")),L)}))}n=Uc.prototype,n.add=function(y,N){qs(this),this.i=null,y=pa(this,y);var L=this.g.get(y);return L||this.g.set(y,L=[]),L.push(N),this.h+=1,this};function bn(y,N){qs(y),N=pa(y,N),y.g.has(N)&&(y.i=null,y.h-=y.g.get(N).length,y.g.delete(N))}function qf(y,N){return qs(y),N=pa(y,N),y.g.has(N)}n.forEach=function(y,N){qs(this),this.g.forEach(function(L,G){L.forEach(function(ae){y.call(N,ae,G,this)},this)},this)},n.na=function(){qs(this);const y=Array.from(this.g.values()),N=Array.from(this.g.keys()),L=[];for(let G=0;G<N.length;G++){const ae=y[G];for(let _e=0;_e<ae.length;_e++)L.push(N[G])}return L},n.V=function(y){qs(this);let N=[];if(typeof y=="string")qf(this,y)&&(N=N.concat(this.g.get(pa(this,y))));else{y=Array.from(this.g.values());for(let L=0;L<y.length;L++)N=N.concat(y[L])}return N},n.set=function(y,N){return qs(this),this.i=null,y=pa(this,y),qf(this,y)&&(this.h-=this.g.get(y).length),this.g.set(y,[N]),this.h+=1,this},n.get=function(y,N){return y?(y=this.V(y),0<y.length?String(y[0]):N):N};function bh(y,N,L){bn(y,N),0<L.length&&(y.i=null,y.g.set(pa(y,N),b(L)),y.h+=L.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const y=[],N=Array.from(this.g.keys());for(var L=0;L<N.length;L++){var G=N[L];const _e=encodeURIComponent(String(G)),Be=this.V(G);for(G=0;G<Be.length;G++){var ae=_e;Be[G]!==""&&(ae+="="+encodeURIComponent(String(Be[G]))),y.push(ae)}}return this.i=y.join("&")};function pa(y,N){return N=String(N),y.j&&(N=N.toLowerCase()),N}function Ab(y,N){N&&!y.j&&(qs(y),y.i=null,y.g.forEach(function(L,G){var ae=G.toLowerCase();G!=ae&&(bn(this,G),bh(this,ae,L))},y)),y.j=N}function Mb(y,N){const L=new ge;if(a.Image){const G=new Image;G.onload=g($s,L,"TestLoadImage: loaded",!0,N,G),G.onerror=g($s,L,"TestLoadImage: error",!1,N,G),G.onabort=g($s,L,"TestLoadImage: abort",!1,N,G),G.ontimeout=g($s,L,"TestLoadImage: timeout",!1,N,G),a.setTimeout(function(){G.ontimeout&&G.ontimeout()},1e4),G.src=y}else N(!1)}function Mi(y,N){const L=new ge,G=new AbortController,ae=setTimeout(()=>{G.abort(),$s(L,"TestPingServer: timeout",!1,N)},1e4);fetch(y,{signal:G.signal}).then(_e=>{clearTimeout(ae),_e.ok?$s(L,"TestPingServer: ok",!0,N):$s(L,"TestPingServer: server error",!1,N)}).catch(()=>{clearTimeout(ae),$s(L,"TestPingServer: error",!1,N)})}function $s(y,N,L,G,ae){try{ae&&(ae.onload=null,ae.onerror=null,ae.onabort=null,ae.ontimeout=null),G(L)}catch{}}function Ib(){this.g=new Gt}function $f(y,N,L){const G=L||"";try{pn(y,function(ae,_e){let Be=ae;c(ae)&&(Be=ut(ae)),N.push(G+_e+"="+encodeURIComponent(Be))})}catch(ae){throw N.push(G+"type="+encodeURIComponent("_badmap")),ae}}function Sh(y){this.l=y.Ub||null,this.j=y.eb||!1}x(Sh,wn),Sh.prototype.g=function(){return new ma(this.l,this.j)},Sh.prototype.i=function(y){return function(){return y}}({});function ma(y,N){we.call(this),this.D=y,this.o=N,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}x(ma,we),n=ma.prototype,n.open=function(y,N){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=y,this.A=N,this.readyState=1,jc(this)},n.send=function(y){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const N={headers:this.u,method:this.B,credentials:this.m,cache:void 0};y&&(N.body=y),(this.D||a).fetch(new Request(this.A,N)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Fc(this)),this.readyState=0},n.Sa=function(y){if(this.g&&(this.l=y,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=y.headers,this.readyState=2,jc(this)),this.g&&(this.readyState=3,jc(this),this.g)))if(this.responseType==="arraybuffer")y.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in y){if(this.j=y.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;bs(this)}else y.text().then(this.Ra.bind(this),this.ga.bind(this))};function bs(y){y.j.read().then(y.Pa.bind(y)).catch(y.ga.bind(y))}n.Pa=function(y){if(this.g){if(this.o&&y.value)this.response.push(y.value);else if(!this.o){var N=y.value?y.value:new Uint8Array(0);(N=this.v.decode(N,{stream:!y.done}))&&(this.response=this.responseText+=N)}y.done?Fc(this):jc(this),this.readyState==3&&bs(this)}},n.Ra=function(y){this.g&&(this.response=this.responseText=y,Fc(this))},n.Qa=function(y){this.g&&(this.response=y,Fc(this))},n.ga=function(){this.g&&Fc(this)};function Fc(y){y.readyState=4,y.l=null,y.j=null,y.v=null,jc(y)}n.setRequestHeader=function(y,N){this.u.append(y,N)},n.getResponseHeader=function(y){return this.h&&this.h.get(y.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const y=[],N=this.h.entries();for(var L=N.next();!L.done;)L=L.value,y.push(L[0]+": "+L[1]),L=N.next();return y.join(`\r
`)};function jc(y){y.onreadystatechange&&y.onreadystatechange.call(y)}Object.defineProperty(ma.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(y){this.m=y?"include":"same-origin"}});function Ss(y){let N="";return O(y,function(L,G){N+=G,N+=":",N+=L,N+=`\r
`}),N}function Ts(y,N,L){e:{for(G in L){var G=!1;break e}G=!0}G||(L=Ss(L),typeof y=="string"?L!=null&&encodeURIComponent(String(L)):tn(y,N,L))}function Kn(y){we.call(this),this.headers=new Map,this.o=y||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}x(Kn,we);var Xf=/^https?$/i,wy=["POST","PUT"];n=Kn.prototype,n.Ha=function(y){this.J=y},n.ea=function(y,N,L,G){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+y);N=N?N.toUpperCase():"GET",this.D=y,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():bt.g(),this.v=this.o?ee(this.o):ee(bt),this.g.onreadystatechange=m(this.Ea,this);try{this.B=!0,this.g.open(N,String(y),!0),this.B=!1}catch(_e){by(this,_e);return}if(y=L||"",L=new Map(this.headers),G)if(Object.getPrototypeOf(G)===Object.prototype)for(var ae in G)L.set(ae,G[ae]);else if(typeof G.keys=="function"&&typeof G.get=="function")for(const _e of G.keys())L.set(_e,G.get(_e));else throw Error("Unknown input type for opt_headers: "+String(G));G=Array.from(L.keys()).find(_e=>_e.toLowerCase()=="content-type"),ae=a.FormData&&y instanceof a.FormData,!(0<=Array.prototype.indexOf.call(wy,N,void 0))||G||ae||L.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[_e,Be]of L)this.g.setRequestHeader(_e,Be);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{Ty(this),this.u=!0,this.g.send(y),this.u=!1}catch(_e){by(this,_e)}};function by(y,N){y.h=!1,y.g&&(y.j=!0,y.g.abort(),y.j=!1),y.l=N,y.m=5,Es(y),ga(y)}function Es(y){y.A||(y.A=!0,He(y,"complete"),He(y,"error"))}n.abort=function(y){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=y||7,He(this,"complete"),He(this,"abort"),ga(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ga(this,!0)),Kn.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?Sy(this):this.bb())},n.bb=function(){Sy(this)};function Sy(y){if(y.h&&typeof o<"u"&&(!y.v[1]||wi(y)!=4||y.Z()!=2)){if(y.u&&wi(y)==4)Qe(y.Ea,0,y);else if(He(y,"readystatechange"),wi(y)==4){y.h=!1;try{const Be=y.Z();e:switch(Be){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var N=!0;break e;default:N=!1}var L;if(!(L=N)){var G;if(G=Be===0){var ae=String(y.D).match(or)[1]||null;!ae&&a.self&&a.self.location&&(ae=a.self.location.protocol.slice(0,-1)),G=!Xf.test(ae?ae.toLowerCase():"")}L=G}if(L)He(y,"complete"),He(y,"success");else{y.m=6;try{var _e=2<wi(y)?y.g.statusText:""}catch{_e=""}y.l=_e+" ["+y.Z()+"]",Es(y)}}finally{ga(y)}}}}function ga(y,N){if(y.g){Ty(y);const L=y.g,G=y.v[0]?()=>{}:null;y.g=null,y.v=null,N||He(y,"ready");try{L.onreadystatechange=G}catch{}}}function Ty(y){y.I&&(a.clearTimeout(y.I),y.I=null)}n.isActive=function(){return!!this.g};function wi(y){return y.g?y.g.readyState:0}n.Z=function(){try{return 2<wi(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(y){if(this.g){var N=this.g.responseText;return y&&N.indexOf(y)==0&&(N=N.substring(y.length)),an(N)}};function Vc(y){try{if(!y.g)return null;if("response"in y.g)return y.g.response;switch(y.H){case"":case"text":return y.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in y.g)return y.g.mozResponseArrayBuffer}return null}catch{return null}}function Th(y){const N={};y=(y.g&&2<=wi(y)&&y.g.getAllResponseHeaders()||"").split(`\r
`);for(let G=0;G<y.length;G++){if(S(y[G]))continue;var L=D(y[G]);const ae=L[0];if(L=L[1],typeof L!="string")continue;L=L.trim();const _e=N[ae]||[];N[ae]=_e,_e.push(L)}C(N,function(G){return G.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Xs(y,N,L){return L&&L.internalChannelParams&&L.internalChannelParams[y]||N}function Eh(y){this.Aa=0,this.i=[],this.j=new ge,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Xs("failFast",!1,y),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Xs("baseRetryDelayMs",5e3,y),this.cb=Xs("retryDelaySeedMs",1e4,y),this.Wa=Xs("forwardChannelMaxRetries",2,y),this.wa=Xs("forwardChannelRequestTimeoutMs",2e4,y),this.pa=y&&y.xmlHttpFactory||void 0,this.Xa=y&&y.Tb||void 0,this.Ca=y&&y.useFetchStreams||!1,this.L=void 0,this.J=y&&y.supportsCrossDomainXhr||!1,this.K="",this.h=new nt(y&&y.concurrentRequestLimit),this.Da=new Ib,this.P=y&&y.fastHandshake||!1,this.O=y&&y.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=y&&y.Rb||!1,y&&y.xa&&this.j.xa(),y&&y.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&y&&y.detectBufferingProxy||!1,this.ja=void 0,y&&y.longPollingTimeout&&0<y.longPollingTimeout&&(this.ja=y.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=Eh.prototype,n.la=8,n.G=1,n.connect=function(y,N,L,G){Hn(0),this.W=y,this.H=N||{},L&&G!==void 0&&(this.H.OSID=L,this.H.OAID=G),this.F=this.X,this.I=Ih(this,null,this.W),cl(this)};function Bc(y){if(Ch(y),y.G==3){var N=y.U++,L=Qi(y.I);if(tn(L,"SID",y.K),tn(L,"RID",N),tn(L,"TYPE","terminate"),vr(y,L),N=new Wt(y,y.j,N),N.L=2,N.v=si(Qi(L)),L=!1,a.navigator&&a.navigator.sendBeacon)try{L=a.navigator.sendBeacon(N.v.toString(),"")}catch{}!L&&a.Image&&(new Image().src=N.v,L=!0),L||(N.g=Gc(N.j,null),N.g.ea(N.v)),N.F=Date.now(),fe(N)}Yf(y)}function zc(y){y.g&&(Cs(y),y.g.cancel(),y.g=null)}function Ch(y){zc(y),y.u&&(a.clearTimeout(y.u),y.u=null),ya(y),y.h.cancel(),y.s&&(typeof y.s=="number"&&a.clearTimeout(y.s),y.s=null)}function cl(y){if(!We(y.h)&&!y.s){y.s=!0;var N=y.Ga;de||F(),W||(de(),W=!0),Z.add(N,y),y.B=0}}function ul(y,N){return vt(y.h)>=y.h.j-(y.s?1:0)?!1:y.s?(y.i=N.D.concat(y.i),!0):y.G==1||y.G==2||y.B>=(y.Va?0:y.Wa)?!1:(y.s=se(m(y.Ga,y,N),Hc(y,y.B)),y.B++,!0)}n.Ga=function(y){if(this.s)if(this.s=null,this.G==1){if(!y){this.U=Math.floor(1e5*Math.random()),y=this.U++;const ae=new Wt(this,this.j,y);let _e=this.o;if(this.S&&(_e?(_e=P(_e),A(_e,this.S)):_e=this.S),this.m!==null||this.O||(ae.H=_e,_e=null),this.P)e:{for(var N=0,L=0;L<this.i.length;L++){t:{var G=this.i[L];if("__data__"in G.map&&(G=G.map.__data__,typeof G=="string")){G=G.length;break t}G=void 0}if(G===void 0)break;if(N+=G,4096<N){N=L;break e}if(N===4096||L===this.i.length-1){N=L+1;break e}}N=1e3}else N=1e3;N=mo(this,ae,N),L=Qi(this.I),tn(L,"RID",y),tn(L,"CVER",22),this.D&&tn(L,"X-HTTP-Session-Id",this.D),vr(this,L),_e&&(this.O?N="headers="+encodeURIComponent(String(Ss(_e)))+"&"+N:this.m&&Ts(L,this.m,_e)),zt(this.h,ae),this.Ua&&tn(L,"TYPE","init"),this.P?(tn(L,"$req",N),tn(L,"SID","null"),ae.T=!0,jn(ae,L,null)):jn(ae,L,N),this.G=2}}else this.G==3&&(y?zr(this,y):this.i.length==0||We(this.h)||zr(this))};function zr(y,N){var L;N?L=N.l:L=y.U++;const G=Qi(y.I);tn(G,"SID",y.K),tn(G,"RID",L),tn(G,"AID",y.T),vr(y,G),y.m&&y.o&&Ts(G,y.m,y.o),L=new Wt(y,y.j,L,y.B+1),y.m===null&&(L.H=y.o),N&&(y.i=N.D.concat(y.i)),N=mo(y,L,1e3),L.I=Math.round(.5*y.wa)+Math.round(.5*y.wa*Math.random()),zt(y.h,L),jn(L,G,N)}function vr(y,N){y.H&&O(y.H,function(L,G){tn(N,G,L)}),y.l&&pn({},function(L,G){tn(N,G,L)})}function mo(y,N,L){L=Math.min(y.i.length,L);var G=y.l?m(y.l.Na,y.l,y):null;e:{var ae=y.i;let _e=-1;for(;;){const Be=["count="+L];_e==-1?0<L?(_e=ae[0].g,Be.push("ofs="+_e)):_e=0:Be.push("ofs="+_e);let Sn=!0;for(let Ii=0;Ii<L;Ii++){let gn=ae[Ii].g;const Pi=ae[Ii].map;if(gn-=_e,0>gn)_e=Math.max(0,ae[Ii].g-100),Sn=!1;else try{$f(Pi,Be,"req"+gn+"_")}catch{G&&G(Pi)}}if(Sn){G=Be.join("&");break e}}}return y=y.i.splice(0,L),N.D=y,G}function Ah(y){if(!y.g&&!y.u){y.Y=1;var N=y.Fa;de||F(),W||(de(),W=!0),Z.add(N,y),y.v=0}}function Mh(y){return y.g||y.u||3<=y.v?!1:(y.Y++,y.u=se(m(y.Fa,y),Hc(y,y.v)),y.v++,!0)}n.Fa=function(){if(this.u=null,go(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var y=2*this.R;this.j.info("BP detection timer enabled: "+y),this.A=se(m(this.ab,this),y)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Hn(10),zc(this),go(this))};function Cs(y){y.A!=null&&(a.clearTimeout(y.A),y.A=null)}function go(y){y.g=new Wt(y,y.j,"rpc",y.Y),y.m===null&&(y.g.H=y.o),y.g.O=0;var N=Qi(y.qa);tn(N,"RID","rpc"),tn(N,"SID",y.K),tn(N,"AID",y.T),tn(N,"CI",y.F?"0":"1"),!y.F&&y.ja&&tn(N,"TO",y.ja),tn(N,"TYPE","xmlhttp"),vr(y,N),y.m&&y.o&&Ts(N,y.m,y.o),y.L&&(y.g.I=y.L);var L=y.g;y=y.ia,L.L=1,L.v=si(Qi(N)),L.m=null,L.P=!0,H(L,y)}n.Za=function(){this.C!=null&&(this.C=null,zc(this),Mh(this),Hn(19))};function ya(y){y.C!=null&&(a.clearTimeout(y.C),y.C=null)}function Kf(y,N){var L=null;if(y.g==N){ya(y),Cs(y),y.g=null;var G=2}else if(Et(y.h,N))L=N.D,en(y.h,N),G=1;else return;if(y.G!=0){if(N.o)if(G==1){L=N.m?N.m.length:0,N=Date.now()-N.F;var ae=y.B;G=kn(),He(G,new Q(G,L)),cl(y)}else Ah(y);else if(ae=N.s,ae==3||ae==0&&0<N.X||!(G==1&&ul(y,N)||G==2&&Mh(y)))switch(L&&0<L.length&&(N=y.h,N.i=N.i.concat(L)),ae){case 1:Bo(y,5);break;case 4:Bo(y,10);break;case 3:Bo(y,6);break;default:Bo(y,2)}}}function Hc(y,N){let L=y.Ta+Math.floor(Math.random()*y.cb);return y.isActive()||(L*=2),L*N}function Bo(y,N){if(y.j.info("Error code "+N),N==2){var L=m(y.fb,y),G=y.Xa;const ae=!G;G=new Jn(G||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||ln(G,"https"),si(G),ae?Mb(G.toString(),L):Mi(G.toString(),L)}else Hn(2);y.G=0,y.l&&y.l.sa(N),Yf(y),Ch(y)}n.fb=function(y){y?(this.j.info("Successfully pinged google.com"),Hn(2)):(this.j.info("Failed to ping google.com"),Hn(1))};function Yf(y){if(y.G=0,y.ka=[],y.l){const N=$t(y.h);(N.length!=0||y.i.length!=0)&&(w(y.ka,N),w(y.ka,y.i),y.h.i.length=0,b(y.i),y.i.length=0),y.l.ra()}}function Ih(y,N,L){var G=L instanceof Jn?Qi(L):new Jn(L);if(G.g!="")N&&(G.g=N+"."+G.g),Hi(G,G.s);else{var ae=a.location;G=ae.protocol,N=N?N+"."+ae.hostname:ae.hostname,ae=+ae.port;var _e=new Jn(null);G&&ln(_e,G),N&&(_e.g=N),ae&&Hi(_e,ae),L&&(_e.l=L),G=_e}return L=y.D,N=y.ya,L&&N&&tn(G,L,N),tn(G,"VER",y.la),vr(y,G),G}function Gc(y,N,L){if(N&&!y.J)throw Error("Can't create secondary domain capable XhrIo object.");return N=y.Ca&&!y.pa?new Kn(new Sh({eb:L})):new Kn(y.pa),N.Ha(y.J),N}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function Jf(){}n=Jf.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function Wc(){}Wc.prototype.g=function(y,N){return new xr(y,N)};function xr(y,N){we.call(this),this.g=new Eh(N),this.l=y,this.h=N&&N.messageUrlParams||null,y=N&&N.messageHeaders||null,N&&N.clientProtocolHeaderRequired&&(y?y["X-Client-Protocol"]="webchannel":y={"X-Client-Protocol":"webchannel"}),this.g.o=y,y=N&&N.initMessageHeaders||null,N&&N.messageContentType&&(y?y["X-WebChannel-Content-Type"]=N.messageContentType:y={"X-WebChannel-Content-Type":N.messageContentType}),N&&N.va&&(y?y["X-WebChannel-Client-Profile"]=N.va:y={"X-WebChannel-Client-Profile":N.va}),this.g.S=y,(y=N&&N.Sb)&&!S(y)&&(this.g.m=y),this.v=N&&N.supportsCrossDomainXhr||!1,this.u=N&&N.sendRawJson||!1,(N=N&&N.httpSessionIdParam)&&!S(N)&&(this.g.D=N,y=this.h,y!==null&&N in y&&(y=this.h,N in y&&delete y[N])),this.j=new As(this)}x(xr,we),xr.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},xr.prototype.close=function(){Bc(this.g)},xr.prototype.o=function(y){var N=this.g;if(typeof y=="string"){var L={};L.__data__=y,y=L}else this.u&&(L={},L.__data__=ut(y),y=L);N.i.push(new $e(N.Ya++,y)),N.G==3&&cl(N)},xr.prototype.N=function(){this.g.l=null,delete this.j,Bc(this.g),delete this.g,xr.aa.N.call(this)};function Ph(y){Ie.call(this),y.__headers__&&(this.headers=y.__headers__,this.statusCode=y.__status__,delete y.__headers__,delete y.__status__);var N=y.__sm__;if(N){e:{for(const L in N){y=L;break e}y=void 0}(this.i=y)&&(y=this.i,N=N!==null&&y in N?N[y]:void 0),this.data=N}else this.data=y}x(Ph,Ie);function va(){it.call(this),this.status=1}x(va,it);function As(y){this.g=y}x(As,Jf),As.prototype.ua=function(){He(this.g,"a")},As.prototype.ta=function(y){He(this.g,new Ph(y))},As.prototype.sa=function(y){He(this.g,new va)},As.prototype.ra=function(){He(this.g,"b")},Wc.prototype.createWebChannel=Wc.prototype.g,xr.prototype.send=xr.prototype.o,xr.prototype.open=xr.prototype.m,xr.prototype.close=xr.prototype.close,Xz=function(){return new Wc},$z=function(){return kn()},qz=Ke,Q1={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},ht.NO_ERROR=0,ht.TIMEOUT=8,ht.HTTP_ERROR=6,Zx=ht,dt.COMPLETE="complete",Wz=dt,Ze.EventType=be,be.OPEN="a",be.CLOSE="b",be.ERROR="c",be.MESSAGE="d",we.prototype.listen=we.prototype.K,em=Ze,Kn.prototype.listenOnce=Kn.prototype.L,Kn.prototype.getLastError=Kn.prototype.Ka,Kn.prototype.getLastErrorCode=Kn.prototype.Ba,Kn.prototype.getStatus=Kn.prototype.Z,Kn.prototype.getResponseJson=Kn.prototype.Oa,Kn.prototype.getResponseText=Kn.prototype.oa,Kn.prototype.send=Kn.prototype.ea,Kn.prototype.setWithCredentials=Kn.prototype.Ha,Gz=Kn}).apply(typeof xx<"u"?xx:typeof self<"u"?self:typeof window<"u"?window:{});const l3="@firebase/firestore",c3="4.7.9";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rr{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Rr.UNAUTHENTICATED=new Rr(null),Rr.GOOGLE_CREDENTIALS=new Rr("google-credentials-uid"),Rr.FIRST_PARTY=new Rr("first-party-uid"),Rr.MOCK_USER=new Rr("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ff="11.4.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ah=new XM("@firebase/firestore");function ud(){return ah.logLevel}function _t(n,...e){if(ah.logLevel<=vn.DEBUG){const t=e.map(oI);ah.debug(`Firestore (${Ff}): ${n}`,...t)}}function nl(n,...e){if(ah.logLevel<=vn.ERROR){const t=e.map(oI);ah.error(`Firestore (${Ff}): ${n}`,...t)}}function yf(n,...e){if(ah.logLevel<=vn.WARN){const t=e.map(oI);ah.warn(`Firestore (${Ff}): ${n}`,...t)}}function oI(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(t){return JSON.stringify(t)}(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ht(n="Unexpected state"){const e=`FIRESTORE (${Ff}) INTERNAL ASSERTION FAILED: `+n;throw nl(e),new Error(e)}function zn(n,e){n||Ht()}function Qt(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ne={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class wt extends sl{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ga{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kz{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class Rce{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Rr.UNAUTHENTICATED))}shutdown(){}}class Nce{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class Dce{constructor(e){this.t=e,this.currentUser=Rr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){zn(this.o===void 0);let i=this.i;const r=l=>this.i!==i?(i=this.i,t(l)):Promise.resolve();let s=new Ga;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Ga,e.enqueueRetryable(()=>r(this.currentUser))};const o=()=>{const l=s;e.enqueueRetryable(async()=>{await l.promise,await r(this.currentUser)})},a=l=>{_t("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(_t("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Ga)}},0),o()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(i=>this.i!==e?(_t("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(zn(typeof i.accessToken=="string"),new Kz(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return zn(e===null||typeof e=="string"),new Rr(e)}}class Lce{constructor(e,t,i){this.l=e,this.h=t,this.P=i,this.type="FirstParty",this.user=Rr.FIRST_PARTY,this.T=new Map}I(){return this.P?this.P():null}get headers(){this.T.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.T.set("Authorization",e),this.h&&this.T.set("X-Goog-Iam-Authorization-Token",this.h),this.T}}class kce{constructor(e,t,i){this.l=e,this.h=t,this.P=i}getToken(){return Promise.resolve(new Lce(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(Rr.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class u3{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Oce{constructor(e,t){this.A=t,this.forceRefresh=!1,this.appCheck=null,this.R=null,this.V=null,oo(e)&&e.settings.appCheckToken&&(this.V=e.settings.appCheckToken)}start(e,t){zn(this.o===void 0);const i=s=>{s.error!=null&&_t("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.R;return this.R=s.token,_t("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?t(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>i(s))};const r=s=>{_t("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>r(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?r(s):_t("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.V)return Promise.resolve(new u3(this.V));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(zn(typeof t.token=="string"),this.R=t.token,new u3(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uce(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let i=0;i<n;i++)t[i]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yz{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const r=Uce(40);for(let s=0;s<r.length;++s)i.length<20&&r[s]<t&&(i+=e.charAt(r[s]%62))}return i}}function Tn(n,e){return n<e?-1:n>e?1:0}function vf(n,e,t){return n.length===e.length&&n.every((i,r)=>t(i,e[r]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h3=-62135596800,d3=1e6;class Bi{static now(){return Bi.fromMillis(Date.now())}static fromDate(e){return Bi.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),i=Math.floor((e-1e3*t)*d3);return new Bi(t,i)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new wt(Ne.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new wt(Ne.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<h3)throw new wt(Ne.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new wt(Ne.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/d3}_compareTo(e){return this.seconds===e.seconds?Tn(this.nanoseconds,e.nanoseconds):Tn(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds-h3;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xt{static fromTimestamp(e){return new Xt(e)}static min(){return new Xt(new Bi(0,0))}static max(){return new Xt(new Bi(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f3="__name__";class Xo{constructor(e,t,i){t===void 0?t=0:t>e.length&&Ht(),i===void 0?i=e.length-t:i>e.length-t&&Ht(),this.segments=e,this.offset=t,this.len=i}get length(){return this.len}isEqual(e){return Xo.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Xo?e.forEach(i=>{t.push(i)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,i=this.limit();t<i;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const i=Math.min(e.length,t.length);for(let r=0;r<i;r++){const s=Xo.compareSegments(e.get(r),t.get(r));if(s!==0)return s}return Math.sign(e.length-t.length)}static compareSegments(e,t){const i=Xo.isNumericId(e),r=Xo.isNumericId(t);return i&&!r?-1:!i&&r?1:i&&r?Xo.extractNumericId(e).compare(Xo.extractNumericId(t)):e<t?-1:e>t?1:0}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return sc.fromString(e.substring(4,e.length-2))}}class ni extends Xo{construct(e,t,i){return new ni(e,t,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const i of e){if(i.indexOf("//")>=0)throw new wt(Ne.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);t.push(...i.split("/").filter(r=>r.length>0))}return new ni(t)}static emptyPath(){return new ni([])}}const Fce=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class fr extends Xo{construct(e,t,i){return new fr(e,t,i)}static isValidIdentifier(e){return Fce.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),fr.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===f3}static keyField(){return new fr([f3])}static fromServerFormat(e){const t=[];let i="",r=0;const s=()=>{if(i.length===0)throw new wt(Ne.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(i),i=""};let o=!1;for(;r<e.length;){const a=e[r];if(a==="\\"){if(r+1===e.length)throw new wt(Ne.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[r+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new wt(Ne.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=l,r+=2}else a==="`"?(o=!o,r++):a!=="."||o?(i+=a,r++):(s(),r++)}if(s(),o)throw new wt(Ne.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new fr(t)}static emptyPath(){return new fr([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dt{constructor(e){this.path=e}static fromPath(e){return new Dt(ni.fromString(e))}static fromName(e){return new Dt(ni.fromString(e).popFirst(5))}static empty(){return new Dt(ni.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&ni.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return ni.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new Dt(new ni(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mg=-1;function jce(n,e){const t=n.toTimestamp().seconds,i=n.toTimestamp().nanoseconds+1,r=Xt.fromTimestamp(i===1e9?new Bi(t+1,0):new Bi(t,i));return new mc(r,Dt.empty(),e)}function Vce(n){return new mc(n.readTime,n.key,Mg)}class mc{constructor(e,t,i){this.readTime=e,this.documentKey=t,this.largestBatchId=i}static min(){return new mc(Xt.min(),Dt.empty(),Mg)}static max(){return new mc(Xt.max(),Dt.empty(),Mg)}}function Bce(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=Dt.comparator(n.documentKey,e.documentKey),t!==0?t:Tn(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zce="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class Hce{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jf(n){if(n.code!==Ne.FAILED_PRECONDITION||n.message!==zce)throw n;_t("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class De{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Ht(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new De((i,r)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(i,r)},this.catchCallback=s=>{this.wrapFailure(t,s).next(i,r)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof De?t:De.resolve(t)}catch(t){return De.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):De.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):De.reject(t)}static resolve(e){return new De((t,i)=>{t(e)})}static reject(e){return new De((t,i)=>{i(e)})}static waitFor(e){return new De((t,i)=>{let r=0,s=0,o=!1;e.forEach(a=>{++r,a.next(()=>{++s,o&&s===r&&t()},l=>i(l))}),o=!0,s===r&&t()})}static or(e){let t=De.resolve(!1);for(const i of e)t=t.next(r=>r?De.resolve(r):i());return t}static forEach(e,t){const i=[];return e.forEach((r,s)=>{i.push(t.call(this,r,s))}),this.waitFor(i)}static mapArray(e,t){return new De((i,r)=>{const s=e.length,o=new Array(s);let a=0;for(let l=0;l<s;l++){const c=l;t(e[c]).next(u=>{o[c]=u,++a,a===s&&i(o)},u=>r(u))}})}static doWhile(e,t){return new De((i,r)=>{const s=()=>{e()===!0?t().next(()=>{s()},r):i()};s()})}}function Gce(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Vf(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nb{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=i=>this.oe(i),this._e=i=>t.writeSequenceNumber(i))}oe(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this._e&&this._e(e),e}}nb.ae=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aI=-1;function ib(n){return n==null}function O_(n){return n===0&&1/n==-1/0}function Wce(n){return typeof n=="number"&&Number.isInteger(n)&&!O_(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jz="";function qce(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=p3(e)),e=$ce(n.get(t),e);return p3(e)}function $ce(n,e){let t=e;const i=n.length;for(let r=0;r<i;r++){const s=n.charAt(r);switch(s){case"\0":t+="";break;case Jz:t+="";break;default:t+=s}}return t}function p3(n){return n+Jz+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function m3(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Lc(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function Qz(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mi{constructor(e,t){this.comparator=e,this.root=t||hr.EMPTY}insert(e,t){return new mi(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,hr.BLACK,null,null))}remove(e){return new mi(this.comparator,this.root.remove(e,this.comparator).copy(null,null,hr.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const i=this.comparator(e,t.key);if(i===0)return t.value;i<0?t=t.left:i>0&&(t=t.right)}return null}indexOf(e){let t=0,i=this.root;for(;!i.isEmpty();){const r=this.comparator(e,i.key);if(r===0)return t+i.left.size;r<0?i=i.left:(t+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,i)=>(e(t,i),!1))}toString(){const e=[];return this.inorderTraversal((t,i)=>(e.push(`${t}:${i}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new _x(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new _x(this.root,e,this.comparator,!1)}getReverseIterator(){return new _x(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new _x(this.root,e,this.comparator,!0)}}class _x{constructor(e,t,i,r){this.isReverse=r,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?i(e.key,t):1,t&&r&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class hr{constructor(e,t,i,r,s){this.key=e,this.value=t,this.color=i??hr.RED,this.left=r??hr.EMPTY,this.right=s??hr.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,i,r,s){return new hr(e??this.key,t??this.value,i??this.color,r??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,i){let r=this;const s=i(e,r.key);return r=s<0?r.copy(null,null,null,r.left.insert(e,t,i),null):s===0?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,i)),r.fixUp()}removeMin(){if(this.left.isEmpty())return hr.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let i,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),t(e,r.key)===0){if(r.right.isEmpty())return hr.EMPTY;i=r.right.min(),r=r.copy(i.key,i.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,hr.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,hr.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Ht();const e=this.left.check();if(e!==this.right.check())throw Ht();return e+(this.isRed()?0:1)}}hr.EMPTY=null,hr.RED=!0,hr.BLACK=!1;hr.EMPTY=new class{constructor(){this.size=0}get key(){throw Ht()}get value(){throw Ht()}get color(){throw Ht()}get left(){throw Ht()}get right(){throw Ht()}copy(e,t,i,r,s){return this}insert(e,t,i){return new hr(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ki{constructor(e){this.comparator=e,this.data=new mi(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,i)=>(e(t),!1))}forEachInRange(e,t){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const r=i.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let i;for(i=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new g3(this.data.getIterator())}getIteratorFrom(e){return new g3(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(i=>{t=t.add(i)}),t}isEqual(e){if(!(e instanceof Ki)||this.size!==e.size)return!1;const t=this.data.getIterator(),i=e.data.getIterator();for(;t.hasNext();){const r=t.getNext().key,s=i.getNext().key;if(this.comparator(r,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Ki(this.comparator);return t.data=e,t}}class g3{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ks{constructor(e){this.fields=e,e.sort(fr.comparator)}static empty(){return new ks([])}unionWith(e){let t=new Ki(fr.comparator);for(const i of this.fields)t=t.add(i);for(const i of e)t=t.add(i);return new ks(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return vf(this.fields,e.fields,(t,i)=>t.isEqual(i))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zz extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yr{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(r){try{return atob(r)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new Zz("Invalid base64 string: "+s):s}}(e);return new yr(t)}static fromUint8Array(e){const t=function(r){let s="";for(let o=0;o<r.length;++o)s+=String.fromCharCode(r[o]);return s}(e);return new yr(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){const i=new Uint8Array(t.length);for(let r=0;r<t.length;r++)i[r]=t.charCodeAt(r);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return Tn(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}yr.EMPTY_BYTE_STRING=new yr("");const Xce=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function gc(n){if(zn(!!n),typeof n=="string"){let e=0;const t=Xce.exec(n);if(zn(!!t),t[1]){let r=t[1];r=(r+"000000000").substr(0,9),e=Number(r)}const i=new Date(n);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:Ci(n.seconds),nanos:Ci(n.nanos)}}function Ci(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function yc(n){return typeof n=="string"?yr.fromBase64String(n):yr.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e5="server_timestamp",t5="__type__",n5="__previous_value__",i5="__local_write_time__";function lI(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{})[t5])===null||t===void 0?void 0:t.stringValue)===e5}function rb(n){const e=n.mapValue.fields[n5];return lI(e)?rb(e):e}function Ig(n){const e=gc(n.mapValue.fields[i5].timestampValue);return new Bi(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kce{constructor(e,t,i,r,s,o,a,l,c){this.databaseId=e,this.appId=t,this.persistenceKey=i,this.host=r,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=c}}const U_="(default)";class Pg{constructor(e,t){this.projectId=e,this.database=t||U_}static empty(){return new Pg("","")}get isDefaultDatabase(){return this.database===U_}isEqual(e){return e instanceof Pg&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r5="__type__",Yce="__max__",wx={mapValue:{}},s5="__vector__",F_="value";function vc(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?lI(n)?4:Qce(n)?9007199254740991:Jce(n)?10:11:Ht()}function ha(n,e){if(n===e)return!0;const t=vc(n);if(t!==vc(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return Ig(n).isEqual(Ig(e));case 3:return function(r,s){if(typeof r.timestampValue=="string"&&typeof s.timestampValue=="string"&&r.timestampValue.length===s.timestampValue.length)return r.timestampValue===s.timestampValue;const o=gc(r.timestampValue),a=gc(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(r,s){return yc(r.bytesValue).isEqual(yc(s.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,s){return Ci(r.geoPointValue.latitude)===Ci(s.geoPointValue.latitude)&&Ci(r.geoPointValue.longitude)===Ci(s.geoPointValue.longitude)}(n,e);case 2:return function(r,s){if("integerValue"in r&&"integerValue"in s)return Ci(r.integerValue)===Ci(s.integerValue);if("doubleValue"in r&&"doubleValue"in s){const o=Ci(r.doubleValue),a=Ci(s.doubleValue);return o===a?O_(o)===O_(a):isNaN(o)&&isNaN(a)}return!1}(n,e);case 9:return vf(n.arrayValue.values||[],e.arrayValue.values||[],ha);case 10:case 11:return function(r,s){const o=r.mapValue.fields||{},a=s.mapValue.fields||{};if(m3(o)!==m3(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!ha(o[l],a[l])))return!1;return!0}(n,e);default:return Ht()}}function Rg(n,e){return(n.values||[]).find(t=>ha(t,e))!==void 0}function xf(n,e){if(n===e)return 0;const t=vc(n),i=vc(e);if(t!==i)return Tn(t,i);switch(t){case 0:case 9007199254740991:return 0;case 1:return Tn(n.booleanValue,e.booleanValue);case 2:return function(s,o){const a=Ci(s.integerValue||s.doubleValue),l=Ci(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(n,e);case 3:return y3(n.timestampValue,e.timestampValue);case 4:return y3(Ig(n),Ig(e));case 5:return Tn(n.stringValue,e.stringValue);case 6:return function(s,o){const a=yc(s),l=yc(o);return a.compareTo(l)}(n.bytesValue,e.bytesValue);case 7:return function(s,o){const a=s.split("/"),l=o.split("/");for(let c=0;c<a.length&&c<l.length;c++){const u=Tn(a[c],l[c]);if(u!==0)return u}return Tn(a.length,l.length)}(n.referenceValue,e.referenceValue);case 8:return function(s,o){const a=Tn(Ci(s.latitude),Ci(o.latitude));return a!==0?a:Tn(Ci(s.longitude),Ci(o.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return v3(n.arrayValue,e.arrayValue);case 10:return function(s,o){var a,l,c,u;const f=s.fields||{},m=o.fields||{},g=(a=f[F_])===null||a===void 0?void 0:a.arrayValue,x=(l=m[F_])===null||l===void 0?void 0:l.arrayValue,b=Tn(((c=g?.values)===null||c===void 0?void 0:c.length)||0,((u=x?.values)===null||u===void 0?void 0:u.length)||0);return b!==0?b:v3(g,x)}(n.mapValue,e.mapValue);case 11:return function(s,o){if(s===wx.mapValue&&o===wx.mapValue)return 0;if(s===wx.mapValue)return 1;if(o===wx.mapValue)return-1;const a=s.fields||{},l=Object.keys(a),c=o.fields||{},u=Object.keys(c);l.sort(),u.sort();for(let f=0;f<l.length&&f<u.length;++f){const m=Tn(l[f],u[f]);if(m!==0)return m;const g=xf(a[l[f]],c[u[f]]);if(g!==0)return g}return Tn(l.length,u.length)}(n.mapValue,e.mapValue);default:throw Ht()}}function y3(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return Tn(n,e);const t=gc(n),i=gc(e),r=Tn(t.seconds,i.seconds);return r!==0?r:Tn(t.nanos,i.nanos)}function v3(n,e){const t=n.values||[],i=e.values||[];for(let r=0;r<t.length&&r<i.length;++r){const s=xf(t[r],i[r]);if(s)return s}return Tn(t.length,i.length)}function _f(n){return Z1(n)}function Z1(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){const i=gc(t);return`time(${i.seconds},${i.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return yc(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return Dt.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let i="[",r=!0;for(const s of t.values||[])r?r=!1:i+=",",i+=Z1(s);return i+"]"}(n.arrayValue):"mapValue"in n?function(t){const i=Object.keys(t.fields||{}).sort();let r="{",s=!0;for(const o of i)s?s=!1:r+=",",r+=`${o}:${Z1(t.fields[o])}`;return r+"}"}(n.mapValue):Ht()}function e0(n){switch(vc(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=rb(n);return e?16+e0(e):16;case 5:return 2*n.stringValue.length;case 6:return yc(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return function(i){return(i.values||[]).reduce((r,s)=>r+e0(s),0)}(n.arrayValue);case 10:case 11:return function(i){let r=0;return Lc(i.fields,(s,o)=>{r+=s.length+e0(o)}),r}(n.mapValue);default:throw Ht()}}function x3(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function eC(n){return!!n&&"integerValue"in n}function cI(n){return!!n&&"arrayValue"in n}function _3(n){return!!n&&"nullValue"in n}function w3(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function t0(n){return!!n&&"mapValue"in n}function Jce(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{})[r5])===null||t===void 0?void 0:t.stringValue)===s5}function Im(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return Lc(n.mapValue.fields,(t,i)=>e.mapValue.fields[t]=Im(i)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Im(n.arrayValue.values[t]);return e}return Object.assign({},n)}function Qce(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===Yce}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ps{constructor(e){this.value=e}static empty(){return new ps({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let i=0;i<e.length-1;++i)if(t=(t.mapValue.fields||{})[e.get(i)],!t0(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Im(t)}setAll(e){let t=fr.emptyPath(),i={},r=[];e.forEach((o,a)=>{if(!t.isImmediateParentOf(a)){const l=this.getFieldsMap(t);this.applyChanges(l,i,r),i={},r=[],t=a.popLast()}o?i[a.lastSegment()]=Im(o):r.push(a.lastSegment())});const s=this.getFieldsMap(t);this.applyChanges(s,i,r)}delete(e){const t=this.field(e.popLast());t0(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return ha(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let i=0;i<e.length;++i){let r=t.mapValue.fields[e.get(i)];t0(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(i)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,i){Lc(t,(r,s)=>e[r]=s);for(const r of i)delete e[r]}clone(){return new ps(Im(this.value))}}function o5(n){const e=[];return Lc(n.fields,(t,i)=>{const r=new fr([t]);if(t0(i)){const s=o5(i.mapValue).fields;if(s.length===0)e.push(r);else for(const o of s)e.push(r.child(o))}else e.push(r)}),new ks(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dr{constructor(e,t,i,r,s,o,a){this.key=e,this.documentType=t,this.version=i,this.readTime=r,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new Dr(e,0,Xt.min(),Xt.min(),Xt.min(),ps.empty(),0)}static newFoundDocument(e,t,i,r){return new Dr(e,1,t,Xt.min(),i,r,0)}static newNoDocument(e,t){return new Dr(e,2,t,Xt.min(),Xt.min(),ps.empty(),0)}static newUnknownDocument(e,t){return new Dr(e,3,t,Xt.min(),Xt.min(),ps.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Xt.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=ps.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=ps.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Xt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Dr&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Dr(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j_{constructor(e,t){this.position=e,this.inclusive=t}}function b3(n,e,t){let i=0;for(let r=0;r<n.position.length;r++){const s=e[r],o=n.position[r];if(s.field.isKeyField()?i=Dt.comparator(Dt.fromName(o.referenceValue),t.key):i=xf(o,t.data.field(s.field)),s.dir==="desc"&&(i*=-1),i!==0)break}return i}function S3(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!ha(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ng{constructor(e,t="asc"){this.field=e,this.dir=t}}function Zce(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class a5{}class ji extends a5{constructor(e,t,i){super(),this.field=e,this.op=t,this.value=i}static create(e,t,i){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,i):new tue(e,t,i):t==="array-contains"?new rue(e,i):t==="in"?new sue(e,i):t==="not-in"?new oue(e,i):t==="array-contains-any"?new aue(e,i):new ji(e,t,i)}static createKeyFieldInFilter(e,t,i){return t==="in"?new nue(e,i):new iue(e,i)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&this.matchesComparison(xf(t,this.value)):t!==null&&vc(this.value)===vc(t)&&this.matchesComparison(xf(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Ht()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Uo extends a5{constructor(e,t){super(),this.filters=e,this.op=t,this.ce=null}static create(e,t){return new Uo(e,t)}matches(e){return l5(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.ce!==null||(this.ce=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ce}getFilters(){return Object.assign([],this.filters)}}function l5(n){return n.op==="and"}function c5(n){return eue(n)&&l5(n)}function eue(n){for(const e of n.filters)if(e instanceof Uo)return!1;return!0}function tC(n){if(n instanceof ji)return n.field.canonicalString()+n.op.toString()+_f(n.value);if(c5(n))return n.filters.map(e=>tC(e)).join(",");{const e=n.filters.map(t=>tC(t)).join(",");return`${n.op}(${e})`}}function u5(n,e){return n instanceof ji?function(i,r){return r instanceof ji&&i.op===r.op&&i.field.isEqual(r.field)&&ha(i.value,r.value)}(n,e):n instanceof Uo?function(i,r){return r instanceof Uo&&i.op===r.op&&i.filters.length===r.filters.length?i.filters.reduce((s,o,a)=>s&&u5(o,r.filters[a]),!0):!1}(n,e):void Ht()}function h5(n){return n instanceof ji?function(t){return`${t.field.canonicalString()} ${t.op} ${_f(t.value)}`}(n):n instanceof Uo?function(t){return t.op.toString()+" {"+t.getFilters().map(h5).join(" ,")+"}"}(n):"Filter"}class tue extends ji{constructor(e,t,i){super(e,t,i),this.key=Dt.fromName(i.referenceValue)}matches(e){const t=Dt.comparator(e.key,this.key);return this.matchesComparison(t)}}class nue extends ji{constructor(e,t){super(e,"in",t),this.keys=d5("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class iue extends ji{constructor(e,t){super(e,"not-in",t),this.keys=d5("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function d5(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(i=>Dt.fromName(i.referenceValue))}class rue extends ji{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return cI(t)&&Rg(t.arrayValue,this.value)}}class sue extends ji{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Rg(this.value.arrayValue,t)}}class oue extends ji{constructor(e,t){super(e,"not-in",t)}matches(e){if(Rg(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&!Rg(this.value.arrayValue,t)}}class aue extends ji{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!cI(t)||!t.arrayValue.values)&&t.arrayValue.values.some(i=>Rg(this.value.arrayValue,i))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lue{constructor(e,t=null,i=[],r=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=i,this.filters=r,this.limit=s,this.startAt=o,this.endAt=a,this.le=null}}function T3(n,e=null,t=[],i=[],r=null,s=null,o=null){return new lue(n,e,t,i,r,s,o)}function uI(n){const e=Qt(n);if(e.le===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(i=>tC(i)).join(","),t+="|ob:",t+=e.orderBy.map(i=>function(s){return s.field.canonicalString()+s.dir}(i)).join(","),ib(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(i=>_f(i)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(i=>_f(i)).join(",")),e.le=t}return e.le}function hI(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!Zce(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!u5(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!S3(n.startAt,e.startAt)&&S3(n.endAt,e.endAt)}function nC(n){return Dt.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bf{constructor(e,t=null,i=[],r=[],s=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=i,this.filters=r,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=l,this.he=null,this.Pe=null,this.Te=null,this.startAt,this.endAt}}function cue(n,e,t,i,r,s,o,a){return new Bf(n,e,t,i,r,s,o,a)}function sb(n){return new Bf(n)}function E3(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function f5(n){return n.collectionGroup!==null}function Pm(n){const e=Qt(n);if(e.he===null){e.he=[];const t=new Set;for(const s of e.explicitOrderBy)e.he.push(s),t.add(s.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new Ki(fr.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(c=>{c.isInequality()&&(a=a.add(c.field))})}),a})(e).forEach(s=>{t.has(s.canonicalString())||s.isKeyField()||e.he.push(new Ng(s,i))}),t.has(fr.keyField().canonicalString())||e.he.push(new Ng(fr.keyField(),i))}return e.he}function la(n){const e=Qt(n);return e.Pe||(e.Pe=uue(e,Pm(n))),e.Pe}function uue(n,e){if(n.limitType==="F")return T3(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(r=>{const s=r.dir==="desc"?"asc":"desc";return new Ng(r.field,s)});const t=n.endAt?new j_(n.endAt.position,n.endAt.inclusive):null,i=n.startAt?new j_(n.startAt.position,n.startAt.inclusive):null;return T3(n.path,n.collectionGroup,e,n.filters,n.limit,t,i)}}function iC(n,e){const t=n.filters.concat([e]);return new Bf(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function V_(n,e,t){return new Bf(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function ob(n,e){return hI(la(n),la(e))&&n.limitType===e.limitType}function p5(n){return`${uI(la(n))}|lt:${n.limitType}`}function hd(n){return`Query(target=${function(t){let i=t.path.canonicalString();return t.collectionGroup!==null&&(i+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(i+=`, filters: [${t.filters.map(r=>h5(r)).join(", ")}]`),ib(t.limit)||(i+=", limit: "+t.limit),t.orderBy.length>0&&(i+=`, orderBy: [${t.orderBy.map(r=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(r)).join(", ")}]`),t.startAt&&(i+=", startAt: ",i+=t.startAt.inclusive?"b:":"a:",i+=t.startAt.position.map(r=>_f(r)).join(",")),t.endAt&&(i+=", endAt: ",i+=t.endAt.inclusive?"a:":"b:",i+=t.endAt.position.map(r=>_f(r)).join(",")),`Target(${i})`}(la(n))}; limitType=${n.limitType})`}function ab(n,e){return e.isFoundDocument()&&function(i,r){const s=r.key.path;return i.collectionGroup!==null?r.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(s):Dt.isDocumentKey(i.path)?i.path.isEqual(s):i.path.isImmediateParentOf(s)}(n,e)&&function(i,r){for(const s of Pm(i))if(!s.field.isKeyField()&&r.data.field(s.field)===null)return!1;return!0}(n,e)&&function(i,r){for(const s of i.filters)if(!s.matches(r))return!1;return!0}(n,e)&&function(i,r){return!(i.startAt&&!function(o,a,l){const c=b3(o,a,l);return o.inclusive?c<=0:c<0}(i.startAt,Pm(i),r)||i.endAt&&!function(o,a,l){const c=b3(o,a,l);return o.inclusive?c>=0:c>0}(i.endAt,Pm(i),r))}(n,e)}function hue(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function m5(n){return(e,t)=>{let i=!1;for(const r of Pm(n)){const s=due(r,e,t);if(s!==0)return s;i=i||r.field.isKeyField()}return 0}}function due(n,e,t){const i=n.field.isKeyField()?Dt.comparator(e.key,t.key):function(s,o,a){const l=o.data.field(s),c=a.data.field(s);return l!==null&&c!==null?xf(l,c):Ht()}(n.field,e,t);switch(n.dir){case"asc":return i;case"desc":return-1*i;default:return Ht()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xh{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i!==void 0){for(const[r,s]of i)if(this.equalsFn(r,e))return s}}has(e){return this.get(e)!==void 0}set(e,t){const i=this.mapKeyFn(e),r=this.inner[i];if(r===void 0)return this.inner[i]=[[e,t]],void this.innerSize++;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return void(r[s]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i===void 0)return!1;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],e))return i.length===1?delete this.inner[t]:i.splice(r,1),this.innerSize--,!0;return!1}forEach(e){Lc(this.inner,(t,i)=>{for(const[r,s]of i)e(r,s)})}isEmpty(){return Qz(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fue=new mi(Dt.comparator);function il(){return fue}const g5=new mi(Dt.comparator);function tm(...n){let e=g5;for(const t of n)e=e.insert(t.key,t);return e}function y5(n){let e=g5;return n.forEach((t,i)=>e=e.insert(t,i.overlayedDocument)),e}function Du(){return Rm()}function v5(){return Rm()}function Rm(){return new xh(n=>n.toString(),(n,e)=>n.isEqual(e))}const pue=new mi(Dt.comparator),mue=new Ki(Dt.comparator);function _n(...n){let e=mue;for(const t of n)e=e.add(t);return e}const gue=new Ki(Tn);function yue(){return gue}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function dI(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:O_(e)?"-0":e}}function x5(n){return{integerValue:""+n}}function vue(n,e){return Wce(e)?x5(e):dI(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lb{constructor(){this._=void 0}}function xue(n,e,t){return n instanceof Dg?function(r,s){const o={fields:{[t5]:{stringValue:e5},[i5]:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return s&&lI(s)&&(s=rb(s)),s&&(o.fields[n5]=s),{mapValue:o}}(t,e):n instanceof Lg?w5(n,e):n instanceof kg?b5(n,e):function(r,s){const o=_5(r,s),a=C3(o)+C3(r.Ie);return eC(o)&&eC(r.Ie)?x5(a):dI(r.serializer,a)}(n,e)}function _ue(n,e,t){return n instanceof Lg?w5(n,e):n instanceof kg?b5(n,e):t}function _5(n,e){return n instanceof B_?function(i){return eC(i)||function(s){return!!s&&"doubleValue"in s}(i)}(e)?e:{integerValue:0}:null}class Dg extends lb{}class Lg extends lb{constructor(e){super(),this.elements=e}}function w5(n,e){const t=S5(e);for(const i of n.elements)t.some(r=>ha(r,i))||t.push(i);return{arrayValue:{values:t}}}class kg extends lb{constructor(e){super(),this.elements=e}}function b5(n,e){let t=S5(e);for(const i of n.elements)t=t.filter(r=>!ha(r,i));return{arrayValue:{values:t}}}class B_ extends lb{constructor(e,t){super(),this.serializer=e,this.Ie=t}}function C3(n){return Ci(n.integerValue||n.doubleValue)}function S5(n){return cI(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wue{constructor(e,t){this.field=e,this.transform=t}}function bue(n,e){return n.field.isEqual(e.field)&&function(i,r){return i instanceof Lg&&r instanceof Lg||i instanceof kg&&r instanceof kg?vf(i.elements,r.elements,ha):i instanceof B_&&r instanceof B_?ha(i.Ie,r.Ie):i instanceof Dg&&r instanceof Dg}(n.transform,e.transform)}class Sue{constructor(e,t){this.version=e,this.transformResults=t}}class No{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new No}static exists(e){return new No(void 0,e)}static updateTime(e){return new No(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function n0(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class cb{}function T5(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new C5(n.key,No.none()):new py(n.key,n.data,No.none());{const t=n.data,i=ps.empty();let r=new Ki(fr.comparator);for(let s of e.fields)if(!r.has(s)){let o=t.field(s);o===null&&s.length>1&&(s=s.popLast(),o=t.field(s)),o===null?i.delete(s):i.set(s,o),r=r.add(s)}return new kc(n.key,i,new ks(r.toArray()),No.none())}}function Tue(n,e,t){n instanceof py?function(r,s,o){const a=r.value.clone(),l=M3(r.fieldTransforms,s,o.transformResults);a.setAll(l),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(n,e,t):n instanceof kc?function(r,s,o){if(!n0(r.precondition,s))return void s.convertToUnknownDocument(o.version);const a=M3(r.fieldTransforms,s,o.transformResults),l=s.data;l.setAll(E5(r)),l.setAll(a),s.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(n,e,t):function(r,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,t)}function Nm(n,e,t,i){return n instanceof py?function(s,o,a,l){if(!n0(s.precondition,o))return a;const c=s.value.clone(),u=I3(s.fieldTransforms,l,o);return c.setAll(u),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),null}(n,e,t,i):n instanceof kc?function(s,o,a,l){if(!n0(s.precondition,o))return a;const c=I3(s.fieldTransforms,l,o),u=o.data;return u.setAll(E5(s)),u.setAll(c),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(f=>f.field))}(n,e,t,i):function(s,o,a){return n0(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(n,e,t)}function Eue(n,e){let t=null;for(const i of n.fieldTransforms){const r=e.data.field(i.field),s=_5(i.transform,r||null);s!=null&&(t===null&&(t=ps.empty()),t.set(i.field,s))}return t||null}function A3(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(i,r){return i===void 0&&r===void 0||!(!i||!r)&&vf(i,r,(s,o)=>bue(s,o))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class py extends cb{constructor(e,t,i,r=[]){super(),this.key=e,this.value=t,this.precondition=i,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class kc extends cb{constructor(e,t,i,r,s=[]){super(),this.key=e,this.data=t,this.fieldMask=i,this.precondition=r,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function E5(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const i=n.data.field(t);e.set(t,i)}}),e}function M3(n,e,t){const i=new Map;zn(n.length===t.length);for(let r=0;r<t.length;r++){const s=n[r],o=s.transform,a=e.data.field(s.field);i.set(s.field,_ue(o,a,t[r]))}return i}function I3(n,e,t){const i=new Map;for(const r of n){const s=r.transform,o=t.data.field(r.field);i.set(r.field,xue(s,o,e))}return i}class C5 extends cb{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class Cue extends cb{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Aue{constructor(e,t,i,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=i,this.mutations=r}applyToRemoteDocument(e,t){const i=t.mutationResults;for(let r=0;r<this.mutations.length;r++){const s=this.mutations[r];s.key.isEqual(e.key)&&Tue(s,e,i[r])}}applyToLocalView(e,t){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(t=Nm(i,e,t,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(t=Nm(i,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const i=v5();return this.mutations.forEach(r=>{const s=e.get(r.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=t.has(r.key)?null:a;const l=T5(o,a);l!==null&&i.set(r.key,l),o.isValidDocument()||o.convertToNoDocument(Xt.min())}),i}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),_n())}isEqual(e){return this.batchId===e.batchId&&vf(this.mutations,e.mutations,(t,i)=>A3(t,i))&&vf(this.baseMutations,e.baseMutations,(t,i)=>A3(t,i))}}class fI{constructor(e,t,i,r){this.batch=e,this.commitVersion=t,this.mutationResults=i,this.docVersions=r}static from(e,t,i){zn(e.mutations.length===i.length);let r=function(){return pue}();const s=e.mutations;for(let o=0;o<s.length;o++)r=r.insert(s[o].key,i[o].version);return new fI(e,t,i,r)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mue{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Iue{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var ki,Cn;function Pue(n){switch(n){case Ne.OK:return Ht();case Ne.CANCELLED:case Ne.UNKNOWN:case Ne.DEADLINE_EXCEEDED:case Ne.RESOURCE_EXHAUSTED:case Ne.INTERNAL:case Ne.UNAVAILABLE:case Ne.UNAUTHENTICATED:return!1;case Ne.INVALID_ARGUMENT:case Ne.NOT_FOUND:case Ne.ALREADY_EXISTS:case Ne.PERMISSION_DENIED:case Ne.FAILED_PRECONDITION:case Ne.ABORTED:case Ne.OUT_OF_RANGE:case Ne.UNIMPLEMENTED:case Ne.DATA_LOSS:return!0;default:return Ht()}}function A5(n){if(n===void 0)return nl("GRPC error has no .code"),Ne.UNKNOWN;switch(n){case ki.OK:return Ne.OK;case ki.CANCELLED:return Ne.CANCELLED;case ki.UNKNOWN:return Ne.UNKNOWN;case ki.DEADLINE_EXCEEDED:return Ne.DEADLINE_EXCEEDED;case ki.RESOURCE_EXHAUSTED:return Ne.RESOURCE_EXHAUSTED;case ki.INTERNAL:return Ne.INTERNAL;case ki.UNAVAILABLE:return Ne.UNAVAILABLE;case ki.UNAUTHENTICATED:return Ne.UNAUTHENTICATED;case ki.INVALID_ARGUMENT:return Ne.INVALID_ARGUMENT;case ki.NOT_FOUND:return Ne.NOT_FOUND;case ki.ALREADY_EXISTS:return Ne.ALREADY_EXISTS;case ki.PERMISSION_DENIED:return Ne.PERMISSION_DENIED;case ki.FAILED_PRECONDITION:return Ne.FAILED_PRECONDITION;case ki.ABORTED:return Ne.ABORTED;case ki.OUT_OF_RANGE:return Ne.OUT_OF_RANGE;case ki.UNIMPLEMENTED:return Ne.UNIMPLEMENTED;case ki.DATA_LOSS:return Ne.DATA_LOSS;default:return Ht()}}(Cn=ki||(ki={}))[Cn.OK=0]="OK",Cn[Cn.CANCELLED=1]="CANCELLED",Cn[Cn.UNKNOWN=2]="UNKNOWN",Cn[Cn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Cn[Cn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Cn[Cn.NOT_FOUND=5]="NOT_FOUND",Cn[Cn.ALREADY_EXISTS=6]="ALREADY_EXISTS",Cn[Cn.PERMISSION_DENIED=7]="PERMISSION_DENIED",Cn[Cn.UNAUTHENTICATED=16]="UNAUTHENTICATED",Cn[Cn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Cn[Cn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Cn[Cn.ABORTED=10]="ABORTED",Cn[Cn.OUT_OF_RANGE=11]="OUT_OF_RANGE",Cn[Cn.UNIMPLEMENTED=12]="UNIMPLEMENTED",Cn[Cn.INTERNAL=13]="INTERNAL",Cn[Cn.UNAVAILABLE=14]="UNAVAILABLE",Cn[Cn.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rue(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nue=new sc([4294967295,4294967295],0);function P3(n){const e=Rue().encode(n),t=new Hz;return t.update(e),new Uint8Array(t.digest())}function R3(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),i=e.getUint32(4,!0),r=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new sc([t,i],0),new sc([r,s],0)]}class pI{constructor(e,t,i){if(this.bitmap=e,this.padding=t,this.hashCount=i,t<0||t>=8)throw new nm(`Invalid padding: ${t}`);if(i<0)throw new nm(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new nm(`Invalid hash count: ${i}`);if(e.length===0&&t!==0)throw new nm(`Invalid padding when bitmap length is 0: ${t}`);this.Ee=8*e.length-t,this.de=sc.fromNumber(this.Ee)}Ae(e,t,i){let r=e.add(t.multiply(sc.fromNumber(i)));return r.compare(Nue)===1&&(r=new sc([r.getBits(0),r.getBits(1)],0)),r.modulo(this.de).toNumber()}Re(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.Ee===0)return!1;const t=P3(e),[i,r]=R3(t);for(let s=0;s<this.hashCount;s++){const o=this.Ae(i,r,s);if(!this.Re(o))return!1}return!0}static create(e,t,i){const r=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new pI(s,r,t);return i.forEach(a=>o.insert(a)),o}insert(e){if(this.Ee===0)return;const t=P3(e),[i,r]=R3(t);for(let s=0;s<this.hashCount;s++){const o=this.Ae(i,r,s);this.Ve(o)}}Ve(e){const t=Math.floor(e/8),i=e%8;this.bitmap[t]|=1<<i}}class nm extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ub{constructor(e,t,i,r,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=i,this.documentUpdates=r,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t,i){const r=new Map;return r.set(e,my.createSynthesizedTargetChangeForCurrentChange(e,t,i)),new ub(Xt.min(),r,new mi(Tn),il(),_n())}}class my{constructor(e,t,i,r,s){this.resumeToken=e,this.current=t,this.addedDocuments=i,this.modifiedDocuments=r,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t,i){return new my(i,t,_n(),_n(),_n())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class i0{constructor(e,t,i,r){this.me=e,this.removedTargetIds=t,this.key=i,this.fe=r}}class M5{constructor(e,t){this.targetId=e,this.ge=t}}class I5{constructor(e,t,i=yr.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=t,this.resumeToken=i,this.cause=r}}class N3{constructor(){this.pe=0,this.ye=D3(),this.we=yr.EMPTY_BYTE_STRING,this.be=!1,this.Se=!0}get current(){return this.be}get resumeToken(){return this.we}get De(){return this.pe!==0}get ve(){return this.Se}Ce(e){e.approximateByteSize()>0&&(this.Se=!0,this.we=e)}Fe(){let e=_n(),t=_n(),i=_n();return this.ye.forEach((r,s)=>{switch(s){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:i=i.add(r);break;default:Ht()}}),new my(this.we,this.be,e,t,i)}Me(){this.Se=!1,this.ye=D3()}xe(e,t){this.Se=!0,this.ye=this.ye.insert(e,t)}Oe(e){this.Se=!0,this.ye=this.ye.remove(e)}Ne(){this.pe+=1}Be(){this.pe-=1,zn(this.pe>=0)}Le(){this.Se=!0,this.be=!0}}class Due{constructor(e){this.ke=e,this.qe=new Map,this.Qe=il(),this.$e=bx(),this.Ke=bx(),this.Ue=new mi(Tn)}We(e){for(const t of e.me)e.fe&&e.fe.isFoundDocument()?this.Ge(t,e.fe):this.ze(t,e.key,e.fe);for(const t of e.removedTargetIds)this.ze(t,e.key,e.fe)}je(e){this.forEachTarget(e,t=>{const i=this.He(t);switch(e.state){case 0:this.Je(t)&&i.Ce(e.resumeToken);break;case 1:i.Be(),i.De||i.Me(),i.Ce(e.resumeToken);break;case 2:i.Be(),i.De||this.removeTarget(t);break;case 3:this.Je(t)&&(i.Le(),i.Ce(e.resumeToken));break;case 4:this.Je(t)&&(this.Ye(t),i.Ce(e.resumeToken));break;default:Ht()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.qe.forEach((i,r)=>{this.Je(r)&&t(r)})}Ze(e){const t=e.targetId,i=e.ge.count,r=this.Xe(t);if(r){const s=r.target;if(nC(s))if(i===0){const o=new Dt(s.path);this.ze(t,o,Dr.newNoDocument(o,Xt.min()))}else zn(i===1);else{const o=this.et(t);if(o!==i){const a=this.tt(e),l=a?this.nt(a,e,o):1;if(l!==0){this.Ye(t);const c=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ue=this.Ue.insert(t,c)}}}}}tt(e){const t=e.ge.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:i="",padding:r=0},hashCount:s=0}=t;let o,a;try{o=yc(i).toUint8Array()}catch(l){if(l instanceof Zz)return yf("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new pI(o,r,s)}catch(l){return yf(l instanceof nm?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.Ee===0?null:a}nt(e,t,i){return t.ge.count===i-this.st(e,t.targetId)?0:2}st(e,t){const i=this.ke.getRemoteKeysForTarget(t);let r=0;return i.forEach(s=>{const o=this.ke.it(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.ze(t,s,null),r++)}),r}ot(e){const t=new Map;this.qe.forEach((s,o)=>{const a=this.Xe(o);if(a){if(s.current&&nC(a.target)){const l=new Dt(a.target.path);this._t(l).has(o)||this.ut(o,l)||this.ze(o,l,Dr.newNoDocument(l,e))}s.ve&&(t.set(o,s.Fe()),s.Me())}});let i=_n();this.Ke.forEach((s,o)=>{let a=!0;o.forEachWhile(l=>{const c=this.Xe(l);return!c||c.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(i=i.add(s))}),this.Qe.forEach((s,o)=>o.setReadTime(e));const r=new ub(e,t,this.Ue,this.Qe,i);return this.Qe=il(),this.$e=bx(),this.Ke=bx(),this.Ue=new mi(Tn),r}Ge(e,t){if(!this.Je(e))return;const i=this.ut(e,t.key)?2:0;this.He(e).xe(t.key,i),this.Qe=this.Qe.insert(t.key,t),this.$e=this.$e.insert(t.key,this._t(t.key).add(e)),this.Ke=this.Ke.insert(t.key,this.ct(t.key).add(e))}ze(e,t,i){if(!this.Je(e))return;const r=this.He(e);this.ut(e,t)?r.xe(t,1):r.Oe(t),this.Ke=this.Ke.insert(t,this.ct(t).delete(e)),this.Ke=this.Ke.insert(t,this.ct(t).add(e)),i&&(this.Qe=this.Qe.insert(t,i))}removeTarget(e){this.qe.delete(e)}et(e){const t=this.He(e).Fe();return this.ke.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ne(e){this.He(e).Ne()}He(e){let t=this.qe.get(e);return t||(t=new N3,this.qe.set(e,t)),t}ct(e){let t=this.Ke.get(e);return t||(t=new Ki(Tn),this.Ke=this.Ke.insert(e,t)),t}_t(e){let t=this.$e.get(e);return t||(t=new Ki(Tn),this.$e=this.$e.insert(e,t)),t}Je(e){const t=this.Xe(e)!==null;return t||_t("WatchChangeAggregator","Detected inactive target",e),t}Xe(e){const t=this.qe.get(e);return t&&t.De?null:this.ke.lt(e)}Ye(e){this.qe.set(e,new N3),this.ke.getRemoteKeysForTarget(e).forEach(t=>{this.ze(e,t,null)})}ut(e,t){return this.ke.getRemoteKeysForTarget(e).has(t)}}function bx(){return new mi(Dt.comparator)}function D3(){return new mi(Dt.comparator)}const Lue={asc:"ASCENDING",desc:"DESCENDING"},kue={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Oue={and:"AND",or:"OR"};class Uue{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function rC(n,e){return n.useProto3Json||ib(e)?e:{value:e}}function z_(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function P5(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function Fue(n,e){return z_(n,e.toTimestamp())}function ca(n){return zn(!!n),Xt.fromTimestamp(function(t){const i=gc(t);return new Bi(i.seconds,i.nanos)}(n))}function mI(n,e){return sC(n,e).canonicalString()}function sC(n,e){const t=function(r){return new ni(["projects",r.projectId,"databases",r.database])}(n).child("documents");return e===void 0?t:t.child(e)}function R5(n){const e=ni.fromString(n);return zn(O5(e)),e}function oC(n,e){return mI(n.databaseId,e.path)}function lE(n,e){const t=R5(e);if(t.get(1)!==n.databaseId.projectId)throw new wt(Ne.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new wt(Ne.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new Dt(D5(t))}function N5(n,e){return mI(n.databaseId,e)}function jue(n){const e=R5(n);return e.length===4?ni.emptyPath():D5(e)}function aC(n){return new ni(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function D5(n){return zn(n.length>4&&n.get(4)==="documents"),n.popFirst(5)}function L3(n,e,t){return{name:oC(n,e),fields:t.value.mapValue.fields}}function Vue(n,e){let t;if("targetChange"in e){e.targetChange;const i=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:Ht()}(e.targetChange.targetChangeType||"NO_CHANGE"),r=e.targetChange.targetIds||[],s=function(c,u){return c.useProto3Json?(zn(u===void 0||typeof u=="string"),yr.fromBase64String(u||"")):(zn(u===void 0||u instanceof Buffer||u instanceof Uint8Array),yr.fromUint8Array(u||new Uint8Array))}(n,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(c){const u=c.code===void 0?Ne.UNKNOWN:A5(c.code);return new wt(u,c.message||"")}(o);t=new I5(i,r,s,a||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const r=lE(n,i.document.name),s=ca(i.document.updateTime),o=i.document.createTime?ca(i.document.createTime):Xt.min(),a=new ps({mapValue:{fields:i.document.fields}}),l=Dr.newFoundDocument(r,s,o,a),c=i.targetIds||[],u=i.removedTargetIds||[];t=new i0(c,u,l.key,l)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const r=lE(n,i.document),s=i.readTime?ca(i.readTime):Xt.min(),o=Dr.newNoDocument(r,s),a=i.removedTargetIds||[];t=new i0([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const r=lE(n,i.document),s=i.removedTargetIds||[];t=new i0([],s,r,null)}else{if(!("filter"in e))return Ht();{e.filter;const i=e.filter;i.targetId;const{count:r=0,unchangedNames:s}=i,o=new Iue(r,s),a=i.targetId;t=new M5(a,o)}}return t}function Bue(n,e){let t;if(e instanceof py)t={update:L3(n,e.key,e.value)};else if(e instanceof C5)t={delete:oC(n,e.key)};else if(e instanceof kc)t={update:L3(n,e.key,e.data),updateMask:Yue(e.fieldMask)};else{if(!(e instanceof Cue))return Ht();t={verify:oC(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(i=>function(s,o){const a=o.transform;if(a instanceof Dg)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Lg)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof kg)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof B_)return{fieldPath:o.field.canonicalString(),increment:a.Ie};throw Ht()}(0,i))),e.precondition.isNone||(t.currentDocument=function(r,s){return s.updateTime!==void 0?{updateTime:Fue(r,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:Ht()}(n,e.precondition)),t}function zue(n,e){return n&&n.length>0?(zn(e!==void 0),n.map(t=>function(r,s){let o=r.updateTime?ca(r.updateTime):ca(s);return o.isEqual(Xt.min())&&(o=ca(s)),new Sue(o,r.transformResults||[])}(t,e))):[]}function Hue(n,e){return{documents:[N5(n,e.path)]}}function Gue(n,e){const t={structuredQuery:{}},i=e.path;let r;e.collectionGroup!==null?(r=i,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(r=i.popLast(),t.structuredQuery.from=[{collectionId:i.lastSegment()}]),t.parent=N5(n,r);const s=function(c){if(c.length!==0)return k5(Uo.create(c,"and"))}(e.filters);s&&(t.structuredQuery.where=s);const o=function(c){if(c.length!==0)return c.map(u=>function(m){return{field:dd(m.field),direction:$ue(m.dir)}}(u))}(e.orderBy);o&&(t.structuredQuery.orderBy=o);const a=rC(n,e.limit);return a!==null&&(t.structuredQuery.limit=a),e.startAt&&(t.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{ht:t,parent:r}}function Wue(n){let e=jue(n.parent);const t=n.structuredQuery,i=t.from?t.from.length:0;let r=null;if(i>0){zn(i===1);const u=t.from[0];u.allDescendants?r=u.collectionId:e=e.child(u.collectionId)}let s=[];t.where&&(s=function(f){const m=L5(f);return m instanceof Uo&&c5(m)?m.getFilters():[m]}(t.where));let o=[];t.orderBy&&(o=function(f){return f.map(m=>function(x){return new Ng(fd(x.field),function(w){switch(w){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(x.direction))}(m))}(t.orderBy));let a=null;t.limit&&(a=function(f){let m;return m=typeof f=="object"?f.value:f,ib(m)?null:m}(t.limit));let l=null;t.startAt&&(l=function(f){const m=!!f.before,g=f.values||[];return new j_(g,m)}(t.startAt));let c=null;return t.endAt&&(c=function(f){const m=!f.before,g=f.values||[];return new j_(g,m)}(t.endAt)),cue(e,r,o,s,a,"F",l,c)}function que(n,e){const t=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Ht()}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function L5(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":const i=fd(t.unaryFilter.field);return ji.create(i,"==",{doubleValue:NaN});case"IS_NULL":const r=fd(t.unaryFilter.field);return ji.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=fd(t.unaryFilter.field);return ji.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=fd(t.unaryFilter.field);return ji.create(o,"!=",{nullValue:"NULL_VALUE"});default:return Ht()}}(n):n.fieldFilter!==void 0?function(t){return ji.create(fd(t.fieldFilter.field),function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Ht()}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return Uo.create(t.compositeFilter.filters.map(i=>L5(i)),function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return Ht()}}(t.compositeFilter.op))}(n):Ht()}function $ue(n){return Lue[n]}function Xue(n){return kue[n]}function Kue(n){return Oue[n]}function dd(n){return{fieldPath:n.canonicalString()}}function fd(n){return fr.fromServerFormat(n.fieldPath)}function k5(n){return n instanceof ji?function(t){if(t.op==="=="){if(w3(t.value))return{unaryFilter:{field:dd(t.field),op:"IS_NAN"}};if(_3(t.value))return{unaryFilter:{field:dd(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(w3(t.value))return{unaryFilter:{field:dd(t.field),op:"IS_NOT_NAN"}};if(_3(t.value))return{unaryFilter:{field:dd(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:dd(t.field),op:Xue(t.op),value:t.value}}}(n):n instanceof Uo?function(t){const i=t.getFilters().map(r=>k5(r));return i.length===1?i[0]:{compositeFilter:{op:Kue(t.op),filters:i}}}(n):Ht()}function Yue(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function O5(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ql{constructor(e,t,i,r,s=Xt.min(),o=Xt.min(),a=yr.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=t,this.purpose=i,this.sequenceNumber=r,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new ql(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new ql(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new ql(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new ql(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jue{constructor(e){this.Tt=e}}function Que(n){const e=Wue({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?V_(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zue{constructor(){this.Tn=new ehe}addToCollectionParentIndex(e,t){return this.Tn.add(t),De.resolve()}getCollectionParents(e,t){return De.resolve(this.Tn.getEntries(t))}addFieldIndex(e,t){return De.resolve()}deleteFieldIndex(e,t){return De.resolve()}deleteAllFieldIndexes(e){return De.resolve()}createTargetIndexes(e,t){return De.resolve()}getDocumentsMatchingTarget(e,t){return De.resolve(null)}getIndexType(e,t){return De.resolve(0)}getFieldIndexes(e,t){return De.resolve([])}getNextCollectionGroupToUpdate(e){return De.resolve(null)}getMinOffset(e,t){return De.resolve(mc.min())}getMinOffsetFromCollectionGroup(e,t){return De.resolve(mc.min())}updateCollectionGroup(e,t,i){return De.resolve()}updateIndexEntries(e,t){return De.resolve()}}class ehe{constructor(){this.index={}}add(e){const t=e.lastSegment(),i=e.popLast(),r=this.index[t]||new Ki(ni.comparator),s=!r.has(i);return this.index[t]=r.add(i),s}has(e){const t=e.lastSegment(),i=e.popLast(),r=this.index[t];return r&&r.has(i)}getEntries(e){return(this.index[e]||new Ki(ni.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k3={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},U5=41943040;class cs{static withCacheSize(e){return new cs(e,cs.DEFAULT_COLLECTION_PERCENTILE,cs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */cs.DEFAULT_COLLECTION_PERCENTILE=10,cs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,cs.DEFAULT=new cs(U5,cs.DEFAULT_COLLECTION_PERCENTILE,cs.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),cs.DISABLED=new cs(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wf{constructor(e){this.$n=e}next(){return this.$n+=2,this.$n}static Kn(){return new wf(0)}static Un(){return new wf(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O3="LruGarbageCollector",the=1048576;function U3([n,e],[t,i]){const r=Tn(n,t);return r===0?Tn(e,i):r}class nhe{constructor(e){this.Hn=e,this.buffer=new Ki(U3),this.Jn=0}Yn(){return++this.Jn}Zn(e){const t=[e,this.Yn()];if(this.buffer.size<this.Hn)this.buffer=this.buffer.add(t);else{const i=this.buffer.last();U3(t,i)<0&&(this.buffer=this.buffer.delete(i).add(t))}}get maxValue(){return this.buffer.last()[0]}}class ihe{constructor(e,t,i){this.garbageCollector=e,this.asyncQueue=t,this.localStore=i,this.Xn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.er(6e4)}stop(){this.Xn&&(this.Xn.cancel(),this.Xn=null)}get started(){return this.Xn!==null}er(e){_t(O3,`Garbage collection scheduled in ${e}ms`),this.Xn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Xn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Vf(t)?_t(O3,"Ignoring IndexedDB error during garbage collection: ",t):await jf(t)}await this.er(3e5)})}}class rhe{constructor(e,t){this.tr=e,this.params=t}calculateTargetCount(e,t){return this.tr.nr(e).next(i=>Math.floor(t/100*i))}nthSequenceNumber(e,t){if(t===0)return De.resolve(nb.ae);const i=new nhe(t);return this.tr.forEachTarget(e,r=>i.Zn(r.sequenceNumber)).next(()=>this.tr.rr(e,r=>i.Zn(r))).next(()=>i.maxValue)}removeTargets(e,t,i){return this.tr.removeTargets(e,t,i)}removeOrphanedDocuments(e,t){return this.tr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(_t("LruGarbageCollector","Garbage collection skipped; disabled"),De.resolve(k3)):this.getCacheSize(e).next(i=>i<this.params.cacheSizeCollectionThreshold?(_t("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),k3):this.ir(e,t))}getCacheSize(e){return this.tr.getCacheSize(e)}ir(e,t){let i,r,s,o,a,l,c;const u=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(f=>(f>this.params.maximumSequenceNumbersToCollect?(_t("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${f}`),r=this.params.maximumSequenceNumbersToCollect):r=f,o=Date.now(),this.nthSequenceNumber(e,r))).next(f=>(i=f,a=Date.now(),this.removeTargets(e,i,t))).next(f=>(s=f,l=Date.now(),this.removeOrphanedDocuments(e,i))).next(f=>(c=Date.now(),ud()<=vn.DEBUG&&_t("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-u}ms
	Determined least recently used ${r} in `+(a-o)+`ms
	Removed ${s} targets in `+(l-a)+`ms
	Removed ${f} documents in `+(c-l)+`ms
Total Duration: ${c-u}ms`),De.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:s,documentsRemoved:f})))}}function she(n,e){return new rhe(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ohe{constructor(){this.changes=new xh(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Dr.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const i=this.changes.get(t);return i!==void 0?De.resolve(i):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ahe{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lhe{constructor(e,t,i,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=i,this.indexManager=r}getDocument(e,t){let i=null;return this.documentOverlayCache.getOverlay(e,t).next(r=>(i=r,this.remoteDocumentCache.getEntry(e,t))).next(r=>(i!==null&&Nm(i.mutation,r,ks.empty(),Bi.now()),r))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(i=>this.getLocalViewOfDocuments(e,i,_n()).next(()=>i))}getLocalViewOfDocuments(e,t,i=_n()){const r=Du();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,i).next(s=>{let o=tm();return s.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,t){const i=Du();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,_n()))}populateOverlays(e,t,i){const r=[];return i.forEach(s=>{t.has(s)||r.push(s)}),this.documentOverlayCache.getOverlays(e,r).next(s=>{s.forEach((o,a)=>{t.set(o,a)})})}computeViews(e,t,i,r){let s=il();const o=Rm(),a=function(){return Rm()}();return t.forEach((l,c)=>{const u=i.get(c.key);r.has(c.key)&&(u===void 0||u.mutation instanceof kc)?s=s.insert(c.key,c):u!==void 0?(o.set(c.key,u.mutation.getFieldMask()),Nm(u.mutation,c,u.mutation.getFieldMask(),Bi.now())):o.set(c.key,ks.empty())}),this.recalculateAndSaveOverlays(e,s).next(l=>(l.forEach((c,u)=>o.set(c,u)),t.forEach((c,u)=>{var f;return a.set(c,new ahe(u,(f=o.get(c))!==null&&f!==void 0?f:null))}),a))}recalculateAndSaveOverlays(e,t){const i=Rm();let r=new mi((o,a)=>o-a),s=_n();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(o=>{for(const a of o)a.keys().forEach(l=>{const c=t.get(l);if(c===null)return;let u=i.get(l)||ks.empty();u=a.applyToLocalView(c,u),i.set(l,u);const f=(r.get(a.batchId)||_n()).add(l);r=r.insert(a.batchId,f)})}).next(()=>{const o=[],a=r.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),c=l.key,u=l.value,f=v5();u.forEach(m=>{if(!s.has(m)){const g=T5(t.get(m),i.get(m));g!==null&&f.set(m,g),s=s.add(m)}}),o.push(this.documentOverlayCache.saveOverlays(e,c,f))}return De.waitFor(o)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(i=>this.recalculateAndSaveOverlays(e,i))}getDocumentsMatchingQuery(e,t,i,r){return function(o){return Dt.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):f5(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,i,r):this.getDocumentsMatchingCollectionQuery(e,t,i,r)}getNextDocuments(e,t,i,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,i,r).next(s=>{const o=r-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,i.largestBatchId,r-s.size):De.resolve(Du());let a=Mg,l=s;return o.next(c=>De.forEach(c,(u,f)=>(a<f.largestBatchId&&(a=f.largestBatchId),s.get(u)?De.resolve():this.remoteDocumentCache.getEntry(e,u).next(m=>{l=l.insert(u,m)}))).next(()=>this.populateOverlays(e,c,s)).next(()=>this.computeViews(e,l,c,_n())).next(u=>({batchId:a,changes:y5(u)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new Dt(t)).next(i=>{let r=tm();return i.isFoundDocument()&&(r=r.insert(i.key,i)),r})}getDocumentsMatchingCollectionGroupQuery(e,t,i,r){const s=t.collectionGroup;let o=tm();return this.indexManager.getCollectionParents(e,s).next(a=>De.forEach(a,l=>{const c=function(f,m){return new Bf(m,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)}(t,l.child(s));return this.getDocumentsMatchingCollectionQuery(e,c,i,r).next(u=>{u.forEach((f,m)=>{o=o.insert(f,m)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,t,i,r){let s;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,i.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,i,s,r))).next(o=>{s.forEach((l,c)=>{const u=c.getKey();o.get(u)===null&&(o=o.insert(u,Dr.newInvalidDocument(u)))});let a=tm();return o.forEach((l,c)=>{const u=s.get(l);u!==void 0&&Nm(u.mutation,c,ks.empty(),Bi.now()),ab(t,c)&&(a=a.insert(l,c))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class che{constructor(e){this.serializer=e,this.dr=new Map,this.Ar=new Map}getBundleMetadata(e,t){return De.resolve(this.dr.get(t))}saveBundleMetadata(e,t){return this.dr.set(t.id,function(r){return{id:r.id,version:r.version,createTime:ca(r.createTime)}}(t)),De.resolve()}getNamedQuery(e,t){return De.resolve(this.Ar.get(t))}saveNamedQuery(e,t){return this.Ar.set(t.name,function(r){return{name:r.name,query:Que(r.bundledQuery),readTime:ca(r.readTime)}}(t)),De.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uhe{constructor(){this.overlays=new mi(Dt.comparator),this.Rr=new Map}getOverlay(e,t){return De.resolve(this.overlays.get(t))}getOverlays(e,t){const i=Du();return De.forEach(t,r=>this.getOverlay(e,r).next(s=>{s!==null&&i.set(r,s)})).next(()=>i)}saveOverlays(e,t,i){return i.forEach((r,s)=>{this.Et(e,t,s)}),De.resolve()}removeOverlaysForBatchId(e,t,i){const r=this.Rr.get(i);return r!==void 0&&(r.forEach(s=>this.overlays=this.overlays.remove(s)),this.Rr.delete(i)),De.resolve()}getOverlaysForCollection(e,t,i){const r=Du(),s=t.length+1,o=new Dt(t.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,c=l.getKey();if(!t.isPrefixOf(c.path))break;c.path.length===s&&l.largestBatchId>i&&r.set(l.getKey(),l)}return De.resolve(r)}getOverlaysForCollectionGroup(e,t,i,r){let s=new mi((c,u)=>c-u);const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===t&&c.largestBatchId>i){let u=s.get(c.largestBatchId);u===null&&(u=Du(),s=s.insert(c.largestBatchId,u)),u.set(c.getKey(),c)}}const a=Du(),l=s.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((c,u)=>a.set(c,u)),!(a.size()>=r)););return De.resolve(a)}Et(e,t,i){const r=this.overlays.get(i.key);if(r!==null){const o=this.Rr.get(r.largestBatchId).delete(i.key);this.Rr.set(r.largestBatchId,o)}this.overlays=this.overlays.insert(i.key,new Mue(t,i));let s=this.Rr.get(t);s===void 0&&(s=_n(),this.Rr.set(t,s)),this.Rr.set(t,s.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hhe{constructor(){this.sessionToken=yr.EMPTY_BYTE_STRING}getSessionToken(e){return De.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,De.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gI{constructor(){this.Vr=new Ki(nr.mr),this.gr=new Ki(nr.pr)}isEmpty(){return this.Vr.isEmpty()}addReference(e,t){const i=new nr(e,t);this.Vr=this.Vr.add(i),this.gr=this.gr.add(i)}yr(e,t){e.forEach(i=>this.addReference(i,t))}removeReference(e,t){this.wr(new nr(e,t))}br(e,t){e.forEach(i=>this.removeReference(i,t))}Sr(e){const t=new Dt(new ni([])),i=new nr(t,e),r=new nr(t,e+1),s=[];return this.gr.forEachInRange([i,r],o=>{this.wr(o),s.push(o.key)}),s}Dr(){this.Vr.forEach(e=>this.wr(e))}wr(e){this.Vr=this.Vr.delete(e),this.gr=this.gr.delete(e)}vr(e){const t=new Dt(new ni([])),i=new nr(t,e),r=new nr(t,e+1);let s=_n();return this.gr.forEachInRange([i,r],o=>{s=s.add(o.key)}),s}containsKey(e){const t=new nr(e,0),i=this.Vr.firstAfterOrEqual(t);return i!==null&&e.isEqual(i.key)}}class nr{constructor(e,t){this.key=e,this.Cr=t}static mr(e,t){return Dt.comparator(e.key,t.key)||Tn(e.Cr,t.Cr)}static pr(e,t){return Tn(e.Cr,t.Cr)||Dt.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dhe{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Fr=1,this.Mr=new Ki(nr.mr)}checkEmpty(e){return De.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,i,r){const s=this.Fr;this.Fr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new Aue(s,t,i,r);this.mutationQueue.push(o);for(const a of r)this.Mr=this.Mr.add(new nr(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return De.resolve(o)}lookupMutationBatch(e,t){return De.resolve(this.Or(t))}getNextMutationBatchAfterBatchId(e,t){const i=t+1,r=this.Nr(i),s=r<0?0:r;return De.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return De.resolve(this.mutationQueue.length===0?aI:this.Fr-1)}getAllMutationBatches(e){return De.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const i=new nr(t,0),r=new nr(t,Number.POSITIVE_INFINITY),s=[];return this.Mr.forEachInRange([i,r],o=>{const a=this.Or(o.Cr);s.push(a)}),De.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new Ki(Tn);return t.forEach(r=>{const s=new nr(r,0),o=new nr(r,Number.POSITIVE_INFINITY);this.Mr.forEachInRange([s,o],a=>{i=i.add(a.Cr)})}),De.resolve(this.Br(i))}getAllMutationBatchesAffectingQuery(e,t){const i=t.path,r=i.length+1;let s=i;Dt.isDocumentKey(s)||(s=s.child(""));const o=new nr(new Dt(s),0);let a=new Ki(Tn);return this.Mr.forEachWhile(l=>{const c=l.key.path;return!!i.isPrefixOf(c)&&(c.length===r&&(a=a.add(l.Cr)),!0)},o),De.resolve(this.Br(a))}Br(e){const t=[];return e.forEach(i=>{const r=this.Or(i);r!==null&&t.push(r)}),t}removeMutationBatch(e,t){zn(this.Lr(t.batchId,"removed")===0),this.mutationQueue.shift();let i=this.Mr;return De.forEach(t.mutations,r=>{const s=new nr(r.key,t.batchId);return i=i.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.Mr=i})}qn(e){}containsKey(e,t){const i=new nr(t,0),r=this.Mr.firstAfterOrEqual(i);return De.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,De.resolve()}Lr(e,t){return this.Nr(e)}Nr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Or(e){const t=this.Nr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fhe{constructor(e){this.kr=e,this.docs=function(){return new mi(Dt.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const i=t.key,r=this.docs.get(i),s=r?r.size:0,o=this.kr(t);return this.docs=this.docs.insert(i,{document:t.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const i=this.docs.get(t);return De.resolve(i?i.document.mutableCopy():Dr.newInvalidDocument(t))}getEntries(e,t){let i=il();return t.forEach(r=>{const s=this.docs.get(r);i=i.insert(r,s?s.document.mutableCopy():Dr.newInvalidDocument(r))}),De.resolve(i)}getDocumentsMatchingQuery(e,t,i,r){let s=il();const o=t.path,a=new Dt(o.child("__id-9223372036854775808__")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:c,value:{document:u}}=l.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||Bce(Vce(u),i)<=0||(r.has(u.key)||ab(t,u))&&(s=s.insert(u.key,u.mutableCopy()))}return De.resolve(s)}getAllFromCollectionGroup(e,t,i,r){Ht()}qr(e,t){return De.forEach(this.docs,i=>t(i))}newChangeBuffer(e){return new phe(this)}getSize(e){return De.resolve(this.size)}}class phe extends ohe{constructor(e){super(),this.Ir=e}applyChanges(e){const t=[];return this.changes.forEach((i,r)=>{r.isValidDocument()?t.push(this.Ir.addEntry(e,r)):this.Ir.removeEntry(i)}),De.waitFor(t)}getFromCache(e,t){return this.Ir.getEntry(e,t)}getAllFromCache(e,t){return this.Ir.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mhe{constructor(e){this.persistence=e,this.Qr=new xh(t=>uI(t),hI),this.lastRemoteSnapshotVersion=Xt.min(),this.highestTargetId=0,this.$r=0,this.Kr=new gI,this.targetCount=0,this.Ur=wf.Kn()}forEachTarget(e,t){return this.Qr.forEach((i,r)=>t(r)),De.resolve()}getLastRemoteSnapshotVersion(e){return De.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return De.resolve(this.$r)}allocateTargetId(e){return this.highestTargetId=this.Ur.next(),De.resolve(this.highestTargetId)}setTargetsMetadata(e,t,i){return i&&(this.lastRemoteSnapshotVersion=i),t>this.$r&&(this.$r=t),De.resolve()}zn(e){this.Qr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Ur=new wf(t),this.highestTargetId=t),e.sequenceNumber>this.$r&&(this.$r=e.sequenceNumber)}addTargetData(e,t){return this.zn(t),this.targetCount+=1,De.resolve()}updateTargetData(e,t){return this.zn(t),De.resolve()}removeTargetData(e,t){return this.Qr.delete(t.target),this.Kr.Sr(t.targetId),this.targetCount-=1,De.resolve()}removeTargets(e,t,i){let r=0;const s=[];return this.Qr.forEach((o,a)=>{a.sequenceNumber<=t&&i.get(a.targetId)===null&&(this.Qr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),r++)}),De.waitFor(s).next(()=>r)}getTargetCount(e){return De.resolve(this.targetCount)}getTargetData(e,t){const i=this.Qr.get(t)||null;return De.resolve(i)}addMatchingKeys(e,t,i){return this.Kr.yr(t,i),De.resolve()}removeMatchingKeys(e,t,i){this.Kr.br(t,i);const r=this.persistence.referenceDelegate,s=[];return r&&t.forEach(o=>{s.push(r.markPotentiallyOrphaned(e,o))}),De.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this.Kr.Sr(t),De.resolve()}getMatchingKeysForTargetId(e,t){const i=this.Kr.vr(t);return De.resolve(i)}containsKey(e,t){return De.resolve(this.Kr.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class F5{constructor(e,t){this.Wr={},this.overlays={},this.Gr=new nb(0),this.zr=!1,this.zr=!0,this.jr=new hhe,this.referenceDelegate=e(this),this.Hr=new mhe(this),this.indexManager=new Zue,this.remoteDocumentCache=function(r){return new fhe(r)}(i=>this.referenceDelegate.Jr(i)),this.serializer=new Jue(t),this.Yr=new che(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.zr=!1,Promise.resolve()}get started(){return this.zr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new uhe,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let i=this.Wr[e.toKey()];return i||(i=new dhe(t,this.referenceDelegate),this.Wr[e.toKey()]=i),i}getGlobalsCache(){return this.jr}getTargetCache(){return this.Hr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Yr}runTransaction(e,t,i){_t("MemoryPersistence","Starting transaction:",e);const r=new ghe(this.Gr.next());return this.referenceDelegate.Zr(),i(r).next(s=>this.referenceDelegate.Xr(r).next(()=>s)).toPromise().then(s=>(r.raiseOnCommittedEvent(),s))}ei(e,t){return De.or(Object.values(this.Wr).map(i=>()=>i.containsKey(e,t)))}}class ghe extends Hce{constructor(e){super(),this.currentSequenceNumber=e}}class yI{constructor(e){this.persistence=e,this.ti=new gI,this.ni=null}static ri(e){return new yI(e)}get ii(){if(this.ni)return this.ni;throw Ht()}addReference(e,t,i){return this.ti.addReference(i,t),this.ii.delete(i.toString()),De.resolve()}removeReference(e,t,i){return this.ti.removeReference(i,t),this.ii.add(i.toString()),De.resolve()}markPotentiallyOrphaned(e,t){return this.ii.add(t.toString()),De.resolve()}removeTarget(e,t){this.ti.Sr(t.targetId).forEach(r=>this.ii.add(r.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,t.targetId).next(r=>{r.forEach(s=>this.ii.add(s.toString()))}).next(()=>i.removeTargetData(e,t))}Zr(){this.ni=new Set}Xr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return De.forEach(this.ii,i=>{const r=Dt.fromPath(i);return this.si(e,r).next(s=>{s||t.removeEntry(r,Xt.min())})}).next(()=>(this.ni=null,t.apply(e)))}updateLimboDocument(e,t){return this.si(e,t).next(i=>{i?this.ii.delete(t.toString()):this.ii.add(t.toString())})}Jr(e){return 0}si(e,t){return De.or([()=>De.resolve(this.ti.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.ei(e,t)])}}class H_{constructor(e,t){this.persistence=e,this.oi=new xh(i=>qce(i.path),(i,r)=>i.isEqual(r)),this.garbageCollector=she(this,t)}static ri(e,t){return new H_(e,t)}Zr(){}Xr(e){return De.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}nr(e){const t=this.sr(e);return this.persistence.getTargetCache().getTargetCount(e).next(i=>t.next(r=>i+r))}sr(e){let t=0;return this.rr(e,i=>{t++}).next(()=>t)}rr(e,t){return De.forEach(this.oi,(i,r)=>this.ar(e,i,r).next(s=>s?De.resolve():t(r)))}removeTargets(e,t,i){return this.persistence.getTargetCache().removeTargets(e,t,i)}removeOrphanedDocuments(e,t){let i=0;const r=this.persistence.getRemoteDocumentCache(),s=r.newChangeBuffer();return r.qr(e,o=>this.ar(e,o,t).next(a=>{a||(i++,s.removeEntry(o,Xt.min()))})).next(()=>s.apply(e)).next(()=>i)}markPotentiallyOrphaned(e,t){return this.oi.set(t,e.currentSequenceNumber),De.resolve()}removeTarget(e,t){const i=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,t,i){return this.oi.set(i,e.currentSequenceNumber),De.resolve()}removeReference(e,t,i){return this.oi.set(i,e.currentSequenceNumber),De.resolve()}updateLimboDocument(e,t){return this.oi.set(t,e.currentSequenceNumber),De.resolve()}Jr(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=e0(e.data.value)),t}ar(e,t,i){return De.or([()=>this.persistence.ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const r=this.oi.get(t);return De.resolve(r!==void 0&&r>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vI{constructor(e,t,i,r){this.targetId=e,this.fromCache=t,this.Hi=i,this.Ji=r}static Yi(e,t){let i=_n(),r=_n();for(const s of t.docChanges)switch(s.type){case 0:i=i.add(s.doc.key);break;case 1:r=r.add(s.doc.key)}return new vI(e,t.fromCache,i,r)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yhe{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vhe{constructor(){this.Zi=!1,this.Xi=!1,this.es=100,this.ts=function(){return Jse()?8:Gce(Vr())>0?6:4}()}initialize(e,t){this.ns=e,this.indexManager=t,this.Zi=!0}getDocumentsMatchingQuery(e,t,i,r){const s={result:null};return this.rs(e,t).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.ss(e,t,r,i).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new yhe;return this._s(e,t,o).next(a=>{if(s.result=a,this.Xi)return this.us(e,t,o,a.size)})}).next(()=>s.result)}us(e,t,i,r){return i.documentReadCount<this.es?(ud()<=vn.DEBUG&&_t("QueryEngine","SDK will not create cache indexes for query:",hd(t),"since it only creates cache indexes for collection contains","more than or equal to",this.es,"documents"),De.resolve()):(ud()<=vn.DEBUG&&_t("QueryEngine","Query:",hd(t),"scans",i.documentReadCount,"local documents and returns",r,"documents as results."),i.documentReadCount>this.ts*r?(ud()<=vn.DEBUG&&_t("QueryEngine","The SDK decides to create cache indexes for query:",hd(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,la(t))):De.resolve())}rs(e,t){if(E3(t))return De.resolve(null);let i=la(t);return this.indexManager.getIndexType(e,i).next(r=>r===0?null:(t.limit!==null&&r===1&&(t=V_(t,null,"F"),i=la(t)),this.indexManager.getDocumentsMatchingTarget(e,i).next(s=>{const o=_n(...s);return this.ns.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,i).next(l=>{const c=this.cs(t,a);return this.ls(t,c,o,l.readTime)?this.rs(e,V_(t,null,"F")):this.hs(e,c,t,l)}))})))}ss(e,t,i,r){return E3(t)||r.isEqual(Xt.min())?De.resolve(null):this.ns.getDocuments(e,i).next(s=>{const o=this.cs(t,s);return this.ls(t,o,i,r)?De.resolve(null):(ud()<=vn.DEBUG&&_t("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),hd(t)),this.hs(e,o,t,jce(r,Mg)).next(a=>a))})}cs(e,t){let i=new Ki(m5(e));return t.forEach((r,s)=>{ab(e,s)&&(i=i.add(s))}),i}ls(e,t,i,r){if(e.limit===null)return!1;if(i.size!==t.size)return!0;const s=e.limitType==="F"?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(r)>0)}_s(e,t,i){return ud()<=vn.DEBUG&&_t("QueryEngine","Using full collection scan to execute query:",hd(t)),this.ns.getDocumentsMatchingQuery(e,t,mc.min(),i)}hs(e,t,i,r){return this.ns.getDocumentsMatchingQuery(e,i,r).next(s=>(t.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xI="LocalStore",xhe=3e8;class _he{constructor(e,t,i,r){this.persistence=e,this.Ps=t,this.serializer=r,this.Ts=new mi(Tn),this.Is=new xh(s=>uI(s),hI),this.Es=new Map,this.ds=e.getRemoteDocumentCache(),this.Hr=e.getTargetCache(),this.Yr=e.getBundleCache(),this.As(i)}As(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new lhe(this.ds,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ds.setIndexManager(this.indexManager),this.Ps.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ts))}}function whe(n,e,t,i){return new _he(n,e,t,i)}async function j5(n,e){const t=Qt(n);return await t.persistence.runTransaction("Handle user change","readonly",i=>{let r;return t.mutationQueue.getAllMutationBatches(i).next(s=>(r=s,t.As(e),t.mutationQueue.getAllMutationBatches(i))).next(s=>{const o=[],a=[];let l=_n();for(const c of r){o.push(c.batchId);for(const u of c.mutations)l=l.add(u.key)}for(const c of s){a.push(c.batchId);for(const u of c.mutations)l=l.add(u.key)}return t.localDocuments.getDocuments(i,l).next(c=>({Rs:c,removedBatchIds:o,addedBatchIds:a}))})})}function bhe(n,e){const t=Qt(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{const r=e.batch.keys(),s=t.ds.newChangeBuffer({trackRemovals:!0});return function(a,l,c,u){const f=c.batch,m=f.keys();let g=De.resolve();return m.forEach(x=>{g=g.next(()=>u.getEntry(l,x)).next(b=>{const w=c.docVersions.get(x);zn(w!==null),b.version.compareTo(w)<0&&(f.applyToRemoteDocument(b,c),b.isValidDocument()&&(b.setReadTime(c.commitVersion),u.addEntry(b)))})}),g.next(()=>a.mutationQueue.removeMutationBatch(l,f))}(t,i,e,s).next(()=>s.apply(i)).next(()=>t.mutationQueue.performConsistencyCheck(i)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(i,r,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(a){let l=_n();for(let c=0;c<a.mutationResults.length;++c)a.mutationResults[c].transformResults.length>0&&(l=l.add(a.batch.mutations[c].key));return l}(e))).next(()=>t.localDocuments.getDocuments(i,r))})}function V5(n){const e=Qt(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Hr.getLastRemoteSnapshotVersion(t))}function She(n,e){const t=Qt(n),i=e.snapshotVersion;let r=t.Ts;return t.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=t.ds.newChangeBuffer({trackRemovals:!0});r=t.Ts;const a=[];e.targetChanges.forEach((u,f)=>{const m=r.get(f);if(!m)return;a.push(t.Hr.removeMatchingKeys(s,u.removedDocuments,f).next(()=>t.Hr.addMatchingKeys(s,u.addedDocuments,f)));let g=m.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(f)!==null?g=g.withResumeToken(yr.EMPTY_BYTE_STRING,Xt.min()).withLastLimboFreeSnapshotVersion(Xt.min()):u.resumeToken.approximateByteSize()>0&&(g=g.withResumeToken(u.resumeToken,i)),r=r.insert(f,g),function(b,w,v){return b.resumeToken.approximateByteSize()===0||w.snapshotVersion.toMicroseconds()-b.snapshotVersion.toMicroseconds()>=xhe?!0:v.addedDocuments.size+v.modifiedDocuments.size+v.removedDocuments.size>0}(m,g,u)&&a.push(t.Hr.updateTargetData(s,g))});let l=il(),c=_n();if(e.documentUpdates.forEach(u=>{e.resolvedLimboDocuments.has(u)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(s,u))}),a.push(The(s,o,e.documentUpdates).next(u=>{l=u.Vs,c=u.fs})),!i.isEqual(Xt.min())){const u=t.Hr.getLastRemoteSnapshotVersion(s).next(f=>t.Hr.setTargetsMetadata(s,s.currentSequenceNumber,i));a.push(u)}return De.waitFor(a).next(()=>o.apply(s)).next(()=>t.localDocuments.getLocalViewOfDocuments(s,l,c)).next(()=>l)}).then(s=>(t.Ts=r,s))}function The(n,e,t){let i=_n(),r=_n();return t.forEach(s=>i=i.add(s)),e.getEntries(n,i).next(s=>{let o=il();return t.forEach((a,l)=>{const c=s.get(a);l.isFoundDocument()!==c.isFoundDocument()&&(r=r.add(a)),l.isNoDocument()&&l.version.isEqual(Xt.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!c.isValidDocument()||l.version.compareTo(c.version)>0||l.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):_t(xI,"Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",l.version)}),{Vs:o,fs:r}})}function Ehe(n,e){const t=Qt(n);return t.persistence.runTransaction("Get next mutation batch","readonly",i=>(e===void 0&&(e=aI),t.mutationQueue.getNextMutationBatchAfterBatchId(i,e)))}function Che(n,e){const t=Qt(n);return t.persistence.runTransaction("Allocate target","readwrite",i=>{let r;return t.Hr.getTargetData(i,e).next(s=>s?(r=s,De.resolve(r)):t.Hr.allocateTargetId(i).next(o=>(r=new ql(e,o,"TargetPurposeListen",i.currentSequenceNumber),t.Hr.addTargetData(i,r).next(()=>r))))}).then(i=>{const r=t.Ts.get(i.targetId);return(r===null||i.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(t.Ts=t.Ts.insert(i.targetId,i),t.Is.set(e,i.targetId)),i})}async function lC(n,e,t){const i=Qt(n),r=i.Ts.get(e),s=t?"readwrite":"readwrite-primary";try{t||await i.persistence.runTransaction("Release target",s,o=>i.persistence.referenceDelegate.removeTarget(o,r))}catch(o){if(!Vf(o))throw o;_t(xI,`Failed to update sequence numbers for target ${e}: ${o}`)}i.Ts=i.Ts.remove(e),i.Is.delete(r.target)}function F3(n,e,t){const i=Qt(n);let r=Xt.min(),s=_n();return i.persistence.runTransaction("Execute query","readwrite",o=>function(l,c,u){const f=Qt(l),m=f.Is.get(u);return m!==void 0?De.resolve(f.Ts.get(m)):f.Hr.getTargetData(c,u)}(i,o,la(e)).next(a=>{if(a)return r=a.lastLimboFreeSnapshotVersion,i.Hr.getMatchingKeysForTargetId(o,a.targetId).next(l=>{s=l})}).next(()=>i.Ps.getDocumentsMatchingQuery(o,e,t?r:Xt.min(),t?s:_n())).next(a=>(Ahe(i,hue(e),a),{documents:a,gs:s})))}function Ahe(n,e,t){let i=n.Es.get(e)||Xt.min();t.forEach((r,s)=>{s.readTime.compareTo(i)>0&&(i=s.readTime)}),n.Es.set(e,i)}class j3{constructor(){this.activeTargetIds=yue()}Ds(e){this.activeTargetIds=this.activeTargetIds.add(e)}vs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ss(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class Mhe{constructor(){this.ho=new j3,this.Po={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,i){}addLocalQueryTarget(e,t=!0){return t&&this.ho.Ds(e),this.Po[e]||"not-current"}updateQueryState(e,t,i){this.Po[e]=t}removeLocalQueryTarget(e){this.ho.vs(e)}isLocalQueryTarget(e){return this.ho.activeTargetIds.has(e)}clearQueryState(e){delete this.Po[e]}getAllActiveQueryTargets(){return this.ho.activeTargetIds}isActiveQueryTarget(e){return this.ho.activeTargetIds.has(e)}start(){return this.ho=new j3,Promise.resolve()}handleUserChange(e,t,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ihe{To(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V3="ConnectivityMonitor";class B3{constructor(){this.Io=()=>this.Eo(),this.Ao=()=>this.Ro(),this.Vo=[],this.mo()}To(e){this.Vo.push(e)}shutdown(){window.removeEventListener("online",this.Io),window.removeEventListener("offline",this.Ao)}mo(){window.addEventListener("online",this.Io),window.addEventListener("offline",this.Ao)}Eo(){_t(V3,"Network connectivity changed: AVAILABLE");for(const e of this.Vo)e(0)}Ro(){_t(V3,"Network connectivity changed: UNAVAILABLE");for(const e of this.Vo)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Sx=null;function cC(){return Sx===null?Sx=function(){return 268435456+Math.round(2147483648*Math.random())}():Sx++,"0x"+Sx.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cE="RestConnection",Phe={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class Rhe{get fo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.po=t+"://"+e.host,this.yo=`projects/${i}/databases/${r}`,this.wo=this.databaseId.database===U_?`project_id=${i}`:`project_id=${i}&database_id=${r}`}bo(e,t,i,r,s){const o=cC(),a=this.So(e,t.toUriEncodedString());_t(cE,`Sending RPC '${e}' ${o}:`,a,i);const l={"google-cloud-resource-prefix":this.yo,"x-goog-request-params":this.wo};return this.Do(l,r,s),this.vo(e,a,l,i).then(c=>(_t(cE,`Received RPC '${e}' ${o}: `,c),c),c=>{throw yf(cE,`RPC '${e}' ${o} failed with error: `,c,"url: ",a,"request:",i),c})}Co(e,t,i,r,s,o){return this.bo(e,t,i,r,s)}Do(e,t,i){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Ff}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((r,s)=>e[s]=r),i&&i.headers.forEach((r,s)=>e[s]=r)}So(e,t){const i=Phe[e];return`${this.po}/v1/${t}:${i}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nhe{constructor(e){this.Fo=e.Fo,this.Mo=e.Mo}xo(e){this.Oo=e}No(e){this.Bo=e}Lo(e){this.ko=e}onMessage(e){this.qo=e}close(){this.Mo()}send(e){this.Fo(e)}Qo(){this.Oo()}$o(){this.Bo()}Ko(e){this.ko(e)}Uo(e){this.qo(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ir="WebChannelConnection";class Dhe extends Rhe{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}vo(e,t,i,r){const s=cC();return new Promise((o,a)=>{const l=new Gz;l.setWithCredentials(!0),l.listenOnce(Wz.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case Zx.NO_ERROR:const u=l.getResponseJson();_t(Ir,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(u)),o(u);break;case Zx.TIMEOUT:_t(Ir,`RPC '${e}' ${s} timed out`),a(new wt(Ne.DEADLINE_EXCEEDED,"Request time out"));break;case Zx.HTTP_ERROR:const f=l.getStatus();if(_t(Ir,`RPC '${e}' ${s} failed with status:`,f,"response text:",l.getResponseText()),f>0){let m=l.getResponseJson();Array.isArray(m)&&(m=m[0]);const g=m?.error;if(g&&g.status&&g.message){const x=function(w){const v=w.toLowerCase().replace(/_/g,"-");return Object.values(Ne).indexOf(v)>=0?v:Ne.UNKNOWN}(g.status);a(new wt(x,g.message))}else a(new wt(Ne.UNKNOWN,"Server responded with status "+l.getStatus()))}else a(new wt(Ne.UNAVAILABLE,"Connection failed."));break;default:Ht()}}finally{_t(Ir,`RPC '${e}' ${s} completed.`)}});const c=JSON.stringify(r);_t(Ir,`RPC '${e}' ${s} sending request:`,r),l.send(t,"POST",c,i,15)})}Wo(e,t,i){const r=cC(),s=[this.po,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=Xz(),a=$z(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(l.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(l.useFetchStreams=!0),this.Do(l.initMessageHeaders,t,i),l.encodeInitMessageHeaders=!0;const u=s.join("");_t(Ir,`Creating RPC '${e}' stream ${r}: ${u}`,l);const f=o.createWebChannel(u,l);let m=!1,g=!1;const x=new Nhe({Fo:w=>{g?_t(Ir,`Not sending because RPC '${e}' stream ${r} is closed:`,w):(m||(_t(Ir,`Opening RPC '${e}' stream ${r} transport.`),f.open(),m=!0),_t(Ir,`RPC '${e}' stream ${r} sending:`,w),f.send(w))},Mo:()=>f.close()}),b=(w,v,S)=>{w.listen(v,E=>{try{S(E)}catch(I){setTimeout(()=>{throw I},0)}})};return b(f,em.EventType.OPEN,()=>{g||(_t(Ir,`RPC '${e}' stream ${r} transport opened.`),x.Qo())}),b(f,em.EventType.CLOSE,()=>{g||(g=!0,_t(Ir,`RPC '${e}' stream ${r} transport closed`),x.Ko())}),b(f,em.EventType.ERROR,w=>{g||(g=!0,yf(Ir,`RPC '${e}' stream ${r} transport errored:`,w),x.Ko(new wt(Ne.UNAVAILABLE,"The operation could not be completed")))}),b(f,em.EventType.MESSAGE,w=>{var v;if(!g){const S=w.data[0];zn(!!S);const E=S,I=E?.error||((v=E[0])===null||v===void 0?void 0:v.error);if(I){_t(Ir,`RPC '${e}' stream ${r} received error:`,I);const U=I.status;let O=function(M){const A=ki[M];if(A!==void 0)return A5(A)}(U),C=I.message;O===void 0&&(O=Ne.INTERNAL,C="Unknown error status: "+U+" with message "+I.message),g=!0,x.Ko(new wt(O,C)),f.close()}else _t(Ir,`RPC '${e}' stream ${r} received:`,S),x.Uo(S)}}),b(a,qz.STAT_EVENT,w=>{w.stat===Q1.PROXY?_t(Ir,`RPC '${e}' stream ${r} detected buffering proxy`):w.stat===Q1.NOPROXY&&_t(Ir,`RPC '${e}' stream ${r} detected no buffering proxy`)}),setTimeout(()=>{x.$o()},0),x}}function uE(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hb(n){return new Uue(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B5{constructor(e,t,i=1e3,r=1.5,s=6e4){this.Ti=e,this.timerId=t,this.Go=i,this.zo=r,this.jo=s,this.Ho=0,this.Jo=null,this.Yo=Date.now(),this.reset()}reset(){this.Ho=0}Zo(){this.Ho=this.jo}Xo(e){this.cancel();const t=Math.floor(this.Ho+this.e_()),i=Math.max(0,Date.now()-this.Yo),r=Math.max(0,t-i);r>0&&_t("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.Ho} ms, delay with jitter: ${t} ms, last attempt: ${i} ms ago)`),this.Jo=this.Ti.enqueueAfterDelay(this.timerId,r,()=>(this.Yo=Date.now(),e())),this.Ho*=this.zo,this.Ho<this.Go&&(this.Ho=this.Go),this.Ho>this.jo&&(this.Ho=this.jo)}t_(){this.Jo!==null&&(this.Jo.skipDelay(),this.Jo=null)}cancel(){this.Jo!==null&&(this.Jo.cancel(),this.Jo=null)}e_(){return(Math.random()-.5)*this.Ho}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z3="PersistentStream";class z5{constructor(e,t,i,r,s,o,a,l){this.Ti=e,this.n_=i,this.r_=r,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.i_=0,this.s_=null,this.o_=null,this.stream=null,this.__=0,this.a_=new B5(e,t)}u_(){return this.state===1||this.state===5||this.c_()}c_(){return this.state===2||this.state===3}start(){this.__=0,this.state!==4?this.auth():this.l_()}async stop(){this.u_()&&await this.close(0)}h_(){this.state=0,this.a_.reset()}P_(){this.c_()&&this.s_===null&&(this.s_=this.Ti.enqueueAfterDelay(this.n_,6e4,()=>this.T_()))}I_(e){this.E_(),this.stream.send(e)}async T_(){if(this.c_())return this.close(0)}E_(){this.s_&&(this.s_.cancel(),this.s_=null)}d_(){this.o_&&(this.o_.cancel(),this.o_=null)}async close(e,t){this.E_(),this.d_(),this.a_.cancel(),this.i_++,e!==4?this.a_.reset():t&&t.code===Ne.RESOURCE_EXHAUSTED?(nl(t.toString()),nl("Using maximum backoff delay to prevent overloading the backend."),this.a_.Zo()):t&&t.code===Ne.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.A_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.Lo(t)}A_(){}auth(){this.state=1;const e=this.R_(this.i_),t=this.i_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,r])=>{this.i_===t&&this.V_(i,r)},i=>{e(()=>{const r=new wt(Ne.UNKNOWN,"Fetching auth token failed: "+i.message);return this.m_(r)})})}V_(e,t){const i=this.R_(this.i_);this.stream=this.f_(e,t),this.stream.xo(()=>{i(()=>this.listener.xo())}),this.stream.No(()=>{i(()=>(this.state=2,this.o_=this.Ti.enqueueAfterDelay(this.r_,1e4,()=>(this.c_()&&(this.state=3),Promise.resolve())),this.listener.No()))}),this.stream.Lo(r=>{i(()=>this.m_(r))}),this.stream.onMessage(r=>{i(()=>++this.__==1?this.g_(r):this.onNext(r))})}l_(){this.state=5,this.a_.Xo(async()=>{this.state=0,this.start()})}m_(e){return _t(z3,`close with error: ${e}`),this.stream=null,this.close(4,e)}R_(e){return t=>{this.Ti.enqueueAndForget(()=>this.i_===e?t():(_t(z3,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class Lhe extends z5{constructor(e,t,i,r,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,i,r,o),this.serializer=s}f_(e,t){return this.connection.Wo("Listen",e,t)}g_(e){return this.onNext(e)}onNext(e){this.a_.reset();const t=Vue(this.serializer,e),i=function(s){if(!("targetChange"in s))return Xt.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?Xt.min():o.readTime?ca(o.readTime):Xt.min()}(e);return this.listener.p_(t,i)}y_(e){const t={};t.database=aC(this.serializer),t.addTarget=function(s,o){let a;const l=o.target;if(a=nC(l)?{documents:Hue(s,l)}:{query:Gue(s,l).ht},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=P5(s,o.resumeToken);const c=rC(s,o.expectedCount);c!==null&&(a.expectedCount=c)}else if(o.snapshotVersion.compareTo(Xt.min())>0){a.readTime=z_(s,o.snapshotVersion.toTimestamp());const c=rC(s,o.expectedCount);c!==null&&(a.expectedCount=c)}return a}(this.serializer,e);const i=que(this.serializer,e);i&&(t.labels=i),this.I_(t)}w_(e){const t={};t.database=aC(this.serializer),t.removeTarget=e,this.I_(t)}}class khe extends z5{constructor(e,t,i,r,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,i,r,o),this.serializer=s}get b_(){return this.__>0}start(){this.lastStreamToken=void 0,super.start()}A_(){this.b_&&this.S_([])}f_(e,t){return this.connection.Wo("Write",e,t)}g_(e){return zn(!!e.streamToken),this.lastStreamToken=e.streamToken,zn(!e.writeResults||e.writeResults.length===0),this.listener.D_()}onNext(e){zn(!!e.streamToken),this.lastStreamToken=e.streamToken,this.a_.reset();const t=zue(e.writeResults,e.commitTime),i=ca(e.commitTime);return this.listener.v_(i,t)}C_(){const e={};e.database=aC(this.serializer),this.I_(e)}S_(e){const t={streamToken:this.lastStreamToken,writes:e.map(i=>Bue(this.serializer,i))};this.I_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ohe{}class Uhe extends Ohe{constructor(e,t,i,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=i,this.serializer=r,this.F_=!1}M_(){if(this.F_)throw new wt(Ne.FAILED_PRECONDITION,"The client has already been terminated.")}bo(e,t,i,r){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.bo(e,sC(t,i),r,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===Ne.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new wt(Ne.UNKNOWN,s.toString())})}Co(e,t,i,r,s){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Co(e,sC(t,i),r,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===Ne.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new wt(Ne.UNKNOWN,o.toString())})}terminate(){this.F_=!0,this.connection.terminate()}}class Fhe{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.x_=0,this.O_=null,this.N_=!0}B_(){this.x_===0&&(this.L_("Unknown"),this.O_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.O_=null,this.k_("Backend didn't respond within 10 seconds."),this.L_("Offline"),Promise.resolve())))}q_(e){this.state==="Online"?this.L_("Unknown"):(this.x_++,this.x_>=1&&(this.Q_(),this.k_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.L_("Offline")))}set(e){this.Q_(),this.x_=0,e==="Online"&&(this.N_=!1),this.L_(e)}L_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}k_(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.N_?(nl(t),this.N_=!1):_t("OnlineStateTracker",t)}Q_(){this.O_!==null&&(this.O_.cancel(),this.O_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lh="RemoteStore";class jhe{constructor(e,t,i,r,s){this.localStore=e,this.datastore=t,this.asyncQueue=i,this.remoteSyncer={},this.K_=[],this.U_=new Map,this.W_=new Set,this.G_=[],this.z_=s,this.z_.To(o=>{i.enqueueAndForget(async()=>{_h(this)&&(_t(lh,"Restarting streams for network reachability change."),await async function(l){const c=Qt(l);c.W_.add(4),await gy(c),c.j_.set("Unknown"),c.W_.delete(4),await db(c)}(this))})}),this.j_=new Fhe(i,r)}}async function db(n){if(_h(n))for(const e of n.G_)await e(!0)}async function gy(n){for(const e of n.G_)await e(!1)}function H5(n,e){const t=Qt(n);t.U_.has(e.targetId)||(t.U_.set(e.targetId,e),SI(t)?bI(t):zf(t).c_()&&wI(t,e))}function _I(n,e){const t=Qt(n),i=zf(t);t.U_.delete(e),i.c_()&&G5(t,e),t.U_.size===0&&(i.c_()?i.P_():_h(t)&&t.j_.set("Unknown"))}function wI(n,e){if(n.H_.Ne(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Xt.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}zf(n).y_(e)}function G5(n,e){n.H_.Ne(e),zf(n).w_(e)}function bI(n){n.H_=new Due({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),lt:e=>n.U_.get(e)||null,it:()=>n.datastore.serializer.databaseId}),zf(n).start(),n.j_.B_()}function SI(n){return _h(n)&&!zf(n).u_()&&n.U_.size>0}function _h(n){return Qt(n).W_.size===0}function W5(n){n.H_=void 0}async function Vhe(n){n.j_.set("Online")}async function Bhe(n){n.U_.forEach((e,t)=>{wI(n,e)})}async function zhe(n,e){W5(n),SI(n)?(n.j_.q_(e),bI(n)):n.j_.set("Unknown")}async function Hhe(n,e,t){if(n.j_.set("Online"),e instanceof I5&&e.state===2&&e.cause)try{await async function(r,s){const o=s.cause;for(const a of s.targetIds)r.U_.has(a)&&(await r.remoteSyncer.rejectListen(a,o),r.U_.delete(a),r.H_.removeTarget(a))}(n,e)}catch(i){_t(lh,"Failed to remove targets %s: %s ",e.targetIds.join(","),i),await G_(n,i)}else if(e instanceof i0?n.H_.We(e):e instanceof M5?n.H_.Ze(e):n.H_.je(e),!t.isEqual(Xt.min()))try{const i=await V5(n.localStore);t.compareTo(i)>=0&&await function(s,o){const a=s.H_.ot(o);return a.targetChanges.forEach((l,c)=>{if(l.resumeToken.approximateByteSize()>0){const u=s.U_.get(c);u&&s.U_.set(c,u.withResumeToken(l.resumeToken,o))}}),a.targetMismatches.forEach((l,c)=>{const u=s.U_.get(l);if(!u)return;s.U_.set(l,u.withResumeToken(yr.EMPTY_BYTE_STRING,u.snapshotVersion)),G5(s,l);const f=new ql(u.target,l,c,u.sequenceNumber);wI(s,f)}),s.remoteSyncer.applyRemoteEvent(a)}(n,t)}catch(i){_t(lh,"Failed to raise snapshot:",i),await G_(n,i)}}async function G_(n,e,t){if(!Vf(e))throw e;n.W_.add(1),await gy(n),n.j_.set("Offline"),t||(t=()=>V5(n.localStore)),n.asyncQueue.enqueueRetryable(async()=>{_t(lh,"Retrying IndexedDB access"),await t(),n.W_.delete(1),await db(n)})}function q5(n,e){return e().catch(t=>G_(n,t,e))}async function fb(n){const e=Qt(n),t=xc(e);let i=e.K_.length>0?e.K_[e.K_.length-1].batchId:aI;for(;Ghe(e);)try{const r=await Ehe(e.localStore,i);if(r===null){e.K_.length===0&&t.P_();break}i=r.batchId,Whe(e,r)}catch(r){await G_(e,r)}$5(e)&&X5(e)}function Ghe(n){return _h(n)&&n.K_.length<10}function Whe(n,e){n.K_.push(e);const t=xc(n);t.c_()&&t.b_&&t.S_(e.mutations)}function $5(n){return _h(n)&&!xc(n).u_()&&n.K_.length>0}function X5(n){xc(n).start()}async function qhe(n){xc(n).C_()}async function $he(n){const e=xc(n);for(const t of n.K_)e.S_(t.mutations)}async function Xhe(n,e,t){const i=n.K_.shift(),r=fI.from(i,e,t);await q5(n,()=>n.remoteSyncer.applySuccessfulWrite(r)),await fb(n)}async function Khe(n,e){e&&xc(n).b_&&await async function(i,r){if(function(o){return Pue(o)&&o!==Ne.ABORTED}(r.code)){const s=i.K_.shift();xc(i).h_(),await q5(i,()=>i.remoteSyncer.rejectFailedWrite(s.batchId,r)),await fb(i)}}(n,e),$5(n)&&X5(n)}async function H3(n,e){const t=Qt(n);t.asyncQueue.verifyOperationInProgress(),_t(lh,"RemoteStore received new credentials");const i=_h(t);t.W_.add(3),await gy(t),i&&t.j_.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.W_.delete(3),await db(t)}async function Yhe(n,e){const t=Qt(n);e?(t.W_.delete(2),await db(t)):e||(t.W_.add(2),await gy(t),t.j_.set("Unknown"))}function zf(n){return n.J_||(n.J_=function(t,i,r){const s=Qt(t);return s.M_(),new Lhe(i,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,r)}(n.datastore,n.asyncQueue,{xo:Vhe.bind(null,n),No:Bhe.bind(null,n),Lo:zhe.bind(null,n),p_:Hhe.bind(null,n)}),n.G_.push(async e=>{e?(n.J_.h_(),SI(n)?bI(n):n.j_.set("Unknown")):(await n.J_.stop(),W5(n))})),n.J_}function xc(n){return n.Y_||(n.Y_=function(t,i,r){const s=Qt(t);return s.M_(),new khe(i,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,r)}(n.datastore,n.asyncQueue,{xo:()=>Promise.resolve(),No:qhe.bind(null,n),Lo:Khe.bind(null,n),D_:$he.bind(null,n),v_:Xhe.bind(null,n)}),n.G_.push(async e=>{e?(n.Y_.h_(),await fb(n)):(await n.Y_.stop(),n.K_.length>0&&(_t(lh,`Stopping write stream with ${n.K_.length} pending writes`),n.K_=[]))})),n.Y_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TI{constructor(e,t,i,r,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=i,this.op=r,this.removalCallback=s,this.deferred=new Ga,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,i,r,s){const o=Date.now()+i,a=new TI(e,t,o,r,s);return a.start(i),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new wt(Ne.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function EI(n,e){if(nl("AsyncQueue",`${e}: ${n}`),Vf(n))return new wt(Ne.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qd{static emptySet(e){return new Qd(e.comparator)}constructor(e){this.comparator=e?(t,i)=>e(t,i)||Dt.comparator(t.key,i.key):(t,i)=>Dt.comparator(t.key,i.key),this.keyedMap=tm(),this.sortedSet=new mi(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,i)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Qd)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;t.hasNext();){const r=t.getNext().key,s=i.getNext().key;if(!r.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const i=new Qd;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=t,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G3{constructor(){this.Z_=new mi(Dt.comparator)}track(e){const t=e.doc.key,i=this.Z_.get(t);i?e.type!==0&&i.type===3?this.Z_=this.Z_.insert(t,e):e.type===3&&i.type!==1?this.Z_=this.Z_.insert(t,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.Z_=this.Z_.insert(t,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.Z_=this.Z_.insert(t,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.Z_=this.Z_.remove(t):e.type===1&&i.type===2?this.Z_=this.Z_.insert(t,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.Z_=this.Z_.insert(t,{type:2,doc:e.doc}):Ht():this.Z_=this.Z_.insert(t,e)}X_(){const e=[];return this.Z_.inorderTraversal((t,i)=>{e.push(i)}),e}}class bf{constructor(e,t,i,r,s,o,a,l,c){this.query=e,this.docs=t,this.oldDocs=i,this.docChanges=r,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=c}static fromInitialDocuments(e,t,i,r,s){const o=[];return t.forEach(a=>{o.push({type:0,doc:a})}),new bf(e,t,Qd.emptySet(t),o,i,r,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&ob(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,i=e.docChanges;if(t.length!==i.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==i[r].type||!t[r].doc.isEqual(i[r].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jhe{constructor(){this.ea=void 0,this.ta=[]}na(){return this.ta.some(e=>e.ra())}}class Qhe{constructor(){this.queries=W3(),this.onlineState="Unknown",this.ia=new Set}terminate(){(function(t,i){const r=Qt(t),s=r.queries;r.queries=W3(),s.forEach((o,a)=>{for(const l of a.ta)l.onError(i)})})(this,new wt(Ne.ABORTED,"Firestore shutting down"))}}function W3(){return new xh(n=>p5(n),ob)}async function CI(n,e){const t=Qt(n);let i=3;const r=e.query;let s=t.queries.get(r);s?!s.na()&&e.ra()&&(i=2):(s=new Jhe,i=e.ra()?0:1);try{switch(i){case 0:s.ea=await t.onListen(r,!0);break;case 1:s.ea=await t.onListen(r,!1);break;case 2:await t.onFirstRemoteStoreListen(r)}}catch(o){const a=EI(o,`Initialization of query '${hd(e.query)}' failed`);return void e.onError(a)}t.queries.set(r,s),s.ta.push(e),e.sa(t.onlineState),s.ea&&e.oa(s.ea)&&MI(t)}async function AI(n,e){const t=Qt(n),i=e.query;let r=3;const s=t.queries.get(i);if(s){const o=s.ta.indexOf(e);o>=0&&(s.ta.splice(o,1),s.ta.length===0?r=e.ra()?0:1:!s.na()&&e.ra()&&(r=2))}switch(r){case 0:return t.queries.delete(i),t.onUnlisten(i,!0);case 1:return t.queries.delete(i),t.onUnlisten(i,!1);case 2:return t.onLastRemoteStoreUnlisten(i);default:return}}function Zhe(n,e){const t=Qt(n);let i=!1;for(const r of e){const s=r.query,o=t.queries.get(s);if(o){for(const a of o.ta)a.oa(r)&&(i=!0);o.ea=r}}i&&MI(t)}function ede(n,e,t){const i=Qt(n),r=i.queries.get(e);if(r)for(const s of r.ta)s.onError(t);i.queries.delete(e)}function MI(n){n.ia.forEach(e=>{e.next()})}var uC,q3;(q3=uC||(uC={}))._a="default",q3.Cache="cache";class II{constructor(e,t,i){this.query=e,this.aa=t,this.ua=!1,this.ca=null,this.onlineState="Unknown",this.options=i||{}}oa(e){if(!this.options.includeMetadataChanges){const i=[];for(const r of e.docChanges)r.type!==3&&i.push(r);e=new bf(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.ua?this.la(e)&&(this.aa.next(e),t=!0):this.ha(e,this.onlineState)&&(this.Pa(e),t=!0),this.ca=e,t}onError(e){this.aa.error(e)}sa(e){this.onlineState=e;let t=!1;return this.ca&&!this.ua&&this.ha(this.ca,e)&&(this.Pa(this.ca),t=!0),t}ha(e,t){if(!e.fromCache||!this.ra())return!0;const i=t!=="Offline";return(!this.options.Ta||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}la(e){if(e.docChanges.length>0)return!0;const t=this.ca&&this.ca.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}Pa(e){e=bf.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.ua=!0,this.aa.next(e)}ra(){return this.options.source!==uC.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class K5{constructor(e){this.key=e}}class Y5{constructor(e){this.key=e}}class tde{constructor(e,t){this.query=e,this.fa=t,this.ga=null,this.hasCachedResults=!1,this.current=!1,this.pa=_n(),this.mutatedKeys=_n(),this.ya=m5(e),this.wa=new Qd(this.ya)}get ba(){return this.fa}Sa(e,t){const i=t?t.Da:new G3,r=t?t.wa:this.wa;let s=t?t.mutatedKeys:this.mutatedKeys,o=r,a=!1;const l=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,c=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((u,f)=>{const m=r.get(u),g=ab(this.query,f)?f:null,x=!!m&&this.mutatedKeys.has(m.key),b=!!g&&(g.hasLocalMutations||this.mutatedKeys.has(g.key)&&g.hasCommittedMutations);let w=!1;m&&g?m.data.isEqual(g.data)?x!==b&&(i.track({type:3,doc:g}),w=!0):this.va(m,g)||(i.track({type:2,doc:g}),w=!0,(l&&this.ya(g,l)>0||c&&this.ya(g,c)<0)&&(a=!0)):!m&&g?(i.track({type:0,doc:g}),w=!0):m&&!g&&(i.track({type:1,doc:m}),w=!0,(l||c)&&(a=!0)),w&&(g?(o=o.add(g),s=b?s.add(u):s.delete(u)):(o=o.delete(u),s=s.delete(u)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const u=this.query.limitType==="F"?o.last():o.first();o=o.delete(u.key),s=s.delete(u.key),i.track({type:1,doc:u})}return{wa:o,Da:i,ls:a,mutatedKeys:s}}va(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,i,r){const s=this.wa;this.wa=e.wa,this.mutatedKeys=e.mutatedKeys;const o=e.Da.X_();o.sort((u,f)=>function(g,x){const b=w=>{switch(w){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ht()}};return b(g)-b(x)}(u.type,f.type)||this.ya(u.doc,f.doc)),this.Ca(i),r=r!=null&&r;const a=t&&!r?this.Fa():[],l=this.pa.size===0&&this.current&&!r?1:0,c=l!==this.ga;return this.ga=l,o.length!==0||c?{snapshot:new bf(this.query,e.wa,s,o,e.mutatedKeys,l===0,c,!1,!!i&&i.resumeToken.approximateByteSize()>0),Ma:a}:{Ma:a}}sa(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({wa:this.wa,Da:new G3,mutatedKeys:this.mutatedKeys,ls:!1},!1)):{Ma:[]}}xa(e){return!this.fa.has(e)&&!!this.wa.has(e)&&!this.wa.get(e).hasLocalMutations}Ca(e){e&&(e.addedDocuments.forEach(t=>this.fa=this.fa.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.fa=this.fa.delete(t)),this.current=e.current)}Fa(){if(!this.current)return[];const e=this.pa;this.pa=_n(),this.wa.forEach(i=>{this.xa(i.key)&&(this.pa=this.pa.add(i.key))});const t=[];return e.forEach(i=>{this.pa.has(i)||t.push(new Y5(i))}),this.pa.forEach(i=>{e.has(i)||t.push(new K5(i))}),t}Oa(e){this.fa=e.gs,this.pa=_n();const t=this.Sa(e.documents);return this.applyChanges(t,!0)}Na(){return bf.fromInitialDocuments(this.query,this.wa,this.mutatedKeys,this.ga===0,this.hasCachedResults)}}const PI="SyncEngine";class nde{constructor(e,t,i){this.query=e,this.targetId=t,this.view=i}}class ide{constructor(e){this.key=e,this.Ba=!1}}class rde{constructor(e,t,i,r,s,o){this.localStore=e,this.remoteStore=t,this.eventManager=i,this.sharedClientState=r,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.La={},this.ka=new xh(a=>p5(a),ob),this.qa=new Map,this.Qa=new Set,this.$a=new mi(Dt.comparator),this.Ka=new Map,this.Ua=new gI,this.Wa={},this.Ga=new Map,this.za=wf.Un(),this.onlineState="Unknown",this.ja=void 0}get isPrimaryClient(){return this.ja===!0}}async function sde(n,e,t=!0){const i=n6(n);let r;const s=i.ka.get(e);return s?(i.sharedClientState.addLocalQueryTarget(s.targetId),r=s.view.Na()):r=await J5(i,e,t,!0),r}async function ode(n,e){const t=n6(n);await J5(t,e,!0,!1)}async function J5(n,e,t,i){const r=await Che(n.localStore,la(e)),s=r.targetId,o=n.sharedClientState.addLocalQueryTarget(s,t);let a;return i&&(a=await ade(n,e,s,o==="current",r.resumeToken)),n.isPrimaryClient&&t&&H5(n.remoteStore,r),a}async function ade(n,e,t,i,r){n.Ha=(f,m,g)=>async function(b,w,v,S){let E=w.view.Sa(v);E.ls&&(E=await F3(b.localStore,w.query,!1).then(({documents:C})=>w.view.Sa(C,E)));const I=S&&S.targetChanges.get(w.targetId),U=S&&S.targetMismatches.get(w.targetId)!=null,O=w.view.applyChanges(E,b.isPrimaryClient,I,U);return X3(b,w.targetId,O.Ma),O.snapshot}(n,f,m,g);const s=await F3(n.localStore,e,!0),o=new tde(e,s.gs),a=o.Sa(s.documents),l=my.createSynthesizedTargetChangeForCurrentChange(t,i&&n.onlineState!=="Offline",r),c=o.applyChanges(a,n.isPrimaryClient,l);X3(n,t,c.Ma);const u=new nde(e,t,o);return n.ka.set(e,u),n.qa.has(t)?n.qa.get(t).push(e):n.qa.set(t,[e]),c.snapshot}async function lde(n,e,t){const i=Qt(n),r=i.ka.get(e),s=i.qa.get(r.targetId);if(s.length>1)return i.qa.set(r.targetId,s.filter(o=>!ob(o,e))),void i.ka.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(r.targetId),i.sharedClientState.isActiveQueryTarget(r.targetId)||await lC(i.localStore,r.targetId,!1).then(()=>{i.sharedClientState.clearQueryState(r.targetId),t&&_I(i.remoteStore,r.targetId),hC(i,r.targetId)}).catch(jf)):(hC(i,r.targetId),await lC(i.localStore,r.targetId,!0))}async function cde(n,e){const t=Qt(n),i=t.ka.get(e),r=t.qa.get(i.targetId);t.isPrimaryClient&&r.length===1&&(t.sharedClientState.removeLocalQueryTarget(i.targetId),_I(t.remoteStore,i.targetId))}async function ude(n,e,t){const i=yde(n);try{const r=await function(o,a){const l=Qt(o),c=Bi.now(),u=a.reduce((g,x)=>g.add(x.key),_n());let f,m;return l.persistence.runTransaction("Locally write mutations","readwrite",g=>{let x=il(),b=_n();return l.ds.getEntries(g,u).next(w=>{x=w,x.forEach((v,S)=>{S.isValidDocument()||(b=b.add(v))})}).next(()=>l.localDocuments.getOverlayedDocuments(g,x)).next(w=>{f=w;const v=[];for(const S of a){const E=Eue(S,f.get(S.key).overlayedDocument);E!=null&&v.push(new kc(S.key,E,o5(E.value.mapValue),No.exists(!0)))}return l.mutationQueue.addMutationBatch(g,c,v,a)}).next(w=>{m=w;const v=w.applyToLocalDocumentSet(f,b);return l.documentOverlayCache.saveOverlays(g,w.batchId,v)})}).then(()=>({batchId:m.batchId,changes:y5(f)}))}(i.localStore,e);i.sharedClientState.addPendingMutation(r.batchId),function(o,a,l){let c=o.Wa[o.currentUser.toKey()];c||(c=new mi(Tn)),c=c.insert(a,l),o.Wa[o.currentUser.toKey()]=c}(i,r.batchId,t),await yy(i,r.changes),await fb(i.remoteStore)}catch(r){const s=EI(r,"Failed to persist write");t.reject(s)}}async function Q5(n,e){const t=Qt(n);try{const i=await She(t.localStore,e);e.targetChanges.forEach((r,s)=>{const o=t.Ka.get(s);o&&(zn(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1),r.addedDocuments.size>0?o.Ba=!0:r.modifiedDocuments.size>0?zn(o.Ba):r.removedDocuments.size>0&&(zn(o.Ba),o.Ba=!1))}),await yy(t,i,e)}catch(i){await jf(i)}}function $3(n,e,t){const i=Qt(n);if(i.isPrimaryClient&&t===0||!i.isPrimaryClient&&t===1){const r=[];i.ka.forEach((s,o)=>{const a=o.view.sa(e);a.snapshot&&r.push(a.snapshot)}),function(o,a){const l=Qt(o);l.onlineState=a;let c=!1;l.queries.forEach((u,f)=>{for(const m of f.ta)m.sa(a)&&(c=!0)}),c&&MI(l)}(i.eventManager,e),r.length&&i.La.p_(r),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function hde(n,e,t){const i=Qt(n);i.sharedClientState.updateQueryState(e,"rejected",t);const r=i.Ka.get(e),s=r&&r.key;if(s){let o=new mi(Dt.comparator);o=o.insert(s,Dr.newNoDocument(s,Xt.min()));const a=_n().add(s),l=new ub(Xt.min(),new Map,new mi(Tn),o,a);await Q5(i,l),i.$a=i.$a.remove(s),i.Ka.delete(e),RI(i)}else await lC(i.localStore,e,!1).then(()=>hC(i,e,t)).catch(jf)}async function dde(n,e){const t=Qt(n),i=e.batch.batchId;try{const r=await bhe(t.localStore,e);e6(t,i,null),Z5(t,i),t.sharedClientState.updateMutationState(i,"acknowledged"),await yy(t,r)}catch(r){await jf(r)}}async function fde(n,e,t){const i=Qt(n);try{const r=await function(o,a){const l=Qt(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let u;return l.mutationQueue.lookupMutationBatch(c,a).next(f=>(zn(f!==null),u=f.keys(),l.mutationQueue.removeMutationBatch(c,f))).next(()=>l.mutationQueue.performConsistencyCheck(c)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(c,u,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,u)).next(()=>l.localDocuments.getDocuments(c,u))})}(i.localStore,e);e6(i,e,t),Z5(i,e),i.sharedClientState.updateMutationState(e,"rejected",t),await yy(i,r)}catch(r){await jf(r)}}function Z5(n,e){(n.Ga.get(e)||[]).forEach(t=>{t.resolve()}),n.Ga.delete(e)}function e6(n,e,t){const i=Qt(n);let r=i.Wa[i.currentUser.toKey()];if(r){const s=r.get(e);s&&(t?s.reject(t):s.resolve(),r=r.remove(e)),i.Wa[i.currentUser.toKey()]=r}}function hC(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const i of n.qa.get(e))n.ka.delete(i),t&&n.La.Ja(i,t);n.qa.delete(e),n.isPrimaryClient&&n.Ua.Sr(e).forEach(i=>{n.Ua.containsKey(i)||t6(n,i)})}function t6(n,e){n.Qa.delete(e.path.canonicalString());const t=n.$a.get(e);t!==null&&(_I(n.remoteStore,t),n.$a=n.$a.remove(e),n.Ka.delete(t),RI(n))}function X3(n,e,t){for(const i of t)i instanceof K5?(n.Ua.addReference(i.key,e),pde(n,i)):i instanceof Y5?(_t(PI,"Document no longer in limbo: "+i.key),n.Ua.removeReference(i.key,e),n.Ua.containsKey(i.key)||t6(n,i.key)):Ht()}function pde(n,e){const t=e.key,i=t.path.canonicalString();n.$a.get(t)||n.Qa.has(i)||(_t(PI,"New document in limbo: "+t),n.Qa.add(i),RI(n))}function RI(n){for(;n.Qa.size>0&&n.$a.size<n.maxConcurrentLimboResolutions;){const e=n.Qa.values().next().value;n.Qa.delete(e);const t=new Dt(ni.fromString(e)),i=n.za.next();n.Ka.set(i,new ide(t)),n.$a=n.$a.insert(t,i),H5(n.remoteStore,new ql(la(sb(t.path)),i,"TargetPurposeLimboResolution",nb.ae))}}async function yy(n,e,t){const i=Qt(n),r=[],s=[],o=[];i.ka.isEmpty()||(i.ka.forEach((a,l)=>{o.push(i.Ha(l,e,t).then(c=>{var u;if((c||t)&&i.isPrimaryClient){const f=c?!c.fromCache:(u=t?.targetChanges.get(l.targetId))===null||u===void 0?void 0:u.current;i.sharedClientState.updateQueryState(l.targetId,f?"current":"not-current")}if(c){r.push(c);const f=vI.Yi(l.targetId,c);s.push(f)}}))}),await Promise.all(o),i.La.p_(r),await async function(l,c){const u=Qt(l);try{await u.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>De.forEach(c,m=>De.forEach(m.Hi,g=>u.persistence.referenceDelegate.addReference(f,m.targetId,g)).next(()=>De.forEach(m.Ji,g=>u.persistence.referenceDelegate.removeReference(f,m.targetId,g)))))}catch(f){if(!Vf(f))throw f;_t(xI,"Failed to update sequence numbers: "+f)}for(const f of c){const m=f.targetId;if(!f.fromCache){const g=u.Ts.get(m),x=g.snapshotVersion,b=g.withLastLimboFreeSnapshotVersion(x);u.Ts=u.Ts.insert(m,b)}}}(i.localStore,s))}async function mde(n,e){const t=Qt(n);if(!t.currentUser.isEqual(e)){_t(PI,"User change. New user:",e.toKey());const i=await j5(t.localStore,e);t.currentUser=e,function(s,o){s.Ga.forEach(a=>{a.forEach(l=>{l.reject(new wt(Ne.CANCELLED,o))})}),s.Ga.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await yy(t,i.Rs)}}function gde(n,e){const t=Qt(n),i=t.Ka.get(e);if(i&&i.Ba)return _n().add(i.key);{let r=_n();const s=t.qa.get(e);if(!s)return r;for(const o of s){const a=t.ka.get(o);r=r.unionWith(a.view.ba)}return r}}function n6(n){const e=Qt(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=Q5.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=gde.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=hde.bind(null,e),e.La.p_=Zhe.bind(null,e.eventManager),e.La.Ja=ede.bind(null,e.eventManager),e}function yde(n){const e=Qt(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=dde.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=fde.bind(null,e),e}class W_{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=hb(e.databaseInfo.databaseId),this.sharedClientState=this.Za(e),this.persistence=this.Xa(e),await this.persistence.start(),this.localStore=this.eu(e),this.gcScheduler=this.tu(e,this.localStore),this.indexBackfillerScheduler=this.nu(e,this.localStore)}tu(e,t){return null}nu(e,t){return null}eu(e){return whe(this.persistence,new vhe,e.initialUser,this.serializer)}Xa(e){return new F5(yI.ri,this.serializer)}Za(e){return new Mhe}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}W_.provider={build:()=>new W_};class vde extends W_{constructor(e){super(),this.cacheSizeBytes=e}tu(e,t){zn(this.persistence.referenceDelegate instanceof H_);const i=this.persistence.referenceDelegate.garbageCollector;return new ihe(i,e.asyncQueue,t)}Xa(e){const t=this.cacheSizeBytes!==void 0?cs.withCacheSize(this.cacheSizeBytes):cs.DEFAULT;return new F5(i=>H_.ri(i,t),this.serializer)}}class dC{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>$3(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=mde.bind(null,this.syncEngine),await Yhe(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new Qhe}()}createDatastore(e){const t=hb(e.databaseInfo.databaseId),i=function(s){return new Dhe(s)}(e.databaseInfo);return function(s,o,a,l){return new Uhe(s,o,a,l)}(e.authCredentials,e.appCheckCredentials,i,t)}createRemoteStore(e){return function(i,r,s,o,a){return new jhe(i,r,s,o,a)}(this.localStore,this.datastore,e.asyncQueue,t=>$3(this.syncEngine,t,0),function(){return B3.D()?new B3:new Ihe}())}createSyncEngine(e,t){return function(r,s,o,a,l,c,u){const f=new rde(r,s,o,a,l,c);return u&&(f.ja=!0),f}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(r){const s=Qt(r);_t(lh,"RemoteStore shutting down."),s.W_.add(5),await gy(s),s.z_.shutdown(),s.j_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()}}dC.provider={build:()=>new dC};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NI{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.iu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.iu(this.observer.error,e):nl("Uncaught Error in snapshot listener:",e.toString()))}su(){this.muted=!0}iu(e,t){setTimeout(()=>{this.muted||e(t)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _c="FirestoreClient";class xde{constructor(e,t,i,r,s){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=i,this.databaseInfo=r,this.user=Rr.UNAUTHENTICATED,this.clientId=Yz.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(i,async o=>{_t(_c,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(i,o=>(_t(_c,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Ga;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const i=EI(t,"Failed to shutdown persistence");e.reject(i)}}),e.promise}}async function hE(n,e){n.asyncQueue.verifyOperationInProgress(),_t(_c,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let i=t.initialUser;n.setCredentialChangeListener(async r=>{i.isEqual(r)||(await j5(e.localStore,r),i=r)}),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}async function K3(n,e){n.asyncQueue.verifyOperationInProgress();const t=await _de(n);_t(_c,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener(i=>H3(e.remoteStore,i)),n.setAppCheckTokenChangeListener((i,r)=>H3(e.remoteStore,r)),n._onlineComponents=e}async function _de(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){_t(_c,"Using user provided OfflineComponentProvider");try{await hE(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!function(r){return r.name==="FirebaseError"?r.code===Ne.FAILED_PRECONDITION||r.code===Ne.UNIMPLEMENTED:!(typeof DOMException<"u"&&r instanceof DOMException)||r.code===22||r.code===20||r.code===11}(t))throw t;yf("Error using user provided cache. Falling back to memory cache: "+t),await hE(n,new W_)}}else _t(_c,"Using default OfflineComponentProvider"),await hE(n,new vde(void 0));return n._offlineComponents}async function i6(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(_t(_c,"Using user provided OnlineComponentProvider"),await K3(n,n._uninitializedComponentsProvider._online)):(_t(_c,"Using default OnlineComponentProvider"),await K3(n,new dC))),n._onlineComponents}function wde(n){return i6(n).then(e=>e.syncEngine)}async function q_(n){const e=await i6(n),t=e.eventManager;return t.onListen=sde.bind(null,e.syncEngine),t.onUnlisten=lde.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=ode.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=cde.bind(null,e.syncEngine),t}function bde(n,e,t={}){const i=new Ga;return n.asyncQueue.enqueueAndForget(async()=>function(s,o,a,l,c){const u=new NI({next:m=>{u.su(),o.enqueueAndForget(()=>AI(s,f));const g=m.docs.has(a);!g&&m.fromCache?c.reject(new wt(Ne.UNAVAILABLE,"Failed to get document because the client is offline.")):g&&m.fromCache&&l&&l.source==="server"?c.reject(new wt(Ne.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(m)},error:m=>c.reject(m)}),f=new II(sb(a.path),u,{includeMetadataChanges:!0,Ta:!0});return CI(s,f)}(await q_(n),n.asyncQueue,e,t,i)),i.promise}function Sde(n,e,t={}){const i=new Ga;return n.asyncQueue.enqueueAndForget(async()=>function(s,o,a,l,c){const u=new NI({next:m=>{u.su(),o.enqueueAndForget(()=>AI(s,f)),m.fromCache&&l.source==="server"?c.reject(new wt(Ne.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(m)},error:m=>c.reject(m)}),f=new II(a,u,{includeMetadataChanges:!0,Ta:!0});return CI(s,f)}(await q_(n),n.asyncQueue,e,t,i)),i.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function r6(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Y3=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function s6(n,e,t){if(!t)throw new wt(Ne.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function Tde(n,e,t,i){if(e===!0&&i===!0)throw new wt(Ne.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function J3(n){if(!Dt.isDocumentKey(n))throw new wt(Ne.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function Q3(n){if(Dt.isDocumentKey(n))throw new wt(Ne.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function pb(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=function(i){return i.constructor?i.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":Ht()}function Vs(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new wt(Ne.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=pb(n);throw new wt(Ne.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o6="firestore.googleapis.com",Z3=!0;class eO{constructor(e){var t,i;if(e.host===void 0){if(e.ssl!==void 0)throw new wt(Ne.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=o6,this.ssl=Z3}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:Z3;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=U5;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<the)throw new wt(Ne.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Tde("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=r6((i=e.experimentalLongPollingOptions)!==null&&i!==void 0?i:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new wt(Ne.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new wt(Ne.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new wt(Ne.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(i,r){return i.timeoutSeconds===r.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class mb{constructor(e,t,i,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=i,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new eO({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new wt(Ne.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new wt(Ne.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new eO(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(i){if(!i)return new Rce;switch(i.type){case"firstParty":return new kce(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new wt(Ne.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const i=Y3.get(t);i&&(_t("ComponentProvider","Removing Datastore"),Y3.delete(t),i.terminate())}(this),Promise.resolve()}}function Ede(n,e,t,i={}){var r;const s=(n=Vs(n,mb))._getSettings(),o=Object.assign(Object.assign({},s),{emulatorOptions:n._getEmulatorOptions()}),a=`${e}:${t}`;s.host!==o6&&s.host!==a&&yf("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const l=Object.assign(Object.assign({},s),{host:a,ssl:!1,emulatorOptions:i});if(!ih(l,o)&&(n._setSettings(l),i.mockUserToken)){let c,u;if(typeof i.mockUserToken=="string")c=i.mockUserToken,u=Rr.MOCK_USER;else{c=Gse(i.mockUserToken,(r=n._app)===null||r===void 0?void 0:r.options.projectId);const f=i.mockUserToken.sub||i.mockUserToken.user_id;if(!f)throw new wt(Ne.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new Rr(f)}n._authCredentials=new Nce(new Kz(c,u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ll{constructor(e,t,i){this.converter=t,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new ll(this.firestore,e,this._query)}}class Fr{constructor(e,t,i){this.converter=t,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new oc(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Fr(this.firestore,e,this._key)}}class oc extends ll{constructor(e,t,i){super(e,t,sb(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Fr(this.firestore,null,new Dt(e))}withConverter(e){return new oc(this.firestore,e,this._path)}}function Hu(n,e,...t){if(n=sr(n),s6("collection","path",e),n instanceof mb){const i=ni.fromString(e,...t);return Q3(i),new oc(n,null,i)}{if(!(n instanceof Fr||n instanceof oc))throw new wt(Ne.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(ni.fromString(e,...t));return Q3(i),new oc(n.firestore,null,i)}}function fo(n,e,...t){if(n=sr(n),arguments.length===1&&(e=Yz.newId()),s6("doc","path",e),n instanceof mb){const i=ni.fromString(e,...t);return J3(i),new Fr(n,null,new Dt(i))}{if(!(n instanceof Fr||n instanceof oc))throw new wt(Ne.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(ni.fromString(e,...t));return J3(i),new Fr(n.firestore,n instanceof oc?n.converter:null,new Dt(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tO="AsyncQueue";class nO{constructor(e=Promise.resolve()){this.Vu=[],this.mu=!1,this.fu=[],this.gu=null,this.pu=!1,this.yu=!1,this.wu=[],this.a_=new B5(this,"async_queue_retry"),this.bu=()=>{const i=uE();i&&_t(tO,"Visibility state changed to "+i.visibilityState),this.a_.t_()},this.Su=e;const t=uE();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.bu)}get isShuttingDown(){return this.mu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Du(),this.vu(e)}enterRestrictedMode(e){if(!this.mu){this.mu=!0,this.yu=e||!1;const t=uE();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.bu)}}enqueue(e){if(this.Du(),this.mu)return new Promise(()=>{});const t=new Ga;return this.vu(()=>this.mu&&this.yu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Vu.push(e),this.Cu()))}async Cu(){if(this.Vu.length!==0){try{await this.Vu[0](),this.Vu.shift(),this.a_.reset()}catch(e){if(!Vf(e))throw e;_t(tO,"Operation failed with retryable error: "+e)}this.Vu.length>0&&this.a_.Xo(()=>this.Cu())}}vu(e){const t=this.Su.then(()=>(this.pu=!0,e().catch(i=>{this.gu=i,this.pu=!1;const r=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(i);throw nl("INTERNAL UNHANDLED ERROR: ",r),i}).then(i=>(this.pu=!1,i))));return this.Su=t,t}enqueueAfterDelay(e,t,i){this.Du(),this.wu.indexOf(e)>-1&&(t=0);const r=TI.createAndSchedule(this,e,t,i,s=>this.Fu(s));return this.fu.push(r),r}Du(){this.gu&&Ht()}verifyOperationInProgress(){}async Mu(){let e;do e=this.Su,await e;while(e!==this.Su)}xu(e){for(const t of this.fu)if(t.timerId===e)return!0;return!1}Ou(e){return this.Mu().then(()=>{this.fu.sort((t,i)=>t.targetTimeMs-i.targetTimeMs);for(const t of this.fu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Mu()})}Nu(e){this.wu.push(e)}Fu(e){const t=this.fu.indexOf(e);this.fu.splice(t,1)}}function iO(n){return function(t,i){if(typeof t!="object"||t===null)return!1;const r=t;for(const s of i)if(s in r&&typeof r[s]=="function")return!0;return!1}(n,["next","error","complete"])}class wc extends mb{constructor(e,t,i,r){super(e,t,i,r),this.type="firestore",this._queue=new nO,this._persistenceKey=r?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new nO(e),this._firestoreClient=void 0,await e}}}function bc(n,e){const t=typeof n=="object"?n:sz(),i=typeof n=="string"?n:U_,r=YM(t,"firestore").getImmediate({identifier:i});if(!r._initialized){const s=zse("firestore");s&&Ede(r,...s)}return r}function gb(n){if(n._terminated)throw new wt(Ne.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||Cde(n),n._firestoreClient}function Cde(n){var e,t,i;const r=n._freezeSettings(),s=function(a,l,c,u){return new Kce(a,l,c,u.host,u.ssl,u.experimentalForceLongPolling,u.experimentalAutoDetectLongPolling,r6(u.experimentalLongPollingOptions),u.useFetchStreams)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,r);n._componentsProvider||!((t=r.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((i=r.localCache)===null||i===void 0)&&i._onlineComponentProvider)&&(n._componentsProvider={_offline:r.localCache._offlineComponentProvider,_online:r.localCache._onlineComponentProvider}),n._firestoreClient=new xde(n._authCredentials,n._appCheckCredentials,n._queue,s,n._componentsProvider&&function(a){const l=a?._online.build();return{_offline:a?._offline.build(l),_online:l}}(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sf{constructor(e){this._byteString=e}static fromBase64String(e){try{return new Sf(yr.fromBase64String(e))}catch(t){throw new wt(Ne.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new Sf(yr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yb{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new wt(Ne.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new fr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vb{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DI{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new wt(Ne.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new wt(Ne.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return Tn(this._lat,e._lat)||Tn(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LI{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(i,r){if(i.length!==r.length)return!1;for(let s=0;s<i.length;++s)if(i[s]!==r[s])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ade=/^__.*__$/;class Mde{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return this.fieldMask!==null?new kc(e,this.data,this.fieldMask,t,this.fieldTransforms):new py(e,this.data,t,this.fieldTransforms)}}class a6{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return new kc(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function l6(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ht()}}class kI{constructor(e,t,i,r,s,o){this.settings=e,this.databaseId=t,this.serializer=i,this.ignoreUndefinedProperties=r,s===void 0&&this.Bu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Lu(){return this.settings.Lu}ku(e){return new kI(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}qu(e){var t;const i=(t=this.path)===null||t===void 0?void 0:t.child(e),r=this.ku({path:i,Qu:!1});return r.$u(e),r}Ku(e){var t;const i=(t=this.path)===null||t===void 0?void 0:t.child(e),r=this.ku({path:i,Qu:!1});return r.Bu(),r}Uu(e){return this.ku({path:void 0,Qu:!0})}Wu(e){return $_(e,this.settings.methodName,this.settings.Gu||!1,this.path,this.settings.zu)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}Bu(){if(this.path)for(let e=0;e<this.path.length;e++)this.$u(this.path.get(e))}$u(e){if(e.length===0)throw this.Wu("Document fields must not be empty");if(l6(this.Lu)&&Ade.test(e))throw this.Wu('Document fields cannot begin and end with "__"')}}class Ide{constructor(e,t,i){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=i||hb(e)}ju(e,t,i,r=!1){return new kI({Lu:e,methodName:t,zu:i,path:fr.emptyPath(),Qu:!1,Gu:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function xb(n){const e=n._freezeSettings(),t=hb(n._databaseId);return new Ide(n._databaseId,!!e.ignoreUndefinedProperties,t)}function c6(n,e,t,i,r,s={}){const o=n.ju(s.merge||s.mergeFields?2:0,e,t,r);UI("Data must be an object, but it was:",o,i);const a=u6(i,o);let l,c;if(s.merge)l=new ks(o.fieldMask),c=o.fieldTransforms;else if(s.mergeFields){const u=[];for(const f of s.mergeFields){const m=fC(e,f,t);if(!o.contains(m))throw new wt(Ne.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);d6(u,m)||u.push(m)}l=new ks(u),c=o.fieldTransforms.filter(f=>l.covers(f.field))}else l=null,c=o.fieldTransforms;return new Mde(new ps(a),l,c)}class _b extends vb{_toFieldTransform(e){if(e.Lu!==2)throw e.Lu===1?e.Wu(`${this._methodName}() can only appear at the top level of your update data`):e.Wu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof _b}}class OI extends vb{_toFieldTransform(e){return new wue(e.path,new Dg)}isEqual(e){return e instanceof OI}}function Pde(n,e,t,i){const r=n.ju(1,e,t);UI("Data must be an object, but it was:",r,i);const s=[],o=ps.empty();Lc(i,(l,c)=>{const u=FI(e,l,t);c=sr(c);const f=r.Ku(u);if(c instanceof _b)s.push(u);else{const m=vy(c,f);m!=null&&(s.push(u),o.set(u,m))}});const a=new ks(s);return new a6(o,a,r.fieldTransforms)}function Rde(n,e,t,i,r,s){const o=n.ju(1,e,t),a=[fC(e,i,t)],l=[r];if(s.length%2!=0)throw new wt(Ne.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let m=0;m<s.length;m+=2)a.push(fC(e,s[m])),l.push(s[m+1]);const c=[],u=ps.empty();for(let m=a.length-1;m>=0;--m)if(!d6(c,a[m])){const g=a[m];let x=l[m];x=sr(x);const b=o.Ku(g);if(x instanceof _b)c.push(g);else{const w=vy(x,b);w!=null&&(c.push(g),u.set(g,w))}}const f=new ks(c);return new a6(u,f,o.fieldTransforms)}function Nde(n,e,t,i=!1){return vy(t,n.ju(i?4:3,e))}function vy(n,e){if(h6(n=sr(n)))return UI("Unsupported field value:",e,n),u6(n,e);if(n instanceof vb)return function(i,r){if(!l6(r.Lu))throw r.Wu(`${i._methodName}() can only be used with update() and set()`);if(!r.path)throw r.Wu(`${i._methodName}() is not currently supported inside arrays`);const s=i._toFieldTransform(r);s&&r.fieldTransforms.push(s)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.Qu&&e.Lu!==4)throw e.Wu("Nested arrays are not supported");return function(i,r){const s=[];let o=0;for(const a of i){let l=vy(a,r.Uu(o));l==null&&(l={nullValue:"NULL_VALUE"}),s.push(l),o++}return{arrayValue:{values:s}}}(n,e)}return function(i,r){if((i=sr(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return vue(r.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const s=Bi.fromDate(i);return{timestampValue:z_(r.serializer,s)}}if(i instanceof Bi){const s=new Bi(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:z_(r.serializer,s)}}if(i instanceof DI)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof Sf)return{bytesValue:P5(r.serializer,i._byteString)};if(i instanceof Fr){const s=r.databaseId,o=i.firestore._databaseId;if(!o.isEqual(s))throw r.Wu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:mI(i.firestore._databaseId||r.databaseId,i._key.path)}}if(i instanceof LI)return function(o,a){return{mapValue:{fields:{[r5]:{stringValue:s5},[F_]:{arrayValue:{values:o.toArray().map(c=>{if(typeof c!="number")throw a.Wu("VectorValues must only contain numeric values.");return dI(a.serializer,c)})}}}}}}(i,r);throw r.Wu(`Unsupported field value: ${pb(i)}`)}(n,e)}function u6(n,e){const t={};return Qz(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Lc(n,(i,r)=>{const s=vy(r,e.qu(i));s!=null&&(t[i]=s)}),{mapValue:{fields:t}}}function h6(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof Bi||n instanceof DI||n instanceof Sf||n instanceof Fr||n instanceof vb||n instanceof LI)}function UI(n,e,t){if(!h6(t)||!function(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}(t)){const i=pb(t);throw i==="an object"?e.Wu(n+" a custom object"):e.Wu(n+" "+i)}}function fC(n,e,t){if((e=sr(e))instanceof yb)return e._internalPath;if(typeof e=="string")return FI(n,e);throw $_("Field path arguments must be of type string or ",n,!1,void 0,t)}const Dde=new RegExp("[~\\*/\\[\\]]");function FI(n,e,t){if(e.search(Dde)>=0)throw $_(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new yb(...e.split("."))._internalPath}catch{throw $_(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function $_(n,e,t,i,r){const s=i&&!i.isEmpty(),o=r!==void 0;let a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=` in field ${i}`),o&&(l+=` in document ${r}`),l+=")"),new wt(Ne.INVALID_ARGUMENT,a+n+l)}function d6(n,e){return n.some(t=>t.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f6{constructor(e,t,i,r,s){this._firestore=e,this._userDataWriter=t,this._key=i,this._document=r,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new Fr(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new Lde(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(wb("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class Lde extends f6{data(){return super.data()}}function wb(n,e){return typeof e=="string"?FI(n,e):e instanceof yb?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function p6(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new wt(Ne.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class jI{}class VI extends jI{}function pC(n,e,...t){let i=[];e instanceof jI&&i.push(e),i=i.concat(t),function(s){const o=s.filter(l=>l instanceof BI).length,a=s.filter(l=>l instanceof bb).length;if(o>1||o>0&&a>0)throw new wt(Ne.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(i);for(const r of i)n=r._apply(n);return n}class bb extends VI{constructor(e,t,i){super(),this._field=e,this._op=t,this._value=i,this.type="where"}static _create(e,t,i){return new bb(e,t,i)}_apply(e){const t=this._parse(e);return g6(e._query,t),new ll(e.firestore,e.converter,iC(e._query,t))}_parse(e){const t=xb(e.firestore);return function(s,o,a,l,c,u,f){let m;if(c.isKeyField()){if(u==="array-contains"||u==="array-contains-any")throw new wt(Ne.INVALID_ARGUMENT,`Invalid Query. You can't perform '${u}' queries on documentId().`);if(u==="in"||u==="not-in"){oO(f,u);const x=[];for(const b of f)x.push(sO(l,s,b));m={arrayValue:{values:x}}}else m=sO(l,s,f)}else u!=="in"&&u!=="not-in"&&u!=="array-contains-any"||oO(f,u),m=Nde(a,o,f,u==="in"||u==="not-in");return ji.create(c,u,m)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function rO(n,e,t){const i=e,r=wb("where",n);return bb._create(r,i,t)}class BI extends jI{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new BI(e,t)}_parse(e){const t=this._queryConstraints.map(i=>i._parse(e)).filter(i=>i.getFilters().length>0);return t.length===1?t[0]:Uo.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:(function(r,s){let o=r;const a=s.getFlattenedFilters();for(const l of a)g6(o,l),o=iC(o,l)}(e._query,t),new ll(e.firestore,e.converter,iC(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class zI extends VI{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new zI(e,t)}_apply(e){const t=function(r,s,o){if(r.startAt!==null)throw new wt(Ne.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(r.endAt!==null)throw new wt(Ne.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Ng(s,o)}(e._query,this._field,this._direction);return new ll(e.firestore,e.converter,function(r,s){const o=r.explicitOrderBy.concat([s]);return new Bf(r.path,r.collectionGroup,o,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}function m6(n,e="asc"){const t=e,i=wb("orderBy",n);return zI._create(i,t)}class HI extends VI{constructor(e,t,i){super(),this.type=e,this._limit=t,this._limitType=i}static _create(e,t,i){return new HI(e,t,i)}_apply(e){return new ll(e.firestore,e.converter,V_(e._query,this._limit,this._limitType))}}function kde(n){return HI._create("limit",n,"F")}function sO(n,e,t){if(typeof(t=sr(t))=="string"){if(t==="")throw new wt(Ne.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!f5(e)&&t.indexOf("/")!==-1)throw new wt(Ne.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const i=e.path.child(ni.fromString(t));if(!Dt.isDocumentKey(i))throw new wt(Ne.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return x3(n,new Dt(i))}if(t instanceof Fr)return x3(n,t._key);throw new wt(Ne.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${pb(t)}.`)}function oO(n,e){if(!Array.isArray(n)||n.length===0)throw new wt(Ne.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function g6(n,e){const t=function(r,s){for(const o of r)for(const a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null}(n.filters,function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new wt(Ne.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new wt(Ne.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class Ode{convertValue(e,t="none"){switch(vc(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ci(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(yc(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Ht()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const i={};return Lc(e,(r,s)=>{i[r]=this.convertValue(s,t)}),i}convertVectorValue(e){var t,i,r;const s=(r=(i=(t=e.fields)===null||t===void 0?void 0:t[F_].arrayValue)===null||i===void 0?void 0:i.values)===null||r===void 0?void 0:r.map(o=>Ci(o.doubleValue));return new LI(s)}convertGeoPoint(e){return new DI(Ci(e.latitude),Ci(e.longitude))}convertArray(e,t){return(e.values||[]).map(i=>this.convertValue(i,t))}convertServerTimestamp(e,t){switch(t){case"previous":const i=rb(e);return i==null?null:this.convertValue(i,t);case"estimate":return this.convertTimestamp(Ig(e));default:return null}}convertTimestamp(e){const t=gc(e);return new Bi(t.seconds,t.nanos)}convertDocumentKey(e,t){const i=ni.fromString(e);zn(O5(i));const r=new Pg(i.get(1),i.get(3)),s=new Dt(i.popFirst(5));return r.isEqual(t)||nl(`Document ${s} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function y6(n,e,t){let i;return i=n?n.toFirestore(e):e,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class im{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class v6 extends f6{constructor(e,t,i,r,s,o){super(e,t,i,r,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new r0(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const i=this._document.data.field(wb("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,t.serverTimestamps)}}}class r0 extends v6{data(e={}){return super.data(e)}}class x6{constructor(e,t,i,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new im(r.hasPendingWrites,r.fromCache),this.query=i}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(i=>{e.call(t,new r0(this._firestore,this._userDataWriter,i.key,i,new im(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new wt(Ne.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,s){if(r._snapshot.oldDocs.isEmpty()){let o=0;return r._snapshot.docChanges.map(a=>{const l=new r0(r._firestore,r._userDataWriter,a.doc.key,a.doc,new im(r._snapshot.mutatedKeys.has(a.doc.key),r._snapshot.fromCache),r.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}})}{let o=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{const l=new r0(r._firestore,r._userDataWriter,a.doc.key,a.doc,new im(r._snapshot.mutatedKeys.has(a.doc.key),r._snapshot.fromCache),r.query.converter);let c=-1,u=-1;return a.type!==0&&(c=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),u=o.indexOf(a.doc.key)),{type:Ude(a.type),doc:l,oldIndex:c,newIndex:u}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function Ude(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ht()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Hf(n){n=Vs(n,Fr);const e=Vs(n.firestore,wc);return bde(gb(e),n._key).then(t=>b6(e,n,t))}class GI extends Ode{constructor(e){super(),this.firestore=e}convertBytes(e){return new Sf(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new Fr(this.firestore,null,t)}}function _6(n){n=Vs(n,ll);const e=Vs(n.firestore,wc),t=gb(e),i=new GI(e);return p6(n._query),Sde(t,n._query).then(r=>new x6(e,i,n,r))}function Sb(n,e,t){n=Vs(n,Fr);const i=Vs(n.firestore,wc),r=y6(n.converter,e);return WI(i,[c6(xb(i),"setDoc",n._key,r,n.converter!==null,t).toMutation(n._key,No.none())])}function Fde(n,e,t,...i){n=Vs(n,Fr);const r=Vs(n.firestore,wc),s=xb(r);let o;return o=typeof(e=sr(e))=="string"||e instanceof yb?Rde(s,"updateDoc",n._key,e,t,i):Pde(s,"updateDoc",n._key,e),WI(r,[o.toMutation(n._key,No.exists(!0))])}function w6(n,e){const t=Vs(n.firestore,wc),i=fo(n),r=y6(n.converter,e);return WI(t,[c6(xb(n.firestore),"addDoc",i._key,r,n.converter!==null,{}).toMutation(i._key,No.exists(!1))]).then(()=>i)}function mC(n,...e){var t,i,r;n=sr(n);let s={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||iO(e[o])||(s=e[o],o++);const a={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(iO(e[o])){const f=e[o];e[o]=(t=f.next)===null||t===void 0?void 0:t.bind(f),e[o+1]=(i=f.error)===null||i===void 0?void 0:i.bind(f),e[o+2]=(r=f.complete)===null||r===void 0?void 0:r.bind(f)}let l,c,u;if(n instanceof Fr)c=Vs(n.firestore,wc),u=sb(n._key.path),l={next:f=>{e[o]&&e[o](b6(c,n,f))},error:e[o+1],complete:e[o+2]};else{const f=Vs(n,ll);c=Vs(f.firestore,wc),u=f._query;const m=new GI(c);l={next:g=>{e[o]&&e[o](new x6(c,m,f,g))},error:e[o+1],complete:e[o+2]},p6(n._query)}return function(m,g,x,b){const w=new NI(b),v=new II(g,w,x);return m.asyncQueue.enqueueAndForget(async()=>CI(await q_(m),v)),()=>{w.su(),m.asyncQueue.enqueueAndForget(async()=>AI(await q_(m),v))}}(gb(c),u,a,l)}function WI(n,e){return function(i,r){const s=new Ga;return i.asyncQueue.enqueueAndForget(async()=>ude(await wde(i),r,s)),s.promise}(gb(n),e)}function b6(n,e,t){const i=t.docs.get(e._key),r=new GI(n);return new v6(n,r,e._key,i,new im(t.hasPendingWrites,t.fromCache),e.converter)}function S6(){return new OI("serverTimestamp")}(function(e,t=!0){(function(r){Ff=r})(Of),gf(new rh("firestore",(i,{instanceIdentifier:r,options:s})=>{const o=i.getProvider("app").getImmediate(),a=new wc(new Dce(i.getProvider("auth-internal")),new Oce(o,i.getProvider("app-check-internal")),function(c,u){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new wt(Ne.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Pg(c.options.projectId,u)}(o,r),o);return s=Object.assign({useFetchStreams:t},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),rc(l3,c3,e),rc(l3,c3,"esm2017")})();const jde={apiKey:"AIzaSyDPpcxhOuSbk_dknSoUgt34VSYfq2cLg2g",authDomain:"karapatanko-e686b.firebaseapp.com",projectId:"karapatanko-e686b",storageBucket:"karapatanko-e686b.appspot.com",messagingSenderId:"253855212071",appId:"1:253855212071:web:10e25578cb9140b3136402"},T6=rz(jde),qI=pc(T6),Jo=bc(T6),Vde=async n=>{const e=pc(),t=bc();dy(e,async i=>{if(i)try{const r=fo(t,"users",i.uid),s=await Hf(r);if(s.exists()){const a=s.data().role;n(a)}else console.error("No user document found in Firestore."),n(null)}catch(r){console.error("Error fetching user role:",r),n(null)}else n(null)})},Bde=()=>{const n=qt(),[e,t]=V.useState(""),[i,r]=V.useState(""),[s,o]=V.useState(""),[a,l]=V.useState(!1),[c,u]=V.useState(!1),f=async g=>{if(g.preventDefault(),!e||!i){o("Both fields are required.");return}l(!0);try{const b=(await yle(qI,e,i)).user;console.log("User logged in:",b),Vde(w=>{w==="admin"?n("/admin_main"):w==="user"?n("/main"):o("Unknown role. Please contact support.")})}catch(x){console.error("Error logging in:",x.message),o(x.message.includes("wrong-password")?"Incorrect password. Please try again.":"Failed to login. Please check your credentials.")}finally{l(!1)}},m=()=>{u(!c)};return d.jsx("div",{className:"login-container",children:a?d.jsx(WB,{}):d.jsx(Pn.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.5},children:d.jsx("div",{id:"wrapper",children:d.jsxs("div",{id:"left",children:[d.jsxs("div",{id:"signin",children:[d.jsx("div",{className:"logo",children:d.jsx("img",{src:Dse,alt:"Karapatan ko"})}),d.jsxs("form",{onSubmit:f,className:"space-y-4",children:[d.jsxs("div",{children:[d.jsx("label",{htmlFor:"email",className:"block text-sm font-medium",children:"Email"}),d.jsx("input",{type:"email",id:"email",className:"text-input border-gray-300 focus:ring-slate-500 focus:border-slate-500 block w-full sm:text-sm border rounded-md",value:e,onChange:g=>t(g.target.value),required:!0})]}),d.jsxs("div",{children:[d.jsx("label",{htmlFor:"password",className:"block text-sm font-medium",children:"Password"}),d.jsxs("div",{className:"relative",children:[d.jsx("input",{type:c?"text":"password",id:"password",className:"text-input border-gray-300 focus:ring-indigo-500 focus:border-indigo-500 block w-full sm:text-sm border rounded-md pr-10",value:i,onChange:g=>r(g.target.value),required:!0}),c?d.jsx(KB,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-500 cursor-pointer",onClick:m}):d.jsx(XB,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-500 cursor-pointer",onClick:m})]}),d.jsx("a",{onClick:()=>n("/forgotPass"),className:"text-sm cursor-pointer text-slate-600 hover:text-slate-500 mt-2 block",children:"Forgot my password"})]}),s&&d.jsx("p",{className:"text-red-500 text-sm",children:s}),d.jsx("button",{type:"submit",className:"primary-btn w-full py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-slate-600 hover:bg-slate-700 focus:outline-none",children:"Login"})]}),d.jsx("button",{onClick:()=>n("/signup"),className:"secondary-btn",children:"Don't have an account? SignUp"})]}),d.jsxs("footer",{id:"main-footer",className:"text-sm text-gray-500 mt-4",children:[d.jsx("p",{children:"Copyright © 2024, KarapatanKo All Rights Reserved"}),d.jsxs("div",{children:[d.jsx("a",{href:"#",className:"hover:underline",children:"Terms of Use"})," ","|"," ",d.jsx("a",{href:"#",className:"hover:underline",children:"Privacy Policy"})]})]})]})})})})},aO=Bt(Bde),zde=()=>{const n=qt(),[e,t]=V.useState(""),[i,r]=V.useState(""),[s,o]=V.useState(""),[a,l]=V.useState(""),[c,u]=V.useState(""),[f,m]=V.useState(""),[g]=V.useState("user"),[x,b]=V.useState(""),[w,v]=V.useState(!1),[S,E]=V.useState(!1),I=async O=>{if(O.preventDefault(),!e||!s||!a||!c||!f){b("All fields are required.");return}if(parseInt(a,10)<18||parseInt(a,10)>80){b("You must be at least 18 years old to sign up.");return}if(f.length<6){b("Password must be at least 6 characters.");return}b(""),v(!0);try{const P=(await gle(qI,c,f)).user;await Sb(fo(Jo,"users",P.uid),{firstName:e,middleName:i,lastName:s,age:parseInt(a,10),email:c,role:g,createdAt:new Date}),console.log("User registered and data saved to Firestore!"),n("/main")}catch(C){console.error("Error signing up:",C.message),b(C.message.includes("email-already-in-use")?"This email is already registered. Log in instead.":"Failed to sign up. Please try again.")}finally{v(!1)}},U=()=>{E(!S)};return d.jsx("div",{className:"login-container",children:w?d.jsx(WB,{}):d.jsx(Pn.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.5},children:d.jsx("div",{id:"register",children:d.jsx("div",{id:"wrapper",children:d.jsxs("div",{id:"left",children:[d.jsxs("div",{id:"signin",children:[d.jsxs("div",{className:"logo",children:[d.jsx("h1",{className:`${q.paragraphHeadText}`,children:"Create an account"}),d.jsx("p",{className:`${q.paragraphSubText} text-center`,children:"Connect with legal professionals"})]}),d.jsxs("form",{onSubmit:I,children:[d.jsxs("div",{children:[d.jsx("label",{htmlFor:"firstName",children:"First Name"}),d.jsx("input",{type:"text",id:"firstName",className:"text-input",value:e,onChange:O=>t(O.target.value),required:!0})]}),d.jsxs("div",{children:[d.jsx("label",{htmlFor:"middleName",children:"Middle Name"}),d.jsx("input",{type:"text",id:"middleName",className:"text-input",value:i,onChange:O=>r(O.target.value)})]}),d.jsxs("div",{children:[d.jsx("label",{htmlFor:"lastName",children:"Last Name"}),d.jsx("input",{type:"text",id:"lastName",className:"text-input",value:s,onChange:O=>o(O.target.value),required:!0})]}),d.jsxs("div",{children:[d.jsx("label",{htmlFor:"age",children:"Age"}),d.jsx("input",{type:"number",id:"age",className:"text-input",value:a,onChange:O=>l(O.target.value),required:!0})]}),d.jsxs("div",{children:[d.jsx("label",{htmlFor:"email",children:"Email"}),d.jsx("input",{type:"email",id:"email",className:"text-input",value:c,onChange:O=>u(O.target.value),required:!0})]}),d.jsxs("div",{children:[d.jsx("label",{htmlFor:"password",children:"Password"}),d.jsxs("div",{className:"relative",children:[d.jsx("input",{type:S?"text":"password",id:"password",className:"text-input",value:f,onChange:O=>m(O.target.value),required:!0}),S?d.jsx(KB,{className:"absolute right-3 top-1/3 transform -translate-y-1/2 text-gray-500 cursor-pointer",onClick:U}):d.jsx(XB,{className:"absolute right-3 top-1/3 transform -translate-y-1/2 text-gray-500 cursor-pointer",onClick:U})]})]}),d.jsxs("div",{style:{display:"none"},children:[d.jsx("label",{htmlFor:"role",children:"Role"}),d.jsx("input",{type:"text",id:"role",className:"text-input",value:g,disabled:!0})]}),x&&d.jsx("p",{className:"error-message text-red-500",children:x}),d.jsx("button",{type:"submit",className:"primary-btn",children:"Sign Up"})]}),d.jsx("button",{onClick:()=>n("/login"),className:"secondary-btn",children:"Already have an account? Login"})]}),d.jsxs("footer",{id:"main-footer",children:[d.jsx("p",{children:"Copyright © 2024, KarapatanKo All Rights Reserved"}),d.jsxs("div",{children:[d.jsx("a",{href:"#",children:"Terms of Use"})," | ",d.jsx("a",{href:"#",children:"Privacy Policy"})]})]})]})})})})})},Hde=Bt(zde),Gde=()=>{const n=qt(),[e,t]=V.useState(""),[i,r]=V.useState(""),s=async o=>{o.preventDefault();try{await mle(qI,e),alert("Check your email for a password reset link."),n("/signin")}catch(a){r(a.message),alert(`Error: ${a.message}`)}};return d.jsx(Pn.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.5},children:d.jsx("div",{id:"wrapper",children:d.jsx("div",{id:"left",children:d.jsxs("div",{id:"signin",children:[d.jsxs("div",{className:"logo",children:[d.jsx("h1",{className:`${q.paragraphHeadText}`,children:"Forgot Your Password?"}),d.jsx("p",{className:`${q.paragraphSubText} text-center`,children:"Send your gmail to change password"})]}),d.jsxs("form",{onSubmit:s,className:"space-y-4",children:[d.jsxs("div",{children:[d.jsx("label",{htmlFor:"email",className:"block text-sm font-medium",children:"Email"}),d.jsx("input",{type:"email",id:"email",className:"text-input border-gray-300 focus:ring-slate-500 focus:border-slate-500 block w-full sm:text-sm border rounded-md",value:e,onChange:o=>t(o.target.value),required:!0})]}),i&&d.jsx("p",{className:"text-sm text-red-500 mt-2",children:i}),d.jsx("button",{type:"submit",className:"primary-btn w-full py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-slate-600 hover:bg-slate-700 focus:outline-none",children:"Submit"})]}),d.jsxs("div",{className:"button-grid",children:[d.jsx("button",{onClick:()=>n("/signup"),className:"pass",children:"Sign Up   |"}),d.jsx("button",{onClick:()=>n("/login"),className:"pass",children:"Login"})]})]})})})})},Wde=Bt(Gde);function qde(n){return vh({attr:{viewBox:"0 0 16 16",fill:"currentColor"},child:[{tag:"path",attr:{d:"M1 12v-1h9v1H1zm0-5h14v1H1V7zm11-4v1H1V3h11z"},child:[]}]})(n)}function E6(n){return vh({attr:{viewBox:"0 0 16 16",fill:"currentColor"},child:[{tag:"path",attr:{fillRule:"evenodd",clipRule:"evenodd",d:"M11.02 3.77v1.56l1-.99V2.5l-.5-.5h-9l-.5.5v.486L2 3v10.29l.36.46 5 1.72L8 15v-1h3.52l.5-.5v-1.81l-1-1V13H8V4.71l-.33-.46L4.036 3h6.984v.77zM7 14.28l-4-1.34V3.72l4 1.34v9.22zm6.52-5.8H8.55v-1h4.93l-1.6-1.6.71-.7 2.47 2.46v.71l-2.49 2.48-.7-.7 1.65-1.65z"},child:[]}]})(n)}function $de(n){return vh({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"18",y1:"6",x2:"6",y2:"18"},child:[]},{tag:"line",attr:{x1:"6",y1:"6",x2:"18",y2:"18"},child:[]}]})(n)}const C6=[{topic:"ARTICLE I National Territory",href:"/articleOne"},{topic:"ARTICLE II Declaration of Principles and State Policies",href:"/articleTwo"},{topic:"ARTICLE III Bill of Rights",href:"/articleThree"},{topic:"ARTICLE IV Citizenship",href:"/articleFour"},{topic:"ARTICLE V Suffrage",href:"/articleFive"},{topic:"ARTICLE VI Legislative Department",href:"/articleSix"},{topic:"ARTICLE VII Executive Department",href:"/articleSeven"},{topic:"ARTICLE VIII Judicial Department",href:"/articleEight"},{topic:"ARTICLE IX Constitutional Commissions",href:"/articleNine"},{topic:"ARTICLE X Local Government",href:"/articleTen"},{topic:"ARTICLE XI Accountability of Public Officers",href:"/articleEleven"},{topic:"ARTICLE XII National Economy and Patrimony",href:"/articleTwelve"},{topic:"ARTICLE XIII Social Justice and Human Rights",href:"/articleThirteen"},{topic:"ARTICLE XIV Education, Science and Technology, Arts, Culture and Sports",href:"/articleFourteen"},{topic:"ARTICLE XV The Family",href:"/articleFifteen"},{topic:"ARTICLE XVI General Provisions",href:"/articleSixteen"},{topic:"ARTICLE XVII Amendments or Revisions",href:"/articleSeventeen"},{topic:"ARTICLE XVIII Transitory Provisions",href:"/articleEighteen"}],A6=[{topic:"Chapter I: General Provisions",href:"/chapterOne"},{topic:"Chapter II: Definition of Terms",href:"/chapterTwo"},{topic:"Chapter III: Rights to Ancestral Domains",href:"/chapterThree"},{topic:"Chapter IV: Right to Self-Governance and Empowerment",href:"/chapterFour"},{topic:"Chapter V: Social Justice and Human Rights",href:"/chapterFive"},{topic:"Chapter VI: Cultural Integrity",href:"/chapterSix"},{topic:"Chapter VII: National Commission on Indigenous Peoples (NCIP)",href:"/chapterSeven"},{topic:"Chapter VIII: Delineation and Recognition of Ancestral Domains",href:"/chapterEight"},{topic:"Chapter IX: Jurisdiction and Procedures for Enforcement of Rights",href:"/chapterNine"},{topic:"Chapter X: Ancestral Domains Fund",href:"/chapterTen"},{topic:"Chapter XI: Penalties",href:"/chapterEleven"},{topic:"Chapter XII: Merger of the Office for Northern Cultural Communities (ONCC) and the Office for Southern Cultural Communities (OSCC)",href:"/chapterTwelve"},{topic:"Chapter XIII: Final Provisions",href:"/chapterThirteen"}],Xde=()=>{const[n,e]=V.useState(!1),[t,i]=V.useState(""),r=Fo(),s=r.pathname.startsWith("/article")?C6:r.pathname.startsWith("/chapter")?A6:[],o=a=>{i(a),e(!1)};return d.jsxs("div",{className:"relative",children:[d.jsx("button",{id:"navbar-toggle",onClick:()=>e(a=>!a),className:"fixed top-4 left-4 z-30 bg-primary dark:bg-gray-800 p-2 rounded","aria-label":n?"Close Navigation":"Open Navigation",children:n?d.jsx($de,{className:"text-white w-6 h-6"}):d.jsx(qde,{className:"text-white w-6 h-6"})}),n&&d.jsx("div",{className:"fixed inset-0 bg-black/50 z-10",onClick:()=>e(!1),"aria-hidden":"true"}),d.jsx("div",{id:"navbar",className:`fixed top-0 left-0 h-full w-64 bg-primary dark:bg-gray-800 transform transition-transform duration-300 ease-in-out z-20 ${n?"translate-x-0":"-translate-x-full"}`,children:d.jsxs("div",{className:"flex flex-col h-full",children:[d.jsx("div",{className:"p-5 border-b border-secondary dark:border-gray-700 flex items-center",children:d.jsxs(Us,{to:"/main",className:"flex items-center gap-2",onClick:()=>o(""),children:[d.jsx("div",{className:"w-8 h-8 object-contain"}),d.jsx("p",{className:"text-white dark:text-gray-200 text-lg font-bold highlight-border",children:"Karapatan Ko"})]})}),d.jsx("nav",{className:"flex-1 py-4 overflow-y-auto",children:d.jsx("ul",{className:"px-4 space-y-2",children:s.length>0?s.map(a=>d.jsx("li",{className:"group text-white",children:d.jsx(Us,{to:a.href,className:`block p-3 rounded-lg text-lg transition-colors duration-200 ${t===a.topic?"bg-secondary/20 dark:bg-gray-700/30 text-white":"text-secondary dark:text-gray-300"}`,onClick:()=>o(a.topic),children:a.topic})},a.href)):d.jsxs(Us,{to:"/",className:"text-center text-secondary dark:text-gray-400 bg-transparent border-0 p-0 cursor-pointer flex items-center gap-2",children:[d.jsx(E6,{className:"text-secondary dark:text-gray-400 w-5 h-5"}),"SIGN OUT"]})})})]})})]})},Kde="/assets/lawbook.png",Yde="/assets/lawyerIcon.png",Jde="/assets/icon/helenaIcon.png",Qde="/assets/helena.png",Zde="/assets/match.png",efe="/assets/profile.png",gC="/assets/profile1.png",tfe="/assets/profile2.png",nfe="/assets/testimonial1.png",ife="/assets/icon/bookIcon.png",rfe=[{title:"Law books",subtitle:"Simply highlight any word in our law books to instantly fetch its definition.",icon:Kde,iconBg:"#383E56",color:"blue-text-gradient",points:[{text:"The Constitution Of The Republic Of The Philippines",id:"Constitution_ID",li:"/constitution"},{text:"Indigenous Peoples’ Rights Act",id:"RA_8371_ID",li:"/RA_8371"}],image:ife,span:"More law books to come"},{title:"Legal Matching",subtitle:"Connecting You with the Right Expertise, Every Time.",icon:Yde,iconBg:"#383E56",color:"green-text-gradient",btn:"/lawyer-status",image:Zde},{title:"Helena",subtitle:"Your Smart Guide for Legal Books",icon:Jde,iconBg:"#383E56",color:"pink-text-gradient",btn:"/ai",image:Qde}],sfe=[{testimonial:"The website is well designed and user-friendly, with features like AI chat and definitions for any highlighted text. It is clear how to use it from the first time, and I didn't face any complications.",name:"Jamil Al Amin",designation:"Student",company:"University of the Cordilleras",image:nfe},{testimonial:"The website has a clean and professional look, and suitable for legal resources. However, some areas could benefit from improved visual appeal, such as personalized dashboard and inclusion of search bar.",name:"Lina An-an",designation:"Student",company:"University of the Cordilleras",image:tfe},{testimonial:"It will help many people, especially those who are unaware of their rights. I love the Legal Matching, as it connects us with professionals. The convenience of booking appointments directly on the site is a great addition.",name:"Palmer Bugtong",designation:"Lawyer",company:"Magalgalit Law Office",image:gC}],Or=[{image:gC,name:"Palmer Fagyan Bugtong",nickname:"Atty. Palmer",title:"Criminal Law",currentSP:"Face to Face",currentPoints:"5 years lawyer",talent:"Negotiation, Persuasion",tagline:"The Defender of the Defenseless",address:"Liaison Officer at Magalgalit Law Office",btn:"/appointmentLawyer1"},{image:efe,name:"Noel Magalgalit",nickname:"Atty. Magalgalit",title:"Civil Law",currentSP:"Face to Face",currentPoints:"15 years lawyer",talent:"Public Speaking, Negotiation",tagline:"The Defender of the Defenseless",address:"Liaison Officer at Magalgalit Law Office",btn:"/appointmentLawyer2"},{image:gC,name:"Jess B. Evasco",nickname:"Atty. Evasco",title:"Criminal Law",currentSP:"Face to Face",currentPoints:"5 years lawyer",talent:"Persuasion, Public Speaking",tagline:"The Fast Talker and Thinker",address:"Liaison Officer at Magalgalit Law Office",btn:"/appointmentLawyer3"}];var Tb={},M6={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/(function(n){(function(){var e={}.hasOwnProperty;function t(){for(var s="",o=0;o<arguments.length;o++){var a=arguments[o];a&&(s=r(s,i(a)))}return s}function i(s){if(typeof s=="string"||typeof s=="number")return s;if(typeof s!="object")return"";if(Array.isArray(s))return t.apply(null,s);if(s.toString!==Object.prototype.toString&&!s.toString.toString().includes("[native code]"))return s.toString();var o="";for(var a in s)e.call(s,a)&&s[a]&&(o=r(o,a));return o}function r(s,o){return o?s?s+" "+o:s+o:s}n.exports?(t.default=t,n.exports=t):window.classNames=t})()})(M6);var I6=M6.exports;Tb.__esModule=!0;Tb.default=void 0;var ofe=$I(V),Cl=$I(mM),afe=$I(I6);function $I(n){return n&&n.__esModule?n:{default:n}}const P6=({animate:n=!0,className:e="",layout:t="2-columns",lineColor:i="#FFF",children:r})=>(typeof window=="object"&&document.documentElement.style.setProperty("--line-color",i),ofe.default.createElement("div",{className:(0,afe.default)(e,"vertical-timeline",{"vertical-timeline--animate":n,"vertical-timeline--two-columns":t==="2-columns","vertical-timeline--one-column-left":t==="1-column"||t==="1-column-left","vertical-timeline--one-column-right":t==="1-column-right"})},r));P6.propTypes={children:Cl.default.oneOfType([Cl.default.arrayOf(Cl.default.node),Cl.default.node]).isRequired,className:Cl.default.string,animate:Cl.default.bool,layout:Cl.default.oneOf(["1-column-left","1-column","2-columns","1-column-right"]),lineColor:Cl.default.string};var lfe=P6;Tb.default=lfe;var Eb={};function yC(){return yC=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},yC.apply(this,arguments)}function cfe(n,e){n.prototype=Object.create(e.prototype),n.prototype.constructor=n,vC(n,e)}function vC(n,e){return vC=Object.setPrototypeOf||function(i,r){return i.__proto__=r,i},vC(n,e)}function ufe(n,e){if(n==null)return{};var t={},i=Object.keys(n),r,s;for(s=0;s<i.length;s++)r=i[s],!(e.indexOf(r)>=0)&&(t[r]=n[r]);return t}var xC=new Map,Tx=new WeakMap,lO=0,R6=void 0;function hfe(n){R6=n}function dfe(n){return n?(Tx.has(n)||(lO+=1,Tx.set(n,lO.toString())),Tx.get(n)):"0"}function ffe(n){return Object.keys(n).sort().filter(function(e){return n[e]!==void 0}).map(function(e){return e+"_"+(e==="root"?dfe(n.root):n[e])}).toString()}function pfe(n){var e=ffe(n),t=xC.get(e);if(!t){var i=new Map,r,s=new IntersectionObserver(function(o){o.forEach(function(a){var l,c=a.isIntersecting&&r.some(function(u){return a.intersectionRatio>=u});n.trackVisibility&&typeof a.isVisible>"u"&&(a.isVisible=c),(l=i.get(a.target))==null||l.forEach(function(u){u(c,a)})})},n);r=s.thresholds||(Array.isArray(n.threshold)?n.threshold:[n.threshold||0]),t={id:e,observer:s,elements:i},xC.set(e,t)}return t}function XI(n,e,t,i){if(t===void 0&&(t={}),i===void 0&&(i=R6),typeof window.IntersectionObserver>"u"&&i!==void 0){var r=n.getBoundingClientRect();return e(i,{isIntersecting:i,target:n,intersectionRatio:typeof t.threshold=="number"?t.threshold:0,time:0,boundingClientRect:r,intersectionRect:r,rootBounds:r}),function(){}}var s=pfe(t),o=s.id,a=s.observer,l=s.elements,c=l.get(n)||[];return l.has(n)||l.set(n,c),c.push(e),a.observe(n),function(){c.splice(c.indexOf(e),1),c.length===0&&(l.delete(n),a.unobserve(n)),l.size===0&&(a.disconnect(),xC.delete(o))}}var mfe=["children","as","triggerOnce","threshold","root","rootMargin","onChange","skip","trackVisibility","delay","initialInView","fallbackInView"];function cO(n){return typeof n.children!="function"}var X_=function(n){cfe(e,n);function e(i){var r;return r=n.call(this,i)||this,r.node=null,r._unobserveCb=null,r.handleNode=function(s){r.node&&(r.unobserve(),!s&&!r.props.triggerOnce&&!r.props.skip&&r.setState({inView:!!r.props.initialInView,entry:void 0})),r.node=s||null,r.observeNode()},r.handleChange=function(s,o){s&&r.props.triggerOnce&&r.unobserve(),cO(r.props)||r.setState({inView:s,entry:o}),r.props.onChange&&r.props.onChange(s,o)},r.state={inView:!!i.initialInView,entry:void 0},r}var t=e.prototype;return t.componentDidUpdate=function(r){(r.rootMargin!==this.props.rootMargin||r.root!==this.props.root||r.threshold!==this.props.threshold||r.skip!==this.props.skip||r.trackVisibility!==this.props.trackVisibility||r.delay!==this.props.delay)&&(this.unobserve(),this.observeNode())},t.componentWillUnmount=function(){this.unobserve(),this.node=null},t.observeNode=function(){if(!(!this.node||this.props.skip)){var r=this.props,s=r.threshold,o=r.root,a=r.rootMargin,l=r.trackVisibility,c=r.delay,u=r.fallbackInView;this._unobserveCb=XI(this.node,this.handleChange,{threshold:s,root:o,rootMargin:a,trackVisibility:l,delay:c},u)}},t.unobserve=function(){this._unobserveCb&&(this._unobserveCb(),this._unobserveCb=null)},t.render=function(){if(!cO(this.props)){var r=this.state,s=r.inView,o=r.entry;return this.props.children({inView:s,entry:o,ref:this.handleNode})}var a=this.props,l=a.children,c=a.as,u=ufe(a,mfe);return V.createElement(c||"div",yC({ref:this.handleNode},u),l)},e}(V.Component);X_.displayName="InView";X_.defaultProps={threshold:0,triggerOnce:!1,initialInView:!1};function gfe(n){var e=n===void 0?{}:n,t=e.threshold,i=e.delay,r=e.trackVisibility,s=e.rootMargin,o=e.root,a=e.triggerOnce,l=e.skip,c=e.initialInView,u=e.fallbackInView,f=V.useRef(),m=V.useState({inView:!!c}),g=m[0],x=m[1],b=V.useCallback(function(v){f.current!==void 0&&(f.current(),f.current=void 0),!l&&v&&(f.current=XI(v,function(S,E){x({inView:S,entry:E}),E.isIntersecting&&a&&f.current&&(f.current(),f.current=void 0)},{root:o,rootMargin:s,threshold:t,trackVisibility:r,delay:i},u))},[Array.isArray(t)?t.toString():t,o,s,a,l,r,u,i]);V.useEffect(function(){!f.current&&g.entry&&!a&&!l&&x({inView:!!c})});var w=[b,g.inView,g.entry];return w.ref=w[0],w.inView=w[1],w.entry=w[2],w}const yfe=Object.freeze(Object.defineProperty({__proto__:null,InView:X_,default:X_,defaultFallbackInView:hfe,observe:XI,useInView:gfe},Symbol.toStringTag,{value:"Module"})),vfe=AH(yfe);Eb.__esModule=!0;Eb.default=void 0;var Al=KI(V),oi=KI(mM),Ex=KI(I6),xfe=vfe;function KI(n){return n&&n.__esModule?n:{default:n}}const N6=({children:n="",className:e="",contentArrowStyle:t=null,contentStyle:i=null,date:r="",dateClassName:s="",icon:o=null,iconClassName:a="",iconOnClick:l=null,onTimelineElementClick:c=null,iconStyle:u=null,id:f="",position:m="",style:g=null,textClassName:x="",intersectionObserverProps:b={rootMargin:"0px 0px -40px 0px",triggerOnce:!0},visible:w=!1})=>Al.default.createElement(xfe.InView,b,({inView:v,ref:S})=>Al.default.createElement("div",{ref:S,id:f,className:(0,Ex.default)(e,"vertical-timeline-element",{"vertical-timeline-element--left":m==="left","vertical-timeline-element--right":m==="right","vertical-timeline-element--no-children":n===""}),style:g},Al.default.createElement(Al.default.Fragment,null,Al.default.createElement("span",{style:u,onClick:l,className:(0,Ex.default)(a,"vertical-timeline-element-icon",{"bounce-in":v||w,"is-hidden":!(v||w)})},o),Al.default.createElement("div",{style:i,onClick:c,className:(0,Ex.default)(x,"vertical-timeline-element-content",{"bounce-in":v||w,"is-hidden":!(v||w)})},Al.default.createElement("div",{style:t,className:"vertical-timeline-element-content-arrow"}),n,Al.default.createElement("span",{className:(0,Ex.default)(s,"vertical-timeline-element-date")},r)))));N6.propTypes={children:oi.default.oneOfType([oi.default.arrayOf(oi.default.node),oi.default.node]),className:oi.default.string,contentArrowStyle:oi.default.shape({}),contentStyle:oi.default.shape({}),date:oi.default.node,dateClassName:oi.default.string,icon:oi.default.element,iconClassName:oi.default.string,iconStyle:oi.default.shape({}),iconOnClick:oi.default.func,onTimelineElementClick:oi.default.func,id:oi.default.string,position:oi.default.string,style:oi.default.shape({}),textClassName:oi.default.string,visible:oi.default.bool,intersectionObserverProps:oi.default.shape({root:oi.default.object,rootMargin:oi.default.string,threshold:oi.default.number,triggerOnce:oi.default.bool})};var _fe=N6;Eb.default=_fe;var D6={VerticalTimeline:Tb.default,VerticalTimelineElement:Eb.default};const L6=({feature:n})=>{const e=qt();return d.jsxs(D6.VerticalTimelineElement,{contentStyle:{background:"black",border:"4px solid",borderImage:"linear-gradient(to top, #f12711, #f5af19) 1",borderRadius:"12px",boxShadow:"0 10px 15px rgba(0, 0, 0, 0.5), 0 4px 6px rgba(0, 0, 0, 0.3)",transition:"transform 0.2s ease, box-shadow 0.2s ease"},contentArrowStyle:{borderRight:"15px solid #f5af19"},iconStyle:{background:n.iconBg},icon:d.jsx("div",{className:"flex justify-center items-center w-full h-full",children:d.jsx("img",{src:n.icon,alt:n.title,className:"w-[90%] h-[90%] object-contain",loading:"lazy"})}),children:[d.jsxs("div",{children:[d.jsx("h3",{className:"text-white text-[24px] font-bold",children:n.title}),d.jsx("p",{className:"text-secondary text-[16px] font-semibold",style:{margin:0},children:n.subtitle})]}),n.points&&d.jsx("ul",{className:"mt-5 list-disc ml-5 space-y-2",children:n.points.map((t,i)=>d.jsx("li",{className:"text-gray-100 text-[14px] pl-1 tracking-wider cursor-pointer hover:underline",onClick:()=>e(`${t.li}#${t.id}`),children:t.text},`features-point-${i}`))}),n.image&&d.jsx("div",{className:"flex justify-center mt-3",children:d.jsx("img",{src:n.image,alt:n.title,className:"w-[50%] h-[50%] rounded-lg"})}),n.span&&d.jsx("p",{className:"flex flex-col justify-between items-center mt-3",children:d.jsx("em",{children:n.span})}),n.tags&&d.jsx("div",{className:"flex flex-wrap gap-2 mt-3 justify-center",children:n.tags.map((t,i)=>d.jsx("span",{className:`text-[12px] px-2 py-1 rounded-lg ${t.color}`,children:t.name},i))}),n.btn&&d.jsx("div",{className:"mt-5 flex justify-center",children:d.jsx(Us,{to:n.btn,className:"px-6 py-2 text-white rounded-lg text-sm font-semibold flex items-center",children:d.jsxs("i",{children:["See More ",d.jsx("i",{className:"fa-solid fa-arrow-right ml-1"})]})})})]})};L6.propTypes={feature:ct.shape({title:ct.string.isRequired,subtitle:ct.string.isRequired,icon:ct.string.isRequired,iconBg:ct.string.isRequired,overview:ct.string,update:ct.string,born:ct.string,color:ct.string.isRequired,btn:ct.string,points:ct.arrayOf(ct.shape({text:ct.string.isRequired,li:ct.string,id:ct.string})),span:ct.string,tags:ct.arrayOf(ct.shape({name:ct.string.isRequired,color:ct.string.isRequired})),image:ct.string}).isRequired};const wfe=()=>d.jsx(Ln,{children:d.jsxs(d.Fragment,{children:[d.jsxs(Pn.div,{variants:E_(),children:[d.jsx("p",{id:"features",className:`${q.paragraphSubText} `,children:"Explore Our"}),d.jsx("h2",{className:`${q.headText} highlight-border`,children:d.jsx("span",{className:"title-with-line",children:"Features"})})]}),d.jsx(Pn.div,{variants:E_(),className:"text-secondary text-[17px] max-w-3xl leading-[30px] tracking-wide",children:d.jsx("p",{className:q.paragraphSubTextLower,children:"Access AI Helena for expert help, Legal Match for connections, and a Law Books Library with a tooltip dictionary."})}),d.jsx("div",{className:"mt-20 flex flex-col",children:d.jsx(D6.VerticalTimeline,{children:rfe.map((n,e)=>d.jsx(L6,{feature:n},e))})})]})}),bfe=Bt(wfe),Sfe="/assets/sunflower.png",Tfe="/assets/blindfold_woman.png",Efe=()=>d.jsxs("section",{id:"home",className:"relative w-full h-screen mx-auto",children:[d.jsxs("div",{className:"relative w-full h-full",children:[d.jsx("img",{src:Sfe,alt:"Sunflower",className:"absolute inset-0 w-full h-full object-cover z-0",loading:"lazy"}),d.jsx("img",{src:Tfe,alt:"Blindfold Woman",className:"absolute inset-0 w-full h-full object-cover z-0",loading:"lazy"})]}),d.jsx("div",{className:"fixed inset-0 bg-slate-800/20"}),d.jsxs("div",{className:`absolute inset-0 top-[120px] max-w-7xl mx-auto ${q.paddingX} flex flex-row items-start gap-5`,children:[d.jsxs("div",{className:"flex flex-col justify-center items-center mt-5",children:[d.jsx("div",{className:"w-5 h-5 rounded-full bg-[#ffb42a]"}),d.jsx("div",{className:"w-1 sm:h-80 h-40 orange-gradient"})]}),d.jsxs("div",{children:[d.jsxs("h1",{className:`${q.headText} text-3d`,children:["KARAPATAN",d.jsx("span",{className:"text-white",children:" KO"})]}),d.jsxs("p",{className:`${q.headSubText} mt-2 text-white-100`,children:["Built for Everyone. ",d.jsx("br",{className:"sm:block hidden"})," Your Smart Guide to Legal Understanding"]})]})]}),d.jsx("div",{className:"absolute xs:bottom-10 bottom-32 w-full flex justify-center items-center",children:d.jsx("a",{href:"#features",children:d.jsx("div",{className:"w-[35px] h-[64px] rounded-3xl border-4 border-white flex justify-center items-start p-2",children:d.jsx(Pn.div,{className:"w-3 h-3 rounded-full bg-white mb-1",animate:{y:[0,24,0]},transition:{duration:1.5,repeat:1/0,repeatType:"loop"}})})})})]}),Cfe=()=>d.jsxs(Pn.footer,{initial:{opacity:0,y:50},whileInView:{opacity:1,y:0},transition:{duration:.6,ease:"easeOut"},className:`border-t-2 border-orange-800 text-white ${q.paddingY} mt-16`,children:[d.jsxs("div",{className:`container mx-auto ${q.paddingX} grid lg:grid-cols-4 md:grid-cols-2 gap-8`,children:[d.jsxs("div",{children:[d.jsx("h4",{className:`${q.headSubText} highlight-border mb-4`,children:"About Us"}),d.jsx("hr",{className:"title-with-line mb-3"}),d.jsx("p",{className:"text-sm",children:"KARAPATAN KO: A Digital Platform for Legal Rights and Resources Information System is designed to empower students with accessible legal rights information and resources, and connect them with trusted legal professionals."})]}),d.jsxs("div",{children:[d.jsx("h4",{className:`${q.headSubText} highlight-border mb-4`,children:"Our Mission"}),d.jsx("hr",{className:"title-with-line mb-3"}),d.jsx("p",{className:"text-sm",children:"Our mission is to help all individuals, especially students to understand and exercise their rights. Through future AI-powered tools, users can receive real-time support to guide them through legal processes and understanding."})]}),d.jsxs("div",{children:[d.jsx("h4",{className:`${q.headSubText} highlight-border mb-4`,children:"Partnership"}),d.jsx("hr",{className:"title-with-line mb-3"}),d.jsx("p",{className:"text-sm mb-2",children:"Our partnership is non government organization that includes professional lawyers."})]}),d.jsxs("div",{children:[d.jsx("h4",{className:`${q.headSubText} highlight-border mb-4`,children:"Contact Us"}),d.jsx("hr",{className:"title-with-line mb-3"}),d.jsxs("p",{className:"text-sm mb-2",children:["Email: ",d.jsx("span",{className:"text-white",children:"karapatanko@gmail.com"})]}),d.jsx("p",{className:"text-sm mb-2",children:"Phone: (+63) 966-630-6322"}),d.jsx("p",{className:"text-sm mb-2",children:"Address: Legarda Government Pack Road"})]})]}),d.jsx("div",{className:`mt-10 text-center text-sm border-t border-orange-800 pt-6 ${q.paddingX}`,children:d.jsxs("p",{children:["© ",new Date().getFullYear()," KARAPATAN KO. All rights reserved."]})})]}),k6=({index:n,testimonial:e,name:t,designation:i,company:r,image:s})=>d.jsxs(Pn.div,{variants:Ei("","spring",n*.5,.75),className:"border-2 border-orange-800 opacity-1 p-10 rounded-3xl xs:w-[320px] w-full",children:[d.jsx("p",{className:"text-white font-black text-[48px]",children:'"'}),d.jsxs("div",{className:"mt-1",children:[d.jsxs("p",{className:"text-white tracking-wider text-[18px]",children:[" ",e," "]}),d.jsxs("div",{className:"mt-7 flex justify-between items-center gap-1",children:[d.jsxs("div",{className:"flex-1 flex flex-col",children:[d.jsxs("p",{className:"text-white font-medium text-[16px]",children:[d.jsx("span",{className:"blue-text-gradient",children:"@"}),t]}),d.jsxs("p",{className:"mt-1 text-secondary text-[12px]",children:[" ",i," at ",r]})]}),d.jsx("img",{src:s,alt:`feedback-by-${t}`,className:"w-10 h-10 rounded-full object-cover",loading:"lazy"})]})]})]});k6.propTypes={index:ct.number.isRequired,testimonial:ct.string.isRequired,name:ct.string.isRequired,designation:ct.string.isRequired,company:ct.string.isRequired,image:ct.string.isRequired};const Afe=()=>d.jsxs("div",{className:"mt-12 rounded-[20px]",children:[d.jsx("div",{className:`${q.padding} rounded-2xl min-h-[300px]`,children:d.jsxs(Pn.div,{variants:E_(),children:[d.jsx("p",{className:q.paragraphSubText,children:"What others say"}),d.jsx("h2",{className:`${q.headText} highlight-border`,children:d.jsx("span",{className:"title-with-line",children:"Testimonial"})})]})}),d.jsx("div",{className:`${q.paddingX} -mt-20 pb-14 flex flex-wrap gap-7`,children:sfe.map((n,e)=>d.jsx(k6,{index:e,...n},n.name))})]}),Mfe=Bt(Afe),Fn=()=>{const[n,e]=V.useState(null),[t,i]=V.useState(null),[r,s]=V.useState({top:0,left:0}),o="d87993c8-62f0-4e2f-a1ba-ccd973139434",a=c=>{const u=window.getSelection(),f=u.toString().trim();if(f){e(f),l(f);const g=u.getRangeAt(0).getBoundingClientRect();s({top:g.bottom+window.scrollY+8,left:g.left+window.scrollX})}else e(null),i(null)},l=async c=>{const u=`https://dictionaryapi.com/api/v3/references/learners/json/${c}?key=${o}`;try{const f=await fetch(u);if(f.ok){const m=await f.json();m.length>0&&m[0].shortdef?i(m[0].shortdef[0]):i("No definition found.")}else i("No definition found.")}catch(f){console.error("Error fetching definition:",f),i("Error fetching definition.")}};return{selectedWord:n,definition:t,tooltipPosition:r,handleTextSelection:a}},Ife=()=>{const{selectedWord:n,definition:e,tooltipPosition:t,handleTextSelection:i}=Fn();return d.jsx(Ln,{children:d.jsxs("div",{id:"Constitution_ID",className:"p-8 min-h-screen text-center image-border-table",children:[d.jsxs("div",{className:"mb-16",children:[d.jsx(Pn.p,{onMouseUp:i,variants:Ei("top","tween",.1,.6),initial:"hidden",animate:"show",className:`${q.paragraphSubTextLower} text-white mb-2`,children:d.jsx("em",{children:"Principles"})}),d.jsx(Pn.h3,{variants:Ei("top","tween",.2,.8),initial:"hidden",animate:"show",className:`${q.paragraphSubText} text-white mb-4`,children:d.jsx("strong",{children:"THE 1987 CONSTITUTION"})}),d.jsx(Pn.h1,{variants:Ei("top","tween",.3,1),initial:"hidden",animate:"show",onMouseUp:i,className:`${q.paragraphHeadText} text-white mb-6`,children:d.jsx("strong",{className:"tracking-wide",children:"THE CONSTITUTION OF THE REPUBLIC OF THE PHILIPPINES"})}),d.jsxs(Pn.p,{onMouseUp:i,variants:Ei("top","tween",.4,1.2),initial:"hidden",animate:"show",className:`${q.paragraphSubTextLower} text-white mb-12`,children:[d.jsx("strong",{children:"PREAMBLE:"})," ",d.jsx("br",{}),"We, the sovereign Filipino people, imploring the aid of Almighty God, in order to build a just and humane society and establish a Government that shall embody our ideals and aspirations, promote the common good, conserve and develop our patrimony, and secure to ourselves and our posterity the blessings of independence and democracy under the rule of law and a regime of truth, justice, freedom, love, equality, and peace, do ordain and promulgate this Constitution."]})]}),d.jsxs("div",{className:"mb-12",children:[d.jsx(Pn.h3,{variants:Ei("top","tween",.5,1.2),initial:"hidden",animate:"show",className:`${q.paragraphSubText} text-white text-2xl font-semibold`,children:"Table of Contents"}),d.jsx(Pn.hr,{variants:Ei("top","tween",.6,1.2),initial:"hidden",animate:"show",className:"w-20 mx-auto border-t-2 border-white my-4"})]}),d.jsx(Pn.div,{variants:Ei("bottom","tween",.7,1),initial:"hidden",animate:"show",className:"space-y-4 text-left max-w-3xl mx-auto",children:C6.map(r=>d.jsx(Us,{to:r.href,className:`${q.paragraphSubText} text-white hover:underline hover:text-purple-400 block py-2 px-4 rounded-md transition duration-300 transform hover:scale-105 hover:shadow-lg`,children:r.topic},r.href))}),n&&d.jsxs("div",{className:"absolute text-left bg-white p-4 shadow-lg rounded-lg max-w-xs text-black",style:{left:t.left,top:t.top,zIndex:100},children:[d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsx("p",{className:q.dictionaryText,children:n}),d.jsx("i",{className:"fas fa-volume-up ml-5 text-gray-600"})]}),d.jsx("hr",{className:"border-2 mb-2"}),d.jsx("p",{children:e})]})]})})},Pfe=Bt(Ife,"Constitution"),Rfe=()=>d.jsxs(d.Fragment,{children:[d.jsx("div",{className:"bg-hero-pattern bg-cover bg-no-repeat bg-center",children:d.jsx(Efe,{})}),d.jsx(bfe,{}),d.jsx(Mfe,{}),d.jsx(m8,{}),d.jsx(Cfe,{})]}),Nfe=()=>{const[n,e]=V.useState(!1),t=V.useRef(null),i=V.useRef(null),r=V.useRef(null);V.useEffect(()=>{const o=()=>{window.scrollY>50?t.current?.classList.add("scrolled"):t.current?.classList.remove("scrolled")},a=()=>{window.innerWidth>768&&n&&s()},l=c=>{c.key==="Escape"&&n&&s()};return window.addEventListener("scroll",o),window.addEventListener("resize",a),document.addEventListener("keydown",l),()=>{window.removeEventListener("scroll",o),window.removeEventListener("resize",a),document.removeEventListener("keydown",l)}},[n]);const s=()=>{e(o=>!o),document.body.style.overflow=n?"":"hidden"};return d.jsxs(d.Fragment,{children:[d.jsx("nav",{className:"admin_navbar",ref:t,children:d.jsxs("div",{className:"admin_navbar-container",children:[d.jsx("div",{className:"text-white dark:text-gray-200 text-lg font-bold admin_logo highlight-border",children:"KARAPATAN KO"}),d.jsxs("button",{className:`admin-mobile-nav-toggle ${n?"active":""}`,"aria-label":"Toggle navigation",onClick:s,children:[d.jsx("span",{className:"bar"}),d.jsx("span",{className:"bar"}),d.jsx("span",{className:"bar"})]}),d.jsxs("ul",{className:`admin-nav-links ${n?"active":""}`,ref:i,children:[d.jsx("li",{children:d.jsx("a",{href:"",onClick:s,children:"HOME"})}),d.jsx("li",{children:d.jsx("a",{href:"#admin_appointment",children:"APPOINTMENT"})}),d.jsx("li",{children:d.jsx("a",{href:"#admin_books",children:"BOOKS"})})]})]})}),d.jsx("div",{className:`admin-overlay ${n?"active":""}`,ref:r,onClick:s})]})},Dfe={"Noel Magalgalit":{name:"Noel Magalgalit",title:"Civil Law",address:"Insular Life Building, Legarda Street, corner Abanao extension, Baguio, 2660 Benguet"},"Palmer Fagyan Bugtong":{name:"Palmer Fagyan Bugtong",title:"Criminal Law",address:"Insular Life Building, Legarda Street, corner Abanao extension, Baguio, 2600 Benguet"},"Jess B. Evasco":{name:"Jess B. Evasco",title:"Criminal Law",address:"Insular Life Building, Legarda Street, corner Abanao extension, Baguio, 2600 Benguet"}},Lfe=()=>{const[n,e]=V.useState({}),[t,i]=V.useState({}),[r,s]=V.useState(null),[o,a]=V.useState(!1),[l,c]=V.useState(!1),[u,f]=V.useState([]);V.useEffect(()=>{const g=Hu(Jo,"appointments"),x=mC(g,b=>{const w={},v={},S=new Date;b.forEach(E=>{const I=E.data(),U=I.lawyer?.name||"Unknown Lawyer";if(!Dfe[U])return;w[U]||(w[U]=[]),v[U]||(v[U]=[]);const O=I.date instanceof Bi?I.date.toDate():new Date(I.date),C={id:E.id,date:O.toLocaleDateString(),time:I.time||"No time provided",reasons:I.reasons||"No reasons provided",client:`${I.firstName||""} ${I.lastName||""}`.trim()||"Unknown Client"};O>=S?w[U].push(C):v[U].push(C)}),e(w),i(v)});return()=>x()},[]);const m=async()=>{if(l){c(!1);return}try{const g=Hu(Jo,"archived_appointments"),b=(await _6(g)).docs.map(w=>({id:w.id,...w.data()}));f(b),c(!0),a(!1)}catch(g){console.error("Error fetching archived appointments:",g)}};return d.jsxs(d.Fragment,{children:[d.jsx(Nfe,{}),d.jsx(Pn.div,{variants:E_(),children:d.jsx("h2",{id:"admin_appointment",className:`${q.headText} highlight-border`,children:d.jsx("span",{className:"title-with-line",children:"Appointments"})})}),d.jsx(Pn.p,{variants:Ei("","",.1,1),className:"text-secondary text-[17px] max-w-3xl leading-[30px] tracking-wide mb-5 mt-2",children:"Manage appointments, send messages, and delete bookings."}),d.jsxs("div",{className:"flex",children:[d.jsxs("div",{className:`${q.paragraphSubTextLower} mt-3 p-4 border-r`,children:[" ",d.jsxs("table",{children:[d.jsx("thead",{children:d.jsx("tr",{children:d.jsx("th",{children:"Lawyer Name"})})}),d.jsxs("tbody",{children:[Object.keys(n).map((g,x)=>d.jsx("tr",{onClick:()=>s(g),children:d.jsxs("td",{className:"cursor-pointer mb-1 hover:text-orange-700 p-2",children:[x+1,". ",g]})},g)),d.jsx("br",{}),d.jsx("br",{}),d.jsx("hr",{}),d.jsx("br",{}),d.jsx("button",{className:"cursor-pointer mb-1 text-orange-400 rounded hover:text-orange-900",onClick:m,children:l?"Hide Archived":"Show Archived"})]})]})]}),d.jsx("div",{className:"w-3/4 p-4",children:r&&d.jsxs(d.Fragment,{children:[d.jsxs("h3",{className:"text-lg font-bold",children:["Appointments for ",r]}),d.jsx("button",{className:"px-4 py-2 text-orange-400 rounded hover:text-orange-900 ml-2",onClick:()=>{a(!o),c(!1)},children:o?"Show Current Appointments":"Show Past Appointments"}),!o&&!l&&d.jsx("h3",{className:"mt-4 text-lg font-bold",children:"Current Appointments"}),!o&&!l&&n[r]?.map((g,x)=>d.jsxs("div",{className:"border p-2 mt-2 rounded shadow-md",children:[d.jsxs("p",{children:[d.jsx("strong",{children:"Date:"})," ",g.date]}),d.jsxs("p",{children:[d.jsx("strong",{children:"Time:"})," ",g.time]}),d.jsxs("p",{children:[d.jsx("strong",{children:"Client:"})," ",g.client]}),d.jsxs("p",{children:[d.jsx("strong",{children:"Reason:"})," ",g.reasons]}),d.jsx("button",{className:"text-red-600 hover:text-red-800",onClick:()=>f(g.id,r),children:"Archive"})]},x)),o&&d.jsx("h3",{className:"mt-4 text-lg font-bold",children:"Past Appointments"}),o&&t[r]?.map((g,x)=>d.jsxs("div",{className:"border p-2 mt-2 rounded shadow-md",children:[d.jsxs("p",{children:[d.jsx("strong",{children:"Date:"})," ",g.date]}),d.jsxs("p",{children:[d.jsx("strong",{children:"Time:"})," ",g.time]}),d.jsxs("p",{children:[d.jsx("strong",{children:"Client:"})," ",g.client]}),d.jsxs("p",{children:[d.jsx("strong",{children:"Reason:"})," ",g.reasons]})]},x)),l&&u.length>0?d.jsxs("div",{className:"mt-2 p-2 shadow-md",children:[d.jsx("h3",{className:"text-lg font-bold",children:"Archived Appointments"}),u.map((g,x)=>d.jsxs("div",{className:"border p-2 mt-2 rounded shadow-md",children:[d.jsxs("p",{children:[d.jsx("strong",{children:"Date:"})," ",g.date]}),d.jsxs("p",{children:[d.jsx("strong",{children:"Time:"})," ",g.time]}),d.jsxs("p",{children:[d.jsx("strong",{children:"Client:"})," ",g.client]}),d.jsxs("p",{children:[d.jsx("strong",{children:"Reason:"})," ",g.reasons]})]},x))]}):l&&d.jsx("p",{children:"No archived appointments found."})]})})]})]})},kfe=Bt(Lfe,"header"),Bn=({children:n})=>d.jsxs("div",{children:[d.jsx(Xde,{}),d.jsx("main",{children:n})]}),O6=({LawyerProfile:n})=>d.jsx("div",{children:d.jsxs(Pn.div,{className:"max-w-md p-6 mt-10 rounded-lg shadow-lg relative text-white image-border-lawyer",initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},children:[d.jsxs("div",{className:"flex flex-col items-center",children:[d.jsx("img",{src:n.image,alt:n.name,className:"w-24 h-24 rounded-lg border-2 bg-white shadow-md",width:96,height:96,loading:"lazy"}),d.jsx("h2",{className:"text-md font-bold mt-2",children:n.name}),d.jsx("p",{className:"text-sm",children:n.title})]}),d.jsxs("div",{className:"mt-5 text-sm",children:[d.jsxs("p",{className:"font-semibold",children:["Consultation:"," ",d.jsx("span",{className:"text-orange-400",children:n.currentSP})]}),d.jsxs("p",{className:"mt-1 font-semibold",children:["Experience:"," ",d.jsx("span",{className:"text-orange-400",children:n.currentPoints})]})]}),d.jsx("hr",{className:"my-4 mt-6 border-white"}),n.tagline&&d.jsx("div",{className:"text-center tracking-wide text-sm text-white mb-4",children:d.jsx("b",{children:n.tagline})}),d.jsxs("div",{className:"grid grid-cols-1 gap-4 text-xs",children:[d.jsxs("div",{children:[d.jsx("p",{className:"font-semibold",children:"TALENT"}),d.jsx("p",{className:"text-center tracking-wide text-sm text-white mb-4",children:n.talent})]}),d.jsxs("div",{children:[d.jsx("p",{className:"font-semibold mt-2",children:"ADDRESS:"}),d.jsx("p",{className:"text-center tracking-wide text-sm text-white mb-4",children:n.address})]})]}),n.btn&&d.jsx("div",{className:"mt-5 flex justify-center",children:d.jsx(Us,{to:{pathname:n.btn,state:{lawyerName:n.name,lawyerProfile:n}},className:"px-6 py-2 border-2 border-orange-500 hover:bg-slate-700 text-white rounded-lg text-sm font-semibold flex items-center",children:"Get an Appointment"})})]})});O6.propTypes={LawyerProfile:ct.shape({image:ct.string.isRequired,name:ct.string.isRequired,title:ct.string.isRequired,currentSP:ct.string.isRequired,currentPoints:ct.string.isRequired,talent:ct.string.isRequired,tagline:ct.string,address:ct.string.isRequired,btn:ct.string.isRequired}).isRequired};const Ofe=()=>(V.useEffect(()=>{window.scrollTo(0,0)},[]),d.jsxs("div",{className:"container mx-auto px-4 py-6",children:[d.jsx("span",{className:q.paragraphSubText,children:"Choose Your Lawyer"}),d.jsx("h2",{className:`${q.headText} highlight-border`,children:d.jsx("span",{className:"title-with-line mb-5",children:"Legal Matching"})}),d.jsx("p",{className:q.paragraphSubTextLower,children:"Finding the right lawyer is a crucial step in ensuring the best possible outcome for your legal case. Whether you're dealing with workplace discrimination, personal injury, or family law matters, we connect you with experienced professionals who specialize in your area of need. Legal match helps you find qualified attorneys and lawyers based on your specific legal concerns, ensuring you receive expert guidance."}),d.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-2 lg:grid-cols-3 gap-4",children:Or.map((n,e)=>d.jsx(O6,{LawyerProfile:n},e))})]})),Ufe=Bt(Ofe,"lawyer-section"),Ffe="/assets/plus_icon.png",jfe="/assets/message_icon.png",Vfe="/assets/question_icon.png",Bfe="/assets/history_icon.png",zfe="/assets/setting_icon.png",Hfe=({children:n})=>{const[e,t]=V.useState(!1),{newChat:i,darkMode:r,setDarkMode:s}=V.useContext(tg),[o,a]=V.useState([]),{setSelectedMessage:l}=V.useContext(tg),c=bc(),u=(f,m)=>{l({message:f,response:m})};return V.useEffect(()=>{(async()=>{const m=pC(Hu(c,"Ai_Message"),m6("timestamp","desc"),kde(5)),x=(await _6(m)).docs.map(b=>({id:b.id,...b.data()}));a(x)})()},[]),d.jsx("div",{className:`Ai_sidebar-container ${r?"dark-mode":""}`,children:d.jsx("div",{className:`Ai_sidebar ${e?"extended":""}`,children:d.jsxs("div",{className:"top",children:[d.jsxs("div",{className:"Ai_menu",children:[d.jsx("img",{onClick:()=>t(f=>!f),src:"menu_icon",alt:"menu_icon"}),e&&d.jsx("p",{onClick:()=>t(f=>!f),children:"Menu"})]}),d.jsxs("div",{onClick:()=>i(),className:"Ai_new-chat",children:[d.jsx("img",{src:Ffe,alt:"plus_icon"}),e&&d.jsx("p",{children:"New chat"})]}),e&&d.jsxs("div",{className:"Ai_recent",children:[d.jsx("p",{className:"Ai_recent-title",children:"Recent Messages"}),o.map(f=>d.jsxs("div",{className:"Ai_recent-entry",onClick:()=>u(f.message,f.response),children:[d.jsx("img",{src:jfe,alt:"message_icon"}),d.jsxs("p",{children:[f.message.substring(0,18),"..."]})]},f.id))]}),d.jsxs("div",{className:"Ai_bottom",children:[d.jsxs("div",{className:"Ai_bottom-item Ai_recent-entry",children:[d.jsx("img",{onClick:()=>window.open("https://gemini.google.com/faq","_blank"),src:Vfe,alt:"question_icon"}),e&&d.jsx("p",{onClick:()=>window.open("https://gemini.google.com/faq","_blank"),children:"Help"})]}),d.jsxs("div",{className:"Ai_bottom-item Ai_recent-entry",children:[d.jsx("img",{src:Bfe,alt:"history_icon"}),e&&d.jsx("p",{children:"Activity"})]}),d.jsxs("div",{className:"Ai_bottom-item Ai_recent-entry",children:[d.jsx("img",{src:zfe,alt:"setting_icon"}),e&&d.jsxs("div",{className:"settings",children:[d.jsxs("label",{className:"toggle-switch",children:[d.jsx("input",{type:"checkbox",checked:r,onChange:()=>s(!r)}),d.jsx("span",{className:"slider"})]}),d.jsx("p",{children:r?"Dark Mode On":"Dark Mode Off"})]})]})]})]})})})},Gfe=()=>d.jsxs("div",{className:"relative",children:[d.jsxs(Us,{to:"/main",className:"text-center text-secondary dark:text-gray-400 bg-transparent border-0 p-0 cursor-pointer flex items-center gap-2",children:[d.jsx("p",{className:"sign text-secondary dark:text-gray-400 w-5 h-5"}),"DASHBOARD"]}),d.jsxs(Us,{to:"/lawyer-status",className:"text-center text-secondary dark:text-gray-400 bg-transparent border-0 p-0 cursor-pointer flex items-center gap-2",children:[d.jsx("p",{className:"sign text-secondary dark:text-gray-400 w-5 h-5"}),"APPOINTMENT"]}),d.jsxs(Us,{to:"/",className:"text-center text-secondary dark:text-gray-400 bg-transparent border-0 p-0 cursor-pointer flex items-center gap-2",children:[d.jsx(E6,{className:"sign text-secondary dark:text-gray-400 w-5 h-5"}),"SIGN OUT"]})]}),uO="/assets/user_icon.png",Wfe="/assets/gemini_icon.png",qfe="/assets/mic_icon.png",$fe="/assets/send_icon.png",Xfe=window.SpeechRecognition||window.webkitSpeechRecognition,Bl=new Xfe;Bl.continuous=!0;Bl.interimResults=!0;Bl.lang="en-US";const Kfe=()=>{const{onSent:n,recentPrompt:e,showResult:t,loading:i,resultData:r,setInput:s,input:o,darkMode:a}=V.useContext(tg),[l,c]=V.useState(null),[u,f]=V.useState(!1),[m,g]=V.useState(!1),[x,b]=V.useState(!1),[w,v]=V.useState(null),{selectedMessage:S}=V.useContext(tg),E=bc();V.useEffect(()=>{(async()=>{const M=pc().currentUser;if(M){const A=fo(E,"users",M.uid),D=await Hf(A);D.exists()&&c(D.data())}})()},[]),V.useEffect(()=>{m?Bl.start():Bl.stop(),Bl.onresult=C=>{const P=Array.from(C.results).map(M=>M[0].transcript).join("");s(P)},Bl.onerror=C=>console.error(C.error)},[m]);const I=C=>{C.key==="Enter"&&o.trim()&&O()},U=()=>{g(!1),Bl.stop(),setTimeout(()=>{o.trim()&&O()},500)},O=async()=>{if(!o.trim())return;const P=pc().currentUser,M=bc();if(P)try{const D=(await w6(Hu(M,"Ai_Message"),{userId:P.uid,message:o,response:"",timestamp:S6()})).id;n(),b(!1),v(D)}catch(A){console.error("Error saving message:",A)}};return V.useEffect(()=>{(async()=>{!w||!r||x||setTimeout(async()=>{try{await Fde(fo(E,"Ai_Message",w),{response:r}),b(!0)}catch(P){console.error("Error updating AI response:",P)}},12e4)})()},[r]),d.jsxs("div",{className:`Ai_layout ${a?"dark-mode":""}`,children:[d.jsx(Hfe,{}),d.jsxs("div",{className:"Ai_main",children:[d.jsxs("div",{className:"Ai_nav",children:[d.jsx("p",{id:"helena",children:"Karapatan Ko"}),d.jsx("img",{onClick:()=>f(!u),src:uO,alt:"user_icon"}),u&&d.jsx("div",{className:"navbar-popup",children:d.jsx(Gfe,{})})]}),d.jsxs("div",{className:"Ai_main-container",children:[S?d.jsxs("div",{className:"Ai_result",children:[d.jsxs("div",{className:"Ai_result-title",children:[d.jsx("img",{src:uO,alt:"user_icon"}),d.jsx("p",{children:S.message})]}),d.jsxs("div",{className:"Ai_result-data",children:[d.jsx("img",{src:Wfe,alt:"gemini_icon"}),d.jsx("p",{dangerouslySetInnerHTML:{__html:S.response}})]})]}):d.jsx(d.Fragment,{children:d.jsxs("div",{className:"Ai_greet",children:[d.jsx("p",{children:d.jsxs("span",{children:["Hello, ",l?`${l.firstName}`:"User"]})}),d.jsx("p",{children:"How can I help you today?"})]})}),d.jsxs("div",{className:"Ai_main-bottom",children:[d.jsxs("div",{className:"Ai_search-box",children:[d.jsx("input",{onChange:C=>s(C.target.value),value:o,type:"text",placeholder:"Enter a prompt here",onKeyDown:I}),d.jsxs("div",{children:[d.jsx("img",{src:qfe,alt:"mic_icon",style:{cursor:"pointer"},onMouseDown:()=>g(!0),onMouseUp:()=>U()}),o?d.jsx("img",{onClick:O,src:$fe,alt:"send_icon"}):null]})]}),d.jsx("div",{className:"mic-container text-black",children:m?d.jsx("span",{children:"🎙️ Listening..."}):null}),d.jsx("p",{className:"Ai_bottom-info",children:"Gemini may display inaccurate info, including about people, so double-check its responses."})]})]})]})]})},Yfe={"Noel Magalgalit":{name:"Noel Magalgalit",title:"Civil Law",address:"Insular Life Building, Legarda Street, corner Abanao extension, Baguio, 2660 Benguet"},"Palmer Fagyan Bugtong":{name:"Palmer Fagyan Bugtong",title:"Criminal Law",address:"Insular Life Building, Legarda Street, corner Abanao extension, Baguio, 2660 Benguet"},"Jess B. Evasco":{name:"Jess B. Evasco",title:"Criminal Law",address:"Insular Life Building, Legarda Street, corner Abanao extension, Baguio, 2660 Benguet"}},Jfe=()=>{const[n,e]=V.useState(null),[t,i]=V.useState([]),[r,s]=V.useState(null),[o,a]=V.useState([]),[l,c]=V.useState(""),[u,f]=V.useState(!0),m=pc(),g=async()=>{if(!r||!l.trim()){alert("Message cannot be empty.");return}const x=m.currentUser;if(!x){alert("User is not authenticated.");return}try{const b=fo(Jo,"users",x.uid),w=await Hf(b);let v=x.displayName||"Unknown User";w.exists()&&(v=w.data().firstName+" "+w.data().lastName),await w6(Hu(Jo,"messages"),{date:S6(),details:l.trim(),sender:v,userId:x.uid,appointmentId:r.id}),c("")}catch(b){console.error("Error sending message:",b),alert("Failed to send the message. Please try again.")}};return V.useEffect(()=>{if(!r)return;const x=Hu(Jo,"messages"),b=pC(x,rO("appointmentId","==",r.id)),w=mC(b,v=>{const S=v.docs.map(E=>({id:E.id,...E.data()}));a(S)});return()=>w()},[r]),V.useEffect(()=>{let x=null,b=null;return x=dy(m,w=>{w?(()=>{const S=Hu(Jo,"appointments"),E=pC(S,rO("email","==",w.email),m6("timestamp","desc"));b=mC(E,I=>{if(I.empty)e(null),i([]);else{const U=I.docs.map(O=>({id:O.id,...O.data(),lawyerInfo:Yfe[O.data().lawyer?.name]||{}}));e(U[0]),i(U.slice(1))}f(!1)})})():(e(null),i([]),f(!1))}),()=>{x&&x(),b&&b()}},[m]),u?d.jsx("p",{children:"Loading appointments..."}):d.jsxs(d.Fragment,{children:[d.jsx("h2",{className:`${q.headText} highlight-border`,children:d.jsx("span",{className:"title-with-line mb-5",children:"Appointments"})}),d.jsxs("div",{className:"p-4",children:[d.jsxs("div",{className:"mb-6",children:[d.jsx("h3",{className:"text-lg font-bold mt-3 mb-4",children:"Recent Appointment"}),d.jsx("div",{className:"space-y-4",children:n?d.jsx("div",{className:"p-2 mt-2 rounded shadow-md border-gray-300 tracking-wide",children:d.jsx("table",{className:"min-w-full table-auto border-collapse border border-gray-300 mb-14",children:d.jsxs("tbody",{children:[d.jsxs("tr",{children:[d.jsx("td",{className:"px-4 py-3 text-right border font-semibold",children:"Name"}),d.jsxs("td",{className:"px-4 py-3 text-left border",children:[n.firstName," ",n.lastName]})]}),d.jsxs("tr",{children:[d.jsx("td",{className:"px-4 py-3 text-right border font-semibold",children:"Email"}),d.jsx("td",{className:"px-4 py-3 text-left border",children:n.email})]}),d.jsxs("tr",{children:[d.jsx("td",{className:"px-4 py-3 text-right border font-semibold",children:"Date"}),d.jsx("td",{className:"px-4 py-3 text-left border",children:n.date})]}),d.jsxs("tr",{children:[d.jsx("td",{className:"px-4 py-3 text-right border font-semibold",children:"Time"}),d.jsx("td",{className:"px-4 py-3 text-left border",children:n.time})]}),d.jsxs("tr",{children:[d.jsx("td",{className:"px-4 py-3 text-right border font-semibold",children:"Reason"}),d.jsx("td",{className:"px-4 py-3 text-left border",children:n.reasons})]}),d.jsxs("tr",{children:[d.jsx("td",{className:"px-4 py-3 text-right border font-semibold",children:"Lawyer"}),d.jsx("td",{className:"px-4 py-3 text-left border",children:n.lawyerInfo?.name||"Unknown Lawyer"})]}),d.jsx("tr",{children:d.jsx("td",{colSpan:"2",className:"px-4 py-3 text-center border",children:d.jsx("button",{className:"px-3 py-1 text-orange-400 rounded hover:text-orange-900",onClick:()=>s(n),children:"Message"})})})]})})},n.id):d.jsx("p",{className:"text-gray-500",children:"No recent appointments found."})})]}),d.jsxs("div",{className:"mt-6",children:[d.jsx("h3",{className:"text-lg font-bold mb-4",children:"Past Appointments"}),d.jsx("div",{className:"space-y-4",children:t.length>0?t.map(x=>d.jsx("div",{className:"p-2 mt-2 rounded shadow-md border-gray-300 tracking-wide",children:d.jsx("table",{className:"min-w-full table-auto border-collapse border border-gray-300 mb-14",children:d.jsxs("tbody",{children:[d.jsxs("tr",{children:[d.jsx("td",{className:"px-4 py-3 text-right border font-semibold",children:"Name"}),d.jsxs("td",{className:"px-4 py-3 text-left border",children:[x.firstName," ",x.lastName]})]}),d.jsxs("tr",{children:[d.jsx("td",{className:"px-4 py-3 text-right border font-semibold",children:"Email"}),d.jsx("td",{className:"px-4 py-3 text-left border",children:x.email})]}),d.jsxs("tr",{children:[d.jsx("td",{className:"px-4 py-3 text-right border font-semibold",children:"Date"}),d.jsx("td",{className:"px-4 py-3 text-left border",children:x.date})]}),d.jsxs("tr",{children:[d.jsx("td",{className:"px-4 py-3 text-right border font-semibold",children:"Time"}),d.jsx("td",{className:"px-4 py-3 text-left border",children:x.time})]}),d.jsxs("tr",{children:[d.jsx("td",{className:"px-4 py-3 text-right border font-semibold",children:"Reason"}),d.jsx("td",{className:"px-4 py-3 text-left border",children:x.reasons})]}),d.jsxs("tr",{children:[d.jsx("td",{className:"px-4 py-3 text-right border font-semibold",children:"Lawyer"}),d.jsx("td",{className:"px-4 py-3 text-left border",children:x.lawyerInfo?.name||"Unknown Lawyer"})]}),d.jsx("tr",{children:d.jsx("td",{colSpan:"2",className:"px-4 py-3 text-center border",children:d.jsx("button",{className:"px-3 py-1 text-orange-400 rounded hover:text-orange-900",onClick:()=>s(x),children:"Message"})})})]})})},x.id)):d.jsx("p",{className:"text-gray-500",children:"No past appointments found."})})]})]}),r&&d.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center",children:d.jsxs("div",{className:"bg-white border border-2 rounded-lg p-4 shadow-lg w-8/12",children:[d.jsxs("h6",{className:"text-black mb-4",children:[d.jsx("b",{children:"Chat with:"})," ",r?.lawyer?.name]}),d.jsx("div",{className:"mb-4 p-2 h-40 overflow-y-scroll text-black",children:o.length>0?o.map(x=>d.jsxs("div",{className:`mb-2 ${x.sender==="admin"?"text-right":"text-left"}`,children:[d.jsxs("p",{children:[d.jsx("strong",{children:x.sender==="admin"?"Admin":x.sender||"User"}),": ",x.details]}),d.jsx("p",{className:"text-xs text-gray-500",children:x.date?new Date(x.date.toDate()).toLocaleString():""})]},x.id)):d.jsx("p",{className:"text-gray-500 text-center p-12",children:"No messages yet."})}),d.jsx("textarea",{className:"p-2 w-full bg-gray-200 rounded mb-4 text-black",rows:"3",value:l,onChange:x=>c(x.target.value),placeholder:"Type your message here..."}),d.jsxs("div",{className:"flex justify-end space-x-2",children:[d.jsx("button",{className:"px-4 py-2 text-red-600 hover:text-red-800",onClick:()=>s(null),children:"Cancel"}),d.jsx("button",{className:"px-4 py-2 text-orange-400 rounded hover:text-orange-900",onClick:g,children:"Send"})]})]})})]})},Qfe=Bt(Jfe),Zfe=()=>{const n=qt(),[e,t]=V.useState(!1);return d.jsxs("div",{children:[d.jsx("p",{className:q.paragraphSubText,children:"Instructions for booking an Appointment with"}),d.jsx("h2",{className:`${q.headText} highlight-border`,children:d.jsxs("span",{className:"title-with-line",children:[" ",Or[0].nickname]})}),d.jsx("table",{className:"mt-5 w-full border-collapse border border-gray-200",children:d.jsxs("tbody",{children:[d.jsx("tr",{children:d.jsxs("td",{className:`${q.appointmentSubTextLower} border border-gray-300 p-3`,children:["1. Securing an appointment is ",d.jsx("b",{children:"FREE OF CHARGE"})," and Appointment Slip is ",d.jsx("b",{children:"NON-TRANSFERABLE"}),"."]})}),d.jsx("tr",{children:d.jsx("td",{className:`${q.appointmentSubTextLower} border border-gray-300 p-3`,children:"2. The appointment must be named after the requester who will personally apply at the Magalgalit Law Office."})}),d.jsx("tr",{children:d.jsx("td",{className:`${q.appointmentSubTextLower} border border-gray-300 p-3`,children:"3. Be at the Magalgalit Law Office at least fifteen minutes before the appointment schedule."})}),d.jsx("tr",{children:d.jsx("td",{className:`${q.appointmentSubTextLower} border border-gray-300 p-3`,children:d.jsxs("label",{children:[d.jsx("input",{type:"checkbox",checked:e,onChange:i=>t(i.target.checked),className:"mr-2"}),"I agree to the collection and use of the data that I will provide through this form for the purpose of booking an appointment. I understand that the collection and use of this data, which may include personal and sensitive personal information, shall be in accordance with the Data Privacy Act of 2021."]})})})]})}),d.jsxs("div",{className:"flex justify-between mt-10",children:[d.jsx("button",{type:"button",onClick:()=>n("/lawyer-status"),className:"px-6 py-2 border-2 border-orange-700 text-white rounded-lg hover:bg-gray-500",children:"Back"}),d.jsx("div",{className:"w-1/4"}),d.jsx(Us,{to:e?"/appointmentTableLawyer1":"#",className:`px-6 py-2 border-2 border-orange-500 text-white rounded-lg text-sm font-semibold flex items-center ${e?"hover:bg-slate-700":"bg-gray-500 cursor-not-allowed"}`,onClick:i=>{e||i.preventDefault()},children:"Next"})]})]})},epe=Bt(Zfe);function YI(n){return vh({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"m8.854 11.646 5.792-5.792a.5.5 0 0 1 .854.353v11.586a.5.5 0 0 1-.854.353l-5.792-5.792a.5.5 0 0 1 0-.708Z"},child:[]}]})(n)}function JI(n){return vh({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"m15.146 12.354-5.792 5.792a.5.5 0 0 1-.854-.353V6.207a.5.5 0 0 1 .854-.353l5.792 5.792a.5.5 0 0 1 0 .708Z"},child:[]}]})(n)}const tpe=()=>{const n=qt(),{state:e}=Fo(),{name:t,email:i}=e||{},[r,s]=V.useState({firstName:"",middleName:"",lastName:"",email:"",date:"",time:""}),[o,a]=V.useState(new Date),[l,c]=V.useState(null),u=["2024-12-24","2024-12-25","2024-12-30","2025-01-01","2025-04-09","2025-04-17","2025-04-19","2025-05-01","2025-06-12","2025-08-21","2025-08-25","2025-11-01","2025-11-30","2025-12-08","2025-12-24","2025-12-25","2025-12-30","2025-12-31"];V.useEffect(()=>{const F=pc(),J=bc(),ue=dy(F,async ye=>{if(ye){const le=fo(J,"users",ye.uid),xe=await Hf(le);if(xe.exists()){const Pe=xe.data();s(Me=>({...Me,firstName:Pe.firstName||"",middleName:Pe.middleName||"",lastName:Pe.lastName||"",email:Pe.email||ye.email}))}}});return()=>ue()},[]);const f=()=>{n("/appointmentLawyer2")},m=(F,J)=>{s(ue=>({...ue,[F]:J}))},g=()=>!r.firstName||!r.lastName||!r.email?(alert("Please fill in all required fields!"),!1):!r.date||!r.time?(alert("Please select a valid date and time slot!"),!1):!0,x=F=>{F.preventDefault(),g()&&n("/appointmentResultLawyer1",{state:{formData:r}})},b=F=>F<new Date().setHours(0,0,0,0),w=F=>u.includes(U(F)),v=F=>!b(F)&&F.getDay()!==0&&F.getDay()!==6&&!w(F),S=F=>new Date(F.getFullYear(),F.getMonth(),1).getDay(),E=F=>new Date(F.getFullYear(),F.getMonth()+1,0).getDate(),I=()=>{const F=S(o),J=E(o),ue=[];for(let ye=0;ye<F;ye++)ue.push(null);for(let ye=1;ye<=J;ye++){const le=new Date(o.getFullYear(),o.getMonth(),ye);ue.push(le)}return ue},U=F=>{const J=F.getFullYear(),ue=String(F.getMonth()+1).padStart(2,"0"),ye=String(F.getDate()).padStart(2,"0");return`${J}-${ue}-${ye}`},O=F=>{v(F)&&(c(F),s(J=>({...J,date:U(F),time:""})))},C=()=>{a(F=>{const J=new Date(F.getFullYear(),F.getMonth()-1,1);return J<new Date(2024,0,1)?F:J})},P=()=>{a(F=>new Date(F.getFullYear(),F.getMonth()+1,1))},M=[{id:1,start:"8:00 am",end:"9:00 am"},{id:2,start:"9:00 am",end:"10:00 am"},{id:3,start:"10:00 am",end:"11:00 am"}],A=F=>{const J=new Date,ue=new Date().setHours(0,0,0,0),[ye,le]=F.split(" ");let[xe,Pe]=ye.split(":").map(Number);return le==="pm"&&xe!==12?xe+=12:le==="am"&&xe===12&&(xe=0),new Date(ue).setHours(xe,Pe,0,0)<J},D=(F,J)=>{if(!(l&&l.toDateString()!==new Date().toDateString())){if(A(F))return}const ue=`${F} - ${J}`;s(ye=>({...ye,time:ye.time===ue?"":ue}))};M.forEach(F=>{console.log(`Time Slot: ${F.start} - Disabled: ${A(F.start)}`)});const B=F=>F?w(F)||F.getDay()===0||F.getDay()===6||b(F)?"bg-gray-800":l?.toDateString()===F?.toDateString()?"bg-orange-800":new Date().toDateString()===F.toDateString()?"border":"hover:bg-orange-900 cursor-pointer":"bg-dark",[j,te]=V.useState(""),[ce,pe]=V.useState(""),de=["Legal consultation for personal matters","Business-related legal advice","Assistance with document preparation","Representation in a court case","Other reasons"],W=F=>{te(F),s(J=>({...J,reasons:F==="Other reasons"?ce:F}))},Z=F=>{pe(F),j==="Other reasons"&&s(J=>({...J,reasons:F}))};return d.jsxs(d.Fragment,{children:[d.jsx("p",{className:q.paragraphSubText,children:"Schedule a"}),d.jsx("h2",{className:`${q.headText} highlight-border`,children:d.jsx("span",{className:"title-with-line",children:"Consultation"})}),d.jsx("div",{className:"p-6 border-2 border-orange-700 shadow-lg rounded-lg mt-10",children:d.jsxs("form",{onSubmit:x,children:[d.jsxs("div",{className:"flex space-x-4 mb-4",children:[d.jsxs("div",{className:"w-1/3",children:[d.jsx("label",{className:"block text-white font-medium mb-2",htmlFor:"firstName",children:"First Name"}),d.jsx("input",{type:"text",id:"firstName",name:"firstName",value:r.firstName,onChange:F=>m("firstName",F.target.value),className:"w-full px-4 py-2 border border-gray-300 text-white rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-700",placeholder:"First name",required:!0})]}),d.jsxs("div",{className:"w-1/3",children:[d.jsx("label",{className:"block text-white font-medium mb-2",htmlFor:"middleName",children:"Middle Name"}),d.jsx("input",{type:"text",id:"middleName",name:"middleName",value:r.middleName,onChange:F=>m("middleName",F.target.value),className:"w-full px-4 py-2 border border-gray-300 text-white rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-700",placeholder:"Middle name"})]}),d.jsxs("div",{className:"w-1/3",children:[d.jsx("label",{className:"block text-white font-medium mb-2",htmlFor:"lastName",children:"Last Name"}),d.jsx("input",{type:"text",id:"lastName",name:"lastName",value:r.lastName,onChange:F=>m("lastName",F.target.value),className:"w-full px-4 py-2 border border-gray-300 text-white rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-700",placeholder:"Last name",required:!0})]})]}),d.jsxs("div",{className:"w-full mb-4",children:[d.jsx("label",{className:"text-white font-medium mb-2",htmlFor:"email",children:"Email"}),d.jsx("input",{type:"email",id:"email",name:"email",value:r.email,onChange:F=>m("email",F.target.value),className:"w-full px-4 py-2 border border-gray-300 text-white rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-700",placeholder:"sample@gmail.com",required:!0})]}),d.jsx("br",{}),d.jsx("label",{className:"text-white font-medium mb-2",htmlFor:"reason",children:"Select a Reason"}),d.jsx("div",{className:"space-y-3",children:d.jsx("table",{className:"min-w-full border rounded-lg border-gray-300",children:d.jsxs("tbody",{children:[de.map((F,J)=>d.jsx("tr",{className:"rounded-lg",children:d.jsx("td",{className:"border border-gray-300 p-3 rounded-lg",children:d.jsxs("label",{className:"flex items-center space-x-3",children:[d.jsx("input",{type:"radio",name:"reason",value:F,checked:j===F,onChange:ue=>W(ue.target.value),className:"w-4 h-4"}),d.jsx("span",{className:"text-white",children:F})]})})},J)),j==="Other reasons"&&d.jsx("textarea",{placeholder:"Please specify your reason",value:ce,onChange:F=>Z(F.target.value),className:"w-full mt-2 p-6 focus:ring-2 focus:ring-orange-700"})]})})}),d.jsx("br",{}),d.jsx("br",{}),d.jsxs("div",{className:"mb-4",children:[d.jsxs("div",{className:"flex justify-between mb-2",children:[d.jsx("button",{type:"button",onClick:C,className:"text-white font-medium py-2 px-4 rounded-lg hover:border-orange-600 focus:outline-none focus:ring-2 focus:ring-orange-700",children:d.jsx(YI,{size:30})}),d.jsxs("p",{className:"text-white font-medium",children:[o.toLocaleString("default",{month:"long"})," ",o.getFullYear()]}),d.jsx("button",{type:"button",onClick:P,className:"text-white font-medium py-2 px-4 rounded-lg hover:border-orange-600 focus:outline-none focus:ring-2 focus:ring-orange-700",children:d.jsx(JI,{size:30})})]}),d.jsx("div",{className:"grid grid-cols-7 gap-2 text-center",children:I().map((F,J)=>d.jsx("div",{className:`py-2 px-4 rounded-lg cursor-pointer ${B(F)}`,onClick:()=>F&&O(F),children:F?F.getDate():""},J))})]}),d.jsx("br",{}),d.jsx("br",{}),d.jsx("br",{}),d.jsxs("div",{className:"mb-4",children:[d.jsx("h3",{className:"text-white font-medium mb-4",children:"These are the available time slots:"}),"            ",d.jsx("div",{className:"grid grid-cols-3 gap-4",children:M.map(F=>d.jsxs("button",{type:"button",onClick:()=>D(F.start,F.end),className:`w-full py-2 text-white rounded-lg border ${r.time===`${F.start} - ${F.end}`?"bg-orange-900":"bg-gray-800"}`,children:[F.start," - ",F.end]},F.id))})]}),d.jsx("br",{})," ",d.jsx("br",{}),d.jsxs("div",{className:"text-center flex justify-between",children:[d.jsx("button",{onClick:f,className:"px-6 py-2 border-2 border-orange-700 text-white rounded-lg hover:bg-gray-500",children:"Go back"}),d.jsx("button",{type:"submit",className:"px-6 py-2 border-2 border-orange-700 text-white rounded-lg hover:bg-gray-500",children:"Confirm"})]})]})})]})},npe=Bt(tpe);class xy{constructor(e=0,t="Network Error"){this.status=e,this.text=t}}const ipe=()=>{if(!(typeof localStorage>"u"))return{get:n=>Promise.resolve(localStorage.getItem(n)),set:(n,e)=>Promise.resolve(localStorage.setItem(n,e)),remove:n=>Promise.resolve(localStorage.removeItem(n))}},dr={origin:"https://api.emailjs.com",blockHeadless:!1,storageProvider:ipe()},QI=n=>n?typeof n=="string"?{publicKey:n}:n.toString()==="[object Object]"?n:{}:{},rpe=(n,e="https://api.emailjs.com")=>{if(!n)return;const t=QI(n);dr.publicKey=t.publicKey,dr.blockHeadless=t.blockHeadless,dr.storageProvider=t.storageProvider,dr.blockList=t.blockList,dr.limitRate=t.limitRate,dr.origin=t.origin||e},U6=async(n,e,t={})=>{const i=await fetch(dr.origin+n,{method:"POST",headers:t,body:e}),r=await i.text(),s=new xy(i.status,r);if(i.ok)return s;throw s},F6=(n,e,t)=>{if(!n||typeof n!="string")throw"The public key is required. Visit https://dashboard.emailjs.com/admin/account";if(!e||typeof e!="string")throw"The service ID is required. Visit https://dashboard.emailjs.com/admin";if(!t||typeof t!="string")throw"The template ID is required. Visit https://dashboard.emailjs.com/admin/templates"},spe=n=>{if(n&&n.toString()!=="[object Object]")throw"The template params have to be the object. Visit https://www.emailjs.com/docs/sdk/send/"},j6=n=>n.webdriver||!n.languages||n.languages.length===0,V6=()=>new xy(451,"Unavailable For Headless Browser"),ope=(n,e)=>{if(!Array.isArray(n))throw"The BlockList list has to be an array";if(typeof e!="string")throw"The BlockList watchVariable has to be a string"},ape=n=>!n.list?.length||!n.watchVariable,lpe=(n,e)=>n instanceof FormData?n.get(e):n[e],B6=(n,e)=>{if(ape(n))return!1;ope(n.list,n.watchVariable);const t=lpe(e,n.watchVariable);return typeof t!="string"?!1:n.list.includes(t)},z6=()=>new xy(403,"Forbidden"),cpe=(n,e)=>{if(typeof n!="number"||n<0)throw"The LimitRate throttle has to be a positive number";if(e&&typeof e!="string")throw"The LimitRate ID has to be a non-empty string"},upe=async(n,e,t)=>{const i=Number(await t.get(n)||0);return e-Date.now()+i},H6=async(n,e,t)=>{if(!e.throttle||!t)return!1;cpe(e.throttle,e.id);const i=e.id||n;return await upe(i,e.throttle,t)>0?!0:(await t.set(i,Date.now().toString()),!1)},G6=()=>new xy(429,"Too Many Requests"),hpe=async(n,e,t,i)=>{const r=QI(i),s=r.publicKey||dr.publicKey,o=r.blockHeadless||dr.blockHeadless,a=r.storageProvider||dr.storageProvider,l={...dr.blockList,...r.blockList},c={...dr.limitRate,...r.limitRate};return o&&j6(navigator)?Promise.reject(V6()):(F6(s,n,e),spe(t),t&&B6(l,t)?Promise.reject(z6()):await H6(location.pathname,c,a)?Promise.reject(G6()):U6("/api/v1.0/email/send",JSON.stringify({lib_version:"4.4.1",user_id:s,service_id:n,template_id:e,template_params:t}),{"Content-type":"application/json"}))},dpe=n=>{if(!n||n.nodeName!=="FORM")throw"The 3rd parameter is expected to be the HTML form element or the style selector of the form"},fpe=n=>typeof n=="string"?document.querySelector(n):n,ppe=async(n,e,t,i)=>{const r=QI(i),s=r.publicKey||dr.publicKey,o=r.blockHeadless||dr.blockHeadless,a=dr.storageProvider||r.storageProvider,l={...dr.blockList,...r.blockList},c={...dr.limitRate,...r.limitRate};if(o&&j6(navigator))return Promise.reject(V6());const u=fpe(t);F6(s,n,e),dpe(u);const f=new FormData(u);return B6(l,f)?Promise.reject(z6()):await H6(location.pathname,c,a)?Promise.reject(G6()):(f.append("lib_version","4.4.1"),f.append("service_id",n),f.append("template_id",e),f.append("user_id",s),U6("/api/v1.0/email/send-form",f))},ZI={init:rpe,send:hpe,sendForm:ppe,EmailJSResponseStatus:xy},W6=({formData:n,isOpen:e,onClose:t})=>{const i=qt();if(!e)return null;const r=()=>{t(),i("/lawyer-status")};return d.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex justify-center items-center",children:d.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6 w-96",children:[d.jsx("h2",{className:"text-xl font-semibold mb-4 text-center text-orange-700",children:"Appointment Confirmed!"}),d.jsxs("p",{className:"text-gray-700 text-center",children:["You have successfully booked an appointment in"," ",d.jsx("strong",{children:"Magalgalit Law Office"}),", Baguio City on"," ",d.jsx("strong",{children:n.date})," at ",d.jsx("strong",{children:n.time}),"."]}),d.jsx("div",{className:"mt-6 flex justify-center",children:d.jsx("button",{onClick:r,className:"px-4 py-2 border-2 border-orange-700 text-black rounded hover:bg-gray-500 transition",children:"Close"})})]})})};W6.propTypes={formData:ct.shape({date:ct.string.isRequired,time:ct.string.isRequired}).isRequired,isOpen:ct.bool.isRequired,onClose:ct.func.isRequired};const q6=()=>{const[n,e]=V.useState(!1),t=qt(),r=Fo().state?.formData,s=()=>{t("/appointmentTableLawyer1")},o=async()=>{if(!r){alert("No appointment details found.");return}try{const l=fo(Jo,"appointments",`${r.email}_${r.date}_${r.time}`);await Sb(l,{firstName:r.firstName,middleName:r.middleName||"",lastName:r.lastName,email:r.email,date:r.date,time:r.time,reasons:r.reasons||"No reason selected",lawyer:{name:Or[0].name,title:Or[0].title,address:"Insular Life Building, Legarda Street, corner Abanao extension, Baguio, 2660 Benguet"},timestamp:new Date}),await ZI.send("service_f8p4u88","template_rtaqjfs",{from_name:`${r.firstName} ${r.lastName}`,to_name:"Siabell",from_email:r.email,message:`Appointment confirmed for ${r.firstName} ${r.lastName} on ${r.date} at ${r.time}.`},"Z-JlpUZqWVtTdl2mp"),e(!0)}catch(l){console.error("Error saving appointment or sending email:",l),alert("Something went wrong, please try again.")}},a=()=>{e(!1)};return r?d.jsxs("div",{className:"container mx-auto p-6",children:[d.jsx("p",{className:q.paragraphSubText,children:"Appointment"}),d.jsx("h2",{className:`${q.headText} highlight-border`,children:d.jsx("span",{className:"title-with-line",children:"Confirmation"})}),d.jsx("p",{className:q.paragraphSubTextLower,children:"Please review the details of your appointment. Keep in mind that this appointment is non-transferable."}),d.jsx("div",{className:"mt-6 mb-6",children:d.jsx("table",{className:"min-w-full table-auto border-collapse border border-gray-300",children:d.jsxs("tbody",{children:[d.jsxs("tr",{children:[d.jsx("td",{className:"w-1/3 px-4 py-3 text-right border border-gray-300 font-semibold",children:"First Name"}),d.jsx("td",{className:"w-2/3 px-4 py-3 border border-gray-300",children:r.firstName})]}),d.jsxs("tr",{children:[d.jsx("td",{className:"w-1/3 px-4 py-3 text-right border border-gray-300 font-semibold",children:"Middle Name"}),d.jsx("td",{className:"w-2/3 px-4 py-3 border border-gray-300",children:r.middleName||"N/A"})]}),d.jsxs("tr",{children:[d.jsx("td",{className:"w-1/3 px-4 py-3 text-right border border-gray-300 font-semibold",children:"Last Name"}),d.jsx("td",{className:"w-2/3 px-4 py-3 border border-gray-300",children:r.lastName})]}),d.jsxs("tr",{children:[d.jsx("td",{className:"w-1/3 px-4 py-3 text-right border border-gray-300 font-semibold",children:"Date of Appointment"}),d.jsx("td",{className:"w-2/3 px-4 py-3 border border-gray-300",children:r.date})]}),d.jsxs("tr",{children:[d.jsx("td",{className:"w-1/3 px-4 py-3 text-right border border-gray-300 font-semibold",children:"Time of Appointment"}),d.jsx("td",{className:"w-2/3 px-4 py-3 border border-gray-300",children:r.time})]}),d.jsxs("tr",{children:[d.jsx("td",{className:"w-1/3 px-4 py-3 text-right border border-gray-300 font-semibold",children:"Selected Reason"}),d.jsx("td",{className:"w-2/3 px-4 py-3 border border-gray-300",children:r.reasons||"No reason selected"})]})]})})}),d.jsx("br",{}),d.jsx("p",{className:q.paragraphSubText,children:"Contact Information"}),d.jsx("div",{className:"mt-6 mb-6",children:d.jsx("table",{className:"min-w-full table-auto border-collapse border border-gray-300",children:d.jsx("tbody",{children:d.jsxs("tr",{children:[d.jsx("td",{className:"w-1/3 px-4 py-3 text-right border border-gray-300 font-semibold",children:"Email"}),d.jsx("td",{className:"w-2/3 px-4 py-3 border border-gray-300",children:r.email})]})})})}),d.jsx("br",{}),d.jsx("p",{className:q.paragraphSubText,children:"You've got an appointment with an attorney"}),d.jsx("div",{className:"mt-6 mb-6",children:d.jsx("table",{className:"min-w-full table-auto border-collapse border border-gray-300",children:d.jsxs("tbody",{children:[d.jsxs("tr",{children:[d.jsx("td",{className:"w-1/3 px-4 py-3 text-right border border-gray-300 font-semibold",children:"Name"}),d.jsx("td",{className:"w-2/3 px-4 py-3 border border-gray-300",children:Or[0].name})]}),d.jsxs("tr",{children:[d.jsx("td",{className:"w-1/3 px-4 py-3 text-right border border-gray-300 font-semibold",children:"Title"}),d.jsxs("td",{className:"w-2/3 px-4 py-3 border border-gray-300",children:["Attorney at Law specializing in ",Or[0].title]})]}),d.jsxs("tr",{children:[d.jsx("td",{className:"w-1/3 px-4 py-3 text-right border border-gray-300 font-semibold",children:"Address"}),d.jsx("td",{className:"w-2/3 px-4 py-3 border border-gray-300",children:"Insular Life Building, Legarda Street, corner Abanao extension, Baguio, 2660 Benguet"})]})]})})}),d.jsxs("div",{className:"mt-10 text-center flex justify-between",children:[d.jsx("button",{onClick:s,className:"px-6 py-2 border-2 border-orange-700 text-white rounded-lg hover:bg-gray-500",children:"Go back"}),d.jsx("button",{onClick:o,className:"px-6 py-2 border-2 border-orange-700 hover:bg-slate-700 text-white rounded-lg text-sm font-semibold flex items-center",children:"Confirm"})]}),d.jsx(W6,{formData:r,isOpen:n,onClose:a})]}):d.jsx("div",{className:"text-center mt-10",children:d.jsx("p",{className:"text-white text-lg",children:"No appointment details found."})})};q6.propTypes={formData:ct.shape({firstName:ct.string.isRequired,middleName:ct.string,lastName:ct.string.isRequired,date:ct.string.isRequired,time:ct.string.isRequired,email:ct.string.isRequired})};const mpe=Bt(q6),gpe=()=>{const n=qt(),[e,t]=V.useState(!1);return d.jsxs("div",{children:[d.jsx("p",{className:q.paragraphSubText,children:"Instructions for booking an Appointment with"}),d.jsx("h2",{className:`${q.headText} highlight-border`,children:d.jsxs("span",{className:"title-with-line",children:[" ",Or[1].nickname]})}),d.jsx("table",{className:"mt-5 w-full border-collapse border border-gray-200",children:d.jsxs("tbody",{children:[d.jsx("tr",{children:d.jsxs("td",{className:`${q.appointmentSubTextLower} border border-gray-300 p-3`,children:["1. Securing an appointment is ",d.jsx("b",{children:"FREE OF CHARGE"})," and Appointment Slip is ",d.jsx("b",{children:"NON-TRANSFERABLE"}),"."]})}),d.jsx("tr",{children:d.jsx("td",{className:`${q.appointmentSubTextLower} border border-gray-300 p-3`,children:"2. The appointment must be named after the requester who will personally apply at the Magalgalit Law Office."})}),d.jsx("tr",{children:d.jsx("td",{className:`${q.appointmentSubTextLower} border border-gray-300 p-3`,children:"3. Be at the Magalgalit Law Office at least fifteen minutes before the appointment schedule."})}),d.jsx("tr",{children:d.jsx("td",{className:`${q.appointmentSubTextLower} border border-gray-300 p-3`,children:d.jsxs("label",{children:[d.jsx("input",{type:"checkbox",checked:e,onChange:i=>t(i.target.checked),className:"mr-2"}),"I agree to the collection and use of the data that I will provide through this form for the purpose of booking an appointment. I understand that the collection and use of this data, which may include personal and sensitive personal information, shall be in accordance with the Data Privacy Act of 2021."]})})})]})}),d.jsxs("div",{className:"flex justify-between mt-10",children:[d.jsx("button",{type:"button",onClick:()=>n("/lawyer-status"),className:"px-6 py-2 border-2 border-orange-700 text-white rounded-lg hover:bg-gray-500",children:"Back"}),d.jsx("div",{className:"w-1/4"}),d.jsx(Us,{to:e?"/appointmentTableLawyer2":"#",className:`px-6 py-2 border-2 border-orange-500 text-white rounded-lg text-sm font-semibold flex items-center ${e?"hover:bg-slate-700":"bg-gray-500 cursor-not-allowed"}`,onClick:i=>{e||i.preventDefault()},children:"Next"})]})]})},ype=Bt(gpe),vpe=()=>{const n=qt(),{state:e}=Fo(),{name:t,email:i}=e||{},[r,s]=V.useState({firstName:"",middleName:"",lastName:"",email:"",date:"",time:""}),[o,a]=V.useState(new Date),[l,c]=V.useState(null),u=["2024-12-24","2024-12-25","2024-12-30","2025-01-01","2025-04-09","2025-04-17","2025-04-19","2025-05-01","2025-06-12","2025-08-21","2025-08-25","2025-11-01","2025-11-30","2025-12-08","2025-12-24","2025-12-25","2025-12-30","2025-12-31"];V.useEffect(()=>{const F=pc(),J=bc(),ue=dy(F,async ye=>{if(ye){const le=fo(J,"users",ye.uid),xe=await Hf(le);if(xe.exists()){const Pe=xe.data();s(Me=>({...Me,firstName:Pe.firstName||"",middleName:Pe.middleName||"",lastName:Pe.lastName||"",email:Pe.email||ye.email}))}}});return()=>ue()},[]);const f=()=>{n("/appointmentLawyer2")},m=(F,J)=>{s(ue=>({...ue,[F]:J}))},g=()=>!r.firstName||!r.lastName||!r.email?(alert("Please fill in all required fields!"),!1):!r.date||!r.time?(alert("Please select a valid date and time slot!"),!1):!0,x=F=>{F.preventDefault(),g()&&n("/appointmentResultLawyer2",{state:{formData:r}})},b=F=>F<new Date().setHours(0,0,0,0),w=F=>u.includes(U(F)),v=F=>!b(F)&&F.getDay()!==0&&F.getDay()!==6&&!w(F),S=F=>new Date(F.getFullYear(),F.getMonth(),1).getDay(),E=F=>new Date(F.getFullYear(),F.getMonth()+1,0).getDate(),I=()=>{const F=S(o),J=E(o),ue=[];for(let ye=0;ye<F;ye++)ue.push(null);for(let ye=1;ye<=J;ye++){const le=new Date(o.getFullYear(),o.getMonth(),ye);ue.push(le)}return ue},U=F=>{const J=F.getFullYear(),ue=String(F.getMonth()+1).padStart(2,"0"),ye=String(F.getDate()).padStart(2,"0");return`${J}-${ue}-${ye}`},O=F=>{v(F)&&(c(F),s(J=>({...J,date:U(F),time:""})))},C=()=>{a(F=>{const J=new Date(F.getFullYear(),F.getMonth()-1,1);return J<new Date(2024,0,1)?F:J})},P=()=>{a(F=>new Date(F.getFullYear(),F.getMonth()+1,1))},M=[{id:1,start:"8:00 am",end:"9:00 am"},{id:2,start:"9:00 am",end:"10:00 am"},{id:3,start:"10:00 am",end:"11:00 am"}],A=F=>{const J=new Date,ue=new Date().setHours(0,0,0,0),[ye,le]=F.split(" ");let[xe,Pe]=ye.split(":").map(Number);return le==="pm"&&xe!==12?xe+=12:le==="am"&&xe===12&&(xe=0),new Date(ue).setHours(xe,Pe,0,0)<J},D=(F,J)=>{if(!(l&&l.toDateString()!==new Date().toDateString())){if(A(F))return}const ue=`${F} - ${J}`;s(ye=>({...ye,time:ye.time===ue?"":ue}))};M.forEach(F=>{console.log(`Time Slot: ${F.start} - Disabled: ${A(F.start)}`)});const B=F=>F?w(F)||F.getDay()===0||F.getDay()===6||b(F)?"bg-gray-800":l?.toDateString()===F?.toDateString()?"bg-orange-800":new Date().toDateString()===F.toDateString()?"border":"hover:bg-orange-900 cursor-pointer":"bg-dark",[j,te]=V.useState(""),[ce,pe]=V.useState(""),de=["Legal consultation for personal matters","Business-related legal advice","Assistance with document preparation","Representation in a court case","Other reasons"],W=F=>{te(F),s(J=>({...J,reasons:F==="Other reasons"?ce:F}))},Z=F=>{pe(F),j==="Other reasons"&&s(J=>({...J,reasons:F}))};return d.jsxs(d.Fragment,{children:[d.jsx("p",{className:q.paragraphSubText,children:"Schedule a"}),d.jsx("h2",{className:`${q.headText} highlight-border`,children:d.jsx("span",{className:"title-with-line",children:"Consultation"})}),d.jsx("div",{className:"p-6 border-2 border-orange-700 shadow-lg rounded-lg mt-10",children:d.jsxs("form",{onSubmit:x,children:[d.jsxs("div",{className:"flex space-x-4 mb-4",children:[d.jsxs("div",{className:"w-1/3",children:[d.jsx("label",{className:"block text-white font-medium mb-2",htmlFor:"firstName",children:"First Name"}),d.jsx("input",{type:"text",id:"firstName",name:"firstName",value:r.firstName,onChange:F=>m("firstName",F.target.value),className:"w-full px-4 py-2 border border-gray-300 text-white rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-700",placeholder:"First name",required:!0})]}),d.jsxs("div",{className:"w-1/3",children:[d.jsx("label",{className:"block text-white font-medium mb-2",htmlFor:"middleName",children:"Middle Name"}),d.jsx("input",{type:"text",id:"middleName",name:"middleName",value:r.middleName,onChange:F=>m("middleName",F.target.value),className:"w-full px-4 py-2 border border-gray-300 text-white rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-700",placeholder:"Middle name"})]}),d.jsxs("div",{className:"w-1/3",children:[d.jsx("label",{className:"block text-white font-medium mb-2",htmlFor:"lastName",children:"Last Name"}),d.jsx("input",{type:"text",id:"lastName",name:"lastName",value:r.lastName,onChange:F=>m("lastName",F.target.value),className:"w-full px-4 py-2 border border-gray-300 text-white rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-700",placeholder:"Last name",required:!0})]})]}),d.jsxs("div",{className:"w-full mb-4",children:[d.jsx("label",{className:"text-white font-medium mb-2",htmlFor:"email",children:"Email"}),d.jsx("input",{type:"email",id:"email",name:"email",value:r.email,onChange:F=>m("email",F.target.value),className:"w-full px-4 py-2 border border-gray-300 text-white rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-700",placeholder:"sample@gmail.com",required:!0})]}),d.jsx("br",{}),d.jsx("label",{className:"text-white font-medium mb-2",htmlFor:"reason",children:"Select a Reason"}),d.jsx("div",{className:"space-y-3",children:d.jsx("table",{className:"min-w-full border rounded-lg border-gray-300",children:d.jsxs("tbody",{children:[de.map((F,J)=>d.jsx("tr",{className:"rounded-lg",children:d.jsx("td",{className:"border border-gray-300 p-3 rounded-lg",children:d.jsxs("label",{className:"flex items-center space-x-3",children:[d.jsx("input",{type:"radio",name:"reason",value:F,checked:j===F,onChange:ue=>W(ue.target.value),className:"w-4 h-4"}),d.jsx("span",{className:"text-white",children:F})]})})},J)),j==="Other reasons"&&d.jsx("textarea",{placeholder:"Please specify your reason",value:ce,onChange:F=>Z(F.target.value),className:"w-full mt-2 p-6 focus:ring-2 focus:ring-orange-700"})]})})}),d.jsx("br",{}),d.jsx("br",{}),d.jsxs("div",{className:"mb-4",children:[d.jsxs("div",{className:"flex justify-between mb-2",children:[d.jsx("button",{type:"button",onClick:C,className:"text-white font-medium py-2 px-4 rounded-lg hover:border-orange-600 focus:outline-none focus:ring-2 focus:ring-orange-700",children:d.jsx(YI,{size:30})}),d.jsxs("p",{className:"text-white font-medium",children:[o.toLocaleString("default",{month:"long"})," ",o.getFullYear()]}),d.jsx("button",{type:"button",onClick:P,className:"text-white font-medium py-2 px-4 rounded-lg hover:border-orange-600 focus:outline-none focus:ring-2 focus:ring-orange-700",children:d.jsx(JI,{size:30})})]}),d.jsx("div",{className:"grid grid-cols-7 gap-2 text-center",children:I().map((F,J)=>d.jsx("div",{className:`py-2 px-4 rounded-lg cursor-pointer ${B(F)}`,onClick:()=>F&&O(F),children:F?F.getDate():""},J))})]}),d.jsx("br",{}),d.jsx("br",{}),d.jsx("br",{}),d.jsxs("div",{className:"mb-4",children:[d.jsx("h3",{className:"text-white font-medium mb-4",children:"These are the available time slots:"}),d.jsx("div",{className:"grid grid-cols-3 gap-4",children:M.map(F=>d.jsxs("button",{type:"button",onClick:()=>D(F.start,F.end),className:`w-full py-2 text-white rounded-lg border ${r.time===`${F.start} - ${F.end}`?"bg-orange-900":"bg-gray-800"}`,children:[F.start," - ",F.end]},F.id))})]}),d.jsx("br",{})," ",d.jsx("br",{}),d.jsxs("div",{className:"text-center flex justify-between",children:[d.jsx("button",{onClick:f,className:"px-6 py-2 border-2 border-orange-700 text-white rounded-lg hover:bg-gray-500",children:"Go back"}),d.jsx("button",{type:"submit",className:"px-6 py-2 border-2 border-orange-700 text-white rounded-lg hover:bg-gray-500",children:"Confirm"})]})]})})]})},xpe=Bt(vpe),$6=({formData:n,isOpen:e,onClose:t})=>{const i=qt();if(!e)return null;const r=()=>{t(),i("/lawyer-status")};return d.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex justify-center items-center",children:d.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6 w-96",children:[d.jsx("h2",{className:"text-xl font-semibold mb-4 text-center text-orange-700",children:"Appointment Confirmed!"}),d.jsxs("p",{className:"text-gray-700 text-center",children:["You have successfully booked an appointment in"," ",d.jsx("strong",{children:"Magalgalit Law Office"}),", Baguio City on"," ",d.jsx("strong",{children:n.date})," at ",d.jsx("strong",{children:n.time}),"."]}),d.jsx("div",{className:"mt-6 flex justify-center",children:d.jsx("button",{onClick:r,className:"px-4 py-2 border-2 border-orange-700 text-black rounded hover:bg-gray-500 transition",children:"Close"})})]})})};$6.propTypes={formData:ct.shape({date:ct.string.isRequired,time:ct.string.isRequired}).isRequired,isOpen:ct.bool.isRequired,onClose:ct.func.isRequired};const X6=()=>{const[n,e]=V.useState(!1),t=qt(),r=Fo().state?.formData,s=()=>{t("/appointmentTableLawyer2")},o=async()=>{if(!r){alert("No appointment details found.");return}try{const l=fo(Jo,"appointments",`${r.email}_${r.date}_${r.time}`);await Sb(l,{firstName:r.firstName,middleName:r.middleName||"",lastName:r.lastName,email:r.email,date:r.date,time:r.time,reasons:r.reasons||"No reason selected",lawyer:{name:Or[1].name,title:Or[2].title,address:"Insular Life Building, Legarda Street, corner Abanao extension, Baguio, 2660 Benguet"},timestamp:new Date}),await ZI.send("service_f8p4u88","template_rtaqjfs",{from_name:`${r.firstName} ${r.lastName}`,to_name:"Siabell",from_email:r.email,message:`Appointment confirmed for ${r.firstName} ${r.lastName} on ${r.date} at ${r.time}.`},"Z-JlpUZqWVtTdl2mp"),e(!0)}catch(l){console.error("Error saving appointment or sending email:",l),alert("Something went wrong, please try again.")}},a=()=>{e(!1)};return r?d.jsxs("div",{className:"container mx-auto p-6",children:[d.jsx("p",{className:q.paragraphSubText,children:"Appointment"}),d.jsx("h2",{className:`${q.headText} highlight-border`,children:d.jsx("span",{className:"title-with-line",children:"Confirmation"})}),d.jsx("p",{className:q.paragraphSubTextLower,children:"Please review the details of your appointment. Keep in mind that this appointment is non-transferable."}),d.jsx("div",{className:"mt-6 mb-6",children:d.jsx("table",{className:"min-w-full table-auto border-collapse border border-gray-300",children:d.jsxs("tbody",{children:[d.jsxs("tr",{children:[d.jsx("td",{className:"w-1/3 px-4 py-3 text-right border border-gray-300 font-semibold",children:"First Name"}),d.jsx("td",{className:"w-2/3 px-4 py-3 border border-gray-300",children:r.firstName})]}),d.jsxs("tr",{children:[d.jsx("td",{className:"w-1/3 px-4 py-3 text-right border border-gray-300 font-semibold",children:"Middle Name"}),d.jsx("td",{className:"w-2/3 px-4 py-3 border border-gray-300",children:r.middleName||"N/A"})]}),d.jsxs("tr",{children:[d.jsx("td",{className:"w-1/3 px-4 py-3 text-right border border-gray-300 font-semibold",children:"Last Name"}),d.jsx("td",{className:"w-2/3 px-4 py-3 border border-gray-300",children:r.lastName})]}),d.jsxs("tr",{children:[d.jsx("td",{className:"w-1/3 px-4 py-3 text-right border border-gray-300 font-semibold",children:"Date of Appointment"}),d.jsx("td",{className:"w-2/3 px-4 py-3 border border-gray-300",children:r.date})]}),d.jsxs("tr",{children:[d.jsx("td",{className:"w-1/3 px-4 py-3 text-right border border-gray-300 font-semibold",children:"Time of Appointment"}),d.jsx("td",{className:"w-2/3 px-4 py-3 border border-gray-300",children:r.time})]}),d.jsxs("tr",{children:[d.jsx("td",{className:"w-1/3 px-4 py-3 text-right border border-gray-300 font-semibold",children:"Selected Reason"}),d.jsx("td",{className:"w-2/3 px-4 py-3 border border-gray-300",children:r.reasons||"No reason selected"})]})]})})}),d.jsx("br",{}),d.jsx("p",{className:q.paragraphSubText,children:"Contact Information"}),d.jsx("div",{className:"mt-6 mb-6",children:d.jsx("table",{className:"min-w-full table-auto border-collapse border border-gray-300",children:d.jsx("tbody",{children:d.jsxs("tr",{children:[d.jsx("td",{className:"w-1/3 px-4 py-3 text-right border border-gray-300 font-semibold",children:"Email"}),d.jsx("td",{className:"w-2/3 px-4 py-3 border border-gray-300",children:r.email})]})})})}),d.jsx("br",{}),d.jsx("p",{className:q.paragraphSubText,children:"You've got an appointment with an attorney"}),d.jsx("div",{className:"mt-6 mb-6",children:d.jsx("table",{className:"min-w-full table-auto border-collapse border border-gray-300",children:d.jsxs("tbody",{children:[d.jsxs("tr",{children:[d.jsx("td",{className:"w-1/3 px-4 py-3 text-right border border-gray-300 font-semibold",children:"Name"}),d.jsx("td",{className:"w-2/3 px-4 py-3 border border-gray-300",children:Or[1].name})]}),d.jsxs("tr",{children:[d.jsx("td",{className:"w-1/3 px-4 py-3 text-right border border-gray-300 font-semibold",children:"Title"}),d.jsxs("td",{className:"w-2/3 px-4 py-3 border border-gray-300",children:["Attorney at Law specializing in ",Or[1].title]})]}),d.jsxs("tr",{children:[d.jsx("td",{className:"w-1/3 px-4 py-3 text-right border border-gray-300 font-semibold",children:"Address"}),d.jsx("td",{className:"w-2/3 px-4 py-3 border border-gray-300",children:"Insular Life Building, Legarda Street, corner Abanao extension, Baguio, 2660 Benguet"})]})]})})}),d.jsxs("div",{className:"mt-10 text-center flex justify-between",children:[d.jsx("button",{onClick:s,className:"px-6 py-2 border-2 border-orange-700 text-white rounded-lg hover:bg-gray-500",children:"Go back"}),d.jsx("button",{onClick:o,className:"px-6 py-2 border-2 border-orange-700 hover:bg-slate-700 text-white rounded-lg text-sm font-semibold flex items-center",children:"Confirm"})]}),d.jsx($6,{formData:r,isOpen:n,onClose:a})]}):d.jsx("div",{className:"text-center mt-10",children:d.jsx("p",{className:"text-white text-lg",children:"No appointment details found."})})};X6.propTypes={formData:ct.shape({firstName:ct.string.isRequired,middleName:ct.string,lastName:ct.string.isRequired,date:ct.string.isRequired,time:ct.string.isRequired,email:ct.string.isRequired})};const _pe=Bt(X6),wpe=()=>{const n=qt(),[e,t]=V.useState(!1);return d.jsxs("div",{children:[d.jsx("p",{className:q.paragraphSubText,children:"Instructions for booking an Appointment with"}),d.jsx("h2",{className:`${q.headText} highlight-border`,children:d.jsxs("span",{className:"title-with-line",children:[" ",Or[2].nickname]})}),d.jsx("table",{className:"mt-5 w-full border-collapse border border-gray-200",children:d.jsxs("tbody",{children:[d.jsx("tr",{children:d.jsxs("td",{className:`${q.appointmentSubTextLower} border border-gray-300 p-3`,children:["1. Securing an appointment is ",d.jsx("b",{children:"FREE OF CHARGE"})," and Appointment Slip is ",d.jsx("b",{children:"NON-TRANSFERABLE"}),"."]})}),d.jsx("tr",{children:d.jsx("td",{className:`${q.appointmentSubTextLower} border border-gray-300 p-3`,children:"2. The appointment must be named after the requester who will personally apply at the Magalgalit Law Office."})}),d.jsx("tr",{children:d.jsx("td",{className:`${q.appointmentSubTextLower} border border-gray-300 p-3`,children:"3. Be at the Magalgalit Law Office at least fifteen minutes before the appointment schedule."})}),d.jsx("tr",{children:d.jsx("td",{className:`${q.appointmentSubTextLower} border border-gray-300 p-3`,children:d.jsxs("label",{children:[d.jsx("input",{type:"checkbox",checked:e,onChange:i=>t(i.target.checked),className:"mr-2"}),"I agree to the collection and use of the data that I will provide through this form for the purpose of booking an appointment. I understand that the collection and use of this data, which may include personal and sensitive personal information, shall be in accordance with the Data Privacy Act of 2021."]})})})]})}),d.jsxs("div",{className:"flex justify-between mt-10",children:[d.jsx("button",{type:"button",onClick:()=>n("/lawyer-status"),className:"px-6 py-2 border-2 border-orange-700 text-white rounded-lg hover:bg-gray-500",children:"Back"}),d.jsx("div",{className:"w-1/4"}),d.jsx(Us,{to:e?"/appointmentTableLawyer3":"#",className:`px-6 py-2 border-2 border-orange-500 text-white rounded-lg text-sm font-semibold flex items-center ${e?"hover:bg-slate-700":"bg-gray-500 cursor-not-allowed"}`,onClick:i=>{e||i.preventDefault()},children:"Next"})]})]})},bpe=Bt(wpe),Spe=()=>{const n=qt(),{state:e}=Fo(),{name:t,email:i}=e||{},[r,s]=V.useState({firstName:"",middleName:"",lastName:"",email:"",date:"",time:""}),[o,a]=V.useState(new Date),[l,c]=V.useState(null),u=["2024-12-24","2024-12-25","2024-12-30","2025-01-01","2025-04-09","2025-04-17","2025-04-19","2025-05-01","2025-06-12","2025-08-21","2025-08-25","2025-11-01","2025-11-30","2025-12-08","2025-12-24","2025-12-25","2025-12-30","2025-12-31"];V.useEffect(()=>{const F=pc(),J=bc(),ue=dy(F,async ye=>{if(ye){const le=fo(J,"users",ye.uid),xe=await Hf(le);if(xe.exists()){const Pe=xe.data();s(Me=>({...Me,firstName:Pe.firstName||"",middleName:Pe.middleName||"",lastName:Pe.lastName||"",email:Pe.email||ye.email}))}}});return()=>ue()},[]);const f=()=>{n("/appointmentLawyer2")},m=(F,J)=>{s(ue=>({...ue,[F]:J}))},g=()=>!r.firstName||!r.lastName||!r.email?(alert("Please fill in all required fields!"),!1):!r.date||!r.time?(alert("Please select a valid date and time slot!"),!1):!0,x=F=>{F.preventDefault(),g()&&n("/appointmentResultLawyer3",{state:{formData:r}})},b=F=>F<new Date().setHours(0,0,0,0),w=F=>u.includes(U(F)),v=F=>!b(F)&&F.getDay()!==0&&F.getDay()!==6&&!w(F),S=F=>new Date(F.getFullYear(),F.getMonth(),1).getDay(),E=F=>new Date(F.getFullYear(),F.getMonth()+1,0).getDate(),I=()=>{const F=S(o),J=E(o),ue=[];for(let ye=0;ye<F;ye++)ue.push(null);for(let ye=1;ye<=J;ye++){const le=new Date(o.getFullYear(),o.getMonth(),ye);ue.push(le)}return ue},U=F=>{const J=F.getFullYear(),ue=String(F.getMonth()+1).padStart(2,"0"),ye=String(F.getDate()).padStart(2,"0");return`${J}-${ue}-${ye}`},O=F=>{v(F)&&(c(F),s(J=>({...J,date:U(F),time:""})))},C=()=>{a(F=>{const J=new Date(F.getFullYear(),F.getMonth()-1,1);return J<new Date(2024,0,1)?F:J})},P=()=>{a(F=>new Date(F.getFullYear(),F.getMonth()+1,1))},M=[{id:1,start:"8:00 am",end:"9:00 am"},{id:2,start:"9:00 am",end:"10:00 am"},{id:3,start:"10:00 am",end:"11:00 am"}],A=F=>{const J=new Date,ue=new Date().setHours(0,0,0,0),[ye,le]=F.split(" ");let[xe,Pe]=ye.split(":").map(Number);return le==="pm"&&xe!==12?xe+=12:le==="am"&&xe===12&&(xe=0),new Date(ue).setHours(xe,Pe,0,0)<J},D=(F,J)=>{if(!(l&&l.toDateString()!==new Date().toDateString())){if(A(F))return}const ue=`${F} - ${J}`;s(ye=>({...ye,time:ye.time===ue?"":ue}))};M.forEach(F=>{console.log(`Time Slot: ${F.start} - Disabled: ${A(F.start)}`)});const B=F=>F?w(F)||F.getDay()===0||F.getDay()===6||b(F)?"bg-gray-800":l?.toDateString()===F?.toDateString()?"bg-orange-800":new Date().toDateString()===F.toDateString()?"border":"hover:bg-orange-900 cursor-pointer":"bg-dark",[j,te]=V.useState(""),[ce,pe]=V.useState(""),de=["Legal consultation for personal matters","Business-related legal advice","Assistance with document preparation","Representation in a court case","Other reasons"],W=F=>{te(F),s(J=>({...J,reasons:F==="Other reasons"?ce:F}))},Z=F=>{pe(F),j==="Other reasons"&&s(J=>({...J,reasons:F}))};return d.jsxs(d.Fragment,{children:[d.jsx("p",{className:q.paragraphSubText,children:"Schedule a"}),d.jsx("h2",{className:`${q.headText} highlight-border`,children:d.jsx("span",{className:"title-with-line",children:"Consultation"})}),d.jsx("div",{className:"p-6 border-2 border-orange-700 shadow-lg rounded-lg mt-10",children:d.jsxs("form",{onSubmit:x,children:[d.jsxs("div",{className:"flex space-x-4 mb-4",children:[d.jsxs("div",{className:"w-1/3",children:[d.jsx("label",{className:"block text-white font-medium mb-2",htmlFor:"firstName",children:"First Name"}),d.jsx("input",{type:"text",id:"firstName",name:"firstName",value:r.firstName,onChange:F=>m("firstName",F.target.value),className:"w-full px-4 py-2 border border-gray-300 text-white rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-700",placeholder:"First name",required:!0})]}),d.jsxs("div",{className:"w-1/3",children:[d.jsx("label",{className:"block text-white font-medium mb-2",htmlFor:"middleName",children:"Middle Name"}),d.jsx("input",{type:"text",id:"middleName",name:"middleName",value:r.middleName,onChange:F=>m("middleName",F.target.value),className:"w-full px-4 py-2 border border-gray-300 text-white rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-700",placeholder:"Middle name"})]}),d.jsxs("div",{className:"w-1/3",children:[d.jsx("label",{className:"block text-white font-medium mb-2",htmlFor:"lastName",children:"Last Name"}),d.jsx("input",{type:"text",id:"lastName",name:"lastName",value:r.lastName,onChange:F=>m("lastName",F.target.value),className:"w-full px-4 py-2 border border-gray-300 text-white rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-700",placeholder:"Last name",required:!0})]})]}),d.jsxs("div",{className:"w-full mb-4",children:[d.jsx("label",{className:"text-white font-medium mb-2",htmlFor:"email",children:"Email"}),d.jsx("input",{type:"email",id:"email",name:"email",value:r.email,onChange:F=>m("email",F.target.value),className:"w-full px-4 py-2 border border-gray-300 text-white rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-700",placeholder:"sample@gmail.com",required:!0})]}),d.jsx("br",{}),d.jsx("label",{className:"text-white font-medium mb-2",htmlFor:"reason",children:"Select a Reason"}),d.jsx("div",{className:"space-y-3",children:d.jsx("table",{className:"min-w-full border rounded-lg border-gray-300",children:d.jsxs("tbody",{children:[de.map((F,J)=>d.jsx("tr",{className:"rounded-lg",children:d.jsx("td",{className:"border border-gray-300 p-3 rounded-lg",children:d.jsxs("label",{className:"flex items-center space-x-3",children:[d.jsx("input",{type:"radio",name:"reason",value:F,checked:j===F,onChange:ue=>W(ue.target.value),className:"w-4 h-4"}),d.jsx("span",{className:"text-white",children:F})]})})},J)),j==="Other reasons"&&d.jsx("textarea",{placeholder:"Please specify your reason",value:ce,onChange:F=>Z(F.target.value),className:"w-full mt-2 p-6 focus:ring-2 focus:ring-orange-700"})]})})}),d.jsx("br",{}),d.jsx("br",{}),d.jsxs("div",{className:"mb-4",children:[d.jsxs("div",{className:"flex justify-between mb-2",children:[d.jsx("button",{type:"button",onClick:C,className:"text-white font-medium py-2 px-4 rounded-lg hover:border-orange-600 focus:outline-none focus:ring-2 focus:ring-orange-700",children:d.jsx(YI,{size:30})}),d.jsxs("p",{className:"text-white font-medium",children:[o.toLocaleString("default",{month:"long"})," ",o.getFullYear()]}),d.jsx("button",{type:"button",onClick:P,className:"text-white font-medium py-2 px-4 rounded-lg hover:border-orange-600 focus:outline-none focus:ring-2 focus:ring-orange-700",children:d.jsx(JI,{size:30})})]}),d.jsx("div",{className:"grid grid-cols-7 gap-2 text-center",children:I().map((F,J)=>d.jsx("div",{className:`py-2 px-4 rounded-lg cursor-pointer ${B(F)}`,onClick:()=>F&&O(F),children:F?F.getDate():""},J))})]}),d.jsx("br",{}),d.jsx("br",{}),d.jsxs("div",{className:"mb-4",children:[d.jsx("h3",{className:"text-white font-medium mb-4",children:"These are the available time slots:"}),d.jsx("div",{className:"grid grid-cols-3 gap-4",children:M.map(F=>d.jsxs("button",{type:"button",onClick:()=>D(F.start,F.end),className:`w-full py-2 text-white rounded-lg border ${r.time===`${F.start} - ${F.end}`?"bg-orange-900":"bg-gray-800"}`,children:[F.start," - ",F.end]},F.id))})]}),d.jsx("br",{})," ",d.jsx("br",{}),d.jsxs("div",{className:"text-center flex justify-between",children:[d.jsx("button",{onClick:f,className:"px-6 py-2 border-2 border-orange-700 text-white rounded-lg hover:bg-gray-500",children:"Go back"}),d.jsx("button",{type:"submit",className:"px-6 py-2 border-2 border-orange-700 text-white rounded-lg hover:bg-gray-500",children:"Confirm"})]})]})})]})},Tpe=Bt(Spe),K6=({formData:n,isOpen:e,onClose:t})=>{const i=qt();if(!e)return null;const r=()=>{t(),i("/lawyer-status")};return d.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex justify-center items-center",children:d.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6 w-96",children:[d.jsx("h2",{className:"text-xl font-semibold mb-4 text-center text-orange-700",children:"Appointment Confirmed!"}),d.jsxs("p",{className:"text-gray-700 text-center",children:["You have successfully booked an appointment in"," ",d.jsx("strong",{children:"Magalgalit Law Office"}),", Baguio City on"," ",d.jsx("strong",{children:n.date})," at ",d.jsx("strong",{children:n.time}),"."]}),d.jsx("div",{className:"mt-6 flex justify-center",children:d.jsx("button",{onClick:r,className:"px-4 py-2 border-2 border-orange-700 text-black rounded hover:bg-gray-500 transition",children:"Close"})})]})})};K6.propTypes={formData:ct.shape({date:ct.string.isRequired,time:ct.string.isRequired}).isRequired,isOpen:ct.bool.isRequired,onClose:ct.func.isRequired};const Y6=()=>{const[n,e]=V.useState(!1),t=qt(),r=Fo().state?.formData,s=()=>{t("/appointmentTableLawyer3")},o=async()=>{if(!r){alert("No appointment details found.");return}try{const l=fo(Jo,"appointments",`${r.email}_${r.date}_${r.time}`);await Sb(l,{firstName:r.firstName,middleName:r.middleName||"",lastName:r.lastName,email:r.email,date:r.date,time:r.time,reasons:r.reasons||"No reason selected",lawyer:{name:Or[2].name,title:Or[2].title,address:"Insular Life Building, Legarda Street, corner Abanao extension, Baguio, 2660 Benguet"},timestamp:new Date}),await ZI.send("service_f8p4u88","template_rtaqjfs",{from_name:`${r.firstName} ${r.lastName}`,to_name:"Siabell",from_email:r.email,message:`Appointment confirmed for ${r.firstName} ${r.lastName} on ${r.date} at ${r.time}.`},"Z-JlpUZqWVtTdl2mp"),e(!0)}catch(l){console.error("Error saving appointment or sending email:",l),alert("Something went wrong, please try again.")}},a=()=>{e(!1)};return r?d.jsxs("div",{className:"container mx-auto p-6",children:[d.jsx("p",{className:q.paragraphSubText,children:"Appointment"}),d.jsx("h2",{className:`${q.headText} highlight-border`,children:d.jsx("span",{className:"title-with-line",children:"Confirmation"})}),d.jsx("p",{className:q.paragraphSubTextLower,children:"Please review the details of your appointment. Keep in mind that this appointment is non-transferable."}),d.jsx("div",{className:"mt-6 mb-6",children:d.jsx("table",{className:"min-w-full table-auto border-collapse border border-gray-300",children:d.jsxs("tbody",{children:[d.jsxs("tr",{children:[d.jsx("td",{className:"w-1/3 px-4 py-3 text-right border border-gray-300 font-semibold",children:"First Name"}),d.jsx("td",{className:"w-2/3 px-4 py-3 border border-gray-300",children:r.firstName})]}),d.jsxs("tr",{children:[d.jsx("td",{className:"w-1/3 px-4 py-3 text-right border border-gray-300 font-semibold",children:"Middle Name"}),d.jsx("td",{className:"w-2/3 px-4 py-3 border border-gray-300",children:r.middleName||"N/A"})]}),d.jsxs("tr",{children:[d.jsx("td",{className:"w-1/3 px-4 py-3 text-right border border-gray-300 font-semibold",children:"Last Name"}),d.jsx("td",{className:"w-2/3 px-4 py-3 border border-gray-300",children:r.lastName})]}),d.jsxs("tr",{children:[d.jsx("td",{className:"w-1/3 px-4 py-3 text-right border border-gray-300 font-semibold",children:"Date of Appointment"}),d.jsx("td",{className:"w-2/3 px-4 py-3 border border-gray-300",children:r.date})]}),d.jsxs("tr",{children:[d.jsx("td",{className:"w-1/3 px-4 py-3 text-right border border-gray-300 font-semibold",children:"Time of Appointment"}),d.jsx("td",{className:"w-2/3 px-4 py-3 border border-gray-300",children:r.time})]}),d.jsxs("tr",{children:[d.jsx("td",{className:"w-1/3 px-4 py-3 text-right border border-gray-300 font-semibold",children:"Selected Reasons"}),d.jsx("td",{className:"w-2/3 px-4 py-3 border border-gray-300",children:r.reasons||"No reason selected"})]})]})})}),d.jsx("br",{}),d.jsx("p",{className:q.paragraphSubText,children:"Contact Information"}),d.jsx("div",{className:"mt-6 mb-6",children:d.jsx("table",{className:"min-w-full table-auto border-collapse border border-gray-300",children:d.jsx("tbody",{children:d.jsxs("tr",{children:[d.jsx("td",{className:"w-1/3 px-4 py-3 text-right border border-gray-300 font-semibold",children:"Email"}),d.jsx("td",{className:"w-2/3 px-4 py-3 border border-gray-300",children:r.email})]})})})}),d.jsx("br",{}),d.jsx("p",{className:q.paragraphSubText,children:"You've got an appointment with an attorney"}),d.jsx("div",{className:"mt-6 mb-6",children:d.jsx("table",{className:"min-w-full table-auto border-collapse border border-gray-300",children:d.jsxs("tbody",{children:[d.jsxs("tr",{children:[d.jsx("td",{className:"w-1/3 px-4 py-3 text-right border border-gray-300 font-semibold",children:"Name"}),d.jsx("td",{className:"w-2/3 px-4 py-3 border border-gray-300",children:Or[2].name})]}),d.jsxs("tr",{children:[d.jsx("td",{className:"w-1/3 px-4 py-3 text-right border border-gray-300 font-semibold",children:"Title"}),d.jsxs("td",{className:"w-2/3 px-4 py-3 border border-gray-300",children:["Attorney at Law specializing in ",Or[2].title]})]}),d.jsxs("tr",{children:[d.jsx("td",{className:"w-1/3 px-4 py-3 text-right border border-gray-300 font-semibold",children:"Address"}),d.jsx("td",{className:"w-2/3 px-4 py-3 border border-gray-300",children:"Insular Life Building, Legarda Street, corner Abanao extension, Baguio, 2660 Benguet"})]})]})})}),d.jsxs("div",{className:"mt-10 text-center flex justify-between",children:[d.jsx("button",{onClick:s,className:"px-6 py-2 border-2 border-orange-700 text-white rounded-lg hover:bg-gray-500",children:"Go back"}),d.jsx("button",{onClick:o,className:"px-6 py-2 border-2 border-orange-700 hover:bg-slate-700 text-white rounded-lg text-sm font-semibold flex items-center",children:"Confirm"})]}),d.jsx(K6,{formData:r,isOpen:n,onClose:a})]}):d.jsx("div",{className:"text-center mt-10",children:d.jsx("p",{className:"text-white text-lg",children:"No appointment details found."})})};Y6.propTypes={formData:ct.shape({firstName:ct.string.isRequired,middleName:ct.string,lastName:ct.string.isRequired,date:ct.string.isRequired,time:ct.string.isRequired,email:ct.string.isRequired})};const Epe=Bt(Y6),Cpe=()=>{const{selectedWord:n,definition:e,tooltipPosition:t,handleTextSelection:i}=Fn();return d.jsxs("div",{children:[d.jsx(Ln,{children:d.jsxs(Pn.div,{initial:"hidden",animate:"show",variants:Ei("top","spring",.5,1),id:"Constitution_ID",className:"p-8 min-h-screen text-center image-border-table",children:[d.jsxs(Pn.div,{variants:Ei("top","spring",.5,1),className:"mb-16",children:[d.jsx(Pn.p,{variants:Ei("top","spring",.5,1.5),onMouseUp:i,className:`${q.paragraphSubTextLower} text-white mb-2`,children:d.jsx("em",{children:"Republic of the Philippines"})}),d.jsx(Pn.p,{variants:Ei("top","spring",.5,2),onMouseUp:i,className:`${q.paragraphSubText} text-white mb-2`,children:d.jsx("strong",{children:"Congress of the Philippines"})}),d.jsx("br",{}),d.jsx(Pn.p,{variants:Ei("top","spring",.5,3),onMouseUp:i,className:`${q.paragraphSubTextLower} text-white mb-2`,children:"Metro Manila"}),d.jsx("br",{}),d.jsx("br",{}),d.jsx(Pn.p,{variants:Ei("top","spring",.5,4),onMouseUp:i,className:`${q.paragraphSubTextLower} text-white mb-2`,children:"Nineteenth Congress"}),d.jsx("br",{}),d.jsx("br",{}),d.jsx(Pn.p,{variants:Ei("top","spring",.5,6),onMouseUp:i,className:`${q.paragraphSubTextLower} text-white mb-2`,children:"Third Regular Session"}),d.jsx("br",{}),d.jsx("br",{}),d.jsxs(Pn.p,{variants:Ei("top","spring",.5,5),onMouseUp:i,className:`${q.paragraphSubTextLower} text-white mb-2`,children:["Begun and held in Metro Manila, on Monday, the twenty-second ",d.jsx("br",{})," day of July, two thousand twenty-four."]}),d.jsx(Pn.hr,{variants:Ei("top","tween",.5,4),initial:"hidden",animate:"show",className:"w-20 mx-auto border-t-2 border-white my-4"})]}),d.jsxs(Pn.div,{variants:Ei("top","spring",.5,7),className:"mb-6",children:[d.jsx("h3",{onMouseUp:i,className:`${q.paragraphSubText} text-white mb-4 font-semibold`,children:"This Act shall be known as “The Indigenous Peoples’ Rights Act of 1997″."}),d.jsx("p",{onMouseUp:i,className:`${q.paragraphSubTextLower} text-white mb-12`,children:"AN ACT AMENDING SECTIONS 27, 28, 32, 34, 57, 106, 108, 109, 112, 135, 237, 237-A, 269, 292, 293, 294, 295, 296, 297, 300, 301, 308, 309, 310, AND 311, AND ADDING NEW SECTIONS 135-A, 295-A, 296-A, AND 297-A OF THE NATIONAL INTERNAL REVENUE CODE OF 1997, AS AMENDED, AND FOR OTHER PURPOSES"})]}),d.jsxs(Pn.div,{variants:Ei("top","spring",.6,8),className:"mb-12",children:[d.jsx("h3",{className:`${q.paragraphSubText} text-white text-2xl font-semibold`,children:"Table of Contents"}),d.jsx("hr",{className:"w-20 mx-auto border-t-2 border-white my-4"})]}),d.jsx(Pn.div,{variants:GB(.2),className:"space-y-4 text-left max-w-3xl mx-auto",children:A6.map((r,s)=>d.jsx(Pn.div,{variants:Ei("bottom","spring",s*.2,.9),children:d.jsx(Us,{to:r.href,className:`${q.paragraphSubText} text-white hover:underline hover:text-purple-400 block py-2 px-4 rounded-md transition duration-300 transform hover:scale-105 hover:shadow-lg`,children:r.topic})},r.href))})]})}),n&&d.jsxs("div",{className:"absolute text-left bg-white p-4 shadow-lg rounded-lg max-w-xs text-black",style:{left:t.left,top:t.top,zIndex:100},children:[d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsx("p",{className:q.dictionaryText,children:n}),d.jsx("i",{className:"fas fa-volume-up ml-5 text-gray-600"})]}),d.jsx("hr",{className:"border-2 mb-2"}),d.jsx("p",{children:e})]})]})},Ape=Bt(Cpe,""),hO=[{id:"national_territory",title:"National Territory",subtitle:"ARTICLE I",paragraph:"The national territory comprises the Philippine archipelago, with all the islands and waters embraced therein, and all other territories over which the Philippines has sovereignty or jurisdiction, consisting of its terrestrial, fluvial, and aerial domains, including its territorial sea, the seabed, the subsoil, the insular shelves, and other submarine areas. The waters around, between, and connecting the islands of the archipelago, regardless of their breadth and dimensions, form part of the internal waters of the Philippines.",btn:"/articleTwo"}],Mpe=()=>{const n=qt(),{selectedWord:e,definition:t,tooltipPosition:i,handleTextSelection:r}=Fn(),[s,o]=V.useState(!1);V.useEffect(()=>{const c=()=>{window.scrollY>200?o(!0):o(!1)};return window.addEventListener("scroll",c),()=>window.removeEventListener("scroll",c)},[]);const a=()=>{window.scrollTo({top:0,behavior:"smooth"})},l=()=>{n(hO[0].btn)};return d.jsxs("div",{className:"text-spacing-3 leading-relaxed tracking-wide",onMouseUp:r,children:[d.jsx(Ln,{children:d.jsxs("div",{children:[hO.map(c=>d.jsxs("div",{className:"my-5",children:[d.jsx("h5",{className:q.paragraphSubText,children:c.subtitle}),d.jsx("h4",{className:`${q.headText} mb-10`,children:c.title}),d.jsx("p",{onMouseUp:r,className:q.paragraphSubTextLower,children:c.paragraph})]},c.id)),e&&d.jsxs("div",{className:"absolute text-left bg-white p-4 shadow-lg rounded-lg max-w-xs text-black",style:{left:i.left,top:i.top,zIndex:100},children:[d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsx("p",{className:q.dictionaryText,children:e}),d.jsx("i",{className:"fas fa-volume-up ml-5 text-gray-600"})]}),d.jsx("hr",{className:"border-2 mb-2"}),d.jsx("p",{children:t})]}),d.jsxs("div",{className:"mt-5 text-center",children:[d.jsx("hr",{}),d.jsx("br",{}),d.jsx("button",{onClick:l,className:"px-6 py-2 border justify-end text-white rounded-lg hover:bg-gray-500 flex ml-auto",children:d.jsx("span",{className:"text-xs",children:"ARTICLE II"})})]})]})}),s&&d.jsx("button",{onClick:a,className:"fixed bottom-6 right-6 w-12 h-12 bg-gray-600 text-white rounded-full shadow-lg flex items-center justify-center hover:bg-gray-800 transition-all duration-300",children:d.jsx("i",{className:"fas fa-arrow-up"})})]})},Ipe=Bt(Mpe),Ppe=[{id:"principles_and_state_policies",title:"Declaration of Principles and State Policies",subtitle:"ARTICLE II",btn:"/articleThree",principle:"Principles",principle_section:[{name:"Section 1",paragraph:"The Philippines is a democratic and republican State. Sovereignty resides in the people and all government authority emanates from them."},{name:"Section 2",paragraph:"The Philippines renounces war as an instrument of national policy, adopts the generally accepted principles of international law as part of the law of the land and adheres to the policy of peace, equality, justice, freedom, cooperation, and amity with all nations"},{name:"Section 3",paragraph:"Civilian authority is, at all times, supreme over the military. The Armed Forces of the Philippines is the protector of the people and the State. Its goal is to secure the sovereignty of the State and the integrity of the national territory"},{name:"Section 4",paragraph:"The prime duty of the Government is to serve and protect the people. The Government may call upon the people to defend the State and, in the fulfillment thereof, all citizens may be required, under conditions provided by law, to render personal military or civil service."},{name:"Section 5",paragraph:"The maintenance of peace and order, the protection of life, liberty, and property, and the promotion of the general welfare are essential for the enjoyment by all the people of the blessings of democracy."},{name:"Section 6",paragraph:"The separation of Church and State shall be inviolable."}],policy:"Policies",policy_section:[{name:"Section 7",paragraph:"The State shall pursue an independent foreign policy. In its relations with other states the paramount consideration shall be national sovereignty, territorial integrity, national interest, and the right to self-determination."},{name:"Section 8",paragraph:"The Philippines, consistent with the national interest, adopts and pursues a policy of freedom from nuclear weapons in its territory."},{name:"Section 9",paragraph:"The State shall promote a just and dynamic social order that will ensure the prosperity and independence of the nation and free the people from poverty through policies that provide adequate social services, promote full employment, a rising standard of living, and an improved quality of life for all."},{name:"Section 10",paragraph:"The State shall promote social justice in all phases of national development."},{name:"Section 11",paragraph:"The State values the dignity of every human person and guarantees full respect for human rights."},{name:"Section 12",paragraph:"The State recognizes the sanctity of family life and shall protect and strengthen the family as a basic autonomous social institution. It shall equally protect the life of the mother and the life of the unborn from conception. The natural and primary right and duty of parents in the rearing of the youth for civic efficiency and the development of moral character shall receive the support of the Government."},{name:"Section 13",paragraph:"The State recognizes the vital role of the youth in nation-building and shall promote and protect their physical, moral, spiritual, intellectual, and social well-being. It shall inculcate in the youth patriotism and nationalism, and encourage their involvement in public and civic affairs."},{name:"Section 14",paragraph:"The State recognizes the role of women in nation-building, and shall ensure the fundamental equality before the law of women and men."},{name:"Section 15",paragraph:"The State shall protect and promote the right to health of the people and instill health consciousness among them."},{name:"Section 16",paragraph:"The State shall protect and advance the right of the people to a balanced and healthful ecology in accord with the rhythm and harmony of nature."},{name:"Section 17",paragraph:"The State shall give priority to education, science and technology, arts, culture, and sports to foster patriotism and nationalism, accelerate social progress, and promote total human liberation and development."},{name:"Section 18",paragraph:"The State affirms labor as a primary social economic force. It shall protect the rights of workers and promote their welfare."},{name:"Section 19",paragraph:"The State shall develop a self-reliant and independent national economy effectively controlled by Filipinos."},{name:"Section 20",paragraph:"The State recognizes the indispensable role of the private sector, encourages private enterprise, and provides incentives to needed investments."},{name:"Section 21",paragraph:"The State shall promote comprehensive rural development and agrarian reform."},{name:"Section 22",paragraph:"The State recognizes and promotes the rights of indigenous cultural communities within the framework of national unity and development."},{name:"Section 23",paragraph:"The State shall encourage non-governmental, community-based, or sectoral organizations that promote the welfare of the nation."},{name:"Section 24",paragraph:"The State recognizes the vital role of communication and information in nation-building."},{name:"Section 25",paragraph:"The State shall ensure the autonomy of local governments."},{name:"Section 26",paragraph:"The State shall guarantee equal access to opportunities for public service, and prohibit political dynasties as may be defined by law."},{name:"Section 27",paragraph:"The State shall maintain honesty and integrity in the public service and take positive and effective measures against graft and corruption."},{name:"Section 28",paragraph:"Subject to reasonable conditions prescribed by law, the State adopts and implements a policy of full public disclosure of all its transactions involving public interest."}]}],Rpe=()=>{const n=qt(),{selectedWord:e,definition:t,tooltipPosition:i,handleTextSelection:r}=Fn(),[s,o]=V.useState(!1);V.useEffect(()=>{const u=()=>{window.scrollY>200?o(!0):o(!1)};return window.addEventListener("scroll",u),()=>window.removeEventListener("scroll",u)},[]);const a=()=>{window.scrollTo({top:0,behavior:"smooth"})},l=()=>{n("/articleThree")},c=()=>{n("/articleOne")};return d.jsxs("div",{className:"text-spacing-3 leading-relaxed tracking-wide",children:[d.jsx(Ln,{children:d.jsxs("div",{children:[Ppe.map(u=>d.jsxs("div",{className:"my-5",children:[d.jsx("h5",{className:q.paragraphSubText,children:u.subtitle}),d.jsx("h4",{className:`${q.headText} mb-10`,children:u.title}),d.jsxs("div",{children:[d.jsx("h5",{id:"principles",className:q.paragraphSubText,children:"Principles"}),u.principle_section.map((f,m)=>d.jsxs("div",{className:"my-4",children:[d.jsx("h6",{className:q.paragraphSubText,children:f.name}),d.jsx("p",{onMouseUp:r,className:q.paragraphSubTextLower,children:f.paragraph})]},m))]}),d.jsxs("div",{children:[d.jsx("h5",{id:"policies",className:`${q.paragraphSubText} mt-5`,children:"Policies"}),u.policy_section.map((f,m)=>d.jsxs("div",{className:"my-4",children:[d.jsx("h6",{className:q.paragraphSubText,children:f.name}),d.jsx("p",{onMouseUp:r,className:q.paragraphSubTextLower,children:f.paragraph})]},m))]})]},u.id)),e&&d.jsxs("div",{className:"absolute text-left bg-white p-4 shadow-lg rounded-lg max-w-xs text-black",style:{left:i.left,top:i.top,zIndex:100},children:[d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsx("p",{className:q.dictionaryText,children:e}),d.jsx("i",{className:"fas fa-volume-up ml-5 text-gray-600"})]}),d.jsx("hr",{className:"border-2 mb-2"}),d.jsx("p",{children:t})]}),d.jsxs("div",{className:"mt-10 text-center flex justify-between",children:[d.jsx("button",{onClick:c,className:"px-6 py-2 border justify-end text-white rounded-lg hover:bg-gray-500",children:"Article I"}),d.jsx("button",{onClick:l,className:"px-6 py-2 border justify-end text-white rounded-lg hover:bg-gray-500",children:"Article III"})]})]})}),s&&d.jsx("button",{onClick:a,className:"fixed bottom-6 right-6 w-12 h-12 bg-gray-600 text-white rounded-full shadow-lg flex items-center justify-center hover:bg-gray-800 transition-all duration-300",children:d.jsx("i",{className:"fas fa-arrow-up"})})]})},Npe=Bt(Rpe),Dpe=[{id:"bill_of_rights",title:"Bill of Rights",subtitle:"ARTICLE III",sections:[{name:"Section 1",paragraph:"No person shall be deprived of life, liberty, or property without due process of law, nor shall any person be denied the equal protection of the laws."},{name:"Section 2",paragraph:"The right of the people to be secure in their persons, houses, papers, and effects against unreasonable searches and seizures of whatever nature and for any purpose shall be inviolable, and no search warrant or warrant of arrest shall issue except upon probable cause to be determined personally by the judge after examination under oath or affirmation of the complainant and the witnesses he may produce, and particularly describing the place to be searched and the persons or things to be seized."},{name:"Section 3",paragraph:["(1) The privacy of communication and correspondence shall be inviolable except upon lawful order of the court, or when public safety or order requires otherwise as prescribed by law","(2) Any evidence obtained in violation of this or the preceding section shall be inadmissible for any purpose in any proceeding."]},{name:"Section 4",paragraph:"No law shall be passed abridging the freedom of speech, of expression, or of the press, or the right of the people peaceably to assemble and petition the government for redress of grievances."},{name:"Section 5",paragraph:"No law shall be made respecting an establishment of religion, or prohibiting the free exercise thereof. The free exercise and enjoyment of religious profession and worship, without discrimination or preference, shall forever be allowed. No religious test shall be required for the exercise of civil or political rights."},{name:"Section 6",paragraph:"The liberty of abode and of changing the same within the limits prescribed by law shall not be impaired except upon lawful order of the court. Neither shall the right to travel be impaired except in the interest of national security, public safety, or public health, as may be provided by law."},{name:"Section 7",paragraph:"The right of the people to information on matters of public concern shall be recognized. Access to official records, and to documents, and papers pertaining to official acts, transactions, or decisions, as well as to government research data used as basis for policy development, shall be afforded the citizen, subject to such limitations as may be provided by law."},{name:"Section 8",paragraph:"The right of the people, including those employed in the public and private sectors, to form unions, associations, or societies for purposes not contrary to law shall not be abridged"},{name:"Section 9",paragraph:"Private property shall not be taken for public use without just compensation."},{name:"Section 10",paragraph:"No law impairing the obligation of contracts shall be passed."},{name:"Section 11",paragraph:"Free access to the courts and quasi-judicial bodies and adequate legal assistance shall not be denied to any person by reason of poverty."},{name:"Section 12",paragraph:["(1) Any person under investigation for the commission of an offense shall have the right to be informed of his right to remain silent and to have competent and independent counsel preferably of his own choice. If the person cannot afford the services of counsel, he must be provided with one. These rights cannot be waived except in writing and in the presence of counsel.","(2) No torture, force, violence, threat, intimidation, or any other means which vitiate the free will shall be used against him. Secret detention places, solitary, incommunicado, or other similar forms of detention are prohibited.","(3) Any confession or admission obtained in violation of this or Section 17 hereof shall be inadmissible in evidence against him.","(4) The law shall provide for penal and civil sanctions for violations of this section as well as compensation to and rehabilitation of victims of torture or similar practices, and their families."]},{name:"Section 13",paragraph:"All persons, except those charged with offenses punishable by reclusion perpetua when evidence of guilt is strong, shall, before conviction, be bailable by sufficient sureties, or be released on recognizance as may be provided by law. The right to bail shall not be impaired even when the privilege of the writ of habeas corpus is suspended. Excessive bail shall not be required."},{name:"Section 14",paragraph:[". (1) No person shall be held to answer for a criminal offense without due process of law.","(2) In all criminal prosecutions, the accused shall be presumed innocent until the contrary is proved, and shall enjoy the right to be heard by himself and counsel, to be informed of the nature and cause of the accusation against him, to have a speedy, impartial, and public trial, to meet the witnesses face to face, and to have compulsory process to secure the attendance of witnesses and the production of evidence in his behalf. However, after arraignment, trial may proceed notwithstanding the absence of the accused provided that he has been duly notified and his failure to appear is unjustifiable."]},{name:"Section 15",paragraph:"The privilege of the writ of habeas corpus shall not be suspended except in cases of invasion or rebellion when the public safety requires it."},{name:"Section 16",paragraph:"All persons shall have the right to a speedy disposition of their cases before all judicial, quasi-judicial, or administrative bodies."},{name:"Section 17",paragraph:"No person shall be compelled to be a witness against himself."},{name:"Section 18",paragraph:["(1) No person shall be detained solely by reason of his political beliefs and aspirations.","(2) No involuntary servitude in any form shall exist except as a punishment for a crime whereof the party shall have been duly convicted."]},{name:"Section 19",paragraph:["(1) Excessive fines shall not be imposed, nor cruel, degrading or inhuman punishment inflicted. Neither shall death penalty be imposed, unless, for compelling reasons involving heinous crimes, the Congress hereafter provides for it. Any death penalty already imposed shall be reduced to reclusion perpetua.","(2) The employment of physical, psychological, or degrading punishment against any prisoner or detainee or the use of substandard or inadequate penal facilities under subhuman conditions shall be dealt with by law."]},{name:"Section 20",paragraph:"No person shall be imprisoned for debt or non-payment of a poll tax."},{name:"Section 21",paragraph:"No person shall be twice put in jeopardy of punishment for the same offense. If an act is punished by a law and an ordinance, conviction or acquittal under either shall constitute a bar to another prosecution for the same act."},{name:"Section 22",paragraph:" No ex post facto law or bill of attainder shall be enacted."}]}],Lpe=()=>{const n=qt(),{selectedWord:e,definition:t,tooltipPosition:i,handleTextSelection:r}=Fn(),[s,o]=V.useState(!1);V.useEffect(()=>{const u=()=>{window.scrollY>200?o(!0):o(!1)};return window.addEventListener("scroll",u),()=>window.removeEventListener("scroll",u)},[]);const a=()=>{window.scrollTo({top:0,behavior:"smooth"})},l=()=>{n("/articleFour")},c=()=>{n("/articleTwo")};return d.jsxs("div",{className:"text-spacing-3 leading-relaxed tracking-wide",children:[d.jsx(Ln,{children:d.jsxs("div",{children:[Dpe.map(u=>d.jsxs("div",{className:"my-5",children:[d.jsx("h5",{className:q.paragraphSubText,children:u.subtitle}),d.jsx("h4",{className:`${q.headText} mb-10`,children:u.title}),d.jsx("div",{children:u.sections.map((f,m)=>d.jsxs("div",{className:"my-4",children:[d.jsx("h6",{className:q.paragraphSubText,children:f.name}),d.jsx("p",{onMouseUp:r,className:q.paragraphSubTextLower,children:f.paragraph})]},m))})]},u.id)),e&&d.jsxs("div",{className:"absolute text-left bg-white p-4 shadow-lg rounded-lg max-w-xs text-black",style:{left:i.left,top:i.top,zIndex:100},children:[d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsx("p",{className:q.dictionaryText,children:e}),d.jsx("i",{className:"fas fa-volume-up ml-5 text-gray-600"})]}),d.jsx("hr",{className:"border-2 mb-2"}),d.jsx("p",{children:t})]}),d.jsxs("div",{className:"mt-10 text-center flex justify-between",children:[d.jsx("button",{onClick:c,className:"px-6 py-2 border justify-end text-white rounded-lg hover:bg-gray-500",children:"Previous Article"}),d.jsx("button",{onClick:l,className:"px-6 py-2 border justify-end text-white rounded-lg hover:bg-gray-500",children:"Next Article"})]})]})}),s&&d.jsx("button",{onClick:a,className:"fixed bottom-6 right-6 w-12 h-12 bg-gray-600 text-white rounded-full shadow-lg flex items-center justify-center hover:bg-gray-800 transition-all duration-300",children:d.jsx("i",{className:"fas fa-arrow-up"})})]})},kpe=Bt(Lpe),Ope=[{id:"citizenship",title:"Citizenship",subtitle:"ARTICLE IV",sections:[{name:"Section 1",paragraph:["(1) Those who are citizens of the Philippines at the time of the adoption of this Constitution;","(2) Those whose fathers or mothers are citizens of the Philippines;","(3) Those born before January 17, 1973, of Filipino mothers, who elect Philippine citizenship upon reaching the age of majority; and","(4) Those who are naturalized in accordance with law."]},{name:"Section 2",paragraph:"Natural-born citizens are those who are citizens of the Philippines from birth without having to perform any act to acquire or perfect their Philippine citizenship. Those who elect Philippine citizenship in accordance with paragraph (3), Section 1 hereof shall be deemed natural-born citizens."},{name:"Section 3",paragraph:"Philippine citizenship may be lost or reacquired in the manner provided by law."},{name:"Section 4",paragraph:"Citizens of the Philippines who marry aliens shall retain their citizenship, unless by their act or omission they are deemed, under the law, to have renounced it."},{name:"Section 5",paragraph:"Dual allegiance of citizens is inimical to the national interest and shall be dealt with by law."}]}],Upe=()=>{const n=qt(),{selectedWord:e,definition:t,tooltipPosition:i,handleTextSelection:r}=Fn(),[s,o]=V.useState(!1);V.useEffect(()=>{const u=()=>{window.scrollY>200?o(!0):o(!1)};return window.addEventListener("scroll",u),()=>window.removeEventListener("scroll",u)},[]);const a=()=>{window.scrollTo({top:0,behavior:"smooth"})},l=()=>{n("/articleFive")},c=()=>{n("/articleThree")};return d.jsxs("div",{className:"text-spacing-3 leading-relaxed tracking-wide",children:[d.jsx(Ln,{children:d.jsxs("div",{children:[Ope.map(u=>d.jsxs("div",{className:"my-5",children:[d.jsx("h5",{className:q.paragraphSubText,children:u.subtitle}),d.jsx("h4",{className:`${q.headText} mb-10`,children:u.title}),d.jsx("div",{children:u.sections.map((f,m)=>d.jsxs("div",{className:"my-4",children:[d.jsx("h6",{className:q.paragraphSubText,children:f.name}),d.jsx("p",{onMouseUp:r,className:q.paragraphSubTextLower,children:f.paragraph})]},m))})]},u.id)),e&&d.jsxs("div",{className:"absolute text-left bg-white p-4 shadow-lg rounded-lg max-w-xs text-black",style:{left:i.left,top:i.top,zIndex:100},children:[d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsx("p",{className:q.dictionaryText,children:e}),d.jsx("i",{className:"fas fa-volume-up ml-5 text-gray-600"})]}),d.jsx("hr",{className:"border-2 mb-2"}),d.jsx("p",{children:t})]}),d.jsxs("div",{className:"mt-10 text-center flex justify-between",children:[d.jsx("button",{onClick:c,className:"px-6 py-2 border justify-end text-white rounded-lg hover:bg-gray-500",children:"Previous Article"}),d.jsx("button",{onClick:l,className:"px-6 py-2 border justify-end text-white rounded-lg hover:bg-gray-500",children:"Next Article"})]})]})}),s&&d.jsx("button",{onClick:a,className:"fixed bottom-6 right-6 w-12 h-12 bg-gray-600 text-white rounded-full shadow-lg flex items-center justify-center hover:bg-gray-800 transition-all duration-300",children:d.jsx("i",{className:"fas fa-arrow-up"})})]})},Fpe=Bt(Upe),jpe=[{id:"suff",title:"Suffrage",subtitle:"ARTICLE V",sections:[{name:"Section 1",paragraph:"Suffrage may be exercised by all citizens of the Philippines not otherwise disqualified by law, who are at least eighteen years of age, and who shall have resided in the Philippines for at least one year and in the place wherein they propose to vote for at least six months immediately preceding the election. No literacy, property, or other substantive requirement shall be imposed on the exercise of suffrage."},{name:"Section 2",paragraph:"The Congress shall provide a system for securing the secrecy and sanctity of the ballot as well as a system for absentee voting by qualified Filipinos abroad."}]}],Vpe=()=>{const n=qt(),{selectedWord:e,definition:t,tooltipPosition:i,handleTextSelection:r}=Fn(),[s,o]=V.useState(!1);V.useEffect(()=>{const u=()=>{window.scrollY>200?o(!0):o(!1)};return window.addEventListener("scroll",u),()=>window.removeEventListener("scroll",u)},[]);const a=()=>{window.scrollTo({top:0,behavior:"smooth"})},l=()=>{n("/articleSix")},c=()=>{n("/articleFour")};return d.jsxs("div",{className:"text-spacing-3 leading-relaxed tracking-wide",children:[d.jsx(Ln,{children:d.jsxs("div",{children:[jpe.map(u=>d.jsxs("div",{className:"my-5",children:[d.jsx("h5",{className:q.paragraphSubText,children:u.subtitle}),d.jsx("h4",{className:`${q.headText} mb-10`,children:u.title}),d.jsx("div",{children:u.sections.map((f,m)=>d.jsxs("div",{className:"my-4",children:[d.jsx("h6",{className:q.paragraphSubText,children:f.name}),d.jsx("p",{onMouseUp:r,className:q.paragraphSubTextLower,children:f.paragraph})]},m))})]},u.id)),e&&d.jsxs("div",{className:"absolute text-left bg-white p-4 shadow-lg rounded-lg max-w-xs text-black",style:{left:i.left,top:i.top,zIndex:100},children:[d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsx("p",{className:q.dictionaryText,children:e}),d.jsx("i",{className:"fas fa-volume-up ml-5 text-gray-600"})]}),d.jsx("hr",{className:"border-2 mb-2"}),d.jsx("p",{children:t})]}),d.jsxs("div",{className:"mt-10 text-center flex justify-between",children:[d.jsx("button",{onClick:c,className:"px-6 py-2 border justify-end text-white rounded-lg hover:bg-gray-500",children:"Previous Article"}),d.jsx("button",{onClick:l,className:"px-6 py-2 border justify-end text-white rounded-lg hover:bg-gray-500",children:"Next Article"})]})]})}),s&&d.jsx("button",{onClick:a,className:"fixed bottom-6 right-6 w-12 h-12 bg-gray-600 text-white rounded-full shadow-lg flex items-center justify-center hover:bg-gray-800 transition-all duration-300",children:d.jsx("i",{className:"fas fa-arrow-up"})})]})},Bpe=Bt(Vpe),zpe=[{id:"legislative_department",title:"The Legislative Department",subtitle:"ARTICLE VI",sections:[{name:"Section 1",paragraph:"The legislative power shall be vested in the Congress of the Philippines which shall consist of a Senate and a House of Representatives, except to the extent reserved to the people by the provision on initiative and referendum."},{name:"Section 2",paragraph:"The Senate shall be composed of twenty-four Senators who shall be elected at large by the qualified voters of the Philippines, as may be provided by law."},{name:"Section 3",paragraph:"No person shall be a Senator unless he is a natural-born citizen of the Philippines, and, on the day of the election, is at least thirty-five years of age, able to read and write, a registered voter, and a resident of the Philippines for not less than two years immediately preceding the day of the election."},{name:"Section 4",paragraph:"The term of office of the Senators shall be six years and shall commence, unless otherwise provided by law, at noon on the thirtieth day of June next following their election. No Senator shall serve for more than two consecutive terms. Voluntary renunciation of the office for any length of time shall not be considered as an interruption in the continuity of his service for the full term for which he was elected."},{name:"Section 5",paragraph:[" (1) The House of Representatives shall be composed of not more than two hundred and fifty members, unless otherwise fixed by law, who shall be elected from legislative districts apportioned among the provinces, cities, and the Metropolitan Manila area in accordance with the number of their respective inhabitants, and on the basis of a uniform and progressive ratio, and those who, as provided by law, shall be elected through a party-list system of registered national, regional, and sectoral parties or organizations.","(2) The party-list representatives shall constitute twenty per centum of the total number of representatives including those under the party list. For three consecutive terms after the ratification of this Constitution, one-half of the seats allocated to party-list representatives shall be filled, as provided by law, by selection or election from the labor, peasant, urban poor, indigenous cultural communities, women, youth, and such other sectors as may be provided by law, except the religious sector.","(3) Each legislative district shall comprise, as far as practicable, contiguous, compact and adjacent territory. Each city with a population of at least two hundred fifty thousand, or each province, shall have at least one representative.","(4) Within three years following the return of every census, the Congress shall make a reapportionment of legislative districts based on the standards provided in this section."]},{name:"Section 6",paragraph:"No person shall be a Member of the House of Representatives unless he is a natural-born citizen of the Philippines and, on the day of the election, is at least twenty-five years of age, able to read and write, and, except the party-list representatives, a registered voter in the district in which he shall be elected, and a resident thereof for a period of not less than one year immediately preceding the day of the election."},{name:"Section 7",paragraph:["The Members of the House of Representatives shall be elected for a term of three years which shall begin, unless otherwise provided by law, at noon on the thirtieth day of June next following their election.","No member of the House of Representatives shall serve for more than three consecutive terms. Voluntary renunciation of the office for any length of time shall not be considered as an interruption in the continuity of his service for the full term for which he was elected."]},{name:"Section 8",paragraph:"Unless otherwise provided by law, the regular election of the Senators and the Members of the House of Representatives shall be held on the second Monday of May."},{name:"Section 9",paragraph:"In case of vacancy in the Senate or in the House of Representatives, a special election may be called to fill such vacancy in the manner prescribed by law, but the Senator or Member of the House of Representatives thus elected shall serve only for the unexpired term."},{name:"Section 10",paragraph:"The salaries of Senators and Members of the House of Representatives shall be determined by law. No increase in said compensation shall take effect until after the expiration of the full term of all the Members of the Senate and the House of Representatives approving such increase."},{name:"Section 11",paragraph:"A Senator or Member of the House of Representatives shall, in all offenses punishable by not more than six years imprisonment, be privileged from arrest while the Congress is in session. No Member shall be questioned nor be held liable in any other place for any speech or debate in the Congress or in any committee thereof."},{name:"Section 12",paragraph:"All Members of the Senate and the House of Representatives shall, upon assumption of office, make a full disclosure of their financial and business interests. They shall notify the House concerned of a potential conflict of interest that may arise from the filing of a proposed legislation of which they are authors."},{name:"Section 13",paragraph:"No Senator or Member of the House of Representatives may hold any other office or employment in the Government, or any subdivision, agency, or instrumentality thereof, including government-owned or controlled corporations or their subsidiaries, during his term without forfeiting his seat. Neither shall he be appointed to any office which may have been created or the emoluments thereof increased during the term for which he was elected."},{name:"Section 14",paragraph:"No Senator or Member of the House of Representatives may personally appear as counsel before any court of justice or before the Electoral Tribunals, or quasi-judicial and other administrative bodies. Neither shall he, directly or indirectly, be interested financially in any contract with, or in any franchise or special privilege granted by the Government, or any subdivision, agency, or instrumentality thereof, including any government-owned or controlled corporation, or its subsidiary, during his term of office. He shall not intervene in any matter before any office of the Government for his pecuniary benefit or where he may be called upon to act on account of his office."},{name:"Section 15",paragraph:"The Congress shall convene once every year on the fourth Monday of July for its regular session, unless a different date is fixed by law, and shall continue to be in session for such number of days as it may determine until thirty days before the opening of its next regular session, exclusive of Saturdays, Sundays, and legal holidays. The President may call a special session at any time."},{name:"Section 16",paragraph:["(1) The Senate shall elect its President and the House of Representatives its Speaker, by a majority vote of all its respective Members.","Each House shall choose such other officers as it may deem necessary.","(2) A majority of each House shall constitute a quorum to do business, but a smaller number may adjourn from day to day and may compel the attendance of absent Members in such manner, and under such penalties, as such House may provide.","(3) Each House may determine the rules of its proceedings, punish its Members for disorderly behavior, and, with the concurrence of two-thirds of all its Members, suspend or expel a Member. A penalty of suspension, when imposed, shall not exceed sixty days.","(4) Each House shall keep a Journal of its proceedings, and from time to time publish the same, excepting such parts as may, in its judgment, affect national security; and the yeas and nays on any question shall, at the request of one-fifth of the Members present, be entered in the Journal.","Each House shall also keep a Record of its proceedings.","(5) Neither House during the sessions of the Congress shall, without the consent of the other, adjourn for more than three days, nor to any other place than that in which the two Houses shall be sitting."]},{name:"Section 17",paragraph:"The Senate and the House of Representatives shall each have an Electoral Tribunal which shall be the sole judge of all contests relating to the election, returns, and qualifications of their respective Members. Each Electoral Tribunal shall be composed of nine Members, three of whom shall be Justices of the Supreme Court to be designated by the Chief Justice, and the remaining six shall be Members of the Senate or the House of Representatives, as the case may be, who shall be chosen on the basis of proportional representation from the political parties and the parties or organizations registered under the party-list system represented therein. The senior Justice in the Electoral Tribunal shall be its Chairman."},{name:"Section 18",paragraph:"There shall be a Commission on Appointments consisting of the President of the Senate, as ex officio Chairman, twelve Senators and twelve Members of the House of Representatives, elected by each House on the basis of proportional representation from the political parties and parties or organizations registered under the party-list system represented therein. The Chairman of the Commission shall not vote, except in case of a tie. The Commission shall act on all appointments submitted to it within thirty session days of the Congress from their submission. The Commission shall rule by a majority vote of all the Members."},{name:"Section 19",paragraph:"The Electoral Tribunals and the Commission on Appointments shall be constituted within thirty days after the Senate and the House of Representatives shall have been organized with the election of the President and the Speaker. The Commission on Appointments shall meet only while the Congress is in session, at the call of its Chairman or a majority of all its Members, to discharge such powers and functions as are herein conferred upon it."},{name:"Section 20",paragraph:"The records and books of accounts of the Congress shall be preserved and be open to the public in accordance with law, and such books shall be audited by the Commission on Audit which shall publish annually an itemized list of amounts paid to and expenses incurred for each Member."},{name:"Section 21",paragraph:"The Senate or the House of Representatives or any of its respective committees may conduct inquiries in aid of legislation in accordance with its duly published rules of procedure. The rights of persons appearing in or affected by such inquiries shall be respected."},{name:"Section 22",paragraph:"The heads of departments may upon their own initiative, with the consent of the President, or upon the request of either House, as the rules of each House shall provide, appear before and be heard by such House on any matter pertaining to their departments. Written questions shall be submitted to the President of the Senate or the Speaker of the House of Representatives at least three days before their scheduled appearance. Interpellations shall not be limited to written questions, but may cover matters related thereto. When the security of the State or the public interest so requires and the President so states in writing, the appearance shall be conducted in executive session."},{name:"Section 23",paragraph:["(1) The Congress, by a vote of two-thirds of both Houses in joint session assembled, voting separately, shall have the sole power to declare the existence of a state of war.","(2) In times of war or other national emergency, the Congress may, by law, authorize the President, for a limited period and subject to such restrictions as it may prescribe, to exercise powers necessary and proper to carry out a declared national policy. Unless sooner withdrawn by resolution of the Congress, such powers shall cease upon the next adjournment thereof."]},{name:"Section 24",paragraph:"All appropriation, revenue or tariff bills, bills authorizing increase of the public debt, bills of local application, and private bills shall originate exclusively in the House of Representatives, but the Senate may propose or concur with amendments."},{name:"Section 25",paragraph:["(1) The Congress may not increase the appropriations recommended by the President for the operation of the Government as specified in the budget. The form, content, and manner of preparation of the budget shall be prescribed by law.","(2) No provision or enactment shall be embraced in the general appropriations bill unless it relates specifically to some particular appropriation therein. Any such provision or enactment shall be limited in its operation to the appropriation to which it relates.","(3) The procedure in approving appropriations for the Congress shall strictly follow the procedure for approving appropriations for other departments and agencies.","(4) A special appropriations bill shall specify the purpose for which it is intended, and shall be supported by funds actually available as certified by the National Treasurer, or to be raised by a corresponding revenue proposed therein.","(5) No law shall be passed authorizing any transfer of appropriations; however, the President, the President of the Senate, the Speaker of the House of Representatives, the Chief Justice of the Supreme Court, and the heads of Constitutional Commissions may, by law, be authorized to augment any item in the general appropriations law for their respective offices from savings in other items of their respective appropriations.","(6) Discretionary funds appropriated for particular officials shall be disbursed only for public purposes to be supported by appropriate vouchers and subject to such guidelines as may be prescribed by law.","(7) If, by the end of any fiscal year, the Congress shall have failed to pass the general appropriations bill for the ensuing fiscal year, the general appropriations law for the preceding fiscal year shall be deemed reenacted and shall remain in force and effect until the general appropriations bill is passed by the Congress."]},{name:"Section 26",paragraph:["(1) Every bill passed by the Congress shall embrace only one subject which shall be expressed in the title thereof.","(2) No bill passed by either House shall become a law unless it has passed three readings on separate days, and printed copies thereof in its final form have been distributed to its Members three days before its passage, except when the President certifies to the necessity of its immediate enactment to meet a public calamity or emergency. Upon the last reading of a bill, no amendment thereto shall be allowed, and the vote thereon shall be taken immediately thereafter, and the yeas and nays entered in the Journal."]},{name:"Section 27",paragraph:["(1) Every bill passed by the Congress shall, before it becomes a law, be presented to the President. If he approves the same, he shall sign it; otherwise, he shall veto it and return the same with his objections to the House where it originated, which shall enter the objections at large in its Journal and proceed to reconsider it. If, after such reconsideration, two-thirds of all the Members of such House shall agree to pass the bill, it shall be sent, together with the objections, to the other House by which it shall likewise be reconsidered, and if approved by two-thirds of all the Members of that House, it shall become a law. In all such cases, the votes of each House shall be determined by yeas or nays, and the names of the Members voting for or against shall be entered in its Journal. The President shall communicate his veto of any bill to the House where it originated within thirty days after the date of receipt thereof; otherwise, it shall become a law as if he had signed it.","(2) The President shall have the power to veto any particular item or items in an appropriation, revenue, or tariff bill, but the veto shall not affect the item or items to which he does not object."]},{name:"Section 28",paragraph:["(1) The rule of taxation shall be uniform and equitable. The Congress shall evolve a progressive system of taxation.","(2) The Congress may, by law, authorize the President to fix within specified limits, and subject to such limitations and restrictions as it may impose, tariff rates, import and export quotas, tonnage and wharfage dues, and other duties or imposts within the framework of the national development program of the Government.","(3) Charitable institutions, churches and parsonages or convents appurtenant thereto, mosques, non-profit cemeteries, and all lands, buildings, and improvements, actually, directly, and exclusively used for religious, charitable, or educational purposes shall be exempt from taxation.","(4) No law granting any tax exemption shall be passed without the concurrence of a majority of all the Members of the Congress."]},{name:"Section 29",paragraph:["(1) No money shall be paid out of the Treasury except in pursuance of an appropriation made by law.","(2) No public money or property shall be appropriated, applied, paid, or employed, directly or indirectly, for the use, benefit, or support of any sect, church, denomination, sectarian institution, or system of religion, or of any priest, preacher, minister, or other religious teacher, or dignitary as such, except when such priest, preacher, minister, or dignitary is assigned to the armed forces, or to any penal institution, or government orphanage or leprosarium.","(3) All money collected on any tax levied for a special purpose shall be treated as a special fund and paid out for such purpose only. If the purpose for which a special fund was created has been fulfilled or abandoned, the balance, if any, shall be transferred to the general funds of the Government."]},{name:"Section 30",paragraph:"No law shall be passed increasing the appellate jurisdiction of the Supreme Court as provided in this Constitution without its advice and concurrence."},{name:"Section 31",paragraph:"No law granting a title of royalty or nobility shall be enacted."},{name:"Section 32",paragraph:"The Congress shall, as early as possible, provide for a system of initiative and referendum, and the exceptions therefrom, whereby the people can directly propose and enact laws or approve or reject any act or law or part thereof passed by the Congress or local legislative body after the registration of a petition therefor signed by at least ten per centum of the total number of registered voters, of which every legislative district must be represented by at least three per centum of the registered voters thereof."}]}],Hpe=()=>{const n=qt(),{selectedWord:e,definition:t,tooltipPosition:i,handleTextSelection:r}=Fn(),[s,o]=V.useState(!1);V.useEffect(()=>{const u=()=>{window.scrollY>200?o(!0):o(!1)};return window.addEventListener("scroll",u),()=>window.removeEventListener("scroll",u)},[]);const a=()=>{window.scrollTo({top:0,behavior:"smooth"})},l=()=>{n("/articleSeven")},c=()=>{n("/articleFive")};return d.jsxs("div",{className:"text-spacing-3 leading-relaxed tracking-wide",children:[d.jsx(Ln,{children:d.jsxs("div",{children:[zpe.map(u=>d.jsxs("div",{className:"my-5",children:[d.jsx("h5",{className:q.paragraphSubText,children:u.subtitle}),d.jsx("h4",{className:`${q.headText} mb-10`,children:u.title}),d.jsx("div",{children:u.sections.map((f,m)=>d.jsxs("div",{className:"my-4",children:[d.jsx("h6",{className:q.paragraphSubText,children:f.name}),d.jsx("p",{onMouseUp:r,className:q.paragraphSubTextLower,children:f.paragraph})]},m))})]},u.id)),e&&d.jsxs("div",{className:"absolute text-left bg-white p-4 shadow-lg rounded-lg max-w-xs text-black",style:{left:i.left,top:i.top,zIndex:100},children:[d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsx("p",{className:q.dictionaryText,children:e}),d.jsx("i",{className:"fas fa-volume-up ml-5 text-gray-600"})]}),d.jsx("hr",{className:"border-2 mb-2"}),d.jsx("p",{children:t})]}),d.jsxs("div",{className:"mt-10 text-center flex justify-between",children:[d.jsx("button",{onClick:c,className:"px-6 py-2 border justify-end text-white rounded-lg hover:bg-gray-500",children:"Previous Article"}),d.jsx("button",{onClick:l,className:"px-6 py-2 border justify-end text-white rounded-lg hover:bg-gray-500",children:"Next Article"})]})]})}),s&&d.jsx("button",{onClick:a,className:"fixed bottom-6 right-6 w-12 h-12 bg-gray-600 text-white rounded-full shadow-lg flex items-center justify-center hover:bg-gray-800 transition-all duration-300",children:d.jsx("i",{className:"fas fa-arrow-up"})})]})},Gpe=Bt(Hpe),Wpe=[{id:"executive_department",title:"Executive Department",subtitle:"ARTICLE VII",sections:[{name:"Section 1",paragraph:"The executive power shall be vested in the President of the Philippines."},{name:"Section 2",paragraph:"No person may be elected President unless he is a natural-born citizen of the Philippines, a registered voter, able to read and write, at least forty years of age on the day of the election, and a resident of the Philippines for at least ten years immediately preceding such election."},{name:"Section 3",paragraph:"There shall be a Vice-President who shall have the same qualifications and term of office and be elected with and in the same manner as the President. He may be removed from office in the same manner as the President."},{name:"Section 3",paragraph:["There shall be a Vice-President who shall have the same qualifications and term of office and be elected with and in the same manner as the President. He may be removed from office in the same manner as the President.","The Vice-President may be appointed as a Member of the Cabinet. Such appointment requires no confirmation."]},{name:"Section 4",paragraph:["The President and the Vice-President shall be elected by direct vote of the people for a term of six years which shall begin at noon on the thirtieth day of June next following the day of the election and shall end at noon of the same date six years thereafter. The President shall not be eligible for any reelection. No person who has succeeded as President and has served as such for more than four years shall be qualified for election to the same office at any time.","No Vice-President shall serve for more than two consecutive terms. Voluntary renunciation of the office for any length of time shall not be considered as an interruption in the continuity of the service for the full term for which he was elected.","No Vice-President shall serve for more than two consecutive terms. Voluntary renunciation of the office for any length of time shall not be considered as an interruption in the continuity of the service for the full term for which he was elected.","The returns of every election for President and Vice-President, duly certified by the board of canvassers of each province or city, shall be transmitted to the Congress, directed to the President of the Senate. Upon receipt of the certificates of canvass, the President of the Senate shall, not later than thirty days after the day of the election, open all certificates in the presence of the Senate and the House of Representatives in joint public session, and the Congress, upon determination of the authenticity and due execution thereof in the manner provided by law, canvass the votes.","The returns of every election for President and Vice-President, duly certified by the board of canvassers of each province or city, shall be transmitted to the Congress, directed to the President of the Senate. Upon receipt of the certificates of canvass, the President of the Senate shall, not later than thirty days after the day of the election, open all certificates in the presence of the Senate and the House of Representatives in joint public session, and the Congress, upon determination of the authenticity and due execution thereof in the manner provided by law, canvass the votes.","The Congress shall promulgate its rules for the canvassing of the certificates.","The Supreme Court, sitting en banc, shall be the sole judge of all contests relating to the election, returns, and qualifications of the President or Vice- President, and may promulgate its rules for the purpose."]},{name:"Section 5",paragraph:["Before they enter on the execution of their office, the President, the Vice-President, or the Acting President shall take the following oath or affirmation:","“I do solemnly swear (or affirm) that I will faithfully and conscientiously fulfill my duties as President (or Vice-President or Acting President) of the Philippines, preserve and defend its Constitution, execute its laws, do justice to every man, and consecrate myself to the service of the Nation. So help me God.” (In case of affirmation, last sentence will be omitted.)"]},{name:"Section 6",paragraph:"The President shall have an official residence. The salaries of the President and Vice-President shall be determined by law and shall not be decreased during their tenure. No increase in said compensation shall take effect until after the expiration of the term of the incumbent during which such increase was approved. They shall not receive during their tenure any other emolument from the Government or any other source."},{name:"Section 7",paragraph:["The President-elect and the Vice-President-elect shall assume office at the beginning of their terms.","If the President-elect fails to qualify, the Vice-President-elect shall act as President until the President-elect shall have qualified.","If a President shall not have been chosen, the Vice-President-elect shall act as President until a President shall have been chosen and qualified.","If a President shall not have been chosen, the Vice-President-elect shall act as President until a President shall have been chosen and qualified.","Where no President and Vice-President shall have been chosen or shall have qualified, or where both shall have died or become permanently disabled, the President of the Senate or, in case of his inability, the Speaker of the House of Representatives shall act as President until a President or a Vice-President shall have been chosen and qualified.","The Congress shall, by law, provide for the manner in which one who is to act as President shall be selected until a President or a Vice-President shall have qualified, in case of death, permanent disability, or inability of the officials mentioned in the next preceding paragraph."]},{name:"Section 8",paragraph:["In case of death, permanent disability, removal from office, or resignation of the President, the Vice-President shall become the President to serve the unexpired term. In case of death, permanent disability, removal from office, or resignation of both the President and Vice-President, the President of the Senate or, in case of his inability, the Speaker of the House of Representatives, shall then act as President until the President or Vice-President shall have been elected and qualified.","The Congress shall, by law, provide who shall serve as President in case of death, permanent disability, or resignation of the Acting President. He shall serve until the President or the Vice-President shall have been elected and qualified, and be subject to the same restrictions of powers and disqualifications as the Acting President."]},{name:"Section 9",paragraph:"Whenever there is a vacancy in the Office of the Vice-President during the term for which he was elected, the President shall nominate a Vice-President from among the Members of the Senate and the House of Representatives who shall assume office upon confirmation by a majority vote of all the Members of both Houses of the Congress, voting separately."},{name:"Section 10",paragraph:"The Congress shall, at ten o’clock in the morning of the third day after the vacancy in the offices of the President and Vice-President occurs, convene in accordance with its rules without need of a call and within seven days enact a law calling for a special election to elect a President and a Vice-President to be held not earlier than forty-five days nor later than sixty days from the time of such call. The bill calling such special election shall be deemed certified under paragraph 2, Section 26, Article VI of this Constitution and shall become law upon its approval on third reading by the Congress. Appropriations for the special election shall be charged against any current appropriations and shall be exempt from the requirements of paragraph 4, Section 25, Article VI of this Constitution. The convening of the Congress cannot be suspended nor the special election postponed. No special election shall be called if the vacancy occurs within eighteen months before the date of the next presidential election."},{name:"Section 11",paragraph:["Whenever the President transmits to the President of the Senate and the Speaker of the House of Representatives his written declaration that he is unable to discharge the powers and duties of his office, and until he transmits to them a written declaration to the contrary, such powers and duties shall be discharged by the Vice-President as Acting President.","Whenever a majority of all the Members of the Cabinet transmit to the President of the Senate and to the Speaker of the House of Representatives their written declaration that the President is unable to discharge the powers and duties of his office, the Vice-President shall immediately assume the powers and duties of the office as Acting President.","Thereafter, when the President transmits to the President of the Senate and to the Speaker of the House of Representatives his written declaration that no inability exists, he shall reassume the powers and duties of his office. Meanwhile, should a majority of all the Members of the Cabinet transmit within five days to the President of the Senate and to the Speaker of the House of Representatives their written declaration that the President is unable to discharge the powers and duties of his office, the Congress shall decide the issue. For that purpose, the Congress shall convene, if it is not in session, within forty-eight hours, in accordance with its rules and without need of call.","If the Congress, within ten days after receipt of the last written declaration, or, if not in session, within twelve days after it is required to assemble, determines by a two-thirds vote of both Houses, voting separately, that the President is unable to discharge the powers and duties of his office, the Vice-President shall act as the President; otherwise, the President shall continue exercising the powers and duties of his office."]},{name:"Section 12",paragraph:"In case of serious illness of the President, the public shall be informed of the state of his health. The Members of the Cabinet in charge of national security and foreign relations and the Chief of Staff of the Armed Forces of the Philippines, shall not be denied access to the President during such illness."},{name:"Section 8",paragraph:["The President, Vice-President, the Members of the Cabinet, and their deputies or assistants shall not, unless otherwise provided in this Constitution, hold any other office or employment during their tenure. They shall not, during said tenure, directly or indirectly, practice any other profession, participate in any business, or be financially interested in any contract with, or in any franchise, or special privilege granted by the Government or any subdivision, agency, or instrumentality thereof, including government-owned or controlled corporations or their subsidiaries. They shall strictly avoid conflict of interest in the conduct of their office.","The spouse and relatives by consanguinity or affinity within the fourth civil degree of the President shall not during his tenure be appointed as members of the Constitutional Commissions, or the Office of the Ombudsman, or as Secretaries, Undersecretaries, chairmen or heads of bureaus or offices, including government-owned or controlled corporations and their subsidiaries."]},{name:"Section 14",paragraph:"Appointments extended by an Acting President shall remain effective, unless revoked by the elected President within ninety days from his assumption or reassumption of office."},{name:"Section 15",paragraph:"Two months immediately before the next presidential elections and up to the end of his term, a President or Acting President shall not make appointments, except temporary appointments to executive positions when continued vacancies therein will prejudice public service or endanger public safety."},{name:"Section 16",paragraph:["The President shall nominate and, with the consent of the Commission on Appointments, appoint the heads of the executive departments, ambassadors, other public ministers and consuls, or officers of the armed forces from the rank of colonel or naval captain, and other officers whose appointments are vested in him in this Constitution. He shall also appoint all other officers of the Government whose appointments are not otherwise provided for by law, and those whom he may be authorized by law to appoint. The Congress may, by law, vest the appointment of other officers lower in rank in the President alone, in the courts, or in the heads of departments, agencies, commissions, or boards.","The President shall have the power to make appointments during the recess of the Congress, whether voluntary or compulsory, but such appointments shall be effective only until after disapproval by the Commission on Appointments or until the next adjournment of the Congress."]},{name:"Section 17",paragraph:"The President shall have control of all the executive departments, bureaus, and offices. He shall ensure that the laws be faithfully executed."},{name:"Section 18",paragraph:["The President shall be the Commander-in-Chief of all armed forces of the Philippines and whenever it becomes necessary, he may call out such armed forces to prevent or suppress lawless violence, invasion or rebellion. In case of invasion or rebellion, when the public safety requires it, he may, for a period not exceeding sixty days, suspend the privilege of the writ of habeas corpus or place the Philippines or any part thereof under martial law. Within forty-eight hours from the proclamation of martial law or the suspension of the privilege of the writ of habeas corpus, the President shall submit a report in person or in writing to the Congress.","The Congress, voting jointly, by a vote of at least a majority of all its Members in regular or special session, may revoke such proclamation or suspension, which revocation shall not be set aside by the President. Upon the initiative of the President, the Congress may, in the same manner, extend such proclamation or suspension for a period to be determined by the Congress, if the invasion or rebellion shall persist and public safety requires it.","The Congress, if not in session, shall, within twenty-four hours following such proclamation or suspension, convene in accordance with its rules without any need of a call.","The Supreme Court may review, in an appropriate proceeding filed by any citizen, the sufficiency of the factual basis of the proclamation of martial law or the suspension of the privilege of the writ or the extension thereof, and must promulgate its decision thereon within thirty days from its filing.","A state of martial law does not suspend the operation of the Constitution, nor supplant the functioning of the civil courts or legislative assemblies, nor authorize the conferment of jurisdiction on military courts and agencies over civilians where civil courts are able to function, nor automatically suspend the privilege of the writ.","The suspension of the privilege of the writ shall apply only to persons judicially charged for rebellion or offenses inherent in or directly connected with the invasion.","During the suspension of the privilege of the writ, any person thus arrested or detained shall be judicially charged within three days, otherwise he shall be released."]},{name:"Section 19",paragraph:["Except in cases of impeachment, or as otherwise provided in this Constitution, the President may grant reprieves, commutations and pardons, and remit fines and forfeitures, after conviction by final judgment.","He shall also have the power to grant amnesty with the concurrence of a majority of all the Members of the Congress."]},{name:"Section 20",paragraph:"The President may contract or guarantee foreign loans on behalf of the Republic of the Philippines with the prior concurrence of the Monetary Board, and subject to such limitations as may be provided by law. The Monetary Board shall, within thirty days from the end of every quarter of the calendar year, submit to the Congress a complete report of its decisions on applications for loans to be contracted or guaranteed by the Government or government-owned and controlled corporations which would have the effect of increasing the foreign debt, and containing other matters as may be provided by law."},{name:"Section 21",paragraph:"No treaty or international agreement shall be valid and effective unless concurred in by at least two-thirds of all the Members of the Senate."},{name:"Section 22",paragraph:"The President shall submit to the Congress within thirty days from the opening of every regular session, as the basis of the general appropriations bill, a budget of expenditures and sources of financing, including receipts from existing and proposed revenue measures."},{name:"Section 23",paragraph:"The President shall address the Congress at the opening of its regular session. He may also appear before it at any other time."}]}],qpe=()=>{const n=qt(),{selectedWord:e,definition:t,tooltipPosition:i,handleTextSelection:r}=Fn(),[s,o]=V.useState(!1);V.useEffect(()=>{const u=()=>{window.scrollY>200?o(!0):o(!1)};return window.addEventListener("scroll",u),()=>window.removeEventListener("scroll",u)},[]);const a=()=>{window.scrollTo({top:0,behavior:"smooth"})},l=()=>{n("/articleEight")},c=()=>{n("/articleSix")};return d.jsxs("div",{className:"text-spacing-3 leading-relaxed tracking-wide",children:[d.jsx(Ln,{children:d.jsxs("div",{children:[Wpe.map(u=>d.jsxs("div",{className:"my-5",children:[d.jsx("h5",{className:q.paragraphSubText,children:u.subtitle}),d.jsx("h4",{className:`${q.headText} mb-10`,children:u.title}),d.jsx("div",{children:u.sections.map((f,m)=>d.jsxs("div",{className:"my-4",children:[d.jsx("h6",{className:q.paragraphSubText,children:f.name}),d.jsx("p",{onMouseUp:r,className:q.paragraphSubTextLower,children:f.paragraph})]},m))})]},u.id)),e&&d.jsxs("div",{className:"absolute text-left bg-white p-4 shadow-lg rounded-lg max-w-xs text-black",style:{left:i.left,top:i.top,zIndex:100},children:[d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsx("p",{className:q.dictionaryText,children:e}),d.jsx("i",{className:"fas fa-volume-up ml-5 text-gray-600"})]}),d.jsx("hr",{className:"border-2 mb-2"}),d.jsx("p",{children:t})]}),d.jsxs("div",{className:"mt-10 text-center flex justify-between",children:[d.jsx("button",{onClick:c,className:"px-6 py-2 border justify-end text-white rounded-lg hover:bg-gray-500",children:"Previous Article"}),d.jsx("button",{onClick:l,className:"px-6 py-2 border justify-end text-white rounded-lg hover:bg-gray-500",children:"Next Article"})]})]})}),s&&d.jsx("button",{onClick:a,className:"fixed bottom-6 right-6 w-12 h-12 bg-gray-600 text-white rounded-full shadow-lg flex items-center justify-center hover:bg-gray-800 transition-all duration-300",children:d.jsx("i",{className:"fas fa-arrow-up"})})]})},$pe=Bt(qpe),Xpe=[{id:"judicial_department",title:"Judicial Department",subtitle:"ARTICLE VIII",sections:[{name:"Section 1",paragraph:["The judicial power shall be vested in one Supreme Court and in such lower courts as may be established by law.","Judicial power includes the duty of the courts of justice to settle actual controversies involving rights which are legally demandable and enforceable, and to determine whether or not there has been a grave abuse of discretion amounting to lack or excess of jurisdiction on the part of any branch or instrumentality of the Government."]},{name:"Section 2",paragraph:["The Congress shall have the power to define, prescribe, and apportion the jurisdiction of various courts but may not deprive the Supreme Court of its jurisdiction over cases enumerated in Section 5 hereof.","No law shall be passed reorganizing the Judiciary when it undermines the security of tenure of its Members."]},{name:"Section 3",paragraph:"The Judiciary shall enjoy fiscal autonomy. Appropriations for the Judiciary may not be reduced by the legislature below the amount appropriated for the previous year and, after approval, shall be automatically and regularly released."},{name:"Section 4",paragraph:["(1) The Supreme Court shall be composed of a Chief Justice and fourteen Associate Justices. It may sit en banc or in its discretion, in divisions of three, five, or seven Members. Any vacancy shall be filled within ninety days from the occurrence thereof.","(2) All cases involving the constitutionality of a treaty, international or executive agreement, or law, which shall be heard by the Supreme Court en banc, and all other cases which under the Rules of Court are required to be heard en banc, including those involving the constitutionality, application, or operation of presidential decrees, proclamations, orders, instructions, ordinances, and other regulations, shall be decided with the concurrence of a majority of the Members who actually took part in the deliberations on the issues in the case and voted thereon.","(3) Cases or matters heard by a division shall be decided or resolved with the concurrence of a majority of the Members who actually took part in the deliberations on the issues in the case and voted thereon, and in no case, without the concurrence of at least three of such Members. When the required number is not obtained, the case shall be decided en banc: Provided, that no doctrine or principle of law laid down by the court in a decision rendered en banc or in division may be modified or reversed except by the court sitting en banc."]},{name:"Section 5",paragraph:["The Supreme Court shall have the following powers:","(1) Exercise original jurisdiction over cases affecting ambassadors, other public ministers and consuls, and over petitions for certiorari, prohibition, mandamus, quo warranto, and habeas corpus.","(2) Review, revise, reverse, modify, or affirm on appeal or certiorari, as the law or the Rules of Court may provide, final judgments and orders of lower courts in:","(a) All cases in which the constitutionality or validity of any treaty, international or executive agreement, law, presidential decree, proclamation, order, instruction, ordinance, or regulation is in question.","(b) All cases involving the legality of any tax, impost, assessment, or toll, or any penalty imposed in relation thereto.","(c) All cases in which the jurisdiction of any lower court is in issue.","(d) All criminal cases in which the penalty imposed is reclusion perpetua or higher.","(e) All cases in which only an error or question of law is involved.","(3) Assign temporarily judges of lower courts to other stations as public interest may require. Such temporary assignment shall not exceed six months without the consent of the judge concerned.","(4) Order a change of venue or place of trial to avoid a miscarriage of justice.","(5) Promulgate rules concerning the protection and enforcement of constitutional rights, pleading, practice, and procedure in all courts, the admission to the practice of law, the Integrated Bar, and legal assistance to the underprivileged. Such rules shall provide a simplified and inexpensive procedure for the speedy disposition of cases, shall be uniform for all courts of the same grade, and shall not diminish, increase, or modify substantive rights. Rules of procedure of special courts and quasi-judicial bodies shall remain effective unless disapproved by the Supreme Court.","(6) Appoint all officials and employees of the Judiciary in accordance with the Civil Service Law."]},{name:"Section 6",paragraph:"The Supreme Court shall have administrative supervision over all courts and the personnel thereof."},{name:"Section 7",paragraph:["(1) No person shall be appointed Member of the Supreme Court or any lower collegiate court unless he is a natural-born citizen of the Philippines. A Member of the Supreme Court must be at least forty years of age, and must have been for fifteen years or more a judge of a lower court or engaged in the practice of law in the Philippines.","(2) The Congress shall prescribe the qualifications of judges of lower courts, but no person may be appointed judge thereof unless he is a citizen of the Philippines and a member of the Philippine Bar.","(3) A Member of the Judiciary must be a person of proven competence, integrity, probity, and independence."]},{name:"Section 8",paragraph:["(1) A Judicial and Bar Council is hereby created under the supervision of the Supreme Court composed of the Chief Justice as ex officio Chairman, the Secretary of Justice, and a representative of the Congress as ex officio Members, a representative of the Integrated Bar, a professor of law, a retired Member of the Supreme Court, and a representative of the private sector.","(2) The regular Members of the Council shall be appointed by the President for a term of four years with the consent of the Commission on Appointments. Of the Members first appointed, the representative of the Integrated Bar shall serve for four years, the professor of law for three years, the retired Justice for two years, and the representative of the private sector for one year.","(3) The Clerk of the Supreme Court shall be the Secretary ex officio of the Council and shall keep a record of its proceedings.","(4) The regular Members of the Council shall receive such emoluments as may be determined by the Supreme Court. The Supreme Court shall provide in its annual budget the appropriations for the Council.","(5) The Council shall have the principal function of recommending appointees to the Judiciary. It may exercise such other functions and duties as the Supreme Court may assign to it."]},{name:"Section 9",paragraph:["The Members of the Supreme Court and judges of lower courts shall be appointed by the President from a list of at least three nominees prepared by the Judicial and Bar Council for every vacancy. Such appointments need no confirmation.","For the lower courts, the President shall issue the appointments within ninety days from the submission of the list."]},{name:"Section 10",paragraph:["The salary of the Chief Justice and of the Associate Justices of the Supreme Court, and of judges of lower courts shall be fixed by law. During their continuance in office, their salary shall not be decreased."]},{name:"Section 11",paragraph:["The Members of the Supreme Court and judges of lower courts shall hold office during good behavior until they reached the age of seventy years or become incapacitated to discharge the duties of their office. The Supreme Court en banc shall have the power to discipline judges of lower courts, or order their dismissal by a vote of a majority of the Members who actually took part in the deliberations on the issues in the case and voted thereon."]},{name:"Section 12",paragraph:["The Members of the Supreme Court and of other courts established by law shall not be designated to any agency performing quasi-judicial or administrative functions."]},{name:"Section 13",paragraph:["The conclusions of the Supreme Court in any case submitted to it for decision en banc or in division shall be reached in consultation before the case is assigned to a Member for the writing of the opinion of the Court. A certification to this effect signed by the Chief Justice shall be issued and a copy thereof attached to the record of the case and served upon the parties. Any Member who took no part, or dissented, or abstained from a decision or resolution must state the reason therefor. The same requirements shall be observed by all lower collegiate courts."]},{name:"Section 14",paragraph:["No decision shall be rendered by any court without expressing therein clearly and distinctly the facts and the law on which it is based.","No petition for review or motion for reconsideration of a decision of the court shall be refused due course or denied without stating the legal basis therefor."]},{name:"Section 15",paragraph:[" (1) All cases or matters filed after the effectivity of this Constitution must be decided or resolved within twenty-four months from date of submission for the Supreme Court, and, unless reduced by the Supreme Court, twelve months for all lower collegiate courts, and three months for all other lower courts.","(2) A case or matter shall be deemed submitted for decision or resolution upon the filing of the last pending, brief, or memorandum required by the Rules of Court or by the court itself.","(3) Upon the expiration of the corresponding period, a certification to this effect signed by the Chief Justice or the presiding judge shall forthwith be issued and a copy thereof attached to the record of the case or matter, and served upon the parties. The certification shall state why a decision or resolution has not been rendered or issued within said period.","(4) Despite the expiration of the applicable mandatory period, the court, without prejudice to such responsibility as may have been incurred in consequence thereof, shall decide or resolve the case or matter submitted thereto for determination, without further delay."]},{name:"Section 16",paragraph:["The Supreme Court shall, within thirty days from the opening of each regular session of the Congress, submit to the President and the Congress an annual report on the operations and activities of the Judiciary."]}]}],Kpe=()=>{const n=qt(),{selectedWord:e,definition:t,tooltipPosition:i,handleTextSelection:r}=Fn(),[s,o]=V.useState(!1);V.useEffect(()=>{const u=()=>{window.scrollY>200?o(!0):o(!1)};return window.addEventListener("scroll",u),()=>window.removeEventListener("scroll",u)},[]);const a=()=>{window.scrollTo({top:0,behavior:"smooth"})},l=()=>{n("/articleNine")},c=()=>{n("/articleSeven")};return d.jsxs("div",{className:"text-spacing-3 leading-relaxed tracking-wide",children:[d.jsx(Ln,{children:d.jsxs("div",{children:[Xpe.map(u=>d.jsxs("div",{className:"my-5",children:[d.jsx("h5",{className:q.paragraphSubText,children:u.subtitle}),d.jsx("h4",{className:`${q.headText} mb-10`,children:u.title}),d.jsx("div",{children:u.sections.map((f,m)=>d.jsxs("div",{className:"my-4",children:[d.jsx("h6",{className:q.paragraphSubText,children:f.name}),d.jsx("p",{className:q.paragraphSubTextLower,onMouseUp:r,children:f.paragraph})]},m))})]},u.id)),e&&d.jsxs("div",{className:"absolute text-left bg-white p-4 shadow-lg rounded-lg max-w-xs text-black",style:{left:i.left,top:i.top,zIndex:100},children:[d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsx("p",{className:q.dictionaryText,children:e}),d.jsx("i",{className:"fas fa-volume-up ml-5 text-gray-600"})]}),d.jsx("hr",{className:"border-2 mb-2"}),d.jsx("p",{children:t})]}),d.jsxs("div",{className:"mt-10 text-center flex justify-between",children:[d.jsx("button",{onClick:c,className:"px-6 py-2 border justify-end text-white rounded-lg hover:bg-gray-500",children:"Previous Article"}),d.jsx("button",{onClick:l,className:"px-6 py-2 border justify-end text-white rounded-lg hover:bg-gray-500",children:"Next Article"})]})]})}),s&&d.jsx("button",{onClick:a,className:"fixed bottom-6 right-6 w-12 h-12 bg-gray-600 text-white rounded-full shadow-lg flex items-center justify-center hover:bg-gray-800 transition-all duration-300",children:d.jsx("i",{className:"fas fa-arrow-up"})})]})},Ype=Bt(Kpe),Jpe=[{id:"constitutional_commissions",title:"Constitutional Commissions",subtitle:"ARTICLE IX - Common Provisions",sections:[{name:"Section 1",paragraph:"The Constitutional Commissions, which shall be independent, are the Civil Service Commission, the Commission on Elections, and the Commission on Audit."},{name:"Section 2",paragraph:"No Member of a Constitutional Commission shall, during his tenure, hold any other office or employment. Neither shall he engage in the practice of any profession or in the active management or control of any business which in any way be affected by the functions of his office, nor shall he be financially interested, directly or indirectly, in any contract with, or in any franchise or privilege granted by the Government, any of its subdivisions, agencies, or instrumentalities, including government-owned or controlled corporations or their subsidiaries."},{name:"Section 3",paragraph:"The salary of the Chairman and the Commissioners shall be fixed by law and shall not be decreased during their tenure."},{name:"Section 4",paragraph:"The Constitutional Commissions shall appoint their officials and employees in accordance with law."},{name:"Section 5",paragraph:"The Commission shall enjoy fiscal autonomy. Their approved annual appropriations shall be automatically and regularly released."},{name:"Section 6",paragraph:"Each Commission en banc may promulgate its own rules concerning pleadings and practice before it or before any of its offices. Such rules however shall not diminish, increase, or modify substantive rights."},{name:"Section 7",paragraph:"Each Commission shall decide by a majority vote of all its Members any case or matter brought before it within sixty days from the date of its submission for decision or resolution. A case or matter is deemed submitted for decision or resolution upon the filing of the last pleading, brief, or memorandum required by the rules of the Commission or by the Commission itself. Unless otherwise provided by this Constitution or by law, any decision, order, or ruling of each Commission may be brought to the Supreme Court on certiorari by the aggrieved party within thirty days from receipt of a copy thereof."},{name:"Section 8",paragraph:"Each Commission shall perform such other functions as may be provided by law."}]}],Qpe=[{id:"civil_service",title:"The Civil Service Commission",subtitle:"ARTICLE IX",sections:[{name:"Section 1",paragraph:["(1) The Civil Service shall be administered by the Civil Service Commission composed of a Chairman and two Commissioners who shall be natural-born citizens of the Philippines and, at the time of their appointment, at least thirty-five years of age, with proven capacity for public administration, and must not have been candidates for any elective position in the elections immediately preceding their appointment.","(2) The Chairman and the Commissioners shall be appointed by the President with the consent of the Commission on Appointments for a term of seven years without reappointment. Of those first appointed, the Chairman shall hold office for seven years, a Commissioner for five years, and another Commissioner for three years, without reappointment. Appointment to any vacancy shall be only for the unexpired term of the predecessor. In no case shall any Member be appointed or designated in a temporary or acting capacity."]},{name:"Section 2",paragraph:["(1) The civil service embraces all branches, subdivisions, instrumentalities, and agencies of the Government, including government-owned or controlled corporations with original charters.","(2) Appointments in the civil service shall be made only according to merit and fitness to be determined, as far as practicable, and, except to positions which are policy-determining, primarily confidential, or highly technical, by competitive examination.","(3) No officer or employee of the civil service shall be removed or suspended except for cause provided by law.","(4) No officer or employee in the civil service shall engage, directly or indirectly, in any electioneering or partisan political campaign.","(5) The right to self-organization shall not be denied to government employees.","(6) Temporary employees of the Government shall be given such protection as may be provided by law."]},{name:"Section 3",paragraph:["The Civil Service Commission, as the central personnel agency of the Government, shall establish a career service and adopt measures to promote morale, efficiency, integrity, responsiveness, progressiveness, and courtesy in the civil service.","It shall strengthen the merit and rewards system, integrate all human resources development programs for all levels and ranks, and institutionalize a management climate conducive to public accountability.","It shall submit to the President and the Congress an annual report on its personnel programs."]},{name:"Section 4",paragraph:["All public officers and employees shall take an oath or affirmation to uphold and defend this Constitution."]},{name:"Section 5",paragraph:["The Congress shall provide for the standardization of compensation of government officials and employees, including those in government-owned or controlled corporations with original charters, taking into account the nature of the responsibilities pertaining to, and the qualifications required for their positions."]},{name:"Section 6",paragraph:["No candidate who has lost in any election shall, within one year after such election, be appointed to any office in the Government or any government-owned or controlled corporations or in any of their subsidiaries."]},{name:"Section 7",paragraph:["No elective official shall be eligible for appointment or designation in any capacity to any public office or position during his tenure.","Unless otherwise allowed by law or by the primary functions of his position, no appointive official shall hold any other office or employment in the Government or any subdivision, agency or instrumentality thereof, including government-owned or controlled corporations or their subsidiaries."]},{name:"Section 8",paragraph:["No elective or appointive public officer or employee shall receive additional, double, or indirect compensation, unless specifically authorized by law, nor accept without the consent of the Congress, any present, emolument, office, or title of any kind from any foreign government.","Pensions or gratuities shall not be considered as additional, double, or indirect compensation."]}]}],Zpe=[{id:"commission_on_elections",title:"The Commission on Elections",subtitle:"ARTICLE IX - C",sections:[{name:"Section 1",paragraph:["(1) There shall be a Commission on Elections composed of a Chairman and six Commissioners who shall be natural-born citizens of the Philippines and, at the time of their appointment, at least thirty-five years of age, holders of a college degree, and must not have been candidates for any elective position in the immediately preceding elections. However, a majority thereof, including the Chairman, shall be Members of the Philippine Bar who have been engaged in the practice of law for at least ten years.","(2) The Chairman and the Commissioners shall be appointed by the President with the consent of the Commission on Appointments for a term of seven years without reappointment. Of those first appointed, three Members shall hold office for seven years, two Members for five years, and the last Members for three years, without reappointment. Appointment to any vacancy shall be only for the unexpired term of the predecessor. In no case shall any Member be appointed or designated in a temporary or acting capacity."]},{name:"Section 2",paragraph:["(1) Enforce and administer all laws and regulations relative to the conduct of an election, plebiscite, initiative, referendum, and recall.","(2) Exercise exclusive original jurisdiction over all contests relating to the elections, returns, and qualifications of all elective regional, provincial, and city officials, and appellate jurisdiction over all contests involving elective municipal officials decided by trial courts of general jurisdiction, or involving elective barangay officials decided by trial courts of limited jurisdiction.","Decisions, final orders, or rulings of the Commission on election contests involving elective municipal and barangay offices shall be final, executory, and not appealable.","(3) Decide, except those involving the right to vote, all questions affecting elections, including determination of the number and location of polling places, appointment of election officials and inspectors, and registration of voters.","(4) Deputize, with the concurrence of the President, law enforcement agencies and instrumentalities of the Government, including the Armed Forces of the Philippines, for the exclusive purpose of ensuring free, orderly, honest, peaceful, and credible elections.","(5) Register, after sufficient publication, political parties, organizations, or coalitions which, in addition to other requirements, must present their platform or program of government; and accredit citizens’ arms of the Commission on Elections. Religious denominations and sects shall not be registered. Those which seek to achieve their goals through violence or unlawful means, or refuse to uphold and adhere to this Constitution, or which are supported by any foreign government shall likewise be refused registration.","Financial contributions from foreign governments and their agencies to political parties, organizations, coalitions, or candidates related to elections constitute interference in national affairs, and, when accepted, shall be an additional ground for the cancellation of their registration with the Commission, in addition to other penalties that may be prescribed by law.","(6) File, upon a verified complaint, or on its own initiative, petitions in court for inclusion or exclusion of voters; investigate and, where appropriate, prosecute cases of violations of election laws, including acts or omissions constituting election frauds, offenses, and malpractices.","(7) Recommend to the Congress effective measures to minimize election spending, including limitation of places where propaganda materials shall be posted, and to prevent and penalize all forms of election frauds, offenses, malpractices, and nuisance candidacies.","(8) Recommend to the President the removal of any officer or employee it has deputized, or the imposition of any other disciplinary action, for violation or disregard of, or disobedience to its directive, order, or decision.","(9) Submit to the President and the Congress a comprehensive report on the conduct of each election, plebiscite, initiative, referendum, or recall."]},{name:"Section 3",paragraph:["The Commission on Elections may sit en banc or in two divisions, and shall promulgate its rules of procedure in order to expedite disposition of election cases, including pre-proclamation controversies. All such election cases shall be heard and decided in division, provided that motions for reconsideration of decisions shall be decided by the Commission en banc."]},{name:"Section 4",paragraph:["The Commission may, during the election period, supervise or regulate the enjoyment or utilization of all franchises or permits for the operation of transportation and other public utilities, media of communication or information, all grants, special privileges, or concessions granted by the Government or any subdivision, agency, or instrumentality thereof, including any government-owned or controlled corporation or its subsidiary.","Such supervision or regulation shall aim to ensure equal opportunity, time, and space, and the right to reply, including reasonable, equal rates therefor, for public information campaigns and forums among candidates in connection with the objective of holding free, orderly, honest, peaceful, and credible elections."]},{name:"Section 5",paragraph:["No pardon, amnesty, parole, or suspension of sentence for violation of election laws, rules, and regulations shall be granted by the President without the favorable recommendation of the Commission."]},{name:"Section 6",paragraph:["A free and open party system shall be allowed to evolve according to the free choice of the people, subject to the provisions of this Article."]},{name:"Section 7",paragraph:["No votes cast in favor of a political party, organization, or coalition shall be valid, except for those registered under the party-list system as provided in this Constitution."]},{name:"Section 8",paragraph:["Political parties, or organizations or coalitions registered under the party-list system, shall not be represented in the voters’ registration boards, boards of election inspectors, boards of canvassers, or other similar bodies.","However, they shall be entitled to appoint poll watchers in accordance with law."]},{name:"Section 9",paragraph:["Unless otherwise fixed by the Commission in special cases, the election period shall commence ninety days before the day of the election and shall end thirty days after."]},{name:"Section 10",paragraph:["Bona fide candidates for any public office shall be free from any form of harassment and discrimination."]},{name:"Section 11",paragraph:["Funds certified by the Commission as necessary to defray the expenses for holding regular and special elections, plebiscites, initiatives, referenda, and recalls, shall be provided in the regular or special appropriations and, once approved, shall be released automatically upon certification by the Chairman of the Commission."]}]}],eme=[{id:"commission_on_audit",title:"Commission on Audit",subtitle:"ARTICLE IX - D",sections:[{name:"Section 1",paragraph:["(1) There shall be a Commission on Audit composed of a Chairman and two Commissioners, who shall be natural-born citizens of the Philippines and, at the time of their appointment, at least thirty-five years of age, certified public accountants with not less than ten years of auditing experience, or members of the Philippine Bar who have been engaged in the practice of law for at least ten years, and must not have been candidates for any elective position in the elections immediately preceding their appointment. At no time shall all Members of the Commission belong to the same profession.","(2) The Chairman and the Commissioners shall be appointed by the President with the consent of the Commission on Appointments for a term of seven years without reappointment. Of those first appointed, the Chairman shall hold office for seven years, one Commissioner for five years, and the other Commissioner for three years, without reappointment. Appointment to any vacancy shall be only for the unexpired portion of the term of the predecessor. In no case shall any Member be appointed or designated in a temporary or acting capacity."]},{name:"Section 2",paragraph:["(1) The Commission on Audit shall have the power, authority, and duty to examine, audit, and settle all accounts pertaining to the revenue and receipts of, and expenditures or uses of funds and property, owned or held in trust by, or pertaining to, the Government, or any of its subdivisions, agencies, or instrumentalities, including government-owned or controlled corporations with original charters, and on a post-audit basis: (a) constitutional bodies, commissions and offices that have been granted fiscal autonomy under this Constitution; (b) autonomous state colleges and universities; (c) other government-owned or controlled corporations and their subsidiaries; and (d) such non-governmental entities receiving subsidy or equity, directly or indirectly, from or through the Government, which are required by law or the granting institution to submit to such audit as a condition of subsidy or equity.","However, where the internal control system of the audited agencies is inadequate, the Commission may adopt such measures, including temporary or special pre-audit, as are necessary and appropriate to correct the deficiencies. It shall keep the general accounts of the Government and, for such period as may be provided by law, preserve the vouchers and other supporting papers pertaining thereto.","(2) The Commission shall have exclusive authority, subject to the limitations in this Article, to define the scope of its audit and examination, establish the techniques and methods required therefor, and promulgate accounting and auditing rules and regulations, including those for the prevention and disallowance of irregular, unnecessary, excessive, extravagant, or unconscionable expenditures, or uses of government funds and properties."]},{name:"Section 3",paragraph:["No law shall be passed exempting any entity of the Government or its subsidiary in any guise whatever, or any investment of public funds, from the jurisdiction of the Commission on Audit."]},{name:"Section 4",paragraph:["The Commission shall submit to the President and the Congress, within the time fixed by law, an annual report covering the financial condition and operation of the Government, its subdivisions, agencies, and instrumentalities, including government-owned or controlled corporations, and non-governmental entities subject to its audit, and recommend measures necessary to improve their effectiveness and efficiency. It shall submit such other reports as may be required by law."]}]}],tme=()=>{const n=qt(),{selectedWord:e,definition:t,tooltipPosition:i,handleTextSelection:r}=Fn(),[s,o]=V.useState(!1);V.useEffect(()=>{const u=()=>{window.scrollY>200?o(!0):o(!1)};return window.addEventListener("scroll",u),()=>window.removeEventListener("scroll",u)},[]);const a=()=>{window.scrollTo({top:0,behavior:"smooth"})},l=()=>{n("/articleTen")},c=()=>{n("/articleEight")};return d.jsxs("div",{className:"text-spacing-3 leading-relaxed tracking-wide",children:[d.jsx(Ln,{children:d.jsxs("div",{children:[Jpe.map(u=>d.jsxs("div",{className:"my-5",children:[d.jsx("h5",{className:q.paragraphSubText,children:u.subtitle}),d.jsx("h4",{className:`${q.headText} mb-10`,children:u.title}),d.jsx("div",{children:u.sections.map((f,m)=>d.jsxs("div",{className:"my-4",children:[d.jsx("h6",{className:q.paragraphSubText,children:f.name}),d.jsx("p",{onMouseUp:r,className:q.paragraphSubTextLower,children:f.paragraph})]},m))})]},u.id)),d.jsx("br",{}),d.jsx("br",{}),Qpe.map(u=>d.jsxs("div",{className:"my-5",children:[d.jsx("h5",{className:q.paragraphSubText,children:u.subtitle}),d.jsx("h5",{className:q.paragraphHeadText,children:u.title}),d.jsx("div",{children:u.sections.map((f,m)=>d.jsxs("div",{className:"my-4",children:[d.jsx("h6",{className:q.paragraphSubText,children:f.name}),d.jsx("p",{onMouseUp:r,className:q.paragraphSubTextLower,children:f.paragraph})]},m))})]},u.id)),d.jsx("br",{}),d.jsx("br",{}),Zpe.map(u=>d.jsxs("div",{className:"my-5",children:[d.jsx("h5",{className:q.paragraphSubText,children:u.subtitle}),d.jsx("h5",{className:q.paragraphHeadText,children:u.title}),d.jsx("div",{children:u.sections.map((f,m)=>d.jsxs("div",{className:"my-4",children:[d.jsx("h6",{className:q.paragraphSubText,children:f.name}),d.jsx("p",{onMouseUp:r,className:q.paragraphSubTextLower,children:f.paragraph})]},m))})]},u.id)),d.jsx("br",{}),d.jsx("br",{}),eme.map(u=>d.jsxs("div",{className:"my-5",children:[d.jsx("h5",{className:q.paragraphSubText,children:u.subtitle}),d.jsx("h5",{className:q.paragraphHeadText,children:u.title}),d.jsx("div",{children:u.sections.map((f,m)=>d.jsxs("div",{className:"my-4",children:[d.jsx("h6",{className:q.paragraphSubText,children:f.name}),d.jsx("p",{onMouseUp:r,className:q.paragraphSubTextLower,children:f.paragraph})]},m))})]},u.id)),e&&d.jsxs("div",{className:"absolute text-left bg-white p-4 shadow-lg rounded-lg max-w-xs text-black",style:{left:i.left,top:i.top,zIndex:100},children:[d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsx("p",{className:q.dictionaryText,children:e}),d.jsx("i",{className:"fas fa-volume-up ml-5 text-gray-600"})]}),d.jsx("hr",{className:"border-2 mb-2"}),d.jsx("p",{children:t})]}),d.jsxs("div",{className:"mt-10 text-center flex justify-between",children:[d.jsx("button",{onClick:c,className:"px-6 py-2 border justify-end text-white rounded-lg hover:bg-gray-500",children:"Previous Article"}),d.jsx("button",{onClick:l,className:"px-6 py-2 border justify-end text-white rounded-lg hover:bg-gray-500",children:"Next Article"})]})]})}),s&&d.jsx("button",{onClick:a,className:"fixed bottom-6 right-6 w-12 h-12 bg-gray-600 text-white rounded-full shadow-lg flex items-center justify-center hover:bg-gray-800 transition-all duration-300",children:d.jsx("i",{className:"fas fa-arrow-up"})})]})},nme=Bt(tme),ime=[{id:"local_government",title:"Local Government",subtitle:"ARTICLE X - General Provisions",sections:[{name:"Section 1",paragraph:["The territorial and political subdivisions of the Republic of the Philippines are the provinces, cities, municipalities, and barangays. There shall be autonomous regions in Muslim Mindanao and the Cordilleras as hereinafter provided."]},{name:"Section 2",paragraph:["The territorial and political subdivisions shall enjoy local autonomy."]},{name:"Section 3",paragraph:["The Congress shall enact a local government code which shall provide for a more responsive and accountable local government structure instituted through a system of decentralization with effective mechanisms of recall, initiative, and referendum, allocate among the different local government units their powers, responsibilities, and resources, and provide for the qualifications, election, appointment and removal, term, salaries, powers and functions and duties of local officials, and all other matters relating to the organization and operation of the local units."]},{name:"Section 4",paragraph:["The President of the Philippines shall exercise general supervision over local governments. Provinces with respect to component cities and municipalities, and cities and municipalities with respect to component barangays shall ensure that the acts of their component units are within the scope of their prescribed powers and functions."]},{name:"Section 5",paragraph:["Each local government unit shall have the power to create its own sources of revenues and to levy taxes, fees, and charges subject to such guidelines and limitations as the Congress may provide, consistent with the basic policy of local autonomy. Such taxes, fees, and charges shall accrue exclusively to the local governments."]},{name:"Section 6",paragraph:["Local government units shall have a just share, as determined by law, in the national taxes which shall be automatically released to them."]},{name:"Section 7",paragraph:["Local governments shall be entitled to an equitable share in the proceeds of the utilization and development of the national wealth within their respective areas, in the manner provided by law, including sharing the same with the inhabitants by way of direct benefits."]},{name:"Section 8",paragraph:["The term of office of elective local officials, except barangay officials, which shall be determined by law, shall be three years and no such official shall serve for more than three consecutive terms. Voluntary renunciation of the office for any length of time shall not be considered as an interruption in the continuity of his service for the full term for which he was elected."]},{name:"Section 9",paragraph:["Legislative bodies of local governments shall have sectoral representation as may be prescribed by law."]},{name:"Section 10",paragraph:["No province, city, municipality, or barangay may be created, divided, merged, abolished, or its boundary substantially altered, except in accordance with the criteria established in the Local Government Code and subject to approval by a majority of the votes cast in a plebiscite in the political units directly affected."]},{name:"Section 11",paragraph:["The Congress may, by law, create special metropolitan political subdivisions, subject to a plebiscite as set forth in Section 10 hereof. The component cities and municipalities shall retain their basic autonomy and shall be entitled to their own local executives and legislative assemblies. The jurisdiction of the metropolitan authority that will hereby be created shall be limited to basic services requiring coordination."]},{name:"Section 12",paragraph:["Cities that are highly urbanized, as determined by law, and component cities whose charters prohibit their voters from voting for provincial elective officials, shall be independent of the province. The voters of component cities within a province, whose charters contain no such prohibition, shall not be deprived of their right to vote for elective provincial officials."]},{name:"Section 13",paragraph:["Local government units may group themselves, consolidate or coordinate their efforts, services, and resources for purposes commonly beneficial to them in accordance with law."]},{name:"Section 14",paragraph:["The President shall provide for regional development councils or other similar bodies composed of local government officials, regional heads of departments and other government offices, and representatives from non-governmental organizations within the regions for purposes of administrative decentralization to strengthen the autonomy of the units therein and to accelerate the economic and social growth and development of the units in the region."]}]}],rme=[{id:"auto_region",title:"Autonomous Region",sections:[{name:"Section 15",paragraph:["There shall be created autonomous regions in Muslim Mindanao and in the Cordilleras consisting of provinces, cities, municipalities, and geographical areas sharing common and distinctive historical and cultural heritage, economic and social structures, and other relevant characteristics within the framework of this Constitution and the national sovereignty as well as territorial integrity of the Republic of the Philippines."]},{name:"Section 16",paragraph:["The President shall exercise general supervision over autonomous regions to ensure that the laws are faithfully executed."]},{name:"Section 17",paragraph:["All powers, functions, and responsibilities not granted by this Constitution or by law to the autonomous regions shall be vested in the National Government."]},{name:"Section 18",paragraph:["The Congress shall enact an organic act for each autonomous region with the assistance and participation of the regional consultative commission composed of representatives appointed by the President from a list of nominees from multisectoral bodies. The organic act shall define the basic structure of government for the region consisting of the executive department and legislative assembly, both of which shall be elective and representative of the constituent political units. The organic acts shall likewise provide for special courts with personal, family, and property law jurisdiction consistent with the provisions of this Constitution and national laws.","The creation of the autonomous region shall be effective when approved by majority of the votes cast by the constituent units in a plebiscite called for the purpose, provided that only provinces, cities, and geographic areas voting favorably in such plebiscite shall be included in the autonomous region."]},{name:"Section 19",paragraph:["The first Congress elected under this Constitution shall, within eighteen months from the time of organization of both Houses, pass the organic acts for the autonomous regions in Muslim Mindanao and the Cordilleras."]},{name:"Section 20",paragraph:["Within its territorial jurisdiction and subject to the provisions of this Constitution and national laws, the organic act of autonomous regions shall provide for legislative powers over:","(1) Administrative organization;","(2) Creation of sources of revenues;","(3) Ancestral domain and natural resources;","(4) Personal, family, and property relations;","(5) Regional urban and rural planning development;","(6) Economic, social, and tourism development;","(7) Educational policies;","(8) Preservation and development of the cultural heritage; and","(9) Such other matters as may be authorized by law for the promotion of the general welfare of the people of the region."]},{name:"Section 21",paragraph:["The preservation of peace and order within the regions shall be the responsibility of the local police agencies which shall be organized, maintained, supervised, and utilized in accordance with applicable laws. The defense and security of the regions shall be the responsibility of the National Government."]}]}],sme=()=>{const n=qt(),{selectedWord:e,definition:t,tooltipPosition:i,handleTextSelection:r}=Fn(),[s,o]=V.useState(!1);V.useEffect(()=>{const u=()=>{window.scrollY>200?o(!0):o(!1)};return window.addEventListener("scroll",u),()=>window.removeEventListener("scroll",u)},[]);const a=()=>{window.scrollTo({top:0,behavior:"smooth"})},l=()=>{n("/articleEleven")},c=()=>{n("/articleNine")};return d.jsxs("div",{className:"text-spacing-3 leading-relaxed tracking-wide",children:[d.jsx(Ln,{children:d.jsxs("div",{children:[ime.map(u=>d.jsxs("div",{className:"my-5",children:[d.jsx("h5",{className:q.paragraphSubText,children:u.subtitle}),d.jsx("h4",{className:`${q.headText} mb-10`,children:u.title}),d.jsx("div",{children:u.sections.map((f,m)=>d.jsxs("div",{className:"my-4",children:[d.jsx("h6",{className:q.paragraphSubText,children:f.name}),d.jsx("p",{onMouseUp:r,className:q.paragraphSubTextLower,children:f.paragraph})]},m))})]},u.id)),d.jsx("br",{}),d.jsx("br",{}),rme.map(u=>d.jsxs("div",{className:"my-5",children:[d.jsx("h5",{className:q.paragraphSubText,children:u.subtitle}),d.jsx("h4",{className:`${q.headText} mb-10`,children:u.title}),d.jsx("div",{children:u.sections.map((f,m)=>d.jsxs("div",{className:"my-4",children:[d.jsx("h6",{className:q.paragraphSubText,children:f.name}),d.jsx("p",{onMouseUp:r,className:q.paragraphSubTextLower,children:f.paragraph})]},m))})]},u.id)),e&&d.jsxs("div",{className:"absolute text-left bg-white p-4 shadow-lg rounded-lg max-w-xs text-black",style:{left:i.left,top:i.top,zIndex:100},children:[d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsx("p",{className:q.dictionaryText,children:e}),d.jsx("i",{className:"fas fa-volume-up ml-5 text-gray-600"})]}),d.jsx("hr",{className:"border-2 mb-2"}),d.jsx("p",{children:t})]}),d.jsxs("div",{className:"mt-10 text-center flex justify-between",children:[d.jsx("button",{onClick:c,className:"px-6 py-2 border justify-end text-white rounded-lg hover:bg-gray-500",children:"Previous Article"}),d.jsx("button",{onClick:l,className:"px-6 py-2 border justify-end text-white rounded-lg hover:bg-gray-500",children:"Next Article"})]})]})}),s&&d.jsx("button",{onClick:a,className:"fixed bottom-6 right-6 w-12 h-12 bg-gray-600 text-white rounded-full shadow-lg flex items-center justify-center hover:bg-gray-800 transition-all duration-300",children:d.jsx("i",{className:"fas fa-arrow-up"})})]})},ome=Bt(sme),ame=[{id:"public_officers",title:"Accountability of Public Officers",subtitle:"ARTICLE XI",sections:[{name:"Section 1",paragraph:["Public office is a public trust. Public officers and employees must at all times be accountable to the people, serve them with utmost responsibility, integrity, loyalty, and efficiency, act with patriotism and justice, and lead modest lives."]},{name:"Section 2",paragraph:["The President, the Vice-President, the Members of the Supreme Court, the Members of the Constitutional Commissions, and the Ombudsman may be removed from office, on impeachment for, and conviction of, culpable violation of the Constitution, treason, bribery, graft and corruption, other high crimes, or betrayal of public trust.","All other public officers and employees may be removed from office as provided by law, but not by impeachment."]},{name:"Section 3",paragraph:["(1) The House of Representatives shall have the exclusive power to initiate all cases of impeachment.","(2) A verified complaint for impeachment may be filed by any Member of the House of Representatives or by any citizen upon a resolution of endorsement by any Member thereof, which shall be included in the Order of Business within ten session days, and referred to the proper Committee within three session days thereafter. The Committee, after hearing, and by a majority vote of all its Members, shall submit its report to the House within sixty session days from such referral, together with the corresponding resolution. The resolution shall be calendared for consideration by the House within ten session days from receipt thereof.","(3) A vote of at least one-third of all the Members of the House shall be necessary either to affirm a favorable resolution with the Articles of Impeachment of the Committee, or override its contrary resolution. The vote of each Member shall be recorded.","(4) In case the verified complaint or resolution of impeachment is filed by at least one-third of all the Members of the House, the same shall constitute the Articles of Impeachment, and trial by the Senate shall forthwith proceed.","(5) No impeachment proceedings shall be initiated against the same official more than once within a period of one year.","(6) The Senate shall have the sole power to try and decide all cases of impeachment. When sitting for that purpose, the Senators shall be on oath or affirmation. When the President of the Philippines is on trial, the Chief Justice of the Supreme Court shall preside, but shall not vote. No person shall be convicted without the concurrence of two-thirds of all the Members of the Senate.","(7) Judgment in cases of impeachment shall not extend further than removal from office and disqualification to hold any office under the Republic of the Philippines, but the party convicted shall nevertheless be liable and subject to prosecution, trial, and punishment according to law.","(8) The Congress shall promulgate its rules on impeachment to effectively carry out the purpose of this section."]},{name:"Section 4",paragraph:["The present anti-graft court known as the Sandiganbayan shall continue to function and exercise its jurisdiction as now or hereafter may be provided by law."]},{name:"Section 5",paragraph:["There is hereby created the independent Office of the Ombudsman, composed of the Ombudsman to be known as Tanodbayan, one overall Deputy and at least one Deputy each for Luzon, Visayas, and Mindanao. A separate Deputy for the military establishment may likewise be appointed."]},{name:"Section 6",paragraph:["The officials and employees of the Office of the Ombudsman, other than the Deputies, shall be appointed by the Ombudsman according to the Civil Service Law."]},{name:"Section 7",paragraph:["The existing Tanodbayan shall hereafter be known as the Office of the Special Prosecutor. It shall continue to function and exercise its powers as now or hereafter may be provided by law, except those conferred on the Office of the Ombudsman created under this Constitution."]},{name:"Section 8",paragraph:["The Ombudsman and his Deputies shall be natural-born citizens of the Philippines, and at the time of their appointment, at least forty years old, of recognized probity and independence, and members of the Philippine Bar, and must not have been candidates for any elective office in the immediately preceding election. The Ombudsman must have for ten years or more been a judge or engaged in the practice of law in the Philippines.","During their tenure, they shall be subject to the same disqualifications and prohibitions as provided for in Section 2 of Article IX-A of this Constitution."]},{name:"Section 9",paragraph:["The Ombudsman and his Deputies shall be appointed by the President from a list of at least six nominees prepared by the Judicial and Bar Council, and from a list of three nominees for every vacancy thereafter. Such appointments shall require no confirmation. All vacancies shall be filled within three months after they occur."]},{name:"Section 10",paragraph:["The Ombudsman and his Deputies shall have the rank of Chairman and Members, respectively, of the Constitutional Commissions, and they shall receive the same salary, which shall not be decreased during their term of office."]},{name:"Section 11",paragraph:["The Ombudsman and his Deputies shall serve for a term of seven years without reappointment. They shall not be qualified to run for any office in the election immediately succeeding their cessation from office."]},{name:"Section 12",paragraph:["The Ombudsman and his Deputies, as protectors of the people, shall act promptly on complaints filed in any form or manner against public officials or employees of the Government, or any subdivision, agency or instrumentality thereof, including government-owned or controlled corporations, and shall, in appropriate cases, notify the complainants of the action taken and the result thereof."]},{name:"Section 13",paragraph:["(1) Investigate on its own, or on complaint by any person, any act or omission of any public official, employee, office or agency, when such act or omission appears to be illegal, unjust, improper, or inefficient.","(2) Direct, upon complaint or at its own instance, any public official or employee of the Government, or any subdivision, agency or instrumentality thereof, as well as of any government-owned or controlled corporation with original charter, to perform and expedite any act or duty required by law, or to stop, prevent, and correct any abuse or impropriety in the performance of duties.","(3) Direct the officer concerned to take appropriate action against a public official or employee at fault, and recommend his removal, suspension, demotion, fine, censure, or prosecution, and ensure compliance therewith.","(4) Direct the officer concerned, in any appropriate case, and subject to such limitations as may be provided by law, to furnish it with copies of documents relating to contracts or transactions entered into by his office involving the disbursement or use of public funds or properties, and report any irregularity to the Commission on Audit for appropriate action.","(5) Request any government agency for assistance and information necessary in the discharge of its responsibilities, and to examine, if necessary, pertinent records and documents.","(6) Publicize matters covered by its investigation when circumstances so warrant and with due prudence.","(7) Determine the causes of inefficiency, red tape, mismanagement, fraud, and corruption in the Government and make recommendations for their elimination and the observance of high standards of ethics and efficiency.","(8) Promulgate its rules of procedure and exercise such other powers or perform such functions or duties as may be provided by law."]},{name:"Section 14",paragraph:["The Office of the Ombudsman shall enjoy fiscal autonomy. Its approved annual appropriations shall be automatically and regularly released."]},{name:"Section 15",paragraph:["The right of the State to recover properties unlawfully acquired by public officials or employees, from them or from their nominees or transferees, shall not be barred by prescription, laches, or estoppel."]},{name:"Section 16",paragraph:["No loan, guaranty, or other form of financial accommodation for any business purpose may be granted, directly or indirectly, by any government-owned or controlled bank or financial institution to the President, the Vice-President, the Members of the Cabinet, the Congress, the Supreme Court, and the Constitutional Commissions, the Ombudsman, or to any firm or entity in which they have controlling interest, during their tenure."]},{name:"Section 17",paragraph:["A public officer or employee shall, upon assumption of office and as often thereafter as may be required by law, submit a declaration under oath of his assets, liabilities, and net worth. In the case of the President, the Vice-President, the Members of the Cabinet, the Congress, the Supreme Court, the Constitutional Commissions and other constitutional offices, and officers of the armed forces with general or flag rank, the declaration shall be disclosed to the public in the manner provided by law."]},{name:"Section 18",paragraph:["Public officers and employees owe the State and this Constitution allegiance at all times, and any public officer or employee who seeks to change his citizenship or acquire the status of an immigrant of another country during his tenure shall be dealt with by law."]}]}],lme=()=>{const n=qt(),{selectedWord:e,definition:t,tooltipPosition:i,handleTextSelection:r}=Fn(),[s,o]=V.useState(!1);V.useEffect(()=>{const u=()=>{window.scrollY>200?o(!0):o(!1)};return window.addEventListener("scroll",u),()=>window.removeEventListener("scroll",u)},[]);const a=()=>{window.scrollTo({top:0,behavior:"smooth"})},l=()=>{n("/articleTwelve")},c=()=>{n("/articleTen")};return d.jsxs("div",{className:"text-spacing-3 leading-relaxed tracking-wide",children:[d.jsx(Ln,{children:d.jsxs("div",{children:[ame.map(u=>d.jsxs("div",{className:"my-5",children:[d.jsx("h5",{className:q.paragraphSubText,children:u.subtitle}),d.jsx("h4",{className:`${q.headText} mb-10`,children:u.title}),d.jsx("div",{children:u.sections.map((f,m)=>d.jsxs("div",{className:"my-4",children:[d.jsx("h6",{className:q.paragraphSubText,children:f.name}),d.jsx("p",{onMouseUp:r,className:q.paragraphSubTextLower,children:f.paragraph})]},m))})]},u.id)),e&&d.jsxs("div",{className:"absolute text-left bg-white p-4 shadow-lg rounded-lg max-w-xs text-black",style:{left:i.left,top:i.top,zIndex:100},children:[d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsx("p",{className:q.dictionaryText,children:e}),d.jsx("i",{className:"fas fa-volume-up ml-5 text-gray-600"})]}),d.jsx("hr",{className:"border-2 mb-2"}),d.jsx("p",{children:t})]}),d.jsxs("div",{className:"mt-10 text-center flex justify-between",children:[d.jsx("button",{onClick:c,className:"px-6 py-2 border justify-end text-white rounded-lg hover:bg-gray-500",children:"Previous Article"}),d.jsx("button",{onClick:l,className:"px-6 py-2 border justify-end text-white rounded-lg hover:bg-gray-500",children:"Next Article"})]})]})}),s&&d.jsx("button",{onClick:a,className:"fixed bottom-6 right-6 w-12 h-12 bg-gray-600 text-white rounded-full shadow-lg flex items-center justify-center hover:bg-gray-800 transition-all duration-300",children:d.jsx("i",{className:"fas fa-arrow-up"})})]})},cme=Bt(lme),ume=[{id:"economy_and_patrimony",title:"National Economy and Patrimony",subtitle:"ARTICLE XII",sections:[{name:"Section 1",paragraph:["The goals of the national economy are a more equitable distribution of opportunities, income, and wealth; a sustained increase in the amount of goods and services produced by the nation for the benefit of the people; and an expanding productivity as the key to raising the quality of life for all, especially the underprivileged.","The State shall promote industrialization and full employment based on sound agricultural development and agrarian reform, through industries that make full and efficient use of human and natural resources, and which are competitive in both domestic and foreign markets. However, the State shall protect Filipino enterprises against unfair foreign competition and trade practices.","In the pursuit of these goals, all sectors of the economy and all regions of the country shall be given optimum opportunity to develop. Private enterprises, including corporations, cooperatives, and similar collective organizations, shall be encouraged to broaden the base of their ownership."]},{name:"Section 2",paragraph:["All lands of the public domain, waters, minerals, coal, petroleum, and other mineral oils, all forces of potential energy, fisheries, forests or timber, wildlife, flora and fauna, and other natural resources are owned by the State. With the exception of agricultural lands, all other natural resources shall not be alienated. The exploration, development, and utilization of natural resources shall be under the full control and supervision of the State.","The State may directly undertake such activities, or it may enter into co-production, joint venture, or production-sharing agreements with Filipino citizens, or corporations or associations at least sixty per centum of whose capital is owned by such citizens. Such agreements may be for a period not exceeding twenty-five years, renewable for not more than twenty-five years, and under such terms and conditions as may be provided by law. In cases of water rights for irrigation, water supply, fisheries, or industrial uses other than the development of water power, beneficial use may be the measure and limit of the grant.","The State shall protect the nation’s marine wealth in its archipelagic waters, territorial sea, and exclusive economic zone, and reserve its use and enjoyment exclusively to Filipino citizens.","The Congress may, by law, allow small-scale utilization of natural resources by Filipino citizens, as well as cooperative fish farming, with priority to subsistence fishermen and fishworkers in rivers, lakes, bays, and lagoons.","The President may enter into agreements with foreign-owned corporations involving either technical or financial assistance for large-scale exploration, development, and utilization of minerals, petroleum, and other mineral oils according to the general terms and conditions provided by law, based on real contributions to the economic growth and general welfare of the country. In such agreements, the State shall promote the development and use of local scientific and technical resources.","The President shall notify the Congress of every contract entered into in accordance with this provision, within thirty days from its execution."]},{name:"Section 3",paragraph:["Lands of the public domain are classified into agricultural, forest or timber, mineral lands, and national parks. Agricultural lands of the public domain may be further classified by law according to the uses which they may be devoted. Alienable lands of the public domain shall be limited to agricultural lands. Private corporations or associations may not hold such alienable lands of the public domain except by lease, for a period not exceeding twenty-five years, renewable for not more than twenty-five years, and not to exceed one thousand hectares in area. Citizens of the Philippines may lease not more than five hundred hectares, or acquire not more than twelve hectares thereof by purchase, homestead, or grant.","Taking into account the requirements of conservation, ecology, and development, and subject to the requirements of agrarian reform, the Congress shall determine, by law, the size of lands of the public domain which may be acquired, developed, held, or leased and the conditions therefor."]},{name:"Section 4",paragraph:"The Congress shall, as soon as possible, determine by law the specific limits of forest lands and national parks, marking clearly their boundaries on the ground. Thereafter, such forest lands and national parks shall be conserved and may not be increased nor diminished, except by law. The Congress shall provide, for such period as it may determine, measures to prohibit logging in endangered forests and watershed areas."},{name:"Section 5",paragraph:["The State, subject to the provisions of this Constitution and national development policies and programs, shall protect the rights of indigenous cultural communities to their ancestral lands to ensure their economic, social, and cultural well-being.","The Congress may provide for the applicability of customary laws governing property rights or relations in determining the ownership and extent of ancestral domain."]},{name:"Section 6",paragraph:"The use of property bears a social function, and all economic agents shall contribute to the common good. Individuals and private groups, including corporations, cooperatives, and similar collective organizations, shall have the right to own, establish, and operate economic enterprises, subject to the duty of the State to promote distributive justice and to intervene when the common good so demands."},{name:"Section 7",paragraph:"Save in cases of hereditary succession, no private lands shall be transferred or conveyed except to individuals, corporations, or associations qualified to acquire or hold lands of the public domain."},{name:"Section 8",paragraph:"Notwithstanding the provisions of Section 7 of this Article, a natural-born citizen of the Philippines who has lost his Philippine citizenship may be a transferee of private lands, subject to limitations provided by law."},{name:"Section 9",paragraph:["The Congress may establish an independent economic and planning agency headed by the President, which shall, after consultations with the appropriate public agencies, various private sectors, and local government units, recommend to Congress, and implement continuing integrated and coordinated programs and policies for national development.","Until the Congress provides otherwise, the National Economic and Development Authority shall function as the independent planning agency of the government."]},{name:"Section 10",paragraph:["The Congress shall, upon recommendation of the economic and planning agency, when the national interest dictates, reserve to citizens of the Philippines or to corporations or associations at least sixty per centum of whose capital is owned by such citizens, or such higher percentage as Congress may prescribe, certain areas of investments. The Congress shall enact measures that will encourage the formation and operation of enterprises whose capital is wholly owned by Filipinos.","In the grant of rights, privileges, and concessions covering the national economy and patrimony, the State shall give preference to qualified Filipinos.","The State shall regulate and exercise authority over foreign investments within its national jurisdiction and in accordance with its national goals and priorities."]},{name:"Section 11",paragraph:["No franchise, certificate, or any other form of authorization for the operation of a public utility shall be granted except to citizens of the Philippines or to corporations or associations organized under the laws of the Philippines at least sixty per centum of whose capital is owned by such citizens, nor shall such franchise, certificate, or authorization be exclusive in character or for a longer period than fifty years. Neither shall any such franchise or right be granted except under the condition that it shall be subject to amendment, alteration, or repeal by the Congress when the common good so requires.","The State shall encourage equity participation in public utilities by the general public. The participation of foreign investors in the governing body of any public utility enterprise shall be limited to their proportionate share in its capital, and all the executive and managing officers of such corporation or association must be citizens of the Philippines."]},{name:"Section 12",paragraph:"The State shall promote the preferential use of Filipino labor, domestic materials and locally produced goods, and adopt measures that help make them competitive."},{name:"Section 13",paragraph:"The State shall pursue a trade policy that serves the general welfare and utilizes all forms and arrangements of exchange on the basis of equality and reciprocity."},{name:"Section 14",paragraph:["The sustained development of a reservoir of national talents consisting of Filipino scientists, entrepreneurs, professionals, managers, high-level technical manpower and skilled workers and craftsmen in all fields shall be promoted by the State. The State shall encourage appropriate technology and regulate its transfer for the national benefit.","The practice of all professions in the Philippines shall be limited to Filipino citizens, save in cases prescribed by law."]},{name:"Section 15",paragraph:"The Congress shall create an agency to promote the viability and growth of cooperatives as instruments for social justice and economic development."},{name:"Section 16",paragraph:"The Congress shall not, except by general law, provide for the formation, organization, or regulation of private corporations. Government-owned or controlled corporations may be created or established by special charters in the interest of the common good and subject to the test of economic viability."},{name:"Section 17",paragraph:"In times of national emergency, when the public interest so requires, the State may, during the emergency and under reasonable terms prescribed by it, temporarily take over or direct the operation of any privately owned public utility or business affected with public interest."},{name:"Section 18",paragraph:"The State may, in the interest of national welfare or defense, establish and operate vital industries and, upon payment of just compensation, transfer to public ownership utilities and other private enterprises to be operated by the Government."},{name:"Section 19",paragraph:"The State shall regulate or prohibit monopolies when the public interest so requires. No combinations in restraint of trade or unfair competition shall be allowed."},{name:"Section 20",paragraph:["The Congress shall establish central monetary authority, which shall provide policy direction in the areas of money, banking, and credit. It shall have supervision over the operations of banks and exercise such regulatory powers as may be provided by law over the operations of finance companies and other institutions performing similar functions.","Until the Congress otherwise provides, the Central Bank of the Philippines, operating under existing laws, shall function as the central monetary authority."]},{name:"Section 21",paragraph:"Foreign loans may only be incurred in accordance with law and the regulation of the monetary authority. Information on such loans shall be made available to the public."},{name:"Section 22",paragraph:"Acts which circumvent or negate any of the provisions of this Article shall be considered inimical to the national interest and subject to criminal and civil sanctions, as may be provided by law."}]}],hme=()=>{const n=qt(),{selectedWord:e,definition:t,tooltipPosition:i,handleTextSelection:r}=Fn(),[s,o]=V.useState(!1);V.useEffect(()=>{const u=()=>{window.scrollY>200?o(!0):o(!1)};return window.addEventListener("scroll",u),()=>window.removeEventListener("scroll",u)},[]);const a=()=>{window.scrollTo({top:0,behavior:"smooth"})},l=()=>{n("/articleThirteen")},c=()=>{n("/articleEleven")};return d.jsxs("div",{className:"text-spacing-3 leading-relaxed tracking-wide",children:[d.jsx(Ln,{children:d.jsxs("div",{children:[ume.map(u=>d.jsxs("div",{className:"my-5",children:[d.jsx("h5",{className:q.paragraphSubText,children:u.subtitle}),d.jsx("h4",{className:`${q.headText} mb-10`,children:u.title}),d.jsx("div",{children:u.sections.map((f,m)=>d.jsxs("div",{className:"my-4",children:[d.jsx("h6",{className:q.paragraphSubText,children:f.name}),d.jsx("p",{onMouseUp:r,className:q.paragraphSubTextLower,children:f.paragraph})]},m))})]},u.id)),e&&d.jsxs("div",{className:"absolute text-left bg-white p-4 shadow-lg rounded-lg max-w-xs text-black",style:{left:i.left,top:i.top,zIndex:100},children:[d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsx("p",{className:q.dictionaryText,children:e}),d.jsx("i",{className:"fas fa-volume-up ml-5 text-gray-600"})]}),d.jsx("hr",{className:"border-2 mb-2"}),d.jsx("p",{children:t})]}),d.jsxs("div",{className:"mt-10 text-center flex justify-between",children:[d.jsx("button",{onClick:c,className:"px-6 py-2 border justify-end text-white rounded-lg hover:bg-gray-500",children:"Previous Article"}),d.jsx("button",{onClick:l,className:"px-6 py-2 border justify-end text-white rounded-lg hover:bg-gray-500",children:"Next Article"})]})]})}),s&&d.jsx("button",{onClick:a,className:"fixed bottom-6 right-6 w-12 h-12 bg-gray-600 text-white rounded-full shadow-lg flex items-center justify-center hover:bg-gray-800 transition-all duration-300",children:d.jsx("i",{className:"fas fa-arrow-up"})})]})},dme=Bt(hme),fme=[{id:"justice_human_rights",title:"Social Justice and Human Rights",subtitle:"ARTICLE XIII",sections:[{name:"Section 1",paragraph:["The Congress shall give highest priority to the enactment of measures that protect and enhance the right of all the people to human dignity, reduce social, economic, and political inequalities, and remove cultural inequities by equitably diffusing wealth and political power for the common good.","To this end, the State shall regulate the acquisition, ownership, use, and disposition of property and its increments."]},{name:"Section 2",paragraph:"The promotion of social justice shall include the commitment to create economic opportunities based on freedom of initiative and self-reliance."}]}],pme=[{id:"labor",title:"Labor",sections:[{name:"Section 3",paragraph:["The State shall afford full protection to labor, local and overseas, organized and unorganized, and promote full employment and equality of employment opportunities for all.","It shall guarantee the rights of all workers to self-organization, collective bargaining and negotiations, and peaceful concerted activities, including the right to strike in accordance with law. They shall be entitled to security of tenure, humane conditions of work, and a living wage. They shall also participate in policy and decision-making processes affecting their rights and benefits as may be provided by law.","The State shall promote the principle of shared responsibility between workers and employers and the preferential use of voluntary modes in settling disputes, including conciliation, and shall enforce their mutual compliance therewith to foster industrial peace.","The State shall regulate the relations between workers and employers, recognizing the right of labor to its just share in the fruits of production and the right of enterprises to reasonable returns on investments, and to expansion and growth."]}]}],mme=[{id:"agrarian_reform",title:"Agrarian and Natural Resources Reform",sections:[{name:"Section 4",paragraph:"The State shall, by law, undertake an agrarian reform program founded on the right of farmers and regular farmworkers, who are landless, to own directly or collectively the lands they till or, in the case of other farmworkers, to receive a just share of the fruits thereof. To this end, the State shall encourage and undertake the just distribution of all agricultural lands, subject to such priorities and reasonable retention limits as the Congress may prescribe, taking into account ecological, developmental, or equity considerations, and subject to the payment of just compensation. In determining retention limits, the State shall respect the right of small landowners. The State shall further provide incentives for voluntary land-sharing."},{name:"Section 5",paragraph:"The State shall recognize the right of farmers, farmworkers, and landowners, as well as cooperatives, and other independent farmers’ organizations to participate in the planning, organization, and management of the program, and shall provide support to agriculture through appropriate technology and research, and adequate financial, production, marketing, and other support services"},{name:"Section 6",paragraph:["The State shall apply the principles of agrarian reform or stewardship, whenever applicable in accordance with law, in the disposition or utilization of other natural resources, including lands of the public domain under lease or concession suitable to agriculture, subject to prior rights, homestead rights of small settlers, and the rights of indigenous communities to their ancestral lands.","The State may resettle landless farmers and farmworkers in its own agricultural estates which shall be distributed to them in the manner provided by law."]},{name:"Section 7",paragraph:"The State shall protect the rights of subsistence fishermen, especially of local communities, to the preferential use of local marine and fishing resources, both inland and offshore. It shall provide support to such fishermen through appropriate technology and research, adequate financial, production, and marketing assistance, and other services. The State shall also protect, develop, and conserve such resources. The protection shall extend to offshore fishing grounds of subsistence fishermen against foreign intrusion. Fishworkers shall receive a just share from their labor in the utilization of marine and fishing resources."},{name:"Section 8",paragraph:"The State shall provide incentives to landowners to invest the proceeds of the agrarian reform program to promote industrialization, employment creation, and privatization of public sector enterprises. Financial instruments used as payment for their lands shall be honored as equity in enterprises of their choice."}]}],gme=[{id:"suff",title:"Urban Land Reform and Housing",sections:[{name:"Section 9",paragraph:"The State shall, by law, and for the common good, undertake, in cooperation with the public sector, a continuing program of urban land reform and housing which will make available at affordable cost decent housing and basic services to underprivileged and homeless citizens in urban centers and resettlements areas. It shall also promote adequate employment opportunities to such citizens. In the implementation of such program the State shall respect the rights of small property owners."},{name:"Section 10",paragraph:["Urban or rural poor dwellers shall not be evicted nor their dwellings demolished, except in accordance with law and in a just and humane manner.","No resettlement of urban or rural dwellers shall be undertaken without adequate consultation with them and the communities where they are to be relocated."]}]}],yme=[{id:"health",title:"Health",sections:[{name:"Section 11",paragraph:"The State shall adopt an integrated and comprehensive approach to health development which shall endeavor to make essential goods, health and other social services available to all the people at affordable cost. There shall be priority for the needs of the underprivileged sick, elderly, disabled, women, and children. The State shall endeavor to provide free medical care to paupers."},{name:"Section 12",paragraph:"The State shall establish and maintain an effective food and drug regulatory system and undertake appropriate health manpower development and research, responsive to the country’s health needs and problems."},{name:"Section 13",paragraph:"The State shall establish a special agency for disabled persons for rehabilitation, self-development and self-reliance, and their integration into the mainstream of society."}]}],vme=[{id:"women",title:"Women",sections:[{name:"Section 14",paragraph:"The State shall protect working women by providing safe and healthful working conditions, taking into account their maternal functions, and such facilities and opportunities that will enhance their welfare and enable them to realize their full potential in the service of the nation."}]}],xme=[{id:"people_orgs",title:"Role and Rights of People’s Organizations",sections:[{name:"Section 15",paragraph:["The State shall respect the role of independent people’s organizations to enable the people to pursue and protect, within the democratic framework, their legitimate and collective interests and aspirations through peaceful and lawful means.","The State shall respect the role of independent people’s organizations to enable the people to pursue and protect, within the democratic framework, their legitimate and collective interests and aspirations through peaceful and lawful means."]},{name:"Section 16",paragraph:"The right of the people and their organizations to effective and reasonable participation at all levels of social, political, and economic decision-making shall not be abridged. The State shall, by law, facilitate the establishment of adequate consultation mechanisms."}]}],_me=[{id:"human_rights",title:"Human Rights",sections:[{name:"Section 17",paragraph:["(1) There is hereby created an independent office called the Commission on Human Rights.","(2) The Commission shall be composed of a Chairman and four Members who must be natural-born citizens of the Philippines and a majority of whom shall be members of the Bar. The term of office and other qualifications and disabilities of the Members of the Commission shall be provided by law.","(3) Until this Commission is constituted, the existing Presidential Committee on Human Rights shall continue to exercise its present functions and powers.","(4) The approved annual appropriations of the Commission shall be automatically and regularly released."]},{name:"Section 18",paragraph:["The Commission on Human Rights shall have the following powers and functions:","(1) Investigate, on its own or on complaint by any party, all forms of human rights violations involving civil and political rights;","(2) Adopt its operational guidelines and rules of procedure, and cite for contempt for violations thereof in accordance with the Rules of Court;","(3) Provide appropriate legal measures for the protection of human rights of all persons within the Philippines, as well as Filipinos residing abroad, and provide for preventive measures and legal aid services to the underprivileged whose human rights have been violated or need protection;","(4) Exercise visitorial powers over jails, prisons, or detention facilities;","(5) Establish a continuing program of research, education, and information to enhance respect for the primacy of human rights;","(6) Recommend to the Congress effective measures to promote human rights and to provide for compensation to victims of violations of human rights, or their families;","(7) Monitor the Philippine Government’s compliance with international treaty obligations on human rights;","(8) Grant immunity from prosecution to any person whose testimony or whose possession of documents or other evidence is necessary or convenient to determine the truth in any investigation conducted by it or under its authority;","(9) Request the assistance of any department, bureau, office, or agency in the performance of its functions;","(10) Appoint its officers and employees in accordance with law; and","(11) Perform such other duties and functions as may be provided by law."]},{name:"Section 19",paragraph:"The Congress may provide for other cases of violations of human rights that should fall within the authority of the Commission, taking into account its recommendations."}]}],wme=()=>{const n=qt(),{selectedWord:e,definition:t,tooltipPosition:i,handleTextSelection:r}=Fn(),[s,o]=V.useState(!1);V.useEffect(()=>{const u=()=>{window.scrollY>200?o(!0):o(!1)};return window.addEventListener("scroll",u),()=>window.removeEventListener("scroll",u)},[]);const a=()=>{window.scrollTo({top:0,behavior:"smooth"})},l=()=>{n("/articleFourteen")},c=()=>{n("/articleTwelve")};return d.jsxs("div",{className:"text-spacing-3 leading-relaxed tracking-wide",children:[d.jsx(Ln,{children:d.jsxs("div",{children:[fme.map(u=>d.jsxs("div",{className:"my-5",children:[d.jsx("h5",{className:q.paragraphSubText,children:u.subtitle}),d.jsx("h4",{className:`${q.headText} mb-10`,children:u.title}),d.jsx("div",{children:u.sections.map((f,m)=>d.jsxs("div",{className:"my-4",children:[d.jsx("h6",{className:q.paragraphSubText,children:f.name}),d.jsx("p",{onMouseUp:r,className:q.paragraphSubTextLower,children:f.paragraph})]},m))})]},u.id)),d.jsx("br",{}),pme.map(u=>d.jsxs("div",{className:"my-5",children:[d.jsx("h5",{className:q.paragraphHeadText,children:u.title}),d.jsx("div",{children:u.sections.map((f,m)=>d.jsxs("div",{className:"my-4",children:[d.jsx("h6",{className:q.paragraphSubText,children:f.name}),d.jsx("p",{onMouseUp:r,className:q.paragraphSubTextLower,children:f.paragraph})]},m))})]},u.id)),d.jsx("br",{}),mme.map(u=>d.jsxs("div",{className:"my-5",children:[d.jsx("h5",{className:q.paragraphSubText,children:u.subtitle}),d.jsx("h4",{className:`${q.headText} mb-10`,children:u.title}),d.jsx("div",{children:u.sections.map((f,m)=>d.jsxs("div",{className:"my-4",children:[d.jsx("h6",{className:q.paragraphSubText,children:f.name}),d.jsx("p",{onMouseUp:r,className:q.paragraphSubTextLower,children:f.paragraph})]},m))})]},u.id)),d.jsx("br",{}),gme.map(u=>d.jsxs("div",{className:"my-5",children:[d.jsx("h5",{className:q.paragraphSubText,children:u.subtitle}),d.jsx("h4",{className:`${q.headText} mb-10`,children:u.title}),d.jsx("div",{children:u.sections.map((f,m)=>d.jsxs("div",{className:"my-4",children:[d.jsx("h6",{className:q.paragraphSubText,children:f.name}),d.jsx("p",{onMouseUp:r,className:q.paragraphSubTextLower,children:f.paragraph})]},m))})]},u.id)),d.jsx("br",{}),yme.map(u=>d.jsxs("div",{className:"my-5",children:[d.jsx("h5",{className:q.paragraphSubText,children:u.subtitle}),d.jsx("h4",{className:`${q.headText} mb-10`,children:u.title}),d.jsx("div",{children:u.sections.map((f,m)=>d.jsxs("div",{className:"my-4",children:[d.jsx("h6",{className:q.paragraphSubText,children:f.name}),d.jsx("p",{onMouseUp:r,className:q.paragraphSubTextLower,children:f.paragraph})]},m))})]},u.id)),d.jsx("br",{}),vme.map(u=>d.jsxs("div",{className:"my-5",children:[d.jsx("h5",{className:q.paragraphSubText,children:u.subtitle}),d.jsx("h4",{className:`${q.headText} mb-10`,children:u.title}),d.jsx("div",{children:u.sections.map((f,m)=>d.jsxs("div",{className:"my-4",children:[d.jsx("h6",{className:q.paragraphSubText,children:f.name}),d.jsx("p",{onMouseUp:r,className:q.paragraphSubTextLower,children:f.paragraph})]},m))})]},u.id)),d.jsx("br",{}),xme.map(u=>d.jsxs("div",{className:"my-5",children:[d.jsx("h5",{className:q.paragraphSubText,children:u.subtitle}),d.jsx("h4",{className:`${q.headText} mb-10`,children:u.title}),d.jsx("div",{children:u.sections.map((f,m)=>d.jsxs("div",{className:"my-4",children:[d.jsx("h6",{className:q.paragraphSubText,children:f.name}),d.jsx("p",{onMouseUp:r,className:q.paragraphSubTextLower,children:f.paragraph})]},m))})]},u.id)),d.jsx("br",{}),_me.map(u=>d.jsxs("div",{className:"my-5",children:[d.jsx("h5",{className:q.paragraphSubText,children:u.subtitle}),d.jsx("h4",{className:`${q.headText} mb-10`,children:u.title}),d.jsx("div",{children:u.sections.map((f,m)=>d.jsxs("div",{className:"my-4",children:[d.jsx("h6",{className:q.paragraphSubText,children:f.name}),d.jsx("p",{onMouseUp:r,className:q.paragraphSubTextLower,children:f.paragraph})]},m))})]},u.id)),d.jsx("br",{}),e&&d.jsxs("div",{className:"absolute text-left bg-white p-4 shadow-lg rounded-lg max-w-xs text-black",style:{left:i.left,top:i.top,zIndex:100},children:[d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsx("p",{className:q.dictionaryText,children:e}),d.jsx("i",{className:"fas fa-volume-up ml-5 text-gray-600"})]}),d.jsx("hr",{className:"border-2 mb-2"}),d.jsx("p",{children:t})]}),d.jsxs("div",{className:"mt-10 text-center flex justify-between",children:[d.jsx("button",{onClick:c,className:"px-6 py-2 border justify-end text-white rounded-lg hover:bg-gray-500",children:"Previous Article"}),d.jsx("button",{onClick:l,className:"px-6 py-2 border justify-end text-white rounded-lg hover:bg-gray-500",children:"Next Article"})]})]})}),s&&d.jsx("button",{onClick:a,className:"fixed bottom-6 right-6 w-12 h-12 bg-gray-600 text-white rounded-full shadow-lg flex items-center justify-center hover:bg-gray-800 transition-all duration-300",children:d.jsx("i",{className:"fas fa-arrow-up"})})]})},bme=Bt(wme),Sme=[{id:"education",title:"Education",subtitle:"ARTICLE XIV - Education, Science and Technology, Arts, Culture, and Sports",sections:[{name:"Section 1",paragraph:"The State shall protect and promote the right of all citizens to quality education at all levels and shall take appropriate steps to make such education accessible to all."},{name:"Section 2",paragraph:["(1) Establish, maintain, and support a complete, adequate, and integrated system of education relevant to the needs of the people and society.","(2) Establish and maintain a system of free public education in the elementary and high school levels. Without limiting the natural right of parents to rear their children, elementary education is compulsory for all children of school age.","(3) Establish and maintain a system of scholarship grants, student loan programs, subsidies, and other incentives which shall be available to deserving students in both public and private schools, especially to the underprivileged.","(4) Encourage non-formal, informal, and indigenous learning systems, as well as self-learning, independent, and out-of-school study programs particularly those that respond to community needs.","(5) Provide adult citizens, the disabled, and out-of-school youth with training in civics, vocational efficiency, and other skills."]},{name:"Section 3",paragraph:["(1) All educational institutions shall include the study of the Constitution as part of the curricula.","(2) They shall inculcate patriotism and nationalism, foster love of humanity, respect for human rights, appreciation of the role of national heroes in the historical development of the country, teach the rights and duties of citizenship, strengthen ethical and spiritual values, develop moral character and personal discipline, encourage critical and creative thinking, broaden scientific and technological knowledge, and promote vocational efficiency.","(3) At the option expressed in writing by the parents or guardians, religion shall be allowed to be taught to their children or wards in public elementary and high schools within the regular class hours by instructors designated or approved by the religious authorities of the religion to which the children or wards belong, without additional cost to the Government."]},{name:"Section 4",paragraph:["(1) The State recognizes the complementary roles of public and private institutions in the educational system and shall exercise reasonable supervision and regulation of all educational institutions.","(2) Educational institutions, other than those established by religious groups and mission boards, shall be owned solely by citizens of the Philippines or corporations or associations at least sixty per centum of the capital of which is owned by such citizens. The Congress may, however, require increased Filipino equity participation in all educational institutions.","The control and administration of educational institutions shall be vested in citizens of the Philippines.","No educational institution shall be established exclusively for aliens and no group of aliens shall comprise more than one-third of the enrollment in any school. The provisions of this subsection shall not apply to schools established for foreign diplomatic personnel and their dependents and, unless otherwise provided by law, for other foreign temporary residents.","(3) All revenues and assets of non-stock, non-profit educational institutions used actually, directly, and exclusively for educational purposes shall be exempt from taxes and duties. Upon the dissolution or cessation of the corporate existence of such institutions, their assets shall be disposed of in the manner provided by law.","Proprietary educational institutions, including those cooperatively owned, may likewise be entitled to such exemptions subject to the limitations provided by law including restrictions on dividends and provisions for reinvestment.","(4) Subject to conditions prescribed by law, all grants, endowments, donations, or contributions used actually, directly, and exclusively for educational purposes shall be exempt from tax."]},{name:"Section 5",paragraph:["(1) The State shall take into account regional and sectoral needs and conditions and shall encourage local planning in the development of educational policies and programs.","(2) Academic freedom shall be enjoyed in all institutions of higher learning.","(3) Every citizen has a right to select a profession or course of study, subject to fair, reasonable, and equitable admission and academic requirements.","(4) The State shall enhance the right of teachers to professional advancement. Non-teaching academic and non-academic personnel shall enjoy the protection of the State.","(5) The State shall assign the highest budgetary priority to education and ensure that teaching will attract and retain its rightful share of the best available talents through adequate remuneration and other means of job satisfaction and fulfillment."]}]}],Tme=[{id:"language",title:"Language",subtitle:"ARTICLE XIV",sections:[{name:"Section 6",paragraph:"The national language of the Philippines is Filipino. As it evolves, it shall be further developed and enriched on the basis of existing Philippine and other languages. Subject to provisions of law and as the Congress may deem appropriate, the Government shall take steps to initiate and sustain the use of Filipino as a medium of official communication and as language of instruction in the educational system."},{name:"Section 7",paragraph:["For purposes of communication and instruction, the official languages of the Philippines are Filipino and, until otherwise provided by law, English.","The regional languages are the auxiliary official languages in the regions and shall serve as auxiliary media of instruction therein.","Spanish and Arabic shall be promoted on a voluntary and optional basis."]},{name:"Section 8",paragraph:"This Constitution shall be promulgated in Filipino and English and shall be translated into major regional languages, Arabic, and Spanish."},{name:"Section 9",paragraph:"The Congress shall establish a national language commission composed of representatives of various regions and disciplines which shall undertake, coordinate, and promote researches for the development, propagation, and preservation of Filipino and other languages."}]}],Eme=[{id:"science_Tech",title:"Science and Technology",subtitle:"ARTICLE XIV",sections:[{name:"Section 10",paragraph:"Science and technology are essential for national development and progress. The State shall give priority to research and development, invention, innovation, and their utilization; and to science and technology education, training, and services. It shall support indigenous, appropriate, and self-reliant scientific and technological capabilities, and their application to the country’s productive systems and national life."},{name:"Section 11",paragraph:["The Congress may provide for incentives, including tax deductions, to encourage private participation in programs of basic and applied scientific research.","Scholarships, grants-in-aid, or other forms of incentives shall be provided to deserving science students, researchers, scientists, inventors, technologists, and specially gifted citizens."]},{name:"Section 12",paragraph:"The State shall regulate the transfer and promote the adaptation of technology from all sources for the national benefit. It shall encourage the widest participation of private groups, local governments, and community-based organizations in the generation and utilization of science and technology."},{name:"Section 13",paragraph:"The State shall protect and secure the exclusive rights of scientists, inventors, artists, and other gifted citizens to their intellectual property and creations, particularly when beneficial to the people, for such period as may be provided by law."}]}],Cme=[{id:"arts_Culture",title:"Arts and Culture",subtitle:"ARTICLE XIV",sections:[{name:"Section 14",paragraph:"The State shall foster the preservation, enrichment, and dynamic evolution of a Filipino national culture based on the principle of unity in diversity in a climate of free artistic and intellectual expression."},{name:"Section 15",paragraph:"Arts and letters shall enjoy the patronage of the State. The State shall conserve, promote, and popularize the nation’s historical and cultural heritage and resources, as well as artistic creations."},{name:"Section 16",paragraph:"All the country’s artistic and historic wealth constitutes the cultural treasure of the nation and shall be under the protection of the State which may regulate its disposition."},{name:"Section 17",paragraph:"The State shall recognize, respect, and protect the rights of indigenous cultural communities to preserve and develop their cultures, traditions, and institutions. It shall consider these rights in the formulation of national plans and policies."},{name:"Section 18",paragraph:["(1) The State shall ensure equal access to cultural opportunities through the educational system, public or private cultural entities, scholarships, grants and other incentives, and community cultural centers, and other public venues.","(2) The State shall encourage and support researches and studies on the arts and culture."]}]}],Ame=[{id:"sport",title:"Sports",subtitle:"ARTICLE XIV",sections:[{name:"Section 19",paragraph:["(1) The State shall promote physical education and encourage sports programs, league competitions, and amateur sports, including training for international competitions, to foster self-discipline, teamwork, and excellence for the development of a healthy and alert citizenry.","(2) All educational institutions shall undertake regular sports activities throughout the country in cooperation with athletic clubs and other sectors."]}]}],Mme=()=>{const n=qt(),{selectedWord:e,definition:t,tooltipPosition:i,handleTextSelection:r}=Fn(),[s,o]=V.useState(!1);V.useEffect(()=>{const u=()=>{window.scrollY>200?o(!0):o(!1)};return window.addEventListener("scroll",u),()=>window.removeEventListener("scroll",u)},[]);const a=()=>{window.scrollTo({top:0,behavior:"smooth"})},l=()=>{n("/articleFifteen")},c=()=>{n("/articleThirteen")};return d.jsxs("div",{className:"text-spacing-3 leading-relaxed tracking-wide",children:[d.jsx(Ln,{children:d.jsxs("div",{children:[Sme.map(u=>d.jsxs("div",{className:"my-5",children:[d.jsx("h5",{className:q.paragraphSubText,children:u.subtitle}),d.jsx("h4",{className:`${q.headText} mb-10`,children:u.title}),d.jsx("div",{children:u.sections.map((f,m)=>d.jsxs("div",{className:"my-4",children:[d.jsx("h6",{className:q.paragraphSubText,children:f.name}),d.jsx("p",{onMouseUp:r,className:q.paragraphSubTextLower,children:f.paragraph})]},m))})]},u.id)),d.jsx("br",{}),Tme.map(u=>d.jsxs("div",{className:"my-5",children:[d.jsx("h5",{className:q.paragraphHeadText,children:u.title}),d.jsx("div",{children:u.sections.map((f,m)=>d.jsxs("div",{className:"my-4",children:[d.jsx("h6",{className:q.paragraphSubText,children:f.name}),d.jsx("p",{onMouseUp:r,className:q.paragraphSubTextLower,children:f.paragraph})]},m))})]},u.id)),d.jsx("br",{}),Eme.map(u=>d.jsxs("div",{className:"my-5",children:[d.jsx("h5",{className:q.paragraphSubText,children:u.subtitle}),d.jsx("h4",{className:`${q.headText} mb-10`,children:u.title}),d.jsx("div",{children:u.sections.map((f,m)=>d.jsxs("div",{className:"my-4",children:[d.jsx("h6",{className:q.paragraphSubText,children:f.name}),d.jsx("p",{onMouseUp:r,className:q.paragraphSubTextLower,children:f.paragraph})]},m))})]},u.id)),d.jsx("br",{}),Cme.map(u=>d.jsxs("div",{className:"my-5",children:[d.jsx("h5",{className:q.paragraphSubText,children:u.subtitle}),d.jsx("h4",{className:`${q.headText} mb-10`,children:u.title}),d.jsx("div",{children:u.sections.map((f,m)=>d.jsxs("div",{className:"my-4",children:[d.jsx("h6",{className:q.paragraphSubText,children:f.name}),d.jsx("p",{onMouseUp:r,className:q.paragraphSubTextLower,children:f.paragraph})]},m))})]},u.id)),d.jsx("br",{}),Ame.map(u=>d.jsxs("div",{className:"my-5",children:[d.jsx("h5",{className:q.paragraphSubText,children:u.subtitle}),d.jsx("h4",{className:`${q.headText} mb-10`,children:u.title}),d.jsx("div",{children:u.sections.map((f,m)=>d.jsxs("div",{className:"my-4",children:[d.jsx("h6",{className:q.paragraphSubText,children:f.name}),d.jsx("p",{onMouseUp:r,className:q.paragraphSubTextLower,children:f.paragraph})]},m))})]},u.id)),d.jsx("br",{}),e&&d.jsxs("div",{className:"absolute text-left bg-white p-4 shadow-lg rounded-lg max-w-xs text-black",style:{left:i.left,top:i.top,zIndex:100},children:[d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsx("p",{className:q.dictionaryText,children:e}),d.jsx("i",{className:"fas fa-volume-up ml-5 text-gray-600"})]}),d.jsx("hr",{className:"border-2 mb-2"}),d.jsx("p",{children:t})]}),d.jsxs("div",{className:"mt-10 text-center flex justify-between",children:[d.jsx("button",{onClick:c,className:"px-6 py-2 border justify-end text-white rounded-lg hover:bg-gray-500",children:"Previous Article"}),d.jsx("button",{onClick:l,className:"px-6 py-2 border justify-end text-white rounded-lg hover:bg-gray-500",children:"Next Article"})]})]})}),s&&d.jsx("button",{onClick:a,className:"fixed bottom-6 right-6 w-12 h-12 bg-gray-600 text-white rounded-full shadow-lg flex items-center justify-center hover:bg-gray-800 transition-all duration-300",children:d.jsx("i",{className:"fas fa-arrow-up"})})]})},Ime=Bt(Mme),Pme=[{id:"family",title:"The Family",subtitle:"ARTICLE XV",sections:[{name:"Section 1",paragraph:"The State recognizes the Filipino family as the foundation of the nation. Accordingly, it shall strengthen its solidarity and actively promote its total development."},{name:"Section 2",paragraph:"Marriage, as an inviolable social institution, is the foundation of the family and shall be protected by the State."},{name:"Section 3",paragraph:["(1) The right of spouses to found a family in accordance with their religious convictions and the demands of responsible parenthood.","(2) The right of children to assistance, including proper care and nutrition, and special protection from all forms of neglect, abuse, cruelty, exploitation, and other conditions prejudicial to their development.","(3) The right of the family to a family living wage and income.","(4) The right of families or family associations to participate in the planning and implementation of policies and programs that affect them."]},{name:"Section 4",paragraph:"The family has the duty to care for its elderly members but the State may also do so through just programs of social security."}]}],Rme=()=>{const n=qt(),{selectedWord:e,definition:t,tooltipPosition:i,handleTextSelection:r}=Fn(),[s,o]=V.useState(!1);V.useEffect(()=>{const u=()=>{window.scrollY>200?o(!0):o(!1)};return window.addEventListener("scroll",u),()=>window.removeEventListener("scroll",u)},[]);const a=()=>{window.scrollTo({top:0,behavior:"smooth"})},l=()=>{n("/articleSixteen")},c=()=>{n("/articleFourteen")};return d.jsxs("div",{className:"text-spacing-3 leading-relaxed tracking-wide",children:[d.jsx(Ln,{children:d.jsxs("div",{children:[Pme.map(u=>d.jsxs("div",{className:"my-5",children:[d.jsx("h5",{className:q.paragraphSubText,children:u.subtitle}),d.jsx("h4",{className:`${q.headText} mb-10`,children:u.title}),d.jsx("div",{children:u.sections.map((f,m)=>d.jsxs("div",{className:"my-4",children:[d.jsx("h6",{className:q.paragraphSubText,children:f.name}),d.jsx("p",{onMouseUp:r,className:q.paragraphSubTextLower,children:f.paragraph})]},m))})]},u.id)),e&&d.jsxs("div",{className:"absolute text-left bg-white p-4 shadow-lg rounded-lg max-w-xs text-black",style:{left:i.left,top:i.top,zIndex:100},children:[d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsx("p",{className:q.dictionaryText,children:e}),d.jsx("i",{className:"fas fa-volume-up ml-5 text-gray-600"})]}),d.jsx("hr",{className:"border-2 mb-2"}),d.jsx("p",{children:t})]}),d.jsxs("div",{className:"mt-10 text-center flex justify-between",children:[d.jsx("button",{onClick:c,className:"px-6 py-2 border justify-end text-white rounded-lg hover:bg-gray-500",children:"Previous Article"}),d.jsx("button",{onClick:l,className:"px-6 py-2 border justify-end text-white rounded-lg hover:bg-gray-500",children:"Next Article"})]})]})}),s&&d.jsx("button",{onClick:a,className:"fixed bottom-6 right-6 w-12 h-12 bg-gray-600 text-white rounded-full shadow-lg flex items-center justify-center hover:bg-gray-800 transition-all duration-300",children:d.jsx("i",{className:"fas fa-arrow-up"})})]})},Nme=Bt(Rme),Dme=[{id:"general_provisions",title:"General Provisions",subtitle:"ARTICLE XVI",sections:[{name:"Section 1",paragraph:"The flag of the Philippines shall be red, white, and blue, with a sun and three stars, as consecrated and honored by the people and recognized by law."},{name:"Section 2",paragraph:"The Congress may, by law, adopt a new name for the country, a national anthem, or a national seal, which shall all be truly reflective and symbolic of the ideals, history, and traditions of the people. Such law shall take effect only upon its ratification by the people in a national referendum."},{name:"Section 3",paragraph:"The State may not be sued without its consent."},{name:"Section 4",paragraph:"The Armed Forces of the Philippines shall be composed of a citizen armed force which shall undergo military training and serve, as may be provided by law. It shall keep a regular force necessary for the security of the State."},{name:"Section 5",paragraph:["(1) All members of the armed forces shall take an oath or affirmation to uphold and defend this Constitution.","(2) The State shall strengthen the patriotic spirit and nationalist consciousness of the military, and respect for people’s rights in the performance of their duty.","(3) Professionalism in the armed forces and adequate remuneration and benefits of its members shall be a prime concern of the State. The armed forces shall be insulated from partisan politics. No member of the military shall engage directly or indirectly in any partisan political activity, except to vote.","(4) No member of the armed forces in the active service shall, at any time, be appointed or designated in any capacity to a civilian position in the Government including government-owned or controlled corporations or any of their subsidiaries.","(5) Laws on retirement of military officers shall not allow extension of their service.","(6) The officers and men of the regular force of the armed forces shall be recruited proportionately from all provinces and cities as far as practicable.","(7) The tour of duty of the Chief of Staff of the armed forces shall not exceed three years. However, in times of war or other national emergency declared by the Congress, the President may extend such tour of duty."]},{name:"Section 6",paragraph:"The State shall establish and maintain one police force, which shall be national in scope and civilian in character, to be administered and controlled by a national police commission. The authority of local executives over the police units in their jurisdiction shall be provided by law."},{name:"Section 7",paragraph:"The State shall provide immediate and adequate care, benefits, and other forms of assistance to war veterans and veterans of military campaigns, their surviving spouses and orphans. Funds shall be provided therefor and due consideration shall be given them in the disposition of agricultural lands of the public domain and, in appropriate cases, in the utilization of natural resources."},{name:"Section 8",paragraph:"The State shall, from time to time, review to upgrade the pensions and other benefits due to retirees of both the government and the private sectors."},{name:"Section 9",paragraph:"The State shall protect consumers from trade malpractices and from substandard or hazardous products."},{name:"Section 10",paragraph:"The State shall provide the policy environment for the full development of Filipino capability and the emergence of communication structures suitable to the needs and aspirations of the nation and the balanced flow of information into, out of, and across the country, in accordance with a policy that respects the freedom of speech and of the press."},{name:"Section 11",paragraph:["(1) The ownership and management of mass media shall be limited to citizens of the Philippines, or to corporations, cooperatives or associations, wholly-owned and managed by such citizens. The Congress shall regulate or prohibit monopolies in commercial mass media when the public interest so requires. No combinations in restraint of trade or unfair competition therein shall be allowed.","(2) The advertising industry is impressed with public interest, and shall be regulated by law for the protection of consumers and the promotion of the general welfare. Only Filipino citizens or corporations or associations at least seventy per centum of the capital of which is owned by such citizens shall be allowed to engage in the advertising industry. The participation of foreign investors in the governing body of entities in such industry shall be limited to their proportionate share in the capital thereof, and all the executive and managing officers of such entities must be citizens of the Philippines."]},{name:"Section 12",paragraph:"The Congress may create a consultative body to advise the President on policies affecting indigenous cultural communities, the majority of the members of which shall come from such communities."}]}],Lme=()=>{const n=qt(),{selectedWord:e,definition:t,tooltipPosition:i,handleTextSelection:r}=Fn(),[s,o]=V.useState(!1);V.useEffect(()=>{const u=()=>{window.scrollY>200?o(!0):o(!1)};return window.addEventListener("scroll",u),()=>window.removeEventListener("scroll",u)},[]);const a=()=>{window.scrollTo({top:0,behavior:"smooth"})},l=()=>{n("/articleSeventeen")},c=()=>{n("/articleFifteen")};return d.jsxs("div",{className:"text-spacing-3 leading-relaxed tracking-wide",children:[d.jsx(Ln,{children:d.jsxs("div",{children:[Dme.map(u=>d.jsxs("div",{className:"my-5",children:[d.jsx("h5",{className:q.paragraphSubText,children:u.subtitle}),d.jsx("h4",{className:`${q.headText} mb-10`,children:u.title}),d.jsx("div",{children:u.sections.map((f,m)=>d.jsxs("div",{className:"my-4",children:[d.jsx("h6",{className:q.paragraphSubText,children:f.name}),d.jsx("p",{onMouseUp:r,className:q.paragraphSubTextLower,children:f.paragraph})]},m))})]},u.id)),e&&d.jsxs("div",{className:"absolute text-left bg-white p-4 shadow-lg rounded-lg max-w-xs text-black",style:{left:i.left,top:i.top,zIndex:100},children:[d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsx("p",{className:q.dictionaryText,children:e}),d.jsx("i",{className:"fas fa-volume-up ml-5 text-gray-600"})]}),d.jsx("hr",{className:"border-2 mb-2"}),d.jsx("p",{children:t})]}),d.jsxs("div",{className:"mt-10 text-center flex justify-between",children:[d.jsx("button",{onClick:c,className:"px-6 py-2 border justify-end text-white rounded-lg hover:bg-gray-500",children:"Previous Article"}),d.jsx("button",{onClick:l,className:"px-6 py-2 border justify-end text-white rounded-lg hover:bg-gray-500",children:"Next Article"})]})]})}),s&&d.jsx("button",{onClick:a,className:"fixed bottom-6 right-6 w-12 h-12 bg-gray-600 text-white rounded-full shadow-lg flex items-center justify-center hover:bg-gray-800 transition-all duration-300",children:d.jsx("i",{className:"fas fa-arrow-up"})})]})},kme=Bt(Lme),Ome=[{id:"amendment",title:"Amendments or Revisions",subtitle:"ARTICLE XVII",sections:[{name:"Section 1",paragraph:["Any amendment to, or revision of, this Constitution may be proposed by:","(1) The Congress, upon a vote of three-fourths of all its Members; or","(2) A constitutional convention."]},{name:"Section 2",paragraph:["Amendments to this Constitution may likewise be directly proposed by the people through initiative upon a petition of at least twelve per centum of the total number of registered voters, of which every legislative district must be represented by at least three per centum of the registered voters therein.","No amendment under this section shall be authorized within five years following the ratification of this Constitution nor oftener than once every five years thereafter.","The Congress shall provide for the implementation of the exercise of this right."]},{name:"Section 3",paragraph:["The Congress may, by a vote of two-thirds of all its Members, call a constitutional convention, or by a majority vote of all its Members, submit to the electorate the question of calling such a convention."]},{name:"Section 4",paragraph:["Any amendment to, or revision of, this Constitution under Section 1 hereof shall be valid when ratified by a majority of the votes cast in a plebiscite which shall be held not earlier than sixty days nor later than ninety days after the approval of such amendment or revision.","Any amendment under Section 2 hereof shall be valid when ratified by a majority of the votes cast in a plebiscite which shall be held not earlier than sixty days nor later than ninety days after the certification by the Commission on Elections of the sufficiency of the petition."]}]}],Ume=()=>{const n=qt(),{selectedWord:e,definition:t,tooltipPosition:i,handleTextSelection:r}=Fn(),[s,o]=V.useState(!1);V.useEffect(()=>{const u=()=>{window.scrollY>200?o(!0):o(!1)};return window.addEventListener("scroll",u),()=>window.removeEventListener("scroll",u)},[]);const a=()=>{window.scrollTo({top:0,behavior:"smooth"})},l=()=>{n("/articleEighteen")},c=()=>{n("/articleSixteen")};return d.jsxs("div",{className:"text-spacing-3 leading-relaxed tracking-wide",children:[d.jsx(Ln,{children:d.jsxs("div",{children:[Ome.map(u=>d.jsxs("div",{className:"my-5",children:[d.jsx("h5",{className:q.paragraphSubText,children:u.subtitle}),d.jsx("h4",{className:`${q.headText} mb-10`,children:u.title}),d.jsx("div",{children:u.sections.map((f,m)=>d.jsxs("div",{className:"my-4",children:[d.jsx("h6",{className:q.paragraphSubText,children:f.name}),d.jsx("p",{onMouseUp:r,className:q.paragraphSubTextLower,children:f.paragraph})]},m))})]},u.id)),e&&d.jsxs("div",{className:"absolute text-left bg-white p-4 shadow-lg rounded-lg max-w-xs text-black",style:{left:i.left,top:i.top,zIndex:100},children:[d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsx("p",{className:q.dictionaryText,children:e}),d.jsx("i",{className:"fas fa-volume-up ml-5 text-gray-600"})]}),d.jsx("hr",{className:"border-2 mb-2"}),d.jsx("p",{children:t})]}),d.jsxs("div",{className:"mt-10 text-center flex justify-between",children:[d.jsx("button",{onClick:c,className:"px-6 py-2 border justify-end text-white rounded-lg hover:bg-gray-500",children:"Previous Article"}),d.jsx("button",{onClick:l,className:"px-6 py-2 border justify-end text-white rounded-lg hover:bg-gray-500",children:"Next Article"})]})]})}),s&&d.jsx("button",{onClick:a,className:"fixed bottom-6 right-6 w-12 h-12 bg-gray-600 text-white rounded-full shadow-lg flex items-center justify-center hover:bg-gray-800 transition-all duration-300",children:d.jsx("i",{className:"fas fa-arrow-up"})})]})},Fme=Bt(Ume),jme=[{id:"transitory_provisions",title:"Transitory Provisions",subtitle:"ARTICLE XVIII",sections:[{name:"Section 1",paragraph:["The first elections of Members of the Congress under this Constitution shall be held on the second Monday of May, 1987.","The first local elections shall be held on a date to be determined by the President, which may be simultaneous with the election of the Members of the Congress. It shall include the election of all Members of the city or municipal councils in the Metropolitan Manila area."]},{name:"Section 2",paragraph:["The Senators, Members of the House of Representatives, and the local officials first elected under this Constitution shall serve until noon of June 30, 1992.","Of the Senators elected in the election of 1992, the first twelve obtaining the highest number of votes shall serve for six years and the remaining twelve for three years."]},{name:"Section 3",paragraph:"All existing laws, decrees, executive orders, proclamations, letters of instructions, and other executive issuances not inconsistent with this Constitution shall remain operative until amended, repealed, or revoked."},{name:"Section 4",paragraph:"All existing treaties or international agreements which have not been ratified shall not be renewed or extended without the concurrence of at least two-thirds of all the Members of the Senate."},{name:"Section 5",paragraph:["The six-year term of the incumbent President and Vice-President elected in the February 7, 1986 election is, for purposes of synchronization of elections, hereby extended to noon of June 30, 1992.","The first regular elections for the President and Vice-President under this Constitution shall be held on the second Monday of May, 1992."]},{name:"Section 6",paragraph:"The incumbent President shall continue to exercise legislative powers until the first Congress is convened."},{name:"Section 7",paragraph:"Until a law is passed, the President may fill by appointment from a list of nominees by the respective sectors the seats reserved for sectoral representation in paragraph (2), Section 5 of Article VI of this Constitution."},{name:"Section 8",paragraph:"Until otherwise provided by the Congress, the President may constitute the Metropolitan Authority to be composed of the heads of all local government units comprising the Metropolitan Manila area."},{name:"Section 9",paragraph:"A sub-province shall continue to exist and operate until it is converted into a regular province or until its component municipalities are reverted to the mother province."},{name:"Section 10",paragraph:"All courts existing at the time of the ratification of this Constitution shall continue to exercise their jurisdiction, until otherwise provided by law. The provisions of the existing Rules of Court, judiciary acts, and procedural laws not inconsistent with this Constitution shall remain operative unless amended or repealed by the Supreme Court or the Congress."},{name:"Section 11",paragraph:"The incumbent Members of the Judiciary shall continue in office until they reach the age of seventy years or become incapacitated to discharge the duties of their office or are removed for cause."},{name:"Section 12",paragraph:"The Supreme Court shall, within one year after the ratification of this Constitution, adopt a systematic plan to expedite the decision or resolution of cases or matters pending in the Supreme Court or the lower courts prior to the effectivity of this Constitution. A similar plan shall be adopted for all special courts and quasi-judicial bodies."},{name:"Section 13",paragraph:"The legal effect of the lapse, before the ratification of this Constitution, of the applicable period for the decision or resolution of the cases or matters submitted for adjudication by the courts, shall be determined by the Supreme Court as soon as practicable."},{name:"Section 14",paragraph:"The provisions of paragraphs (3) and (4), Section 15 of Article VIII of this Constitution shall apply to cases or matters filed before the ratification of this Constitution, when the applicable period lapses after such ratification."},{name:"Section 15",paragraph:"The incumbent Members of the Civil Service Commission, the Commission on Elections, and the Commission on Audit shall continue in office for one year after the ratification of this Constitution, unless they are sooner removed for cause or become incapacitated to discharge the duties of their office or appointed to a new term thereunder. In no case shall any Member serve longer than seven years including service before the ratification of this Constitution."},{name:"Section 16",paragraph:"Career civil service employees separated from the service not for cause but as a result of the reorganization pursuant to Proclamation No. 3 dated March 25, 1986 and the reorganization following the ratification of this Constitution shall be entitled to appropriate separation pay and to retirement and other benefits accruing to them under the laws of general application in force at the time of their separation. In lieu thereof, at the option of the employees, they may be considered for employment in the Government or in any of its subdivisions, instrumentalities, or agencies, including government-owned or controlled corporations and their subsidiaries. This provision also applies to career officers whose resignation, tendered in line with the existing policy, had been accepted."},{name:"Section 17",paragraph:"Until the Congress provides otherwise, the President shall receive an annual salary of three hundred thousand pesos; the Vice-President, the President of the Senate, the Speaker of the House of Representatives, and the Chief Justice of the Supreme Court, two hundred forty thousand pesos each; the Senators, the Members of the House of Representatives, the Associate Justices of the Supreme Court, and the Chairmen of the Constitutional Commissions, two hundred four thousand pesos each; and the Members of the Constitutional Commissions, one hundred eighty thousand pesos each."},{name:"Section 18",paragraph:"At the earliest possible time, the Government shall increase the salary scales of the other officials and employees of the National Government."},{name:"Section 19",paragraph:"All properties, records, equipment, buildings, facilities, and other assets of any office or body abolished or reorganized under Proclamation No. 3 dated March 25, 1986 or this Constitution shall be transferred to the office or body to which its powers, functions, and responsibilities substantially pertain."},{name:"Section 20",paragraph:"The first Congress shall give priority to the determination of the period for the full implementation of free public secondary education."},{name:"Section 21",paragraph:"The Congress shall provide efficacious procedures and adequate remedies for the reversion to the State of all lands of the public domain and real rights connected therewith which were acquired in violation of the Constitution or the public land laws, or through corrupt practices. No transfer or disposition of such lands or real rights shall be allowed until after the lapse of one year from the ratification of this Constitution."},{name:"Section 22",paragraph:"At the earliest possible time, the Government shall expropriate idle or abandoned agricultural lands as may be defined by law, for distribution to the beneficiaries of the agrarian reform program."},{name:"Section 23",paragraph:"Advertising entities affected by paragraph (2), Section 11 of Article XVI of this Constitution shall have five years from its ratification to comply on a graduated and proportionate basis with the minimum Filipino ownership requirement therein."},{name:"Section 24",paragraph:"Private armies and other armed groups not recognized by duly constituted authority shall be dismantled. All paramilitary forces including Civilian Home Defense Forces not consistent with the citizen armed force established in this Constitution, shall be dissolved or, where appropriate, converted into the regular force."},{name:"Section 25",paragraph:"After the expiration in 1991 of the Agreement between the Republic of the Philippines and the United States of America concerning Military Bases, foreign military bases, troops, or facilities shall not be allowed in the Philippines except under a treaty duly concurred in by the Senate and, when the Congress so requires, ratified by a majority of the votes cast by the people in a national referendum held for that purpose, and recognized as a treaty by the other contracting State."},{name:"Section 26",paragraph:["The authority to issue sequestration or freeze orders under Proclamation No. 3 dated March 25, 1986 in relation to the recovery of ill-gotten wealth shall remain operative for not more than eighteen months after the ratification of this Constitution. However, in the national interest, as certified by the President, the Congress may extend said period.","A sequestration or freeze order shall be issued only upon showing of a prima facie case. The order and the list of the sequestered or frozen properties shall forthwith be registered with the proper court. For orders issued before the ratification of this Constitution, the corresponding judicial action or proceeding shall be filed within six months from its ratification. For those issued after such ratification, the judicial action or proceeding shall be commenced within six months from the issuance thereof.","The sequestration or freeze order is deemed automatically lifted if no judicial action or proceeding is commenced as herein provided."]},{name:"Section 27",paragraph:"This Constitution shall take effect immediately upon its ratification by a majority of the votes cast in a plebiscite held for the purpose and shall supersede all previous Constitutions."}]}],Vme=()=>{const n=qt(),{selectedWord:e,definition:t,tooltipPosition:i,handleTextSelection:r}=Fn(),[s,o]=V.useState(!1);V.useEffect(()=>{const c=()=>{window.scrollY>200?o(!0):o(!1)};return window.addEventListener("scroll",c),()=>window.removeEventListener("scroll",c)},[]);const a=()=>{window.scrollTo({top:0,behavior:"smooth"})},l=()=>{n("/articleSixteen")};return d.jsxs("div",{className:"text-spacing-3 leading-relaxed tracking-wide",children:[d.jsx(Ln,{children:d.jsxs("div",{children:[jme.map(c=>d.jsxs("div",{className:"my-5",children:[d.jsx("h5",{className:q.paragraphSubText,children:c.subtitle}),d.jsx("h4",{className:`${q.headText} mb-10`,children:c.title}),d.jsx("div",{children:c.sections.map((u,f)=>d.jsxs("div",{className:"my-4",children:[d.jsx("h6",{className:q.paragraphSubText,children:u.name}),d.jsx("p",{onMouseUp:r,className:q.paragraphSubTextLower,children:u.paragraph})]},f))})]},c.id)),e&&d.jsxs("div",{className:"absolute text-left bg-white p-4 shadow-lg rounded-lg max-w-xs text-black",style:{left:i.left,top:i.top,zIndex:100},children:[d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsx("p",{className:q.dictionaryText,children:e}),d.jsx("i",{className:"fas fa-volume-up ml-5 text-gray-600"})]}),d.jsx("hr",{className:"border-2 mb-2"}),d.jsx("p",{children:t})]}),d.jsx("div",{className:"mt-10 text-center flex justify-between",children:d.jsx("button",{onClick:l,className:"px-6 py-2 border justify-end text-white rounded-lg hover:bg-gray-500",children:"Previous Article"})})]})}),s&&d.jsx("button",{onClick:a,className:"fixed bottom-6 right-6 w-12 h-12 bg-gray-600 text-white rounded-full shadow-lg flex items-center justify-center hover:bg-gray-800 transition-all duration-300",children:d.jsx("i",{className:"fas fa-arrow-up"})})]})},Bme=Bt(Vme),zme=[{id:"general_provisions",title:"General Provisions",subtitle:"Chapter I",sections:[{name:"Section 1",paragraph:"This Act shall be known as “The Indigenous Peoples’ Rights Act of 1997″."},{name:"Section 2",paragraph:"a. The State shall recognize and promote the rights of ICCs/IPs within the framework of national unity and development;"},{paragraph:"b. The State shall protect the rights of ICCs/IPs to their ancestral domains to ensure their economic, social and cultural well being and shall recognize the applicability of customary laws governing property rights or relations in determining the ownership and extent of ancestral domain;"},{paragraph:"c. The State shall recognize, respect and protect the rights of ICCs/IPs to preserve and develop their cultures, traditions and institutions. It shall consider these rights in the formulation of national laws and policies;"},{paragraph:"d. The State shall guarantee that members of the ICCs/IPs regardless of sex, shall equally enjoy the full measure of human rights and freedoms without distinction or discrimination;"},{paragraph:"e. The State shall take measures, with the participation of the ICCs/IPs concerned, to protect their rights and guarantee respect for their cultural integrity, and to ensure that members of the ICCs/IPs benefit on an equal footing from the rights and opportunities which national laws and regulations grant to other members of the population; and"},{paragraph:"f. The State recognizes its obligations to respond to the strong expression of the ICCs/IPs for cultural integrity by assuring maximum ICC/IP participation in the direction of education, health, as well as other services of ICCs/IPs, in order to render such services more responsive to the needs and desires of these communities."},{paragraph:["Towards these ends, the State shall institute and establish the necessary mechanisms to enforce and guarantee the realization of these rights, taking into consideration their customs, traditions, values, beliefs, interests and institutions, and to adopt and implement measures to protect their rights to their ancestral domains."]}]}],Hme=()=>{const n=qt(),{selectedWord:e,definition:t,tooltipPosition:i,handleTextSelection:r}=Fn(),[s,o]=V.useState(!1);V.useEffect(()=>{const c=()=>{window.scrollY>200?o(!0):o(!1)};return window.addEventListener("scroll",c),()=>window.removeEventListener("scroll",c)},[]);const a=()=>{window.scrollTo({top:0,behavior:"smooth"})},l=()=>{n("/chapterTwo")};return d.jsxs("div",{className:"text-spacing-3 leading-relaxed tracking-wide ",children:[d.jsx(Ln,{children:d.jsxs("div",{children:[zme.map(c=>d.jsxs("div",{className:"my-5",children:[d.jsx("h5",{className:q.paragraphSubText,children:c.subtitle}),d.jsx("h4",{className:`${q.headText} mb-10`,children:c.title}),d.jsx("div",{children:c.sections.map((u,f)=>d.jsxs("div",{className:"my-4",children:[d.jsx("h6",{className:q.paragraphSubText,children:u.name}),d.jsx("p",{onMouseUp:r,className:q.paragraphSubTextLower,children:u.paragraph})]},f))})]},c.id)),e&&d.jsxs("div",{className:"absolute text-left bg-white p-4 shadow-lg rounded-lg max-w-xs text-black",style:{left:i.left,top:i.top,zIndex:100},children:[d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsx("p",{className:q.dictionaryText,children:e}),d.jsx("i",{className:"fas fa-volume-up ml-5 text-gray-600"})]}),d.jsx("hr",{className:"border-2 mb-2"}),d.jsx("p",{children:t})]}),d.jsx("div",{className:"mt-5 text-center",children:d.jsx("button",{onClick:l,className:"px-6 py-2 border justify-end text-white rounded-lg hover:bg-gray-500 flex ml-auto",children:"Next Chapter"})})]})}),s&&d.jsx("button",{onClick:a,className:"fixed bottom-6 right-6 w-12 h-12 bg-gray-600 text-white rounded-full shadow-lg flex items-center justify-center hover:bg-gray-800 transition-all duration-300",children:d.jsx("i",{className:"fas fa-arrow-up"})})]})},Gme=Bt(Hme),Wme=[{id:"definition",title:"Definition of Terms",subtitle:"Chapter II",sections:[{name:"Section 3",paragraph:"For purposes of this Act, the following terms shall mean:"},{name:"a. Ancestral Domains",paragraph:["Subject to Section 56 hereof, refer to all areas generally belonging to ICCs/IPs comprising lands, inland waters, coastal areas, and natural resources therein, held under a claim of ownership, occupied or possessed by ICCs/IPs, by themselves or through their ancestors, communally or individually since time immemorial, continuously to the present except when interrupted by war, force majeure or displacement by force, deceit, stealth or as a consequence of government projects or any other voluntary dealings entered into by government and private individuals/corporations, and which are necessary to ensure their economic, social and cultural welfare.","It shall include ancestral lands, forests, pasture, residential, agricultural, and other lands individually owned whether alienable and disposable or otherwise, hunting grounds, burial grounds, worship areas, bodies of water, mineral and other natural resources, and lands which may no longer be exclusively occupied by ICCs/IPs but from which they traditionally had access to for their subsistence and traditional activities, particularly the home ranges of ICCs/IPs who are still nomadic and/or shifting cultivators;"]},{name:"b. Ancestral Lands",paragraph:["Subject to Section 56 hereof, refers to land occupied, possessed and utilized by individuals, families and clans who are members of the ICCs/IPs since time immemorial, by themselves or through their predecessors-in-interest, under claims of individual or traditional group ownership, continuously, to the present except when interrupted by war, force majeure or displacement by force, deceit, stealth, or as a consequence of government projects and other voluntary dealings entered into by government and private individuals/corporations, including, but not limited to, residential lots, rice terraces or paddies, private forests, swidden farms and tree lots;"]},{name:"c. Certificate of Ancestral Domain Title",paragraph:["refers to a title formally recognizing the rights of possession and ownership of ICCs/IPs over their ancestral domains identified and delineated in accordance with this law;"]},{name:"d. Certificate of Ancestral Lands Title ",paragraph:["refers to a title formally recognizing the rights of ICCs/IPs over their ancestral lands;"]},{name:"e. Communal Claims",paragraph:[" refer to claims on land, resources and rights thereon, belonging to the whole community within a defined territory;"]},{name:"f. Customary Laws",paragraph:["refer to a body of written and/or unwritten rules, usages, customs and practices traditionally and continually recognized, accepted and observed by respective ICCs/IPs;"]},{name:"g. Free and Prior Informed Consent ",paragraph:[" as used in this Act shall mean the consensus of all members of the ICCs/IPs to be determined in accordance with their respective customary laws and practices, free from any external manipulation, interference and coercion, and obtained after fully disclosing the intent and scope of the activity, in a language and process understandable to the community;"]},{name:"h. Indigenous Cultural Communities/Indigenous Peoples",paragraph:["refer to a group of people or homogenous societies identified by self-ascription and ascription by others, who have continuously lived as organized community on communally bounded and defined territory, and who have, under claims of ownership since time immemorial, occupied, possessed and utilized such territories, sharing common bonds of language, customs, traditions and other distinctive cultural traits, or who have, through resistance to political, social and cultural inroads of colonization, non-indigenous religions and cultures, became historically differentiated from the majority of Filipinos. ","ICCs/IPs shall likewise include peoples who are regarded as indigenous on account of their descent from the populations which inhabited the country, at the time of conquest or colonization, or at the time of inroads of non-indigenous religions and cultures, or the establishment of present state boundaries, who retain some or all of their own social, economic, cultural and political institutions, but who may have been displaced from their traditional domains or who may have resettled outside their ancestral domains;"]},{name:"i. Indigenous Political Structures",paragraph:["refer to organizational and cultural leadership systems, institutions, relationships, patterns and processes for decision-making and participation, identified by ICCs/IPs such as, but not limited to, Council of Elders, Council of Timuays, Bodong Holders, or any other tribunal or body of similar nature;"]},{name:"j. Individual Claims",paragraph:[" refer to claims on land and rights thereon which have been devolved to individuals, families and clans including, but not limited to, residential lots, rice terraces or paddies and tree lots;"]},{name:"k. National Commission on Indigenous Peoples (NCIP) ",paragraph:["refers to the office created under this Act, which shall be under the Office of the President, and which shall be the primary government agency responsible for the formulation and implementation of policies, plans and programs to recognize, protect and promote the rights of ICCs/IPs;"]},{name:"l. Native Title",paragraph:["refers to pre-conquest rights to lands and domains which, as far back as memory reaches, have been held under a claim of private ownership by ICCs/IPs, have never been public lands and are thus indisputably presumed to have been held that way since before the Spanish Conquest;"]},{name:"m. Nongovernment Organization ",paragraph:["refers to a private, nonprofit voluntary organization that has been organized primarily for the delivery of various services to the ICCs/IPs and has an established track record for effectiveness and acceptability in the community where it serves;"]},{name:"n. People’s Organization",paragraph:[" refers to a private, nonprofit voluntary organization of members of an ICC/IP which is accepted as representative of such ICCs/IPs;"]},{name:"o. Sustainable Traditional Resource Rights ",paragraph:["refer to the rights of ICCs/IPs to sustainably use, manage, protect and conserve a) land, air, water, and minerals; b) plants, animals and other organisms; c) collecting, fishing and hunting grounds; d) sacred sites; and e) other areas of economic, ceremonial and aesthetic value in accordance with their indigenous knowledge, beliefs, systems and practices; and"]},{name:"p. Time Immemorial ",paragraph:["refers to a period of time when as far back as memory can go, certain ICCs/IPs are known to have occupied, possessed in the concept of owner, and utilized a defined territory devolved to them, by operation of customary law or inherited from their ancestors, in accordance with their customs and traditions."]}]}],qme=()=>{const n=qt(),{selectedWord:e,definition:t,tooltipPosition:i,handleTextSelection:r}=Fn(),[s,o]=V.useState(!1);V.useEffect(()=>{const u=()=>{window.scrollY>200?o(!0):o(!1)};return window.addEventListener("scroll",u),()=>window.removeEventListener("scroll",u)},[]);const a=()=>{window.scrollTo({top:0,behavior:"smooth"})},l=()=>{n("/chapterThree")},c=()=>{n("/chapterOne")};return d.jsxs("div",{className:"text-spacing-3 leading-relaxed tracking-wide",children:[d.jsx(Ln,{children:d.jsxs("div",{children:[Wme.map(u=>d.jsxs("div",{className:"my-5",children:[d.jsx("h5",{className:q.paragraphSubText,children:u.subtitle}),d.jsx("h4",{className:`${q.headText} mb-10`,children:u.title}),d.jsx("div",{children:u.sections.map((f,m)=>d.jsxs("div",{className:"my-4",children:[d.jsx("h6",{className:q.paragraphSubText,children:f.name}),d.jsx("p",{onMouseUp:r,className:q.paragraphSubTextLower,children:f.paragraph})]},m))})]},u.id)),e&&d.jsxs("div",{className:"absolute text-left bg-white p-4 shadow-lg rounded-lg max-w-xs text-black",style:{left:i.left,top:i.top,zIndex:100},children:[d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsx("p",{className:q.dictionaryText,children:e}),d.jsx("i",{className:"fas fa-volume-up ml-5 text-gray-600"})]}),d.jsx("hr",{className:"border-2 mb-2"}),d.jsx("p",{children:t})]}),d.jsxs("div",{className:"mt-10 text-center flex justify-between",children:[d.jsx("button",{onClick:c,className:"px-6 py-2 border justify-end text-white rounded-lg hover:bg-gray-500",children:"Previous Article"}),d.jsx("button",{onClick:l,className:"px-6 py-2 border justify-end text-white rounded-lg hover:bg-gray-500",children:"Next Article"})]})]})}),s&&d.jsx("button",{onClick:a,className:"fixed bottom-6 right-6 w-12 h-12 bg-gray-600 text-white rounded-full shadow-lg flex items-center justify-center hover:bg-gray-800 transition-all duration-300",children:d.jsx("i",{className:"fas fa-arrow-up"})})]})},$me=Bt(qme),Xme=[{id:"domains",title:"Rights to Ancestral Domains",subtitle:"Chapter III",sections:[{name:"Section 4",subtitle:"Concept of Ancestral Lands/Domains.",paragraph:"Ancestral lands/domains shall include such concepts of territories which cover not only the physical environment but the total environment including the spiritual and cultural bonds to the areas which the ICCs/IPs possess, occupy and use and to which they have claims of ownership."},{name:"Section 5",subtitle:"Indigenous Concept of Ownership.",paragraph:"Indigenous concept of ownership sustains the view that ancestral domains and all resources found therein shall serve as the material bases of their cultural integrity. The indigenous concept of ownership generally holds that ancestral domains are the ICC’s/IP’s private but community property which belongs to all generations and therefore cannot be sold, disposed or destroyed. It likewise covers sustainable traditional resource rights."},{name:"Section 6",subtitle:"Composition of Ancestral Lands/Domains.",paragraph:"Ancestral lands and domains shall consist of all areas generally belonging to ICCs/IPs as referred under Sec. 3, items (a) and (b) of this Act."},{name:"Section 7",subtitle:"Rights to Ancestral Domains.",paragraph:[{sub_paragraph:"The rights of ownership and possession of ICCs/IPs to their ancestral domains shall be recognized and protected. Such rights shall include:",name:"a. Right of Ownership.",paragraph:"The right to claim ownership over lands, bodies of water traditionally and actually occupied by ICCs/IPs, sacred places, traditional hunting and fishing grounds, and all improvements made by them at any time within the domains;"},{name:"b. Right to Develop Lands and Natural Resources. 9",paragraph:"Subject to Section 56 hereof, right to develop, control and use lands and territories traditionally occupied, owned, or used; to manage and conserve natural resources within the territories and uphold the responsibilities for future generations; to benefit and share the profits from allocation and utilization of the natural resources found therein; the right to negotiate the terms and conditions for the exploration of natural resources in the areas for the purpose of ensuring ecological, environmental protection and the conservation measures, pursuant to national and customary laws; the right to an informed and intelligent participation in the formulation and implementation of any project, government or private, that will affect or impact upon the ancestral domains and to receive just and fair compensation for any damages which they may sustain as a result of the project; and the right to effective measures by the government to prevent any interference with, alienation and encroachment upon these rights;"},{name:"c. Right to Stay in the Territories",paragraph:"The right to stay in the territory and not to be removed therefrom. No ICCs/IPs will be relocated without their free and prior informed consent, nor through any means other than eminent domain. Where relocation is considered necessary as an exceptional measure, such relocation shall take place only with the free and prior informed consent of the ICCs/IPs concerned and whenever possible, they shall be guaranteed the right to return to their ancestral domains, as soon as the grounds for relocation cease to exist. When such return is not possible, as determined by agreement or through appropriate procedures, ICCs/IPs shall be provided in all possible cases with lands of quality and legal status at least equal to that of the land previously occupied by them, suitable to provide for their present needs and future development. Persons thus relocated shall likewise be fully compensated for any resulting loss or injury;"},{name:"d. Right in Case of Displacement",paragraph:"In case displacement occurs as a result of natural catastrophes, the State shall endeavor to resettle the displaced ICCs/IPs in suitable areas where they can have temporary life support systems: Provided, That the displaced ICCs/IPs shall have the right to return to their abandoned lands until such time that the normalcy and safety of such lands shall be determined: Provided, further, That should their ancestral domain cease to exist and normalcy and safety of the previous settlements are not possible, displaced ICCs/IPs shall enjoy security of tenure over lands to which they have been resettled: Provided, furthermore, That basic services and livelihood shall be provided to them to ensure that their needs are adequately addressed;"},{name:"e. Right to Regulate Entry of Migrants",paragraph:"Right to regulate the entry of migrant settlers and organizations into the domains;"},{name:"f. Right to Safe and Clean Air and Water.",paragraph:"For this purpose, the ICCs/IPs shall have access to integrated systems for the management of their inland waters and air space;"},{name:"g. Right to Claim Parts of Reservations",paragraph:" The right to claim parts of the ancestral domains which have been reserved for various purposes, except those reserved and intended for common public welfare and service; and"},{name:"h. Right to Resolve Conflict",paragraph:" Right to resolve land conflicts in accordance with customary laws of the area where the land is located, and only in default thereof shall the complaints be submitted to amicable settlement and to the Courts of Justice whenever necessary."}]},{name:"Section 8",subtitle:"Rights to Ancestral Lands.",paragraph:[{sub_paragraph:"The right of ownership and possession of the ICCs/IPs to their ancestral lands shall be recognized and protected.",name:"Right to transfer land/property.",paragraph:"Such right shall include the right to transfer land or property rights to/among members of the same ICCs/IPs, subject to customary laws and traditions of the community concerned."},{name:"Right to Redemption",paragraph:"In cases where it is shown that the transfer of land/property rights by virtue of any agreement or devise, to a non-member of the concerned ICCs/IPs is tainted by the vitiated consent of the ICCs/IPs, or is transferred for an unconscionable consideration or price, the transferor ICC/IP shall have the right to redeem the same within a period not exceeding fifteen (15) years from the date of transfer."}]},{name:"Section 9",subtitle:"Responsibilities of ICCs/IPs to their Ancestral Domains.",paragraph:[{sub_paragraph:"ICCs/IPs occupying a duly certified ancestral domain shall have the following responsibilities:",name:"a. Maintain Ecological Balance.",paragraph:" To preserve, restore, and maintain a balanced ecology in the ancestral domain by protecting the flora and fauna, watershed areas, and other reserves;"},{name:"b. Restore Denuded Areas",paragraph:"To actively initiate, undertake and participate in the reforestation of denuded areas and other development programs and projects subject to just and reasonable remuneration; and"},{name:"c. Observe Laws",paragraph:"To observe and comply with the provisions of this Act and the rules and regulations for its effective implementation."}]},{name:"Section 10",subtitle:"Unauthorized and Unlawful Intrusion.",paragraph:"Unauthorized and unlawful intrusion upon, or use of any portion of the ancestral domain, or any violation of the rights hereinbefore enumerated, shall be punishable under this law. Furthermore, the Government shall take measures to prevent non-ICCs/IPs from taking advantage of the ICCs/IPs customs or lack of understanding of laws to secure ownership, possession of land belonging to said ICCs/IPs."},{name:"Section 11",subtitle:"Recognition of Ancestral Domain Rights.",paragraph:"The rights of ICCs/IPs to their ancestral domains by virtue of Native Title shall be recognized and respected. Formal recognition, when solicited by ICCs/IPs concerned, shall be embodied in a Certificate of Ancestral Domain Title (CADT), which shall recognize the title of the concerned ICCs/IPs over the territories identified and delineated."},{name:"Section 12",subtitle:"Option to Secure Certificate of Title Under Commonwealth Act 141, as amended, or the Land Registration Act 496.",paragraph:["Individual members of cultural communities, with respect to their individually-owned ancestral lands who, by themselves or through their predecessors-in-interest, have been in continuous possession and occupation of the same in the concept of owner since time immemorial or for a period of not less than thirty (30) years immediately preceding the approval of this Act and uncontested by the members of the same ICCs/IPs shall have the option to secure title to their ancestral lands under the provisions of Commonwealth Act 141, as amended, or the Land Registration Act 496.","For this purpose, said individually-owned ancestral lands, which are agricultural in character and actually used for agricultural, residential, pasture, and tree farming purposes, including those with a slope of eighteen percent (18%) or more, are hereby classified as alienable and disposable agricultural lands.","The option granted under this section shall be exercised within twenty (20) years from the approval of this Act."]}]}],Kme=()=>{const n=qt(),{selectedWord:e,definition:t,tooltipPosition:i,handleTextSelection:r}=Fn(),[s,o]=V.useState(!1);V.useEffect(()=>{const u=()=>{window.scrollY>200?o(!0):o(!1)};return window.addEventListener("scroll",u),()=>window.removeEventListener("scroll",u)},[]);const a=()=>{window.scrollTo({top:0,behavior:"smooth"})},l=()=>{n("/chapterFour")},c=()=>{n("/chapterTwo")};return d.jsxs("div",{className:"text-spacing-3 leading-relaxed tracking-wide",children:[d.jsx(Ln,{children:d.jsxs("div",{children:[Xme.map(u=>d.jsxs("div",{className:"my-5",children:[d.jsx("h5",{className:q.paragraphSubText,children:u.subtitle}),d.jsx("h4",{className:`${q.headText} mb-10`,children:u.title}),u.sections.map((f,m)=>d.jsxs("div",{className:"my-4",children:[d.jsx("h6",{className:q.paragraphSubText,children:f.name}),d.jsx("h5",{className:q.paragraphSubText,children:f.subtitle}),Array.isArray(f.paragraph)?f.paragraph.map((g,x)=>d.jsxs("div",{className:"my-2",children:[d.jsx("h6",{className:q.paragraphSubText,children:g.name}),g.sub_paragraph&&d.jsx("p",{onMouseUp:r,className:q.paragraphSubText,children:d.jsx("strong",{children:g.sub_paragraph})}),d.jsx("p",{onMouseUp:r,className:q.paragraphSubTextLower,children:g.paragraph})]},x)):d.jsx("p",{onMouseUp:r,className:q.paragraphSubTextLower,children:f.paragraph})]},m))]},u.id)),e&&d.jsxs("div",{className:"absolute text-left bg-white p-4 shadow-lg rounded-lg max-w-xs text-black",style:{left:i.left,top:i.top,zIndex:100},children:[d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsx("p",{className:q.dictionaryText,children:e}),d.jsx("i",{className:"fas fa-volume-up ml-5 text-gray-600"})]}),d.jsx("hr",{className:"border-2 mb-2"}),d.jsx("p",{children:t})]}),d.jsxs("div",{className:"mt-10 text-center flex justify-between",children:[d.jsx("button",{onClick:c,className:"px-6 py-2 border justify-end text-white rounded-lg hover:bg-gray-500",children:"Previous Article"}),d.jsx("button",{onClick:l,className:"px-6 py-2 border justify-end text-white rounded-lg hover:bg-gray-500",children:"Next Article"})]})]})}),s&&d.jsx("button",{onClick:a,className:"fixed bottom-6 right-6 w-12 h-12 bg-gray-600 text-white rounded-full shadow-lg flex items-center justify-center hover:bg-gray-800 transition-all duration-300",children:d.jsx("i",{className:"fas fa-arrow-up"})})]})},Yme=Bt(Kme),Jme=[{id:"self-governance",title:"Right to Self-Governance and Empowerment",subtitle:"Chapter IV",sections:[{name:"Section 13",paragraph:"The State recognizes the inherent right of ICCs/IPs to self-governance and self-determination and respects the integrity of their values, practices and institutions. Consequently, the State shall guarantee the right of ICCs/IPs to freely pursue their economic, social and cultural development."},{name:"Section 14",subtitle:"Support for Autonomous Regions.",paragraph:"The State shall continue to strengthen and support the autonomous regions created under the Constitution as they may require or need. The State shall likewise encourage other ICCs/IPs not included or outside Muslim Mindanao and the Cordilleras to use the form and content of their ways of life as may be compatible with the fundamental rights defined in the Constitution of the Republic of the Philippines and other internationally recognized human rights."},{name:"Section 15",subtitle:"Justice System, Conflict Resolution Institutions, and Peace Building Processes.",paragraph:"The ICCs/IPs shall have the right to use their own commonly accepted justice systems, conflict resolution institutions, peace building processes or mechanisms and other customary laws and practices within their respective communities and as may be compatible with the national legal system and with internationally recognized human rights."},{name:"Section 16",subtitle:"Right to Participate in Decision-Making.",paragraph:"ICCs/IPs have the right to participate fully, if they so choose, at all levels of decision-making in matters which may affect their rights, lives and destinies through procedures determined by them as well as to maintain and develop their own indigenous political structures. Consequently, the State shall ensure that the ICCs/IPs shall be given mandatory representation in policy-making bodies and other local legislative councils."},{name:"Section 17",subtitle:"Right to Determine and Decide Priorities for Development.",paragraph:"The ICCs/IPs shall have the right to determine and decide their own priorities for development affecting their lives, beliefs, institutions, spiritual well-being, and the lands they own, occupy or use. They shall participate in the formulation, implementation and evaluation of policies, plans and programs for national, regional and local development which may directly affect them."},{name:"Section 18",subtitle:"Tribal Barangays.",paragraph:"The ICCs/IPs living in contiguous areas or communities where they form the predominant population but which are located in municipalities, provinces or cities where they do not constitute the majority of the population, may form or constitute a separate barangay in accordance with the Local Government Code on the creation of tribal barangays."},{name:"Section 19",subtitle:"Role of Peoples Organizations.",paragraph:"The State shall recognize and respect the role of independent ICCs/IPs organizations to enable the ICCs/IPs to pursue and protect their legitimate and collective interests and aspirations through peaceful and lawful means."},{name:"Section 20",subtitle:"Means for Development/Empowerment of ICCs/IPs.",paragraph:"The Government shall establish the means for the full development/empowerment of the ICCs/IPs own institutions and initiatives and, where necessary, provide the resources needed therefor."}]}],Qme=()=>{const n=qt(),{selectedWord:e,definition:t,tooltipPosition:i,handleTextSelection:r}=Fn(),[s,o]=V.useState(!1);V.useEffect(()=>{const u=()=>{window.scrollY>200?o(!0):o(!1)};return window.addEventListener("scroll",u),()=>window.removeEventListener("scroll",u)},[]);const a=()=>{window.scrollTo({top:0,behavior:"smooth"})},l=()=>{n("/chapterFive")},c=()=>{n("/chapterThree")};return d.jsxs("div",{className:"text-spacing-3 leading-relaxed tracking-wide",children:[d.jsx(Ln,{children:d.jsxs("div",{children:[Jme.map(u=>d.jsxs("div",{className:"my-5",children:[d.jsx("h5",{className:q.paragraphSubText,children:u.subtitle}),d.jsx("h4",{className:`${q.headText} mb-10`,children:u.title}),d.jsx("div",{children:u.sections.map((f,m)=>d.jsxs("div",{className:"my-4",children:[d.jsxs("h6",{className:q.paragraphSubText,children:[f.name," ",f.subtitle]}),d.jsx("p",{onMouseUp:r,className:q.paragraphSubTextLower,children:f.paragraph})]},m))})]},u.id)),e&&d.jsxs("div",{className:"absolute text-left bg-white p-4 shadow-lg rounded-lg max-w-xs text-black",style:{left:i.left,top:i.top,zIndex:100},children:[d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsx("p",{className:q.dictionaryText,children:e}),d.jsx("i",{className:"fas fa-volume-up ml-5 text-gray-600"})]}),d.jsx("hr",{className:"border-2 mb-2"}),d.jsx("p",{children:t})]}),d.jsxs("div",{className:"mt-10 text-center flex justify-between",children:[d.jsx("button",{onClick:c,className:"px-6 py-2 border justify-end text-white rounded-lg hover:bg-gray-500",children:"Previous Article"}),d.jsx("button",{onClick:l,className:"px-6 py-2 border justify-end text-white rounded-lg hover:bg-gray-500",children:"Next Article"})]})]})}),s&&d.jsx("button",{onClick:a,className:"fixed bottom-6 right-6 w-12 h-12 bg-gray-600 text-white rounded-full shadow-lg flex items-center justify-center hover:bg-gray-800 transition-all duration-300",children:d.jsx("i",{className:"fas fa-arrow-up"})})]})},Zme=Bt(Qme),ege=[{id:"general_provisions",title:"Social Justice and Human Rights",subtitle:"Chapter V",sections:[{name:"Section 21",subtitle:"Equal Protection and Non-discrimination of ICCs/IPs.",paragraph:["Consistent with the equal protection clause of the Constitution of the Republic of the Philippines, the Charter of the United Nations, the Universal Declaration of Human Rights including the Convention on the Elimination of Discrimination Against Women and International Human Rights Law, the State shall, with due recognition of their distinct characteristics and identity, accord to the members of the ICCs/IPs the rights, protections and privileges enjoyed by the rest of the citizenry. ","It shall extend to them the same employment rights, opportunities, basic services, educational and other rights and privileges available to every member of the society. Accordingly, the State shall likewise ensure that the employment of any form of force or coercion against ICCs/IPs shall be dealt with by law.","The State shall ensure that the fundamental human rights and freedoms as enshrined in the Constitution and relevant international instruments are guaranteed also to indigenous women. Towards this end, no provision in this Act shall be interpreted so as to result in the diminution of rights and privileges already recognized and accorded to women under existing laws of general application."]},{name:"Section 22",subtitle:"Rights During Armed Conflict.",paragraph:"ICCs/IPs have the right to special protection and security in periods of armed conflict. The State shall observe international standards, in particular, the Fourth Geneva Convention of 1949, for the protection of civilian populations in circumstances of emergency and armed conflict, and shall not recruit members of the ICCs/IPs against their will into the armed forces, and in particular, for use against other ICCs/IPs; nor recruit children of ICCs/IPs into the armed forces under any circumstance; nor force indigenous individuals to abandon their lands, territories and means of subsistence, or relocate them in special centers for military purposes under any discriminatory condition."},{name:"Section 23",subtitle:"Right to Participate in Decision-Making.",paragraph:"ICCs/IPs have the right to participate fully, if they so choose, at all levels of decision-making in matters which may affect their rights, lives and destinies through procedures determined by them as well as to maintain and develop their own indigenous political structures. Consequently, the State shall ensure that the ICCs/IPs shall be given mandatory representation in policy-making bodies and other local legislative councils."},{name:"Section 17",subtitle:"Freedom from Discrimination and Right to Equal Opportunity and Treatment.",paragraph:["It shall be the right of the ICCs/IPs to be free from any form of discrimination, with respect to recruitment and conditions of employment, such that they may enjoy equal opportunities for admission to employment, medical and social assistance, safety as well as other occupationally-related benefits, informed of their rights under existing labor legislation and of means available to them for redress, not subject to any coercive recruitment systems, including bonded labor and other forms of debt servitude; and equal treatment in employment for men and women, including the protection from sexual harassment.","Towards this end, the State shall, within the framework of national laws and regulations, and in cooperation with the ICCs/IPs concerned, adopt special measures to ensure the effective protection with regard to the recruitment and conditions of employment of persons belonging to these communities, to the extent that they are not effectively protected by laws applicable to workers in general.","ICCs/IPs shall have the right to association and freedom for all trade union activities and the right to conclude collective bargaining agreements with employers’ organizations. They shall likewise have the right not to be subject to working conditions hazardous to their health, particularly through exposure to pesticides and other toxic substances."]},{name:"Section 24",subtitle:"Unlawful Acts Pertaining to Employment.",sub_paragraph:"It shall be unlawful for any person:",paragraph:["a. To discriminate against any ICC/IP with respect to the terms and conditions of employment on account of their descent. Equal remuneration shall be paid to ICC/IP and non-ICC/IP for work of equal value; and","b. To deny any ICC/IP employee any right or benefit herein provided for or to discharge them for the purpose of preventing them from enjoying any of the rights or benefits provided under this Act."]},{name:"Section 25",subtitle:"Basic Services.",paragraph:"The ICCs/IPs have the right to special measures for the immediate, effective and continuing improvement of their economic and social conditions, including in the areas of employment, vocational training and retraining, housing, sanitation, health and social security. Particular attention shall be paid to the rights and special needs of indigenous women, elderly, youth, children and differently-abled persons. Accordingly, the State shall guarantee the right of ICCs/IPs to government’s basic services which shall include, but not limited to, water and electrical facilities, education, health, and infrastructure."},{name:"Section 26",subtitle:"Women",paragraph:["ICC/IP women shall enjoy equal rights and opportunities with men, as regards the social, economic, political and cultural spheres of life. The participation of indigenous women in the decision-making process in all levels, as well as in the development of society, shall be given due respect and recognition.","The State shall provide full access to education, maternal and child care, health and nutrition, and housing services to indigenous women. Vocational, technical, professional and other forms of training shall be provided to enable these women to fully participate in all aspects of social life. As far as possible, the State shall ensure that indigenous women have access to all services in their own languages."]},{name:"Section 27",subtitle:"Children and Youth.",paragraph:"The State shall recognize the vital role of the children and youth of ICCs/IPs in nation-building and shall promote and protect their physical, moral, spiritual, intellectual and social well-being. Towards this end, the State shall support all government programs intended for the development and rearing of the children and youth of ICCs/IPs for civic efficiency and establish such mechanisms as may be necessary for the protection of the rights of the indigenous children and youth."},{name:"Section 28",subtitle:"Integrated System of Education.",paragraph:"The State shall, through the NCIP, provide a complete, adequate and integrated system of education, relevant to the needs of the children and young people of ICCs/IPs."}]}],tge=()=>{const n=qt(),{selectedWord:e,definition:t,tooltipPosition:i,handleTextSelection:r}=Fn(),[s,o]=V.useState(!1);V.useEffect(()=>{const u=()=>{window.scrollY>200?o(!0):o(!1)};return window.addEventListener("scroll",u),()=>window.removeEventListener("scroll",u)},[]);const a=()=>{window.scrollTo({top:0,behavior:"smooth"})},l=()=>{n("/chapterSix")},c=()=>{n("/chapterFour")};return d.jsxs("div",{className:"text-spacing-3 leading-relaxed tracking-wide",children:[d.jsx(Ln,{children:d.jsxs("div",{children:[ege.map(u=>d.jsxs("div",{className:"my-5",children:[d.jsx("h5",{className:q.paragraphSubText,children:u.subtitle}),d.jsx("h4",{className:`${q.headText} mb-10`,children:u.title}),d.jsx("div",{children:u.sections.map((f,m)=>d.jsxs("div",{className:"my-4",children:[d.jsxs("h6",{className:q.paragraphSubText,children:[f.name," ",f.subtitle]}),d.jsx("p",{onMouseUp:r,className:q.paragraphSubTextLower,children:f.paragraph})]},m))})]},u.id)),e&&d.jsxs("div",{className:"absolute text-left bg-white p-4 shadow-lg rounded-lg max-w-xs text-black",style:{left:i.left,top:i.top,zIndex:100},children:[d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsx("p",{className:q.dictionaryText,children:e}),d.jsx("i",{className:"fas fa-volume-up ml-5 text-gray-600"})]}),d.jsx("hr",{className:"border-2 mb-2"}),d.jsx("p",{children:t})]}),d.jsxs("div",{className:"mt-10 text-center flex justify-between",children:[d.jsx("button",{onClick:c,className:"px-6 py-2 border justify-end text-white rounded-lg hover:bg-gray-500",children:"Previous Article"}),d.jsx("button",{onClick:l,className:"px-6 py-2 border justify-end text-white rounded-lg hover:bg-gray-500",children:"Next Article"})]})]})}),s&&d.jsx("button",{onClick:a,className:"fixed bottom-6 right-6 w-12 h-12 bg-gray-600 text-white rounded-full shadow-lg flex items-center justify-center hover:bg-gray-800 transition-all duration-300",children:d.jsx("i",{className:"fas fa-arrow-up"})})]})},nge=Bt(tge),ige=[{id:"integrity",title:"Cultural Integrity",subtitle:"Chapter VI",sections:[{name:"Section 29",subtitle:"Protection of Indigenous Culture, Traditions and Institutions.",paragraph:"The State shall respect, recognize and protect the right of ICCs/IPs to preserve and protect their culture, traditions and institutions. It shall consider these rights in the formulation and application of national plans and policies."},{name:"Section 30",subtitle:"Educational Systems.",paragraph:"The State shall provide equal access to various cultural opportunities to the ICCs/IPs through the educational system, public or private cultural entities, scholarships, grants and other incentives without prejudice to their right to establish and control their educational systems and institutions by providing education in their own language, in a manner appropriate to their cultural methods of teaching and learning. Indigenous children/youth shall have the right to all levels and forms of education of the State."},{name:"Section 31",subtitle:"Recognition of Cultural Diversity.",paragraph:"The State shall endeavor to have the dignity and diversity of the cultures, traditions, histories and aspirations of the ICCs/IPs appropriately reflected in all forms of education, public information and cultural-educational exchange. Consequently, the State shall take effective measures, in consultation with ICCs/IPs concerned, to eliminate prejudice and discrimination and to promote tolerance, understanding and good relations among ICCs/IPs and all segments of society. Furthermore, the Government shall take effective measures to ensure that the State-owned media duly reflect indigenous cultural diversity. The State shall likewise ensure the participation of appropriate indigenous leaders in schools, communities and international cooperative undertakings like festivals, conferences, seminars and workshops to promote and enhance their distinctive heritage and values."},{name:"Section 32",subtitle:"Community Intellectual Rights.",paragraph:"ICCs/IPs have the right to practice and revitalize their own cultural traditions and customs. The State shall preserve, protect and develop the past, present and future manifestations of their cultures as well as the right to the restitution of cultural, intellectual, religious, and spiritual property taken without their free and prior informed consent or in violation of their laws, traditions and customs."},{name:"Section 33",subtitle:"Rights to Religious, Cultural Sites and Ceremonies.",paragraph:["ICCs/IPs shall have the right to manifest, practice, develop, and teach their spiritual and religious traditions, customs and ceremonies; the right to maintain, protect and have access to their religious and cultural sites; the right to use and control of ceremonial objects; and, the right to the repatriation of human remains. Accordingly, the State shall take effective measures, in cooperation with the ICCs/IPs concerned, to ensure that indigenous sacred places, including burial sites, be preserved, respected and protected. To achieve this purpose, it shall be unlawful to:","a. Explore, excavate or make diggings on archeological sites of the ICCs/IPs for the purpose of obtaining materials of cultural values without the free and prior informed consent of the community concerned; and","b.Deface, remove or otherwise destroy artifacts which are of great importance to the ICCs/IPs for the preservation of their cultural heritage."]},{name:"Section 34",subtitle:"Right to Indigenous Knowledge Systems and Practices and to Develop own Sciences and Technologies.",paragraph:"ICCs/IPs are entitled to the recognition of the full ownership and control and protection of their cultural and intellectual rights. They shall have the right to special measures to control, develop and protect their sciences, technologies and cultural manifestations, including human and other genetic resources, seeds, including derivatives of these resources, traditional medicines and health practices, vital medicinal plants, animals and minerals, indigenous knowledge systems and practices, knowledge of the properties of fauna and flora, oral traditions, literature, designs, and visual and performing arts."},{name:"Section 35",subtitle:"Access to Biological and Genetic Resources.",paragraph:"Access to biological and genetic resources and to indigenous knowledge related to the conservation, utilization and enhancement of these resources, shall be allowed within ancestral lands and domains of the ICCs/IPs only with a free and prior informed consent of such communities, obtained in accordance with customary laws of the concerned community."},{name:"Section 36",subtitle:"Sustainable Agro-Technical Development.",paragraph:"The State shall recognize the right of ICCs/IPs to a sustainable agro-technological development and shall formulate and implement programs of action for its effective implementation. The State shall likewise promote the bio-genetic and resource management systems among the ICCs/IPs and shall encourage cooperation among government agencies to ensure the successful sustainable development of ICCs/IPs."},{name:"Section 36",subtitle:"Funds for Archeological and Historical Sites.",paragraph:"The ICCs/IPs shall have the right to receive from the national government all funds especially earmarked or allocated for the management and preservation of their archeological and historical sites and artifacts with the financial and technical support of the national government agencies."}]}],rge=()=>{const n=qt(),{selectedWord:e,definition:t,tooltipPosition:i,handleTextSelection:r}=Fn(),[s,o]=V.useState(!1);V.useEffect(()=>{const u=()=>{window.scrollY>200?o(!0):o(!1)};return window.addEventListener("scroll",u),()=>window.removeEventListener("scroll",u)},[]);const a=()=>{window.scrollTo({top:0,behavior:"smooth"})},l=()=>{n("/chapterSeven")},c=()=>{n("/chapterFive")};return d.jsxs("div",{className:"text-spacing-3 leading-relaxed tracking-wide",children:[d.jsx(Ln,{children:d.jsxs("div",{children:[ige.map(u=>d.jsxs("div",{className:"my-5",children:[d.jsx("h5",{className:q.paragraphSubText,children:u.subtitle}),d.jsx("h4",{className:`${q.headText} mb-10`,children:u.title}),d.jsx("div",{children:u.sections.map((f,m)=>d.jsxs("div",{className:"my-4",children:[d.jsxs("h6",{className:q.paragraphSubText,children:[f.name," ",f.subtitle]}),d.jsx("p",{onMouseUp:r,className:q.paragraphSubTextLower,children:f.paragraph})]},m))})]},u.id)),e&&d.jsxs("div",{className:"absolute text-left bg-white p-4 shadow-lg rounded-lg max-w-xs text-black",style:{left:i.left,top:i.top,zIndex:100},children:[d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsx("p",{className:q.dictionaryText,children:e}),d.jsx("i",{className:"fas fa-volume-up ml-5 text-gray-600"})]}),d.jsx("hr",{className:"border-2 mb-2"}),d.jsx("p",{children:t})]}),d.jsxs("div",{className:"mt-10 text-center flex justify-between",children:[d.jsx("button",{onClick:c,className:"px-6 py-2 border justify-end text-white rounded-lg hover:bg-gray-500",children:"Previous Article"}),d.jsx("button",{onClick:l,className:"px-6 py-2 border justify-end text-white rounded-lg hover:bg-gray-500",children:"Next Article"})]})]})}),s&&d.jsx("button",{onClick:a,className:"fixed bottom-6 right-6 w-12 h-12 bg-gray-600 text-white rounded-full shadow-lg flex items-center justify-center hover:bg-gray-800 transition-all duration-300",children:d.jsx("i",{className:"fas fa-arrow-up"})})]})},sge=Bt(rge),oge=[{id:"NCIP",title:"National Commission on Indigenous Peoples (NCIP)",subtitle:"Chapter VII",sections:[{name:"Section 38",subtitle:"National Commission on Indigenous Cultural Communities/Indigenous Peoples (NCIP).",paragraph:"To carry out the policies herein set forth, there shall be created the National Commission on ICCs/IPs (NCIP), which shall be the primary government agency responsible for the formulation and implementation of policies, plans and programs to promote and protect the rights and well-being of the ICCs/IPs and the recognition of their ancestral domains as well as the rights thereto."},{name:"Section 39",subtitle:"Mandate.",paragraph:"The NCIP shall protect and promote the interest and well-being of the ICCs/IPs with due regard to their beliefs, customs, traditions and institutions."},{name:"Section 40",subtitle:"Composition",paragraph:"The NCIP shall be an independent agency under the Office of the President and shall be composed of seven (7) Commissioners belonging to ICCs/IPs, one (1) of whom shall be the Chairperson. The Commissioners shall be appointed by the President of the Philippines from a list of recommendees submitted by authentic ICCs/IPs: Provided, That the seven (7) Commissioners shall be appointed specifically from each of the following ethnographic areas: Region I and the Cordilleras; Region II; the rest of Luzon; Island Groups including Mindoro, Palawan, Romblon, Panay and the rest of the Visayas; Northern and Western Mindanao; Southern and Eastern Mindanao; and Central Mindanao: Provided, That at least two (2) of the seven (7) Commissioners shall be women."},{name:"Section 41",subtitle:"Qualifications, Tenure, Compensation.",paragraph:["The Chairperson and the six (6) Commissioners must be natural born Filipino citizens, bona fide members of the ICCs/IPs as certified by his/her tribe, experienced in ethnic affairs and who have worked for at least ten (10) years with an ICC/IP community and/or any government agency involved in ICC/IP, at least 35 years of age at the time of appointment, and must be of proven honesty and integrity: Provided, That at least two (2) of the seven (7) Commissioners shall be members of the Philippine Bar: Provided, further, That the members of the NCIP shall hold office for a period of three (3) years, and may be subject to re-appointment for another term: Provided, furthermore, That no person shall serve for more than two (2) terms.","Appointment to any vacancy shall only be for the unexpired term of the predecessor and in no case shall a member be appointed or designated in a temporary or acting capacity: Provided, finally, That the Chairperson and the Commissioners shall be entitled to compensation in accordance with the Salary Standardization Law."]},{name:"Section 42",subtitle:"Removal from Office.",paragraph:"Any member of the NCIP may be removed from office by the President, on his own initiative or upon recommendation by any indigenous community, before the expiration of his term for cause and after complying with due process requirement of law."},{name:"Section 43",subtitle:"Appointment of Commissioners.",paragraph:"The President shall appoint the seven (7) Commissioners of the NCIP within ninety (90) days from the effectivity of this Act."}]}],age=[{name:"Section 44",subtitle:"Powers and Functions.",sub_paragraphs:"To accomplish its mandate, the NCIP shall have the following powers, jurisdiction and function:",section:{paragraph:["a. To accomplish its mandate, the NCIP shall have the following powers, jurisdiction and function.","b. To review and assess the conditions of ICCs/IPs including existing laws and policies pertinent thereto and to propose relevant laws and policies to address their role in national development;","c. To formulate and implement policies, plans, programs and projects for the economic, social and cultural development of the ICCs/IPs and to monitor the implementation thereof;","d, To request and engage the services and support of experts from other agencies of government or employ private experts and consultants as may be required in the pursuit of its objectives;","e.To issue certificate of ancestral land/domain title;","f. Subject to existing laws, to enter into contracts, agreements, or arrangement, with government or private agencies or entities as may be necessary to attain the objectives of this Act, and subject to the approval of the President, to obtain loans from government lending institutions and other lending institutions to finance its programs;","g. To negotiate for funds and to accept grants, donations, gifts and/or properties in whatever form and from whatever source, local and international, subject to the approval of the President of the Philippines, for the benefit of ICCs/IPs and administer the same in accordance with the terms thereof; or in the absence of any condition, in such manner consistent with the interest of ICCs/IPs as well as existing laws;","h. To coordinate development programs and projects for the advancement of the ICCs/IPs and to oversee the proper implementation thereof;","i. To convene periodic conventions or assemblies of IPs to review, assess as well as propose policies or plans;","j. To advise the President of the Philippines on all matters relating to the ICCs/IPs and to submit within sixty (60) days after the close of each calendar year, a report of its operations and achievements;","k. To submit to Congress appropriate legislative proposals intended to carry out the policies under this Act;","l. To prepare and submit the appropriate budget to the Office of the President;","m. To issue appropriate certification as a pre-condition to the grant of permit, lease, grant, or any other similar authority for the disposition, utilization, management and appropriation by any private individual, corporate entity or any government agency, corporation or subdivision thereof on any part or portion of the ancestral domain taking into consideration the consensus approval of the ICCs/IPs concerned;","n. To decide all appeals from the decisions and acts of all the various offices within the Commission;","o. To promulgate the necessary rules and regulations for the implementation of this Act;","p. To exercise such other powers and functions as may be directed by the President of the Republic of the Philippines; and","q. To represent the Philippine ICCs/IPs in all international conferences and conventions dealing with indigenous peoples and other related concerns."]}}],lge=[{name:"Section 45",subtitle:"Accessibility and Transparency.",paragraph:"Subject to such limitations as may be provided by law or by rules and regulations promulgated pursuant thereto, all official records, documents and papers pertaining to official acts, transactions or decisions, as well as research data used as basis for policy development of the Commission shall be made accessible to the public."}],cge=[{name:"Section 46",subtitle:"Offices within the NCIP.",sub_paragraphs:"The NCIP shall have the following offices which shall be responsible for the implementation of the policies hereinafter provided:",sections:[{name:"a. Ancestral Domains Office",paragraph:"The Ancestral Domain Office shall be responsible for the identification, delineation and recognition of ancestral lands/domains. It shall also be responsible for the management of ancestral lands/domains in accordance with a master plan as well as the implementation of the ancestral domain rights of the ICCs/IPs as provided in Chapter III of this Act. It shall also issue, upon the free and prior informed consent of the ICCs/IPs concerned, certification prior to the grant of any license, lease or permit for the exploitation of natural resources affecting the interests of ICCs/IPs or their ancestral domains and to assist the ICCs/IPs in protecting the territorial integrity of all ancestral domains. It shall likewise perform such other functions as the Commission may deem appropriate and necessary;"},{name:"b. Office on Policy, Planning and Research",paragraph:"The Office on Policy, Planning and Research shall be responsible for the formulation of appropriate policies and programs for ICCs/IPs such as, but not limited to, the development of a Five-Year Master Plan for the ICCs/IPs. Such plan shall undergo a process such that every five years, the Commission shall endeavor to assess the plan and make ramifications in accordance with the changing situations. The Office shall also undertake the documentation of customary law and shall establish and maintain a Research Center that would serve as a depository of ethnographic information for monitoring, evaluation and policy formulation. It shall assist the legislative branch of the national government in the formulation of appropriate legislation benefiting ICCs/IPs;"},{name:"c. Office of Education, Culture and Health",paragraph:["The Office on Culture, Education and Health shall be responsible for the effective implementation of the education, cultural and related rights as provided in this Act. It shall assist, promote and support community schools, both formal and non-formal, for the benefit of the local indigenous community, especially in areas where existing educational facilities are not accessible to members of the indigenous group. It shall administer all scholarship programs and other educational rights intended for ICC/IP beneficiaries in coordination with the Department of Education, Culture and Sports and the Commission on Higher Education. It shall undertake, within the limits of available appropriation, a special program which includes language and vocational training, public health and family assistance program and related subjects.","It shall also identify ICCs/IPs with potential training in the health profession and encourage and assist them to enroll in schools of medicine, nursing, physical therapy and other allied courses pertaining to the health profession.","Towards this end, the NCIP shall deploy a representative in each of the said offices who shall personally perform the foregoing task and who shall receive complaints from the ICCs/IPs and compel action from appropriate agency. It shall also monitor the activities of the National Museum and other similar government agencies generally intended to manage and preserve historical and archeological artifacts of the ICCs/IPs and shall be responsible for the implementation of such other functions as the NCIP may deem appropriate and necessary;"]},{name:"d. Office on Socio-Economic Services and Special Concerns",paragraph:"The Office on Socio-Economic Services and Special Concerns shall serve as the Office through which the NCIP shall coordinate with pertinent government agencies specially charged with the implementation of various basic socio-economic services, policies, plans and programs affecting the ICCs/IPs to ensure that the same are properly and directly enjoyed by them. It shall also be responsible for such other functions as the NCIP may deem appropriate and necessary;"},{name:"e. Office of Empowerment and Human Rights",paragraph:"The Office of Empowerment and Human Rights shall ensure that indigenous socio-political, cultural and economic rights are respected and recognized. It shall ensure that capacity building mechanisms are instituted and ICCs/IPs are afforded every opportunity, if they so choose, to participate in all levels of decision-making. It shall likewise ensure that the basic human rights, and such other rights as the NCIP may determine, subject to existing laws, rules and regulations, are protected and promoted;"},{name:"f. Administrative Office",paragraph:"The Administrative Office shall provide the NCIP with economical, efficient and effective services pertaining to personnel, finance, records, equipment, security, supplies and related services. It shall also administer the Ancestral Domains Fund; and"},{name:"g. Legal Affairs Office",paragraph:"There shall be a Legal Affairs Office which shall advice the NCIP on all legal matters concerning ICCs/IPs and which shall be responsible for providing ICCs/IPs with legal assistance in litigation involving community interest. It shall conduct preliminary investigation on the basis of complaints filed by the ICCs/IPs against a natural or juridical person believed to have violated ICCs/IPs rights. On the basis of its findings, it shall initiate the filing of appropriate legal or administrative action to the NCIP."}]}],uge=[{name:"Section 47",subtitle:"Other Offices.",paragraph:"The NCIP shall have the power to create additional offices as it may deem necessary subject to existing rules and regulations."},{name:"Section 48",subtitle:"Regional and Field Offices.",paragraph:"Existing regional and field offices shall remain to function under the strengthened organizational structure of the NCIP. Other field offices shall be created wherever appropriate and the staffing pattern thereof shall be determined by the NCIP: Provided, That in provinces where there are ICCs/IPs but without field offices, the NCIP shall establish field offices in said provinces."},{name:"Section 49",subtitle:"Office of the Executive Director.",paragraph:"The NCIP shall create the Office of the Executive Director which shall serve as its secretariat. The Office shall be headed by an Executive Director who shall be appointed by the President of the Republic of the Philippines upon recommendation of the NCIP on a permanent basis. The staffing pattern of the office shall be determined by the NCIP subject to the existing rules and regulations."},{name:"Section 50",subtitle:"Consultative Body.",paragraph:"A body consisting of the traditional leaders, elders and representatives from the women and youth sectors of the different ICCs/IPs shall be constituted by the NCIP from time to time to advise it on matters relating to the problems, aspirations and interests of the ICCs/IPs."}],hge=()=>{const n=qt(),{selectedWord:e,definition:t,tooltipPosition:i,handleTextSelection:r}=Fn(),[s,o]=V.useState(!1);V.useEffect(()=>{const u=()=>{window.scrollY>200?o(!0):o(!1)};return window.addEventListener("scroll",u),()=>window.removeEventListener("scroll",u)},[]);const a=()=>{window.scrollTo({top:0,behavior:"smooth"})},l=()=>n("/chapterEight"),c=()=>n("/ChapterSix");return d.jsxs("div",{children:[d.jsx(Ln,{children:d.jsxs("div",{children:[oge.map(u=>d.jsxs("div",{className:"my-5",children:[d.jsx("h5",{className:q.paragraphSubText,children:u.subtitle}),d.jsx("h4",{className:`${q.headText} mb-10`,children:u.title}),d.jsx("div",{children:u.sections.map((f,m)=>d.jsxs("div",{className:"my-4",children:[d.jsxs("h6",{className:q.paragraphSubText,children:[f.name," ",f.subtitle]}),d.jsx("p",{onMouseUp:r,className:q.paragraphSubTextLower,children:f.paragraph})]},m))})]},u.id)),age.map(u=>d.jsxs("div",{className:"my-5",children:[d.jsxs("h5",{className:q.paragraphSubText,children:[u.name," ",u.subtitle]}),d.jsxs("div",{children:[d.jsx("p",{onMouseUp:r,className:q.paragraphSubTextLower,children:u.sub_paragraphs}),d.jsx("br",{}),u.section.paragraph.map((f,m)=>d.jsx("p",{onMouseUp:r,className:q.paragraphSubTextLower,children:f},m))]})]},u.name)),lge.map(u=>d.jsxs("div",{className:"my-5",children:[d.jsxs("h6",{className:q.paragraphSubText,children:[u.name," ",u.subtitle]}),d.jsx("p",{onMouseUp:r,className:q.paragraphSubTextLower,children:u.paragraph})]},u.name)),cge.map(u=>d.jsxs("div",{className:"my-5",children:[d.jsxs("h5",{className:q.paragraphSubText,children:[u.name," ",u.subtitle]}),d.jsx("p",{onMouseUp:r,className:q.paragraphSubTextLower,children:u.sub_paragraphs}),d.jsx("div",{children:u.sections.map((f,m)=>d.jsxs("div",{className:"my-4",children:[d.jsx("h6",{className:q.paragraphSubText,children:f.name}),d.jsx("p",{onMouseUp:r,className:q.paragraphSubTextLower,children:f.paragraph})]},m))})]},u.name)),uge.map(u=>d.jsxs("div",{className:"my-5",children:[d.jsxs("h5",{className:q.paragraphSubText,children:[u.name," ",u.subtitle]}),d.jsx("p",{onMouseUp:r,className:q.paragraphSubTextLower,children:u.paragraph})]},u.name)),e&&d.jsxs("div",{className:"absolute text-left bg-white p-4 shadow-lg rounded-lg max-w-xs text-black",style:{left:i.left,top:i.top,zIndex:100},children:[d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsx("p",{className:q.dictionaryText,children:e}),d.jsx("i",{className:"fas fa-volume-up ml-5 text-gray-600"})]}),d.jsx("hr",{className:"border-2 mb-2"}),d.jsx("p",{children:t})]}),d.jsxs("div",{className:"mt-10 text-center flex justify-between",children:[d.jsx("button",{onClick:c,className:"px-6 py-2 border text-white rounded-lg hover:bg-gray-500",children:"Previous Article"}),d.jsx("button",{onClick:l,className:"px-6 py-2 border text-white rounded-lg hover:bg-gray-500",children:"Next Article"})]})]})}),s&&d.jsx("button",{onClick:a,className:"fixed bottom-6 right-6 w-12 h-12 bg-gray-600 text-white rounded-full shadow-lg flex items-center justify-center hover:bg-gray-800 transition-all duration-300",children:d.jsx("i",{className:"fas fa-arrow-up"})})]})},dge=Bt(hge),dE=[{id:"recognition",title:"Delineation and Recognition of Ancestral Domains",subtitle:"Chapter VIII",sections:[{name:"Section 51",subtitle:"Delineation and Recognition of Ancestral Domains.",paragraph:"Self-delineation shall be the guiding principle in the identification and delineation of ancestral domains. As such, the ICCs/IPs concerned shall have a decisive role in all the activities pertinent thereto. The Sworn Statement of the Elders as to the scope of the territories and agreements/pacts made with neighboring ICCs/IPs, if any, will be essential to the determination of these traditional territories. The Government shall take the necessary steps to identify lands which the ICCs/IPs concerned traditionally occupy and guarantee effective protection of their rights of ownership and possession thereto. Measures shall be taken in appropriate cases to safeguard the right of the ICCs/IPs concerned to land which may no longer be exclusively occupied by them, but to which they have traditionally had access for their subsistence and traditional activities, particularly of ICCs/IPs who are still nomadic and/or shifting cultivators."},{name:"Section 52",subtitle:"Delineation Process.",sub_paragraphs:"The identification and delineation of ancestral domains shall be done in accordance with the following procedures:",paragraph:[{name:"Ancestral Domains Delineated Prior to this Act.",paragraph:"The provisions hereunder shall not apply to ancestral domains/lands already delineated according to DENR Administrative Order No. 2, series of 1993, nor to ancestral lands and domains delineated under any other community/ancestral domain program prior to the enactment of this law. ICCs/IPs whose ancestral lands/domains were officially delineated prior to the enactment of this law shall have the right to apply for the issuance of a Certificate of Ancestral Domain Title (CADT) over the area without going through the process outlined hereunder;"},{name:"Petition for Delineation",paragraph:"The process of delineating a specific perimeter may be initiated by the NCIP with the consent of the ICC/IP concerned, or through a Petition for Delineation filed with the NCIP, by a majority of the members of the ICCs/IPs;"},{name:"Delineation Proper.",paragraph:"The official delineation of ancestral domain boundaries including census of all community members therein, shall be immediately undertaken by the Ancestral Domains Office upon filing of the application by the ICCs/IPs concerned. Delineation will be done in coordination with the community concerned and shall at all times include genuine involvement and participation by the members of the communities concerned;"},{name:"Proof Required",paragraph:["Proof of Ancestral Domain Claims shall include the testimony of elders or community under oath, and other documents directly or indirectly attesting to the possession or occupation of the area since time immemorial by such ICCs/IPs in the concept of owners which shall be any one (1) of the following authentic documents:","1. Written accounts of the ICCs/IPs customs and traditions","2. Written accounts of the ICCs/IPs political structure and institution;","3. Pictures showing long term occupation such as those of old improvements, burial grounds, sacred places and old villages;","4. Historical accounts, including pacts and agreements concerning boundaries entered into by the ICCs/IPs concerned with other ICCs/IPs;","5. Survey plans and sketch maps;","6. Anthropological data;","7. Genealogical surveys;","8. Pictures and descriptive histories of traditional communal forests and hunting grounds;","9. Pictures and descriptive histories of traditional landmarks such as mountains, rivers, creeks, ridges, hills, terraces and the like; and","10. Write-ups of names and places derived from the native dialect of the community."]},{name:"Preparation of Maps.",paragraph:"On the basis of such investigation and the findings of fact based thereon, the Ancestral Domains Office of the NCIP shall prepare a perimeter map, complete with technical descriptions, and a description of the natural features and landmarks embraced therein;"},{name:"Report of Investigation and Other Documents",paragraph:"A complete copy of the preliminary census and a report of investigation, shall be prepared by the Ancestral Domains Office of the NCIP;"},{name:"Notice and Publication",paragraph:"A copy of each document, including a translation in the native language of the ICCs/IPs concerned shall be posted in a prominent place therein for at least fifteen (15) days. A copy of the document shall also be posted at the local, provincial and regional offices of the NCIP, and shall be published in a newspaper of general circulation once a week for two (2) consecutive weeks to allow other claimants to file opposition thereto within fifteen (15) days from date of such publication: Provided, That in areas where no such newspaper exists, broadcasting in a radio station will be a valid substitute: Provided, further, That mere posting shall be deemed sufficient if both newspaper and radio station are not available;"},{name:"Endorsement to NCIP.",paragraph:" Within fifteen (15) days from publication, and of the inspection process, the Ancestral Domains Office shall prepare a report to the NCIP endorsing a favorable action upon a claim that is deemed to have sufficient proof. However, if the proof is deemed insufficient, the Ancestral Domains Office shall require the submission of additional evidence: Provided, That the Ancestral Domains Office shall reject any claim that is deemed patently false or fraudulent after inspection and verification: Provided, further, That in case of rejection, the Ancestral Domains Office shall give the applicant due notice, copy furnished all concerned, containing the grounds for denial. The denial shall be appealable to the NCIP: Provided, furthermore, That in cases where there are conflicting claims among ICCs/IPs on the boundaries of ancestral domain claims, the Ancestral Domains Office shall cause the contending parties to meet and assist them in coming up with a preliminary resolution of the conflict, without prejudice to its full adjudication according to the section below."},{name:"Turnover of Areas Within Ancestral Domains Managed by Other Government Agencies.",paragraph:" The Chairperson of the NCIP shall certify that the area covered is an ancestral domain. The secretaries of the Department of Agrarian Reform, Department of Environment and Natural Resources, Department of the Interior and Local Government, and Department of Justice, the Commissioner of the National Development Corporation, and any other government agency claiming jurisdiction over the area shall be notified thereof. Such notification shall terminate any legal basis for the jurisdiction previously claimed;"},{name:"Turnover of Areas Within Ancestral Domains Managed by Other Government Agencies.",paragraph:" The Chairperson of the NCIP shall certify that the area covered is an ancestral domain. The secretaries of the Department of Agrarian Reform, Department of Environment and Natural Resources, Department of the Interior and Local Government, and Department of Justice, the Commissioner of the National Development Corporation, and any other government agency claiming jurisdiction over the area shall be notified thereof. Such notification shall terminate any legal basis for the jurisdiction previously claimed;"},{name:"Issuance of CADT",paragraph:"ICCs/IPs whose ancestral domains have been officially delineated and determined by the NCIP shall be issued a CADT in the name of the community concerned, containing a list of all those identified in the census; and"},{name:"Registration of CADTs",paragraph:"The NCIP shall register issued certificates of ancestral domain titles and certificates of ancestral lands titles before the Register of Deeds in the place where the property is situated."}]},{name:"Section 53",subtitle:"Identification, Delineation and Certification of Ancestral Lands.",paragraph:["a. The allocation of lands within any ancestral domain to individual or indigenous corporate (family or clan) claimants shall be left to the ICCs/IPs concerned to decide in accordance with customs and traditions;","b. Individual and indigenous corporate claimants of ancestral lands which are not within ancestral domains, may have their claims officially established by filing applications for the identification and delineation of their claims with the Ancestral Domains Office. An individual or recognized head of a family or clan may file such application in his behalf or in behalf of his family or clan, respectively;","c. Proofs of such claims shall accompany the application form which shall include the testimony under oath of elders of the community and other documents directly or indirectly attesting to the possession or occupation of the areas since time immemorial by the individual or corporate claimants in the concept of owners which shall be any of the authentic documents enumerated under Sec. 52 (d) of this Act, including tax declarations and proofs of payment of taxes;","d. The Ancestral Domains Office may require from each ancestral claimant the submission of such other documents, Sworn Statements and the like, which in its opinion, may shed light on the veracity of the contents of the application/claim;","e. Upon receipt of the applications for delineation and recognition of ancestral land claims, the Ancestral Domains Office shall cause the publication of the application and a copy of each document submitted including a translation in the native language of the ICCs/IPs concerned in a prominent place therein for at least fifteen (15) days. A copy of the document shall also be posted at the local, provincial, and regional offices of the NCIP and shall be published in a newspaper of general circulation once a week for two (2) consecutive weeks to allow other claimants to file opposition thereto within fifteen (15) days from the date of such publication: Provided, That in areas where no such newspaper exists, broadcasting in a radio station will be a valid substitute: Provided, further, That mere posting shall be deemed sufficient if both newspapers and radio station are not available;","f. Fifteen (15) days after such publication, the Ancestral Domains Office shall investigate and inspect each application, and if found to be meritorious, shall cause a parcellary survey of the area being claimed. The Ancestral Domains Office shall reject any claim that is deemed patently false or fraudulent after inspection and verification. In case of rejection, the Ancestral Domains Office shall give the applicant due notice, copy furnished all concerned, containing the grounds for denial. The denial shall be appealable to the NCIP.","In case of conflicting claims among individuals or indigenous corporate claimants, the Ancestral Domains Office shall cause the contending parties to meet and assist them in coming up with a preliminary resolution of the conflict, without prejudice to its full adjudication according to Sec. 62 of this Act. In all proceedings for the identification or delineation of the ancestral domains as herein provided, the Director of Lands shall represent the interest of the Republic of the Philippines; and","g. The Ancestral Domains Office shall prepare and submit a report on each and every application surveyed and delineated to the NCIP, which shall, in turn, evaluate the report submitted. If the NCIP finds such claim meritorious, it shall issue a certificate of ancestral land, declaring and certifying the claim of each individual or corporate (family or clan) claimant over ancestral lands."]},{name:"Section 54",subtitle:"Fraudulent Claims.",paragraph:"The Ancestral Domains Office may, upon written request from the ICCs/IPs, review existing claims which have been fraudulently acquired by any person or community. Any claim found to be fraudulently acquired by, and issued to, any person or community may be cancelled by the NCIP after due notice and hearing of all parties concerned."},{name:"Section 55",subtitle:"Communal Rights.",paragraph:"Subject to Section 56 hereof, areas within the ancestral domains, whether delineated or not, shall be presumed to be communally held: Provided, That communal rights under this Act shall not be construed as co-ownership as provided in Republic Act No. 386, otherwise known as the New Civil Code."},{name:"Section 56",subtitle:"Existing Property Rights Regimes.",paragraph:"Property rights within the ancestral domains already existing and/or vested upon effectivity of this Act, shall be recognized and respected."},{name:"Section 57",sub_paragraphs:"Natural Resources within Ancestral Domains.",paragraph:"The ICCs/IPs shall have priority rights in the harvesting, extraction, development or exploitation of any natural resources within the ancestral domains. A non-member of the ICCs/IPs concerned may be allowed to take part in the development and utilization of the natural resources for a period of not exceeding twenty-five (25) years renewable for not more than twenty-five (25) years: Provided, That a formal and written agreement is entered into with the ICCs/IPs concerned or that the community, pursuant to its own decision making process, has agreed to allow such operation: Provided, finally, That the NCIP may exercise visitorial powers and take appropriate action to safeguard the rights of the ICCs/IPs under the same contract."},{name:"Section 58",subtitle:"Environmental Considerations.",paragraph:"Ancestral domains or portions thereof, which are found to be necessary for critical watersheds, mangroves, wildlife sanctuaries, wilderness, protected areas, forest cover, or reforestation as determined by appropriate agencies with the full participation of the ICCs/IPs concerned shall be maintained, managed and developed for such purposes. The ICCs/IPs concerned shall be given the responsibility to maintain, develop, protect and conserve such areas with the full and effective assistance of government agencies. Should the ICCs/IPs decide to transfer the responsibility over the areas, said decision must be made in writing. The consent of the ICCs/IPs should be arrived at in accordance with its customary laws without prejudice to the basic requirements of existing laws on free and prior informed consent: Provided, That the transfer shall be temporary and will ultimately revert to the ICCs/IPs in accordance with a program for technology transfer: Provided, further, That no ICCs/IPs shall be displaced or relocated for the purpose enumerated under this section without the written consent of the specific persons authorized to give consent."},{name:"Section 59",subtitle:"Certification Precondition.",paragraph:"All departments and other governmental agencies shall henceforth be strictly enjoined from issuing, renewing, or granting any concession, license or lease, or entering into any production-sharing agreement, without prior certification from the NCIP that the area affected does not overlap with any ancestral domain. Such certification shall only be issued after a field-based investigation is conducted by the Ancestral Domains Office of the area concerned: Provided, That no certification shall be issued by the NCIP without the free and prior informed and written consent of ICCs/IPs concerned: Provided, further, That no department, government agency or government-owned or -controlled corporation may issue new concession, license, lease, or production sharing agreement while there is a pending application for a CADT: Provided, finally, That the ICCs/IPs shall have the right to stop or suspend, in accordance with this Act, any project that has not satisfied the requirement of this consultation process."},{name:"Section 60",sub_paragraphs:"Exemption from Taxes.",paragraph:"All lands certified to be ancestral domains shall be exempt from real property taxes, special levies, and other forms of exaction except such portion of the ancestral domains as are actually used for large-scale agriculture, commercial forest plantation and residential purposes or upon titling by private persons: Provided, That all exactions shall be used to facilitate the development and improvement of the ancestral domains."},{name:"Section 61",subtitle:"Temporary Requisition Powers.",paragraph:"Prior to the establishment of an institutional surveying capacity whereby it can effectively fulfill its mandate, but in no case beyond three (3) years after its creation, the NCIP is hereby authorized to request the Department of Environment and Natural Resources (DENR) survey teams as well as other equally capable private survey teams, through a Memorandum of Agreement (MOA), to delineate ancestral domain perimeters. The DENR Secretary shall accommodate any such request within one (1) month of its issuance: Provided, That the Memorandum of Agreement shall stipulate, among others, a provision for technology transfer to the NCIP."},{name:"Section 62",subtitle:"Resolution of Conflicts.",paragraph:"In cases of conflicting interest, where there are adverse claims within the ancestral domains as delineated in the survey plan, and which can not be resolved, the NCIP shall hear and decide, after notice to the proper parties, the disputes arising from the delineation of such ancestral domains: Provided, That if the dispute is between and/or among ICCs/IPs regarding the traditional boundaries of their respective ancestral domains, customary process shall be followed. The NCIP shall promulgate the necessary rules and regulations to carry out its adjudicatory functions: Provided, further, That any decision, order, award or ruling of the NCIP on any ancestral domain dispute or on any matter pertaining to the application, implementation, enforcement and interpretation of this Act may be brought for Petition for Review to the Court of Appeals within fifteen (15) days from receipt of a copy thereof."},{name:"Section 63",subtitle:"Applicable Laws.",paragraph:"Customary laws, traditions and practices of the ICCs/IPs of the land where the conflict arises shall be applied first with respect to property rights, claims and ownerships, hereditary succession and settlement of land disputes. Any doubt or ambiguity in the application and interpretation of laws shall be resolved in favor of the ICCs/IPs."},{name:"Section 64",subtitle:"Remedial Measures.",paragraph:"Expropriation may be resorted to in the resolution of conflicts of interest following the principle of the “common good”. The NCIP shall take appropriate legal action for the cancellation of officially documented titles which were acquired illegally: Provided, That such procedure shall ensure that the rights of possessors in good faith shall be respected: Provided, further, That the action for cancellation shall be initiated within two (2) years from the effectivity of this Act: Provided, finally, That the action for reconveyance shall be within a period of ten (10) years in accordance with existing laws."}]}],fge=()=>{const n=qt(),{selectedWord:e,definition:t,tooltipPosition:i,handleTextSelection:r}=Fn(),[s,o]=V.useState(!1);V.useEffect(()=>{const u=()=>{window.scrollY>200?o(!0):o(!1)};return window.addEventListener("scroll",u),()=>window.removeEventListener("scroll",u)},[]);const a=()=>{window.scrollTo({top:0,behavior:"smooth"})},l=()=>n("/chapterNine"),c=()=>n("/chapterSeven");return!dE||dE.length===0?d.jsx("div",{children:"No data available"}):d.jsxs("div",{className:"text-spacing-3 leading-relaxed tracking-wide",children:[d.jsx(Ln,{children:d.jsxs("div",{children:[dE.map(u=>d.jsxs("div",{className:"my-5",children:[d.jsx("h5",{className:q.paragraphSubText,children:u.subtitle}),d.jsx("h4",{className:`${q.headText} mb-10`,children:u.title}),d.jsx("div",{children:u.sections?.map((f,m)=>d.jsxs("div",{className:"my-4",children:[d.jsxs("h6",{className:q.paragraphSubText,children:[f.name," ",f.subtitle]}),Array.isArray(f.paragraph)?d.jsx("div",{children:f.paragraph.map((g,x)=>d.jsxs("div",{className:"my-2",children:[d.jsx("h6",{className:q.paragraphSubTextLower,children:g.name}),d.jsx("p",{onMouseUp:r,className:q.paragraphSubTextLower,children:g.paragraph})]},x))}):d.jsx("p",{onMouseUp:r,className:q.paragraphSubTextLower,children:f.paragraph})]},m))})]},u.id)),e&&d.jsxs("div",{className:"absolute text-left bg-white p-4 shadow-lg rounded-lg max-w-xs text-black",style:{left:i.left,top:i.top,zIndex:100},children:[d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsx("p",{className:q.dictionaryText,children:e}),d.jsx("i",{className:"fas fa-volume-up ml-5 text-gray-600"})]}),d.jsx("hr",{className:"border-2 mb-2"}),d.jsx("p",{children:t})]}),d.jsxs("div",{className:"mt-10 text-center flex justify-between",children:[d.jsx("button",{onClick:c,className:"px-6 py-2 border text-white rounded-lg hover:bg-gray-500 transition duration-200",children:"Previous Article"}),d.jsx("button",{onClick:l,className:"px-6 py-2 border text-white rounded-lg hover:bg-gray-500 transition duration-200",children:"Next Article"})]})]})}),s&&d.jsx("button",{onClick:a,className:"fixed bottom-6 right-6 w-12 h-12 bg-gray-600 text-white rounded-full shadow-lg flex items-center justify-center hover:bg-gray-800 transition-all duration-300",children:d.jsx("i",{className:"fas fa-arrow-up"})})]})},pge=Bt(fge),mge=[{id:"enforcement",title:"Jurisdiction and Procedures for Enforcement of Rights",subtitle:"Chapter IX",sections:[{name:"Section 65",subtitle:"Primacy of Customary Laws and Practices.",paragraph:"When disputes involve ICCs/IPs, customary laws and practices shall be used to resolve the dispute."},{name:"Section 66",subtitle:"Primacy of Customary Laws and Practices.",paragraph:"The NCIP, through its regional offices, shall have jurisdiction over all claims and disputes involving rights of ICCs/IPs: Provided, however, That no such dispute shall be brought to the NCIP unless the parties have exhausted all remedies provided under their customary laws. For this purpose, a certification shall be issued by the Council of Elders/Leaders who participated in the attempt to settle the dispute that the same has not been resolved, which certification shall be a condition precedent to the filing of a petition with the NCIP."},{name:"Section 67",subtitle:"Appeals to the Court of Appeals.",paragraph:"Decisions of the NCIP shall be appealable to the Court of Appeals by way of a petition for review."},{name:"Section 68",subtitle:"Execution of Decisions, Awards, Orders.",paragraph:"Upon expiration of the period herein provided and no appeal is perfected by any of the contending parties, the Hearing Officer of the NCIP, on its own initiative or upon motion by the prevailing party, shall issue a writ of execution requiring the sheriff or the proper officer to execute final decisions, orders or awards of the Regional Hearing Officer of the NCIP."},{name:"Section 69",subtitle:"Quasi-Judicial Powers of the NCIP.",sub_paragraph:"The NCIP shall have the power and authority:",paragraph:["a. To promulgate rules and regulations governing the hearing and disposition of cases filed before it as well as those pertaining to its internal functions and such rules and regulations as may be necessary to carry out the purposes of this Act;","b. To administer oaths, summon the parties to a controversy, issue subpoenas requiring the attendance and testimony of witnesses or the production of such books, papers, contracts, records, agreements and other document of similar nature as may be material to a just determination of the matter under investigation or hearing conducted in pursuance of this Act;","c. To hold any person in contempt, directly or indirectly, and impose appropriate penalties therefor; and","d. To enjoin any or all acts involving or arising from any case pending before it which, if not restrained forthwith, may cause grave or irreparable damage to any of the parties to the case or seriously affect social or economic activity."]},{name:"Section 70",subtitle:"No Restraining Order or Preliminary Injunction.",paragraph:"No inferior court of the Philippines shall have jurisdiction to issue any restraining order or writ of preliminary injunction against the NCIP or any of its duly authorized or designated offices in any case, dispute or controversy arising from, necessary to, or interpretation of this Act and other pertinent laws relating to ICCs/IPs and ancestral domains."}]}],gge=()=>{const n=qt(),{selectedWord:e,definition:t,tooltipPosition:i,handleTextSelection:r}=Fn(),[s,o]=V.useState(!1);V.useEffect(()=>{const u=()=>{window.scrollY>200?o(!0):o(!1)};return window.addEventListener("scroll",u),()=>window.removeEventListener("scroll",u)},[]);const a=()=>{window.scrollTo({top:0,behavior:"smooth"})},l=()=>{n("/chapterTen")},c=()=>{n("/chapterEight")};return d.jsxs("div",{className:"text-spacing-3 leading-relaxed tracking-wide",children:[d.jsx(Ln,{children:d.jsxs("div",{children:[mge.map(u=>d.jsxs("div",{className:"my-5",children:[d.jsx("h5",{className:q.paragraphSubText,children:u.subtitle}),d.jsx("h4",{className:`${q.headText} mb-10`,children:u.title}),d.jsx("div",{children:u.sections.map((f,m)=>d.jsxs("div",{className:"my-4",children:[d.jsxs("h6",{className:q.paragraphSubText,children:[f.name," ",f.subtitle]}),d.jsx("p",{onMouseUp:r,className:q.paragraphSubTextLower,children:f.paragraph})]},m))})]},u.id)),e&&d.jsxs("div",{className:"absolute text-left bg-white p-4 shadow-lg rounded-lg max-w-xs text-black",style:{left:i.left,top:i.top,zIndex:100},children:[d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsx("p",{className:q.dictionaryText,children:e}),d.jsx("i",{className:"fas fa-volume-up ml-5 text-gray-600"})]}),d.jsx("hr",{className:"border-2 mb-2"}),d.jsx("p",{children:t})]}),d.jsxs("div",{className:"mt-10 text-center flex justify-between",children:[d.jsx("button",{onClick:c,className:"px-6 py-2 border justify-end text-white rounded-lg hover:bg-gray-500",children:"Previous Article"}),d.jsx("button",{onClick:l,className:"px-6 py-2 border justify-end text-white rounded-lg hover:bg-gray-500",children:"Next Article"})]})]})}),s&&d.jsx("button",{onClick:a,className:"fixed bottom-6 right-6 w-12 h-12 bg-gray-600 text-white rounded-full shadow-lg flex items-center justify-center hover:bg-gray-800 transition-all duration-300",children:d.jsx("i",{className:"fas fa-arrow-up"})})]})},yge=Bt(gge),vge=[{id:"fund",title:"Ancestral Domains Fund",subtitle:"Chapter X",sections:[{name:"Section 71",subtitle:"Ancestral Domains Fund.",paragraph:"There is hereby created a special fund, to be known as the Ancestral Domains Fund, an initial amount of One hundred thirty million pesos (P130,000,000) to cover compensation for expropriated lands, delineation and development of ancestral domains. An amount of Fifty million pesos (P50,000,000) shall be sourced from the gross income of the Philippine Charity Sweepstakes Office (PCSO) from its lotto operation, Ten million pesos (P10,000,000) from the gross receipts of the travel tax of the preceding year, the fund of the Social Reform Council intended for survey and delineation of ancestral lands/domains, and such other source as the government may deem appropriate. Thereafter, such amount shall be included in the annual General Appropriations Act. Foreign as well as local funds which are made available for the ICCs/IPs through the government of the Philippines shall be coursed through the NCIP. The NCIP may also solicit and receive donations, endowments and grants in the form of contributions, and such endowments shall be exempted from income or gift taxes and all other taxes, charges or fees imposed by the government or any political subdivision or instrumentality thereof."}]}],xge=()=>{const n=qt(),{selectedWord:e,definition:t,tooltipPosition:i,handleTextSelection:r}=Fn(),[s,o]=V.useState(!1);V.useEffect(()=>{const u=()=>{window.scrollY>200?o(!0):o(!1)};return window.addEventListener("scroll",u),()=>window.removeEventListener("scroll",u)},[]);const a=()=>{window.scrollTo({top:0,behavior:"smooth"})},l=()=>{n("/chapterEleven")},c=()=>{n("/chapterNine")};return d.jsxs("div",{className:"text-spacing-3 leading-relaxed tracking-wide",children:[d.jsx(Ln,{children:d.jsxs("div",{children:[vge.map(u=>d.jsxs("div",{className:"my-5",children:[d.jsx("h5",{className:q.paragraphSubText,children:u.subtitle}),d.jsx("h4",{className:`${q.headText} mb-10`,children:u.title}),d.jsx("div",{children:u.sections.map((f,m)=>d.jsxs("div",{className:"my-4",children:[d.jsxs("h6",{className:q.paragraphSubText,children:[f.name," ",f.subtitle]}),d.jsx("p",{onMouseUp:r,className:q.paragraphSubTextLower,children:f.paragraph})]},m))})]},u.id)),e&&d.jsxs("div",{className:"absolute text-left bg-white p-4 shadow-lg rounded-lg max-w-xs text-black",style:{left:i.left,top:i.top,zIndex:100},children:[d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsx("p",{className:q.dictionaryText,children:e}),d.jsx("i",{className:"fas fa-volume-up ml-5 text-gray-600"})]}),d.jsx("hr",{className:"border-2 mb-2"}),d.jsx("p",{children:t})]}),d.jsxs("div",{className:"mt-10 text-center flex justify-between",children:[d.jsx("button",{onClick:c,className:"px-6 py-2 border justify-end text-white rounded-lg hover:bg-gray-500",children:"Previous Article"}),d.jsx("button",{onClick:l,className:"px-6 py-2 border justify-end text-white rounded-lg hover:bg-gray-500",children:"Next Article"})]})]})}),s&&d.jsx("button",{onClick:a,className:"fixed bottom-6 right-6 w-12 h-12 bg-gray-600 text-white rounded-full shadow-lg flex items-center justify-center hover:bg-gray-800 transition-all duration-300",children:d.jsx("i",{className:"fas fa-arrow-up"})})]})},_ge=Bt(xge),wge=[{id:"penalty",title:"Penalties",subtitle:"Chapter XI",sections:[{name:"Section 72",subtitle:"Punishable Acts and Applicable Penalties.",paragraph:"Any person who commits violation of any of the provisions of this Act, such as, but not limited to, unauthorized and/or unlawful intrusion upon any ancestral lands or domains as stated in Sec. 10, Chapter III, or shall commit any of the prohibited acts mentioned in Sections 21 and 24, Chapter V, Section 33, Chapter VI hereof, shall be punished in accordance with the customary laws of the ICCs/IPs concerned: Provided, That no such penalty shall be cruel, degrading or inhuman punishment: Provided, further, That neither shall the death penalty or excessive fines be imposed. This provision shall be without prejudice to the right of any ICCs/IPs to avail of the protection of existing laws. In which case, any person who violates any provision of this Act shall, upon conviction, be punished by imprisonment of not less than nine (9) months but not more than twelve (12) years or a fine of not less than One hundred thousand pesos (P100,000) nor more than Five hundred thousand pesos (P500,000) or both such fine and imprisonment upon the discretion of the court. In addition, he shall be obliged to pay to the ICCs/IPs concerned whatever damage may have been suffered by the latter as a consequence of the unlawful act."},{name:"Section 73",subtitle:"Persons Subject to Punishment.",paragraph:"If the offender is a juridical person, all officers such as, but not limited to, its president, manager, or head of office responsible for their unlawful act shall be criminally liable therefor, in addition to the cancellation of certificates of their registration and/or license: Provided, That if the offender is a public official, the penalty shall include perpetual disqualification to hold public office."}]}],bge=()=>{const n=qt(),{selectedWord:e,definition:t,tooltipPosition:i,handleTextSelection:r}=Fn(),[s,o]=V.useState(!1);V.useEffect(()=>{const u=()=>{window.scrollY>200?o(!0):o(!1)};return window.addEventListener("scroll",u),()=>window.removeEventListener("scroll",u)},[]);const a=()=>{window.scrollTo({top:0,behavior:"smooth"})},l=()=>{n("/chapterTwelve")},c=()=>{n("/chapterTen")};return d.jsxs("div",{className:"text-spacing-3 leading-relaxed tracking-wide",children:[d.jsx(Ln,{children:d.jsxs("div",{children:[wge.map(u=>d.jsxs("div",{className:"my-5",children:[d.jsx("h5",{className:q.paragraphSubText,children:u.subtitle}),d.jsx("h4",{className:`${q.headText} mb-10`,children:u.title}),d.jsx("div",{children:u.sections.map((f,m)=>d.jsxs("div",{className:"my-4",children:[d.jsxs("h6",{className:q.paragraphSubText,children:[f.name," ",f.subtitle]}),d.jsx("p",{onMouseUp:r,className:q.paragraphSubTextLower,children:f.paragraph})]},m))})]},u.id)),e&&d.jsxs("div",{className:"absolute text-left bg-white p-4 shadow-lg rounded-lg max-w-xs text-black",style:{left:i.left,top:i.top,zIndex:100},children:[d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsx("p",{className:q.dictionaryText,children:e}),d.jsx("i",{className:"fas fa-volume-up ml-5 text-gray-600"})]}),d.jsx("hr",{className:"border-2 mb-2"}),d.jsx("p",{children:t})]}),d.jsxs("div",{className:"mt-10 text-center flex justify-between",children:[d.jsx("button",{onClick:c,className:"px-6 py-2 border justify-end text-white rounded-lg hover:bg-gray-500",children:"Previous Article"}),d.jsx("button",{onClick:l,className:"px-6 py-2 border justify-end text-white rounded-lg hover:bg-gray-500",children:"Next Article"})]})]})}),s&&d.jsx("button",{onClick:a,className:"fixed bottom-6 right-6 w-12 h-12 bg-gray-600 text-white rounded-full shadow-lg flex items-center justify-center hover:bg-gray-800 transition-all duration-300",children:d.jsx("i",{className:"fas fa-arrow-up"})})]})},Sge=Bt(bge),Tge=[{id:"penalty",title:"Merger of the Office for Northern Cultural Communities and the Office for Southern Cultural Communities",subtitle:"Chapter XII",sections:[{name:"Section 74",subtitle:"Merger of ONCC/OSCC.",paragraph:"The Office for Northern Cultural Communities (ONCC) and the Office of Southern Cultural Communities (OSCC), created under Executive Order Nos. 122-B and 122-C respectively, are hereby merged as organic offices of the NCIP and shall continue to function under a revitalized and strengthened structures to achieve the objectives of the NCIP: Provided, That the positions of Staff Directors, Bureau Directors, Deputy Executive Directors and Executive Directors, except positions of Regional Directors and below, are hereby phased-out upon the effectivity of this Act: Provided, further, That officials and employees of the phased-out offices who may be qualified may apply for reappointment with the NCIP and may be given prior rights in the filling up of the newly created positions of NCIP, subject to the qualifications set by the Placement Committee: Provided, furthermore, That in the case where an indigenous person and a non-indigenous person with similar qualifications apply for the same position, priority shall be given to the former. Officers and employees who are to be phased-out as a result of the merger of their offices shall be entitled to gratuity a rate equivalent to one and a half (1 ½) months salary for every year of continuous and satisfactory service rendered or the equivalent nearest fraction thereof favorable to them on the basis of the highest salary received. If they are already entitled to retirement or gratuity, they shall have the option to select either such retirement benefits or the gratuity herein provided. Officers and employees who may be reinstated shall refund such retirement benefits or gratuity received: Provided, finally, That absorbed personnel must still meet the qualifications and standards set by the Civil Service and the Placement Committee herein created."},{name:"Section 75",subtitle:"Transition Period.",paragraph:"The ONCC/OSCC shall have a period of six (6) months from the effectivity of this Act within which to wind up its affairs and to conduct audit of its finances."},{name:"Section 76",subtitle:"Transfer of Assets/Properties.",paragraph:"All real and personal properties which are vested in, or belonging to, the merged offices as aforestated shall be transferred to the NCIP without further need of conveyance, transfer or assignment and shall be held for the same purpose as they were held by the former offices: Provided, That all contracts, records and documents relating to the operations of the merged offices shall be transferred to the NCIP. All agreements and contracts entered into by the merged offices shall remain in full force and effect unless otherwise terminated, modified or amended by the NCIP."},{name:"Section 77",subtitle:"Placement Committee.",paragraph:"Subject to rules on government reorganization, a Placement Committee shall be created by the NCIP, in coordination with the Civil Service Commission, which shall assist in the judicious selection and placement of personnel in order that the best qualified and most deserving persons shall be appointed in the reorganized agency. The Placement Committee shall be composed of seven (7) commissioners and an ICCs’/IPs’ representative from each of the first and second level employees association in the Offices for Northern and Southern Cultural Communities (ONCC/OSCC), nongovernment organizations (NGOs) who have served the community for at least five (5) years and peoples organizations (POs) with at least five (5) years of existence. They shall be guided by the criteria of retention and appointment to be prepared by the consultative body and by the pertinent provisions of the civil service law."}]}],Ege=()=>{const n=qt(),{selectedWord:e,definition:t,tooltipPosition:i,handleTextSelection:r}=Fn(),[s,o]=V.useState(!1);V.useEffect(()=>{const c=()=>{window.scrollY>200?o(!0):o(!1)};return window.addEventListener("scroll",c),()=>window.removeEventListener("scroll",c)},[]);const a=()=>{window.scrollTo({top:0,behavior:"smooth"})},l=()=>{n("/chapterEleven")};return d.jsxs("div",{className:"text-spacing-3 leading-relaxed tracking-wide",children:[d.jsx(Ln,{children:d.jsxs("div",{children:[Tge.map(c=>d.jsxs("div",{className:"my-5",children:[d.jsx("h5",{className:q.paragraphSubText,children:c.subtitle}),d.jsx("h4",{className:`${q.headText} mb-10`,children:c.title}),d.jsx("div",{children:c.sections.map((u,f)=>d.jsxs("div",{className:"my-4",children:[d.jsxs("h6",{className:q.paragraphSubText,children:[u.name," ",u.subtitle]}),d.jsx("p",{onMouseUp:r,className:q.paragraphSubTextLower,children:u.paragraph})]},f))})]},c.id)),e&&d.jsxs("div",{className:"absolute text-left bg-white p-4 shadow-lg rounded-lg max-w-xs text-black",style:{left:i.left,top:i.top,zIndex:100},children:[d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsx("p",{className:q.dictionaryText,children:e}),d.jsx("i",{className:"fas fa-volume-up ml-5 text-gray-600"})]}),d.jsx("hr",{className:"border-2 mb-2"}),d.jsx("p",{children:t})]}),d.jsx("div",{className:"mt-10 text-center flex justify-between",children:d.jsx("button",{onClick:l,className:"px-6 py-2 border justify-end text-white rounded-lg hover:bg-gray-500",children:"Previous Article"})})]})}),s&&d.jsx("button",{onClick:a,className:"fixed bottom-6 right-6 w-12 h-12 bg-gray-600 text-white rounded-full shadow-lg flex items-center justify-center hover:bg-gray-800 transition-all duration-300",children:d.jsx("i",{className:"fas fa-arrow-up"})})]})},Cge=Bt(Ege),Cx=({children:n})=>d.jsxs("div",{className:"relative",children:[d.jsx(Zee,{}),d.jsx("div",{className:"relative z-10",children:n})]}),Age=[{path:"/",element:d.jsx(Cx,{children:d.jsx(aO,{})})},{path:"/login",element:d.jsx(Cx,{children:d.jsx(aO,{})})},{path:"/signup",element:d.jsx(Cx,{children:d.jsx(Hde,{})})},{path:"/forgotPass",element:d.jsx(Cx,{children:d.jsx(Wde,{})})},{path:"/main",element:d.jsx(Rfe,{}),children:[{path:"lawyer-status",element:d.jsx(Ufe,{})},{path:"ai",element:d.jsx(Kfe,{})},{path:"constitution",element:d.jsx(Pfe,{})},{path:"RA_8371",element:d.jsx(Ape,{})},{path:"lawyer-appointments",element:d.jsx(Qfe,{})},{path:"appointmentLawyer1",element:d.jsx(epe,{})},{path:"appointmentTableLawyer1",element:d.jsx(npe,{})},{path:"appointmentResultLawyer1",element:d.jsx(mpe,{})},{path:"appointmentLawyer2",element:d.jsx(ype,{})},{path:"appointmentTableLawyer2",element:d.jsx(xpe,{})},{path:"appointmentResultLawyer2",element:d.jsx(_pe,{})},{path:"appointmentLawyer3",element:d.jsx(bpe,{})},{path:"appointmentTableLawyer3",element:d.jsx(Tpe,{})},{path:"appointmentResultLawyer3",element:d.jsx(Epe,{})},{path:"articleOne",element:d.jsx(Bn,{children:d.jsx(Ipe,{})})},{path:"articleTwo",element:d.jsx(Bn,{children:d.jsx(Npe,{})})},{path:"articleThree",element:d.jsx(Bn,{children:d.jsx(kpe,{})})},{path:"articleFour",element:d.jsx(Bn,{children:d.jsx(Fpe,{})})},{path:"articleFive",element:d.jsx(Bn,{children:d.jsx(Bpe,{})})},{path:"articleSix",element:d.jsx(Bn,{children:d.jsx(Gpe,{})})},{path:"articleSeven",element:d.jsx(Bn,{children:d.jsx($pe,{})})},{path:"articleEight",element:d.jsx(Bn,{children:d.jsx(Ype,{})})},{path:"articleNine",element:d.jsx(Bn,{children:d.jsx(nme,{})})},{path:"articleTen",element:d.jsx(Bn,{children:d.jsx(ome,{})})},{path:"articleEleven",element:d.jsx(Bn,{children:d.jsx(cme,{})})},{path:"articleTwelve",element:d.jsx(Bn,{children:d.jsx(dme,{})})},{path:"articleThirteen",element:d.jsx(Bn,{children:d.jsx(bme,{})})},{path:"articleFourteen",element:d.jsx(Bn,{children:d.jsx(Ime,{})})},{path:"articleFifteen",element:d.jsx(Bn,{children:d.jsx(Nme,{})})},{path:"articleSixteen",element:d.jsx(Bn,{children:d.jsx(kme,{})})},{path:"articleSeventeen",element:d.jsx(Bn,{children:d.jsx(Fme,{})})},{path:"articleEighteen",element:d.jsx(Bn,{children:d.jsx(Bme,{})})},{path:"chapterOne",element:d.jsx(Bn,{children:d.jsx(Gme,{})})},{path:"chapterTwo",element:d.jsx(Bn,{children:d.jsx($me,{})})},{path:"chapterThree",element:d.jsx(Bn,{children:d.jsx(Yme,{})})},{path:"chapterFour",element:d.jsx(Bn,{children:d.jsx(Zme,{})})},{path:"chapterFive",element:d.jsx(Bn,{children:d.jsx(nge,{})})},{path:"chapterSix",element:d.jsx(Bn,{children:d.jsx(sge,{})})},{path:"chapterSeven",element:d.jsx(Bn,{children:d.jsx(dge,{})})},{path:"chapterEight",element:d.jsx(Bn,{children:d.jsx(pge,{})})},{path:"chapterNine",element:d.jsx(Bn,{children:d.jsx(yge,{})})},{path:"chapterTen",element:d.jsx(Bn,{children:d.jsx(_ge,{})})},{path:"chapterEleven",element:d.jsx(Bn,{children:d.jsx(Sge,{})})},{path:"chapterTwelve",element:d.jsx(Bn,{children:d.jsx(Cge,{})})}]},{path:"/admin_main",element:d.jsx(kfe,{})},{path:"*",element:d.jsx("div",{children:"404 - Page Not Found"})}],Mge=S8(Age);mA(document.getElementById("root")).render(d.jsx(V.StrictMode,{children:d.jsx(g7,{children:d.jsx(N8,{router:Mge})})}));
