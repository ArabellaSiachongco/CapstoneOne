function Y3(n,e){for(var t=0;t<e.length;t++){const i=e[t];if(typeof i!="string"&&!Array.isArray(i)){for(const r in i)if(r!=="default"&&!(r in n)){const s=Object.getOwnPropertyDescriptor(i,r);s&&Object.defineProperty(n,r,s.get?s:{enumerable:!0,get:()=>i[r]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function t(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(r){if(r.ep)return;r.ep=!0;const s=t(r);fetch(r.href,s)}})();function Mg(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}function Z6(n){if(n.__esModule)return n;var e=n.default;if(typeof e=="function"){var t=function i(){return this instanceof i?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(n).forEach(function(i){var r=Object.getOwnPropertyDescriptor(n,i);Object.defineProperty(t,i,r.get?r:{enumerable:!0,get:function(){return n[i]}})}),t}var K3={exports:{}},B_={},J3={exports:{}},dn={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ig=Symbol.for("react.element"),eH=Symbol.for("react.portal"),tH=Symbol.for("react.fragment"),nH=Symbol.for("react.strict_mode"),iH=Symbol.for("react.profiler"),rH=Symbol.for("react.provider"),sH=Symbol.for("react.context"),oH=Symbol.for("react.forward_ref"),aH=Symbol.for("react.suspense"),lH=Symbol.for("react.memo"),cH=Symbol.for("react.lazy"),uR=Symbol.iterator;function uH(n){return n===null||typeof n!="object"?null:(n=uR&&n[uR]||n["@@iterator"],typeof n=="function"?n:null)}var Q3={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Z3=Object.assign,eO={};function wf(n,e,t){this.props=n,this.context=e,this.refs=eO,this.updater=t||Q3}wf.prototype.isReactComponent={};wf.prototype.setState=function(n,e){if(typeof n!="object"&&typeof n!="function"&&n!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,n,e,"setState")};wf.prototype.forceUpdate=function(n){this.updater.enqueueForceUpdate(this,n,"forceUpdate")};function tO(){}tO.prototype=wf.prototype;function mC(n,e,t){this.props=n,this.context=e,this.refs=eO,this.updater=t||Q3}var gC=mC.prototype=new tO;gC.constructor=mC;Z3(gC,wf.prototype);gC.isPureReactComponent=!0;var hR=Array.isArray,nO=Object.prototype.hasOwnProperty,yC={current:null},iO={key:!0,ref:!0,__self:!0,__source:!0};function rO(n,e,t){var i,r={},s=null,o=null;if(e!=null)for(i in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)nO.call(e,i)&&!iO.hasOwnProperty(i)&&(r[i]=e[i]);var a=arguments.length-2;if(a===1)r.children=t;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];r.children=l}if(n&&n.defaultProps)for(i in a=n.defaultProps,a)r[i]===void 0&&(r[i]=a[i]);return{$$typeof:Ig,type:n,key:s,ref:o,props:r,_owner:yC.current}}function hH(n,e){return{$$typeof:Ig,type:n.type,key:e,ref:n.ref,props:n.props,_owner:n._owner}}function vC(n){return typeof n=="object"&&n!==null&&n.$$typeof===Ig}function dH(n){var e={"=":"=0",":":"=2"};return"$"+n.replace(/[=:]/g,function(t){return e[t]})}var dR=/\/+/g;function uS(n,e){return typeof n=="object"&&n!==null&&n.key!=null?dH(""+n.key):e.toString(36)}function x0(n,e,t,i,r){var s=typeof n;(s==="undefined"||s==="boolean")&&(n=null);var o=!1;if(n===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(n.$$typeof){case Ig:case eH:o=!0}}if(o)return o=n,r=r(o),n=i===""?"."+uS(o,0):i,hR(r)?(t="",n!=null&&(t=n.replace(dR,"$&/")+"/"),x0(r,e,t,"",function(c){return c})):r!=null&&(vC(r)&&(r=hH(r,t+(!r.key||o&&o.key===r.key?"":(""+r.key).replace(dR,"$&/")+"/")+n)),e.push(r)),1;if(o=0,i=i===""?".":i+":",hR(n))for(var a=0;a<n.length;a++){s=n[a];var l=i+uS(s,a);o+=x0(s,e,t,l,r)}else if(l=uH(n),typeof l=="function")for(n=l.call(n),a=0;!(s=n.next()).done;)s=s.value,l=i+uS(s,a++),o+=x0(s,e,t,l,r);else if(s==="object")throw e=String(n),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Ky(n,e,t){if(n==null)return n;var i=[],r=0;return x0(n,i,"","",function(s){return e.call(t,s,r++)}),i}function fH(n){if(n._status===-1){var e=n._result;e=e(),e.then(function(t){(n._status===0||n._status===-1)&&(n._status=1,n._result=t)},function(t){(n._status===0||n._status===-1)&&(n._status=2,n._result=t)}),n._status===-1&&(n._status=0,n._result=e)}if(n._status===1)return n._result.default;throw n._result}var Kr={current:null},_0={transition:null},pH={ReactCurrentDispatcher:Kr,ReactCurrentBatchConfig:_0,ReactCurrentOwner:yC};function sO(){throw Error("act(...) is not supported in production builds of React.")}dn.Children={map:Ky,forEach:function(n,e,t){Ky(n,function(){e.apply(this,arguments)},t)},count:function(n){var e=0;return Ky(n,function(){e++}),e},toArray:function(n){return Ky(n,function(e){return e})||[]},only:function(n){if(!vC(n))throw Error("React.Children.only expected to receive a single React element child.");return n}};dn.Component=wf;dn.Fragment=tH;dn.Profiler=iH;dn.PureComponent=mC;dn.StrictMode=nH;dn.Suspense=aH;dn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=pH;dn.act=sO;dn.cloneElement=function(n,e,t){if(n==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+n+".");var i=Z3({},n.props),r=n.key,s=n.ref,o=n._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=yC.current),e.key!==void 0&&(r=""+e.key),n.type&&n.type.defaultProps)var a=n.type.defaultProps;for(l in e)nO.call(e,l)&&!iO.hasOwnProperty(l)&&(i[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)i.children=t;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];i.children=a}return{$$typeof:Ig,type:n.type,key:r,ref:s,props:i,_owner:o}};dn.createContext=function(n){return n={$$typeof:sH,_currentValue:n,_currentValue2:n,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},n.Provider={$$typeof:rH,_context:n},n.Consumer=n};dn.createElement=rO;dn.createFactory=function(n){var e=rO.bind(null,n);return e.type=n,e};dn.createRef=function(){return{current:null}};dn.forwardRef=function(n){return{$$typeof:oH,render:n}};dn.isValidElement=vC;dn.lazy=function(n){return{$$typeof:cH,_payload:{_status:-1,_result:n},_init:fH}};dn.memo=function(n,e){return{$$typeof:lH,type:n,compare:e===void 0?null:e}};dn.startTransition=function(n){var e=_0.transition;_0.transition={};try{n()}finally{_0.transition=e}};dn.unstable_act=sO;dn.useCallback=function(n,e){return Kr.current.useCallback(n,e)};dn.useContext=function(n){return Kr.current.useContext(n)};dn.useDebugValue=function(){};dn.useDeferredValue=function(n){return Kr.current.useDeferredValue(n)};dn.useEffect=function(n,e){return Kr.current.useEffect(n,e)};dn.useId=function(){return Kr.current.useId()};dn.useImperativeHandle=function(n,e,t){return Kr.current.useImperativeHandle(n,e,t)};dn.useInsertionEffect=function(n,e){return Kr.current.useInsertionEffect(n,e)};dn.useLayoutEffect=function(n,e){return Kr.current.useLayoutEffect(n,e)};dn.useMemo=function(n,e){return Kr.current.useMemo(n,e)};dn.useReducer=function(n,e,t){return Kr.current.useReducer(n,e,t)};dn.useRef=function(n){return Kr.current.useRef(n)};dn.useState=function(n){return Kr.current.useState(n)};dn.useSyncExternalStore=function(n,e,t){return Kr.current.useSyncExternalStore(n,e,t)};dn.useTransition=function(){return Kr.current.useTransition()};dn.version="18.3.1";J3.exports=dn;var B=J3.exports;const Gl=Mg(B),mH=Y3({__proto__:null,default:Gl},[B]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var gH=B,yH=Symbol.for("react.element"),vH=Symbol.for("react.fragment"),xH=Object.prototype.hasOwnProperty,_H=gH.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,wH={key:!0,ref:!0,__self:!0,__source:!0};function oO(n,e,t){var i,r={},s=null,o=null;t!==void 0&&(s=""+t),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(i in e)xH.call(e,i)&&!wH.hasOwnProperty(i)&&(r[i]=e[i]);if(n&&n.defaultProps)for(i in e=n.defaultProps,e)r[i]===void 0&&(r[i]=e[i]);return{$$typeof:yH,type:n,key:s,ref:o,props:r,_owner:_H.current}}B_.Fragment=vH;B_.jsx=oO;B_.jsxs=oO;K3.exports=B_;var d=K3.exports,aO={exports:{}},Vs={},lO={exports:{}},cO={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(n){function e(F,X){var Y=F.length;F.push(X);e:for(;0<Y;){var ne=Y-1>>>1,fe=F[ne];if(0<r(fe,X))F[ne]=X,F[Y]=fe,Y=ne;else break e}}function t(F){return F.length===0?null:F[0]}function i(F){if(F.length===0)return null;var X=F[0],Y=F.pop();if(Y!==X){F[0]=Y;e:for(var ne=0,fe=F.length,Ce=fe>>>1;ne<Ce;){var ce=2*(ne+1)-1,Ee=F[ce],Oe=ce+1,Pe=F[Oe];if(0>r(Ee,Y))Oe<fe&&0>r(Pe,Ee)?(F[ne]=Pe,F[Oe]=Y,ne=Oe):(F[ne]=Ee,F[ce]=Y,ne=ce);else if(Oe<fe&&0>r(Pe,Y))F[ne]=Pe,F[Oe]=Y,ne=Oe;else break e}}return X}function r(F,X){var Y=F.sortIndex-X.sortIndex;return Y!==0?Y:F.id-X.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;n.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();n.unstable_now=function(){return o.now()-a}}var l=[],c=[],u=1,f=null,m=3,g=!1,x=!1,b=!1,w=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,S=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function E(F){for(var X=t(c);X!==null;){if(X.callback===null)i(c);else if(X.startTime<=F)i(c),X.sortIndex=X.expirationTime,e(l,X);else break;X=t(c)}}function C(F){if(b=!1,E(F),!x)if(t(l)!==null)x=!0,de(V);else{var X=t(c);X!==null&&U(C,X.startTime-F)}}function V(F,X){x=!1,b&&(b=!1,v(I),I=-1),g=!0;var Y=m;try{for(E(X),f=t(l);f!==null&&(!(f.expirationTime>X)||F&&!D());){var ne=f.callback;if(typeof ne=="function"){f.callback=null,m=f.priorityLevel;var fe=ne(f.expirationTime<=X);X=n.unstable_now(),typeof fe=="function"?f.callback=fe:f===t(l)&&i(l),E(X)}else i(l);f=t(l)}if(f!==null)var Ce=!0;else{var ce=t(c);ce!==null&&U(C,ce.startTime-X),Ce=!1}return Ce}finally{f=null,m=Y,g=!1}}var L=!1,N=null,I=-1,A=5,M=-1;function D(){return!(n.unstable_now()-M<A)}function z(){if(N!==null){var F=n.unstable_now();M=F;var X=!0;try{X=N(!0,F)}finally{X?j():(L=!1,N=null)}}else L=!1}var j;if(typeof S=="function")j=function(){S(z)};else if(typeof MessageChannel<"u"){var te=new MessageChannel,he=te.port2;te.port1.onmessage=z,j=function(){he.postMessage(null)}}else j=function(){w(z,0)};function de(F){N=F,L||(L=!0,j())}function U(F,X){I=w(function(){F(n.unstable_now())},X)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(F){F.callback=null},n.unstable_continueExecution=function(){x||g||(x=!0,de(V))},n.unstable_forceFrameRate=function(F){0>F||125<F?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<F?Math.floor(1e3/F):5},n.unstable_getCurrentPriorityLevel=function(){return m},n.unstable_getFirstCallbackNode=function(){return t(l)},n.unstable_next=function(F){switch(m){case 1:case 2:case 3:var X=3;break;default:X=m}var Y=m;m=X;try{return F()}finally{m=Y}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(F,X){switch(F){case 1:case 2:case 3:case 4:case 5:break;default:F=3}var Y=m;m=F;try{return X()}finally{m=Y}},n.unstable_scheduleCallback=function(F,X,Y){var ne=n.unstable_now();switch(typeof Y=="object"&&Y!==null?(Y=Y.delay,Y=typeof Y=="number"&&0<Y?ne+Y:ne):Y=ne,F){case 1:var fe=-1;break;case 2:fe=250;break;case 5:fe=1073741823;break;case 4:fe=1e4;break;default:fe=5e3}return fe=Y+fe,F={id:u++,callback:X,priorityLevel:F,startTime:Y,expirationTime:fe,sortIndex:-1},Y>ne?(F.sortIndex=Y,e(c,F),t(l)===null&&F===t(c)&&(b?(v(I),I=-1):b=!0,U(C,Y-ne))):(F.sortIndex=fe,e(l,F),x||g||(x=!0,de(V))),F},n.unstable_shouldYield=D,n.unstable_wrapCallback=function(F){var X=m;return function(){var Y=m;m=X;try{return F.apply(this,arguments)}finally{m=Y}}}})(cO);lO.exports=cO;var bH=lO.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var SH=B,Us=bH;function Be(n){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+n,t=1;t<arguments.length;t++)e+="&args[]="+encodeURIComponent(arguments[t]);return"Minified React error #"+n+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var uO=new Set,Mm={};function rh(n,e){Kd(n,e),Kd(n+"Capture",e)}function Kd(n,e){for(Mm[n]=e,n=0;n<e.length;n++)uO.add(e[n])}var Ga=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),c1=Object.prototype.hasOwnProperty,TH=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,fR={},pR={};function EH(n){return c1.call(pR,n)?!0:c1.call(fR,n)?!1:TH.test(n)?pR[n]=!0:(fR[n]=!0,!1)}function CH(n,e,t,i){if(t!==null&&t.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return i?!1:t!==null?!t.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function AH(n,e,t,i){if(e===null||typeof e>"u"||CH(n,e,t,i))return!0;if(i)return!1;if(t!==null)switch(t.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Jr(n,e,t,i,r,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=i,this.attributeNamespace=r,this.mustUseProperty=t,this.propertyName=n,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var hr={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){hr[n]=new Jr(n,0,!1,n,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var e=n[0];hr[e]=new Jr(e,1,!1,n[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(n){hr[n]=new Jr(n,2,!1,n.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){hr[n]=new Jr(n,2,!1,n,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){hr[n]=new Jr(n,3,!1,n.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(n){hr[n]=new Jr(n,3,!0,n,null,!1,!1)});["capture","download"].forEach(function(n){hr[n]=new Jr(n,4,!1,n,null,!1,!1)});["cols","rows","size","span"].forEach(function(n){hr[n]=new Jr(n,6,!1,n,null,!1,!1)});["rowSpan","start"].forEach(function(n){hr[n]=new Jr(n,5,!1,n.toLowerCase(),null,!1,!1)});var xC=/[\-:]([a-z])/g;function _C(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var e=n.replace(xC,_C);hr[e]=new Jr(e,1,!1,n,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var e=n.replace(xC,_C);hr[e]=new Jr(e,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(n){var e=n.replace(xC,_C);hr[e]=new Jr(e,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(n){hr[n]=new Jr(n,1,!1,n.toLowerCase(),null,!1,!1)});hr.xlinkHref=new Jr("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(n){hr[n]=new Jr(n,1,!1,n.toLowerCase(),null,!0,!0)});function wC(n,e,t,i){var r=hr.hasOwnProperty(e)?hr[e]:null;(r!==null?r.type!==0:i||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(AH(e,t,r,i)&&(t=null),i||r===null?EH(e)&&(t===null?n.removeAttribute(e):n.setAttribute(e,""+t)):r.mustUseProperty?n[r.propertyName]=t===null?r.type===3?!1:"":t:(e=r.attributeName,i=r.attributeNamespace,t===null?n.removeAttribute(e):(r=r.type,t=r===3||r===4&&t===!0?"":""+t,i?n.setAttributeNS(i,e,t):n.setAttribute(e,t))))}var nl=SH.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Jy=Symbol.for("react.element"),hd=Symbol.for("react.portal"),dd=Symbol.for("react.fragment"),bC=Symbol.for("react.strict_mode"),u1=Symbol.for("react.profiler"),hO=Symbol.for("react.provider"),dO=Symbol.for("react.context"),SC=Symbol.for("react.forward_ref"),h1=Symbol.for("react.suspense"),d1=Symbol.for("react.suspense_list"),TC=Symbol.for("react.memo"),Ml=Symbol.for("react.lazy"),fO=Symbol.for("react.offscreen"),mR=Symbol.iterator;function up(n){return n===null||typeof n!="object"?null:(n=mR&&n[mR]||n["@@iterator"],typeof n=="function"?n:null)}var di=Object.assign,hS;function Fp(n){if(hS===void 0)try{throw Error()}catch(t){var e=t.stack.trim().match(/\n( *(at )?)/);hS=e&&e[1]||""}return`
`+hS+n}var dS=!1;function fS(n,e){if(!n||dS)return"";dS=!0;var t=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var i=c}Reflect.construct(n,[],e)}else{try{e.call()}catch(c){i=c}n.call(e.prototype)}else{try{throw Error()}catch(c){i=c}n()}}catch(c){if(c&&i&&typeof c.stack=="string"){for(var r=c.stack.split(`
`),s=i.stack.split(`
`),o=r.length-1,a=s.length-1;1<=o&&0<=a&&r[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(r[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||r[o]!==s[a]){var l=`
`+r[o].replace(" at new "," at ");return n.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",n.displayName)),l}while(1<=o&&0<=a);break}}}finally{dS=!1,Error.prepareStackTrace=t}return(n=n?n.displayName||n.name:"")?Fp(n):""}function MH(n){switch(n.tag){case 5:return Fp(n.type);case 16:return Fp("Lazy");case 13:return Fp("Suspense");case 19:return Fp("SuspenseList");case 0:case 2:case 15:return n=fS(n.type,!1),n;case 11:return n=fS(n.type.render,!1),n;case 1:return n=fS(n.type,!0),n;default:return""}}function f1(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case dd:return"Fragment";case hd:return"Portal";case u1:return"Profiler";case bC:return"StrictMode";case h1:return"Suspense";case d1:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case dO:return(n.displayName||"Context")+".Consumer";case hO:return(n._context.displayName||"Context")+".Provider";case SC:var e=n.render;return n=n.displayName,n||(n=e.displayName||e.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case TC:return e=n.displayName||null,e!==null?e:f1(n.type)||"Memo";case Ml:e=n._payload,n=n._init;try{return f1(n(e))}catch{}}return null}function IH(n){var e=n.type;switch(n.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=e.render,n=n.displayName||n.name||"",e.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return f1(e);case 8:return e===bC?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function rc(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function pO(n){var e=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function PH(n){var e=pO(n)?"checked":"value",t=Object.getOwnPropertyDescriptor(n.constructor.prototype,e),i=""+n[e];if(!n.hasOwnProperty(e)&&typeof t<"u"&&typeof t.get=="function"&&typeof t.set=="function"){var r=t.get,s=t.set;return Object.defineProperty(n,e,{configurable:!0,get:function(){return r.call(this)},set:function(o){i=""+o,s.call(this,o)}}),Object.defineProperty(n,e,{enumerable:t.enumerable}),{getValue:function(){return i},setValue:function(o){i=""+o},stopTracking:function(){n._valueTracker=null,delete n[e]}}}}function Qy(n){n._valueTracker||(n._valueTracker=PH(n))}function mO(n){if(!n)return!1;var e=n._valueTracker;if(!e)return!0;var t=e.getValue(),i="";return n&&(i=pO(n)?n.checked?"true":"false":n.value),n=i,n!==t?(e.setValue(n),!0):!1}function K0(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function p1(n,e){var t=e.checked;return di({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:t??n._wrapperState.initialChecked})}function gR(n,e){var t=e.defaultValue==null?"":e.defaultValue,i=e.checked!=null?e.checked:e.defaultChecked;t=rc(e.value!=null?e.value:t),n._wrapperState={initialChecked:i,initialValue:t,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function gO(n,e){e=e.checked,e!=null&&wC(n,"checked",e,!1)}function m1(n,e){gO(n,e);var t=rc(e.value),i=e.type;if(t!=null)i==="number"?(t===0&&n.value===""||n.value!=t)&&(n.value=""+t):n.value!==""+t&&(n.value=""+t);else if(i==="submit"||i==="reset"){n.removeAttribute("value");return}e.hasOwnProperty("value")?g1(n,e.type,t):e.hasOwnProperty("defaultValue")&&g1(n,e.type,rc(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(n.defaultChecked=!!e.defaultChecked)}function yR(n,e,t){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var i=e.type;if(!(i!=="submit"&&i!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+n._wrapperState.initialValue,t||e===n.value||(n.value=e),n.defaultValue=e}t=n.name,t!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,t!==""&&(n.name=t)}function g1(n,e,t){(e!=="number"||K0(n.ownerDocument)!==n)&&(t==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+t&&(n.defaultValue=""+t))}var jp=Array.isArray;function Fd(n,e,t,i){if(n=n.options,e){e={};for(var r=0;r<t.length;r++)e["$"+t[r]]=!0;for(t=0;t<n.length;t++)r=e.hasOwnProperty("$"+n[t].value),n[t].selected!==r&&(n[t].selected=r),r&&i&&(n[t].defaultSelected=!0)}else{for(t=""+rc(t),e=null,r=0;r<n.length;r++){if(n[r].value===t){n[r].selected=!0,i&&(n[r].defaultSelected=!0);return}e!==null||n[r].disabled||(e=n[r])}e!==null&&(e.selected=!0)}}function y1(n,e){if(e.dangerouslySetInnerHTML!=null)throw Error(Be(91));return di({},e,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function vR(n,e){var t=e.value;if(t==null){if(t=e.children,e=e.defaultValue,t!=null){if(e!=null)throw Error(Be(92));if(jp(t)){if(1<t.length)throw Error(Be(93));t=t[0]}e=t}e==null&&(e=""),t=e}n._wrapperState={initialValue:rc(t)}}function yO(n,e){var t=rc(e.value),i=rc(e.defaultValue);t!=null&&(t=""+t,t!==n.value&&(n.value=t),e.defaultValue==null&&n.defaultValue!==t&&(n.defaultValue=t)),i!=null&&(n.defaultValue=""+i)}function xR(n){var e=n.textContent;e===n._wrapperState.initialValue&&e!==""&&e!==null&&(n.value=e)}function vO(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function v1(n,e){return n==null||n==="http://www.w3.org/1999/xhtml"?vO(e):n==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var Zy,xO=function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,t,i,r){MSApp.execUnsafeLocalFunction(function(){return n(e,t,i,r)})}:n}(function(n,e){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=e;else{for(Zy=Zy||document.createElement("div"),Zy.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Zy.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;e.firstChild;)n.appendChild(e.firstChild)}});function Im(n,e){if(e){var t=n.firstChild;if(t&&t===n.lastChild&&t.nodeType===3){t.nodeValue=e;return}}n.textContent=e}var em={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},RH=["Webkit","ms","Moz","O"];Object.keys(em).forEach(function(n){RH.forEach(function(e){e=e+n.charAt(0).toUpperCase()+n.substring(1),em[e]=em[n]})});function _O(n,e,t){return e==null||typeof e=="boolean"||e===""?"":t||typeof e!="number"||e===0||em.hasOwnProperty(n)&&em[n]?(""+e).trim():e+"px"}function wO(n,e){n=n.style;for(var t in e)if(e.hasOwnProperty(t)){var i=t.indexOf("--")===0,r=_O(t,e[t],i);t==="float"&&(t="cssFloat"),i?n.setProperty(t,r):n[t]=r}}var NH=di({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function x1(n,e){if(e){if(NH[n]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(Be(137,n));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(Be(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(Be(61))}if(e.style!=null&&typeof e.style!="object")throw Error(Be(62))}}function _1(n,e){if(n.indexOf("-")===-1)return typeof e.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var w1=null;function EC(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var b1=null,jd=null,Vd=null;function _R(n){if(n=Ng(n)){if(typeof b1!="function")throw Error(Be(280));var e=n.stateNode;e&&(e=q_(e),b1(n.stateNode,n.type,e))}}function bO(n){jd?Vd?Vd.push(n):Vd=[n]:jd=n}function SO(){if(jd){var n=jd,e=Vd;if(Vd=jd=null,_R(n),e)for(n=0;n<e.length;n++)_R(e[n])}}function TO(n,e){return n(e)}function EO(){}var pS=!1;function CO(n,e,t){if(pS)return n(e,t);pS=!0;try{return TO(n,e,t)}finally{pS=!1,(jd!==null||Vd!==null)&&(EO(),SO())}}function Pm(n,e){var t=n.stateNode;if(t===null)return null;var i=q_(t);if(i===null)return null;t=i[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(n=n.type,i=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!i;break e;default:n=!1}if(n)return null;if(t&&typeof t!="function")throw Error(Be(231,e,typeof t));return t}var S1=!1;if(Ga)try{var hp={};Object.defineProperty(hp,"passive",{get:function(){S1=!0}}),window.addEventListener("test",hp,hp),window.removeEventListener("test",hp,hp)}catch{S1=!1}function LH(n,e,t,i,r,s,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(t,c)}catch(u){this.onError(u)}}var tm=!1,J0=null,Q0=!1,T1=null,DH={onError:function(n){tm=!0,J0=n}};function kH(n,e,t,i,r,s,o,a,l){tm=!1,J0=null,LH.apply(DH,arguments)}function OH(n,e,t,i,r,s,o,a,l){if(kH.apply(this,arguments),tm){if(tm){var c=J0;tm=!1,J0=null}else throw Error(Be(198));Q0||(Q0=!0,T1=c)}}function sh(n){var e=n,t=n;if(n.alternate)for(;e.return;)e=e.return;else{n=e;do e=n,e.flags&4098&&(t=e.return),n=e.return;while(n)}return e.tag===3?t:null}function AO(n){if(n.tag===13){var e=n.memoizedState;if(e===null&&(n=n.alternate,n!==null&&(e=n.memoizedState)),e!==null)return e.dehydrated}return null}function wR(n){if(sh(n)!==n)throw Error(Be(188))}function UH(n){var e=n.alternate;if(!e){if(e=sh(n),e===null)throw Error(Be(188));return e!==n?null:n}for(var t=n,i=e;;){var r=t.return;if(r===null)break;var s=r.alternate;if(s===null){if(i=r.return,i!==null){t=i;continue}break}if(r.child===s.child){for(s=r.child;s;){if(s===t)return wR(r),n;if(s===i)return wR(r),e;s=s.sibling}throw Error(Be(188))}if(t.return!==i.return)t=r,i=s;else{for(var o=!1,a=r.child;a;){if(a===t){o=!0,t=r,i=s;break}if(a===i){o=!0,i=r,t=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===t){o=!0,t=s,i=r;break}if(a===i){o=!0,i=s,t=r;break}a=a.sibling}if(!o)throw Error(Be(189))}}if(t.alternate!==i)throw Error(Be(190))}if(t.tag!==3)throw Error(Be(188));return t.stateNode.current===t?n:e}function MO(n){return n=UH(n),n!==null?IO(n):null}function IO(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var e=IO(n);if(e!==null)return e;n=n.sibling}return null}var PO=Us.unstable_scheduleCallback,bR=Us.unstable_cancelCallback,FH=Us.unstable_shouldYield,jH=Us.unstable_requestPaint,Ei=Us.unstable_now,VH=Us.unstable_getCurrentPriorityLevel,CC=Us.unstable_ImmediatePriority,RO=Us.unstable_UserBlockingPriority,Z0=Us.unstable_NormalPriority,BH=Us.unstable_LowPriority,NO=Us.unstable_IdlePriority,z_=null,Yo=null;function zH(n){if(Yo&&typeof Yo.onCommitFiberRoot=="function")try{Yo.onCommitFiberRoot(z_,n,void 0,(n.current.flags&128)===128)}catch{}}var To=Math.clz32?Math.clz32:WH,HH=Math.log,GH=Math.LN2;function WH(n){return n>>>=0,n===0?32:31-(HH(n)/GH|0)|0}var ev=64,tv=4194304;function Vp(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function ex(n,e){var t=n.pendingLanes;if(t===0)return 0;var i=0,r=n.suspendedLanes,s=n.pingedLanes,o=t&268435455;if(o!==0){var a=o&~r;a!==0?i=Vp(a):(s&=o,s!==0&&(i=Vp(s)))}else o=t&~r,o!==0?i=Vp(o):s!==0&&(i=Vp(s));if(i===0)return 0;if(e!==0&&e!==i&&!(e&r)&&(r=i&-i,s=e&-e,r>=s||r===16&&(s&4194240)!==0))return e;if(i&4&&(i|=t&16),e=n.entangledLanes,e!==0)for(n=n.entanglements,e&=i;0<e;)t=31-To(e),r=1<<t,i|=n[t],e&=~r;return i}function qH(n,e){switch(n){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function $H(n,e){for(var t=n.suspendedLanes,i=n.pingedLanes,r=n.expirationTimes,s=n.pendingLanes;0<s;){var o=31-To(s),a=1<<o,l=r[o];l===-1?(!(a&t)||a&i)&&(r[o]=qH(a,e)):l<=e&&(n.expiredLanes|=a),s&=~a}}function E1(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function LO(){var n=ev;return ev<<=1,!(ev&4194240)&&(ev=64),n}function mS(n){for(var e=[],t=0;31>t;t++)e.push(n);return e}function Pg(n,e,t){n.pendingLanes|=e,e!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,e=31-To(e),n[e]=t}function XH(n,e){var t=n.pendingLanes&~e;n.pendingLanes=e,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=e,n.mutableReadLanes&=e,n.entangledLanes&=e,e=n.entanglements;var i=n.eventTimes;for(n=n.expirationTimes;0<t;){var r=31-To(t),s=1<<r;e[r]=0,i[r]=-1,n[r]=-1,t&=~s}}function AC(n,e){var t=n.entangledLanes|=e;for(n=n.entanglements;t;){var i=31-To(t),r=1<<i;r&e|n[i]&e&&(n[i]|=e),t&=~r}}var Hn=0;function DO(n){return n&=-n,1<n?4<n?n&268435455?16:536870912:4:1}var kO,MC,OO,UO,FO,C1=!1,nv=[],Wl=null,ql=null,$l=null,Rm=new Map,Nm=new Map,Nl=[],YH="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function SR(n,e){switch(n){case"focusin":case"focusout":Wl=null;break;case"dragenter":case"dragleave":ql=null;break;case"mouseover":case"mouseout":$l=null;break;case"pointerover":case"pointerout":Rm.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Nm.delete(e.pointerId)}}function dp(n,e,t,i,r,s){return n===null||n.nativeEvent!==s?(n={blockedOn:e,domEventName:t,eventSystemFlags:i,nativeEvent:s,targetContainers:[r]},e!==null&&(e=Ng(e),e!==null&&MC(e)),n):(n.eventSystemFlags|=i,e=n.targetContainers,r!==null&&e.indexOf(r)===-1&&e.push(r),n)}function KH(n,e,t,i,r){switch(e){case"focusin":return Wl=dp(Wl,n,e,t,i,r),!0;case"dragenter":return ql=dp(ql,n,e,t,i,r),!0;case"mouseover":return $l=dp($l,n,e,t,i,r),!0;case"pointerover":var s=r.pointerId;return Rm.set(s,dp(Rm.get(s)||null,n,e,t,i,r)),!0;case"gotpointercapture":return s=r.pointerId,Nm.set(s,dp(Nm.get(s)||null,n,e,t,i,r)),!0}return!1}function jO(n){var e=wu(n.target);if(e!==null){var t=sh(e);if(t!==null){if(e=t.tag,e===13){if(e=AO(t),e!==null){n.blockedOn=e,FO(n.priority,function(){OO(t)});return}}else if(e===3&&t.stateNode.current.memoizedState.isDehydrated){n.blockedOn=t.tag===3?t.stateNode.containerInfo:null;return}}}n.blockedOn=null}function w0(n){if(n.blockedOn!==null)return!1;for(var e=n.targetContainers;0<e.length;){var t=A1(n.domEventName,n.eventSystemFlags,e[0],n.nativeEvent);if(t===null){t=n.nativeEvent;var i=new t.constructor(t.type,t);w1=i,t.target.dispatchEvent(i),w1=null}else return e=Ng(t),e!==null&&MC(e),n.blockedOn=t,!1;e.shift()}return!0}function TR(n,e,t){w0(n)&&t.delete(e)}function JH(){C1=!1,Wl!==null&&w0(Wl)&&(Wl=null),ql!==null&&w0(ql)&&(ql=null),$l!==null&&w0($l)&&($l=null),Rm.forEach(TR),Nm.forEach(TR)}function fp(n,e){n.blockedOn===e&&(n.blockedOn=null,C1||(C1=!0,Us.unstable_scheduleCallback(Us.unstable_NormalPriority,JH)))}function Lm(n){function e(r){return fp(r,n)}if(0<nv.length){fp(nv[0],n);for(var t=1;t<nv.length;t++){var i=nv[t];i.blockedOn===n&&(i.blockedOn=null)}}for(Wl!==null&&fp(Wl,n),ql!==null&&fp(ql,n),$l!==null&&fp($l,n),Rm.forEach(e),Nm.forEach(e),t=0;t<Nl.length;t++)i=Nl[t],i.blockedOn===n&&(i.blockedOn=null);for(;0<Nl.length&&(t=Nl[0],t.blockedOn===null);)jO(t),t.blockedOn===null&&Nl.shift()}var Bd=nl.ReactCurrentBatchConfig,tx=!0;function QH(n,e,t,i){var r=Hn,s=Bd.transition;Bd.transition=null;try{Hn=1,IC(n,e,t,i)}finally{Hn=r,Bd.transition=s}}function ZH(n,e,t,i){var r=Hn,s=Bd.transition;Bd.transition=null;try{Hn=4,IC(n,e,t,i)}finally{Hn=r,Bd.transition=s}}function IC(n,e,t,i){if(tx){var r=A1(n,e,t,i);if(r===null)ES(n,e,i,nx,t),SR(n,i);else if(KH(r,n,e,t,i))i.stopPropagation();else if(SR(n,i),e&4&&-1<YH.indexOf(n)){for(;r!==null;){var s=Ng(r);if(s!==null&&kO(s),s=A1(n,e,t,i),s===null&&ES(n,e,i,nx,t),s===r)break;r=s}r!==null&&i.stopPropagation()}else ES(n,e,i,null,t)}}var nx=null;function A1(n,e,t,i){if(nx=null,n=EC(i),n=wu(n),n!==null)if(e=sh(n),e===null)n=null;else if(t=e.tag,t===13){if(n=AO(e),n!==null)return n;n=null}else if(t===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;n=null}else e!==n&&(n=null);return nx=n,null}function VO(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(VH()){case CC:return 1;case RO:return 4;case Z0:case BH:return 16;case NO:return 536870912;default:return 16}default:return 16}}var Vl=null,PC=null,b0=null;function BO(){if(b0)return b0;var n,e=PC,t=e.length,i,r="value"in Vl?Vl.value:Vl.textContent,s=r.length;for(n=0;n<t&&e[n]===r[n];n++);var o=t-n;for(i=1;i<=o&&e[t-i]===r[s-i];i++);return b0=r.slice(n,1<i?1-i:void 0)}function S0(n){var e=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&e===13&&(n=13)):n=e,n===10&&(n=13),32<=n||n===13?n:0}function iv(){return!0}function ER(){return!1}function Bs(n){function e(t,i,r,s,o){this._reactName=t,this._targetInst=r,this.type=i,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in n)n.hasOwnProperty(a)&&(t=n[a],this[a]=t?t(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?iv:ER,this.isPropagationStopped=ER,this}return di(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():typeof t.returnValue!="unknown"&&(t.returnValue=!1),this.isDefaultPrevented=iv)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():typeof t.cancelBubble!="unknown"&&(t.cancelBubble=!0),this.isPropagationStopped=iv)},persist:function(){},isPersistent:iv}),e}var bf={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},RC=Bs(bf),Rg=di({},bf,{view:0,detail:0}),eG=Bs(Rg),gS,yS,pp,H_=di({},Rg,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:NC,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==pp&&(pp&&n.type==="mousemove"?(gS=n.screenX-pp.screenX,yS=n.screenY-pp.screenY):yS=gS=0,pp=n),gS)},movementY:function(n){return"movementY"in n?n.movementY:yS}}),CR=Bs(H_),tG=di({},H_,{dataTransfer:0}),nG=Bs(tG),iG=di({},Rg,{relatedTarget:0}),vS=Bs(iG),rG=di({},bf,{animationName:0,elapsedTime:0,pseudoElement:0}),sG=Bs(rG),oG=di({},bf,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),aG=Bs(oG),lG=di({},bf,{data:0}),AR=Bs(lG),cG={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},uG={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},hG={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function dG(n){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(n):(n=hG[n])?!!e[n]:!1}function NC(){return dG}var fG=di({},Rg,{key:function(n){if(n.key){var e=cG[n.key]||n.key;if(e!=="Unidentified")return e}return n.type==="keypress"?(n=S0(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?uG[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:NC,charCode:function(n){return n.type==="keypress"?S0(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?S0(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),pG=Bs(fG),mG=di({},H_,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),MR=Bs(mG),gG=di({},Rg,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:NC}),yG=Bs(gG),vG=di({},bf,{propertyName:0,elapsedTime:0,pseudoElement:0}),xG=Bs(vG),_G=di({},H_,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),wG=Bs(_G),bG=[9,13,27,32],LC=Ga&&"CompositionEvent"in window,nm=null;Ga&&"documentMode"in document&&(nm=document.documentMode);var SG=Ga&&"TextEvent"in window&&!nm,zO=Ga&&(!LC||nm&&8<nm&&11>=nm),IR=" ",PR=!1;function HO(n,e){switch(n){case"keyup":return bG.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function GO(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var fd=!1;function TG(n,e){switch(n){case"compositionend":return GO(e);case"keypress":return e.which!==32?null:(PR=!0,IR);case"textInput":return n=e.data,n===IR&&PR?null:n;default:return null}}function EG(n,e){if(fd)return n==="compositionend"||!LC&&HO(n,e)?(n=BO(),b0=PC=Vl=null,fd=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return zO&&e.locale!=="ko"?null:e.data;default:return null}}var CG={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function RR(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e==="input"?!!CG[n.type]:e==="textarea"}function WO(n,e,t,i){bO(i),e=ix(e,"onChange"),0<e.length&&(t=new RC("onChange","change",null,t,i),n.push({event:t,listeners:e}))}var im=null,Dm=null;function AG(n){nU(n,0)}function G_(n){var e=gd(n);if(mO(e))return n}function MG(n,e){if(n==="change")return e}var qO=!1;if(Ga){var xS;if(Ga){var _S="oninput"in document;if(!_S){var NR=document.createElement("div");NR.setAttribute("oninput","return;"),_S=typeof NR.oninput=="function"}xS=_S}else xS=!1;qO=xS&&(!document.documentMode||9<document.documentMode)}function LR(){im&&(im.detachEvent("onpropertychange",$O),Dm=im=null)}function $O(n){if(n.propertyName==="value"&&G_(Dm)){var e=[];WO(e,Dm,n,EC(n)),CO(AG,e)}}function IG(n,e,t){n==="focusin"?(LR(),im=e,Dm=t,im.attachEvent("onpropertychange",$O)):n==="focusout"&&LR()}function PG(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return G_(Dm)}function RG(n,e){if(n==="click")return G_(e)}function NG(n,e){if(n==="input"||n==="change")return G_(e)}function LG(n,e){return n===e&&(n!==0||1/n===1/e)||n!==n&&e!==e}var Ao=typeof Object.is=="function"?Object.is:LG;function km(n,e){if(Ao(n,e))return!0;if(typeof n!="object"||n===null||typeof e!="object"||e===null)return!1;var t=Object.keys(n),i=Object.keys(e);if(t.length!==i.length)return!1;for(i=0;i<t.length;i++){var r=t[i];if(!c1.call(e,r)||!Ao(n[r],e[r]))return!1}return!0}function DR(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function kR(n,e){var t=DR(n);n=0;for(var i;t;){if(t.nodeType===3){if(i=n+t.textContent.length,n<=e&&i>=e)return{node:t,offset:e-n};n=i}e:{for(;t;){if(t.nextSibling){t=t.nextSibling;break e}t=t.parentNode}t=void 0}t=DR(t)}}function XO(n,e){return n&&e?n===e?!0:n&&n.nodeType===3?!1:e&&e.nodeType===3?XO(n,e.parentNode):"contains"in n?n.contains(e):n.compareDocumentPosition?!!(n.compareDocumentPosition(e)&16):!1:!1}function YO(){for(var n=window,e=K0();e instanceof n.HTMLIFrameElement;){try{var t=typeof e.contentWindow.location.href=="string"}catch{t=!1}if(t)n=e.contentWindow;else break;e=K0(n.document)}return e}function DC(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e&&(e==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||e==="textarea"||n.contentEditable==="true")}function DG(n){var e=YO(),t=n.focusedElem,i=n.selectionRange;if(e!==t&&t&&t.ownerDocument&&XO(t.ownerDocument.documentElement,t)){if(i!==null&&DC(t)){if(e=i.start,n=i.end,n===void 0&&(n=e),"selectionStart"in t)t.selectionStart=e,t.selectionEnd=Math.min(n,t.value.length);else if(n=(e=t.ownerDocument||document)&&e.defaultView||window,n.getSelection){n=n.getSelection();var r=t.textContent.length,s=Math.min(i.start,r);i=i.end===void 0?s:Math.min(i.end,r),!n.extend&&s>i&&(r=i,i=s,s=r),r=kR(t,s);var o=kR(t,i);r&&o&&(n.rangeCount!==1||n.anchorNode!==r.node||n.anchorOffset!==r.offset||n.focusNode!==o.node||n.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(r.node,r.offset),n.removeAllRanges(),s>i?(n.addRange(e),n.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),n.addRange(e)))}}for(e=[],n=t;n=n.parentNode;)n.nodeType===1&&e.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof t.focus=="function"&&t.focus(),t=0;t<e.length;t++)n=e[t],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var kG=Ga&&"documentMode"in document&&11>=document.documentMode,pd=null,M1=null,rm=null,I1=!1;function OR(n,e,t){var i=t.window===t?t.document:t.nodeType===9?t:t.ownerDocument;I1||pd==null||pd!==K0(i)||(i=pd,"selectionStart"in i&&DC(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),rm&&km(rm,i)||(rm=i,i=ix(M1,"onSelect"),0<i.length&&(e=new RC("onSelect","select",null,e,t),n.push({event:e,listeners:i}),e.target=pd)))}function rv(n,e){var t={};return t[n.toLowerCase()]=e.toLowerCase(),t["Webkit"+n]="webkit"+e,t["Moz"+n]="moz"+e,t}var md={animationend:rv("Animation","AnimationEnd"),animationiteration:rv("Animation","AnimationIteration"),animationstart:rv("Animation","AnimationStart"),transitionend:rv("Transition","TransitionEnd")},wS={},KO={};Ga&&(KO=document.createElement("div").style,"AnimationEvent"in window||(delete md.animationend.animation,delete md.animationiteration.animation,delete md.animationstart.animation),"TransitionEvent"in window||delete md.transitionend.transition);function W_(n){if(wS[n])return wS[n];if(!md[n])return n;var e=md[n],t;for(t in e)if(e.hasOwnProperty(t)&&t in KO)return wS[n]=e[t];return n}var JO=W_("animationend"),QO=W_("animationiteration"),ZO=W_("animationstart"),eU=W_("transitionend"),tU=new Map,UR="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function _c(n,e){tU.set(n,e),rh(e,[n])}for(var bS=0;bS<UR.length;bS++){var SS=UR[bS],OG=SS.toLowerCase(),UG=SS[0].toUpperCase()+SS.slice(1);_c(OG,"on"+UG)}_c(JO,"onAnimationEnd");_c(QO,"onAnimationIteration");_c(ZO,"onAnimationStart");_c("dblclick","onDoubleClick");_c("focusin","onFocus");_c("focusout","onBlur");_c(eU,"onTransitionEnd");Kd("onMouseEnter",["mouseout","mouseover"]);Kd("onMouseLeave",["mouseout","mouseover"]);Kd("onPointerEnter",["pointerout","pointerover"]);Kd("onPointerLeave",["pointerout","pointerover"]);rh("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));rh("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));rh("onBeforeInput",["compositionend","keypress","textInput","paste"]);rh("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));rh("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));rh("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Bp="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),FG=new Set("cancel close invalid load scroll toggle".split(" ").concat(Bp));function FR(n,e,t){var i=n.type||"unknown-event";n.currentTarget=t,OH(i,e,void 0,n),n.currentTarget=null}function nU(n,e){e=(e&4)!==0;for(var t=0;t<n.length;t++){var i=n[t],r=i.event;i=i.listeners;e:{var s=void 0;if(e)for(var o=i.length-1;0<=o;o--){var a=i[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==s&&r.isPropagationStopped())break e;FR(r,a,c),s=l}else for(o=0;o<i.length;o++){if(a=i[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==s&&r.isPropagationStopped())break e;FR(r,a,c),s=l}}}if(Q0)throw n=T1,Q0=!1,T1=null,n}function Jn(n,e){var t=e[D1];t===void 0&&(t=e[D1]=new Set);var i=n+"__bubble";t.has(i)||(iU(e,n,2,!1),t.add(i))}function TS(n,e,t){var i=0;e&&(i|=4),iU(t,n,i,e)}var sv="_reactListening"+Math.random().toString(36).slice(2);function Om(n){if(!n[sv]){n[sv]=!0,uO.forEach(function(t){t!=="selectionchange"&&(FG.has(t)||TS(t,!1,n),TS(t,!0,n))});var e=n.nodeType===9?n:n.ownerDocument;e===null||e[sv]||(e[sv]=!0,TS("selectionchange",!1,e))}}function iU(n,e,t,i){switch(VO(e)){case 1:var r=QH;break;case 4:r=ZH;break;default:r=IC}t=r.bind(null,e,t,n),r=void 0,!S1||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(r=!0),i?r!==void 0?n.addEventListener(e,t,{capture:!0,passive:r}):n.addEventListener(e,t,!0):r!==void 0?n.addEventListener(e,t,{passive:r}):n.addEventListener(e,t,!1)}function ES(n,e,t,i,r){var s=i;if(!(e&1)&&!(e&2)&&i!==null)e:for(;;){if(i===null)return;var o=i.tag;if(o===3||o===4){var a=i.stateNode.containerInfo;if(a===r||a.nodeType===8&&a.parentNode===r)break;if(o===4)for(o=i.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===r||l.nodeType===8&&l.parentNode===r))return;o=o.return}for(;a!==null;){if(o=wu(a),o===null)return;if(l=o.tag,l===5||l===6){i=s=o;continue e}a=a.parentNode}}i=i.return}CO(function(){var c=s,u=EC(t),f=[];e:{var m=tU.get(n);if(m!==void 0){var g=RC,x=n;switch(n){case"keypress":if(S0(t)===0)break e;case"keydown":case"keyup":g=pG;break;case"focusin":x="focus",g=vS;break;case"focusout":x="blur",g=vS;break;case"beforeblur":case"afterblur":g=vS;break;case"click":if(t.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":g=CR;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":g=nG;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":g=yG;break;case JO:case QO:case ZO:g=sG;break;case eU:g=xG;break;case"scroll":g=eG;break;case"wheel":g=wG;break;case"copy":case"cut":case"paste":g=aG;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":g=MR}var b=(e&4)!==0,w=!b&&n==="scroll",v=b?m!==null?m+"Capture":null:m;b=[];for(var S=c,E;S!==null;){E=S;var C=E.stateNode;if(E.tag===5&&C!==null&&(E=C,v!==null&&(C=Pm(S,v),C!=null&&b.push(Um(S,C,E)))),w)break;S=S.return}0<b.length&&(m=new g(m,x,null,t,u),f.push({event:m,listeners:b}))}}if(!(e&7)){e:{if(m=n==="mouseover"||n==="pointerover",g=n==="mouseout"||n==="pointerout",m&&t!==w1&&(x=t.relatedTarget||t.fromElement)&&(wu(x)||x[Wa]))break e;if((g||m)&&(m=u.window===u?u:(m=u.ownerDocument)?m.defaultView||m.parentWindow:window,g?(x=t.relatedTarget||t.toElement,g=c,x=x?wu(x):null,x!==null&&(w=sh(x),x!==w||x.tag!==5&&x.tag!==6)&&(x=null)):(g=null,x=c),g!==x)){if(b=CR,C="onMouseLeave",v="onMouseEnter",S="mouse",(n==="pointerout"||n==="pointerover")&&(b=MR,C="onPointerLeave",v="onPointerEnter",S="pointer"),w=g==null?m:gd(g),E=x==null?m:gd(x),m=new b(C,S+"leave",g,t,u),m.target=w,m.relatedTarget=E,C=null,wu(u)===c&&(b=new b(v,S+"enter",x,t,u),b.target=E,b.relatedTarget=w,C=b),w=C,g&&x)t:{for(b=g,v=x,S=0,E=b;E;E=kh(E))S++;for(E=0,C=v;C;C=kh(C))E++;for(;0<S-E;)b=kh(b),S--;for(;0<E-S;)v=kh(v),E--;for(;S--;){if(b===v||v!==null&&b===v.alternate)break t;b=kh(b),v=kh(v)}b=null}else b=null;g!==null&&jR(f,m,g,b,!1),x!==null&&w!==null&&jR(f,w,x,b,!0)}}e:{if(m=c?gd(c):window,g=m.nodeName&&m.nodeName.toLowerCase(),g==="select"||g==="input"&&m.type==="file")var V=MG;else if(RR(m))if(qO)V=NG;else{V=PG;var L=IG}else(g=m.nodeName)&&g.toLowerCase()==="input"&&(m.type==="checkbox"||m.type==="radio")&&(V=RG);if(V&&(V=V(n,c))){WO(f,V,t,u);break e}L&&L(n,m,c),n==="focusout"&&(L=m._wrapperState)&&L.controlled&&m.type==="number"&&g1(m,"number",m.value)}switch(L=c?gd(c):window,n){case"focusin":(RR(L)||L.contentEditable==="true")&&(pd=L,M1=c,rm=null);break;case"focusout":rm=M1=pd=null;break;case"mousedown":I1=!0;break;case"contextmenu":case"mouseup":case"dragend":I1=!1,OR(f,t,u);break;case"selectionchange":if(kG)break;case"keydown":case"keyup":OR(f,t,u)}var N;if(LC)e:{switch(n){case"compositionstart":var I="onCompositionStart";break e;case"compositionend":I="onCompositionEnd";break e;case"compositionupdate":I="onCompositionUpdate";break e}I=void 0}else fd?HO(n,t)&&(I="onCompositionEnd"):n==="keydown"&&t.keyCode===229&&(I="onCompositionStart");I&&(zO&&t.locale!=="ko"&&(fd||I!=="onCompositionStart"?I==="onCompositionEnd"&&fd&&(N=BO()):(Vl=u,PC="value"in Vl?Vl.value:Vl.textContent,fd=!0)),L=ix(c,I),0<L.length&&(I=new AR(I,n,null,t,u),f.push({event:I,listeners:L}),N?I.data=N:(N=GO(t),N!==null&&(I.data=N)))),(N=SG?TG(n,t):EG(n,t))&&(c=ix(c,"onBeforeInput"),0<c.length&&(u=new AR("onBeforeInput","beforeinput",null,t,u),f.push({event:u,listeners:c}),u.data=N))}nU(f,e)})}function Um(n,e,t){return{instance:n,listener:e,currentTarget:t}}function ix(n,e){for(var t=e+"Capture",i=[];n!==null;){var r=n,s=r.stateNode;r.tag===5&&s!==null&&(r=s,s=Pm(n,t),s!=null&&i.unshift(Um(n,s,r)),s=Pm(n,e),s!=null&&i.push(Um(n,s,r))),n=n.return}return i}function kh(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function jR(n,e,t,i,r){for(var s=e._reactName,o=[];t!==null&&t!==i;){var a=t,l=a.alternate,c=a.stateNode;if(l!==null&&l===i)break;a.tag===5&&c!==null&&(a=c,r?(l=Pm(t,s),l!=null&&o.unshift(Um(t,l,a))):r||(l=Pm(t,s),l!=null&&o.push(Um(t,l,a)))),t=t.return}o.length!==0&&n.push({event:e,listeners:o})}var jG=/\r\n?/g,VG=/\u0000|\uFFFD/g;function VR(n){return(typeof n=="string"?n:""+n).replace(jG,`
`).replace(VG,"")}function ov(n,e,t){if(e=VR(e),VR(n)!==e&&t)throw Error(Be(425))}function rx(){}var P1=null,R1=null;function N1(n,e){return n==="textarea"||n==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var L1=typeof setTimeout=="function"?setTimeout:void 0,BG=typeof clearTimeout=="function"?clearTimeout:void 0,BR=typeof Promise=="function"?Promise:void 0,zG=typeof queueMicrotask=="function"?queueMicrotask:typeof BR<"u"?function(n){return BR.resolve(null).then(n).catch(HG)}:L1;function HG(n){setTimeout(function(){throw n})}function CS(n,e){var t=e,i=0;do{var r=t.nextSibling;if(n.removeChild(t),r&&r.nodeType===8)if(t=r.data,t==="/$"){if(i===0){n.removeChild(r),Lm(e);return}i--}else t!=="$"&&t!=="$?"&&t!=="$!"||i++;t=r}while(t);Lm(e)}function Xl(n){for(;n!=null;n=n.nextSibling){var e=n.nodeType;if(e===1||e===3)break;if(e===8){if(e=n.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return n}function zR(n){n=n.previousSibling;for(var e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="$"||t==="$!"||t==="$?"){if(e===0)return n;e--}else t==="/$"&&e++}n=n.previousSibling}return null}var Sf=Math.random().toString(36).slice(2),Go="__reactFiber$"+Sf,Fm="__reactProps$"+Sf,Wa="__reactContainer$"+Sf,D1="__reactEvents$"+Sf,GG="__reactListeners$"+Sf,WG="__reactHandles$"+Sf;function wu(n){var e=n[Go];if(e)return e;for(var t=n.parentNode;t;){if(e=t[Wa]||t[Go]){if(t=e.alternate,e.child!==null||t!==null&&t.child!==null)for(n=zR(n);n!==null;){if(t=n[Go])return t;n=zR(n)}return e}n=t,t=n.parentNode}return null}function Ng(n){return n=n[Go]||n[Wa],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function gd(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(Be(33))}function q_(n){return n[Fm]||null}var k1=[],yd=-1;function wc(n){return{current:n}}function ei(n){0>yd||(n.current=k1[yd],k1[yd]=null,yd--)}function Kn(n,e){yd++,k1[yd]=n.current,n.current=e}var sc={},Or=wc(sc),fs=wc(!1),zu=sc;function Jd(n,e){var t=n.type.contextTypes;if(!t)return sc;var i=n.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===e)return i.__reactInternalMemoizedMaskedChildContext;var r={},s;for(s in t)r[s]=e[s];return i&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=e,n.__reactInternalMemoizedMaskedChildContext=r),r}function ps(n){return n=n.childContextTypes,n!=null}function sx(){ei(fs),ei(Or)}function HR(n,e,t){if(Or.current!==sc)throw Error(Be(168));Kn(Or,e),Kn(fs,t)}function rU(n,e,t){var i=n.stateNode;if(e=e.childContextTypes,typeof i.getChildContext!="function")return t;i=i.getChildContext();for(var r in i)if(!(r in e))throw Error(Be(108,IH(n)||"Unknown",r));return di({},t,i)}function ox(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||sc,zu=Or.current,Kn(Or,n),Kn(fs,fs.current),!0}function GR(n,e,t){var i=n.stateNode;if(!i)throw Error(Be(169));t?(n=rU(n,e,zu),i.__reactInternalMemoizedMergedChildContext=n,ei(fs),ei(Or),Kn(Or,n)):ei(fs),Kn(fs,t)}var Ta=null,$_=!1,AS=!1;function sU(n){Ta===null?Ta=[n]:Ta.push(n)}function qG(n){$_=!0,sU(n)}function bc(){if(!AS&&Ta!==null){AS=!0;var n=0,e=Hn;try{var t=Ta;for(Hn=1;n<t.length;n++){var i=t[n];do i=i(!0);while(i!==null)}Ta=null,$_=!1}catch(r){throw Ta!==null&&(Ta=Ta.slice(n+1)),PO(CC,bc),r}finally{Hn=e,AS=!1}}return null}var vd=[],xd=0,ax=null,lx=0,eo=[],to=0,Hu=null,Aa=1,Ma="";function hu(n,e){vd[xd++]=lx,vd[xd++]=ax,ax=n,lx=e}function oU(n,e,t){eo[to++]=Aa,eo[to++]=Ma,eo[to++]=Hu,Hu=n;var i=Aa;n=Ma;var r=32-To(i)-1;i&=~(1<<r),t+=1;var s=32-To(e)+r;if(30<s){var o=r-r%5;s=(i&(1<<o)-1).toString(32),i>>=o,r-=o,Aa=1<<32-To(e)+r|t<<r|i,Ma=s+n}else Aa=1<<s|t<<r|i,Ma=n}function kC(n){n.return!==null&&(hu(n,1),oU(n,1,0))}function OC(n){for(;n===ax;)ax=vd[--xd],vd[xd]=null,lx=vd[--xd],vd[xd]=null;for(;n===Hu;)Hu=eo[--to],eo[to]=null,Ma=eo[--to],eo[to]=null,Aa=eo[--to],eo[to]=null}var Ls=null,Rs=null,ii=!1,wo=null;function aU(n,e){var t=no(5,null,null,0);t.elementType="DELETED",t.stateNode=e,t.return=n,e=n.deletions,e===null?(n.deletions=[t],n.flags|=16):e.push(t)}function WR(n,e){switch(n.tag){case 5:var t=n.type;return e=e.nodeType!==1||t.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(n.stateNode=e,Ls=n,Rs=Xl(e.firstChild),!0):!1;case 6:return e=n.pendingProps===""||e.nodeType!==3?null:e,e!==null?(n.stateNode=e,Ls=n,Rs=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(t=Hu!==null?{id:Aa,overflow:Ma}:null,n.memoizedState={dehydrated:e,treeContext:t,retryLane:1073741824},t=no(18,null,null,0),t.stateNode=e,t.return=n,n.child=t,Ls=n,Rs=null,!0):!1;default:return!1}}function O1(n){return(n.mode&1)!==0&&(n.flags&128)===0}function U1(n){if(ii){var e=Rs;if(e){var t=e;if(!WR(n,e)){if(O1(n))throw Error(Be(418));e=Xl(t.nextSibling);var i=Ls;e&&WR(n,e)?aU(i,t):(n.flags=n.flags&-4097|2,ii=!1,Ls=n)}}else{if(O1(n))throw Error(Be(418));n.flags=n.flags&-4097|2,ii=!1,Ls=n}}}function qR(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;Ls=n}function av(n){if(n!==Ls)return!1;if(!ii)return qR(n),ii=!0,!1;var e;if((e=n.tag!==3)&&!(e=n.tag!==5)&&(e=n.type,e=e!=="head"&&e!=="body"&&!N1(n.type,n.memoizedProps)),e&&(e=Rs)){if(O1(n))throw lU(),Error(Be(418));for(;e;)aU(n,e),e=Xl(e.nextSibling)}if(qR(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(Be(317));e:{for(n=n.nextSibling,e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="/$"){if(e===0){Rs=Xl(n.nextSibling);break e}e--}else t!=="$"&&t!=="$!"&&t!=="$?"||e++}n=n.nextSibling}Rs=null}}else Rs=Ls?Xl(n.stateNode.nextSibling):null;return!0}function lU(){for(var n=Rs;n;)n=Xl(n.nextSibling)}function Qd(){Rs=Ls=null,ii=!1}function UC(n){wo===null?wo=[n]:wo.push(n)}var $G=nl.ReactCurrentBatchConfig;function mp(n,e,t){if(n=t.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(t._owner){if(t=t._owner,t){if(t.tag!==1)throw Error(Be(309));var i=t.stateNode}if(!i)throw Error(Be(147,n));var r=i,s=""+n;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=r.refs;o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof n!="string")throw Error(Be(284));if(!t._owner)throw Error(Be(290,n))}return n}function lv(n,e){throw n=Object.prototype.toString.call(e),Error(Be(31,n==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":n))}function $R(n){var e=n._init;return e(n._payload)}function cU(n){function e(v,S){if(n){var E=v.deletions;E===null?(v.deletions=[S],v.flags|=16):E.push(S)}}function t(v,S){if(!n)return null;for(;S!==null;)e(v,S),S=S.sibling;return null}function i(v,S){for(v=new Map;S!==null;)S.key!==null?v.set(S.key,S):v.set(S.index,S),S=S.sibling;return v}function r(v,S){return v=Ql(v,S),v.index=0,v.sibling=null,v}function s(v,S,E){return v.index=E,n?(E=v.alternate,E!==null?(E=E.index,E<S?(v.flags|=2,S):E):(v.flags|=2,S)):(v.flags|=1048576,S)}function o(v){return n&&v.alternate===null&&(v.flags|=2),v}function a(v,S,E,C){return S===null||S.tag!==6?(S=DS(E,v.mode,C),S.return=v,S):(S=r(S,E),S.return=v,S)}function l(v,S,E,C){var V=E.type;return V===dd?u(v,S,E.props.children,C,E.key):S!==null&&(S.elementType===V||typeof V=="object"&&V!==null&&V.$$typeof===Ml&&$R(V)===S.type)?(C=r(S,E.props),C.ref=mp(v,S,E),C.return=v,C):(C=P0(E.type,E.key,E.props,null,v.mode,C),C.ref=mp(v,S,E),C.return=v,C)}function c(v,S,E,C){return S===null||S.tag!==4||S.stateNode.containerInfo!==E.containerInfo||S.stateNode.implementation!==E.implementation?(S=kS(E,v.mode,C),S.return=v,S):(S=r(S,E.children||[]),S.return=v,S)}function u(v,S,E,C,V){return S===null||S.tag!==7?(S=Nu(E,v.mode,C,V),S.return=v,S):(S=r(S,E),S.return=v,S)}function f(v,S,E){if(typeof S=="string"&&S!==""||typeof S=="number")return S=DS(""+S,v.mode,E),S.return=v,S;if(typeof S=="object"&&S!==null){switch(S.$$typeof){case Jy:return E=P0(S.type,S.key,S.props,null,v.mode,E),E.ref=mp(v,null,S),E.return=v,E;case hd:return S=kS(S,v.mode,E),S.return=v,S;case Ml:var C=S._init;return f(v,C(S._payload),E)}if(jp(S)||up(S))return S=Nu(S,v.mode,E,null),S.return=v,S;lv(v,S)}return null}function m(v,S,E,C){var V=S!==null?S.key:null;if(typeof E=="string"&&E!==""||typeof E=="number")return V!==null?null:a(v,S,""+E,C);if(typeof E=="object"&&E!==null){switch(E.$$typeof){case Jy:return E.key===V?l(v,S,E,C):null;case hd:return E.key===V?c(v,S,E,C):null;case Ml:return V=E._init,m(v,S,V(E._payload),C)}if(jp(E)||up(E))return V!==null?null:u(v,S,E,C,null);lv(v,E)}return null}function g(v,S,E,C,V){if(typeof C=="string"&&C!==""||typeof C=="number")return v=v.get(E)||null,a(S,v,""+C,V);if(typeof C=="object"&&C!==null){switch(C.$$typeof){case Jy:return v=v.get(C.key===null?E:C.key)||null,l(S,v,C,V);case hd:return v=v.get(C.key===null?E:C.key)||null,c(S,v,C,V);case Ml:var L=C._init;return g(v,S,E,L(C._payload),V)}if(jp(C)||up(C))return v=v.get(E)||null,u(S,v,C,V,null);lv(S,C)}return null}function x(v,S,E,C){for(var V=null,L=null,N=S,I=S=0,A=null;N!==null&&I<E.length;I++){N.index>I?(A=N,N=null):A=N.sibling;var M=m(v,N,E[I],C);if(M===null){N===null&&(N=A);break}n&&N&&M.alternate===null&&e(v,N),S=s(M,S,I),L===null?V=M:L.sibling=M,L=M,N=A}if(I===E.length)return t(v,N),ii&&hu(v,I),V;if(N===null){for(;I<E.length;I++)N=f(v,E[I],C),N!==null&&(S=s(N,S,I),L===null?V=N:L.sibling=N,L=N);return ii&&hu(v,I),V}for(N=i(v,N);I<E.length;I++)A=g(N,v,I,E[I],C),A!==null&&(n&&A.alternate!==null&&N.delete(A.key===null?I:A.key),S=s(A,S,I),L===null?V=A:L.sibling=A,L=A);return n&&N.forEach(function(D){return e(v,D)}),ii&&hu(v,I),V}function b(v,S,E,C){var V=up(E);if(typeof V!="function")throw Error(Be(150));if(E=V.call(E),E==null)throw Error(Be(151));for(var L=V=null,N=S,I=S=0,A=null,M=E.next();N!==null&&!M.done;I++,M=E.next()){N.index>I?(A=N,N=null):A=N.sibling;var D=m(v,N,M.value,C);if(D===null){N===null&&(N=A);break}n&&N&&D.alternate===null&&e(v,N),S=s(D,S,I),L===null?V=D:L.sibling=D,L=D,N=A}if(M.done)return t(v,N),ii&&hu(v,I),V;if(N===null){for(;!M.done;I++,M=E.next())M=f(v,M.value,C),M!==null&&(S=s(M,S,I),L===null?V=M:L.sibling=M,L=M);return ii&&hu(v,I),V}for(N=i(v,N);!M.done;I++,M=E.next())M=g(N,v,I,M.value,C),M!==null&&(n&&M.alternate!==null&&N.delete(M.key===null?I:M.key),S=s(M,S,I),L===null?V=M:L.sibling=M,L=M);return n&&N.forEach(function(z){return e(v,z)}),ii&&hu(v,I),V}function w(v,S,E,C){if(typeof E=="object"&&E!==null&&E.type===dd&&E.key===null&&(E=E.props.children),typeof E=="object"&&E!==null){switch(E.$$typeof){case Jy:e:{for(var V=E.key,L=S;L!==null;){if(L.key===V){if(V=E.type,V===dd){if(L.tag===7){t(v,L.sibling),S=r(L,E.props.children),S.return=v,v=S;break e}}else if(L.elementType===V||typeof V=="object"&&V!==null&&V.$$typeof===Ml&&$R(V)===L.type){t(v,L.sibling),S=r(L,E.props),S.ref=mp(v,L,E),S.return=v,v=S;break e}t(v,L);break}else e(v,L);L=L.sibling}E.type===dd?(S=Nu(E.props.children,v.mode,C,E.key),S.return=v,v=S):(C=P0(E.type,E.key,E.props,null,v.mode,C),C.ref=mp(v,S,E),C.return=v,v=C)}return o(v);case hd:e:{for(L=E.key;S!==null;){if(S.key===L)if(S.tag===4&&S.stateNode.containerInfo===E.containerInfo&&S.stateNode.implementation===E.implementation){t(v,S.sibling),S=r(S,E.children||[]),S.return=v,v=S;break e}else{t(v,S);break}else e(v,S);S=S.sibling}S=kS(E,v.mode,C),S.return=v,v=S}return o(v);case Ml:return L=E._init,w(v,S,L(E._payload),C)}if(jp(E))return x(v,S,E,C);if(up(E))return b(v,S,E,C);lv(v,E)}return typeof E=="string"&&E!==""||typeof E=="number"?(E=""+E,S!==null&&S.tag===6?(t(v,S.sibling),S=r(S,E),S.return=v,v=S):(t(v,S),S=DS(E,v.mode,C),S.return=v,v=S),o(v)):t(v,S)}return w}var Zd=cU(!0),uU=cU(!1),cx=wc(null),ux=null,_d=null,FC=null;function jC(){FC=_d=ux=null}function VC(n){var e=cx.current;ei(cx),n._currentValue=e}function F1(n,e,t){for(;n!==null;){var i=n.alternate;if((n.childLanes&e)!==e?(n.childLanes|=e,i!==null&&(i.childLanes|=e)):i!==null&&(i.childLanes&e)!==e&&(i.childLanes|=e),n===t)break;n=n.return}}function zd(n,e){ux=n,FC=_d=null,n=n.dependencies,n!==null&&n.firstContext!==null&&(n.lanes&e&&(hs=!0),n.firstContext=null)}function so(n){var e=n._currentValue;if(FC!==n)if(n={context:n,memoizedValue:e,next:null},_d===null){if(ux===null)throw Error(Be(308));_d=n,ux.dependencies={lanes:0,firstContext:n}}else _d=_d.next=n;return e}var bu=null;function BC(n){bu===null?bu=[n]:bu.push(n)}function hU(n,e,t,i){var r=e.interleaved;return r===null?(t.next=t,BC(e)):(t.next=r.next,r.next=t),e.interleaved=t,qa(n,i)}function qa(n,e){n.lanes|=e;var t=n.alternate;for(t!==null&&(t.lanes|=e),t=n,n=n.return;n!==null;)n.childLanes|=e,t=n.alternate,t!==null&&(t.childLanes|=e),t=n,n=n.return;return t.tag===3?t.stateNode:null}var Il=!1;function zC(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function dU(n,e){n=n.updateQueue,e.updateQueue===n&&(e.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function Da(n,e){return{eventTime:n,lane:e,tag:0,payload:null,callback:null,next:null}}function Yl(n,e,t){var i=n.updateQueue;if(i===null)return null;if(i=i.shared,Mn&2){var r=i.pending;return r===null?e.next=e:(e.next=r.next,r.next=e),i.pending=e,qa(n,t)}return r=i.interleaved,r===null?(e.next=e,BC(i)):(e.next=r.next,r.next=e),i.interleaved=e,qa(n,t)}function T0(n,e,t){if(e=e.updateQueue,e!==null&&(e=e.shared,(t&4194240)!==0)){var i=e.lanes;i&=n.pendingLanes,t|=i,e.lanes=t,AC(n,t)}}function XR(n,e){var t=n.updateQueue,i=n.alternate;if(i!==null&&(i=i.updateQueue,t===i)){var r=null,s=null;if(t=t.firstBaseUpdate,t!==null){do{var o={eventTime:t.eventTime,lane:t.lane,tag:t.tag,payload:t.payload,callback:t.callback,next:null};s===null?r=s=o:s=s.next=o,t=t.next}while(t!==null);s===null?r=s=e:s=s.next=e}else r=s=e;t={baseState:i.baseState,firstBaseUpdate:r,lastBaseUpdate:s,shared:i.shared,effects:i.effects},n.updateQueue=t;return}n=t.lastBaseUpdate,n===null?t.firstBaseUpdate=e:n.next=e,t.lastBaseUpdate=e}function hx(n,e,t,i){var r=n.updateQueue;Il=!1;var s=r.firstBaseUpdate,o=r.lastBaseUpdate,a=r.shared.pending;if(a!==null){r.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?s=c:o.next=c,o=l;var u=n.alternate;u!==null&&(u=u.updateQueue,a=u.lastBaseUpdate,a!==o&&(a===null?u.firstBaseUpdate=c:a.next=c,u.lastBaseUpdate=l))}if(s!==null){var f=r.baseState;o=0,u=c=l=null,a=s;do{var m=a.lane,g=a.eventTime;if((i&m)===m){u!==null&&(u=u.next={eventTime:g,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var x=n,b=a;switch(m=e,g=t,b.tag){case 1:if(x=b.payload,typeof x=="function"){f=x.call(g,f,m);break e}f=x;break e;case 3:x.flags=x.flags&-65537|128;case 0:if(x=b.payload,m=typeof x=="function"?x.call(g,f,m):x,m==null)break e;f=di({},f,m);break e;case 2:Il=!0}}a.callback!==null&&a.lane!==0&&(n.flags|=64,m=r.effects,m===null?r.effects=[a]:m.push(a))}else g={eventTime:g,lane:m,tag:a.tag,payload:a.payload,callback:a.callback,next:null},u===null?(c=u=g,l=f):u=u.next=g,o|=m;if(a=a.next,a===null){if(a=r.shared.pending,a===null)break;m=a,a=m.next,m.next=null,r.lastBaseUpdate=m,r.shared.pending=null}}while(!0);if(u===null&&(l=f),r.baseState=l,r.firstBaseUpdate=c,r.lastBaseUpdate=u,e=r.shared.interleaved,e!==null){r=e;do o|=r.lane,r=r.next;while(r!==e)}else s===null&&(r.shared.lanes=0);Wu|=o,n.lanes=o,n.memoizedState=f}}function YR(n,e,t){if(n=e.effects,e.effects=null,n!==null)for(e=0;e<n.length;e++){var i=n[e],r=i.callback;if(r!==null){if(i.callback=null,i=t,typeof r!="function")throw Error(Be(191,r));r.call(i)}}}var Lg={},Ko=wc(Lg),jm=wc(Lg),Vm=wc(Lg);function Su(n){if(n===Lg)throw Error(Be(174));return n}function HC(n,e){switch(Kn(Vm,e),Kn(jm,n),Kn(Ko,Lg),n=e.nodeType,n){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:v1(null,"");break;default:n=n===8?e.parentNode:e,e=n.namespaceURI||null,n=n.tagName,e=v1(e,n)}ei(Ko),Kn(Ko,e)}function ef(){ei(Ko),ei(jm),ei(Vm)}function fU(n){Su(Vm.current);var e=Su(Ko.current),t=v1(e,n.type);e!==t&&(Kn(jm,n),Kn(Ko,t))}function GC(n){jm.current===n&&(ei(Ko),ei(jm))}var ai=wc(0);function dx(n){for(var e=n;e!==null;){if(e.tag===13){var t=e.memoizedState;if(t!==null&&(t=t.dehydrated,t===null||t.data==="$?"||t.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var MS=[];function WC(){for(var n=0;n<MS.length;n++)MS[n]._workInProgressVersionPrimary=null;MS.length=0}var E0=nl.ReactCurrentDispatcher,IS=nl.ReactCurrentBatchConfig,Gu=0,ui=null,Hi=null,er=null,fx=!1,sm=!1,Bm=0,XG=0;function _r(){throw Error(Be(321))}function qC(n,e){if(e===null)return!1;for(var t=0;t<e.length&&t<n.length;t++)if(!Ao(n[t],e[t]))return!1;return!0}function $C(n,e,t,i,r,s){if(Gu=s,ui=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,E0.current=n===null||n.memoizedState===null?QG:ZG,n=t(i,r),sm){s=0;do{if(sm=!1,Bm=0,25<=s)throw Error(Be(301));s+=1,er=Hi=null,e.updateQueue=null,E0.current=eW,n=t(i,r)}while(sm)}if(E0.current=px,e=Hi!==null&&Hi.next!==null,Gu=0,er=Hi=ui=null,fx=!1,e)throw Error(Be(300));return n}function XC(){var n=Bm!==0;return Bm=0,n}function Ho(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return er===null?ui.memoizedState=er=n:er=er.next=n,er}function oo(){if(Hi===null){var n=ui.alternate;n=n!==null?n.memoizedState:null}else n=Hi.next;var e=er===null?ui.memoizedState:er.next;if(e!==null)er=e,Hi=n;else{if(n===null)throw Error(Be(310));Hi=n,n={memoizedState:Hi.memoizedState,baseState:Hi.baseState,baseQueue:Hi.baseQueue,queue:Hi.queue,next:null},er===null?ui.memoizedState=er=n:er=er.next=n}return er}function zm(n,e){return typeof e=="function"?e(n):e}function PS(n){var e=oo(),t=e.queue;if(t===null)throw Error(Be(311));t.lastRenderedReducer=n;var i=Hi,r=i.baseQueue,s=t.pending;if(s!==null){if(r!==null){var o=r.next;r.next=s.next,s.next=o}i.baseQueue=r=s,t.pending=null}if(r!==null){s=r.next,i=i.baseState;var a=o=null,l=null,c=s;do{var u=c.lane;if((Gu&u)===u)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),i=c.hasEagerState?c.eagerState:n(i,c.action);else{var f={lane:u,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=f,o=i):l=l.next=f,ui.lanes|=u,Wu|=u}c=c.next}while(c!==null&&c!==s);l===null?o=i:l.next=a,Ao(i,e.memoizedState)||(hs=!0),e.memoizedState=i,e.baseState=o,e.baseQueue=l,t.lastRenderedState=i}if(n=t.interleaved,n!==null){r=n;do s=r.lane,ui.lanes|=s,Wu|=s,r=r.next;while(r!==n)}else r===null&&(t.lanes=0);return[e.memoizedState,t.dispatch]}function RS(n){var e=oo(),t=e.queue;if(t===null)throw Error(Be(311));t.lastRenderedReducer=n;var i=t.dispatch,r=t.pending,s=e.memoizedState;if(r!==null){t.pending=null;var o=r=r.next;do s=n(s,o.action),o=o.next;while(o!==r);Ao(s,e.memoizedState)||(hs=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),t.lastRenderedState=s}return[s,i]}function pU(){}function mU(n,e){var t=ui,i=oo(),r=e(),s=!Ao(i.memoizedState,r);if(s&&(i.memoizedState=r,hs=!0),i=i.queue,YC(vU.bind(null,t,i,n),[n]),i.getSnapshot!==e||s||er!==null&&er.memoizedState.tag&1){if(t.flags|=2048,Hm(9,yU.bind(null,t,i,r,e),void 0,null),tr===null)throw Error(Be(349));Gu&30||gU(t,e,r)}return r}function gU(n,e,t){n.flags|=16384,n={getSnapshot:e,value:t},e=ui.updateQueue,e===null?(e={lastEffect:null,stores:null},ui.updateQueue=e,e.stores=[n]):(t=e.stores,t===null?e.stores=[n]:t.push(n))}function yU(n,e,t,i){e.value=t,e.getSnapshot=i,xU(e)&&_U(n)}function vU(n,e,t){return t(function(){xU(e)&&_U(n)})}function xU(n){var e=n.getSnapshot;n=n.value;try{var t=e();return!Ao(n,t)}catch{return!0}}function _U(n){var e=qa(n,1);e!==null&&Eo(e,n,1,-1)}function KR(n){var e=Ho();return typeof n=="function"&&(n=n()),e.memoizedState=e.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:zm,lastRenderedState:n},e.queue=n,n=n.dispatch=JG.bind(null,ui,n),[e.memoizedState,n]}function Hm(n,e,t,i){return n={tag:n,create:e,destroy:t,deps:i,next:null},e=ui.updateQueue,e===null?(e={lastEffect:null,stores:null},ui.updateQueue=e,e.lastEffect=n.next=n):(t=e.lastEffect,t===null?e.lastEffect=n.next=n:(i=t.next,t.next=n,n.next=i,e.lastEffect=n)),n}function wU(){return oo().memoizedState}function C0(n,e,t,i){var r=Ho();ui.flags|=n,r.memoizedState=Hm(1|e,t,void 0,i===void 0?null:i)}function X_(n,e,t,i){var r=oo();i=i===void 0?null:i;var s=void 0;if(Hi!==null){var o=Hi.memoizedState;if(s=o.destroy,i!==null&&qC(i,o.deps)){r.memoizedState=Hm(e,t,s,i);return}}ui.flags|=n,r.memoizedState=Hm(1|e,t,s,i)}function JR(n,e){return C0(8390656,8,n,e)}function YC(n,e){return X_(2048,8,n,e)}function bU(n,e){return X_(4,2,n,e)}function SU(n,e){return X_(4,4,n,e)}function TU(n,e){if(typeof e=="function")return n=n(),e(n),function(){e(null)};if(e!=null)return n=n(),e.current=n,function(){e.current=null}}function EU(n,e,t){return t=t!=null?t.concat([n]):null,X_(4,4,TU.bind(null,e,n),t)}function KC(){}function CU(n,e){var t=oo();e=e===void 0?null:e;var i=t.memoizedState;return i!==null&&e!==null&&qC(e,i[1])?i[0]:(t.memoizedState=[n,e],n)}function AU(n,e){var t=oo();e=e===void 0?null:e;var i=t.memoizedState;return i!==null&&e!==null&&qC(e,i[1])?i[0]:(n=n(),t.memoizedState=[n,e],n)}function MU(n,e,t){return Gu&21?(Ao(t,e)||(t=LO(),ui.lanes|=t,Wu|=t,n.baseState=!0),e):(n.baseState&&(n.baseState=!1,hs=!0),n.memoizedState=t)}function YG(n,e){var t=Hn;Hn=t!==0&&4>t?t:4,n(!0);var i=IS.transition;IS.transition={};try{n(!1),e()}finally{Hn=t,IS.transition=i}}function IU(){return oo().memoizedState}function KG(n,e,t){var i=Jl(n);if(t={lane:i,action:t,hasEagerState:!1,eagerState:null,next:null},PU(n))RU(e,t);else if(t=hU(n,e,t,i),t!==null){var r=$r();Eo(t,n,i,r),NU(t,e,i)}}function JG(n,e,t){var i=Jl(n),r={lane:i,action:t,hasEagerState:!1,eagerState:null,next:null};if(PU(n))RU(e,r);else{var s=n.alternate;if(n.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,t);if(r.hasEagerState=!0,r.eagerState=a,Ao(a,o)){var l=e.interleaved;l===null?(r.next=r,BC(e)):(r.next=l.next,l.next=r),e.interleaved=r;return}}catch{}finally{}t=hU(n,e,r,i),t!==null&&(r=$r(),Eo(t,n,i,r),NU(t,e,i))}}function PU(n){var e=n.alternate;return n===ui||e!==null&&e===ui}function RU(n,e){sm=fx=!0;var t=n.pending;t===null?e.next=e:(e.next=t.next,t.next=e),n.pending=e}function NU(n,e,t){if(t&4194240){var i=e.lanes;i&=n.pendingLanes,t|=i,e.lanes=t,AC(n,t)}}var px={readContext:so,useCallback:_r,useContext:_r,useEffect:_r,useImperativeHandle:_r,useInsertionEffect:_r,useLayoutEffect:_r,useMemo:_r,useReducer:_r,useRef:_r,useState:_r,useDebugValue:_r,useDeferredValue:_r,useTransition:_r,useMutableSource:_r,useSyncExternalStore:_r,useId:_r,unstable_isNewReconciler:!1},QG={readContext:so,useCallback:function(n,e){return Ho().memoizedState=[n,e===void 0?null:e],n},useContext:so,useEffect:JR,useImperativeHandle:function(n,e,t){return t=t!=null?t.concat([n]):null,C0(4194308,4,TU.bind(null,e,n),t)},useLayoutEffect:function(n,e){return C0(4194308,4,n,e)},useInsertionEffect:function(n,e){return C0(4,2,n,e)},useMemo:function(n,e){var t=Ho();return e=e===void 0?null:e,n=n(),t.memoizedState=[n,e],n},useReducer:function(n,e,t){var i=Ho();return e=t!==void 0?t(e):e,i.memoizedState=i.baseState=e,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:e},i.queue=n,n=n.dispatch=KG.bind(null,ui,n),[i.memoizedState,n]},useRef:function(n){var e=Ho();return n={current:n},e.memoizedState=n},useState:KR,useDebugValue:KC,useDeferredValue:function(n){return Ho().memoizedState=n},useTransition:function(){var n=KR(!1),e=n[0];return n=YG.bind(null,n[1]),Ho().memoizedState=n,[e,n]},useMutableSource:function(){},useSyncExternalStore:function(n,e,t){var i=ui,r=Ho();if(ii){if(t===void 0)throw Error(Be(407));t=t()}else{if(t=e(),tr===null)throw Error(Be(349));Gu&30||gU(i,e,t)}r.memoizedState=t;var s={value:t,getSnapshot:e};return r.queue=s,JR(vU.bind(null,i,s,n),[n]),i.flags|=2048,Hm(9,yU.bind(null,i,s,t,e),void 0,null),t},useId:function(){var n=Ho(),e=tr.identifierPrefix;if(ii){var t=Ma,i=Aa;t=(i&~(1<<32-To(i)-1)).toString(32)+t,e=":"+e+"R"+t,t=Bm++,0<t&&(e+="H"+t.toString(32)),e+=":"}else t=XG++,e=":"+e+"r"+t.toString(32)+":";return n.memoizedState=e},unstable_isNewReconciler:!1},ZG={readContext:so,useCallback:CU,useContext:so,useEffect:YC,useImperativeHandle:EU,useInsertionEffect:bU,useLayoutEffect:SU,useMemo:AU,useReducer:PS,useRef:wU,useState:function(){return PS(zm)},useDebugValue:KC,useDeferredValue:function(n){var e=oo();return MU(e,Hi.memoizedState,n)},useTransition:function(){var n=PS(zm)[0],e=oo().memoizedState;return[n,e]},useMutableSource:pU,useSyncExternalStore:mU,useId:IU,unstable_isNewReconciler:!1},eW={readContext:so,useCallback:CU,useContext:so,useEffect:YC,useImperativeHandle:EU,useInsertionEffect:bU,useLayoutEffect:SU,useMemo:AU,useReducer:RS,useRef:wU,useState:function(){return RS(zm)},useDebugValue:KC,useDeferredValue:function(n){var e=oo();return Hi===null?e.memoizedState=n:MU(e,Hi.memoizedState,n)},useTransition:function(){var n=RS(zm)[0],e=oo().memoizedState;return[n,e]},useMutableSource:pU,useSyncExternalStore:mU,useId:IU,unstable_isNewReconciler:!1};function yo(n,e){if(n&&n.defaultProps){e=di({},e),n=n.defaultProps;for(var t in n)e[t]===void 0&&(e[t]=n[t]);return e}return e}function j1(n,e,t,i){e=n.memoizedState,t=t(i,e),t=t==null?e:di({},e,t),n.memoizedState=t,n.lanes===0&&(n.updateQueue.baseState=t)}var Y_={isMounted:function(n){return(n=n._reactInternals)?sh(n)===n:!1},enqueueSetState:function(n,e,t){n=n._reactInternals;var i=$r(),r=Jl(n),s=Da(i,r);s.payload=e,t!=null&&(s.callback=t),e=Yl(n,s,r),e!==null&&(Eo(e,n,r,i),T0(e,n,r))},enqueueReplaceState:function(n,e,t){n=n._reactInternals;var i=$r(),r=Jl(n),s=Da(i,r);s.tag=1,s.payload=e,t!=null&&(s.callback=t),e=Yl(n,s,r),e!==null&&(Eo(e,n,r,i),T0(e,n,r))},enqueueForceUpdate:function(n,e){n=n._reactInternals;var t=$r(),i=Jl(n),r=Da(t,i);r.tag=2,e!=null&&(r.callback=e),e=Yl(n,r,i),e!==null&&(Eo(e,n,i,t),T0(e,n,i))}};function QR(n,e,t,i,r,s,o){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(i,s,o):e.prototype&&e.prototype.isPureReactComponent?!km(t,i)||!km(r,s):!0}function LU(n,e,t){var i=!1,r=sc,s=e.contextType;return typeof s=="object"&&s!==null?s=so(s):(r=ps(e)?zu:Or.current,i=e.contextTypes,s=(i=i!=null)?Jd(n,r):sc),e=new e(t,s),n.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Y_,n.stateNode=e,e._reactInternals=n,i&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=r,n.__reactInternalMemoizedMaskedChildContext=s),e}function ZR(n,e,t,i){n=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(t,i),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(t,i),e.state!==n&&Y_.enqueueReplaceState(e,e.state,null)}function V1(n,e,t,i){var r=n.stateNode;r.props=t,r.state=n.memoizedState,r.refs={},zC(n);var s=e.contextType;typeof s=="object"&&s!==null?r.context=so(s):(s=ps(e)?zu:Or.current,r.context=Jd(n,s)),r.state=n.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(j1(n,e,s,t),r.state=n.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof r.getSnapshotBeforeUpdate=="function"||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(e=r.state,typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount(),e!==r.state&&Y_.enqueueReplaceState(r,r.state,null),hx(n,t,r,i),r.state=n.memoizedState),typeof r.componentDidMount=="function"&&(n.flags|=4194308)}function tf(n,e){try{var t="",i=e;do t+=MH(i),i=i.return;while(i);var r=t}catch(s){r=`
Error generating stack: `+s.message+`
`+s.stack}return{value:n,source:e,stack:r,digest:null}}function NS(n,e,t){return{value:n,source:null,stack:t??null,digest:e??null}}function B1(n,e){try{console.error(e.value)}catch(t){setTimeout(function(){throw t})}}var tW=typeof WeakMap=="function"?WeakMap:Map;function DU(n,e,t){t=Da(-1,t),t.tag=3,t.payload={element:null};var i=e.value;return t.callback=function(){gx||(gx=!0,J1=i),B1(n,e)},t}function kU(n,e,t){t=Da(-1,t),t.tag=3;var i=n.type.getDerivedStateFromError;if(typeof i=="function"){var r=e.value;t.payload=function(){return i(r)},t.callback=function(){B1(n,e)}}var s=n.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(t.callback=function(){B1(n,e),typeof i!="function"&&(Kl===null?Kl=new Set([this]):Kl.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),t}function eN(n,e,t){var i=n.pingCache;if(i===null){i=n.pingCache=new tW;var r=new Set;i.set(e,r)}else r=i.get(e),r===void 0&&(r=new Set,i.set(e,r));r.has(t)||(r.add(t),n=mW.bind(null,n,e,t),e.then(n,n))}function tN(n){do{var e;if((e=n.tag===13)&&(e=n.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return n;n=n.return}while(n!==null);return null}function nN(n,e,t,i,r){return n.mode&1?(n.flags|=65536,n.lanes=r,n):(n===e?n.flags|=65536:(n.flags|=128,t.flags|=131072,t.flags&=-52805,t.tag===1&&(t.alternate===null?t.tag=17:(e=Da(-1,1),e.tag=2,Yl(t,e,1))),t.lanes|=1),n)}var nW=nl.ReactCurrentOwner,hs=!1;function Wr(n,e,t,i){e.child=n===null?uU(e,null,t,i):Zd(e,n.child,t,i)}function iN(n,e,t,i,r){t=t.render;var s=e.ref;return zd(e,r),i=$C(n,e,t,i,s,r),t=XC(),n!==null&&!hs?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~r,$a(n,e,r)):(ii&&t&&kC(e),e.flags|=1,Wr(n,e,i,r),e.child)}function rN(n,e,t,i,r){if(n===null){var s=t.type;return typeof s=="function"&&!rA(s)&&s.defaultProps===void 0&&t.compare===null&&t.defaultProps===void 0?(e.tag=15,e.type=s,OU(n,e,s,i,r)):(n=P0(t.type,null,i,e,e.mode,r),n.ref=e.ref,n.return=e,e.child=n)}if(s=n.child,!(n.lanes&r)){var o=s.memoizedProps;if(t=t.compare,t=t!==null?t:km,t(o,i)&&n.ref===e.ref)return $a(n,e,r)}return e.flags|=1,n=Ql(s,i),n.ref=e.ref,n.return=e,e.child=n}function OU(n,e,t,i,r){if(n!==null){var s=n.memoizedProps;if(km(s,i)&&n.ref===e.ref)if(hs=!1,e.pendingProps=i=s,(n.lanes&r)!==0)n.flags&131072&&(hs=!0);else return e.lanes=n.lanes,$a(n,e,r)}return z1(n,e,t,i,r)}function UU(n,e,t){var i=e.pendingProps,r=i.children,s=n!==null?n.memoizedState:null;if(i.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Kn(bd,Is),Is|=t;else{if(!(t&1073741824))return n=s!==null?s.baseLanes|t:t,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:n,cachePool:null,transitions:null},e.updateQueue=null,Kn(bd,Is),Is|=n,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=s!==null?s.baseLanes:t,Kn(bd,Is),Is|=i}else s!==null?(i=s.baseLanes|t,e.memoizedState=null):i=t,Kn(bd,Is),Is|=i;return Wr(n,e,r,t),e.child}function FU(n,e){var t=e.ref;(n===null&&t!==null||n!==null&&n.ref!==t)&&(e.flags|=512,e.flags|=2097152)}function z1(n,e,t,i,r){var s=ps(t)?zu:Or.current;return s=Jd(e,s),zd(e,r),t=$C(n,e,t,i,s,r),i=XC(),n!==null&&!hs?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~r,$a(n,e,r)):(ii&&i&&kC(e),e.flags|=1,Wr(n,e,t,r),e.child)}function sN(n,e,t,i,r){if(ps(t)){var s=!0;ox(e)}else s=!1;if(zd(e,r),e.stateNode===null)A0(n,e),LU(e,t,i),V1(e,t,i,r),i=!0;else if(n===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,c=t.contextType;typeof c=="object"&&c!==null?c=so(c):(c=ps(t)?zu:Or.current,c=Jd(e,c));var u=t.getDerivedStateFromProps,f=typeof u=="function"||typeof o.getSnapshotBeforeUpdate=="function";f||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==i||l!==c)&&ZR(e,o,i,c),Il=!1;var m=e.memoizedState;o.state=m,hx(e,i,o,r),l=e.memoizedState,a!==i||m!==l||fs.current||Il?(typeof u=="function"&&(j1(e,t,u,i),l=e.memoizedState),(a=Il||QR(e,t,a,i,m,l,c))?(f||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=i,e.memoizedState=l),o.props=i,o.state=l,o.context=c,i=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),i=!1)}else{o=e.stateNode,dU(n,e),a=e.memoizedProps,c=e.type===e.elementType?a:yo(e.type,a),o.props=c,f=e.pendingProps,m=o.context,l=t.contextType,typeof l=="object"&&l!==null?l=so(l):(l=ps(t)?zu:Or.current,l=Jd(e,l));var g=t.getDerivedStateFromProps;(u=typeof g=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==f||m!==l)&&ZR(e,o,i,l),Il=!1,m=e.memoizedState,o.state=m,hx(e,i,o,r);var x=e.memoizedState;a!==f||m!==x||fs.current||Il?(typeof g=="function"&&(j1(e,t,g,i),x=e.memoizedState),(c=Il||QR(e,t,c,i,m,x,l)||!1)?(u||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(i,x,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(i,x,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===n.memoizedProps&&m===n.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===n.memoizedProps&&m===n.memoizedState||(e.flags|=1024),e.memoizedProps=i,e.memoizedState=x),o.props=i,o.state=x,o.context=l,i=c):(typeof o.componentDidUpdate!="function"||a===n.memoizedProps&&m===n.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===n.memoizedProps&&m===n.memoizedState||(e.flags|=1024),i=!1)}return H1(n,e,t,i,s,r)}function H1(n,e,t,i,r,s){FU(n,e);var o=(e.flags&128)!==0;if(!i&&!o)return r&&GR(e,t,!1),$a(n,e,s);i=e.stateNode,nW.current=e;var a=o&&typeof t.getDerivedStateFromError!="function"?null:i.render();return e.flags|=1,n!==null&&o?(e.child=Zd(e,n.child,null,s),e.child=Zd(e,null,a,s)):Wr(n,e,a,s),e.memoizedState=i.state,r&&GR(e,t,!0),e.child}function jU(n){var e=n.stateNode;e.pendingContext?HR(n,e.pendingContext,e.pendingContext!==e.context):e.context&&HR(n,e.context,!1),HC(n,e.containerInfo)}function oN(n,e,t,i,r){return Qd(),UC(r),e.flags|=256,Wr(n,e,t,i),e.child}var G1={dehydrated:null,treeContext:null,retryLane:0};function W1(n){return{baseLanes:n,cachePool:null,transitions:null}}function VU(n,e,t){var i=e.pendingProps,r=ai.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=n!==null&&n.memoizedState===null?!1:(r&2)!==0),a?(s=!0,e.flags&=-129):(n===null||n.memoizedState!==null)&&(r|=1),Kn(ai,r&1),n===null)return U1(e),n=e.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?(e.mode&1?n.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=i.children,n=i.fallback,s?(i=e.mode,s=e.child,o={mode:"hidden",children:o},!(i&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=Q_(o,i,0,null),n=Nu(n,i,t,null),s.return=e,n.return=e,s.sibling=n,e.child=s,e.child.memoizedState=W1(t),e.memoizedState=G1,n):JC(e,o));if(r=n.memoizedState,r!==null&&(a=r.dehydrated,a!==null))return iW(n,e,o,i,a,r,t);if(s){s=i.fallback,o=e.mode,r=n.child,a=r.sibling;var l={mode:"hidden",children:i.children};return!(o&1)&&e.child!==r?(i=e.child,i.childLanes=0,i.pendingProps=l,e.deletions=null):(i=Ql(r,l),i.subtreeFlags=r.subtreeFlags&14680064),a!==null?s=Ql(a,s):(s=Nu(s,o,t,null),s.flags|=2),s.return=e,i.return=e,i.sibling=s,e.child=i,i=s,s=e.child,o=n.child.memoizedState,o=o===null?W1(t):{baseLanes:o.baseLanes|t,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=n.childLanes&~t,e.memoizedState=G1,i}return s=n.child,n=s.sibling,i=Ql(s,{mode:"visible",children:i.children}),!(e.mode&1)&&(i.lanes=t),i.return=e,i.sibling=null,n!==null&&(t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)),e.child=i,e.memoizedState=null,i}function JC(n,e){return e=Q_({mode:"visible",children:e},n.mode,0,null),e.return=n,n.child=e}function cv(n,e,t,i){return i!==null&&UC(i),Zd(e,n.child,null,t),n=JC(e,e.pendingProps.children),n.flags|=2,e.memoizedState=null,n}function iW(n,e,t,i,r,s,o){if(t)return e.flags&256?(e.flags&=-257,i=NS(Error(Be(422))),cv(n,e,o,i)):e.memoizedState!==null?(e.child=n.child,e.flags|=128,null):(s=i.fallback,r=e.mode,i=Q_({mode:"visible",children:i.children},r,0,null),s=Nu(s,r,o,null),s.flags|=2,i.return=e,s.return=e,i.sibling=s,e.child=i,e.mode&1&&Zd(e,n.child,null,o),e.child.memoizedState=W1(o),e.memoizedState=G1,s);if(!(e.mode&1))return cv(n,e,o,null);if(r.data==="$!"){if(i=r.nextSibling&&r.nextSibling.dataset,i)var a=i.dgst;return i=a,s=Error(Be(419)),i=NS(s,i,void 0),cv(n,e,o,i)}if(a=(o&n.childLanes)!==0,hs||a){if(i=tr,i!==null){switch(o&-o){case 4:r=2;break;case 16:r=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:r=32;break;case 536870912:r=268435456;break;default:r=0}r=r&(i.suspendedLanes|o)?0:r,r!==0&&r!==s.retryLane&&(s.retryLane=r,qa(n,r),Eo(i,n,r,-1))}return iA(),i=NS(Error(Be(421))),cv(n,e,o,i)}return r.data==="$?"?(e.flags|=128,e.child=n.child,e=gW.bind(null,n),r._reactRetry=e,null):(n=s.treeContext,Rs=Xl(r.nextSibling),Ls=e,ii=!0,wo=null,n!==null&&(eo[to++]=Aa,eo[to++]=Ma,eo[to++]=Hu,Aa=n.id,Ma=n.overflow,Hu=e),e=JC(e,i.children),e.flags|=4096,e)}function aN(n,e,t){n.lanes|=e;var i=n.alternate;i!==null&&(i.lanes|=e),F1(n.return,e,t)}function LS(n,e,t,i,r){var s=n.memoizedState;s===null?n.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:i,tail:t,tailMode:r}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=i,s.tail=t,s.tailMode=r)}function BU(n,e,t){var i=e.pendingProps,r=i.revealOrder,s=i.tail;if(Wr(n,e,i.children,t),i=ai.current,i&2)i=i&1|2,e.flags|=128;else{if(n!==null&&n.flags&128)e:for(n=e.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&aN(n,t,e);else if(n.tag===19)aN(n,t,e);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break e;for(;n.sibling===null;){if(n.return===null||n.return===e)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}i&=1}if(Kn(ai,i),!(e.mode&1))e.memoizedState=null;else switch(r){case"forwards":for(t=e.child,r=null;t!==null;)n=t.alternate,n!==null&&dx(n)===null&&(r=t),t=t.sibling;t=r,t===null?(r=e.child,e.child=null):(r=t.sibling,t.sibling=null),LS(e,!1,r,t,s);break;case"backwards":for(t=null,r=e.child,e.child=null;r!==null;){if(n=r.alternate,n!==null&&dx(n)===null){e.child=r;break}n=r.sibling,r.sibling=t,t=r,r=n}LS(e,!0,t,null,s);break;case"together":LS(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function A0(n,e){!(e.mode&1)&&n!==null&&(n.alternate=null,e.alternate=null,e.flags|=2)}function $a(n,e,t){if(n!==null&&(e.dependencies=n.dependencies),Wu|=e.lanes,!(t&e.childLanes))return null;if(n!==null&&e.child!==n.child)throw Error(Be(153));if(e.child!==null){for(n=e.child,t=Ql(n,n.pendingProps),e.child=t,t.return=e;n.sibling!==null;)n=n.sibling,t=t.sibling=Ql(n,n.pendingProps),t.return=e;t.sibling=null}return e.child}function rW(n,e,t){switch(e.tag){case 3:jU(e),Qd();break;case 5:fU(e);break;case 1:ps(e.type)&&ox(e);break;case 4:HC(e,e.stateNode.containerInfo);break;case 10:var i=e.type._context,r=e.memoizedProps.value;Kn(cx,i._currentValue),i._currentValue=r;break;case 13:if(i=e.memoizedState,i!==null)return i.dehydrated!==null?(Kn(ai,ai.current&1),e.flags|=128,null):t&e.child.childLanes?VU(n,e,t):(Kn(ai,ai.current&1),n=$a(n,e,t),n!==null?n.sibling:null);Kn(ai,ai.current&1);break;case 19:if(i=(t&e.childLanes)!==0,n.flags&128){if(i)return BU(n,e,t);e.flags|=128}if(r=e.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),Kn(ai,ai.current),i)break;return null;case 22:case 23:return e.lanes=0,UU(n,e,t)}return $a(n,e,t)}var zU,q1,HU,GU;zU=function(n,e){for(var t=e.child;t!==null;){if(t.tag===5||t.tag===6)n.appendChild(t.stateNode);else if(t.tag!==4&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return;t=t.return}t.sibling.return=t.return,t=t.sibling}};q1=function(){};HU=function(n,e,t,i){var r=n.memoizedProps;if(r!==i){n=e.stateNode,Su(Ko.current);var s=null;switch(t){case"input":r=p1(n,r),i=p1(n,i),s=[];break;case"select":r=di({},r,{value:void 0}),i=di({},i,{value:void 0}),s=[];break;case"textarea":r=y1(n,r),i=y1(n,i),s=[];break;default:typeof r.onClick!="function"&&typeof i.onClick=="function"&&(n.onclick=rx)}x1(t,i);var o;t=null;for(c in r)if(!i.hasOwnProperty(c)&&r.hasOwnProperty(c)&&r[c]!=null)if(c==="style"){var a=r[c];for(o in a)a.hasOwnProperty(o)&&(t||(t={}),t[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(Mm.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in i){var l=i[c];if(a=r?.[c],i.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(t||(t={}),t[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(t||(t={}),t[o]=l[o])}else t||(s||(s=[]),s.push(c,t)),t=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(Mm.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&Jn("scroll",n),s||a===l||(s=[])):(s=s||[]).push(c,l))}t&&(s=s||[]).push("style",t);var c=s;(e.updateQueue=c)&&(e.flags|=4)}};GU=function(n,e,t,i){t!==i&&(e.flags|=4)};function gp(n,e){if(!ii)switch(n.tailMode){case"hidden":e=n.tail;for(var t=null;e!==null;)e.alternate!==null&&(t=e),e=e.sibling;t===null?n.tail=null:t.sibling=null;break;case"collapsed":t=n.tail;for(var i=null;t!==null;)t.alternate!==null&&(i=t),t=t.sibling;i===null?e||n.tail===null?n.tail=null:n.tail.sibling=null:i.sibling=null}}function wr(n){var e=n.alternate!==null&&n.alternate.child===n.child,t=0,i=0;if(e)for(var r=n.child;r!==null;)t|=r.lanes|r.childLanes,i|=r.subtreeFlags&14680064,i|=r.flags&14680064,r.return=n,r=r.sibling;else for(r=n.child;r!==null;)t|=r.lanes|r.childLanes,i|=r.subtreeFlags,i|=r.flags,r.return=n,r=r.sibling;return n.subtreeFlags|=i,n.childLanes=t,e}function sW(n,e,t){var i=e.pendingProps;switch(OC(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return wr(e),null;case 1:return ps(e.type)&&sx(),wr(e),null;case 3:return i=e.stateNode,ef(),ei(fs),ei(Or),WC(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(n===null||n.child===null)&&(av(e)?e.flags|=4:n===null||n.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,wo!==null&&(eE(wo),wo=null))),q1(n,e),wr(e),null;case 5:GC(e);var r=Su(Vm.current);if(t=e.type,n!==null&&e.stateNode!=null)HU(n,e,t,i,r),n.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!i){if(e.stateNode===null)throw Error(Be(166));return wr(e),null}if(n=Su(Ko.current),av(e)){i=e.stateNode,t=e.type;var s=e.memoizedProps;switch(i[Go]=e,i[Fm]=s,n=(e.mode&1)!==0,t){case"dialog":Jn("cancel",i),Jn("close",i);break;case"iframe":case"object":case"embed":Jn("load",i);break;case"video":case"audio":for(r=0;r<Bp.length;r++)Jn(Bp[r],i);break;case"source":Jn("error",i);break;case"img":case"image":case"link":Jn("error",i),Jn("load",i);break;case"details":Jn("toggle",i);break;case"input":gR(i,s),Jn("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!s.multiple},Jn("invalid",i);break;case"textarea":vR(i,s),Jn("invalid",i)}x1(t,s),r=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?i.textContent!==a&&(s.suppressHydrationWarning!==!0&&ov(i.textContent,a,n),r=["children",a]):typeof a=="number"&&i.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&ov(i.textContent,a,n),r=["children",""+a]):Mm.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&Jn("scroll",i)}switch(t){case"input":Qy(i),yR(i,s,!0);break;case"textarea":Qy(i),xR(i);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(i.onclick=rx)}i=r,e.updateQueue=i,i!==null&&(e.flags|=4)}else{o=r.nodeType===9?r:r.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=vO(t)),n==="http://www.w3.org/1999/xhtml"?t==="script"?(n=o.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof i.is=="string"?n=o.createElement(t,{is:i.is}):(n=o.createElement(t),t==="select"&&(o=n,i.multiple?o.multiple=!0:i.size&&(o.size=i.size))):n=o.createElementNS(n,t),n[Go]=e,n[Fm]=i,zU(n,e,!1,!1),e.stateNode=n;e:{switch(o=_1(t,i),t){case"dialog":Jn("cancel",n),Jn("close",n),r=i;break;case"iframe":case"object":case"embed":Jn("load",n),r=i;break;case"video":case"audio":for(r=0;r<Bp.length;r++)Jn(Bp[r],n);r=i;break;case"source":Jn("error",n),r=i;break;case"img":case"image":case"link":Jn("error",n),Jn("load",n),r=i;break;case"details":Jn("toggle",n),r=i;break;case"input":gR(n,i),r=p1(n,i),Jn("invalid",n);break;case"option":r=i;break;case"select":n._wrapperState={wasMultiple:!!i.multiple},r=di({},i,{value:void 0}),Jn("invalid",n);break;case"textarea":vR(n,i),r=y1(n,i),Jn("invalid",n);break;default:r=i}x1(t,r),a=r;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?wO(n,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&xO(n,l)):s==="children"?typeof l=="string"?(t!=="textarea"||l!=="")&&Im(n,l):typeof l=="number"&&Im(n,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Mm.hasOwnProperty(s)?l!=null&&s==="onScroll"&&Jn("scroll",n):l!=null&&wC(n,s,l,o))}switch(t){case"input":Qy(n),yR(n,i,!1);break;case"textarea":Qy(n),xR(n);break;case"option":i.value!=null&&n.setAttribute("value",""+rc(i.value));break;case"select":n.multiple=!!i.multiple,s=i.value,s!=null?Fd(n,!!i.multiple,s,!1):i.defaultValue!=null&&Fd(n,!!i.multiple,i.defaultValue,!0);break;default:typeof r.onClick=="function"&&(n.onclick=rx)}switch(t){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return wr(e),null;case 6:if(n&&e.stateNode!=null)GU(n,e,n.memoizedProps,i);else{if(typeof i!="string"&&e.stateNode===null)throw Error(Be(166));if(t=Su(Vm.current),Su(Ko.current),av(e)){if(i=e.stateNode,t=e.memoizedProps,i[Go]=e,(s=i.nodeValue!==t)&&(n=Ls,n!==null))switch(n.tag){case 3:ov(i.nodeValue,t,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&ov(i.nodeValue,t,(n.mode&1)!==0)}s&&(e.flags|=4)}else i=(t.nodeType===9?t:t.ownerDocument).createTextNode(i),i[Go]=e,e.stateNode=i}return wr(e),null;case 13:if(ei(ai),i=e.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(ii&&Rs!==null&&e.mode&1&&!(e.flags&128))lU(),Qd(),e.flags|=98560,s=!1;else if(s=av(e),i!==null&&i.dehydrated!==null){if(n===null){if(!s)throw Error(Be(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(Be(317));s[Go]=e}else Qd(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;wr(e),s=!1}else wo!==null&&(eE(wo),wo=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=t,e):(i=i!==null,i!==(n!==null&&n.memoizedState!==null)&&i&&(e.child.flags|=8192,e.mode&1&&(n===null||ai.current&1?Gi===0&&(Gi=3):iA())),e.updateQueue!==null&&(e.flags|=4),wr(e),null);case 4:return ef(),q1(n,e),n===null&&Om(e.stateNode.containerInfo),wr(e),null;case 10:return VC(e.type._context),wr(e),null;case 17:return ps(e.type)&&sx(),wr(e),null;case 19:if(ei(ai),s=e.memoizedState,s===null)return wr(e),null;if(i=(e.flags&128)!==0,o=s.rendering,o===null)if(i)gp(s,!1);else{if(Gi!==0||n!==null&&n.flags&128)for(n=e.child;n!==null;){if(o=dx(n),o!==null){for(e.flags|=128,gp(s,!1),i=o.updateQueue,i!==null&&(e.updateQueue=i,e.flags|=4),e.subtreeFlags=0,i=t,t=e.child;t!==null;)s=t,n=i,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=n,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,n=o.dependencies,s.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),t=t.sibling;return Kn(ai,ai.current&1|2),e.child}n=n.sibling}s.tail!==null&&Ei()>nf&&(e.flags|=128,i=!0,gp(s,!1),e.lanes=4194304)}else{if(!i)if(n=dx(o),n!==null){if(e.flags|=128,i=!0,t=n.updateQueue,t!==null&&(e.updateQueue=t,e.flags|=4),gp(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!ii)return wr(e),null}else 2*Ei()-s.renderingStartTime>nf&&t!==1073741824&&(e.flags|=128,i=!0,gp(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(t=s.last,t!==null?t.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=Ei(),e.sibling=null,t=ai.current,Kn(ai,i?t&1|2:t&1),e):(wr(e),null);case 22:case 23:return nA(),i=e.memoizedState!==null,n!==null&&n.memoizedState!==null!==i&&(e.flags|=8192),i&&e.mode&1?Is&1073741824&&(wr(e),e.subtreeFlags&6&&(e.flags|=8192)):wr(e),null;case 24:return null;case 25:return null}throw Error(Be(156,e.tag))}function oW(n,e){switch(OC(e),e.tag){case 1:return ps(e.type)&&sx(),n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 3:return ef(),ei(fs),ei(Or),WC(),n=e.flags,n&65536&&!(n&128)?(e.flags=n&-65537|128,e):null;case 5:return GC(e),null;case 13:if(ei(ai),n=e.memoizedState,n!==null&&n.dehydrated!==null){if(e.alternate===null)throw Error(Be(340));Qd()}return n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 19:return ei(ai),null;case 4:return ef(),null;case 10:return VC(e.type._context),null;case 22:case 23:return nA(),null;case 24:return null;default:return null}}var uv=!1,Mr=!1,aW=typeof WeakSet=="function"?WeakSet:Set,vt=null;function wd(n,e){var t=n.ref;if(t!==null)if(typeof t=="function")try{t(null)}catch(i){gi(n,e,i)}else t.current=null}function $1(n,e,t){try{t()}catch(i){gi(n,e,i)}}var lN=!1;function lW(n,e){if(P1=tx,n=YO(),DC(n)){if("selectionStart"in n)var t={start:n.selectionStart,end:n.selectionEnd};else e:{t=(t=n.ownerDocument)&&t.defaultView||window;var i=t.getSelection&&t.getSelection();if(i&&i.rangeCount!==0){t=i.anchorNode;var r=i.anchorOffset,s=i.focusNode;i=i.focusOffset;try{t.nodeType,s.nodeType}catch{t=null;break e}var o=0,a=-1,l=-1,c=0,u=0,f=n,m=null;t:for(;;){for(var g;f!==t||r!==0&&f.nodeType!==3||(a=o+r),f!==s||i!==0&&f.nodeType!==3||(l=o+i),f.nodeType===3&&(o+=f.nodeValue.length),(g=f.firstChild)!==null;)m=f,f=g;for(;;){if(f===n)break t;if(m===t&&++c===r&&(a=o),m===s&&++u===i&&(l=o),(g=f.nextSibling)!==null)break;f=m,m=f.parentNode}f=g}t=a===-1||l===-1?null:{start:a,end:l}}else t=null}t=t||{start:0,end:0}}else t=null;for(R1={focusedElem:n,selectionRange:t},tx=!1,vt=e;vt!==null;)if(e=vt,n=e.child,(e.subtreeFlags&1028)!==0&&n!==null)n.return=e,vt=n;else for(;vt!==null;){e=vt;try{var x=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(x!==null){var b=x.memoizedProps,w=x.memoizedState,v=e.stateNode,S=v.getSnapshotBeforeUpdate(e.elementType===e.type?b:yo(e.type,b),w);v.__reactInternalSnapshotBeforeUpdate=S}break;case 3:var E=e.stateNode.containerInfo;E.nodeType===1?E.textContent="":E.nodeType===9&&E.documentElement&&E.removeChild(E.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Be(163))}}catch(C){gi(e,e.return,C)}if(n=e.sibling,n!==null){n.return=e.return,vt=n;break}vt=e.return}return x=lN,lN=!1,x}function om(n,e,t){var i=e.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var r=i=i.next;do{if((r.tag&n)===n){var s=r.destroy;r.destroy=void 0,s!==void 0&&$1(e,t,s)}r=r.next}while(r!==i)}}function K_(n,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var t=e=e.next;do{if((t.tag&n)===n){var i=t.create;t.destroy=i()}t=t.next}while(t!==e)}}function X1(n){var e=n.ref;if(e!==null){var t=n.stateNode;switch(n.tag){case 5:n=t;break;default:n=t}typeof e=="function"?e(n):e.current=n}}function WU(n){var e=n.alternate;e!==null&&(n.alternate=null,WU(e)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(e=n.stateNode,e!==null&&(delete e[Go],delete e[Fm],delete e[D1],delete e[GG],delete e[WG])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function qU(n){return n.tag===5||n.tag===3||n.tag===4}function cN(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||qU(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function Y1(n,e,t){var i=n.tag;if(i===5||i===6)n=n.stateNode,e?t.nodeType===8?t.parentNode.insertBefore(n,e):t.insertBefore(n,e):(t.nodeType===8?(e=t.parentNode,e.insertBefore(n,t)):(e=t,e.appendChild(n)),t=t._reactRootContainer,t!=null||e.onclick!==null||(e.onclick=rx));else if(i!==4&&(n=n.child,n!==null))for(Y1(n,e,t),n=n.sibling;n!==null;)Y1(n,e,t),n=n.sibling}function K1(n,e,t){var i=n.tag;if(i===5||i===6)n=n.stateNode,e?t.insertBefore(n,e):t.appendChild(n);else if(i!==4&&(n=n.child,n!==null))for(K1(n,e,t),n=n.sibling;n!==null;)K1(n,e,t),n=n.sibling}var rr=null,xo=!1;function ml(n,e,t){for(t=t.child;t!==null;)$U(n,e,t),t=t.sibling}function $U(n,e,t){if(Yo&&typeof Yo.onCommitFiberUnmount=="function")try{Yo.onCommitFiberUnmount(z_,t)}catch{}switch(t.tag){case 5:Mr||wd(t,e);case 6:var i=rr,r=xo;rr=null,ml(n,e,t),rr=i,xo=r,rr!==null&&(xo?(n=rr,t=t.stateNode,n.nodeType===8?n.parentNode.removeChild(t):n.removeChild(t)):rr.removeChild(t.stateNode));break;case 18:rr!==null&&(xo?(n=rr,t=t.stateNode,n.nodeType===8?CS(n.parentNode,t):n.nodeType===1&&CS(n,t),Lm(n)):CS(rr,t.stateNode));break;case 4:i=rr,r=xo,rr=t.stateNode.containerInfo,xo=!0,ml(n,e,t),rr=i,xo=r;break;case 0:case 11:case 14:case 15:if(!Mr&&(i=t.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){r=i=i.next;do{var s=r,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&$1(t,e,o),r=r.next}while(r!==i)}ml(n,e,t);break;case 1:if(!Mr&&(wd(t,e),i=t.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=t.memoizedProps,i.state=t.memoizedState,i.componentWillUnmount()}catch(a){gi(t,e,a)}ml(n,e,t);break;case 21:ml(n,e,t);break;case 22:t.mode&1?(Mr=(i=Mr)||t.memoizedState!==null,ml(n,e,t),Mr=i):ml(n,e,t);break;default:ml(n,e,t)}}function uN(n){var e=n.updateQueue;if(e!==null){n.updateQueue=null;var t=n.stateNode;t===null&&(t=n.stateNode=new aW),e.forEach(function(i){var r=yW.bind(null,n,i);t.has(i)||(t.add(i),i.then(r,r))})}}function fo(n,e){var t=e.deletions;if(t!==null)for(var i=0;i<t.length;i++){var r=t[i];try{var s=n,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:rr=a.stateNode,xo=!1;break e;case 3:rr=a.stateNode.containerInfo,xo=!0;break e;case 4:rr=a.stateNode.containerInfo,xo=!0;break e}a=a.return}if(rr===null)throw Error(Be(160));$U(s,o,r),rr=null,xo=!1;var l=r.alternate;l!==null&&(l.return=null),r.return=null}catch(c){gi(r,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)XU(e,n),e=e.sibling}function XU(n,e){var t=n.alternate,i=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(fo(e,n),zo(n),i&4){try{om(3,n,n.return),K_(3,n)}catch(b){gi(n,n.return,b)}try{om(5,n,n.return)}catch(b){gi(n,n.return,b)}}break;case 1:fo(e,n),zo(n),i&512&&t!==null&&wd(t,t.return);break;case 5:if(fo(e,n),zo(n),i&512&&t!==null&&wd(t,t.return),n.flags&32){var r=n.stateNode;try{Im(r,"")}catch(b){gi(n,n.return,b)}}if(i&4&&(r=n.stateNode,r!=null)){var s=n.memoizedProps,o=t!==null?t.memoizedProps:s,a=n.type,l=n.updateQueue;if(n.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&gO(r,s),_1(a,o);var c=_1(a,s);for(o=0;o<l.length;o+=2){var u=l[o],f=l[o+1];u==="style"?wO(r,f):u==="dangerouslySetInnerHTML"?xO(r,f):u==="children"?Im(r,f):wC(r,u,f,c)}switch(a){case"input":m1(r,s);break;case"textarea":yO(r,s);break;case"select":var m=r._wrapperState.wasMultiple;r._wrapperState.wasMultiple=!!s.multiple;var g=s.value;g!=null?Fd(r,!!s.multiple,g,!1):m!==!!s.multiple&&(s.defaultValue!=null?Fd(r,!!s.multiple,s.defaultValue,!0):Fd(r,!!s.multiple,s.multiple?[]:"",!1))}r[Fm]=s}catch(b){gi(n,n.return,b)}}break;case 6:if(fo(e,n),zo(n),i&4){if(n.stateNode===null)throw Error(Be(162));r=n.stateNode,s=n.memoizedProps;try{r.nodeValue=s}catch(b){gi(n,n.return,b)}}break;case 3:if(fo(e,n),zo(n),i&4&&t!==null&&t.memoizedState.isDehydrated)try{Lm(e.containerInfo)}catch(b){gi(n,n.return,b)}break;case 4:fo(e,n),zo(n);break;case 13:fo(e,n),zo(n),r=n.child,r.flags&8192&&(s=r.memoizedState!==null,r.stateNode.isHidden=s,!s||r.alternate!==null&&r.alternate.memoizedState!==null||(eA=Ei())),i&4&&uN(n);break;case 22:if(u=t!==null&&t.memoizedState!==null,n.mode&1?(Mr=(c=Mr)||u,fo(e,n),Mr=c):fo(e,n),zo(n),i&8192){if(c=n.memoizedState!==null,(n.stateNode.isHidden=c)&&!u&&n.mode&1)for(vt=n,u=n.child;u!==null;){for(f=vt=u;vt!==null;){switch(m=vt,g=m.child,m.tag){case 0:case 11:case 14:case 15:om(4,m,m.return);break;case 1:wd(m,m.return);var x=m.stateNode;if(typeof x.componentWillUnmount=="function"){i=m,t=m.return;try{e=i,x.props=e.memoizedProps,x.state=e.memoizedState,x.componentWillUnmount()}catch(b){gi(i,t,b)}}break;case 5:wd(m,m.return);break;case 22:if(m.memoizedState!==null){dN(f);continue}}g!==null?(g.return=m,vt=g):dN(f)}u=u.sibling}e:for(u=null,f=n;;){if(f.tag===5){if(u===null){u=f;try{r=f.stateNode,c?(s=r.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=f.stateNode,l=f.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=_O("display",o))}catch(b){gi(n,n.return,b)}}}else if(f.tag===6){if(u===null)try{f.stateNode.nodeValue=c?"":f.memoizedProps}catch(b){gi(n,n.return,b)}}else if((f.tag!==22&&f.tag!==23||f.memoizedState===null||f===n)&&f.child!==null){f.child.return=f,f=f.child;continue}if(f===n)break e;for(;f.sibling===null;){if(f.return===null||f.return===n)break e;u===f&&(u=null),f=f.return}u===f&&(u=null),f.sibling.return=f.return,f=f.sibling}}break;case 19:fo(e,n),zo(n),i&4&&uN(n);break;case 21:break;default:fo(e,n),zo(n)}}function zo(n){var e=n.flags;if(e&2){try{e:{for(var t=n.return;t!==null;){if(qU(t)){var i=t;break e}t=t.return}throw Error(Be(160))}switch(i.tag){case 5:var r=i.stateNode;i.flags&32&&(Im(r,""),i.flags&=-33);var s=cN(n);K1(n,s,r);break;case 3:case 4:var o=i.stateNode.containerInfo,a=cN(n);Y1(n,a,o);break;default:throw Error(Be(161))}}catch(l){gi(n,n.return,l)}n.flags&=-3}e&4096&&(n.flags&=-4097)}function cW(n,e,t){vt=n,YU(n)}function YU(n,e,t){for(var i=(n.mode&1)!==0;vt!==null;){var r=vt,s=r.child;if(r.tag===22&&i){var o=r.memoizedState!==null||uv;if(!o){var a=r.alternate,l=a!==null&&a.memoizedState!==null||Mr;a=uv;var c=Mr;if(uv=o,(Mr=l)&&!c)for(vt=r;vt!==null;)o=vt,l=o.child,o.tag===22&&o.memoizedState!==null?fN(r):l!==null?(l.return=o,vt=l):fN(r);for(;s!==null;)vt=s,YU(s),s=s.sibling;vt=r,uv=a,Mr=c}hN(n)}else r.subtreeFlags&8772&&s!==null?(s.return=r,vt=s):hN(n)}}function hN(n){for(;vt!==null;){var e=vt;if(e.flags&8772){var t=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Mr||K_(5,e);break;case 1:var i=e.stateNode;if(e.flags&4&&!Mr)if(t===null)i.componentDidMount();else{var r=e.elementType===e.type?t.memoizedProps:yo(e.type,t.memoizedProps);i.componentDidUpdate(r,t.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&YR(e,s,i);break;case 3:var o=e.updateQueue;if(o!==null){if(t=null,e.child!==null)switch(e.child.tag){case 5:t=e.child.stateNode;break;case 1:t=e.child.stateNode}YR(e,o,t)}break;case 5:var a=e.stateNode;if(t===null&&e.flags&4){t=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&t.focus();break;case"img":l.src&&(t.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var u=c.memoizedState;if(u!==null){var f=u.dehydrated;f!==null&&Lm(f)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Be(163))}Mr||e.flags&512&&X1(e)}catch(m){gi(e,e.return,m)}}if(e===n){vt=null;break}if(t=e.sibling,t!==null){t.return=e.return,vt=t;break}vt=e.return}}function dN(n){for(;vt!==null;){var e=vt;if(e===n){vt=null;break}var t=e.sibling;if(t!==null){t.return=e.return,vt=t;break}vt=e.return}}function fN(n){for(;vt!==null;){var e=vt;try{switch(e.tag){case 0:case 11:case 15:var t=e.return;try{K_(4,e)}catch(l){gi(e,t,l)}break;case 1:var i=e.stateNode;if(typeof i.componentDidMount=="function"){var r=e.return;try{i.componentDidMount()}catch(l){gi(e,r,l)}}var s=e.return;try{X1(e)}catch(l){gi(e,s,l)}break;case 5:var o=e.return;try{X1(e)}catch(l){gi(e,o,l)}}}catch(l){gi(e,e.return,l)}if(e===n){vt=null;break}var a=e.sibling;if(a!==null){a.return=e.return,vt=a;break}vt=e.return}}var uW=Math.ceil,mx=nl.ReactCurrentDispatcher,QC=nl.ReactCurrentOwner,ro=nl.ReactCurrentBatchConfig,Mn=0,tr=null,Ui=null,cr=0,Is=0,bd=wc(0),Gi=0,Gm=null,Wu=0,J_=0,ZC=0,am=null,as=null,eA=0,nf=1/0,Sa=null,gx=!1,J1=null,Kl=null,hv=!1,Bl=null,yx=0,lm=0,Q1=null,M0=-1,I0=0;function $r(){return Mn&6?Ei():M0!==-1?M0:M0=Ei()}function Jl(n){return n.mode&1?Mn&2&&cr!==0?cr&-cr:$G.transition!==null?(I0===0&&(I0=LO()),I0):(n=Hn,n!==0||(n=window.event,n=n===void 0?16:VO(n.type)),n):1}function Eo(n,e,t,i){if(50<lm)throw lm=0,Q1=null,Error(Be(185));Pg(n,t,i),(!(Mn&2)||n!==tr)&&(n===tr&&(!(Mn&2)&&(J_|=t),Gi===4&&Ll(n,cr)),ms(n,i),t===1&&Mn===0&&!(e.mode&1)&&(nf=Ei()+500,$_&&bc()))}function ms(n,e){var t=n.callbackNode;$H(n,e);var i=ex(n,n===tr?cr:0);if(i===0)t!==null&&bR(t),n.callbackNode=null,n.callbackPriority=0;else if(e=i&-i,n.callbackPriority!==e){if(t!=null&&bR(t),e===1)n.tag===0?qG(pN.bind(null,n)):sU(pN.bind(null,n)),zG(function(){!(Mn&6)&&bc()}),t=null;else{switch(DO(i)){case 1:t=CC;break;case 4:t=RO;break;case 16:t=Z0;break;case 536870912:t=NO;break;default:t=Z0}t=iF(t,KU.bind(null,n))}n.callbackPriority=e,n.callbackNode=t}}function KU(n,e){if(M0=-1,I0=0,Mn&6)throw Error(Be(327));var t=n.callbackNode;if(Hd()&&n.callbackNode!==t)return null;var i=ex(n,n===tr?cr:0);if(i===0)return null;if(i&30||i&n.expiredLanes||e)e=vx(n,i);else{e=i;var r=Mn;Mn|=2;var s=QU();(tr!==n||cr!==e)&&(Sa=null,nf=Ei()+500,Ru(n,e));do try{fW();break}catch(a){JU(n,a)}while(!0);jC(),mx.current=s,Mn=r,Ui!==null?e=0:(tr=null,cr=0,e=Gi)}if(e!==0){if(e===2&&(r=E1(n),r!==0&&(i=r,e=Z1(n,r))),e===1)throw t=Gm,Ru(n,0),Ll(n,i),ms(n,Ei()),t;if(e===6)Ll(n,i);else{if(r=n.current.alternate,!(i&30)&&!hW(r)&&(e=vx(n,i),e===2&&(s=E1(n),s!==0&&(i=s,e=Z1(n,s))),e===1))throw t=Gm,Ru(n,0),Ll(n,i),ms(n,Ei()),t;switch(n.finishedWork=r,n.finishedLanes=i,e){case 0:case 1:throw Error(Be(345));case 2:du(n,as,Sa);break;case 3:if(Ll(n,i),(i&130023424)===i&&(e=eA+500-Ei(),10<e)){if(ex(n,0)!==0)break;if(r=n.suspendedLanes,(r&i)!==i){$r(),n.pingedLanes|=n.suspendedLanes&r;break}n.timeoutHandle=L1(du.bind(null,n,as,Sa),e);break}du(n,as,Sa);break;case 4:if(Ll(n,i),(i&4194240)===i)break;for(e=n.eventTimes,r=-1;0<i;){var o=31-To(i);s=1<<o,o=e[o],o>r&&(r=o),i&=~s}if(i=r,i=Ei()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*uW(i/1960))-i,10<i){n.timeoutHandle=L1(du.bind(null,n,as,Sa),i);break}du(n,as,Sa);break;case 5:du(n,as,Sa);break;default:throw Error(Be(329))}}}return ms(n,Ei()),n.callbackNode===t?KU.bind(null,n):null}function Z1(n,e){var t=am;return n.current.memoizedState.isDehydrated&&(Ru(n,e).flags|=256),n=vx(n,e),n!==2&&(e=as,as=t,e!==null&&eE(e)),n}function eE(n){as===null?as=n:as.push.apply(as,n)}function hW(n){for(var e=n;;){if(e.flags&16384){var t=e.updateQueue;if(t!==null&&(t=t.stores,t!==null))for(var i=0;i<t.length;i++){var r=t[i],s=r.getSnapshot;r=r.value;try{if(!Ao(s(),r))return!1}catch{return!1}}}if(t=e.child,e.subtreeFlags&16384&&t!==null)t.return=e,e=t;else{if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Ll(n,e){for(e&=~ZC,e&=~J_,n.suspendedLanes|=e,n.pingedLanes&=~e,n=n.expirationTimes;0<e;){var t=31-To(e),i=1<<t;n[t]=-1,e&=~i}}function pN(n){if(Mn&6)throw Error(Be(327));Hd();var e=ex(n,0);if(!(e&1))return ms(n,Ei()),null;var t=vx(n,e);if(n.tag!==0&&t===2){var i=E1(n);i!==0&&(e=i,t=Z1(n,i))}if(t===1)throw t=Gm,Ru(n,0),Ll(n,e),ms(n,Ei()),t;if(t===6)throw Error(Be(345));return n.finishedWork=n.current.alternate,n.finishedLanes=e,du(n,as,Sa),ms(n,Ei()),null}function tA(n,e){var t=Mn;Mn|=1;try{return n(e)}finally{Mn=t,Mn===0&&(nf=Ei()+500,$_&&bc())}}function qu(n){Bl!==null&&Bl.tag===0&&!(Mn&6)&&Hd();var e=Mn;Mn|=1;var t=ro.transition,i=Hn;try{if(ro.transition=null,Hn=1,n)return n()}finally{Hn=i,ro.transition=t,Mn=e,!(Mn&6)&&bc()}}function nA(){Is=bd.current,ei(bd)}function Ru(n,e){n.finishedWork=null,n.finishedLanes=0;var t=n.timeoutHandle;if(t!==-1&&(n.timeoutHandle=-1,BG(t)),Ui!==null)for(t=Ui.return;t!==null;){var i=t;switch(OC(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&sx();break;case 3:ef(),ei(fs),ei(Or),WC();break;case 5:GC(i);break;case 4:ef();break;case 13:ei(ai);break;case 19:ei(ai);break;case 10:VC(i.type._context);break;case 22:case 23:nA()}t=t.return}if(tr=n,Ui=n=Ql(n.current,null),cr=Is=e,Gi=0,Gm=null,ZC=J_=Wu=0,as=am=null,bu!==null){for(e=0;e<bu.length;e++)if(t=bu[e],i=t.interleaved,i!==null){t.interleaved=null;var r=i.next,s=t.pending;if(s!==null){var o=s.next;s.next=r,i.next=o}t.pending=i}bu=null}return n}function JU(n,e){do{var t=Ui;try{if(jC(),E0.current=px,fx){for(var i=ui.memoizedState;i!==null;){var r=i.queue;r!==null&&(r.pending=null),i=i.next}fx=!1}if(Gu=0,er=Hi=ui=null,sm=!1,Bm=0,QC.current=null,t===null||t.return===null){Gi=1,Gm=e,Ui=null;break}e:{var s=n,o=t.return,a=t,l=e;if(e=cr,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,u=a,f=u.tag;if(!(u.mode&1)&&(f===0||f===11||f===15)){var m=u.alternate;m?(u.updateQueue=m.updateQueue,u.memoizedState=m.memoizedState,u.lanes=m.lanes):(u.updateQueue=null,u.memoizedState=null)}var g=tN(o);if(g!==null){g.flags&=-257,nN(g,o,a,s,e),g.mode&1&&eN(s,c,e),e=g,l=c;var x=e.updateQueue;if(x===null){var b=new Set;b.add(l),e.updateQueue=b}else x.add(l);break e}else{if(!(e&1)){eN(s,c,e),iA();break e}l=Error(Be(426))}}else if(ii&&a.mode&1){var w=tN(o);if(w!==null){!(w.flags&65536)&&(w.flags|=256),nN(w,o,a,s,e),UC(tf(l,a));break e}}s=l=tf(l,a),Gi!==4&&(Gi=2),am===null?am=[s]:am.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var v=DU(s,l,e);XR(s,v);break e;case 1:a=l;var S=s.type,E=s.stateNode;if(!(s.flags&128)&&(typeof S.getDerivedStateFromError=="function"||E!==null&&typeof E.componentDidCatch=="function"&&(Kl===null||!Kl.has(E)))){s.flags|=65536,e&=-e,s.lanes|=e;var C=kU(s,a,e);XR(s,C);break e}}s=s.return}while(s!==null)}eF(t)}catch(V){e=V,Ui===t&&t!==null&&(Ui=t=t.return);continue}break}while(!0)}function QU(){var n=mx.current;return mx.current=px,n===null?px:n}function iA(){(Gi===0||Gi===3||Gi===2)&&(Gi=4),tr===null||!(Wu&268435455)&&!(J_&268435455)||Ll(tr,cr)}function vx(n,e){var t=Mn;Mn|=2;var i=QU();(tr!==n||cr!==e)&&(Sa=null,Ru(n,e));do try{dW();break}catch(r){JU(n,r)}while(!0);if(jC(),Mn=t,mx.current=i,Ui!==null)throw Error(Be(261));return tr=null,cr=0,Gi}function dW(){for(;Ui!==null;)ZU(Ui)}function fW(){for(;Ui!==null&&!FH();)ZU(Ui)}function ZU(n){var e=nF(n.alternate,n,Is);n.memoizedProps=n.pendingProps,e===null?eF(n):Ui=e,QC.current=null}function eF(n){var e=n;do{var t=e.alternate;if(n=e.return,e.flags&32768){if(t=oW(t,e),t!==null){t.flags&=32767,Ui=t;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{Gi=6,Ui=null;return}}else if(t=sW(t,e,Is),t!==null){Ui=t;return}if(e=e.sibling,e!==null){Ui=e;return}Ui=e=n}while(e!==null);Gi===0&&(Gi=5)}function du(n,e,t){var i=Hn,r=ro.transition;try{ro.transition=null,Hn=1,pW(n,e,t,i)}finally{ro.transition=r,Hn=i}return null}function pW(n,e,t,i){do Hd();while(Bl!==null);if(Mn&6)throw Error(Be(327));t=n.finishedWork;var r=n.finishedLanes;if(t===null)return null;if(n.finishedWork=null,n.finishedLanes=0,t===n.current)throw Error(Be(177));n.callbackNode=null,n.callbackPriority=0;var s=t.lanes|t.childLanes;if(XH(n,s),n===tr&&(Ui=tr=null,cr=0),!(t.subtreeFlags&2064)&&!(t.flags&2064)||hv||(hv=!0,iF(Z0,function(){return Hd(),null})),s=(t.flags&15990)!==0,t.subtreeFlags&15990||s){s=ro.transition,ro.transition=null;var o=Hn;Hn=1;var a=Mn;Mn|=4,QC.current=null,lW(n,t),XU(t,n),DG(R1),tx=!!P1,R1=P1=null,n.current=t,cW(t),jH(),Mn=a,Hn=o,ro.transition=s}else n.current=t;if(hv&&(hv=!1,Bl=n,yx=r),s=n.pendingLanes,s===0&&(Kl=null),zH(t.stateNode),ms(n,Ei()),e!==null)for(i=n.onRecoverableError,t=0;t<e.length;t++)r=e[t],i(r.value,{componentStack:r.stack,digest:r.digest});if(gx)throw gx=!1,n=J1,J1=null,n;return yx&1&&n.tag!==0&&Hd(),s=n.pendingLanes,s&1?n===Q1?lm++:(lm=0,Q1=n):lm=0,bc(),null}function Hd(){if(Bl!==null){var n=DO(yx),e=ro.transition,t=Hn;try{if(ro.transition=null,Hn=16>n?16:n,Bl===null)var i=!1;else{if(n=Bl,Bl=null,yx=0,Mn&6)throw Error(Be(331));var r=Mn;for(Mn|=4,vt=n.current;vt!==null;){var s=vt,o=s.child;if(vt.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(vt=c;vt!==null;){var u=vt;switch(u.tag){case 0:case 11:case 15:om(8,u,s)}var f=u.child;if(f!==null)f.return=u,vt=f;else for(;vt!==null;){u=vt;var m=u.sibling,g=u.return;if(WU(u),u===c){vt=null;break}if(m!==null){m.return=g,vt=m;break}vt=g}}}var x=s.alternate;if(x!==null){var b=x.child;if(b!==null){x.child=null;do{var w=b.sibling;b.sibling=null,b=w}while(b!==null)}}vt=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,vt=o;else e:for(;vt!==null;){if(s=vt,s.flags&2048)switch(s.tag){case 0:case 11:case 15:om(9,s,s.return)}var v=s.sibling;if(v!==null){v.return=s.return,vt=v;break e}vt=s.return}}var S=n.current;for(vt=S;vt!==null;){o=vt;var E=o.child;if(o.subtreeFlags&2064&&E!==null)E.return=o,vt=E;else e:for(o=S;vt!==null;){if(a=vt,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:K_(9,a)}}catch(V){gi(a,a.return,V)}if(a===o){vt=null;break e}var C=a.sibling;if(C!==null){C.return=a.return,vt=C;break e}vt=a.return}}if(Mn=r,bc(),Yo&&typeof Yo.onPostCommitFiberRoot=="function")try{Yo.onPostCommitFiberRoot(z_,n)}catch{}i=!0}return i}finally{Hn=t,ro.transition=e}}return!1}function mN(n,e,t){e=tf(t,e),e=DU(n,e,1),n=Yl(n,e,1),e=$r(),n!==null&&(Pg(n,1,e),ms(n,e))}function gi(n,e,t){if(n.tag===3)mN(n,n,t);else for(;e!==null;){if(e.tag===3){mN(e,n,t);break}else if(e.tag===1){var i=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(Kl===null||!Kl.has(i))){n=tf(t,n),n=kU(e,n,1),e=Yl(e,n,1),n=$r(),e!==null&&(Pg(e,1,n),ms(e,n));break}}e=e.return}}function mW(n,e,t){var i=n.pingCache;i!==null&&i.delete(e),e=$r(),n.pingedLanes|=n.suspendedLanes&t,tr===n&&(cr&t)===t&&(Gi===4||Gi===3&&(cr&130023424)===cr&&500>Ei()-eA?Ru(n,0):ZC|=t),ms(n,e)}function tF(n,e){e===0&&(n.mode&1?(e=tv,tv<<=1,!(tv&130023424)&&(tv=4194304)):e=1);var t=$r();n=qa(n,e),n!==null&&(Pg(n,e,t),ms(n,t))}function gW(n){var e=n.memoizedState,t=0;e!==null&&(t=e.retryLane),tF(n,t)}function yW(n,e){var t=0;switch(n.tag){case 13:var i=n.stateNode,r=n.memoizedState;r!==null&&(t=r.retryLane);break;case 19:i=n.stateNode;break;default:throw Error(Be(314))}i!==null&&i.delete(e),tF(n,t)}var nF;nF=function(n,e,t){if(n!==null)if(n.memoizedProps!==e.pendingProps||fs.current)hs=!0;else{if(!(n.lanes&t)&&!(e.flags&128))return hs=!1,rW(n,e,t);hs=!!(n.flags&131072)}else hs=!1,ii&&e.flags&1048576&&oU(e,lx,e.index);switch(e.lanes=0,e.tag){case 2:var i=e.type;A0(n,e),n=e.pendingProps;var r=Jd(e,Or.current);zd(e,t),r=$C(null,e,i,n,r,t);var s=XC();return e.flags|=1,typeof r=="object"&&r!==null&&typeof r.render=="function"&&r.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,ps(i)?(s=!0,ox(e)):s=!1,e.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,zC(e),r.updater=Y_,e.stateNode=r,r._reactInternals=e,V1(e,i,n,t),e=H1(null,e,i,!0,s,t)):(e.tag=0,ii&&s&&kC(e),Wr(null,e,r,t),e=e.child),e;case 16:i=e.elementType;e:{switch(A0(n,e),n=e.pendingProps,r=i._init,i=r(i._payload),e.type=i,r=e.tag=xW(i),n=yo(i,n),r){case 0:e=z1(null,e,i,n,t);break e;case 1:e=sN(null,e,i,n,t);break e;case 11:e=iN(null,e,i,n,t);break e;case 14:e=rN(null,e,i,yo(i.type,n),t);break e}throw Error(Be(306,i,""))}return e;case 0:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:yo(i,r),z1(n,e,i,r,t);case 1:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:yo(i,r),sN(n,e,i,r,t);case 3:e:{if(jU(e),n===null)throw Error(Be(387));i=e.pendingProps,s=e.memoizedState,r=s.element,dU(n,e),hx(e,i,null,t);var o=e.memoizedState;if(i=o.element,s.isDehydrated)if(s={element:i,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){r=tf(Error(Be(423)),e),e=oN(n,e,i,t,r);break e}else if(i!==r){r=tf(Error(Be(424)),e),e=oN(n,e,i,t,r);break e}else for(Rs=Xl(e.stateNode.containerInfo.firstChild),Ls=e,ii=!0,wo=null,t=uU(e,null,i,t),e.child=t;t;)t.flags=t.flags&-3|4096,t=t.sibling;else{if(Qd(),i===r){e=$a(n,e,t);break e}Wr(n,e,i,t)}e=e.child}return e;case 5:return fU(e),n===null&&U1(e),i=e.type,r=e.pendingProps,s=n!==null?n.memoizedProps:null,o=r.children,N1(i,r)?o=null:s!==null&&N1(i,s)&&(e.flags|=32),FU(n,e),Wr(n,e,o,t),e.child;case 6:return n===null&&U1(e),null;case 13:return VU(n,e,t);case 4:return HC(e,e.stateNode.containerInfo),i=e.pendingProps,n===null?e.child=Zd(e,null,i,t):Wr(n,e,i,t),e.child;case 11:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:yo(i,r),iN(n,e,i,r,t);case 7:return Wr(n,e,e.pendingProps,t),e.child;case 8:return Wr(n,e,e.pendingProps.children,t),e.child;case 12:return Wr(n,e,e.pendingProps.children,t),e.child;case 10:e:{if(i=e.type._context,r=e.pendingProps,s=e.memoizedProps,o=r.value,Kn(cx,i._currentValue),i._currentValue=o,s!==null)if(Ao(s.value,o)){if(s.children===r.children&&!fs.current){e=$a(n,e,t);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===i){if(s.tag===1){l=Da(-1,t&-t),l.tag=2;var c=s.updateQueue;if(c!==null){c=c.shared;var u=c.pending;u===null?l.next=l:(l.next=u.next,u.next=l),c.pending=l}}s.lanes|=t,l=s.alternate,l!==null&&(l.lanes|=t),F1(s.return,t,e),a.lanes|=t;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(Be(341));o.lanes|=t,a=o.alternate,a!==null&&(a.lanes|=t),F1(o,t,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}Wr(n,e,r.children,t),e=e.child}return e;case 9:return r=e.type,i=e.pendingProps.children,zd(e,t),r=so(r),i=i(r),e.flags|=1,Wr(n,e,i,t),e.child;case 14:return i=e.type,r=yo(i,e.pendingProps),r=yo(i.type,r),rN(n,e,i,r,t);case 15:return OU(n,e,e.type,e.pendingProps,t);case 17:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:yo(i,r),A0(n,e),e.tag=1,ps(i)?(n=!0,ox(e)):n=!1,zd(e,t),LU(e,i,r),V1(e,i,r,t),H1(null,e,i,!0,n,t);case 19:return BU(n,e,t);case 22:return UU(n,e,t)}throw Error(Be(156,e.tag))};function iF(n,e){return PO(n,e)}function vW(n,e,t,i){this.tag=n,this.key=t,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function no(n,e,t,i){return new vW(n,e,t,i)}function rA(n){return n=n.prototype,!(!n||!n.isReactComponent)}function xW(n){if(typeof n=="function")return rA(n)?1:0;if(n!=null){if(n=n.$$typeof,n===SC)return 11;if(n===TC)return 14}return 2}function Ql(n,e){var t=n.alternate;return t===null?(t=no(n.tag,e,n.key,n.mode),t.elementType=n.elementType,t.type=n.type,t.stateNode=n.stateNode,t.alternate=n,n.alternate=t):(t.pendingProps=e,t.type=n.type,t.flags=0,t.subtreeFlags=0,t.deletions=null),t.flags=n.flags&14680064,t.childLanes=n.childLanes,t.lanes=n.lanes,t.child=n.child,t.memoizedProps=n.memoizedProps,t.memoizedState=n.memoizedState,t.updateQueue=n.updateQueue,e=n.dependencies,t.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},t.sibling=n.sibling,t.index=n.index,t.ref=n.ref,t}function P0(n,e,t,i,r,s){var o=2;if(i=n,typeof n=="function")rA(n)&&(o=1);else if(typeof n=="string")o=5;else e:switch(n){case dd:return Nu(t.children,r,s,e);case bC:o=8,r|=8;break;case u1:return n=no(12,t,e,r|2),n.elementType=u1,n.lanes=s,n;case h1:return n=no(13,t,e,r),n.elementType=h1,n.lanes=s,n;case d1:return n=no(19,t,e,r),n.elementType=d1,n.lanes=s,n;case fO:return Q_(t,r,s,e);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case hO:o=10;break e;case dO:o=9;break e;case SC:o=11;break e;case TC:o=14;break e;case Ml:o=16,i=null;break e}throw Error(Be(130,n==null?n:typeof n,""))}return e=no(o,t,e,r),e.elementType=n,e.type=i,e.lanes=s,e}function Nu(n,e,t,i){return n=no(7,n,i,e),n.lanes=t,n}function Q_(n,e,t,i){return n=no(22,n,i,e),n.elementType=fO,n.lanes=t,n.stateNode={isHidden:!1},n}function DS(n,e,t){return n=no(6,n,null,e),n.lanes=t,n}function kS(n,e,t){return e=no(4,n.children!==null?n.children:[],n.key,e),e.lanes=t,e.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},e}function _W(n,e,t,i,r){this.tag=e,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=mS(0),this.expirationTimes=mS(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=mS(0),this.identifierPrefix=i,this.onRecoverableError=r,this.mutableSourceEagerHydrationData=null}function sA(n,e,t,i,r,s,o,a,l){return n=new _W(n,e,t,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=no(3,null,null,e),n.current=s,s.stateNode=n,s.memoizedState={element:i,isDehydrated:t,cache:null,transitions:null,pendingSuspenseBoundaries:null},zC(s),n}function wW(n,e,t){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:hd,key:i==null?null:""+i,children:n,containerInfo:e,implementation:t}}function rF(n){if(!n)return sc;n=n._reactInternals;e:{if(sh(n)!==n||n.tag!==1)throw Error(Be(170));var e=n;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(ps(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(Be(171))}if(n.tag===1){var t=n.type;if(ps(t))return rU(n,t,e)}return e}function sF(n,e,t,i,r,s,o,a,l){return n=sA(t,i,!0,n,r,s,o,a,l),n.context=rF(null),t=n.current,i=$r(),r=Jl(t),s=Da(i,r),s.callback=e??null,Yl(t,s,r),n.current.lanes=r,Pg(n,r,i),ms(n,i),n}function Z_(n,e,t,i){var r=e.current,s=$r(),o=Jl(r);return t=rF(t),e.context===null?e.context=t:e.pendingContext=t,e=Da(s,o),e.payload={element:n},i=i===void 0?null:i,i!==null&&(e.callback=i),n=Yl(r,e,o),n!==null&&(Eo(n,r,o,s),T0(n,r,o)),o}function xx(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function gN(n,e){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var t=n.retryLane;n.retryLane=t!==0&&t<e?t:e}}function oA(n,e){gN(n,e),(n=n.alternate)&&gN(n,e)}function bW(){return null}var oF=typeof reportError=="function"?reportError:function(n){console.error(n)};function aA(n){this._internalRoot=n}ew.prototype.render=aA.prototype.render=function(n){var e=this._internalRoot;if(e===null)throw Error(Be(409));Z_(n,e,null,null)};ew.prototype.unmount=aA.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var e=n.containerInfo;qu(function(){Z_(null,n,null,null)}),e[Wa]=null}};function ew(n){this._internalRoot=n}ew.prototype.unstable_scheduleHydration=function(n){if(n){var e=UO();n={blockedOn:null,target:n,priority:e};for(var t=0;t<Nl.length&&e!==0&&e<Nl[t].priority;t++);Nl.splice(t,0,n),t===0&&jO(n)}};function lA(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function tw(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function yN(){}function SW(n,e,t,i,r){if(r){if(typeof i=="function"){var s=i;i=function(){var c=xx(o);s.call(c)}}var o=sF(e,i,n,0,null,!1,!1,"",yN);return n._reactRootContainer=o,n[Wa]=o.current,Om(n.nodeType===8?n.parentNode:n),qu(),o}for(;r=n.lastChild;)n.removeChild(r);if(typeof i=="function"){var a=i;i=function(){var c=xx(l);a.call(c)}}var l=sA(n,0,!1,null,null,!1,!1,"",yN);return n._reactRootContainer=l,n[Wa]=l.current,Om(n.nodeType===8?n.parentNode:n),qu(function(){Z_(e,l,t,i)}),l}function nw(n,e,t,i,r){var s=t._reactRootContainer;if(s){var o=s;if(typeof r=="function"){var a=r;r=function(){var l=xx(o);a.call(l)}}Z_(e,o,n,r)}else o=SW(t,e,n,r,i);return xx(o)}kO=function(n){switch(n.tag){case 3:var e=n.stateNode;if(e.current.memoizedState.isDehydrated){var t=Vp(e.pendingLanes);t!==0&&(AC(e,t|1),ms(e,Ei()),!(Mn&6)&&(nf=Ei()+500,bc()))}break;case 13:qu(function(){var i=qa(n,1);if(i!==null){var r=$r();Eo(i,n,1,r)}}),oA(n,1)}};MC=function(n){if(n.tag===13){var e=qa(n,134217728);if(e!==null){var t=$r();Eo(e,n,134217728,t)}oA(n,134217728)}};OO=function(n){if(n.tag===13){var e=Jl(n),t=qa(n,e);if(t!==null){var i=$r();Eo(t,n,e,i)}oA(n,e)}};UO=function(){return Hn};FO=function(n,e){var t=Hn;try{return Hn=n,e()}finally{Hn=t}};b1=function(n,e,t){switch(e){case"input":if(m1(n,t),e=t.name,t.type==="radio"&&e!=null){for(t=n;t.parentNode;)t=t.parentNode;for(t=t.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<t.length;e++){var i=t[e];if(i!==n&&i.form===n.form){var r=q_(i);if(!r)throw Error(Be(90));mO(i),m1(i,r)}}}break;case"textarea":yO(n,t);break;case"select":e=t.value,e!=null&&Fd(n,!!t.multiple,e,!1)}};TO=tA;EO=qu;var TW={usingClientEntryPoint:!1,Events:[Ng,gd,q_,bO,SO,tA]},yp={findFiberByHostInstance:wu,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},EW={bundleType:yp.bundleType,version:yp.version,rendererPackageName:yp.rendererPackageName,rendererConfig:yp.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:nl.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=MO(n),n===null?null:n.stateNode},findFiberByHostInstance:yp.findFiberByHostInstance||bW,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var dv=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!dv.isDisabled&&dv.supportsFiber)try{z_=dv.inject(EW),Yo=dv}catch{}}Vs.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=TW;Vs.createPortal=function(n,e){var t=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!lA(e))throw Error(Be(200));return wW(n,e,null,t)};Vs.createRoot=function(n,e){if(!lA(n))throw Error(Be(299));var t=!1,i="",r=oF;return e!=null&&(e.unstable_strictMode===!0&&(t=!0),e.identifierPrefix!==void 0&&(i=e.identifierPrefix),e.onRecoverableError!==void 0&&(r=e.onRecoverableError)),e=sA(n,1,!1,null,null,t,!1,i,r),n[Wa]=e.current,Om(n.nodeType===8?n.parentNode:n),new aA(e)};Vs.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var e=n._reactInternals;if(e===void 0)throw typeof n.render=="function"?Error(Be(188)):(n=Object.keys(n).join(","),Error(Be(268,n)));return n=MO(e),n=n===null?null:n.stateNode,n};Vs.flushSync=function(n){return qu(n)};Vs.hydrate=function(n,e,t){if(!tw(e))throw Error(Be(200));return nw(null,n,e,!0,t)};Vs.hydrateRoot=function(n,e,t){if(!lA(n))throw Error(Be(405));var i=t!=null&&t.hydratedSources||null,r=!1,s="",o=oF;if(t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(s=t.identifierPrefix),t.onRecoverableError!==void 0&&(o=t.onRecoverableError)),e=sF(e,null,n,1,t??null,r,!1,s,o),n[Wa]=e.current,Om(n),i)for(n=0;n<i.length;n++)t=i[n],r=t._getVersion,r=r(t._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[t,r]:e.mutableSourceEagerHydrationData.push(t,r);return new ew(e)};Vs.render=function(n,e,t){if(!tw(e))throw Error(Be(200));return nw(null,n,e,!1,t)};Vs.unmountComponentAtNode=function(n){if(!tw(n))throw Error(Be(40));return n._reactRootContainer?(qu(function(){nw(null,null,n,!1,function(){n._reactRootContainer=null,n[Wa]=null})}),!0):!1};Vs.unstable_batchedUpdates=tA;Vs.unstable_renderSubtreeIntoContainer=function(n,e,t,i){if(!tw(t))throw Error(Be(200));if(n==null||n._reactInternals===void 0)throw Error(Be(38));return nw(n,e,t,!1,i)};Vs.version="18.3.1-next-f1338f8080-20240426";function aF(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(aF)}catch(n){console.error(n)}}aF(),aO.exports=Vs;var cA=aO.exports;const CW=Mg(cA),AW=Y3({__proto__:null,default:CW},[cA]);var uA,vN=cA;uA=vN.createRoot,vN.hydrateRoot;/**
 * @remix-run/router v1.21.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ni(){return ni=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},ni.apply(this,arguments)}var ki;(function(n){n.Pop="POP",n.Push="PUSH",n.Replace="REPLACE"})(ki||(ki={}));const xN="popstate";function MW(n){n===void 0&&(n={});function e(i,r){let{pathname:s,search:o,hash:a}=i.location;return Wm("",{pathname:s,search:o,hash:a},r.state&&r.state.usr||null,r.state&&r.state.key||"default")}function t(i,r){return typeof r=="string"?r:$u(r)}return PW(e,t,null,n)}function gn(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function rf(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function IW(){return Math.random().toString(36).substr(2,8)}function _N(n,e){return{usr:n.state,key:n.key,idx:e}}function Wm(n,e,t,i){return t===void 0&&(t=null),ni({pathname:typeof n=="string"?n:n.pathname,search:"",hash:""},typeof e=="string"?Sc(e):e,{state:t,key:e&&e.key||i||IW()})}function $u(n){let{pathname:e="/",search:t="",hash:i=""}=n;return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),i&&i!=="#"&&(e+=i.charAt(0)==="#"?i:"#"+i),e}function Sc(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substr(t),n=n.substr(0,t));let i=n.indexOf("?");i>=0&&(e.search=n.substr(i),n=n.substr(0,i)),n&&(e.pathname=n)}return e}function PW(n,e,t,i){i===void 0&&(i={});let{window:r=document.defaultView,v5Compat:s=!1}=i,o=r.history,a=ki.Pop,l=null,c=u();c==null&&(c=0,o.replaceState(ni({},o.state,{idx:c}),""));function u(){return(o.state||{idx:null}).idx}function f(){a=ki.Pop;let w=u(),v=w==null?null:w-c;c=w,l&&l({action:a,location:b.location,delta:v})}function m(w,v){a=ki.Push;let S=Wm(b.location,w,v);c=u()+1;let E=_N(S,c),C=b.createHref(S);try{o.pushState(E,"",C)}catch(V){if(V instanceof DOMException&&V.name==="DataCloneError")throw V;r.location.assign(C)}s&&l&&l({action:a,location:b.location,delta:1})}function g(w,v){a=ki.Replace;let S=Wm(b.location,w,v);c=u();let E=_N(S,c),C=b.createHref(S);o.replaceState(E,"",C),s&&l&&l({action:a,location:b.location,delta:0})}function x(w){let v=r.location.origin!=="null"?r.location.origin:r.location.href,S=typeof w=="string"?w:$u(w);return S=S.replace(/ $/,"%20"),gn(v,"No window.location.(origin|href) available to create URL for href: "+S),new URL(S,v)}let b={get action(){return a},get location(){return n(r,o)},listen(w){if(l)throw new Error("A history only accepts one active listener");return r.addEventListener(xN,f),l=w,()=>{r.removeEventListener(xN,f),l=null}},createHref(w){return e(r,w)},createURL:x,encodeLocation(w){let v=x(w);return{pathname:v.pathname,search:v.search,hash:v.hash}},push:m,replace:g,go(w){return o.go(w)}};return b}var Gn;(function(n){n.data="data",n.deferred="deferred",n.redirect="redirect",n.error="error"})(Gn||(Gn={}));const RW=new Set(["lazy","caseSensitive","path","id","index","children"]);function NW(n){return n.index===!0}function _x(n,e,t,i){return t===void 0&&(t=[]),i===void 0&&(i={}),n.map((r,s)=>{let o=[...t,String(s)],a=typeof r.id=="string"?r.id:o.join("-");if(gn(r.index!==!0||!r.children,"Cannot specify children on an index route"),gn(!i[a],'Found a route id collision on id "'+a+`".  Route id's must be globally unique within Data Router usages`),NW(r)){let l=ni({},r,e(r),{id:a});return i[a]=l,l}else{let l=ni({},r,e(r),{id:a,children:void 0});return i[a]=l,r.children&&(l.children=_x(r.children,e,o,i)),l}})}function vu(n,e,t){return t===void 0&&(t="/"),R0(n,e,t,!1)}function R0(n,e,t,i){let r=typeof e=="string"?Sc(e):e,s=Tf(r.pathname||"/",t);if(s==null)return null;let o=lF(n);DW(o);let a=null;for(let l=0;a==null&&l<o.length;++l){let c=WW(s);a=HW(o[l],c,i)}return a}function LW(n,e){let{route:t,pathname:i,params:r}=n;return{id:t.id,pathname:i,params:r,data:e[t.id],handle:t.handle}}function lF(n,e,t,i){e===void 0&&(e=[]),t===void 0&&(t=[]),i===void 0&&(i="");let r=(s,o,a)=>{let l={relativePath:a===void 0?s.path||"":a,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};l.relativePath.startsWith("/")&&(gn(l.relativePath.startsWith(i),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+i+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(i.length));let c=ka([i,l.relativePath]),u=t.concat(l);s.children&&s.children.length>0&&(gn(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),lF(s.children,e,u,c)),!(s.path==null&&!s.index)&&e.push({path:c,score:BW(c,s.index),routesMeta:u})};return n.forEach((s,o)=>{var a;if(s.path===""||!((a=s.path)!=null&&a.includes("?")))r(s,o);else for(let l of cF(s.path))r(s,o,l)}),e}function cF(n){let e=n.split("/");if(e.length===0)return[];let[t,...i]=e,r=t.endsWith("?"),s=t.replace(/\?$/,"");if(i.length===0)return r?[s,""]:[s];let o=cF(i.join("/")),a=[];return a.push(...o.map(l=>l===""?s:[s,l].join("/"))),r&&a.push(...o),a.map(l=>n.startsWith("/")&&l===""?"/":l)}function DW(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:zW(e.routesMeta.map(i=>i.childrenIndex),t.routesMeta.map(i=>i.childrenIndex)))}const kW=/^:[\w-]+$/,OW=3,UW=2,FW=1,jW=10,VW=-2,wN=n=>n==="*";function BW(n,e){let t=n.split("/"),i=t.length;return t.some(wN)&&(i+=VW),e&&(i+=UW),t.filter(r=>!wN(r)).reduce((r,s)=>r+(kW.test(s)?OW:s===""?FW:jW),i)}function zW(n,e){return n.length===e.length&&n.slice(0,-1).every((i,r)=>i===e[r])?n[n.length-1]-e[e.length-1]:0}function HW(n,e,t){t===void 0&&(t=!1);let{routesMeta:i}=n,r={},s="/",o=[];for(let a=0;a<i.length;++a){let l=i[a],c=a===i.length-1,u=s==="/"?e:e.slice(s.length)||"/",f=bN({path:l.relativePath,caseSensitive:l.caseSensitive,end:c},u),m=l.route;if(!f&&c&&t&&!i[i.length-1].route.index&&(f=bN({path:l.relativePath,caseSensitive:l.caseSensitive,end:!1},u)),!f)return null;Object.assign(r,f.params),o.push({params:r,pathname:ka([s,f.pathname]),pathnameBase:XW(ka([s,f.pathnameBase])),route:m}),f.pathnameBase!=="/"&&(s=ka([s,f.pathnameBase]))}return o}function bN(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,i]=GW(n.path,n.caseSensitive,n.end),r=e.match(t);if(!r)return null;let s=r[0],o=s.replace(/(.)\/+$/,"$1"),a=r.slice(1);return{params:i.reduce((c,u,f)=>{let{paramName:m,isOptional:g}=u;if(m==="*"){let b=a[f]||"";o=s.slice(0,s.length-b.length).replace(/(.)\/+$/,"$1")}const x=a[f];return g&&!x?c[m]=void 0:c[m]=(x||"").replace(/%2F/g,"/"),c},{}),pathname:s,pathnameBase:o,pattern:n}}function GW(n,e,t){e===void 0&&(e=!1),t===void 0&&(t=!0),rf(n==="*"||!n.endsWith("*")||n.endsWith("/*"),'Route path "'+n+'" will be treated as if it were '+('"'+n.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+n.replace(/\*$/,"/*")+'".'));let i=[],r="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,l)=>(i.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return n.endsWith("*")?(i.push({paramName:"*"}),r+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?r+="\\/*$":n!==""&&n!=="/"&&(r+="(?:(?=\\/|$))"),[new RegExp(r,e?void 0:"i"),i]}function WW(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return rf(!1,'The URL path "'+n+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),n}}function Tf(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,i=n.charAt(t);return i&&i!=="/"?null:n.slice(t)||"/"}function qW(n,e){e===void 0&&(e="/");let{pathname:t,search:i="",hash:r=""}=typeof n=="string"?Sc(n):n;return{pathname:t?t.startsWith("/")?t:$W(t,e):e,search:YW(i),hash:KW(r)}}function $W(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(r=>{r===".."?t.length>1&&t.pop():r!=="."&&t.push(r)}),t.length>1?t.join("/"):"/"}function OS(n,e,t,i){return"Cannot include a '"+n+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(i)+"].  Please separate it out to the ")+("`to."+t+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function uF(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function hA(n,e){let t=uF(n);return e?t.map((i,r)=>r===t.length-1?i.pathname:i.pathnameBase):t.map(i=>i.pathnameBase)}function dA(n,e,t,i){i===void 0&&(i=!1);let r;typeof n=="string"?r=Sc(n):(r=ni({},n),gn(!r.pathname||!r.pathname.includes("?"),OS("?","pathname","search",r)),gn(!r.pathname||!r.pathname.includes("#"),OS("#","pathname","hash",r)),gn(!r.search||!r.search.includes("#"),OS("#","search","hash",r)));let s=n===""||r.pathname==="",o=s?"/":r.pathname,a;if(o==null)a=t;else{let f=e.length-1;if(!i&&o.startsWith("..")){let m=o.split("/");for(;m[0]==="..";)m.shift(),f-=1;r.pathname=m.join("/")}a=f>=0?e[f]:"/"}let l=qW(r,a),c=o&&o!=="/"&&o.endsWith("/"),u=(s||o===".")&&t.endsWith("/");return!l.pathname.endsWith("/")&&(c||u)&&(l.pathname+="/"),l}const ka=n=>n.join("/").replace(/\/\/+/g,"/"),XW=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),YW=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,KW=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;class wx{constructor(e,t,i,r){r===void 0&&(r=!1),this.status=e,this.statusText=t||"",this.internal=r,i instanceof Error?(this.data=i.toString(),this.error=i):this.data=i}}function iw(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}const hF=["post","put","patch","delete"],JW=new Set(hF),QW=["get",...hF],ZW=new Set(QW),e9=new Set([301,302,303,307,308]),t9=new Set([307,308]),US={state:"idle",location:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},n9={state:"idle",data:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},vp={state:"unblocked",proceed:void 0,reset:void 0,location:void 0},fA=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,i9=n=>({hasErrorBoundary:!!n.hasErrorBoundary}),dF="remix-router-transitions";function r9(n){const e=n.window?n.window:typeof window<"u"?window:void 0,t=typeof e<"u"&&typeof e.document<"u"&&typeof e.document.createElement<"u",i=!t;gn(n.routes.length>0,"You must provide a non-empty routes array to createRouter");let r;if(n.mapRouteProperties)r=n.mapRouteProperties;else if(n.detectErrorBoundary){let Z=n.detectErrorBoundary;r=oe=>({hasErrorBoundary:Z(oe)})}else r=i9;let s={},o=_x(n.routes,r,void 0,s),a,l=n.basename||"/",c=n.dataStrategy||l9,u=n.patchRoutesOnNavigation,f=ni({v7_fetcherPersist:!1,v7_normalizeFormMethod:!1,v7_partialHydration:!1,v7_prependBasename:!1,v7_relativeSplatPath:!1,v7_skipActionErrorRevalidation:!1},n.future),m=null,g=new Set,x=null,b=null,w=null,v=n.hydrationData!=null,S=vu(o,n.history.location,l),E=null;if(S==null&&!u){let Z=rs(404,{pathname:n.history.location.pathname}),{matches:oe,route:ye}=LN(o);S=oe,E={[ye.id]:Z}}S&&!n.hydrationData&&bn(S,o,n.history.location.pathname).active&&(S=null);let C;if(S)if(S.some(Z=>Z.route.lazy))C=!1;else if(!S.some(Z=>Z.route.loader))C=!0;else if(f.v7_partialHydration){let Z=n.hydrationData?n.hydrationData.loaderData:null,oe=n.hydrationData?n.hydrationData.errors:null;if(oe){let ye=S.findIndex(Ae=>oe[Ae.route.id]!==void 0);C=S.slice(0,ye+1).every(Ae=>!nE(Ae.route,Z,oe))}else C=S.every(ye=>!nE(ye.route,Z,oe))}else C=n.hydrationData!=null;else if(C=!1,S=[],f.v7_partialHydration){let Z=bn(null,o,n.history.location.pathname);Z.active&&Z.matches&&(S=Z.matches)}let V,L={historyAction:n.history.action,location:n.history.location,matches:S,initialized:C,navigation:US,restoreScrollPosition:n.hydrationData!=null?!1:null,preventScrollReset:!1,revalidation:"idle",loaderData:n.hydrationData&&n.hydrationData.loaderData||{},actionData:n.hydrationData&&n.hydrationData.actionData||null,errors:n.hydrationData&&n.hydrationData.errors||E,fetchers:new Map,blockers:new Map},N=ki.Pop,I=!1,A,M=!1,D=new Map,z=null,j=!1,te=!1,he=[],de=new Set,U=new Map,F=0,X=-1,Y=new Map,ne=new Set,fe=new Map,Ce=new Map,ce=new Set,Ee=new Map,Oe=new Map,Pe;function xt(){if(m=n.history.listen(Z=>{let{action:oe,location:ye,delta:Ae}=Z;if(Pe){Pe(),Pe=void 0;return}rf(Oe.size===0||Ae!=null,"You are trying to use a blocker on a POP navigation to a location that was not created by @remix-run/router. This will fail silently in production. This can happen if you are navigating outside the router via `window.history.pushState`/`window.location.hash` instead of using router navigation APIs.  This can also happen if you are using createHashRouter and the user manually changes the URL.");let rt=ie({currentLocation:L.location,nextLocation:ye,historyAction:oe});if(rt&&Ae!=null){let Tt=new Promise(Ct=>{Pe=Ct});n.history.go(Ae*-1),hn(rt,{state:"blocked",location:ye,proceed(){hn(rt,{state:"proceeding",proceed:void 0,reset:void 0,location:ye}),Tt.then(()=>n.history.go(Ae))},reset(){let Ct=new Map(L.blockers);Ct.set(rt,vp),ze({blockers:Ct})}});return}return nt(oe,ye)}),t){b9(e,D);let Z=()=>S9(e,D);e.addEventListener("pagehide",Z),z=()=>e.removeEventListener("pagehide",Z)}return L.initialized||nt(ki.Pop,L.location,{initialHydration:!0}),V}function Dt(){m&&m(),z&&z(),g.clear(),A&&A.abort(),L.fetchers.forEach((Z,oe)=>$t(oe)),L.blockers.forEach((Z,oe)=>Ht(oe))}function lt(Z){return g.add(Z),()=>g.delete(Z)}function ze(Z,oe){oe===void 0&&(oe={}),L=ni({},L,Z);let ye=[],Ae=[];f.v7_fetcherPersist&&L.fetchers.forEach((rt,Tt)=>{rt.state==="idle"&&(ce.has(Tt)?Ae.push(Tt):ye.push(Tt))}),[...g].forEach(rt=>rt(L,{deletedFetchers:Ae,viewTransitionOpts:oe.viewTransitionOpts,flushSync:oe.flushSync===!0})),f.v7_fetcherPersist&&(ye.forEach(rt=>L.fetchers.delete(rt)),Ae.forEach(rt=>$t(rt)))}function Te(Z,oe,ye){var Ae,rt;let{flushSync:Tt}=ye===void 0?{}:ye,Ct=L.actionData!=null&&L.navigation.formMethod!=null&&_o(L.navigation.formMethod)&&L.navigation.state==="loading"&&((Ae=Z.state)==null?void 0:Ae._isRedirect)!==!0,dt;oe.actionData?Object.keys(oe.actionData).length>0?dt=oe.actionData:dt=null:Ct?dt=L.actionData:dt=null;let mt=oe.loaderData?RN(L.loaderData,oe.loaderData,oe.matches||[],oe.errors):L.loaderData,tt=L.blockers;tt.size>0&&(tt=new Map(tt),tt.forEach((tn,Dn)=>tt.set(Dn,vp)));let St=I===!0||L.navigation.formMethod!=null&&_o(L.navigation.formMethod)&&((rt=Z.state)==null?void 0:rt._isRedirect)!==!0;a&&(o=a,a=void 0),j||N===ki.Pop||(N===ki.Push?n.history.push(Z,Z.state):N===ki.Replace&&n.history.replace(Z,Z.state));let Xt;if(N===ki.Pop){let tn=D.get(L.location.pathname);tn&&tn.has(Z.pathname)?Xt={currentLocation:L.location,nextLocation:Z}:D.has(Z.pathname)&&(Xt={currentLocation:Z,nextLocation:L.location})}else if(M){let tn=D.get(L.location.pathname);tn?tn.add(Z.pathname):(tn=new Set([Z.pathname]),D.set(L.location.pathname,tn)),Xt={currentLocation:L.location,nextLocation:Z}}ze(ni({},oe,{actionData:dt,loaderData:mt,historyAction:N,location:Z,initialized:!0,navigation:US,revalidation:"idle",restoreScrollPosition:Ft(Z,oe.matches||L.matches),preventScrollReset:St,blockers:tt}),{viewTransitionOpts:Xt,flushSync:Tt===!0}),N=ki.Pop,I=!1,M=!1,j=!1,te=!1,he=[]}async function Me(Z,oe){if(typeof Z=="number"){n.history.go(Z);return}let ye=tE(L.location,L.matches,l,f.v7_prependBasename,Z,f.v7_relativeSplatPath,oe?.fromRouteId,oe?.relative),{path:Ae,submission:rt,error:Tt}=SN(f.v7_normalizeFormMethod,!1,ye,oe),Ct=L.location,dt=Wm(L.location,Ae,oe&&oe.state);dt=ni({},dt,n.history.encodeLocation(dt));let mt=oe&&oe.replace!=null?oe.replace:void 0,tt=ki.Push;mt===!0?tt=ki.Replace:mt===!1||rt!=null&&_o(rt.formMethod)&&rt.formAction===L.location.pathname+L.location.search&&(tt=ki.Replace);let St=oe&&"preventScrollReset"in oe?oe.preventScrollReset===!0:void 0,Xt=(oe&&oe.flushSync)===!0,tn=ie({currentLocation:Ct,nextLocation:dt,historyAction:tt});if(tn){hn(tn,{state:"blocked",location:dt,proceed(){hn(tn,{state:"proceeding",proceed:void 0,reset:void 0,location:dt}),Me(Z,oe)},reset(){let Dn=new Map(L.blockers);Dn.set(tn,vp),ze({blockers:Dn})}});return}return await nt(tt,dt,{submission:rt,pendingError:Tt,preventScrollReset:St,replace:oe&&oe.replace,enableViewTransition:oe&&oe.viewTransition,flushSync:Xt})}function Q(){if(xe(),ze({revalidation:"loading"}),L.navigation.state!=="submitting"){if(L.navigation.state==="idle"){nt(L.historyAction,L.location,{startUninterruptedRevalidation:!0});return}nt(N||L.historyAction,L.navigation.location,{overrideNavigation:L.navigation,enableViewTransition:M===!0})}}async function nt(Z,oe,ye){A&&A.abort(),A=null,N=Z,j=(ye&&ye.startUninterruptedRevalidation)===!0,$e(L.location,L.matches),I=(ye&&ye.preventScrollReset)===!0,M=(ye&&ye.enableViewTransition)===!0;let Ae=a||o,rt=ye&&ye.overrideNavigation,Tt=vu(Ae,oe,l),Ct=(ye&&ye.flushSync)===!0,dt=bn(Tt,Ae,oe.pathname);if(dt.active&&dt.matches&&(Tt=dt.matches),!Tt){let{error:Sn,notFoundMatches:H,route:ee}=Ke(oe.pathname);Te(oe,{matches:H,loaderData:{},errors:{[ee.id]:Sn}},{flushSync:Ct});return}if(L.initialized&&!te&&p9(L.location,oe)&&!(ye&&ye.submission&&_o(ye.submission.formMethod))){Te(oe,{matches:Tt},{flushSync:Ct});return}A=new AbortController;let mt=Oh(n.history,oe,A.signal,ye&&ye.submission),tt;if(ye&&ye.pendingError)tt=[xu(Tt).route.id,{type:Gn.error,error:ye.pendingError}];else if(ye&&ye.submission&&_o(ye.submission.formMethod)){let Sn=await ke(mt,oe,ye.submission,Tt,dt.active,{replace:ye.replace,flushSync:Ct});if(Sn.shortCircuited)return;if(Sn.pendingActionResult){let[H,ee]=Sn.pendingActionResult;if(Ps(ee)&&iw(ee.error)&&ee.error.status===404){A=null,Te(oe,{matches:Sn.matches,loaderData:{},errors:{[H]:ee.error}});return}}Tt=Sn.matches||Tt,tt=Sn.pendingActionResult,rt=FS(oe,ye.submission),Ct=!1,dt.active=!1,mt=Oh(n.history,mt.url,mt.signal)}let{shortCircuited:St,matches:Xt,loaderData:tn,errors:Dn}=await Ze(mt,oe,Tt,dt.active,rt,ye&&ye.submission,ye&&ye.fetcherSubmission,ye&&ye.replace,ye&&ye.initialHydration===!0,Ct,tt);St||(A=null,Te(oe,ni({matches:Xt||Tt},NN(tt),{loaderData:tn,errors:Dn})))}async function ke(Z,oe,ye,Ae,rt,Tt){Tt===void 0&&(Tt={}),xe();let Ct=_9(oe,ye);if(ze({navigation:Ct},{flushSync:Tt.flushSync===!0}),rt){let tt=await $n(Ae,oe.pathname,Z.signal);if(tt.type==="aborted")return{shortCircuited:!0};if(tt.type==="error"){let St=xu(tt.partialMatches).route.id;return{matches:tt.partialMatches,pendingActionResult:[St,{type:Gn.error,error:tt.error}]}}else if(tt.matches)Ae=tt.matches;else{let{notFoundMatches:St,error:Xt,route:tn}=Ke(oe.pathname);return{matches:St,pendingActionResult:[tn.id,{type:Gn.error,error:Xt}]}}}let dt,mt=zp(Ae,oe);if(!mt.route.action&&!mt.route.lazy)dt={type:Gn.error,error:rs(405,{method:Z.method,pathname:oe.pathname,routeId:mt.route.id})};else if(dt=(await be("action",L,Z,[mt],Ae,null))[mt.route.id],Z.signal.aborted)return{shortCircuited:!0};if(Tu(dt)){let tt;return Tt&&Tt.replace!=null?tt=Tt.replace:tt=MN(dt.response.headers.get("Location"),new URL(Z.url),l)===L.location.pathname+L.location.search,await ue(Z,dt,!0,{submission:ye,replace:tt}),{shortCircuited:!0}}if(zl(dt))throw rs(400,{type:"defer-action"});if(Ps(dt)){let tt=xu(Ae,mt.route.id);return(Tt&&Tt.replace)!==!0&&(N=ki.Push),{matches:Ae,pendingActionResult:[tt.route.id,dt]}}return{matches:Ae,pendingActionResult:[mt.route.id,dt]}}async function Ze(Z,oe,ye,Ae,rt,Tt,Ct,dt,mt,tt,St){let Xt=rt||FS(oe,Tt),tn=Tt||Ct||kN(Xt),Dn=!j&&(!f.v7_partialHydration||!mt);if(Ae){if(Dn){let bt=We(St);ze(ni({navigation:Xt},bt!==void 0?{actionData:bt}:{}),{flushSync:tt})}let Fe=await $n(ye,oe.pathname,Z.signal);if(Fe.type==="aborted")return{shortCircuited:!0};if(Fe.type==="error"){let bt=xu(Fe.partialMatches).route.id;return{matches:Fe.partialMatches,loaderData:{},errors:{[bt]:Fe.error}}}else if(Fe.matches)ye=Fe.matches;else{let{error:bt,notFoundMatches:Yt,route:At}=Ke(oe.pathname);return{matches:Yt,loaderData:{},errors:{[At.id]:bt}}}}let Sn=a||o,[H,ee]=EN(n.history,L,ye,tn,oe,f.v7_partialHydration&&mt===!0,f.v7_skipActionErrorRevalidation,te,he,de,ce,fe,ne,Sn,l,St);if(_e(Fe=>!(ye&&ye.some(bt=>bt.route.id===Fe))||H&&H.some(bt=>bt.route.id===Fe)),X=++F,H.length===0&&ee.length===0){let Fe=Ot();return Te(oe,ni({matches:ye,loaderData:{},errors:St&&Ps(St[1])?{[St[0]]:St[1].error}:null},NN(St),Fe?{fetchers:new Map(L.fetchers)}:{}),{flushSync:tt}),{shortCircuited:!0}}if(Dn){let Fe={};if(!Ae){Fe.navigation=Xt;let bt=We(St);bt!==void 0&&(Fe.actionData=bt)}ee.length>0&&(Fe.fetchers=Mt(ee)),ze(Fe,{flushSync:tt})}ee.forEach(Fe=>{Je(Fe.key),Fe.controller&&U.set(Fe.key,Fe.controller)});let pe=()=>ee.forEach(Fe=>Je(Fe.key));A&&A.signal.addEventListener("abort",pe);let{loaderResults:me,fetcherResults:re}=await Re(L,ye,H,ee,Z);if(Z.signal.aborted)return{shortCircuited:!0};A&&A.signal.removeEventListener("abort",pe),ee.forEach(Fe=>U.delete(Fe.key));let Ue=fv(me);if(Ue)return await ue(Z,Ue.result,!0,{replace:dt}),{shortCircuited:!0};if(Ue=fv(re),Ue)return ne.add(Ue.key),await ue(Z,Ue.result,!0,{replace:dt}),{shortCircuited:!0};let{loaderData:Xe,errors:ct}=PN(L,ye,me,St,ee,re,Ee);Ee.forEach((Fe,bt)=>{Fe.subscribe(Yt=>{(Yt||Fe.done)&&Ee.delete(bt)})}),f.v7_partialHydration&&mt&&L.errors&&(ct=ni({},L.errors,ct));let ot=Ot(),It=ht(X),Lt=ot||It||ee.length>0;return ni({matches:ye,loaderData:Xe,errors:ct},Lt?{fetchers:new Map(L.fetchers)}:{})}function We(Z){if(Z&&!Ps(Z[1]))return{[Z[0]]:Z[1].data};if(L.actionData)return Object.keys(L.actionData).length===0?null:L.actionData}function Mt(Z){return Z.forEach(oe=>{let ye=L.fetchers.get(oe.key),Ae=xp(void 0,ye?ye.data:void 0);L.fetchers.set(oe.key,Ae)}),new Map(L.fetchers)}function Ye(Z,oe,ye,Ae){if(i)throw new Error("router.fetch() was called during the server render, but it shouldn't be. You are likely calling a useFetcher() method in the body of your component. Try moving it to a useEffect or a callback.");Je(Z);let rt=(Ae&&Ae.flushSync)===!0,Tt=a||o,Ct=tE(L.location,L.matches,l,f.v7_prependBasename,ye,f.v7_relativeSplatPath,oe,Ae?.relative),dt=vu(Tt,Ct,l),mt=bn(dt,Tt,Ct);if(mt.active&&mt.matches&&(dt=mt.matches),!dt){Ge(Z,oe,rs(404,{pathname:Ct}),{flushSync:rt});return}let{path:tt,submission:St,error:Xt}=SN(f.v7_normalizeFormMethod,!0,Ct,Ae);if(Xt){Ge(Z,oe,Xt,{flushSync:rt});return}let tn=zp(dt,tt),Dn=(Ae&&Ae.preventScrollReset)===!0;if(St&&_o(St.formMethod)){$(Z,oe,tt,tn,dt,mt.active,rt,Dn,St);return}fe.set(Z,{routeId:oe,path:tt}),G(Z,oe,tt,tn,dt,mt.active,rt,Dn,St)}async function $(Z,oe,ye,Ae,rt,Tt,Ct,dt,mt){xe(),fe.delete(Z);function tt(_t){if(!_t.route.action&&!_t.route.lazy){let jt=rs(405,{method:mt.formMethod,pathname:ye,routeId:oe});return Ge(Z,oe,jt,{flushSync:Ct}),!0}return!1}if(!Tt&&tt(Ae))return;let St=L.fetchers.get(Z);Ve(Z,w9(mt,St),{flushSync:Ct});let Xt=new AbortController,tn=Oh(n.history,ye,Xt.signal,mt);if(Tt){let _t=await $n(rt,ye,tn.signal);if(_t.type==="aborted")return;if(_t.type==="error"){Ge(Z,oe,_t.error,{flushSync:Ct});return}else if(_t.matches){if(rt=_t.matches,Ae=zp(rt,ye),tt(Ae))return}else{Ge(Z,oe,rs(404,{pathname:ye}),{flushSync:Ct});return}}U.set(Z,Xt);let Dn=F,H=(await be("action",L,tn,[Ae],rt,Z))[Ae.route.id];if(tn.signal.aborted){U.get(Z)===Xt&&U.delete(Z);return}if(f.v7_fetcherPersist&&ce.has(Z)){if(Tu(H)||Ps(H)){Ve(Z,Cl(void 0));return}}else{if(Tu(H))if(U.delete(Z),X>Dn){Ve(Z,Cl(void 0));return}else return ne.add(Z),Ve(Z,xp(mt)),ue(tn,H,!1,{fetcherSubmission:mt,preventScrollReset:dt});if(Ps(H)){Ge(Z,oe,H.error);return}}if(zl(H))throw rs(400,{type:"defer-action"});let ee=L.navigation.location||L.location,pe=Oh(n.history,ee,Xt.signal),me=a||o,re=L.navigation.state!=="idle"?vu(me,L.navigation.location,l):L.matches;gn(re,"Didn't find any matches after fetcher action");let Ue=++F;Y.set(Z,Ue);let Xe=xp(mt,H.data);L.fetchers.set(Z,Xe);let[ct,ot]=EN(n.history,L,re,mt,ee,!1,f.v7_skipActionErrorRevalidation,te,he,de,ce,fe,ne,me,l,[Ae.route.id,H]);ot.filter(_t=>_t.key!==Z).forEach(_t=>{let jt=_t.key,Qe=L.fetchers.get(jt),Vn=xp(void 0,Qe?Qe.data:void 0);L.fetchers.set(jt,Vn),Je(jt),_t.controller&&U.set(jt,_t.controller)}),ze({fetchers:new Map(L.fetchers)});let It=()=>ot.forEach(_t=>Je(_t.key));Xt.signal.addEventListener("abort",It);let{loaderResults:Lt,fetcherResults:Fe}=await Re(L,re,ct,ot,pe);if(Xt.signal.aborted)return;Xt.signal.removeEventListener("abort",It),Y.delete(Z),U.delete(Z),ot.forEach(_t=>U.delete(_t.key));let bt=fv(Lt);if(bt)return ue(pe,bt.result,!1,{preventScrollReset:dt});if(bt=fv(Fe),bt)return ne.add(bt.key),ue(pe,bt.result,!1,{preventScrollReset:dt});let{loaderData:Yt,errors:At}=PN(L,re,Lt,void 0,ot,Fe,Ee);if(L.fetchers.has(Z)){let _t=Cl(H.data);L.fetchers.set(Z,_t)}ht(Ue),L.navigation.state==="loading"&&Ue>X?(gn(N,"Expected pending action"),A&&A.abort(),Te(L.navigation.location,{matches:re,loaderData:Yt,errors:At,fetchers:new Map(L.fetchers)})):(ze({errors:At,loaderData:RN(L.loaderData,Yt,re,At),fetchers:new Map(L.fetchers)}),te=!1)}async function G(Z,oe,ye,Ae,rt,Tt,Ct,dt,mt){let tt=L.fetchers.get(Z);Ve(Z,xp(mt,tt?tt.data:void 0),{flushSync:Ct});let St=new AbortController,Xt=Oh(n.history,ye,St.signal);if(Tt){let H=await $n(rt,ye,Xt.signal);if(H.type==="aborted")return;if(H.type==="error"){Ge(Z,oe,H.error,{flushSync:Ct});return}else if(H.matches)rt=H.matches,Ae=zp(rt,ye);else{Ge(Z,oe,rs(404,{pathname:ye}),{flushSync:Ct});return}}U.set(Z,St);let tn=F,Sn=(await be("loader",L,Xt,[Ae],rt,Z))[Ae.route.id];if(zl(Sn)&&(Sn=await pA(Sn,Xt.signal,!0)||Sn),U.get(Z)===St&&U.delete(Z),!Xt.signal.aborted){if(ce.has(Z)){Ve(Z,Cl(void 0));return}if(Tu(Sn))if(X>tn){Ve(Z,Cl(void 0));return}else{ne.add(Z),await ue(Xt,Sn,!1,{preventScrollReset:dt});return}if(Ps(Sn)){Ge(Z,oe,Sn.error);return}gn(!zl(Sn),"Unhandled fetcher deferred data"),Ve(Z,Cl(Sn.data))}}async function ue(Z,oe,ye,Ae){let{submission:rt,fetcherSubmission:Tt,preventScrollReset:Ct,replace:dt}=Ae===void 0?{}:Ae;oe.response.headers.has("X-Remix-Revalidate")&&(te=!0);let mt=oe.response.headers.get("Location");gn(mt,"Expected a Location header on the redirect Response"),mt=MN(mt,new URL(Z.url),l);let tt=Wm(L.location,mt,{_isRedirect:!0});if(t){let H=!1;if(oe.response.headers.has("X-Remix-Reload-Document"))H=!0;else if(fA.test(mt)){const ee=n.history.createURL(mt);H=ee.origin!==e.location.origin||Tf(ee.pathname,l)==null}if(H){dt?e.location.replace(mt):e.location.assign(mt);return}}A=null;let St=dt===!0||oe.response.headers.has("X-Remix-Replace")?ki.Replace:ki.Push,{formMethod:Xt,formAction:tn,formEncType:Dn}=L.navigation;!rt&&!Tt&&Xt&&tn&&Dn&&(rt=kN(L.navigation));let Sn=rt||Tt;if(t9.has(oe.response.status)&&Sn&&_o(Sn.formMethod))await nt(St,tt,{submission:ni({},Sn,{formAction:mt}),preventScrollReset:Ct||I,enableViewTransition:ye?M:void 0});else{let H=FS(tt,rt);await nt(St,tt,{overrideNavigation:H,fetcherSubmission:Tt,preventScrollReset:Ct||I,enableViewTransition:ye?M:void 0})}}async function be(Z,oe,ye,Ae,rt,Tt){let Ct,dt={};try{Ct=await c9(c,Z,oe,ye,Ae,rt,Tt,s,r)}catch(mt){return Ae.forEach(tt=>{dt[tt.route.id]={type:Gn.error,error:mt}}),dt}for(let[mt,tt]of Object.entries(Ct))if(m9(tt)){let St=tt.result;dt[mt]={type:Gn.redirect,response:d9(St,ye,mt,rt,l,f.v7_relativeSplatPath)}}else dt[mt]=await h9(tt);return dt}async function Re(Z,oe,ye,Ae,rt){let Tt=Z.matches,Ct=be("loader",Z,rt,ye,oe,null),dt=Promise.all(Ae.map(async St=>{if(St.matches&&St.match&&St.controller){let tn=(await be("loader",Z,Oh(n.history,St.path,St.controller.signal),[St.match],St.matches,St.key))[St.match.route.id];return{[St.key]:tn}}else return Promise.resolve({[St.key]:{type:Gn.error,error:rs(404,{pathname:St.path})}})})),mt=await Ct,tt=(await dt).reduce((St,Xt)=>Object.assign(St,Xt),{});return await Promise.all([v9(oe,mt,rt.signal,Tt,Z.loaderData),x9(oe,tt,Ae)]),{loaderResults:mt,fetcherResults:tt}}function xe(){te=!0,he.push(..._e()),fe.forEach((Z,oe)=>{U.has(oe)&&de.add(oe),Je(oe)})}function Ve(Z,oe,ye){ye===void 0&&(ye={}),L.fetchers.set(Z,oe),ze({fetchers:new Map(L.fetchers)},{flushSync:(ye&&ye.flushSync)===!0})}function Ge(Z,oe,ye,Ae){Ae===void 0&&(Ae={});let rt=xu(L.matches,oe);$t(Z),ze({errors:{[rt.route.id]:ye},fetchers:new Map(L.fetchers)},{flushSync:(Ae&&Ae.flushSync)===!0})}function st(Z){return f.v7_fetcherPersist&&(Ce.set(Z,(Ce.get(Z)||0)+1),ce.has(Z)&&ce.delete(Z)),L.fetchers.get(Z)||n9}function $t(Z){let oe=L.fetchers.get(Z);U.has(Z)&&!(oe&&oe.state==="loading"&&Y.has(Z))&&Je(Z),fe.delete(Z),Y.delete(Z),ne.delete(Z),ce.delete(Z),de.delete(Z),L.fetchers.delete(Z)}function je(Z){if(f.v7_fetcherPersist){let oe=(Ce.get(Z)||0)-1;oe<=0?(Ce.delete(Z),ce.add(Z)):Ce.set(Z,oe)}else $t(Z);ze({fetchers:new Map(L.fetchers)})}function Je(Z){let oe=U.get(Z);oe&&(oe.abort(),U.delete(Z))}function Nt(Z){for(let oe of Z){let ye=st(oe),Ae=Cl(ye.data);L.fetchers.set(oe,Ae)}}function Ot(){let Z=[],oe=!1;for(let ye of ne){let Ae=L.fetchers.get(ye);gn(Ae,"Expected fetcher: "+ye),Ae.state==="loading"&&(ne.delete(ye),Z.push(ye),oe=!0)}return Nt(Z),oe}function ht(Z){let oe=[];for(let[ye,Ae]of Y)if(Ae<Z){let rt=L.fetchers.get(ye);gn(rt,"Expected fetcher: "+ye),rt.state==="loading"&&(Je(ye),Y.delete(ye),oe.push(ye))}return Nt(oe),oe.length>0}function an(Z,oe){let ye=L.blockers.get(Z)||vp;return Oe.get(Z)!==oe&&Oe.set(Z,oe),ye}function Ht(Z){L.blockers.delete(Z),Oe.delete(Z)}function hn(Z,oe){let ye=L.blockers.get(Z)||vp;gn(ye.state==="unblocked"&&oe.state==="blocked"||ye.state==="blocked"&&oe.state==="blocked"||ye.state==="blocked"&&oe.state==="proceeding"||ye.state==="blocked"&&oe.state==="unblocked"||ye.state==="proceeding"&&oe.state==="unblocked","Invalid blocker state transition: "+ye.state+" -> "+oe.state);let Ae=new Map(L.blockers);Ae.set(Z,oe),ze({blockers:Ae})}function ie(Z){let{currentLocation:oe,nextLocation:ye,historyAction:Ae}=Z;if(Oe.size===0)return;Oe.size>1&&rf(!1,"A router only supports one blocker at a time");let rt=Array.from(Oe.entries()),[Tt,Ct]=rt[rt.length-1],dt=L.blockers.get(Tt);if(!(dt&&dt.state==="proceeding")&&Ct({currentLocation:oe,nextLocation:ye,historyAction:Ae}))return Tt}function Ke(Z){let oe=rs(404,{pathname:Z}),ye=a||o,{matches:Ae,route:rt}=LN(ye);return _e(),{notFoundMatches:Ae,route:rt,error:oe}}function _e(Z){let oe=[];return Ee.forEach((ye,Ae)=>{(!Z||Z(Ae))&&(ye.cancel(),oe.push(Ae),Ee.delete(Ae))}),oe}function Ie(Z,oe,ye){if(x=Z,w=oe,b=ye||null,!v&&L.navigation===US){v=!0;let Ae=Ft(L.location,L.matches);Ae!=null&&ze({restoreScrollPosition:Ae})}return()=>{x=null,w=null,b=null}}function et(Z,oe){return b&&b(Z,oe.map(Ae=>LW(Ae,L.loaderData)))||Z.key}function $e(Z,oe){if(x&&w){let ye=et(Z,oe);x[ye]=w()}}function Ft(Z,oe){if(x){let ye=et(Z,oe),Ae=x[ye];if(typeof Ae=="number")return Ae}return null}function bn(Z,oe,ye){if(u)if(Z){if(Object.keys(Z[0].params).length>0)return{active:!0,matches:R0(oe,ye,l,!0)}}else return{active:!0,matches:R0(oe,ye,l,!0)||[]};return{active:!1,matches:null}}async function $n(Z,oe,ye){if(!u)return{type:"success",matches:Z};let Ae=Z;for(;;){let rt=a==null,Tt=a||o,Ct=s;try{await u({path:oe,matches:Ae,patch:(tt,St)=>{ye.aborted||AN(tt,St,Tt,Ct,r)}})}catch(tt){return{type:"error",error:tt,partialMatches:Ae}}finally{rt&&!ye.aborted&&(o=[...o])}if(ye.aborted)return{type:"aborted"};let dt=vu(Tt,oe,l);if(dt)return{type:"success",matches:dt};let mt=R0(Tt,oe,l,!0);if(!mt||Ae.length===mt.length&&Ae.every((tt,St)=>tt.route.id===mt[St].route.id))return{type:"success",matches:null};Ae=mt}}function ln(Z){s={},a=_x(Z,r,void 0,s)}function Bi(Z,oe){let ye=a==null;AN(Z,oe,a||o,s,r),ye&&(o=[...o],ze({}))}return V={get basename(){return l},get future(){return f},get state(){return L},get routes(){return o},get window(){return e},initialize:xt,subscribe:lt,enableScrollRestoration:Ie,navigate:Me,fetch:Ye,revalidate:Q,createHref:Z=>n.history.createHref(Z),encodeLocation:Z=>n.history.encodeLocation(Z),getFetcher:st,deleteFetcher:je,dispose:Dt,getBlocker:an,deleteBlocker:Ht,patchRoutes:Bi,_internalFetchControllers:U,_internalActiveDeferreds:Ee,_internalSetRoutes:ln},V}function s9(n){return n!=null&&("formData"in n&&n.formData!=null||"body"in n&&n.body!==void 0)}function tE(n,e,t,i,r,s,o,a){let l,c;if(o){l=[];for(let f of e)if(l.push(f),f.route.id===o){c=f;break}}else l=e,c=e[e.length-1];let u=dA(r||".",hA(l,s),Tf(n.pathname,t)||n.pathname,a==="path");if(r==null&&(u.search=n.search,u.hash=n.hash),(r==null||r===""||r===".")&&c){let f=mA(u.search);if(c.route.index&&!f)u.search=u.search?u.search.replace(/^\?/,"?index&"):"?index";else if(!c.route.index&&f){let m=new URLSearchParams(u.search),g=m.getAll("index");m.delete("index"),g.filter(b=>b).forEach(b=>m.append("index",b));let x=m.toString();u.search=x?"?"+x:""}}return i&&t!=="/"&&(u.pathname=u.pathname==="/"?t:ka([t,u.pathname])),$u(u)}function SN(n,e,t,i){if(!i||!s9(i))return{path:t};if(i.formMethod&&!y9(i.formMethod))return{path:t,error:rs(405,{method:i.formMethod})};let r=()=>({path:t,error:rs(400,{type:"invalid-body"})}),s=i.formMethod||"get",o=n?s.toUpperCase():s.toLowerCase(),a=mF(t);if(i.body!==void 0){if(i.formEncType==="text/plain"){if(!_o(o))return r();let m=typeof i.body=="string"?i.body:i.body instanceof FormData||i.body instanceof URLSearchParams?Array.from(i.body.entries()).reduce((g,x)=>{let[b,w]=x;return""+g+b+"="+w+`
`},""):String(i.body);return{path:t,submission:{formMethod:o,formAction:a,formEncType:i.formEncType,formData:void 0,json:void 0,text:m}}}else if(i.formEncType==="application/json"){if(!_o(o))return r();try{let m=typeof i.body=="string"?JSON.parse(i.body):i.body;return{path:t,submission:{formMethod:o,formAction:a,formEncType:i.formEncType,formData:void 0,json:m,text:void 0}}}catch{return r()}}}gn(typeof FormData=="function","FormData is not available in this environment");let l,c;if(i.formData)l=iE(i.formData),c=i.formData;else if(i.body instanceof FormData)l=iE(i.body),c=i.body;else if(i.body instanceof URLSearchParams)l=i.body,c=IN(l);else if(i.body==null)l=new URLSearchParams,c=new FormData;else try{l=new URLSearchParams(i.body),c=IN(l)}catch{return r()}let u={formMethod:o,formAction:a,formEncType:i&&i.formEncType||"application/x-www-form-urlencoded",formData:c,json:void 0,text:void 0};if(_o(u.formMethod))return{path:t,submission:u};let f=Sc(t);return e&&f.search&&mA(f.search)&&l.append("index",""),f.search="?"+l,{path:$u(f),submission:u}}function TN(n,e,t){t===void 0&&(t=!1);let i=n.findIndex(r=>r.route.id===e);return i>=0?n.slice(0,t?i+1:i):n}function EN(n,e,t,i,r,s,o,a,l,c,u,f,m,g,x,b){let w=b?Ps(b[1])?b[1].error:b[1].data:void 0,v=n.createURL(e.location),S=n.createURL(r),E=t;s&&e.errors?E=TN(t,Object.keys(e.errors)[0],!0):b&&Ps(b[1])&&(E=TN(t,b[0]));let C=b?b[1].statusCode:void 0,V=o&&C&&C>=400,L=E.filter((I,A)=>{let{route:M}=I;if(M.lazy)return!0;if(M.loader==null)return!1;if(s)return nE(M,e.loaderData,e.errors);if(o9(e.loaderData,e.matches[A],I)||l.some(j=>j===I.route.id))return!0;let D=e.matches[A],z=I;return CN(I,ni({currentUrl:v,currentParams:D.params,nextUrl:S,nextParams:z.params},i,{actionResult:w,actionStatus:C,defaultShouldRevalidate:V?!1:a||v.pathname+v.search===S.pathname+S.search||v.search!==S.search||fF(D,z)}))}),N=[];return f.forEach((I,A)=>{if(s||!t.some(te=>te.route.id===I.routeId)||u.has(A))return;let M=vu(g,I.path,x);if(!M){N.push({key:A,routeId:I.routeId,path:I.path,matches:null,match:null,controller:null});return}let D=e.fetchers.get(A),z=zp(M,I.path),j=!1;m.has(A)?j=!1:c.has(A)?(c.delete(A),j=!0):D&&D.state!=="idle"&&D.data===void 0?j=a:j=CN(z,ni({currentUrl:v,currentParams:e.matches[e.matches.length-1].params,nextUrl:S,nextParams:t[t.length-1].params},i,{actionResult:w,actionStatus:C,defaultShouldRevalidate:V?!1:a})),j&&N.push({key:A,routeId:I.routeId,path:I.path,matches:M,match:z,controller:new AbortController})}),[L,N]}function nE(n,e,t){if(n.lazy)return!0;if(!n.loader)return!1;let i=e!=null&&e[n.id]!==void 0,r=t!=null&&t[n.id]!==void 0;return!i&&r?!1:typeof n.loader=="function"&&n.loader.hydrate===!0?!0:!i&&!r}function o9(n,e,t){let i=!e||t.route.id!==e.route.id,r=n[t.route.id]===void 0;return i||r}function fF(n,e){let t=n.route.path;return n.pathname!==e.pathname||t!=null&&t.endsWith("*")&&n.params["*"]!==e.params["*"]}function CN(n,e){if(n.route.shouldRevalidate){let t=n.route.shouldRevalidate(e);if(typeof t=="boolean")return t}return e.defaultShouldRevalidate}function AN(n,e,t,i,r){var s;let o;if(n){let c=i[n];gn(c,"No route found to patch children into: routeId = "+n),c.children||(c.children=[]),o=c.children}else o=t;let a=e.filter(c=>!o.some(u=>pF(c,u))),l=_x(a,r,[n||"_","patch",String(((s=o)==null?void 0:s.length)||"0")],i);o.push(...l)}function pF(n,e){return"id"in n&&"id"in e&&n.id===e.id?!0:n.index===e.index&&n.path===e.path&&n.caseSensitive===e.caseSensitive?(!n.children||n.children.length===0)&&(!e.children||e.children.length===0)?!0:n.children.every((t,i)=>{var r;return(r=e.children)==null?void 0:r.some(s=>pF(t,s))}):!1}async function a9(n,e,t){if(!n.lazy)return;let i=await n.lazy();if(!n.lazy)return;let r=t[n.id];gn(r,"No route found in manifest");let s={};for(let o in i){let l=r[o]!==void 0&&o!=="hasErrorBoundary";rf(!l,'Route "'+r.id+'" has a static property "'+o+'" defined but its lazy function is also returning a value for this property. '+('The lazy route property "'+o+'" will be ignored.')),!l&&!RW.has(o)&&(s[o]=i[o])}Object.assign(r,s),Object.assign(r,ni({},e(r),{lazy:void 0}))}async function l9(n){let{matches:e}=n,t=e.filter(r=>r.shouldLoad);return(await Promise.all(t.map(r=>r.resolve()))).reduce((r,s,o)=>Object.assign(r,{[t[o].route.id]:s}),{})}async function c9(n,e,t,i,r,s,o,a,l,c){let u=s.map(g=>g.route.lazy?a9(g.route,l,a):void 0),f=s.map((g,x)=>{let b=u[x],w=r.some(S=>S.route.id===g.route.id);return ni({},g,{shouldLoad:w,resolve:async S=>(S&&i.method==="GET"&&(g.route.lazy||g.route.loader)&&(w=!0),w?u9(e,i,g,b,S,c):Promise.resolve({type:Gn.data,result:void 0}))})}),m=await n({matches:f,request:i,params:s[0].params,fetcherKey:o,context:c});try{await Promise.all(u)}catch{}return m}async function u9(n,e,t,i,r,s){let o,a,l=c=>{let u,f=new Promise((x,b)=>u=b);a=()=>u(),e.signal.addEventListener("abort",a);let m=x=>typeof c!="function"?Promise.reject(new Error("You cannot call the handler for a route which defines a boolean "+('"'+n+'" [routeId: '+t.route.id+"]"))):c({request:e,params:t.params,context:s},...x!==void 0?[x]:[]),g=(async()=>{try{return{type:"data",result:await(r?r(b=>m(b)):m())}}catch(x){return{type:"error",result:x}}})();return Promise.race([g,f])};try{let c=t.route[n];if(i)if(c){let u,[f]=await Promise.all([l(c).catch(m=>{u=m}),i]);if(u!==void 0)throw u;o=f}else if(await i,c=t.route[n],c)o=await l(c);else if(n==="action"){let u=new URL(e.url),f=u.pathname+u.search;throw rs(405,{method:e.method,pathname:f,routeId:t.route.id})}else return{type:Gn.data,result:void 0};else if(c)o=await l(c);else{let u=new URL(e.url),f=u.pathname+u.search;throw rs(404,{pathname:f})}gn(o.result!==void 0,"You defined "+(n==="action"?"an action":"a loader")+" for route "+('"'+t.route.id+"\" but didn't return anything from your `"+n+"` ")+"function. Please return a value or `null`.")}catch(c){return{type:Gn.error,result:c}}finally{a&&e.signal.removeEventListener("abort",a)}return o}async function h9(n){let{result:e,type:t}=n;if(gF(e)){let c;try{let u=e.headers.get("Content-Type");u&&/\bapplication\/json\b/.test(u)?e.body==null?c=null:c=await e.json():c=await e.text()}catch(u){return{type:Gn.error,error:u}}return t===Gn.error?{type:Gn.error,error:new wx(e.status,e.statusText,c),statusCode:e.status,headers:e.headers}:{type:Gn.data,data:c,statusCode:e.status,headers:e.headers}}if(t===Gn.error){if(DN(e)){var i;if(e.data instanceof Error){var r;return{type:Gn.error,error:e.data,statusCode:(r=e.init)==null?void 0:r.status}}e=new wx(((i=e.init)==null?void 0:i.status)||500,void 0,e.data)}return{type:Gn.error,error:e,statusCode:iw(e)?e.status:void 0}}if(g9(e)){var s,o;return{type:Gn.deferred,deferredData:e,statusCode:(s=e.init)==null?void 0:s.status,headers:((o=e.init)==null?void 0:o.headers)&&new Headers(e.init.headers)}}if(DN(e)){var a,l;return{type:Gn.data,data:e.data,statusCode:(a=e.init)==null?void 0:a.status,headers:(l=e.init)!=null&&l.headers?new Headers(e.init.headers):void 0}}return{type:Gn.data,data:e}}function d9(n,e,t,i,r,s){let o=n.headers.get("Location");if(gn(o,"Redirects returned/thrown from loaders/actions must have a Location header"),!fA.test(o)){let a=i.slice(0,i.findIndex(l=>l.route.id===t)+1);o=tE(new URL(e.url),a,r,!0,o,s),n.headers.set("Location",o)}return n}function MN(n,e,t){if(fA.test(n)){let i=n,r=i.startsWith("//")?new URL(e.protocol+i):new URL(i),s=Tf(r.pathname,t)!=null;if(r.origin===e.origin&&s)return r.pathname+r.search+r.hash}return n}function Oh(n,e,t,i){let r=n.createURL(mF(e)).toString(),s={signal:t};if(i&&_o(i.formMethod)){let{formMethod:o,formEncType:a}=i;s.method=o.toUpperCase(),a==="application/json"?(s.headers=new Headers({"Content-Type":a}),s.body=JSON.stringify(i.json)):a==="text/plain"?s.body=i.text:a==="application/x-www-form-urlencoded"&&i.formData?s.body=iE(i.formData):s.body=i.formData}return new Request(r,s)}function iE(n){let e=new URLSearchParams;for(let[t,i]of n.entries())e.append(t,typeof i=="string"?i:i.name);return e}function IN(n){let e=new FormData;for(let[t,i]of n.entries())e.append(t,i);return e}function f9(n,e,t,i,r){let s={},o=null,a,l=!1,c={},u=t&&Ps(t[1])?t[1].error:void 0;return n.forEach(f=>{if(!(f.route.id in e))return;let m=f.route.id,g=e[m];if(gn(!Tu(g),"Cannot handle redirect results in processLoaderData"),Ps(g)){let x=g.error;u!==void 0&&(x=u,u=void 0),o=o||{};{let b=xu(n,m);o[b.route.id]==null&&(o[b.route.id]=x)}s[m]=void 0,l||(l=!0,a=iw(g.error)?g.error.status:500),g.headers&&(c[m]=g.headers)}else zl(g)?(i.set(m,g.deferredData),s[m]=g.deferredData.data,g.statusCode!=null&&g.statusCode!==200&&!l&&(a=g.statusCode),g.headers&&(c[m]=g.headers)):(s[m]=g.data,g.statusCode&&g.statusCode!==200&&!l&&(a=g.statusCode),g.headers&&(c[m]=g.headers))}),u!==void 0&&t&&(o={[t[0]]:u},s[t[0]]=void 0),{loaderData:s,errors:o,statusCode:a||200,loaderHeaders:c}}function PN(n,e,t,i,r,s,o){let{loaderData:a,errors:l}=f9(e,t,i,o);return r.forEach(c=>{let{key:u,match:f,controller:m}=c,g=s[u];if(gn(g,"Did not find corresponding fetcher result"),!(m&&m.signal.aborted))if(Ps(g)){let x=xu(n.matches,f?.route.id);l&&l[x.route.id]||(l=ni({},l,{[x.route.id]:g.error})),n.fetchers.delete(u)}else if(Tu(g))gn(!1,"Unhandled fetcher revalidation redirect");else if(zl(g))gn(!1,"Unhandled fetcher deferred data");else{let x=Cl(g.data);n.fetchers.set(u,x)}}),{loaderData:a,errors:l}}function RN(n,e,t,i){let r=ni({},e);for(let s of t){let o=s.route.id;if(e.hasOwnProperty(o)?e[o]!==void 0&&(r[o]=e[o]):n[o]!==void 0&&s.route.loader&&(r[o]=n[o]),i&&i.hasOwnProperty(o))break}return r}function NN(n){return n?Ps(n[1])?{actionData:{}}:{actionData:{[n[0]]:n[1].data}}:{}}function xu(n,e){return(e?n.slice(0,n.findIndex(i=>i.route.id===e)+1):[...n]).reverse().find(i=>i.route.hasErrorBoundary===!0)||n[0]}function LN(n){let e=n.length===1?n[0]:n.find(t=>t.index||!t.path||t.path==="/")||{id:"__shim-error-route__"};return{matches:[{params:{},pathname:"",pathnameBase:"",route:e}],route:e}}function rs(n,e){let{pathname:t,routeId:i,method:r,type:s,message:o}=e===void 0?{}:e,a="Unknown Server Error",l="Unknown @remix-run/router error";return n===400?(a="Bad Request",r&&t&&i?l="You made a "+r+' request to "'+t+'" but '+('did not provide a `loader` for route "'+i+'", ')+"so there is no way to handle the request.":s==="defer-action"?l="defer() is not supported in actions":s==="invalid-body"&&(l="Unable to encode submission body")):n===403?(a="Forbidden",l='Route "'+i+'" does not match URL "'+t+'"'):n===404?(a="Not Found",l='No route matches URL "'+t+'"'):n===405&&(a="Method Not Allowed",r&&t&&i?l="You made a "+r.toUpperCase()+' request to "'+t+'" but '+('did not provide an `action` for route "'+i+'", ')+"so there is no way to handle the request.":r&&(l='Invalid request method "'+r.toUpperCase()+'"')),new wx(n||500,a,new Error(l),!0)}function fv(n){let e=Object.entries(n);for(let t=e.length-1;t>=0;t--){let[i,r]=e[t];if(Tu(r))return{key:i,result:r}}}function mF(n){let e=typeof n=="string"?Sc(n):n;return $u(ni({},e,{hash:""}))}function p9(n,e){return n.pathname!==e.pathname||n.search!==e.search?!1:n.hash===""?e.hash!=="":n.hash===e.hash?!0:e.hash!==""}function m9(n){return gF(n.result)&&e9.has(n.result.status)}function zl(n){return n.type===Gn.deferred}function Ps(n){return n.type===Gn.error}function Tu(n){return(n&&n.type)===Gn.redirect}function DN(n){return typeof n=="object"&&n!=null&&"type"in n&&"data"in n&&"init"in n&&n.type==="DataWithResponseInit"}function g9(n){let e=n;return e&&typeof e=="object"&&typeof e.data=="object"&&typeof e.subscribe=="function"&&typeof e.cancel=="function"&&typeof e.resolveData=="function"}function gF(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.headers=="object"&&typeof n.body<"u"}function y9(n){return ZW.has(n.toLowerCase())}function _o(n){return JW.has(n.toLowerCase())}async function v9(n,e,t,i,r){let s=Object.entries(e);for(let o=0;o<s.length;o++){let[a,l]=s[o],c=n.find(m=>m?.route.id===a);if(!c)continue;let u=i.find(m=>m.route.id===c.route.id),f=u!=null&&!fF(u,c)&&(r&&r[c.route.id])!==void 0;zl(l)&&f&&await pA(l,t,!1).then(m=>{m&&(e[a]=m)})}}async function x9(n,e,t){for(let i=0;i<t.length;i++){let{key:r,routeId:s,controller:o}=t[i],a=e[r];n.find(c=>c?.route.id===s)&&zl(a)&&(gn(o,"Expected an AbortController for revalidating fetcher deferred result"),await pA(a,o.signal,!0).then(c=>{c&&(e[r]=c)}))}}async function pA(n,e,t){if(t===void 0&&(t=!1),!await n.deferredData.resolveData(e)){if(t)try{return{type:Gn.data,data:n.deferredData.unwrappedData}}catch(r){return{type:Gn.error,error:r}}return{type:Gn.data,data:n.deferredData.data}}}function mA(n){return new URLSearchParams(n).getAll("index").some(e=>e==="")}function zp(n,e){let t=typeof e=="string"?Sc(e).search:e.search;if(n[n.length-1].route.index&&mA(t||""))return n[n.length-1];let i=uF(n);return i[i.length-1]}function kN(n){let{formMethod:e,formAction:t,formEncType:i,text:r,formData:s,json:o}=n;if(!(!e||!t||!i)){if(r!=null)return{formMethod:e,formAction:t,formEncType:i,formData:void 0,json:void 0,text:r};if(s!=null)return{formMethod:e,formAction:t,formEncType:i,formData:s,json:void 0,text:void 0};if(o!==void 0)return{formMethod:e,formAction:t,formEncType:i,formData:void 0,json:o,text:void 0}}}function FS(n,e){return e?{state:"loading",location:n,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}:{state:"loading",location:n,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0}}function _9(n,e){return{state:"submitting",location:n,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}}function xp(n,e){return n?{state:"loading",formMethod:n.formMethod,formAction:n.formAction,formEncType:n.formEncType,formData:n.formData,json:n.json,text:n.text,data:e}:{state:"loading",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:e}}function w9(n,e){return{state:"submitting",formMethod:n.formMethod,formAction:n.formAction,formEncType:n.formEncType,formData:n.formData,json:n.json,text:n.text,data:e?e.data:void 0}}function Cl(n){return{state:"idle",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:n}}function b9(n,e){try{let t=n.sessionStorage.getItem(dF);if(t){let i=JSON.parse(t);for(let[r,s]of Object.entries(i||{}))s&&Array.isArray(s)&&e.set(r,new Set(s||[]))}}catch{}}function S9(n,e){if(e.size>0){let t={};for(let[i,r]of e)t[i]=[...r];try{n.sessionStorage.setItem(dF,JSON.stringify(t))}catch(i){rf(!1,"Failed to save applied view transitions in sessionStorage ("+i+").")}}}/**
 * React Router v6.28.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function bx(){return bx=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},bx.apply(this,arguments)}const rw=B.createContext(null),yF=B.createContext(null),oh=B.createContext(null),gA=B.createContext(null),Tc=B.createContext({outlet:null,matches:[],isDataRoute:!1}),vF=B.createContext(null);function T9(n,e){let{relative:t}=e===void 0?{}:e;Dg()||gn(!1);let{basename:i,navigator:r}=B.useContext(oh),{hash:s,pathname:o,search:a}=_F(n,{relative:t}),l=o;return i!=="/"&&(l=o==="/"?i:ka([i,o])),r.createHref({pathname:l,search:a,hash:s})}function Dg(){return B.useContext(gA)!=null}function Lo(){return Dg()||gn(!1),B.useContext(gA).location}function xF(n){B.useContext(oh).static||B.useLayoutEffect(n)}function qt(){let{isDataRoute:n}=B.useContext(Tc);return n?F9():E9()}function E9(){Dg()||gn(!1);let n=B.useContext(rw),{basename:e,future:t,navigator:i}=B.useContext(oh),{matches:r}=B.useContext(Tc),{pathname:s}=Lo(),o=JSON.stringify(hA(r,t.v7_relativeSplatPath)),a=B.useRef(!1);return xF(()=>{a.current=!0}),B.useCallback(function(c,u){if(u===void 0&&(u={}),!a.current)return;if(typeof c=="number"){i.go(c);return}let f=dA(c,JSON.parse(o),s,u.relative==="path");n==null&&e!=="/"&&(f.pathname=f.pathname==="/"?e:ka([e,f.pathname])),(u.replace?i.replace:i.push)(f,u.state,u)},[e,i,o,s,n])}const C9=B.createContext(null);function A9(n){let e=B.useContext(Tc).outlet;return e&&B.createElement(C9.Provider,{value:n},e)}function _F(n,e){let{relative:t}=e===void 0?{}:e,{future:i}=B.useContext(oh),{matches:r}=B.useContext(Tc),{pathname:s}=Lo(),o=JSON.stringify(hA(r,i.v7_relativeSplatPath));return B.useMemo(()=>dA(n,JSON.parse(o),s,t==="path"),[n,o,s,t])}function M9(n,e,t,i){Dg()||gn(!1);let{navigator:r}=B.useContext(oh),{matches:s}=B.useContext(Tc),o=s[s.length-1],a=o?o.params:{};o&&o.pathname;let l=o?o.pathnameBase:"/";o&&o.route;let c=Lo(),u;u=c;let f=u.pathname||"/",m=f;if(l!=="/"){let b=l.replace(/^\//,"").split("/");m="/"+f.replace(/^\//,"").split("/").slice(b.length).join("/")}let g=vu(n,{pathname:m});return L9(g&&g.map(b=>Object.assign({},b,{params:Object.assign({},a,b.params),pathname:ka([l,r.encodeLocation?r.encodeLocation(b.pathname).pathname:b.pathname]),pathnameBase:b.pathnameBase==="/"?l:ka([l,r.encodeLocation?r.encodeLocation(b.pathnameBase).pathname:b.pathnameBase])})),s,t,i)}function I9(){let n=U9(),e=iw(n)?n.status+" "+n.statusText:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,r={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return B.createElement(B.Fragment,null,B.createElement("h2",null,"Unexpected Application Error!"),B.createElement("h3",{style:{fontStyle:"italic"}},e),t?B.createElement("pre",{style:r},t):null,null)}const P9=B.createElement(I9,null);class R9 extends B.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error!==void 0?B.createElement(Tc.Provider,{value:this.props.routeContext},B.createElement(vF.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function N9(n){let{routeContext:e,match:t,children:i}=n,r=B.useContext(rw);return r&&r.static&&r.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=t.route.id),B.createElement(Tc.Provider,{value:e},i)}function L9(n,e,t,i){var r;if(e===void 0&&(e=[]),t===void 0&&(t=null),i===void 0&&(i=null),n==null){var s;if(!t)return null;if(t.errors)n=t.matches;else if((s=i)!=null&&s.v7_partialHydration&&e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let o=n,a=(r=t)==null?void 0:r.errors;if(a!=null){let u=o.findIndex(f=>f.route.id&&a?.[f.route.id]!==void 0);u>=0||gn(!1),o=o.slice(0,Math.min(o.length,u+1))}let l=!1,c=-1;if(t&&i&&i.v7_partialHydration)for(let u=0;u<o.length;u++){let f=o[u];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(c=u),f.route.id){let{loaderData:m,errors:g}=t,x=f.route.loader&&m[f.route.id]===void 0&&(!g||g[f.route.id]===void 0);if(f.route.lazy||x){l=!0,c>=0?o=o.slice(0,c+1):o=[o[0]];break}}}return o.reduceRight((u,f,m)=>{let g,x=!1,b=null,w=null;t&&(g=a&&f.route.id?a[f.route.id]:void 0,b=f.route.errorElement||P9,l&&(c<0&&m===0?(j9("route-fallback"),x=!0,w=null):c===m&&(x=!0,w=f.route.hydrateFallbackElement||null)));let v=e.concat(o.slice(0,m+1)),S=()=>{let E;return g?E=b:x?E=w:f.route.Component?E=B.createElement(f.route.Component,null):f.route.element?E=f.route.element:E=u,B.createElement(N9,{match:f,routeContext:{outlet:u,matches:v,isDataRoute:t!=null},children:E})};return t&&(f.route.ErrorBoundary||f.route.errorElement||m===0)?B.createElement(R9,{location:t.location,revalidation:t.revalidation,component:b,error:g,children:S(),routeContext:{outlet:null,matches:v,isDataRoute:!0}}):S()},null)}var wF=function(n){return n.UseBlocker="useBlocker",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n}(wF||{}),Sx=function(n){return n.UseBlocker="useBlocker",n.UseLoaderData="useLoaderData",n.UseActionData="useActionData",n.UseRouteError="useRouteError",n.UseNavigation="useNavigation",n.UseRouteLoaderData="useRouteLoaderData",n.UseMatches="useMatches",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n.UseRouteId="useRouteId",n}(Sx||{});function D9(n){let e=B.useContext(rw);return e||gn(!1),e}function k9(n){let e=B.useContext(yF);return e||gn(!1),e}function O9(n){let e=B.useContext(Tc);return e||gn(!1),e}function bF(n){let e=O9(),t=e.matches[e.matches.length-1];return t.route.id||gn(!1),t.route.id}function U9(){var n;let e=B.useContext(vF),t=k9(Sx.UseRouteError),i=bF(Sx.UseRouteError);return e!==void 0?e:(n=t.errors)==null?void 0:n[i]}function F9(){let{router:n}=D9(wF.UseNavigateStable),e=bF(Sx.UseNavigateStable),t=B.useRef(!1);return xF(()=>{t.current=!0}),B.useCallback(function(r,s){s===void 0&&(s={}),t.current&&(typeof r=="number"?n.navigate(r):n.navigate(r,bx({fromRouteId:e},s)))},[n,e])}const ON={};function j9(n,e,t){ON[n]||(ON[n]=!0)}const UN={};function V9(n,e){UN[e]||(UN[e]=!0,console.warn(e))}const Uh=(n,e,t)=>V9(n," React Router Future Flag Warning: "+e+". "+("You can use the `"+n+"` future flag to opt-in early. ")+("For more information, see "+t+"."));function B9(n,e){n!=null&&n.v7_startTransition||Uh("v7_startTransition","React Router will begin wrapping state updates in `React.startTransition` in v7","https://reactrouter.com/v6/upgrading/future#v7_starttransition"),!(n!=null&&n.v7_relativeSplatPath)&&(!e||!e.v7_relativeSplatPath)&&Uh("v7_relativeSplatPath","Relative route resolution within Splat routes is changing in v7","https://reactrouter.com/v6/upgrading/future#v7_relativesplatpath"),e&&(e.v7_fetcherPersist||Uh("v7_fetcherPersist","The persistence behavior of fetchers is changing in v7","https://reactrouter.com/v6/upgrading/future#v7_fetcherpersist"),e.v7_normalizeFormMethod||Uh("v7_normalizeFormMethod","Casing of `formMethod` fields is being normalized to uppercase in v7","https://reactrouter.com/v6/upgrading/future#v7_normalizeformmethod"),e.v7_partialHydration||Uh("v7_partialHydration","`RouterProvider` hydration behavior is changing in v7","https://reactrouter.com/v6/upgrading/future#v7_partialhydration"),e.v7_skipActionErrorRevalidation||Uh("v7_skipActionErrorRevalidation","The revalidation behavior after 4xx/5xx `action` responses is changing in v7","https://reactrouter.com/v6/upgrading/future#v7_skipactionerrorrevalidation"))}function z9(n){return A9(n.context)}function H9(n){let{basename:e="/",children:t=null,location:i,navigationType:r=ki.Pop,navigator:s,static:o=!1,future:a}=n;Dg()&&gn(!1);let l=e.replace(/^\/*/,"/"),c=B.useMemo(()=>({basename:l,navigator:s,static:o,future:bx({v7_relativeSplatPath:!1},a)}),[l,a,s,o]);typeof i=="string"&&(i=Sc(i));let{pathname:u="/",search:f="",hash:m="",state:g=null,key:x="default"}=i,b=B.useMemo(()=>{let w=Tf(u,l);return w==null?null:{location:{pathname:w,search:f,hash:m,state:g,key:x},navigationType:r}},[l,u,f,m,g,x,r]);return b==null?null:B.createElement(oh.Provider,{value:c},B.createElement(gA.Provider,{children:t,value:b}))}new Promise(()=>{});function G9(n){let e={hasErrorBoundary:n.ErrorBoundary!=null||n.errorElement!=null};return n.Component&&Object.assign(e,{element:B.createElement(n.Component),Component:void 0}),n.HydrateFallback&&Object.assign(e,{hydrateFallbackElement:B.createElement(n.HydrateFallback),HydrateFallback:void 0}),n.ErrorBoundary&&Object.assign(e,{errorElement:B.createElement(n.ErrorBoundary),ErrorBoundary:void 0}),e}/**
 * React Router DOM v6.28.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function qm(){return qm=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},qm.apply(this,arguments)}function W9(n,e){if(n==null)return{};var t={},i=Object.keys(n),r,s;for(s=0;s<i.length;s++)r=i[s],!(e.indexOf(r)>=0)&&(t[r]=n[r]);return t}function q9(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function $9(n,e){return n.button===0&&(!e||e==="_self")&&!q9(n)}const X9=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],Y9="6";try{window.__reactRouterVersion=Y9}catch{}function K9(n,e){return r9({basename:void 0,future:qm({},void 0,{v7_prependBasename:!0}),history:MW({window:void 0}),hydrationData:J9(),routes:n,mapRouteProperties:G9,dataStrategy:void 0,patchRoutesOnNavigation:void 0,window:void 0}).initialize()}function J9(){var n;let e=(n=window)==null?void 0:n.__staticRouterHydrationData;return e&&e.errors&&(e=qm({},e,{errors:Q9(e.errors)})),e}function Q9(n){if(!n)return null;let e=Object.entries(n),t={};for(let[i,r]of e)if(r&&r.__type==="RouteErrorResponse")t[i]=new wx(r.status,r.statusText,r.data,r.internal===!0);else if(r&&r.__type==="Error"){if(r.__subType){let s=window[r.__subType];if(typeof s=="function")try{let o=new s(r.message);o.stack="",t[i]=o}catch{}}if(t[i]==null){let s=new Error(r.message);s.stack="",t[i]=s}}else t[i]=r;return t}const Z9=B.createContext({isTransitioning:!1}),e8=B.createContext(new Map),t8="startTransition",FN=mH[t8],n8="flushSync",jN=AW[n8];function i8(n){FN?FN(n):n()}function _p(n){jN?jN(n):n()}let r8=class{constructor(){this.status="pending",this.promise=new Promise((e,t)=>{this.resolve=i=>{this.status==="pending"&&(this.status="resolved",e(i))},this.reject=i=>{this.status==="pending"&&(this.status="rejected",t(i))}})}};function s8(n){let{fallbackElement:e,router:t,future:i}=n,[r,s]=B.useState(t.state),[o,a]=B.useState(),[l,c]=B.useState({isTransitioning:!1}),[u,f]=B.useState(),[m,g]=B.useState(),[x,b]=B.useState(),w=B.useRef(new Map),{v7_startTransition:v}=i||{},S=B.useCallback(I=>{v?i8(I):I()},[v]),E=B.useCallback((I,A)=>{let{deletedFetchers:M,flushSync:D,viewTransitionOpts:z}=A;M.forEach(te=>w.current.delete(te)),I.fetchers.forEach((te,he)=>{te.data!==void 0&&w.current.set(he,te.data)});let j=t.window==null||t.window.document==null||typeof t.window.document.startViewTransition!="function";if(!z||j){D?_p(()=>s(I)):S(()=>s(I));return}if(D){_p(()=>{m&&(u&&u.resolve(),m.skipTransition()),c({isTransitioning:!0,flushSync:!0,currentLocation:z.currentLocation,nextLocation:z.nextLocation})});let te=t.window.document.startViewTransition(()=>{_p(()=>s(I))});te.finished.finally(()=>{_p(()=>{f(void 0),g(void 0),a(void 0),c({isTransitioning:!1})})}),_p(()=>g(te));return}m?(u&&u.resolve(),m.skipTransition(),b({state:I,currentLocation:z.currentLocation,nextLocation:z.nextLocation})):(a(I),c({isTransitioning:!0,flushSync:!1,currentLocation:z.currentLocation,nextLocation:z.nextLocation}))},[t.window,m,u,w,S]);B.useLayoutEffect(()=>t.subscribe(E),[t,E]),B.useEffect(()=>{l.isTransitioning&&!l.flushSync&&f(new r8)},[l]),B.useEffect(()=>{if(u&&o&&t.window){let I=o,A=u.promise,M=t.window.document.startViewTransition(async()=>{S(()=>s(I)),await A});M.finished.finally(()=>{f(void 0),g(void 0),a(void 0),c({isTransitioning:!1})}),g(M)}},[S,o,u,t.window]),B.useEffect(()=>{u&&o&&r.location.key===o.location.key&&u.resolve()},[u,m,r.location,o]),B.useEffect(()=>{!l.isTransitioning&&x&&(a(x.state),c({isTransitioning:!0,flushSync:!1,currentLocation:x.currentLocation,nextLocation:x.nextLocation}),b(void 0))},[l.isTransitioning,x]),B.useEffect(()=>{},[]);let C=B.useMemo(()=>({createHref:t.createHref,encodeLocation:t.encodeLocation,go:I=>t.navigate(I),push:(I,A,M)=>t.navigate(I,{state:A,preventScrollReset:M?.preventScrollReset}),replace:(I,A,M)=>t.navigate(I,{replace:!0,state:A,preventScrollReset:M?.preventScrollReset})}),[t]),V=t.basename||"/",L=B.useMemo(()=>({router:t,navigator:C,static:!1,basename:V}),[t,C,V]),N=B.useMemo(()=>({v7_relativeSplatPath:t.future.v7_relativeSplatPath}),[t.future.v7_relativeSplatPath]);return B.useEffect(()=>B9(i,t.future),[i,t.future]),B.createElement(B.Fragment,null,B.createElement(rw.Provider,{value:L},B.createElement(yF.Provider,{value:r},B.createElement(e8.Provider,{value:w.current},B.createElement(Z9.Provider,{value:l},B.createElement(H9,{basename:V,location:r.location,navigationType:r.historyAction,navigator:C,future:N},r.initialized||t.future.v7_partialHydration?B.createElement(o8,{routes:t.routes,future:t.future,state:r}):e))))),null)}const o8=B.memo(a8);function a8(n){let{routes:e,future:t,state:i}=n;return M9(e,void 0,i,t)}const l8=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",c8=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Ds=B.forwardRef(function(e,t){let{onClick:i,relative:r,reloadDocument:s,replace:o,state:a,target:l,to:c,preventScrollReset:u,viewTransition:f}=e,m=W9(e,X9),{basename:g}=B.useContext(oh),x,b=!1;if(typeof c=="string"&&c8.test(c)&&(x=c,l8))try{let E=new URL(window.location.href),C=c.startsWith("//")?new URL(E.protocol+c):new URL(c),V=Tf(C.pathname,g);C.origin===E.origin&&V!=null?c=V+C.search+C.hash:b=!0}catch{}let w=T9(c,{relative:r}),v=u8(c,{replace:o,state:a,target:l,preventScrollReset:u,relative:r,viewTransition:f});function S(E){i&&i(E),E.defaultPrevented||v(E)}return B.createElement("a",qm({},m,{href:x||w,onClick:b||s?i:S,ref:t,target:l}))});var VN;(function(n){n.UseScrollRestoration="useScrollRestoration",n.UseSubmit="useSubmit",n.UseSubmitFetcher="useSubmitFetcher",n.UseFetcher="useFetcher",n.useViewTransitionState="useViewTransitionState"})(VN||(VN={}));var BN;(function(n){n.UseFetcher="useFetcher",n.UseFetchers="useFetchers",n.UseScrollRestoration="useScrollRestoration"})(BN||(BN={}));function u8(n,e){let{target:t,replace:i,state:r,preventScrollReset:s,relative:o,viewTransition:a}=e===void 0?{}:e,l=qt(),c=Lo(),u=_F(n,{relative:o});return B.useCallback(f=>{if($9(f,t)){f.preventDefault();let m=i!==void 0?i:$u(c)===$u(u);l(n,{replace:m,state:r,preventScrollReset:s,relative:o,viewTransition:a})}},[c,l,u,i,r,t,n,s,o,a])}var zN;(function(n){n.STRING="string",n.NUMBER="number",n.INTEGER="integer",n.BOOLEAN="boolean",n.ARRAY="array",n.OBJECT="object"})(zN||(zN={}));/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var HN;(function(n){n.LANGUAGE_UNSPECIFIED="language_unspecified",n.PYTHON="python"})(HN||(HN={}));var GN;(function(n){n.OUTCOME_UNSPECIFIED="outcome_unspecified",n.OUTCOME_OK="outcome_ok",n.OUTCOME_FAILED="outcome_failed",n.OUTCOME_DEADLINE_EXCEEDED="outcome_deadline_exceeded"})(GN||(GN={}));/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WN=["user","model","function","system"];var Sd;(function(n){n.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",n.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",n.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",n.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",n.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT"})(Sd||(Sd={}));var Td;(function(n){n.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",n.BLOCK_NONE="BLOCK_NONE"})(Td||(Td={}));var qN;(function(n){n.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",n.NEGLIGIBLE="NEGLIGIBLE",n.LOW="LOW",n.MEDIUM="MEDIUM",n.HIGH="HIGH"})(qN||(qN={}));var $N;(function(n){n.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",n.SAFETY="SAFETY",n.OTHER="OTHER"})($N||($N={}));var cm;(function(n){n.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",n.STOP="STOP",n.MAX_TOKENS="MAX_TOKENS",n.SAFETY="SAFETY",n.RECITATION="RECITATION",n.LANGUAGE="LANGUAGE",n.BLOCKLIST="BLOCKLIST",n.PROHIBITED_CONTENT="PROHIBITED_CONTENT",n.SPII="SPII",n.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",n.OTHER="OTHER"})(cm||(cm={}));var XN;(function(n){n.TASK_TYPE_UNSPECIFIED="TASK_TYPE_UNSPECIFIED",n.RETRIEVAL_QUERY="RETRIEVAL_QUERY",n.RETRIEVAL_DOCUMENT="RETRIEVAL_DOCUMENT",n.SEMANTIC_SIMILARITY="SEMANTIC_SIMILARITY",n.CLASSIFICATION="CLASSIFICATION",n.CLUSTERING="CLUSTERING"})(XN||(XN={}));var YN;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.AUTO="AUTO",n.ANY="ANY",n.NONE="NONE"})(YN||(YN={}));var KN;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.MODE_DYNAMIC="MODE_DYNAMIC"})(KN||(KN={}));/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ls extends Error{constructor(e){super(`[GoogleGenerativeAI Error]: ${e}`)}}class Fh extends ls{constructor(e,t){super(e),this.response=t}}class SF extends ls{constructor(e,t,i,r){super(e),this.status=t,this.statusText=i,this.errorDetails=r}}class Zl extends ls{}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h8="https://generativelanguage.googleapis.com",d8="v1beta",f8="0.22.0",p8="genai-js";var Xu;(function(n){n.GENERATE_CONTENT="generateContent",n.STREAM_GENERATE_CONTENT="streamGenerateContent",n.COUNT_TOKENS="countTokens",n.EMBED_CONTENT="embedContent",n.BATCH_EMBED_CONTENTS="batchEmbedContents"})(Xu||(Xu={}));class m8{constructor(e,t,i,r,s){this.model=e,this.task=t,this.apiKey=i,this.stream=r,this.requestOptions=s}toString(){var e,t;const i=((e=this.requestOptions)===null||e===void 0?void 0:e.apiVersion)||d8;let s=`${((t=this.requestOptions)===null||t===void 0?void 0:t.baseUrl)||h8}/${i}/${this.model}:${this.task}`;return this.stream&&(s+="?alt=sse"),s}}function g8(n){const e=[];return n?.apiClient&&e.push(n.apiClient),e.push(`${p8}/${f8}`),e.join(" ")}async function y8(n){var e;const t=new Headers;t.append("Content-Type","application/json"),t.append("x-goog-api-client",g8(n.requestOptions)),t.append("x-goog-api-key",n.apiKey);let i=(e=n.requestOptions)===null||e===void 0?void 0:e.customHeaders;if(i){if(!(i instanceof Headers))try{i=new Headers(i)}catch(r){throw new Zl(`unable to convert customHeaders value ${JSON.stringify(i)} to Headers: ${r.message}`)}for(const[r,s]of i.entries()){if(r==="x-goog-api-key")throw new Zl(`Cannot set reserved header name ${r}`);if(r==="x-goog-api-client")throw new Zl(`Header name ${r} can only be set using the apiClient field`);t.append(r,s)}}return t}async function v8(n,e,t,i,r,s){const o=new m8(n,e,t,i,s);return{url:o.toString(),fetchOptions:Object.assign(Object.assign({},b8(s)),{method:"POST",headers:await y8(o),body:r})}}async function kg(n,e,t,i,r,s={},o=fetch){const{url:a,fetchOptions:l}=await v8(n,e,t,i,r,s);return x8(a,l,o)}async function x8(n,e,t=fetch){let i;try{i=await t(n,e)}catch(r){_8(r,n)}return i.ok||await w8(i,n),i}function _8(n,e){let t=n;throw n instanceof SF||n instanceof Zl||(t=new ls(`Error fetching from ${e.toString()}: ${n.message}`),t.stack=n.stack),t}async function w8(n,e){let t="",i;try{const r=await n.json();t=r.error.message,r.error.details&&(t+=` ${JSON.stringify(r.error.details)}`,i=r.error.details)}catch{}throw new SF(`Error fetching from ${e.toString()}: [${n.status} ${n.statusText}] ${t}`,n.status,n.statusText,i)}function b8(n){const e={};if(n?.signal!==void 0||n?.timeout>=0){const t=new AbortController;n?.timeout>=0&&setTimeout(()=>t.abort(),n.timeout),n?.signal&&n.signal.addEventListener("abort",()=>{t.abort()}),e.signal=t.signal}return e}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yA(n){return n.text=()=>{if(n.candidates&&n.candidates.length>0){if(n.candidates.length>1&&console.warn(`This response had ${n.candidates.length} candidates. Returning text from the first candidate only. Access response.candidates directly to use the other candidates.`),N0(n.candidates[0]))throw new Fh(`${Pl(n)}`,n);return S8(n)}else if(n.promptFeedback)throw new Fh(`Text not available. ${Pl(n)}`,n);return""},n.functionCall=()=>{if(n.candidates&&n.candidates.length>0){if(n.candidates.length>1&&console.warn(`This response had ${n.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`),N0(n.candidates[0]))throw new Fh(`${Pl(n)}`,n);return console.warn("response.functionCall() is deprecated. Use response.functionCalls() instead."),JN(n)[0]}else if(n.promptFeedback)throw new Fh(`Function call not available. ${Pl(n)}`,n)},n.functionCalls=()=>{if(n.candidates&&n.candidates.length>0){if(n.candidates.length>1&&console.warn(`This response had ${n.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`),N0(n.candidates[0]))throw new Fh(`${Pl(n)}`,n);return JN(n)}else if(n.promptFeedback)throw new Fh(`Function call not available. ${Pl(n)}`,n)},n}function S8(n){var e,t,i,r;const s=[];if(!((t=(e=n.candidates)===null||e===void 0?void 0:e[0].content)===null||t===void 0)&&t.parts)for(const o of(r=(i=n.candidates)===null||i===void 0?void 0:i[0].content)===null||r===void 0?void 0:r.parts)o.text&&s.push(o.text),o.executableCode&&s.push("\n```"+o.executableCode.language+`
`+o.executableCode.code+"\n```\n"),o.codeExecutionResult&&s.push("\n```\n"+o.codeExecutionResult.output+"\n```\n");return s.length>0?s.join(""):""}function JN(n){var e,t,i,r;const s=[];if(!((t=(e=n.candidates)===null||e===void 0?void 0:e[0].content)===null||t===void 0)&&t.parts)for(const o of(r=(i=n.candidates)===null||i===void 0?void 0:i[0].content)===null||r===void 0?void 0:r.parts)o.functionCall&&s.push(o.functionCall);if(s.length>0)return s}const T8=[cm.RECITATION,cm.SAFETY,cm.LANGUAGE];function N0(n){return!!n.finishReason&&T8.includes(n.finishReason)}function Pl(n){var e,t,i;let r="";if((!n.candidates||n.candidates.length===0)&&n.promptFeedback)r+="Response was blocked",!((e=n.promptFeedback)===null||e===void 0)&&e.blockReason&&(r+=` due to ${n.promptFeedback.blockReason}`),!((t=n.promptFeedback)===null||t===void 0)&&t.blockReasonMessage&&(r+=`: ${n.promptFeedback.blockReasonMessage}`);else if(!((i=n.candidates)===null||i===void 0)&&i[0]){const s=n.candidates[0];N0(s)&&(r+=`Candidate was blocked due to ${s.finishReason}`,s.finishMessage&&(r+=`: ${s.finishMessage}`))}return r}function $m(n){return this instanceof $m?(this.v=n,this):new $m(n)}function E8(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=t.apply(n,e||[]),r,s=[];return r={},o("next"),o("throw"),o("return"),r[Symbol.asyncIterator]=function(){return this},r;function o(m){i[m]&&(r[m]=function(g){return new Promise(function(x,b){s.push([m,g,x,b])>1||a(m,g)})})}function a(m,g){try{l(i[m](g))}catch(x){f(s[0][3],x)}}function l(m){m.value instanceof $m?Promise.resolve(m.value.v).then(c,u):f(s[0][2],m)}function c(m){a("next",m)}function u(m){a("throw",m)}function f(m,g){m(g),s.shift(),s.length&&a(s[0][0],s[0][1])}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QN=/^data\: (.*)(?:\n\n|\r\r|\r\n\r\n)/;function C8(n){const e=n.body.pipeThrough(new TextDecoderStream("utf8",{fatal:!0})),t=I8(e),[i,r]=t.tee();return{stream:M8(i),response:A8(r)}}async function A8(n){const e=[],t=n.getReader();for(;;){const{done:i,value:r}=await t.read();if(i)return yA(P8(e));e.push(r)}}function M8(n){return E8(this,arguments,function*(){const t=n.getReader();for(;;){const{value:i,done:r}=yield $m(t.read());if(r)break;yield yield $m(yA(i))}})}function I8(n){const e=n.getReader();return new ReadableStream({start(i){let r="";return s();function s(){return e.read().then(({value:o,done:a})=>{if(a){if(r.trim()){i.error(new ls("Failed to parse stream"));return}i.close();return}r+=o;let l=r.match(QN),c;for(;l;){try{c=JSON.parse(l[1])}catch{i.error(new ls(`Error parsing JSON response: "${l[1]}"`));return}i.enqueue(c),r=r.substring(l[0].length),l=r.match(QN)}return s()})}}})}function P8(n){const e=n[n.length-1],t={promptFeedback:e?.promptFeedback};for(const i of n){if(i.candidates){let r=0;for(const s of i.candidates)if(t.candidates||(t.candidates=[]),t.candidates[r]||(t.candidates[r]={index:r}),t.candidates[r].citationMetadata=s.citationMetadata,t.candidates[r].groundingMetadata=s.groundingMetadata,t.candidates[r].finishReason=s.finishReason,t.candidates[r].finishMessage=s.finishMessage,t.candidates[r].safetyRatings=s.safetyRatings,s.content&&s.content.parts){t.candidates[r].content||(t.candidates[r].content={role:s.content.role||"user",parts:[]});const o={};for(const a of s.content.parts)a.text&&(o.text=a.text),a.functionCall&&(o.functionCall=a.functionCall),a.executableCode&&(o.executableCode=a.executableCode),a.codeExecutionResult&&(o.codeExecutionResult=a.codeExecutionResult),Object.keys(o).length===0&&(o.text=""),t.candidates[r].content.parts.push(o)}r++}i.usageMetadata&&(t.usageMetadata=i.usageMetadata)}return t}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function TF(n,e,t,i){const r=await kg(e,Xu.STREAM_GENERATE_CONTENT,n,!0,JSON.stringify(t),i);return C8(r)}async function EF(n,e,t,i){const s=await(await kg(e,Xu.GENERATE_CONTENT,n,!1,JSON.stringify(t),i)).json();return{response:yA(s)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function CF(n){if(n!=null){if(typeof n=="string")return{role:"system",parts:[{text:n}]};if(n.text)return{role:"system",parts:[n]};if(n.parts)return n.role?n:{role:"system",parts:n.parts}}}function Xm(n){let e=[];if(typeof n=="string")e=[{text:n}];else for(const t of n)typeof t=="string"?e.push({text:t}):e.push(t);return R8(e)}function R8(n){const e={role:"user",parts:[]},t={role:"function",parts:[]};let i=!1,r=!1;for(const s of n)"functionResponse"in s?(t.parts.push(s),r=!0):(e.parts.push(s),i=!0);if(i&&r)throw new ls("Within a single message, FunctionResponse cannot be mixed with other type of part in the request for sending chat message.");if(!i&&!r)throw new ls("No content is provided for sending chat message.");return i?e:t}function N8(n,e){var t;let i={model:e?.model,generationConfig:e?.generationConfig,safetySettings:e?.safetySettings,tools:e?.tools,toolConfig:e?.toolConfig,systemInstruction:e?.systemInstruction,cachedContent:(t=e?.cachedContent)===null||t===void 0?void 0:t.name,contents:[]};const r=n.generateContentRequest!=null;if(n.contents){if(r)throw new Zl("CountTokensRequest must have one of contents or generateContentRequest, not both.");i.contents=n.contents}else if(r)i=Object.assign(Object.assign({},i),n.generateContentRequest);else{const s=Xm(n);i.contents=[s]}return{generateContentRequest:i}}function ZN(n){let e;return n.contents?e=n:e={contents:[Xm(n)]},n.systemInstruction&&(e.systemInstruction=CF(n.systemInstruction)),e}function L8(n){return typeof n=="string"||Array.isArray(n)?{content:Xm(n)}:n}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e2=["text","inlineData","functionCall","functionResponse","executableCode","codeExecutionResult"],D8={user:["text","inlineData"],function:["functionResponse"],model:["text","functionCall","executableCode","codeExecutionResult"],system:["text"]};function k8(n){let e=!1;for(const t of n){const{role:i,parts:r}=t;if(!e&&i!=="user")throw new ls(`First content should be with role 'user', got ${i}`);if(!WN.includes(i))throw new ls(`Each item should include role field. Got ${i} but valid roles are: ${JSON.stringify(WN)}`);if(!Array.isArray(r))throw new ls("Content should have 'parts' property with an array of Parts");if(r.length===0)throw new ls("Each Content should have at least one part");const s={text:0,inlineData:0,functionCall:0,functionResponse:0,fileData:0,executableCode:0,codeExecutionResult:0};for(const a of r)for(const l of e2)l in a&&(s[l]+=1);const o=D8[i];for(const a of e2)if(!o.includes(a)&&s[a]>0)throw new ls(`Content with role '${i}' can't contain '${a}' part`);e=!0}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const t2="SILENT_ERROR";class O8{constructor(e,t,i,r={}){this.model=t,this.params=i,this._requestOptions=r,this._history=[],this._sendPromise=Promise.resolve(),this._apiKey=e,i?.history&&(k8(i.history),this._history=i.history)}async getHistory(){return await this._sendPromise,this._history}async sendMessage(e,t={}){var i,r,s,o,a,l;await this._sendPromise;const c=Xm(e),u={safetySettings:(i=this.params)===null||i===void 0?void 0:i.safetySettings,generationConfig:(r=this.params)===null||r===void 0?void 0:r.generationConfig,tools:(s=this.params)===null||s===void 0?void 0:s.tools,toolConfig:(o=this.params)===null||o===void 0?void 0:o.toolConfig,systemInstruction:(a=this.params)===null||a===void 0?void 0:a.systemInstruction,cachedContent:(l=this.params)===null||l===void 0?void 0:l.cachedContent,contents:[...this._history,c]},f=Object.assign(Object.assign({},this._requestOptions),t);let m;return this._sendPromise=this._sendPromise.then(()=>EF(this._apiKey,this.model,u,f)).then(g=>{var x,b;if(g.response.candidates&&g.response.candidates.length>0&&((x=g.response.candidates[0])===null||x===void 0?void 0:x.content)!==void 0){this._history.push(c);const w=Object.assign({parts:[],role:"model"},(b=g.response.candidates)===null||b===void 0?void 0:b[0].content);this._history.push(w)}else{const w=Pl(g.response);w&&console.warn(`sendMessage() was unsuccessful. ${w}. Inspect response object for details.`)}m=g}),await this._sendPromise,m}async sendMessageStream(e,t={}){var i,r,s,o,a,l;await this._sendPromise;const c=Xm(e),u={safetySettings:(i=this.params)===null||i===void 0?void 0:i.safetySettings,generationConfig:(r=this.params)===null||r===void 0?void 0:r.generationConfig,tools:(s=this.params)===null||s===void 0?void 0:s.tools,toolConfig:(o=this.params)===null||o===void 0?void 0:o.toolConfig,systemInstruction:(a=this.params)===null||a===void 0?void 0:a.systemInstruction,cachedContent:(l=this.params)===null||l===void 0?void 0:l.cachedContent,contents:[...this._history,c]},f=Object.assign(Object.assign({},this._requestOptions),t),m=TF(this._apiKey,this.model,u,f);return this._sendPromise=this._sendPromise.then(()=>m).catch(g=>{throw new Error(t2)}).then(g=>g.response).then(g=>{var x;if(g.candidates&&g.candidates.length>0&&((x=g.candidates[0])===null||x===void 0?void 0:x.content)!==void 0){this._history.push(c);const b=Object.assign({},g.candidates[0].content);b.role||(b.role="model"),this._history.push(b)}else{const b=Pl(g);b&&console.warn(`sendMessageStream() was unsuccessful. ${b}. Inspect response object for details.`)}}).catch(g=>{g.message!==t2&&console.error(g)}),m}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function U8(n,e,t,i){return(await kg(e,Xu.COUNT_TOKENS,n,!1,JSON.stringify(t),i)).json()}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function F8(n,e,t,i){return(await kg(e,Xu.EMBED_CONTENT,n,!1,JSON.stringify(t),i)).json()}async function j8(n,e,t,i){const r=t.requests.map(o=>Object.assign(Object.assign({},o),{model:e}));return(await kg(e,Xu.BATCH_EMBED_CONTENTS,n,!1,JSON.stringify({requests:r}),i)).json()}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class n2{constructor(e,t,i={}){this.apiKey=e,this._requestOptions=i,t.model.includes("/")?this.model=t.model:this.model=`models/${t.model}`,this.generationConfig=t.generationConfig||{},this.safetySettings=t.safetySettings||[],this.tools=t.tools,this.toolConfig=t.toolConfig,this.systemInstruction=CF(t.systemInstruction),this.cachedContent=t.cachedContent}async generateContent(e,t={}){var i;const r=ZN(e),s=Object.assign(Object.assign({},this._requestOptions),t);return EF(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(i=this.cachedContent)===null||i===void 0?void 0:i.name},r),s)}async generateContentStream(e,t={}){var i;const r=ZN(e),s=Object.assign(Object.assign({},this._requestOptions),t);return TF(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(i=this.cachedContent)===null||i===void 0?void 0:i.name},r),s)}startChat(e){var t;return new O8(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(t=this.cachedContent)===null||t===void 0?void 0:t.name},e),this._requestOptions)}async countTokens(e,t={}){const i=N8(e,{model:this.model,generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:this.cachedContent}),r=Object.assign(Object.assign({},this._requestOptions),t);return U8(this.apiKey,this.model,i,r)}async embedContent(e,t={}){const i=L8(e),r=Object.assign(Object.assign({},this._requestOptions),t);return F8(this.apiKey,this.model,i,r)}async batchEmbedContents(e,t={}){const i=Object.assign(Object.assign({},this._requestOptions),t);return j8(this.apiKey,this.model,e,i)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V8{constructor(e){this.apiKey=e}getGenerativeModel(e,t){if(!e.model)throw new ls("Must provide a model name. Example: genai.getGenerativeModel({ model: 'my-model-name' })");return new n2(this.apiKey,e,t)}getGenerativeModelFromCachedContent(e,t,i){if(!e.name)throw new Zl("Cached content must contain a `name` field.");if(!e.model)throw new Zl("Cached content must contain a `model` field.");const r=["model","systemInstruction"];for(const o of r)if(t?.[o]&&e[o]&&t?.[o]!==e[o]){if(o==="model"){const a=t.model.startsWith("models/")?t.model.replace("models/",""):t.model,l=e.model.startsWith("models/")?e.model.replace("models/",""):e.model;if(a===l)continue}throw new Zl(`Different value for "${o}" specified in modelParams (${t[o]}) and cachedContent (${e[o]})`)}const s=Object.assign(Object.assign({},t),{model:e.model,tools:e.tools,toolConfig:e.toolConfig,systemInstruction:e.systemInstruction,cachedContent:e});return new n2(this.apiKey,s,i)}}const B8="gemini-1.5-pro",z8="AIzaSyDR3vXyfe-NWbMwQvaypVyOWJKZP15FghI";async function i2(n){const t=new V8(z8).getGenerativeModel({model:B8}),i={temperature:.9,topP:1,topK:1,maxOutputTokens:2048},r=[{category:Sd.HARM_CATEGORY_HARASSMENT,threshold:Td.BLOCK_MEDIUM_AND_ABOVE},{category:Sd.HARM_CATEGORY_HATE_SPEECH,threshold:Td.BLOCK_MEDIUM_AND_ABOVE},{category:Sd.HARM_CATEGORY_SEXUALLY_EXPLICIT,threshold:Td.BLOCK_MEDIUM_AND_ABOVE},{category:Sd.HARM_CATEGORY_DANGEROUS_CONTENT,threshold:Td.BLOCK_MEDIUM_AND_ABOVE}],s=t.startChat({generationConfig:i,safetySettings:r,history:[]}),o=`
    You are Karapatan Ko, an AI legal assistant specializing in **Philippine Law**. You can say Hi or Hello.
    Provide a **clear, concise, and structured answers** based on laws in the Philippines, such as:
    - The 1987 Constitution
    - Civil Code, Revised Penal Code, Family Code, Labor Code, 
    - Other relevant statutes (e.g., Data Privacy Act, Cybercrime Prevention Act)
    
    **Response Guidelines**
    - **Be concise & well-structured** (use bullet points when necessary).
    - **Provide citations** where applicable.
    - **Avoid unnecessary explanations or disclamers**.
    - **Explain in simple words and make it more humanize**.
    
    Question: ${n}
    `,l=(await s.sendMessage(o)).response;return console.log(l.text()),l.text()}const Ym=B.createContext(),H8=n=>{const[e,t]=B.useState(""),[i,r]=B.useState(""),[s,o]=B.useState([]),[a,l]=B.useState(!1),[c,u]=B.useState(!1),[f,m]=B.useState(""),[g,x]=B.useState(localStorage.getItem("darkMode")==="true"),[b,w]=B.useState(null),v=(N,I)=>{setTimeout(function(){m(A=>A+I)},75*N)},S=()=>{u(!1),l(!1)};let E=0;const C=5e3,L={prevPrompts:s,setPrevPrompts:o,onSent:async N=>{const I=Date.now();if(I-E<C){alert("Please wait a few seconds. Thank you!");return}E=I,m(""),u(!0),l(!0);let A;N!=null?(A=await i2(N),r(N)):(o(te=>[...te,e]),r(e),A=await i2(e));let M=A.split("**"),D="";for(let te=0;te<M.length;te++)te===0||te%2!==1?D+=M[te]:D+="<b>"+M[te]+"</b>";let j=D.split("*").join("</br>").split(" ");for(let te=0;te<j.length;te++){const he=j[te];v(te,he+" ")}u(!1),t("")},setRecentPrompt:r,recentPrompt:i,showResult:a,loading:c,resultData:f,input:e,setInput:t,newChat:S,darkMode:g,setDarkMode:x,selectedMessage:b,setSelectedMessage:w};return B.useEffect(()=>{localStorage.setItem("darkMode",g)},[g]),d.jsx(Ym.Provider,{value:L,children:n.children})};/**
 * @license
 * Copyright 2010-2024 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const Og="170",G8={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},W8={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},AF=0,rE=1,MF=2,q8=3,IF=0,sw=1,um=2,vo=3,Xa=0,Xr=1,So=2,Oa=0,Lu=1,sE=2,oE=3,aE=4,PF=5,Dl=100,RF=101,NF=102,LF=103,DF=104,kF=200,OF=201,UF=202,FF=203,Tx=204,Ex=205,jF=206,VF=207,BF=208,zF=209,HF=210,GF=211,WF=212,qF=213,$F=214,Cx=0,Ax=1,Mx=2,Yu=3,Ix=4,Px=5,Rx=6,Nx=7,Ug=0,XF=1,YF=2,Jo=0,KF=1,JF=2,QF=3,vA=4,ZF=5,ej=6,tj=7,lE="attached",nj="detached",ow=300,Ya=301,oc=302,Km=303,Jm=304,Ef=306,Qm=1e3,io=1001,Zm=1002,ur=1003,xA=1004,$8=1004,Ed=1005,X8=1005,Wi=1006,hm=1007,Y8=1007,Wo=1008,K8=1008,Mo=1009,_A=1010,wA=1011,sf=1012,aw=1013,Ka=1014,ds=1015,Cf=1016,lw=1017,cw=1018,Ku=1020,bA=35902,SA=1021,TA=1022,Pr=1023,EA=1024,CA=1025,Du=1026,Ju=1027,uw=1028,Fg=1029,AA=1030,hw=1031,J8=1032,dw=1033,dm=33776,fm=33777,pm=33778,mm=33779,Lx=35840,Dx=35841,kx=35842,Ox=35843,Ux=36196,Fx=37492,jx=37496,Vx=37808,Bx=37809,zx=37810,Hx=37811,Gx=37812,Wx=37813,qx=37814,$x=37815,Xx=37816,Yx=37817,Kx=37818,Jx=37819,Qx=37820,Zx=37821,gm=36492,e_=36494,t_=36495,MA=36283,n_=36284,i_=36285,r_=36286,ij=2200,rj=2201,sj=2202,eg=2300,s_=2301,L0=2302,Eu=2400,Cu=2401,tg=2402,fw=2500,IA=2501,Q8=0,Z8=1,e7=2,oj=3200,aj=3201,t7=3202,n7=3203,Ec=0,lj=1,Ea="",os="srgb",ah="srgb-linear",jg="linear",zn="srgb",i7=0,fu=7680,r7=7681,s7=7682,o7=7683,a7=34055,l7=34056,c7=5386,u7=512,h7=513,d7=514,f7=515,p7=516,m7=517,g7=518,cE=519,cj=512,uj=513,hj=514,PA=515,dj=516,fj=517,pj=518,mj=519,ng=35044,ku=35048,y7=35040,v7=35045,x7=35049,_7=35041,w7=35046,b7=35050,S7=35042,T7="100",uE="300 es",qo=2e3,ig=2001;class aa{addEventListener(e,t){this._listeners===void 0&&(this._listeners={});const i=this._listeners;i[e]===void 0&&(i[e]=[]),i[e].indexOf(t)===-1&&i[e].push(t)}hasEventListener(e,t){if(this._listeners===void 0)return!1;const i=this._listeners;return i[e]!==void 0&&i[e].indexOf(t)!==-1}removeEventListener(e,t){if(this._listeners===void 0)return;const r=this._listeners[e];if(r!==void 0){const s=r.indexOf(t);s!==-1&&r.splice(s,1)}}dispatchEvent(e){if(this._listeners===void 0)return;const i=this._listeners[e.type];if(i!==void 0){e.target=this;const r=i.slice(0);for(let s=0,o=r.length;s<o;s++)r[s].call(this,e);e.target=null}}}const br=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let r2=1234567;const Ou=Math.PI/180,of=180/Math.PI;function ks(){const n=Math.random()*4294967295|0,e=Math.random()*4294967295|0,t=Math.random()*4294967295|0,i=Math.random()*4294967295|0;return(br[n&255]+br[n>>8&255]+br[n>>16&255]+br[n>>24&255]+"-"+br[e&255]+br[e>>8&255]+"-"+br[e>>16&15|64]+br[e>>24&255]+"-"+br[t&63|128]+br[t>>8&255]+"-"+br[t>>16&255]+br[t>>24&255]+br[i&255]+br[i>>8&255]+br[i>>16&255]+br[i>>24&255]).toLowerCase()}function yi(n,e,t){return Math.max(e,Math.min(t,n))}function RA(n,e){return(n%e+e)%e}function E7(n,e,t,i,r){return i+(n-e)*(r-i)/(t-e)}function C7(n,e,t){return n!==e?(t-n)/(e-n):0}function ym(n,e,t){return(1-t)*n+t*e}function A7(n,e,t,i){return ym(n,e,1-Math.exp(-t*i))}function M7(n,e=1){return e-Math.abs(RA(n,e*2)-e)}function I7(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e),n*n*(3-2*n))}function P7(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e),n*n*n*(n*(n*6-15)+10))}function R7(n,e){return n+Math.floor(Math.random()*(e-n+1))}function N7(n,e){return n+Math.random()*(e-n)}function L7(n){return n*(.5-Math.random())}function D7(n){n!==void 0&&(r2=n);let e=r2+=1831565813;return e=Math.imul(e^e>>>15,e|1),e^=e+Math.imul(e^e>>>7,e|61),((e^e>>>14)>>>0)/4294967296}function k7(n){return n*Ou}function O7(n){return n*of}function U7(n){return(n&n-1)===0&&n!==0}function F7(n){return Math.pow(2,Math.ceil(Math.log(n)/Math.LN2))}function j7(n){return Math.pow(2,Math.floor(Math.log(n)/Math.LN2))}function V7(n,e,t,i,r){const s=Math.cos,o=Math.sin,a=s(t/2),l=o(t/2),c=s((e+i)/2),u=o((e+i)/2),f=s((e-i)/2),m=o((e-i)/2),g=s((i-e)/2),x=o((i-e)/2);switch(r){case"XYX":n.set(a*u,l*f,l*m,a*c);break;case"YZY":n.set(l*m,a*u,l*f,a*c);break;case"ZXZ":n.set(l*f,l*m,a*u,a*c);break;case"XZX":n.set(a*u,l*x,l*g,a*c);break;case"YXY":n.set(l*g,a*u,l*x,a*c);break;case"ZYZ":n.set(l*x,l*g,a*u,a*c);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+r)}}function qr(n,e){switch(e.constructor){case Float32Array:return n;case Uint32Array:return n/4294967295;case Uint16Array:return n/65535;case Uint8Array:return n/255;case Int32Array:return Math.max(n/2147483647,-1);case Int16Array:return Math.max(n/32767,-1);case Int8Array:return Math.max(n/127,-1);default:throw new Error("Invalid component type.")}}function nn(n,e){switch(e.constructor){case Float32Array:return n;case Uint32Array:return Math.round(n*4294967295);case Uint16Array:return Math.round(n*65535);case Uint8Array:return Math.round(n*255);case Int32Array:return Math.round(n*2147483647);case Int16Array:return Math.round(n*32767);case Int8Array:return Math.round(n*127);default:throw new Error("Invalid component type.")}}const B7={DEG2RAD:Ou,RAD2DEG:of,generateUUID:ks,clamp:yi,euclideanModulo:RA,mapLinear:E7,inverseLerp:C7,lerp:ym,damp:A7,pingpong:M7,smoothstep:I7,smootherstep:P7,randInt:R7,randFloat:N7,randFloatSpread:L7,seededRandom:D7,degToRad:k7,radToDeg:O7,isPowerOfTwo:U7,ceilPowerOfTwo:F7,floorPowerOfTwo:j7,setQuaternionFromProperEuler:V7,normalize:nn,denormalize:qr};class De{constructor(e=0,t=0){De.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,i=this.y,r=e.elements;return this.x=r[0]*t+r[3]*i+r[6],this.y=r[1]*t+r[4]*i+r[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const i=this.dot(e)/t;return Math.acos(yi(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,i=this.y-e.y;return t*t+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const i=Math.cos(t),r=Math.sin(t),s=this.x-e.x,o=this.y-e.y;return this.x=s*i-o*r+e.x,this.y=s*r+o*i+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class en{constructor(e,t,i,r,s,o,a,l,c){en.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],e!==void 0&&this.set(e,t,i,r,s,o,a,l,c)}set(e,t,i,r,s,o,a,l,c){const u=this.elements;return u[0]=e,u[1]=r,u[2]=a,u[3]=t,u[4]=s,u[5]=l,u[6]=i,u[7]=o,u[8]=c,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],this}extractBasis(e,t,i){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),i.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const i=e.elements,r=t.elements,s=this.elements,o=i[0],a=i[3],l=i[6],c=i[1],u=i[4],f=i[7],m=i[2],g=i[5],x=i[8],b=r[0],w=r[3],v=r[6],S=r[1],E=r[4],C=r[7],V=r[2],L=r[5],N=r[8];return s[0]=o*b+a*S+l*V,s[3]=o*w+a*E+l*L,s[6]=o*v+a*C+l*N,s[1]=c*b+u*S+f*V,s[4]=c*w+u*E+f*L,s[7]=c*v+u*C+f*N,s[2]=m*b+g*S+x*V,s[5]=m*w+g*E+x*L,s[8]=m*v+g*C+x*N,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],i=e[1],r=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],u=e[8];return t*o*u-t*a*c-i*s*u+i*a*l+r*s*c-r*o*l}invert(){const e=this.elements,t=e[0],i=e[1],r=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],u=e[8],f=u*o-a*c,m=a*l-u*s,g=c*s-o*l,x=t*f+i*m+r*g;if(x===0)return this.set(0,0,0,0,0,0,0,0,0);const b=1/x;return e[0]=f*b,e[1]=(r*c-u*i)*b,e[2]=(a*i-r*o)*b,e[3]=m*b,e[4]=(u*t-r*l)*b,e[5]=(r*s-a*t)*b,e[6]=g*b,e[7]=(i*l-c*t)*b,e[8]=(o*t-i*s)*b,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,i,r,s,o,a){const l=Math.cos(s),c=Math.sin(s);return this.set(i*l,i*c,-i*(l*o+c*a)+o+e,-r*c,r*l,-r*(-c*o+l*a)+a+t,0,0,1),this}scale(e,t){return this.premultiply(jS.makeScale(e,t)),this}rotate(e){return this.premultiply(jS.makeRotation(-e)),this}translate(e,t){return this.premultiply(jS.makeTranslation(e,t)),this}makeTranslation(e,t){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,t,0,0,1),this}makeRotation(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,-i,0,i,t,0,0,0,1),this}makeScale(e,t){return this.set(e,0,0,0,t,0,0,0,1),this}equals(e){const t=this.elements,i=e.elements;for(let r=0;r<9;r++)if(t[r]!==i[r])return!1;return!0}fromArray(e,t=0){for(let i=0;i<9;i++)this.elements[i]=e[i+t];return this}toArray(e=[],t=0){const i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e}clone(){return new this.constructor().fromArray(this.elements)}}const jS=new en;function gj(n){for(let e=n.length-1;e>=0;--e)if(n[e]>=65535)return!0;return!1}const z7={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function Cd(n,e){return new z7[n](e)}function rg(n){return document.createElementNS("http://www.w3.org/1999/xhtml",n)}function yj(){const n=rg("canvas");return n.style.display="block",n}const s2={};function Hp(n){n in s2||(s2[n]=!0,console.warn(n))}function H7(n,e,t){return new Promise(function(i,r){function s(){switch(n.clientWaitSync(e,n.SYNC_FLUSH_COMMANDS_BIT,0)){case n.WAIT_FAILED:r();break;case n.TIMEOUT_EXPIRED:setTimeout(s,t);break;default:i()}}setTimeout(s,t)})}function G7(n){const e=n.elements;e[2]=.5*e[2]+.5*e[3],e[6]=.5*e[6]+.5*e[7],e[10]=.5*e[10]+.5*e[11],e[14]=.5*e[14]+.5*e[15]}function W7(n){const e=n.elements;e[11]===-1?(e[10]=-e[10]-1,e[14]=-e[14]):(e[10]=-e[10],e[14]=-e[14]+1)}const _n={enabled:!0,workingColorSpace:ah,spaces:{},convert:function(n,e,t){return this.enabled===!1||e===t||!e||!t||(this.spaces[e].transfer===zn&&(n.r=Ua(n.r),n.g=Ua(n.g),n.b=Ua(n.b)),this.spaces[e].primaries!==this.spaces[t].primaries&&(n.applyMatrix3(this.spaces[e].toXYZ),n.applyMatrix3(this.spaces[t].fromXYZ)),this.spaces[t].transfer===zn&&(n.r=Gd(n.r),n.g=Gd(n.g),n.b=Gd(n.b))),n},fromWorkingColorSpace:function(n,e){return this.convert(n,this.workingColorSpace,e)},toWorkingColorSpace:function(n,e){return this.convert(n,e,this.workingColorSpace)},getPrimaries:function(n){return this.spaces[n].primaries},getTransfer:function(n){return n===Ea?jg:this.spaces[n].transfer},getLuminanceCoefficients:function(n,e=this.workingColorSpace){return n.fromArray(this.spaces[e].luminanceCoefficients)},define:function(n){Object.assign(this.spaces,n)},_getMatrix:function(n,e,t){return n.copy(this.spaces[e].toXYZ).multiply(this.spaces[t].fromXYZ)},_getDrawingBufferColorSpace:function(n){return this.spaces[n].outputColorSpaceConfig.drawingBufferColorSpace},_getUnpackColorSpace:function(n=this.workingColorSpace){return this.spaces[n].workingColorSpaceConfig.unpackColorSpace}};function Ua(n){return n<.04045?n*.0773993808:Math.pow(n*.9478672986+.0521327014,2.4)}function Gd(n){return n<.0031308?n*12.92:1.055*Math.pow(n,.41666)-.055}const o2=[.64,.33,.3,.6,.15,.06],a2=[.2126,.7152,.0722],l2=[.3127,.329],c2=new en().set(.4123908,.3575843,.1804808,.212639,.7151687,.0721923,.0193308,.1191948,.9505322),u2=new en().set(3.2409699,-1.5373832,-.4986108,-.9692436,1.8759675,.0415551,.0556301,-.203977,1.0569715);_n.define({[ah]:{primaries:o2,whitePoint:l2,transfer:jg,toXYZ:c2,fromXYZ:u2,luminanceCoefficients:a2,workingColorSpaceConfig:{unpackColorSpace:os},outputColorSpaceConfig:{drawingBufferColorSpace:os}},[os]:{primaries:o2,whitePoint:l2,transfer:zn,toXYZ:c2,fromXYZ:u2,luminanceCoefficients:a2,outputColorSpaceConfig:{drawingBufferColorSpace:os}}});let jh;class vj{static getDataURL(e){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let t;if(e instanceof HTMLCanvasElement)t=e;else{jh===void 0&&(jh=rg("canvas")),jh.width=e.width,jh.height=e.height;const i=jh.getContext("2d");e instanceof ImageData?i.putImageData(e,0,0):i.drawImage(e,0,0,e.width,e.height),t=jh}return t.width>2048||t.height>2048?(console.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",e),t.toDataURL("image/jpeg",.6)):t.toDataURL("image/png")}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const t=rg("canvas");t.width=e.width,t.height=e.height;const i=t.getContext("2d");i.drawImage(e,0,0,e.width,e.height);const r=i.getImageData(0,0,e.width,e.height),s=r.data;for(let o=0;o<s.length;o++)s[o]=Ua(s[o]/255)*255;return i.putImageData(r,0,0),t}else if(e.data){const t=e.data.slice(0);for(let i=0;i<t.length;i++)t instanceof Uint8Array||t instanceof Uint8ClampedArray?t[i]=Math.floor(Ua(t[i]/255)*255):t[i]=Ua(t[i]);return{data:t,width:e.width,height:e.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}let q7=0;class Au{constructor(e=null){this.isSource=!0,Object.defineProperty(this,"id",{value:q7++}),this.uuid=ks(),this.data=e,this.dataReady=!0,this.version=0}set needsUpdate(e){e===!0&&this.version++}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.images[this.uuid]!==void 0)return e.images[this.uuid];const i={uuid:this.uuid,url:""},r=this.data;if(r!==null){let s;if(Array.isArray(r)){s=[];for(let o=0,a=r.length;o<a;o++)r[o].isDataTexture?s.push(VS(r[o].image)):s.push(VS(r[o]))}else s=VS(r);i.url=s}return t||(e.images[this.uuid]=i),i}}function VS(n){return typeof HTMLImageElement<"u"&&n instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&n instanceof ImageBitmap?vj.getDataURL(n):n.data?{data:Array.from(n.data),width:n.width,height:n.height,type:n.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let $7=0;class hi extends aa{constructor(e=hi.DEFAULT_IMAGE,t=hi.DEFAULT_MAPPING,i=io,r=io,s=Wi,o=Wo,a=Pr,l=Mo,c=hi.DEFAULT_ANISOTROPY,u=Ea){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:$7++}),this.uuid=ks(),this.name="",this.source=new Au(e),this.mipmaps=[],this.mapping=t,this.channel=0,this.wrapS=i,this.wrapT=r,this.magFilter=s,this.minFilter=o,this.anisotropy=c,this.format=a,this.internalFormat=null,this.type=l,this.offset=new De(0,0),this.repeat=new De(1,1),this.center=new De(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new en,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.colorSpace=u,this.userData={},this.version=0,this.onUpdate=null,this.isRenderTargetTexture=!1,this.pmremVersion=0}get image(){return this.source.data}set image(e=null){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.colorSpace=e.colorSpace,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const i={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(i.userData=this.userData),t||(e.textures[this.uuid]=i),i}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==ow)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case Qm:e.x=e.x-Math.floor(e.x);break;case io:e.x=e.x<0?0:1;break;case Zm:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case Qm:e.y=e.y-Math.floor(e.y);break;case io:e.y=e.y<0?0:1;break;case Zm:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}set needsPMREMUpdate(e){e===!0&&this.pmremVersion++}}hi.DEFAULT_IMAGE=null;hi.DEFAULT_MAPPING=ow;hi.DEFAULT_ANISOTROPY=1;class An{constructor(e=0,t=0,i=0,r=1){An.prototype.isVector4=!0,this.x=e,this.y=t,this.z=i,this.w=r}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,i,r){return this.x=e,this.y=t,this.z=i,this.w=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,i=this.y,r=this.z,s=this.w,o=e.elements;return this.x=o[0]*t+o[4]*i+o[8]*r+o[12]*s,this.y=o[1]*t+o[5]*i+o[9]*r+o[13]*s,this.z=o[2]*t+o[6]*i+o[10]*r+o[14]*s,this.w=o[3]*t+o[7]*i+o[11]*r+o[15]*s,this}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this.w/=e.w,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,i,r,s;const l=e.elements,c=l[0],u=l[4],f=l[8],m=l[1],g=l[5],x=l[9],b=l[2],w=l[6],v=l[10];if(Math.abs(u-m)<.01&&Math.abs(f-b)<.01&&Math.abs(x-w)<.01){if(Math.abs(u+m)<.1&&Math.abs(f+b)<.1&&Math.abs(x+w)<.1&&Math.abs(c+g+v-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;const E=(c+1)/2,C=(g+1)/2,V=(v+1)/2,L=(u+m)/4,N=(f+b)/4,I=(x+w)/4;return E>C&&E>V?E<.01?(i=0,r=.707106781,s=.707106781):(i=Math.sqrt(E),r=L/i,s=N/i):C>V?C<.01?(i=.707106781,r=0,s=.707106781):(r=Math.sqrt(C),i=L/r,s=I/r):V<.01?(i=.707106781,r=.707106781,s=0):(s=Math.sqrt(V),i=N/s,r=I/s),this.set(i,r,s,t),this}let S=Math.sqrt((w-x)*(w-x)+(f-b)*(f-b)+(m-u)*(m-u));return Math.abs(S)<.001&&(S=1),this.x=(w-x)/S,this.y=(f-b)/S,this.z=(m-u)/S,this.w=Math.acos((c+g+v-1)/2),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this.w=t[15],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this.w=Math.max(e.w,Math.min(t.w,this.w)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this.w=Math.max(e,Math.min(t,this.w)),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this.z=e.z+(t.z-e.z)*i,this.w=e.w+(t.w-e.w)*i,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class xj extends aa{constructor(e=1,t=1,i={}){super(),this.isRenderTarget=!0,this.width=e,this.height=t,this.depth=1,this.scissor=new An(0,0,e,t),this.scissorTest=!1,this.viewport=new An(0,0,e,t);const r={width:e,height:t,depth:1};i=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:Wi,depthBuffer:!0,stencilBuffer:!1,resolveDepthBuffer:!0,resolveStencilBuffer:!0,depthTexture:null,samples:0,count:1},i);const s=new hi(r,i.mapping,i.wrapS,i.wrapT,i.magFilter,i.minFilter,i.format,i.type,i.anisotropy,i.colorSpace);s.flipY=!1,s.generateMipmaps=i.generateMipmaps,s.internalFormat=i.internalFormat,this.textures=[];const o=i.count;for(let a=0;a<o;a++)this.textures[a]=s.clone(),this.textures[a].isRenderTargetTexture=!0;this.depthBuffer=i.depthBuffer,this.stencilBuffer=i.stencilBuffer,this.resolveDepthBuffer=i.resolveDepthBuffer,this.resolveStencilBuffer=i.resolveStencilBuffer,this.depthTexture=i.depthTexture,this.samples=i.samples}get texture(){return this.textures[0]}set texture(e){this.textures[0]=e}setSize(e,t,i=1){if(this.width!==e||this.height!==t||this.depth!==i){this.width=e,this.height=t,this.depth=i;for(let r=0,s=this.textures.length;r<s;r++)this.textures[r].image.width=e,this.textures[r].image.height=t,this.textures[r].image.depth=i;this.dispose()}this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.textures.length=0;for(let i=0,r=e.textures.length;i<r;i++)this.textures[i]=e.textures[i].clone(),this.textures[i].isRenderTargetTexture=!0;const t=Object.assign({},e.texture.image);return this.texture.source=new Au(t),this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.resolveDepthBuffer=e.resolveDepthBuffer,this.resolveStencilBuffer=e.resolveStencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class Io extends xj{constructor(e=1,t=1,i={}){super(e,t,i),this.isWebGLRenderTarget=!0}}class pw extends hi{constructor(e=null,t=1,i=1,r=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:i,depth:r},this.magFilter=ur,this.minFilter=ur,this.wrapR=io,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}}class X7 extends Io{constructor(e=1,t=1,i=1,r={}){super(e,t,r),this.isWebGLArrayRenderTarget=!0,this.depth=i,this.texture=new pw(null,e,t,i),this.texture.isRenderTargetTexture=!0}}class NA extends hi{constructor(e=null,t=1,i=1,r=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:i,depth:r},this.magFilter=ur,this.minFilter=ur,this.wrapR=io,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class Y7 extends Io{constructor(e=1,t=1,i=1,r={}){super(e,t,r),this.isWebGL3DRenderTarget=!0,this.depth=i,this.texture=new NA(null,e,t,i),this.texture.isRenderTargetTexture=!0}}class gs{constructor(e=0,t=0,i=0,r=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=i,this._w=r}static slerpFlat(e,t,i,r,s,o,a){let l=i[r+0],c=i[r+1],u=i[r+2],f=i[r+3];const m=s[o+0],g=s[o+1],x=s[o+2],b=s[o+3];if(a===0){e[t+0]=l,e[t+1]=c,e[t+2]=u,e[t+3]=f;return}if(a===1){e[t+0]=m,e[t+1]=g,e[t+2]=x,e[t+3]=b;return}if(f!==b||l!==m||c!==g||u!==x){let w=1-a;const v=l*m+c*g+u*x+f*b,S=v>=0?1:-1,E=1-v*v;if(E>Number.EPSILON){const V=Math.sqrt(E),L=Math.atan2(V,v*S);w=Math.sin(w*L)/V,a=Math.sin(a*L)/V}const C=a*S;if(l=l*w+m*C,c=c*w+g*C,u=u*w+x*C,f=f*w+b*C,w===1-a){const V=1/Math.sqrt(l*l+c*c+u*u+f*f);l*=V,c*=V,u*=V,f*=V}}e[t]=l,e[t+1]=c,e[t+2]=u,e[t+3]=f}static multiplyQuaternionsFlat(e,t,i,r,s,o){const a=i[r],l=i[r+1],c=i[r+2],u=i[r+3],f=s[o],m=s[o+1],g=s[o+2],x=s[o+3];return e[t]=a*x+u*f+l*g-c*m,e[t+1]=l*x+u*m+c*f-a*g,e[t+2]=c*x+u*g+a*m-l*f,e[t+3]=u*x-a*f-l*m-c*g,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,i,r){return this._x=e,this._y=t,this._z=i,this._w=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t=!0){const i=e._x,r=e._y,s=e._z,o=e._order,a=Math.cos,l=Math.sin,c=a(i/2),u=a(r/2),f=a(s/2),m=l(i/2),g=l(r/2),x=l(s/2);switch(o){case"XYZ":this._x=m*u*f+c*g*x,this._y=c*g*f-m*u*x,this._z=c*u*x+m*g*f,this._w=c*u*f-m*g*x;break;case"YXZ":this._x=m*u*f+c*g*x,this._y=c*g*f-m*u*x,this._z=c*u*x-m*g*f,this._w=c*u*f+m*g*x;break;case"ZXY":this._x=m*u*f-c*g*x,this._y=c*g*f+m*u*x,this._z=c*u*x+m*g*f,this._w=c*u*f-m*g*x;break;case"ZYX":this._x=m*u*f-c*g*x,this._y=c*g*f+m*u*x,this._z=c*u*x-m*g*f,this._w=c*u*f+m*g*x;break;case"YZX":this._x=m*u*f+c*g*x,this._y=c*g*f+m*u*x,this._z=c*u*x-m*g*f,this._w=c*u*f-m*g*x;break;case"XZY":this._x=m*u*f-c*g*x,this._y=c*g*f-m*u*x,this._z=c*u*x+m*g*f,this._w=c*u*f+m*g*x;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+o)}return t===!0&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const i=t/2,r=Math.sin(i);return this._x=e.x*r,this._y=e.y*r,this._z=e.z*r,this._w=Math.cos(i),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,i=t[0],r=t[4],s=t[8],o=t[1],a=t[5],l=t[9],c=t[2],u=t[6],f=t[10],m=i+a+f;if(m>0){const g=.5/Math.sqrt(m+1);this._w=.25/g,this._x=(u-l)*g,this._y=(s-c)*g,this._z=(o-r)*g}else if(i>a&&i>f){const g=2*Math.sqrt(1+i-a-f);this._w=(u-l)/g,this._x=.25*g,this._y=(r+o)/g,this._z=(s+c)/g}else if(a>f){const g=2*Math.sqrt(1+a-i-f);this._w=(s-c)/g,this._x=(r+o)/g,this._y=.25*g,this._z=(l+u)/g}else{const g=2*Math.sqrt(1+f-i-a);this._w=(o-r)/g,this._x=(s+c)/g,this._y=(l+u)/g,this._z=.25*g}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let i=e.dot(t)+1;return i<Number.EPSILON?(i=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=i):(this._x=0,this._y=-e.z,this._z=e.y,this._w=i)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=i),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(yi(this.dot(e),-1,1)))}rotateTowards(e,t){const i=this.angleTo(e);if(i===0)return this;const r=Math.min(1,t/i);return this.slerp(e,r),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const i=e._x,r=e._y,s=e._z,o=e._w,a=t._x,l=t._y,c=t._z,u=t._w;return this._x=i*u+o*a+r*c-s*l,this._y=r*u+o*l+s*a-i*c,this._z=s*u+o*c+i*l-r*a,this._w=o*u-i*a-r*l-s*c,this._onChangeCallback(),this}slerp(e,t){if(t===0)return this;if(t===1)return this.copy(e);const i=this._x,r=this._y,s=this._z,o=this._w;let a=o*e._w+i*e._x+r*e._y+s*e._z;if(a<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,a=-a):this.copy(e),a>=1)return this._w=o,this._x=i,this._y=r,this._z=s,this;const l=1-a*a;if(l<=Number.EPSILON){const g=1-t;return this._w=g*o+t*this._w,this._x=g*i+t*this._x,this._y=g*r+t*this._y,this._z=g*s+t*this._z,this.normalize(),this}const c=Math.sqrt(l),u=Math.atan2(c,a),f=Math.sin((1-t)*u)/c,m=Math.sin(t*u)/c;return this._w=o*f+this._w*m,this._x=i*f+this._x*m,this._y=r*f+this._y*m,this._z=s*f+this._z*m,this._onChangeCallback(),this}slerpQuaternions(e,t,i){return this.copy(e).slerp(t,i)}random(){const e=2*Math.PI*Math.random(),t=2*Math.PI*Math.random(),i=Math.random(),r=Math.sqrt(1-i),s=Math.sqrt(i);return this.set(r*Math.sin(e),r*Math.cos(e),s*Math.sin(t),s*Math.cos(t))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class K{constructor(e=0,t=0,i=0){K.prototype.isVector3=!0,this.x=e,this.y=t,this.z=i}set(e,t,i){return i===void 0&&(i=this.z),this.x=e,this.y=t,this.z=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(h2.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(h2.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,i=this.y,r=this.z,s=e.elements;return this.x=s[0]*t+s[3]*i+s[6]*r,this.y=s[1]*t+s[4]*i+s[7]*r,this.z=s[2]*t+s[5]*i+s[8]*r,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,i=this.y,r=this.z,s=e.elements,o=1/(s[3]*t+s[7]*i+s[11]*r+s[15]);return this.x=(s[0]*t+s[4]*i+s[8]*r+s[12])*o,this.y=(s[1]*t+s[5]*i+s[9]*r+s[13])*o,this.z=(s[2]*t+s[6]*i+s[10]*r+s[14])*o,this}applyQuaternion(e){const t=this.x,i=this.y,r=this.z,s=e.x,o=e.y,a=e.z,l=e.w,c=2*(o*r-a*i),u=2*(a*t-s*r),f=2*(s*i-o*t);return this.x=t+l*c+o*f-a*u,this.y=i+l*u+a*c-s*f,this.z=r+l*f+s*u-o*c,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,i=this.y,r=this.z,s=e.elements;return this.x=s[0]*t+s[4]*i+s[8]*r,this.y=s[1]*t+s[5]*i+s[9]*r,this.z=s[2]*t+s[6]*i+s[10]*r,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Math.max(e.x,Math.min(t.x,this.x)),this.y=Math.max(e.y,Math.min(t.y,this.y)),this.z=Math.max(e.z,Math.min(t.z,this.z)),this}clampScalar(e,t){return this.x=Math.max(e,Math.min(t,this.x)),this.y=Math.max(e,Math.min(t,this.y)),this.z=Math.max(e,Math.min(t,this.z)),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Math.max(e,Math.min(t,i)))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this.z=e.z+(t.z-e.z)*i,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){const i=e.x,r=e.y,s=e.z,o=t.x,a=t.y,l=t.z;return this.x=r*l-s*a,this.y=s*o-i*l,this.z=i*a-r*o,this}projectOnVector(e){const t=e.lengthSq();if(t===0)return this.set(0,0,0);const i=e.dot(this)/t;return this.copy(e).multiplyScalar(i)}projectOnPlane(e){return BS.copy(this).projectOnVector(e),this.sub(BS)}reflect(e){return this.sub(BS.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const i=this.dot(e)/t;return Math.acos(yi(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,i=this.y-e.y,r=this.z-e.z;return t*t+i*i+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,i){const r=Math.sin(t)*e;return this.x=r*Math.sin(i),this.y=Math.cos(t)*e,this.z=r*Math.cos(i),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,i){return this.x=e*Math.sin(t),this.y=i,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),i=this.setFromMatrixColumn(e,1).length(),r=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=i,this.z=r,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,t*4)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,t*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=Math.random()*Math.PI*2,t=Math.random()*2-1,i=Math.sqrt(1-t*t);return this.x=i*Math.cos(e),this.y=t,this.z=i*Math.sin(e),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const BS=new K,h2=new gs;class Yr{constructor(e=new K(1/0,1/0,1/0),t=new K(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t+=3)this.expandByPoint(po.fromArray(e,t));return this}setFromBufferAttribute(e){this.makeEmpty();for(let t=0,i=e.count;t<i;t++)this.expandByPoint(po.fromBufferAttribute(e,t));return this}setFromPoints(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const i=po.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){e.updateWorldMatrix(!1,!1);const i=e.geometry;if(i!==void 0){const s=i.getAttribute("position");if(t===!0&&s!==void 0&&e.isInstancedMesh!==!0)for(let o=0,a=s.count;o<a;o++)e.isMesh===!0?e.getVertexPosition(o,po):po.fromBufferAttribute(s,o),po.applyMatrix4(e.matrixWorld),this.expandByPoint(po);else e.boundingBox!==void 0?(e.boundingBox===null&&e.computeBoundingBox(),pv.copy(e.boundingBox)):(i.boundingBox===null&&i.computeBoundingBox(),pv.copy(i.boundingBox)),pv.applyMatrix4(e.matrixWorld),this.union(pv)}const r=e.children;for(let s=0,o=r.length;s<o;s++)this.expandByObject(r[s],t);return this}containsPoint(e){return e.x>=this.min.x&&e.x<=this.max.x&&e.y>=this.min.y&&e.y<=this.max.y&&e.z>=this.min.z&&e.z<=this.max.z}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return e.max.x>=this.min.x&&e.min.x<=this.max.x&&e.max.y>=this.min.y&&e.min.y<=this.max.y&&e.max.z>=this.min.z&&e.min.z<=this.max.z}intersectsSphere(e){return this.clampPoint(e.center,po),po.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,i;return e.normal.x>0?(t=e.normal.x*this.min.x,i=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,i=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,i+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,i+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,i+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,i+=e.normal.z*this.min.z),t<=-e.constant&&i>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(wp),mv.subVectors(this.max,wp),Vh.subVectors(e.a,wp),Bh.subVectors(e.b,wp),zh.subVectors(e.c,wp),gl.subVectors(Bh,Vh),yl.subVectors(zh,Bh),Kc.subVectors(Vh,zh);let t=[0,-gl.z,gl.y,0,-yl.z,yl.y,0,-Kc.z,Kc.y,gl.z,0,-gl.x,yl.z,0,-yl.x,Kc.z,0,-Kc.x,-gl.y,gl.x,0,-yl.y,yl.x,0,-Kc.y,Kc.x,0];return!zS(t,Vh,Bh,zh,mv)||(t=[1,0,0,0,1,0,0,0,1],!zS(t,Vh,Bh,zh,mv))?!1:(gv.crossVectors(gl,yl),t=[gv.x,gv.y,gv.z],zS(t,Vh,Bh,zh,mv))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,po).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=this.getSize(po).length()*.5),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(ya[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),ya[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),ya[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),ya[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),ya[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),ya[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),ya[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),ya[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(ya),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const ya=[new K,new K,new K,new K,new K,new K,new K,new K],po=new K,pv=new Yr,Vh=new K,Bh=new K,zh=new K,gl=new K,yl=new K,Kc=new K,wp=new K,mv=new K,gv=new K,Jc=new K;function zS(n,e,t,i,r){for(let s=0,o=n.length-3;s<=o;s+=3){Jc.fromArray(n,s);const a=r.x*Math.abs(Jc.x)+r.y*Math.abs(Jc.y)+r.z*Math.abs(Jc.z),l=e.dot(Jc),c=t.dot(Jc),u=i.dot(Jc);if(Math.max(-Math.max(l,c,u),Math.min(l,c,u))>a)return!1}return!0}const K7=new Yr,bp=new K,HS=new K;class Lr{constructor(e=new K,t=-1){this.isSphere=!0,this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const i=this.center;t!==void 0?i.copy(t):K7.setFromPoints(e).getCenter(i);let r=0;for(let s=0,o=e.length;s<o;s++)r=Math.max(r,i.distanceToSquared(e[s]));return this.radius=Math.sqrt(r),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const i=this.center.distanceToSquared(e);return t.copy(e),i>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;bp.subVectors(e,this.center);const t=bp.lengthSq();if(t>this.radius*this.radius){const i=Math.sqrt(t),r=(i-this.radius)*.5;this.center.addScaledVector(bp,r/i),this.radius+=r}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(this.center.equals(e.center)===!0?this.radius=Math.max(this.radius,e.radius):(HS.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(bp.copy(e.center).add(HS)),this.expandByPoint(bp.copy(e.center).sub(HS))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}}const va=new K,GS=new K,yv=new K,vl=new K,WS=new K,vv=new K,qS=new K;class Af{constructor(e=new K,t=new K(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,va)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const i=t.dot(this.direction);return i<0?t.copy(this.origin):t.copy(this.origin).addScaledVector(this.direction,i)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=va.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(va.copy(this.origin).addScaledVector(this.direction,t),va.distanceToSquared(e))}distanceSqToSegment(e,t,i,r){GS.copy(e).add(t).multiplyScalar(.5),yv.copy(t).sub(e).normalize(),vl.copy(this.origin).sub(GS);const s=e.distanceTo(t)*.5,o=-this.direction.dot(yv),a=vl.dot(this.direction),l=-vl.dot(yv),c=vl.lengthSq(),u=Math.abs(1-o*o);let f,m,g,x;if(u>0)if(f=o*l-a,m=o*a-l,x=s*u,f>=0)if(m>=-x)if(m<=x){const b=1/u;f*=b,m*=b,g=f*(f+o*m+2*a)+m*(o*f+m+2*l)+c}else m=s,f=Math.max(0,-(o*m+a)),g=-f*f+m*(m+2*l)+c;else m=-s,f=Math.max(0,-(o*m+a)),g=-f*f+m*(m+2*l)+c;else m<=-x?(f=Math.max(0,-(-o*s+a)),m=f>0?-s:Math.min(Math.max(-s,-l),s),g=-f*f+m*(m+2*l)+c):m<=x?(f=0,m=Math.min(Math.max(-s,-l),s),g=m*(m+2*l)+c):(f=Math.max(0,-(o*s+a)),m=f>0?s:Math.min(Math.max(-s,-l),s),g=-f*f+m*(m+2*l)+c);else m=o>0?-s:s,f=Math.max(0,-(o*m+a)),g=-f*f+m*(m+2*l)+c;return i&&i.copy(this.origin).addScaledVector(this.direction,f),r&&r.copy(GS).addScaledVector(yv,m),g}intersectSphere(e,t){va.subVectors(e.center,this.origin);const i=va.dot(this.direction),r=va.dot(va)-i*i,s=e.radius*e.radius;if(r>s)return null;const o=Math.sqrt(s-r),a=i-o,l=i+o;return l<0?null:a<0?this.at(l,t):this.at(a,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(t===0)return e.distanceToPoint(this.origin)===0?0:null;const i=-(this.origin.dot(e.normal)+e.constant)/t;return i>=0?i:null}intersectPlane(e,t){const i=this.distanceToPlane(e);return i===null?null:this.at(i,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);return t===0||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let i,r,s,o,a,l;const c=1/this.direction.x,u=1/this.direction.y,f=1/this.direction.z,m=this.origin;return c>=0?(i=(e.min.x-m.x)*c,r=(e.max.x-m.x)*c):(i=(e.max.x-m.x)*c,r=(e.min.x-m.x)*c),u>=0?(s=(e.min.y-m.y)*u,o=(e.max.y-m.y)*u):(s=(e.max.y-m.y)*u,o=(e.min.y-m.y)*u),i>o||s>r||((s>i||isNaN(i))&&(i=s),(o<r||isNaN(r))&&(r=o),f>=0?(a=(e.min.z-m.z)*f,l=(e.max.z-m.z)*f):(a=(e.max.z-m.z)*f,l=(e.min.z-m.z)*f),i>l||a>r)||((a>i||i!==i)&&(i=a),(l<r||r!==r)&&(r=l),r<0)?null:this.at(i>=0?i:r,t)}intersectsBox(e){return this.intersectBox(e,va)!==null}intersectTriangle(e,t,i,r,s){WS.subVectors(t,e),vv.subVectors(i,e),qS.crossVectors(WS,vv);let o=this.direction.dot(qS),a;if(o>0){if(r)return null;a=1}else if(o<0)a=-1,o=-o;else return null;vl.subVectors(this.origin,e);const l=a*this.direction.dot(vv.crossVectors(vl,vv));if(l<0)return null;const c=a*this.direction.dot(WS.cross(vl));if(c<0||l+c>o)return null;const u=-a*vl.dot(qS);return u<0?null:this.at(u/o,s)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class Bt{constructor(e,t,i,r,s,o,a,l,c,u,f,m,g,x,b,w){Bt.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],e!==void 0&&this.set(e,t,i,r,s,o,a,l,c,u,f,m,g,x,b,w)}set(e,t,i,r,s,o,a,l,c,u,f,m,g,x,b,w){const v=this.elements;return v[0]=e,v[4]=t,v[8]=i,v[12]=r,v[1]=s,v[5]=o,v[9]=a,v[13]=l,v[2]=c,v[6]=u,v[10]=f,v[14]=m,v[3]=g,v[7]=x,v[11]=b,v[15]=w,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new Bt().fromArray(this.elements)}copy(e){const t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],t[9]=i[9],t[10]=i[10],t[11]=i[11],t[12]=i[12],t[13]=i[13],t[14]=i[14],t[15]=i[15],this}copyPosition(e){const t=this.elements,i=e.elements;return t[12]=i[12],t[13]=i[13],t[14]=i[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,i){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),i.setFromMatrixColumn(this,2),this}makeBasis(e,t,i){return this.set(e.x,t.x,i.x,0,e.y,t.y,i.y,0,e.z,t.z,i.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,i=e.elements,r=1/Hh.setFromMatrixColumn(e,0).length(),s=1/Hh.setFromMatrixColumn(e,1).length(),o=1/Hh.setFromMatrixColumn(e,2).length();return t[0]=i[0]*r,t[1]=i[1]*r,t[2]=i[2]*r,t[3]=0,t[4]=i[4]*s,t[5]=i[5]*s,t[6]=i[6]*s,t[7]=0,t[8]=i[8]*o,t[9]=i[9]*o,t[10]=i[10]*o,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){const t=this.elements,i=e.x,r=e.y,s=e.z,o=Math.cos(i),a=Math.sin(i),l=Math.cos(r),c=Math.sin(r),u=Math.cos(s),f=Math.sin(s);if(e.order==="XYZ"){const m=o*u,g=o*f,x=a*u,b=a*f;t[0]=l*u,t[4]=-l*f,t[8]=c,t[1]=g+x*c,t[5]=m-b*c,t[9]=-a*l,t[2]=b-m*c,t[6]=x+g*c,t[10]=o*l}else if(e.order==="YXZ"){const m=l*u,g=l*f,x=c*u,b=c*f;t[0]=m+b*a,t[4]=x*a-g,t[8]=o*c,t[1]=o*f,t[5]=o*u,t[9]=-a,t[2]=g*a-x,t[6]=b+m*a,t[10]=o*l}else if(e.order==="ZXY"){const m=l*u,g=l*f,x=c*u,b=c*f;t[0]=m-b*a,t[4]=-o*f,t[8]=x+g*a,t[1]=g+x*a,t[5]=o*u,t[9]=b-m*a,t[2]=-o*c,t[6]=a,t[10]=o*l}else if(e.order==="ZYX"){const m=o*u,g=o*f,x=a*u,b=a*f;t[0]=l*u,t[4]=x*c-g,t[8]=m*c+b,t[1]=l*f,t[5]=b*c+m,t[9]=g*c-x,t[2]=-c,t[6]=a*l,t[10]=o*l}else if(e.order==="YZX"){const m=o*l,g=o*c,x=a*l,b=a*c;t[0]=l*u,t[4]=b-m*f,t[8]=x*f+g,t[1]=f,t[5]=o*u,t[9]=-a*u,t[2]=-c*u,t[6]=g*f+x,t[10]=m-b*f}else if(e.order==="XZY"){const m=o*l,g=o*c,x=a*l,b=a*c;t[0]=l*u,t[4]=-f,t[8]=c*u,t[1]=m*f+b,t[5]=o*u,t[9]=g*f-x,t[2]=x*f-g,t[6]=a*u,t[10]=b*f+m}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(J7,e,Q7)}lookAt(e,t,i){const r=this.elements;return As.subVectors(e,t),As.lengthSq()===0&&(As.z=1),As.normalize(),xl.crossVectors(i,As),xl.lengthSq()===0&&(Math.abs(i.z)===1?As.x+=1e-4:As.z+=1e-4,As.normalize(),xl.crossVectors(i,As)),xl.normalize(),xv.crossVectors(As,xl),r[0]=xl.x,r[4]=xv.x,r[8]=As.x,r[1]=xl.y,r[5]=xv.y,r[9]=As.y,r[2]=xl.z,r[6]=xv.z,r[10]=As.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const i=e.elements,r=t.elements,s=this.elements,o=i[0],a=i[4],l=i[8],c=i[12],u=i[1],f=i[5],m=i[9],g=i[13],x=i[2],b=i[6],w=i[10],v=i[14],S=i[3],E=i[7],C=i[11],V=i[15],L=r[0],N=r[4],I=r[8],A=r[12],M=r[1],D=r[5],z=r[9],j=r[13],te=r[2],he=r[6],de=r[10],U=r[14],F=r[3],X=r[7],Y=r[11],ne=r[15];return s[0]=o*L+a*M+l*te+c*F,s[4]=o*N+a*D+l*he+c*X,s[8]=o*I+a*z+l*de+c*Y,s[12]=o*A+a*j+l*U+c*ne,s[1]=u*L+f*M+m*te+g*F,s[5]=u*N+f*D+m*he+g*X,s[9]=u*I+f*z+m*de+g*Y,s[13]=u*A+f*j+m*U+g*ne,s[2]=x*L+b*M+w*te+v*F,s[6]=x*N+b*D+w*he+v*X,s[10]=x*I+b*z+w*de+v*Y,s[14]=x*A+b*j+w*U+v*ne,s[3]=S*L+E*M+C*te+V*F,s[7]=S*N+E*D+C*he+V*X,s[11]=S*I+E*z+C*de+V*Y,s[15]=S*A+E*j+C*U+V*ne,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],i=e[4],r=e[8],s=e[12],o=e[1],a=e[5],l=e[9],c=e[13],u=e[2],f=e[6],m=e[10],g=e[14],x=e[3],b=e[7],w=e[11],v=e[15];return x*(+s*l*f-r*c*f-s*a*m+i*c*m+r*a*g-i*l*g)+b*(+t*l*g-t*c*m+s*o*m-r*o*g+r*c*u-s*l*u)+w*(+t*c*f-t*a*g-s*o*f+i*o*g+s*a*u-i*c*u)+v*(-r*a*u-t*l*f+t*a*m+r*o*f-i*o*m+i*l*u)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,i){const r=this.elements;return e.isVector3?(r[12]=e.x,r[13]=e.y,r[14]=e.z):(r[12]=e,r[13]=t,r[14]=i),this}invert(){const e=this.elements,t=e[0],i=e[1],r=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],u=e[8],f=e[9],m=e[10],g=e[11],x=e[12],b=e[13],w=e[14],v=e[15],S=f*w*c-b*m*c+b*l*g-a*w*g-f*l*v+a*m*v,E=x*m*c-u*w*c-x*l*g+o*w*g+u*l*v-o*m*v,C=u*b*c-x*f*c+x*a*g-o*b*g-u*a*v+o*f*v,V=x*f*l-u*b*l-x*a*m+o*b*m+u*a*w-o*f*w,L=t*S+i*E+r*C+s*V;if(L===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const N=1/L;return e[0]=S*N,e[1]=(b*m*s-f*w*s-b*r*g+i*w*g+f*r*v-i*m*v)*N,e[2]=(a*w*s-b*l*s+b*r*c-i*w*c-a*r*v+i*l*v)*N,e[3]=(f*l*s-a*m*s-f*r*c+i*m*c+a*r*g-i*l*g)*N,e[4]=E*N,e[5]=(u*w*s-x*m*s+x*r*g-t*w*g-u*r*v+t*m*v)*N,e[6]=(x*l*s-o*w*s-x*r*c+t*w*c+o*r*v-t*l*v)*N,e[7]=(o*m*s-u*l*s+u*r*c-t*m*c-o*r*g+t*l*g)*N,e[8]=C*N,e[9]=(x*f*s-u*b*s-x*i*g+t*b*g+u*i*v-t*f*v)*N,e[10]=(o*b*s-x*a*s+x*i*c-t*b*c-o*i*v+t*a*v)*N,e[11]=(u*a*s-o*f*s-u*i*c+t*f*c+o*i*g-t*a*g)*N,e[12]=V*N,e[13]=(u*b*r-x*f*r+x*i*m-t*b*m-u*i*w+t*f*w)*N,e[14]=(x*a*r-o*b*r-x*i*l+t*b*l+o*i*w-t*a*w)*N,e[15]=(o*f*r-u*a*r+u*i*l-t*f*l-o*i*m+t*a*m)*N,this}scale(e){const t=this.elements,i=e.x,r=e.y,s=e.z;return t[0]*=i,t[4]*=r,t[8]*=s,t[1]*=i,t[5]*=r,t[9]*=s,t[2]*=i,t[6]*=r,t[10]*=s,t[3]*=i,t[7]*=r,t[11]*=s,this}getMaxScaleOnAxis(){const e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],i=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],r=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,i,r))}makeTranslation(e,t,i){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,t,0,0,1,i,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),i=Math.sin(e);return this.set(1,0,0,0,0,t,-i,0,0,i,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,0,i,0,0,1,0,0,-i,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,-i,0,0,i,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const i=Math.cos(t),r=Math.sin(t),s=1-i,o=e.x,a=e.y,l=e.z,c=s*o,u=s*a;return this.set(c*o+i,c*a-r*l,c*l+r*a,0,c*a+r*l,u*a+i,u*l-r*o,0,c*l-r*a,u*l+r*o,s*l*l+i,0,0,0,0,1),this}makeScale(e,t,i){return this.set(e,0,0,0,0,t,0,0,0,0,i,0,0,0,0,1),this}makeShear(e,t,i,r,s,o){return this.set(1,i,s,0,e,1,o,0,t,r,1,0,0,0,0,1),this}compose(e,t,i){const r=this.elements,s=t._x,o=t._y,a=t._z,l=t._w,c=s+s,u=o+o,f=a+a,m=s*c,g=s*u,x=s*f,b=o*u,w=o*f,v=a*f,S=l*c,E=l*u,C=l*f,V=i.x,L=i.y,N=i.z;return r[0]=(1-(b+v))*V,r[1]=(g+C)*V,r[2]=(x-E)*V,r[3]=0,r[4]=(g-C)*L,r[5]=(1-(m+v))*L,r[6]=(w+S)*L,r[7]=0,r[8]=(x+E)*N,r[9]=(w-S)*N,r[10]=(1-(m+b))*N,r[11]=0,r[12]=e.x,r[13]=e.y,r[14]=e.z,r[15]=1,this}decompose(e,t,i){const r=this.elements;let s=Hh.set(r[0],r[1],r[2]).length();const o=Hh.set(r[4],r[5],r[6]).length(),a=Hh.set(r[8],r[9],r[10]).length();this.determinant()<0&&(s=-s),e.x=r[12],e.y=r[13],e.z=r[14],mo.copy(this);const c=1/s,u=1/o,f=1/a;return mo.elements[0]*=c,mo.elements[1]*=c,mo.elements[2]*=c,mo.elements[4]*=u,mo.elements[5]*=u,mo.elements[6]*=u,mo.elements[8]*=f,mo.elements[9]*=f,mo.elements[10]*=f,t.setFromRotationMatrix(mo),i.x=s,i.y=o,i.z=a,this}makePerspective(e,t,i,r,s,o,a=qo){const l=this.elements,c=2*s/(t-e),u=2*s/(i-r),f=(t+e)/(t-e),m=(i+r)/(i-r);let g,x;if(a===qo)g=-(o+s)/(o-s),x=-2*o*s/(o-s);else if(a===ig)g=-o/(o-s),x=-o*s/(o-s);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+a);return l[0]=c,l[4]=0,l[8]=f,l[12]=0,l[1]=0,l[5]=u,l[9]=m,l[13]=0,l[2]=0,l[6]=0,l[10]=g,l[14]=x,l[3]=0,l[7]=0,l[11]=-1,l[15]=0,this}makeOrthographic(e,t,i,r,s,o,a=qo){const l=this.elements,c=1/(t-e),u=1/(i-r),f=1/(o-s),m=(t+e)*c,g=(i+r)*u;let x,b;if(a===qo)x=(o+s)*f,b=-2*f;else if(a===ig)x=s*f,b=-1*f;else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+a);return l[0]=2*c,l[4]=0,l[8]=0,l[12]=-m,l[1]=0,l[5]=2*u,l[9]=0,l[13]=-g,l[2]=0,l[6]=0,l[10]=b,l[14]=-x,l[3]=0,l[7]=0,l[11]=0,l[15]=1,this}equals(e){const t=this.elements,i=e.elements;for(let r=0;r<16;r++)if(t[r]!==i[r])return!1;return!0}fromArray(e,t=0){for(let i=0;i<16;i++)this.elements[i]=e[i+t];return this}toArray(e=[],t=0){const i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e[t+9]=i[9],e[t+10]=i[10],e[t+11]=i[11],e[t+12]=i[12],e[t+13]=i[13],e[t+14]=i[14],e[t+15]=i[15],e}}const Hh=new K,mo=new Bt,J7=new K(0,0,0),Q7=new K(1,1,1),xl=new K,xv=new K,As=new K,d2=new Bt,f2=new gs;class Fs{constructor(e=0,t=0,i=0,r=Fs.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=t,this._z=i,this._order=r}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,i,r=this._order){return this._x=e,this._y=t,this._z=i,this._order=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t=this._order,i=!0){const r=e.elements,s=r[0],o=r[4],a=r[8],l=r[1],c=r[5],u=r[9],f=r[2],m=r[6],g=r[10];switch(t){case"XYZ":this._y=Math.asin(yi(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(-u,g),this._z=Math.atan2(-o,s)):(this._x=Math.atan2(m,c),this._z=0);break;case"YXZ":this._x=Math.asin(-yi(u,-1,1)),Math.abs(u)<.9999999?(this._y=Math.atan2(a,g),this._z=Math.atan2(l,c)):(this._y=Math.atan2(-f,s),this._z=0);break;case"ZXY":this._x=Math.asin(yi(m,-1,1)),Math.abs(m)<.9999999?(this._y=Math.atan2(-f,g),this._z=Math.atan2(-o,c)):(this._y=0,this._z=Math.atan2(l,s));break;case"ZYX":this._y=Math.asin(-yi(f,-1,1)),Math.abs(f)<.9999999?(this._x=Math.atan2(m,g),this._z=Math.atan2(l,s)):(this._x=0,this._z=Math.atan2(-o,c));break;case"YZX":this._z=Math.asin(yi(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-u,c),this._y=Math.atan2(-f,s)):(this._x=0,this._y=Math.atan2(a,g));break;case"XZY":this._z=Math.asin(-yi(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(m,c),this._y=Math.atan2(a,s)):(this._x=Math.atan2(-u,g),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,i===!0&&this._onChangeCallback(),this}setFromQuaternion(e,t,i){return d2.makeRotationFromQuaternion(e),this.setFromRotationMatrix(d2,t,i)}setFromVector3(e,t=this._order){return this.set(e.x,e.y,e.z,t)}reorder(e){return f2.setFromEuler(this),this.setFromQuaternion(f2,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}Fs.DEFAULT_ORDER="XYZ";class Uu{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}}let Z7=0;const p2=new K,Gh=new gs,xa=new Bt,_v=new K,Sp=new K,eq=new K,tq=new gs,m2=new K(1,0,0),g2=new K(0,1,0),y2=new K(0,0,1),v2={type:"added"},nq={type:"removed"},Wh={type:"childadded",child:null},$S={type:"childremoved",child:null};class In extends aa{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:Z7++}),this.uuid=ks(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=In.DEFAULT_UP.clone();const e=new K,t=new Fs,i=new gs,r=new K(1,1,1);function s(){i.setFromEuler(t,!1)}function o(){t.setFromQuaternion(i,void 0,!1)}t._onChange(s),i._onChange(o),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:i},scale:{configurable:!0,enumerable:!0,value:r},modelViewMatrix:{value:new Bt},normalMatrix:{value:new en}}),this.matrix=new Bt,this.matrixWorld=new Bt,this.matrixAutoUpdate=In.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=In.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new Uu,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return Gh.setFromAxisAngle(e,t),this.quaternion.multiply(Gh),this}rotateOnWorldAxis(e,t){return Gh.setFromAxisAngle(e,t),this.quaternion.premultiply(Gh),this}rotateX(e){return this.rotateOnAxis(m2,e)}rotateY(e){return this.rotateOnAxis(g2,e)}rotateZ(e){return this.rotateOnAxis(y2,e)}translateOnAxis(e,t){return p2.copy(e).applyQuaternion(this.quaternion),this.position.add(p2.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(m2,e)}translateY(e){return this.translateOnAxis(g2,e)}translateZ(e){return this.translateOnAxis(y2,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(xa.copy(this.matrixWorld).invert())}lookAt(e,t,i){e.isVector3?_v.copy(e):_v.set(e,t,i);const r=this.parent;this.updateWorldMatrix(!0,!1),Sp.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?xa.lookAt(Sp,_v,this.up):xa.lookAt(_v,Sp,this.up),this.quaternion.setFromRotationMatrix(xa),r&&(xa.extractRotation(r.matrixWorld),Gh.setFromRotationMatrix(xa),this.quaternion.premultiply(Gh.invert()))}add(e){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.removeFromParent(),e.parent=this,this.children.push(e),e.dispatchEvent(v2),Wh.child=e,this.dispatchEvent(Wh),Wh.child=null):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let i=0;i<arguments.length;i++)this.remove(arguments[i]);return this}const t=this.children.indexOf(e);return t!==-1&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(nq),$S.child=e,this.dispatchEvent($S),$S.child=null),this}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}clear(){return this.remove(...this.children)}attach(e){return this.updateWorldMatrix(!0,!1),xa.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),xa.multiply(e.parent.matrixWorld)),e.applyMatrix4(xa),e.removeFromParent(),e.parent=this,this.children.push(e),e.updateWorldMatrix(!1,!0),e.dispatchEvent(v2),Wh.child=e,this.dispatchEvent(Wh),Wh.child=null,this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let i=0,r=this.children.length;i<r;i++){const o=this.children[i].getObjectByProperty(e,t);if(o!==void 0)return o}}getObjectsByProperty(e,t,i=[]){this[e]===t&&i.push(this);const r=this.children;for(let s=0,o=r.length;s<o;s++)r[s].getObjectsByProperty(e,t,i);return i}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Sp,e,eq),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Sp,tq,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);const t=this.children;for(let i=0,r=t.length;i<r;i++)t[i].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const t=this.children;for(let i=0,r=t.length;i<r;i++)t[i].traverseVisible(e)}traverseAncestors(e){const t=this.parent;t!==null&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),this.matrixWorldNeedsUpdate=!1,e=!0);const t=this.children;for(let i=0,r=t.length;i<r;i++)t[i].updateMatrixWorld(e)}updateWorldMatrix(e,t){const i=this.parent;if(e===!0&&i!==null&&i.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),t===!0){const r=this.children;for(let s=0,o=r.length;s<o;s++)r[s].updateWorldMatrix(!1,!0)}}toJSON(e){const t=e===void 0||typeof e=="string",i={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},i.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"});const r={};r.uuid=this.uuid,r.type=this.type,this.name!==""&&(r.name=this.name),this.castShadow===!0&&(r.castShadow=!0),this.receiveShadow===!0&&(r.receiveShadow=!0),this.visible===!1&&(r.visible=!1),this.frustumCulled===!1&&(r.frustumCulled=!1),this.renderOrder!==0&&(r.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(r.userData=this.userData),r.layers=this.layers.mask,r.matrix=this.matrix.toArray(),r.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(r.matrixAutoUpdate=!1),this.isInstancedMesh&&(r.type="InstancedMesh",r.count=this.count,r.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(r.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(r.type="BatchedMesh",r.perObjectFrustumCulled=this.perObjectFrustumCulled,r.sortObjects=this.sortObjects,r.drawRanges=this._drawRanges,r.reservedRanges=this._reservedRanges,r.visibility=this._visibility,r.active=this._active,r.bounds=this._bounds.map(a=>({boxInitialized:a.boxInitialized,boxMin:a.box.min.toArray(),boxMax:a.box.max.toArray(),sphereInitialized:a.sphereInitialized,sphereRadius:a.sphere.radius,sphereCenter:a.sphere.center.toArray()})),r.maxInstanceCount=this._maxInstanceCount,r.maxVertexCount=this._maxVertexCount,r.maxIndexCount=this._maxIndexCount,r.geometryInitialized=this._geometryInitialized,r.geometryCount=this._geometryCount,r.matricesTexture=this._matricesTexture.toJSON(e),this._colorsTexture!==null&&(r.colorsTexture=this._colorsTexture.toJSON(e)),this.boundingSphere!==null&&(r.boundingSphere={center:r.boundingSphere.center.toArray(),radius:r.boundingSphere.radius}),this.boundingBox!==null&&(r.boundingBox={min:r.boundingBox.min.toArray(),max:r.boundingBox.max.toArray()}));function s(a,l){return a[l.uuid]===void 0&&(a[l.uuid]=l.toJSON(e)),l.uuid}if(this.isScene)this.background&&(this.background.isColor?r.background=this.background.toJSON():this.background.isTexture&&(r.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(r.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){r.geometry=s(e.geometries,this.geometry);const a=this.geometry.parameters;if(a!==void 0&&a.shapes!==void 0){const l=a.shapes;if(Array.isArray(l))for(let c=0,u=l.length;c<u;c++){const f=l[c];s(e.shapes,f)}else s(e.shapes,l)}}if(this.isSkinnedMesh&&(r.bindMode=this.bindMode,r.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(s(e.skeletons,this.skeleton),r.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const a=[];for(let l=0,c=this.material.length;l<c;l++)a.push(s(e.materials,this.material[l]));r.material=a}else r.material=s(e.materials,this.material);if(this.children.length>0){r.children=[];for(let a=0;a<this.children.length;a++)r.children.push(this.children[a].toJSON(e).object)}if(this.animations.length>0){r.animations=[];for(let a=0;a<this.animations.length;a++){const l=this.animations[a];r.animations.push(s(e.animations,l))}}if(t){const a=o(e.geometries),l=o(e.materials),c=o(e.textures),u=o(e.images),f=o(e.shapes),m=o(e.skeletons),g=o(e.animations),x=o(e.nodes);a.length>0&&(i.geometries=a),l.length>0&&(i.materials=l),c.length>0&&(i.textures=c),u.length>0&&(i.images=u),f.length>0&&(i.shapes=f),m.length>0&&(i.skeletons=m),g.length>0&&(i.animations=g),x.length>0&&(i.nodes=x)}return i.object=r,i;function o(a){const l=[];for(const c in a){const u=a[c];delete u.metadata,l.push(u)}return l}}clone(e){return new this.constructor().copy(this,e)}copy(e,t=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.animations=e.animations.slice(),this.userData=JSON.parse(JSON.stringify(e.userData)),t===!0)for(let i=0;i<e.children.length;i++){const r=e.children[i];this.add(r.clone())}return this}}In.DEFAULT_UP=new K(0,1,0);In.DEFAULT_MATRIX_AUTO_UPDATE=!0;In.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const go=new K,_a=new K,XS=new K,wa=new K,qh=new K,$h=new K,x2=new K,YS=new K,KS=new K,JS=new K,QS=new An,ZS=new An,eT=new An;class cs{constructor(e=new K,t=new K,i=new K){this.a=e,this.b=t,this.c=i}static getNormal(e,t,i,r){r.subVectors(i,t),go.subVectors(e,t),r.cross(go);const s=r.lengthSq();return s>0?r.multiplyScalar(1/Math.sqrt(s)):r.set(0,0,0)}static getBarycoord(e,t,i,r,s){go.subVectors(r,t),_a.subVectors(i,t),XS.subVectors(e,t);const o=go.dot(go),a=go.dot(_a),l=go.dot(XS),c=_a.dot(_a),u=_a.dot(XS),f=o*c-a*a;if(f===0)return s.set(0,0,0),null;const m=1/f,g=(c*l-a*u)*m,x=(o*u-a*l)*m;return s.set(1-g-x,x,g)}static containsPoint(e,t,i,r){return this.getBarycoord(e,t,i,r,wa)===null?!1:wa.x>=0&&wa.y>=0&&wa.x+wa.y<=1}static getInterpolation(e,t,i,r,s,o,a,l){return this.getBarycoord(e,t,i,r,wa)===null?(l.x=0,l.y=0,"z"in l&&(l.z=0),"w"in l&&(l.w=0),null):(l.setScalar(0),l.addScaledVector(s,wa.x),l.addScaledVector(o,wa.y),l.addScaledVector(a,wa.z),l)}static getInterpolatedAttribute(e,t,i,r,s,o){return QS.setScalar(0),ZS.setScalar(0),eT.setScalar(0),QS.fromBufferAttribute(e,t),ZS.fromBufferAttribute(e,i),eT.fromBufferAttribute(e,r),o.setScalar(0),o.addScaledVector(QS,s.x),o.addScaledVector(ZS,s.y),o.addScaledVector(eT,s.z),o}static isFrontFacing(e,t,i,r){return go.subVectors(i,t),_a.subVectors(e,t),go.cross(_a).dot(r)<0}set(e,t,i){return this.a.copy(e),this.b.copy(t),this.c.copy(i),this}setFromPointsAndIndices(e,t,i,r){return this.a.copy(e[t]),this.b.copy(e[i]),this.c.copy(e[r]),this}setFromAttributeAndIndices(e,t,i,r){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,i),this.c.fromBufferAttribute(e,r),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return go.subVectors(this.c,this.b),_a.subVectors(this.a,this.b),go.cross(_a).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return cs.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return cs.getBarycoord(e,this.a,this.b,this.c,t)}getInterpolation(e,t,i,r,s){return cs.getInterpolation(e,this.a,this.b,this.c,t,i,r,s)}containsPoint(e){return cs.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return cs.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const i=this.a,r=this.b,s=this.c;let o,a;qh.subVectors(r,i),$h.subVectors(s,i),YS.subVectors(e,i);const l=qh.dot(YS),c=$h.dot(YS);if(l<=0&&c<=0)return t.copy(i);KS.subVectors(e,r);const u=qh.dot(KS),f=$h.dot(KS);if(u>=0&&f<=u)return t.copy(r);const m=l*f-u*c;if(m<=0&&l>=0&&u<=0)return o=l/(l-u),t.copy(i).addScaledVector(qh,o);JS.subVectors(e,s);const g=qh.dot(JS),x=$h.dot(JS);if(x>=0&&g<=x)return t.copy(s);const b=g*c-l*x;if(b<=0&&c>=0&&x<=0)return a=c/(c-x),t.copy(i).addScaledVector($h,a);const w=u*x-g*f;if(w<=0&&f-u>=0&&g-x>=0)return x2.subVectors(s,r),a=(f-u)/(f-u+(g-x)),t.copy(r).addScaledVector(x2,a);const v=1/(w+b+m);return o=b*v,a=m*v,t.copy(i).addScaledVector(qh,o).addScaledVector($h,a)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}const _j={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},_l={h:0,s:0,l:0},wv={h:0,s:0,l:0};function tT(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*6*(2/3-t):n}class pt{constructor(e,t,i){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,t,i)}set(e,t,i){if(t===void 0&&i===void 0){const r=e;r&&r.isColor?this.copy(r):typeof r=="number"?this.setHex(r):typeof r=="string"&&this.setStyle(r)}else this.setRGB(e,t,i);return this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,t=os){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,_n.toWorkingColorSpace(this,t),this}setRGB(e,t,i,r=_n.workingColorSpace){return this.r=e,this.g=t,this.b=i,_n.toWorkingColorSpace(this,r),this}setHSL(e,t,i,r=_n.workingColorSpace){if(e=RA(e,1),t=yi(t,0,1),i=yi(i,0,1),t===0)this.r=this.g=this.b=i;else{const s=i<=.5?i*(1+t):i+t-i*t,o=2*i-s;this.r=tT(o,s,e+1/3),this.g=tT(o,s,e),this.b=tT(o,s,e-1/3)}return _n.toWorkingColorSpace(this,r),this}setStyle(e,t=os){function i(s){s!==void 0&&parseFloat(s)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let r;if(r=/^(\w+)\(([^\)]*)\)/.exec(e)){let s;const o=r[1],a=r[2];switch(o){case"rgb":case"rgba":if(s=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return i(s[4]),this.setRGB(Math.min(255,parseInt(s[1],10))/255,Math.min(255,parseInt(s[2],10))/255,Math.min(255,parseInt(s[3],10))/255,t);if(s=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return i(s[4]),this.setRGB(Math.min(100,parseInt(s[1],10))/100,Math.min(100,parseInt(s[2],10))/100,Math.min(100,parseInt(s[3],10))/100,t);break;case"hsl":case"hsla":if(s=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return i(s[4]),this.setHSL(parseFloat(s[1])/360,parseFloat(s[2])/100,parseFloat(s[3])/100,t);break;default:console.warn("THREE.Color: Unknown color model "+e)}}else if(r=/^\#([A-Fa-f\d]+)$/.exec(e)){const s=r[1],o=s.length;if(o===3)return this.setRGB(parseInt(s.charAt(0),16)/15,parseInt(s.charAt(1),16)/15,parseInt(s.charAt(2),16)/15,t);if(o===6)return this.setHex(parseInt(s,16),t);console.warn("THREE.Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,t);return this}setColorName(e,t=os){const i=_j[e.toLowerCase()];return i!==void 0?this.setHex(i,t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=Ua(e.r),this.g=Ua(e.g),this.b=Ua(e.b),this}copyLinearToSRGB(e){return this.r=Gd(e.r),this.g=Gd(e.g),this.b=Gd(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=os){return _n.fromWorkingColorSpace(Sr.copy(this),e),Math.round(yi(Sr.r*255,0,255))*65536+Math.round(yi(Sr.g*255,0,255))*256+Math.round(yi(Sr.b*255,0,255))}getHexString(e=os){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,t=_n.workingColorSpace){_n.fromWorkingColorSpace(Sr.copy(this),t);const i=Sr.r,r=Sr.g,s=Sr.b,o=Math.max(i,r,s),a=Math.min(i,r,s);let l,c;const u=(a+o)/2;if(a===o)l=0,c=0;else{const f=o-a;switch(c=u<=.5?f/(o+a):f/(2-o-a),o){case i:l=(r-s)/f+(r<s?6:0);break;case r:l=(s-i)/f+2;break;case s:l=(i-r)/f+4;break}l/=6}return e.h=l,e.s=c,e.l=u,e}getRGB(e,t=_n.workingColorSpace){return _n.fromWorkingColorSpace(Sr.copy(this),t),e.r=Sr.r,e.g=Sr.g,e.b=Sr.b,e}getStyle(e=os){_n.fromWorkingColorSpace(Sr.copy(this),e);const t=Sr.r,i=Sr.g,r=Sr.b;return e!==os?`color(${e} ${t.toFixed(3)} ${i.toFixed(3)} ${r.toFixed(3)})`:`rgb(${Math.round(t*255)},${Math.round(i*255)},${Math.round(r*255)})`}offsetHSL(e,t,i){return this.getHSL(_l),this.setHSL(_l.h+e,_l.s+t,_l.l+i)}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,i){return this.r=e.r+(t.r-e.r)*i,this.g=e.g+(t.g-e.g)*i,this.b=e.b+(t.b-e.b)*i,this}lerpHSL(e,t){this.getHSL(_l),e.getHSL(wv);const i=ym(_l.h,wv.h,t),r=ym(_l.s,wv.s,t),s=ym(_l.l,wv.l,t);return this.setHSL(i,r,s),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){const t=this.r,i=this.g,r=this.b,s=e.elements;return this.r=s[0]*t+s[3]*i+s[6]*r,this.g=s[1]*t+s[4]*i+s[7]*r,this.b=s[2]*t+s[5]*i+s[8]*r,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const Sr=new pt;pt.NAMES=_j;let iq=0;class fr extends aa{static get type(){return"Material"}get type(){return this.constructor.type}set type(e){}constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:iq++}),this.uuid=ks(),this.name="",this.blending=Lu,this.side=Xa,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=Tx,this.blendDst=Ex,this.blendEquation=Dl,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new pt(0,0,0),this.blendAlpha=0,this.depthFunc=Yu,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=cE,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=fu,this.stencilZFail=fu,this.stencilZPass=fu,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(const t in e){const i=e[t];if(i===void 0){console.warn(`THREE.Material: parameter '${t}' has value of undefined.`);continue}const r=this[t];if(r===void 0){console.warn(`THREE.Material: '${t}' is not a property of THREE.${this.type}.`);continue}r&&r.isColor?r.set(i):r&&r.isVector3&&i&&i.isVector3?r.copy(i):this[t]=i}}toJSON(e){const t=e===void 0||typeof e=="string";t&&(e={textures:{},images:{}});const i={metadata:{version:4.6,type:"Material",generator:"Material.toJSON"}};i.uuid=this.uuid,i.type=this.type,this.name!==""&&(i.name=this.name),this.color&&this.color.isColor&&(i.color=this.color.getHex()),this.roughness!==void 0&&(i.roughness=this.roughness),this.metalness!==void 0&&(i.metalness=this.metalness),this.sheen!==void 0&&(i.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(i.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(i.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(i.emissive=this.emissive.getHex()),this.emissiveIntensity!==void 0&&this.emissiveIntensity!==1&&(i.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(i.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(i.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(i.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(i.shininess=this.shininess),this.clearcoat!==void 0&&(i.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(i.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(i.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(i.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(i.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,i.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.dispersion!==void 0&&(i.dispersion=this.dispersion),this.iridescence!==void 0&&(i.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(i.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(i.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(i.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(i.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.anisotropy!==void 0&&(i.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&&(i.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(i.anisotropyMap=this.anisotropyMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(i.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(i.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(i.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(i.lightMap=this.lightMap.toJSON(e).uuid,i.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(i.aoMap=this.aoMap.toJSON(e).uuid,i.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(i.bumpMap=this.bumpMap.toJSON(e).uuid,i.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(i.normalMap=this.normalMap.toJSON(e).uuid,i.normalMapType=this.normalMapType,i.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(i.displacementMap=this.displacementMap.toJSON(e).uuid,i.displacementScale=this.displacementScale,i.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(i.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(i.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(i.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(i.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(i.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(i.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(i.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(i.combine=this.combine)),this.envMapRotation!==void 0&&(i.envMapRotation=this.envMapRotation.toArray()),this.envMapIntensity!==void 0&&(i.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(i.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(i.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(i.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(i.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(i.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(i.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(i.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(i.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(i.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(i.size=this.size),this.shadowSide!==null&&(i.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(i.sizeAttenuation=this.sizeAttenuation),this.blending!==Lu&&(i.blending=this.blending),this.side!==Xa&&(i.side=this.side),this.vertexColors===!0&&(i.vertexColors=!0),this.opacity<1&&(i.opacity=this.opacity),this.transparent===!0&&(i.transparent=!0),this.blendSrc!==Tx&&(i.blendSrc=this.blendSrc),this.blendDst!==Ex&&(i.blendDst=this.blendDst),this.blendEquation!==Dl&&(i.blendEquation=this.blendEquation),this.blendSrcAlpha!==null&&(i.blendSrcAlpha=this.blendSrcAlpha),this.blendDstAlpha!==null&&(i.blendDstAlpha=this.blendDstAlpha),this.blendEquationAlpha!==null&&(i.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(i.blendColor=this.blendColor.getHex()),this.blendAlpha!==0&&(i.blendAlpha=this.blendAlpha),this.depthFunc!==Yu&&(i.depthFunc=this.depthFunc),this.depthTest===!1&&(i.depthTest=this.depthTest),this.depthWrite===!1&&(i.depthWrite=this.depthWrite),this.colorWrite===!1&&(i.colorWrite=this.colorWrite),this.stencilWriteMask!==255&&(i.stencilWriteMask=this.stencilWriteMask),this.stencilFunc!==cE&&(i.stencilFunc=this.stencilFunc),this.stencilRef!==0&&(i.stencilRef=this.stencilRef),this.stencilFuncMask!==255&&(i.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==fu&&(i.stencilFail=this.stencilFail),this.stencilZFail!==fu&&(i.stencilZFail=this.stencilZFail),this.stencilZPass!==fu&&(i.stencilZPass=this.stencilZPass),this.stencilWrite===!0&&(i.stencilWrite=this.stencilWrite),this.rotation!==void 0&&this.rotation!==0&&(i.rotation=this.rotation),this.polygonOffset===!0&&(i.polygonOffset=!0),this.polygonOffsetFactor!==0&&(i.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(i.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(i.linewidth=this.linewidth),this.dashSize!==void 0&&(i.dashSize=this.dashSize),this.gapSize!==void 0&&(i.gapSize=this.gapSize),this.scale!==void 0&&(i.scale=this.scale),this.dithering===!0&&(i.dithering=!0),this.alphaTest>0&&(i.alphaTest=this.alphaTest),this.alphaHash===!0&&(i.alphaHash=!0),this.alphaToCoverage===!0&&(i.alphaToCoverage=!0),this.premultipliedAlpha===!0&&(i.premultipliedAlpha=!0),this.forceSinglePass===!0&&(i.forceSinglePass=!0),this.wireframe===!0&&(i.wireframe=!0),this.wireframeLinewidth>1&&(i.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(i.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(i.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(i.flatShading=!0),this.visible===!1&&(i.visible=!1),this.toneMapped===!1&&(i.toneMapped=!1),this.fog===!1&&(i.fog=!1),Object.keys(this.userData).length>0&&(i.userData=this.userData);function r(s){const o=[];for(const a in s){const l=s[a];delete l.metadata,o.push(l)}return o}if(t){const s=r(e.textures),o=r(e.images);s.length>0&&(i.textures=s),o.length>0&&(i.images=o)}return i}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.blendColor.copy(e.blendColor),this.blendAlpha=e.blendAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let i=null;if(t!==null){const r=t.length;i=new Array(r);for(let s=0;s!==r;++s)i[s]=t[s].clone()}return this.clippingPlanes=i,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaHash=e.alphaHash,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}onBuild(){console.warn("Material: onBuild() has been removed.")}}class Cc extends fr{static get type(){return"MeshBasicMaterial"}constructor(e){super(),this.isMeshBasicMaterial=!0,this.color=new pt(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Fs,this.combine=Ug,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const Ca=rq();function rq(){const n=new ArrayBuffer(4),e=new Float32Array(n),t=new Uint32Array(n),i=new Uint32Array(512),r=new Uint32Array(512);for(let l=0;l<256;++l){const c=l-127;c<-27?(i[l]=0,i[l|256]=32768,r[l]=24,r[l|256]=24):c<-14?(i[l]=1024>>-c-14,i[l|256]=1024>>-c-14|32768,r[l]=-c-1,r[l|256]=-c-1):c<=15?(i[l]=c+15<<10,i[l|256]=c+15<<10|32768,r[l]=13,r[l|256]=13):c<128?(i[l]=31744,i[l|256]=64512,r[l]=24,r[l|256]=24):(i[l]=31744,i[l|256]=64512,r[l]=13,r[l|256]=13)}const s=new Uint32Array(2048),o=new Uint32Array(64),a=new Uint32Array(64);for(let l=1;l<1024;++l){let c=l<<13,u=0;for(;!(c&8388608);)c<<=1,u-=8388608;c&=-8388609,u+=947912704,s[l]=c|u}for(let l=1024;l<2048;++l)s[l]=939524096+(l-1024<<13);for(let l=1;l<31;++l)o[l]=l<<23;o[31]=1199570944,o[32]=2147483648;for(let l=33;l<63;++l)o[l]=2147483648+(l-32<<23);o[63]=3347054592;for(let l=1;l<64;++l)l!==32&&(a[l]=1024);return{floatView:e,uint32View:t,baseTable:i,shiftTable:r,mantissaTable:s,exponentTable:o,offsetTable:a}}function is(n){Math.abs(n)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),n=yi(n,-65504,65504),Ca.floatView[0]=n;const e=Ca.uint32View[0],t=e>>23&511;return Ca.baseTable[t]+((e&8388607)>>Ca.shiftTable[t])}function Gp(n){const e=n>>10;return Ca.uint32View[0]=Ca.mantissaTable[Ca.offsetTable[e]+(n&1023)]+Ca.exponentTable[e],Ca.floatView[0]}const sq={toHalfFloat:is,fromHalfFloat:Gp},Li=new K,bv=new De;class qn{constructor(e,t,i=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=e,this.itemSize=t,this.count=e!==void 0?e.length/t:0,this.normalized=i,this.usage=ng,this.updateRanges=[],this.gpuType=ds,this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}copyAt(e,t,i){e*=this.itemSize,i*=t.itemSize;for(let r=0,s=this.itemSize;r<s;r++)this.array[e+r]=t.array[i+r];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let t=0,i=this.count;t<i;t++)bv.fromBufferAttribute(this,t),bv.applyMatrix3(e),this.setXY(t,bv.x,bv.y);else if(this.itemSize===3)for(let t=0,i=this.count;t<i;t++)Li.fromBufferAttribute(this,t),Li.applyMatrix3(e),this.setXYZ(t,Li.x,Li.y,Li.z);return this}applyMatrix4(e){for(let t=0,i=this.count;t<i;t++)Li.fromBufferAttribute(this,t),Li.applyMatrix4(e),this.setXYZ(t,Li.x,Li.y,Li.z);return this}applyNormalMatrix(e){for(let t=0,i=this.count;t<i;t++)Li.fromBufferAttribute(this,t),Li.applyNormalMatrix(e),this.setXYZ(t,Li.x,Li.y,Li.z);return this}transformDirection(e){for(let t=0,i=this.count;t<i;t++)Li.fromBufferAttribute(this,t),Li.transformDirection(e),this.setXYZ(t,Li.x,Li.y,Li.z);return this}set(e,t=0){return this.array.set(e,t),this}getComponent(e,t){let i=this.array[e*this.itemSize+t];return this.normalized&&(i=qr(i,this.array)),i}setComponent(e,t,i){return this.normalized&&(i=nn(i,this.array)),this.array[e*this.itemSize+t]=i,this}getX(e){let t=this.array[e*this.itemSize];return this.normalized&&(t=qr(t,this.array)),t}setX(e,t){return this.normalized&&(t=nn(t,this.array)),this.array[e*this.itemSize]=t,this}getY(e){let t=this.array[e*this.itemSize+1];return this.normalized&&(t=qr(t,this.array)),t}setY(e,t){return this.normalized&&(t=nn(t,this.array)),this.array[e*this.itemSize+1]=t,this}getZ(e){let t=this.array[e*this.itemSize+2];return this.normalized&&(t=qr(t,this.array)),t}setZ(e,t){return this.normalized&&(t=nn(t,this.array)),this.array[e*this.itemSize+2]=t,this}getW(e){let t=this.array[e*this.itemSize+3];return this.normalized&&(t=qr(t,this.array)),t}setW(e,t){return this.normalized&&(t=nn(t,this.array)),this.array[e*this.itemSize+3]=t,this}setXY(e,t,i){return e*=this.itemSize,this.normalized&&(t=nn(t,this.array),i=nn(i,this.array)),this.array[e+0]=t,this.array[e+1]=i,this}setXYZ(e,t,i,r){return e*=this.itemSize,this.normalized&&(t=nn(t,this.array),i=nn(i,this.array),r=nn(r,this.array)),this.array[e+0]=t,this.array[e+1]=i,this.array[e+2]=r,this}setXYZW(e,t,i,r,s){return e*=this.itemSize,this.normalized&&(t=nn(t,this.array),i=nn(i,this.array),r=nn(r,this.array),s=nn(s,this.array)),this.array[e+0]=t,this.array[e+1]=i,this.array[e+2]=r,this.array[e+3]=s,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==ng&&(e.usage=this.usage),e}}class oq extends qn{constructor(e,t,i){super(new Int8Array(e),t,i)}}class aq extends qn{constructor(e,t,i){super(new Uint8Array(e),t,i)}}class lq extends qn{constructor(e,t,i){super(new Uint8ClampedArray(e),t,i)}}class cq extends qn{constructor(e,t,i){super(new Int16Array(e),t,i)}}class LA extends qn{constructor(e,t,i){super(new Uint16Array(e),t,i)}}class uq extends qn{constructor(e,t,i){super(new Int32Array(e),t,i)}}class DA extends qn{constructor(e,t,i){super(new Uint32Array(e),t,i)}}class hq extends qn{constructor(e,t,i){super(new Uint16Array(e),t,i),this.isFloat16BufferAttribute=!0}getX(e){let t=Gp(this.array[e*this.itemSize]);return this.normalized&&(t=qr(t,this.array)),t}setX(e,t){return this.normalized&&(t=nn(t,this.array)),this.array[e*this.itemSize]=is(t),this}getY(e){let t=Gp(this.array[e*this.itemSize+1]);return this.normalized&&(t=qr(t,this.array)),t}setY(e,t){return this.normalized&&(t=nn(t,this.array)),this.array[e*this.itemSize+1]=is(t),this}getZ(e){let t=Gp(this.array[e*this.itemSize+2]);return this.normalized&&(t=qr(t,this.array)),t}setZ(e,t){return this.normalized&&(t=nn(t,this.array)),this.array[e*this.itemSize+2]=is(t),this}getW(e){let t=Gp(this.array[e*this.itemSize+3]);return this.normalized&&(t=qr(t,this.array)),t}setW(e,t){return this.normalized&&(t=nn(t,this.array)),this.array[e*this.itemSize+3]=is(t),this}setXY(e,t,i){return e*=this.itemSize,this.normalized&&(t=nn(t,this.array),i=nn(i,this.array)),this.array[e+0]=is(t),this.array[e+1]=is(i),this}setXYZ(e,t,i,r){return e*=this.itemSize,this.normalized&&(t=nn(t,this.array),i=nn(i,this.array),r=nn(r,this.array)),this.array[e+0]=is(t),this.array[e+1]=is(i),this.array[e+2]=is(r),this}setXYZW(e,t,i,r,s){return e*=this.itemSize,this.normalized&&(t=nn(t,this.array),i=nn(i,this.array),r=nn(r,this.array),s=nn(s,this.array)),this.array[e+0]=is(t),this.array[e+1]=is(i),this.array[e+2]=is(r),this.array[e+3]=is(s),this}}class Et extends qn{constructor(e,t,i){super(new Float32Array(e),t,i)}}let dq=0;const Ks=new Bt,nT=new In,Xh=new K,Ms=new Yr,Tp=new Yr,Qi=new K;class rn extends aa{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:dq++}),this.uuid=ks(),this.name="",this.type="BufferGeometry",this.index=null,this.indirect=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(gj(e)?DA:LA)(e,1):this.index=e,this}setIndirect(e){return this.indirect=e,this}getIndirect(){return this.indirect}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,t,i=0){this.groups.push({start:e,count:t,materialIndex:i})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;t!==void 0&&(t.applyMatrix4(e),t.needsUpdate=!0);const i=this.attributes.normal;if(i!==void 0){const s=new en().getNormalMatrix(e);i.applyNormalMatrix(s),i.needsUpdate=!0}const r=this.attributes.tangent;return r!==void 0&&(r.transformDirection(e),r.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return Ks.makeRotationFromQuaternion(e),this.applyMatrix4(Ks),this}rotateX(e){return Ks.makeRotationX(e),this.applyMatrix4(Ks),this}rotateY(e){return Ks.makeRotationY(e),this.applyMatrix4(Ks),this}rotateZ(e){return Ks.makeRotationZ(e),this.applyMatrix4(Ks),this}translate(e,t,i){return Ks.makeTranslation(e,t,i),this.applyMatrix4(Ks),this}scale(e,t,i){return Ks.makeScale(e,t,i),this.applyMatrix4(Ks),this}lookAt(e){return nT.lookAt(e),nT.updateMatrix(),this.applyMatrix4(nT.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(Xh).negate(),this.translate(Xh.x,Xh.y,Xh.z),this}setFromPoints(e){const t=this.getAttribute("position");if(t===void 0){const i=[];for(let r=0,s=e.length;r<s;r++){const o=e[r];i.push(o.x,o.y,o.z||0)}this.setAttribute("position",new Et(i,3))}else{for(let i=0,r=t.count;i<r;i++){const s=e[i];t.setXYZ(i,s.x,s.y,s.z||0)}e.length>t.count&&console.warn("THREE.BufferGeometry: Buffer size too small for points data. Use .dispose() and create a new geometry."),t.needsUpdate=!0}return this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Yr);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box.",this),this.boundingBox.set(new K(-1/0,-1/0,-1/0),new K(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),t)for(let i=0,r=t.length;i<r;i++){const s=t[i];Ms.setFromBufferAttribute(s),this.morphTargetsRelative?(Qi.addVectors(this.boundingBox.min,Ms.min),this.boundingBox.expandByPoint(Qi),Qi.addVectors(this.boundingBox.max,Ms.max),this.boundingBox.expandByPoint(Qi)):(this.boundingBox.expandByPoint(Ms.min),this.boundingBox.expandByPoint(Ms.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new Lr);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere.",this),this.boundingSphere.set(new K,1/0);return}if(e){const i=this.boundingSphere.center;if(Ms.setFromBufferAttribute(e),t)for(let s=0,o=t.length;s<o;s++){const a=t[s];Tp.setFromBufferAttribute(a),this.morphTargetsRelative?(Qi.addVectors(Ms.min,Tp.min),Ms.expandByPoint(Qi),Qi.addVectors(Ms.max,Tp.max),Ms.expandByPoint(Qi)):(Ms.expandByPoint(Tp.min),Ms.expandByPoint(Tp.max))}Ms.getCenter(i);let r=0;for(let s=0,o=e.count;s<o;s++)Qi.fromBufferAttribute(e,s),r=Math.max(r,i.distanceToSquared(Qi));if(t)for(let s=0,o=t.length;s<o;s++){const a=t[s],l=this.morphTargetsRelative;for(let c=0,u=a.count;c<u;c++)Qi.fromBufferAttribute(a,c),l&&(Xh.fromBufferAttribute(e,c),Qi.add(Xh)),r=Math.max(r,i.distanceToSquared(Qi))}this.boundingSphere.radius=Math.sqrt(r),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,t=this.attributes;if(e===null||t.position===void 0||t.normal===void 0||t.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const i=t.position,r=t.normal,s=t.uv;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new qn(new Float32Array(4*i.count),4));const o=this.getAttribute("tangent"),a=[],l=[];for(let I=0;I<i.count;I++)a[I]=new K,l[I]=new K;const c=new K,u=new K,f=new K,m=new De,g=new De,x=new De,b=new K,w=new K;function v(I,A,M){c.fromBufferAttribute(i,I),u.fromBufferAttribute(i,A),f.fromBufferAttribute(i,M),m.fromBufferAttribute(s,I),g.fromBufferAttribute(s,A),x.fromBufferAttribute(s,M),u.sub(c),f.sub(c),g.sub(m),x.sub(m);const D=1/(g.x*x.y-x.x*g.y);isFinite(D)&&(b.copy(u).multiplyScalar(x.y).addScaledVector(f,-g.y).multiplyScalar(D),w.copy(f).multiplyScalar(g.x).addScaledVector(u,-x.x).multiplyScalar(D),a[I].add(b),a[A].add(b),a[M].add(b),l[I].add(w),l[A].add(w),l[M].add(w))}let S=this.groups;S.length===0&&(S=[{start:0,count:e.count}]);for(let I=0,A=S.length;I<A;++I){const M=S[I],D=M.start,z=M.count;for(let j=D,te=D+z;j<te;j+=3)v(e.getX(j+0),e.getX(j+1),e.getX(j+2))}const E=new K,C=new K,V=new K,L=new K;function N(I){V.fromBufferAttribute(r,I),L.copy(V);const A=a[I];E.copy(A),E.sub(V.multiplyScalar(V.dot(A))).normalize(),C.crossVectors(L,A);const D=C.dot(l[I])<0?-1:1;o.setXYZW(I,E.x,E.y,E.z,D)}for(let I=0,A=S.length;I<A;++I){const M=S[I],D=M.start,z=M.count;for(let j=D,te=D+z;j<te;j+=3)N(e.getX(j+0)),N(e.getX(j+1)),N(e.getX(j+2))}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(t!==void 0){let i=this.getAttribute("normal");if(i===void 0)i=new qn(new Float32Array(t.count*3),3),this.setAttribute("normal",i);else for(let m=0,g=i.count;m<g;m++)i.setXYZ(m,0,0,0);const r=new K,s=new K,o=new K,a=new K,l=new K,c=new K,u=new K,f=new K;if(e)for(let m=0,g=e.count;m<g;m+=3){const x=e.getX(m+0),b=e.getX(m+1),w=e.getX(m+2);r.fromBufferAttribute(t,x),s.fromBufferAttribute(t,b),o.fromBufferAttribute(t,w),u.subVectors(o,s),f.subVectors(r,s),u.cross(f),a.fromBufferAttribute(i,x),l.fromBufferAttribute(i,b),c.fromBufferAttribute(i,w),a.add(u),l.add(u),c.add(u),i.setXYZ(x,a.x,a.y,a.z),i.setXYZ(b,l.x,l.y,l.z),i.setXYZ(w,c.x,c.y,c.z)}else for(let m=0,g=t.count;m<g;m+=3)r.fromBufferAttribute(t,m+0),s.fromBufferAttribute(t,m+1),o.fromBufferAttribute(t,m+2),u.subVectors(o,s),f.subVectors(r,s),u.cross(f),i.setXYZ(m+0,u.x,u.y,u.z),i.setXYZ(m+1,u.x,u.y,u.z),i.setXYZ(m+2,u.x,u.y,u.z);this.normalizeNormals(),i.needsUpdate=!0}}normalizeNormals(){const e=this.attributes.normal;for(let t=0,i=e.count;t<i;t++)Qi.fromBufferAttribute(e,t),Qi.normalize(),e.setXYZ(t,Qi.x,Qi.y,Qi.z)}toNonIndexed(){function e(a,l){const c=a.array,u=a.itemSize,f=a.normalized,m=new c.constructor(l.length*u);let g=0,x=0;for(let b=0,w=l.length;b<w;b++){a.isInterleavedBufferAttribute?g=l[b]*a.data.stride+a.offset:g=l[b]*u;for(let v=0;v<u;v++)m[x++]=c[g++]}return new qn(m,u,f)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new rn,i=this.index.array,r=this.attributes;for(const a in r){const l=r[a],c=e(l,i);t.setAttribute(a,c)}const s=this.morphAttributes;for(const a in s){const l=[],c=s[a];for(let u=0,f=c.length;u<f;u++){const m=c[u],g=e(m,i);l.push(g)}t.morphAttributes[a]=l}t.morphTargetsRelative=this.morphTargetsRelative;const o=this.groups;for(let a=0,l=o.length;a<l;a++){const c=o[a];t.addGroup(c.start,c.count,c.materialIndex)}return t}toJSON(){const e={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const l=this.parameters;for(const c in l)l[c]!==void 0&&(e[c]=l[c]);return e}e.data={attributes:{}};const t=this.index;t!==null&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const i=this.attributes;for(const l in i){const c=i[l];e.data.attributes[l]=c.toJSON(e.data)}const r={};let s=!1;for(const l in this.morphAttributes){const c=this.morphAttributes[l],u=[];for(let f=0,m=c.length;f<m;f++){const g=c[f];u.push(g.toJSON(e.data))}u.length>0&&(r[l]=u,s=!0)}s&&(e.data.morphAttributes=r,e.data.morphTargetsRelative=this.morphTargetsRelative);const o=this.groups;o.length>0&&(e.data.groups=JSON.parse(JSON.stringify(o)));const a=this.boundingSphere;return a!==null&&(e.data.boundingSphere={center:a.center.toArray(),radius:a.radius}),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const i=e.index;i!==null&&this.setIndex(i.clone(t));const r=e.attributes;for(const c in r){const u=r[c];this.setAttribute(c,u.clone(t))}const s=e.morphAttributes;for(const c in s){const u=[],f=s[c];for(let m=0,g=f.length;m<g;m++)u.push(f[m].clone(t));this.morphAttributes[c]=u}this.morphTargetsRelative=e.morphTargetsRelative;const o=e.groups;for(let c=0,u=o.length;c<u;c++){const f=o[c];this.addGroup(f.start,f.count,f.materialIndex)}const a=e.boundingBox;a!==null&&(this.boundingBox=a.clone());const l=e.boundingSphere;return l!==null&&(this.boundingSphere=l.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const _2=new Bt,Qc=new Af,Sv=new Lr,w2=new K,Tv=new K,Ev=new K,Cv=new K,iT=new K,Av=new K,b2=new K,Mv=new K;class ji extends In{constructor(e=new rn,t=new Cc){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}updateMorphTargets(){const t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){const r=t[i[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=r.length;s<o;s++){const a=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}getVertexPosition(e,t){const i=this.geometry,r=i.attributes.position,s=i.morphAttributes.position,o=i.morphTargetsRelative;t.fromBufferAttribute(r,e);const a=this.morphTargetInfluences;if(s&&a){Av.set(0,0,0);for(let l=0,c=s.length;l<c;l++){const u=a[l],f=s[l];u!==0&&(iT.fromBufferAttribute(f,e),o?Av.addScaledVector(iT,u):Av.addScaledVector(iT.sub(t),u))}t.add(Av)}return t}raycast(e,t){const i=this.geometry,r=this.material,s=this.matrixWorld;r!==void 0&&(i.boundingSphere===null&&i.computeBoundingSphere(),Sv.copy(i.boundingSphere),Sv.applyMatrix4(s),Qc.copy(e.ray).recast(e.near),!(Sv.containsPoint(Qc.origin)===!1&&(Qc.intersectSphere(Sv,w2)===null||Qc.origin.distanceToSquared(w2)>(e.far-e.near)**2))&&(_2.copy(s).invert(),Qc.copy(e.ray).applyMatrix4(_2),!(i.boundingBox!==null&&Qc.intersectsBox(i.boundingBox)===!1)&&this._computeIntersections(e,t,Qc)))}_computeIntersections(e,t,i){let r;const s=this.geometry,o=this.material,a=s.index,l=s.attributes.position,c=s.attributes.uv,u=s.attributes.uv1,f=s.attributes.normal,m=s.groups,g=s.drawRange;if(a!==null)if(Array.isArray(o))for(let x=0,b=m.length;x<b;x++){const w=m[x],v=o[w.materialIndex],S=Math.max(w.start,g.start),E=Math.min(a.count,Math.min(w.start+w.count,g.start+g.count));for(let C=S,V=E;C<V;C+=3){const L=a.getX(C),N=a.getX(C+1),I=a.getX(C+2);r=Iv(this,v,e,i,c,u,f,L,N,I),r&&(r.faceIndex=Math.floor(C/3),r.face.materialIndex=w.materialIndex,t.push(r))}}else{const x=Math.max(0,g.start),b=Math.min(a.count,g.start+g.count);for(let w=x,v=b;w<v;w+=3){const S=a.getX(w),E=a.getX(w+1),C=a.getX(w+2);r=Iv(this,o,e,i,c,u,f,S,E,C),r&&(r.faceIndex=Math.floor(w/3),t.push(r))}}else if(l!==void 0)if(Array.isArray(o))for(let x=0,b=m.length;x<b;x++){const w=m[x],v=o[w.materialIndex],S=Math.max(w.start,g.start),E=Math.min(l.count,Math.min(w.start+w.count,g.start+g.count));for(let C=S,V=E;C<V;C+=3){const L=C,N=C+1,I=C+2;r=Iv(this,v,e,i,c,u,f,L,N,I),r&&(r.faceIndex=Math.floor(C/3),r.face.materialIndex=w.materialIndex,t.push(r))}}else{const x=Math.max(0,g.start),b=Math.min(l.count,g.start+g.count);for(let w=x,v=b;w<v;w+=3){const S=w,E=w+1,C=w+2;r=Iv(this,o,e,i,c,u,f,S,E,C),r&&(r.faceIndex=Math.floor(w/3),t.push(r))}}}}function fq(n,e,t,i,r,s,o,a){let l;if(e.side===Xr?l=i.intersectTriangle(o,s,r,!0,a):l=i.intersectTriangle(r,s,o,e.side===Xa,a),l===null)return null;Mv.copy(a),Mv.applyMatrix4(n.matrixWorld);const c=t.ray.origin.distanceTo(Mv);return c<t.near||c>t.far?null:{distance:c,point:Mv.clone(),object:n}}function Iv(n,e,t,i,r,s,o,a,l,c){n.getVertexPosition(a,Tv),n.getVertexPosition(l,Ev),n.getVertexPosition(c,Cv);const u=fq(n,e,t,i,Tv,Ev,Cv,b2);if(u){const f=new K;cs.getBarycoord(b2,Tv,Ev,Cv,f),r&&(u.uv=cs.getInterpolatedAttribute(r,a,l,c,f,new De)),s&&(u.uv1=cs.getInterpolatedAttribute(s,a,l,c,f,new De)),o&&(u.normal=cs.getInterpolatedAttribute(o,a,l,c,f,new K),u.normal.dot(i.direction)>0&&u.normal.multiplyScalar(-1));const m={a,b:l,c,normal:new K,materialIndex:0};cs.getNormal(Tv,Ev,Cv,m.normal),u.face=m,u.barycoord=f}return u}class lh extends rn{constructor(e=1,t=1,i=1,r=1,s=1,o=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:i,widthSegments:r,heightSegments:s,depthSegments:o};const a=this;r=Math.floor(r),s=Math.floor(s),o=Math.floor(o);const l=[],c=[],u=[],f=[];let m=0,g=0;x("z","y","x",-1,-1,i,t,e,o,s,0),x("z","y","x",1,-1,i,t,-e,o,s,1),x("x","z","y",1,1,e,i,t,r,o,2),x("x","z","y",1,-1,e,i,-t,r,o,3),x("x","y","z",1,-1,e,t,i,r,s,4),x("x","y","z",-1,-1,e,t,-i,r,s,5),this.setIndex(l),this.setAttribute("position",new Et(c,3)),this.setAttribute("normal",new Et(u,3)),this.setAttribute("uv",new Et(f,2));function x(b,w,v,S,E,C,V,L,N,I,A){const M=C/N,D=V/I,z=C/2,j=V/2,te=L/2,he=N+1,de=I+1;let U=0,F=0;const X=new K;for(let Y=0;Y<de;Y++){const ne=Y*D-j;for(let fe=0;fe<he;fe++){const Ce=fe*M-z;X[b]=Ce*S,X[w]=ne*E,X[v]=te,c.push(X.x,X.y,X.z),X[b]=0,X[w]=0,X[v]=L>0?1:-1,u.push(X.x,X.y,X.z),f.push(fe/N),f.push(1-Y/I),U+=1}}for(let Y=0;Y<I;Y++)for(let ne=0;ne<N;ne++){const fe=m+ne+he*Y,Ce=m+ne+he*(Y+1),ce=m+(ne+1)+he*(Y+1),Ee=m+(ne+1)+he*Y;l.push(fe,Ce,Ee),l.push(Ce,ce,Ee),F+=6}a.addGroup(g,F,A),g+=F,m+=U}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new lh(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function af(n){const e={};for(const t in n){e[t]={};for(const i in n[t]){const r=n[t][i];r&&(r.isColor||r.isMatrix3||r.isMatrix4||r.isVector2||r.isVector3||r.isVector4||r.isTexture||r.isQuaternion)?r.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),e[t][i]=null):e[t][i]=r.clone():Array.isArray(r)?e[t][i]=r.slice():e[t][i]=r}}return e}function Gr(n){const e={};for(let t=0;t<n.length;t++){const i=af(n[t]);for(const r in i)e[r]=i[r]}return e}function pq(n){const e=[];for(let t=0;t<n.length;t++)e.push(n[t].clone());return e}function wj(n){const e=n.getRenderTarget();return e===null?n.outputColorSpace:e.isXRRenderTarget===!0?e.texture.colorSpace:_n.workingColorSpace}const bj={clone:af,merge:Gr};var mq=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,gq=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class Po extends fr{static get type(){return"ShaderMaterial"}constructor(e){super(),this.isShaderMaterial=!0,this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=mq,this.fragmentShader=gq,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={clipCullDistance:!1,multiDraw:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=af(e.uniforms),this.uniformsGroups=pq(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const r in this.uniforms){const o=this.uniforms[r].value;o&&o.isTexture?t.uniforms[r]={type:"t",value:o.toJSON(e).uuid}:o&&o.isColor?t.uniforms[r]={type:"c",value:o.getHex()}:o&&o.isVector2?t.uniforms[r]={type:"v2",value:o.toArray()}:o&&o.isVector3?t.uniforms[r]={type:"v3",value:o.toArray()}:o&&o.isVector4?t.uniforms[r]={type:"v4",value:o.toArray()}:o&&o.isMatrix3?t.uniforms[r]={type:"m3",value:o.toArray()}:o&&o.isMatrix4?t.uniforms[r]={type:"m4",value:o.toArray()}:t.uniforms[r]={value:o}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader,t.lights=this.lights,t.clipping=this.clipping;const i={};for(const r in this.extensions)this.extensions[r]===!0&&(i[r]=!0);return Object.keys(i).length>0&&(t.extensions=i),t}}class Vg extends In{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new Bt,this.projectionMatrix=new Bt,this.projectionMatrixInverse=new Bt,this.coordinateSystem=qo}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}getWorldDirection(e){return super.getWorldDirection(e).negate()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}const wl=new K,S2=new De,T2=new De;class Oi extends Vg{constructor(e=50,t=1,i=.1,r=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=i,this.far=r,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=of*2*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(Ou*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return of*2*Math.atan(Math.tan(Ou*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}getViewBounds(e,t,i){wl.set(-1,-1,.5).applyMatrix4(this.projectionMatrixInverse),t.set(wl.x,wl.y).multiplyScalar(-e/wl.z),wl.set(1,1,.5).applyMatrix4(this.projectionMatrixInverse),i.set(wl.x,wl.y).multiplyScalar(-e/wl.z)}getViewSize(e,t){return this.getViewBounds(e,S2,T2),t.subVectors(T2,S2)}setViewOffset(e,t,i,r,s,o){this.aspect=e/t,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=r,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(Ou*.5*this.fov)/this.zoom,i=2*t,r=this.aspect*i,s=-.5*r;const o=this.view;if(this.view!==null&&this.view.enabled){const l=o.fullWidth,c=o.fullHeight;s+=o.offsetX*r/l,t-=o.offsetY*i/c,r*=o.width/l,i*=o.height/c}const a=this.filmOffset;a!==0&&(s+=e*a/this.getFilmWidth()),this.projectionMatrix.makePerspective(s,s+r,t,t-i,e,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,this.view!==null&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}const Yh=-90,Kh=1;class kA extends In{constructor(e,t,i){super(),this.type="CubeCamera",this.renderTarget=i,this.coordinateSystem=null,this.activeMipmapLevel=0;const r=new Oi(Yh,Kh,e,t);r.layers=this.layers,this.add(r);const s=new Oi(Yh,Kh,e,t);s.layers=this.layers,this.add(s);const o=new Oi(Yh,Kh,e,t);o.layers=this.layers,this.add(o);const a=new Oi(Yh,Kh,e,t);a.layers=this.layers,this.add(a);const l=new Oi(Yh,Kh,e,t);l.layers=this.layers,this.add(l);const c=new Oi(Yh,Kh,e,t);c.layers=this.layers,this.add(c)}updateCoordinateSystem(){const e=this.coordinateSystem,t=this.children.concat(),[i,r,s,o,a,l]=t;for(const c of t)this.remove(c);if(e===qo)i.up.set(0,1,0),i.lookAt(1,0,0),r.up.set(0,1,0),r.lookAt(-1,0,0),s.up.set(0,0,-1),s.lookAt(0,1,0),o.up.set(0,0,1),o.lookAt(0,-1,0),a.up.set(0,1,0),a.lookAt(0,0,1),l.up.set(0,1,0),l.lookAt(0,0,-1);else if(e===ig)i.up.set(0,-1,0),i.lookAt(-1,0,0),r.up.set(0,-1,0),r.lookAt(1,0,0),s.up.set(0,0,1),s.lookAt(0,1,0),o.up.set(0,0,-1),o.lookAt(0,-1,0),a.up.set(0,-1,0),a.lookAt(0,0,1),l.up.set(0,-1,0),l.lookAt(0,0,-1);else throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+e);for(const c of t)this.add(c),c.updateMatrixWorld()}update(e,t){this.parent===null&&this.updateMatrixWorld();const{renderTarget:i,activeMipmapLevel:r}=this;this.coordinateSystem!==e.coordinateSystem&&(this.coordinateSystem=e.coordinateSystem,this.updateCoordinateSystem());const[s,o,a,l,c,u]=this.children,f=e.getRenderTarget(),m=e.getActiveCubeFace(),g=e.getActiveMipmapLevel(),x=e.xr.enabled;e.xr.enabled=!1;const b=i.texture.generateMipmaps;i.texture.generateMipmaps=!1,e.setRenderTarget(i,0,r),e.render(t,s),e.setRenderTarget(i,1,r),e.render(t,o),e.setRenderTarget(i,2,r),e.render(t,a),e.setRenderTarget(i,3,r),e.render(t,l),e.setRenderTarget(i,4,r),e.render(t,c),i.texture.generateMipmaps=b,e.setRenderTarget(i,5,r),e.render(t,u),e.setRenderTarget(f,m,g),e.xr.enabled=x,i.texture.needsPMREMUpdate=!0}}class Bg extends hi{constructor(e,t,i,r,s,o,a,l,c,u){e=e!==void 0?e:[],t=t!==void 0?t:Ya,super(e,t,i,r,s,o,a,l,c,u),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class OA extends Io{constructor(e=1,t={}){super(e,e,t),this.isWebGLCubeRenderTarget=!0;const i={width:e,height:e,depth:1},r=[i,i,i,i,i,i];this.texture=new Bg(r,t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=t.generateMipmaps!==void 0?t.generateMipmaps:!1,this.texture.minFilter=t.minFilter!==void 0?t.minFilter:Wi}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.colorSpace=t.colorSpace,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const i={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},r=new lh(5,5,5),s=new Po({name:"CubemapFromEquirect",uniforms:af(i.uniforms),vertexShader:i.vertexShader,fragmentShader:i.fragmentShader,side:Xr,blending:Oa});s.uniforms.tEquirect.value=t;const o=new ji(r,s),a=t.minFilter;return t.minFilter===Wo&&(t.minFilter=Wi),new kA(1,10,this).update(e,o),t.minFilter=a,o.geometry.dispose(),o.material.dispose(),this}clear(e,t,i,r){const s=e.getRenderTarget();for(let o=0;o<6;o++)e.setRenderTarget(this,o),e.clear(t,i,r);e.setRenderTarget(s)}}const rT=new K,yq=new K,vq=new en;class Rl{constructor(e=new K(1,0,0),t=0){this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,i,r){return this.normal.set(e,t,i),this.constant=r,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,i){const r=rT.subVectors(i,t).cross(yq.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(r,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,t){const i=e.delta(rT),r=this.normal.dot(i);if(r===0)return this.distanceToPoint(e.start)===0?t.copy(e.start):null;const s=-(e.start.dot(this.normal)+this.constant)/r;return s<0||s>1?null:t.copy(e.start).addScaledVector(i,s)}intersectsLine(e){const t=this.distanceToPoint(e.start),i=this.distanceToPoint(e.end);return t<0&&i>0||i<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const i=t||vq.getNormalMatrix(e),r=this.coplanarPoint(rT).applyMatrix4(e),s=this.normal.applyMatrix3(i).normalize();return this.constant=-r.dot(s),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}}const Zc=new Lr,Pv=new K;class zg{constructor(e=new Rl,t=new Rl,i=new Rl,r=new Rl,s=new Rl,o=new Rl){this.planes=[e,t,i,r,s,o]}set(e,t,i,r,s,o){const a=this.planes;return a[0].copy(e),a[1].copy(t),a[2].copy(i),a[3].copy(r),a[4].copy(s),a[5].copy(o),this}copy(e){const t=this.planes;for(let i=0;i<6;i++)t[i].copy(e.planes[i]);return this}setFromProjectionMatrix(e,t=qo){const i=this.planes,r=e.elements,s=r[0],o=r[1],a=r[2],l=r[3],c=r[4],u=r[5],f=r[6],m=r[7],g=r[8],x=r[9],b=r[10],w=r[11],v=r[12],S=r[13],E=r[14],C=r[15];if(i[0].setComponents(l-s,m-c,w-g,C-v).normalize(),i[1].setComponents(l+s,m+c,w+g,C+v).normalize(),i[2].setComponents(l+o,m+u,w+x,C+S).normalize(),i[3].setComponents(l-o,m-u,w-x,C-S).normalize(),i[4].setComponents(l-a,m-f,w-b,C-E).normalize(),t===qo)i[5].setComponents(l+a,m+f,w+b,C+E).normalize();else if(t===ig)i[5].setComponents(a,f,b,E).normalize();else throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+t);return this}intersectsObject(e){if(e.boundingSphere!==void 0)e.boundingSphere===null&&e.computeBoundingSphere(),Zc.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{const t=e.geometry;t.boundingSphere===null&&t.computeBoundingSphere(),Zc.copy(t.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(Zc)}intersectsSprite(e){return Zc.center.set(0,0,0),Zc.radius=.7071067811865476,Zc.applyMatrix4(e.matrixWorld),this.intersectsSphere(Zc)}intersectsSphere(e){const t=this.planes,i=e.center,r=-e.radius;for(let s=0;s<6;s++)if(t[s].distanceToPoint(i)<r)return!1;return!0}intersectsBox(e){const t=this.planes;for(let i=0;i<6;i++){const r=t[i];if(Pv.x=r.normal.x>0?e.max.x:e.min.x,Pv.y=r.normal.y>0?e.max.y:e.min.y,Pv.z=r.normal.z>0?e.max.z:e.min.z,r.distanceToPoint(Pv)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let i=0;i<6;i++)if(t[i].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}function Sj(){let n=null,e=!1,t=null,i=null;function r(s,o){t(s,o),i=n.requestAnimationFrame(r)}return{start:function(){e!==!0&&t!==null&&(i=n.requestAnimationFrame(r),e=!0)},stop:function(){n.cancelAnimationFrame(i),e=!1},setAnimationLoop:function(s){t=s},setContext:function(s){n=s}}}function xq(n){const e=new WeakMap;function t(a,l){const c=a.array,u=a.usage,f=c.byteLength,m=n.createBuffer();n.bindBuffer(l,m),n.bufferData(l,c,u),a.onUploadCallback();let g;if(c instanceof Float32Array)g=n.FLOAT;else if(c instanceof Uint16Array)a.isFloat16BufferAttribute?g=n.HALF_FLOAT:g=n.UNSIGNED_SHORT;else if(c instanceof Int16Array)g=n.SHORT;else if(c instanceof Uint32Array)g=n.UNSIGNED_INT;else if(c instanceof Int32Array)g=n.INT;else if(c instanceof Int8Array)g=n.BYTE;else if(c instanceof Uint8Array)g=n.UNSIGNED_BYTE;else if(c instanceof Uint8ClampedArray)g=n.UNSIGNED_BYTE;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+c);return{buffer:m,type:g,bytesPerElement:c.BYTES_PER_ELEMENT,version:a.version,size:f}}function i(a,l,c){const u=l.array,f=l.updateRanges;if(n.bindBuffer(c,a),f.length===0)n.bufferSubData(c,0,u);else{f.sort((g,x)=>g.start-x.start);let m=0;for(let g=1;g<f.length;g++){const x=f[m],b=f[g];b.start<=x.start+x.count+1?x.count=Math.max(x.count,b.start+b.count-x.start):(++m,f[m]=b)}f.length=m+1;for(let g=0,x=f.length;g<x;g++){const b=f[g];n.bufferSubData(c,b.start*u.BYTES_PER_ELEMENT,u,b.start,b.count)}l.clearUpdateRanges()}l.onUploadCallback()}function r(a){return a.isInterleavedBufferAttribute&&(a=a.data),e.get(a)}function s(a){a.isInterleavedBufferAttribute&&(a=a.data);const l=e.get(a);l&&(n.deleteBuffer(l.buffer),e.delete(a))}function o(a,l){if(a.isInterleavedBufferAttribute&&(a=a.data),a.isGLBufferAttribute){const u=e.get(a);(!u||u.version<a.version)&&e.set(a,{buffer:a.buffer,type:a.type,bytesPerElement:a.elementSize,version:a.version});return}const c=e.get(a);if(c===void 0)e.set(a,t(a,l));else if(c.version<a.version){if(c.size!==a.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");i(c.buffer,a,l),c.version=a.version}}return{get:r,remove:s,update:o}}class Mf extends rn{constructor(e=1,t=1,i=1,r=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:i,heightSegments:r};const s=e/2,o=t/2,a=Math.floor(i),l=Math.floor(r),c=a+1,u=l+1,f=e/a,m=t/l,g=[],x=[],b=[],w=[];for(let v=0;v<u;v++){const S=v*m-o;for(let E=0;E<c;E++){const C=E*f-s;x.push(C,-S,0),b.push(0,0,1),w.push(E/a),w.push(1-v/l)}}for(let v=0;v<l;v++)for(let S=0;S<a;S++){const E=S+c*v,C=S+c*(v+1),V=S+1+c*(v+1),L=S+1+c*v;g.push(E,C,L),g.push(C,V,L)}this.setIndex(g),this.setAttribute("position",new Et(x,3)),this.setAttribute("normal",new Et(b,3)),this.setAttribute("uv",new Et(w,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Mf(e.width,e.height,e.widthSegments,e.heightSegments)}}var _q=`#ifdef USE_ALPHAHASH
	if ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;
#endif`,wq=`#ifdef USE_ALPHAHASH
	const float ALPHA_HASH_SCALE = 0.05;
	float hash2D( vec2 value ) {
		return fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );
	}
	float hash3D( vec3 value ) {
		return hash2D( vec2( hash2D( value.xy ), value.z ) );
	}
	float getAlphaHashThreshold( vec3 position ) {
		float maxDeriv = max(
			length( dFdx( position.xyz ) ),
			length( dFdy( position.xyz ) )
		);
		float pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );
		vec2 pixScales = vec2(
			exp2( floor( log2( pixScale ) ) ),
			exp2( ceil( log2( pixScale ) ) )
		);
		vec2 alpha = vec2(
			hash3D( floor( pixScales.x * position.xyz ) ),
			hash3D( floor( pixScales.y * position.xyz ) )
		);
		float lerpFactor = fract( log2( pixScale ) );
		float x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;
		float a = min( lerpFactor, 1.0 - lerpFactor );
		vec3 cases = vec3(
			x * x / ( 2.0 * a * ( 1.0 - a ) ),
			( x - 0.5 * a ) / ( 1.0 - a ),
			1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )
		);
		float threshold = ( x < ( 1.0 - a ) )
			? ( ( x < a ) ? cases.x : cases.y )
			: cases.z;
		return clamp( threshold , 1.0e-6, 1.0 );
	}
#endif`,bq=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`,Sq=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,Tq=`#ifdef USE_ALPHATEST
	#ifdef ALPHA_TO_COVERAGE
	diffuseColor.a = smoothstep( alphaTest, alphaTest + fwidth( diffuseColor.a ), diffuseColor.a );
	if ( diffuseColor.a == 0.0 ) discard;
	#else
	if ( diffuseColor.a < alphaTest ) discard;
	#endif
#endif`,Eq=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,Cq=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_CLEARCOAT ) 
		clearcoatSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_SHEEN ) 
		sheenSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometryNormal, geometryViewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,Aq=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,Mq=`#ifdef USE_BATCHING
	#if ! defined( GL_ANGLE_multi_draw )
	#define gl_DrawID _gl_DrawID
	uniform int _gl_DrawID;
	#endif
	uniform highp sampler2D batchingTexture;
	uniform highp usampler2D batchingIdTexture;
	mat4 getBatchingMatrix( const in float i ) {
		int size = textureSize( batchingTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
	float getIndirectIndex( const in int i ) {
		int size = textureSize( batchingIdTexture, 0 ).x;
		int x = i % size;
		int y = i / size;
		return float( texelFetch( batchingIdTexture, ivec2( x, y ), 0 ).r );
	}
#endif
#ifdef USE_BATCHING_COLOR
	uniform sampler2D batchingColorTexture;
	vec3 getBatchingColor( const in float i ) {
		int size = textureSize( batchingColorTexture, 0 ).x;
		int j = int( i );
		int x = j % size;
		int y = j / size;
		return texelFetch( batchingColorTexture, ivec2( x, y ), 0 ).rgb;
	}
#endif`,Iq=`#ifdef USE_BATCHING
	mat4 batchingMatrix = getBatchingMatrix( getIndirectIndex( gl_DrawID ) );
#endif`,Pq=`vec3 transformed = vec3( position );
#ifdef USE_ALPHAHASH
	vPosition = vec3( position );
#endif`,Rq=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,Nq=`float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
} // validated`,Lq=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,Dq=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vBumpMapUv );
		vec2 dSTdy = dFdy( vBumpMapUv );
		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );
		vec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,kq=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#ifdef ALPHA_TO_COVERAGE
		float distanceToPlane, distanceGradient;
		float clipOpacity = 1.0;
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
			distanceGradient = fwidth( distanceToPlane ) / 2.0;
			clipOpacity *= smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			if ( clipOpacity == 0.0 ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			float unionClipOpacity = 1.0;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
				distanceGradient = fwidth( distanceToPlane ) / 2.0;
				unionClipOpacity *= 1.0 - smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			}
			#pragma unroll_loop_end
			clipOpacity *= 1.0 - unionClipOpacity;
		#endif
		diffuseColor.a *= clipOpacity;
		if ( diffuseColor.a == 0.0 ) discard;
	#else
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			bool clipped = true;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
			}
			#pragma unroll_loop_end
			if ( clipped ) discard;
		#endif
	#endif
#endif`,Oq=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,Uq=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,Fq=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,jq=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,Vq=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,Bq=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	varying vec3 vColor;
#endif`,zq=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif
#ifdef USE_BATCHING_COLOR
	vec3 batchingColor = getBatchingColor( getIndirectIndex( gl_DrawID ) );
	vColor.xyz *= batchingColor.xyz;
#endif`,Hq=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
#ifdef USE_ALPHAHASH
	varying vec3 vPosition;
#endif
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
} // validated`,Gq=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,Wq=`vec3 transformedNormal = objectNormal;
#ifdef USE_TANGENT
	vec3 transformedTangent = objectTangent;
#endif
#ifdef USE_BATCHING
	mat3 bm = mat3( batchingMatrix );
	transformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );
	transformedNormal = bm * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = bm * transformedTangent;
	#endif
#endif
#ifdef USE_INSTANCING
	mat3 im = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );
	transformedNormal = im * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = im * transformedTangent;
	#endif
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	transformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,qq=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,$q=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`,Xq=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
	#ifdef DECODE_VIDEO_TEXTURE_EMISSIVE
		emissiveColor = sRGBTransferEOTF( emissiveColor );
	#endif
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,Yq=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,Kq="gl_FragColor = linearToOutputTexel( gl_FragColor );",Jq=`vec4 LinearTransferOETF( in vec4 value ) {
	return value;
}
vec4 sRGBTransferEOTF( in vec4 value ) {
	return vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );
}
vec4 sRGBTransferOETF( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,Qq=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, envMapRotation * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,Zq=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	uniform mat3 envMapRotation;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,e$=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,t$=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,n$=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,i$=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,r$=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,s$=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,o$=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,a$=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,l$=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,c$=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,u$=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,h$=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
#if defined( USE_LIGHT_PROBES )
	uniform vec3 lightProbe[ 9 ];
#endif
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
	if ( cutoffDistance > 0.0 ) {
		distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
	}
	return distanceFalloff;
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,d$=`#ifdef USE_ENVMAP
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	#ifdef USE_ANISOTROPY
		vec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {
			#ifdef ENVMAP_TYPE_CUBE_UV
				vec3 bentNormal = cross( bitangent, viewDir );
				bentNormal = normalize( cross( bentNormal, bitangent ) );
				bentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );
				return getIBLRadiance( viewDir, bentNormal, roughness );
			#else
				return vec3( 0.0 );
			#endif
		}
	#endif
#endif`,f$=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,p$=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,m$=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,g$=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,y$=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef USE_SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULAR_COLORMAP
			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
		#endif
		#ifdef USE_SPECULAR_INTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_DISPERSION
	material.dispersion = dispersion;
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEEN_COLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEEN_ROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
	#endif
#endif
#ifdef USE_ANISOTROPY
	#ifdef USE_ANISOTROPYMAP
		mat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );
		vec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;
		vec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;
	#else
		vec2 anisotropyV = anisotropyVector;
	#endif
	material.anisotropy = length( anisotropyV );
	if( material.anisotropy == 0.0 ) {
		anisotropyV = vec2( 1.0, 0.0 );
	} else {
		anisotropyV /= material.anisotropy;
		material.anisotropy = saturate( material.anisotropy );
	}
	material.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );
	material.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;
	material.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;
#endif`,v$=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	float dispersion;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
	#ifdef USE_ANISOTROPY
		float anisotropy;
		float alphaT;
		vec3 anisotropyT;
		vec3 anisotropyB;
	#endif
};
vec3 clearcoatSpecularDirect = vec3( 0.0 );
vec3 clearcoatSpecularIndirect = vec3( 0.0 );
vec3 sheenSpecularDirect = vec3( 0.0 );
vec3 sheenSpecularIndirect = vec3(0.0 );
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
#ifdef USE_ANISOTROPY
	float V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {
		float gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );
		float gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );
		float v = 0.5 / ( gv + gl );
		return saturate(v);
	}
	float D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {
		float a2 = alphaT * alphaB;
		highp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );
		highp float v2 = dot( v, v );
		float w2 = a2 / v2;
		return RECIPROCAL_PI * a2 * pow2 ( w2 );
	}
#endif
#ifdef USE_CLEARCOAT
	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
		vec3 f0 = material.clearcoatF0;
		float f90 = material.clearcoatF90;
		float roughness = material.clearcoatRoughness;
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = F_Schlick( f0, f90, dotVH );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 f0 = material.specularColor;
	float f90 = material.specularF90;
	float roughness = material.roughness;
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	#ifdef USE_IRIDESCENCE
		F = mix( F, material.iridescenceFresnel, material.iridescence );
	#endif
	#ifdef USE_ANISOTROPY
		float dotTL = dot( material.anisotropyT, lightDir );
		float dotTV = dot( material.anisotropyT, viewDir );
		float dotTH = dot( material.anisotropyT, halfDir );
		float dotBL = dot( material.anisotropyB, lightDir );
		float dotBV = dot( material.anisotropyB, viewDir );
		float dotBH = dot( material.anisotropyB, halfDir );
		float V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );
		float D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );
	#else
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
	#endif
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometryNormal;
		vec3 viewDir = geometryViewDir;
		vec3 position = geometryPosition;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );
	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometryViewDir, geometryNormal, material );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,x$=`
vec3 geometryPosition = - vViewPosition;
vec3 geometryNormal = normal;
vec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
vec3 geometryClearcoatNormal = vec3( 0.0 );
#ifdef USE_CLEARCOAT
	geometryClearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometryViewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometryPosition, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowIntensity, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometryPosition, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowIntensity, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowIntensity, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	#if defined( USE_LIGHT_PROBES )
		irradiance += getLightProbeIrradiance( lightProbe, geometryNormal );
	#endif
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,_$=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometryNormal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	#ifdef USE_ANISOTROPY
		radiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );
	#else
		radiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );
	#endif
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,w$=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif`,b$=`#if defined( USE_LOGDEPTHBUF )
	gl_FragDepth = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,S$=`#if defined( USE_LOGDEPTHBUF )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,T$=`#ifdef USE_LOGDEPTHBUF
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,E$=`#ifdef USE_LOGDEPTHBUF
	vFragDepth = 1.0 + gl_Position.w;
	vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
#endif`,C$=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vMapUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = sRGBTransferEOTF( sampledDiffuseColor );
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,A$=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,M$=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	#if defined( USE_POINTS_UV )
		vec2 uv = vUv;
	#else
		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	#endif
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,I$=`#if defined( USE_POINTS_UV )
	varying vec2 vUv;
#else
	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
		uniform mat3 uvTransform;
	#endif
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,P$=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
	metalnessFactor *= texelMetalness.b;
#endif`,R$=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,N$=`#ifdef USE_INSTANCING_MORPH
	float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	float morphTargetBaseInfluence = texelFetch( morphTexture, ivec2( 0, gl_InstanceID ), 0 ).r;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		morphTargetInfluences[i] =  texelFetch( morphTexture, ivec2( i + 1, gl_InstanceID ), 0 ).r;
	}
#endif`,L$=`#if defined( USE_MORPHCOLORS )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,D$=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,k$=`#ifdef USE_MORPHTARGETS
	#ifndef USE_INSTANCING_MORPH
		uniform float morphTargetBaseInfluence;
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	#endif
	uniform sampler2DArray morphTargetsTexture;
	uniform ivec2 morphTargetsTextureSize;
	vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
		int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
		int y = texelIndex / morphTargetsTextureSize.x;
		int x = texelIndex - y * morphTargetsTextureSize.x;
		ivec3 morphUV = ivec3( x, y, morphTargetIndex );
		return texelFetch( morphTargetsTexture, morphUV, 0 );
	}
#endif`,O$=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,U$=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal *= faceDirection;
	#endif
#endif
#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )
	#ifdef USE_TANGENT
		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn = getTangentFrame( - vViewPosition, normal,
		#if defined( USE_NORMALMAP )
			vNormalMapUv
		#elif defined( USE_CLEARCOAT_NORMALMAP )
			vClearcoatNormalMapUv
		#else
			vUv
		#endif
		);
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn[0] *= faceDirection;
		tbn[1] *= faceDirection;
	#endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	#ifdef USE_TANGENT
		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn2[0] *= faceDirection;
		tbn2[1] *= faceDirection;
	#endif
#endif
vec3 nonPerturbedNormal = normal;`,F$=`#ifdef USE_NORMALMAP_OBJECTSPACE
	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( USE_NORMALMAP_TANGENTSPACE )
	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	normal = normalize( tbn * mapN );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,j$=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,V$=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,B$=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,z$=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )
	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( uv.st );
		vec2 st1 = dFdy( uv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
		return mat3( T * scale, B * scale, N );
	}
#endif`,H$=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = nonPerturbedNormal;
#endif`,G$=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	clearcoatNormal = normalize( tbn2 * clearcoatMapN );
#endif`,W$=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif`,q$=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,$$=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,X$=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;const float ShiftRight8 = 1. / 256.;
const float Inv255 = 1. / 255.;
const vec4 PackFactors = vec4( 1.0, 256.0, 256.0 * 256.0, 256.0 * 256.0 * 256.0 );
const vec2 UnpackFactors2 = vec2( UnpackDownscale, 1.0 / PackFactors.g );
const vec3 UnpackFactors3 = vec3( UnpackDownscale / PackFactors.rg, 1.0 / PackFactors.b );
const vec4 UnpackFactors4 = vec4( UnpackDownscale / PackFactors.rgb, 1.0 / PackFactors.a );
vec4 packDepthToRGBA( const in float v ) {
	if( v <= 0.0 )
		return vec4( 0., 0., 0., 0. );
	if( v >= 1.0 )
		return vec4( 1., 1., 1., 1. );
	float vuf;
	float af = modf( v * PackFactors.a, vuf );
	float bf = modf( vuf * ShiftRight8, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec4( vuf * Inv255, gf * PackUpscale, bf * PackUpscale, af );
}
vec3 packDepthToRGB( const in float v ) {
	if( v <= 0.0 )
		return vec3( 0., 0., 0. );
	if( v >= 1.0 )
		return vec3( 1., 1., 1. );
	float vuf;
	float bf = modf( v * PackFactors.b, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec3( vuf * Inv255, gf * PackUpscale, bf );
}
vec2 packDepthToRG( const in float v ) {
	if( v <= 0.0 )
		return vec2( 0., 0. );
	if( v >= 1.0 )
		return vec2( 1., 1. );
	float vuf;
	float gf = modf( v * 256., vuf );
	return vec2( vuf * Inv255, gf );
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors4 );
}
float unpackRGBToDepth( const in vec3 v ) {
	return dot( v, UnpackFactors3 );
}
float unpackRGToDepth( const in vec2 v ) {
	return v.r * UnpackFactors2.r + v.g * UnpackFactors2.g;
}
vec4 pack2HalfToRGBA( const in vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( const in vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return depth * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * depth - far );
}`,Y$=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,K$=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_BATCHING
	mvPosition = batchingMatrix * mvPosition;
#endif
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,J$=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,Q$=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,Z$=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
	roughnessFactor *= texelRoughness.g;
#endif`,eX=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,tX=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		float shadow = 1.0;
		vec3 lightToPosition = shadowCoord.xyz;
		
		float lightToPositionLength = length( lightToPosition );
		if ( lightToPositionLength - shadowCameraFar <= 0.0 && lightToPositionLength - shadowCameraNear >= 0.0 ) {
			float dp = ( lightToPositionLength - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );			dp += shadowBias;
			vec3 bd3D = normalize( lightToPosition );
			vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
			#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
				vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
				shadow = (
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
				) * ( 1.0 / 9.0 );
			#else
				shadow = texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
			#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
#endif`,nX=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,iX=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,rX=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowIntensity, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowIntensity, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowIntensity, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,sX=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,oX=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	mat4 getBoneMatrix( const in float i ) {
		int size = textureSize( boneTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif`,aX=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,lX=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,cX=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,uX=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,hX=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,dX=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return saturate( toneMappingExposure * color );
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 CineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
const mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(
	vec3( 1.6605, - 0.1246, - 0.0182 ),
	vec3( - 0.5876, 1.1329, - 0.1006 ),
	vec3( - 0.0728, - 0.0083, 1.1187 )
);
const mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(
	vec3( 0.6274, 0.0691, 0.0164 ),
	vec3( 0.3293, 0.9195, 0.0880 ),
	vec3( 0.0433, 0.0113, 0.8956 )
);
vec3 agxDefaultContrastApprox( vec3 x ) {
	vec3 x2 = x * x;
	vec3 x4 = x2 * x2;
	return + 15.5 * x4 * x2
		- 40.14 * x4 * x
		+ 31.96 * x4
		- 6.868 * x2 * x
		+ 0.4298 * x2
		+ 0.1191 * x
		- 0.00232;
}
vec3 AgXToneMapping( vec3 color ) {
	const mat3 AgXInsetMatrix = mat3(
		vec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),
		vec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),
		vec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )
	);
	const mat3 AgXOutsetMatrix = mat3(
		vec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),
		vec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),
		vec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )
	);
	const float AgxMinEv = - 12.47393;	const float AgxMaxEv = 4.026069;
	color *= toneMappingExposure;
	color = LINEAR_SRGB_TO_LINEAR_REC2020 * color;
	color = AgXInsetMatrix * color;
	color = max( color, 1e-10 );	color = log2( color );
	color = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );
	color = clamp( color, 0.0, 1.0 );
	color = agxDefaultContrastApprox( color );
	color = AgXOutsetMatrix * color;
	color = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );
	color = LINEAR_REC2020_TO_LINEAR_SRGB * color;
	color = clamp( color, 0.0, 1.0 );
	return color;
}
vec3 NeutralToneMapping( vec3 color ) {
	const float StartCompression = 0.8 - 0.04;
	const float Desaturation = 0.15;
	color *= toneMappingExposure;
	float x = min( color.r, min( color.g, color.b ) );
	float offset = x < 0.08 ? x - 6.25 * x * x : 0.04;
	color -= offset;
	float peak = max( color.r, max( color.g, color.b ) );
	if ( peak < StartCompression ) return color;
	float d = 1. - StartCompression;
	float newPeak = 1. - d * d / ( peak + d - StartCompression );
	color *= newPeak / peak;
	float g = 1. - 1. / ( Desaturation * ( peak - newPeak ) + 1. );
	return mix( color, vec3( newPeak ), g );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,fX=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmitted = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.dispersion, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );
#endif`,pX=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return vec3( 1.0 );
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float dispersion, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec4 transmittedLight;
		vec3 transmittance;
		#ifdef USE_DISPERSION
			float halfSpread = ( ior - 1.0 ) * 0.025 * dispersion;
			vec3 iors = vec3( ior - halfSpread, ior, ior + halfSpread );
			for ( int i = 0; i < 3; i ++ ) {
				vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, iors[ i ], modelMatrix );
				vec3 refractedRayExit = position + transmissionRay;
		
				vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
				vec2 refractionCoords = ndcPos.xy / ndcPos.w;
				refractionCoords += 1.0;
				refractionCoords /= 2.0;
		
				vec4 transmissionSample = getTransmissionSample( refractionCoords, roughness, iors[ i ] );
				transmittedLight[ i ] = transmissionSample[ i ];
				transmittedLight.a += transmissionSample.a;
				transmittance[ i ] = diffuseColor[ i ] * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance )[ i ];
			}
			transmittedLight.a /= 3.0;
		
		#else
		
			vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
			vec3 refractedRayExit = position + transmissionRay;
			vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
			vec2 refractionCoords = ndcPos.xy / ndcPos.w;
			refractionCoords += 1.0;
			refractionCoords /= 2.0;
			transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
			transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );
		
		#endif
		vec3 attenuatedColor = transmittance * transmittedLight.rgb;
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		float transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;
		return vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );
	}
#endif`,mX=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_SPECULARMAP
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,gX=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	uniform mat3 mapTransform;
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	uniform mat3 alphaMapTransform;
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	uniform mat3 lightMapTransform;
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	uniform mat3 aoMapTransform;
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	uniform mat3 bumpMapTransform;
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	uniform mat3 normalMapTransform;
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_DISPLACEMENTMAP
	uniform mat3 displacementMapTransform;
	varying vec2 vDisplacementMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	uniform mat3 emissiveMapTransform;
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	uniform mat3 metalnessMapTransform;
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	uniform mat3 roughnessMapTransform;
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	uniform mat3 anisotropyMapTransform;
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	uniform mat3 clearcoatMapTransform;
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform mat3 clearcoatNormalMapTransform;
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform mat3 clearcoatRoughnessMapTransform;
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	uniform mat3 sheenColorMapTransform;
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	uniform mat3 sheenRoughnessMapTransform;
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	uniform mat3 iridescenceMapTransform;
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform mat3 iridescenceThicknessMapTransform;
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SPECULARMAP
	uniform mat3 specularMapTransform;
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	uniform mat3 specularColorMapTransform;
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	uniform mat3 specularIntensityMapTransform;
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,yX=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	vUv = vec3( uv, 1 ).xy;
#endif
#ifdef USE_MAP
	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ANISOTROPYMAP
	vAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
#endif`,vX=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_BATCHING
		worldPosition = batchingMatrix * worldPosition;
	#endif
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const xX=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,_X=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,wX=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,bX=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
uniform mat3 backgroundRotation;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, backgroundRotation * vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, backgroundRotation * vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,SX=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,TX=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,EX=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,CX=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#elif DEPTH_PACKING == 3202
		gl_FragColor = vec4( packDepthToRGB( fragCoordZ ), 1.0 );
	#elif DEPTH_PACKING == 3203
		gl_FragColor = vec4( packDepthToRG( fragCoordZ ), 0.0, 1.0 );
	#endif
}`,AX=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,MX=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,IX=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,PX=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,RX=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,NX=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,LX=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,DX=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,kX=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,OX=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,UX=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,FX=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,jX=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	vViewPosition = - mvPosition.xyz;
#endif
}`,VX=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( 0.0, 0.0, 0.0, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), diffuseColor.a );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,BX=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,zX=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,HX=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,GX=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define USE_SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef USE_SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULAR_COLORMAP
		uniform sampler2D specularColorMap;
	#endif
	#ifdef USE_SPECULAR_INTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_DISPERSION
	uniform float dispersion;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEEN_COLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEEN_ROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
#ifdef USE_ANISOTROPY
	uniform vec2 anisotropyVector;
	#ifdef USE_ANISOTROPYMAP
		uniform sampler2D anisotropyMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;
	#endif
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,WX=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,qX=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,$X=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
#ifdef USE_POINTS_UV
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif
void main() {
	#ifdef USE_POINTS_UV
		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	#endif
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,XX=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,YX=`#include <common>
#include <batching_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,KX=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,JX=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix[ 3 ];
	vec2 scale = vec2( length( modelMatrix[ 0 ].xyz ), length( modelMatrix[ 1 ].xyz ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,QX=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,on={alphahash_fragment:_q,alphahash_pars_fragment:wq,alphamap_fragment:bq,alphamap_pars_fragment:Sq,alphatest_fragment:Tq,alphatest_pars_fragment:Eq,aomap_fragment:Cq,aomap_pars_fragment:Aq,batching_pars_vertex:Mq,batching_vertex:Iq,begin_vertex:Pq,beginnormal_vertex:Rq,bsdfs:Nq,iridescence_fragment:Lq,bumpmap_pars_fragment:Dq,clipping_planes_fragment:kq,clipping_planes_pars_fragment:Oq,clipping_planes_pars_vertex:Uq,clipping_planes_vertex:Fq,color_fragment:jq,color_pars_fragment:Vq,color_pars_vertex:Bq,color_vertex:zq,common:Hq,cube_uv_reflection_fragment:Gq,defaultnormal_vertex:Wq,displacementmap_pars_vertex:qq,displacementmap_vertex:$q,emissivemap_fragment:Xq,emissivemap_pars_fragment:Yq,colorspace_fragment:Kq,colorspace_pars_fragment:Jq,envmap_fragment:Qq,envmap_common_pars_fragment:Zq,envmap_pars_fragment:e$,envmap_pars_vertex:t$,envmap_physical_pars_fragment:d$,envmap_vertex:n$,fog_vertex:i$,fog_pars_vertex:r$,fog_fragment:s$,fog_pars_fragment:o$,gradientmap_pars_fragment:a$,lightmap_pars_fragment:l$,lights_lambert_fragment:c$,lights_lambert_pars_fragment:u$,lights_pars_begin:h$,lights_toon_fragment:f$,lights_toon_pars_fragment:p$,lights_phong_fragment:m$,lights_phong_pars_fragment:g$,lights_physical_fragment:y$,lights_physical_pars_fragment:v$,lights_fragment_begin:x$,lights_fragment_maps:_$,lights_fragment_end:w$,logdepthbuf_fragment:b$,logdepthbuf_pars_fragment:S$,logdepthbuf_pars_vertex:T$,logdepthbuf_vertex:E$,map_fragment:C$,map_pars_fragment:A$,map_particle_fragment:M$,map_particle_pars_fragment:I$,metalnessmap_fragment:P$,metalnessmap_pars_fragment:R$,morphinstance_vertex:N$,morphcolor_vertex:L$,morphnormal_vertex:D$,morphtarget_pars_vertex:k$,morphtarget_vertex:O$,normal_fragment_begin:U$,normal_fragment_maps:F$,normal_pars_fragment:j$,normal_pars_vertex:V$,normal_vertex:B$,normalmap_pars_fragment:z$,clearcoat_normal_fragment_begin:H$,clearcoat_normal_fragment_maps:G$,clearcoat_pars_fragment:W$,iridescence_pars_fragment:q$,opaque_fragment:$$,packing:X$,premultiplied_alpha_fragment:Y$,project_vertex:K$,dithering_fragment:J$,dithering_pars_fragment:Q$,roughnessmap_fragment:Z$,roughnessmap_pars_fragment:eX,shadowmap_pars_fragment:tX,shadowmap_pars_vertex:nX,shadowmap_vertex:iX,shadowmask_pars_fragment:rX,skinbase_vertex:sX,skinning_pars_vertex:oX,skinning_vertex:aX,skinnormal_vertex:lX,specularmap_fragment:cX,specularmap_pars_fragment:uX,tonemapping_fragment:hX,tonemapping_pars_fragment:dX,transmission_fragment:fX,transmission_pars_fragment:pX,uv_pars_fragment:mX,uv_pars_vertex:gX,uv_vertex:yX,worldpos_vertex:vX,background_vert:xX,background_frag:_X,backgroundCube_vert:wX,backgroundCube_frag:bX,cube_vert:SX,cube_frag:TX,depth_vert:EX,depth_frag:CX,distanceRGBA_vert:AX,distanceRGBA_frag:MX,equirect_vert:IX,equirect_frag:PX,linedashed_vert:RX,linedashed_frag:NX,meshbasic_vert:LX,meshbasic_frag:DX,meshlambert_vert:kX,meshlambert_frag:OX,meshmatcap_vert:UX,meshmatcap_frag:FX,meshnormal_vert:jX,meshnormal_frag:VX,meshphong_vert:BX,meshphong_frag:zX,meshphysical_vert:HX,meshphysical_frag:GX,meshtoon_vert:WX,meshtoon_frag:qX,points_vert:$X,points_frag:XX,shadow_vert:YX,shadow_frag:KX,sprite_vert:JX,sprite_frag:QX},it={common:{diffuse:{value:new pt(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new en},alphaMap:{value:null},alphaMapTransform:{value:new en},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new en}},envmap:{envMap:{value:null},envMapRotation:{value:new en},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new en}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new en}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new en},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new en},normalScale:{value:new De(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new en},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new en}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new en}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new en}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new pt(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new pt(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new en},alphaTest:{value:0},uvTransform:{value:new en}},sprite:{diffuse:{value:new pt(16777215)},opacity:{value:1},center:{value:new De(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new en},alphaMap:{value:null},alphaMapTransform:{value:new en},alphaTest:{value:0}}},bo={basic:{uniforms:Gr([it.common,it.specularmap,it.envmap,it.aomap,it.lightmap,it.fog]),vertexShader:on.meshbasic_vert,fragmentShader:on.meshbasic_frag},lambert:{uniforms:Gr([it.common,it.specularmap,it.envmap,it.aomap,it.lightmap,it.emissivemap,it.bumpmap,it.normalmap,it.displacementmap,it.fog,it.lights,{emissive:{value:new pt(0)}}]),vertexShader:on.meshlambert_vert,fragmentShader:on.meshlambert_frag},phong:{uniforms:Gr([it.common,it.specularmap,it.envmap,it.aomap,it.lightmap,it.emissivemap,it.bumpmap,it.normalmap,it.displacementmap,it.fog,it.lights,{emissive:{value:new pt(0)},specular:{value:new pt(1118481)},shininess:{value:30}}]),vertexShader:on.meshphong_vert,fragmentShader:on.meshphong_frag},standard:{uniforms:Gr([it.common,it.envmap,it.aomap,it.lightmap,it.emissivemap,it.bumpmap,it.normalmap,it.displacementmap,it.roughnessmap,it.metalnessmap,it.fog,it.lights,{emissive:{value:new pt(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:on.meshphysical_vert,fragmentShader:on.meshphysical_frag},toon:{uniforms:Gr([it.common,it.aomap,it.lightmap,it.emissivemap,it.bumpmap,it.normalmap,it.displacementmap,it.gradientmap,it.fog,it.lights,{emissive:{value:new pt(0)}}]),vertexShader:on.meshtoon_vert,fragmentShader:on.meshtoon_frag},matcap:{uniforms:Gr([it.common,it.bumpmap,it.normalmap,it.displacementmap,it.fog,{matcap:{value:null}}]),vertexShader:on.meshmatcap_vert,fragmentShader:on.meshmatcap_frag},points:{uniforms:Gr([it.points,it.fog]),vertexShader:on.points_vert,fragmentShader:on.points_frag},dashed:{uniforms:Gr([it.common,it.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:on.linedashed_vert,fragmentShader:on.linedashed_frag},depth:{uniforms:Gr([it.common,it.displacementmap]),vertexShader:on.depth_vert,fragmentShader:on.depth_frag},normal:{uniforms:Gr([it.common,it.bumpmap,it.normalmap,it.displacementmap,{opacity:{value:1}}]),vertexShader:on.meshnormal_vert,fragmentShader:on.meshnormal_frag},sprite:{uniforms:Gr([it.sprite,it.fog]),vertexShader:on.sprite_vert,fragmentShader:on.sprite_frag},background:{uniforms:{uvTransform:{value:new en},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:on.background_vert,fragmentShader:on.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1},backgroundRotation:{value:new en}},vertexShader:on.backgroundCube_vert,fragmentShader:on.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:on.cube_vert,fragmentShader:on.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:on.equirect_vert,fragmentShader:on.equirect_frag},distanceRGBA:{uniforms:Gr([it.common,it.displacementmap,{referencePosition:{value:new K},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:on.distanceRGBA_vert,fragmentShader:on.distanceRGBA_frag},shadow:{uniforms:Gr([it.lights,it.fog,{color:{value:new pt(0)},opacity:{value:1}}]),vertexShader:on.shadow_vert,fragmentShader:on.shadow_frag}};bo.physical={uniforms:Gr([bo.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new en},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new en},clearcoatNormalScale:{value:new De(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new en},dispersion:{value:0},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new en},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new en},sheen:{value:0},sheenColor:{value:new pt(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new en},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new en},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new en},transmissionSamplerSize:{value:new De},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new en},attenuationDistance:{value:0},attenuationColor:{value:new pt(0)},specularColor:{value:new pt(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new en},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new en},anisotropyVector:{value:new De},anisotropyMap:{value:null},anisotropyMapTransform:{value:new en}}]),vertexShader:on.meshphysical_vert,fragmentShader:on.meshphysical_frag};const Rv={r:0,b:0,g:0},eu=new Fs,ZX=new Bt;function eY(n,e,t,i,r,s,o){const a=new pt(0);let l=s===!0?0:1,c,u,f=null,m=0,g=null;function x(S){let E=S.isScene===!0?S.background:null;return E&&E.isTexture&&(E=(S.backgroundBlurriness>0?t:e).get(E)),E}function b(S){let E=!1;const C=x(S);C===null?v(a,l):C&&C.isColor&&(v(C,1),E=!0);const V=n.xr.getEnvironmentBlendMode();V==="additive"?i.buffers.color.setClear(0,0,0,1,o):V==="alpha-blend"&&i.buffers.color.setClear(0,0,0,0,o),(n.autoClear||E)&&(i.buffers.depth.setTest(!0),i.buffers.depth.setMask(!0),i.buffers.color.setMask(!0),n.clear(n.autoClearColor,n.autoClearDepth,n.autoClearStencil))}function w(S,E){const C=x(E);C&&(C.isCubeTexture||C.mapping===Ef)?(u===void 0&&(u=new ji(new lh(1,1,1),new Po({name:"BackgroundCubeMaterial",uniforms:af(bo.backgroundCube.uniforms),vertexShader:bo.backgroundCube.vertexShader,fragmentShader:bo.backgroundCube.fragmentShader,side:Xr,depthTest:!1,depthWrite:!1,fog:!1})),u.geometry.deleteAttribute("normal"),u.geometry.deleteAttribute("uv"),u.onBeforeRender=function(V,L,N){this.matrixWorld.copyPosition(N.matrixWorld)},Object.defineProperty(u.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),r.update(u)),eu.copy(E.backgroundRotation),eu.x*=-1,eu.y*=-1,eu.z*=-1,C.isCubeTexture&&C.isRenderTargetTexture===!1&&(eu.y*=-1,eu.z*=-1),u.material.uniforms.envMap.value=C,u.material.uniforms.flipEnvMap.value=C.isCubeTexture&&C.isRenderTargetTexture===!1?-1:1,u.material.uniforms.backgroundBlurriness.value=E.backgroundBlurriness,u.material.uniforms.backgroundIntensity.value=E.backgroundIntensity,u.material.uniforms.backgroundRotation.value.setFromMatrix4(ZX.makeRotationFromEuler(eu)),u.material.toneMapped=_n.getTransfer(C.colorSpace)!==zn,(f!==C||m!==C.version||g!==n.toneMapping)&&(u.material.needsUpdate=!0,f=C,m=C.version,g=n.toneMapping),u.layers.enableAll(),S.unshift(u,u.geometry,u.material,0,0,null)):C&&C.isTexture&&(c===void 0&&(c=new ji(new Mf(2,2),new Po({name:"BackgroundMaterial",uniforms:af(bo.background.uniforms),vertexShader:bo.background.vertexShader,fragmentShader:bo.background.fragmentShader,side:Xa,depthTest:!1,depthWrite:!1,fog:!1})),c.geometry.deleteAttribute("normal"),Object.defineProperty(c.material,"map",{get:function(){return this.uniforms.t2D.value}}),r.update(c)),c.material.uniforms.t2D.value=C,c.material.uniforms.backgroundIntensity.value=E.backgroundIntensity,c.material.toneMapped=_n.getTransfer(C.colorSpace)!==zn,C.matrixAutoUpdate===!0&&C.updateMatrix(),c.material.uniforms.uvTransform.value.copy(C.matrix),(f!==C||m!==C.version||g!==n.toneMapping)&&(c.material.needsUpdate=!0,f=C,m=C.version,g=n.toneMapping),c.layers.enableAll(),S.unshift(c,c.geometry,c.material,0,0,null))}function v(S,E){S.getRGB(Rv,wj(n)),i.buffers.color.setClear(Rv.r,Rv.g,Rv.b,E,o)}return{getClearColor:function(){return a},setClearColor:function(S,E=1){a.set(S),l=E,v(a,l)},getClearAlpha:function(){return l},setClearAlpha:function(S){l=S,v(a,l)},render:b,addToRenderList:w}}function tY(n,e){const t=n.getParameter(n.MAX_VERTEX_ATTRIBS),i={},r=m(null);let s=r,o=!1;function a(M,D,z,j,te){let he=!1;const de=f(j,z,D);s!==de&&(s=de,c(s.object)),he=g(M,j,z,te),he&&x(M,j,z,te),te!==null&&e.update(te,n.ELEMENT_ARRAY_BUFFER),(he||o)&&(o=!1,C(M,D,z,j),te!==null&&n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,e.get(te).buffer))}function l(){return n.createVertexArray()}function c(M){return n.bindVertexArray(M)}function u(M){return n.deleteVertexArray(M)}function f(M,D,z){const j=z.wireframe===!0;let te=i[M.id];te===void 0&&(te={},i[M.id]=te);let he=te[D.id];he===void 0&&(he={},te[D.id]=he);let de=he[j];return de===void 0&&(de=m(l()),he[j]=de),de}function m(M){const D=[],z=[],j=[];for(let te=0;te<t;te++)D[te]=0,z[te]=0,j[te]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:D,enabledAttributes:z,attributeDivisors:j,object:M,attributes:{},index:null}}function g(M,D,z,j){const te=s.attributes,he=D.attributes;let de=0;const U=z.getAttributes();for(const F in U)if(U[F].location>=0){const Y=te[F];let ne=he[F];if(ne===void 0&&(F==="instanceMatrix"&&M.instanceMatrix&&(ne=M.instanceMatrix),F==="instanceColor"&&M.instanceColor&&(ne=M.instanceColor)),Y===void 0||Y.attribute!==ne||ne&&Y.data!==ne.data)return!0;de++}return s.attributesNum!==de||s.index!==j}function x(M,D,z,j){const te={},he=D.attributes;let de=0;const U=z.getAttributes();for(const F in U)if(U[F].location>=0){let Y=he[F];Y===void 0&&(F==="instanceMatrix"&&M.instanceMatrix&&(Y=M.instanceMatrix),F==="instanceColor"&&M.instanceColor&&(Y=M.instanceColor));const ne={};ne.attribute=Y,Y&&Y.data&&(ne.data=Y.data),te[F]=ne,de++}s.attributes=te,s.attributesNum=de,s.index=j}function b(){const M=s.newAttributes;for(let D=0,z=M.length;D<z;D++)M[D]=0}function w(M){v(M,0)}function v(M,D){const z=s.newAttributes,j=s.enabledAttributes,te=s.attributeDivisors;z[M]=1,j[M]===0&&(n.enableVertexAttribArray(M),j[M]=1),te[M]!==D&&(n.vertexAttribDivisor(M,D),te[M]=D)}function S(){const M=s.newAttributes,D=s.enabledAttributes;for(let z=0,j=D.length;z<j;z++)D[z]!==M[z]&&(n.disableVertexAttribArray(z),D[z]=0)}function E(M,D,z,j,te,he,de){de===!0?n.vertexAttribIPointer(M,D,z,te,he):n.vertexAttribPointer(M,D,z,j,te,he)}function C(M,D,z,j){b();const te=j.attributes,he=z.getAttributes(),de=D.defaultAttributeValues;for(const U in he){const F=he[U];if(F.location>=0){let X=te[U];if(X===void 0&&(U==="instanceMatrix"&&M.instanceMatrix&&(X=M.instanceMatrix),U==="instanceColor"&&M.instanceColor&&(X=M.instanceColor)),X!==void 0){const Y=X.normalized,ne=X.itemSize,fe=e.get(X);if(fe===void 0)continue;const Ce=fe.buffer,ce=fe.type,Ee=fe.bytesPerElement,Oe=ce===n.INT||ce===n.UNSIGNED_INT||X.gpuType===aw;if(X.isInterleavedBufferAttribute){const Pe=X.data,xt=Pe.stride,Dt=X.offset;if(Pe.isInstancedInterleavedBuffer){for(let lt=0;lt<F.locationSize;lt++)v(F.location+lt,Pe.meshPerAttribute);M.isInstancedMesh!==!0&&j._maxInstanceCount===void 0&&(j._maxInstanceCount=Pe.meshPerAttribute*Pe.count)}else for(let lt=0;lt<F.locationSize;lt++)w(F.location+lt);n.bindBuffer(n.ARRAY_BUFFER,Ce);for(let lt=0;lt<F.locationSize;lt++)E(F.location+lt,ne/F.locationSize,ce,Y,xt*Ee,(Dt+ne/F.locationSize*lt)*Ee,Oe)}else{if(X.isInstancedBufferAttribute){for(let Pe=0;Pe<F.locationSize;Pe++)v(F.location+Pe,X.meshPerAttribute);M.isInstancedMesh!==!0&&j._maxInstanceCount===void 0&&(j._maxInstanceCount=X.meshPerAttribute*X.count)}else for(let Pe=0;Pe<F.locationSize;Pe++)w(F.location+Pe);n.bindBuffer(n.ARRAY_BUFFER,Ce);for(let Pe=0;Pe<F.locationSize;Pe++)E(F.location+Pe,ne/F.locationSize,ce,Y,ne*Ee,ne/F.locationSize*Pe*Ee,Oe)}}else if(de!==void 0){const Y=de[U];if(Y!==void 0)switch(Y.length){case 2:n.vertexAttrib2fv(F.location,Y);break;case 3:n.vertexAttrib3fv(F.location,Y);break;case 4:n.vertexAttrib4fv(F.location,Y);break;default:n.vertexAttrib1fv(F.location,Y)}}}}S()}function V(){I();for(const M in i){const D=i[M];for(const z in D){const j=D[z];for(const te in j)u(j[te].object),delete j[te];delete D[z]}delete i[M]}}function L(M){if(i[M.id]===void 0)return;const D=i[M.id];for(const z in D){const j=D[z];for(const te in j)u(j[te].object),delete j[te];delete D[z]}delete i[M.id]}function N(M){for(const D in i){const z=i[D];if(z[M.id]===void 0)continue;const j=z[M.id];for(const te in j)u(j[te].object),delete j[te];delete z[M.id]}}function I(){A(),o=!0,s!==r&&(s=r,c(s.object))}function A(){r.geometry=null,r.program=null,r.wireframe=!1}return{setup:a,reset:I,resetDefaultState:A,dispose:V,releaseStatesOfGeometry:L,releaseStatesOfProgram:N,initAttributes:b,enableAttribute:w,disableUnusedAttributes:S}}function nY(n,e,t){let i;function r(c){i=c}function s(c,u){n.drawArrays(i,c,u),t.update(u,i,1)}function o(c,u,f){f!==0&&(n.drawArraysInstanced(i,c,u,f),t.update(u,i,f))}function a(c,u,f){if(f===0)return;e.get("WEBGL_multi_draw").multiDrawArraysWEBGL(i,c,0,u,0,f);let g=0;for(let x=0;x<f;x++)g+=u[x];t.update(g,i,1)}function l(c,u,f,m){if(f===0)return;const g=e.get("WEBGL_multi_draw");if(g===null)for(let x=0;x<c.length;x++)o(c[x],u[x],m[x]);else{g.multiDrawArraysInstancedWEBGL(i,c,0,u,0,m,0,f);let x=0;for(let b=0;b<f;b++)x+=u[b]*m[b];t.update(x,i,1)}}this.setMode=r,this.render=s,this.renderInstances=o,this.renderMultiDraw=a,this.renderMultiDrawInstances=l}function iY(n,e,t,i){let r;function s(){if(r!==void 0)return r;if(e.has("EXT_texture_filter_anisotropic")===!0){const N=e.get("EXT_texture_filter_anisotropic");r=n.getParameter(N.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else r=0;return r}function o(N){return!(N!==Pr&&i.convert(N)!==n.getParameter(n.IMPLEMENTATION_COLOR_READ_FORMAT))}function a(N){const I=N===Cf&&(e.has("EXT_color_buffer_half_float")||e.has("EXT_color_buffer_float"));return!(N!==Mo&&i.convert(N)!==n.getParameter(n.IMPLEMENTATION_COLOR_READ_TYPE)&&N!==ds&&!I)}function l(N){if(N==="highp"){if(n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.HIGH_FLOAT).precision>0&&n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.HIGH_FLOAT).precision>0)return"highp";N="mediump"}return N==="mediump"&&n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.MEDIUM_FLOAT).precision>0&&n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}let c=t.precision!==void 0?t.precision:"highp";const u=l(c);u!==c&&(console.warn("THREE.WebGLRenderer:",c,"not supported, using",u,"instead."),c=u);const f=t.logarithmicDepthBuffer===!0,m=t.reverseDepthBuffer===!0&&e.has("EXT_clip_control"),g=n.getParameter(n.MAX_TEXTURE_IMAGE_UNITS),x=n.getParameter(n.MAX_VERTEX_TEXTURE_IMAGE_UNITS),b=n.getParameter(n.MAX_TEXTURE_SIZE),w=n.getParameter(n.MAX_CUBE_MAP_TEXTURE_SIZE),v=n.getParameter(n.MAX_VERTEX_ATTRIBS),S=n.getParameter(n.MAX_VERTEX_UNIFORM_VECTORS),E=n.getParameter(n.MAX_VARYING_VECTORS),C=n.getParameter(n.MAX_FRAGMENT_UNIFORM_VECTORS),V=x>0,L=n.getParameter(n.MAX_SAMPLES);return{isWebGL2:!0,getMaxAnisotropy:s,getMaxPrecision:l,textureFormatReadable:o,textureTypeReadable:a,precision:c,logarithmicDepthBuffer:f,reverseDepthBuffer:m,maxTextures:g,maxVertexTextures:x,maxTextureSize:b,maxCubemapSize:w,maxAttributes:v,maxVertexUniforms:S,maxVaryings:E,maxFragmentUniforms:C,vertexTextures:V,maxSamples:L}}function rY(n){const e=this;let t=null,i=0,r=!1,s=!1;const o=new Rl,a=new en,l={value:null,needsUpdate:!1};this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(f,m){const g=f.length!==0||m||i!==0||r;return r=m,i=f.length,g},this.beginShadows=function(){s=!0,u(null)},this.endShadows=function(){s=!1},this.setGlobalState=function(f,m){t=u(f,m,0)},this.setState=function(f,m,g){const x=f.clippingPlanes,b=f.clipIntersection,w=f.clipShadows,v=n.get(f);if(!r||x===null||x.length===0||s&&!w)s?u(null):c();else{const S=s?0:i,E=S*4;let C=v.clippingState||null;l.value=C,C=u(x,m,E,g);for(let V=0;V!==E;++V)C[V]=t[V];v.clippingState=C,this.numIntersection=b?this.numPlanes:0,this.numPlanes+=S}};function c(){l.value!==t&&(l.value=t,l.needsUpdate=i>0),e.numPlanes=i,e.numIntersection=0}function u(f,m,g,x){const b=f!==null?f.length:0;let w=null;if(b!==0){if(w=l.value,x!==!0||w===null){const v=g+b*4,S=m.matrixWorldInverse;a.getNormalMatrix(S),(w===null||w.length<v)&&(w=new Float32Array(v));for(let E=0,C=g;E!==b;++E,C+=4)o.copy(f[E]).applyMatrix4(S,a),o.normal.toArray(w,C),w[C+3]=o.constant}l.value=w,l.needsUpdate=!0}return e.numPlanes=b,e.numIntersection=0,w}}function sY(n){let e=new WeakMap;function t(o,a){return a===Km?o.mapping=Ya:a===Jm&&(o.mapping=oc),o}function i(o){if(o&&o.isTexture){const a=o.mapping;if(a===Km||a===Jm)if(e.has(o)){const l=e.get(o).texture;return t(l,o.mapping)}else{const l=o.image;if(l&&l.height>0){const c=new OA(l.height);return c.fromEquirectangularTexture(n,o),e.set(o,c),o.addEventListener("dispose",r),t(c.texture,o.mapping)}else return null}}return o}function r(o){const a=o.target;a.removeEventListener("dispose",r);const l=e.get(a);l!==void 0&&(e.delete(a),l.dispose())}function s(){e=new WeakMap}return{get:i,dispose:s}}class ch extends Vg{constructor(e=-1,t=1,i=1,r=-1,s=.1,o=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=i,this.bottom=r,this.near=s,this.far=o,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,t,i,r,s,o){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=r,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),i=(this.right+this.left)/2,r=(this.top+this.bottom)/2;let s=i-e,o=i+e,a=r+t,l=r-t;if(this.view!==null&&this.view.enabled){const c=(this.right-this.left)/this.view.fullWidth/this.zoom,u=(this.top-this.bottom)/this.view.fullHeight/this.zoom;s+=c*this.view.offsetX,o=s+c*this.view.width,a-=u*this.view.offsetY,l=a-u*this.view.height}this.projectionMatrix.makeOrthographic(s,o,a,l,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,this.view!==null&&(t.object.view=Object.assign({},this.view)),t}}const Ad=4,E2=[.125,.215,.35,.446,.526,.582],_u=20,sT=new ch,C2=new pt;let oT=null,aT=0,lT=0,cT=!1;const pu=(1+Math.sqrt(5))/2,Jh=1/pu,A2=[new K(-pu,Jh,0),new K(pu,Jh,0),new K(-Jh,0,pu),new K(Jh,0,pu),new K(0,pu,-Jh),new K(0,pu,Jh),new K(-1,1,-1),new K(1,1,-1),new K(-1,1,1),new K(1,1,1)];class hE{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,i=.1,r=100){oT=this._renderer.getRenderTarget(),aT=this._renderer.getActiveCubeFace(),lT=this._renderer.getActiveMipmapLevel(),cT=this._renderer.xr.enabled,this._renderer.xr.enabled=!1,this._setSize(256);const s=this._allocateTargets();return s.depthBuffer=!0,this._sceneToCubeUV(e,i,r,s),t>0&&this._blur(s,0,0,t),this._applyPMREM(s),this._cleanup(s),s}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=P2(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=I2(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(oT,aT,lT),this._renderer.xr.enabled=cT,e.scissorTest=!1,Nv(e,0,0,e.width,e.height)}_fromTexture(e,t){e.mapping===Ya||e.mapping===oc?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),oT=this._renderer.getRenderTarget(),aT=this._renderer.getActiveCubeFace(),lT=this._renderer.getActiveMipmapLevel(),cT=this._renderer.xr.enabled,this._renderer.xr.enabled=!1;const i=t||this._allocateTargets();return this._textureToCubeUV(e,i),this._applyPMREM(i),this._cleanup(i),i}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,i={magFilter:Wi,minFilter:Wi,generateMipmaps:!1,type:Cf,format:Pr,colorSpace:ah,depthBuffer:!1},r=M2(e,t,i);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==t){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=M2(e,t,i);const{_lodMax:s}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=oY(s)),this._blurMaterial=aY(s,e,t)}return r}_compileMaterial(e){const t=new ji(this._lodPlanes[0],e);this._renderer.compile(t,sT)}_sceneToCubeUV(e,t,i,r){const a=new Oi(90,1,t,i),l=[1,-1,1,1,1,1],c=[1,1,1,-1,-1,-1],u=this._renderer,f=u.autoClear,m=u.toneMapping;u.getClearColor(C2),u.toneMapping=Jo,u.autoClear=!1;const g=new Cc({name:"PMREM.Background",side:Xr,depthWrite:!1,depthTest:!1}),x=new ji(new lh,g);let b=!1;const w=e.background;w?w.isColor&&(g.color.copy(w),e.background=null,b=!0):(g.color.copy(C2),b=!0);for(let v=0;v<6;v++){const S=v%3;S===0?(a.up.set(0,l[v],0),a.lookAt(c[v],0,0)):S===1?(a.up.set(0,0,l[v]),a.lookAt(0,c[v],0)):(a.up.set(0,l[v],0),a.lookAt(0,0,c[v]));const E=this._cubeSize;Nv(r,S*E,v>2?E:0,E,E),u.setRenderTarget(r),b&&u.render(x,a),u.render(e,a)}x.geometry.dispose(),x.material.dispose(),u.toneMapping=m,u.autoClear=f,e.background=w}_textureToCubeUV(e,t){const i=this._renderer,r=e.mapping===Ya||e.mapping===oc;r?(this._cubemapMaterial===null&&(this._cubemapMaterial=P2()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=I2());const s=r?this._cubemapMaterial:this._equirectMaterial,o=new ji(this._lodPlanes[0],s),a=s.uniforms;a.envMap.value=e;const l=this._cubeSize;Nv(t,0,0,3*l,2*l),i.setRenderTarget(t),i.render(o,sT)}_applyPMREM(e){const t=this._renderer,i=t.autoClear;t.autoClear=!1;const r=this._lodPlanes.length;for(let s=1;s<r;s++){const o=Math.sqrt(this._sigmas[s]*this._sigmas[s]-this._sigmas[s-1]*this._sigmas[s-1]),a=A2[(r-s-1)%A2.length];this._blur(e,s-1,s,o,a)}t.autoClear=i}_blur(e,t,i,r,s){const o=this._pingPongRenderTarget;this._halfBlur(e,o,t,i,r,"latitudinal",s),this._halfBlur(o,e,i,i,r,"longitudinal",s)}_halfBlur(e,t,i,r,s,o,a){const l=this._renderer,c=this._blurMaterial;o!=="latitudinal"&&o!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const u=3,f=new ji(this._lodPlanes[r],c),m=c.uniforms,g=this._sizeLods[i]-1,x=isFinite(s)?Math.PI/(2*g):2*Math.PI/(2*_u-1),b=s/x,w=isFinite(s)?1+Math.floor(u*b):_u;w>_u&&console.warn(`sigmaRadians, ${s}, is too large and will clip, as it requested ${w} samples when the maximum is set to ${_u}`);const v=[];let S=0;for(let N=0;N<_u;++N){const I=N/b,A=Math.exp(-I*I/2);v.push(A),N===0?S+=A:N<w&&(S+=2*A)}for(let N=0;N<v.length;N++)v[N]=v[N]/S;m.envMap.value=e.texture,m.samples.value=w,m.weights.value=v,m.latitudinal.value=o==="latitudinal",a&&(m.poleAxis.value=a);const{_lodMax:E}=this;m.dTheta.value=x,m.mipInt.value=E-i;const C=this._sizeLods[r],V=3*C*(r>E-Ad?r-E+Ad:0),L=4*(this._cubeSize-C);Nv(t,V,L,3*C,2*C),l.setRenderTarget(t),l.render(f,sT)}}function oY(n){const e=[],t=[],i=[];let r=n;const s=n-Ad+1+E2.length;for(let o=0;o<s;o++){const a=Math.pow(2,r);t.push(a);let l=1/a;o>n-Ad?l=E2[o-n+Ad-1]:o===0&&(l=0),i.push(l);const c=1/(a-2),u=-c,f=1+c,m=[u,u,f,u,f,f,u,u,f,f,u,f],g=6,x=6,b=3,w=2,v=1,S=new Float32Array(b*x*g),E=new Float32Array(w*x*g),C=new Float32Array(v*x*g);for(let L=0;L<g;L++){const N=L%3*2/3-1,I=L>2?0:-1,A=[N,I,0,N+2/3,I,0,N+2/3,I+1,0,N,I,0,N+2/3,I+1,0,N,I+1,0];S.set(A,b*x*L),E.set(m,w*x*L);const M=[L,L,L,L,L,L];C.set(M,v*x*L)}const V=new rn;V.setAttribute("position",new qn(S,b)),V.setAttribute("uv",new qn(E,w)),V.setAttribute("faceIndex",new qn(C,v)),e.push(V),r>Ad&&r--}return{lodPlanes:e,sizeLods:t,sigmas:i}}function M2(n,e,t){const i=new Io(n,e,t);return i.texture.mapping=Ef,i.texture.name="PMREM.cubeUv",i.scissorTest=!0,i}function Nv(n,e,t,i,r){n.viewport.set(e,t,i,r),n.scissor.set(e,t,i,r)}function aY(n,e,t){const i=new Float32Array(_u),r=new K(0,1,0);return new Po({name:"SphericalGaussianBlur",defines:{n:_u,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/t,CUBEUV_MAX_MIP:`${n}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:i},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:r}},vertexShader:UA(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:Oa,depthTest:!1,depthWrite:!1})}function I2(){return new Po({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:UA(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:Oa,depthTest:!1,depthWrite:!1})}function P2(){return new Po({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:UA(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:Oa,depthTest:!1,depthWrite:!1})}function UA(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function lY(n){let e=new WeakMap,t=null;function i(a){if(a&&a.isTexture){const l=a.mapping,c=l===Km||l===Jm,u=l===Ya||l===oc;if(c||u){let f=e.get(a);const m=f!==void 0?f.texture.pmremVersion:0;if(a.isRenderTargetTexture&&a.pmremVersion!==m)return t===null&&(t=new hE(n)),f=c?t.fromEquirectangular(a,f):t.fromCubemap(a,f),f.texture.pmremVersion=a.pmremVersion,e.set(a,f),f.texture;if(f!==void 0)return f.texture;{const g=a.image;return c&&g&&g.height>0||u&&g&&r(g)?(t===null&&(t=new hE(n)),f=c?t.fromEquirectangular(a):t.fromCubemap(a),f.texture.pmremVersion=a.pmremVersion,e.set(a,f),a.addEventListener("dispose",s),f.texture):null}}}return a}function r(a){let l=0;const c=6;for(let u=0;u<c;u++)a[u]!==void 0&&l++;return l===c}function s(a){const l=a.target;l.removeEventListener("dispose",s);const c=e.get(l);c!==void 0&&(e.delete(l),c.dispose())}function o(){e=new WeakMap,t!==null&&(t.dispose(),t=null)}return{get:i,dispose:o}}function cY(n){const e={};function t(i){if(e[i]!==void 0)return e[i];let r;switch(i){case"WEBGL_depth_texture":r=n.getExtension("WEBGL_depth_texture")||n.getExtension("MOZ_WEBGL_depth_texture")||n.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":r=n.getExtension("EXT_texture_filter_anisotropic")||n.getExtension("MOZ_EXT_texture_filter_anisotropic")||n.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=n.getExtension("WEBGL_compressed_texture_s3tc")||n.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=n.getExtension("WEBGL_compressed_texture_pvrtc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:r=n.getExtension(i)}return e[i]=r,r}return{has:function(i){return t(i)!==null},init:function(){t("EXT_color_buffer_float"),t("WEBGL_clip_cull_distance"),t("OES_texture_float_linear"),t("EXT_color_buffer_half_float"),t("WEBGL_multisampled_render_to_texture"),t("WEBGL_render_shared_exponent")},get:function(i){const r=t(i);return r===null&&Hp("THREE.WebGLRenderer: "+i+" extension not supported."),r}}}function uY(n,e,t,i){const r={},s=new WeakMap;function o(f){const m=f.target;m.index!==null&&e.remove(m.index);for(const x in m.attributes)e.remove(m.attributes[x]);for(const x in m.morphAttributes){const b=m.morphAttributes[x];for(let w=0,v=b.length;w<v;w++)e.remove(b[w])}m.removeEventListener("dispose",o),delete r[m.id];const g=s.get(m);g&&(e.remove(g),s.delete(m)),i.releaseStatesOfGeometry(m),m.isInstancedBufferGeometry===!0&&delete m._maxInstanceCount,t.memory.geometries--}function a(f,m){return r[m.id]===!0||(m.addEventListener("dispose",o),r[m.id]=!0,t.memory.geometries++),m}function l(f){const m=f.attributes;for(const x in m)e.update(m[x],n.ARRAY_BUFFER);const g=f.morphAttributes;for(const x in g){const b=g[x];for(let w=0,v=b.length;w<v;w++)e.update(b[w],n.ARRAY_BUFFER)}}function c(f){const m=[],g=f.index,x=f.attributes.position;let b=0;if(g!==null){const S=g.array;b=g.version;for(let E=0,C=S.length;E<C;E+=3){const V=S[E+0],L=S[E+1],N=S[E+2];m.push(V,L,L,N,N,V)}}else if(x!==void 0){const S=x.array;b=x.version;for(let E=0,C=S.length/3-1;E<C;E+=3){const V=E+0,L=E+1,N=E+2;m.push(V,L,L,N,N,V)}}else return;const w=new(gj(m)?DA:LA)(m,1);w.version=b;const v=s.get(f);v&&e.remove(v),s.set(f,w)}function u(f){const m=s.get(f);if(m){const g=f.index;g!==null&&m.version<g.version&&c(f)}else c(f);return s.get(f)}return{get:a,update:l,getWireframeAttribute:u}}function hY(n,e,t){let i;function r(m){i=m}let s,o;function a(m){s=m.type,o=m.bytesPerElement}function l(m,g){n.drawElements(i,g,s,m*o),t.update(g,i,1)}function c(m,g,x){x!==0&&(n.drawElementsInstanced(i,g,s,m*o,x),t.update(g,i,x))}function u(m,g,x){if(x===0)return;e.get("WEBGL_multi_draw").multiDrawElementsWEBGL(i,g,0,s,m,0,x);let w=0;for(let v=0;v<x;v++)w+=g[v];t.update(w,i,1)}function f(m,g,x,b){if(x===0)return;const w=e.get("WEBGL_multi_draw");if(w===null)for(let v=0;v<m.length;v++)c(m[v]/o,g[v],b[v]);else{w.multiDrawElementsInstancedWEBGL(i,g,0,s,m,0,b,0,x);let v=0;for(let S=0;S<x;S++)v+=g[S]*b[S];t.update(v,i,1)}}this.setMode=r,this.setIndex=a,this.render=l,this.renderInstances=c,this.renderMultiDraw=u,this.renderMultiDrawInstances=f}function dY(n){const e={geometries:0,textures:0},t={frame:0,calls:0,triangles:0,points:0,lines:0};function i(s,o,a){switch(t.calls++,o){case n.TRIANGLES:t.triangles+=a*(s/3);break;case n.LINES:t.lines+=a*(s/2);break;case n.LINE_STRIP:t.lines+=a*(s-1);break;case n.LINE_LOOP:t.lines+=a*s;break;case n.POINTS:t.points+=a*s;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",o);break}}function r(){t.calls=0,t.triangles=0,t.points=0,t.lines=0}return{memory:e,render:t,programs:null,autoReset:!0,reset:r,update:i}}function fY(n,e,t){const i=new WeakMap,r=new An;function s(o,a,l){const c=o.morphTargetInfluences,u=a.morphAttributes.position||a.morphAttributes.normal||a.morphAttributes.color,f=u!==void 0?u.length:0;let m=i.get(a);if(m===void 0||m.count!==f){let M=function(){I.dispose(),i.delete(a),a.removeEventListener("dispose",M)};var g=M;m!==void 0&&m.texture.dispose();const x=a.morphAttributes.position!==void 0,b=a.morphAttributes.normal!==void 0,w=a.morphAttributes.color!==void 0,v=a.morphAttributes.position||[],S=a.morphAttributes.normal||[],E=a.morphAttributes.color||[];let C=0;x===!0&&(C=1),b===!0&&(C=2),w===!0&&(C=3);let V=a.attributes.position.count*C,L=1;V>e.maxTextureSize&&(L=Math.ceil(V/e.maxTextureSize),V=e.maxTextureSize);const N=new Float32Array(V*L*4*f),I=new pw(N,V,L,f);I.type=ds,I.needsUpdate=!0;const A=C*4;for(let D=0;D<f;D++){const z=v[D],j=S[D],te=E[D],he=V*L*4*D;for(let de=0;de<z.count;de++){const U=de*A;x===!0&&(r.fromBufferAttribute(z,de),N[he+U+0]=r.x,N[he+U+1]=r.y,N[he+U+2]=r.z,N[he+U+3]=0),b===!0&&(r.fromBufferAttribute(j,de),N[he+U+4]=r.x,N[he+U+5]=r.y,N[he+U+6]=r.z,N[he+U+7]=0),w===!0&&(r.fromBufferAttribute(te,de),N[he+U+8]=r.x,N[he+U+9]=r.y,N[he+U+10]=r.z,N[he+U+11]=te.itemSize===4?r.w:1)}}m={count:f,texture:I,size:new De(V,L)},i.set(a,m),a.addEventListener("dispose",M)}if(o.isInstancedMesh===!0&&o.morphTexture!==null)l.getUniforms().setValue(n,"morphTexture",o.morphTexture,t);else{let x=0;for(let w=0;w<c.length;w++)x+=c[w];const b=a.morphTargetsRelative?1:1-x;l.getUniforms().setValue(n,"morphTargetBaseInfluence",b),l.getUniforms().setValue(n,"morphTargetInfluences",c)}l.getUniforms().setValue(n,"morphTargetsTexture",m.texture,t),l.getUniforms().setValue(n,"morphTargetsTextureSize",m.size)}return{update:s}}function pY(n,e,t,i){let r=new WeakMap;function s(l){const c=i.render.frame,u=l.geometry,f=e.get(l,u);if(r.get(f)!==c&&(e.update(f),r.set(f,c)),l.isInstancedMesh&&(l.hasEventListener("dispose",a)===!1&&l.addEventListener("dispose",a),r.get(l)!==c&&(t.update(l.instanceMatrix,n.ARRAY_BUFFER),l.instanceColor!==null&&t.update(l.instanceColor,n.ARRAY_BUFFER),r.set(l,c))),l.isSkinnedMesh){const m=l.skeleton;r.get(m)!==c&&(m.update(),r.set(m,c))}return f}function o(){r=new WeakMap}function a(l){const c=l.target;c.removeEventListener("dispose",a),t.remove(c.instanceMatrix),c.instanceColor!==null&&t.remove(c.instanceColor)}return{update:s,dispose:o}}class FA extends hi{constructor(e,t,i,r,s,o,a,l,c,u=Du){if(u!==Du&&u!==Ju)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");i===void 0&&u===Du&&(i=Ka),i===void 0&&u===Ju&&(i=Ku),super(null,r,s,o,a,l,u,i,c),this.isDepthTexture=!0,this.image={width:e,height:t},this.magFilter=a!==void 0?a:ur,this.minFilter=l!==void 0?l:ur,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(e){return super.copy(e),this.compareFunction=e.compareFunction,this}toJSON(e){const t=super.toJSON(e);return this.compareFunction!==null&&(t.compareFunction=this.compareFunction),t}}const Tj=new hi,R2=new FA(1,1),Ej=new pw,Cj=new NA,Aj=new Bg,N2=[],L2=[],D2=new Float32Array(16),k2=new Float32Array(9),O2=new Float32Array(4);function If(n,e,t){const i=n[0];if(i<=0||i>0)return n;const r=e*t;let s=N2[r];if(s===void 0&&(s=new Float32Array(r),N2[r]=s),e!==0){i.toArray(s,0);for(let o=1,a=0;o!==e;++o)a+=t,n[o].toArray(s,a)}return s}function $i(n,e){if(n.length!==e.length)return!1;for(let t=0,i=n.length;t<i;t++)if(n[t]!==e[t])return!1;return!0}function Xi(n,e){for(let t=0,i=e.length;t<i;t++)n[t]=e[t]}function mw(n,e){let t=L2[e];t===void 0&&(t=new Int32Array(e),L2[e]=t);for(let i=0;i!==e;++i)t[i]=n.allocateTextureUnit();return t}function mY(n,e){const t=this.cache;t[0]!==e&&(n.uniform1f(this.addr,e),t[0]=e)}function gY(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2f(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if($i(t,e))return;n.uniform2fv(this.addr,e),Xi(t,e)}}function yY(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3f(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else if(e.r!==void 0)(t[0]!==e.r||t[1]!==e.g||t[2]!==e.b)&&(n.uniform3f(this.addr,e.r,e.g,e.b),t[0]=e.r,t[1]=e.g,t[2]=e.b);else{if($i(t,e))return;n.uniform3fv(this.addr,e),Xi(t,e)}}function vY(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4f(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if($i(t,e))return;n.uniform4fv(this.addr,e),Xi(t,e)}}function xY(n,e){const t=this.cache,i=e.elements;if(i===void 0){if($i(t,e))return;n.uniformMatrix2fv(this.addr,!1,e),Xi(t,e)}else{if($i(t,i))return;O2.set(i),n.uniformMatrix2fv(this.addr,!1,O2),Xi(t,i)}}function _Y(n,e){const t=this.cache,i=e.elements;if(i===void 0){if($i(t,e))return;n.uniformMatrix3fv(this.addr,!1,e),Xi(t,e)}else{if($i(t,i))return;k2.set(i),n.uniformMatrix3fv(this.addr,!1,k2),Xi(t,i)}}function wY(n,e){const t=this.cache,i=e.elements;if(i===void 0){if($i(t,e))return;n.uniformMatrix4fv(this.addr,!1,e),Xi(t,e)}else{if($i(t,i))return;D2.set(i),n.uniformMatrix4fv(this.addr,!1,D2),Xi(t,i)}}function bY(n,e){const t=this.cache;t[0]!==e&&(n.uniform1i(this.addr,e),t[0]=e)}function SY(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2i(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if($i(t,e))return;n.uniform2iv(this.addr,e),Xi(t,e)}}function TY(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3i(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if($i(t,e))return;n.uniform3iv(this.addr,e),Xi(t,e)}}function EY(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4i(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if($i(t,e))return;n.uniform4iv(this.addr,e),Xi(t,e)}}function CY(n,e){const t=this.cache;t[0]!==e&&(n.uniform1ui(this.addr,e),t[0]=e)}function AY(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2ui(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if($i(t,e))return;n.uniform2uiv(this.addr,e),Xi(t,e)}}function MY(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3ui(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if($i(t,e))return;n.uniform3uiv(this.addr,e),Xi(t,e)}}function IY(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4ui(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if($i(t,e))return;n.uniform4uiv(this.addr,e),Xi(t,e)}}function PY(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r);let s;this.type===n.SAMPLER_2D_SHADOW?(R2.compareFunction=PA,s=R2):s=Tj,t.setTexture2D(e||s,r)}function RY(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTexture3D(e||Cj,r)}function NY(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTextureCube(e||Aj,r)}function LY(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTexture2DArray(e||Ej,r)}function DY(n){switch(n){case 5126:return mY;case 35664:return gY;case 35665:return yY;case 35666:return vY;case 35674:return xY;case 35675:return _Y;case 35676:return wY;case 5124:case 35670:return bY;case 35667:case 35671:return SY;case 35668:case 35672:return TY;case 35669:case 35673:return EY;case 5125:return CY;case 36294:return AY;case 36295:return MY;case 36296:return IY;case 35678:case 36198:case 36298:case 36306:case 35682:return PY;case 35679:case 36299:case 36307:return RY;case 35680:case 36300:case 36308:case 36293:return NY;case 36289:case 36303:case 36311:case 36292:return LY}}function kY(n,e){n.uniform1fv(this.addr,e)}function OY(n,e){const t=If(e,this.size,2);n.uniform2fv(this.addr,t)}function UY(n,e){const t=If(e,this.size,3);n.uniform3fv(this.addr,t)}function FY(n,e){const t=If(e,this.size,4);n.uniform4fv(this.addr,t)}function jY(n,e){const t=If(e,this.size,4);n.uniformMatrix2fv(this.addr,!1,t)}function VY(n,e){const t=If(e,this.size,9);n.uniformMatrix3fv(this.addr,!1,t)}function BY(n,e){const t=If(e,this.size,16);n.uniformMatrix4fv(this.addr,!1,t)}function zY(n,e){n.uniform1iv(this.addr,e)}function HY(n,e){n.uniform2iv(this.addr,e)}function GY(n,e){n.uniform3iv(this.addr,e)}function WY(n,e){n.uniform4iv(this.addr,e)}function qY(n,e){n.uniform1uiv(this.addr,e)}function $Y(n,e){n.uniform2uiv(this.addr,e)}function XY(n,e){n.uniform3uiv(this.addr,e)}function YY(n,e){n.uniform4uiv(this.addr,e)}function KY(n,e,t){const i=this.cache,r=e.length,s=mw(t,r);$i(i,s)||(n.uniform1iv(this.addr,s),Xi(i,s));for(let o=0;o!==r;++o)t.setTexture2D(e[o]||Tj,s[o])}function JY(n,e,t){const i=this.cache,r=e.length,s=mw(t,r);$i(i,s)||(n.uniform1iv(this.addr,s),Xi(i,s));for(let o=0;o!==r;++o)t.setTexture3D(e[o]||Cj,s[o])}function QY(n,e,t){const i=this.cache,r=e.length,s=mw(t,r);$i(i,s)||(n.uniform1iv(this.addr,s),Xi(i,s));for(let o=0;o!==r;++o)t.setTextureCube(e[o]||Aj,s[o])}function ZY(n,e,t){const i=this.cache,r=e.length,s=mw(t,r);$i(i,s)||(n.uniform1iv(this.addr,s),Xi(i,s));for(let o=0;o!==r;++o)t.setTexture2DArray(e[o]||Ej,s[o])}function eK(n){switch(n){case 5126:return kY;case 35664:return OY;case 35665:return UY;case 35666:return FY;case 35674:return jY;case 35675:return VY;case 35676:return BY;case 5124:case 35670:return zY;case 35667:case 35671:return HY;case 35668:case 35672:return GY;case 35669:case 35673:return WY;case 5125:return qY;case 36294:return $Y;case 36295:return XY;case 36296:return YY;case 35678:case 36198:case 36298:case 36306:case 35682:return KY;case 35679:case 36299:case 36307:return JY;case 35680:case 36300:case 36308:case 36293:return QY;case 36289:case 36303:case 36311:case 36292:return ZY}}class tK{constructor(e,t,i){this.id=e,this.addr=i,this.cache=[],this.type=t.type,this.setValue=DY(t.type)}}class nK{constructor(e,t,i){this.id=e,this.addr=i,this.cache=[],this.type=t.type,this.size=t.size,this.setValue=eK(t.type)}}class iK{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,i){const r=this.seq;for(let s=0,o=r.length;s!==o;++s){const a=r[s];a.setValue(e,t[a.id],i)}}}const uT=/(\w+)(\])?(\[|\.)?/g;function U2(n,e){n.seq.push(e),n.map[e.id]=e}function rK(n,e,t){const i=n.name,r=i.length;for(uT.lastIndex=0;;){const s=uT.exec(i),o=uT.lastIndex;let a=s[1];const l=s[2]==="]",c=s[3];if(l&&(a=a|0),c===void 0||c==="["&&o+2===r){U2(t,c===void 0?new tK(a,n,e):new nK(a,n,e));break}else{let f=t.map[a];f===void 0&&(f=new iK(a),U2(t,f)),t=f}}}class D0{constructor(e,t){this.seq=[],this.map={};const i=e.getProgramParameter(t,e.ACTIVE_UNIFORMS);for(let r=0;r<i;++r){const s=e.getActiveUniform(t,r),o=e.getUniformLocation(t,s.name);rK(s,o,this)}}setValue(e,t,i,r){const s=this.map[t];s!==void 0&&s.setValue(e,i,r)}setOptional(e,t,i){const r=t[i];r!==void 0&&this.setValue(e,i,r)}static upload(e,t,i,r){for(let s=0,o=t.length;s!==o;++s){const a=t[s],l=i[a.id];l.needsUpdate!==!1&&a.setValue(e,l.value,r)}}static seqWithValue(e,t){const i=[];for(let r=0,s=e.length;r!==s;++r){const o=e[r];o.id in t&&i.push(o)}return i}}function F2(n,e,t){const i=n.createShader(e);return n.shaderSource(i,t),n.compileShader(i),i}const sK=37297;let oK=0;function aK(n,e){const t=n.split(`
`),i=[],r=Math.max(e-6,0),s=Math.min(e+6,t.length);for(let o=r;o<s;o++){const a=o+1;i.push(`${a===e?">":" "} ${a}: ${t[o]}`)}return i.join(`
`)}const j2=new en;function lK(n){_n._getMatrix(j2,_n.workingColorSpace,n);const e=`mat3( ${j2.elements.map(t=>t.toFixed(4))} )`;switch(_n.getTransfer(n)){case jg:return[e,"LinearTransferOETF"];case zn:return[e,"sRGBTransferOETF"];default:return console.warn("THREE.WebGLProgram: Unsupported color space: ",n),[e,"LinearTransferOETF"]}}function V2(n,e,t){const i=n.getShaderParameter(e,n.COMPILE_STATUS),r=n.getShaderInfoLog(e).trim();if(i&&r==="")return"";const s=/ERROR: 0:(\d+)/.exec(r);if(s){const o=parseInt(s[1]);return t.toUpperCase()+`

`+r+`

`+aK(n.getShaderSource(e),o)}else return r}function cK(n,e){const t=lK(e);return[`vec4 ${n}( vec4 value ) {`,`	return ${t[1]}( vec4( value.rgb * ${t[0]}, value.a ) );`,"}"].join(`
`)}function uK(n,e){let t;switch(e){case KF:t="Linear";break;case JF:t="Reinhard";break;case QF:t="Cineon";break;case vA:t="ACESFilmic";break;case ej:t="AgX";break;case tj:t="Neutral";break;case ZF:t="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),t="Linear"}return"vec3 "+n+"( vec3 color ) { return "+t+"ToneMapping( color ); }"}const Lv=new K;function hK(){_n.getLuminanceCoefficients(Lv);const n=Lv.x.toFixed(4),e=Lv.y.toFixed(4),t=Lv.z.toFixed(4);return["float luminance( const in vec3 rgb ) {",`	const vec3 weights = vec3( ${n}, ${e}, ${t} );`,"	return dot( weights, rgb );","}"].join(`
`)}function dK(n){return[n.extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":"",n.extensionMultiDraw?"#extension GL_ANGLE_multi_draw : require":""].filter(Wp).join(`
`)}function fK(n){const e=[];for(const t in n){const i=n[t];i!==!1&&e.push("#define "+t+" "+i)}return e.join(`
`)}function pK(n,e){const t={},i=n.getProgramParameter(e,n.ACTIVE_ATTRIBUTES);for(let r=0;r<i;r++){const s=n.getActiveAttrib(e,r),o=s.name;let a=1;s.type===n.FLOAT_MAT2&&(a=2),s.type===n.FLOAT_MAT3&&(a=3),s.type===n.FLOAT_MAT4&&(a=4),t[o]={type:s.type,location:n.getAttribLocation(e,o),locationSize:a}}return t}function Wp(n){return n!==""}function B2(n,e){const t=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return n.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,t).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function z2(n,e){return n.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const mK=/^[ \t]*#include +<([\w\d./]+)>/gm;function dE(n){return n.replace(mK,yK)}const gK=new Map;function yK(n,e){let t=on[e];if(t===void 0){const i=gK.get(e);if(i!==void 0)t=on[i],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',e,i);else throw new Error("Can not resolve #include <"+e+">")}return dE(t)}const vK=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function H2(n){return n.replace(vK,xK)}function xK(n,e,t,i){let r="";for(let s=parseInt(e);s<parseInt(t);s++)r+=i.replace(/\[\s*i\s*\]/g,"[ "+s+" ]").replace(/UNROLLED_LOOP_INDEX/g,s);return r}function G2(n){let e=`precision ${n.precision} float;
	precision ${n.precision} int;
	precision ${n.precision} sampler2D;
	precision ${n.precision} samplerCube;
	precision ${n.precision} sampler3D;
	precision ${n.precision} sampler2DArray;
	precision ${n.precision} sampler2DShadow;
	precision ${n.precision} samplerCubeShadow;
	precision ${n.precision} sampler2DArrayShadow;
	precision ${n.precision} isampler2D;
	precision ${n.precision} isampler3D;
	precision ${n.precision} isamplerCube;
	precision ${n.precision} isampler2DArray;
	precision ${n.precision} usampler2D;
	precision ${n.precision} usampler3D;
	precision ${n.precision} usamplerCube;
	precision ${n.precision} usampler2DArray;
	`;return n.precision==="highp"?e+=`
#define HIGH_PRECISION`:n.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:n.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}function _K(n){let e="SHADOWMAP_TYPE_BASIC";return n.shadowMapType===sw?e="SHADOWMAP_TYPE_PCF":n.shadowMapType===um?e="SHADOWMAP_TYPE_PCF_SOFT":n.shadowMapType===vo&&(e="SHADOWMAP_TYPE_VSM"),e}function wK(n){let e="ENVMAP_TYPE_CUBE";if(n.envMap)switch(n.envMapMode){case Ya:case oc:e="ENVMAP_TYPE_CUBE";break;case Ef:e="ENVMAP_TYPE_CUBE_UV";break}return e}function bK(n){let e="ENVMAP_MODE_REFLECTION";if(n.envMap)switch(n.envMapMode){case oc:e="ENVMAP_MODE_REFRACTION";break}return e}function SK(n){let e="ENVMAP_BLENDING_NONE";if(n.envMap)switch(n.combine){case Ug:e="ENVMAP_BLENDING_MULTIPLY";break;case XF:e="ENVMAP_BLENDING_MIX";break;case YF:e="ENVMAP_BLENDING_ADD";break}return e}function TK(n){const e=n.envMapCubeUVHeight;if(e===null)return null;const t=Math.log2(e)-2,i=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,t),7*16)),texelHeight:i,maxMip:t}}function EK(n,e,t,i){const r=n.getContext(),s=t.defines;let o=t.vertexShader,a=t.fragmentShader;const l=_K(t),c=wK(t),u=bK(t),f=SK(t),m=TK(t),g=dK(t),x=fK(s),b=r.createProgram();let w,v,S=t.glslVersion?"#version "+t.glslVersion+`
`:"";t.isRawShaderMaterial?(w=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,x].filter(Wp).join(`
`),w.length>0&&(w+=`
`),v=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,x].filter(Wp).join(`
`),v.length>0&&(v+=`
`)):(w=[G2(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,x,t.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",t.batching?"#define USE_BATCHING":"",t.batchingColor?"#define USE_BATCHING_COLOR":"",t.instancing?"#define USE_INSTANCING":"",t.instancingColor?"#define USE_INSTANCING_COLOR":"",t.instancingMorph?"#define USE_INSTANCING_MORPH":"",t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+u:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.displacementMap?"#define USE_DISPLACEMENTMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.mapUv?"#define MAP_UV "+t.mapUv:"",t.alphaMapUv?"#define ALPHAMAP_UV "+t.alphaMapUv:"",t.lightMapUv?"#define LIGHTMAP_UV "+t.lightMapUv:"",t.aoMapUv?"#define AOMAP_UV "+t.aoMapUv:"",t.emissiveMapUv?"#define EMISSIVEMAP_UV "+t.emissiveMapUv:"",t.bumpMapUv?"#define BUMPMAP_UV "+t.bumpMapUv:"",t.normalMapUv?"#define NORMALMAP_UV "+t.normalMapUv:"",t.displacementMapUv?"#define DISPLACEMENTMAP_UV "+t.displacementMapUv:"",t.metalnessMapUv?"#define METALNESSMAP_UV "+t.metalnessMapUv:"",t.roughnessMapUv?"#define ROUGHNESSMAP_UV "+t.roughnessMapUv:"",t.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+t.anisotropyMapUv:"",t.clearcoatMapUv?"#define CLEARCOATMAP_UV "+t.clearcoatMapUv:"",t.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+t.clearcoatNormalMapUv:"",t.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+t.clearcoatRoughnessMapUv:"",t.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+t.iridescenceMapUv:"",t.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+t.iridescenceThicknessMapUv:"",t.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+t.sheenColorMapUv:"",t.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+t.sheenRoughnessMapUv:"",t.specularMapUv?"#define SPECULARMAP_UV "+t.specularMapUv:"",t.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+t.specularColorMapUv:"",t.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+t.specularIntensityMapUv:"",t.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+t.transmissionMapUv:"",t.thicknessMapUv?"#define THICKNESSMAP_UV "+t.thicknessMapUv:"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.flatShading?"#define FLAT_SHADED":"",t.skinning?"#define USE_SKINNING":"",t.morphTargets?"#define USE_MORPHTARGETS":"",t.morphNormals&&t.flatShading===!1?"#define USE_MORPHNORMALS":"",t.morphColors?"#define USE_MORPHCOLORS":"",t.morphTargetsCount>0?"#define MORPHTARGETS_TEXTURE_STRIDE "+t.morphTextureStride:"",t.morphTargetsCount>0?"#define MORPHTARGETS_COUNT "+t.morphTargetsCount:"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+l:"",t.sizeAttenuation?"#define USE_SIZEATTENUATION":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.reverseDepthBuffer?"#define USE_REVERSEDEPTHBUF":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","#ifdef USE_INSTANCING_MORPH","	uniform sampler2D morphTexture;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(Wp).join(`
`),v=[G2(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,x,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.alphaToCoverage?"#define ALPHA_TO_COVERAGE":"",t.map?"#define USE_MAP":"",t.matcap?"#define USE_MATCAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+c:"",t.envMap?"#define "+u:"",t.envMap?"#define "+f:"",m?"#define CUBEUV_TEXEL_WIDTH "+m.texelWidth:"",m?"#define CUBEUV_TEXEL_HEIGHT "+m.texelHeight:"",m?"#define CUBEUV_MAX_MIP "+m.maxMip+".0":"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoat?"#define USE_CLEARCOAT":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.dispersion?"#define USE_DISPERSION":"",t.iridescence?"#define USE_IRIDESCENCE":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaTest?"#define USE_ALPHATEST":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.sheen?"#define USE_SHEEN":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors||t.instancingColor||t.batchingColor?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.gradientMap?"#define USE_GRADIENTMAP":"",t.flatShading?"#define FLAT_SHADED":"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+l:"",t.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",t.decodeVideoTextureEmissive?"#define DECODE_VIDEO_TEXTURE_EMISSIVE":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.reverseDepthBuffer?"#define USE_REVERSEDEPTHBUF":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",t.toneMapping!==Jo?"#define TONE_MAPPING":"",t.toneMapping!==Jo?on.tonemapping_pars_fragment:"",t.toneMapping!==Jo?uK("toneMapping",t.toneMapping):"",t.dithering?"#define DITHERING":"",t.opaque?"#define OPAQUE":"",on.colorspace_pars_fragment,cK("linearToOutputTexel",t.outputColorSpace),hK(),t.useDepthPacking?"#define DEPTH_PACKING "+t.depthPacking:"",`
`].filter(Wp).join(`
`)),o=dE(o),o=B2(o,t),o=z2(o,t),a=dE(a),a=B2(a,t),a=z2(a,t),o=H2(o),a=H2(a),t.isRawShaderMaterial!==!0&&(S=`#version 300 es
`,w=[g,"#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+w,v=["#define varying in",t.glslVersion===uE?"":"layout(location = 0) out highp vec4 pc_fragColor;",t.glslVersion===uE?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+v);const E=S+w+o,C=S+v+a,V=F2(r,r.VERTEX_SHADER,E),L=F2(r,r.FRAGMENT_SHADER,C);r.attachShader(b,V),r.attachShader(b,L),t.index0AttributeName!==void 0?r.bindAttribLocation(b,0,t.index0AttributeName):t.morphTargets===!0&&r.bindAttribLocation(b,0,"position"),r.linkProgram(b);function N(D){if(n.debug.checkShaderErrors){const z=r.getProgramInfoLog(b).trim(),j=r.getShaderInfoLog(V).trim(),te=r.getShaderInfoLog(L).trim();let he=!0,de=!0;if(r.getProgramParameter(b,r.LINK_STATUS)===!1)if(he=!1,typeof n.debug.onShaderError=="function")n.debug.onShaderError(r,b,V,L);else{const U=V2(r,V,"vertex"),F=V2(r,L,"fragment");console.error("THREE.WebGLProgram: Shader Error "+r.getError()+" - VALIDATE_STATUS "+r.getProgramParameter(b,r.VALIDATE_STATUS)+`

Material Name: `+D.name+`
Material Type: `+D.type+`

Program Info Log: `+z+`
`+U+`
`+F)}else z!==""?console.warn("THREE.WebGLProgram: Program Info Log:",z):(j===""||te==="")&&(de=!1);de&&(D.diagnostics={runnable:he,programLog:z,vertexShader:{log:j,prefix:w},fragmentShader:{log:te,prefix:v}})}r.deleteShader(V),r.deleteShader(L),I=new D0(r,b),A=pK(r,b)}let I;this.getUniforms=function(){return I===void 0&&N(this),I};let A;this.getAttributes=function(){return A===void 0&&N(this),A};let M=t.rendererExtensionParallelShaderCompile===!1;return this.isReady=function(){return M===!1&&(M=r.getProgramParameter(b,sK)),M},this.destroy=function(){i.releaseStatesOfProgram(this),r.deleteProgram(b),this.program=void 0},this.type=t.shaderType,this.name=t.shaderName,this.id=oK++,this.cacheKey=e,this.usedTimes=1,this.program=b,this.vertexShader=V,this.fragmentShader=L,this}let CK=0;class AK{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const t=e.vertexShader,i=e.fragmentShader,r=this._getShaderStage(t),s=this._getShaderStage(i),o=this._getShaderCacheForMaterial(e);return o.has(r)===!1&&(o.add(r),r.usedTimes++),o.has(s)===!1&&(o.add(s),s.usedTimes++),this}remove(e){const t=this.materialCache.get(e);for(const i of t)i.usedTimes--,i.usedTimes===0&&this.shaderCache.delete(i.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const t=this.materialCache;let i=t.get(e);return i===void 0&&(i=new Set,t.set(e,i)),i}_getShaderStage(e){const t=this.shaderCache;let i=t.get(e);return i===void 0&&(i=new MK(e),t.set(e,i)),i}}class MK{constructor(e){this.id=CK++,this.code=e,this.usedTimes=0}}function IK(n,e,t,i,r,s,o){const a=new Uu,l=new AK,c=new Set,u=[],f=r.logarithmicDepthBuffer,m=r.vertexTextures;let g=r.precision;const x={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function b(A){return c.add(A),A===0?"uv":`uv${A}`}function w(A,M,D,z,j){const te=z.fog,he=j.geometry,de=A.isMeshStandardMaterial?z.environment:null,U=(A.isMeshStandardMaterial?t:e).get(A.envMap||de),F=U&&U.mapping===Ef?U.image.height:null,X=x[A.type];A.precision!==null&&(g=r.getMaxPrecision(A.precision),g!==A.precision&&console.warn("THREE.WebGLProgram.getParameters:",A.precision,"not supported, using",g,"instead."));const Y=he.morphAttributes.position||he.morphAttributes.normal||he.morphAttributes.color,ne=Y!==void 0?Y.length:0;let fe=0;he.morphAttributes.position!==void 0&&(fe=1),he.morphAttributes.normal!==void 0&&(fe=2),he.morphAttributes.color!==void 0&&(fe=3);let Ce,ce,Ee,Oe;if(X){const ln=bo[X];Ce=ln.vertexShader,ce=ln.fragmentShader}else Ce=A.vertexShader,ce=A.fragmentShader,l.update(A),Ee=l.getVertexShaderID(A),Oe=l.getFragmentShaderID(A);const Pe=n.getRenderTarget(),xt=n.state.buffers.depth.getReversed(),Dt=j.isInstancedMesh===!0,lt=j.isBatchedMesh===!0,ze=!!A.map,Te=!!A.matcap,Me=!!U,Q=!!A.aoMap,nt=!!A.lightMap,ke=!!A.bumpMap,Ze=!!A.normalMap,We=!!A.displacementMap,Mt=!!A.emissiveMap,Ye=!!A.metalnessMap,$=!!A.roughnessMap,G=A.anisotropy>0,ue=A.clearcoat>0,be=A.dispersion>0,Re=A.iridescence>0,xe=A.sheen>0,Ve=A.transmission>0,Ge=G&&!!A.anisotropyMap,st=ue&&!!A.clearcoatMap,$t=ue&&!!A.clearcoatNormalMap,je=ue&&!!A.clearcoatRoughnessMap,Je=Re&&!!A.iridescenceMap,Nt=Re&&!!A.iridescenceThicknessMap,Ot=xe&&!!A.sheenColorMap,ht=xe&&!!A.sheenRoughnessMap,an=!!A.specularMap,Ht=!!A.specularColorMap,hn=!!A.specularIntensityMap,ie=Ve&&!!A.transmissionMap,Ke=Ve&&!!A.thicknessMap,_e=!!A.gradientMap,Ie=!!A.alphaMap,et=A.alphaTest>0,$e=!!A.alphaHash,Ft=!!A.extensions;let bn=Jo;A.toneMapped&&(Pe===null||Pe.isXRRenderTarget===!0)&&(bn=n.toneMapping);const $n={shaderID:X,shaderType:A.type,shaderName:A.name,vertexShader:Ce,fragmentShader:ce,defines:A.defines,customVertexShaderID:Ee,customFragmentShaderID:Oe,isRawShaderMaterial:A.isRawShaderMaterial===!0,glslVersion:A.glslVersion,precision:g,batching:lt,batchingColor:lt&&j._colorsTexture!==null,instancing:Dt,instancingColor:Dt&&j.instanceColor!==null,instancingMorph:Dt&&j.morphTexture!==null,supportsVertexTextures:m,outputColorSpace:Pe===null?n.outputColorSpace:Pe.isXRRenderTarget===!0?Pe.texture.colorSpace:ah,alphaToCoverage:!!A.alphaToCoverage,map:ze,matcap:Te,envMap:Me,envMapMode:Me&&U.mapping,envMapCubeUVHeight:F,aoMap:Q,lightMap:nt,bumpMap:ke,normalMap:Ze,displacementMap:m&&We,emissiveMap:Mt,normalMapObjectSpace:Ze&&A.normalMapType===lj,normalMapTangentSpace:Ze&&A.normalMapType===Ec,metalnessMap:Ye,roughnessMap:$,anisotropy:G,anisotropyMap:Ge,clearcoat:ue,clearcoatMap:st,clearcoatNormalMap:$t,clearcoatRoughnessMap:je,dispersion:be,iridescence:Re,iridescenceMap:Je,iridescenceThicknessMap:Nt,sheen:xe,sheenColorMap:Ot,sheenRoughnessMap:ht,specularMap:an,specularColorMap:Ht,specularIntensityMap:hn,transmission:Ve,transmissionMap:ie,thicknessMap:Ke,gradientMap:_e,opaque:A.transparent===!1&&A.blending===Lu&&A.alphaToCoverage===!1,alphaMap:Ie,alphaTest:et,alphaHash:$e,combine:A.combine,mapUv:ze&&b(A.map.channel),aoMapUv:Q&&b(A.aoMap.channel),lightMapUv:nt&&b(A.lightMap.channel),bumpMapUv:ke&&b(A.bumpMap.channel),normalMapUv:Ze&&b(A.normalMap.channel),displacementMapUv:We&&b(A.displacementMap.channel),emissiveMapUv:Mt&&b(A.emissiveMap.channel),metalnessMapUv:Ye&&b(A.metalnessMap.channel),roughnessMapUv:$&&b(A.roughnessMap.channel),anisotropyMapUv:Ge&&b(A.anisotropyMap.channel),clearcoatMapUv:st&&b(A.clearcoatMap.channel),clearcoatNormalMapUv:$t&&b(A.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:je&&b(A.clearcoatRoughnessMap.channel),iridescenceMapUv:Je&&b(A.iridescenceMap.channel),iridescenceThicknessMapUv:Nt&&b(A.iridescenceThicknessMap.channel),sheenColorMapUv:Ot&&b(A.sheenColorMap.channel),sheenRoughnessMapUv:ht&&b(A.sheenRoughnessMap.channel),specularMapUv:an&&b(A.specularMap.channel),specularColorMapUv:Ht&&b(A.specularColorMap.channel),specularIntensityMapUv:hn&&b(A.specularIntensityMap.channel),transmissionMapUv:ie&&b(A.transmissionMap.channel),thicknessMapUv:Ke&&b(A.thicknessMap.channel),alphaMapUv:Ie&&b(A.alphaMap.channel),vertexTangents:!!he.attributes.tangent&&(Ze||G),vertexColors:A.vertexColors,vertexAlphas:A.vertexColors===!0&&!!he.attributes.color&&he.attributes.color.itemSize===4,pointsUvs:j.isPoints===!0&&!!he.attributes.uv&&(ze||Ie),fog:!!te,useFog:A.fog===!0,fogExp2:!!te&&te.isFogExp2,flatShading:A.flatShading===!0,sizeAttenuation:A.sizeAttenuation===!0,logarithmicDepthBuffer:f,reverseDepthBuffer:xt,skinning:j.isSkinnedMesh===!0,morphTargets:he.morphAttributes.position!==void 0,morphNormals:he.morphAttributes.normal!==void 0,morphColors:he.morphAttributes.color!==void 0,morphTargetsCount:ne,morphTextureStride:fe,numDirLights:M.directional.length,numPointLights:M.point.length,numSpotLights:M.spot.length,numSpotLightMaps:M.spotLightMap.length,numRectAreaLights:M.rectArea.length,numHemiLights:M.hemi.length,numDirLightShadows:M.directionalShadowMap.length,numPointLightShadows:M.pointShadowMap.length,numSpotLightShadows:M.spotShadowMap.length,numSpotLightShadowsWithMaps:M.numSpotLightShadowsWithMaps,numLightProbes:M.numLightProbes,numClippingPlanes:o.numPlanes,numClipIntersection:o.numIntersection,dithering:A.dithering,shadowMapEnabled:n.shadowMap.enabled&&D.length>0,shadowMapType:n.shadowMap.type,toneMapping:bn,decodeVideoTexture:ze&&A.map.isVideoTexture===!0&&_n.getTransfer(A.map.colorSpace)===zn,decodeVideoTextureEmissive:Mt&&A.emissiveMap.isVideoTexture===!0&&_n.getTransfer(A.emissiveMap.colorSpace)===zn,premultipliedAlpha:A.premultipliedAlpha,doubleSided:A.side===So,flipSided:A.side===Xr,useDepthPacking:A.depthPacking>=0,depthPacking:A.depthPacking||0,index0AttributeName:A.index0AttributeName,extensionClipCullDistance:Ft&&A.extensions.clipCullDistance===!0&&i.has("WEBGL_clip_cull_distance"),extensionMultiDraw:(Ft&&A.extensions.multiDraw===!0||lt)&&i.has("WEBGL_multi_draw"),rendererExtensionParallelShaderCompile:i.has("KHR_parallel_shader_compile"),customProgramCacheKey:A.customProgramCacheKey()};return $n.vertexUv1s=c.has(1),$n.vertexUv2s=c.has(2),$n.vertexUv3s=c.has(3),c.clear(),$n}function v(A){const M=[];if(A.shaderID?M.push(A.shaderID):(M.push(A.customVertexShaderID),M.push(A.customFragmentShaderID)),A.defines!==void 0)for(const D in A.defines)M.push(D),M.push(A.defines[D]);return A.isRawShaderMaterial===!1&&(S(M,A),E(M,A),M.push(n.outputColorSpace)),M.push(A.customProgramCacheKey),M.join()}function S(A,M){A.push(M.precision),A.push(M.outputColorSpace),A.push(M.envMapMode),A.push(M.envMapCubeUVHeight),A.push(M.mapUv),A.push(M.alphaMapUv),A.push(M.lightMapUv),A.push(M.aoMapUv),A.push(M.bumpMapUv),A.push(M.normalMapUv),A.push(M.displacementMapUv),A.push(M.emissiveMapUv),A.push(M.metalnessMapUv),A.push(M.roughnessMapUv),A.push(M.anisotropyMapUv),A.push(M.clearcoatMapUv),A.push(M.clearcoatNormalMapUv),A.push(M.clearcoatRoughnessMapUv),A.push(M.iridescenceMapUv),A.push(M.iridescenceThicknessMapUv),A.push(M.sheenColorMapUv),A.push(M.sheenRoughnessMapUv),A.push(M.specularMapUv),A.push(M.specularColorMapUv),A.push(M.specularIntensityMapUv),A.push(M.transmissionMapUv),A.push(M.thicknessMapUv),A.push(M.combine),A.push(M.fogExp2),A.push(M.sizeAttenuation),A.push(M.morphTargetsCount),A.push(M.morphAttributeCount),A.push(M.numDirLights),A.push(M.numPointLights),A.push(M.numSpotLights),A.push(M.numSpotLightMaps),A.push(M.numHemiLights),A.push(M.numRectAreaLights),A.push(M.numDirLightShadows),A.push(M.numPointLightShadows),A.push(M.numSpotLightShadows),A.push(M.numSpotLightShadowsWithMaps),A.push(M.numLightProbes),A.push(M.shadowMapType),A.push(M.toneMapping),A.push(M.numClippingPlanes),A.push(M.numClipIntersection),A.push(M.depthPacking)}function E(A,M){a.disableAll(),M.supportsVertexTextures&&a.enable(0),M.instancing&&a.enable(1),M.instancingColor&&a.enable(2),M.instancingMorph&&a.enable(3),M.matcap&&a.enable(4),M.envMap&&a.enable(5),M.normalMapObjectSpace&&a.enable(6),M.normalMapTangentSpace&&a.enable(7),M.clearcoat&&a.enable(8),M.iridescence&&a.enable(9),M.alphaTest&&a.enable(10),M.vertexColors&&a.enable(11),M.vertexAlphas&&a.enable(12),M.vertexUv1s&&a.enable(13),M.vertexUv2s&&a.enable(14),M.vertexUv3s&&a.enable(15),M.vertexTangents&&a.enable(16),M.anisotropy&&a.enable(17),M.alphaHash&&a.enable(18),M.batching&&a.enable(19),M.dispersion&&a.enable(20),M.batchingColor&&a.enable(21),A.push(a.mask),a.disableAll(),M.fog&&a.enable(0),M.useFog&&a.enable(1),M.flatShading&&a.enable(2),M.logarithmicDepthBuffer&&a.enable(3),M.reverseDepthBuffer&&a.enable(4),M.skinning&&a.enable(5),M.morphTargets&&a.enable(6),M.morphNormals&&a.enable(7),M.morphColors&&a.enable(8),M.premultipliedAlpha&&a.enable(9),M.shadowMapEnabled&&a.enable(10),M.doubleSided&&a.enable(11),M.flipSided&&a.enable(12),M.useDepthPacking&&a.enable(13),M.dithering&&a.enable(14),M.transmission&&a.enable(15),M.sheen&&a.enable(16),M.opaque&&a.enable(17),M.pointsUvs&&a.enable(18),M.decodeVideoTexture&&a.enable(19),M.decodeVideoTextureEmissive&&a.enable(20),M.alphaToCoverage&&a.enable(21),A.push(a.mask)}function C(A){const M=x[A.type];let D;if(M){const z=bo[M];D=bj.clone(z.uniforms)}else D=A.uniforms;return D}function V(A,M){let D;for(let z=0,j=u.length;z<j;z++){const te=u[z];if(te.cacheKey===M){D=te,++D.usedTimes;break}}return D===void 0&&(D=new EK(n,M,A,s),u.push(D)),D}function L(A){if(--A.usedTimes===0){const M=u.indexOf(A);u[M]=u[u.length-1],u.pop(),A.destroy()}}function N(A){l.remove(A)}function I(){l.dispose()}return{getParameters:w,getProgramCacheKey:v,getUniforms:C,acquireProgram:V,releaseProgram:L,releaseShaderCache:N,programs:u,dispose:I}}function PK(){let n=new WeakMap;function e(o){return n.has(o)}function t(o){let a=n.get(o);return a===void 0&&(a={},n.set(o,a)),a}function i(o){n.delete(o)}function r(o,a,l){n.get(o)[a]=l}function s(){n=new WeakMap}return{has:e,get:t,remove:i,update:r,dispose:s}}function RK(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.material.id!==e.material.id?n.material.id-e.material.id:n.z!==e.z?n.z-e.z:n.id-e.id}function W2(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.z!==e.z?e.z-n.z:n.id-e.id}function q2(){const n=[];let e=0;const t=[],i=[],r=[];function s(){e=0,t.length=0,i.length=0,r.length=0}function o(f,m,g,x,b,w){let v=n[e];return v===void 0?(v={id:f.id,object:f,geometry:m,material:g,groupOrder:x,renderOrder:f.renderOrder,z:b,group:w},n[e]=v):(v.id=f.id,v.object=f,v.geometry=m,v.material=g,v.groupOrder=x,v.renderOrder=f.renderOrder,v.z=b,v.group=w),e++,v}function a(f,m,g,x,b,w){const v=o(f,m,g,x,b,w);g.transmission>0?i.push(v):g.transparent===!0?r.push(v):t.push(v)}function l(f,m,g,x,b,w){const v=o(f,m,g,x,b,w);g.transmission>0?i.unshift(v):g.transparent===!0?r.unshift(v):t.unshift(v)}function c(f,m){t.length>1&&t.sort(f||RK),i.length>1&&i.sort(m||W2),r.length>1&&r.sort(m||W2)}function u(){for(let f=e,m=n.length;f<m;f++){const g=n[f];if(g.id===null)break;g.id=null,g.object=null,g.geometry=null,g.material=null,g.group=null}}return{opaque:t,transmissive:i,transparent:r,init:s,push:a,unshift:l,finish:u,sort:c}}function NK(){let n=new WeakMap;function e(i,r){const s=n.get(i);let o;return s===void 0?(o=new q2,n.set(i,[o])):r>=s.length?(o=new q2,s.push(o)):o=s[r],o}function t(){n=new WeakMap}return{get:e,dispose:t}}function LK(){const n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let t;switch(e.type){case"DirectionalLight":t={direction:new K,color:new pt};break;case"SpotLight":t={position:new K,direction:new K,color:new pt,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":t={position:new K,color:new pt,distance:0,decay:0};break;case"HemisphereLight":t={direction:new K,skyColor:new pt,groundColor:new pt};break;case"RectAreaLight":t={color:new pt,position:new K,halfWidth:new K,halfHeight:new K};break}return n[e.id]=t,t}}}function DK(){const n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let t;switch(e.type){case"DirectionalLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new De};break;case"SpotLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new De};break;case"PointLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new De,shadowCameraNear:1,shadowCameraFar:1e3};break}return n[e.id]=t,t}}}let kK=0;function OK(n,e){return(e.castShadow?2:0)-(n.castShadow?2:0)+(e.map?1:0)-(n.map?1:0)}function UK(n){const e=new LK,t=DK(),i={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let c=0;c<9;c++)i.probe.push(new K);const r=new K,s=new Bt,o=new Bt;function a(c){let u=0,f=0,m=0;for(let A=0;A<9;A++)i.probe[A].set(0,0,0);let g=0,x=0,b=0,w=0,v=0,S=0,E=0,C=0,V=0,L=0,N=0;c.sort(OK);for(let A=0,M=c.length;A<M;A++){const D=c[A],z=D.color,j=D.intensity,te=D.distance,he=D.shadow&&D.shadow.map?D.shadow.map.texture:null;if(D.isAmbientLight)u+=z.r*j,f+=z.g*j,m+=z.b*j;else if(D.isLightProbe){for(let de=0;de<9;de++)i.probe[de].addScaledVector(D.sh.coefficients[de],j);N++}else if(D.isDirectionalLight){const de=e.get(D);if(de.color.copy(D.color).multiplyScalar(D.intensity),D.castShadow){const U=D.shadow,F=t.get(D);F.shadowIntensity=U.intensity,F.shadowBias=U.bias,F.shadowNormalBias=U.normalBias,F.shadowRadius=U.radius,F.shadowMapSize=U.mapSize,i.directionalShadow[g]=F,i.directionalShadowMap[g]=he,i.directionalShadowMatrix[g]=D.shadow.matrix,S++}i.directional[g]=de,g++}else if(D.isSpotLight){const de=e.get(D);de.position.setFromMatrixPosition(D.matrixWorld),de.color.copy(z).multiplyScalar(j),de.distance=te,de.coneCos=Math.cos(D.angle),de.penumbraCos=Math.cos(D.angle*(1-D.penumbra)),de.decay=D.decay,i.spot[b]=de;const U=D.shadow;if(D.map&&(i.spotLightMap[V]=D.map,V++,U.updateMatrices(D),D.castShadow&&L++),i.spotLightMatrix[b]=U.matrix,D.castShadow){const F=t.get(D);F.shadowIntensity=U.intensity,F.shadowBias=U.bias,F.shadowNormalBias=U.normalBias,F.shadowRadius=U.radius,F.shadowMapSize=U.mapSize,i.spotShadow[b]=F,i.spotShadowMap[b]=he,C++}b++}else if(D.isRectAreaLight){const de=e.get(D);de.color.copy(z).multiplyScalar(j),de.halfWidth.set(D.width*.5,0,0),de.halfHeight.set(0,D.height*.5,0),i.rectArea[w]=de,w++}else if(D.isPointLight){const de=e.get(D);if(de.color.copy(D.color).multiplyScalar(D.intensity),de.distance=D.distance,de.decay=D.decay,D.castShadow){const U=D.shadow,F=t.get(D);F.shadowIntensity=U.intensity,F.shadowBias=U.bias,F.shadowNormalBias=U.normalBias,F.shadowRadius=U.radius,F.shadowMapSize=U.mapSize,F.shadowCameraNear=U.camera.near,F.shadowCameraFar=U.camera.far,i.pointShadow[x]=F,i.pointShadowMap[x]=he,i.pointShadowMatrix[x]=D.shadow.matrix,E++}i.point[x]=de,x++}else if(D.isHemisphereLight){const de=e.get(D);de.skyColor.copy(D.color).multiplyScalar(j),de.groundColor.copy(D.groundColor).multiplyScalar(j),i.hemi[v]=de,v++}}w>0&&(n.has("OES_texture_float_linear")===!0?(i.rectAreaLTC1=it.LTC_FLOAT_1,i.rectAreaLTC2=it.LTC_FLOAT_2):(i.rectAreaLTC1=it.LTC_HALF_1,i.rectAreaLTC2=it.LTC_HALF_2)),i.ambient[0]=u,i.ambient[1]=f,i.ambient[2]=m;const I=i.hash;(I.directionalLength!==g||I.pointLength!==x||I.spotLength!==b||I.rectAreaLength!==w||I.hemiLength!==v||I.numDirectionalShadows!==S||I.numPointShadows!==E||I.numSpotShadows!==C||I.numSpotMaps!==V||I.numLightProbes!==N)&&(i.directional.length=g,i.spot.length=b,i.rectArea.length=w,i.point.length=x,i.hemi.length=v,i.directionalShadow.length=S,i.directionalShadowMap.length=S,i.pointShadow.length=E,i.pointShadowMap.length=E,i.spotShadow.length=C,i.spotShadowMap.length=C,i.directionalShadowMatrix.length=S,i.pointShadowMatrix.length=E,i.spotLightMatrix.length=C+V-L,i.spotLightMap.length=V,i.numSpotLightShadowsWithMaps=L,i.numLightProbes=N,I.directionalLength=g,I.pointLength=x,I.spotLength=b,I.rectAreaLength=w,I.hemiLength=v,I.numDirectionalShadows=S,I.numPointShadows=E,I.numSpotShadows=C,I.numSpotMaps=V,I.numLightProbes=N,i.version=kK++)}function l(c,u){let f=0,m=0,g=0,x=0,b=0;const w=u.matrixWorldInverse;for(let v=0,S=c.length;v<S;v++){const E=c[v];if(E.isDirectionalLight){const C=i.directional[f];C.direction.setFromMatrixPosition(E.matrixWorld),r.setFromMatrixPosition(E.target.matrixWorld),C.direction.sub(r),C.direction.transformDirection(w),f++}else if(E.isSpotLight){const C=i.spot[g];C.position.setFromMatrixPosition(E.matrixWorld),C.position.applyMatrix4(w),C.direction.setFromMatrixPosition(E.matrixWorld),r.setFromMatrixPosition(E.target.matrixWorld),C.direction.sub(r),C.direction.transformDirection(w),g++}else if(E.isRectAreaLight){const C=i.rectArea[x];C.position.setFromMatrixPosition(E.matrixWorld),C.position.applyMatrix4(w),o.identity(),s.copy(E.matrixWorld),s.premultiply(w),o.extractRotation(s),C.halfWidth.set(E.width*.5,0,0),C.halfHeight.set(0,E.height*.5,0),C.halfWidth.applyMatrix4(o),C.halfHeight.applyMatrix4(o),x++}else if(E.isPointLight){const C=i.point[m];C.position.setFromMatrixPosition(E.matrixWorld),C.position.applyMatrix4(w),m++}else if(E.isHemisphereLight){const C=i.hemi[b];C.direction.setFromMatrixPosition(E.matrixWorld),C.direction.transformDirection(w),b++}}}return{setup:a,setupView:l,state:i}}function $2(n){const e=new UK(n),t=[],i=[];function r(u){c.camera=u,t.length=0,i.length=0}function s(u){t.push(u)}function o(u){i.push(u)}function a(){e.setup(t)}function l(u){e.setupView(t,u)}const c={lightsArray:t,shadowsArray:i,camera:null,lights:e,transmissionRenderTarget:{}};return{init:r,state:c,setupLights:a,setupLightsView:l,pushLight:s,pushShadow:o}}function FK(n){let e=new WeakMap;function t(r,s=0){const o=e.get(r);let a;return o===void 0?(a=new $2(n),e.set(r,[a])):s>=o.length?(a=new $2(n),o.push(a)):a=o[s],a}function i(){e=new WeakMap}return{get:t,dispose:i}}class jA extends fr{static get type(){return"MeshDepthMaterial"}constructor(e){super(),this.isMeshDepthMaterial=!0,this.depthPacking=oj,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class VA extends fr{static get type(){return"MeshDistanceMaterial"}constructor(e){super(),this.isMeshDistanceMaterial=!0,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}const jK=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,VK=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function BK(n,e,t){let i=new zg;const r=new De,s=new De,o=new An,a=new jA({depthPacking:aj}),l=new VA,c={},u=t.maxTextureSize,f={[Xa]:Xr,[Xr]:Xa,[So]:So},m=new Po({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new De},radius:{value:4}},vertexShader:jK,fragmentShader:VK}),g=m.clone();g.defines.HORIZONTAL_PASS=1;const x=new rn;x.setAttribute("position",new qn(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const b=new ji(x,m),w=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=sw;let v=this.type;this.render=function(L,N,I){if(w.enabled===!1||w.autoUpdate===!1&&w.needsUpdate===!1||L.length===0)return;const A=n.getRenderTarget(),M=n.getActiveCubeFace(),D=n.getActiveMipmapLevel(),z=n.state;z.setBlending(Oa),z.buffers.color.setClear(1,1,1,1),z.buffers.depth.setTest(!0),z.setScissorTest(!1);const j=v!==vo&&this.type===vo,te=v===vo&&this.type!==vo;for(let he=0,de=L.length;he<de;he++){const U=L[he],F=U.shadow;if(F===void 0){console.warn("THREE.WebGLShadowMap:",U,"has no shadow.");continue}if(F.autoUpdate===!1&&F.needsUpdate===!1)continue;r.copy(F.mapSize);const X=F.getFrameExtents();if(r.multiply(X),s.copy(F.mapSize),(r.x>u||r.y>u)&&(r.x>u&&(s.x=Math.floor(u/X.x),r.x=s.x*X.x,F.mapSize.x=s.x),r.y>u&&(s.y=Math.floor(u/X.y),r.y=s.y*X.y,F.mapSize.y=s.y)),F.map===null||j===!0||te===!0){const ne=this.type!==vo?{minFilter:ur,magFilter:ur}:{};F.map!==null&&F.map.dispose(),F.map=new Io(r.x,r.y,ne),F.map.texture.name=U.name+".shadowMap",F.camera.updateProjectionMatrix()}n.setRenderTarget(F.map),n.clear();const Y=F.getViewportCount();for(let ne=0;ne<Y;ne++){const fe=F.getViewport(ne);o.set(s.x*fe.x,s.y*fe.y,s.x*fe.z,s.y*fe.w),z.viewport(o),F.updateMatrices(U,ne),i=F.getFrustum(),C(N,I,F.camera,U,this.type)}F.isPointLightShadow!==!0&&this.type===vo&&S(F,I),F.needsUpdate=!1}v=this.type,w.needsUpdate=!1,n.setRenderTarget(A,M,D)};function S(L,N){const I=e.update(b);m.defines.VSM_SAMPLES!==L.blurSamples&&(m.defines.VSM_SAMPLES=L.blurSamples,g.defines.VSM_SAMPLES=L.blurSamples,m.needsUpdate=!0,g.needsUpdate=!0),L.mapPass===null&&(L.mapPass=new Io(r.x,r.y)),m.uniforms.shadow_pass.value=L.map.texture,m.uniforms.resolution.value=L.mapSize,m.uniforms.radius.value=L.radius,n.setRenderTarget(L.mapPass),n.clear(),n.renderBufferDirect(N,null,I,m,b,null),g.uniforms.shadow_pass.value=L.mapPass.texture,g.uniforms.resolution.value=L.mapSize,g.uniforms.radius.value=L.radius,n.setRenderTarget(L.map),n.clear(),n.renderBufferDirect(N,null,I,g,b,null)}function E(L,N,I,A){let M=null;const D=I.isPointLight===!0?L.customDistanceMaterial:L.customDepthMaterial;if(D!==void 0)M=D;else if(M=I.isPointLight===!0?l:a,n.localClippingEnabled&&N.clipShadows===!0&&Array.isArray(N.clippingPlanes)&&N.clippingPlanes.length!==0||N.displacementMap&&N.displacementScale!==0||N.alphaMap&&N.alphaTest>0||N.map&&N.alphaTest>0){const z=M.uuid,j=N.uuid;let te=c[z];te===void 0&&(te={},c[z]=te);let he=te[j];he===void 0&&(he=M.clone(),te[j]=he,N.addEventListener("dispose",V)),M=he}if(M.visible=N.visible,M.wireframe=N.wireframe,A===vo?M.side=N.shadowSide!==null?N.shadowSide:N.side:M.side=N.shadowSide!==null?N.shadowSide:f[N.side],M.alphaMap=N.alphaMap,M.alphaTest=N.alphaTest,M.map=N.map,M.clipShadows=N.clipShadows,M.clippingPlanes=N.clippingPlanes,M.clipIntersection=N.clipIntersection,M.displacementMap=N.displacementMap,M.displacementScale=N.displacementScale,M.displacementBias=N.displacementBias,M.wireframeLinewidth=N.wireframeLinewidth,M.linewidth=N.linewidth,I.isPointLight===!0&&M.isMeshDistanceMaterial===!0){const z=n.properties.get(M);z.light=I}return M}function C(L,N,I,A,M){if(L.visible===!1)return;if(L.layers.test(N.layers)&&(L.isMesh||L.isLine||L.isPoints)&&(L.castShadow||L.receiveShadow&&M===vo)&&(!L.frustumCulled||i.intersectsObject(L))){L.modelViewMatrix.multiplyMatrices(I.matrixWorldInverse,L.matrixWorld);const j=e.update(L),te=L.material;if(Array.isArray(te)){const he=j.groups;for(let de=0,U=he.length;de<U;de++){const F=he[de],X=te[F.materialIndex];if(X&&X.visible){const Y=E(L,X,A,M);L.onBeforeShadow(n,L,N,I,j,Y,F),n.renderBufferDirect(I,null,j,Y,L,F),L.onAfterShadow(n,L,N,I,j,Y,F)}}}else if(te.visible){const he=E(L,te,A,M);L.onBeforeShadow(n,L,N,I,j,he,null),n.renderBufferDirect(I,null,j,he,L,null),L.onAfterShadow(n,L,N,I,j,he,null)}}const z=L.children;for(let j=0,te=z.length;j<te;j++)C(z[j],N,I,A,M)}function V(L){L.target.removeEventListener("dispose",V);for(const I in c){const A=c[I],M=L.target.uuid;M in A&&(A[M].dispose(),delete A[M])}}}const zK={[Cx]:Ax,[Mx]:Rx,[Ix]:Nx,[Yu]:Px,[Ax]:Cx,[Rx]:Mx,[Nx]:Ix,[Px]:Yu};function HK(n,e){function t(){let ie=!1;const Ke=new An;let _e=null;const Ie=new An(0,0,0,0);return{setMask:function(et){_e!==et&&!ie&&(n.colorMask(et,et,et,et),_e=et)},setLocked:function(et){ie=et},setClear:function(et,$e,Ft,bn,$n){$n===!0&&(et*=bn,$e*=bn,Ft*=bn),Ke.set(et,$e,Ft,bn),Ie.equals(Ke)===!1&&(n.clearColor(et,$e,Ft,bn),Ie.copy(Ke))},reset:function(){ie=!1,_e=null,Ie.set(-1,0,0,0)}}}function i(){let ie=!1,Ke=!1,_e=null,Ie=null,et=null;return{setReversed:function($e){if(Ke!==$e){const Ft=e.get("EXT_clip_control");Ke?Ft.clipControlEXT(Ft.LOWER_LEFT_EXT,Ft.ZERO_TO_ONE_EXT):Ft.clipControlEXT(Ft.LOWER_LEFT_EXT,Ft.NEGATIVE_ONE_TO_ONE_EXT);const bn=et;et=null,this.setClear(bn)}Ke=$e},getReversed:function(){return Ke},setTest:function($e){$e?Pe(n.DEPTH_TEST):xt(n.DEPTH_TEST)},setMask:function($e){_e!==$e&&!ie&&(n.depthMask($e),_e=$e)},setFunc:function($e){if(Ke&&($e=zK[$e]),Ie!==$e){switch($e){case Cx:n.depthFunc(n.NEVER);break;case Ax:n.depthFunc(n.ALWAYS);break;case Mx:n.depthFunc(n.LESS);break;case Yu:n.depthFunc(n.LEQUAL);break;case Ix:n.depthFunc(n.EQUAL);break;case Px:n.depthFunc(n.GEQUAL);break;case Rx:n.depthFunc(n.GREATER);break;case Nx:n.depthFunc(n.NOTEQUAL);break;default:n.depthFunc(n.LEQUAL)}Ie=$e}},setLocked:function($e){ie=$e},setClear:function($e){et!==$e&&(Ke&&($e=1-$e),n.clearDepth($e),et=$e)},reset:function(){ie=!1,_e=null,Ie=null,et=null,Ke=!1}}}function r(){let ie=!1,Ke=null,_e=null,Ie=null,et=null,$e=null,Ft=null,bn=null,$n=null;return{setTest:function(ln){ie||(ln?Pe(n.STENCIL_TEST):xt(n.STENCIL_TEST))},setMask:function(ln){Ke!==ln&&!ie&&(n.stencilMask(ln),Ke=ln)},setFunc:function(ln,Bi,Z){(_e!==ln||Ie!==Bi||et!==Z)&&(n.stencilFunc(ln,Bi,Z),_e=ln,Ie=Bi,et=Z)},setOp:function(ln,Bi,Z){($e!==ln||Ft!==Bi||bn!==Z)&&(n.stencilOp(ln,Bi,Z),$e=ln,Ft=Bi,bn=Z)},setLocked:function(ln){ie=ln},setClear:function(ln){$n!==ln&&(n.clearStencil(ln),$n=ln)},reset:function(){ie=!1,Ke=null,_e=null,Ie=null,et=null,$e=null,Ft=null,bn=null,$n=null}}}const s=new t,o=new i,a=new r,l=new WeakMap,c=new WeakMap;let u={},f={},m=new WeakMap,g=[],x=null,b=!1,w=null,v=null,S=null,E=null,C=null,V=null,L=null,N=new pt(0,0,0),I=0,A=!1,M=null,D=null,z=null,j=null,te=null;const he=n.getParameter(n.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let de=!1,U=0;const F=n.getParameter(n.VERSION);F.indexOf("WebGL")!==-1?(U=parseFloat(/^WebGL (\d)/.exec(F)[1]),de=U>=1):F.indexOf("OpenGL ES")!==-1&&(U=parseFloat(/^OpenGL ES (\d)/.exec(F)[1]),de=U>=2);let X=null,Y={};const ne=n.getParameter(n.SCISSOR_BOX),fe=n.getParameter(n.VIEWPORT),Ce=new An().fromArray(ne),ce=new An().fromArray(fe);function Ee(ie,Ke,_e,Ie){const et=new Uint8Array(4),$e=n.createTexture();n.bindTexture(ie,$e),n.texParameteri(ie,n.TEXTURE_MIN_FILTER,n.NEAREST),n.texParameteri(ie,n.TEXTURE_MAG_FILTER,n.NEAREST);for(let Ft=0;Ft<_e;Ft++)ie===n.TEXTURE_3D||ie===n.TEXTURE_2D_ARRAY?n.texImage3D(Ke,0,n.RGBA,1,1,Ie,0,n.RGBA,n.UNSIGNED_BYTE,et):n.texImage2D(Ke+Ft,0,n.RGBA,1,1,0,n.RGBA,n.UNSIGNED_BYTE,et);return $e}const Oe={};Oe[n.TEXTURE_2D]=Ee(n.TEXTURE_2D,n.TEXTURE_2D,1),Oe[n.TEXTURE_CUBE_MAP]=Ee(n.TEXTURE_CUBE_MAP,n.TEXTURE_CUBE_MAP_POSITIVE_X,6),Oe[n.TEXTURE_2D_ARRAY]=Ee(n.TEXTURE_2D_ARRAY,n.TEXTURE_2D_ARRAY,1,1),Oe[n.TEXTURE_3D]=Ee(n.TEXTURE_3D,n.TEXTURE_3D,1,1),s.setClear(0,0,0,1),o.setClear(1),a.setClear(0),Pe(n.DEPTH_TEST),o.setFunc(Yu),ke(!1),Ze(rE),Pe(n.CULL_FACE),Q(Oa);function Pe(ie){u[ie]!==!0&&(n.enable(ie),u[ie]=!0)}function xt(ie){u[ie]!==!1&&(n.disable(ie),u[ie]=!1)}function Dt(ie,Ke){return f[ie]!==Ke?(n.bindFramebuffer(ie,Ke),f[ie]=Ke,ie===n.DRAW_FRAMEBUFFER&&(f[n.FRAMEBUFFER]=Ke),ie===n.FRAMEBUFFER&&(f[n.DRAW_FRAMEBUFFER]=Ke),!0):!1}function lt(ie,Ke){let _e=g,Ie=!1;if(ie){_e=m.get(Ke),_e===void 0&&(_e=[],m.set(Ke,_e));const et=ie.textures;if(_e.length!==et.length||_e[0]!==n.COLOR_ATTACHMENT0){for(let $e=0,Ft=et.length;$e<Ft;$e++)_e[$e]=n.COLOR_ATTACHMENT0+$e;_e.length=et.length,Ie=!0}}else _e[0]!==n.BACK&&(_e[0]=n.BACK,Ie=!0);Ie&&n.drawBuffers(_e)}function ze(ie){return x!==ie?(n.useProgram(ie),x=ie,!0):!1}const Te={[Dl]:n.FUNC_ADD,[RF]:n.FUNC_SUBTRACT,[NF]:n.FUNC_REVERSE_SUBTRACT};Te[LF]=n.MIN,Te[DF]=n.MAX;const Me={[kF]:n.ZERO,[OF]:n.ONE,[UF]:n.SRC_COLOR,[Tx]:n.SRC_ALPHA,[HF]:n.SRC_ALPHA_SATURATE,[BF]:n.DST_COLOR,[jF]:n.DST_ALPHA,[FF]:n.ONE_MINUS_SRC_COLOR,[Ex]:n.ONE_MINUS_SRC_ALPHA,[zF]:n.ONE_MINUS_DST_COLOR,[VF]:n.ONE_MINUS_DST_ALPHA,[GF]:n.CONSTANT_COLOR,[WF]:n.ONE_MINUS_CONSTANT_COLOR,[qF]:n.CONSTANT_ALPHA,[$F]:n.ONE_MINUS_CONSTANT_ALPHA};function Q(ie,Ke,_e,Ie,et,$e,Ft,bn,$n,ln){if(ie===Oa){b===!0&&(xt(n.BLEND),b=!1);return}if(b===!1&&(Pe(n.BLEND),b=!0),ie!==PF){if(ie!==w||ln!==A){if((v!==Dl||C!==Dl)&&(n.blendEquation(n.FUNC_ADD),v=Dl,C=Dl),ln)switch(ie){case Lu:n.blendFuncSeparate(n.ONE,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case sE:n.blendFunc(n.ONE,n.ONE);break;case oE:n.blendFuncSeparate(n.ZERO,n.ONE_MINUS_SRC_COLOR,n.ZERO,n.ONE);break;case aE:n.blendFuncSeparate(n.ZERO,n.SRC_COLOR,n.ZERO,n.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",ie);break}else switch(ie){case Lu:n.blendFuncSeparate(n.SRC_ALPHA,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case sE:n.blendFunc(n.SRC_ALPHA,n.ONE);break;case oE:n.blendFuncSeparate(n.ZERO,n.ONE_MINUS_SRC_COLOR,n.ZERO,n.ONE);break;case aE:n.blendFunc(n.ZERO,n.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",ie);break}S=null,E=null,V=null,L=null,N.set(0,0,0),I=0,w=ie,A=ln}return}et=et||Ke,$e=$e||_e,Ft=Ft||Ie,(Ke!==v||et!==C)&&(n.blendEquationSeparate(Te[Ke],Te[et]),v=Ke,C=et),(_e!==S||Ie!==E||$e!==V||Ft!==L)&&(n.blendFuncSeparate(Me[_e],Me[Ie],Me[$e],Me[Ft]),S=_e,E=Ie,V=$e,L=Ft),(bn.equals(N)===!1||$n!==I)&&(n.blendColor(bn.r,bn.g,bn.b,$n),N.copy(bn),I=$n),w=ie,A=!1}function nt(ie,Ke){ie.side===So?xt(n.CULL_FACE):Pe(n.CULL_FACE);let _e=ie.side===Xr;Ke&&(_e=!_e),ke(_e),ie.blending===Lu&&ie.transparent===!1?Q(Oa):Q(ie.blending,ie.blendEquation,ie.blendSrc,ie.blendDst,ie.blendEquationAlpha,ie.blendSrcAlpha,ie.blendDstAlpha,ie.blendColor,ie.blendAlpha,ie.premultipliedAlpha),o.setFunc(ie.depthFunc),o.setTest(ie.depthTest),o.setMask(ie.depthWrite),s.setMask(ie.colorWrite);const Ie=ie.stencilWrite;a.setTest(Ie),Ie&&(a.setMask(ie.stencilWriteMask),a.setFunc(ie.stencilFunc,ie.stencilRef,ie.stencilFuncMask),a.setOp(ie.stencilFail,ie.stencilZFail,ie.stencilZPass)),Mt(ie.polygonOffset,ie.polygonOffsetFactor,ie.polygonOffsetUnits),ie.alphaToCoverage===!0?Pe(n.SAMPLE_ALPHA_TO_COVERAGE):xt(n.SAMPLE_ALPHA_TO_COVERAGE)}function ke(ie){M!==ie&&(ie?n.frontFace(n.CW):n.frontFace(n.CCW),M=ie)}function Ze(ie){ie!==AF?(Pe(n.CULL_FACE),ie!==D&&(ie===rE?n.cullFace(n.BACK):ie===MF?n.cullFace(n.FRONT):n.cullFace(n.FRONT_AND_BACK))):xt(n.CULL_FACE),D=ie}function We(ie){ie!==z&&(de&&n.lineWidth(ie),z=ie)}function Mt(ie,Ke,_e){ie?(Pe(n.POLYGON_OFFSET_FILL),(j!==Ke||te!==_e)&&(n.polygonOffset(Ke,_e),j=Ke,te=_e)):xt(n.POLYGON_OFFSET_FILL)}function Ye(ie){ie?Pe(n.SCISSOR_TEST):xt(n.SCISSOR_TEST)}function $(ie){ie===void 0&&(ie=n.TEXTURE0+he-1),X!==ie&&(n.activeTexture(ie),X=ie)}function G(ie,Ke,_e){_e===void 0&&(X===null?_e=n.TEXTURE0+he-1:_e=X);let Ie=Y[_e];Ie===void 0&&(Ie={type:void 0,texture:void 0},Y[_e]=Ie),(Ie.type!==ie||Ie.texture!==Ke)&&(X!==_e&&(n.activeTexture(_e),X=_e),n.bindTexture(ie,Ke||Oe[ie]),Ie.type=ie,Ie.texture=Ke)}function ue(){const ie=Y[X];ie!==void 0&&ie.type!==void 0&&(n.bindTexture(ie.type,null),ie.type=void 0,ie.texture=void 0)}function be(){try{n.compressedTexImage2D.apply(n,arguments)}catch(ie){console.error("THREE.WebGLState:",ie)}}function Re(){try{n.compressedTexImage3D.apply(n,arguments)}catch(ie){console.error("THREE.WebGLState:",ie)}}function xe(){try{n.texSubImage2D.apply(n,arguments)}catch(ie){console.error("THREE.WebGLState:",ie)}}function Ve(){try{n.texSubImage3D.apply(n,arguments)}catch(ie){console.error("THREE.WebGLState:",ie)}}function Ge(){try{n.compressedTexSubImage2D.apply(n,arguments)}catch(ie){console.error("THREE.WebGLState:",ie)}}function st(){try{n.compressedTexSubImage3D.apply(n,arguments)}catch(ie){console.error("THREE.WebGLState:",ie)}}function $t(){try{n.texStorage2D.apply(n,arguments)}catch(ie){console.error("THREE.WebGLState:",ie)}}function je(){try{n.texStorage3D.apply(n,arguments)}catch(ie){console.error("THREE.WebGLState:",ie)}}function Je(){try{n.texImage2D.apply(n,arguments)}catch(ie){console.error("THREE.WebGLState:",ie)}}function Nt(){try{n.texImage3D.apply(n,arguments)}catch(ie){console.error("THREE.WebGLState:",ie)}}function Ot(ie){Ce.equals(ie)===!1&&(n.scissor(ie.x,ie.y,ie.z,ie.w),Ce.copy(ie))}function ht(ie){ce.equals(ie)===!1&&(n.viewport(ie.x,ie.y,ie.z,ie.w),ce.copy(ie))}function an(ie,Ke){let _e=c.get(Ke);_e===void 0&&(_e=new WeakMap,c.set(Ke,_e));let Ie=_e.get(ie);Ie===void 0&&(Ie=n.getUniformBlockIndex(Ke,ie.name),_e.set(ie,Ie))}function Ht(ie,Ke){const Ie=c.get(Ke).get(ie);l.get(Ke)!==Ie&&(n.uniformBlockBinding(Ke,Ie,ie.__bindingPointIndex),l.set(Ke,Ie))}function hn(){n.disable(n.BLEND),n.disable(n.CULL_FACE),n.disable(n.DEPTH_TEST),n.disable(n.POLYGON_OFFSET_FILL),n.disable(n.SCISSOR_TEST),n.disable(n.STENCIL_TEST),n.disable(n.SAMPLE_ALPHA_TO_COVERAGE),n.blendEquation(n.FUNC_ADD),n.blendFunc(n.ONE,n.ZERO),n.blendFuncSeparate(n.ONE,n.ZERO,n.ONE,n.ZERO),n.blendColor(0,0,0,0),n.colorMask(!0,!0,!0,!0),n.clearColor(0,0,0,0),n.depthMask(!0),n.depthFunc(n.LESS),o.setReversed(!1),n.clearDepth(1),n.stencilMask(4294967295),n.stencilFunc(n.ALWAYS,0,4294967295),n.stencilOp(n.KEEP,n.KEEP,n.KEEP),n.clearStencil(0),n.cullFace(n.BACK),n.frontFace(n.CCW),n.polygonOffset(0,0),n.activeTexture(n.TEXTURE0),n.bindFramebuffer(n.FRAMEBUFFER,null),n.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),n.bindFramebuffer(n.READ_FRAMEBUFFER,null),n.useProgram(null),n.lineWidth(1),n.scissor(0,0,n.canvas.width,n.canvas.height),n.viewport(0,0,n.canvas.width,n.canvas.height),u={},X=null,Y={},f={},m=new WeakMap,g=[],x=null,b=!1,w=null,v=null,S=null,E=null,C=null,V=null,L=null,N=new pt(0,0,0),I=0,A=!1,M=null,D=null,z=null,j=null,te=null,Ce.set(0,0,n.canvas.width,n.canvas.height),ce.set(0,0,n.canvas.width,n.canvas.height),s.reset(),o.reset(),a.reset()}return{buffers:{color:s,depth:o,stencil:a},enable:Pe,disable:xt,bindFramebuffer:Dt,drawBuffers:lt,useProgram:ze,setBlending:Q,setMaterial:nt,setFlipSided:ke,setCullFace:Ze,setLineWidth:We,setPolygonOffset:Mt,setScissorTest:Ye,activeTexture:$,bindTexture:G,unbindTexture:ue,compressedTexImage2D:be,compressedTexImage3D:Re,texImage2D:Je,texImage3D:Nt,updateUBOMapping:an,uniformBlockBinding:Ht,texStorage2D:$t,texStorage3D:je,texSubImage2D:xe,texSubImage3D:Ve,compressedTexSubImage2D:Ge,compressedTexSubImage3D:st,scissor:Ot,viewport:ht,reset:hn}}function GK(n,e){const t=n.image&&n.image.width?n.image.width/n.image.height:1;return t>e?(n.repeat.x=1,n.repeat.y=t/e,n.offset.x=0,n.offset.y=(1-n.repeat.y)/2):(n.repeat.x=e/t,n.repeat.y=1,n.offset.x=(1-n.repeat.x)/2,n.offset.y=0),n}function WK(n,e){const t=n.image&&n.image.width?n.image.width/n.image.height:1;return t>e?(n.repeat.x=e/t,n.repeat.y=1,n.offset.x=(1-n.repeat.x)/2,n.offset.y=0):(n.repeat.x=1,n.repeat.y=t/e,n.offset.x=0,n.offset.y=(1-n.repeat.y)/2),n}function qK(n){return n.repeat.x=1,n.repeat.y=1,n.offset.x=0,n.offset.y=0,n}function fE(n,e,t,i){const r=$K(i);switch(t){case SA:return n*e;case EA:return n*e;case CA:return n*e*2;case uw:return n*e/r.components*r.byteLength;case Fg:return n*e/r.components*r.byteLength;case AA:return n*e*2/r.components*r.byteLength;case hw:return n*e*2/r.components*r.byteLength;case TA:return n*e*3/r.components*r.byteLength;case Pr:return n*e*4/r.components*r.byteLength;case dw:return n*e*4/r.components*r.byteLength;case dm:case fm:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*8;case pm:case mm:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*16;case Dx:case Ox:return Math.max(n,16)*Math.max(e,8)/4;case Lx:case kx:return Math.max(n,8)*Math.max(e,8)/2;case Ux:case Fx:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*8;case jx:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*16;case Vx:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*16;case Bx:return Math.floor((n+4)/5)*Math.floor((e+3)/4)*16;case zx:return Math.floor((n+4)/5)*Math.floor((e+4)/5)*16;case Hx:return Math.floor((n+5)/6)*Math.floor((e+4)/5)*16;case Gx:return Math.floor((n+5)/6)*Math.floor((e+5)/6)*16;case Wx:return Math.floor((n+7)/8)*Math.floor((e+4)/5)*16;case qx:return Math.floor((n+7)/8)*Math.floor((e+5)/6)*16;case $x:return Math.floor((n+7)/8)*Math.floor((e+7)/8)*16;case Xx:return Math.floor((n+9)/10)*Math.floor((e+4)/5)*16;case Yx:return Math.floor((n+9)/10)*Math.floor((e+5)/6)*16;case Kx:return Math.floor((n+9)/10)*Math.floor((e+7)/8)*16;case Jx:return Math.floor((n+9)/10)*Math.floor((e+9)/10)*16;case Qx:return Math.floor((n+11)/12)*Math.floor((e+9)/10)*16;case Zx:return Math.floor((n+11)/12)*Math.floor((e+11)/12)*16;case gm:case e_:case t_:return Math.ceil(n/4)*Math.ceil(e/4)*16;case MA:case n_:return Math.ceil(n/4)*Math.ceil(e/4)*8;case i_:case r_:return Math.ceil(n/4)*Math.ceil(e/4)*16}throw new Error(`Unable to determine texture byte length for ${t} format.`)}function $K(n){switch(n){case Mo:case _A:return{byteLength:1,components:1};case sf:case wA:case Cf:return{byteLength:2,components:1};case lw:case cw:return{byteLength:2,components:4};case Ka:case aw:case ds:return{byteLength:4,components:1};case bA:return{byteLength:4,components:3}}throw new Error(`Unknown texture type ${n}.`)}const XK={contain:GK,cover:WK,fill:qK,getByteLength:fE};function YK(n,e,t,i,r,s,o){const a=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,l=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),c=new De,u=new WeakMap;let f;const m=new WeakMap;let g=!1;try{g=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function x($,G){return g?new OffscreenCanvas($,G):rg("canvas")}function b($,G,ue){let be=1;const Re=Ye($);if((Re.width>ue||Re.height>ue)&&(be=ue/Math.max(Re.width,Re.height)),be<1)if(typeof HTMLImageElement<"u"&&$ instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&$ instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&$ instanceof ImageBitmap||typeof VideoFrame<"u"&&$ instanceof VideoFrame){const xe=Math.floor(be*Re.width),Ve=Math.floor(be*Re.height);f===void 0&&(f=x(xe,Ve));const Ge=G?x(xe,Ve):f;return Ge.width=xe,Ge.height=Ve,Ge.getContext("2d").drawImage($,0,0,xe,Ve),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+Re.width+"x"+Re.height+") to ("+xe+"x"+Ve+")."),Ge}else return"data"in $&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+Re.width+"x"+Re.height+")."),$;return $}function w($){return $.generateMipmaps}function v($){n.generateMipmap($)}function S($){return $.isWebGLCubeRenderTarget?n.TEXTURE_CUBE_MAP:$.isWebGL3DRenderTarget?n.TEXTURE_3D:$.isWebGLArrayRenderTarget||$.isCompressedArrayTexture?n.TEXTURE_2D_ARRAY:n.TEXTURE_2D}function E($,G,ue,be,Re=!1){if($!==null){if(n[$]!==void 0)return n[$];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+$+"'")}let xe=G;if(G===n.RED&&(ue===n.FLOAT&&(xe=n.R32F),ue===n.HALF_FLOAT&&(xe=n.R16F),ue===n.UNSIGNED_BYTE&&(xe=n.R8)),G===n.RED_INTEGER&&(ue===n.UNSIGNED_BYTE&&(xe=n.R8UI),ue===n.UNSIGNED_SHORT&&(xe=n.R16UI),ue===n.UNSIGNED_INT&&(xe=n.R32UI),ue===n.BYTE&&(xe=n.R8I),ue===n.SHORT&&(xe=n.R16I),ue===n.INT&&(xe=n.R32I)),G===n.RG&&(ue===n.FLOAT&&(xe=n.RG32F),ue===n.HALF_FLOAT&&(xe=n.RG16F),ue===n.UNSIGNED_BYTE&&(xe=n.RG8)),G===n.RG_INTEGER&&(ue===n.UNSIGNED_BYTE&&(xe=n.RG8UI),ue===n.UNSIGNED_SHORT&&(xe=n.RG16UI),ue===n.UNSIGNED_INT&&(xe=n.RG32UI),ue===n.BYTE&&(xe=n.RG8I),ue===n.SHORT&&(xe=n.RG16I),ue===n.INT&&(xe=n.RG32I)),G===n.RGB_INTEGER&&(ue===n.UNSIGNED_BYTE&&(xe=n.RGB8UI),ue===n.UNSIGNED_SHORT&&(xe=n.RGB16UI),ue===n.UNSIGNED_INT&&(xe=n.RGB32UI),ue===n.BYTE&&(xe=n.RGB8I),ue===n.SHORT&&(xe=n.RGB16I),ue===n.INT&&(xe=n.RGB32I)),G===n.RGBA_INTEGER&&(ue===n.UNSIGNED_BYTE&&(xe=n.RGBA8UI),ue===n.UNSIGNED_SHORT&&(xe=n.RGBA16UI),ue===n.UNSIGNED_INT&&(xe=n.RGBA32UI),ue===n.BYTE&&(xe=n.RGBA8I),ue===n.SHORT&&(xe=n.RGBA16I),ue===n.INT&&(xe=n.RGBA32I)),G===n.RGB&&ue===n.UNSIGNED_INT_5_9_9_9_REV&&(xe=n.RGB9_E5),G===n.RGBA){const Ve=Re?jg:_n.getTransfer(be);ue===n.FLOAT&&(xe=n.RGBA32F),ue===n.HALF_FLOAT&&(xe=n.RGBA16F),ue===n.UNSIGNED_BYTE&&(xe=Ve===zn?n.SRGB8_ALPHA8:n.RGBA8),ue===n.UNSIGNED_SHORT_4_4_4_4&&(xe=n.RGBA4),ue===n.UNSIGNED_SHORT_5_5_5_1&&(xe=n.RGB5_A1)}return(xe===n.R16F||xe===n.R32F||xe===n.RG16F||xe===n.RG32F||xe===n.RGBA16F||xe===n.RGBA32F)&&e.get("EXT_color_buffer_float"),xe}function C($,G){let ue;return $?G===null||G===Ka||G===Ku?ue=n.DEPTH24_STENCIL8:G===ds?ue=n.DEPTH32F_STENCIL8:G===sf&&(ue=n.DEPTH24_STENCIL8,console.warn("DepthTexture: 16 bit depth attachment is not supported with stencil. Using 24-bit attachment.")):G===null||G===Ka||G===Ku?ue=n.DEPTH_COMPONENT24:G===ds?ue=n.DEPTH_COMPONENT32F:G===sf&&(ue=n.DEPTH_COMPONENT16),ue}function V($,G){return w($)===!0||$.isFramebufferTexture&&$.minFilter!==ur&&$.minFilter!==Wi?Math.log2(Math.max(G.width,G.height))+1:$.mipmaps!==void 0&&$.mipmaps.length>0?$.mipmaps.length:$.isCompressedTexture&&Array.isArray($.image)?G.mipmaps.length:1}function L($){const G=$.target;G.removeEventListener("dispose",L),I(G),G.isVideoTexture&&u.delete(G)}function N($){const G=$.target;G.removeEventListener("dispose",N),M(G)}function I($){const G=i.get($);if(G.__webglInit===void 0)return;const ue=$.source,be=m.get(ue);if(be){const Re=be[G.__cacheKey];Re.usedTimes--,Re.usedTimes===0&&A($),Object.keys(be).length===0&&m.delete(ue)}i.remove($)}function A($){const G=i.get($);n.deleteTexture(G.__webglTexture);const ue=$.source,be=m.get(ue);delete be[G.__cacheKey],o.memory.textures--}function M($){const G=i.get($);if($.depthTexture&&($.depthTexture.dispose(),i.remove($.depthTexture)),$.isWebGLCubeRenderTarget)for(let be=0;be<6;be++){if(Array.isArray(G.__webglFramebuffer[be]))for(let Re=0;Re<G.__webglFramebuffer[be].length;Re++)n.deleteFramebuffer(G.__webglFramebuffer[be][Re]);else n.deleteFramebuffer(G.__webglFramebuffer[be]);G.__webglDepthbuffer&&n.deleteRenderbuffer(G.__webglDepthbuffer[be])}else{if(Array.isArray(G.__webglFramebuffer))for(let be=0;be<G.__webglFramebuffer.length;be++)n.deleteFramebuffer(G.__webglFramebuffer[be]);else n.deleteFramebuffer(G.__webglFramebuffer);if(G.__webglDepthbuffer&&n.deleteRenderbuffer(G.__webglDepthbuffer),G.__webglMultisampledFramebuffer&&n.deleteFramebuffer(G.__webglMultisampledFramebuffer),G.__webglColorRenderbuffer)for(let be=0;be<G.__webglColorRenderbuffer.length;be++)G.__webglColorRenderbuffer[be]&&n.deleteRenderbuffer(G.__webglColorRenderbuffer[be]);G.__webglDepthRenderbuffer&&n.deleteRenderbuffer(G.__webglDepthRenderbuffer)}const ue=$.textures;for(let be=0,Re=ue.length;be<Re;be++){const xe=i.get(ue[be]);xe.__webglTexture&&(n.deleteTexture(xe.__webglTexture),o.memory.textures--),i.remove(ue[be])}i.remove($)}let D=0;function z(){D=0}function j(){const $=D;return $>=r.maxTextures&&console.warn("THREE.WebGLTextures: Trying to use "+$+" texture units while this GPU supports only "+r.maxTextures),D+=1,$}function te($){const G=[];return G.push($.wrapS),G.push($.wrapT),G.push($.wrapR||0),G.push($.magFilter),G.push($.minFilter),G.push($.anisotropy),G.push($.internalFormat),G.push($.format),G.push($.type),G.push($.generateMipmaps),G.push($.premultiplyAlpha),G.push($.flipY),G.push($.unpackAlignment),G.push($.colorSpace),G.join()}function he($,G){const ue=i.get($);if($.isVideoTexture&&We($),$.isRenderTargetTexture===!1&&$.version>0&&ue.__version!==$.version){const be=$.image;if(be===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(be.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{ce(ue,$,G);return}}t.bindTexture(n.TEXTURE_2D,ue.__webglTexture,n.TEXTURE0+G)}function de($,G){const ue=i.get($);if($.version>0&&ue.__version!==$.version){ce(ue,$,G);return}t.bindTexture(n.TEXTURE_2D_ARRAY,ue.__webglTexture,n.TEXTURE0+G)}function U($,G){const ue=i.get($);if($.version>0&&ue.__version!==$.version){ce(ue,$,G);return}t.bindTexture(n.TEXTURE_3D,ue.__webglTexture,n.TEXTURE0+G)}function F($,G){const ue=i.get($);if($.version>0&&ue.__version!==$.version){Ee(ue,$,G);return}t.bindTexture(n.TEXTURE_CUBE_MAP,ue.__webglTexture,n.TEXTURE0+G)}const X={[Qm]:n.REPEAT,[io]:n.CLAMP_TO_EDGE,[Zm]:n.MIRRORED_REPEAT},Y={[ur]:n.NEAREST,[xA]:n.NEAREST_MIPMAP_NEAREST,[Ed]:n.NEAREST_MIPMAP_LINEAR,[Wi]:n.LINEAR,[hm]:n.LINEAR_MIPMAP_NEAREST,[Wo]:n.LINEAR_MIPMAP_LINEAR},ne={[cj]:n.NEVER,[mj]:n.ALWAYS,[uj]:n.LESS,[PA]:n.LEQUAL,[hj]:n.EQUAL,[pj]:n.GEQUAL,[dj]:n.GREATER,[fj]:n.NOTEQUAL};function fe($,G){if(G.type===ds&&e.has("OES_texture_float_linear")===!1&&(G.magFilter===Wi||G.magFilter===hm||G.magFilter===Ed||G.magFilter===Wo||G.minFilter===Wi||G.minFilter===hm||G.minFilter===Ed||G.minFilter===Wo)&&console.warn("THREE.WebGLRenderer: Unable to use linear filtering with floating point textures. OES_texture_float_linear not supported on this device."),n.texParameteri($,n.TEXTURE_WRAP_S,X[G.wrapS]),n.texParameteri($,n.TEXTURE_WRAP_T,X[G.wrapT]),($===n.TEXTURE_3D||$===n.TEXTURE_2D_ARRAY)&&n.texParameteri($,n.TEXTURE_WRAP_R,X[G.wrapR]),n.texParameteri($,n.TEXTURE_MAG_FILTER,Y[G.magFilter]),n.texParameteri($,n.TEXTURE_MIN_FILTER,Y[G.minFilter]),G.compareFunction&&(n.texParameteri($,n.TEXTURE_COMPARE_MODE,n.COMPARE_REF_TO_TEXTURE),n.texParameteri($,n.TEXTURE_COMPARE_FUNC,ne[G.compareFunction])),e.has("EXT_texture_filter_anisotropic")===!0){if(G.magFilter===ur||G.minFilter!==Ed&&G.minFilter!==Wo||G.type===ds&&e.has("OES_texture_float_linear")===!1)return;if(G.anisotropy>1||i.get(G).__currentAnisotropy){const ue=e.get("EXT_texture_filter_anisotropic");n.texParameterf($,ue.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(G.anisotropy,r.getMaxAnisotropy())),i.get(G).__currentAnisotropy=G.anisotropy}}}function Ce($,G){let ue=!1;$.__webglInit===void 0&&($.__webglInit=!0,G.addEventListener("dispose",L));const be=G.source;let Re=m.get(be);Re===void 0&&(Re={},m.set(be,Re));const xe=te(G);if(xe!==$.__cacheKey){Re[xe]===void 0&&(Re[xe]={texture:n.createTexture(),usedTimes:0},o.memory.textures++,ue=!0),Re[xe].usedTimes++;const Ve=Re[$.__cacheKey];Ve!==void 0&&(Re[$.__cacheKey].usedTimes--,Ve.usedTimes===0&&A(G)),$.__cacheKey=xe,$.__webglTexture=Re[xe].texture}return ue}function ce($,G,ue){let be=n.TEXTURE_2D;(G.isDataArrayTexture||G.isCompressedArrayTexture)&&(be=n.TEXTURE_2D_ARRAY),G.isData3DTexture&&(be=n.TEXTURE_3D);const Re=Ce($,G),xe=G.source;t.bindTexture(be,$.__webglTexture,n.TEXTURE0+ue);const Ve=i.get(xe);if(xe.version!==Ve.__version||Re===!0){t.activeTexture(n.TEXTURE0+ue);const Ge=_n.getPrimaries(_n.workingColorSpace),st=G.colorSpace===Ea?null:_n.getPrimaries(G.colorSpace),$t=G.colorSpace===Ea||Ge===st?n.NONE:n.BROWSER_DEFAULT_WEBGL;n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,G.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,G.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,G.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,$t);let je=b(G.image,!1,r.maxTextureSize);je=Mt(G,je);const Je=s.convert(G.format,G.colorSpace),Nt=s.convert(G.type);let Ot=E(G.internalFormat,Je,Nt,G.colorSpace,G.isVideoTexture);fe(be,G);let ht;const an=G.mipmaps,Ht=G.isVideoTexture!==!0,hn=Ve.__version===void 0||Re===!0,ie=xe.dataReady,Ke=V(G,je);if(G.isDepthTexture)Ot=C(G.format===Ju,G.type),hn&&(Ht?t.texStorage2D(n.TEXTURE_2D,1,Ot,je.width,je.height):t.texImage2D(n.TEXTURE_2D,0,Ot,je.width,je.height,0,Je,Nt,null));else if(G.isDataTexture)if(an.length>0){Ht&&hn&&t.texStorage2D(n.TEXTURE_2D,Ke,Ot,an[0].width,an[0].height);for(let _e=0,Ie=an.length;_e<Ie;_e++)ht=an[_e],Ht?ie&&t.texSubImage2D(n.TEXTURE_2D,_e,0,0,ht.width,ht.height,Je,Nt,ht.data):t.texImage2D(n.TEXTURE_2D,_e,Ot,ht.width,ht.height,0,Je,Nt,ht.data);G.generateMipmaps=!1}else Ht?(hn&&t.texStorage2D(n.TEXTURE_2D,Ke,Ot,je.width,je.height),ie&&t.texSubImage2D(n.TEXTURE_2D,0,0,0,je.width,je.height,Je,Nt,je.data)):t.texImage2D(n.TEXTURE_2D,0,Ot,je.width,je.height,0,Je,Nt,je.data);else if(G.isCompressedTexture)if(G.isCompressedArrayTexture){Ht&&hn&&t.texStorage3D(n.TEXTURE_2D_ARRAY,Ke,Ot,an[0].width,an[0].height,je.depth);for(let _e=0,Ie=an.length;_e<Ie;_e++)if(ht=an[_e],G.format!==Pr)if(Je!==null)if(Ht){if(ie)if(G.layerUpdates.size>0){const et=fE(ht.width,ht.height,G.format,G.type);for(const $e of G.layerUpdates){const Ft=ht.data.subarray($e*et/ht.data.BYTES_PER_ELEMENT,($e+1)*et/ht.data.BYTES_PER_ELEMENT);t.compressedTexSubImage3D(n.TEXTURE_2D_ARRAY,_e,0,0,$e,ht.width,ht.height,1,Je,Ft)}G.clearLayerUpdates()}else t.compressedTexSubImage3D(n.TEXTURE_2D_ARRAY,_e,0,0,0,ht.width,ht.height,je.depth,Je,ht.data)}else t.compressedTexImage3D(n.TEXTURE_2D_ARRAY,_e,Ot,ht.width,ht.height,je.depth,0,ht.data,0,0);else console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()");else Ht?ie&&t.texSubImage3D(n.TEXTURE_2D_ARRAY,_e,0,0,0,ht.width,ht.height,je.depth,Je,Nt,ht.data):t.texImage3D(n.TEXTURE_2D_ARRAY,_e,Ot,ht.width,ht.height,je.depth,0,Je,Nt,ht.data)}else{Ht&&hn&&t.texStorage2D(n.TEXTURE_2D,Ke,Ot,an[0].width,an[0].height);for(let _e=0,Ie=an.length;_e<Ie;_e++)ht=an[_e],G.format!==Pr?Je!==null?Ht?ie&&t.compressedTexSubImage2D(n.TEXTURE_2D,_e,0,0,ht.width,ht.height,Je,ht.data):t.compressedTexImage2D(n.TEXTURE_2D,_e,Ot,ht.width,ht.height,0,ht.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):Ht?ie&&t.texSubImage2D(n.TEXTURE_2D,_e,0,0,ht.width,ht.height,Je,Nt,ht.data):t.texImage2D(n.TEXTURE_2D,_e,Ot,ht.width,ht.height,0,Je,Nt,ht.data)}else if(G.isDataArrayTexture)if(Ht){if(hn&&t.texStorage3D(n.TEXTURE_2D_ARRAY,Ke,Ot,je.width,je.height,je.depth),ie)if(G.layerUpdates.size>0){const _e=fE(je.width,je.height,G.format,G.type);for(const Ie of G.layerUpdates){const et=je.data.subarray(Ie*_e/je.data.BYTES_PER_ELEMENT,(Ie+1)*_e/je.data.BYTES_PER_ELEMENT);t.texSubImage3D(n.TEXTURE_2D_ARRAY,0,0,0,Ie,je.width,je.height,1,Je,Nt,et)}G.clearLayerUpdates()}else t.texSubImage3D(n.TEXTURE_2D_ARRAY,0,0,0,0,je.width,je.height,je.depth,Je,Nt,je.data)}else t.texImage3D(n.TEXTURE_2D_ARRAY,0,Ot,je.width,je.height,je.depth,0,Je,Nt,je.data);else if(G.isData3DTexture)Ht?(hn&&t.texStorage3D(n.TEXTURE_3D,Ke,Ot,je.width,je.height,je.depth),ie&&t.texSubImage3D(n.TEXTURE_3D,0,0,0,0,je.width,je.height,je.depth,Je,Nt,je.data)):t.texImage3D(n.TEXTURE_3D,0,Ot,je.width,je.height,je.depth,0,Je,Nt,je.data);else if(G.isFramebufferTexture){if(hn)if(Ht)t.texStorage2D(n.TEXTURE_2D,Ke,Ot,je.width,je.height);else{let _e=je.width,Ie=je.height;for(let et=0;et<Ke;et++)t.texImage2D(n.TEXTURE_2D,et,Ot,_e,Ie,0,Je,Nt,null),_e>>=1,Ie>>=1}}else if(an.length>0){if(Ht&&hn){const _e=Ye(an[0]);t.texStorage2D(n.TEXTURE_2D,Ke,Ot,_e.width,_e.height)}for(let _e=0,Ie=an.length;_e<Ie;_e++)ht=an[_e],Ht?ie&&t.texSubImage2D(n.TEXTURE_2D,_e,0,0,Je,Nt,ht):t.texImage2D(n.TEXTURE_2D,_e,Ot,Je,Nt,ht);G.generateMipmaps=!1}else if(Ht){if(hn){const _e=Ye(je);t.texStorage2D(n.TEXTURE_2D,Ke,Ot,_e.width,_e.height)}ie&&t.texSubImage2D(n.TEXTURE_2D,0,0,0,Je,Nt,je)}else t.texImage2D(n.TEXTURE_2D,0,Ot,Je,Nt,je);w(G)&&v(be),Ve.__version=xe.version,G.onUpdate&&G.onUpdate(G)}$.__version=G.version}function Ee($,G,ue){if(G.image.length!==6)return;const be=Ce($,G),Re=G.source;t.bindTexture(n.TEXTURE_CUBE_MAP,$.__webglTexture,n.TEXTURE0+ue);const xe=i.get(Re);if(Re.version!==xe.__version||be===!0){t.activeTexture(n.TEXTURE0+ue);const Ve=_n.getPrimaries(_n.workingColorSpace),Ge=G.colorSpace===Ea?null:_n.getPrimaries(G.colorSpace),st=G.colorSpace===Ea||Ve===Ge?n.NONE:n.BROWSER_DEFAULT_WEBGL;n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,G.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,G.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,G.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,st);const $t=G.isCompressedTexture||G.image[0].isCompressedTexture,je=G.image[0]&&G.image[0].isDataTexture,Je=[];for(let Ie=0;Ie<6;Ie++)!$t&&!je?Je[Ie]=b(G.image[Ie],!0,r.maxCubemapSize):Je[Ie]=je?G.image[Ie].image:G.image[Ie],Je[Ie]=Mt(G,Je[Ie]);const Nt=Je[0],Ot=s.convert(G.format,G.colorSpace),ht=s.convert(G.type),an=E(G.internalFormat,Ot,ht,G.colorSpace),Ht=G.isVideoTexture!==!0,hn=xe.__version===void 0||be===!0,ie=Re.dataReady;let Ke=V(G,Nt);fe(n.TEXTURE_CUBE_MAP,G);let _e;if($t){Ht&&hn&&t.texStorage2D(n.TEXTURE_CUBE_MAP,Ke,an,Nt.width,Nt.height);for(let Ie=0;Ie<6;Ie++){_e=Je[Ie].mipmaps;for(let et=0;et<_e.length;et++){const $e=_e[et];G.format!==Pr?Ot!==null?Ht?ie&&t.compressedTexSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Ie,et,0,0,$e.width,$e.height,Ot,$e.data):t.compressedTexImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Ie,et,an,$e.width,$e.height,0,$e.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):Ht?ie&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Ie,et,0,0,$e.width,$e.height,Ot,ht,$e.data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Ie,et,an,$e.width,$e.height,0,Ot,ht,$e.data)}}}else{if(_e=G.mipmaps,Ht&&hn){_e.length>0&&Ke++;const Ie=Ye(Je[0]);t.texStorage2D(n.TEXTURE_CUBE_MAP,Ke,an,Ie.width,Ie.height)}for(let Ie=0;Ie<6;Ie++)if(je){Ht?ie&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Ie,0,0,0,Je[Ie].width,Je[Ie].height,Ot,ht,Je[Ie].data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Ie,0,an,Je[Ie].width,Je[Ie].height,0,Ot,ht,Je[Ie].data);for(let et=0;et<_e.length;et++){const Ft=_e[et].image[Ie].image;Ht?ie&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Ie,et+1,0,0,Ft.width,Ft.height,Ot,ht,Ft.data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Ie,et+1,an,Ft.width,Ft.height,0,Ot,ht,Ft.data)}}else{Ht?ie&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Ie,0,0,0,Ot,ht,Je[Ie]):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Ie,0,an,Ot,ht,Je[Ie]);for(let et=0;et<_e.length;et++){const $e=_e[et];Ht?ie&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Ie,et+1,0,0,Ot,ht,$e.image[Ie]):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Ie,et+1,an,Ot,ht,$e.image[Ie])}}}w(G)&&v(n.TEXTURE_CUBE_MAP),xe.__version=Re.version,G.onUpdate&&G.onUpdate(G)}$.__version=G.version}function Oe($,G,ue,be,Re,xe){const Ve=s.convert(ue.format,ue.colorSpace),Ge=s.convert(ue.type),st=E(ue.internalFormat,Ve,Ge,ue.colorSpace),$t=i.get(G),je=i.get(ue);if(je.__renderTarget=G,!$t.__hasExternalTextures){const Je=Math.max(1,G.width>>xe),Nt=Math.max(1,G.height>>xe);Re===n.TEXTURE_3D||Re===n.TEXTURE_2D_ARRAY?t.texImage3D(Re,xe,st,Je,Nt,G.depth,0,Ve,Ge,null):t.texImage2D(Re,xe,st,Je,Nt,0,Ve,Ge,null)}t.bindFramebuffer(n.FRAMEBUFFER,$),Ze(G)?a.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,be,Re,je.__webglTexture,0,ke(G)):(Re===n.TEXTURE_2D||Re>=n.TEXTURE_CUBE_MAP_POSITIVE_X&&Re<=n.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&n.framebufferTexture2D(n.FRAMEBUFFER,be,Re,je.__webglTexture,xe),t.bindFramebuffer(n.FRAMEBUFFER,null)}function Pe($,G,ue){if(n.bindRenderbuffer(n.RENDERBUFFER,$),G.depthBuffer){const be=G.depthTexture,Re=be&&be.isDepthTexture?be.type:null,xe=C(G.stencilBuffer,Re),Ve=G.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,Ge=ke(G);Ze(G)?a.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,Ge,xe,G.width,G.height):ue?n.renderbufferStorageMultisample(n.RENDERBUFFER,Ge,xe,G.width,G.height):n.renderbufferStorage(n.RENDERBUFFER,xe,G.width,G.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,Ve,n.RENDERBUFFER,$)}else{const be=G.textures;for(let Re=0;Re<be.length;Re++){const xe=be[Re],Ve=s.convert(xe.format,xe.colorSpace),Ge=s.convert(xe.type),st=E(xe.internalFormat,Ve,Ge,xe.colorSpace),$t=ke(G);ue&&Ze(G)===!1?n.renderbufferStorageMultisample(n.RENDERBUFFER,$t,st,G.width,G.height):Ze(G)?a.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,$t,st,G.width,G.height):n.renderbufferStorage(n.RENDERBUFFER,st,G.width,G.height)}}n.bindRenderbuffer(n.RENDERBUFFER,null)}function xt($,G){if(G&&G.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(t.bindFramebuffer(n.FRAMEBUFFER,$),!(G.depthTexture&&G.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");const be=i.get(G.depthTexture);be.__renderTarget=G,(!be.__webglTexture||G.depthTexture.image.width!==G.width||G.depthTexture.image.height!==G.height)&&(G.depthTexture.image.width=G.width,G.depthTexture.image.height=G.height,G.depthTexture.needsUpdate=!0),he(G.depthTexture,0);const Re=be.__webglTexture,xe=ke(G);if(G.depthTexture.format===Du)Ze(G)?a.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,Re,0,xe):n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,Re,0);else if(G.depthTexture.format===Ju)Ze(G)?a.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.TEXTURE_2D,Re,0,xe):n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.TEXTURE_2D,Re,0);else throw new Error("Unknown depthTexture format")}function Dt($){const G=i.get($),ue=$.isWebGLCubeRenderTarget===!0;if(G.__boundDepthTexture!==$.depthTexture){const be=$.depthTexture;if(G.__depthDisposeCallback&&G.__depthDisposeCallback(),be){const Re=()=>{delete G.__boundDepthTexture,delete G.__depthDisposeCallback,be.removeEventListener("dispose",Re)};be.addEventListener("dispose",Re),G.__depthDisposeCallback=Re}G.__boundDepthTexture=be}if($.depthTexture&&!G.__autoAllocateDepthBuffer){if(ue)throw new Error("target.depthTexture not supported in Cube render targets");xt(G.__webglFramebuffer,$)}else if(ue){G.__webglDepthbuffer=[];for(let be=0;be<6;be++)if(t.bindFramebuffer(n.FRAMEBUFFER,G.__webglFramebuffer[be]),G.__webglDepthbuffer[be]===void 0)G.__webglDepthbuffer[be]=n.createRenderbuffer(),Pe(G.__webglDepthbuffer[be],$,!1);else{const Re=$.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,xe=G.__webglDepthbuffer[be];n.bindRenderbuffer(n.RENDERBUFFER,xe),n.framebufferRenderbuffer(n.FRAMEBUFFER,Re,n.RENDERBUFFER,xe)}}else if(t.bindFramebuffer(n.FRAMEBUFFER,G.__webglFramebuffer),G.__webglDepthbuffer===void 0)G.__webglDepthbuffer=n.createRenderbuffer(),Pe(G.__webglDepthbuffer,$,!1);else{const be=$.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,Re=G.__webglDepthbuffer;n.bindRenderbuffer(n.RENDERBUFFER,Re),n.framebufferRenderbuffer(n.FRAMEBUFFER,be,n.RENDERBUFFER,Re)}t.bindFramebuffer(n.FRAMEBUFFER,null)}function lt($,G,ue){const be=i.get($);G!==void 0&&Oe(be.__webglFramebuffer,$,$.texture,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,0),ue!==void 0&&Dt($)}function ze($){const G=$.texture,ue=i.get($),be=i.get(G);$.addEventListener("dispose",N);const Re=$.textures,xe=$.isWebGLCubeRenderTarget===!0,Ve=Re.length>1;if(Ve||(be.__webglTexture===void 0&&(be.__webglTexture=n.createTexture()),be.__version=G.version,o.memory.textures++),xe){ue.__webglFramebuffer=[];for(let Ge=0;Ge<6;Ge++)if(G.mipmaps&&G.mipmaps.length>0){ue.__webglFramebuffer[Ge]=[];for(let st=0;st<G.mipmaps.length;st++)ue.__webglFramebuffer[Ge][st]=n.createFramebuffer()}else ue.__webglFramebuffer[Ge]=n.createFramebuffer()}else{if(G.mipmaps&&G.mipmaps.length>0){ue.__webglFramebuffer=[];for(let Ge=0;Ge<G.mipmaps.length;Ge++)ue.__webglFramebuffer[Ge]=n.createFramebuffer()}else ue.__webglFramebuffer=n.createFramebuffer();if(Ve)for(let Ge=0,st=Re.length;Ge<st;Ge++){const $t=i.get(Re[Ge]);$t.__webglTexture===void 0&&($t.__webglTexture=n.createTexture(),o.memory.textures++)}if($.samples>0&&Ze($)===!1){ue.__webglMultisampledFramebuffer=n.createFramebuffer(),ue.__webglColorRenderbuffer=[],t.bindFramebuffer(n.FRAMEBUFFER,ue.__webglMultisampledFramebuffer);for(let Ge=0;Ge<Re.length;Ge++){const st=Re[Ge];ue.__webglColorRenderbuffer[Ge]=n.createRenderbuffer(),n.bindRenderbuffer(n.RENDERBUFFER,ue.__webglColorRenderbuffer[Ge]);const $t=s.convert(st.format,st.colorSpace),je=s.convert(st.type),Je=E(st.internalFormat,$t,je,st.colorSpace,$.isXRRenderTarget===!0),Nt=ke($);n.renderbufferStorageMultisample(n.RENDERBUFFER,Nt,Je,$.width,$.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+Ge,n.RENDERBUFFER,ue.__webglColorRenderbuffer[Ge])}n.bindRenderbuffer(n.RENDERBUFFER,null),$.depthBuffer&&(ue.__webglDepthRenderbuffer=n.createRenderbuffer(),Pe(ue.__webglDepthRenderbuffer,$,!0)),t.bindFramebuffer(n.FRAMEBUFFER,null)}}if(xe){t.bindTexture(n.TEXTURE_CUBE_MAP,be.__webglTexture),fe(n.TEXTURE_CUBE_MAP,G);for(let Ge=0;Ge<6;Ge++)if(G.mipmaps&&G.mipmaps.length>0)for(let st=0;st<G.mipmaps.length;st++)Oe(ue.__webglFramebuffer[Ge][st],$,G,n.COLOR_ATTACHMENT0,n.TEXTURE_CUBE_MAP_POSITIVE_X+Ge,st);else Oe(ue.__webglFramebuffer[Ge],$,G,n.COLOR_ATTACHMENT0,n.TEXTURE_CUBE_MAP_POSITIVE_X+Ge,0);w(G)&&v(n.TEXTURE_CUBE_MAP),t.unbindTexture()}else if(Ve){for(let Ge=0,st=Re.length;Ge<st;Ge++){const $t=Re[Ge],je=i.get($t);t.bindTexture(n.TEXTURE_2D,je.__webglTexture),fe(n.TEXTURE_2D,$t),Oe(ue.__webglFramebuffer,$,$t,n.COLOR_ATTACHMENT0+Ge,n.TEXTURE_2D,0),w($t)&&v(n.TEXTURE_2D)}t.unbindTexture()}else{let Ge=n.TEXTURE_2D;if(($.isWebGL3DRenderTarget||$.isWebGLArrayRenderTarget)&&(Ge=$.isWebGL3DRenderTarget?n.TEXTURE_3D:n.TEXTURE_2D_ARRAY),t.bindTexture(Ge,be.__webglTexture),fe(Ge,G),G.mipmaps&&G.mipmaps.length>0)for(let st=0;st<G.mipmaps.length;st++)Oe(ue.__webglFramebuffer[st],$,G,n.COLOR_ATTACHMENT0,Ge,st);else Oe(ue.__webglFramebuffer,$,G,n.COLOR_ATTACHMENT0,Ge,0);w(G)&&v(Ge),t.unbindTexture()}$.depthBuffer&&Dt($)}function Te($){const G=$.textures;for(let ue=0,be=G.length;ue<be;ue++){const Re=G[ue];if(w(Re)){const xe=S($),Ve=i.get(Re).__webglTexture;t.bindTexture(xe,Ve),v(xe),t.unbindTexture()}}}const Me=[],Q=[];function nt($){if($.samples>0){if(Ze($)===!1){const G=$.textures,ue=$.width,be=$.height;let Re=n.COLOR_BUFFER_BIT;const xe=$.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,Ve=i.get($),Ge=G.length>1;if(Ge)for(let st=0;st<G.length;st++)t.bindFramebuffer(n.FRAMEBUFFER,Ve.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+st,n.RENDERBUFFER,null),t.bindFramebuffer(n.FRAMEBUFFER,Ve.__webglFramebuffer),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0+st,n.TEXTURE_2D,null,0);t.bindFramebuffer(n.READ_FRAMEBUFFER,Ve.__webglMultisampledFramebuffer),t.bindFramebuffer(n.DRAW_FRAMEBUFFER,Ve.__webglFramebuffer);for(let st=0;st<G.length;st++){if($.resolveDepthBuffer&&($.depthBuffer&&(Re|=n.DEPTH_BUFFER_BIT),$.stencilBuffer&&$.resolveStencilBuffer&&(Re|=n.STENCIL_BUFFER_BIT)),Ge){n.framebufferRenderbuffer(n.READ_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.RENDERBUFFER,Ve.__webglColorRenderbuffer[st]);const $t=i.get(G[st]).__webglTexture;n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,$t,0)}n.blitFramebuffer(0,0,ue,be,0,0,ue,be,Re,n.NEAREST),l===!0&&(Me.length=0,Q.length=0,Me.push(n.COLOR_ATTACHMENT0+st),$.depthBuffer&&$.resolveDepthBuffer===!1&&(Me.push(xe),Q.push(xe),n.invalidateFramebuffer(n.DRAW_FRAMEBUFFER,Q)),n.invalidateFramebuffer(n.READ_FRAMEBUFFER,Me))}if(t.bindFramebuffer(n.READ_FRAMEBUFFER,null),t.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),Ge)for(let st=0;st<G.length;st++){t.bindFramebuffer(n.FRAMEBUFFER,Ve.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+st,n.RENDERBUFFER,Ve.__webglColorRenderbuffer[st]);const $t=i.get(G[st]).__webglTexture;t.bindFramebuffer(n.FRAMEBUFFER,Ve.__webglFramebuffer),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0+st,n.TEXTURE_2D,$t,0)}t.bindFramebuffer(n.DRAW_FRAMEBUFFER,Ve.__webglMultisampledFramebuffer)}else if($.depthBuffer&&$.resolveDepthBuffer===!1&&l){const G=$.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT;n.invalidateFramebuffer(n.DRAW_FRAMEBUFFER,[G])}}}function ke($){return Math.min(r.maxSamples,$.samples)}function Ze($){const G=i.get($);return $.samples>0&&e.has("WEBGL_multisampled_render_to_texture")===!0&&G.__useRenderToTexture!==!1}function We($){const G=o.render.frame;u.get($)!==G&&(u.set($,G),$.update())}function Mt($,G){const ue=$.colorSpace,be=$.format,Re=$.type;return $.isCompressedTexture===!0||$.isVideoTexture===!0||ue!==ah&&ue!==Ea&&(_n.getTransfer(ue)===zn?(be!==Pr||Re!==Mo)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",ue)),G}function Ye($){return typeof HTMLImageElement<"u"&&$ instanceof HTMLImageElement?(c.width=$.naturalWidth||$.width,c.height=$.naturalHeight||$.height):typeof VideoFrame<"u"&&$ instanceof VideoFrame?(c.width=$.displayWidth,c.height=$.displayHeight):(c.width=$.width,c.height=$.height),c}this.allocateTextureUnit=j,this.resetTextureUnits=z,this.setTexture2D=he,this.setTexture2DArray=de,this.setTexture3D=U,this.setTextureCube=F,this.rebindTextures=lt,this.setupRenderTarget=ze,this.updateRenderTargetMipmap=Te,this.updateMultisampleRenderTarget=nt,this.setupDepthRenderbuffer=Dt,this.setupFrameBufferTexture=Oe,this.useMultisampledRTT=Ze}function Mj(n,e){function t(i,r=Ea){let s;const o=_n.getTransfer(r);if(i===Mo)return n.UNSIGNED_BYTE;if(i===lw)return n.UNSIGNED_SHORT_4_4_4_4;if(i===cw)return n.UNSIGNED_SHORT_5_5_5_1;if(i===bA)return n.UNSIGNED_INT_5_9_9_9_REV;if(i===_A)return n.BYTE;if(i===wA)return n.SHORT;if(i===sf)return n.UNSIGNED_SHORT;if(i===aw)return n.INT;if(i===Ka)return n.UNSIGNED_INT;if(i===ds)return n.FLOAT;if(i===Cf)return n.HALF_FLOAT;if(i===SA)return n.ALPHA;if(i===TA)return n.RGB;if(i===Pr)return n.RGBA;if(i===EA)return n.LUMINANCE;if(i===CA)return n.LUMINANCE_ALPHA;if(i===Du)return n.DEPTH_COMPONENT;if(i===Ju)return n.DEPTH_STENCIL;if(i===uw)return n.RED;if(i===Fg)return n.RED_INTEGER;if(i===AA)return n.RG;if(i===hw)return n.RG_INTEGER;if(i===dw)return n.RGBA_INTEGER;if(i===dm||i===fm||i===pm||i===mm)if(o===zn)if(s=e.get("WEBGL_compressed_texture_s3tc_srgb"),s!==null){if(i===dm)return s.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(i===fm)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(i===pm)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(i===mm)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(s=e.get("WEBGL_compressed_texture_s3tc"),s!==null){if(i===dm)return s.COMPRESSED_RGB_S3TC_DXT1_EXT;if(i===fm)return s.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(i===pm)return s.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(i===mm)return s.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(i===Lx||i===Dx||i===kx||i===Ox)if(s=e.get("WEBGL_compressed_texture_pvrtc"),s!==null){if(i===Lx)return s.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(i===Dx)return s.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(i===kx)return s.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(i===Ox)return s.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(i===Ux||i===Fx||i===jx)if(s=e.get("WEBGL_compressed_texture_etc"),s!==null){if(i===Ux||i===Fx)return o===zn?s.COMPRESSED_SRGB8_ETC2:s.COMPRESSED_RGB8_ETC2;if(i===jx)return o===zn?s.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:s.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(i===Vx||i===Bx||i===zx||i===Hx||i===Gx||i===Wx||i===qx||i===$x||i===Xx||i===Yx||i===Kx||i===Jx||i===Qx||i===Zx)if(s=e.get("WEBGL_compressed_texture_astc"),s!==null){if(i===Vx)return o===zn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:s.COMPRESSED_RGBA_ASTC_4x4_KHR;if(i===Bx)return o===zn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:s.COMPRESSED_RGBA_ASTC_5x4_KHR;if(i===zx)return o===zn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:s.COMPRESSED_RGBA_ASTC_5x5_KHR;if(i===Hx)return o===zn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:s.COMPRESSED_RGBA_ASTC_6x5_KHR;if(i===Gx)return o===zn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:s.COMPRESSED_RGBA_ASTC_6x6_KHR;if(i===Wx)return o===zn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:s.COMPRESSED_RGBA_ASTC_8x5_KHR;if(i===qx)return o===zn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:s.COMPRESSED_RGBA_ASTC_8x6_KHR;if(i===$x)return o===zn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:s.COMPRESSED_RGBA_ASTC_8x8_KHR;if(i===Xx)return o===zn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:s.COMPRESSED_RGBA_ASTC_10x5_KHR;if(i===Yx)return o===zn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:s.COMPRESSED_RGBA_ASTC_10x6_KHR;if(i===Kx)return o===zn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:s.COMPRESSED_RGBA_ASTC_10x8_KHR;if(i===Jx)return o===zn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:s.COMPRESSED_RGBA_ASTC_10x10_KHR;if(i===Qx)return o===zn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:s.COMPRESSED_RGBA_ASTC_12x10_KHR;if(i===Zx)return o===zn?s.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:s.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(i===gm||i===e_||i===t_)if(s=e.get("EXT_texture_compression_bptc"),s!==null){if(i===gm)return o===zn?s.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:s.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(i===e_)return s.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(i===t_)return s.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}else return null;if(i===MA||i===n_||i===i_||i===r_)if(s=e.get("EXT_texture_compression_rgtc"),s!==null){if(i===gm)return s.COMPRESSED_RED_RGTC1_EXT;if(i===n_)return s.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(i===i_)return s.COMPRESSED_RED_GREEN_RGTC2_EXT;if(i===r_)return s.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return i===Ku?n.UNSIGNED_INT_24_8:n[i]!==void 0?n[i]:null}return{convert:t}}class Ij extends Oi{constructor(e=[]){super(),this.isArrayCamera=!0,this.cameras=e}}class Md extends In{constructor(){super(),this.isGroup=!0,this.type="Group"}}const KK={type:"move"};class hT{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new Md,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new Md,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new K,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new K),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new Md,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new K,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new K),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const t=this._hand;if(t)for(const i of e.hand.values())this._getHandJoint(t,i)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,t,i){let r=null,s=null,o=null;const a=this._targetRay,l=this._grip,c=this._hand;if(e&&t.session.visibilityState!=="visible-blurred"){if(c&&e.hand){o=!0;for(const b of e.hand.values()){const w=t.getJointPose(b,i),v=this._getHandJoint(c,b);w!==null&&(v.matrix.fromArray(w.transform.matrix),v.matrix.decompose(v.position,v.rotation,v.scale),v.matrixWorldNeedsUpdate=!0,v.jointRadius=w.radius),v.visible=w!==null}const u=c.joints["index-finger-tip"],f=c.joints["thumb-tip"],m=u.position.distanceTo(f.position),g=.02,x=.005;c.inputState.pinching&&m>g+x?(c.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!c.inputState.pinching&&m<=g-x&&(c.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else l!==null&&e.gripSpace&&(s=t.getPose(e.gripSpace,i),s!==null&&(l.matrix.fromArray(s.transform.matrix),l.matrix.decompose(l.position,l.rotation,l.scale),l.matrixWorldNeedsUpdate=!0,s.linearVelocity?(l.hasLinearVelocity=!0,l.linearVelocity.copy(s.linearVelocity)):l.hasLinearVelocity=!1,s.angularVelocity?(l.hasAngularVelocity=!0,l.angularVelocity.copy(s.angularVelocity)):l.hasAngularVelocity=!1));a!==null&&(r=t.getPose(e.targetRaySpace,i),r===null&&s!==null&&(r=s),r!==null&&(a.matrix.fromArray(r.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale),a.matrixWorldNeedsUpdate=!0,r.linearVelocity?(a.hasLinearVelocity=!0,a.linearVelocity.copy(r.linearVelocity)):a.hasLinearVelocity=!1,r.angularVelocity?(a.hasAngularVelocity=!0,a.angularVelocity.copy(r.angularVelocity)):a.hasAngularVelocity=!1,this.dispatchEvent(KK)))}return a!==null&&(a.visible=r!==null),l!==null&&(l.visible=s!==null),c!==null&&(c.visible=o!==null),this}_getHandJoint(e,t){if(e.joints[t.jointName]===void 0){const i=new Md;i.matrixAutoUpdate=!1,i.visible=!1,e.joints[t.jointName]=i,e.add(i)}return e.joints[t.jointName]}}const JK=`
void main() {

	gl_Position = vec4( position, 1.0 );

}`,QK=`
uniform sampler2DArray depthColor;
uniform float depthWidth;
uniform float depthHeight;

void main() {

	vec2 coord = vec2( gl_FragCoord.x / depthWidth, gl_FragCoord.y / depthHeight );

	if ( coord.x >= 1.0 ) {

		gl_FragDepth = texture( depthColor, vec3( coord.x - 1.0, coord.y, 1 ) ).r;

	} else {

		gl_FragDepth = texture( depthColor, vec3( coord.x, coord.y, 0 ) ).r;

	}

}`;class ZK{constructor(){this.texture=null,this.mesh=null,this.depthNear=0,this.depthFar=0}init(e,t,i){if(this.texture===null){const r=new hi,s=e.properties.get(r);s.__webglTexture=t.texture,(t.depthNear!=i.depthNear||t.depthFar!=i.depthFar)&&(this.depthNear=t.depthNear,this.depthFar=t.depthFar),this.texture=r}}getMesh(e){if(this.texture!==null&&this.mesh===null){const t=e.cameras[0].viewport,i=new Po({vertexShader:JK,fragmentShader:QK,uniforms:{depthColor:{value:this.texture},depthWidth:{value:t.z},depthHeight:{value:t.w}}});this.mesh=new ji(new Mf(20,20),i)}return this.mesh}reset(){this.texture=null,this.mesh=null}getDepthTexture(){return this.texture}}class eJ extends aa{constructor(e,t){super();const i=this;let r=null,s=1,o=null,a="local-floor",l=1,c=null,u=null,f=null,m=null,g=null,x=null;const b=new ZK,w=t.getContextAttributes();let v=null,S=null;const E=[],C=[],V=new De;let L=null;const N=new Oi;N.viewport=new An;const I=new Oi;I.viewport=new An;const A=[N,I],M=new Ij;let D=null,z=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(ce){let Ee=E[ce];return Ee===void 0&&(Ee=new hT,E[ce]=Ee),Ee.getTargetRaySpace()},this.getControllerGrip=function(ce){let Ee=E[ce];return Ee===void 0&&(Ee=new hT,E[ce]=Ee),Ee.getGripSpace()},this.getHand=function(ce){let Ee=E[ce];return Ee===void 0&&(Ee=new hT,E[ce]=Ee),Ee.getHandSpace()};function j(ce){const Ee=C.indexOf(ce.inputSource);if(Ee===-1)return;const Oe=E[Ee];Oe!==void 0&&(Oe.update(ce.inputSource,ce.frame,c||o),Oe.dispatchEvent({type:ce.type,data:ce.inputSource}))}function te(){r.removeEventListener("select",j),r.removeEventListener("selectstart",j),r.removeEventListener("selectend",j),r.removeEventListener("squeeze",j),r.removeEventListener("squeezestart",j),r.removeEventListener("squeezeend",j),r.removeEventListener("end",te),r.removeEventListener("inputsourceschange",he);for(let ce=0;ce<E.length;ce++){const Ee=C[ce];Ee!==null&&(C[ce]=null,E[ce].disconnect(Ee))}D=null,z=null,b.reset(),e.setRenderTarget(v),g=null,m=null,f=null,r=null,S=null,Ce.stop(),i.isPresenting=!1,e.setPixelRatio(L),e.setSize(V.width,V.height,!1),i.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(ce){s=ce,i.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(ce){a=ce,i.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return c||o},this.setReferenceSpace=function(ce){c=ce},this.getBaseLayer=function(){return m!==null?m:g},this.getBinding=function(){return f},this.getFrame=function(){return x},this.getSession=function(){return r},this.setSession=async function(ce){if(r=ce,r!==null){if(v=e.getRenderTarget(),r.addEventListener("select",j),r.addEventListener("selectstart",j),r.addEventListener("selectend",j),r.addEventListener("squeeze",j),r.addEventListener("squeezestart",j),r.addEventListener("squeezeend",j),r.addEventListener("end",te),r.addEventListener("inputsourceschange",he),w.xrCompatible!==!0&&await t.makeXRCompatible(),L=e.getPixelRatio(),e.getSize(V),r.renderState.layers===void 0){const Ee={antialias:w.antialias,alpha:!0,depth:w.depth,stencil:w.stencil,framebufferScaleFactor:s};g=new XRWebGLLayer(r,t,Ee),r.updateRenderState({baseLayer:g}),e.setPixelRatio(1),e.setSize(g.framebufferWidth,g.framebufferHeight,!1),S=new Io(g.framebufferWidth,g.framebufferHeight,{format:Pr,type:Mo,colorSpace:e.outputColorSpace,stencilBuffer:w.stencil})}else{let Ee=null,Oe=null,Pe=null;w.depth&&(Pe=w.stencil?t.DEPTH24_STENCIL8:t.DEPTH_COMPONENT24,Ee=w.stencil?Ju:Du,Oe=w.stencil?Ku:Ka);const xt={colorFormat:t.RGBA8,depthFormat:Pe,scaleFactor:s};f=new XRWebGLBinding(r,t),m=f.createProjectionLayer(xt),r.updateRenderState({layers:[m]}),e.setPixelRatio(1),e.setSize(m.textureWidth,m.textureHeight,!1),S=new Io(m.textureWidth,m.textureHeight,{format:Pr,type:Mo,depthTexture:new FA(m.textureWidth,m.textureHeight,Oe,void 0,void 0,void 0,void 0,void 0,void 0,Ee),stencilBuffer:w.stencil,colorSpace:e.outputColorSpace,samples:w.antialias?4:0,resolveDepthBuffer:m.ignoreDepthValues===!1})}S.isXRRenderTarget=!0,this.setFoveation(l),c=null,o=await r.requestReferenceSpace(a),Ce.setContext(r),Ce.start(),i.isPresenting=!0,i.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(r!==null)return r.environmentBlendMode},this.getDepthTexture=function(){return b.getDepthTexture()};function he(ce){for(let Ee=0;Ee<ce.removed.length;Ee++){const Oe=ce.removed[Ee],Pe=C.indexOf(Oe);Pe>=0&&(C[Pe]=null,E[Pe].disconnect(Oe))}for(let Ee=0;Ee<ce.added.length;Ee++){const Oe=ce.added[Ee];let Pe=C.indexOf(Oe);if(Pe===-1){for(let Dt=0;Dt<E.length;Dt++)if(Dt>=C.length){C.push(Oe),Pe=Dt;break}else if(C[Dt]===null){C[Dt]=Oe,Pe=Dt;break}if(Pe===-1)break}const xt=E[Pe];xt&&xt.connect(Oe)}}const de=new K,U=new K;function F(ce,Ee,Oe){de.setFromMatrixPosition(Ee.matrixWorld),U.setFromMatrixPosition(Oe.matrixWorld);const Pe=de.distanceTo(U),xt=Ee.projectionMatrix.elements,Dt=Oe.projectionMatrix.elements,lt=xt[14]/(xt[10]-1),ze=xt[14]/(xt[10]+1),Te=(xt[9]+1)/xt[5],Me=(xt[9]-1)/xt[5],Q=(xt[8]-1)/xt[0],nt=(Dt[8]+1)/Dt[0],ke=lt*Q,Ze=lt*nt,We=Pe/(-Q+nt),Mt=We*-Q;if(Ee.matrixWorld.decompose(ce.position,ce.quaternion,ce.scale),ce.translateX(Mt),ce.translateZ(We),ce.matrixWorld.compose(ce.position,ce.quaternion,ce.scale),ce.matrixWorldInverse.copy(ce.matrixWorld).invert(),xt[10]===-1)ce.projectionMatrix.copy(Ee.projectionMatrix),ce.projectionMatrixInverse.copy(Ee.projectionMatrixInverse);else{const Ye=lt+We,$=ze+We,G=ke-Mt,ue=Ze+(Pe-Mt),be=Te*ze/$*Ye,Re=Me*ze/$*Ye;ce.projectionMatrix.makePerspective(G,ue,be,Re,Ye,$),ce.projectionMatrixInverse.copy(ce.projectionMatrix).invert()}}function X(ce,Ee){Ee===null?ce.matrixWorld.copy(ce.matrix):ce.matrixWorld.multiplyMatrices(Ee.matrixWorld,ce.matrix),ce.matrixWorldInverse.copy(ce.matrixWorld).invert()}this.updateCamera=function(ce){if(r===null)return;let Ee=ce.near,Oe=ce.far;b.texture!==null&&(b.depthNear>0&&(Ee=b.depthNear),b.depthFar>0&&(Oe=b.depthFar)),M.near=I.near=N.near=Ee,M.far=I.far=N.far=Oe,(D!==M.near||z!==M.far)&&(r.updateRenderState({depthNear:M.near,depthFar:M.far}),D=M.near,z=M.far),N.layers.mask=ce.layers.mask|2,I.layers.mask=ce.layers.mask|4,M.layers.mask=N.layers.mask|I.layers.mask;const Pe=ce.parent,xt=M.cameras;X(M,Pe);for(let Dt=0;Dt<xt.length;Dt++)X(xt[Dt],Pe);xt.length===2?F(M,N,I):M.projectionMatrix.copy(N.projectionMatrix),Y(ce,M,Pe)};function Y(ce,Ee,Oe){Oe===null?ce.matrix.copy(Ee.matrixWorld):(ce.matrix.copy(Oe.matrixWorld),ce.matrix.invert(),ce.matrix.multiply(Ee.matrixWorld)),ce.matrix.decompose(ce.position,ce.quaternion,ce.scale),ce.updateMatrixWorld(!0),ce.projectionMatrix.copy(Ee.projectionMatrix),ce.projectionMatrixInverse.copy(Ee.projectionMatrixInverse),ce.isPerspectiveCamera&&(ce.fov=of*2*Math.atan(1/ce.projectionMatrix.elements[5]),ce.zoom=1)}this.getCamera=function(){return M},this.getFoveation=function(){if(!(m===null&&g===null))return l},this.setFoveation=function(ce){l=ce,m!==null&&(m.fixedFoveation=ce),g!==null&&g.fixedFoveation!==void 0&&(g.fixedFoveation=ce)},this.hasDepthSensing=function(){return b.texture!==null},this.getDepthSensingMesh=function(){return b.getMesh(M)};let ne=null;function fe(ce,Ee){if(u=Ee.getViewerPose(c||o),x=Ee,u!==null){const Oe=u.views;g!==null&&(e.setRenderTargetFramebuffer(S,g.framebuffer),e.setRenderTarget(S));let Pe=!1;Oe.length!==M.cameras.length&&(M.cameras.length=0,Pe=!0);for(let Dt=0;Dt<Oe.length;Dt++){const lt=Oe[Dt];let ze=null;if(g!==null)ze=g.getViewport(lt);else{const Me=f.getViewSubImage(m,lt);ze=Me.viewport,Dt===0&&(e.setRenderTargetTextures(S,Me.colorTexture,m.ignoreDepthValues?void 0:Me.depthStencilTexture),e.setRenderTarget(S))}let Te=A[Dt];Te===void 0&&(Te=new Oi,Te.layers.enable(Dt),Te.viewport=new An,A[Dt]=Te),Te.matrix.fromArray(lt.transform.matrix),Te.matrix.decompose(Te.position,Te.quaternion,Te.scale),Te.projectionMatrix.fromArray(lt.projectionMatrix),Te.projectionMatrixInverse.copy(Te.projectionMatrix).invert(),Te.viewport.set(ze.x,ze.y,ze.width,ze.height),Dt===0&&(M.matrix.copy(Te.matrix),M.matrix.decompose(M.position,M.quaternion,M.scale)),Pe===!0&&M.cameras.push(Te)}const xt=r.enabledFeatures;if(xt&&xt.includes("depth-sensing")){const Dt=f.getDepthInformation(Oe[0]);Dt&&Dt.isValid&&Dt.texture&&b.init(e,Dt,r.renderState)}}for(let Oe=0;Oe<E.length;Oe++){const Pe=C[Oe],xt=E[Oe];Pe!==null&&xt!==void 0&&xt.update(Pe,Ee,c||o)}ne&&ne(ce,Ee),Ee.detectedPlanes&&i.dispatchEvent({type:"planesdetected",data:Ee}),x=null}const Ce=new Sj;Ce.setAnimationLoop(fe),this.setAnimationLoop=function(ce){ne=ce},this.dispose=function(){}}}const tu=new Fs,tJ=new Bt;function nJ(n,e){function t(w,v){w.matrixAutoUpdate===!0&&w.updateMatrix(),v.value.copy(w.matrix)}function i(w,v){v.color.getRGB(w.fogColor.value,wj(n)),v.isFog?(w.fogNear.value=v.near,w.fogFar.value=v.far):v.isFogExp2&&(w.fogDensity.value=v.density)}function r(w,v,S,E,C){v.isMeshBasicMaterial||v.isMeshLambertMaterial?s(w,v):v.isMeshToonMaterial?(s(w,v),f(w,v)):v.isMeshPhongMaterial?(s(w,v),u(w,v)):v.isMeshStandardMaterial?(s(w,v),m(w,v),v.isMeshPhysicalMaterial&&g(w,v,C)):v.isMeshMatcapMaterial?(s(w,v),x(w,v)):v.isMeshDepthMaterial?s(w,v):v.isMeshDistanceMaterial?(s(w,v),b(w,v)):v.isMeshNormalMaterial?s(w,v):v.isLineBasicMaterial?(o(w,v),v.isLineDashedMaterial&&a(w,v)):v.isPointsMaterial?l(w,v,S,E):v.isSpriteMaterial?c(w,v):v.isShadowMaterial?(w.color.value.copy(v.color),w.opacity.value=v.opacity):v.isShaderMaterial&&(v.uniformsNeedUpdate=!1)}function s(w,v){w.opacity.value=v.opacity,v.color&&w.diffuse.value.copy(v.color),v.emissive&&w.emissive.value.copy(v.emissive).multiplyScalar(v.emissiveIntensity),v.map&&(w.map.value=v.map,t(v.map,w.mapTransform)),v.alphaMap&&(w.alphaMap.value=v.alphaMap,t(v.alphaMap,w.alphaMapTransform)),v.bumpMap&&(w.bumpMap.value=v.bumpMap,t(v.bumpMap,w.bumpMapTransform),w.bumpScale.value=v.bumpScale,v.side===Xr&&(w.bumpScale.value*=-1)),v.normalMap&&(w.normalMap.value=v.normalMap,t(v.normalMap,w.normalMapTransform),w.normalScale.value.copy(v.normalScale),v.side===Xr&&w.normalScale.value.negate()),v.displacementMap&&(w.displacementMap.value=v.displacementMap,t(v.displacementMap,w.displacementMapTransform),w.displacementScale.value=v.displacementScale,w.displacementBias.value=v.displacementBias),v.emissiveMap&&(w.emissiveMap.value=v.emissiveMap,t(v.emissiveMap,w.emissiveMapTransform)),v.specularMap&&(w.specularMap.value=v.specularMap,t(v.specularMap,w.specularMapTransform)),v.alphaTest>0&&(w.alphaTest.value=v.alphaTest);const S=e.get(v),E=S.envMap,C=S.envMapRotation;E&&(w.envMap.value=E,tu.copy(C),tu.x*=-1,tu.y*=-1,tu.z*=-1,E.isCubeTexture&&E.isRenderTargetTexture===!1&&(tu.y*=-1,tu.z*=-1),w.envMapRotation.value.setFromMatrix4(tJ.makeRotationFromEuler(tu)),w.flipEnvMap.value=E.isCubeTexture&&E.isRenderTargetTexture===!1?-1:1,w.reflectivity.value=v.reflectivity,w.ior.value=v.ior,w.refractionRatio.value=v.refractionRatio),v.lightMap&&(w.lightMap.value=v.lightMap,w.lightMapIntensity.value=v.lightMapIntensity,t(v.lightMap,w.lightMapTransform)),v.aoMap&&(w.aoMap.value=v.aoMap,w.aoMapIntensity.value=v.aoMapIntensity,t(v.aoMap,w.aoMapTransform))}function o(w,v){w.diffuse.value.copy(v.color),w.opacity.value=v.opacity,v.map&&(w.map.value=v.map,t(v.map,w.mapTransform))}function a(w,v){w.dashSize.value=v.dashSize,w.totalSize.value=v.dashSize+v.gapSize,w.scale.value=v.scale}function l(w,v,S,E){w.diffuse.value.copy(v.color),w.opacity.value=v.opacity,w.size.value=v.size*S,w.scale.value=E*.5,v.map&&(w.map.value=v.map,t(v.map,w.uvTransform)),v.alphaMap&&(w.alphaMap.value=v.alphaMap,t(v.alphaMap,w.alphaMapTransform)),v.alphaTest>0&&(w.alphaTest.value=v.alphaTest)}function c(w,v){w.diffuse.value.copy(v.color),w.opacity.value=v.opacity,w.rotation.value=v.rotation,v.map&&(w.map.value=v.map,t(v.map,w.mapTransform)),v.alphaMap&&(w.alphaMap.value=v.alphaMap,t(v.alphaMap,w.alphaMapTransform)),v.alphaTest>0&&(w.alphaTest.value=v.alphaTest)}function u(w,v){w.specular.value.copy(v.specular),w.shininess.value=Math.max(v.shininess,1e-4)}function f(w,v){v.gradientMap&&(w.gradientMap.value=v.gradientMap)}function m(w,v){w.metalness.value=v.metalness,v.metalnessMap&&(w.metalnessMap.value=v.metalnessMap,t(v.metalnessMap,w.metalnessMapTransform)),w.roughness.value=v.roughness,v.roughnessMap&&(w.roughnessMap.value=v.roughnessMap,t(v.roughnessMap,w.roughnessMapTransform)),v.envMap&&(w.envMapIntensity.value=v.envMapIntensity)}function g(w,v,S){w.ior.value=v.ior,v.sheen>0&&(w.sheenColor.value.copy(v.sheenColor).multiplyScalar(v.sheen),w.sheenRoughness.value=v.sheenRoughness,v.sheenColorMap&&(w.sheenColorMap.value=v.sheenColorMap,t(v.sheenColorMap,w.sheenColorMapTransform)),v.sheenRoughnessMap&&(w.sheenRoughnessMap.value=v.sheenRoughnessMap,t(v.sheenRoughnessMap,w.sheenRoughnessMapTransform))),v.clearcoat>0&&(w.clearcoat.value=v.clearcoat,w.clearcoatRoughness.value=v.clearcoatRoughness,v.clearcoatMap&&(w.clearcoatMap.value=v.clearcoatMap,t(v.clearcoatMap,w.clearcoatMapTransform)),v.clearcoatRoughnessMap&&(w.clearcoatRoughnessMap.value=v.clearcoatRoughnessMap,t(v.clearcoatRoughnessMap,w.clearcoatRoughnessMapTransform)),v.clearcoatNormalMap&&(w.clearcoatNormalMap.value=v.clearcoatNormalMap,t(v.clearcoatNormalMap,w.clearcoatNormalMapTransform),w.clearcoatNormalScale.value.copy(v.clearcoatNormalScale),v.side===Xr&&w.clearcoatNormalScale.value.negate())),v.dispersion>0&&(w.dispersion.value=v.dispersion),v.iridescence>0&&(w.iridescence.value=v.iridescence,w.iridescenceIOR.value=v.iridescenceIOR,w.iridescenceThicknessMinimum.value=v.iridescenceThicknessRange[0],w.iridescenceThicknessMaximum.value=v.iridescenceThicknessRange[1],v.iridescenceMap&&(w.iridescenceMap.value=v.iridescenceMap,t(v.iridescenceMap,w.iridescenceMapTransform)),v.iridescenceThicknessMap&&(w.iridescenceThicknessMap.value=v.iridescenceThicknessMap,t(v.iridescenceThicknessMap,w.iridescenceThicknessMapTransform))),v.transmission>0&&(w.transmission.value=v.transmission,w.transmissionSamplerMap.value=S.texture,w.transmissionSamplerSize.value.set(S.width,S.height),v.transmissionMap&&(w.transmissionMap.value=v.transmissionMap,t(v.transmissionMap,w.transmissionMapTransform)),w.thickness.value=v.thickness,v.thicknessMap&&(w.thicknessMap.value=v.thicknessMap,t(v.thicknessMap,w.thicknessMapTransform)),w.attenuationDistance.value=v.attenuationDistance,w.attenuationColor.value.copy(v.attenuationColor)),v.anisotropy>0&&(w.anisotropyVector.value.set(v.anisotropy*Math.cos(v.anisotropyRotation),v.anisotropy*Math.sin(v.anisotropyRotation)),v.anisotropyMap&&(w.anisotropyMap.value=v.anisotropyMap,t(v.anisotropyMap,w.anisotropyMapTransform))),w.specularIntensity.value=v.specularIntensity,w.specularColor.value.copy(v.specularColor),v.specularColorMap&&(w.specularColorMap.value=v.specularColorMap,t(v.specularColorMap,w.specularColorMapTransform)),v.specularIntensityMap&&(w.specularIntensityMap.value=v.specularIntensityMap,t(v.specularIntensityMap,w.specularIntensityMapTransform))}function x(w,v){v.matcap&&(w.matcap.value=v.matcap)}function b(w,v){const S=e.get(v).light;w.referencePosition.value.setFromMatrixPosition(S.matrixWorld),w.nearDistance.value=S.shadow.camera.near,w.farDistance.value=S.shadow.camera.far}return{refreshFogUniforms:i,refreshMaterialUniforms:r}}function iJ(n,e,t,i){let r={},s={},o=[];const a=n.getParameter(n.MAX_UNIFORM_BUFFER_BINDINGS);function l(S,E){const C=E.program;i.uniformBlockBinding(S,C)}function c(S,E){let C=r[S.id];C===void 0&&(x(S),C=u(S),r[S.id]=C,S.addEventListener("dispose",w));const V=E.program;i.updateUBOMapping(S,V);const L=e.render.frame;s[S.id]!==L&&(m(S),s[S.id]=L)}function u(S){const E=f();S.__bindingPointIndex=E;const C=n.createBuffer(),V=S.__size,L=S.usage;return n.bindBuffer(n.UNIFORM_BUFFER,C),n.bufferData(n.UNIFORM_BUFFER,V,L),n.bindBuffer(n.UNIFORM_BUFFER,null),n.bindBufferBase(n.UNIFORM_BUFFER,E,C),C}function f(){for(let S=0;S<a;S++)if(o.indexOf(S)===-1)return o.push(S),S;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function m(S){const E=r[S.id],C=S.uniforms,V=S.__cache;n.bindBuffer(n.UNIFORM_BUFFER,E);for(let L=0,N=C.length;L<N;L++){const I=Array.isArray(C[L])?C[L]:[C[L]];for(let A=0,M=I.length;A<M;A++){const D=I[A];if(g(D,L,A,V)===!0){const z=D.__offset,j=Array.isArray(D.value)?D.value:[D.value];let te=0;for(let he=0;he<j.length;he++){const de=j[he],U=b(de);typeof de=="number"||typeof de=="boolean"?(D.__data[0]=de,n.bufferSubData(n.UNIFORM_BUFFER,z+te,D.__data)):de.isMatrix3?(D.__data[0]=de.elements[0],D.__data[1]=de.elements[1],D.__data[2]=de.elements[2],D.__data[3]=0,D.__data[4]=de.elements[3],D.__data[5]=de.elements[4],D.__data[6]=de.elements[5],D.__data[7]=0,D.__data[8]=de.elements[6],D.__data[9]=de.elements[7],D.__data[10]=de.elements[8],D.__data[11]=0):(de.toArray(D.__data,te),te+=U.storage/Float32Array.BYTES_PER_ELEMENT)}n.bufferSubData(n.UNIFORM_BUFFER,z,D.__data)}}}n.bindBuffer(n.UNIFORM_BUFFER,null)}function g(S,E,C,V){const L=S.value,N=E+"_"+C;if(V[N]===void 0)return typeof L=="number"||typeof L=="boolean"?V[N]=L:V[N]=L.clone(),!0;{const I=V[N];if(typeof L=="number"||typeof L=="boolean"){if(I!==L)return V[N]=L,!0}else if(I.equals(L)===!1)return I.copy(L),!0}return!1}function x(S){const E=S.uniforms;let C=0;const V=16;for(let N=0,I=E.length;N<I;N++){const A=Array.isArray(E[N])?E[N]:[E[N]];for(let M=0,D=A.length;M<D;M++){const z=A[M],j=Array.isArray(z.value)?z.value:[z.value];for(let te=0,he=j.length;te<he;te++){const de=j[te],U=b(de),F=C%V,X=F%U.boundary,Y=F+X;C+=X,Y!==0&&V-Y<U.storage&&(C+=V-Y),z.__data=new Float32Array(U.storage/Float32Array.BYTES_PER_ELEMENT),z.__offset=C,C+=U.storage}}}const L=C%V;return L>0&&(C+=V-L),S.__size=C,S.__cache={},this}function b(S){const E={boundary:0,storage:0};return typeof S=="number"||typeof S=="boolean"?(E.boundary=4,E.storage=4):S.isVector2?(E.boundary=8,E.storage=8):S.isVector3||S.isColor?(E.boundary=16,E.storage=12):S.isVector4?(E.boundary=16,E.storage=16):S.isMatrix3?(E.boundary=48,E.storage=48):S.isMatrix4?(E.boundary=64,E.storage=64):S.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",S),E}function w(S){const E=S.target;E.removeEventListener("dispose",w);const C=o.indexOf(E.__bindingPointIndex);o.splice(C,1),n.deleteBuffer(r[E.id]),delete r[E.id],delete s[E.id]}function v(){for(const S in r)n.deleteBuffer(r[S]);o=[],r={},s={}}return{bind:l,update:c,dispose:v}}class Pj{constructor(e={}){const{canvas:t=yj(),context:i=null,depth:r=!0,stencil:s=!1,alpha:o=!1,antialias:a=!1,premultipliedAlpha:l=!0,preserveDrawingBuffer:c=!1,powerPreference:u="default",failIfMajorPerformanceCaveat:f=!1,reverseDepthBuffer:m=!1}=e;this.isWebGLRenderer=!0;let g;if(i!==null){if(typeof WebGLRenderingContext<"u"&&i instanceof WebGLRenderingContext)throw new Error("THREE.WebGLRenderer: WebGL 1 is not supported since r163.");g=i.getContextAttributes().alpha}else g=o;const x=new Uint32Array(4),b=new Int32Array(4);let w=null,v=null;const S=[],E=[];this.domElement=t,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this._outputColorSpace=os,this.toneMapping=Jo,this.toneMappingExposure=1;const C=this;let V=!1,L=0,N=0,I=null,A=-1,M=null;const D=new An,z=new An;let j=null;const te=new pt(0);let he=0,de=t.width,U=t.height,F=1,X=null,Y=null;const ne=new An(0,0,de,U),fe=new An(0,0,de,U);let Ce=!1;const ce=new zg;let Ee=!1,Oe=!1;const Pe=new Bt,xt=new Bt,Dt=new K,lt=new An,ze={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};let Te=!1;function Me(){return I===null?F:1}let Q=i;function nt(H,ee){return t.getContext(H,ee)}try{const H={alpha:!0,depth:r,stencil:s,antialias:a,premultipliedAlpha:l,preserveDrawingBuffer:c,powerPreference:u,failIfMajorPerformanceCaveat:f};if("setAttribute"in t&&t.setAttribute("data-engine",`three.js r${Og}`),t.addEventListener("webglcontextlost",Ie,!1),t.addEventListener("webglcontextrestored",et,!1),t.addEventListener("webglcontextcreationerror",$e,!1),Q===null){const ee="webgl2";if(Q=nt(ee,H),Q===null)throw nt(ee)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}}catch(H){throw console.error("THREE.WebGLRenderer: "+H.message),H}let ke,Ze,We,Mt,Ye,$,G,ue,be,Re,xe,Ve,Ge,st,$t,je,Je,Nt,Ot,ht,an,Ht,hn,ie;function Ke(){ke=new cY(Q),ke.init(),Ht=new Mj(Q,ke),Ze=new iY(Q,ke,e,Ht),We=new HK(Q,ke),Ze.reverseDepthBuffer&&m&&We.buffers.depth.setReversed(!0),Mt=new dY(Q),Ye=new PK,$=new YK(Q,ke,We,Ye,Ze,Ht,Mt),G=new sY(C),ue=new lY(C),be=new xq(Q),hn=new tY(Q,be),Re=new uY(Q,be,Mt,hn),xe=new pY(Q,Re,be,Mt),Ot=new fY(Q,Ze,$),je=new rY(Ye),Ve=new IK(C,G,ue,ke,Ze,hn,je),Ge=new nJ(C,Ye),st=new NK,$t=new FK(ke),Nt=new eY(C,G,ue,We,xe,g,l),Je=new BK(C,xe,Ze),ie=new iJ(Q,Mt,Ze,We),ht=new nY(Q,ke,Mt),an=new hY(Q,ke,Mt),Mt.programs=Ve.programs,C.capabilities=Ze,C.extensions=ke,C.properties=Ye,C.renderLists=st,C.shadowMap=Je,C.state=We,C.info=Mt}Ke();const _e=new eJ(C,Q);this.xr=_e,this.getContext=function(){return Q},this.getContextAttributes=function(){return Q.getContextAttributes()},this.forceContextLoss=function(){const H=ke.get("WEBGL_lose_context");H&&H.loseContext()},this.forceContextRestore=function(){const H=ke.get("WEBGL_lose_context");H&&H.restoreContext()},this.getPixelRatio=function(){return F},this.setPixelRatio=function(H){H!==void 0&&(F=H,this.setSize(de,U,!1))},this.getSize=function(H){return H.set(de,U)},this.setSize=function(H,ee,pe=!0){if(_e.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}de=H,U=ee,t.width=Math.floor(H*F),t.height=Math.floor(ee*F),pe===!0&&(t.style.width=H+"px",t.style.height=ee+"px"),this.setViewport(0,0,H,ee)},this.getDrawingBufferSize=function(H){return H.set(de*F,U*F).floor()},this.setDrawingBufferSize=function(H,ee,pe){de=H,U=ee,F=pe,t.width=Math.floor(H*pe),t.height=Math.floor(ee*pe),this.setViewport(0,0,H,ee)},this.getCurrentViewport=function(H){return H.copy(D)},this.getViewport=function(H){return H.copy(ne)},this.setViewport=function(H,ee,pe,me){H.isVector4?ne.set(H.x,H.y,H.z,H.w):ne.set(H,ee,pe,me),We.viewport(D.copy(ne).multiplyScalar(F).round())},this.getScissor=function(H){return H.copy(fe)},this.setScissor=function(H,ee,pe,me){H.isVector4?fe.set(H.x,H.y,H.z,H.w):fe.set(H,ee,pe,me),We.scissor(z.copy(fe).multiplyScalar(F).round())},this.getScissorTest=function(){return Ce},this.setScissorTest=function(H){We.setScissorTest(Ce=H)},this.setOpaqueSort=function(H){X=H},this.setTransparentSort=function(H){Y=H},this.getClearColor=function(H){return H.copy(Nt.getClearColor())},this.setClearColor=function(){Nt.setClearColor.apply(Nt,arguments)},this.getClearAlpha=function(){return Nt.getClearAlpha()},this.setClearAlpha=function(){Nt.setClearAlpha.apply(Nt,arguments)},this.clear=function(H=!0,ee=!0,pe=!0){let me=0;if(H){let re=!1;if(I!==null){const Ue=I.texture.format;re=Ue===dw||Ue===hw||Ue===Fg}if(re){const Ue=I.texture.type,Xe=Ue===Mo||Ue===Ka||Ue===sf||Ue===Ku||Ue===lw||Ue===cw,ct=Nt.getClearColor(),ot=Nt.getClearAlpha(),It=ct.r,Lt=ct.g,Fe=ct.b;Xe?(x[0]=It,x[1]=Lt,x[2]=Fe,x[3]=ot,Q.clearBufferuiv(Q.COLOR,0,x)):(b[0]=It,b[1]=Lt,b[2]=Fe,b[3]=ot,Q.clearBufferiv(Q.COLOR,0,b))}else me|=Q.COLOR_BUFFER_BIT}ee&&(me|=Q.DEPTH_BUFFER_BIT),pe&&(me|=Q.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),Q.clear(me)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",Ie,!1),t.removeEventListener("webglcontextrestored",et,!1),t.removeEventListener("webglcontextcreationerror",$e,!1),st.dispose(),$t.dispose(),Ye.dispose(),G.dispose(),ue.dispose(),xe.dispose(),hn.dispose(),ie.dispose(),Ve.dispose(),_e.dispose(),_e.removeEventListener("sessionstart",oe),_e.removeEventListener("sessionend",ye),Ae.stop()};function Ie(H){H.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),V=!0}function et(){console.log("THREE.WebGLRenderer: Context Restored."),V=!1;const H=Mt.autoReset,ee=Je.enabled,pe=Je.autoUpdate,me=Je.needsUpdate,re=Je.type;Ke(),Mt.autoReset=H,Je.enabled=ee,Je.autoUpdate=pe,Je.needsUpdate=me,Je.type=re}function $e(H){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",H.statusMessage)}function Ft(H){const ee=H.target;ee.removeEventListener("dispose",Ft),bn(ee)}function bn(H){$n(H),Ye.remove(H)}function $n(H){const ee=Ye.get(H).programs;ee!==void 0&&(ee.forEach(function(pe){Ve.releaseProgram(pe)}),H.isShaderMaterial&&Ve.releaseShaderCache(H))}this.renderBufferDirect=function(H,ee,pe,me,re,Ue){ee===null&&(ee=ze);const Xe=re.isMesh&&re.matrixWorld.determinant()<0,ct=tn(H,ee,pe,me,re);We.setMaterial(me,Xe);let ot=pe.index,It=1;if(me.wireframe===!0){if(ot=Re.getWireframeAttribute(pe),ot===void 0)return;It=2}const Lt=pe.drawRange,Fe=pe.attributes.position;let bt=Lt.start*It,Yt=(Lt.start+Lt.count)*It;Ue!==null&&(bt=Math.max(bt,Ue.start*It),Yt=Math.min(Yt,(Ue.start+Ue.count)*It)),ot!==null?(bt=Math.max(bt,0),Yt=Math.min(Yt,ot.count)):Fe!=null&&(bt=Math.max(bt,0),Yt=Math.min(Yt,Fe.count));const At=Yt-bt;if(At<0||At===1/0)return;hn.setup(re,me,ct,pe,ot);let _t,jt=ht;if(ot!==null&&(_t=be.get(ot),jt=an,jt.setIndex(_t)),re.isMesh)me.wireframe===!0?(We.setLineWidth(me.wireframeLinewidth*Me()),jt.setMode(Q.LINES)):jt.setMode(Q.TRIANGLES);else if(re.isLine){let Qe=me.linewidth;Qe===void 0&&(Qe=1),We.setLineWidth(Qe*Me()),re.isLineSegments?jt.setMode(Q.LINES):re.isLineLoop?jt.setMode(Q.LINE_LOOP):jt.setMode(Q.LINE_STRIP)}else re.isPoints?jt.setMode(Q.POINTS):re.isSprite&&jt.setMode(Q.TRIANGLES);if(re.isBatchedMesh)if(re._multiDrawInstances!==null)jt.renderMultiDrawInstances(re._multiDrawStarts,re._multiDrawCounts,re._multiDrawCount,re._multiDrawInstances);else if(ke.get("WEBGL_multi_draw"))jt.renderMultiDraw(re._multiDrawStarts,re._multiDrawCounts,re._multiDrawCount);else{const Qe=re._multiDrawStarts,Vn=re._multiDrawCounts,sn=re._multiDrawCount,Ci=ot?be.get(ot).bytesPerElement:1,ri=Ye.get(me).currentProgram.getUniforms();for(let vi=0;vi<sn;vi++)ri.setValue(Q,"_gl_DrawID",vi),jt.render(Qe[vi]/Ci,Vn[vi])}else if(re.isInstancedMesh)jt.renderInstances(bt,At,re.count);else if(pe.isInstancedBufferGeometry){const Qe=pe._maxInstanceCount!==void 0?pe._maxInstanceCount:1/0,Vn=Math.min(pe.instanceCount,Qe);jt.renderInstances(bt,At,Vn)}else jt.render(bt,At)};function ln(H,ee,pe){H.transparent===!0&&H.side===So&&H.forceSinglePass===!1?(H.side=Xr,H.needsUpdate=!0,tt(H,ee,pe),H.side=Xa,H.needsUpdate=!0,tt(H,ee,pe),H.side=So):tt(H,ee,pe)}this.compile=function(H,ee,pe=null){pe===null&&(pe=H),v=$t.get(pe),v.init(ee),E.push(v),pe.traverseVisible(function(re){re.isLight&&re.layers.test(ee.layers)&&(v.pushLight(re),re.castShadow&&v.pushShadow(re))}),H!==pe&&H.traverseVisible(function(re){re.isLight&&re.layers.test(ee.layers)&&(v.pushLight(re),re.castShadow&&v.pushShadow(re))}),v.setupLights();const me=new Set;return H.traverse(function(re){if(!(re.isMesh||re.isPoints||re.isLine||re.isSprite))return;const Ue=re.material;if(Ue)if(Array.isArray(Ue))for(let Xe=0;Xe<Ue.length;Xe++){const ct=Ue[Xe];ln(ct,pe,re),me.add(ct)}else ln(Ue,pe,re),me.add(Ue)}),E.pop(),v=null,me},this.compileAsync=function(H,ee,pe=null){const me=this.compile(H,ee,pe);return new Promise(re=>{function Ue(){if(me.forEach(function(Xe){Ye.get(Xe).currentProgram.isReady()&&me.delete(Xe)}),me.size===0){re(H);return}setTimeout(Ue,10)}ke.get("KHR_parallel_shader_compile")!==null?Ue():setTimeout(Ue,10)})};let Bi=null;function Z(H){Bi&&Bi(H)}function oe(){Ae.stop()}function ye(){Ae.start()}const Ae=new Sj;Ae.setAnimationLoop(Z),typeof self<"u"&&Ae.setContext(self),this.setAnimationLoop=function(H){Bi=H,_e.setAnimationLoop(H),H===null?Ae.stop():Ae.start()},_e.addEventListener("sessionstart",oe),_e.addEventListener("sessionend",ye),this.render=function(H,ee){if(ee!==void 0&&ee.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(V===!0)return;if(H.matrixWorldAutoUpdate===!0&&H.updateMatrixWorld(),ee.parent===null&&ee.matrixWorldAutoUpdate===!0&&ee.updateMatrixWorld(),_e.enabled===!0&&_e.isPresenting===!0&&(_e.cameraAutoUpdate===!0&&_e.updateCamera(ee),ee=_e.getCamera()),H.isScene===!0&&H.onBeforeRender(C,H,ee,I),v=$t.get(H,E.length),v.init(ee),E.push(v),xt.multiplyMatrices(ee.projectionMatrix,ee.matrixWorldInverse),ce.setFromProjectionMatrix(xt),Oe=this.localClippingEnabled,Ee=je.init(this.clippingPlanes,Oe),w=st.get(H,S.length),w.init(),S.push(w),_e.enabled===!0&&_e.isPresenting===!0){const Ue=C.xr.getDepthSensingMesh();Ue!==null&&rt(Ue,ee,-1/0,C.sortObjects)}rt(H,ee,0,C.sortObjects),w.finish(),C.sortObjects===!0&&w.sort(X,Y),Te=_e.enabled===!1||_e.isPresenting===!1||_e.hasDepthSensing()===!1,Te&&Nt.addToRenderList(w,H),this.info.render.frame++,Ee===!0&&je.beginShadows();const pe=v.state.shadowsArray;Je.render(pe,H,ee),Ee===!0&&je.endShadows(),this.info.autoReset===!0&&this.info.reset();const me=w.opaque,re=w.transmissive;if(v.setupLights(),ee.isArrayCamera){const Ue=ee.cameras;if(re.length>0)for(let Xe=0,ct=Ue.length;Xe<ct;Xe++){const ot=Ue[Xe];Ct(me,re,H,ot)}Te&&Nt.render(H);for(let Xe=0,ct=Ue.length;Xe<ct;Xe++){const ot=Ue[Xe];Tt(w,H,ot,ot.viewport)}}else re.length>0&&Ct(me,re,H,ee),Te&&Nt.render(H),Tt(w,H,ee);I!==null&&($.updateMultisampleRenderTarget(I),$.updateRenderTargetMipmap(I)),H.isScene===!0&&H.onAfterRender(C,H,ee),hn.resetDefaultState(),A=-1,M=null,E.pop(),E.length>0?(v=E[E.length-1],Ee===!0&&je.setGlobalState(C.clippingPlanes,v.state.camera)):v=null,S.pop(),S.length>0?w=S[S.length-1]:w=null};function rt(H,ee,pe,me){if(H.visible===!1)return;if(H.layers.test(ee.layers)){if(H.isGroup)pe=H.renderOrder;else if(H.isLOD)H.autoUpdate===!0&&H.update(ee);else if(H.isLight)v.pushLight(H),H.castShadow&&v.pushShadow(H);else if(H.isSprite){if(!H.frustumCulled||ce.intersectsSprite(H)){me&&lt.setFromMatrixPosition(H.matrixWorld).applyMatrix4(xt);const Xe=xe.update(H),ct=H.material;ct.visible&&w.push(H,Xe,ct,pe,lt.z,null)}}else if((H.isMesh||H.isLine||H.isPoints)&&(!H.frustumCulled||ce.intersectsObject(H))){const Xe=xe.update(H),ct=H.material;if(me&&(H.boundingSphere!==void 0?(H.boundingSphere===null&&H.computeBoundingSphere(),lt.copy(H.boundingSphere.center)):(Xe.boundingSphere===null&&Xe.computeBoundingSphere(),lt.copy(Xe.boundingSphere.center)),lt.applyMatrix4(H.matrixWorld).applyMatrix4(xt)),Array.isArray(ct)){const ot=Xe.groups;for(let It=0,Lt=ot.length;It<Lt;It++){const Fe=ot[It],bt=ct[Fe.materialIndex];bt&&bt.visible&&w.push(H,Xe,bt,pe,lt.z,Fe)}}else ct.visible&&w.push(H,Xe,ct,pe,lt.z,null)}}const Ue=H.children;for(let Xe=0,ct=Ue.length;Xe<ct;Xe++)rt(Ue[Xe],ee,pe,me)}function Tt(H,ee,pe,me){const re=H.opaque,Ue=H.transmissive,Xe=H.transparent;v.setupLightsView(pe),Ee===!0&&je.setGlobalState(C.clippingPlanes,pe),me&&We.viewport(D.copy(me)),re.length>0&&dt(re,ee,pe),Ue.length>0&&dt(Ue,ee,pe),Xe.length>0&&dt(Xe,ee,pe),We.buffers.depth.setTest(!0),We.buffers.depth.setMask(!0),We.buffers.color.setMask(!0),We.setPolygonOffset(!1)}function Ct(H,ee,pe,me){if((pe.isScene===!0?pe.overrideMaterial:null)!==null)return;v.state.transmissionRenderTarget[me.id]===void 0&&(v.state.transmissionRenderTarget[me.id]=new Io(1,1,{generateMipmaps:!0,type:ke.has("EXT_color_buffer_half_float")||ke.has("EXT_color_buffer_float")?Cf:Mo,minFilter:Wo,samples:4,stencilBuffer:s,resolveDepthBuffer:!1,resolveStencilBuffer:!1,colorSpace:_n.workingColorSpace}));const Ue=v.state.transmissionRenderTarget[me.id],Xe=me.viewport||D;Ue.setSize(Xe.z,Xe.w);const ct=C.getRenderTarget();C.setRenderTarget(Ue),C.getClearColor(te),he=C.getClearAlpha(),he<1&&C.setClearColor(16777215,.5),C.clear(),Te&&Nt.render(pe);const ot=C.toneMapping;C.toneMapping=Jo;const It=me.viewport;if(me.viewport!==void 0&&(me.viewport=void 0),v.setupLightsView(me),Ee===!0&&je.setGlobalState(C.clippingPlanes,me),dt(H,pe,me),$.updateMultisampleRenderTarget(Ue),$.updateRenderTargetMipmap(Ue),ke.has("WEBGL_multisampled_render_to_texture")===!1){let Lt=!1;for(let Fe=0,bt=ee.length;Fe<bt;Fe++){const Yt=ee[Fe],At=Yt.object,_t=Yt.geometry,jt=Yt.material,Qe=Yt.group;if(jt.side===So&&At.layers.test(me.layers)){const Vn=jt.side;jt.side=Xr,jt.needsUpdate=!0,mt(At,pe,me,_t,jt,Qe),jt.side=Vn,jt.needsUpdate=!0,Lt=!0}}Lt===!0&&($.updateMultisampleRenderTarget(Ue),$.updateRenderTargetMipmap(Ue))}C.setRenderTarget(ct),C.setClearColor(te,he),It!==void 0&&(me.viewport=It),C.toneMapping=ot}function dt(H,ee,pe){const me=ee.isScene===!0?ee.overrideMaterial:null;for(let re=0,Ue=H.length;re<Ue;re++){const Xe=H[re],ct=Xe.object,ot=Xe.geometry,It=me===null?Xe.material:me,Lt=Xe.group;ct.layers.test(pe.layers)&&mt(ct,ee,pe,ot,It,Lt)}}function mt(H,ee,pe,me,re,Ue){H.onBeforeRender(C,ee,pe,me,re,Ue),H.modelViewMatrix.multiplyMatrices(pe.matrixWorldInverse,H.matrixWorld),H.normalMatrix.getNormalMatrix(H.modelViewMatrix),re.onBeforeRender(C,ee,pe,me,H,Ue),re.transparent===!0&&re.side===So&&re.forceSinglePass===!1?(re.side=Xr,re.needsUpdate=!0,C.renderBufferDirect(pe,ee,me,re,H,Ue),re.side=Xa,re.needsUpdate=!0,C.renderBufferDirect(pe,ee,me,re,H,Ue),re.side=So):C.renderBufferDirect(pe,ee,me,re,H,Ue),H.onAfterRender(C,ee,pe,me,re,Ue)}function tt(H,ee,pe){ee.isScene!==!0&&(ee=ze);const me=Ye.get(H),re=v.state.lights,Ue=v.state.shadowsArray,Xe=re.state.version,ct=Ve.getParameters(H,re.state,Ue,ee,pe),ot=Ve.getProgramCacheKey(ct);let It=me.programs;me.environment=H.isMeshStandardMaterial?ee.environment:null,me.fog=ee.fog,me.envMap=(H.isMeshStandardMaterial?ue:G).get(H.envMap||me.environment),me.envMapRotation=me.environment!==null&&H.envMap===null?ee.environmentRotation:H.envMapRotation,It===void 0&&(H.addEventListener("dispose",Ft),It=new Map,me.programs=It);let Lt=It.get(ot);if(Lt!==void 0){if(me.currentProgram===Lt&&me.lightsStateVersion===Xe)return Xt(H,ct),Lt}else ct.uniforms=Ve.getUniforms(H),H.onBeforeCompile(ct,C),Lt=Ve.acquireProgram(ct,ot),It.set(ot,Lt),me.uniforms=ct.uniforms;const Fe=me.uniforms;return(!H.isShaderMaterial&&!H.isRawShaderMaterial||H.clipping===!0)&&(Fe.clippingPlanes=je.uniform),Xt(H,ct),me.needsLights=Sn(H),me.lightsStateVersion=Xe,me.needsLights&&(Fe.ambientLightColor.value=re.state.ambient,Fe.lightProbe.value=re.state.probe,Fe.directionalLights.value=re.state.directional,Fe.directionalLightShadows.value=re.state.directionalShadow,Fe.spotLights.value=re.state.spot,Fe.spotLightShadows.value=re.state.spotShadow,Fe.rectAreaLights.value=re.state.rectArea,Fe.ltc_1.value=re.state.rectAreaLTC1,Fe.ltc_2.value=re.state.rectAreaLTC2,Fe.pointLights.value=re.state.point,Fe.pointLightShadows.value=re.state.pointShadow,Fe.hemisphereLights.value=re.state.hemi,Fe.directionalShadowMap.value=re.state.directionalShadowMap,Fe.directionalShadowMatrix.value=re.state.directionalShadowMatrix,Fe.spotShadowMap.value=re.state.spotShadowMap,Fe.spotLightMatrix.value=re.state.spotLightMatrix,Fe.spotLightMap.value=re.state.spotLightMap,Fe.pointShadowMap.value=re.state.pointShadowMap,Fe.pointShadowMatrix.value=re.state.pointShadowMatrix),me.currentProgram=Lt,me.uniformsList=null,Lt}function St(H){if(H.uniformsList===null){const ee=H.currentProgram.getUniforms();H.uniformsList=D0.seqWithValue(ee.seq,H.uniforms)}return H.uniformsList}function Xt(H,ee){const pe=Ye.get(H);pe.outputColorSpace=ee.outputColorSpace,pe.batching=ee.batching,pe.batchingColor=ee.batchingColor,pe.instancing=ee.instancing,pe.instancingColor=ee.instancingColor,pe.instancingMorph=ee.instancingMorph,pe.skinning=ee.skinning,pe.morphTargets=ee.morphTargets,pe.morphNormals=ee.morphNormals,pe.morphColors=ee.morphColors,pe.morphTargetsCount=ee.morphTargetsCount,pe.numClippingPlanes=ee.numClippingPlanes,pe.numIntersection=ee.numClipIntersection,pe.vertexAlphas=ee.vertexAlphas,pe.vertexTangents=ee.vertexTangents,pe.toneMapping=ee.toneMapping}function tn(H,ee,pe,me,re){ee.isScene!==!0&&(ee=ze),$.resetTextureUnits();const Ue=ee.fog,Xe=me.isMeshStandardMaterial?ee.environment:null,ct=I===null?C.outputColorSpace:I.isXRRenderTarget===!0?I.texture.colorSpace:ah,ot=(me.isMeshStandardMaterial?ue:G).get(me.envMap||Xe),It=me.vertexColors===!0&&!!pe.attributes.color&&pe.attributes.color.itemSize===4,Lt=!!pe.attributes.tangent&&(!!me.normalMap||me.anisotropy>0),Fe=!!pe.morphAttributes.position,bt=!!pe.morphAttributes.normal,Yt=!!pe.morphAttributes.color;let At=Jo;me.toneMapped&&(I===null||I.isXRRenderTarget===!0)&&(At=C.toneMapping);const _t=pe.morphAttributes.position||pe.morphAttributes.normal||pe.morphAttributes.color,jt=_t!==void 0?_t.length:0,Qe=Ye.get(me),Vn=v.state.lights;if(Ee===!0&&(Oe===!0||H!==M)){const Bn=H===M&&me.id===A;je.setState(me,H,Bn)}let sn=!1;me.version===Qe.__version?(Qe.needsLights&&Qe.lightsStateVersion!==Vn.state.version||Qe.outputColorSpace!==ct||re.isBatchedMesh&&Qe.batching===!1||!re.isBatchedMesh&&Qe.batching===!0||re.isBatchedMesh&&Qe.batchingColor===!0&&re.colorTexture===null||re.isBatchedMesh&&Qe.batchingColor===!1&&re.colorTexture!==null||re.isInstancedMesh&&Qe.instancing===!1||!re.isInstancedMesh&&Qe.instancing===!0||re.isSkinnedMesh&&Qe.skinning===!1||!re.isSkinnedMesh&&Qe.skinning===!0||re.isInstancedMesh&&Qe.instancingColor===!0&&re.instanceColor===null||re.isInstancedMesh&&Qe.instancingColor===!1&&re.instanceColor!==null||re.isInstancedMesh&&Qe.instancingMorph===!0&&re.morphTexture===null||re.isInstancedMesh&&Qe.instancingMorph===!1&&re.morphTexture!==null||Qe.envMap!==ot||me.fog===!0&&Qe.fog!==Ue||Qe.numClippingPlanes!==void 0&&(Qe.numClippingPlanes!==je.numPlanes||Qe.numIntersection!==je.numIntersection)||Qe.vertexAlphas!==It||Qe.vertexTangents!==Lt||Qe.morphTargets!==Fe||Qe.morphNormals!==bt||Qe.morphColors!==Yt||Qe.toneMapping!==At||Qe.morphTargetsCount!==jt)&&(sn=!0):(sn=!0,Qe.__version=me.version);let Ci=Qe.currentProgram;sn===!0&&(Ci=tt(me,ee,re));let ri=!1,vi=!1,lo=!1;const kn=Ci.getUniforms(),si=Qe.uniforms;if(We.useProgram(Ci.program)&&(ri=!0,vi=!0,lo=!0),me.id!==A&&(A=me.id,vi=!0),ri||M!==H){We.buffers.depth.getReversed()?(Pe.copy(H.projectionMatrix),G7(Pe),W7(Pe),kn.setValue(Q,"projectionMatrix",Pe)):kn.setValue(Q,"projectionMatrix",H.projectionMatrix),kn.setValue(Q,"viewMatrix",H.matrixWorldInverse);const Fr=kn.map.cameraPosition;Fr!==void 0&&Fr.setValue(Q,Dt.setFromMatrixPosition(H.matrixWorld)),Ze.logarithmicDepthBuffer&&kn.setValue(Q,"logDepthBufFC",2/(Math.log(H.far+1)/Math.LN2)),(me.isMeshPhongMaterial||me.isMeshToonMaterial||me.isMeshLambertMaterial||me.isMeshBasicMaterial||me.isMeshStandardMaterial||me.isShaderMaterial)&&kn.setValue(Q,"isOrthographic",H.isOrthographicCamera===!0),M!==H&&(M=H,vi=!0,lo=!0)}if(re.isSkinnedMesh){kn.setOptional(Q,re,"bindMatrix"),kn.setOptional(Q,re,"bindMatrixInverse");const Bn=re.skeleton;Bn&&(Bn.boneTexture===null&&Bn.computeBoneTexture(),kn.setValue(Q,"boneTexture",Bn.boneTexture,$))}re.isBatchedMesh&&(kn.setOptional(Q,re,"batchingTexture"),kn.setValue(Q,"batchingTexture",re._matricesTexture,$),kn.setOptional(Q,re,"batchingIdTexture"),kn.setValue(Q,"batchingIdTexture",re._indirectTexture,$),kn.setOptional(Q,re,"batchingColorTexture"),re._colorsTexture!==null&&kn.setValue(Q,"batchingColorTexture",re._colorsTexture,$));const Yi=pe.morphAttributes;if((Yi.position!==void 0||Yi.normal!==void 0||Yi.color!==void 0)&&Ot.update(re,pe,Ci),(vi||Qe.receiveShadow!==re.receiveShadow)&&(Qe.receiveShadow=re.receiveShadow,kn.setValue(Q,"receiveShadow",re.receiveShadow)),me.isMeshGouraudMaterial&&me.envMap!==null&&(si.envMap.value=ot,si.flipEnvMap.value=ot.isCubeTexture&&ot.isRenderTargetTexture===!1?-1:1),me.isMeshStandardMaterial&&me.envMap===null&&ee.environment!==null&&(si.envMapIntensity.value=ee.environmentIntensity),vi&&(kn.setValue(Q,"toneMappingExposure",C.toneMappingExposure),Qe.needsLights&&Dn(si,lo),Ue&&me.fog===!0&&Ge.refreshFogUniforms(si,Ue),Ge.refreshMaterialUniforms(si,me,F,U,v.state.transmissionRenderTarget[H.id]),D0.upload(Q,St(Qe),si,$)),me.isShaderMaterial&&me.uniformsNeedUpdate===!0&&(D0.upload(Q,St(Qe),si,$),me.uniformsNeedUpdate=!1),me.isSpriteMaterial&&kn.setValue(Q,"center",re.center),kn.setValue(Q,"modelViewMatrix",re.modelViewMatrix),kn.setValue(Q,"normalMatrix",re.normalMatrix),kn.setValue(Q,"modelMatrix",re.matrixWorld),me.isShaderMaterial||me.isRawShaderMaterial){const Bn=me.uniformsGroups;for(let Fr=0,vs=Bn.length;Fr<vs;Fr++){const On=Bn[Fr];ie.update(On,Ci),ie.bind(On,Ci)}}return Ci}function Dn(H,ee){H.ambientLightColor.needsUpdate=ee,H.lightProbe.needsUpdate=ee,H.directionalLights.needsUpdate=ee,H.directionalLightShadows.needsUpdate=ee,H.pointLights.needsUpdate=ee,H.pointLightShadows.needsUpdate=ee,H.spotLights.needsUpdate=ee,H.spotLightShadows.needsUpdate=ee,H.rectAreaLights.needsUpdate=ee,H.hemisphereLights.needsUpdate=ee}function Sn(H){return H.isMeshLambertMaterial||H.isMeshToonMaterial||H.isMeshPhongMaterial||H.isMeshStandardMaterial||H.isShadowMaterial||H.isShaderMaterial&&H.lights===!0}this.getActiveCubeFace=function(){return L},this.getActiveMipmapLevel=function(){return N},this.getRenderTarget=function(){return I},this.setRenderTargetTextures=function(H,ee,pe){Ye.get(H.texture).__webglTexture=ee,Ye.get(H.depthTexture).__webglTexture=pe;const me=Ye.get(H);me.__hasExternalTextures=!0,me.__autoAllocateDepthBuffer=pe===void 0,me.__autoAllocateDepthBuffer||ke.has("WEBGL_multisampled_render_to_texture")===!0&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),me.__useRenderToTexture=!1)},this.setRenderTargetFramebuffer=function(H,ee){const pe=Ye.get(H);pe.__webglFramebuffer=ee,pe.__useDefaultFramebuffer=ee===void 0},this.setRenderTarget=function(H,ee=0,pe=0){I=H,L=ee,N=pe;let me=!0,re=null,Ue=!1,Xe=!1;if(H){const ot=Ye.get(H);if(ot.__useDefaultFramebuffer!==void 0)We.bindFramebuffer(Q.FRAMEBUFFER,null),me=!1;else if(ot.__webglFramebuffer===void 0)$.setupRenderTarget(H);else if(ot.__hasExternalTextures)$.rebindTextures(H,Ye.get(H.texture).__webglTexture,Ye.get(H.depthTexture).__webglTexture);else if(H.depthBuffer){const Fe=H.depthTexture;if(ot.__boundDepthTexture!==Fe){if(Fe!==null&&Ye.has(Fe)&&(H.width!==Fe.image.width||H.height!==Fe.image.height))throw new Error("WebGLRenderTarget: Attached DepthTexture is initialized to the incorrect size.");$.setupDepthRenderbuffer(H)}}const It=H.texture;(It.isData3DTexture||It.isDataArrayTexture||It.isCompressedArrayTexture)&&(Xe=!0);const Lt=Ye.get(H).__webglFramebuffer;H.isWebGLCubeRenderTarget?(Array.isArray(Lt[ee])?re=Lt[ee][pe]:re=Lt[ee],Ue=!0):H.samples>0&&$.useMultisampledRTT(H)===!1?re=Ye.get(H).__webglMultisampledFramebuffer:Array.isArray(Lt)?re=Lt[pe]:re=Lt,D.copy(H.viewport),z.copy(H.scissor),j=H.scissorTest}else D.copy(ne).multiplyScalar(F).floor(),z.copy(fe).multiplyScalar(F).floor(),j=Ce;if(We.bindFramebuffer(Q.FRAMEBUFFER,re)&&me&&We.drawBuffers(H,re),We.viewport(D),We.scissor(z),We.setScissorTest(j),Ue){const ot=Ye.get(H.texture);Q.framebufferTexture2D(Q.FRAMEBUFFER,Q.COLOR_ATTACHMENT0,Q.TEXTURE_CUBE_MAP_POSITIVE_X+ee,ot.__webglTexture,pe)}else if(Xe){const ot=Ye.get(H.texture),It=ee||0;Q.framebufferTextureLayer(Q.FRAMEBUFFER,Q.COLOR_ATTACHMENT0,ot.__webglTexture,pe||0,It)}A=-1},this.readRenderTargetPixels=function(H,ee,pe,me,re,Ue,Xe){if(!(H&&H.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let ct=Ye.get(H).__webglFramebuffer;if(H.isWebGLCubeRenderTarget&&Xe!==void 0&&(ct=ct[Xe]),ct){We.bindFramebuffer(Q.FRAMEBUFFER,ct);try{const ot=H.texture,It=ot.format,Lt=ot.type;if(!Ze.textureFormatReadable(It)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}if(!Ze.textureTypeReadable(Lt)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}ee>=0&&ee<=H.width-me&&pe>=0&&pe<=H.height-re&&Q.readPixels(ee,pe,me,re,Ht.convert(It),Ht.convert(Lt),Ue)}finally{const ot=I!==null?Ye.get(I).__webglFramebuffer:null;We.bindFramebuffer(Q.FRAMEBUFFER,ot)}}},this.readRenderTargetPixelsAsync=async function(H,ee,pe,me,re,Ue,Xe){if(!(H&&H.isWebGLRenderTarget))throw new Error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let ct=Ye.get(H).__webglFramebuffer;if(H.isWebGLCubeRenderTarget&&Xe!==void 0&&(ct=ct[Xe]),ct){const ot=H.texture,It=ot.format,Lt=ot.type;if(!Ze.textureFormatReadable(It))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in RGBA or implementation defined format.");if(!Ze.textureTypeReadable(Lt))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in UnsignedByteType or implementation defined type.");if(ee>=0&&ee<=H.width-me&&pe>=0&&pe<=H.height-re){We.bindFramebuffer(Q.FRAMEBUFFER,ct);const Fe=Q.createBuffer();Q.bindBuffer(Q.PIXEL_PACK_BUFFER,Fe),Q.bufferData(Q.PIXEL_PACK_BUFFER,Ue.byteLength,Q.STREAM_READ),Q.readPixels(ee,pe,me,re,Ht.convert(It),Ht.convert(Lt),0);const bt=I!==null?Ye.get(I).__webglFramebuffer:null;We.bindFramebuffer(Q.FRAMEBUFFER,bt);const Yt=Q.fenceSync(Q.SYNC_GPU_COMMANDS_COMPLETE,0);return Q.flush(),await H7(Q,Yt,4),Q.bindBuffer(Q.PIXEL_PACK_BUFFER,Fe),Q.getBufferSubData(Q.PIXEL_PACK_BUFFER,0,Ue),Q.deleteBuffer(Fe),Q.deleteSync(Yt),Ue}else throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: requested read bounds are out of range.")}},this.copyFramebufferToTexture=function(H,ee=null,pe=0){H.isTexture!==!0&&(Hp("WebGLRenderer: copyFramebufferToTexture function signature has changed."),ee=arguments[0]||null,H=arguments[1]);const me=Math.pow(2,-pe),re=Math.floor(H.image.width*me),Ue=Math.floor(H.image.height*me),Xe=ee!==null?ee.x:0,ct=ee!==null?ee.y:0;$.setTexture2D(H,0),Q.copyTexSubImage2D(Q.TEXTURE_2D,pe,0,0,Xe,ct,re,Ue),We.unbindTexture()},this.copyTextureToTexture=function(H,ee,pe=null,me=null,re=0){H.isTexture!==!0&&(Hp("WebGLRenderer: copyTextureToTexture function signature has changed."),me=arguments[0]||null,H=arguments[1],ee=arguments[2],re=arguments[3]||0,pe=null);let Ue,Xe,ct,ot,It,Lt,Fe,bt,Yt;const At=H.isCompressedTexture?H.mipmaps[re]:H.image;pe!==null?(Ue=pe.max.x-pe.min.x,Xe=pe.max.y-pe.min.y,ct=pe.isBox3?pe.max.z-pe.min.z:1,ot=pe.min.x,It=pe.min.y,Lt=pe.isBox3?pe.min.z:0):(Ue=At.width,Xe=At.height,ct=At.depth||1,ot=0,It=0,Lt=0),me!==null?(Fe=me.x,bt=me.y,Yt=me.z):(Fe=0,bt=0,Yt=0);const _t=Ht.convert(ee.format),jt=Ht.convert(ee.type);let Qe;ee.isData3DTexture?($.setTexture3D(ee,0),Qe=Q.TEXTURE_3D):ee.isDataArrayTexture||ee.isCompressedArrayTexture?($.setTexture2DArray(ee,0),Qe=Q.TEXTURE_2D_ARRAY):($.setTexture2D(ee,0),Qe=Q.TEXTURE_2D),Q.pixelStorei(Q.UNPACK_FLIP_Y_WEBGL,ee.flipY),Q.pixelStorei(Q.UNPACK_PREMULTIPLY_ALPHA_WEBGL,ee.premultiplyAlpha),Q.pixelStorei(Q.UNPACK_ALIGNMENT,ee.unpackAlignment);const Vn=Q.getParameter(Q.UNPACK_ROW_LENGTH),sn=Q.getParameter(Q.UNPACK_IMAGE_HEIGHT),Ci=Q.getParameter(Q.UNPACK_SKIP_PIXELS),ri=Q.getParameter(Q.UNPACK_SKIP_ROWS),vi=Q.getParameter(Q.UNPACK_SKIP_IMAGES);Q.pixelStorei(Q.UNPACK_ROW_LENGTH,At.width),Q.pixelStorei(Q.UNPACK_IMAGE_HEIGHT,At.height),Q.pixelStorei(Q.UNPACK_SKIP_PIXELS,ot),Q.pixelStorei(Q.UNPACK_SKIP_ROWS,It),Q.pixelStorei(Q.UNPACK_SKIP_IMAGES,Lt);const lo=H.isDataArrayTexture||H.isData3DTexture,kn=ee.isDataArrayTexture||ee.isData3DTexture;if(H.isRenderTargetTexture||H.isDepthTexture){const si=Ye.get(H),Yi=Ye.get(ee),Bn=Ye.get(si.__renderTarget),Fr=Ye.get(Yi.__renderTarget);We.bindFramebuffer(Q.READ_FRAMEBUFFER,Bn.__webglFramebuffer),We.bindFramebuffer(Q.DRAW_FRAMEBUFFER,Fr.__webglFramebuffer);for(let vs=0;vs<ct;vs++)lo&&Q.framebufferTextureLayer(Q.READ_FRAMEBUFFER,Q.COLOR_ATTACHMENT0,Ye.get(H).__webglTexture,re,Lt+vs),H.isDepthTexture?(kn&&Q.framebufferTextureLayer(Q.DRAW_FRAMEBUFFER,Q.COLOR_ATTACHMENT0,Ye.get(ee).__webglTexture,re,Yt+vs),Q.blitFramebuffer(ot,It,Ue,Xe,Fe,bt,Ue,Xe,Q.DEPTH_BUFFER_BIT,Q.NEAREST)):kn?Q.copyTexSubImage3D(Qe,re,Fe,bt,Yt+vs,ot,It,Ue,Xe):Q.copyTexSubImage2D(Qe,re,Fe,bt,Yt+vs,ot,It,Ue,Xe);We.bindFramebuffer(Q.READ_FRAMEBUFFER,null),We.bindFramebuffer(Q.DRAW_FRAMEBUFFER,null)}else kn?H.isDataTexture||H.isData3DTexture?Q.texSubImage3D(Qe,re,Fe,bt,Yt,Ue,Xe,ct,_t,jt,At.data):ee.isCompressedArrayTexture?Q.compressedTexSubImage3D(Qe,re,Fe,bt,Yt,Ue,Xe,ct,_t,At.data):Q.texSubImage3D(Qe,re,Fe,bt,Yt,Ue,Xe,ct,_t,jt,At):H.isDataTexture?Q.texSubImage2D(Q.TEXTURE_2D,re,Fe,bt,Ue,Xe,_t,jt,At.data):H.isCompressedTexture?Q.compressedTexSubImage2D(Q.TEXTURE_2D,re,Fe,bt,At.width,At.height,_t,At.data):Q.texSubImage2D(Q.TEXTURE_2D,re,Fe,bt,Ue,Xe,_t,jt,At);Q.pixelStorei(Q.UNPACK_ROW_LENGTH,Vn),Q.pixelStorei(Q.UNPACK_IMAGE_HEIGHT,sn),Q.pixelStorei(Q.UNPACK_SKIP_PIXELS,Ci),Q.pixelStorei(Q.UNPACK_SKIP_ROWS,ri),Q.pixelStorei(Q.UNPACK_SKIP_IMAGES,vi),re===0&&ee.generateMipmaps&&Q.generateMipmap(Qe),We.unbindTexture()},this.copyTextureToTexture3D=function(H,ee,pe=null,me=null,re=0){return H.isTexture!==!0&&(Hp("WebGLRenderer: copyTextureToTexture3D function signature has changed."),pe=arguments[0]||null,me=arguments[1]||null,H=arguments[2],ee=arguments[3],re=arguments[4]||0),Hp('WebGLRenderer: copyTextureToTexture3D function has been deprecated. Use "copyTextureToTexture" instead.'),this.copyTextureToTexture(H,ee,pe,me,re)},this.initRenderTarget=function(H){Ye.get(H).__webglFramebuffer===void 0&&$.setupRenderTarget(H)},this.initTexture=function(H){H.isCubeTexture?$.setTextureCube(H,0):H.isData3DTexture?$.setTexture3D(H,0):H.isDataArrayTexture||H.isCompressedArrayTexture?$.setTexture2DArray(H,0):$.setTexture2D(H,0),We.unbindTexture()},this.resetState=function(){L=0,N=0,I=null,We.reset(),hn.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return qo}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(e){this._outputColorSpace=e;const t=this.getContext();t.drawingBufferColorspace=_n._getDrawingBufferColorSpace(e),t.unpackColorSpace=_n._getUnpackColorSpace()}}class gw{constructor(e,t=25e-5){this.isFogExp2=!0,this.name="",this.color=new pt(e),this.density=t}clone(){return new gw(this.color,this.density)}toJSON(){return{type:"FogExp2",name:this.name,color:this.color.getHex(),density:this.density}}}class yw{constructor(e,t=1,i=1e3){this.isFog=!0,this.name="",this.color=new pt(e),this.near=t,this.far=i}clone(){return new yw(this.color,this.near,this.far)}toJSON(){return{type:"Fog",name:this.name,color:this.color.getHex(),near:this.near,far:this.far}}}class o_ extends In{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.backgroundRotation=new Fs,this.environmentIntensity=1,this.environmentRotation=new Fs,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,this.backgroundRotation.copy(e.backgroundRotation),this.environmentIntensity=e.environmentIntensity,this.environmentRotation.copy(e.environmentRotation),e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return this.fog!==null&&(t.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(t.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(t.object.backgroundIntensity=this.backgroundIntensity),t.object.backgroundRotation=this.backgroundRotation.toArray(),this.environmentIntensity!==1&&(t.object.environmentIntensity=this.environmentIntensity),t.object.environmentRotation=this.environmentRotation.toArray(),t}}class vw{constructor(e,t){this.isInterleavedBuffer=!0,this.array=e,this.stride=t,this.count=e!==void 0?e.length/t:0,this.usage=ng,this.updateRanges=[],this.version=0,this.uuid=ks()}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,i){e*=this.stride,i*=t.stride;for(let r=0,s=this.stride;r<s;r++)this.array[e+r]=t.array[i+r];return this}set(e,t=0){return this.array.set(e,t),this}clone(e){e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=ks()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),i=new this.constructor(t,this.stride);return i.setUsage(this.usage),i}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=ks()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const Hr=new K;class Qu{constructor(e,t,i,r=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=t,this.offset=i,this.normalized=r}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,i=this.data.count;t<i;t++)Hr.fromBufferAttribute(this,t),Hr.applyMatrix4(e),this.setXYZ(t,Hr.x,Hr.y,Hr.z);return this}applyNormalMatrix(e){for(let t=0,i=this.count;t<i;t++)Hr.fromBufferAttribute(this,t),Hr.applyNormalMatrix(e),this.setXYZ(t,Hr.x,Hr.y,Hr.z);return this}transformDirection(e){for(let t=0,i=this.count;t<i;t++)Hr.fromBufferAttribute(this,t),Hr.transformDirection(e),this.setXYZ(t,Hr.x,Hr.y,Hr.z);return this}getComponent(e,t){let i=this.array[e*this.data.stride+this.offset+t];return this.normalized&&(i=qr(i,this.array)),i}setComponent(e,t,i){return this.normalized&&(i=nn(i,this.array)),this.data.array[e*this.data.stride+this.offset+t]=i,this}setX(e,t){return this.normalized&&(t=nn(t,this.array)),this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.normalized&&(t=nn(t,this.array)),this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.normalized&&(t=nn(t,this.array)),this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.normalized&&(t=nn(t,this.array)),this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){let t=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(t=qr(t,this.array)),t}getY(e){let t=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(t=qr(t,this.array)),t}getZ(e){let t=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(t=qr(t,this.array)),t}getW(e){let t=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(t=qr(t,this.array)),t}setXY(e,t,i){return e=e*this.data.stride+this.offset,this.normalized&&(t=nn(t,this.array),i=nn(i,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this}setXYZ(e,t,i,r){return e=e*this.data.stride+this.offset,this.normalized&&(t=nn(t,this.array),i=nn(i,this.array),r=nn(r,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this.data.array[e+2]=r,this}setXYZW(e,t,i,r,s){return e=e*this.data.stride+this.offset,this.normalized&&(t=nn(t,this.array),i=nn(i,this.array),r=nn(r,this.array),s=nn(s,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this.data.array[e+2]=r,this.data.array[e+3]=s,this}clone(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let i=0;i<this.count;i++){const r=i*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)t.push(this.data.array[r+s])}return new qn(new this.array.constructor(t),this.itemSize,this.normalized)}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new Qu(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let i=0;i<this.count;i++){const r=i*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)t.push(this.data.array[r+s])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}class BA extends fr{static get type(){return"SpriteMaterial"}constructor(e){super(),this.isSpriteMaterial=!0,this.color=new pt(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}let Qh;const Ep=new K,Zh=new K,ed=new K,td=new De,Cp=new De,Rj=new Bt,Dv=new K,Ap=new K,kv=new K,X2=new De,dT=new De,Y2=new De;class Nj extends In{constructor(e=new BA){if(super(),this.isSprite=!0,this.type="Sprite",Qh===void 0){Qh=new rn;const t=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),i=new vw(t,5);Qh.setIndex([0,1,2,0,2,3]),Qh.setAttribute("position",new Qu(i,3,0,!1)),Qh.setAttribute("uv",new Qu(i,2,3,!1))}this.geometry=Qh,this.material=e,this.center=new De(.5,.5)}raycast(e,t){e.camera===null&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),Zh.setFromMatrixScale(this.matrixWorld),Rj.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),ed.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&Zh.multiplyScalar(-ed.z);const i=this.material.rotation;let r,s;i!==0&&(s=Math.cos(i),r=Math.sin(i));const o=this.center;Ov(Dv.set(-.5,-.5,0),ed,o,Zh,r,s),Ov(Ap.set(.5,-.5,0),ed,o,Zh,r,s),Ov(kv.set(.5,.5,0),ed,o,Zh,r,s),X2.set(0,0),dT.set(1,0),Y2.set(1,1);let a=e.ray.intersectTriangle(Dv,Ap,kv,!1,Ep);if(a===null&&(Ov(Ap.set(-.5,.5,0),ed,o,Zh,r,s),dT.set(0,1),a=e.ray.intersectTriangle(Dv,kv,Ap,!1,Ep),a===null))return;const l=e.ray.origin.distanceTo(Ep);l<e.near||l>e.far||t.push({distance:l,point:Ep.clone(),uv:cs.getInterpolation(Ep,Dv,Ap,kv,X2,dT,Y2,new De),face:null,object:this})}copy(e,t){return super.copy(e,t),e.center!==void 0&&this.center.copy(e.center),this.material=e.material,this}}function Ov(n,e,t,i,r,s){td.subVectors(n,t).addScalar(.5).multiply(i),r!==void 0?(Cp.x=s*td.x-r*td.y,Cp.y=r*td.x+s*td.y):Cp.copy(td),n.copy(e),n.x+=Cp.x,n.y+=Cp.y,n.applyMatrix4(Rj)}const Uv=new K,K2=new K;class Lj extends In{constructor(){super(),this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]},isLOD:{value:!0}}),this.autoUpdate=!0}copy(e){super.copy(e,!1);const t=e.levels;for(let i=0,r=t.length;i<r;i++){const s=t[i];this.addLevel(s.object.clone(),s.distance,s.hysteresis)}return this.autoUpdate=e.autoUpdate,this}addLevel(e,t=0,i=0){t=Math.abs(t);const r=this.levels;let s;for(s=0;s<r.length&&!(t<r[s].distance);s++);return r.splice(s,0,{distance:t,hysteresis:i,object:e}),this.add(e),this}removeLevel(e){const t=this.levels;for(let i=0;i<t.length;i++)if(t[i].distance===e){const r=t.splice(i,1);return this.remove(r[0].object),!0}return!1}getCurrentLevel(){return this._currentLevel}getObjectForDistance(e){const t=this.levels;if(t.length>0){let i,r;for(i=1,r=t.length;i<r;i++){let s=t[i].distance;if(t[i].object.visible&&(s-=s*t[i].hysteresis),e<s)break}return t[i-1].object}return null}raycast(e,t){if(this.levels.length>0){Uv.setFromMatrixPosition(this.matrixWorld);const r=e.ray.origin.distanceTo(Uv);this.getObjectForDistance(r).raycast(e,t)}}update(e){const t=this.levels;if(t.length>1){Uv.setFromMatrixPosition(e.matrixWorld),K2.setFromMatrixPosition(this.matrixWorld);const i=Uv.distanceTo(K2)/e.zoom;t[0].object.visible=!0;let r,s;for(r=1,s=t.length;r<s;r++){let o=t[r].distance;if(t[r].object.visible&&(o-=o*t[r].hysteresis),i>=o)t[r-1].object.visible=!1,t[r].object.visible=!0;else break}for(this._currentLevel=r-1;r<s;r++)t[r].object.visible=!1}}toJSON(e){const t=super.toJSON(e);this.autoUpdate===!1&&(t.object.autoUpdate=!1),t.object.levels=[];const i=this.levels;for(let r=0,s=i.length;r<s;r++){const o=i[r];t.object.levels.push({object:o.object.uuid,distance:o.distance,hysteresis:o.hysteresis})}return t}}const J2=new K,Q2=new An,Z2=new An,rJ=new K,eL=new Bt,Fv=new K,fT=new Lr,tL=new Bt,pT=new Af;class Dj extends ji{constructor(e,t){super(e,t),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode=lE,this.bindMatrix=new Bt,this.bindMatrixInverse=new Bt,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){const e=this.geometry;this.boundingBox===null&&(this.boundingBox=new Yr),this.boundingBox.makeEmpty();const t=e.getAttribute("position");for(let i=0;i<t.count;i++)this.getVertexPosition(i,Fv),this.boundingBox.expandByPoint(Fv)}computeBoundingSphere(){const e=this.geometry;this.boundingSphere===null&&(this.boundingSphere=new Lr),this.boundingSphere.makeEmpty();const t=e.getAttribute("position");for(let i=0;i<t.count;i++)this.getVertexPosition(i,Fv),this.boundingSphere.expandByPoint(Fv)}copy(e,t){return super.copy(e,t),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}raycast(e,t){const i=this.material,r=this.matrixWorld;i!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),fT.copy(this.boundingSphere),fT.applyMatrix4(r),e.ray.intersectsSphere(fT)!==!1&&(tL.copy(r).invert(),pT.copy(e.ray).applyMatrix4(tL),!(this.boundingBox!==null&&pT.intersectsBox(this.boundingBox)===!1)&&this._computeIntersections(e,t,pT)))}getVertexPosition(e,t){return super.getVertexPosition(e,t),this.applyBoneTransform(e,t),t}bind(e,t){this.skeleton=e,t===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new An,t=this.geometry.attributes.skinWeight;for(let i=0,r=t.count;i<r;i++){e.fromBufferAttribute(t,i);const s=1/e.manhattanLength();s!==1/0?e.multiplyScalar(s):e.set(1,0,0,0),t.setXYZW(i,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode===lE?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode===nj?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}applyBoneTransform(e,t){const i=this.skeleton,r=this.geometry;Q2.fromBufferAttribute(r.attributes.skinIndex,e),Z2.fromBufferAttribute(r.attributes.skinWeight,e),J2.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let s=0;s<4;s++){const o=Z2.getComponent(s);if(o!==0){const a=Q2.getComponent(s);eL.multiplyMatrices(i.bones[a].matrixWorld,i.boneInverses[a]),t.addScaledVector(rJ.copy(J2).applyMatrix4(eL),o)}}return t.applyMatrix4(this.bindMatrixInverse)}}class zA extends In{constructor(){super(),this.isBone=!0,this.type="Bone"}}class Qo extends hi{constructor(e=null,t=1,i=1,r,s,o,a,l,c=ur,u=ur,f,m){super(null,o,a,l,c,u,r,s,f,m),this.isDataTexture=!0,this.image={data:e,width:t,height:i},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const nL=new Bt,sJ=new Bt;class xw{constructor(e=[],t=[]){this.uuid=ks(),this.bones=e.slice(0),this.boneInverses=t,this.boneMatrices=null,this.boneTexture=null,this.init()}init(){const e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(e.length*16),t.length===0)this.calculateInverses();else if(e.length!==t.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let i=0,r=this.bones.length;i<r;i++)this.boneInverses.push(new Bt)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,t=this.bones.length;e<t;e++){const i=new Bt;this.bones[e]&&i.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(i)}}pose(){for(let e=0,t=this.bones.length;e<t;e++){const i=this.bones[e];i&&i.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,t=this.bones.length;e<t;e++){const i=this.bones[e];i&&(i.parent&&i.parent.isBone?(i.matrix.copy(i.parent.matrixWorld).invert(),i.matrix.multiply(i.matrixWorld)):i.matrix.copy(i.matrixWorld),i.matrix.decompose(i.position,i.quaternion,i.scale))}}update(){const e=this.bones,t=this.boneInverses,i=this.boneMatrices,r=this.boneTexture;for(let s=0,o=e.length;s<o;s++){const a=e[s]?e[s].matrixWorld:sJ;nL.multiplyMatrices(a,t[s]),nL.toArray(i,s*16)}r!==null&&(r.needsUpdate=!0)}clone(){return new xw(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(this.bones.length*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);const t=new Float32Array(e*e*4);t.set(this.boneMatrices);const i=new Qo(t,e,e,Pr,ds);return i.needsUpdate=!0,this.boneMatrices=t,this.boneTexture=i,this}getBoneByName(e){for(let t=0,i=this.bones.length;t<i;t++){const r=this.bones[t];if(r.name===e)return r}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,t){this.uuid=e.uuid;for(let i=0,r=e.bones.length;i<r;i++){const s=e.bones[i];let o=t[s];o===void 0&&(console.warn("THREE.Skeleton: No bone found with UUID:",s),o=new zA),this.bones.push(o),this.boneInverses.push(new Bt().fromArray(e.boneInverses[i]))}return this.init(),this}toJSON(){const e={metadata:{version:4.6,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const t=this.bones,i=this.boneInverses;for(let r=0,s=t.length;r<s;r++){const o=t[r];e.bones.push(o.uuid);const a=i[r];e.boneInverses.push(a.toArray())}return e}}class lf extends qn{constructor(e,t,i,r=1){super(e,t,i),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=r}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}const nd=new Bt,iL=new Bt,jv=[],rL=new Yr,oJ=new Bt,Mp=new ji,Ip=new Lr;class kj extends ji{constructor(e,t,i){super(e,t),this.isInstancedMesh=!0,this.instanceMatrix=new lf(new Float32Array(i*16),16),this.instanceColor=null,this.morphTexture=null,this.count=i,this.boundingBox=null,this.boundingSphere=null;for(let r=0;r<i;r++)this.setMatrixAt(r,oJ)}computeBoundingBox(){const e=this.geometry,t=this.count;this.boundingBox===null&&(this.boundingBox=new Yr),e.boundingBox===null&&e.computeBoundingBox(),this.boundingBox.makeEmpty();for(let i=0;i<t;i++)this.getMatrixAt(i,nd),rL.copy(e.boundingBox).applyMatrix4(nd),this.boundingBox.union(rL)}computeBoundingSphere(){const e=this.geometry,t=this.count;this.boundingSphere===null&&(this.boundingSphere=new Lr),e.boundingSphere===null&&e.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(let i=0;i<t;i++)this.getMatrixAt(i,nd),Ip.copy(e.boundingSphere).applyMatrix4(nd),this.boundingSphere.union(Ip)}copy(e,t){return super.copy(e,t),this.instanceMatrix.copy(e.instanceMatrix),e.morphTexture!==null&&(this.morphTexture=e.morphTexture.clone()),e.instanceColor!==null&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}getColorAt(e,t){t.fromArray(this.instanceColor.array,e*3)}getMatrixAt(e,t){t.fromArray(this.instanceMatrix.array,e*16)}getMorphAt(e,t){const i=t.morphTargetInfluences,r=this.morphTexture.source.data.data,s=i.length+1,o=e*s+1;for(let a=0;a<i.length;a++)i[a]=r[o+a]}raycast(e,t){const i=this.matrixWorld,r=this.count;if(Mp.geometry=this.geometry,Mp.material=this.material,Mp.material!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),Ip.copy(this.boundingSphere),Ip.applyMatrix4(i),e.ray.intersectsSphere(Ip)!==!1))for(let s=0;s<r;s++){this.getMatrixAt(s,nd),iL.multiplyMatrices(i,nd),Mp.matrixWorld=iL,Mp.raycast(e,jv);for(let o=0,a=jv.length;o<a;o++){const l=jv[o];l.instanceId=s,l.object=this,t.push(l)}jv.length=0}}setColorAt(e,t){this.instanceColor===null&&(this.instanceColor=new lf(new Float32Array(this.instanceMatrix.count*3).fill(1),3)),t.toArray(this.instanceColor.array,e*3)}setMatrixAt(e,t){t.toArray(this.instanceMatrix.array,e*16)}setMorphAt(e,t){const i=t.morphTargetInfluences,r=i.length+1;this.morphTexture===null&&(this.morphTexture=new Qo(new Float32Array(r*this.count),r,this.count,uw,ds));const s=this.morphTexture.source.data.data;let o=0;for(let c=0;c<i.length;c++)o+=i[c];const a=this.geometry.morphTargetsRelative?1:1-o,l=r*e;s[l]=a,s.set(i,l+1)}updateMorphTargets(){}dispose(){return this.dispatchEvent({type:"dispose"}),this.morphTexture!==null&&(this.morphTexture.dispose(),this.morphTexture=null),this}}function mT(n,e){return n-e}function aJ(n,e){return n.z-e.z}function lJ(n,e){return e.z-n.z}class cJ{constructor(){this.index=0,this.pool=[],this.list=[]}push(e,t,i,r){const s=this.pool,o=this.list;this.index>=s.length&&s.push({start:-1,count:-1,z:-1,index:-1});const a=s[this.index];o.push(a),this.index++,a.start=e,a.count=t,a.z=i,a.index=r}reset(){this.list.length=0,this.index=0}}const ns=new Bt,uJ=new pt(1,1,1),gT=new zg,Vv=new Yr,nu=new Lr,Pp=new K,sL=new K,hJ=new K,yT=new cJ,Tr=new ji,Bv=[];function dJ(n,e,t=0){const i=e.itemSize;if(n.isInterleavedBufferAttribute||n.array.constructor!==e.array.constructor){const r=n.count;for(let s=0;s<r;s++)for(let o=0;o<i;o++)e.setComponent(s+t,o,n.getComponent(s,o))}else e.array.set(n.array,t*i);e.needsUpdate=!0}function iu(n,e){if(n.constructor!==e.constructor){const t=Math.min(n.length,e.length);for(let i=0;i<t;i++)e[i]=n[i]}else{const t=Math.min(n.length,e.length);e.set(new n.constructor(n.buffer,0,t))}}class Oj extends ji{get maxInstanceCount(){return this._maxInstanceCount}get instanceCount(){return this._instanceInfo.length-this._availableInstanceIds.length}get unusedVertexCount(){return this._maxVertexCount-this._nextVertexStart}get unusedIndexCount(){return this._maxIndexCount-this._nextIndexStart}constructor(e,t,i=t*2,r){super(new rn,r),this.isBatchedMesh=!0,this.perObjectFrustumCulled=!0,this.sortObjects=!0,this.boundingBox=null,this.boundingSphere=null,this.customSort=null,this._instanceInfo=[],this._geometryInfo=[],this._availableInstanceIds=[],this._availableGeometryIds=[],this._nextIndexStart=0,this._nextVertexStart=0,this._geometryCount=0,this._visibilityChanged=!0,this._geometryInitialized=!1,this._maxInstanceCount=e,this._maxVertexCount=t,this._maxIndexCount=i,this._multiDrawCounts=new Int32Array(e),this._multiDrawStarts=new Int32Array(e),this._multiDrawCount=0,this._multiDrawInstances=null,this._matricesTexture=null,this._indirectTexture=null,this._colorsTexture=null,this._initMatricesTexture(),this._initIndirectTexture()}_initMatricesTexture(){let e=Math.sqrt(this._maxInstanceCount*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);const t=new Float32Array(e*e*4),i=new Qo(t,e,e,Pr,ds);this._matricesTexture=i}_initIndirectTexture(){let e=Math.sqrt(this._maxInstanceCount);e=Math.ceil(e);const t=new Uint32Array(e*e),i=new Qo(t,e,e,Fg,Ka);this._indirectTexture=i}_initColorsTexture(){let e=Math.sqrt(this._maxInstanceCount);e=Math.ceil(e);const t=new Float32Array(e*e*4).fill(1),i=new Qo(t,e,e,Pr,ds);i.colorSpace=_n.workingColorSpace,this._colorsTexture=i}_initializeGeometry(e){const t=this.geometry,i=this._maxVertexCount,r=this._maxIndexCount;if(this._geometryInitialized===!1){for(const s in e.attributes){const o=e.getAttribute(s),{array:a,itemSize:l,normalized:c}=o,u=new a.constructor(i*l),f=new qn(u,l,c);t.setAttribute(s,f)}if(e.getIndex()!==null){const s=i>65535?new Uint32Array(r):new Uint16Array(r);t.setIndex(new qn(s,1))}this._geometryInitialized=!0}}_validateGeometry(e){const t=this.geometry;if(!!e.getIndex()!=!!t.getIndex())throw new Error('BatchedMesh: All geometries must consistently have "index".');for(const i in t.attributes){if(!e.hasAttribute(i))throw new Error(`BatchedMesh: Added geometry missing "${i}". All geometries must have consistent attributes.`);const r=e.getAttribute(i),s=t.getAttribute(i);if(r.itemSize!==s.itemSize||r.normalized!==s.normalized)throw new Error("BatchedMesh: All attributes must have a consistent itemSize and normalized value.")}}setCustomSort(e){return this.customSort=e,this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new Yr);const e=this.boundingBox,t=this._instanceInfo;e.makeEmpty();for(let i=0,r=t.length;i<r;i++){if(t[i].active===!1)continue;const s=t[i].geometryIndex;this.getMatrixAt(i,ns),this.getBoundingBoxAt(s,Vv).applyMatrix4(ns),e.union(Vv)}}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new Lr);const e=this.boundingSphere,t=this._instanceInfo;e.makeEmpty();for(let i=0,r=t.length;i<r;i++){if(t[i].active===!1)continue;const s=t[i].geometryIndex;this.getMatrixAt(i,ns),this.getBoundingSphereAt(s,nu).applyMatrix4(ns),e.union(nu)}}addInstance(e){if(this._instanceInfo.length>=this.maxInstanceCount&&this._availableInstanceIds.length===0)throw new Error("BatchedMesh: Maximum item count reached.");const i={visible:!0,active:!0,geometryIndex:e};let r=null;this._availableInstanceIds.length>0?(this._availableInstanceIds.sort(mT),r=this._availableInstanceIds.shift(),this._instanceInfo[r]=i):(r=this._instanceInfo.length,this._instanceInfo.push(i));const s=this._matricesTexture;ns.identity().toArray(s.image.data,r*16),s.needsUpdate=!0;const o=this._colorsTexture;return o&&(uJ.toArray(o.image.data,r*4),o.needsUpdate=!0),this._visibilityChanged=!0,r}addGeometry(e,t=-1,i=-1){this._initializeGeometry(e),this._validateGeometry(e);const r={vertexStart:-1,vertexCount:-1,reservedVertexCount:-1,indexStart:-1,indexCount:-1,reservedIndexCount:-1,start:-1,count:-1,boundingBox:null,boundingSphere:null,active:!0},s=this._geometryInfo;r.vertexStart=this._nextVertexStart,r.reservedVertexCount=t===-1?e.getAttribute("position").count:t;const o=e.getIndex();if(o!==null&&(r.indexStart=this._nextIndexStart,r.reservedIndexCount=i===-1?o.count:i),r.indexStart!==-1&&r.indexStart+r.reservedIndexCount>this._maxIndexCount||r.vertexStart+r.reservedVertexCount>this._maxVertexCount)throw new Error("BatchedMesh: Reserved space request exceeds the maximum buffer size.");let l;return this._availableGeometryIds.length>0?(this._availableGeometryIds.sort(mT),l=this._availableGeometryIds.shift(),s[l]=r):(l=this._geometryCount,this._geometryCount++,s.push(r)),this.setGeometryAt(l,e),this._nextIndexStart=r.indexStart+r.reservedIndexCount,this._nextVertexStart=r.vertexStart+r.reservedVertexCount,l}setGeometryAt(e,t){if(e>=this._geometryCount)throw new Error("BatchedMesh: Maximum geometry count reached.");this._validateGeometry(t);const i=this.geometry,r=i.getIndex()!==null,s=i.getIndex(),o=t.getIndex(),a=this._geometryInfo[e];if(r&&o.count>a.reservedIndexCount||t.attributes.position.count>a.reservedVertexCount)throw new Error("BatchedMesh: Reserved space not large enough for provided geometry.");const l=a.vertexStart,c=a.reservedVertexCount;a.vertexCount=t.getAttribute("position").count;for(const u in i.attributes){const f=t.getAttribute(u),m=i.getAttribute(u);dJ(f,m,l);const g=f.itemSize;for(let x=f.count,b=c;x<b;x++){const w=l+x;for(let v=0;v<g;v++)m.setComponent(w,v,0)}m.needsUpdate=!0,m.addUpdateRange(l*g,c*g)}if(r){const u=a.indexStart,f=a.reservedIndexCount;a.indexCount=t.getIndex().count;for(let m=0;m<o.count;m++)s.setX(u+m,l+o.getX(m));for(let m=o.count,g=f;m<g;m++)s.setX(u+m,l);s.needsUpdate=!0,s.addUpdateRange(u,a.reservedIndexCount)}return a.start=r?a.indexStart:a.vertexStart,a.count=r?a.indexCount:a.vertexCount,a.boundingBox=null,t.boundingBox!==null&&(a.boundingBox=t.boundingBox.clone()),a.boundingSphere=null,t.boundingSphere!==null&&(a.boundingSphere=t.boundingSphere.clone()),this._visibilityChanged=!0,e}deleteGeometry(e){const t=this._geometryInfo;if(e>=t.length||t[e].active===!1)return this;const i=this._instanceInfo;for(let r=0,s=i.length;r<s;r++)i[r].geometryIndex===e&&this.deleteInstance(r);return t[e].active=!1,this._availableGeometryIds.push(e),this._visibilityChanged=!0,this}deleteInstance(e){const t=this._instanceInfo;return e>=t.length||t[e].active===!1?this:(t[e].active=!1,this._availableInstanceIds.push(e),this._visibilityChanged=!0,this)}optimize(){let e=0,t=0;const i=this._geometryInfo,r=i.map((o,a)=>a).sort((o,a)=>i[o].vertexStart-i[a].vertexStart),s=this.geometry;for(let o=0,a=i.length;o<a;o++){const l=r[o],c=i[l];if(c.active!==!1){if(s.index!==null){if(c.indexStart!==t){const{indexStart:u,vertexStart:f,reservedIndexCount:m}=c,g=s.index,x=g.array,b=e-f;for(let w=u;w<u+m;w++)x[w]=x[w]+b;g.array.copyWithin(t,u,u+m),g.addUpdateRange(t,m),c.indexStart=t}t+=c.reservedIndexCount}if(c.vertexStart!==e){const{vertexStart:u,reservedVertexCount:f}=c,m=s.attributes;for(const g in m){const x=m[g],{array:b,itemSize:w}=x;b.copyWithin(e*w,u*w,(u+f)*w),x.addUpdateRange(e*w,f*w)}c.vertexStart=e}e+=c.reservedVertexCount,c.start=s.index?c.indexStart:c.vertexStart,this._nextIndexStart=s.index?c.indexStart+c.reservedIndexCount:0,this._nextVertexStart=c.vertexStart+c.reservedVertexCount}}return this}getBoundingBoxAt(e,t){if(e>=this._geometryCount)return null;const i=this.geometry,r=this._geometryInfo[e];if(r.boundingBox===null){const s=new Yr,o=i.index,a=i.attributes.position;for(let l=r.start,c=r.start+r.count;l<c;l++){let u=l;o&&(u=o.getX(u)),s.expandByPoint(Pp.fromBufferAttribute(a,u))}r.boundingBox=s}return t.copy(r.boundingBox),t}getBoundingSphereAt(e,t){if(e>=this._geometryCount)return null;const i=this.geometry,r=this._geometryInfo[e];if(r.boundingSphere===null){const s=new Lr;this.getBoundingBoxAt(e,Vv),Vv.getCenter(s.center);const o=i.index,a=i.attributes.position;let l=0;for(let c=r.start,u=r.start+r.count;c<u;c++){let f=c;o&&(f=o.getX(f)),Pp.fromBufferAttribute(a,f),l=Math.max(l,s.center.distanceToSquared(Pp))}s.radius=Math.sqrt(l),r.boundingSphere=s}return t.copy(r.boundingSphere),t}setMatrixAt(e,t){const i=this._instanceInfo,r=this._matricesTexture,s=this._matricesTexture.image.data;return e>=i.length||i[e].active===!1?this:(t.toArray(s,e*16),r.needsUpdate=!0,this)}getMatrixAt(e,t){const i=this._instanceInfo,r=this._matricesTexture.image.data;return e>=i.length||i[e].active===!1?null:t.fromArray(r,e*16)}setColorAt(e,t){this._colorsTexture===null&&this._initColorsTexture();const i=this._colorsTexture,r=this._colorsTexture.image.data,s=this._instanceInfo;return e>=s.length||s[e].active===!1?this:(t.toArray(r,e*4),i.needsUpdate=!0,this)}getColorAt(e,t){const i=this._colorsTexture.image.data,r=this._instanceInfo;return e>=r.length||r[e].active===!1?null:t.fromArray(i,e*4)}setVisibleAt(e,t){const i=this._instanceInfo;return e>=i.length||i[e].active===!1||i[e].visible===t?this:(i[e].visible=t,this._visibilityChanged=!0,this)}getVisibleAt(e){const t=this._instanceInfo;return e>=t.length||t[e].active===!1?!1:t[e].visible}setGeometryIdAt(e,t){const i=this._instanceInfo,r=this._geometryInfo;return e>=i.length||i[e].active===!1||t>=r.length||r[t].active===!1?null:(i[e].geometryIndex=t,this)}getGeometryIdAt(e){const t=this._instanceInfo;return e>=t.length||t[e].active===!1?-1:t[e].geometryIndex}getGeometryRangeAt(e,t={}){if(e<0||e>=this._geometryCount)return null;const i=this._geometryInfo[e];return t.vertexStart=i.vertexStart,t.vertexCount=i.vertexCount,t.reservedVertexCount=i.reservedVertexCount,t.indexStart=i.indexStart,t.indexCount=i.indexCount,t.reservedIndexCount=i.reservedIndexCount,t.start=i.start,t.count=i.count,t}setInstanceCount(e){const t=this._availableInstanceIds,i=this._instanceInfo;for(t.sort(mT);t[t.length-1]===i.length;)i.pop(),t.pop();if(e<i.length)throw new Error(`BatchedMesh: Instance ids outside the range ${e} are being used. Cannot shrink instance count.`);const r=new Int32Array(e),s=new Int32Array(e);iu(this._multiDrawCounts,r),iu(this._multiDrawStarts,s),this._multiDrawCounts=r,this._multiDrawStarts=s,this._maxInstanceCount=e;const o=this._indirectTexture,a=this._matricesTexture,l=this._colorsTexture;o.dispose(),this._initIndirectTexture(),iu(o.image.data,this._indirectTexture.image.data),a.dispose(),this._initMatricesTexture(),iu(a.image.data,this._matricesTexture.image.data),l&&(l.dispose(),this._initColorsTexture(),iu(l.image.data,this._colorsTexture.image.data))}setGeometrySize(e,t){const i=[...this._geometryInfo].filter(a=>a.active);if(Math.max(...i.map(a=>a.vertexStart+a.reservedVertexCount))>e)throw new Error(`BatchedMesh: Geometry vertex values are being used outside the range ${t}. Cannot shrink further.`);if(this.geometry.index&&Math.max(...i.map(l=>l.indexStart+l.reservedIndexCount))>t)throw new Error(`BatchedMesh: Geometry index values are being used outside the range ${t}. Cannot shrink further.`);const s=this.geometry;s.dispose(),this._maxVertexCount=e,this._maxIndexCount=t,this._geometryInitialized&&(this._geometryInitialized=!1,this.geometry=new rn,this._initializeGeometry(s));const o=this.geometry;s.index&&iu(s.index.array,o.index.array);for(const a in s.attributes)iu(s.attributes[a].array,o.attributes[a].array)}raycast(e,t){const i=this._instanceInfo,r=this._geometryInfo,s=this.matrixWorld,o=this.geometry;Tr.material=this.material,Tr.geometry.index=o.index,Tr.geometry.attributes=o.attributes,Tr.geometry.boundingBox===null&&(Tr.geometry.boundingBox=new Yr),Tr.geometry.boundingSphere===null&&(Tr.geometry.boundingSphere=new Lr);for(let a=0,l=i.length;a<l;a++){if(!i[a].visible||!i[a].active)continue;const c=i[a].geometryIndex,u=r[c];Tr.geometry.setDrawRange(u.start,u.count),this.getMatrixAt(a,Tr.matrixWorld).premultiply(s),this.getBoundingBoxAt(c,Tr.geometry.boundingBox),this.getBoundingSphereAt(c,Tr.geometry.boundingSphere),Tr.raycast(e,Bv);for(let f=0,m=Bv.length;f<m;f++){const g=Bv[f];g.object=this,g.batchId=a,t.push(g)}Bv.length=0}Tr.material=null,Tr.geometry.index=null,Tr.geometry.attributes={},Tr.geometry.setDrawRange(0,1/0)}copy(e){return super.copy(e),this.geometry=e.geometry.clone(),this.perObjectFrustumCulled=e.perObjectFrustumCulled,this.sortObjects=e.sortObjects,this.boundingBox=e.boundingBox!==null?e.boundingBox.clone():null,this.boundingSphere=e.boundingSphere!==null?e.boundingSphere.clone():null,this._geometryInfo=e._geometryInfo.map(t=>({...t,boundingBox:t.boundingBox!==null?t.boundingBox.clone():null,boundingSphere:t.boundingSphere!==null?t.boundingSphere.clone():null})),this._instanceInfo=e._instanceInfo.map(t=>({...t})),this._maxInstanceCount=e._maxInstanceCount,this._maxVertexCount=e._maxVertexCount,this._maxIndexCount=e._maxIndexCount,this._geometryInitialized=e._geometryInitialized,this._geometryCount=e._geometryCount,this._multiDrawCounts=e._multiDrawCounts.slice(),this._multiDrawStarts=e._multiDrawStarts.slice(),this._matricesTexture=e._matricesTexture.clone(),this._matricesTexture.image.data=this._matricesTexture.image.data.slice(),this._colorsTexture!==null&&(this._colorsTexture=e._colorsTexture.clone(),this._colorsTexture.image.data=this._colorsTexture.image.data.slice()),this}dispose(){return this.geometry.dispose(),this._matricesTexture.dispose(),this._matricesTexture=null,this._indirectTexture.dispose(),this._indirectTexture=null,this._colorsTexture!==null&&(this._colorsTexture.dispose(),this._colorsTexture=null),this}onBeforeRender(e,t,i,r,s){if(!this._visibilityChanged&&!this.perObjectFrustumCulled&&!this.sortObjects)return;const o=r.getIndex(),a=o===null?1:o.array.BYTES_PER_ELEMENT,l=this._instanceInfo,c=this._multiDrawStarts,u=this._multiDrawCounts,f=this._geometryInfo,m=this.perObjectFrustumCulled,g=this._indirectTexture,x=g.image.data;m&&(ns.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse).multiply(this.matrixWorld),gT.setFromProjectionMatrix(ns,e.coordinateSystem));let b=0;if(this.sortObjects){ns.copy(this.matrixWorld).invert(),Pp.setFromMatrixPosition(i.matrixWorld).applyMatrix4(ns),sL.set(0,0,-1).transformDirection(i.matrixWorld).transformDirection(ns);for(let S=0,E=l.length;S<E;S++)if(l[S].visible&&l[S].active){const C=l[S].geometryIndex;this.getMatrixAt(S,ns),this.getBoundingSphereAt(C,nu).applyMatrix4(ns);let V=!1;if(m&&(V=!gT.intersectsSphere(nu)),!V){const L=f[C],N=hJ.subVectors(nu.center,Pp).dot(sL);yT.push(L.start,L.count,N,S)}}const w=yT.list,v=this.customSort;v===null?w.sort(s.transparent?lJ:aJ):v.call(this,w,i);for(let S=0,E=w.length;S<E;S++){const C=w[S];c[b]=C.start*a,u[b]=C.count,x[b]=C.index,b++}yT.reset()}else for(let w=0,v=l.length;w<v;w++)if(l[w].visible&&l[w].active){const S=l[w].geometryIndex;let E=!1;if(m&&(this.getMatrixAt(w,ns),this.getBoundingSphereAt(S,nu).applyMatrix4(ns),E=!gT.intersectsSphere(nu)),!E){const C=f[S];c[b]=C.start*a,u[b]=C.count,x[b]=w,b++}}g.needsUpdate=!0,this._multiDrawCount=b,this._visibilityChanged=!1}onBeforeShadow(e,t,i,r,s,o){this.onBeforeRender(e,null,r,s,o)}}class Qr extends fr{static get type(){return"LineBasicMaterial"}constructor(e){super(),this.isLineBasicMaterial=!0,this.color=new pt(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const a_=new K,l_=new K,oL=new Bt,Rp=new Af,zv=new Lr,vT=new K,aL=new K;class ac extends In{constructor(e=new rn,t=new Qr){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,i=[0];for(let r=1,s=t.count;r<s;r++)a_.fromBufferAttribute(t,r-1),l_.fromBufferAttribute(t,r),i[r]=i[r-1],i[r]+=a_.distanceTo(l_);e.setAttribute("lineDistance",new Et(i,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,t){const i=this.geometry,r=this.matrixWorld,s=e.params.Line.threshold,o=i.drawRange;if(i.boundingSphere===null&&i.computeBoundingSphere(),zv.copy(i.boundingSphere),zv.applyMatrix4(r),zv.radius+=s,e.ray.intersectsSphere(zv)===!1)return;oL.copy(r).invert(),Rp.copy(e.ray).applyMatrix4(oL);const a=s/((this.scale.x+this.scale.y+this.scale.z)/3),l=a*a,c=this.isLineSegments?2:1,u=i.index,m=i.attributes.position;if(u!==null){const g=Math.max(0,o.start),x=Math.min(u.count,o.start+o.count);for(let b=g,w=x-1;b<w;b+=c){const v=u.getX(b),S=u.getX(b+1),E=Hv(this,e,Rp,l,v,S);E&&t.push(E)}if(this.isLineLoop){const b=u.getX(x-1),w=u.getX(g),v=Hv(this,e,Rp,l,b,w);v&&t.push(v)}}else{const g=Math.max(0,o.start),x=Math.min(m.count,o.start+o.count);for(let b=g,w=x-1;b<w;b+=c){const v=Hv(this,e,Rp,l,b,b+1);v&&t.push(v)}if(this.isLineLoop){const b=Hv(this,e,Rp,l,x-1,g);b&&t.push(b)}}}updateMorphTargets(){const t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){const r=t[i[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=r.length;s<o;s++){const a=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}}function Hv(n,e,t,i,r,s){const o=n.geometry.attributes.position;if(a_.fromBufferAttribute(o,r),l_.fromBufferAttribute(o,s),t.distanceSqToSegment(a_,l_,vT,aL)>i)return;vT.applyMatrix4(n.matrixWorld);const l=e.ray.origin.distanceTo(vT);if(!(l<e.near||l>e.far))return{distance:l,point:aL.clone().applyMatrix4(n.matrixWorld),index:r,face:null,faceIndex:null,barycoord:null,object:n}}const lL=new K,cL=new K;class la extends ac{constructor(e,t){super(e,t),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,i=[];for(let r=0,s=t.count;r<s;r+=2)lL.fromBufferAttribute(t,r),cL.fromBufferAttribute(t,r+1),i[r]=r===0?0:i[r-1],i[r+1]=i[r]+lL.distanceTo(cL);e.setAttribute("lineDistance",new Et(i,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class Uj extends ac{constructor(e,t){super(e,t),this.isLineLoop=!0,this.type="LineLoop"}}class _w extends fr{static get type(){return"PointsMaterial"}constructor(e){super(),this.isPointsMaterial=!0,this.color=new pt(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}const uL=new Bt,pE=new Af,Gv=new Lr,Wv=new K;let Fj=class extends In{constructor(e=new rn,t=new _w){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=t,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}raycast(e,t){const i=this.geometry,r=this.matrixWorld,s=e.params.Points.threshold,o=i.drawRange;if(i.boundingSphere===null&&i.computeBoundingSphere(),Gv.copy(i.boundingSphere),Gv.applyMatrix4(r),Gv.radius+=s,e.ray.intersectsSphere(Gv)===!1)return;uL.copy(r).invert(),pE.copy(e.ray).applyMatrix4(uL);const a=s/((this.scale.x+this.scale.y+this.scale.z)/3),l=a*a,c=i.index,f=i.attributes.position;if(c!==null){const m=Math.max(0,o.start),g=Math.min(c.count,o.start+o.count);for(let x=m,b=g;x<b;x++){const w=c.getX(x);Wv.fromBufferAttribute(f,w),hL(Wv,w,l,r,e,t,this)}}else{const m=Math.max(0,o.start),g=Math.min(f.count,o.start+o.count);for(let x=m,b=g;x<b;x++)Wv.fromBufferAttribute(f,x),hL(Wv,x,l,r,e,t,this)}}updateMorphTargets(){const t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){const r=t[i[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=r.length;s<o;s++){const a=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}};function hL(n,e,t,i,r,s,o){const a=pE.distanceSqToPoint(n);if(a<t){const l=new K;pE.closestPointToPoint(n,l),l.applyMatrix4(i);const c=r.ray.origin.distanceTo(l);if(c<r.near||c>r.far)return;s.push({distance:c,distanceToRay:Math.sqrt(a),point:l,index:e,face:null,faceIndex:null,barycoord:null,object:o})}}class fJ extends hi{constructor(e,t,i,r,s,o,a,l,c){super(e,t,i,r,s,o,a,l,c),this.isVideoTexture=!0,this.minFilter=o!==void 0?o:Wi,this.magFilter=s!==void 0?s:Wi,this.generateMipmaps=!1;const u=this;function f(){u.needsUpdate=!0,e.requestVideoFrameCallback(f)}"requestVideoFrameCallback"in e&&e.requestVideoFrameCallback(f)}clone(){return new this.constructor(this.image).copy(this)}update(){const e=this.image;"requestVideoFrameCallback"in e===!1&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}class pJ extends hi{constructor(e,t){super({width:e,height:t}),this.isFramebufferTexture=!0,this.magFilter=ur,this.minFilter=ur,this.generateMipmaps=!1,this.needsUpdate=!0}}class ww extends hi{constructor(e,t,i,r,s,o,a,l,c,u,f,m){super(null,o,a,l,c,u,r,s,f,m),this.isCompressedTexture=!0,this.image={width:t,height:i},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}}class mJ extends ww{constructor(e,t,i,r,s,o){super(e,t,i,s,o),this.isCompressedArrayTexture=!0,this.image.depth=r,this.wrapR=io,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}}class gJ extends ww{constructor(e,t,i){super(void 0,e[0].width,e[0].height,t,i,Ya),this.isCompressedCubeTexture=!0,this.isCubeTexture=!0,this.image=e}}class yJ extends hi{constructor(e,t,i,r,s,o,a,l,c){super(e,t,i,r,s,o,a,l,c),this.isCanvasTexture=!0,this.needsUpdate=!0}}class Do{constructor(){this.type="Curve",this.arcLengthDivisions=200}getPoint(){return console.warn("THREE.Curve: .getPoint() not implemented."),null}getPointAt(e,t){const i=this.getUtoTmapping(e);return this.getPoint(i,t)}getPoints(e=5){const t=[];for(let i=0;i<=e;i++)t.push(this.getPoint(i/e));return t}getSpacedPoints(e=5){const t=[];for(let i=0;i<=e;i++)t.push(this.getPointAt(i/e));return t}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const t=[];let i,r=this.getPoint(0),s=0;t.push(0);for(let o=1;o<=e;o++)i=this.getPoint(o/e),s+=i.distanceTo(r),t.push(s),r=i;return this.cacheArcLengths=t,t}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,t){const i=this.getLengths();let r=0;const s=i.length;let o;t?o=t:o=e*i[s-1];let a=0,l=s-1,c;for(;a<=l;)if(r=Math.floor(a+(l-a)/2),c=i[r]-o,c<0)a=r+1;else if(c>0)l=r-1;else{l=r;break}if(r=l,i[r]===o)return r/(s-1);const u=i[r],m=i[r+1]-u,g=(o-u)/m;return(r+g)/(s-1)}getTangent(e,t){let r=e-1e-4,s=e+1e-4;r<0&&(r=0),s>1&&(s=1);const o=this.getPoint(r),a=this.getPoint(s),l=t||(o.isVector2?new De:new K);return l.copy(a).sub(o).normalize(),l}getTangentAt(e,t){const i=this.getUtoTmapping(e);return this.getTangent(i,t)}computeFrenetFrames(e,t){const i=new K,r=[],s=[],o=[],a=new K,l=new Bt;for(let g=0;g<=e;g++){const x=g/e;r[g]=this.getTangentAt(x,new K)}s[0]=new K,o[0]=new K;let c=Number.MAX_VALUE;const u=Math.abs(r[0].x),f=Math.abs(r[0].y),m=Math.abs(r[0].z);u<=c&&(c=u,i.set(1,0,0)),f<=c&&(c=f,i.set(0,1,0)),m<=c&&i.set(0,0,1),a.crossVectors(r[0],i).normalize(),s[0].crossVectors(r[0],a),o[0].crossVectors(r[0],s[0]);for(let g=1;g<=e;g++){if(s[g]=s[g-1].clone(),o[g]=o[g-1].clone(),a.crossVectors(r[g-1],r[g]),a.length()>Number.EPSILON){a.normalize();const x=Math.acos(yi(r[g-1].dot(r[g]),-1,1));s[g].applyMatrix4(l.makeRotationAxis(a,x))}o[g].crossVectors(r[g],s[g])}if(t===!0){let g=Math.acos(yi(s[0].dot(s[e]),-1,1));g/=e,r[0].dot(a.crossVectors(s[0],s[e]))>0&&(g=-g);for(let x=1;x<=e;x++)s[x].applyMatrix4(l.makeRotationAxis(r[x],g*x)),o[x].crossVectors(r[x],s[x])}return{tangents:r,normals:s,binormals:o}}clone(){return new this.constructor().copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.6,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class bw extends Do{constructor(e=0,t=0,i=1,r=1,s=0,o=Math.PI*2,a=!1,l=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=e,this.aY=t,this.xRadius=i,this.yRadius=r,this.aStartAngle=s,this.aEndAngle=o,this.aClockwise=a,this.aRotation=l}getPoint(e,t=new De){const i=t,r=Math.PI*2;let s=this.aEndAngle-this.aStartAngle;const o=Math.abs(s)<Number.EPSILON;for(;s<0;)s+=r;for(;s>r;)s-=r;s<Number.EPSILON&&(o?s=0:s=r),this.aClockwise===!0&&!o&&(s===r?s=-r:s=s-r);const a=this.aStartAngle+e*s;let l=this.aX+this.xRadius*Math.cos(a),c=this.aY+this.yRadius*Math.sin(a);if(this.aRotation!==0){const u=Math.cos(this.aRotation),f=Math.sin(this.aRotation),m=l-this.aX,g=c-this.aY;l=m*u-g*f+this.aX,c=m*f+g*u+this.aY}return i.set(l,c)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}class jj extends bw{constructor(e,t,i,r,s,o){super(e,t,i,i,r,s,o),this.isArcCurve=!0,this.type="ArcCurve"}}function HA(){let n=0,e=0,t=0,i=0;function r(s,o,a,l){n=s,e=a,t=-3*s+3*o-2*a-l,i=2*s-2*o+a+l}return{initCatmullRom:function(s,o,a,l,c){r(o,a,c*(a-s),c*(l-o))},initNonuniformCatmullRom:function(s,o,a,l,c,u,f){let m=(o-s)/c-(a-s)/(c+u)+(a-o)/u,g=(a-o)/u-(l-o)/(u+f)+(l-a)/f;m*=u,g*=u,r(o,a,m,g)},calc:function(s){const o=s*s,a=o*s;return n+e*s+t*o+i*a}}}const qv=new K,xT=new HA,_T=new HA,wT=new HA;class Vj extends Do{constructor(e=[],t=!1,i="centripetal",r=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=e,this.closed=t,this.curveType=i,this.tension=r}getPoint(e,t=new K){const i=t,r=this.points,s=r.length,o=(s-(this.closed?0:1))*e;let a=Math.floor(o),l=o-a;this.closed?a+=a>0?0:(Math.floor(Math.abs(a)/s)+1)*s:l===0&&a===s-1&&(a=s-2,l=1);let c,u;this.closed||a>0?c=r[(a-1)%s]:(qv.subVectors(r[0],r[1]).add(r[0]),c=qv);const f=r[a%s],m=r[(a+1)%s];if(this.closed||a+2<s?u=r[(a+2)%s]:(qv.subVectors(r[s-1],r[s-2]).add(r[s-1]),u=qv),this.curveType==="centripetal"||this.curveType==="chordal"){const g=this.curveType==="chordal"?.5:.25;let x=Math.pow(c.distanceToSquared(f),g),b=Math.pow(f.distanceToSquared(m),g),w=Math.pow(m.distanceToSquared(u),g);b<1e-4&&(b=1),x<1e-4&&(x=b),w<1e-4&&(w=b),xT.initNonuniformCatmullRom(c.x,f.x,m.x,u.x,x,b,w),_T.initNonuniformCatmullRom(c.y,f.y,m.y,u.y,x,b,w),wT.initNonuniformCatmullRom(c.z,f.z,m.z,u.z,x,b,w)}else this.curveType==="catmullrom"&&(xT.initCatmullRom(c.x,f.x,m.x,u.x,this.tension),_T.initCatmullRom(c.y,f.y,m.y,u.y,this.tension),wT.initCatmullRom(c.z,f.z,m.z,u.z,this.tension));return i.set(xT.calc(l),_T.calc(l),wT.calc(l)),i}copy(e){super.copy(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const r=e.points[t];this.points.push(r.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,i=this.points.length;t<i;t++){const r=this.points[t];e.points.push(r.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const r=e.points[t];this.points.push(new K().fromArray(r))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}function dL(n,e,t,i,r){const s=(i-e)*.5,o=(r-t)*.5,a=n*n,l=n*a;return(2*t-2*i+s+o)*l+(-3*t+3*i-2*s-o)*a+s*n+t}function vJ(n,e){const t=1-n;return t*t*e}function xJ(n,e){return 2*(1-n)*n*e}function _J(n,e){return n*n*e}function vm(n,e,t,i){return vJ(n,e)+xJ(n,t)+_J(n,i)}function wJ(n,e){const t=1-n;return t*t*t*e}function bJ(n,e){const t=1-n;return 3*t*t*n*e}function SJ(n,e){return 3*(1-n)*n*n*e}function TJ(n,e){return n*n*n*e}function xm(n,e,t,i,r){return wJ(n,e)+bJ(n,t)+SJ(n,i)+TJ(n,r)}class GA extends Do{constructor(e=new De,t=new De,i=new De,r=new De){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=e,this.v1=t,this.v2=i,this.v3=r}getPoint(e,t=new De){const i=t,r=this.v0,s=this.v1,o=this.v2,a=this.v3;return i.set(xm(e,r.x,s.x,o.x,a.x),xm(e,r.y,s.y,o.y,a.y)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class Bj extends Do{constructor(e=new K,t=new K,i=new K,r=new K){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=e,this.v1=t,this.v2=i,this.v3=r}getPoint(e,t=new K){const i=t,r=this.v0,s=this.v1,o=this.v2,a=this.v3;return i.set(xm(e,r.x,s.x,o.x,a.x),xm(e,r.y,s.y,o.y,a.y),xm(e,r.z,s.z,o.z,a.z)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class WA extends Do{constructor(e=new De,t=new De){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=e,this.v2=t}getPoint(e,t=new De){const i=t;return e===1?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(e).add(this.v1)),i}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new De){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class zj extends Do{constructor(e=new K,t=new K){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=e,this.v2=t}getPoint(e,t=new K){const i=t;return e===1?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(e).add(this.v1)),i}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new K){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class qA extends Do{constructor(e=new De,t=new De,i=new De){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=e,this.v1=t,this.v2=i}getPoint(e,t=new De){const i=t,r=this.v0,s=this.v1,o=this.v2;return i.set(vm(e,r.x,s.x,o.x),vm(e,r.y,s.y,o.y)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class $A extends Do{constructor(e=new K,t=new K,i=new K){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=e,this.v1=t,this.v2=i}getPoint(e,t=new K){const i=t,r=this.v0,s=this.v1,o=this.v2;return i.set(vm(e,r.x,s.x,o.x),vm(e,r.y,s.y,o.y),vm(e,r.z,s.z,o.z)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class XA extends Do{constructor(e=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=e}getPoint(e,t=new De){const i=t,r=this.points,s=(r.length-1)*e,o=Math.floor(s),a=s-o,l=r[o===0?o:o-1],c=r[o],u=r[o>r.length-2?r.length-1:o+1],f=r[o>r.length-3?r.length-1:o+2];return i.set(dL(a,l.x,c.x,u.x,f.x),dL(a,l.y,c.y,u.y,f.y)),i}copy(e){super.copy(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const r=e.points[t];this.points.push(r.clone())}return this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,i=this.points.length;t<i;t++){const r=this.points[t];e.points.push(r.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const r=e.points[t];this.points.push(new De().fromArray(r))}return this}}var c_=Object.freeze({__proto__:null,ArcCurve:jj,CatmullRomCurve3:Vj,CubicBezierCurve:GA,CubicBezierCurve3:Bj,EllipseCurve:bw,LineCurve:WA,LineCurve3:zj,QuadraticBezierCurve:qA,QuadraticBezierCurve3:$A,SplineCurve:XA});class Hj extends Do{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){const e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);if(!e.equals(t)){const i=e.isVector2===!0?"LineCurve":"LineCurve3";this.curves.push(new c_[i](t,e))}return this}getPoint(e,t){const i=e*this.getLength(),r=this.getCurveLengths();let s=0;for(;s<r.length;){if(r[s]>=i){const o=r[s]-i,a=this.curves[s],l=a.getLength(),c=l===0?0:1-o/l;return a.getPointAt(c,t)}s++}return null}getLength(){const e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let t=0;for(let i=0,r=this.curves.length;i<r;i++)t+=this.curves[i].getLength(),e.push(t);return this.cacheLengths=e,e}getSpacedPoints(e=40){const t=[];for(let i=0;i<=e;i++)t.push(this.getPoint(i/e));return this.autoClose&&t.push(t[0]),t}getPoints(e=12){const t=[];let i;for(let r=0,s=this.curves;r<s.length;r++){const o=s[r],a=o.isEllipseCurve?e*2:o.isLineCurve||o.isLineCurve3?1:o.isSplineCurve?e*o.points.length:e,l=o.getPoints(a);for(let c=0;c<l.length;c++){const u=l[c];i&&i.equals(u)||(t.push(u),i=u)}}return this.autoClose&&t.length>1&&!t[t.length-1].equals(t[0])&&t.push(t[0]),t}copy(e){super.copy(e),this.curves=[];for(let t=0,i=e.curves.length;t<i;t++){const r=e.curves[t];this.curves.push(r.clone())}return this.autoClose=e.autoClose,this}toJSON(){const e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let t=0,i=this.curves.length;t<i;t++){const r=this.curves[t];e.curves.push(r.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let t=0,i=e.curves.length;t<i;t++){const r=e.curves[t];this.curves.push(new c_[r.type]().fromJSON(r))}return this}}class sg extends Hj{constructor(e){super(),this.type="Path",this.currentPoint=new De,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let t=1,i=e.length;t<i;t++)this.lineTo(e[t].x,e[t].y);return this}moveTo(e,t){return this.currentPoint.set(e,t),this}lineTo(e,t){const i=new WA(this.currentPoint.clone(),new De(e,t));return this.curves.push(i),this.currentPoint.set(e,t),this}quadraticCurveTo(e,t,i,r){const s=new qA(this.currentPoint.clone(),new De(e,t),new De(i,r));return this.curves.push(s),this.currentPoint.set(i,r),this}bezierCurveTo(e,t,i,r,s,o){const a=new GA(this.currentPoint.clone(),new De(e,t),new De(i,r),new De(s,o));return this.curves.push(a),this.currentPoint.set(s,o),this}splineThru(e){const t=[this.currentPoint.clone()].concat(e),i=new XA(t);return this.curves.push(i),this.currentPoint.copy(e[e.length-1]),this}arc(e,t,i,r,s,o){const a=this.currentPoint.x,l=this.currentPoint.y;return this.absarc(e+a,t+l,i,r,s,o),this}absarc(e,t,i,r,s,o){return this.absellipse(e,t,i,i,r,s,o),this}ellipse(e,t,i,r,s,o,a,l){const c=this.currentPoint.x,u=this.currentPoint.y;return this.absellipse(e+c,t+u,i,r,s,o,a,l),this}absellipse(e,t,i,r,s,o,a,l){const c=new bw(e,t,i,r,s,o,a,l);if(this.curves.length>0){const f=c.getPoint(0);f.equals(this.currentPoint)||this.lineTo(f.x,f.y)}this.curves.push(c);const u=c.getPoint(1);return this.currentPoint.copy(u),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){const e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}}class Hg extends rn{constructor(e=[new De(0,-.5),new De(.5,0),new De(0,.5)],t=12,i=0,r=Math.PI*2){super(),this.type="LatheGeometry",this.parameters={points:e,segments:t,phiStart:i,phiLength:r},t=Math.floor(t),r=yi(r,0,Math.PI*2);const s=[],o=[],a=[],l=[],c=[],u=1/t,f=new K,m=new De,g=new K,x=new K,b=new K;let w=0,v=0;for(let S=0;S<=e.length-1;S++)switch(S){case 0:w=e[S+1].x-e[S].x,v=e[S+1].y-e[S].y,g.x=v*1,g.y=-w,g.z=v*0,b.copy(g),g.normalize(),l.push(g.x,g.y,g.z);break;case e.length-1:l.push(b.x,b.y,b.z);break;default:w=e[S+1].x-e[S].x,v=e[S+1].y-e[S].y,g.x=v*1,g.y=-w,g.z=v*0,x.copy(g),g.x+=b.x,g.y+=b.y,g.z+=b.z,g.normalize(),l.push(g.x,g.y,g.z),b.copy(x)}for(let S=0;S<=t;S++){const E=i+S*u*r,C=Math.sin(E),V=Math.cos(E);for(let L=0;L<=e.length-1;L++){f.x=e[L].x*C,f.y=e[L].y,f.z=e[L].x*V,o.push(f.x,f.y,f.z),m.x=S/t,m.y=L/(e.length-1),a.push(m.x,m.y);const N=l[3*L+0]*C,I=l[3*L+1],A=l[3*L+0]*V;c.push(N,I,A)}}for(let S=0;S<t;S++)for(let E=0;E<e.length-1;E++){const C=E+S*e.length,V=C,L=C+e.length,N=C+e.length+1,I=C+1;s.push(V,L,I),s.push(N,I,L)}this.setIndex(s),this.setAttribute("position",new Et(o,3)),this.setAttribute("uv",new Et(a,2)),this.setAttribute("normal",new Et(c,3))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Hg(e.points,e.segments,e.phiStart,e.phiLength)}}class Sw extends Hg{constructor(e=1,t=1,i=4,r=8){const s=new sg;s.absarc(0,-t/2,e,Math.PI*1.5,0),s.absarc(0,t/2,e,0,Math.PI*.5),super(s.getPoints(i),r),this.type="CapsuleGeometry",this.parameters={radius:e,length:t,capSegments:i,radialSegments:r}}static fromJSON(e){return new Sw(e.radius,e.length,e.capSegments,e.radialSegments)}}class Tw extends rn{constructor(e=1,t=32,i=0,r=Math.PI*2){super(),this.type="CircleGeometry",this.parameters={radius:e,segments:t,thetaStart:i,thetaLength:r},t=Math.max(3,t);const s=[],o=[],a=[],l=[],c=new K,u=new De;o.push(0,0,0),a.push(0,0,1),l.push(.5,.5);for(let f=0,m=3;f<=t;f++,m+=3){const g=i+f/t*r;c.x=e*Math.cos(g),c.y=e*Math.sin(g),o.push(c.x,c.y,c.z),a.push(0,0,1),u.x=(o[m]/e+1)/2,u.y=(o[m+1]/e+1)/2,l.push(u.x,u.y)}for(let f=1;f<=t;f++)s.push(f,f+1,0);this.setIndex(s),this.setAttribute("position",new Et(o,3)),this.setAttribute("normal",new Et(a,3)),this.setAttribute("uv",new Et(l,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Tw(e.radius,e.segments,e.thetaStart,e.thetaLength)}}class Pf extends rn{constructor(e=1,t=1,i=1,r=32,s=1,o=!1,a=0,l=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:i,radialSegments:r,heightSegments:s,openEnded:o,thetaStart:a,thetaLength:l};const c=this;r=Math.floor(r),s=Math.floor(s);const u=[],f=[],m=[],g=[];let x=0;const b=[],w=i/2;let v=0;S(),o===!1&&(e>0&&E(!0),t>0&&E(!1)),this.setIndex(u),this.setAttribute("position",new Et(f,3)),this.setAttribute("normal",new Et(m,3)),this.setAttribute("uv",new Et(g,2));function S(){const C=new K,V=new K;let L=0;const N=(t-e)/i;for(let I=0;I<=s;I++){const A=[],M=I/s,D=M*(t-e)+e;for(let z=0;z<=r;z++){const j=z/r,te=j*l+a,he=Math.sin(te),de=Math.cos(te);V.x=D*he,V.y=-M*i+w,V.z=D*de,f.push(V.x,V.y,V.z),C.set(he,N,de).normalize(),m.push(C.x,C.y,C.z),g.push(j,1-M),A.push(x++)}b.push(A)}for(let I=0;I<r;I++)for(let A=0;A<s;A++){const M=b[A][I],D=b[A+1][I],z=b[A+1][I+1],j=b[A][I+1];(e>0||A!==0)&&(u.push(M,D,j),L+=3),(t>0||A!==s-1)&&(u.push(D,z,j),L+=3)}c.addGroup(v,L,0),v+=L}function E(C){const V=x,L=new De,N=new K;let I=0;const A=C===!0?e:t,M=C===!0?1:-1;for(let z=1;z<=r;z++)f.push(0,w*M,0),m.push(0,M,0),g.push(.5,.5),x++;const D=x;for(let z=0;z<=r;z++){const te=z/r*l+a,he=Math.cos(te),de=Math.sin(te);N.x=A*de,N.y=w*M,N.z=A*he,f.push(N.x,N.y,N.z),m.push(0,M,0),L.x=he*.5+.5,L.y=de*.5*M+.5,g.push(L.x,L.y),x++}for(let z=0;z<r;z++){const j=V+z,te=D+z;C===!0?u.push(te,te+1,j):u.push(te+1,te,j),I+=3}c.addGroup(v,I,C===!0?1:2),v+=I}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Pf(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class Ew extends Pf{constructor(e=1,t=1,i=32,r=1,s=!1,o=0,a=Math.PI*2){super(0,e,t,i,r,s,o,a),this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:i,heightSegments:r,openEnded:s,thetaStart:o,thetaLength:a}}static fromJSON(e){return new Ew(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class Ac extends rn{constructor(e=[],t=[],i=1,r=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:t,radius:i,detail:r};const s=[],o=[];a(r),c(i),u(),this.setAttribute("position",new Et(s,3)),this.setAttribute("normal",new Et(s.slice(),3)),this.setAttribute("uv",new Et(o,2)),r===0?this.computeVertexNormals():this.normalizeNormals();function a(S){const E=new K,C=new K,V=new K;for(let L=0;L<t.length;L+=3)g(t[L+0],E),g(t[L+1],C),g(t[L+2],V),l(E,C,V,S)}function l(S,E,C,V){const L=V+1,N=[];for(let I=0;I<=L;I++){N[I]=[];const A=S.clone().lerp(C,I/L),M=E.clone().lerp(C,I/L),D=L-I;for(let z=0;z<=D;z++)z===0&&I===L?N[I][z]=A:N[I][z]=A.clone().lerp(M,z/D)}for(let I=0;I<L;I++)for(let A=0;A<2*(L-I)-1;A++){const M=Math.floor(A/2);A%2===0?(m(N[I][M+1]),m(N[I+1][M]),m(N[I][M])):(m(N[I][M+1]),m(N[I+1][M+1]),m(N[I+1][M]))}}function c(S){const E=new K;for(let C=0;C<s.length;C+=3)E.x=s[C+0],E.y=s[C+1],E.z=s[C+2],E.normalize().multiplyScalar(S),s[C+0]=E.x,s[C+1]=E.y,s[C+2]=E.z}function u(){const S=new K;for(let E=0;E<s.length;E+=3){S.x=s[E+0],S.y=s[E+1],S.z=s[E+2];const C=w(S)/2/Math.PI+.5,V=v(S)/Math.PI+.5;o.push(C,1-V)}x(),f()}function f(){for(let S=0;S<o.length;S+=6){const E=o[S+0],C=o[S+2],V=o[S+4],L=Math.max(E,C,V),N=Math.min(E,C,V);L>.9&&N<.1&&(E<.2&&(o[S+0]+=1),C<.2&&(o[S+2]+=1),V<.2&&(o[S+4]+=1))}}function m(S){s.push(S.x,S.y,S.z)}function g(S,E){const C=S*3;E.x=e[C+0],E.y=e[C+1],E.z=e[C+2]}function x(){const S=new K,E=new K,C=new K,V=new K,L=new De,N=new De,I=new De;for(let A=0,M=0;A<s.length;A+=9,M+=6){S.set(s[A+0],s[A+1],s[A+2]),E.set(s[A+3],s[A+4],s[A+5]),C.set(s[A+6],s[A+7],s[A+8]),L.set(o[M+0],o[M+1]),N.set(o[M+2],o[M+3]),I.set(o[M+4],o[M+5]),V.copy(S).add(E).add(C).divideScalar(3);const D=w(V);b(L,M+0,S,D),b(N,M+2,E,D),b(I,M+4,C,D)}}function b(S,E,C,V){V<0&&S.x===1&&(o[E]=S.x-1),C.x===0&&C.z===0&&(o[E]=V/2/Math.PI+.5)}function w(S){return Math.atan2(S.z,-S.x)}function v(S){return Math.atan2(-S.y,Math.sqrt(S.x*S.x+S.z*S.z))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Ac(e.vertices,e.indices,e.radius,e.details)}}class Cw extends Ac{constructor(e=1,t=0){const i=(1+Math.sqrt(5))/2,r=1/i,s=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-r,-i,0,-r,i,0,r,-i,0,r,i,-r,-i,0,-r,i,0,r,-i,0,r,i,0,-i,0,-r,i,0,-r,-i,0,r,i,0,r],o=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];super(s,o,e,t),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new Cw(e.radius,e.detail)}}const $v=new K,Xv=new K,bT=new K,Yv=new cs;class Gj extends rn{constructor(e=null,t=1){if(super(),this.type="EdgesGeometry",this.parameters={geometry:e,thresholdAngle:t},e!==null){const r=Math.pow(10,4),s=Math.cos(Ou*t),o=e.getIndex(),a=e.getAttribute("position"),l=o?o.count:a.count,c=[0,0,0],u=["a","b","c"],f=new Array(3),m={},g=[];for(let x=0;x<l;x+=3){o?(c[0]=o.getX(x),c[1]=o.getX(x+1),c[2]=o.getX(x+2)):(c[0]=x,c[1]=x+1,c[2]=x+2);const{a:b,b:w,c:v}=Yv;if(b.fromBufferAttribute(a,c[0]),w.fromBufferAttribute(a,c[1]),v.fromBufferAttribute(a,c[2]),Yv.getNormal(bT),f[0]=`${Math.round(b.x*r)},${Math.round(b.y*r)},${Math.round(b.z*r)}`,f[1]=`${Math.round(w.x*r)},${Math.round(w.y*r)},${Math.round(w.z*r)}`,f[2]=`${Math.round(v.x*r)},${Math.round(v.y*r)},${Math.round(v.z*r)}`,!(f[0]===f[1]||f[1]===f[2]||f[2]===f[0]))for(let S=0;S<3;S++){const E=(S+1)%3,C=f[S],V=f[E],L=Yv[u[S]],N=Yv[u[E]],I=`${C}_${V}`,A=`${V}_${C}`;A in m&&m[A]?(bT.dot(m[A].normal)<=s&&(g.push(L.x,L.y,L.z),g.push(N.x,N.y,N.z)),m[A]=null):I in m||(m[I]={index0:c[S],index1:c[E],normal:bT.clone()})}}for(const x in m)if(m[x]){const{index0:b,index1:w}=m[x];$v.fromBufferAttribute(a,b),Xv.fromBufferAttribute(a,w),g.push($v.x,$v.y,$v.z),g.push(Xv.x,Xv.y,Xv.z)}this.setAttribute("position",new Et(g,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}class Fu extends sg{constructor(e){super(e),this.uuid=ks(),this.type="Shape",this.holes=[]}getPointsHoles(e){const t=[];for(let i=0,r=this.holes.length;i<r;i++)t[i]=this.holes[i].getPoints(e);return t}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let t=0,i=e.holes.length;t<i;t++){const r=e.holes[t];this.holes.push(r.clone())}return this}toJSON(){const e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let t=0,i=this.holes.length;t<i;t++){const r=this.holes[t];e.holes.push(r.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let t=0,i=e.holes.length;t<i;t++){const r=e.holes[t];this.holes.push(new sg().fromJSON(r))}return this}}const EJ={triangulate:function(n,e,t=2){const i=e&&e.length,r=i?e[0]*t:n.length;let s=Wj(n,0,r,t,!0);const o=[];if(!s||s.next===s.prev)return o;let a,l,c,u,f,m,g;if(i&&(s=PJ(n,e,s,t)),n.length>80*t){a=c=n[0],l=u=n[1];for(let x=t;x<r;x+=t)f=n[x],m=n[x+1],f<a&&(a=f),m<l&&(l=m),f>c&&(c=f),m>u&&(u=m);g=Math.max(c-a,u-l),g=g!==0?32767/g:0}return og(s,o,t,a,l,g,0),o}};function Wj(n,e,t,i,r){let s,o;if(r===BJ(n,e,t,i)>0)for(s=e;s<t;s+=i)o=fL(s,n[s],n[s+1],o);else for(s=t-i;s>=e;s-=i)o=fL(s,n[s],n[s+1],o);return o&&Aw(o,o.next)&&(lg(o),o=o.next),o}function Zu(n,e){if(!n)return n;e||(e=n);let t=n,i;do if(i=!1,!t.steiner&&(Aw(t,t.next)||li(t.prev,t,t.next)===0)){if(lg(t),t=e=t.prev,t===t.next)break;i=!0}else t=t.next;while(i||t!==e);return e}function og(n,e,t,i,r,s,o){if(!n)return;!o&&s&&kJ(n,i,r,s);let a=n,l,c;for(;n.prev!==n.next;){if(l=n.prev,c=n.next,s?AJ(n,i,r,s):CJ(n)){e.push(l.i/t|0),e.push(n.i/t|0),e.push(c.i/t|0),lg(n),n=c.next,a=c.next;continue}if(n=c,n===a){o?o===1?(n=MJ(Zu(n),e,t),og(n,e,t,i,r,s,2)):o===2&&IJ(n,e,t,i,r,s):og(Zu(n),e,t,i,r,s,1);break}}}function CJ(n){const e=n.prev,t=n,i=n.next;if(li(e,t,i)>=0)return!1;const r=e.x,s=t.x,o=i.x,a=e.y,l=t.y,c=i.y,u=r<s?r<o?r:o:s<o?s:o,f=a<l?a<c?a:c:l<c?l:c,m=r>s?r>o?r:o:s>o?s:o,g=a>l?a>c?a:c:l>c?l:c;let x=i.next;for(;x!==e;){if(x.x>=u&&x.x<=m&&x.y>=f&&x.y<=g&&Id(r,a,s,l,o,c,x.x,x.y)&&li(x.prev,x,x.next)>=0)return!1;x=x.next}return!0}function AJ(n,e,t,i){const r=n.prev,s=n,o=n.next;if(li(r,s,o)>=0)return!1;const a=r.x,l=s.x,c=o.x,u=r.y,f=s.y,m=o.y,g=a<l?a<c?a:c:l<c?l:c,x=u<f?u<m?u:m:f<m?f:m,b=a>l?a>c?a:c:l>c?l:c,w=u>f?u>m?u:m:f>m?f:m,v=mE(g,x,e,t,i),S=mE(b,w,e,t,i);let E=n.prevZ,C=n.nextZ;for(;E&&E.z>=v&&C&&C.z<=S;){if(E.x>=g&&E.x<=b&&E.y>=x&&E.y<=w&&E!==r&&E!==o&&Id(a,u,l,f,c,m,E.x,E.y)&&li(E.prev,E,E.next)>=0||(E=E.prevZ,C.x>=g&&C.x<=b&&C.y>=x&&C.y<=w&&C!==r&&C!==o&&Id(a,u,l,f,c,m,C.x,C.y)&&li(C.prev,C,C.next)>=0))return!1;C=C.nextZ}for(;E&&E.z>=v;){if(E.x>=g&&E.x<=b&&E.y>=x&&E.y<=w&&E!==r&&E!==o&&Id(a,u,l,f,c,m,E.x,E.y)&&li(E.prev,E,E.next)>=0)return!1;E=E.prevZ}for(;C&&C.z<=S;){if(C.x>=g&&C.x<=b&&C.y>=x&&C.y<=w&&C!==r&&C!==o&&Id(a,u,l,f,c,m,C.x,C.y)&&li(C.prev,C,C.next)>=0)return!1;C=C.nextZ}return!0}function MJ(n,e,t){let i=n;do{const r=i.prev,s=i.next.next;!Aw(r,s)&&qj(r,i,i.next,s)&&ag(r,s)&&ag(s,r)&&(e.push(r.i/t|0),e.push(i.i/t|0),e.push(s.i/t|0),lg(i),lg(i.next),i=n=s),i=i.next}while(i!==n);return Zu(i)}function IJ(n,e,t,i,r,s){let o=n;do{let a=o.next.next;for(;a!==o.prev;){if(o.i!==a.i&&FJ(o,a)){let l=$j(o,a);o=Zu(o,o.next),l=Zu(l,l.next),og(o,e,t,i,r,s,0),og(l,e,t,i,r,s,0);return}a=a.next}o=o.next}while(o!==n)}function PJ(n,e,t,i){const r=[];let s,o,a,l,c;for(s=0,o=e.length;s<o;s++)a=e[s]*i,l=s<o-1?e[s+1]*i:n.length,c=Wj(n,a,l,i,!1),c===c.next&&(c.steiner=!0),r.push(UJ(c));for(r.sort(RJ),s=0;s<r.length;s++)t=NJ(r[s],t);return t}function RJ(n,e){return n.x-e.x}function NJ(n,e){const t=LJ(n,e);if(!t)return e;const i=$j(t,n);return Zu(i,i.next),Zu(t,t.next)}function LJ(n,e){let t=e,i=-1/0,r;const s=n.x,o=n.y;do{if(o<=t.y&&o>=t.next.y&&t.next.y!==t.y){const m=t.x+(o-t.y)*(t.next.x-t.x)/(t.next.y-t.y);if(m<=s&&m>i&&(i=m,r=t.x<t.next.x?t:t.next,m===s))return r}t=t.next}while(t!==e);if(!r)return null;const a=r,l=r.x,c=r.y;let u=1/0,f;t=r;do s>=t.x&&t.x>=l&&s!==t.x&&Id(o<c?s:i,o,l,c,o<c?i:s,o,t.x,t.y)&&(f=Math.abs(o-t.y)/(s-t.x),ag(t,n)&&(f<u||f===u&&(t.x>r.x||t.x===r.x&&DJ(r,t)))&&(r=t,u=f)),t=t.next;while(t!==a);return r}function DJ(n,e){return li(n.prev,n,e.prev)<0&&li(e.next,n,n.next)<0}function kJ(n,e,t,i){let r=n;do r.z===0&&(r.z=mE(r.x,r.y,e,t,i)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next;while(r!==n);r.prevZ.nextZ=null,r.prevZ=null,OJ(r)}function OJ(n){let e,t,i,r,s,o,a,l,c=1;do{for(t=n,n=null,s=null,o=0;t;){for(o++,i=t,a=0,e=0;e<c&&(a++,i=i.nextZ,!!i);e++);for(l=c;a>0||l>0&&i;)a!==0&&(l===0||!i||t.z<=i.z)?(r=t,t=t.nextZ,a--):(r=i,i=i.nextZ,l--),s?s.nextZ=r:n=r,r.prevZ=s,s=r;t=i}s.nextZ=null,c*=2}while(o>1);return n}function mE(n,e,t,i,r){return n=(n-t)*r|0,e=(e-i)*r|0,n=(n|n<<8)&16711935,n=(n|n<<4)&252645135,n=(n|n<<2)&858993459,n=(n|n<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,n|e<<1}function UJ(n){let e=n,t=n;do(e.x<t.x||e.x===t.x&&e.y<t.y)&&(t=e),e=e.next;while(e!==n);return t}function Id(n,e,t,i,r,s,o,a){return(r-o)*(e-a)>=(n-o)*(s-a)&&(n-o)*(i-a)>=(t-o)*(e-a)&&(t-o)*(s-a)>=(r-o)*(i-a)}function FJ(n,e){return n.next.i!==e.i&&n.prev.i!==e.i&&!jJ(n,e)&&(ag(n,e)&&ag(e,n)&&VJ(n,e)&&(li(n.prev,n,e.prev)||li(n,e.prev,e))||Aw(n,e)&&li(n.prev,n,n.next)>0&&li(e.prev,e,e.next)>0)}function li(n,e,t){return(e.y-n.y)*(t.x-e.x)-(e.x-n.x)*(t.y-e.y)}function Aw(n,e){return n.x===e.x&&n.y===e.y}function qj(n,e,t,i){const r=Jv(li(n,e,t)),s=Jv(li(n,e,i)),o=Jv(li(t,i,n)),a=Jv(li(t,i,e));return!!(r!==s&&o!==a||r===0&&Kv(n,t,e)||s===0&&Kv(n,i,e)||o===0&&Kv(t,n,i)||a===0&&Kv(t,e,i))}function Kv(n,e,t){return e.x<=Math.max(n.x,t.x)&&e.x>=Math.min(n.x,t.x)&&e.y<=Math.max(n.y,t.y)&&e.y>=Math.min(n.y,t.y)}function Jv(n){return n>0?1:n<0?-1:0}function jJ(n,e){let t=n;do{if(t.i!==n.i&&t.next.i!==n.i&&t.i!==e.i&&t.next.i!==e.i&&qj(t,t.next,n,e))return!0;t=t.next}while(t!==n);return!1}function ag(n,e){return li(n.prev,n,n.next)<0?li(n,e,n.next)>=0&&li(n,n.prev,e)>=0:li(n,e,n.prev)<0||li(n,n.next,e)<0}function VJ(n,e){let t=n,i=!1;const r=(n.x+e.x)/2,s=(n.y+e.y)/2;do t.y>s!=t.next.y>s&&t.next.y!==t.y&&r<(t.next.x-t.x)*(s-t.y)/(t.next.y-t.y)+t.x&&(i=!i),t=t.next;while(t!==n);return i}function $j(n,e){const t=new gE(n.i,n.x,n.y),i=new gE(e.i,e.x,e.y),r=n.next,s=e.prev;return n.next=e,e.prev=n,t.next=r,r.prev=t,i.next=t,t.prev=i,s.next=i,i.prev=s,i}function fL(n,e,t,i){const r=new gE(n,e,t);return i?(r.next=i.next,r.prev=i,i.next.prev=r,i.next=r):(r.prev=r,r.next=r),r}function lg(n){n.next.prev=n.prev,n.prev.next=n.next,n.prevZ&&(n.prevZ.nextZ=n.nextZ),n.nextZ&&(n.nextZ.prevZ=n.prevZ)}function gE(n,e,t){this.i=n,this.x=e,this.y=t,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function BJ(n,e,t,i){let r=0;for(let s=e,o=t-i;s<t;s+=i)r+=(n[o]-n[s])*(n[s+1]+n[o+1]),o=s;return r}class Zo{static area(e){const t=e.length;let i=0;for(let r=t-1,s=0;s<t;r=s++)i+=e[r].x*e[s].y-e[s].x*e[r].y;return i*.5}static isClockWise(e){return Zo.area(e)<0}static triangulateShape(e,t){const i=[],r=[],s=[];pL(e),mL(i,e);let o=e.length;t.forEach(pL);for(let l=0;l<t.length;l++)r.push(o),o+=t[l].length,mL(i,t[l]);const a=EJ.triangulate(i,r);for(let l=0;l<a.length;l+=3)s.push(a.slice(l,l+3));return s}}function pL(n){const e=n.length;e>2&&n[e-1].equals(n[0])&&n.pop()}function mL(n,e){for(let t=0;t<e.length;t++)n.push(e[t].x),n.push(e[t].y)}class Mw extends rn{constructor(e=new Fu([new De(.5,.5),new De(-.5,.5),new De(-.5,-.5),new De(.5,-.5)]),t={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},e=Array.isArray(e)?e:[e];const i=this,r=[],s=[];for(let a=0,l=e.length;a<l;a++){const c=e[a];o(c)}this.setAttribute("position",new Et(r,3)),this.setAttribute("uv",new Et(s,2)),this.computeVertexNormals();function o(a){const l=[],c=t.curveSegments!==void 0?t.curveSegments:12,u=t.steps!==void 0?t.steps:1,f=t.depth!==void 0?t.depth:1;let m=t.bevelEnabled!==void 0?t.bevelEnabled:!0,g=t.bevelThickness!==void 0?t.bevelThickness:.2,x=t.bevelSize!==void 0?t.bevelSize:g-.1,b=t.bevelOffset!==void 0?t.bevelOffset:0,w=t.bevelSegments!==void 0?t.bevelSegments:3;const v=t.extrudePath,S=t.UVGenerator!==void 0?t.UVGenerator:zJ;let E,C=!1,V,L,N,I;v&&(E=v.getSpacedPoints(u),C=!0,m=!1,V=v.computeFrenetFrames(u,!1),L=new K,N=new K,I=new K),m||(w=0,g=0,x=0,b=0);const A=a.extractPoints(c);let M=A.shape;const D=A.holes;if(!Zo.isClockWise(M)){M=M.reverse();for(let Te=0,Me=D.length;Te<Me;Te++){const Q=D[Te];Zo.isClockWise(Q)&&(D[Te]=Q.reverse())}}const j=Zo.triangulateShape(M,D),te=M;for(let Te=0,Me=D.length;Te<Me;Te++){const Q=D[Te];M=M.concat(Q)}function he(Te,Me,Q){return Me||console.error("THREE.ExtrudeGeometry: vec does not exist"),Te.clone().addScaledVector(Me,Q)}const de=M.length,U=j.length;function F(Te,Me,Q){let nt,ke,Ze;const We=Te.x-Me.x,Mt=Te.y-Me.y,Ye=Q.x-Te.x,$=Q.y-Te.y,G=We*We+Mt*Mt,ue=We*$-Mt*Ye;if(Math.abs(ue)>Number.EPSILON){const be=Math.sqrt(G),Re=Math.sqrt(Ye*Ye+$*$),xe=Me.x-Mt/be,Ve=Me.y+We/be,Ge=Q.x-$/Re,st=Q.y+Ye/Re,$t=((Ge-xe)*$-(st-Ve)*Ye)/(We*$-Mt*Ye);nt=xe+We*$t-Te.x,ke=Ve+Mt*$t-Te.y;const je=nt*nt+ke*ke;if(je<=2)return new De(nt,ke);Ze=Math.sqrt(je/2)}else{let be=!1;We>Number.EPSILON?Ye>Number.EPSILON&&(be=!0):We<-Number.EPSILON?Ye<-Number.EPSILON&&(be=!0):Math.sign(Mt)===Math.sign($)&&(be=!0),be?(nt=-Mt,ke=We,Ze=Math.sqrt(G)):(nt=We,ke=Mt,Ze=Math.sqrt(G/2))}return new De(nt/Ze,ke/Ze)}const X=[];for(let Te=0,Me=te.length,Q=Me-1,nt=Te+1;Te<Me;Te++,Q++,nt++)Q===Me&&(Q=0),nt===Me&&(nt=0),X[Te]=F(te[Te],te[Q],te[nt]);const Y=[];let ne,fe=X.concat();for(let Te=0,Me=D.length;Te<Me;Te++){const Q=D[Te];ne=[];for(let nt=0,ke=Q.length,Ze=ke-1,We=nt+1;nt<ke;nt++,Ze++,We++)Ze===ke&&(Ze=0),We===ke&&(We=0),ne[nt]=F(Q[nt],Q[Ze],Q[We]);Y.push(ne),fe=fe.concat(ne)}for(let Te=0;Te<w;Te++){const Me=Te/w,Q=g*Math.cos(Me*Math.PI/2),nt=x*Math.sin(Me*Math.PI/2)+b;for(let ke=0,Ze=te.length;ke<Ze;ke++){const We=he(te[ke],X[ke],nt);Pe(We.x,We.y,-Q)}for(let ke=0,Ze=D.length;ke<Ze;ke++){const We=D[ke];ne=Y[ke];for(let Mt=0,Ye=We.length;Mt<Ye;Mt++){const $=he(We[Mt],ne[Mt],nt);Pe($.x,$.y,-Q)}}}const Ce=x+b;for(let Te=0;Te<de;Te++){const Me=m?he(M[Te],fe[Te],Ce):M[Te];C?(N.copy(V.normals[0]).multiplyScalar(Me.x),L.copy(V.binormals[0]).multiplyScalar(Me.y),I.copy(E[0]).add(N).add(L),Pe(I.x,I.y,I.z)):Pe(Me.x,Me.y,0)}for(let Te=1;Te<=u;Te++)for(let Me=0;Me<de;Me++){const Q=m?he(M[Me],fe[Me],Ce):M[Me];C?(N.copy(V.normals[Te]).multiplyScalar(Q.x),L.copy(V.binormals[Te]).multiplyScalar(Q.y),I.copy(E[Te]).add(N).add(L),Pe(I.x,I.y,I.z)):Pe(Q.x,Q.y,f/u*Te)}for(let Te=w-1;Te>=0;Te--){const Me=Te/w,Q=g*Math.cos(Me*Math.PI/2),nt=x*Math.sin(Me*Math.PI/2)+b;for(let ke=0,Ze=te.length;ke<Ze;ke++){const We=he(te[ke],X[ke],nt);Pe(We.x,We.y,f+Q)}for(let ke=0,Ze=D.length;ke<Ze;ke++){const We=D[ke];ne=Y[ke];for(let Mt=0,Ye=We.length;Mt<Ye;Mt++){const $=he(We[Mt],ne[Mt],nt);C?Pe($.x,$.y+E[u-1].y,E[u-1].x+Q):Pe($.x,$.y,f+Q)}}}ce(),Ee();function ce(){const Te=r.length/3;if(m){let Me=0,Q=de*Me;for(let nt=0;nt<U;nt++){const ke=j[nt];xt(ke[2]+Q,ke[1]+Q,ke[0]+Q)}Me=u+w*2,Q=de*Me;for(let nt=0;nt<U;nt++){const ke=j[nt];xt(ke[0]+Q,ke[1]+Q,ke[2]+Q)}}else{for(let Me=0;Me<U;Me++){const Q=j[Me];xt(Q[2],Q[1],Q[0])}for(let Me=0;Me<U;Me++){const Q=j[Me];xt(Q[0]+de*u,Q[1]+de*u,Q[2]+de*u)}}i.addGroup(Te,r.length/3-Te,0)}function Ee(){const Te=r.length/3;let Me=0;Oe(te,Me),Me+=te.length;for(let Q=0,nt=D.length;Q<nt;Q++){const ke=D[Q];Oe(ke,Me),Me+=ke.length}i.addGroup(Te,r.length/3-Te,1)}function Oe(Te,Me){let Q=Te.length;for(;--Q>=0;){const nt=Q;let ke=Q-1;ke<0&&(ke=Te.length-1);for(let Ze=0,We=u+w*2;Ze<We;Ze++){const Mt=de*Ze,Ye=de*(Ze+1),$=Me+nt+Mt,G=Me+ke+Mt,ue=Me+ke+Ye,be=Me+nt+Ye;Dt($,G,ue,be)}}}function Pe(Te,Me,Q){l.push(Te),l.push(Me),l.push(Q)}function xt(Te,Me,Q){lt(Te),lt(Me),lt(Q);const nt=r.length/3,ke=S.generateTopUV(i,r,nt-3,nt-2,nt-1);ze(ke[0]),ze(ke[1]),ze(ke[2])}function Dt(Te,Me,Q,nt){lt(Te),lt(Me),lt(nt),lt(Me),lt(Q),lt(nt);const ke=r.length/3,Ze=S.generateSideWallUV(i,r,ke-6,ke-3,ke-2,ke-1);ze(Ze[0]),ze(Ze[1]),ze(Ze[3]),ze(Ze[1]),ze(Ze[2]),ze(Ze[3])}function lt(Te){r.push(l[Te*3+0]),r.push(l[Te*3+1]),r.push(l[Te*3+2])}function ze(Te){s.push(Te.x),s.push(Te.y)}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),t=this.parameters.shapes,i=this.parameters.options;return HJ(t,i,e)}static fromJSON(e,t){const i=[];for(let s=0,o=e.shapes.length;s<o;s++){const a=t[e.shapes[s]];i.push(a)}const r=e.options.extrudePath;return r!==void 0&&(e.options.extrudePath=new c_[r.type]().fromJSON(r)),new Mw(i,e.options)}}const zJ={generateTopUV:function(n,e,t,i,r){const s=e[t*3],o=e[t*3+1],a=e[i*3],l=e[i*3+1],c=e[r*3],u=e[r*3+1];return[new De(s,o),new De(a,l),new De(c,u)]},generateSideWallUV:function(n,e,t,i,r,s){const o=e[t*3],a=e[t*3+1],l=e[t*3+2],c=e[i*3],u=e[i*3+1],f=e[i*3+2],m=e[r*3],g=e[r*3+1],x=e[r*3+2],b=e[s*3],w=e[s*3+1],v=e[s*3+2];return Math.abs(a-u)<Math.abs(o-c)?[new De(o,1-l),new De(c,1-f),new De(m,1-x),new De(b,1-v)]:[new De(a,1-l),new De(u,1-f),new De(g,1-x),new De(w,1-v)]}};function HJ(n,e,t){if(t.shapes=[],Array.isArray(n))for(let i=0,r=n.length;i<r;i++){const s=n[i];t.shapes.push(s.uuid)}else t.shapes.push(n.uuid);return t.options=Object.assign({},e),e.extrudePath!==void 0&&(t.options.extrudePath=e.extrudePath.toJSON()),t}class Iw extends Ac{constructor(e=1,t=0){const i=(1+Math.sqrt(5))/2,r=[-1,i,0,1,i,0,-1,-i,0,1,-i,0,0,-1,i,0,1,i,0,-1,-i,0,1,-i,i,0,-1,i,0,1,-i,0,-1,-i,0,1],s=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];super(r,s,e,t),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new Iw(e.radius,e.detail)}}class Gg extends Ac{constructor(e=1,t=0){const i=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],r=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];super(i,r,e,t),this.type="OctahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new Gg(e.radius,e.detail)}}class Pw extends rn{constructor(e=.5,t=1,i=32,r=1,s=0,o=Math.PI*2){super(),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:i,phiSegments:r,thetaStart:s,thetaLength:o},i=Math.max(3,i),r=Math.max(1,r);const a=[],l=[],c=[],u=[];let f=e;const m=(t-e)/r,g=new K,x=new De;for(let b=0;b<=r;b++){for(let w=0;w<=i;w++){const v=s+w/i*o;g.x=f*Math.cos(v),g.y=f*Math.sin(v),l.push(g.x,g.y,g.z),c.push(0,0,1),x.x=(g.x/t+1)/2,x.y=(g.y/t+1)/2,u.push(x.x,x.y)}f+=m}for(let b=0;b<r;b++){const w=b*(i+1);for(let v=0;v<i;v++){const S=v+w,E=S,C=S+i+1,V=S+i+2,L=S+1;a.push(E,C,L),a.push(C,V,L)}}this.setIndex(a),this.setAttribute("position",new Et(l,3)),this.setAttribute("normal",new Et(c,3)),this.setAttribute("uv",new Et(u,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Pw(e.innerRadius,e.outerRadius,e.thetaSegments,e.phiSegments,e.thetaStart,e.thetaLength)}}class Rw extends rn{constructor(e=new Fu([new De(0,.5),new De(-.5,-.5),new De(.5,-.5)]),t=12){super(),this.type="ShapeGeometry",this.parameters={shapes:e,curveSegments:t};const i=[],r=[],s=[],o=[];let a=0,l=0;if(Array.isArray(e)===!1)c(e);else for(let u=0;u<e.length;u++)c(e[u]),this.addGroup(a,l,u),a+=l,l=0;this.setIndex(i),this.setAttribute("position",new Et(r,3)),this.setAttribute("normal",new Et(s,3)),this.setAttribute("uv",new Et(o,2));function c(u){const f=r.length/3,m=u.extractPoints(t);let g=m.shape;const x=m.holes;Zo.isClockWise(g)===!1&&(g=g.reverse());for(let w=0,v=x.length;w<v;w++){const S=x[w];Zo.isClockWise(S)===!0&&(x[w]=S.reverse())}const b=Zo.triangulateShape(g,x);for(let w=0,v=x.length;w<v;w++){const S=x[w];g=g.concat(S)}for(let w=0,v=g.length;w<v;w++){const S=g[w];r.push(S.x,S.y,0),s.push(0,0,1),o.push(S.x,S.y)}for(let w=0,v=b.length;w<v;w++){const S=b[w],E=S[0]+f,C=S[1]+f,V=S[2]+f;i.push(E,C,V),l+=3}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),t=this.parameters.shapes;return GJ(t,e)}static fromJSON(e,t){const i=[];for(let r=0,s=e.shapes.length;r<s;r++){const o=t[e.shapes[r]];i.push(o)}return new Rw(i,e.curveSegments)}}function GJ(n,e){if(e.shapes=[],Array.isArray(n))for(let t=0,i=n.length;t<i;t++){const r=n[t];e.shapes.push(r.uuid)}else e.shapes.push(n.uuid);return e}class Wg extends rn{constructor(e=1,t=32,i=16,r=0,s=Math.PI*2,o=0,a=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:i,phiStart:r,phiLength:s,thetaStart:o,thetaLength:a},t=Math.max(3,Math.floor(t)),i=Math.max(2,Math.floor(i));const l=Math.min(o+a,Math.PI);let c=0;const u=[],f=new K,m=new K,g=[],x=[],b=[],w=[];for(let v=0;v<=i;v++){const S=[],E=v/i;let C=0;v===0&&o===0?C=.5/t:v===i&&l===Math.PI&&(C=-.5/t);for(let V=0;V<=t;V++){const L=V/t;f.x=-e*Math.cos(r+L*s)*Math.sin(o+E*a),f.y=e*Math.cos(o+E*a),f.z=e*Math.sin(r+L*s)*Math.sin(o+E*a),x.push(f.x,f.y,f.z),m.copy(f).normalize(),b.push(m.x,m.y,m.z),w.push(L+C,1-E),S.push(c++)}u.push(S)}for(let v=0;v<i;v++)for(let S=0;S<t;S++){const E=u[v][S+1],C=u[v][S],V=u[v+1][S],L=u[v+1][S+1];(v!==0||o>0)&&g.push(E,C,L),(v!==i-1||l<Math.PI)&&g.push(C,V,L)}this.setIndex(g),this.setAttribute("position",new Et(x,3)),this.setAttribute("normal",new Et(b,3)),this.setAttribute("uv",new Et(w,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Wg(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class Nw extends Ac{constructor(e=1,t=0){const i=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],r=[2,1,0,0,3,2,1,3,0,2,3,1];super(i,r,e,t),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new Nw(e.radius,e.detail)}}class Lw extends rn{constructor(e=1,t=.4,i=12,r=48,s=Math.PI*2){super(),this.type="TorusGeometry",this.parameters={radius:e,tube:t,radialSegments:i,tubularSegments:r,arc:s},i=Math.floor(i),r=Math.floor(r);const o=[],a=[],l=[],c=[],u=new K,f=new K,m=new K;for(let g=0;g<=i;g++)for(let x=0;x<=r;x++){const b=x/r*s,w=g/i*Math.PI*2;f.x=(e+t*Math.cos(w))*Math.cos(b),f.y=(e+t*Math.cos(w))*Math.sin(b),f.z=t*Math.sin(w),a.push(f.x,f.y,f.z),u.x=e*Math.cos(b),u.y=e*Math.sin(b),m.subVectors(f,u).normalize(),l.push(m.x,m.y,m.z),c.push(x/r),c.push(g/i)}for(let g=1;g<=i;g++)for(let x=1;x<=r;x++){const b=(r+1)*g+x-1,w=(r+1)*(g-1)+x-1,v=(r+1)*(g-1)+x,S=(r+1)*g+x;o.push(b,w,S),o.push(w,v,S)}this.setIndex(o),this.setAttribute("position",new Et(a,3)),this.setAttribute("normal",new Et(l,3)),this.setAttribute("uv",new Et(c,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Lw(e.radius,e.tube,e.radialSegments,e.tubularSegments,e.arc)}}class Dw extends rn{constructor(e=1,t=.4,i=64,r=8,s=2,o=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:t,tubularSegments:i,radialSegments:r,p:s,q:o},i=Math.floor(i),r=Math.floor(r);const a=[],l=[],c=[],u=[],f=new K,m=new K,g=new K,x=new K,b=new K,w=new K,v=new K;for(let E=0;E<=i;++E){const C=E/i*s*Math.PI*2;S(C,s,o,e,g),S(C+.01,s,o,e,x),w.subVectors(x,g),v.addVectors(x,g),b.crossVectors(w,v),v.crossVectors(b,w),b.normalize(),v.normalize();for(let V=0;V<=r;++V){const L=V/r*Math.PI*2,N=-t*Math.cos(L),I=t*Math.sin(L);f.x=g.x+(N*v.x+I*b.x),f.y=g.y+(N*v.y+I*b.y),f.z=g.z+(N*v.z+I*b.z),l.push(f.x,f.y,f.z),m.subVectors(f,g).normalize(),c.push(m.x,m.y,m.z),u.push(E/i),u.push(V/r)}}for(let E=1;E<=i;E++)for(let C=1;C<=r;C++){const V=(r+1)*(E-1)+(C-1),L=(r+1)*E+(C-1),N=(r+1)*E+C,I=(r+1)*(E-1)+C;a.push(V,L,I),a.push(L,N,I)}this.setIndex(a),this.setAttribute("position",new Et(l,3)),this.setAttribute("normal",new Et(c,3)),this.setAttribute("uv",new Et(u,2));function S(E,C,V,L,N){const I=Math.cos(E),A=Math.sin(E),M=V/C*E,D=Math.cos(M);N.x=L*(2+D)*.5*I,N.y=L*(2+D)*A*.5,N.z=L*Math.sin(M)*.5}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Dw(e.radius,e.tube,e.tubularSegments,e.radialSegments,e.p,e.q)}}class kw extends rn{constructor(e=new $A(new K(-1,-1,0),new K(-1,1,0),new K(1,1,0)),t=64,i=1,r=8,s=!1){super(),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:t,radius:i,radialSegments:r,closed:s};const o=e.computeFrenetFrames(t,s);this.tangents=o.tangents,this.normals=o.normals,this.binormals=o.binormals;const a=new K,l=new K,c=new De;let u=new K;const f=[],m=[],g=[],x=[];b(),this.setIndex(x),this.setAttribute("position",new Et(f,3)),this.setAttribute("normal",new Et(m,3)),this.setAttribute("uv",new Et(g,2));function b(){for(let E=0;E<t;E++)w(E);w(s===!1?t:0),S(),v()}function w(E){u=e.getPointAt(E/t,u);const C=o.normals[E],V=o.binormals[E];for(let L=0;L<=r;L++){const N=L/r*Math.PI*2,I=Math.sin(N),A=-Math.cos(N);l.x=A*C.x+I*V.x,l.y=A*C.y+I*V.y,l.z=A*C.z+I*V.z,l.normalize(),m.push(l.x,l.y,l.z),a.x=u.x+i*l.x,a.y=u.y+i*l.y,a.z=u.z+i*l.z,f.push(a.x,a.y,a.z)}}function v(){for(let E=1;E<=t;E++)for(let C=1;C<=r;C++){const V=(r+1)*(E-1)+(C-1),L=(r+1)*E+(C-1),N=(r+1)*E+C,I=(r+1)*(E-1)+C;x.push(V,L,I),x.push(L,N,I)}}function S(){for(let E=0;E<=t;E++)for(let C=0;C<=r;C++)c.x=E/t,c.y=C/r,g.push(c.x,c.y)}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON();return e.path=this.parameters.path.toJSON(),e}static fromJSON(e){return new kw(new c_[e.path.type]().fromJSON(e.path),e.tubularSegments,e.radius,e.radialSegments,e.closed)}}class Xj extends rn{constructor(e=null){if(super(),this.type="WireframeGeometry",this.parameters={geometry:e},e!==null){const t=[],i=new Set,r=new K,s=new K;if(e.index!==null){const o=e.attributes.position,a=e.index;let l=e.groups;l.length===0&&(l=[{start:0,count:a.count,materialIndex:0}]);for(let c=0,u=l.length;c<u;++c){const f=l[c],m=f.start,g=f.count;for(let x=m,b=m+g;x<b;x+=3)for(let w=0;w<3;w++){const v=a.getX(x+w),S=a.getX(x+(w+1)%3);r.fromBufferAttribute(o,v),s.fromBufferAttribute(o,S),gL(r,s,i)===!0&&(t.push(r.x,r.y,r.z),t.push(s.x,s.y,s.z))}}}else{const o=e.attributes.position;for(let a=0,l=o.count/3;a<l;a++)for(let c=0;c<3;c++){const u=3*a+c,f=3*a+(c+1)%3;r.fromBufferAttribute(o,u),s.fromBufferAttribute(o,f),gL(r,s,i)===!0&&(t.push(r.x,r.y,r.z),t.push(s.x,s.y,s.z))}}this.setAttribute("position",new Et(t,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}function gL(n,e,t){const i=`${n.x},${n.y},${n.z}-${e.x},${e.y},${e.z}`,r=`${e.x},${e.y},${e.z}-${n.x},${n.y},${n.z}`;return t.has(i)===!0||t.has(r)===!0?!1:(t.add(i),t.add(r),!0)}var yL=Object.freeze({__proto__:null,BoxGeometry:lh,CapsuleGeometry:Sw,CircleGeometry:Tw,ConeGeometry:Ew,CylinderGeometry:Pf,DodecahedronGeometry:Cw,EdgesGeometry:Gj,ExtrudeGeometry:Mw,IcosahedronGeometry:Iw,LatheGeometry:Hg,OctahedronGeometry:Gg,PlaneGeometry:Mf,PolyhedronGeometry:Ac,RingGeometry:Pw,ShapeGeometry:Rw,SphereGeometry:Wg,TetrahedronGeometry:Nw,TorusGeometry:Lw,TorusKnotGeometry:Dw,TubeGeometry:kw,WireframeGeometry:Xj});class Yj extends fr{static get type(){return"ShadowMaterial"}constructor(e){super(),this.isShadowMaterial=!0,this.color=new pt(0),this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.fog=e.fog,this}}class Kj extends Po{static get type(){return"RawShaderMaterial"}constructor(e){super(e),this.isRawShaderMaterial=!0}}class YA extends fr{static get type(){return"MeshStandardMaterial"}constructor(e){super(),this.isMeshStandardMaterial=!0,this.defines={STANDARD:""},this.color=new pt(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new pt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Ec,this.normalScale=new De(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Fs,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class Jj extends YA{static get type(){return"MeshPhysicalMaterial"}constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.anisotropyRotation=0,this.anisotropyMap=null,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new De(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return yi(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(t){this.ior=(1+.4*t)/(1-.4*t)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new pt(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new pt(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new pt(1,1,1),this.specularColorMap=null,this._anisotropy=0,this._clearcoat=0,this._dispersion=0,this._iridescence=0,this._sheen=0,this._transmission=0,this.setValues(e)}get anisotropy(){return this._anisotropy}set anisotropy(e){this._anisotropy>0!=e>0&&this.version++,this._anisotropy=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!=e>0&&this.version++,this._iridescence=e}get dispersion(){return this._dispersion}set dispersion(e){this._dispersion>0!=e>0&&this.version++,this._dispersion=e}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.anisotropy=e.anisotropy,this.anisotropyRotation=e.anisotropyRotation,this.anisotropyMap=e.anisotropyMap,this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.dispersion=e.dispersion,this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}class Qj extends fr{static get type(){return"MeshPhongMaterial"}constructor(e){super(),this.isMeshPhongMaterial=!0,this.color=new pt(16777215),this.specular=new pt(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new pt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Ec,this.normalScale=new De(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Fs,this.combine=Ug,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class Zj extends fr{static get type(){return"MeshToonMaterial"}constructor(e){super(),this.isMeshToonMaterial=!0,this.defines={TOON:""},this.color=new pt(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new pt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Ec,this.normalScale=new De(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}class e4 extends fr{static get type(){return"MeshNormalMaterial"}constructor(e){super(),this.isMeshNormalMaterial=!0,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Ec,this.normalScale=new De(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}class t4 extends fr{static get type(){return"MeshLambertMaterial"}constructor(e){super(),this.isMeshLambertMaterial=!0,this.color=new pt(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new pt(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Ec,this.normalScale=new De(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Fs,this.combine=Ug,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class n4 extends fr{static get type(){return"MeshMatcapMaterial"}constructor(e){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:""},this.color=new pt(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=Ec,this.normalScale=new De(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.flatShading=e.flatShading,this.fog=e.fog,this}}class i4 extends Qr{static get type(){return"LineDashedMaterial"}constructor(e){super(),this.isLineDashedMaterial=!0,this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}copy(e){return super.copy(e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}function Mu(n,e,t){return!n||!t&&n.constructor===e?n:typeof e.BYTES_PER_ELEMENT=="number"?new e(n):Array.prototype.slice.call(n)}function r4(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}function s4(n){function e(r,s){return n[r]-n[s]}const t=n.length,i=new Array(t);for(let r=0;r!==t;++r)i[r]=r;return i.sort(e),i}function yE(n,e,t){const i=n.length,r=new n.constructor(i);for(let s=0,o=0;o!==i;++s){const a=t[s]*e;for(let l=0;l!==e;++l)r[o++]=n[a+l]}return r}function KA(n,e,t,i){let r=1,s=n[0];for(;s!==void 0&&s[i]===void 0;)s=n[r++];if(s===void 0)return;let o=s[i];if(o!==void 0)if(Array.isArray(o))do o=s[i],o!==void 0&&(e.push(s.time),t.push.apply(t,o)),s=n[r++];while(s!==void 0);else if(o.toArray!==void 0)do o=s[i],o!==void 0&&(e.push(s.time),o.toArray(t,t.length)),s=n[r++];while(s!==void 0);else do o=s[i],o!==void 0&&(e.push(s.time),t.push(o)),s=n[r++];while(s!==void 0)}function WJ(n,e,t,i,r=30){const s=n.clone();s.name=e;const o=[];for(let l=0;l<s.tracks.length;++l){const c=s.tracks[l],u=c.getValueSize(),f=[],m=[];for(let g=0;g<c.times.length;++g){const x=c.times[g]*r;if(!(x<t||x>=i)){f.push(c.times[g]);for(let b=0;b<u;++b)m.push(c.values[g*u+b])}}f.length!==0&&(c.times=Mu(f,c.times.constructor),c.values=Mu(m,c.values.constructor),o.push(c))}s.tracks=o;let a=1/0;for(let l=0;l<s.tracks.length;++l)a>s.tracks[l].times[0]&&(a=s.tracks[l].times[0]);for(let l=0;l<s.tracks.length;++l)s.tracks[l].shift(-1*a);return s.resetDuration(),s}function qJ(n,e=0,t=n,i=30){i<=0&&(i=30);const r=t.tracks.length,s=e/i;for(let o=0;o<r;++o){const a=t.tracks[o],l=a.ValueTypeName;if(l==="bool"||l==="string")continue;const c=n.tracks.find(function(v){return v.name===a.name&&v.ValueTypeName===l});if(c===void 0)continue;let u=0;const f=a.getValueSize();a.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(u=f/3);let m=0;const g=c.getValueSize();c.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(m=g/3);const x=a.times.length-1;let b;if(s<=a.times[0]){const v=u,S=f-u;b=a.values.slice(v,S)}else if(s>=a.times[x]){const v=x*f+u,S=v+f-u;b=a.values.slice(v,S)}else{const v=a.createInterpolant(),S=u,E=f-u;v.evaluate(s),b=v.resultBuffer.slice(S,E)}l==="quaternion"&&new gs().fromArray(b).normalize().conjugate().toArray(b);const w=c.times.length;for(let v=0;v<w;++v){const S=v*g+m;if(l==="quaternion")gs.multiplyQuaternionsFlat(c.values,S,b,0,c.values,S);else{const E=g-m*2;for(let C=0;C<E;++C)c.values[S+C]-=b[C]}}}return n.blendMode=IA,n}const $J={convertArray:Mu,isTypedArray:r4,getKeyframeOrder:s4,sortedArray:yE,flattenJSON:KA,subclip:WJ,makeClipAdditive:qJ};class qg{constructor(e,t,i,r){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=r!==void 0?r:new t.constructor(i),this.sampleValues=t,this.valueSize=i,this.settings=null,this.DefaultSettings_={}}evaluate(e){const t=this.parameterPositions;let i=this._cachedIndex,r=t[i],s=t[i-1];e:{t:{let o;n:{i:if(!(e<r)){for(let a=i+2;;){if(r===void 0){if(e<s)break i;return i=t.length,this._cachedIndex=i,this.copySampleValue_(i-1)}if(i===a)break;if(s=r,r=t[++i],e<r)break t}o=t.length;break n}if(!(e>=s)){const a=t[1];e<a&&(i=2,s=a);for(let l=i-2;;){if(s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(i===l)break;if(r=s,s=t[--i-1],e>=s)break t}o=i,i=0;break n}break e}for(;i<o;){const a=i+o>>>1;e<t[a]?o=a:i=a+1}if(r=t[i],s=t[i-1],s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(r===void 0)return i=t.length,this._cachedIndex=i,this.copySampleValue_(i-1)}this._cachedIndex=i,this.intervalChanged_(i,s,r)}return this.interpolate_(i,s,e,r)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const t=this.resultBuffer,i=this.sampleValues,r=this.valueSize,s=e*r;for(let o=0;o!==r;++o)t[o]=i[s+o];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class o4 extends qg{constructor(e,t,i,r){super(e,t,i,r),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:Eu,endingEnd:Eu}}intervalChanged_(e,t,i){const r=this.parameterPositions;let s=e-2,o=e+1,a=r[s],l=r[o];if(a===void 0)switch(this.getSettings_().endingStart){case Cu:s=e,a=2*t-i;break;case tg:s=r.length-2,a=t+r[s]-r[s+1];break;default:s=e,a=i}if(l===void 0)switch(this.getSettings_().endingEnd){case Cu:o=e,l=2*i-t;break;case tg:o=1,l=i+r[1]-r[0];break;default:o=e-1,l=t}const c=(i-t)*.5,u=this.valueSize;this._weightPrev=c/(t-a),this._weightNext=c/(l-i),this._offsetPrev=s*u,this._offsetNext=o*u}interpolate_(e,t,i,r){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=e*a,c=l-a,u=this._offsetPrev,f=this._offsetNext,m=this._weightPrev,g=this._weightNext,x=(i-t)/(r-t),b=x*x,w=b*x,v=-m*w+2*m*b-m*x,S=(1+m)*w+(-1.5-2*m)*b+(-.5+m)*x+1,E=(-1-g)*w+(1.5+g)*b+.5*x,C=g*w-g*b;for(let V=0;V!==a;++V)s[V]=v*o[u+V]+S*o[c+V]+E*o[l+V]+C*o[f+V];return s}}class JA extends qg{constructor(e,t,i,r){super(e,t,i,r)}interpolate_(e,t,i,r){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=e*a,c=l-a,u=(i-t)/(r-t),f=1-u;for(let m=0;m!==a;++m)s[m]=o[c+m]*f+o[l+m]*u;return s}}class a4 extends qg{constructor(e,t,i,r){super(e,t,i,r)}interpolate_(e){return this.copySampleValue_(e-1)}}class ko{constructor(e,t,i,r){if(e===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(t===void 0||t.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=Mu(t,this.TimeBufferType),this.values=Mu(i,this.ValueBufferType),this.setInterpolation(r||this.DefaultInterpolation)}static toJSON(e){const t=e.constructor;let i;if(t.toJSON!==this.toJSON)i=t.toJSON(e);else{i={name:e.name,times:Mu(e.times,Array),values:Mu(e.values,Array)};const r=e.getInterpolation();r!==e.DefaultInterpolation&&(i.interpolation=r)}return i.type=e.ValueTypeName,i}InterpolantFactoryMethodDiscrete(e){return new a4(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new JA(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new o4(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case eg:t=this.InterpolantFactoryMethodDiscrete;break;case s_:t=this.InterpolantFactoryMethodLinear;break;case L0:t=this.InterpolantFactoryMethodSmooth;break}if(t===void 0){const i="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(i);return console.warn("THREE.KeyframeTrack:",i),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return eg;case this.InterpolantFactoryMethodLinear:return s_;case this.InterpolantFactoryMethodSmooth:return L0}}getValueSize(){return this.values.length/this.times.length}shift(e){if(e!==0){const t=this.times;for(let i=0,r=t.length;i!==r;++i)t[i]+=e}return this}scale(e){if(e!==1){const t=this.times;for(let i=0,r=t.length;i!==r;++i)t[i]*=e}return this}trim(e,t){const i=this.times,r=i.length;let s=0,o=r-1;for(;s!==r&&i[s]<e;)++s;for(;o!==-1&&i[o]>t;)--o;if(++o,s!==0||o!==r){s>=o&&(o=Math.max(o,1),s=o-1);const a=this.getValueSize();this.times=i.slice(s,o),this.values=this.values.slice(s*a,o*a)}return this}validate(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const i=this.times,r=this.values,s=i.length;s===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let o=null;for(let a=0;a!==s;a++){const l=i[a];if(typeof l=="number"&&isNaN(l)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,a,l),e=!1;break}if(o!==null&&o>l){console.error("THREE.KeyframeTrack: Out of order keys.",this,a,l,o),e=!1;break}o=l}if(r!==void 0&&r4(r))for(let a=0,l=r.length;a!==l;++a){const c=r[a];if(isNaN(c)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,a,c),e=!1;break}}return e}optimize(){const e=this.times.slice(),t=this.values.slice(),i=this.getValueSize(),r=this.getInterpolation()===L0,s=e.length-1;let o=1;for(let a=1;a<s;++a){let l=!1;const c=e[a],u=e[a+1];if(c!==u&&(a!==1||c!==e[0]))if(r)l=!0;else{const f=a*i,m=f-i,g=f+i;for(let x=0;x!==i;++x){const b=t[f+x];if(b!==t[m+x]||b!==t[g+x]){l=!0;break}}}if(l){if(a!==o){e[o]=e[a];const f=a*i,m=o*i;for(let g=0;g!==i;++g)t[m+g]=t[f+g]}++o}}if(s>0){e[o]=e[s];for(let a=s*i,l=o*i,c=0;c!==i;++c)t[l+c]=t[a+c];++o}return o!==e.length?(this.times=e.slice(0,o),this.values=t.slice(0,o*i)):(this.times=e,this.values=t),this}clone(){const e=this.times.slice(),t=this.values.slice(),i=this.constructor,r=new i(this.name,e,t);return r.createInterpolant=this.createInterpolant,r}}ko.prototype.TimeBufferType=Float32Array;ko.prototype.ValueBufferType=Float32Array;ko.prototype.DefaultInterpolation=s_;class uh extends ko{constructor(e,t,i){super(e,t,i)}}uh.prototype.ValueTypeName="bool";uh.prototype.ValueBufferType=Array;uh.prototype.DefaultInterpolation=eg;uh.prototype.InterpolantFactoryMethodLinear=void 0;uh.prototype.InterpolantFactoryMethodSmooth=void 0;class QA extends ko{}QA.prototype.ValueTypeName="color";class cg extends ko{}cg.prototype.ValueTypeName="number";class l4 extends qg{constructor(e,t,i,r){super(e,t,i,r)}interpolate_(e,t,i,r){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=(i-t)/(r-t);let c=e*a;for(let u=c+a;c!==u;c+=4)gs.slerpFlat(s,0,o,c-a,o,c,l);return s}}class $g extends ko{InterpolantFactoryMethodLinear(e){return new l4(this.times,this.values,this.getValueSize(),e)}}$g.prototype.ValueTypeName="quaternion";$g.prototype.InterpolantFactoryMethodSmooth=void 0;class hh extends ko{constructor(e,t,i){super(e,t,i)}}hh.prototype.ValueTypeName="string";hh.prototype.ValueBufferType=Array;hh.prototype.DefaultInterpolation=eg;hh.prototype.InterpolantFactoryMethodLinear=void 0;hh.prototype.InterpolantFactoryMethodSmooth=void 0;class ug extends ko{}ug.prototype.ValueTypeName="vector";class hg{constructor(e="",t=-1,i=[],r=fw){this.name=e,this.tracks=i,this.duration=t,this.blendMode=r,this.uuid=ks(),this.duration<0&&this.resetDuration()}static parse(e){const t=[],i=e.tracks,r=1/(e.fps||1);for(let o=0,a=i.length;o!==a;++o)t.push(YJ(i[o]).scale(r));const s=new this(e.name,e.duration,t,e.blendMode);return s.uuid=e.uuid,s}static toJSON(e){const t=[],i=e.tracks,r={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode};for(let s=0,o=i.length;s!==o;++s)t.push(ko.toJSON(i[s]));return r}static CreateFromMorphTargetSequence(e,t,i,r){const s=t.length,o=[];for(let a=0;a<s;a++){let l=[],c=[];l.push((a+s-1)%s,a,(a+1)%s),c.push(0,1,0);const u=s4(l);l=yE(l,1,u),c=yE(c,1,u),!r&&l[0]===0&&(l.push(s),c.push(c[0])),o.push(new cg(".morphTargetInfluences["+t[a].name+"]",l,c).scale(1/i))}return new this(e,-1,o)}static findByName(e,t){let i=e;if(!Array.isArray(e)){const r=e;i=r.geometry&&r.geometry.animations||r.animations}for(let r=0;r<i.length;r++)if(i[r].name===t)return i[r];return null}static CreateClipsFromMorphTargetSequences(e,t,i){const r={},s=/^([\w-]*?)([\d]+)$/;for(let a=0,l=e.length;a<l;a++){const c=e[a],u=c.name.match(s);if(u&&u.length>1){const f=u[1];let m=r[f];m||(r[f]=m=[]),m.push(c)}}const o=[];for(const a in r)o.push(this.CreateFromMorphTargetSequence(a,r[a],t,i));return o}static parseAnimation(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const i=function(f,m,g,x,b){if(g.length!==0){const w=[],v=[];KA(g,w,v,x),w.length!==0&&b.push(new f(m,w,v))}},r=[],s=e.name||"default",o=e.fps||30,a=e.blendMode;let l=e.length||-1;const c=e.hierarchy||[];for(let f=0;f<c.length;f++){const m=c[f].keys;if(!(!m||m.length===0))if(m[0].morphTargets){const g={};let x;for(x=0;x<m.length;x++)if(m[x].morphTargets)for(let b=0;b<m[x].morphTargets.length;b++)g[m[x].morphTargets[b]]=-1;for(const b in g){const w=[],v=[];for(let S=0;S!==m[x].morphTargets.length;++S){const E=m[x];w.push(E.time),v.push(E.morphTarget===b?1:0)}r.push(new cg(".morphTargetInfluence["+b+"]",w,v))}l=g.length*o}else{const g=".bones["+t[f].name+"]";i(ug,g+".position",m,"pos",r),i($g,g+".quaternion",m,"rot",r),i(ug,g+".scale",m,"scl",r)}}return r.length===0?null:new this(s,l,r,a)}resetDuration(){const e=this.tracks;let t=0;for(let i=0,r=e.length;i!==r;++i){const s=this.tracks[i];t=Math.max(t,s.times[s.times.length-1])}return this.duration=t,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function XJ(n){switch(n.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return cg;case"vector":case"vector2":case"vector3":case"vector4":return ug;case"color":return QA;case"quaternion":return $g;case"bool":case"boolean":return uh;case"string":return hh}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+n)}function YJ(n){if(n.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=XJ(n.type);if(n.times===void 0){const t=[],i=[];KA(n.keys,t,i,"value"),n.times=t,n.values=i}return e.parse!==void 0?e.parse(n):new e(n.name,n.times,n.values,n.interpolation)}const Ia={enabled:!1,files:{},add:function(n,e){this.enabled!==!1&&(this.files[n]=e)},get:function(n){if(this.enabled!==!1)return this.files[n]},remove:function(n){delete this.files[n]},clear:function(){this.files={}}};class ZA{constructor(e,t,i){const r=this;let s=!1,o=0,a=0,l;const c=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=i,this.itemStart=function(u){a++,s===!1&&r.onStart!==void 0&&r.onStart(u,o,a),s=!0},this.itemEnd=function(u){o++,r.onProgress!==void 0&&r.onProgress(u,o,a),o===a&&(s=!1,r.onLoad!==void 0&&r.onLoad())},this.itemError=function(u){r.onError!==void 0&&r.onError(u)},this.resolveURL=function(u){return l?l(u):u},this.setURLModifier=function(u){return l=u,this},this.addHandler=function(u,f){return c.push(u,f),this},this.removeHandler=function(u){const f=c.indexOf(u);return f!==-1&&c.splice(f,2),this},this.getHandler=function(u){for(let f=0,m=c.length;f<m;f+=2){const g=c[f],x=c[f+1];if(g.global&&(g.lastIndex=0),g.test(u))return x}return null}}}const Pd=new ZA;let ys=class{constructor(e){this.manager=e!==void 0?e:Pd,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){const i=this;return new Promise(function(r,s){i.load(e,r,t,s)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}};ys.DEFAULT_MATERIAL_NAME="__DEFAULT";const ba={};class KJ extends Error{constructor(e,t){super(e),this.response=t}}class Ja extends ys{constructor(e){super(e)}load(e,t,i,r){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=Ia.get(e);if(s!==void 0)return this.manager.itemStart(e),setTimeout(()=>{t&&t(s),this.manager.itemEnd(e)},0),s;if(ba[e]!==void 0){ba[e].push({onLoad:t,onProgress:i,onError:r});return}ba[e]=[],ba[e].push({onLoad:t,onProgress:i,onError:r});const o=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),a=this.mimeType,l=this.responseType;fetch(o).then(c=>{if(c.status===200||c.status===0){if(c.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||c.body===void 0||c.body.getReader===void 0)return c;const u=ba[e],f=c.body.getReader(),m=c.headers.get("X-File-Size")||c.headers.get("Content-Length"),g=m?parseInt(m):0,x=g!==0;let b=0;const w=new ReadableStream({start(v){S();function S(){f.read().then(({done:E,value:C})=>{if(E)v.close();else{b+=C.byteLength;const V=new ProgressEvent("progress",{lengthComputable:x,loaded:b,total:g});for(let L=0,N=u.length;L<N;L++){const I=u[L];I.onProgress&&I.onProgress(V)}v.enqueue(C),S()}},E=>{v.error(E)})}}});return new Response(w)}else throw new KJ(`fetch for "${c.url}" responded with ${c.status}: ${c.statusText}`,c)}).then(c=>{switch(l){case"arraybuffer":return c.arrayBuffer();case"blob":return c.blob();case"document":return c.text().then(u=>new DOMParser().parseFromString(u,a));case"json":return c.json();default:if(a===void 0)return c.text();{const f=/charset="?([^;"\s]*)"?/i.exec(a),m=f&&f[1]?f[1].toLowerCase():void 0,g=new TextDecoder(m);return c.arrayBuffer().then(x=>g.decode(x))}}}).then(c=>{Ia.add(e,c);const u=ba[e];delete ba[e];for(let f=0,m=u.length;f<m;f++){const g=u[f];g.onLoad&&g.onLoad(c)}}).catch(c=>{const u=ba[e];if(u===void 0)throw this.manager.itemError(e),c;delete ba[e];for(let f=0,m=u.length;f<m;f++){const g=u[f];g.onError&&g.onError(c)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}}class JJ extends ys{constructor(e){super(e)}load(e,t,i,r){const s=this,o=new Ja(this.manager);o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(a){try{t(s.parse(JSON.parse(a)))}catch(l){r?r(l):console.error(l),s.manager.itemError(e)}},i,r)}parse(e){const t=[];for(let i=0;i<e.length;i++){const r=hg.parse(e[i]);t.push(r)}return t}}class QJ extends ys{constructor(e){super(e)}load(e,t,i,r){const s=this,o=[],a=new ww,l=new Ja(this.manager);l.setPath(this.path),l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setWithCredentials(s.withCredentials);let c=0;function u(f){l.load(e[f],function(m){const g=s.parse(m,!0);o[f]={width:g.width,height:g.height,format:g.format,mipmaps:g.mipmaps},c+=1,c===6&&(g.mipmapCount===1&&(a.minFilter=Wi),a.image=o,a.format=g.format,a.needsUpdate=!0,t&&t(a))},i,r)}if(Array.isArray(e))for(let f=0,m=e.length;f<m;++f)u(f);else l.load(e,function(f){const m=s.parse(f,!0);if(m.isCubemap){const g=m.mipmaps.length/m.mipmapCount;for(let x=0;x<g;x++){o[x]={mipmaps:[]};for(let b=0;b<m.mipmapCount;b++)o[x].mipmaps.push(m.mipmaps[x*m.mipmapCount+b]),o[x].format=m.format,o[x].width=m.width,o[x].height=m.height}a.image=o}else a.image.width=m.width,a.image.height=m.height,a.mipmaps=m.mipmaps;m.mipmapCount===1&&(a.minFilter=Wi),a.format=m.format,a.needsUpdate=!0,t&&t(a)},i,r);return a}}class dg extends ys{constructor(e){super(e)}load(e,t,i,r){this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,o=Ia.get(e);if(o!==void 0)return s.manager.itemStart(e),setTimeout(function(){t&&t(o),s.manager.itemEnd(e)},0),o;const a=rg("img");function l(){u(),Ia.add(e,this),t&&t(this),s.manager.itemEnd(e)}function c(f){u(),r&&r(f),s.manager.itemError(e),s.manager.itemEnd(e)}function u(){a.removeEventListener("load",l,!1),a.removeEventListener("error",c,!1)}return a.addEventListener("load",l,!1),a.addEventListener("error",c,!1),e.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(a.crossOrigin=this.crossOrigin),s.manager.itemStart(e),a.src=e,a}}class ZJ extends ys{constructor(e){super(e)}load(e,t,i,r){const s=new Bg;s.colorSpace=os;const o=new dg(this.manager);o.setCrossOrigin(this.crossOrigin),o.setPath(this.path);let a=0;function l(c){o.load(e[c],function(u){s.images[c]=u,a++,a===6&&(s.needsUpdate=!0,t&&t(s))},void 0,r)}for(let c=0;c<e.length;++c)l(c);return s}}class eQ extends ys{constructor(e){super(e)}load(e,t,i,r){const s=this,o=new Qo,a=new Ja(this.manager);return a.setResponseType("arraybuffer"),a.setRequestHeader(this.requestHeader),a.setPath(this.path),a.setWithCredentials(s.withCredentials),a.load(e,function(l){let c;try{c=s.parse(l)}catch(u){if(r!==void 0)r(u);else{console.error(u);return}}c.image!==void 0?o.image=c.image:c.data!==void 0&&(o.image.width=c.width,o.image.height=c.height,o.image.data=c.data),o.wrapS=c.wrapS!==void 0?c.wrapS:io,o.wrapT=c.wrapT!==void 0?c.wrapT:io,o.magFilter=c.magFilter!==void 0?c.magFilter:Wi,o.minFilter=c.minFilter!==void 0?c.minFilter:Wi,o.anisotropy=c.anisotropy!==void 0?c.anisotropy:1,c.colorSpace!==void 0&&(o.colorSpace=c.colorSpace),c.flipY!==void 0&&(o.flipY=c.flipY),c.format!==void 0&&(o.format=c.format),c.type!==void 0&&(o.type=c.type),c.mipmaps!==void 0&&(o.mipmaps=c.mipmaps,o.minFilter=Wo),c.mipmapCount===1&&(o.minFilter=Wi),c.generateMipmaps!==void 0&&(o.generateMipmaps=c.generateMipmaps),o.needsUpdate=!0,t&&t(o,c)},i,r),o}}class tQ extends ys{constructor(e){super(e)}load(e,t,i,r){const s=new hi,o=new dg(this.manager);return o.setCrossOrigin(this.crossOrigin),o.setPath(this.path),o.load(e,function(a){s.image=a,s.needsUpdate=!0,t!==void 0&&t(s)},i,r),s}}class Mc extends In{constructor(e,t=1){super(),this.isLight=!0,this.type="Light",this.color=new pt(e),this.intensity=t}dispose(){}copy(e,t){return super.copy(e,t),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,this.groundColor!==void 0&&(t.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(t.object.distance=this.distance),this.angle!==void 0&&(t.object.angle=this.angle),this.decay!==void 0&&(t.object.decay=this.decay),this.penumbra!==void 0&&(t.object.penumbra=this.penumbra),this.shadow!==void 0&&(t.object.shadow=this.shadow.toJSON()),this.target!==void 0&&(t.object.target=this.target.uuid),t}}class c4 extends Mc{constructor(e,t,i){super(e,i),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(In.DEFAULT_UP),this.updateMatrix(),this.groundColor=new pt(t)}copy(e,t){return super.copy(e,t),this.groundColor.copy(e.groundColor),this}}const ST=new Bt,vL=new K,xL=new K;class eM{constructor(e){this.camera=e,this.intensity=1,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new De(512,512),this.map=null,this.mapPass=null,this.matrix=new Bt,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new zg,this._frameExtents=new De(1,1),this._viewportCount=1,this._viewports=[new An(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const t=this.camera,i=this.matrix;vL.setFromMatrixPosition(e.matrixWorld),t.position.copy(vL),xL.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(xL),t.updateMatrixWorld(),ST.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(ST),i.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),i.multiply(ST)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.intensity=e.intensity,this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const e={};return this.intensity!==1&&(e.intensity=this.intensity),this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class nQ extends eM{constructor(){super(new Oi(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(e){const t=this.camera,i=of*2*e.angle*this.focus,r=this.mapSize.width/this.mapSize.height,s=e.distance||t.far;(i!==t.fov||r!==t.aspect||s!==t.far)&&(t.fov=i,t.aspect=r,t.far=s,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}class u4 extends Mc{constructor(e,t,i=0,r=Math.PI/3,s=0,o=2){super(e,t),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(In.DEFAULT_UP),this.updateMatrix(),this.target=new In,this.distance=i,this.angle=r,this.penumbra=s,this.decay=o,this.map=null,this.shadow=new nQ}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}const _L=new Bt,Np=new K,TT=new K;class iQ extends eM{constructor(){super(new Oi(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new De(4,2),this._viewportCount=6,this._viewports=[new An(2,1,1,1),new An(0,1,1,1),new An(3,1,1,1),new An(1,1,1,1),new An(3,0,1,1),new An(1,0,1,1)],this._cubeDirections=[new K(1,0,0),new K(-1,0,0),new K(0,0,1),new K(0,0,-1),new K(0,1,0),new K(0,-1,0)],this._cubeUps=[new K(0,1,0),new K(0,1,0),new K(0,1,0),new K(0,1,0),new K(0,0,1),new K(0,0,-1)]}updateMatrices(e,t=0){const i=this.camera,r=this.matrix,s=e.distance||i.far;s!==i.far&&(i.far=s,i.updateProjectionMatrix()),Np.setFromMatrixPosition(e.matrixWorld),i.position.copy(Np),TT.copy(i.position),TT.add(this._cubeDirections[t]),i.up.copy(this._cubeUps[t]),i.lookAt(TT),i.updateMatrixWorld(),r.makeTranslation(-Np.x,-Np.y,-Np.z),_L.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse),this._frustum.setFromProjectionMatrix(_L)}}class h4 extends Mc{constructor(e,t,i=0,r=2){super(e,t),this.isPointLight=!0,this.type="PointLight",this.distance=i,this.decay=r,this.shadow=new iQ}get power(){return this.intensity*4*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}class rQ extends eM{constructor(){super(new ch(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class d4 extends Mc{constructor(e,t){super(e,t),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(In.DEFAULT_UP),this.updateMatrix(),this.target=new In,this.shadow=new rQ}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}class f4 extends Mc{constructor(e,t){super(e,t),this.isAmbientLight=!0,this.type="AmbientLight"}}class p4 extends Mc{constructor(e,t,i=10,r=10){super(e,t),this.isRectAreaLight=!0,this.type="RectAreaLight",this.width=i,this.height=r}get power(){return this.intensity*this.width*this.height*Math.PI}set power(e){this.intensity=e/(this.width*this.height*Math.PI)}copy(e){return super.copy(e),this.width=e.width,this.height=e.height,this}toJSON(e){const t=super.toJSON(e);return t.object.width=this.width,t.object.height=this.height,t}}class m4{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new K)}set(e){for(let t=0;t<9;t++)this.coefficients[t].copy(e[t]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,t){const i=e.x,r=e.y,s=e.z,o=this.coefficients;return t.copy(o[0]).multiplyScalar(.282095),t.addScaledVector(o[1],.488603*r),t.addScaledVector(o[2],.488603*s),t.addScaledVector(o[3],.488603*i),t.addScaledVector(o[4],1.092548*(i*r)),t.addScaledVector(o[5],1.092548*(r*s)),t.addScaledVector(o[6],.315392*(3*s*s-1)),t.addScaledVector(o[7],1.092548*(i*s)),t.addScaledVector(o[8],.546274*(i*i-r*r)),t}getIrradianceAt(e,t){const i=e.x,r=e.y,s=e.z,o=this.coefficients;return t.copy(o[0]).multiplyScalar(.886227),t.addScaledVector(o[1],2*.511664*r),t.addScaledVector(o[2],2*.511664*s),t.addScaledVector(o[3],2*.511664*i),t.addScaledVector(o[4],2*.429043*i*r),t.addScaledVector(o[5],2*.429043*r*s),t.addScaledVector(o[6],.743125*s*s-.247708),t.addScaledVector(o[7],2*.429043*i*s),t.addScaledVector(o[8],.429043*(i*i-r*r)),t}add(e){for(let t=0;t<9;t++)this.coefficients[t].add(e.coefficients[t]);return this}addScaledSH(e,t){for(let i=0;i<9;i++)this.coefficients[i].addScaledVector(e.coefficients[i],t);return this}scale(e){for(let t=0;t<9;t++)this.coefficients[t].multiplyScalar(e);return this}lerp(e,t){for(let i=0;i<9;i++)this.coefficients[i].lerp(e.coefficients[i],t);return this}equals(e){for(let t=0;t<9;t++)if(!this.coefficients[t].equals(e.coefficients[t]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return new this.constructor().copy(this)}fromArray(e,t=0){const i=this.coefficients;for(let r=0;r<9;r++)i[r].fromArray(e,t+r*3);return this}toArray(e=[],t=0){const i=this.coefficients;for(let r=0;r<9;r++)i[r].toArray(e,t+r*3);return e}static getBasisAt(e,t){const i=e.x,r=e.y,s=e.z;t[0]=.282095,t[1]=.488603*r,t[2]=.488603*s,t[3]=.488603*i,t[4]=1.092548*i*r,t[5]=1.092548*r*s,t[6]=.315392*(3*s*s-1),t[7]=1.092548*i*s,t[8]=.546274*(i*i-r*r)}}class g4 extends Mc{constructor(e=new m4,t=1){super(void 0,t),this.isLightProbe=!0,this.sh=e}copy(e){return super.copy(e),this.sh.copy(e.sh),this}fromJSON(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this}toJSON(e){const t=super.toJSON(e);return t.object.sh=this.sh.toArray(),t}}class Ow extends ys{constructor(e){super(e),this.textures={}}load(e,t,i,r){const s=this,o=new Ja(s.manager);o.setPath(s.path),o.setRequestHeader(s.requestHeader),o.setWithCredentials(s.withCredentials),o.load(e,function(a){try{t(s.parse(JSON.parse(a)))}catch(l){r?r(l):console.error(l),s.manager.itemError(e)}},i,r)}parse(e){const t=this.textures;function i(s){return t[s]===void 0&&console.warn("THREE.MaterialLoader: Undefined texture",s),t[s]}const r=this.createMaterialFromType(e.type);if(e.uuid!==void 0&&(r.uuid=e.uuid),e.name!==void 0&&(r.name=e.name),e.color!==void 0&&r.color!==void 0&&r.color.setHex(e.color),e.roughness!==void 0&&(r.roughness=e.roughness),e.metalness!==void 0&&(r.metalness=e.metalness),e.sheen!==void 0&&(r.sheen=e.sheen),e.sheenColor!==void 0&&(r.sheenColor=new pt().setHex(e.sheenColor)),e.sheenRoughness!==void 0&&(r.sheenRoughness=e.sheenRoughness),e.emissive!==void 0&&r.emissive!==void 0&&r.emissive.setHex(e.emissive),e.specular!==void 0&&r.specular!==void 0&&r.specular.setHex(e.specular),e.specularIntensity!==void 0&&(r.specularIntensity=e.specularIntensity),e.specularColor!==void 0&&r.specularColor!==void 0&&r.specularColor.setHex(e.specularColor),e.shininess!==void 0&&(r.shininess=e.shininess),e.clearcoat!==void 0&&(r.clearcoat=e.clearcoat),e.clearcoatRoughness!==void 0&&(r.clearcoatRoughness=e.clearcoatRoughness),e.dispersion!==void 0&&(r.dispersion=e.dispersion),e.iridescence!==void 0&&(r.iridescence=e.iridescence),e.iridescenceIOR!==void 0&&(r.iridescenceIOR=e.iridescenceIOR),e.iridescenceThicknessRange!==void 0&&(r.iridescenceThicknessRange=e.iridescenceThicknessRange),e.transmission!==void 0&&(r.transmission=e.transmission),e.thickness!==void 0&&(r.thickness=e.thickness),e.attenuationDistance!==void 0&&(r.attenuationDistance=e.attenuationDistance),e.attenuationColor!==void 0&&r.attenuationColor!==void 0&&r.attenuationColor.setHex(e.attenuationColor),e.anisotropy!==void 0&&(r.anisotropy=e.anisotropy),e.anisotropyRotation!==void 0&&(r.anisotropyRotation=e.anisotropyRotation),e.fog!==void 0&&(r.fog=e.fog),e.flatShading!==void 0&&(r.flatShading=e.flatShading),e.blending!==void 0&&(r.blending=e.blending),e.combine!==void 0&&(r.combine=e.combine),e.side!==void 0&&(r.side=e.side),e.shadowSide!==void 0&&(r.shadowSide=e.shadowSide),e.opacity!==void 0&&(r.opacity=e.opacity),e.transparent!==void 0&&(r.transparent=e.transparent),e.alphaTest!==void 0&&(r.alphaTest=e.alphaTest),e.alphaHash!==void 0&&(r.alphaHash=e.alphaHash),e.depthFunc!==void 0&&(r.depthFunc=e.depthFunc),e.depthTest!==void 0&&(r.depthTest=e.depthTest),e.depthWrite!==void 0&&(r.depthWrite=e.depthWrite),e.colorWrite!==void 0&&(r.colorWrite=e.colorWrite),e.blendSrc!==void 0&&(r.blendSrc=e.blendSrc),e.blendDst!==void 0&&(r.blendDst=e.blendDst),e.blendEquation!==void 0&&(r.blendEquation=e.blendEquation),e.blendSrcAlpha!==void 0&&(r.blendSrcAlpha=e.blendSrcAlpha),e.blendDstAlpha!==void 0&&(r.blendDstAlpha=e.blendDstAlpha),e.blendEquationAlpha!==void 0&&(r.blendEquationAlpha=e.blendEquationAlpha),e.blendColor!==void 0&&r.blendColor!==void 0&&r.blendColor.setHex(e.blendColor),e.blendAlpha!==void 0&&(r.blendAlpha=e.blendAlpha),e.stencilWriteMask!==void 0&&(r.stencilWriteMask=e.stencilWriteMask),e.stencilFunc!==void 0&&(r.stencilFunc=e.stencilFunc),e.stencilRef!==void 0&&(r.stencilRef=e.stencilRef),e.stencilFuncMask!==void 0&&(r.stencilFuncMask=e.stencilFuncMask),e.stencilFail!==void 0&&(r.stencilFail=e.stencilFail),e.stencilZFail!==void 0&&(r.stencilZFail=e.stencilZFail),e.stencilZPass!==void 0&&(r.stencilZPass=e.stencilZPass),e.stencilWrite!==void 0&&(r.stencilWrite=e.stencilWrite),e.wireframe!==void 0&&(r.wireframe=e.wireframe),e.wireframeLinewidth!==void 0&&(r.wireframeLinewidth=e.wireframeLinewidth),e.wireframeLinecap!==void 0&&(r.wireframeLinecap=e.wireframeLinecap),e.wireframeLinejoin!==void 0&&(r.wireframeLinejoin=e.wireframeLinejoin),e.rotation!==void 0&&(r.rotation=e.rotation),e.linewidth!==void 0&&(r.linewidth=e.linewidth),e.dashSize!==void 0&&(r.dashSize=e.dashSize),e.gapSize!==void 0&&(r.gapSize=e.gapSize),e.scale!==void 0&&(r.scale=e.scale),e.polygonOffset!==void 0&&(r.polygonOffset=e.polygonOffset),e.polygonOffsetFactor!==void 0&&(r.polygonOffsetFactor=e.polygonOffsetFactor),e.polygonOffsetUnits!==void 0&&(r.polygonOffsetUnits=e.polygonOffsetUnits),e.dithering!==void 0&&(r.dithering=e.dithering),e.alphaToCoverage!==void 0&&(r.alphaToCoverage=e.alphaToCoverage),e.premultipliedAlpha!==void 0&&(r.premultipliedAlpha=e.premultipliedAlpha),e.forceSinglePass!==void 0&&(r.forceSinglePass=e.forceSinglePass),e.visible!==void 0&&(r.visible=e.visible),e.toneMapped!==void 0&&(r.toneMapped=e.toneMapped),e.userData!==void 0&&(r.userData=e.userData),e.vertexColors!==void 0&&(typeof e.vertexColors=="number"?r.vertexColors=e.vertexColors>0:r.vertexColors=e.vertexColors),e.uniforms!==void 0)for(const s in e.uniforms){const o=e.uniforms[s];switch(r.uniforms[s]={},o.type){case"t":r.uniforms[s].value=i(o.value);break;case"c":r.uniforms[s].value=new pt().setHex(o.value);break;case"v2":r.uniforms[s].value=new De().fromArray(o.value);break;case"v3":r.uniforms[s].value=new K().fromArray(o.value);break;case"v4":r.uniforms[s].value=new An().fromArray(o.value);break;case"m3":r.uniforms[s].value=new en().fromArray(o.value);break;case"m4":r.uniforms[s].value=new Bt().fromArray(o.value);break;default:r.uniforms[s].value=o.value}}if(e.defines!==void 0&&(r.defines=e.defines),e.vertexShader!==void 0&&(r.vertexShader=e.vertexShader),e.fragmentShader!==void 0&&(r.fragmentShader=e.fragmentShader),e.glslVersion!==void 0&&(r.glslVersion=e.glslVersion),e.extensions!==void 0)for(const s in e.extensions)r.extensions[s]=e.extensions[s];if(e.lights!==void 0&&(r.lights=e.lights),e.clipping!==void 0&&(r.clipping=e.clipping),e.size!==void 0&&(r.size=e.size),e.sizeAttenuation!==void 0&&(r.sizeAttenuation=e.sizeAttenuation),e.map!==void 0&&(r.map=i(e.map)),e.matcap!==void 0&&(r.matcap=i(e.matcap)),e.alphaMap!==void 0&&(r.alphaMap=i(e.alphaMap)),e.bumpMap!==void 0&&(r.bumpMap=i(e.bumpMap)),e.bumpScale!==void 0&&(r.bumpScale=e.bumpScale),e.normalMap!==void 0&&(r.normalMap=i(e.normalMap)),e.normalMapType!==void 0&&(r.normalMapType=e.normalMapType),e.normalScale!==void 0){let s=e.normalScale;Array.isArray(s)===!1&&(s=[s,s]),r.normalScale=new De().fromArray(s)}return e.displacementMap!==void 0&&(r.displacementMap=i(e.displacementMap)),e.displacementScale!==void 0&&(r.displacementScale=e.displacementScale),e.displacementBias!==void 0&&(r.displacementBias=e.displacementBias),e.roughnessMap!==void 0&&(r.roughnessMap=i(e.roughnessMap)),e.metalnessMap!==void 0&&(r.metalnessMap=i(e.metalnessMap)),e.emissiveMap!==void 0&&(r.emissiveMap=i(e.emissiveMap)),e.emissiveIntensity!==void 0&&(r.emissiveIntensity=e.emissiveIntensity),e.specularMap!==void 0&&(r.specularMap=i(e.specularMap)),e.specularIntensityMap!==void 0&&(r.specularIntensityMap=i(e.specularIntensityMap)),e.specularColorMap!==void 0&&(r.specularColorMap=i(e.specularColorMap)),e.envMap!==void 0&&(r.envMap=i(e.envMap)),e.envMapRotation!==void 0&&r.envMapRotation.fromArray(e.envMapRotation),e.envMapIntensity!==void 0&&(r.envMapIntensity=e.envMapIntensity),e.reflectivity!==void 0&&(r.reflectivity=e.reflectivity),e.refractionRatio!==void 0&&(r.refractionRatio=e.refractionRatio),e.lightMap!==void 0&&(r.lightMap=i(e.lightMap)),e.lightMapIntensity!==void 0&&(r.lightMapIntensity=e.lightMapIntensity),e.aoMap!==void 0&&(r.aoMap=i(e.aoMap)),e.aoMapIntensity!==void 0&&(r.aoMapIntensity=e.aoMapIntensity),e.gradientMap!==void 0&&(r.gradientMap=i(e.gradientMap)),e.clearcoatMap!==void 0&&(r.clearcoatMap=i(e.clearcoatMap)),e.clearcoatRoughnessMap!==void 0&&(r.clearcoatRoughnessMap=i(e.clearcoatRoughnessMap)),e.clearcoatNormalMap!==void 0&&(r.clearcoatNormalMap=i(e.clearcoatNormalMap)),e.clearcoatNormalScale!==void 0&&(r.clearcoatNormalScale=new De().fromArray(e.clearcoatNormalScale)),e.iridescenceMap!==void 0&&(r.iridescenceMap=i(e.iridescenceMap)),e.iridescenceThicknessMap!==void 0&&(r.iridescenceThicknessMap=i(e.iridescenceThicknessMap)),e.transmissionMap!==void 0&&(r.transmissionMap=i(e.transmissionMap)),e.thicknessMap!==void 0&&(r.thicknessMap=i(e.thicknessMap)),e.anisotropyMap!==void 0&&(r.anisotropyMap=i(e.anisotropyMap)),e.sheenColorMap!==void 0&&(r.sheenColorMap=i(e.sheenColorMap)),e.sheenRoughnessMap!==void 0&&(r.sheenRoughnessMap=i(e.sheenRoughnessMap)),r}setTextures(e){return this.textures=e,this}createMaterialFromType(e){return Ow.createMaterialFromType(e)}static createMaterialFromType(e){const t={ShadowMaterial:Yj,SpriteMaterial:BA,RawShaderMaterial:Kj,ShaderMaterial:Po,PointsMaterial:_w,MeshPhysicalMaterial:Jj,MeshStandardMaterial:YA,MeshPhongMaterial:Qj,MeshToonMaterial:Zj,MeshNormalMaterial:e4,MeshLambertMaterial:t4,MeshDepthMaterial:jA,MeshDistanceMaterial:VA,MeshBasicMaterial:Cc,MeshMatcapMaterial:n4,LineDashedMaterial:i4,LineBasicMaterial:Qr,Material:fr};return new t[e]}}class vE{static decodeText(e){if(console.warn("THREE.LoaderUtils: decodeText() has been deprecated with r165 and will be removed with r175. Use TextDecoder instead."),typeof TextDecoder<"u")return new TextDecoder().decode(e);let t="";for(let i=0,r=e.length;i<r;i++)t+=String.fromCharCode(e[i]);try{return decodeURIComponent(escape(t))}catch{return t}}static extractUrlBase(e){const t=e.lastIndexOf("/");return t===-1?"./":e.slice(0,t+1)}static resolveURL(e,t){return typeof e!="string"||e===""?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}}class y4 extends rn{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}toJSON(){const e=super.toJSON();return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}class v4 extends ys{constructor(e){super(e)}load(e,t,i,r){const s=this,o=new Ja(s.manager);o.setPath(s.path),o.setRequestHeader(s.requestHeader),o.setWithCredentials(s.withCredentials),o.load(e,function(a){try{t(s.parse(JSON.parse(a)))}catch(l){r?r(l):console.error(l),s.manager.itemError(e)}},i,r)}parse(e){const t={},i={};function r(g,x){if(t[x]!==void 0)return t[x];const w=g.interleavedBuffers[x],v=s(g,w.buffer),S=Cd(w.type,v),E=new vw(S,w.stride);return E.uuid=w.uuid,t[x]=E,E}function s(g,x){if(i[x]!==void 0)return i[x];const w=g.arrayBuffers[x],v=new Uint32Array(w).buffer;return i[x]=v,v}const o=e.isInstancedBufferGeometry?new y4:new rn,a=e.data.index;if(a!==void 0){const g=Cd(a.type,a.array);o.setIndex(new qn(g,1))}const l=e.data.attributes;for(const g in l){const x=l[g];let b;if(x.isInterleavedBufferAttribute){const w=r(e.data,x.data);b=new Qu(w,x.itemSize,x.offset,x.normalized)}else{const w=Cd(x.type,x.array),v=x.isInstancedBufferAttribute?lf:qn;b=new v(w,x.itemSize,x.normalized)}x.name!==void 0&&(b.name=x.name),x.usage!==void 0&&b.setUsage(x.usage),o.setAttribute(g,b)}const c=e.data.morphAttributes;if(c)for(const g in c){const x=c[g],b=[];for(let w=0,v=x.length;w<v;w++){const S=x[w];let E;if(S.isInterleavedBufferAttribute){const C=r(e.data,S.data);E=new Qu(C,S.itemSize,S.offset,S.normalized)}else{const C=Cd(S.type,S.array);E=new qn(C,S.itemSize,S.normalized)}S.name!==void 0&&(E.name=S.name),b.push(E)}o.morphAttributes[g]=b}e.data.morphTargetsRelative&&(o.morphTargetsRelative=!0);const f=e.data.groups||e.data.drawcalls||e.data.offsets;if(f!==void 0)for(let g=0,x=f.length;g!==x;++g){const b=f[g];o.addGroup(b.start,b.count,b.materialIndex)}const m=e.data.boundingSphere;if(m!==void 0){const g=new K;m.center!==void 0&&g.fromArray(m.center),o.boundingSphere=new Lr(g,m.radius)}return e.name&&(o.name=e.name),e.userData&&(o.userData=e.userData),o}}class sQ extends ys{constructor(e){super(e)}load(e,t,i,r){const s=this,o=this.path===""?vE.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||o;const a=new Ja(this.manager);a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,function(l){let c=null;try{c=JSON.parse(l)}catch(f){r!==void 0&&r(f),console.error("THREE:ObjectLoader: Can't parse "+e+".",f.message);return}const u=c.metadata;if(u===void 0||u.type===void 0||u.type.toLowerCase()==="geometry"){r!==void 0&&r(new Error("THREE.ObjectLoader: Can't load "+e)),console.error("THREE.ObjectLoader: Can't load "+e);return}s.parse(c,t)},i,r)}async loadAsync(e,t){const i=this,r=this.path===""?vE.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||r;const s=new Ja(this.manager);s.setPath(this.path),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials);const o=await s.loadAsync(e,t),a=JSON.parse(o),l=a.metadata;if(l===void 0||l.type===void 0||l.type.toLowerCase()==="geometry")throw new Error("THREE.ObjectLoader: Can't load "+e);return await i.parseAsync(a)}parse(e,t){const i=this.parseAnimations(e.animations),r=this.parseShapes(e.shapes),s=this.parseGeometries(e.geometries,r),o=this.parseImages(e.images,function(){t!==void 0&&t(c)}),a=this.parseTextures(e.textures,o),l=this.parseMaterials(e.materials,a),c=this.parseObject(e.object,s,l,a,i),u=this.parseSkeletons(e.skeletons,c);if(this.bindSkeletons(c,u),this.bindLightTargets(c),t!==void 0){let f=!1;for(const m in o)if(o[m].data instanceof HTMLImageElement){f=!0;break}f===!1&&t(c)}return c}async parseAsync(e){const t=this.parseAnimations(e.animations),i=this.parseShapes(e.shapes),r=this.parseGeometries(e.geometries,i),s=await this.parseImagesAsync(e.images),o=this.parseTextures(e.textures,s),a=this.parseMaterials(e.materials,o),l=this.parseObject(e.object,r,a,o,t),c=this.parseSkeletons(e.skeletons,l);return this.bindSkeletons(l,c),this.bindLightTargets(l),l}parseShapes(e){const t={};if(e!==void 0)for(let i=0,r=e.length;i<r;i++){const s=new Fu().fromJSON(e[i]);t[s.uuid]=s}return t}parseSkeletons(e,t){const i={},r={};if(t.traverse(function(s){s.isBone&&(r[s.uuid]=s)}),e!==void 0)for(let s=0,o=e.length;s<o;s++){const a=new xw().fromJSON(e[s],r);i[a.uuid]=a}return i}parseGeometries(e,t){const i={};if(e!==void 0){const r=new v4;for(let s=0,o=e.length;s<o;s++){let a;const l=e[s];switch(l.type){case"BufferGeometry":case"InstancedBufferGeometry":a=r.parse(l);break;default:l.type in yL?a=yL[l.type].fromJSON(l,t):console.warn(`THREE.ObjectLoader: Unsupported geometry type "${l.type}"`)}a.uuid=l.uuid,l.name!==void 0&&(a.name=l.name),l.userData!==void 0&&(a.userData=l.userData),i[l.uuid]=a}}return i}parseMaterials(e,t){const i={},r={};if(e!==void 0){const s=new Ow;s.setTextures(t);for(let o=0,a=e.length;o<a;o++){const l=e[o];i[l.uuid]===void 0&&(i[l.uuid]=s.parse(l)),r[l.uuid]=i[l.uuid]}}return r}parseAnimations(e){const t={};if(e!==void 0)for(let i=0;i<e.length;i++){const r=e[i],s=hg.parse(r);t[s.uuid]=s}return t}parseImages(e,t){const i=this,r={};let s;function o(l){return i.manager.itemStart(l),s.load(l,function(){i.manager.itemEnd(l)},void 0,function(){i.manager.itemError(l),i.manager.itemEnd(l)})}function a(l){if(typeof l=="string"){const c=l,u=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(c)?c:i.resourcePath+c;return o(u)}else return l.data?{data:Cd(l.type,l.data),width:l.width,height:l.height}:null}if(e!==void 0&&e.length>0){const l=new ZA(t);s=new dg(l),s.setCrossOrigin(this.crossOrigin);for(let c=0,u=e.length;c<u;c++){const f=e[c],m=f.url;if(Array.isArray(m)){const g=[];for(let x=0,b=m.length;x<b;x++){const w=m[x],v=a(w);v!==null&&(v instanceof HTMLImageElement?g.push(v):g.push(new Qo(v.data,v.width,v.height)))}r[f.uuid]=new Au(g)}else{const g=a(f.url);r[f.uuid]=new Au(g)}}}return r}async parseImagesAsync(e){const t=this,i={};let r;async function s(o){if(typeof o=="string"){const a=o,l=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(a)?a:t.resourcePath+a;return await r.loadAsync(l)}else return o.data?{data:Cd(o.type,o.data),width:o.width,height:o.height}:null}if(e!==void 0&&e.length>0){r=new dg(this.manager),r.setCrossOrigin(this.crossOrigin);for(let o=0,a=e.length;o<a;o++){const l=e[o],c=l.url;if(Array.isArray(c)){const u=[];for(let f=0,m=c.length;f<m;f++){const g=c[f],x=await s(g);x!==null&&(x instanceof HTMLImageElement?u.push(x):u.push(new Qo(x.data,x.width,x.height)))}i[l.uuid]=new Au(u)}else{const u=await s(l.url);i[l.uuid]=new Au(u)}}}return i}parseTextures(e,t){function i(s,o){return typeof s=="number"?s:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",s),o[s])}const r={};if(e!==void 0)for(let s=0,o=e.length;s<o;s++){const a=e[s];a.image===void 0&&console.warn('THREE.ObjectLoader: No "image" specified for',a.uuid),t[a.image]===void 0&&console.warn("THREE.ObjectLoader: Undefined image",a.image);const l=t[a.image],c=l.data;let u;Array.isArray(c)?(u=new Bg,c.length===6&&(u.needsUpdate=!0)):(c&&c.data?u=new Qo:u=new hi,c&&(u.needsUpdate=!0)),u.source=l,u.uuid=a.uuid,a.name!==void 0&&(u.name=a.name),a.mapping!==void 0&&(u.mapping=i(a.mapping,oQ)),a.channel!==void 0&&(u.channel=a.channel),a.offset!==void 0&&u.offset.fromArray(a.offset),a.repeat!==void 0&&u.repeat.fromArray(a.repeat),a.center!==void 0&&u.center.fromArray(a.center),a.rotation!==void 0&&(u.rotation=a.rotation),a.wrap!==void 0&&(u.wrapS=i(a.wrap[0],wL),u.wrapT=i(a.wrap[1],wL)),a.format!==void 0&&(u.format=a.format),a.internalFormat!==void 0&&(u.internalFormat=a.internalFormat),a.type!==void 0&&(u.type=a.type),a.colorSpace!==void 0&&(u.colorSpace=a.colorSpace),a.minFilter!==void 0&&(u.minFilter=i(a.minFilter,bL)),a.magFilter!==void 0&&(u.magFilter=i(a.magFilter,bL)),a.anisotropy!==void 0&&(u.anisotropy=a.anisotropy),a.flipY!==void 0&&(u.flipY=a.flipY),a.generateMipmaps!==void 0&&(u.generateMipmaps=a.generateMipmaps),a.premultiplyAlpha!==void 0&&(u.premultiplyAlpha=a.premultiplyAlpha),a.unpackAlignment!==void 0&&(u.unpackAlignment=a.unpackAlignment),a.compareFunction!==void 0&&(u.compareFunction=a.compareFunction),a.userData!==void 0&&(u.userData=a.userData),r[a.uuid]=u}return r}parseObject(e,t,i,r,s){let o;function a(m){return t[m]===void 0&&console.warn("THREE.ObjectLoader: Undefined geometry",m),t[m]}function l(m){if(m!==void 0){if(Array.isArray(m)){const g=[];for(let x=0,b=m.length;x<b;x++){const w=m[x];i[w]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",w),g.push(i[w])}return g}return i[m]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",m),i[m]}}function c(m){return r[m]===void 0&&console.warn("THREE.ObjectLoader: Undefined texture",m),r[m]}let u,f;switch(e.type){case"Scene":o=new o_,e.background!==void 0&&(Number.isInteger(e.background)?o.background=new pt(e.background):o.background=c(e.background)),e.environment!==void 0&&(o.environment=c(e.environment)),e.fog!==void 0&&(e.fog.type==="Fog"?o.fog=new yw(e.fog.color,e.fog.near,e.fog.far):e.fog.type==="FogExp2"&&(o.fog=new gw(e.fog.color,e.fog.density)),e.fog.name!==""&&(o.fog.name=e.fog.name)),e.backgroundBlurriness!==void 0&&(o.backgroundBlurriness=e.backgroundBlurriness),e.backgroundIntensity!==void 0&&(o.backgroundIntensity=e.backgroundIntensity),e.backgroundRotation!==void 0&&o.backgroundRotation.fromArray(e.backgroundRotation),e.environmentIntensity!==void 0&&(o.environmentIntensity=e.environmentIntensity),e.environmentRotation!==void 0&&o.environmentRotation.fromArray(e.environmentRotation);break;case"PerspectiveCamera":o=new Oi(e.fov,e.aspect,e.near,e.far),e.focus!==void 0&&(o.focus=e.focus),e.zoom!==void 0&&(o.zoom=e.zoom),e.filmGauge!==void 0&&(o.filmGauge=e.filmGauge),e.filmOffset!==void 0&&(o.filmOffset=e.filmOffset),e.view!==void 0&&(o.view=Object.assign({},e.view));break;case"OrthographicCamera":o=new ch(e.left,e.right,e.top,e.bottom,e.near,e.far),e.zoom!==void 0&&(o.zoom=e.zoom),e.view!==void 0&&(o.view=Object.assign({},e.view));break;case"AmbientLight":o=new f4(e.color,e.intensity);break;case"DirectionalLight":o=new d4(e.color,e.intensity),o.target=e.target||"";break;case"PointLight":o=new h4(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":o=new p4(e.color,e.intensity,e.width,e.height);break;case"SpotLight":o=new u4(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay),o.target=e.target||"";break;case"HemisphereLight":o=new c4(e.color,e.groundColor,e.intensity);break;case"LightProbe":o=new g4().fromJSON(e);break;case"SkinnedMesh":u=a(e.geometry),f=l(e.material),o=new Dj(u,f),e.bindMode!==void 0&&(o.bindMode=e.bindMode),e.bindMatrix!==void 0&&o.bindMatrix.fromArray(e.bindMatrix),e.skeleton!==void 0&&(o.skeleton=e.skeleton);break;case"Mesh":u=a(e.geometry),f=l(e.material),o=new ji(u,f);break;case"InstancedMesh":u=a(e.geometry),f=l(e.material);const m=e.count,g=e.instanceMatrix,x=e.instanceColor;o=new kj(u,f,m),o.instanceMatrix=new lf(new Float32Array(g.array),16),x!==void 0&&(o.instanceColor=new lf(new Float32Array(x.array),x.itemSize));break;case"BatchedMesh":u=a(e.geometry),f=l(e.material),o=new Oj(e.maxInstanceCount,e.maxVertexCount,e.maxIndexCount,f),o.geometry=u,o.perObjectFrustumCulled=e.perObjectFrustumCulled,o.sortObjects=e.sortObjects,o._drawRanges=e.drawRanges,o._reservedRanges=e.reservedRanges,o._visibility=e.visibility,o._active=e.active,o._bounds=e.bounds.map(b=>{const w=new Yr;w.min.fromArray(b.boxMin),w.max.fromArray(b.boxMax);const v=new Lr;return v.radius=b.sphereRadius,v.center.fromArray(b.sphereCenter),{boxInitialized:b.boxInitialized,box:w,sphereInitialized:b.sphereInitialized,sphere:v}}),o._maxInstanceCount=e.maxInstanceCount,o._maxVertexCount=e.maxVertexCount,o._maxIndexCount=e.maxIndexCount,o._geometryInitialized=e.geometryInitialized,o._geometryCount=e.geometryCount,o._matricesTexture=c(e.matricesTexture.uuid),e.colorsTexture!==void 0&&(o._colorsTexture=c(e.colorsTexture.uuid));break;case"LOD":o=new Lj;break;case"Line":o=new ac(a(e.geometry),l(e.material));break;case"LineLoop":o=new Uj(a(e.geometry),l(e.material));break;case"LineSegments":o=new la(a(e.geometry),l(e.material));break;case"PointCloud":case"Points":o=new Fj(a(e.geometry),l(e.material));break;case"Sprite":o=new Nj(l(e.material));break;case"Group":o=new Md;break;case"Bone":o=new zA;break;default:o=new In}if(o.uuid=e.uuid,e.name!==void 0&&(o.name=e.name),e.matrix!==void 0?(o.matrix.fromArray(e.matrix),e.matrixAutoUpdate!==void 0&&(o.matrixAutoUpdate=e.matrixAutoUpdate),o.matrixAutoUpdate&&o.matrix.decompose(o.position,o.quaternion,o.scale)):(e.position!==void 0&&o.position.fromArray(e.position),e.rotation!==void 0&&o.rotation.fromArray(e.rotation),e.quaternion!==void 0&&o.quaternion.fromArray(e.quaternion),e.scale!==void 0&&o.scale.fromArray(e.scale)),e.up!==void 0&&o.up.fromArray(e.up),e.castShadow!==void 0&&(o.castShadow=e.castShadow),e.receiveShadow!==void 0&&(o.receiveShadow=e.receiveShadow),e.shadow&&(e.shadow.intensity!==void 0&&(o.shadow.intensity=e.shadow.intensity),e.shadow.bias!==void 0&&(o.shadow.bias=e.shadow.bias),e.shadow.normalBias!==void 0&&(o.shadow.normalBias=e.shadow.normalBias),e.shadow.radius!==void 0&&(o.shadow.radius=e.shadow.radius),e.shadow.mapSize!==void 0&&o.shadow.mapSize.fromArray(e.shadow.mapSize),e.shadow.camera!==void 0&&(o.shadow.camera=this.parseObject(e.shadow.camera))),e.visible!==void 0&&(o.visible=e.visible),e.frustumCulled!==void 0&&(o.frustumCulled=e.frustumCulled),e.renderOrder!==void 0&&(o.renderOrder=e.renderOrder),e.userData!==void 0&&(o.userData=e.userData),e.layers!==void 0&&(o.layers.mask=e.layers),e.children!==void 0){const m=e.children;for(let g=0;g<m.length;g++)o.add(this.parseObject(m[g],t,i,r,s))}if(e.animations!==void 0){const m=e.animations;for(let g=0;g<m.length;g++){const x=m[g];o.animations.push(s[x])}}if(e.type==="LOD"){e.autoUpdate!==void 0&&(o.autoUpdate=e.autoUpdate);const m=e.levels;for(let g=0;g<m.length;g++){const x=m[g],b=o.getObjectByProperty("uuid",x.object);b!==void 0&&o.addLevel(b,x.distance,x.hysteresis)}}return o}bindSkeletons(e,t){Object.keys(t).length!==0&&e.traverse(function(i){if(i.isSkinnedMesh===!0&&i.skeleton!==void 0){const r=t[i.skeleton];r===void 0?console.warn("THREE.ObjectLoader: No skeleton found with UUID:",i.skeleton):i.bind(r,i.bindMatrix)}})}bindLightTargets(e){e.traverse(function(t){if(t.isDirectionalLight||t.isSpotLight){const i=t.target,r=e.getObjectByProperty("uuid",i);r!==void 0?t.target=r:t.target=new In}})}}const oQ={UVMapping:ow,CubeReflectionMapping:Ya,CubeRefractionMapping:oc,EquirectangularReflectionMapping:Km,EquirectangularRefractionMapping:Jm,CubeUVReflectionMapping:Ef},wL={RepeatWrapping:Qm,ClampToEdgeWrapping:io,MirroredRepeatWrapping:Zm},bL={NearestFilter:ur,NearestMipmapNearestFilter:xA,NearestMipmapLinearFilter:Ed,LinearFilter:Wi,LinearMipmapNearestFilter:hm,LinearMipmapLinearFilter:Wo};class aQ extends ys{constructor(e){super(e),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(e){return this.options=e,this}load(e,t,i,r){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,o=Ia.get(e);if(o!==void 0){if(s.manager.itemStart(e),o.then){o.then(c=>{t&&t(c),s.manager.itemEnd(e)}).catch(c=>{r&&r(c)});return}return setTimeout(function(){t&&t(o),s.manager.itemEnd(e)},0),o}const a={};a.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",a.headers=this.requestHeader;const l=fetch(e,a).then(function(c){return c.blob()}).then(function(c){return createImageBitmap(c,Object.assign(s.options,{colorSpaceConversion:"none"}))}).then(function(c){return Ia.add(e,c),t&&t(c),s.manager.itemEnd(e),c}).catch(function(c){r&&r(c),Ia.remove(e),s.manager.itemError(e),s.manager.itemEnd(e)});Ia.add(e,l),s.manager.itemStart(e)}}let Qv;class tM{static getContext(){return Qv===void 0&&(Qv=new(window.AudioContext||window.webkitAudioContext)),Qv}static setContext(e){Qv=e}}class lQ extends ys{constructor(e){super(e)}load(e,t,i,r){const s=this,o=new Ja(this.manager);o.setResponseType("arraybuffer"),o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(l){try{const c=l.slice(0);tM.getContext().decodeAudioData(c,function(f){t(f)}).catch(a)}catch(c){a(c)}},i,r);function a(l){r?r(l):console.error(l),s.manager.itemError(e)}}}const SL=new Bt,TL=new Bt,ru=new Bt;class cQ{constructor(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new Oi,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new Oi,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(e){const t=this._cache;if(t.focus!==e.focus||t.fov!==e.fov||t.aspect!==e.aspect*this.aspect||t.near!==e.near||t.far!==e.far||t.zoom!==e.zoom||t.eyeSep!==this.eyeSep){t.focus=e.focus,t.fov=e.fov,t.aspect=e.aspect*this.aspect,t.near=e.near,t.far=e.far,t.zoom=e.zoom,t.eyeSep=this.eyeSep,ru.copy(e.projectionMatrix);const r=t.eyeSep/2,s=r*t.near/t.focus,o=t.near*Math.tan(Ou*t.fov*.5)/t.zoom;let a,l;TL.elements[12]=-r,SL.elements[12]=r,a=-o*t.aspect+s,l=o*t.aspect+s,ru.elements[0]=2*t.near/(l-a),ru.elements[8]=(l+a)/(l-a),this.cameraL.projectionMatrix.copy(ru),a=-o*t.aspect-s,l=o*t.aspect-s,ru.elements[0]=2*t.near/(l-a),ru.elements[8]=(l+a)/(l-a),this.cameraR.projectionMatrix.copy(ru)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(TL),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(SL)}}class nM{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=EL(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const t=EL();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}}function EL(){return performance.now()}const su=new K,CL=new gs,uQ=new K,ou=new K;class hQ extends In{constructor(){super(),this.type="AudioListener",this.context=tM.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new nM}getInput(){return this.gain}removeFilter(){return this.filter!==null&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(e){return this.filter!==null?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}updateMatrixWorld(e){super.updateMatrixWorld(e);const t=this.context.listener,i=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(su,CL,uQ),ou.set(0,0,-1).applyQuaternion(CL),t.positionX){const r=this.context.currentTime+this.timeDelta;t.positionX.linearRampToValueAtTime(su.x,r),t.positionY.linearRampToValueAtTime(su.y,r),t.positionZ.linearRampToValueAtTime(su.z,r),t.forwardX.linearRampToValueAtTime(ou.x,r),t.forwardY.linearRampToValueAtTime(ou.y,r),t.forwardZ.linearRampToValueAtTime(ou.z,r),t.upX.linearRampToValueAtTime(i.x,r),t.upY.linearRampToValueAtTime(i.y,r),t.upZ.linearRampToValueAtTime(i.z,r)}else t.setPosition(su.x,su.y,su.z),t.setOrientation(ou.x,ou.y,ou.z,i.x,i.y,i.z)}}class x4 extends In{constructor(e){super(),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}setMediaElementSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}setMediaStreamSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}setBuffer(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}play(e=0){if(this.isPlaying===!0){console.warn("THREE.Audio: Audio is already playing.");return}if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}this._startedAt=this.context.currentTime+e;const t=this.context.createBufferSource();return t.buffer=this.buffer,t.loop=this.loop,t.loopStart=this.loopStart,t.loopEnd=this.loopEnd,t.onended=this.onEnded.bind(this),t.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=t,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.isPlaying===!0&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,this.loop===!0&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this}stop(e=0){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this._progress=0,this.source!==null&&(this.source.stop(this.context.currentTime+e),this.source.onended=null),this.isPlaying=!1,this}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this._connected!==!1){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}}getFilters(){return this.filters}setFilters(e){return e||(e=[]),this._connected===!0?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}setDetune(e){return this.detune=e,this.isPlaying===!0&&this.source.detune!==void 0&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(e){return this.setFilters(e?[e]:[])}setPlaybackRate(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.playbackRate=e,this.isPlaying===!0&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1}getLoop(){return this.hasPlaybackControl===!1?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.loop=e,this.isPlaying===!0&&(this.source.loop=this.loop),this}setLoopStart(e){return this.loopStart=e,this}setLoopEnd(e){return this.loopEnd=e,this}getVolume(){return this.gain.gain.value}setVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}}const au=new K,AL=new gs,dQ=new K,lu=new K;class fQ extends x4{constructor(e){super(e),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}connect(){super.connect(),this.panner.connect(this.gain)}disconnect(){super.disconnect(),this.panner.disconnect(this.gain)}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(e){return this.panner.refDistance=e,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(e){return this.panner.rolloffFactor=e,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(e){return this.panner.distanceModel=e,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(e){return this.panner.maxDistance=e,this}setDirectionalCone(e,t,i){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=t,this.panner.coneOuterGain=i,this}updateMatrixWorld(e){if(super.updateMatrixWorld(e),this.hasPlaybackControl===!0&&this.isPlaying===!1)return;this.matrixWorld.decompose(au,AL,dQ),lu.set(0,0,1).applyQuaternion(AL);const t=this.panner;if(t.positionX){const i=this.context.currentTime+this.listener.timeDelta;t.positionX.linearRampToValueAtTime(au.x,i),t.positionY.linearRampToValueAtTime(au.y,i),t.positionZ.linearRampToValueAtTime(au.z,i),t.orientationX.linearRampToValueAtTime(lu.x,i),t.orientationY.linearRampToValueAtTime(lu.y,i),t.orientationZ.linearRampToValueAtTime(lu.z,i)}else t.setPosition(au.x,au.y,au.z),t.setOrientation(lu.x,lu.y,lu.z)}}class pQ{constructor(e,t=2048){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=t,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let e=0;const t=this.getFrequencyData();for(let i=0;i<t.length;i++)e+=t[i];return e/t.length}}class _4{constructor(e,t,i){this.binding=e,this.valueSize=i;let r,s,o;switch(t){case"quaternion":r=this._slerp,s=this._slerpAdditive,o=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(i*6),this._workIndex=5;break;case"string":case"bool":r=this._select,s=this._select,o=this._setAdditiveIdentityOther,this.buffer=new Array(i*5);break;default:r=this._lerp,s=this._lerpAdditive,o=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(i*5)}this._mixBufferRegion=r,this._mixBufferRegionAdditive=s,this._setIdentity=o,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,t){const i=this.buffer,r=this.valueSize,s=e*r+r;let o=this.cumulativeWeight;if(o===0){for(let a=0;a!==r;++a)i[s+a]=i[a];o=t}else{o+=t;const a=t/o;this._mixBufferRegion(i,s,0,a,r)}this.cumulativeWeight=o}accumulateAdditive(e){const t=this.buffer,i=this.valueSize,r=i*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(t,r,0,e,i),this.cumulativeWeightAdditive+=e}apply(e){const t=this.valueSize,i=this.buffer,r=e*t+t,s=this.cumulativeWeight,o=this.cumulativeWeightAdditive,a=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,s<1){const l=t*this._origIndex;this._mixBufferRegion(i,r,l,1-s,t)}o>0&&this._mixBufferRegionAdditive(i,r,this._addIndex*t,1,t);for(let l=t,c=t+t;l!==c;++l)if(i[l]!==i[l+t]){a.setValue(i,r);break}}saveOriginalState(){const e=this.binding,t=this.buffer,i=this.valueSize,r=i*this._origIndex;e.getValue(t,r);for(let s=i,o=r;s!==o;++s)t[s]=t[r+s%i];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const e=this.valueSize*3;this.binding.setValue(this.buffer,e)}_setAdditiveIdentityNumeric(){const e=this._addIndex*this.valueSize,t=e+this.valueSize;for(let i=e;i<t;i++)this.buffer[i]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const e=this._origIndex*this.valueSize,t=this._addIndex*this.valueSize;for(let i=0;i<this.valueSize;i++)this.buffer[t+i]=this.buffer[e+i]}_select(e,t,i,r,s){if(r>=.5)for(let o=0;o!==s;++o)e[t+o]=e[i+o]}_slerp(e,t,i,r){gs.slerpFlat(e,t,e,t,e,i,r)}_slerpAdditive(e,t,i,r,s){const o=this._workIndex*s;gs.multiplyQuaternionsFlat(e,o,e,t,e,i),gs.slerpFlat(e,t,e,t,e,o,r)}_lerp(e,t,i,r,s){const o=1-r;for(let a=0;a!==s;++a){const l=t+a;e[l]=e[l]*o+e[i+a]*r}}_lerpAdditive(e,t,i,r,s){for(let o=0;o!==s;++o){const a=t+o;e[a]=e[a]+e[i+o]*r}}}const iM="\\[\\]\\.:\\/",mQ=new RegExp("["+iM+"]","g"),rM="[^"+iM+"]",gQ="[^"+iM.replace("\\.","")+"]",yQ=/((?:WC+[\/:])*)/.source.replace("WC",rM),vQ=/(WCOD+)?/.source.replace("WCOD",gQ),xQ=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",rM),_Q=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",rM),wQ=new RegExp("^"+yQ+vQ+xQ+_Q+"$"),bQ=["material","materials","bones","map"];class SQ{constructor(e,t,i){const r=i||En.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,r)}getValue(e,t){this.bind();const i=this._targetGroup.nCachedObjects_,r=this._bindings[i];r!==void 0&&r.getValue(e,t)}setValue(e,t){const i=this._bindings;for(let r=this._targetGroup.nCachedObjects_,s=i.length;r!==s;++r)i[r].setValue(e,t)}bind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,i=e.length;t!==i;++t)e[t].bind()}unbind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,i=e.length;t!==i;++t)e[t].unbind()}}class En{constructor(e,t,i){this.path=t,this.parsedPath=i||En.parseTrackName(t),this.node=En.findNode(e,this.parsedPath.nodeName),this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,t,i){return e&&e.isAnimationObjectGroup?new En.Composite(e,t,i):new En(e,t,i)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(mQ,"")}static parseTrackName(e){const t=wQ.exec(e);if(t===null)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const i={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},r=i.nodeName&&i.nodeName.lastIndexOf(".");if(r!==void 0&&r!==-1){const s=i.nodeName.substring(r+1);bQ.indexOf(s)!==-1&&(i.nodeName=i.nodeName.substring(0,r),i.objectName=s)}if(i.propertyName===null||i.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return i}static findNode(e,t){if(t===void 0||t===""||t==="."||t===-1||t===e.name||t===e.uuid)return e;if(e.skeleton){const i=e.skeleton.getBoneByName(t);if(i!==void 0)return i}if(e.children){const i=function(s){for(let o=0;o<s.length;o++){const a=s[o];if(a.name===t||a.uuid===t)return a;const l=i(a.children);if(l)return l}return null},r=i(e.children);if(r)return r}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,t){e[t]=this.targetObject[this.propertyName]}_getValue_array(e,t){const i=this.resolvedProperty;for(let r=0,s=i.length;r!==s;++r)e[t++]=i[r]}_getValue_arrayElement(e,t){e[t]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,t){this.resolvedProperty.toArray(e,t)}_setValue_direct(e,t){this.targetObject[this.propertyName]=e[t]}_setValue_direct_setNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,t){const i=this.resolvedProperty;for(let r=0,s=i.length;r!==s;++r)i[r]=e[t++]}_setValue_array_setNeedsUpdate(e,t){const i=this.resolvedProperty;for(let r=0,s=i.length;r!==s;++r)i[r]=e[t++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,t){const i=this.resolvedProperty;for(let r=0,s=i.length;r!==s;++r)i[r]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,t){this.resolvedProperty[this.propertyIndex]=e[t]}_setValue_arrayElement_setNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,t){this.resolvedProperty.fromArray(e,t)}_setValue_fromArray_setNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,t){this.bind(),this.getValue(e,t)}_setValue_unbound(e,t){this.bind(),this.setValue(e,t)}bind(){let e=this.node;const t=this.parsedPath,i=t.objectName,r=t.propertyName;let s=t.propertyIndex;if(e||(e=En.findNode(this.rootNode,t.nodeName),this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e){console.warn("THREE.PropertyBinding: No target node found for track: "+this.path+".");return}if(i){let c=t.objectIndex;switch(i){case"materials":if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}e=e.material.materials;break;case"bones":if(!e.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}e=e.skeleton.bones;for(let u=0;u<e.length;u++)if(e[u].name===c){c=u;break}break;case"map":if("map"in e){e=e.map;break}if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.map){console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}e=e.material.map;break;default:if(e[i]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}e=e[i]}if(c!==void 0){if(e[c]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);return}e=e[c]}}const o=e[r];if(o===void 0){const c=t.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+c+"."+r+" but it wasn't found.",e);return}let a=this.Versioning.None;this.targetObject=e,e.needsUpdate!==void 0?a=this.Versioning.NeedsUpdate:e.matrixWorldNeedsUpdate!==void 0&&(a=this.Versioning.MatrixWorldNeedsUpdate);let l=this.BindingType.Direct;if(s!==void 0){if(r==="morphTargetInfluences"){if(!e.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!e.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}e.morphTargetDictionary[s]!==void 0&&(s=e.morphTargetDictionary[s])}l=this.BindingType.ArrayElement,this.resolvedProperty=o,this.propertyIndex=s}else o.fromArray!==void 0&&o.toArray!==void 0?(l=this.BindingType.HasFromToArray,this.resolvedProperty=o):Array.isArray(o)?(l=this.BindingType.EntireArray,this.resolvedProperty=o):this.propertyName=r;this.getValue=this.GetterByBindingType[l],this.setValue=this.SetterByBindingTypeAndVersioning[l][a]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}En.Composite=SQ;En.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};En.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};En.prototype.GetterByBindingType=[En.prototype._getValue_direct,En.prototype._getValue_array,En.prototype._getValue_arrayElement,En.prototype._getValue_toArray];En.prototype.SetterByBindingTypeAndVersioning=[[En.prototype._setValue_direct,En.prototype._setValue_direct_setNeedsUpdate,En.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[En.prototype._setValue_array,En.prototype._setValue_array_setNeedsUpdate,En.prototype._setValue_array_setMatrixWorldNeedsUpdate],[En.prototype._setValue_arrayElement,En.prototype._setValue_arrayElement_setNeedsUpdate,En.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[En.prototype._setValue_fromArray,En.prototype._setValue_fromArray_setNeedsUpdate,En.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class TQ{constructor(){this.isAnimationObjectGroup=!0,this.uuid=ks(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const e={};this._indicesByUUID=e;for(let i=0,r=arguments.length;i!==r;++i)e[arguments[i].uuid]=i;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const t=this;this.stats={objects:{get total(){return t._objects.length},get inUse(){return this.total-t.nCachedObjects_}},get bindingsPerObject(){return t._bindings.length}}}add(){const e=this._objects,t=this._indicesByUUID,i=this._paths,r=this._parsedPaths,s=this._bindings,o=s.length;let a,l=e.length,c=this.nCachedObjects_;for(let u=0,f=arguments.length;u!==f;++u){const m=arguments[u],g=m.uuid;let x=t[g];if(x===void 0){x=l++,t[g]=x,e.push(m);for(let b=0,w=o;b!==w;++b)s[b].push(new En(m,i[b],r[b]))}else if(x<c){a=e[x];const b=--c,w=e[b];t[w.uuid]=x,e[x]=w,t[g]=b,e[b]=m;for(let v=0,S=o;v!==S;++v){const E=s[v],C=E[b];let V=E[x];E[x]=C,V===void 0&&(V=new En(m,i[v],r[v])),E[b]=V}}else e[x]!==a&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=c}remove(){const e=this._objects,t=this._indicesByUUID,i=this._bindings,r=i.length;let s=this.nCachedObjects_;for(let o=0,a=arguments.length;o!==a;++o){const l=arguments[o],c=l.uuid,u=t[c];if(u!==void 0&&u>=s){const f=s++,m=e[f];t[m.uuid]=u,e[u]=m,t[c]=f,e[f]=l;for(let g=0,x=r;g!==x;++g){const b=i[g],w=b[f],v=b[u];b[u]=w,b[f]=v}}}this.nCachedObjects_=s}uncache(){const e=this._objects,t=this._indicesByUUID,i=this._bindings,r=i.length;let s=this.nCachedObjects_,o=e.length;for(let a=0,l=arguments.length;a!==l;++a){const c=arguments[a],u=c.uuid,f=t[u];if(f!==void 0)if(delete t[u],f<s){const m=--s,g=e[m],x=--o,b=e[x];t[g.uuid]=f,e[f]=g,t[b.uuid]=m,e[m]=b,e.pop();for(let w=0,v=r;w!==v;++w){const S=i[w],E=S[m],C=S[x];S[f]=E,S[m]=C,S.pop()}}else{const m=--o,g=e[m];m>0&&(t[g.uuid]=f),e[f]=g,e.pop();for(let x=0,b=r;x!==b;++x){const w=i[x];w[f]=w[m],w.pop()}}}this.nCachedObjects_=s}subscribe_(e,t){const i=this._bindingsIndicesByPath;let r=i[e];const s=this._bindings;if(r!==void 0)return s[r];const o=this._paths,a=this._parsedPaths,l=this._objects,c=l.length,u=this.nCachedObjects_,f=new Array(c);r=s.length,i[e]=r,o.push(e),a.push(t),s.push(f);for(let m=u,g=l.length;m!==g;++m){const x=l[m];f[m]=new En(x,e,t)}return f}unsubscribe_(e){const t=this._bindingsIndicesByPath,i=t[e];if(i!==void 0){const r=this._paths,s=this._parsedPaths,o=this._bindings,a=o.length-1,l=o[a],c=e[a];t[c]=i,o[i]=l,o.pop(),s[i]=s[a],s.pop(),r[i]=r[a],r.pop()}}}class w4{constructor(e,t,i=null,r=t.blendMode){this._mixer=e,this._clip=t,this._localRoot=i,this.blendMode=r;const s=t.tracks,o=s.length,a=new Array(o),l={endingStart:Eu,endingEnd:Eu};for(let c=0;c!==o;++c){const u=s[c].createInterpolant(null);a[c]=u,u.settings=l}this._interpolantSettings=l,this._interpolants=a,this._propertyBindings=new Array(o),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=rj,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,t){return this.loop=e,this.repetitions=t,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,t,i){if(e.fadeOut(t),this.fadeIn(t),i){const r=this._clip.duration,s=e._clip.duration,o=s/r,a=r/s;e.warp(1,o,t),this.warp(a,1,t)}return this}crossFadeTo(e,t,i){return e.crossFadeFrom(this,t,i)}stopFading(){const e=this._weightInterpolant;return e!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,t,i){const r=this._mixer,s=r.time,o=this.timeScale;let a=this._timeScaleInterpolant;a===null&&(a=r._lendControlInterpolant(),this._timeScaleInterpolant=a);const l=a.parameterPositions,c=a.sampleValues;return l[0]=s,l[1]=s+i,c[0]=e/o,c[1]=t/o,this}stopWarping(){const e=this._timeScaleInterpolant;return e!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,t,i,r){if(!this.enabled){this._updateWeight(e);return}const s=this._startTime;if(s!==null){const l=(e-s)*i;l<0||i===0?t=0:(this._startTime=null,t=i*l)}t*=this._updateTimeScale(e);const o=this._updateTime(t),a=this._updateWeight(e);if(a>0){const l=this._interpolants,c=this._propertyBindings;switch(this.blendMode){case IA:for(let u=0,f=l.length;u!==f;++u)l[u].evaluate(o),c[u].accumulateAdditive(a);break;case fw:default:for(let u=0,f=l.length;u!==f;++u)l[u].evaluate(o),c[u].accumulate(r,a)}}}_updateWeight(e){let t=0;if(this.enabled){t=this.weight;const i=this._weightInterpolant;if(i!==null){const r=i.evaluate(e)[0];t*=r,e>i.parameterPositions[1]&&(this.stopFading(),r===0&&(this.enabled=!1))}}return this._effectiveWeight=t,t}_updateTimeScale(e){let t=0;if(!this.paused){t=this.timeScale;const i=this._timeScaleInterpolant;if(i!==null){const r=i.evaluate(e)[0];t*=r,e>i.parameterPositions[1]&&(this.stopWarping(),t===0?this.paused=!0:this.timeScale=t)}}return this._effectiveTimeScale=t,t}_updateTime(e){const t=this._clip.duration,i=this.loop;let r=this.time+e,s=this._loopCount;const o=i===sj;if(e===0)return s===-1?r:o&&(s&1)===1?t-r:r;if(i===ij){s===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(r>=t)r=t;else if(r<0)r=0;else{this.time=r;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(s===-1&&(e>=0?(s=0,this._setEndings(!0,this.repetitions===0,o)):this._setEndings(this.repetitions===0,!0,o)),r>=t||r<0){const a=Math.floor(r/t);r-=t*a,s+=Math.abs(a);const l=this.repetitions-s;if(l<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,r=e>0?t:0,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(l===1){const c=e<0;this._setEndings(c,!c,o)}else this._setEndings(!1,!1,o);this._loopCount=s,this.time=r,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:a})}}else this.time=r;if(o&&(s&1)===1)return t-r}return r}_setEndings(e,t,i){const r=this._interpolantSettings;i?(r.endingStart=Cu,r.endingEnd=Cu):(e?r.endingStart=this.zeroSlopeAtStart?Cu:Eu:r.endingStart=tg,t?r.endingEnd=this.zeroSlopeAtEnd?Cu:Eu:r.endingEnd=tg)}_scheduleFading(e,t,i){const r=this._mixer,s=r.time;let o=this._weightInterpolant;o===null&&(o=r._lendControlInterpolant(),this._weightInterpolant=o);const a=o.parameterPositions,l=o.sampleValues;return a[0]=s,l[0]=t,a[1]=s+e,l[1]=i,this}}const EQ=new Float32Array(1);class CQ extends aa{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,t){const i=e._localRoot||this._root,r=e._clip.tracks,s=r.length,o=e._propertyBindings,a=e._interpolants,l=i.uuid,c=this._bindingsByRootAndName;let u=c[l];u===void 0&&(u={},c[l]=u);for(let f=0;f!==s;++f){const m=r[f],g=m.name;let x=u[g];if(x!==void 0)++x.referenceCount,o[f]=x;else{if(x=o[f],x!==void 0){x._cacheIndex===null&&(++x.referenceCount,this._addInactiveBinding(x,l,g));continue}const b=t&&t._propertyBindings[f].binding.parsedPath;x=new _4(En.create(i,g,b),m.ValueTypeName,m.getValueSize()),++x.referenceCount,this._addInactiveBinding(x,l,g),o[f]=x}a[f].resultBuffer=x.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(e._cacheIndex===null){const i=(e._localRoot||this._root).uuid,r=e._clip.uuid,s=this._actionsByClip[r];this._bindAction(e,s&&s.knownActions[0]),this._addInactiveAction(e,r,i)}const t=e._propertyBindings;for(let i=0,r=t.length;i!==r;++i){const s=t[i];s.useCount++===0&&(this._lendBinding(s),s.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){const t=e._propertyBindings;for(let i=0,r=t.length;i!==r;++i){const s=t[i];--s.useCount===0&&(s.restoreOriginalState(),this._takeBackBinding(s))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){const t=e._cacheIndex;return t!==null&&t<this._nActiveActions}_addInactiveAction(e,t,i){const r=this._actions,s=this._actionsByClip;let o=s[t];if(o===void 0)o={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,s[t]=o;else{const a=o.knownActions;e._byClipCacheIndex=a.length,a.push(e)}e._cacheIndex=r.length,r.push(e),o.actionByRoot[i]=e}_removeInactiveAction(e){const t=this._actions,i=t[t.length-1],r=e._cacheIndex;i._cacheIndex=r,t[r]=i,t.pop(),e._cacheIndex=null;const s=e._clip.uuid,o=this._actionsByClip,a=o[s],l=a.knownActions,c=l[l.length-1],u=e._byClipCacheIndex;c._byClipCacheIndex=u,l[u]=c,l.pop(),e._byClipCacheIndex=null;const f=a.actionByRoot,m=(e._localRoot||this._root).uuid;delete f[m],l.length===0&&delete o[s],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){const t=e._propertyBindings;for(let i=0,r=t.length;i!==r;++i){const s=t[i];--s.referenceCount===0&&this._removeInactiveBinding(s)}}_lendAction(e){const t=this._actions,i=e._cacheIndex,r=this._nActiveActions++,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=i,t[i]=s}_takeBackAction(e){const t=this._actions,i=e._cacheIndex,r=--this._nActiveActions,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=i,t[i]=s}_addInactiveBinding(e,t,i){const r=this._bindingsByRootAndName,s=this._bindings;let o=r[t];o===void 0&&(o={},r[t]=o),o[i]=e,e._cacheIndex=s.length,s.push(e)}_removeInactiveBinding(e){const t=this._bindings,i=e.binding,r=i.rootNode.uuid,s=i.path,o=this._bindingsByRootAndName,a=o[r],l=t[t.length-1],c=e._cacheIndex;l._cacheIndex=c,t[c]=l,t.pop(),delete a[s],Object.keys(a).length===0&&delete o[r]}_lendBinding(e){const t=this._bindings,i=e._cacheIndex,r=this._nActiveBindings++,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=i,t[i]=s}_takeBackBinding(e){const t=this._bindings,i=e._cacheIndex,r=--this._nActiveBindings,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=i,t[i]=s}_lendControlInterpolant(){const e=this._controlInterpolants,t=this._nActiveControlInterpolants++;let i=e[t];return i===void 0&&(i=new JA(new Float32Array(2),new Float32Array(2),1,EQ),i.__cacheIndex=t,e[t]=i),i}_takeBackControlInterpolant(e){const t=this._controlInterpolants,i=e.__cacheIndex,r=--this._nActiveControlInterpolants,s=t[r];e.__cacheIndex=r,t[r]=e,s.__cacheIndex=i,t[i]=s}clipAction(e,t,i){const r=t||this._root,s=r.uuid;let o=typeof e=="string"?hg.findByName(r,e):e;const a=o!==null?o.uuid:e,l=this._actionsByClip[a];let c=null;if(i===void 0&&(o!==null?i=o.blendMode:i=fw),l!==void 0){const f=l.actionByRoot[s];if(f!==void 0&&f.blendMode===i)return f;c=l.knownActions[0],o===null&&(o=c._clip)}if(o===null)return null;const u=new w4(this,o,t,i);return this._bindAction(u,c),this._addInactiveAction(u,a,s),u}existingAction(e,t){const i=t||this._root,r=i.uuid,s=typeof e=="string"?hg.findByName(i,e):e,o=s?s.uuid:e,a=this._actionsByClip[o];return a!==void 0&&a.actionByRoot[r]||null}stopAllAction(){const e=this._actions,t=this._nActiveActions;for(let i=t-1;i>=0;--i)e[i].stop();return this}update(e){e*=this.timeScale;const t=this._actions,i=this._nActiveActions,r=this.time+=e,s=Math.sign(e),o=this._accuIndex^=1;for(let c=0;c!==i;++c)t[c]._update(r,e,s,o);const a=this._bindings,l=this._nActiveBindings;for(let c=0;c!==l;++c)a[c].apply(o);return this}setTime(e){this.time=0;for(let t=0;t<this._actions.length;t++)this._actions[t].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){const t=this._actions,i=e.uuid,r=this._actionsByClip,s=r[i];if(s!==void 0){const o=s.knownActions;for(let a=0,l=o.length;a!==l;++a){const c=o[a];this._deactivateAction(c);const u=c._cacheIndex,f=t[t.length-1];c._cacheIndex=null,c._byClipCacheIndex=null,f._cacheIndex=u,t[u]=f,t.pop(),this._removeInactiveBindingsForAction(c)}delete r[i]}}uncacheRoot(e){const t=e.uuid,i=this._actionsByClip;for(const o in i){const a=i[o].actionByRoot,l=a[t];l!==void 0&&(this._deactivateAction(l),this._removeInactiveAction(l))}const r=this._bindingsByRootAndName,s=r[t];if(s!==void 0)for(const o in s){const a=s[o];a.restoreOriginalState(),this._removeInactiveBinding(a)}}uncacheAction(e,t){const i=this.existingAction(e,t);i!==null&&(this._deactivateAction(i),this._removeInactiveAction(i))}}class sM{constructor(e){this.value=e}clone(){return new sM(this.value.clone===void 0?this.value:this.value.clone())}}let AQ=0;class MQ extends aa{constructor(){super(),this.isUniformsGroup=!0,Object.defineProperty(this,"id",{value:AQ++}),this.name="",this.usage=ng,this.uniforms=[]}add(e){return this.uniforms.push(e),this}remove(e){const t=this.uniforms.indexOf(e);return t!==-1&&this.uniforms.splice(t,1),this}setName(e){return this.name=e,this}setUsage(e){return this.usage=e,this}dispose(){return this.dispatchEvent({type:"dispose"}),this}copy(e){this.name=e.name,this.usage=e.usage;const t=e.uniforms;this.uniforms.length=0;for(let i=0,r=t.length;i<r;i++){const s=Array.isArray(t[i])?t[i]:[t[i]];for(let o=0;o<s.length;o++)this.uniforms.push(s[o].clone())}return this}clone(){return new this.constructor().copy(this)}}class IQ extends vw{constructor(e,t,i=1){super(e,t),this.isInstancedInterleavedBuffer=!0,this.meshPerAttribute=i}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}clone(e){const t=super.clone(e);return t.meshPerAttribute=this.meshPerAttribute,t}toJSON(e){const t=super.toJSON(e);return t.isInstancedInterleavedBuffer=!0,t.meshPerAttribute=this.meshPerAttribute,t}}class PQ{constructor(e,t,i,r,s){this.isGLBufferAttribute=!0,this.name="",this.buffer=e,this.type=t,this.itemSize=i,this.elementSize=r,this.count=s,this.version=0}set needsUpdate(e){e===!0&&this.version++}setBuffer(e){return this.buffer=e,this}setType(e,t){return this.type=e,this.elementSize=t,this}setItemSize(e){return this.itemSize=e,this}setCount(e){return this.count=e,this}}const ML=new Bt;class b4{constructor(e,t,i=0,r=1/0){this.ray=new Af(e,t),this.near=i,this.far=r,this.camera=null,this.layers=new Uu,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,t){this.ray.set(e,t)}setFromCamera(e,t){t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):console.error("THREE.Raycaster: Unsupported camera type: "+t.type)}setFromXRController(e){return ML.identity().extractRotation(e.matrixWorld),this.ray.origin.setFromMatrixPosition(e.matrixWorld),this.ray.direction.set(0,0,-1).applyMatrix4(ML),this}intersectObject(e,t=!0,i=[]){return xE(e,this,i,t),i.sort(IL),i}intersectObjects(e,t=!0,i=[]){for(let r=0,s=e.length;r<s;r++)xE(e[r],this,i,t);return i.sort(IL),i}}function IL(n,e){return n.distance-e.distance}function xE(n,e,t,i){let r=!0;if(n.layers.test(e.layers)&&n.raycast(e,t)===!1&&(r=!1),r===!0&&i===!0){const s=n.children;for(let o=0,a=s.length;o<a;o++)xE(s[o],e,t,!0)}}class RQ{constructor(e=1,t=0,i=0){return this.radius=e,this.phi=t,this.theta=i,this}set(e,t,i){return this.radius=e,this.phi=t,this.theta=i,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=Math.max(1e-6,Math.min(Math.PI-1e-6,this.phi)),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,i){return this.radius=Math.sqrt(e*e+t*t+i*i),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,i),this.phi=Math.acos(yi(t/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}class NQ{constructor(e=1,t=0,i=0){return this.radius=e,this.theta=t,this.y=i,this}set(e,t,i){return this.radius=e,this.theta=t,this.y=i,this}copy(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,i){return this.radius=Math.sqrt(e*e+i*i),this.theta=Math.atan2(e,i),this.y=t,this}clone(){return new this.constructor().copy(this)}}class oM{constructor(e,t,i,r){oM.prototype.isMatrix2=!0,this.elements=[1,0,0,1],e!==void 0&&this.set(e,t,i,r)}identity(){return this.set(1,0,0,1),this}fromArray(e,t=0){for(let i=0;i<4;i++)this.elements[i]=e[i+t];return this}set(e,t,i,r){const s=this.elements;return s[0]=e,s[2]=t,s[1]=i,s[3]=r,this}}const PL=new De;class LQ{constructor(e=new De(1/0,1/0),t=new De(-1/0,-1/0)){this.isBox2=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromPoints(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const i=PL.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}containsPoint(e){return e.x>=this.min.x&&e.x<=this.max.x&&e.y>=this.min.y&&e.y<=this.max.y}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(e){return e.max.x>=this.min.x&&e.min.x<=this.max.x&&e.max.y>=this.min.y&&e.min.y<=this.max.y}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,PL).distanceTo(e)}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const RL=new K,Zv=new K;class DQ{constructor(e=new K,t=new K){this.start=e,this.end=t}set(e,t){return this.start.copy(e),this.end.copy(t),this}copy(e){return this.start.copy(e.start),this.end.copy(e.end),this}getCenter(e){return e.addVectors(this.start,this.end).multiplyScalar(.5)}delta(e){return e.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(e,t){return this.delta(t).multiplyScalar(e).add(this.start)}closestPointToPointParameter(e,t){RL.subVectors(e,this.start),Zv.subVectors(this.end,this.start);const i=Zv.dot(Zv);let s=Zv.dot(RL)/i;return t&&(s=yi(s,0,1)),s}closestPointToPoint(e,t,i){const r=this.closestPointToPointParameter(e,t);return this.delta(i).multiplyScalar(r).add(this.start)}applyMatrix4(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}equals(e){return e.start.equals(this.start)&&e.end.equals(this.end)}clone(){return new this.constructor().copy(this)}}const NL=new K;class kQ extends In{constructor(e,t){super(),this.light=e,this.matrixAutoUpdate=!1,this.color=t,this.type="SpotLightHelper";const i=new rn,r=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let o=0,a=1,l=32;o<l;o++,a++){const c=o/l*Math.PI*2,u=a/l*Math.PI*2;r.push(Math.cos(c),Math.sin(c),1,Math.cos(u),Math.sin(u),1)}i.setAttribute("position",new Et(r,3));const s=new Qr({fog:!1,toneMapped:!1});this.cone=new la(i,s),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),this.parent?(this.parent.updateWorldMatrix(!0),this.matrix.copy(this.parent.matrixWorld).invert().multiply(this.light.matrixWorld)):this.matrix.copy(this.light.matrixWorld),this.matrixWorld.copy(this.light.matrixWorld);const e=this.light.distance?this.light.distance:1e3,t=e*Math.tan(this.light.angle);this.cone.scale.set(t,t,e),NL.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(NL),this.color!==void 0?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}const bl=new K,e0=new Bt,ET=new Bt;class OQ extends la{constructor(e){const t=S4(e),i=new rn,r=[],s=[],o=new pt(0,0,1),a=new pt(0,1,0);for(let c=0;c<t.length;c++){const u=t[c];u.parent&&u.parent.isBone&&(r.push(0,0,0),r.push(0,0,0),s.push(o.r,o.g,o.b),s.push(a.r,a.g,a.b))}i.setAttribute("position",new Et(r,3)),i.setAttribute("color",new Et(s,3));const l=new Qr({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});super(i,l),this.isSkeletonHelper=!0,this.type="SkeletonHelper",this.root=e,this.bones=t,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(e){const t=this.bones,i=this.geometry,r=i.getAttribute("position");ET.copy(this.root.matrixWorld).invert();for(let s=0,o=0;s<t.length;s++){const a=t[s];a.parent&&a.parent.isBone&&(e0.multiplyMatrices(ET,a.matrixWorld),bl.setFromMatrixPosition(e0),r.setXYZ(o,bl.x,bl.y,bl.z),e0.multiplyMatrices(ET,a.parent.matrixWorld),bl.setFromMatrixPosition(e0),r.setXYZ(o+1,bl.x,bl.y,bl.z),o+=2)}i.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose()}}function S4(n){const e=[];n.isBone===!0&&e.push(n);for(let t=0;t<n.children.length;t++)e.push.apply(e,S4(n.children[t]));return e}class UQ extends ji{constructor(e,t,i){const r=new Wg(t,4,2),s=new Cc({wireframe:!0,fog:!1,toneMapped:!1});super(r,s),this.light=e,this.color=i,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.color!==void 0?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}const FQ=new K,LL=new pt,DL=new pt;class jQ extends In{constructor(e,t,i){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=i,this.type="HemisphereLightHelper";const r=new Gg(t);r.rotateY(Math.PI*.5),this.material=new Cc({wireframe:!0,fog:!1,toneMapped:!1}),this.color===void 0&&(this.material.vertexColors=!0);const s=r.getAttribute("position"),o=new Float32Array(s.count*3);r.setAttribute("color",new qn(o,3)),this.add(new ji(r,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const e=this.children[0];if(this.color!==void 0)this.material.color.set(this.color);else{const t=e.geometry.getAttribute("color");LL.copy(this.light.color),DL.copy(this.light.groundColor);for(let i=0,r=t.count;i<r;i++){const s=i<r/2?LL:DL;t.setXYZ(i,s.r,s.g,s.b)}t.needsUpdate=!0}this.light.updateWorldMatrix(!0,!1),e.lookAt(FQ.setFromMatrixPosition(this.light.matrixWorld).negate())}}class VQ extends la{constructor(e=10,t=10,i=4473924,r=8947848){i=new pt(i),r=new pt(r);const s=t/2,o=e/t,a=e/2,l=[],c=[];for(let m=0,g=0,x=-a;m<=t;m++,x+=o){l.push(-a,0,x,a,0,x),l.push(x,0,-a,x,0,a);const b=m===s?i:r;b.toArray(c,g),g+=3,b.toArray(c,g),g+=3,b.toArray(c,g),g+=3,b.toArray(c,g),g+=3}const u=new rn;u.setAttribute("position",new Et(l,3)),u.setAttribute("color",new Et(c,3));const f=new Qr({vertexColors:!0,toneMapped:!1});super(u,f),this.type="GridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}class BQ extends la{constructor(e=10,t=16,i=8,r=64,s=4473924,o=8947848){s=new pt(s),o=new pt(o);const a=[],l=[];if(t>1)for(let f=0;f<t;f++){const m=f/t*(Math.PI*2),g=Math.sin(m)*e,x=Math.cos(m)*e;a.push(0,0,0),a.push(g,0,x);const b=f&1?s:o;l.push(b.r,b.g,b.b),l.push(b.r,b.g,b.b)}for(let f=0;f<i;f++){const m=f&1?s:o,g=e-e/i*f;for(let x=0;x<r;x++){let b=x/r*(Math.PI*2),w=Math.sin(b)*g,v=Math.cos(b)*g;a.push(w,0,v),l.push(m.r,m.g,m.b),b=(x+1)/r*(Math.PI*2),w=Math.sin(b)*g,v=Math.cos(b)*g,a.push(w,0,v),l.push(m.r,m.g,m.b)}}const c=new rn;c.setAttribute("position",new Et(a,3)),c.setAttribute("color",new Et(l,3));const u=new Qr({vertexColors:!0,toneMapped:!1});super(c,u),this.type="PolarGridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}const kL=new K,t0=new K,OL=new K;class zQ extends In{constructor(e,t,i){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=i,this.type="DirectionalLightHelper",t===void 0&&(t=1);let r=new rn;r.setAttribute("position",new Et([-t,t,0,t,t,0,t,-t,0,-t,-t,0,-t,t,0],3));const s=new Qr({fog:!1,toneMapped:!1});this.lightPlane=new ac(r,s),this.add(this.lightPlane),r=new rn,r.setAttribute("position",new Et([0,0,0,0,0,1],3)),this.targetLine=new ac(r,s),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),kL.setFromMatrixPosition(this.light.matrixWorld),t0.setFromMatrixPosition(this.light.target.matrixWorld),OL.subVectors(t0,kL),this.lightPlane.lookAt(t0),this.color!==void 0?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(t0),this.targetLine.scale.z=OL.length()}}const n0=new K,mi=new Vg;class HQ extends la{constructor(e){const t=new rn,i=new Qr({color:16777215,vertexColors:!0,toneMapped:!1}),r=[],s=[],o={};a("n1","n2"),a("n2","n4"),a("n4","n3"),a("n3","n1"),a("f1","f2"),a("f2","f4"),a("f4","f3"),a("f3","f1"),a("n1","f1"),a("n2","f2"),a("n3","f3"),a("n4","f4"),a("p","n1"),a("p","n2"),a("p","n3"),a("p","n4"),a("u1","u2"),a("u2","u3"),a("u3","u1"),a("c","t"),a("p","c"),a("cn1","cn2"),a("cn3","cn4"),a("cf1","cf2"),a("cf3","cf4");function a(x,b){l(x),l(b)}function l(x){r.push(0,0,0),s.push(0,0,0),o[x]===void 0&&(o[x]=[]),o[x].push(r.length/3-1)}t.setAttribute("position",new Et(r,3)),t.setAttribute("color",new Et(s,3)),super(t,i),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=o,this.update();const c=new pt(16755200),u=new pt(16711680),f=new pt(43775),m=new pt(16777215),g=new pt(3355443);this.setColors(c,u,f,m,g)}setColors(e,t,i,r,s){const a=this.geometry.getAttribute("color");a.setXYZ(0,e.r,e.g,e.b),a.setXYZ(1,e.r,e.g,e.b),a.setXYZ(2,e.r,e.g,e.b),a.setXYZ(3,e.r,e.g,e.b),a.setXYZ(4,e.r,e.g,e.b),a.setXYZ(5,e.r,e.g,e.b),a.setXYZ(6,e.r,e.g,e.b),a.setXYZ(7,e.r,e.g,e.b),a.setXYZ(8,e.r,e.g,e.b),a.setXYZ(9,e.r,e.g,e.b),a.setXYZ(10,e.r,e.g,e.b),a.setXYZ(11,e.r,e.g,e.b),a.setXYZ(12,e.r,e.g,e.b),a.setXYZ(13,e.r,e.g,e.b),a.setXYZ(14,e.r,e.g,e.b),a.setXYZ(15,e.r,e.g,e.b),a.setXYZ(16,e.r,e.g,e.b),a.setXYZ(17,e.r,e.g,e.b),a.setXYZ(18,e.r,e.g,e.b),a.setXYZ(19,e.r,e.g,e.b),a.setXYZ(20,e.r,e.g,e.b),a.setXYZ(21,e.r,e.g,e.b),a.setXYZ(22,e.r,e.g,e.b),a.setXYZ(23,e.r,e.g,e.b),a.setXYZ(24,t.r,t.g,t.b),a.setXYZ(25,t.r,t.g,t.b),a.setXYZ(26,t.r,t.g,t.b),a.setXYZ(27,t.r,t.g,t.b),a.setXYZ(28,t.r,t.g,t.b),a.setXYZ(29,t.r,t.g,t.b),a.setXYZ(30,t.r,t.g,t.b),a.setXYZ(31,t.r,t.g,t.b),a.setXYZ(32,i.r,i.g,i.b),a.setXYZ(33,i.r,i.g,i.b),a.setXYZ(34,i.r,i.g,i.b),a.setXYZ(35,i.r,i.g,i.b),a.setXYZ(36,i.r,i.g,i.b),a.setXYZ(37,i.r,i.g,i.b),a.setXYZ(38,r.r,r.g,r.b),a.setXYZ(39,r.r,r.g,r.b),a.setXYZ(40,s.r,s.g,s.b),a.setXYZ(41,s.r,s.g,s.b),a.setXYZ(42,s.r,s.g,s.b),a.setXYZ(43,s.r,s.g,s.b),a.setXYZ(44,s.r,s.g,s.b),a.setXYZ(45,s.r,s.g,s.b),a.setXYZ(46,s.r,s.g,s.b),a.setXYZ(47,s.r,s.g,s.b),a.setXYZ(48,s.r,s.g,s.b),a.setXYZ(49,s.r,s.g,s.b),a.needsUpdate=!0}update(){const e=this.geometry,t=this.pointMap,i=1,r=1;mi.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),wi("c",t,e,mi,0,0,-1),wi("t",t,e,mi,0,0,1),wi("n1",t,e,mi,-i,-r,-1),wi("n2",t,e,mi,i,-r,-1),wi("n3",t,e,mi,-i,r,-1),wi("n4",t,e,mi,i,r,-1),wi("f1",t,e,mi,-i,-r,1),wi("f2",t,e,mi,i,-r,1),wi("f3",t,e,mi,-i,r,1),wi("f4",t,e,mi,i,r,1),wi("u1",t,e,mi,i*.7,r*1.1,-1),wi("u2",t,e,mi,-i*.7,r*1.1,-1),wi("u3",t,e,mi,0,r*2,-1),wi("cf1",t,e,mi,-i,0,1),wi("cf2",t,e,mi,i,0,1),wi("cf3",t,e,mi,0,-r,1),wi("cf4",t,e,mi,0,r,1),wi("cn1",t,e,mi,-i,0,-1),wi("cn2",t,e,mi,i,0,-1),wi("cn3",t,e,mi,0,-r,-1),wi("cn4",t,e,mi,0,r,-1),e.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}}function wi(n,e,t,i,r,s,o){n0.set(r,s,o).unproject(i);const a=e[n];if(a!==void 0){const l=t.getAttribute("position");for(let c=0,u=a.length;c<u;c++)l.setXYZ(a[c],n0.x,n0.y,n0.z)}}const i0=new Yr;class GQ extends la{constructor(e,t=16776960){const i=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=new Float32Array(8*3),s=new rn;s.setIndex(new qn(i,1)),s.setAttribute("position",new qn(r,3)),super(s,new Qr({color:t,toneMapped:!1})),this.object=e,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(e){if(e!==void 0&&console.warn("THREE.BoxHelper: .update() has no longer arguments."),this.object!==void 0&&i0.setFromObject(this.object),i0.isEmpty())return;const t=i0.min,i=i0.max,r=this.geometry.attributes.position,s=r.array;s[0]=i.x,s[1]=i.y,s[2]=i.z,s[3]=t.x,s[4]=i.y,s[5]=i.z,s[6]=t.x,s[7]=t.y,s[8]=i.z,s[9]=i.x,s[10]=t.y,s[11]=i.z,s[12]=i.x,s[13]=i.y,s[14]=t.z,s[15]=t.x,s[16]=i.y,s[17]=t.z,s[18]=t.x,s[19]=t.y,s[20]=t.z,s[21]=i.x,s[22]=t.y,s[23]=t.z,r.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(e){return this.object=e,this.update(),this}copy(e,t){return super.copy(e,t),this.object=e.object,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class WQ extends la{constructor(e,t=16776960){const i=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],s=new rn;s.setIndex(new qn(i,1)),s.setAttribute("position",new Et(r,3)),super(s,new Qr({color:t,toneMapped:!1})),this.box=e,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(e){const t=this.box;t.isEmpty()||(t.getCenter(this.position),t.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(e))}dispose(){this.geometry.dispose(),this.material.dispose()}}class qQ extends ac{constructor(e,t=1,i=16776960){const r=i,s=[1,-1,0,-1,1,0,-1,-1,0,1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],o=new rn;o.setAttribute("position",new Et(s,3)),o.computeBoundingSphere(),super(o,new Qr({color:r,toneMapped:!1})),this.type="PlaneHelper",this.plane=e,this.size=t;const a=[1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],l=new rn;l.setAttribute("position",new Et(a,3)),l.computeBoundingSphere(),this.add(new ji(l,new Cc({color:r,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(e){this.position.set(0,0,0),this.scale.set(.5*this.size,.5*this.size,1),this.lookAt(this.plane.normal),this.translateZ(-this.plane.constant),super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()}}const UL=new K;let r0,CT;class $Q extends In{constructor(e=new K(0,0,1),t=new K(0,0,0),i=1,r=16776960,s=i*.2,o=s*.2){super(),this.type="ArrowHelper",r0===void 0&&(r0=new rn,r0.setAttribute("position",new Et([0,0,0,0,1,0],3)),CT=new Pf(0,.5,1,5,1),CT.translate(0,-.5,0)),this.position.copy(t),this.line=new ac(r0,new Qr({color:r,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new ji(CT,new Cc({color:r,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(i,s,o)}setDirection(e){if(e.y>.99999)this.quaternion.set(0,0,0,1);else if(e.y<-.99999)this.quaternion.set(1,0,0,0);else{UL.set(e.z,0,-e.x).normalize();const t=Math.acos(e.y);this.quaternion.setFromAxisAngle(UL,t)}}setLength(e,t=e*.2,i=t*.2){this.line.scale.set(1,Math.max(1e-4,e-t),1),this.line.updateMatrix(),this.cone.scale.set(i,t,i),this.cone.position.y=e,this.cone.updateMatrix()}setColor(e){this.line.material.color.set(e),this.cone.material.color.set(e)}copy(e){return super.copy(e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this}dispose(){this.line.geometry.dispose(),this.line.material.dispose(),this.cone.geometry.dispose(),this.cone.material.dispose()}}class XQ extends la{constructor(e=1){const t=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],i=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],r=new rn;r.setAttribute("position",new Et(t,3)),r.setAttribute("color",new Et(i,3));const s=new Qr({vertexColors:!0,toneMapped:!1});super(r,s),this.type="AxesHelper"}setColors(e,t,i){const r=new pt,s=this.geometry.attributes.color.array;return r.set(e),r.toArray(s,0),r.toArray(s,3),r.set(t),r.toArray(s,6),r.toArray(s,9),r.set(i),r.toArray(s,12),r.toArray(s,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class YQ{constructor(){this.type="ShapePath",this.color=new pt,this.subPaths=[],this.currentPath=null}moveTo(e,t){return this.currentPath=new sg,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t),this}lineTo(e,t){return this.currentPath.lineTo(e,t),this}quadraticCurveTo(e,t,i,r){return this.currentPath.quadraticCurveTo(e,t,i,r),this}bezierCurveTo(e,t,i,r,s,o){return this.currentPath.bezierCurveTo(e,t,i,r,s,o),this}splineThru(e){return this.currentPath.splineThru(e),this}toShapes(e){function t(v){const S=[];for(let E=0,C=v.length;E<C;E++){const V=v[E],L=new Fu;L.curves=V.curves,S.push(L)}return S}function i(v,S){const E=S.length;let C=!1;for(let V=E-1,L=0;L<E;V=L++){let N=S[V],I=S[L],A=I.x-N.x,M=I.y-N.y;if(Math.abs(M)>Number.EPSILON){if(M<0&&(N=S[L],A=-A,I=S[V],M=-M),v.y<N.y||v.y>I.y)continue;if(v.y===N.y){if(v.x===N.x)return!0}else{const D=M*(v.x-N.x)-A*(v.y-N.y);if(D===0)return!0;if(D<0)continue;C=!C}}else{if(v.y!==N.y)continue;if(I.x<=v.x&&v.x<=N.x||N.x<=v.x&&v.x<=I.x)return!0}}return C}const r=Zo.isClockWise,s=this.subPaths;if(s.length===0)return[];let o,a,l;const c=[];if(s.length===1)return a=s[0],l=new Fu,l.curves=a.curves,c.push(l),c;let u=!r(s[0].getPoints());u=e?!u:u;const f=[],m=[];let g=[],x=0,b;m[x]=void 0,g[x]=[];for(let v=0,S=s.length;v<S;v++)a=s[v],b=a.getPoints(),o=r(b),o=e?!o:o,o?(!u&&m[x]&&x++,m[x]={s:new Fu,p:b},m[x].s.curves=a.curves,u&&x++,g[x]=[]):g[x].push({h:a,p:b[0]});if(!m[0])return t(s);if(m.length>1){let v=!1,S=0;for(let E=0,C=m.length;E<C;E++)f[E]=[];for(let E=0,C=m.length;E<C;E++){const V=g[E];for(let L=0;L<V.length;L++){const N=V[L];let I=!0;for(let A=0;A<m.length;A++)i(N.p,m[A].p)&&(E!==A&&S++,I?(I=!1,f[A].push(N)):v=!0);I&&f[E].push(N)}}S>0&&v===!1&&(g=f)}let w;for(let v=0,S=m.length;v<S;v++){l=m[v].s,c.push(l),w=g[v];for(let E=0,C=w.length;E<C;E++)l.holes.push(w[E].h)}return c}}class KQ extends aa{constructor(e,t=null){super(),this.object=e,this.domElement=t,this.enabled=!0,this.state=-1,this.keys={},this.mouseButtons={LEFT:null,MIDDLE:null,RIGHT:null},this.touches={ONE:null,TWO:null}}connect(){}disconnect(){}dispose(){}update(){}}class JQ extends Io{constructor(e=1,t=1,i=1,r={}){console.warn('THREE.WebGLMultipleRenderTargets has been deprecated and will be removed in r172. Use THREE.WebGLRenderTarget and set the "count" parameter to enable MRT.'),super(e,t,{...r,count:i}),this.isWebGLMultipleRenderTargets=!0}get texture(){return this.textures}}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:Og}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=Og);const QQ=Object.freeze(Object.defineProperty({__proto__:null,ACESFilmicToneMapping:vA,AddEquation:Dl,AddOperation:YF,AdditiveAnimationBlendMode:IA,AdditiveBlending:sE,AgXToneMapping:ej,AlphaFormat:SA,AlwaysCompare:mj,AlwaysDepth:Ax,AlwaysStencilFunc:cE,AmbientLight:f4,AnimationAction:w4,AnimationClip:hg,AnimationLoader:JJ,AnimationMixer:CQ,AnimationObjectGroup:TQ,AnimationUtils:$J,ArcCurve:jj,ArrayCamera:Ij,ArrowHelper:$Q,AttachedBindMode:lE,Audio:x4,AudioAnalyser:pQ,AudioContext:tM,AudioListener:hQ,AudioLoader:lQ,AxesHelper:XQ,BackSide:Xr,BasicDepthPacking:oj,BasicShadowMap:IF,BatchedMesh:Oj,Bone:zA,BooleanKeyframeTrack:uh,Box2:LQ,Box3:Yr,Box3Helper:WQ,BoxGeometry:lh,BoxHelper:GQ,BufferAttribute:qn,BufferGeometry:rn,BufferGeometryLoader:v4,ByteType:_A,Cache:Ia,Camera:Vg,CameraHelper:HQ,CanvasTexture:yJ,CapsuleGeometry:Sw,CatmullRomCurve3:Vj,CineonToneMapping:QF,CircleGeometry:Tw,ClampToEdgeWrapping:io,Clock:nM,Color:pt,ColorKeyframeTrack:QA,ColorManagement:_n,CompressedArrayTexture:mJ,CompressedCubeTexture:gJ,CompressedTexture:ww,CompressedTextureLoader:QJ,ConeGeometry:Ew,ConstantAlphaFactor:qF,ConstantColorFactor:GF,Controls:KQ,CubeCamera:kA,CubeReflectionMapping:Ya,CubeRefractionMapping:oc,CubeTexture:Bg,CubeTextureLoader:ZJ,CubeUVReflectionMapping:Ef,CubicBezierCurve:GA,CubicBezierCurve3:Bj,CubicInterpolant:o4,CullFaceBack:rE,CullFaceFront:MF,CullFaceFrontBack:q8,CullFaceNone:AF,Curve:Do,CurvePath:Hj,CustomBlending:PF,CustomToneMapping:ZF,CylinderGeometry:Pf,Cylindrical:NQ,Data3DTexture:NA,DataArrayTexture:pw,DataTexture:Qo,DataTextureLoader:eQ,DataUtils:sq,DecrementStencilOp:o7,DecrementWrapStencilOp:l7,DefaultLoadingManager:Pd,DepthFormat:Du,DepthStencilFormat:Ju,DepthTexture:FA,DetachedBindMode:nj,DirectionalLight:d4,DirectionalLightHelper:zQ,DiscreteInterpolant:a4,DodecahedronGeometry:Cw,DoubleSide:So,DstAlphaFactor:jF,DstColorFactor:BF,DynamicCopyUsage:b7,DynamicDrawUsage:ku,DynamicReadUsage:x7,EdgesGeometry:Gj,EllipseCurve:bw,EqualCompare:hj,EqualDepth:Ix,EqualStencilFunc:d7,EquirectangularReflectionMapping:Km,EquirectangularRefractionMapping:Jm,Euler:Fs,EventDispatcher:aa,ExtrudeGeometry:Mw,FileLoader:Ja,Float16BufferAttribute:hq,Float32BufferAttribute:Et,FloatType:ds,Fog:yw,FogExp2:gw,FramebufferTexture:pJ,FrontSide:Xa,Frustum:zg,GLBufferAttribute:PQ,GLSL1:T7,GLSL3:uE,GreaterCompare:dj,GreaterDepth:Rx,GreaterEqualCompare:pj,GreaterEqualDepth:Px,GreaterEqualStencilFunc:g7,GreaterStencilFunc:p7,GridHelper:VQ,Group:Md,HalfFloatType:Cf,HemisphereLight:c4,HemisphereLightHelper:jQ,IcosahedronGeometry:Iw,ImageBitmapLoader:aQ,ImageLoader:dg,ImageUtils:vj,IncrementStencilOp:s7,IncrementWrapStencilOp:a7,InstancedBufferAttribute:lf,InstancedBufferGeometry:y4,InstancedInterleavedBuffer:IQ,InstancedMesh:kj,Int16BufferAttribute:cq,Int32BufferAttribute:uq,Int8BufferAttribute:oq,IntType:aw,InterleavedBuffer:vw,InterleavedBufferAttribute:Qu,Interpolant:qg,InterpolateDiscrete:eg,InterpolateLinear:s_,InterpolateSmooth:L0,InvertStencilOp:c7,KeepStencilOp:fu,KeyframeTrack:ko,LOD:Lj,LatheGeometry:Hg,Layers:Uu,LessCompare:uj,LessDepth:Mx,LessEqualCompare:PA,LessEqualDepth:Yu,LessEqualStencilFunc:f7,LessStencilFunc:h7,Light:Mc,LightProbe:g4,Line:ac,Line3:DQ,LineBasicMaterial:Qr,LineCurve:WA,LineCurve3:zj,LineDashedMaterial:i4,LineLoop:Uj,LineSegments:la,LinearFilter:Wi,LinearInterpolant:JA,LinearMipMapLinearFilter:K8,LinearMipMapNearestFilter:Y8,LinearMipmapLinearFilter:Wo,LinearMipmapNearestFilter:hm,LinearSRGBColorSpace:ah,LinearToneMapping:KF,LinearTransfer:jg,Loader:ys,LoaderUtils:vE,LoadingManager:ZA,LoopOnce:ij,LoopPingPong:sj,LoopRepeat:rj,LuminanceAlphaFormat:CA,LuminanceFormat:EA,MOUSE:G8,Material:fr,MaterialLoader:Ow,MathUtils:B7,Matrix2:oM,Matrix3:en,Matrix4:Bt,MaxEquation:DF,Mesh:ji,MeshBasicMaterial:Cc,MeshDepthMaterial:jA,MeshDistanceMaterial:VA,MeshLambertMaterial:t4,MeshMatcapMaterial:n4,MeshNormalMaterial:e4,MeshPhongMaterial:Qj,MeshPhysicalMaterial:Jj,MeshStandardMaterial:YA,MeshToonMaterial:Zj,MinEquation:LF,MirroredRepeatWrapping:Zm,MixOperation:XF,MultiplyBlending:aE,MultiplyOperation:Ug,NearestFilter:ur,NearestMipMapLinearFilter:X8,NearestMipMapNearestFilter:$8,NearestMipmapLinearFilter:Ed,NearestMipmapNearestFilter:xA,NeutralToneMapping:tj,NeverCompare:cj,NeverDepth:Cx,NeverStencilFunc:u7,NoBlending:Oa,NoColorSpace:Ea,NoToneMapping:Jo,NormalAnimationBlendMode:fw,NormalBlending:Lu,NotEqualCompare:fj,NotEqualDepth:Nx,NotEqualStencilFunc:m7,NumberKeyframeTrack:cg,Object3D:In,ObjectLoader:sQ,ObjectSpaceNormalMap:lj,OctahedronGeometry:Gg,OneFactor:OF,OneMinusConstantAlphaFactor:$F,OneMinusConstantColorFactor:WF,OneMinusDstAlphaFactor:VF,OneMinusDstColorFactor:zF,OneMinusSrcAlphaFactor:Ex,OneMinusSrcColorFactor:FF,OrthographicCamera:ch,PCFShadowMap:sw,PCFSoftShadowMap:um,PMREMGenerator:hE,Path:sg,PerspectiveCamera:Oi,Plane:Rl,PlaneGeometry:Mf,PlaneHelper:qQ,PointLight:h4,PointLightHelper:UQ,Points:Fj,PointsMaterial:_w,PolarGridHelper:BQ,PolyhedronGeometry:Ac,PositionalAudio:fQ,PropertyBinding:En,PropertyMixer:_4,QuadraticBezierCurve:qA,QuadraticBezierCurve3:$A,Quaternion:gs,QuaternionKeyframeTrack:$g,QuaternionLinearInterpolant:l4,RED_GREEN_RGTC2_Format:i_,RED_RGTC1_Format:MA,REVISION:Og,RGBADepthPacking:aj,RGBAFormat:Pr,RGBAIntegerFormat:dw,RGBA_ASTC_10x10_Format:Jx,RGBA_ASTC_10x5_Format:Xx,RGBA_ASTC_10x6_Format:Yx,RGBA_ASTC_10x8_Format:Kx,RGBA_ASTC_12x10_Format:Qx,RGBA_ASTC_12x12_Format:Zx,RGBA_ASTC_4x4_Format:Vx,RGBA_ASTC_5x4_Format:Bx,RGBA_ASTC_5x5_Format:zx,RGBA_ASTC_6x5_Format:Hx,RGBA_ASTC_6x6_Format:Gx,RGBA_ASTC_8x5_Format:Wx,RGBA_ASTC_8x6_Format:qx,RGBA_ASTC_8x8_Format:$x,RGBA_BPTC_Format:gm,RGBA_ETC2_EAC_Format:jx,RGBA_PVRTC_2BPPV1_Format:Ox,RGBA_PVRTC_4BPPV1_Format:kx,RGBA_S3TC_DXT1_Format:fm,RGBA_S3TC_DXT3_Format:pm,RGBA_S3TC_DXT5_Format:mm,RGBDepthPacking:t7,RGBFormat:TA,RGBIntegerFormat:J8,RGB_BPTC_SIGNED_Format:e_,RGB_BPTC_UNSIGNED_Format:t_,RGB_ETC1_Format:Ux,RGB_ETC2_Format:Fx,RGB_PVRTC_2BPPV1_Format:Dx,RGB_PVRTC_4BPPV1_Format:Lx,RGB_S3TC_DXT1_Format:dm,RGDepthPacking:n7,RGFormat:AA,RGIntegerFormat:hw,RawShaderMaterial:Kj,Ray:Af,Raycaster:b4,RectAreaLight:p4,RedFormat:uw,RedIntegerFormat:Fg,ReinhardToneMapping:JF,RenderTarget:xj,RepeatWrapping:Qm,ReplaceStencilOp:r7,ReverseSubtractEquation:NF,RingGeometry:Pw,SIGNED_RED_GREEN_RGTC2_Format:r_,SIGNED_RED_RGTC1_Format:n_,SRGBColorSpace:os,SRGBTransfer:zn,Scene:o_,ShaderChunk:on,ShaderLib:bo,ShaderMaterial:Po,ShadowMaterial:Yj,Shape:Fu,ShapeGeometry:Rw,ShapePath:YQ,ShapeUtils:Zo,ShortType:wA,Skeleton:xw,SkeletonHelper:OQ,SkinnedMesh:Dj,Source:Au,Sphere:Lr,SphereGeometry:Wg,Spherical:RQ,SphericalHarmonics3:m4,SplineCurve:XA,SpotLight:u4,SpotLightHelper:kQ,Sprite:Nj,SpriteMaterial:BA,SrcAlphaFactor:Tx,SrcAlphaSaturateFactor:HF,SrcColorFactor:UF,StaticCopyUsage:w7,StaticDrawUsage:ng,StaticReadUsage:v7,StereoCamera:cQ,StreamCopyUsage:S7,StreamDrawUsage:y7,StreamReadUsage:_7,StringKeyframeTrack:hh,SubtractEquation:RF,SubtractiveBlending:oE,TOUCH:W8,TangentSpaceNormalMap:Ec,TetrahedronGeometry:Nw,Texture:hi,TextureLoader:tQ,TextureUtils:XK,TorusGeometry:Lw,TorusKnotGeometry:Dw,Triangle:cs,TriangleFanDrawMode:e7,TriangleStripDrawMode:Z8,TrianglesDrawMode:Q8,TubeGeometry:kw,UVMapping:ow,Uint16BufferAttribute:LA,Uint32BufferAttribute:DA,Uint8BufferAttribute:aq,Uint8ClampedBufferAttribute:lq,Uniform:sM,UniformsGroup:MQ,UniformsLib:it,UniformsUtils:bj,UnsignedByteType:Mo,UnsignedInt248Type:Ku,UnsignedInt5999Type:bA,UnsignedIntType:Ka,UnsignedShort4444Type:lw,UnsignedShort5551Type:cw,UnsignedShortType:sf,VSMShadowMap:vo,Vector2:De,Vector3:K,Vector4:An,VectorKeyframeTrack:ug,VideoTexture:fJ,WebGL3DRenderTarget:Y7,WebGLArrayRenderTarget:X7,WebGLCoordinateSystem:qo,WebGLCubeRenderTarget:OA,WebGLMultipleRenderTargets:JQ,WebGLRenderTarget:Io,WebGLRenderer:Pj,WebGLUtils:Mj,WebGPUCoordinateSystem:ig,WireframeGeometry:Xj,WrapAroundEnding:tg,ZeroCurvatureEnding:Eu,ZeroFactor:kF,ZeroSlopeEnding:Cu,ZeroStencilOp:i7,createCanvasElement:yj},Symbol.toStringTag,{value:"Module"}));var T4={exports:{}},dh={};/**
 * @license React
 * react-reconciler-constants.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */dh.ConcurrentRoot=1;dh.ContinuousEventPriority=4;dh.DefaultEventPriority=16;dh.DiscreteEventPriority=1;dh.IdleEventPriority=536870912;dh.LegacyRoot=0;T4.exports=dh;var Rd=T4.exports;function ZQ(n){let e;const t=new Set,i=(c,u)=>{const f=typeof c=="function"?c(e):c;if(f!==e){const m=e;e=u?f:Object.assign({},e,f),t.forEach(g=>g(e,m))}},r=()=>e,s=(c,u=r,f=Object.is)=>{console.warn("[DEPRECATED] Please use `subscribeWithSelector` middleware");let m=u(e);function g(){const x=u(e);if(!f(m,x)){const b=m;c(m=x,b)}}return t.add(g),()=>t.delete(g)},l={setState:i,getState:r,subscribe:(c,u,f)=>u||f?s(c,u,f):(t.add(c),()=>t.delete(c)),destroy:()=>t.clear()};return e=n(i,r,l),l}const eZ=typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),FL=eZ?B.useEffect:B.useLayoutEffect;function E4(n){const e=typeof n=="function"?ZQ(n):n,t=(i=e.getState,r=Object.is)=>{const[,s]=B.useReducer(w=>w+1,0),o=e.getState(),a=B.useRef(o),l=B.useRef(i),c=B.useRef(r),u=B.useRef(!1),f=B.useRef();f.current===void 0&&(f.current=i(o));let m,g=!1;(a.current!==o||l.current!==i||c.current!==r||u.current)&&(m=i(o),g=!r(f.current,m)),FL(()=>{g&&(f.current=m),a.current=o,l.current=i,c.current=r,u.current=!1});const x=B.useRef(o);FL(()=>{const w=()=>{try{const S=e.getState(),E=l.current(S);c.current(f.current,E)||(a.current=S,f.current=E,s())}catch{u.current=!0,s()}},v=e.subscribe(w);return e.getState()!==x.current&&w(),v},[]);const b=g?m:f.current;return B.useDebugValue(b),b};return Object.assign(t,e),t[Symbol.iterator]=function(){console.warn("[useStore, api] = create() is deprecated and will be removed in v4");const i=[t,e];return{next(){const r=i.length<=0;return{value:i.shift(),done:r}}}},t}var C4={exports:{}},AT={exports:{}},MT={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var jL;function tZ(){return jL||(jL=1,function(n){function e(F,X){var Y=F.length;F.push(X);e:for(;0<Y;){var ne=Y-1>>>1,fe=F[ne];if(0<r(fe,X))F[ne]=X,F[Y]=fe,Y=ne;else break e}}function t(F){return F.length===0?null:F[0]}function i(F){if(F.length===0)return null;var X=F[0],Y=F.pop();if(Y!==X){F[0]=Y;e:for(var ne=0,fe=F.length,Ce=fe>>>1;ne<Ce;){var ce=2*(ne+1)-1,Ee=F[ce],Oe=ce+1,Pe=F[Oe];if(0>r(Ee,Y))Oe<fe&&0>r(Pe,Ee)?(F[ne]=Pe,F[Oe]=Y,ne=Oe):(F[ne]=Ee,F[ce]=Y,ne=ce);else if(Oe<fe&&0>r(Pe,Y))F[ne]=Pe,F[Oe]=Y,ne=Oe;else break e}}return X}function r(F,X){var Y=F.sortIndex-X.sortIndex;return Y!==0?Y:F.id-X.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;n.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();n.unstable_now=function(){return o.now()-a}}var l=[],c=[],u=1,f=null,m=3,g=!1,x=!1,b=!1,w=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,S=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function E(F){for(var X=t(c);X!==null;){if(X.callback===null)i(c);else if(X.startTime<=F)i(c),X.sortIndex=X.expirationTime,e(l,X);else break;X=t(c)}}function C(F){if(b=!1,E(F),!x)if(t(l)!==null)x=!0,de(V);else{var X=t(c);X!==null&&U(C,X.startTime-F)}}function V(F,X){x=!1,b&&(b=!1,v(I),I=-1),g=!0;var Y=m;try{for(E(X),f=t(l);f!==null&&(!(f.expirationTime>X)||F&&!D());){var ne=f.callback;if(typeof ne=="function"){f.callback=null,m=f.priorityLevel;var fe=ne(f.expirationTime<=X);X=n.unstable_now(),typeof fe=="function"?f.callback=fe:f===t(l)&&i(l),E(X)}else i(l);f=t(l)}if(f!==null)var Ce=!0;else{var ce=t(c);ce!==null&&U(C,ce.startTime-X),Ce=!1}return Ce}finally{f=null,m=Y,g=!1}}var L=!1,N=null,I=-1,A=5,M=-1;function D(){return!(n.unstable_now()-M<A)}function z(){if(N!==null){var F=n.unstable_now();M=F;var X=!0;try{X=N(!0,F)}finally{X?j():(L=!1,N=null)}}else L=!1}var j;if(typeof S=="function")j=function(){S(z)};else if(typeof MessageChannel<"u"){var te=new MessageChannel,he=te.port2;te.port1.onmessage=z,j=function(){he.postMessage(null)}}else j=function(){w(z,0)};function de(F){N=F,L||(L=!0,j())}function U(F,X){I=w(function(){F(n.unstable_now())},X)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(F){F.callback=null},n.unstable_continueExecution=function(){x||g||(x=!0,de(V))},n.unstable_forceFrameRate=function(F){0>F||125<F?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<F?Math.floor(1e3/F):5},n.unstable_getCurrentPriorityLevel=function(){return m},n.unstable_getFirstCallbackNode=function(){return t(l)},n.unstable_next=function(F){switch(m){case 1:case 2:case 3:var X=3;break;default:X=m}var Y=m;m=X;try{return F()}finally{m=Y}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(F,X){switch(F){case 1:case 2:case 3:case 4:case 5:break;default:F=3}var Y=m;m=F;try{return X()}finally{m=Y}},n.unstable_scheduleCallback=function(F,X,Y){var ne=n.unstable_now();switch(typeof Y=="object"&&Y!==null?(Y=Y.delay,Y=typeof Y=="number"&&0<Y?ne+Y:ne):Y=ne,F){case 1:var fe=-1;break;case 2:fe=250;break;case 5:fe=1073741823;break;case 4:fe=1e4;break;default:fe=5e3}return fe=Y+fe,F={id:u++,callback:X,priorityLevel:F,startTime:Y,expirationTime:fe,sortIndex:-1},Y>ne?(F.sortIndex=Y,e(c,F),t(l)===null&&F===t(c)&&(b?(v(I),I=-1):b=!0,U(C,Y-ne))):(F.sortIndex=fe,e(l,F),x||g||(x=!0,de(V))),F},n.unstable_shouldYield=D,n.unstable_wrapCallback=function(F){var X=m;return function(){var Y=m;m=X;try{return F.apply(this,arguments)}finally{m=Y}}}}(MT)),MT}var VL;function nZ(){return VL||(VL=1,AT.exports=tZ()),AT.exports}/**
 * @license React
 * react-reconciler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var iZ=function(e){var t={},i=B,r=nZ(),s=Object.assign;function o(h){for(var p="https://reactjs.org/docs/error-decoder.html?invariant="+h,_=1;_<arguments.length;_++)p+="&args[]="+encodeURIComponent(arguments[_]);return"Minified React error #"+h+"; visit "+p+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var a=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,l=Symbol.for("react.element"),c=Symbol.for("react.portal"),u=Symbol.for("react.fragment"),f=Symbol.for("react.strict_mode"),m=Symbol.for("react.profiler"),g=Symbol.for("react.provider"),x=Symbol.for("react.context"),b=Symbol.for("react.forward_ref"),w=Symbol.for("react.suspense"),v=Symbol.for("react.suspense_list"),S=Symbol.for("react.memo"),E=Symbol.for("react.lazy"),C=Symbol.for("react.offscreen"),V=Symbol.iterator;function L(h){return h===null||typeof h!="object"?null:(h=V&&h[V]||h["@@iterator"],typeof h=="function"?h:null)}function N(h){if(h==null)return null;if(typeof h=="function")return h.displayName||h.name||null;if(typeof h=="string")return h;switch(h){case u:return"Fragment";case c:return"Portal";case m:return"Profiler";case f:return"StrictMode";case w:return"Suspense";case v:return"SuspenseList"}if(typeof h=="object")switch(h.$$typeof){case x:return(h.displayName||"Context")+".Consumer";case g:return(h._context.displayName||"Context")+".Provider";case b:var p=h.render;return h=h.displayName,h||(h=p.displayName||p.name||"",h=h!==""?"ForwardRef("+h+")":"ForwardRef"),h;case S:return p=h.displayName||null,p!==null?p:N(h.type)||"Memo";case E:p=h._payload,h=h._init;try{return N(h(p))}catch{}}return null}function I(h){var p=h.type;switch(h.tag){case 24:return"Cache";case 9:return(p.displayName||"Context")+".Consumer";case 10:return(p._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return h=p.render,h=h.displayName||h.name||"",p.displayName||(h!==""?"ForwardRef("+h+")":"ForwardRef");case 7:return"Fragment";case 5:return p;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return N(p);case 8:return p===f?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof p=="function")return p.displayName||p.name||null;if(typeof p=="string")return p}return null}function A(h){var p=h,_=h;if(h.alternate)for(;p.return;)p=p.return;else{h=p;do p=h,p.flags&4098&&(_=p.return),h=p.return;while(h)}return p.tag===3?_:null}function M(h){if(A(h)!==h)throw Error(o(188))}function D(h){var p=h.alternate;if(!p){if(p=A(h),p===null)throw Error(o(188));return p!==h?null:h}for(var _=h,T=p;;){var P=_.return;if(P===null)break;var O=P.alternate;if(O===null){if(T=P.return,T!==null){_=T;continue}break}if(P.child===O.child){for(O=P.child;O;){if(O===_)return M(P),h;if(O===T)return M(P),p;O=O.sibling}throw Error(o(188))}if(_.return!==T.return)_=P,T=O;else{for(var J=!1,se=P.child;se;){if(se===_){J=!0,_=P,T=O;break}if(se===T){J=!0,T=P,_=O;break}se=se.sibling}if(!J){for(se=O.child;se;){if(se===_){J=!0,_=O,T=P;break}if(se===T){J=!0,T=O,_=P;break}se=se.sibling}if(!J)throw Error(o(189))}}if(_.alternate!==T)throw Error(o(190))}if(_.tag!==3)throw Error(o(188));return _.stateNode.current===_?h:p}function z(h){return h=D(h),h!==null?j(h):null}function j(h){if(h.tag===5||h.tag===6)return h;for(h=h.child;h!==null;){var p=j(h);if(p!==null)return p;h=h.sibling}return null}function te(h){if(h.tag===5||h.tag===6)return h;for(h=h.child;h!==null;){if(h.tag!==4){var p=te(h);if(p!==null)return p}h=h.sibling}return null}var he=Array.isArray,de=e.getPublicInstance,U=e.getRootHostContext,F=e.getChildHostContext,X=e.prepareForCommit,Y=e.resetAfterCommit,ne=e.createInstance,fe=e.appendInitialChild,Ce=e.finalizeInitialChildren,ce=e.prepareUpdate,Ee=e.shouldSetTextContent,Oe=e.createTextInstance,Pe=e.scheduleTimeout,xt=e.cancelTimeout,Dt=e.noTimeout,lt=e.isPrimaryRenderer,ze=e.supportsMutation,Te=e.supportsPersistence,Me=e.supportsHydration,Q=e.getInstanceFromNode,nt=e.preparePortalMount,ke=e.getCurrentEventPriority,Ze=e.detachDeletedInstance,We=e.supportsMicrotasks,Mt=e.scheduleMicrotask,Ye=e.supportsTestSelectors,$=e.findFiberRoot,G=e.getBoundingRect,ue=e.getTextContent,be=e.isHiddenSubtree,Re=e.matchAccessibilityRole,xe=e.setFocusIfFocusable,Ve=e.setupIntersectionObserver,Ge=e.appendChild,st=e.appendChildToContainer,$t=e.commitTextUpdate,je=e.commitMount,Je=e.commitUpdate,Nt=e.insertBefore,Ot=e.insertInContainerBefore,ht=e.removeChild,an=e.removeChildFromContainer,Ht=e.resetTextContent,hn=e.hideInstance,ie=e.hideTextInstance,Ke=e.unhideInstance,_e=e.unhideTextInstance,Ie=e.clearContainer,et=e.cloneInstance,$e=e.createContainerChildSet,Ft=e.appendChildToContainerChildSet,bn=e.finalizeContainerChildren,$n=e.replaceContainerChildren,ln=e.cloneHiddenInstance,Bi=e.cloneHiddenTextInstance,Z=e.canHydrateInstance,oe=e.canHydrateTextInstance,ye=e.canHydrateSuspenseInstance,Ae=e.isSuspenseInstancePending,rt=e.isSuspenseInstanceFallback,Tt=e.registerSuspenseInstanceRetry,Ct=e.getNextHydratableSibling,dt=e.getFirstHydratableChild,mt=e.getFirstHydratableChildWithinContainer,tt=e.getFirstHydratableChildWithinSuspenseInstance,St=e.hydrateInstance,Xt=e.hydrateTextInstance,tn=e.hydrateSuspenseInstance,Dn=e.getNextHydratableInstanceAfterSuspenseInstance,Sn=e.commitHydratedContainer,H=e.commitHydratedSuspenseInstance,ee=e.clearSuspenseBoundary,pe=e.clearSuspenseBoundaryFromContainer,me=e.shouldDeleteUnhydratedTailInstances,re=e.didNotMatchHydratedContainerTextInstance,Ue=e.didNotMatchHydratedTextInstance,Xe;function ct(h){if(Xe===void 0)try{throw Error()}catch(_){var p=_.stack.trim().match(/\n( *(at )?)/);Xe=p&&p[1]||""}return`
`+Xe+h}var ot=!1;function It(h,p){if(!h||ot)return"";ot=!0;var _=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(p)if(p=function(){throw Error()},Object.defineProperty(p.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(p,[])}catch(qe){var T=qe}Reflect.construct(h,[],p)}else{try{p.call()}catch(qe){T=qe}h.call(p.prototype)}else{try{throw Error()}catch(qe){T=qe}h()}}catch(qe){if(qe&&T&&typeof qe.stack=="string"){for(var P=qe.stack.split(`
`),O=T.stack.split(`
`),J=P.length-1,se=O.length-1;1<=J&&0<=se&&P[J]!==O[se];)se--;for(;1<=J&&0<=se;J--,se--)if(P[J]!==O[se]){if(J!==1||se!==1)do if(J--,se--,0>se||P[J]!==O[se]){var Se=`
`+P[J].replace(" at new "," at ");return h.displayName&&Se.includes("<anonymous>")&&(Se=Se.replace("<anonymous>",h.displayName)),Se}while(1<=J&&0<=se);break}}}finally{ot=!1,Error.prepareStackTrace=_}return(h=h?h.displayName||h.name:"")?ct(h):""}var Lt=Object.prototype.hasOwnProperty,Fe=[],bt=-1;function Yt(h){return{current:h}}function At(h){0>bt||(h.current=Fe[bt],Fe[bt]=null,bt--)}function _t(h,p){bt++,Fe[bt]=h.current,h.current=p}var jt={},Qe=Yt(jt),Vn=Yt(!1),sn=jt;function Ci(h,p){var _=h.type.contextTypes;if(!_)return jt;var T=h.stateNode;if(T&&T.__reactInternalMemoizedUnmaskedChildContext===p)return T.__reactInternalMemoizedMaskedChildContext;var P={},O;for(O in _)P[O]=p[O];return T&&(h=h.stateNode,h.__reactInternalMemoizedUnmaskedChildContext=p,h.__reactInternalMemoizedMaskedChildContext=P),P}function ri(h){return h=h.childContextTypes,h!=null}function vi(){At(Vn),At(Qe)}function lo(h,p,_){if(Qe.current!==jt)throw Error(o(168));_t(Qe,p),_t(Vn,_)}function kn(h,p,_){var T=h.stateNode;if(p=p.childContextTypes,typeof T.getChildContext!="function")return _;T=T.getChildContext();for(var P in T)if(!(P in p))throw Error(o(108,I(h)||"Unknown",P));return s({},_,T)}function si(h){return h=(h=h.stateNode)&&h.__reactInternalMemoizedMergedChildContext||jt,sn=Qe.current,_t(Qe,h),_t(Vn,Vn.current),!0}function Yi(h,p,_){var T=h.stateNode;if(!T)throw Error(o(169));_?(h=kn(h,p,sn),T.__reactInternalMemoizedMergedChildContext=h,At(Vn),At(Qe),_t(Qe,h)):At(Vn),_t(Vn,_)}var Bn=Math.clz32?Math.clz32:On,Fr=Math.log,vs=Math.LN2;function On(h){return h>>>=0,h===0?32:31-(Fr(h)/vs|0)|0}var ca=64,Oo=4194304;function co(h){switch(h&-h){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return h&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return h&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return h}}function yh(h,p){var _=h.pendingLanes;if(_===0)return 0;var T=0,P=h.suspendedLanes,O=h.pingedLanes,J=_&268435455;if(J!==0){var se=J&~P;se!==0?T=co(se):(O&=J,O!==0&&(T=co(O)))}else J=_&~P,J!==0?T=co(J):O!==0&&(T=co(O));if(T===0)return 0;if(p!==0&&p!==T&&!(p&P)&&(P=T&-T,O=p&-p,P>=O||P===16&&(O&4194240)!==0))return p;if(T&4&&(T|=_&16),p=h.entangledLanes,p!==0)for(h=h.entanglements,p&=T;0<p;)_=31-Bn(p),P=1<<_,T|=h[_],p&=~P;return T}function dy(h,p){switch(h){case 1:case 2:case 4:return p+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return p+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function vb(h,p){for(var _=h.suspendedLanes,T=h.pingedLanes,P=h.expirationTimes,O=h.pendingLanes;0<O;){var J=31-Bn(O),se=1<<J,Se=P[J];Se===-1?(!(se&_)||se&T)&&(P[J]=dy(se,p)):Se<=p&&(h.expiredLanes|=se),O&=~se}}function Vf(h){return h=h.pendingLanes&-1073741825,h!==0?h:h&1073741824?1073741824:0}function Bf(h){for(var p=[],_=0;31>_;_++)p.push(h);return p}function Lc(h,p,_){h.pendingLanes|=p,p!==536870912&&(h.suspendedLanes=0,h.pingedLanes=0),h=h.eventTimes,p=31-Bn(p),h[p]=_}function Dc(h,p){var _=h.pendingLanes&~p;h.pendingLanes=p,h.suspendedLanes=0,h.pingedLanes=0,h.expiredLanes&=p,h.mutableReadLanes&=p,h.entangledLanes&=p,p=h.entanglements;var T=h.eventTimes;for(h=h.expirationTimes;0<_;){var P=31-Bn(_),O=1<<P;p[P]=0,T[P]=-1,h[P]=-1,_&=~O}}function zs(h,p){var _=h.entangledLanes|=p;for(h=h.entanglements;_;){var T=31-Bn(_),P=1<<T;P&p|h[T]&p&&(h[T]|=p),_&=~P}}var vn=0;function zf(h){return h&=-h,1<h?4<h?h&268435455?16:536870912:4:1}var vh=r.unstable_scheduleCallback,ua=r.unstable_cancelCallback,xb=r.unstable_shouldYield,_b=r.unstable_requestPaint,Ai=r.unstable_now,Hs=r.unstable_ImmediatePriority,wb=r.unstable_UserBlockingPriority,Hf=r.unstable_NormalPriority,xh=r.unstable_IdlePriority,ha=null,xs=null;function kc(h){if(xs&&typeof xs.onCommitFiberRoot=="function")try{xs.onCommitFiberRoot(ha,h,void 0,(h.current.flags&128)===128)}catch{}}function Oc(h,p){return h===p&&(h!==0||1/h===1/p)||h!==h&&p!==p}var _s=typeof Object.is=="function"?Object.is:Oc,ws=null,Xn=!1,Gf=!1;function fy(h){ws===null?ws=[h]:ws.push(h)}function py(h){Xn=!0,fy(h)}function bs(){if(!Gf&&ws!==null){Gf=!0;var h=0,p=vn;try{var _=ws;for(vn=1;h<_.length;h++){var T=_[h];do T=T(!0);while(T!==null)}ws=null,Xn=!1}catch(P){throw ws!==null&&(ws=ws.slice(h+1)),vh(Hs,bs),P}finally{vn=p,Gf=!1}}return null}var my=a.ReactCurrentBatchConfig;function da(h,p){if(_s(h,p))return!0;if(typeof h!="object"||h===null||typeof p!="object"||p===null)return!1;var _=Object.keys(h),T=Object.keys(p);if(_.length!==T.length)return!1;for(T=0;T<_.length;T++){var P=_[T];if(!Lt.call(p,P)||!_s(h[P],p[P]))return!1}return!0}function gy(h){switch(h.tag){case 5:return ct(h.type);case 16:return ct("Lazy");case 13:return ct("Suspense");case 19:return ct("SuspenseList");case 0:case 2:case 15:return h=It(h.type,!1),h;case 11:return h=It(h.type.render,!1),h;case 1:return h=It(h.type,!0),h;default:return""}}function xi(h,p){if(h&&h.defaultProps){p=s({},p),h=h.defaultProps;for(var _ in h)p[_]===void 0&&(p[_]=h[_]);return p}return p}var Uc=Yt(null),_h=null,Gs=null,wh=null;function Fc(){wh=Gs=_h=null}function jc(h,p,_){lt?(_t(Uc,p._currentValue),p._currentValue=_):(_t(Uc,p._currentValue2),p._currentValue2=_)}function bh(h){var p=Uc.current;At(Uc),lt?h._currentValue=p:h._currentValue2=p}function al(h,p,_){for(;h!==null;){var T=h.alternate;if((h.childLanes&p)!==p?(h.childLanes|=p,T!==null&&(T.childLanes|=p)):T!==null&&(T.childLanes&p)!==p&&(T.childLanes|=p),h===_)break;h=h.return}}function ll(h,p){_h=h,wh=Gs=null,h=h.dependencies,h!==null&&h.firstContext!==null&&(h.lanes&p&&(Es=!0),h.firstContext=null)}function jr(h){var p=lt?h._currentValue:h._currentValue2;if(wh!==h)if(h={context:h,memoizedValue:p,next:null},Gs===null){if(_h===null)throw Error(o(308));Gs=h,_h.dependencies={lanes:0,firstContext:h}}else Gs=Gs.next=h;return p}var pr=null,uo=!1;function Sh(h){h.updateQueue={baseState:h.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Th(h,p){h=h.updateQueue,p.updateQueue===h&&(p.updateQueue={baseState:h.baseState,firstBaseUpdate:h.firstBaseUpdate,lastBaseUpdate:h.lastBaseUpdate,shared:h.shared,effects:h.effects})}function Ss(h,p){return{eventTime:h,lane:p,tag:0,payload:null,callback:null,next:null}}function ho(h,p){var _=h.updateQueue;_!==null&&(_=_.shared,Ri!==null&&h.mode&1&&!(un&2)?(h=_.interleaved,h===null?(p.next=p,pr===null?pr=[_]:pr.push(_)):(p.next=h.next,h.next=p),_.interleaved=p):(h=_.pending,h===null?p.next=p:(p.next=h.next,h.next=p),_.pending=p))}function fa(h,p,_){if(p=p.updateQueue,p!==null&&(p=p.shared,(_&4194240)!==0)){var T=p.lanes;T&=h.pendingLanes,_|=T,p.lanes=_,zs(h,_)}}function Wf(h,p){var _=h.updateQueue,T=h.alternate;if(T!==null&&(T=T.updateQueue,_===T)){var P=null,O=null;if(_=_.firstBaseUpdate,_!==null){do{var J={eventTime:_.eventTime,lane:_.lane,tag:_.tag,payload:_.payload,callback:_.callback,next:null};O===null?P=O=J:O=O.next=J,_=_.next}while(_!==null);O===null?P=O=p:O=O.next=p}else P=O=p;_={baseState:T.baseState,firstBaseUpdate:P,lastBaseUpdate:O,shared:T.shared,effects:T.effects},h.updateQueue=_;return}h=_.lastBaseUpdate,h===null?_.firstBaseUpdate=p:h.next=p,_.lastBaseUpdate=p}function Vc(h,p,_,T){var P=h.updateQueue;uo=!1;var O=P.firstBaseUpdate,J=P.lastBaseUpdate,se=P.shared.pending;if(se!==null){P.shared.pending=null;var Se=se,qe=Se.next;Se.next=null,J===null?O=qe:J.next=qe,J=Se;var wt=h.alternate;wt!==null&&(wt=wt.updateQueue,se=wt.lastBaseUpdate,se!==J&&(se===null?wt.firstBaseUpdate=qe:se.next=qe,wt.lastBaseUpdate=Se))}if(O!==null){var Qt=P.baseState;J=0,wt=qe=Se=null,se=O;do{var Ut=se.lane,Yn=se.eventTime;if((T&Ut)===Ut){wt!==null&&(wt=wt.next={eventTime:Yn,lane:0,tag:se.tag,payload:se.payload,callback:se.callback,next:null});e:{var Rt=h,xr=se;switch(Ut=p,Yn=_,xr.tag){case 1:if(Rt=xr.payload,typeof Rt=="function"){Qt=Rt.call(Yn,Qt,Ut);break e}Qt=Rt;break e;case 3:Rt.flags=Rt.flags&-65537|128;case 0:if(Rt=xr.payload,Ut=typeof Rt=="function"?Rt.call(Yn,Qt,Ut):Rt,Ut==null)break e;Qt=s({},Qt,Ut);break e;case 2:uo=!0}}se.callback!==null&&se.lane!==0&&(h.flags|=64,Ut=P.effects,Ut===null?P.effects=[se]:Ut.push(se))}else Yn={eventTime:Yn,lane:Ut,tag:se.tag,payload:se.payload,callback:se.callback,next:null},wt===null?(qe=wt=Yn,Se=Qt):wt=wt.next=Yn,J|=Ut;if(se=se.next,se===null){if(se=P.shared.pending,se===null)break;Ut=se,se=Ut.next,Ut.next=null,P.lastBaseUpdate=Ut,P.shared.pending=null}}while(!0);if(wt===null&&(Se=Qt),P.baseState=Se,P.firstBaseUpdate=qe,P.lastBaseUpdate=wt,p=P.shared.interleaved,p!==null){P=p;do J|=P.lane,P=P.next;while(P!==p)}else O===null&&(P.shared.lanes=0);Lh|=J,h.lanes=J,h.memoizedState=Qt}}function Uo(h,p,_){if(h=p.effects,p.effects=null,h!==null)for(p=0;p<h.length;p++){var T=h[p],P=T.callback;if(P!==null){if(T.callback=null,T=_,typeof P!="function")throw Error(o(191,P));P.call(T)}}}var qf=new i.Component().refs;function Eh(h,p,_,T){p=h.memoizedState,_=_(T,p),_=_==null?p:s({},p,_),h.memoizedState=_,h.lanes===0&&(h.updateQueue.baseState=_)}var Bc={isMounted:function(h){return(h=h._reactInternals)?A(h)===h:!1},enqueueSetState:function(h,p,_){h=h._reactInternals;var T=zr(),P=hl(h),O=Ss(T,P);O.payload=p,_!=null&&(O.callback=_),ho(h,O),p=$s(h,P,T),p!==null&&fa(p,h,P)},enqueueReplaceState:function(h,p,_){h=h._reactInternals;var T=zr(),P=hl(h),O=Ss(T,P);O.tag=1,O.payload=p,_!=null&&(O.callback=_),ho(h,O),p=$s(h,P,T),p!==null&&fa(p,h,P)},enqueueForceUpdate:function(h,p){h=h._reactInternals;var _=zr(),T=hl(h),P=Ss(_,T);P.tag=2,p!=null&&(P.callback=p),ho(h,P),p=$s(h,T,_),p!==null&&fa(p,h,T)}};function $f(h,p,_,T,P,O,J){return h=h.stateNode,typeof h.shouldComponentUpdate=="function"?h.shouldComponentUpdate(T,O,J):p.prototype&&p.prototype.isPureReactComponent?!da(_,T)||!da(P,O):!0}function zc(h,p,_){var T=!1,P=jt,O=p.contextType;return typeof O=="object"&&O!==null?O=jr(O):(P=ri(p)?sn:Qe.current,T=p.contextTypes,O=(T=T!=null)?Ci(h,P):jt),p=new p(_,O),h.memoizedState=p.state!==null&&p.state!==void 0?p.state:null,p.updater=Bc,h.stateNode=p,p._reactInternals=h,T&&(h=h.stateNode,h.__reactInternalMemoizedUnmaskedChildContext=P,h.__reactInternalMemoizedMaskedChildContext=O),p}function mr(h,p,_,T){h=p.state,typeof p.componentWillReceiveProps=="function"&&p.componentWillReceiveProps(_,T),typeof p.UNSAFE_componentWillReceiveProps=="function"&&p.UNSAFE_componentWillReceiveProps(_,T),p.state!==h&&Bc.enqueueReplaceState(p,p.state,null)}function Ch(h,p,_,T){var P=h.stateNode;P.props=_,P.state=h.memoizedState,P.refs=qf,Sh(h);var O=p.contextType;typeof O=="object"&&O!==null?P.context=jr(O):(O=ri(p)?sn:Qe.current,P.context=Ci(h,O)),P.state=h.memoizedState,O=p.getDerivedStateFromProps,typeof O=="function"&&(Eh(h,p,O,_),P.state=h.memoizedState),typeof p.getDerivedStateFromProps=="function"||typeof P.getSnapshotBeforeUpdate=="function"||typeof P.UNSAFE_componentWillMount!="function"&&typeof P.componentWillMount!="function"||(p=P.state,typeof P.componentWillMount=="function"&&P.componentWillMount(),typeof P.UNSAFE_componentWillMount=="function"&&P.UNSAFE_componentWillMount(),p!==P.state&&Bc.enqueueReplaceState(P,P.state,null),Vc(h,_,P,T),P.state=h.memoizedState),typeof P.componentDidMount=="function"&&(h.flags|=4194308)}var pa=[],Ts=0,y=null,R=0,k=[],W=0,le=null,ve=1,He="";function xn(h,p){pa[Ts++]=R,pa[Ts++]=y,y=h,R=p}function Mi(h,p,_){k[W++]=ve,k[W++]=He,k[W++]=le,le=h;var T=ve;h=He;var P=32-Bn(T)-1;T&=~(1<<P),_+=1;var O=32-Bn(p)+P;if(30<O){var J=P-P%5;O=(T&(1<<J)-1).toString(32),T>>=J,P-=J,ve=1<<32-Bn(p)+P|_<<P|T,He=O+h}else ve=1<<O|_<<P|T,He=h}function fn(h){h.return!==null&&(xn(h,1),Mi(h,1,0))}function Ii(h){for(;h===y;)y=pa[--Ts],pa[Ts]=null,R=pa[--Ts],pa[Ts]=null;for(;h===le;)le=k[--W],k[W]=null,He=k[--W],k[W]=null,ve=k[--W],k[W]=null}var Un=null,Pi=null,pn=!1,Fo=!1,Vr=null;function WI(h,p){var _=Xs(5,null,null,0);_.elementType="DELETED",_.stateNode=p,_.return=h,p=h.deletions,p===null?(h.deletions=[_],h.flags|=16):p.push(_)}function qI(h,p){switch(h.tag){case 5:return p=Z(p,h.type,h.pendingProps),p!==null?(h.stateNode=p,Un=h,Pi=dt(p),!0):!1;case 6:return p=oe(p,h.pendingProps),p!==null?(h.stateNode=p,Un=h,Pi=null,!0):!1;case 13:if(p=ye(p),p!==null){var _=le!==null?{id:ve,overflow:He}:null;return h.memoizedState={dehydrated:p,treeContext:_,retryLane:1073741824},_=Xs(18,null,null,0),_.stateNode=p,_.return=h,h.child=_,Un=h,Pi=null,!0}return!1;default:return!1}}function bb(h){return(h.mode&1)!==0&&(h.flags&128)===0}function Sb(h){if(pn){var p=Pi;if(p){var _=p;if(!qI(h,p)){if(bb(h))throw Error(o(418));p=Ct(_);var T=Un;p&&qI(h,p)?WI(T,_):(h.flags=h.flags&-4097|2,pn=!1,Un=h)}}else{if(bb(h))throw Error(o(418));h.flags=h.flags&-4097|2,pn=!1,Un=h}}}function $I(h){for(h=h.return;h!==null&&h.tag!==5&&h.tag!==3&&h.tag!==13;)h=h.return;Un=h}function Xf(h){if(!Me||h!==Un)return!1;if(!pn)return $I(h),pn=!0,!1;if(h.tag!==3&&(h.tag!==5||me(h.type)&&!Ee(h.type,h.memoizedProps))){var p=Pi;if(p){if(bb(h)){for(h=Pi;h;)h=Ct(h);throw Error(o(418))}for(;p;)WI(h,p),p=Ct(p)}}if($I(h),h.tag===13){if(!Me)throw Error(o(316));if(h=h.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(o(317));Pi=Dn(h)}else Pi=Un?Ct(h.stateNode):null;return!0}function Ah(){Me&&(Pi=Un=null,Fo=pn=!1)}function Tb(h){Vr===null?Vr=[h]:Vr.push(h)}function Yf(h,p,_){if(h=_.ref,h!==null&&typeof h!="function"&&typeof h!="object"){if(_._owner){if(_=_._owner,_){if(_.tag!==1)throw Error(o(309));var T=_.stateNode}if(!T)throw Error(o(147,h));var P=T,O=""+h;return p!==null&&p.ref!==null&&typeof p.ref=="function"&&p.ref._stringRef===O?p.ref:(p=function(J){var se=P.refs;se===qf&&(se=P.refs={}),J===null?delete se[O]:se[O]=J},p._stringRef=O,p)}if(typeof h!="string")throw Error(o(284));if(!_._owner)throw Error(o(290,h))}return h}function yy(h,p){throw h=Object.prototype.toString.call(p),Error(o(31,h==="[object Object]"?"object with keys {"+Object.keys(p).join(", ")+"}":h))}function XI(h){var p=h._init;return p(h._payload)}function YI(h){function p(ge,ae){if(h){var we=ge.deletions;we===null?(ge.deletions=[ae],ge.flags|=16):we.push(ae)}}function _(ge,ae){if(!h)return null;for(;ae!==null;)p(ge,ae),ae=ae.sibling;return null}function T(ge,ae){for(ge=new Map;ae!==null;)ae.key!==null?ge.set(ae.key,ae):ge.set(ae.index,ae),ae=ae.sibling;return ge}function P(ge,ae){return ge=fl(ge,ae),ge.index=0,ge.sibling=null,ge}function O(ge,ae,we){return ge.index=we,h?(we=ge.alternate,we!==null?(we=we.index,we<ae?(ge.flags|=2,ae):we):(ge.flags|=2,ae)):(ge.flags|=1048576,ae)}function J(ge){return h&&ge.alternate===null&&(ge.flags|=2),ge}function se(ge,ae,we,ft){return ae===null||ae.tag!==6?(ae=aS(we,ge.mode,ft),ae.return=ge,ae):(ae=P(ae,we),ae.return=ge,ae)}function Se(ge,ae,we,ft){var Pt=we.type;return Pt===u?wt(ge,ae,we.props.children,ft,we.key):ae!==null&&(ae.elementType===Pt||typeof Pt=="object"&&Pt!==null&&Pt.$$typeof===E&&XI(Pt)===ae.type)?(ft=P(ae,we.props),ft.ref=Yf(ge,ae,we),ft.return=ge,ft):(ft=Xy(we.type,we.key,we.props,null,ge.mode,ft),ft.ref=Yf(ge,ae,we),ft.return=ge,ft)}function qe(ge,ae,we,ft){return ae===null||ae.tag!==4||ae.stateNode.containerInfo!==we.containerInfo||ae.stateNode.implementation!==we.implementation?(ae=lS(we,ge.mode,ft),ae.return=ge,ae):(ae=P(ae,we.children||[]),ae.return=ge,ae)}function wt(ge,ae,we,ft,Pt){return ae===null||ae.tag!==7?(ae=Yc(we,ge.mode,ft,Pt),ae.return=ge,ae):(ae=P(ae,we),ae.return=ge,ae)}function Qt(ge,ae,we){if(typeof ae=="string"&&ae!==""||typeof ae=="number")return ae=aS(""+ae,ge.mode,we),ae.return=ge,ae;if(typeof ae=="object"&&ae!==null){switch(ae.$$typeof){case l:return we=Xy(ae.type,ae.key,ae.props,null,ge.mode,we),we.ref=Yf(ge,null,ae),we.return=ge,we;case c:return ae=lS(ae,ge.mode,we),ae.return=ge,ae;case E:var ft=ae._init;return Qt(ge,ft(ae._payload),we)}if(he(ae)||L(ae))return ae=Yc(ae,ge.mode,we,null),ae.return=ge,ae;yy(ge,ae)}return null}function Ut(ge,ae,we,ft){var Pt=ae!==null?ae.key:null;if(typeof we=="string"&&we!==""||typeof we=="number")return Pt!==null?null:se(ge,ae,""+we,ft);if(typeof we=="object"&&we!==null){switch(we.$$typeof){case l:return we.key===Pt?Se(ge,ae,we,ft):null;case c:return we.key===Pt?qe(ge,ae,we,ft):null;case E:return Pt=we._init,Ut(ge,ae,Pt(we._payload),ft)}if(he(we)||L(we))return Pt!==null?null:wt(ge,ae,we,ft,null);yy(ge,we)}return null}function Yn(ge,ae,we,ft,Pt){if(typeof ft=="string"&&ft!==""||typeof ft=="number")return ge=ge.get(we)||null,se(ae,ge,""+ft,Pt);if(typeof ft=="object"&&ft!==null){switch(ft.$$typeof){case l:return ge=ge.get(ft.key===null?we:ft.key)||null,Se(ae,ge,ft,Pt);case c:return ge=ge.get(ft.key===null?we:ft.key)||null,qe(ae,ge,ft,Pt);case E:var cn=ft._init;return Yn(ge,ae,we,cn(ft._payload),Pt)}if(he(ft)||L(ft))return ge=ge.get(we)||null,wt(ae,ge,ft,Pt,null);yy(ae,ft)}return null}function Rt(ge,ae,we,ft){for(var Pt=null,cn=null,Zt=ae,Rn=ae=0,Ji=null;Zt!==null&&Rn<we.length;Rn++){Zt.index>Rn?(Ji=Zt,Zt=null):Ji=Zt.sibling;var Nn=Ut(ge,Zt,we[Rn],ft);if(Nn===null){Zt===null&&(Zt=Ji);break}h&&Zt&&Nn.alternate===null&&p(ge,Zt),ae=O(Nn,ae,Rn),cn===null?Pt=Nn:cn.sibling=Nn,cn=Nn,Zt=Ji}if(Rn===we.length)return _(ge,Zt),pn&&xn(ge,Rn),Pt;if(Zt===null){for(;Rn<we.length;Rn++)Zt=Qt(ge,we[Rn],ft),Zt!==null&&(ae=O(Zt,ae,Rn),cn===null?Pt=Zt:cn.sibling=Zt,cn=Zt);return pn&&xn(ge,Rn),Pt}for(Zt=T(ge,Zt);Rn<we.length;Rn++)Ji=Yn(Zt,ge,Rn,we[Rn],ft),Ji!==null&&(h&&Ji.alternate!==null&&Zt.delete(Ji.key===null?Rn:Ji.key),ae=O(Ji,ae,Rn),cn===null?Pt=Ji:cn.sibling=Ji,cn=Ji);return h&&Zt.forEach(function(pl){return p(ge,pl)}),pn&&xn(ge,Rn),Pt}function xr(ge,ae,we,ft){var Pt=L(we);if(typeof Pt!="function")throw Error(o(150));if(we=Pt.call(we),we==null)throw Error(o(151));for(var cn=Pt=null,Zt=ae,Rn=ae=0,Ji=null,Nn=we.next();Zt!==null&&!Nn.done;Rn++,Nn=we.next()){Zt.index>Rn?(Ji=Zt,Zt=null):Ji=Zt.sibling;var pl=Ut(ge,Zt,Nn.value,ft);if(pl===null){Zt===null&&(Zt=Ji);break}h&&Zt&&pl.alternate===null&&p(ge,Zt),ae=O(pl,ae,Rn),cn===null?Pt=pl:cn.sibling=pl,cn=pl,Zt=Ji}if(Nn.done)return _(ge,Zt),pn&&xn(ge,Rn),Pt;if(Zt===null){for(;!Nn.done;Rn++,Nn=we.next())Nn=Qt(ge,Nn.value,ft),Nn!==null&&(ae=O(Nn,ae,Rn),cn===null?Pt=Nn:cn.sibling=Nn,cn=Nn);return pn&&xn(ge,Rn),Pt}for(Zt=T(ge,Zt);!Nn.done;Rn++,Nn=we.next())Nn=Yn(Zt,ge,Rn,Nn.value,ft),Nn!==null&&(h&&Nn.alternate!==null&&Zt.delete(Nn.key===null?Rn:Nn.key),ae=O(Nn,ae,Rn),cn===null?Pt=Nn:cn.sibling=Nn,cn=Nn);return h&&Zt.forEach(function(Q6){return p(ge,Q6)}),pn&&xn(ge,Rn),Pt}function Ys(ge,ae,we,ft){if(typeof we=="object"&&we!==null&&we.type===u&&we.key===null&&(we=we.props.children),typeof we=="object"&&we!==null){switch(we.$$typeof){case l:e:{for(var Pt=we.key,cn=ae;cn!==null;){if(cn.key===Pt){if(Pt=we.type,Pt===u){if(cn.tag===7){_(ge,cn.sibling),ae=P(cn,we.props.children),ae.return=ge,ge=ae;break e}}else if(cn.elementType===Pt||typeof Pt=="object"&&Pt!==null&&Pt.$$typeof===E&&XI(Pt)===cn.type){_(ge,cn.sibling),ae=P(cn,we.props),ae.ref=Yf(ge,cn,we),ae.return=ge,ge=ae;break e}_(ge,cn);break}else p(ge,cn);cn=cn.sibling}we.type===u?(ae=Yc(we.props.children,ge.mode,ft,we.key),ae.return=ge,ge=ae):(ft=Xy(we.type,we.key,we.props,null,ge.mode,ft),ft.ref=Yf(ge,ae,we),ft.return=ge,ge=ft)}return J(ge);case c:e:{for(cn=we.key;ae!==null;){if(ae.key===cn)if(ae.tag===4&&ae.stateNode.containerInfo===we.containerInfo&&ae.stateNode.implementation===we.implementation){_(ge,ae.sibling),ae=P(ae,we.children||[]),ae.return=ge,ge=ae;break e}else{_(ge,ae);break}else p(ge,ae);ae=ae.sibling}ae=lS(we,ge.mode,ft),ae.return=ge,ge=ae}return J(ge);case E:return cn=we._init,Ys(ge,ae,cn(we._payload),ft)}if(he(we))return Rt(ge,ae,we,ft);if(L(we))return xr(ge,ae,we,ft);yy(ge,we)}return typeof we=="string"&&we!==""||typeof we=="number"?(we=""+we,ae!==null&&ae.tag===6?(_(ge,ae.sibling),ae=P(ae,we),ae.return=ge,ge=ae):(_(ge,ae),ae=aS(we,ge.mode,ft),ae.return=ge,ge=ae),J(ge)):_(ge,ae)}return Ys}var Mh=YI(!0),KI=YI(!1),Kf={},Ws=Yt(Kf),Jf=Yt(Kf),Ih=Yt(Kf);function jo(h){if(h===Kf)throw Error(o(174));return h}function Eb(h,p){_t(Ih,p),_t(Jf,h),_t(Ws,Kf),h=U(p),At(Ws),_t(Ws,h)}function Ph(){At(Ws),At(Jf),At(Ih)}function JI(h){var p=jo(Ih.current),_=jo(Ws.current);p=F(_,h.type,p),_!==p&&(_t(Jf,h),_t(Ws,p))}function Cb(h){Jf.current===h&&(At(Ws),At(Jf))}var oi=Yt(0);function vy(h){for(var p=h;p!==null;){if(p.tag===13){var _=p.memoizedState;if(_!==null&&(_=_.dehydrated,_===null||Ae(_)||rt(_)))return p}else if(p.tag===19&&p.memoizedProps.revealOrder!==void 0){if(p.flags&128)return p}else if(p.child!==null){p.child.return=p,p=p.child;continue}if(p===h)break;for(;p.sibling===null;){if(p.return===null||p.return===h)return null;p=p.return}p.sibling.return=p.return,p=p.sibling}return null}var Ab=[];function Mb(){for(var h=0;h<Ab.length;h++){var p=Ab[h];lt?p._workInProgressVersionPrimary=null:p._workInProgressVersionSecondary=null}Ab.length=0}var xy=a.ReactCurrentDispatcher,qs=a.ReactCurrentBatchConfig,Rh=0,pi=null,gr=null,Ki=null,_y=!1,Qf=!1,Zf=0,S6=0;function yr(){throw Error(o(321))}function Ib(h,p){if(p===null)return!1;for(var _=0;_<p.length&&_<h.length;_++)if(!_s(h[_],p[_]))return!1;return!0}function Pb(h,p,_,T,P,O){if(Rh=O,pi=p,p.memoizedState=null,p.updateQueue=null,p.lanes=0,xy.current=h===null||h.memoizedState===null?A6:M6,h=_(T,P),Qf){O=0;do{if(Qf=!1,Zf=0,25<=O)throw Error(o(301));O+=1,Ki=gr=null,p.updateQueue=null,xy.current=I6,h=_(T,P)}while(Qf)}if(xy.current=Ey,p=gr!==null&&gr.next!==null,Rh=0,Ki=gr=pi=null,_y=!1,p)throw Error(o(300));return h}function Rb(){var h=Zf!==0;return Zf=0,h}function ma(){var h={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ki===null?pi.memoizedState=Ki=h:Ki=Ki.next=h,Ki}function Vo(){if(gr===null){var h=pi.alternate;h=h!==null?h.memoizedState:null}else h=gr.next;var p=Ki===null?pi.memoizedState:Ki.next;if(p!==null)Ki=p,gr=h;else{if(h===null)throw Error(o(310));gr=h,h={memoizedState:gr.memoizedState,baseState:gr.baseState,baseQueue:gr.baseQueue,queue:gr.queue,next:null},Ki===null?pi.memoizedState=Ki=h:Ki=Ki.next=h}return Ki}function Hc(h,p){return typeof p=="function"?p(h):p}function wy(h){var p=Vo(),_=p.queue;if(_===null)throw Error(o(311));_.lastRenderedReducer=h;var T=gr,P=T.baseQueue,O=_.pending;if(O!==null){if(P!==null){var J=P.next;P.next=O.next,O.next=J}T.baseQueue=P=O,_.pending=null}if(P!==null){O=P.next,T=T.baseState;var se=J=null,Se=null,qe=O;do{var wt=qe.lane;if((Rh&wt)===wt)Se!==null&&(Se=Se.next={lane:0,action:qe.action,hasEagerState:qe.hasEagerState,eagerState:qe.eagerState,next:null}),T=qe.hasEagerState?qe.eagerState:h(T,qe.action);else{var Qt={lane:wt,action:qe.action,hasEagerState:qe.hasEagerState,eagerState:qe.eagerState,next:null};Se===null?(se=Se=Qt,J=T):Se=Se.next=Qt,pi.lanes|=wt,Lh|=wt}qe=qe.next}while(qe!==null&&qe!==O);Se===null?J=T:Se.next=se,_s(T,p.memoizedState)||(Es=!0),p.memoizedState=T,p.baseState=J,p.baseQueue=Se,_.lastRenderedState=T}if(h=_.interleaved,h!==null){P=h;do O=P.lane,pi.lanes|=O,Lh|=O,P=P.next;while(P!==h)}else P===null&&(_.lanes=0);return[p.memoizedState,_.dispatch]}function by(h){var p=Vo(),_=p.queue;if(_===null)throw Error(o(311));_.lastRenderedReducer=h;var T=_.dispatch,P=_.pending,O=p.memoizedState;if(P!==null){_.pending=null;var J=P=P.next;do O=h(O,J.action),J=J.next;while(J!==P);_s(O,p.memoizedState)||(Es=!0),p.memoizedState=O,p.baseQueue===null&&(p.baseState=O),_.lastRenderedState=O}return[O,T]}function QI(){}function ZI(h,p){var _=pi,T=Vo(),P=p(),O=!_s(T.memoizedState,P);if(O&&(T.memoizedState=P,Es=!0),T=T.queue,tp(nP.bind(null,_,T,h),[h]),T.getSnapshot!==p||O||Ki!==null&&Ki.memoizedState.tag&1){if(_.flags|=2048,ep(9,tP.bind(null,_,T,P,p),void 0,null),Ri===null)throw Error(o(349));Rh&30||eP(_,p,P)}return P}function eP(h,p,_){h.flags|=16384,h={getSnapshot:p,value:_},p=pi.updateQueue,p===null?(p={lastEffect:null,stores:null},pi.updateQueue=p,p.stores=[h]):(_=p.stores,_===null?p.stores=[h]:_.push(h))}function tP(h,p,_,T){p.value=_,p.getSnapshot=T,iP(p)&&$s(h,1,-1)}function nP(h,p,_){return _(function(){iP(p)&&$s(h,1,-1)})}function iP(h){var p=h.getSnapshot;h=h.value;try{var _=p();return!_s(h,_)}catch{return!0}}function Nb(h){var p=ma();return typeof h=="function"&&(h=h()),p.memoizedState=p.baseState=h,h={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Hc,lastRenderedState:h},p.queue=h,h=h.dispatch=C6.bind(null,pi,h),[p.memoizedState,h]}function ep(h,p,_,T){return h={tag:h,create:p,destroy:_,deps:T,next:null},p=pi.updateQueue,p===null?(p={lastEffect:null,stores:null},pi.updateQueue=p,p.lastEffect=h.next=h):(_=p.lastEffect,_===null?p.lastEffect=h.next=h:(T=_.next,_.next=h,h.next=T,p.lastEffect=h)),h}function rP(){return Vo().memoizedState}function Sy(h,p,_,T){var P=ma();pi.flags|=h,P.memoizedState=ep(1|p,_,void 0,T===void 0?null:T)}function Ty(h,p,_,T){var P=Vo();T=T===void 0?null:T;var O=void 0;if(gr!==null){var J=gr.memoizedState;if(O=J.destroy,T!==null&&Ib(T,J.deps)){P.memoizedState=ep(p,_,O,T);return}}pi.flags|=h,P.memoizedState=ep(1|p,_,O,T)}function Lb(h,p){return Sy(8390656,8,h,p)}function tp(h,p){return Ty(2048,8,h,p)}function sP(h,p){return Ty(4,2,h,p)}function oP(h,p){return Ty(4,4,h,p)}function aP(h,p){if(typeof p=="function")return h=h(),p(h),function(){p(null)};if(p!=null)return h=h(),p.current=h,function(){p.current=null}}function lP(h,p,_){return _=_!=null?_.concat([h]):null,Ty(4,4,aP.bind(null,p,h),_)}function Db(){}function cP(h,p){var _=Vo();p=p===void 0?null:p;var T=_.memoizedState;return T!==null&&p!==null&&Ib(p,T[1])?T[0]:(_.memoizedState=[h,p],h)}function uP(h,p){var _=Vo();p=p===void 0?null:p;var T=_.memoizedState;return T!==null&&p!==null&&Ib(p,T[1])?T[0]:(h=h(),_.memoizedState=[h,p],h)}function T6(h,p){var _=vn;vn=_!==0&&4>_?_:4,h(!0);var T=qs.transition;qs.transition={};try{h(!1),p()}finally{vn=_,qs.transition=T}}function hP(){return Vo().memoizedState}function E6(h,p,_){var T=hl(h);_={lane:T,action:_,hasEagerState:!1,eagerState:null,next:null},dP(h)?fP(p,_):(pP(h,p,_),_=zr(),h=$s(h,T,_),h!==null&&mP(h,p,T))}function C6(h,p,_){var T=hl(h),P={lane:T,action:_,hasEagerState:!1,eagerState:null,next:null};if(dP(h))fP(p,P);else{pP(h,p,P);var O=h.alternate;if(h.lanes===0&&(O===null||O.lanes===0)&&(O=p.lastRenderedReducer,O!==null))try{var J=p.lastRenderedState,se=O(J,_);if(P.hasEagerState=!0,P.eagerState=se,_s(se,J))return}catch{}finally{}_=zr(),h=$s(h,T,_),h!==null&&mP(h,p,T)}}function dP(h){var p=h.alternate;return h===pi||p!==null&&p===pi}function fP(h,p){Qf=_y=!0;var _=h.pending;_===null?p.next=p:(p.next=_.next,_.next=p),h.pending=p}function pP(h,p,_){Ri!==null&&h.mode&1&&!(un&2)?(h=p.interleaved,h===null?(_.next=_,pr===null?pr=[p]:pr.push(p)):(_.next=h.next,h.next=_),p.interleaved=_):(h=p.pending,h===null?_.next=_:(_.next=h.next,h.next=_),p.pending=_)}function mP(h,p,_){if(_&4194240){var T=p.lanes;T&=h.pendingLanes,_|=T,p.lanes=_,zs(h,_)}}var Ey={readContext:jr,useCallback:yr,useContext:yr,useEffect:yr,useImperativeHandle:yr,useInsertionEffect:yr,useLayoutEffect:yr,useMemo:yr,useReducer:yr,useRef:yr,useState:yr,useDebugValue:yr,useDeferredValue:yr,useTransition:yr,useMutableSource:yr,useSyncExternalStore:yr,useId:yr,unstable_isNewReconciler:!1},A6={readContext:jr,useCallback:function(h,p){return ma().memoizedState=[h,p===void 0?null:p],h},useContext:jr,useEffect:Lb,useImperativeHandle:function(h,p,_){return _=_!=null?_.concat([h]):null,Sy(4194308,4,aP.bind(null,p,h),_)},useLayoutEffect:function(h,p){return Sy(4194308,4,h,p)},useInsertionEffect:function(h,p){return Sy(4,2,h,p)},useMemo:function(h,p){var _=ma();return p=p===void 0?null:p,h=h(),_.memoizedState=[h,p],h},useReducer:function(h,p,_){var T=ma();return p=_!==void 0?_(p):p,T.memoizedState=T.baseState=p,h={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:h,lastRenderedState:p},T.queue=h,h=h.dispatch=E6.bind(null,pi,h),[T.memoizedState,h]},useRef:function(h){var p=ma();return h={current:h},p.memoizedState=h},useState:Nb,useDebugValue:Db,useDeferredValue:function(h){var p=Nb(h),_=p[0],T=p[1];return Lb(function(){var P=qs.transition;qs.transition={};try{T(h)}finally{qs.transition=P}},[h]),_},useTransition:function(){var h=Nb(!1),p=h[0];return h=T6.bind(null,h[1]),ma().memoizedState=h,[p,h]},useMutableSource:function(){},useSyncExternalStore:function(h,p,_){var T=pi,P=ma();if(pn){if(_===void 0)throw Error(o(407));_=_()}else{if(_=p(),Ri===null)throw Error(o(349));Rh&30||eP(T,p,_)}P.memoizedState=_;var O={value:_,getSnapshot:p};return P.queue=O,Lb(nP.bind(null,T,O,h),[h]),T.flags|=2048,ep(9,tP.bind(null,T,O,_,p),void 0,null),_},useId:function(){var h=ma(),p=Ri.identifierPrefix;if(pn){var _=He,T=ve;_=(T&~(1<<32-Bn(T)-1)).toString(32)+_,p=":"+p+"R"+_,_=Zf++,0<_&&(p+="H"+_.toString(32)),p+=":"}else _=S6++,p=":"+p+"r"+_.toString(32)+":";return h.memoizedState=p},unstable_isNewReconciler:!1},M6={readContext:jr,useCallback:cP,useContext:jr,useEffect:tp,useImperativeHandle:lP,useInsertionEffect:sP,useLayoutEffect:oP,useMemo:uP,useReducer:wy,useRef:rP,useState:function(){return wy(Hc)},useDebugValue:Db,useDeferredValue:function(h){var p=wy(Hc),_=p[0],T=p[1];return tp(function(){var P=qs.transition;qs.transition={};try{T(h)}finally{qs.transition=P}},[h]),_},useTransition:function(){var h=wy(Hc)[0],p=Vo().memoizedState;return[h,p]},useMutableSource:QI,useSyncExternalStore:ZI,useId:hP,unstable_isNewReconciler:!1},I6={readContext:jr,useCallback:cP,useContext:jr,useEffect:tp,useImperativeHandle:lP,useInsertionEffect:sP,useLayoutEffect:oP,useMemo:uP,useReducer:by,useRef:rP,useState:function(){return by(Hc)},useDebugValue:Db,useDeferredValue:function(h){var p=by(Hc),_=p[0],T=p[1];return tp(function(){var P=qs.transition;qs.transition={};try{T(h)}finally{qs.transition=P}},[h]),_},useTransition:function(){var h=by(Hc)[0],p=Vo().memoizedState;return[h,p]},useMutableSource:QI,useSyncExternalStore:ZI,useId:hP,unstable_isNewReconciler:!1};function kb(h,p){try{var _="",T=p;do _+=gy(T),T=T.return;while(T);var P=_}catch(O){P=`
Error generating stack: `+O.message+`
`+O.stack}return{value:h,source:p,stack:P}}function Ob(h,p){try{console.error(p.value)}catch(_){setTimeout(function(){throw _})}}var P6=typeof WeakMap=="function"?WeakMap:Map;function gP(h,p,_){_=Ss(-1,_),_.tag=3,_.payload={element:null};var T=p.value;return _.callback=function(){By||(By=!0,eS=T),Ob(h,p)},_}function yP(h,p,_){_=Ss(-1,_),_.tag=3;var T=h.type.getDerivedStateFromError;if(typeof T=="function"){var P=p.value;_.payload=function(){return T(P)},_.callback=function(){Ob(h,p)}}var O=h.stateNode;return O!==null&&typeof O.componentDidCatch=="function"&&(_.callback=function(){Ob(h,p),typeof T!="function"&&(cl===null?cl=new Set([this]):cl.add(this));var J=p.stack;this.componentDidCatch(p.value,{componentStack:J!==null?J:""})}),_}function vP(h,p,_){var T=h.pingCache;if(T===null){T=h.pingCache=new P6;var P=new Set;T.set(p,P)}else P=T.get(p),P===void 0&&(P=new Set,T.set(p,P));P.has(_)||(P.add(_),h=G6.bind(null,h,p,_),p.then(h,h))}function xP(h){do{var p;if((p=h.tag===13)&&(p=h.memoizedState,p=p!==null?p.dehydrated!==null:!0),p)return h;h=h.return}while(h!==null);return null}function _P(h,p,_,T,P){return h.mode&1?(h.flags|=65536,h.lanes=P,h):(h===p?h.flags|=65536:(h.flags|=128,_.flags|=131072,_.flags&=-52805,_.tag===1&&(_.alternate===null?_.tag=17:(p=Ss(-1,1),p.tag=2,ho(_,p))),_.lanes|=1),h)}function Bo(h){h.flags|=4}function wP(h,p){if(h!==null&&h.child===p.child)return!0;if(p.flags&16)return!1;for(h=p.child;h!==null;){if(h.flags&12854||h.subtreeFlags&12854)return!1;h=h.sibling}return!0}var np,ip,Cy,Ay;if(ze)np=function(h,p){for(var _=p.child;_!==null;){if(_.tag===5||_.tag===6)fe(h,_.stateNode);else if(_.tag!==4&&_.child!==null){_.child.return=_,_=_.child;continue}if(_===p)break;for(;_.sibling===null;){if(_.return===null||_.return===p)return;_=_.return}_.sibling.return=_.return,_=_.sibling}},ip=function(){},Cy=function(h,p,_,T,P){if(h=h.memoizedProps,h!==T){var O=p.stateNode,J=jo(Ws.current);_=ce(O,_,h,T,P,J),(p.updateQueue=_)&&Bo(p)}},Ay=function(h,p,_,T){_!==T&&Bo(p)};else if(Te){np=function(h,p,_,T){for(var P=p.child;P!==null;){if(P.tag===5){var O=P.stateNode;_&&T&&(O=ln(O,P.type,P.memoizedProps,P)),fe(h,O)}else if(P.tag===6)O=P.stateNode,_&&T&&(O=Bi(O,P.memoizedProps,P)),fe(h,O);else if(P.tag!==4){if(P.tag===22&&P.memoizedState!==null)O=P.child,O!==null&&(O.return=P),np(h,P,!0,!0);else if(P.child!==null){P.child.return=P,P=P.child;continue}}if(P===p)break;for(;P.sibling===null;){if(P.return===null||P.return===p)return;P=P.return}P.sibling.return=P.return,P=P.sibling}};var bP=function(h,p,_,T){for(var P=p.child;P!==null;){if(P.tag===5){var O=P.stateNode;_&&T&&(O=ln(O,P.type,P.memoizedProps,P)),Ft(h,O)}else if(P.tag===6)O=P.stateNode,_&&T&&(O=Bi(O,P.memoizedProps,P)),Ft(h,O);else if(P.tag!==4){if(P.tag===22&&P.memoizedState!==null)O=P.child,O!==null&&(O.return=P),bP(h,P,!0,!0);else if(P.child!==null){P.child.return=P,P=P.child;continue}}if(P===p)break;for(;P.sibling===null;){if(P.return===null||P.return===p)return;P=P.return}P.sibling.return=P.return,P=P.sibling}};ip=function(h,p){var _=p.stateNode;if(!wP(h,p)){h=_.containerInfo;var T=$e(h);bP(T,p,!1,!1),_.pendingChildren=T,Bo(p),bn(h,T)}},Cy=function(h,p,_,T,P){var O=h.stateNode,J=h.memoizedProps;if((h=wP(h,p))&&J===T)p.stateNode=O;else{var se=p.stateNode,Se=jo(Ws.current),qe=null;J!==T&&(qe=ce(se,_,J,T,P,Se)),h&&qe===null?p.stateNode=O:(O=et(O,qe,_,J,T,p,h,se),Ce(O,_,T,P,Se)&&Bo(p),p.stateNode=O,h?Bo(p):np(O,p,!1,!1))}},Ay=function(h,p,_,T){_!==T?(h=jo(Ih.current),_=jo(Ws.current),p.stateNode=Oe(T,h,_,p),Bo(p)):p.stateNode=h.stateNode}}else ip=function(){},Cy=function(){},Ay=function(){};function rp(h,p){if(!pn)switch(h.tailMode){case"hidden":p=h.tail;for(var _=null;p!==null;)p.alternate!==null&&(_=p),p=p.sibling;_===null?h.tail=null:_.sibling=null;break;case"collapsed":_=h.tail;for(var T=null;_!==null;)_.alternate!==null&&(T=_),_=_.sibling;T===null?p||h.tail===null?h.tail=null:h.tail.sibling=null:T.sibling=null}}function vr(h){var p=h.alternate!==null&&h.alternate.child===h.child,_=0,T=0;if(p)for(var P=h.child;P!==null;)_|=P.lanes|P.childLanes,T|=P.subtreeFlags&14680064,T|=P.flags&14680064,P.return=h,P=P.sibling;else for(P=h.child;P!==null;)_|=P.lanes|P.childLanes,T|=P.subtreeFlags,T|=P.flags,P.return=h,P=P.sibling;return h.subtreeFlags|=T,h.childLanes=_,p}function R6(h,p,_){var T=p.pendingProps;switch(Ii(p),p.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return vr(p),null;case 1:return ri(p.type)&&vi(),vr(p),null;case 3:return T=p.stateNode,Ph(),At(Vn),At(Qe),Mb(),T.pendingContext&&(T.context=T.pendingContext,T.pendingContext=null),(h===null||h.child===null)&&(Xf(p)?Bo(p):h===null||h.memoizedState.isDehydrated&&!(p.flags&256)||(p.flags|=1024,Vr!==null&&(iS(Vr),Vr=null))),ip(h,p),vr(p),null;case 5:Cb(p),_=jo(Ih.current);var P=p.type;if(h!==null&&p.stateNode!=null)Cy(h,p,P,T,_),h.ref!==p.ref&&(p.flags|=512,p.flags|=2097152);else{if(!T){if(p.stateNode===null)throw Error(o(166));return vr(p),null}if(h=jo(Ws.current),Xf(p)){if(!Me)throw Error(o(175));h=St(p.stateNode,p.type,p.memoizedProps,_,h,p,!Fo),p.updateQueue=h,h!==null&&Bo(p)}else{var O=ne(P,T,_,h,p);np(O,p,!1,!1),p.stateNode=O,Ce(O,P,T,_,h)&&Bo(p)}p.ref!==null&&(p.flags|=512,p.flags|=2097152)}return vr(p),null;case 6:if(h&&p.stateNode!=null)Ay(h,p,h.memoizedProps,T);else{if(typeof T!="string"&&p.stateNode===null)throw Error(o(166));if(h=jo(Ih.current),_=jo(Ws.current),Xf(p)){if(!Me)throw Error(o(176));if(h=p.stateNode,T=p.memoizedProps,(_=Xt(h,T,p,!Fo))&&(P=Un,P!==null))switch(O=(P.mode&1)!==0,P.tag){case 3:re(P.stateNode.containerInfo,h,T,O);break;case 5:Ue(P.type,P.memoizedProps,P.stateNode,h,T,O)}_&&Bo(p)}else p.stateNode=Oe(T,h,_,p)}return vr(p),null;case 13:if(At(oi),T=p.memoizedState,pn&&Pi!==null&&p.mode&1&&!(p.flags&128)){for(h=Pi;h;)h=Ct(h);return Ah(),p.flags|=98560,p}if(T!==null&&T.dehydrated!==null){if(T=Xf(p),h===null){if(!T)throw Error(o(318));if(!Me)throw Error(o(344));if(h=p.memoizedState,h=h!==null?h.dehydrated:null,!h)throw Error(o(317));tn(h,p)}else Ah(),!(p.flags&128)&&(p.memoizedState=null),p.flags|=4;return vr(p),null}return Vr!==null&&(iS(Vr),Vr=null),p.flags&128?(p.lanes=_,p):(T=T!==null,_=!1,h===null?Xf(p):_=h.memoizedState!==null,T&&!_&&(p.child.flags|=8192,p.mode&1&&(h===null||oi.current&1?zi===0&&(zi=3):sS())),p.updateQueue!==null&&(p.flags|=4),vr(p),null);case 4:return Ph(),ip(h,p),h===null&&nt(p.stateNode.containerInfo),vr(p),null;case 10:return bh(p.type._context),vr(p),null;case 17:return ri(p.type)&&vi(),vr(p),null;case 19:if(At(oi),P=p.memoizedState,P===null)return vr(p),null;if(T=(p.flags&128)!==0,O=P.rendering,O===null)if(T)rp(P,!1);else{if(zi!==0||h!==null&&h.flags&128)for(h=p.child;h!==null;){if(O=vy(h),O!==null){for(p.flags|=128,rp(P,!1),h=O.updateQueue,h!==null&&(p.updateQueue=h,p.flags|=4),p.subtreeFlags=0,h=_,T=p.child;T!==null;)_=T,P=h,_.flags&=14680066,O=_.alternate,O===null?(_.childLanes=0,_.lanes=P,_.child=null,_.subtreeFlags=0,_.memoizedProps=null,_.memoizedState=null,_.updateQueue=null,_.dependencies=null,_.stateNode=null):(_.childLanes=O.childLanes,_.lanes=O.lanes,_.child=O.child,_.subtreeFlags=0,_.deletions=null,_.memoizedProps=O.memoizedProps,_.memoizedState=O.memoizedState,_.updateQueue=O.updateQueue,_.type=O.type,P=O.dependencies,_.dependencies=P===null?null:{lanes:P.lanes,firstContext:P.firstContext}),T=T.sibling;return _t(oi,oi.current&1|2),p.child}h=h.sibling}P.tail!==null&&Ai()>Zb&&(p.flags|=128,T=!0,rp(P,!1),p.lanes=4194304)}else{if(!T)if(h=vy(O),h!==null){if(p.flags|=128,T=!0,h=h.updateQueue,h!==null&&(p.updateQueue=h,p.flags|=4),rp(P,!0),P.tail===null&&P.tailMode==="hidden"&&!O.alternate&&!pn)return vr(p),null}else 2*Ai()-P.renderingStartTime>Zb&&_!==1073741824&&(p.flags|=128,T=!0,rp(P,!1),p.lanes=4194304);P.isBackwards?(O.sibling=p.child,p.child=O):(h=P.last,h!==null?h.sibling=O:p.child=O,P.last=O)}return P.tail!==null?(p=P.tail,P.rendering=p,P.tail=p.sibling,P.renderingStartTime=Ai(),p.sibling=null,h=oi.current,_t(oi,T?h&1|2:h&1),p):(vr(p),null);case 22:case 23:return rS(),T=p.memoizedState!==null,h!==null&&h.memoizedState!==null!==T&&(p.flags|=8192),T&&p.mode&1?Cs&1073741824&&(vr(p),ze&&p.subtreeFlags&6&&(p.flags|=8192)):vr(p),null;case 24:return null;case 25:return null}throw Error(o(156,p.tag))}var N6=a.ReactCurrentOwner,Es=!1;function Br(h,p,_,T){p.child=h===null?KI(p,null,_,T):Mh(p,h.child,_,T)}function SP(h,p,_,T,P){_=_.render;var O=p.ref;return ll(p,P),T=Pb(h,p,_,T,O,P),_=Rb(),h!==null&&!Es?(p.updateQueue=h.updateQueue,p.flags&=-2053,h.lanes&=~P,ga(h,p,P)):(pn&&_&&fn(p),p.flags|=1,Br(h,p,T,P),p.child)}function TP(h,p,_,T,P){if(h===null){var O=_.type;return typeof O=="function"&&!oS(O)&&O.defaultProps===void 0&&_.compare===null&&_.defaultProps===void 0?(p.tag=15,p.type=O,EP(h,p,O,T,P)):(h=Xy(_.type,null,T,p,p.mode,P),h.ref=p.ref,h.return=p,p.child=h)}if(O=h.child,!(h.lanes&P)){var J=O.memoizedProps;if(_=_.compare,_=_!==null?_:da,_(J,T)&&h.ref===p.ref)return ga(h,p,P)}return p.flags|=1,h=fl(O,T),h.ref=p.ref,h.return=p,p.child=h}function EP(h,p,_,T,P){if(h!==null&&da(h.memoizedProps,T)&&h.ref===p.ref)if(Es=!1,(h.lanes&P)!==0)h.flags&131072&&(Es=!0);else return p.lanes=h.lanes,ga(h,p,P);return Ub(h,p,_,T,P)}function CP(h,p,_){var T=p.pendingProps,P=T.children,O=h!==null?h.memoizedState:null;if(T.mode==="hidden")if(!(p.mode&1))p.memoizedState={baseLanes:0,cachePool:null},_t(Nh,Cs),Cs|=_;else if(_&1073741824)p.memoizedState={baseLanes:0,cachePool:null},T=O!==null?O.baseLanes:_,_t(Nh,Cs),Cs|=T;else return h=O!==null?O.baseLanes|_:_,p.lanes=p.childLanes=1073741824,p.memoizedState={baseLanes:h,cachePool:null},p.updateQueue=null,_t(Nh,Cs),Cs|=h,null;else O!==null?(T=O.baseLanes|_,p.memoizedState=null):T=_,_t(Nh,Cs),Cs|=T;return Br(h,p,P,_),p.child}function AP(h,p){var _=p.ref;(h===null&&_!==null||h!==null&&h.ref!==_)&&(p.flags|=512,p.flags|=2097152)}function Ub(h,p,_,T,P){var O=ri(_)?sn:Qe.current;return O=Ci(p,O),ll(p,P),_=Pb(h,p,_,T,O,P),T=Rb(),h!==null&&!Es?(p.updateQueue=h.updateQueue,p.flags&=-2053,h.lanes&=~P,ga(h,p,P)):(pn&&T&&fn(p),p.flags|=1,Br(h,p,_,P),p.child)}function MP(h,p,_,T,P){if(ri(_)){var O=!0;si(p)}else O=!1;if(ll(p,P),p.stateNode===null)h!==null&&(h.alternate=null,p.alternate=null,p.flags|=2),zc(p,_,T),Ch(p,_,T,P),T=!0;else if(h===null){var J=p.stateNode,se=p.memoizedProps;J.props=se;var Se=J.context,qe=_.contextType;typeof qe=="object"&&qe!==null?qe=jr(qe):(qe=ri(_)?sn:Qe.current,qe=Ci(p,qe));var wt=_.getDerivedStateFromProps,Qt=typeof wt=="function"||typeof J.getSnapshotBeforeUpdate=="function";Qt||typeof J.UNSAFE_componentWillReceiveProps!="function"&&typeof J.componentWillReceiveProps!="function"||(se!==T||Se!==qe)&&mr(p,J,T,qe),uo=!1;var Ut=p.memoizedState;J.state=Ut,Vc(p,T,J,P),Se=p.memoizedState,se!==T||Ut!==Se||Vn.current||uo?(typeof wt=="function"&&(Eh(p,_,wt,T),Se=p.memoizedState),(se=uo||$f(p,_,se,T,Ut,Se,qe))?(Qt||typeof J.UNSAFE_componentWillMount!="function"&&typeof J.componentWillMount!="function"||(typeof J.componentWillMount=="function"&&J.componentWillMount(),typeof J.UNSAFE_componentWillMount=="function"&&J.UNSAFE_componentWillMount()),typeof J.componentDidMount=="function"&&(p.flags|=4194308)):(typeof J.componentDidMount=="function"&&(p.flags|=4194308),p.memoizedProps=T,p.memoizedState=Se),J.props=T,J.state=Se,J.context=qe,T=se):(typeof J.componentDidMount=="function"&&(p.flags|=4194308),T=!1)}else{J=p.stateNode,Th(h,p),se=p.memoizedProps,qe=p.type===p.elementType?se:xi(p.type,se),J.props=qe,Qt=p.pendingProps,Ut=J.context,Se=_.contextType,typeof Se=="object"&&Se!==null?Se=jr(Se):(Se=ri(_)?sn:Qe.current,Se=Ci(p,Se));var Yn=_.getDerivedStateFromProps;(wt=typeof Yn=="function"||typeof J.getSnapshotBeforeUpdate=="function")||typeof J.UNSAFE_componentWillReceiveProps!="function"&&typeof J.componentWillReceiveProps!="function"||(se!==Qt||Ut!==Se)&&mr(p,J,T,Se),uo=!1,Ut=p.memoizedState,J.state=Ut,Vc(p,T,J,P);var Rt=p.memoizedState;se!==Qt||Ut!==Rt||Vn.current||uo?(typeof Yn=="function"&&(Eh(p,_,Yn,T),Rt=p.memoizedState),(qe=uo||$f(p,_,qe,T,Ut,Rt,Se)||!1)?(wt||typeof J.UNSAFE_componentWillUpdate!="function"&&typeof J.componentWillUpdate!="function"||(typeof J.componentWillUpdate=="function"&&J.componentWillUpdate(T,Rt,Se),typeof J.UNSAFE_componentWillUpdate=="function"&&J.UNSAFE_componentWillUpdate(T,Rt,Se)),typeof J.componentDidUpdate=="function"&&(p.flags|=4),typeof J.getSnapshotBeforeUpdate=="function"&&(p.flags|=1024)):(typeof J.componentDidUpdate!="function"||se===h.memoizedProps&&Ut===h.memoizedState||(p.flags|=4),typeof J.getSnapshotBeforeUpdate!="function"||se===h.memoizedProps&&Ut===h.memoizedState||(p.flags|=1024),p.memoizedProps=T,p.memoizedState=Rt),J.props=T,J.state=Rt,J.context=Se,T=qe):(typeof J.componentDidUpdate!="function"||se===h.memoizedProps&&Ut===h.memoizedState||(p.flags|=4),typeof J.getSnapshotBeforeUpdate!="function"||se===h.memoizedProps&&Ut===h.memoizedState||(p.flags|=1024),T=!1)}return Fb(h,p,_,T,O,P)}function Fb(h,p,_,T,P,O){AP(h,p);var J=(p.flags&128)!==0;if(!T&&!J)return P&&Yi(p,_,!1),ga(h,p,O);T=p.stateNode,N6.current=p;var se=J&&typeof _.getDerivedStateFromError!="function"?null:T.render();return p.flags|=1,h!==null&&J?(p.child=Mh(p,h.child,null,O),p.child=Mh(p,null,se,O)):Br(h,p,se,O),p.memoizedState=T.state,P&&Yi(p,_,!0),p.child}function IP(h){var p=h.stateNode;p.pendingContext?lo(h,p.pendingContext,p.pendingContext!==p.context):p.context&&lo(h,p.context,!1),Eb(h,p.containerInfo)}function PP(h,p,_,T,P){return Ah(),Tb(P),p.flags|=256,Br(h,p,_,T),p.child}var My={dehydrated:null,treeContext:null,retryLane:0};function Iy(h){return{baseLanes:h,cachePool:null}}function RP(h,p,_){var T=p.pendingProps,P=oi.current,O=!1,J=(p.flags&128)!==0,se;if((se=J)||(se=h!==null&&h.memoizedState===null?!1:(P&2)!==0),se?(O=!0,p.flags&=-129):(h===null||h.memoizedState!==null)&&(P|=1),_t(oi,P&1),h===null)return Sb(p),h=p.memoizedState,h!==null&&(h=h.dehydrated,h!==null)?(p.mode&1?rt(h)?p.lanes=8:p.lanes=1073741824:p.lanes=1,null):(P=T.children,h=T.fallback,O?(T=p.mode,O=p.child,P={mode:"hidden",children:P},!(T&1)&&O!==null?(O.childLanes=0,O.pendingProps=P):O=Yy(P,T,0,null),h=Yc(h,T,_,null),O.return=p,h.return=p,O.sibling=h,p.child=O,p.child.memoizedState=Iy(_),p.memoizedState=My,h):jb(p,P));if(P=h.memoizedState,P!==null){if(se=P.dehydrated,se!==null){if(J)return p.flags&256?(p.flags&=-257,Py(h,p,_,Error(o(422)))):p.memoizedState!==null?(p.child=h.child,p.flags|=128,null):(O=T.fallback,P=p.mode,T=Yy({mode:"visible",children:T.children},P,0,null),O=Yc(O,P,_,null),O.flags|=2,T.return=p,O.return=p,T.sibling=O,p.child=T,p.mode&1&&Mh(p,h.child,null,_),p.child.memoizedState=Iy(_),p.memoizedState=My,O);if(!(p.mode&1))p=Py(h,p,_,null);else if(rt(se))p=Py(h,p,_,Error(o(419)));else if(T=(_&h.childLanes)!==0,Es||T){if(T=Ri,T!==null){switch(_&-_){case 4:O=2;break;case 16:O=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:O=32;break;case 536870912:O=268435456;break;default:O=0}T=O&(T.suspendedLanes|_)?0:O,T!==0&&T!==P.retryLane&&(P.retryLane=T,$s(h,T,-1))}sS(),p=Py(h,p,_,Error(o(421)))}else Ae(se)?(p.flags|=128,p.child=h.child,p=W6.bind(null,h),Tt(se,p),p=null):(_=P.treeContext,Me&&(Pi=tt(se),Un=p,pn=!0,Vr=null,Fo=!1,_!==null&&(k[W++]=ve,k[W++]=He,k[W++]=le,ve=_.id,He=_.overflow,le=p)),p=jb(p,p.pendingProps.children),p.flags|=4096);return p}return O?(T=LP(h,p,T.children,T.fallback,_),O=p.child,P=h.child.memoizedState,O.memoizedState=P===null?Iy(_):{baseLanes:P.baseLanes|_,cachePool:null},O.childLanes=h.childLanes&~_,p.memoizedState=My,T):(_=NP(h,p,T.children,_),p.memoizedState=null,_)}return O?(T=LP(h,p,T.children,T.fallback,_),O=p.child,P=h.child.memoizedState,O.memoizedState=P===null?Iy(_):{baseLanes:P.baseLanes|_,cachePool:null},O.childLanes=h.childLanes&~_,p.memoizedState=My,T):(_=NP(h,p,T.children,_),p.memoizedState=null,_)}function jb(h,p){return p=Yy({mode:"visible",children:p},h.mode,0,null),p.return=h,h.child=p}function NP(h,p,_,T){var P=h.child;return h=P.sibling,_=fl(P,{mode:"visible",children:_}),!(p.mode&1)&&(_.lanes=T),_.return=p,_.sibling=null,h!==null&&(T=p.deletions,T===null?(p.deletions=[h],p.flags|=16):T.push(h)),p.child=_}function LP(h,p,_,T,P){var O=p.mode;h=h.child;var J=h.sibling,se={mode:"hidden",children:_};return!(O&1)&&p.child!==h?(_=p.child,_.childLanes=0,_.pendingProps=se,p.deletions=null):(_=fl(h,se),_.subtreeFlags=h.subtreeFlags&14680064),J!==null?T=fl(J,T):(T=Yc(T,O,P,null),T.flags|=2),T.return=p,_.return=p,_.sibling=T,p.child=_,T}function Py(h,p,_,T){return T!==null&&Tb(T),Mh(p,h.child,null,_),h=jb(p,p.pendingProps.children),h.flags|=2,p.memoizedState=null,h}function DP(h,p,_){h.lanes|=p;var T=h.alternate;T!==null&&(T.lanes|=p),al(h.return,p,_)}function Vb(h,p,_,T,P){var O=h.memoizedState;O===null?h.memoizedState={isBackwards:p,rendering:null,renderingStartTime:0,last:T,tail:_,tailMode:P}:(O.isBackwards=p,O.rendering=null,O.renderingStartTime=0,O.last=T,O.tail=_,O.tailMode=P)}function kP(h,p,_){var T=p.pendingProps,P=T.revealOrder,O=T.tail;if(Br(h,p,T.children,_),T=oi.current,T&2)T=T&1|2,p.flags|=128;else{if(h!==null&&h.flags&128)e:for(h=p.child;h!==null;){if(h.tag===13)h.memoizedState!==null&&DP(h,_,p);else if(h.tag===19)DP(h,_,p);else if(h.child!==null){h.child.return=h,h=h.child;continue}if(h===p)break e;for(;h.sibling===null;){if(h.return===null||h.return===p)break e;h=h.return}h.sibling.return=h.return,h=h.sibling}T&=1}if(_t(oi,T),!(p.mode&1))p.memoizedState=null;else switch(P){case"forwards":for(_=p.child,P=null;_!==null;)h=_.alternate,h!==null&&vy(h)===null&&(P=_),_=_.sibling;_=P,_===null?(P=p.child,p.child=null):(P=_.sibling,_.sibling=null),Vb(p,!1,P,_,O);break;case"backwards":for(_=null,P=p.child,p.child=null;P!==null;){if(h=P.alternate,h!==null&&vy(h)===null){p.child=P;break}h=P.sibling,P.sibling=_,_=P,P=h}Vb(p,!0,_,null,O);break;case"together":Vb(p,!1,null,null,void 0);break;default:p.memoizedState=null}return p.child}function ga(h,p,_){if(h!==null&&(p.dependencies=h.dependencies),Lh|=p.lanes,!(_&p.childLanes))return null;if(h!==null&&p.child!==h.child)throw Error(o(153));if(p.child!==null){for(h=p.child,_=fl(h,h.pendingProps),p.child=_,_.return=p;h.sibling!==null;)h=h.sibling,_=_.sibling=fl(h,h.pendingProps),_.return=p;_.sibling=null}return p.child}function L6(h,p,_){switch(p.tag){case 3:IP(p),Ah();break;case 5:JI(p);break;case 1:ri(p.type)&&si(p);break;case 4:Eb(p,p.stateNode.containerInfo);break;case 10:jc(p,p.type._context,p.memoizedProps.value);break;case 13:var T=p.memoizedState;if(T!==null)return T.dehydrated!==null?(_t(oi,oi.current&1),p.flags|=128,null):_&p.child.childLanes?RP(h,p,_):(_t(oi,oi.current&1),h=ga(h,p,_),h!==null?h.sibling:null);_t(oi,oi.current&1);break;case 19:if(T=(_&p.childLanes)!==0,h.flags&128){if(T)return kP(h,p,_);p.flags|=128}var P=p.memoizedState;if(P!==null&&(P.rendering=null,P.tail=null,P.lastEffect=null),_t(oi,oi.current),T)break;return null;case 22:case 23:return p.lanes=0,CP(h,p,_)}return ga(h,p,_)}function D6(h,p){switch(Ii(p),p.tag){case 1:return ri(p.type)&&vi(),h=p.flags,h&65536?(p.flags=h&-65537|128,p):null;case 3:return Ph(),At(Vn),At(Qe),Mb(),h=p.flags,h&65536&&!(h&128)?(p.flags=h&-65537|128,p):null;case 5:return Cb(p),null;case 13:if(At(oi),h=p.memoizedState,h!==null&&h.dehydrated!==null){if(p.alternate===null)throw Error(o(340));Ah()}return h=p.flags,h&65536?(p.flags=h&-65537|128,p):null;case 19:return At(oi),null;case 4:return Ph(),null;case 10:return bh(p.type._context),null;case 22:case 23:return rS(),null;case 24:return null;default:return null}}var Ry=!1,Gc=!1,k6=typeof WeakSet=="function"?WeakSet:Set,at=null;function Ny(h,p){var _=h.ref;if(_!==null)if(typeof _=="function")try{_(null)}catch(T){ts(h,p,T)}else _.current=null}function Bb(h,p,_){try{_()}catch(T){ts(h,p,T)}}var OP=!1;function O6(h,p){for(X(h.containerInfo),at=p;at!==null;)if(h=at,p=h.child,(h.subtreeFlags&1028)!==0&&p!==null)p.return=h,at=p;else for(;at!==null;){h=at;try{var _=h.alternate;if(h.flags&1024)switch(h.tag){case 0:case 11:case 15:break;case 1:if(_!==null){var T=_.memoizedProps,P=_.memoizedState,O=h.stateNode,J=O.getSnapshotBeforeUpdate(h.elementType===h.type?T:xi(h.type,T),P);O.__reactInternalSnapshotBeforeUpdate=J}break;case 3:ze&&Ie(h.stateNode.containerInfo);break;case 5:case 6:case 4:case 17:break;default:throw Error(o(163))}}catch(se){ts(h,h.return,se)}if(p=h.sibling,p!==null){p.return=h.return,at=p;break}at=h.return}return _=OP,OP=!1,_}function Wc(h,p,_){var T=p.updateQueue;if(T=T!==null?T.lastEffect:null,T!==null){var P=T=T.next;do{if((P.tag&h)===h){var O=P.destroy;P.destroy=void 0,O!==void 0&&Bb(p,_,O)}P=P.next}while(P!==T)}}function sp(h,p){if(p=p.updateQueue,p=p!==null?p.lastEffect:null,p!==null){var _=p=p.next;do{if((_.tag&h)===h){var T=_.create;_.destroy=T()}_=_.next}while(_!==p)}}function zb(h){var p=h.ref;if(p!==null){var _=h.stateNode;switch(h.tag){case 5:h=de(_);break;default:h=_}typeof p=="function"?p(h):p.current=h}}function UP(h,p,_){if(xs&&typeof xs.onCommitFiberUnmount=="function")try{xs.onCommitFiberUnmount(ha,p)}catch{}switch(p.tag){case 0:case 11:case 14:case 15:if(h=p.updateQueue,h!==null&&(h=h.lastEffect,h!==null)){var T=h=h.next;do{var P=T,O=P.destroy;P=P.tag,O!==void 0&&(P&2||P&4)&&Bb(p,_,O),T=T.next}while(T!==h)}break;case 1:if(Ny(p,_),h=p.stateNode,typeof h.componentWillUnmount=="function")try{h.props=p.memoizedProps,h.state=p.memoizedState,h.componentWillUnmount()}catch(J){ts(p,_,J)}break;case 5:Ny(p,_);break;case 4:ze?HP(h,p,_):Te&&Te&&(p=p.stateNode.containerInfo,_=$e(p),$n(p,_))}}function FP(h,p,_){for(var T=p;;)if(UP(h,T,_),T.child===null||ze&&T.tag===4){if(T===p)break;for(;T.sibling===null;){if(T.return===null||T.return===p)return;T=T.return}T.sibling.return=T.return,T=T.sibling}else T.child.return=T,T=T.child}function jP(h){var p=h.alternate;p!==null&&(h.alternate=null,jP(p)),h.child=null,h.deletions=null,h.sibling=null,h.tag===5&&(p=h.stateNode,p!==null&&Ze(p)),h.stateNode=null,h.return=null,h.dependencies=null,h.memoizedProps=null,h.memoizedState=null,h.pendingProps=null,h.stateNode=null,h.updateQueue=null}function VP(h){return h.tag===5||h.tag===3||h.tag===4}function BP(h){e:for(;;){for(;h.sibling===null;){if(h.return===null||VP(h.return))return null;h=h.return}for(h.sibling.return=h.return,h=h.sibling;h.tag!==5&&h.tag!==6&&h.tag!==18;){if(h.flags&2||h.child===null||h.tag===4)continue e;h.child.return=h,h=h.child}if(!(h.flags&2))return h.stateNode}}function zP(h){if(ze){e:{for(var p=h.return;p!==null;){if(VP(p))break e;p=p.return}throw Error(o(160))}var _=p;switch(_.tag){case 5:p=_.stateNode,_.flags&32&&(Ht(p),_.flags&=-33),_=BP(h),Gb(h,_,p);break;case 3:case 4:p=_.stateNode.containerInfo,_=BP(h),Hb(h,_,p);break;default:throw Error(o(161))}}}function Hb(h,p,_){var T=h.tag;if(T===5||T===6)h=h.stateNode,p?Ot(_,h,p):st(_,h);else if(T!==4&&(h=h.child,h!==null))for(Hb(h,p,_),h=h.sibling;h!==null;)Hb(h,p,_),h=h.sibling}function Gb(h,p,_){var T=h.tag;if(T===5||T===6)h=h.stateNode,p?Nt(_,h,p):Ge(_,h);else if(T!==4&&(h=h.child,h!==null))for(Gb(h,p,_),h=h.sibling;h!==null;)Gb(h,p,_),h=h.sibling}function HP(h,p,_){for(var T=p,P=!1,O,J;;){if(!P){P=T.return;e:for(;;){if(P===null)throw Error(o(160));switch(O=P.stateNode,P.tag){case 5:J=!1;break e;case 3:O=O.containerInfo,J=!0;break e;case 4:O=O.containerInfo,J=!0;break e}P=P.return}P=!0}if(T.tag===5||T.tag===6)FP(h,T,_),J?an(O,T.stateNode):ht(O,T.stateNode);else if(T.tag===18)J?pe(O,T.stateNode):ee(O,T.stateNode);else if(T.tag===4){if(T.child!==null){O=T.stateNode.containerInfo,J=!0,T.child.return=T,T=T.child;continue}}else if(UP(h,T,_),T.child!==null){T.child.return=T,T=T.child;continue}if(T===p)break;for(;T.sibling===null;){if(T.return===null||T.return===p)return;T=T.return,T.tag===4&&(P=!1)}T.sibling.return=T.return,T=T.sibling}}function Wb(h,p){if(ze){switch(p.tag){case 0:case 11:case 14:case 15:Wc(3,p,p.return),sp(3,p),Wc(5,p,p.return);return;case 1:return;case 5:var _=p.stateNode;if(_!=null){var T=p.memoizedProps;h=h!==null?h.memoizedProps:T;var P=p.type,O=p.updateQueue;p.updateQueue=null,O!==null&&Je(_,O,P,h,T,p)}return;case 6:if(p.stateNode===null)throw Error(o(162));_=p.memoizedProps,$t(p.stateNode,h!==null?h.memoizedProps:_,_);return;case 3:Me&&h!==null&&h.memoizedState.isDehydrated&&Sn(p.stateNode.containerInfo);return;case 12:return;case 13:Ly(p);return;case 19:Ly(p);return;case 17:return}throw Error(o(163))}switch(p.tag){case 0:case 11:case 14:case 15:Wc(3,p,p.return),sp(3,p),Wc(5,p,p.return);return;case 12:return;case 13:Ly(p);return;case 19:Ly(p);return;case 3:Me&&h!==null&&h.memoizedState.isDehydrated&&Sn(p.stateNode.containerInfo);break;case 22:case 23:return}e:if(Te){switch(p.tag){case 1:case 5:case 6:break e;case 3:case 4:p=p.stateNode,$n(p.containerInfo,p.pendingChildren);break e}throw Error(o(163))}}function Ly(h){var p=h.updateQueue;if(p!==null){h.updateQueue=null;var _=h.stateNode;_===null&&(_=h.stateNode=new k6),p.forEach(function(T){var P=q6.bind(null,h,T);_.has(T)||(_.add(T),T.then(P,P))})}}function U6(h,p){for(at=p;at!==null;){p=at;var _=p.deletions;if(_!==null)for(var T=0;T<_.length;T++){var P=_[T];try{var O=h;ze?HP(O,P,p):FP(O,P,p);var J=P.alternate;J!==null&&(J.return=null),P.return=null}catch(Pt){ts(P,p,Pt)}}if(_=p.child,p.subtreeFlags&12854&&_!==null)_.return=p,at=_;else for(;at!==null;){p=at;try{var se=p.flags;if(se&32&&ze&&Ht(p.stateNode),se&512){var Se=p.alternate;if(Se!==null){var qe=Se.ref;qe!==null&&(typeof qe=="function"?qe(null):qe.current=null)}}if(se&8192)switch(p.tag){case 13:if(p.memoizedState!==null){var wt=p.alternate;(wt===null||wt.memoizedState===null)&&(Qb=Ai())}break;case 22:var Qt=p.memoizedState!==null,Ut=p.alternate,Yn=Ut!==null&&Ut.memoizedState!==null;if(_=p,ze){e:if(T=_,P=Qt,O=null,ze)for(var Rt=T;;){if(Rt.tag===5){if(O===null){O=Rt;var xr=Rt.stateNode;P?hn(xr):Ke(Rt.stateNode,Rt.memoizedProps)}}else if(Rt.tag===6){if(O===null){var Ys=Rt.stateNode;P?ie(Ys):_e(Ys,Rt.memoizedProps)}}else if((Rt.tag!==22&&Rt.tag!==23||Rt.memoizedState===null||Rt===T)&&Rt.child!==null){Rt.child.return=Rt,Rt=Rt.child;continue}if(Rt===T)break;for(;Rt.sibling===null;){if(Rt.return===null||Rt.return===T)break e;O===Rt&&(O=null),Rt=Rt.return}O===Rt&&(O=null),Rt.sibling.return=Rt.return,Rt=Rt.sibling}}if(Qt&&!Yn&&_.mode&1){at=_;for(var ge=_.child;ge!==null;){for(_=at=ge;at!==null;){T=at;var ae=T.child;switch(T.tag){case 0:case 11:case 14:case 15:Wc(4,T,T.return);break;case 1:Ny(T,T.return);var we=T.stateNode;if(typeof we.componentWillUnmount=="function"){var ft=T.return;try{we.props=T.memoizedProps,we.state=T.memoizedState,we.componentWillUnmount()}catch(Pt){ts(T,ft,Pt)}}break;case 5:Ny(T,T.return);break;case 22:if(T.memoizedState!==null){qP(_);continue}}ae!==null?(ae.return=T,at=ae):qP(_)}ge=ge.sibling}}}switch(se&4102){case 2:zP(p),p.flags&=-3;break;case 6:zP(p),p.flags&=-3,Wb(p.alternate,p);break;case 4096:p.flags&=-4097;break;case 4100:p.flags&=-4097,Wb(p.alternate,p);break;case 4:Wb(p.alternate,p)}}catch(Pt){ts(p,p.return,Pt)}if(_=p.sibling,_!==null){_.return=p.return,at=_;break}at=p.return}}}function F6(h,p,_){at=h,GP(h)}function GP(h,p,_){for(var T=(h.mode&1)!==0;at!==null;){var P=at,O=P.child;if(P.tag===22&&T){var J=P.memoizedState!==null||Ry;if(!J){var se=P.alternate,Se=se!==null&&se.memoizedState!==null||Gc;se=Ry;var qe=Gc;if(Ry=J,(Gc=Se)&&!qe)for(at=P;at!==null;)J=at,Se=J.child,J.tag===22&&J.memoizedState!==null?$P(P):Se!==null?(Se.return=J,at=Se):$P(P);for(;O!==null;)at=O,GP(O),O=O.sibling;at=P,Ry=se,Gc=qe}WP(h)}else P.subtreeFlags&8772&&O!==null?(O.return=P,at=O):WP(h)}}function WP(h){for(;at!==null;){var p=at;if(p.flags&8772){var _=p.alternate;try{if(p.flags&8772)switch(p.tag){case 0:case 11:case 15:Gc||sp(5,p);break;case 1:var T=p.stateNode;if(p.flags&4&&!Gc)if(_===null)T.componentDidMount();else{var P=p.elementType===p.type?_.memoizedProps:xi(p.type,_.memoizedProps);T.componentDidUpdate(P,_.memoizedState,T.__reactInternalSnapshotBeforeUpdate)}var O=p.updateQueue;O!==null&&Uo(p,O,T);break;case 3:var J=p.updateQueue;if(J!==null){if(_=null,p.child!==null)switch(p.child.tag){case 5:_=de(p.child.stateNode);break;case 1:_=p.child.stateNode}Uo(p,J,_)}break;case 5:var se=p.stateNode;_===null&&p.flags&4&&je(se,p.type,p.memoizedProps,p);break;case 6:break;case 4:break;case 12:break;case 13:if(Me&&p.memoizedState===null){var Se=p.alternate;if(Se!==null){var qe=Se.memoizedState;if(qe!==null){var wt=qe.dehydrated;wt!==null&&H(wt)}}}break;case 19:case 17:case 21:case 22:case 23:break;default:throw Error(o(163))}Gc||p.flags&512&&zb(p)}catch(Qt){ts(p,p.return,Qt)}}if(p===h){at=null;break}if(_=p.sibling,_!==null){_.return=p.return,at=_;break}at=p.return}}function qP(h){for(;at!==null;){var p=at;if(p===h){at=null;break}var _=p.sibling;if(_!==null){_.return=p.return,at=_;break}at=p.return}}function $P(h){for(;at!==null;){var p=at;try{switch(p.tag){case 0:case 11:case 15:var _=p.return;try{sp(4,p)}catch(Se){ts(p,_,Se)}break;case 1:var T=p.stateNode;if(typeof T.componentDidMount=="function"){var P=p.return;try{T.componentDidMount()}catch(Se){ts(p,P,Se)}}var O=p.return;try{zb(p)}catch(Se){ts(p,O,Se)}break;case 5:var J=p.return;try{zb(p)}catch(Se){ts(p,J,Se)}}}catch(Se){ts(p,p.return,Se)}if(p===h){at=null;break}var se=p.sibling;if(se!==null){se.return=p.return,at=se;break}at=p.return}}var Dy=0,ky=1,Oy=2,Uy=3,Fy=4;if(typeof Symbol=="function"&&Symbol.for){var op=Symbol.for;Dy=op("selector.component"),ky=op("selector.has_pseudo_class"),Oy=op("selector.role"),Uy=op("selector.test_id"),Fy=op("selector.text")}function qb(h){var p=Q(h);if(p!=null){if(typeof p.memoizedProps["data-testname"]!="string")throw Error(o(364));return p}if(h=$(h),h===null)throw Error(o(362));return h.stateNode.current}function $b(h,p){switch(p.$$typeof){case Dy:if(h.type===p.value)return!0;break;case ky:e:{p=p.value,h=[h,0];for(var _=0;_<h.length;){var T=h[_++],P=h[_++],O=p[P];if(T.tag!==5||!be(T)){for(;O!=null&&$b(T,O);)P++,O=p[P];if(P===p.length){p=!0;break e}else for(T=T.child;T!==null;)h.push(T,P),T=T.sibling}}p=!1}return p;case Oy:if(h.tag===5&&Re(h.stateNode,p.value))return!0;break;case Fy:if((h.tag===5||h.tag===6)&&(h=ue(h),h!==null&&0<=h.indexOf(p.value)))return!0;break;case Uy:if(h.tag===5&&(h=h.memoizedProps["data-testname"],typeof h=="string"&&h.toLowerCase()===p.value.toLowerCase()))return!0;break;default:throw Error(o(365))}return!1}function Xb(h){switch(h.$$typeof){case Dy:return"<"+(N(h.value)||"Unknown")+">";case ky:return":has("+(Xb(h)||"")+")";case Oy:return'[role="'+h.value+'"]';case Fy:return'"'+h.value+'"';case Uy:return'[data-testname="'+h.value+'"]';default:throw Error(o(365))}}function XP(h,p){var _=[];h=[h,0];for(var T=0;T<h.length;){var P=h[T++],O=h[T++],J=p[O];if(P.tag!==5||!be(P)){for(;J!=null&&$b(P,J);)O++,J=p[O];if(O===p.length)_.push(P);else for(P=P.child;P!==null;)h.push(P,O),P=P.sibling}}return _}function Yb(h,p){if(!Ye)throw Error(o(363));h=qb(h),h=XP(h,p),p=[],h=Array.from(h);for(var _=0;_<h.length;){var T=h[_++];if(T.tag===5)be(T)||p.push(T.stateNode);else for(T=T.child;T!==null;)h.push(T),T=T.sibling}return p}var j6=Math.ceil,jy=a.ReactCurrentDispatcher,Kb=a.ReactCurrentOwner,_i=a.ReactCurrentBatchConfig,un=0,Ri=null,Ni=null,ir=0,Cs=0,Nh=Yt(0),zi=0,ap=null,Lh=0,Vy=0,Jb=0,lp=null,Zr=null,Qb=0,Zb=1/0;function Dh(){Zb=Ai()+500}var By=!1,eS=null,cl=null,zy=!1,ul=null,Hy=0,cp=0,tS=null,Gy=-1,Wy=0;function zr(){return un&6?Ai():Gy!==-1?Gy:Gy=Ai()}function hl(h){return h.mode&1?un&2&&ir!==0?ir&-ir:my.transition!==null?(Wy===0&&(h=ca,ca<<=1,!(ca&4194240)&&(ca=64),Wy=h),Wy):(h=vn,h!==0?h:ke()):1}function $s(h,p,_){if(50<cp)throw cp=0,tS=null,Error(o(185));var T=qy(h,p);return T===null?null:(Lc(T,p,_),(!(un&2)||T!==Ri)&&(T===Ri&&(!(un&2)&&(Vy|=p),zi===4&&dl(T,ir)),es(T,_),p===1&&un===0&&!(h.mode&1)&&(Dh(),Xn&&bs())),T)}function qy(h,p){h.lanes|=p;var _=h.alternate;for(_!==null&&(_.lanes|=p),_=h,h=h.return;h!==null;)h.childLanes|=p,_=h.alternate,_!==null&&(_.childLanes|=p),_=h,h=h.return;return _.tag===3?_.stateNode:null}function es(h,p){var _=h.callbackNode;vb(h,p);var T=yh(h,h===Ri?ir:0);if(T===0)_!==null&&ua(_),h.callbackNode=null,h.callbackPriority=0;else if(p=T&-T,h.callbackPriority!==p){if(_!=null&&ua(_),p===1)h.tag===0?py(KP.bind(null,h)):fy(KP.bind(null,h)),We?Mt(function(){un===0&&bs()}):vh(Hs,bs),_=null;else{switch(zf(T)){case 1:_=Hs;break;case 4:_=wb;break;case 16:_=Hf;break;case 536870912:_=xh;break;default:_=Hf}_=sR(_,YP.bind(null,h))}h.callbackPriority=p,h.callbackNode=_}}function YP(h,p){if(Gy=-1,Wy=0,un&6)throw Error(o(327));var _=h.callbackNode;if(Xc()&&h.callbackNode!==_)return null;var T=yh(h,h===Ri?ir:0);if(T===0)return null;if(T&30||T&h.expiredLanes||p)p=$y(h,T);else{p=T;var P=un;un|=2;var O=ZP();(Ri!==h||ir!==p)&&(Dh(),qc(h,p));do try{z6();break}catch(se){QP(h,se)}while(!0);Fc(),jy.current=O,un=P,Ni!==null?p=0:(Ri=null,ir=0,p=zi)}if(p!==0){if(p===2&&(P=Vf(h),P!==0&&(T=P,p=nS(h,P))),p===1)throw _=ap,qc(h,0),dl(h,T),es(h,Ai()),_;if(p===6)dl(h,T);else{if(P=h.current.alternate,!(T&30)&&!V6(P)&&(p=$y(h,T),p===2&&(O=Vf(h),O!==0&&(T=O,p=nS(h,O))),p===1))throw _=ap,qc(h,0),dl(h,T),es(h,Ai()),_;switch(h.finishedWork=P,h.finishedLanes=T,p){case 0:case 1:throw Error(o(345));case 2:$c(h,Zr);break;case 3:if(dl(h,T),(T&130023424)===T&&(p=Qb+500-Ai(),10<p)){if(yh(h,0)!==0)break;if(P=h.suspendedLanes,(P&T)!==T){zr(),h.pingedLanes|=h.suspendedLanes&P;break}h.timeoutHandle=Pe($c.bind(null,h,Zr),p);break}$c(h,Zr);break;case 4:if(dl(h,T),(T&4194240)===T)break;for(p=h.eventTimes,P=-1;0<T;){var J=31-Bn(T);O=1<<J,J=p[J],J>P&&(P=J),T&=~O}if(T=P,T=Ai()-T,T=(120>T?120:480>T?480:1080>T?1080:1920>T?1920:3e3>T?3e3:4320>T?4320:1960*j6(T/1960))-T,10<T){h.timeoutHandle=Pe($c.bind(null,h,Zr),T);break}$c(h,Zr);break;case 5:$c(h,Zr);break;default:throw Error(o(329))}}}return es(h,Ai()),h.callbackNode===_?YP.bind(null,h):null}function nS(h,p){var _=lp;return h.current.memoizedState.isDehydrated&&(qc(h,p).flags|=256),h=$y(h,p),h!==2&&(p=Zr,Zr=_,p!==null&&iS(p)),h}function iS(h){Zr===null?Zr=h:Zr.push.apply(Zr,h)}function V6(h){for(var p=h;;){if(p.flags&16384){var _=p.updateQueue;if(_!==null&&(_=_.stores,_!==null))for(var T=0;T<_.length;T++){var P=_[T],O=P.getSnapshot;P=P.value;try{if(!_s(O(),P))return!1}catch{return!1}}}if(_=p.child,p.subtreeFlags&16384&&_!==null)_.return=p,p=_;else{if(p===h)break;for(;p.sibling===null;){if(p.return===null||p.return===h)return!0;p=p.return}p.sibling.return=p.return,p=p.sibling}}return!0}function dl(h,p){for(p&=~Jb,p&=~Vy,h.suspendedLanes|=p,h.pingedLanes&=~p,h=h.expirationTimes;0<p;){var _=31-Bn(p),T=1<<_;h[_]=-1,p&=~T}}function KP(h){if(un&6)throw Error(o(327));Xc();var p=yh(h,0);if(!(p&1))return es(h,Ai()),null;var _=$y(h,p);if(h.tag!==0&&_===2){var T=Vf(h);T!==0&&(p=T,_=nS(h,T))}if(_===1)throw _=ap,qc(h,0),dl(h,p),es(h,Ai()),_;if(_===6)throw Error(o(345));return h.finishedWork=h.current.alternate,h.finishedLanes=p,$c(h,Zr),es(h,Ai()),null}function JP(h){ul!==null&&ul.tag===0&&!(un&6)&&Xc();var p=un;un|=1;var _=_i.transition,T=vn;try{if(_i.transition=null,vn=1,h)return h()}finally{vn=T,_i.transition=_,un=p,!(un&6)&&bs()}}function rS(){Cs=Nh.current,At(Nh)}function qc(h,p){h.finishedWork=null,h.finishedLanes=0;var _=h.timeoutHandle;if(_!==Dt&&(h.timeoutHandle=Dt,xt(_)),Ni!==null)for(_=Ni.return;_!==null;){var T=_;switch(Ii(T),T.tag){case 1:T=T.type.childContextTypes,T!=null&&vi();break;case 3:Ph(),At(Vn),At(Qe),Mb();break;case 5:Cb(T);break;case 4:Ph();break;case 13:At(oi);break;case 19:At(oi);break;case 10:bh(T.type._context);break;case 22:case 23:rS()}_=_.return}if(Ri=h,Ni=h=fl(h.current,null),ir=Cs=p,zi=0,ap=null,Jb=Vy=Lh=0,Zr=lp=null,pr!==null){for(p=0;p<pr.length;p++)if(_=pr[p],T=_.interleaved,T!==null){_.interleaved=null;var P=T.next,O=_.pending;if(O!==null){var J=O.next;O.next=P,T.next=J}_.pending=T}pr=null}return h}function QP(h,p){do{var _=Ni;try{if(Fc(),xy.current=Ey,_y){for(var T=pi.memoizedState;T!==null;){var P=T.queue;P!==null&&(P.pending=null),T=T.next}_y=!1}if(Rh=0,Ki=gr=pi=null,Qf=!1,Zf=0,Kb.current=null,_===null||_.return===null){zi=1,ap=p,Ni=null;break}e:{var O=h,J=_.return,se=_,Se=p;if(p=ir,se.flags|=32768,Se!==null&&typeof Se=="object"&&typeof Se.then=="function"){var qe=Se,wt=se,Qt=wt.tag;if(!(wt.mode&1)&&(Qt===0||Qt===11||Qt===15)){var Ut=wt.alternate;Ut?(wt.updateQueue=Ut.updateQueue,wt.memoizedState=Ut.memoizedState,wt.lanes=Ut.lanes):(wt.updateQueue=null,wt.memoizedState=null)}var Yn=xP(J);if(Yn!==null){Yn.flags&=-257,_P(Yn,J,se,O,p),Yn.mode&1&&vP(O,qe,p),p=Yn,Se=qe;var Rt=p.updateQueue;if(Rt===null){var xr=new Set;xr.add(Se),p.updateQueue=xr}else Rt.add(Se);break e}else{if(!(p&1)){vP(O,qe,p),sS();break e}Se=Error(o(426))}}else if(pn&&se.mode&1){var Ys=xP(J);if(Ys!==null){!(Ys.flags&65536)&&(Ys.flags|=256),_P(Ys,J,se,O,p),Tb(Se);break e}}O=Se,zi!==4&&(zi=2),lp===null?lp=[O]:lp.push(O),Se=kb(Se,se),se=J;do{switch(se.tag){case 3:se.flags|=65536,p&=-p,se.lanes|=p;var ge=gP(se,Se,p);Wf(se,ge);break e;case 1:O=Se;var ae=se.type,we=se.stateNode;if(!(se.flags&128)&&(typeof ae.getDerivedStateFromError=="function"||we!==null&&typeof we.componentDidCatch=="function"&&(cl===null||!cl.has(we)))){se.flags|=65536,p&=-p,se.lanes|=p;var ft=yP(se,O,p);Wf(se,ft);break e}}se=se.return}while(se!==null)}tR(_)}catch(Pt){p=Pt,Ni===_&&_!==null&&(Ni=_=_.return);continue}break}while(!0)}function ZP(){var h=jy.current;return jy.current=Ey,h===null?Ey:h}function sS(){(zi===0||zi===3||zi===2)&&(zi=4),Ri===null||!(Lh&268435455)&&!(Vy&268435455)||dl(Ri,ir)}function $y(h,p){var _=un;un|=2;var T=ZP();Ri===h&&ir===p||qc(h,p);do try{B6();break}catch(P){QP(h,P)}while(!0);if(Fc(),un=_,jy.current=T,Ni!==null)throw Error(o(261));return Ri=null,ir=0,zi}function B6(){for(;Ni!==null;)eR(Ni)}function z6(){for(;Ni!==null&&!xb();)eR(Ni)}function eR(h){var p=rR(h.alternate,h,Cs);h.memoizedProps=h.pendingProps,p===null?tR(h):Ni=p,Kb.current=null}function tR(h){var p=h;do{var _=p.alternate;if(h=p.return,p.flags&32768){if(_=D6(_,p),_!==null){_.flags&=32767,Ni=_;return}if(h!==null)h.flags|=32768,h.subtreeFlags=0,h.deletions=null;else{zi=6,Ni=null;return}}else if(_=R6(_,p,Cs),_!==null){Ni=_;return}if(p=p.sibling,p!==null){Ni=p;return}Ni=p=h}while(p!==null);zi===0&&(zi=5)}function $c(h,p){var _=vn,T=_i.transition;try{_i.transition=null,vn=1,H6(h,p,_)}finally{_i.transition=T,vn=_}return null}function H6(h,p,_){do Xc();while(ul!==null);if(un&6)throw Error(o(327));var T=h.finishedWork,P=h.finishedLanes;if(T===null)return null;if(h.finishedWork=null,h.finishedLanes=0,T===h.current)throw Error(o(177));h.callbackNode=null,h.callbackPriority=0;var O=T.lanes|T.childLanes;if(Dc(h,O),h===Ri&&(Ni=Ri=null,ir=0),!(T.subtreeFlags&2064)&&!(T.flags&2064)||zy||(zy=!0,sR(Hf,function(){return Xc(),null})),O=(T.flags&15990)!==0,T.subtreeFlags&15990||O){O=_i.transition,_i.transition=null;var J=vn;vn=1;var se=un;un|=4,Kb.current=null,O6(h,T),U6(h,T),Y(h.containerInfo),h.current=T,F6(T),_b(),un=se,vn=J,_i.transition=O}else h.current=T;if(zy&&(zy=!1,ul=h,Hy=P),O=h.pendingLanes,O===0&&(cl=null),kc(T.stateNode),es(h,Ai()),p!==null)for(_=h.onRecoverableError,T=0;T<p.length;T++)_(p[T]);if(By)throw By=!1,h=eS,eS=null,h;return Hy&1&&h.tag!==0&&Xc(),O=h.pendingLanes,O&1?h===tS?cp++:(cp=0,tS=h):cp=0,bs(),null}function Xc(){if(ul!==null){var h=zf(Hy),p=_i.transition,_=vn;try{if(_i.transition=null,vn=16>h?16:h,ul===null)var T=!1;else{if(h=ul,ul=null,Hy=0,un&6)throw Error(o(331));var P=un;for(un|=4,at=h.current;at!==null;){var O=at,J=O.child;if(at.flags&16){var se=O.deletions;if(se!==null){for(var Se=0;Se<se.length;Se++){var qe=se[Se];for(at=qe;at!==null;){var wt=at;switch(wt.tag){case 0:case 11:case 15:Wc(8,wt,O)}var Qt=wt.child;if(Qt!==null)Qt.return=wt,at=Qt;else for(;at!==null;){wt=at;var Ut=wt.sibling,Yn=wt.return;if(jP(wt),wt===qe){at=null;break}if(Ut!==null){Ut.return=Yn,at=Ut;break}at=Yn}}}var Rt=O.alternate;if(Rt!==null){var xr=Rt.child;if(xr!==null){Rt.child=null;do{var Ys=xr.sibling;xr.sibling=null,xr=Ys}while(xr!==null)}}at=O}}if(O.subtreeFlags&2064&&J!==null)J.return=O,at=J;else e:for(;at!==null;){if(O=at,O.flags&2048)switch(O.tag){case 0:case 11:case 15:Wc(9,O,O.return)}var ge=O.sibling;if(ge!==null){ge.return=O.return,at=ge;break e}at=O.return}}var ae=h.current;for(at=ae;at!==null;){J=at;var we=J.child;if(J.subtreeFlags&2064&&we!==null)we.return=J,at=we;else e:for(J=ae;at!==null;){if(se=at,se.flags&2048)try{switch(se.tag){case 0:case 11:case 15:sp(9,se)}}catch(Pt){ts(se,se.return,Pt)}if(se===J){at=null;break e}var ft=se.sibling;if(ft!==null){ft.return=se.return,at=ft;break e}at=se.return}}if(un=P,bs(),xs&&typeof xs.onPostCommitFiberRoot=="function")try{xs.onPostCommitFiberRoot(ha,h)}catch{}T=!0}return T}finally{vn=_,_i.transition=p}}return!1}function nR(h,p,_){p=kb(_,p),p=gP(h,p,1),ho(h,p),p=zr(),h=qy(h,1),h!==null&&(Lc(h,1,p),es(h,p))}function ts(h,p,_){if(h.tag===3)nR(h,h,_);else for(;p!==null;){if(p.tag===3){nR(p,h,_);break}else if(p.tag===1){var T=p.stateNode;if(typeof p.type.getDerivedStateFromError=="function"||typeof T.componentDidCatch=="function"&&(cl===null||!cl.has(T))){h=kb(_,h),h=yP(p,h,1),ho(p,h),h=zr(),p=qy(p,1),p!==null&&(Lc(p,1,h),es(p,h));break}}p=p.return}}function G6(h,p,_){var T=h.pingCache;T!==null&&T.delete(p),p=zr(),h.pingedLanes|=h.suspendedLanes&_,Ri===h&&(ir&_)===_&&(zi===4||zi===3&&(ir&130023424)===ir&&500>Ai()-Qb?qc(h,0):Jb|=_),es(h,p)}function iR(h,p){p===0&&(h.mode&1?(p=Oo,Oo<<=1,!(Oo&130023424)&&(Oo=4194304)):p=1);var _=zr();h=qy(h,p),h!==null&&(Lc(h,p,_),es(h,_))}function W6(h){var p=h.memoizedState,_=0;p!==null&&(_=p.retryLane),iR(h,_)}function q6(h,p){var _=0;switch(h.tag){case 13:var T=h.stateNode,P=h.memoizedState;P!==null&&(_=P.retryLane);break;case 19:T=h.stateNode;break;default:throw Error(o(314))}T!==null&&T.delete(p),iR(h,_)}var rR;rR=function(h,p,_){if(h!==null)if(h.memoizedProps!==p.pendingProps||Vn.current)Es=!0;else{if(!(h.lanes&_)&&!(p.flags&128))return Es=!1,L6(h,p,_);Es=!!(h.flags&131072)}else Es=!1,pn&&p.flags&1048576&&Mi(p,R,p.index);switch(p.lanes=0,p.tag){case 2:var T=p.type;h!==null&&(h.alternate=null,p.alternate=null,p.flags|=2),h=p.pendingProps;var P=Ci(p,Qe.current);ll(p,_),P=Pb(null,p,T,h,P,_);var O=Rb();return p.flags|=1,typeof P=="object"&&P!==null&&typeof P.render=="function"&&P.$$typeof===void 0?(p.tag=1,p.memoizedState=null,p.updateQueue=null,ri(T)?(O=!0,si(p)):O=!1,p.memoizedState=P.state!==null&&P.state!==void 0?P.state:null,Sh(p),P.updater=Bc,p.stateNode=P,P._reactInternals=p,Ch(p,T,h,_),p=Fb(null,p,T,!0,O,_)):(p.tag=0,pn&&O&&fn(p),Br(null,p,P,_),p=p.child),p;case 16:T=p.elementType;e:{switch(h!==null&&(h.alternate=null,p.alternate=null,p.flags|=2),h=p.pendingProps,P=T._init,T=P(T._payload),p.type=T,P=p.tag=X6(T),h=xi(T,h),P){case 0:p=Ub(null,p,T,h,_);break e;case 1:p=MP(null,p,T,h,_);break e;case 11:p=SP(null,p,T,h,_);break e;case 14:p=TP(null,p,T,xi(T.type,h),_);break e}throw Error(o(306,T,""))}return p;case 0:return T=p.type,P=p.pendingProps,P=p.elementType===T?P:xi(T,P),Ub(h,p,T,P,_);case 1:return T=p.type,P=p.pendingProps,P=p.elementType===T?P:xi(T,P),MP(h,p,T,P,_);case 3:e:{if(IP(p),h===null)throw Error(o(387));T=p.pendingProps,O=p.memoizedState,P=O.element,Th(h,p),Vc(p,T,null,_);var J=p.memoizedState;if(T=J.element,Me&&O.isDehydrated)if(O={element:T,isDehydrated:!1,cache:J.cache,transitions:J.transitions},p.updateQueue.baseState=O,p.memoizedState=O,p.flags&256){P=Error(o(423)),p=PP(h,p,T,_,P);break e}else if(T!==P){P=Error(o(424)),p=PP(h,p,T,_,P);break e}else for(Me&&(Pi=mt(p.stateNode.containerInfo),Un=p,pn=!0,Vr=null,Fo=!1),_=KI(p,null,T,_),p.child=_;_;)_.flags=_.flags&-3|4096,_=_.sibling;else{if(Ah(),T===P){p=ga(h,p,_);break e}Br(h,p,T,_)}p=p.child}return p;case 5:return JI(p),h===null&&Sb(p),T=p.type,P=p.pendingProps,O=h!==null?h.memoizedProps:null,J=P.children,Ee(T,P)?J=null:O!==null&&Ee(T,O)&&(p.flags|=32),AP(h,p),Br(h,p,J,_),p.child;case 6:return h===null&&Sb(p),null;case 13:return RP(h,p,_);case 4:return Eb(p,p.stateNode.containerInfo),T=p.pendingProps,h===null?p.child=Mh(p,null,T,_):Br(h,p,T,_),p.child;case 11:return T=p.type,P=p.pendingProps,P=p.elementType===T?P:xi(T,P),SP(h,p,T,P,_);case 7:return Br(h,p,p.pendingProps,_),p.child;case 8:return Br(h,p,p.pendingProps.children,_),p.child;case 12:return Br(h,p,p.pendingProps.children,_),p.child;case 10:e:{if(T=p.type._context,P=p.pendingProps,O=p.memoizedProps,J=P.value,jc(p,T,J),O!==null)if(_s(O.value,J)){if(O.children===P.children&&!Vn.current){p=ga(h,p,_);break e}}else for(O=p.child,O!==null&&(O.return=p);O!==null;){var se=O.dependencies;if(se!==null){J=O.child;for(var Se=se.firstContext;Se!==null;){if(Se.context===T){if(O.tag===1){Se=Ss(-1,_&-_),Se.tag=2;var qe=O.updateQueue;if(qe!==null){qe=qe.shared;var wt=qe.pending;wt===null?Se.next=Se:(Se.next=wt.next,wt.next=Se),qe.pending=Se}}O.lanes|=_,Se=O.alternate,Se!==null&&(Se.lanes|=_),al(O.return,_,p),se.lanes|=_;break}Se=Se.next}}else if(O.tag===10)J=O.type===p.type?null:O.child;else if(O.tag===18){if(J=O.return,J===null)throw Error(o(341));J.lanes|=_,se=J.alternate,se!==null&&(se.lanes|=_),al(J,_,p),J=O.sibling}else J=O.child;if(J!==null)J.return=O;else for(J=O;J!==null;){if(J===p){J=null;break}if(O=J.sibling,O!==null){O.return=J.return,J=O;break}J=J.return}O=J}Br(h,p,P.children,_),p=p.child}return p;case 9:return P=p.type,T=p.pendingProps.children,ll(p,_),P=jr(P),T=T(P),p.flags|=1,Br(h,p,T,_),p.child;case 14:return T=p.type,P=xi(T,p.pendingProps),P=xi(T.type,P),TP(h,p,T,P,_);case 15:return EP(h,p,p.type,p.pendingProps,_);case 17:return T=p.type,P=p.pendingProps,P=p.elementType===T?P:xi(T,P),h!==null&&(h.alternate=null,p.alternate=null,p.flags|=2),p.tag=1,ri(T)?(h=!0,si(p)):h=!1,ll(p,_),zc(p,T,P),Ch(p,T,P,_),Fb(null,p,T,!0,h,_);case 19:return kP(h,p,_);case 22:return CP(h,p,_)}throw Error(o(156,p.tag))};function sR(h,p){return vh(h,p)}function $6(h,p,_,T){this.tag=h,this.key=_,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=p,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=T,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Xs(h,p,_,T){return new $6(h,p,_,T)}function oS(h){return h=h.prototype,!(!h||!h.isReactComponent)}function X6(h){if(typeof h=="function")return oS(h)?1:0;if(h!=null){if(h=h.$$typeof,h===b)return 11;if(h===S)return 14}return 2}function fl(h,p){var _=h.alternate;return _===null?(_=Xs(h.tag,p,h.key,h.mode),_.elementType=h.elementType,_.type=h.type,_.stateNode=h.stateNode,_.alternate=h,h.alternate=_):(_.pendingProps=p,_.type=h.type,_.flags=0,_.subtreeFlags=0,_.deletions=null),_.flags=h.flags&14680064,_.childLanes=h.childLanes,_.lanes=h.lanes,_.child=h.child,_.memoizedProps=h.memoizedProps,_.memoizedState=h.memoizedState,_.updateQueue=h.updateQueue,p=h.dependencies,_.dependencies=p===null?null:{lanes:p.lanes,firstContext:p.firstContext},_.sibling=h.sibling,_.index=h.index,_.ref=h.ref,_}function Xy(h,p,_,T,P,O){var J=2;if(T=h,typeof h=="function")oS(h)&&(J=1);else if(typeof h=="string")J=5;else e:switch(h){case u:return Yc(_.children,P,O,p);case f:J=8,P|=8;break;case m:return h=Xs(12,_,p,P|2),h.elementType=m,h.lanes=O,h;case w:return h=Xs(13,_,p,P),h.elementType=w,h.lanes=O,h;case v:return h=Xs(19,_,p,P),h.elementType=v,h.lanes=O,h;case C:return Yy(_,P,O,p);default:if(typeof h=="object"&&h!==null)switch(h.$$typeof){case g:J=10;break e;case x:J=9;break e;case b:J=11;break e;case S:J=14;break e;case E:J=16,T=null;break e}throw Error(o(130,h==null?h:typeof h,""))}return p=Xs(J,_,p,P),p.elementType=h,p.type=T,p.lanes=O,p}function Yc(h,p,_,T){return h=Xs(7,h,T,p),h.lanes=_,h}function Yy(h,p,_,T){return h=Xs(22,h,T,p),h.elementType=C,h.lanes=_,h.stateNode={},h}function aS(h,p,_){return h=Xs(6,h,null,p),h.lanes=_,h}function lS(h,p,_){return p=Xs(4,h.children!==null?h.children:[],h.key,p),p.lanes=_,p.stateNode={containerInfo:h.containerInfo,pendingChildren:null,implementation:h.implementation},p}function Y6(h,p,_,T,P){this.tag=p,this.containerInfo=h,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=Dt,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Bf(0),this.expirationTimes=Bf(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Bf(0),this.identifierPrefix=T,this.onRecoverableError=P,Me&&(this.mutableSourceEagerHydrationData=null)}function oR(h,p,_,T,P,O,J,se,Se){return h=new Y6(h,p,_,se,Se),p===1?(p=1,O===!0&&(p|=8)):p=0,O=Xs(3,null,null,p),h.current=O,O.stateNode=h,O.memoizedState={element:T,isDehydrated:_,cache:null,transitions:null},Sh(O),h}function aR(h){if(!h)return jt;h=h._reactInternals;e:{if(A(h)!==h||h.tag!==1)throw Error(o(170));var p=h;do{switch(p.tag){case 3:p=p.stateNode.context;break e;case 1:if(ri(p.type)){p=p.stateNode.__reactInternalMemoizedMergedChildContext;break e}}p=p.return}while(p!==null);throw Error(o(171))}if(h.tag===1){var _=h.type;if(ri(_))return kn(h,_,p)}return p}function lR(h){var p=h._reactInternals;if(p===void 0)throw typeof h.render=="function"?Error(o(188)):(h=Object.keys(h).join(","),Error(o(268,h)));return h=z(p),h===null?null:h.stateNode}function cR(h,p){if(h=h.memoizedState,h!==null&&h.dehydrated!==null){var _=h.retryLane;h.retryLane=_!==0&&_<p?_:p}}function cS(h,p){cR(h,p),(h=h.alternate)&&cR(h,p)}function K6(h){return h=z(h),h===null?null:h.stateNode}function J6(){return null}return t.attemptContinuousHydration=function(h){if(h.tag===13){var p=zr();$s(h,134217728,p),cS(h,134217728)}},t.attemptHydrationAtCurrentPriority=function(h){if(h.tag===13){var p=zr(),_=hl(h);$s(h,_,p),cS(h,_)}},t.attemptSynchronousHydration=function(h){switch(h.tag){case 3:var p=h.stateNode;if(p.current.memoizedState.isDehydrated){var _=co(p.pendingLanes);_!==0&&(zs(p,_|1),es(p,Ai()),!(un&6)&&(Dh(),bs()))}break;case 13:var T=zr();JP(function(){return $s(h,1,T)}),cS(h,1)}},t.batchedUpdates=function(h,p){var _=un;un|=1;try{return h(p)}finally{un=_,un===0&&(Dh(),Xn&&bs())}},t.createComponentSelector=function(h){return{$$typeof:Dy,value:h}},t.createContainer=function(h,p,_,T,P,O,J){return oR(h,p,!1,null,_,T,P,O,J)},t.createHasPseudoClassSelector=function(h){return{$$typeof:ky,value:h}},t.createHydrationContainer=function(h,p,_,T,P,O,J,se,Se){return h=oR(_,T,!0,h,P,O,J,se,Se),h.context=aR(null),_=h.current,T=zr(),P=hl(_),O=Ss(T,P),O.callback=p??null,ho(_,O),h.current.lanes=P,Lc(h,P,T),es(h,T),h},t.createPortal=function(h,p,_){var T=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:c,key:T==null?null:""+T,children:h,containerInfo:p,implementation:_}},t.createRoleSelector=function(h){return{$$typeof:Oy,value:h}},t.createTestNameSelector=function(h){return{$$typeof:Uy,value:h}},t.createTextSelector=function(h){return{$$typeof:Fy,value:h}},t.deferredUpdates=function(h){var p=vn,_=_i.transition;try{return _i.transition=null,vn=16,h()}finally{vn=p,_i.transition=_}},t.discreteUpdates=function(h,p,_,T,P){var O=vn,J=_i.transition;try{return _i.transition=null,vn=1,h(p,_,T,P)}finally{vn=O,_i.transition=J,un===0&&Dh()}},t.findAllNodes=Yb,t.findBoundingRects=function(h,p){if(!Ye)throw Error(o(363));p=Yb(h,p),h=[];for(var _=0;_<p.length;_++)h.push(G(p[_]));for(p=h.length-1;0<p;p--){_=h[p];for(var T=_.x,P=T+_.width,O=_.y,J=O+_.height,se=p-1;0<=se;se--)if(p!==se){var Se=h[se],qe=Se.x,wt=qe+Se.width,Qt=Se.y,Ut=Qt+Se.height;if(T>=qe&&O>=Qt&&P<=wt&&J<=Ut){h.splice(p,1);break}else if(T!==qe||_.width!==Se.width||Ut<O||Qt>J){if(!(O!==Qt||_.height!==Se.height||wt<T||qe>P)){qe>T&&(Se.width+=qe-T,Se.x=T),wt<P&&(Se.width=P-qe),h.splice(p,1);break}}else{Qt>O&&(Se.height+=Qt-O,Se.y=O),Ut<J&&(Se.height=J-Qt),h.splice(p,1);break}}}return h},t.findHostInstance=lR,t.findHostInstanceWithNoPortals=function(h){return h=D(h),h=h!==null?te(h):null,h===null?null:h.stateNode},t.findHostInstanceWithWarning=function(h){return lR(h)},t.flushControlled=function(h){var p=un;un|=1;var _=_i.transition,T=vn;try{_i.transition=null,vn=1,h()}finally{vn=T,_i.transition=_,un=p,un===0&&(Dh(),bs())}},t.flushPassiveEffects=Xc,t.flushSync=JP,t.focusWithin=function(h,p){if(!Ye)throw Error(o(363));for(h=qb(h),p=XP(h,p),p=Array.from(p),h=0;h<p.length;){var _=p[h++];if(!be(_)){if(_.tag===5&&xe(_.stateNode))return!0;for(_=_.child;_!==null;)p.push(_),_=_.sibling}}return!1},t.getCurrentUpdatePriority=function(){return vn},t.getFindAllNodesFailureDescription=function(h,p){if(!Ye)throw Error(o(363));var _=0,T=[];h=[qb(h),0];for(var P=0;P<h.length;){var O=h[P++],J=h[P++],se=p[J];if((O.tag!==5||!be(O))&&($b(O,se)&&(T.push(Xb(se)),J++,J>_&&(_=J)),J<p.length))for(O=O.child;O!==null;)h.push(O,J),O=O.sibling}if(_<p.length){for(h=[];_<p.length;_++)h.push(Xb(p[_]));return`findAllNodes was able to match part of the selector:
  `+(T.join(" > ")+`

No matching component was found for:
  `)+h.join(" > ")}return null},t.getPublicRootInstance=function(h){if(h=h.current,!h.child)return null;switch(h.child.tag){case 5:return de(h.child.stateNode);default:return h.child.stateNode}},t.injectIntoDevTools=function(h){if(h={bundleType:h.bundleType,version:h.version,rendererPackageName:h.rendererPackageName,rendererConfig:h.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:a.ReactCurrentDispatcher,findHostInstanceByFiber:K6,findFiberByHostInstance:h.findFiberByHostInstance||J6,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.0.0-fc46dba67-20220329"},typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")h=!1;else{var p=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(p.isDisabled||!p.supportsFiber)h=!0;else{try{ha=p.inject(h),xs=p}catch{}h=!!p.checkDCE}}return h},t.isAlreadyRendering=function(){return!1},t.observeVisibleRects=function(h,p,_,T){if(!Ye)throw Error(o(363));h=Yb(h,p);var P=Ve(h,_,T).disconnect;return{disconnect:function(){P()}}},t.registerMutableSourceForHydration=function(h,p){var _=p._getVersion;_=_(p._source),h.mutableSourceEagerHydrationData==null?h.mutableSourceEagerHydrationData=[p,_]:h.mutableSourceEagerHydrationData.push(p,_)},t.runWithPriority=function(h,p){var _=vn;try{return vn=h,p()}finally{vn=_}},t.shouldError=function(){return null},t.shouldSuspend=function(){return!1},t.updateContainer=function(h,p,_,T){var P=p.current,O=zr(),J=hl(P);return _=aR(_),p.context===null?p.context=_:p.pendingContext=_,p=Ss(O,J),p.payload={element:h},T=T===void 0?null:T,T!==null&&(p.callback=T),ho(P,p),h=$s(P,J,O),h!==null&&fa(h,P,J),J},t};C4.exports=iZ;var rZ=C4.exports;const sZ=Mg(rZ);var A4={exports:{}},M4={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(n){function e(F,X){var Y=F.length;F.push(X);e:for(;0<Y;){var ne=Y-1>>>1,fe=F[ne];if(0<r(fe,X))F[ne]=X,F[Y]=fe,Y=ne;else break e}}function t(F){return F.length===0?null:F[0]}function i(F){if(F.length===0)return null;var X=F[0],Y=F.pop();if(Y!==X){F[0]=Y;e:for(var ne=0,fe=F.length,Ce=fe>>>1;ne<Ce;){var ce=2*(ne+1)-1,Ee=F[ce],Oe=ce+1,Pe=F[Oe];if(0>r(Ee,Y))Oe<fe&&0>r(Pe,Ee)?(F[ne]=Pe,F[Oe]=Y,ne=Oe):(F[ne]=Ee,F[ce]=Y,ne=ce);else if(Oe<fe&&0>r(Pe,Y))F[ne]=Pe,F[Oe]=Y,ne=Oe;else break e}}return X}function r(F,X){var Y=F.sortIndex-X.sortIndex;return Y!==0?Y:F.id-X.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;n.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();n.unstable_now=function(){return o.now()-a}}var l=[],c=[],u=1,f=null,m=3,g=!1,x=!1,b=!1,w=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,S=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function E(F){for(var X=t(c);X!==null;){if(X.callback===null)i(c);else if(X.startTime<=F)i(c),X.sortIndex=X.expirationTime,e(l,X);else break;X=t(c)}}function C(F){if(b=!1,E(F),!x)if(t(l)!==null)x=!0,de(V);else{var X=t(c);X!==null&&U(C,X.startTime-F)}}function V(F,X){x=!1,b&&(b=!1,v(I),I=-1),g=!0;var Y=m;try{for(E(X),f=t(l);f!==null&&(!(f.expirationTime>X)||F&&!D());){var ne=f.callback;if(typeof ne=="function"){f.callback=null,m=f.priorityLevel;var fe=ne(f.expirationTime<=X);X=n.unstable_now(),typeof fe=="function"?f.callback=fe:f===t(l)&&i(l),E(X)}else i(l);f=t(l)}if(f!==null)var Ce=!0;else{var ce=t(c);ce!==null&&U(C,ce.startTime-X),Ce=!1}return Ce}finally{f=null,m=Y,g=!1}}var L=!1,N=null,I=-1,A=5,M=-1;function D(){return!(n.unstable_now()-M<A)}function z(){if(N!==null){var F=n.unstable_now();M=F;var X=!0;try{X=N(!0,F)}finally{X?j():(L=!1,N=null)}}else L=!1}var j;if(typeof S=="function")j=function(){S(z)};else if(typeof MessageChannel<"u"){var te=new MessageChannel,he=te.port2;te.port1.onmessage=z,j=function(){he.postMessage(null)}}else j=function(){w(z,0)};function de(F){N=F,L||(L=!0,j())}function U(F,X){I=w(function(){F(n.unstable_now())},X)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(F){F.callback=null},n.unstable_continueExecution=function(){x||g||(x=!0,de(V))},n.unstable_forceFrameRate=function(F){0>F||125<F?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<F?Math.floor(1e3/F):5},n.unstable_getCurrentPriorityLevel=function(){return m},n.unstable_getFirstCallbackNode=function(){return t(l)},n.unstable_next=function(F){switch(m){case 1:case 2:case 3:var X=3;break;default:X=m}var Y=m;m=X;try{return F()}finally{m=Y}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(F,X){switch(F){case 1:case 2:case 3:case 4:case 5:break;default:F=3}var Y=m;m=F;try{return X()}finally{m=Y}},n.unstable_scheduleCallback=function(F,X,Y){var ne=n.unstable_now();switch(typeof Y=="object"&&Y!==null?(Y=Y.delay,Y=typeof Y=="number"&&0<Y?ne+Y:ne):Y=ne,F){case 1:var fe=-1;break;case 2:fe=250;break;case 5:fe=1073741823;break;case 4:fe=1e4;break;default:fe=5e3}return fe=Y+fe,F={id:u++,callback:X,priorityLevel:F,startTime:Y,expirationTime:fe,sortIndex:-1},Y>ne?(F.sortIndex=Y,e(c,F),t(l)===null&&F===t(c)&&(b?(v(I),I=-1):b=!0,U(C,Y-ne))):(F.sortIndex=fe,e(l,F),x||g||(x=!0,de(V))),F},n.unstable_shouldYield=D,n.unstable_wrapCallback=function(F){var X=m;return function(){var Y=m;m=X;try{return F.apply(this,arguments)}finally{m=Y}}}})(M4);A4.exports=M4;var BL=A4.exports;const aM={},oZ=n=>void Object.assign(aM,n);function aZ(n,e){function t(u,{args:f=[],attach:m,...g},x){let b=`${u[0].toUpperCase()}${u.slice(1)}`,w;if(u==="primitive"){if(g.object===void 0)throw new Error("R3F: Primitives without 'object' are invalid!");const v=g.object;w=sd(v,{type:u,root:x,attach:m,primitive:!0})}else{const v=aM[b];if(!v)throw new Error(`R3F: ${b} is not part of the THREE namespace! Did you forget to extend? See: https://docs.pmnd.rs/react-three-fiber/api/objects#using-3rd-party-objects-declaratively`);if(!Array.isArray(f))throw new Error("R3F: The args prop must be an array!");w=sd(new v(...f),{type:u,root:x,attach:m,memoizedProps:{args:f}})}return w.__r3f.attach===void 0&&(w instanceof rn?w.__r3f.attach="geometry":w instanceof fr&&(w.__r3f.attach="material")),b!=="inject"&&RT(w,g),w}function i(u,f){let m=!1;if(f){var g,x;(g=f.__r3f)!=null&&g.attach?PT(u,f,f.__r3f.attach):f.isObject3D&&u.isObject3D&&(u.add(f),m=!0),m||(x=u.__r3f)==null||x.objects.push(f),f.__r3f||sd(f,{}),f.__r3f.parent=u,wE(f),od(f)}}function r(u,f,m){let g=!1;if(f){var x,b;if((x=f.__r3f)!=null&&x.attach)PT(u,f,f.__r3f.attach);else if(f.isObject3D&&u.isObject3D){f.parent=u,f.dispatchEvent({type:"added"}),u.dispatchEvent({type:"childadded",child:f});const w=u.children.filter(S=>S!==f),v=w.indexOf(m);u.children=[...w.slice(0,v),f,...w.slice(v)],g=!0}g||(b=u.__r3f)==null||b.objects.push(f),f.__r3f||sd(f,{}),f.__r3f.parent=u,wE(f),od(f)}}function s(u,f,m=!1){u&&[...u].forEach(g=>o(f,g,m))}function o(u,f,m){if(f){var g,x,b;if(f.__r3f&&(f.__r3f.parent=null),(g=u.__r3f)!=null&&g.objects&&(u.__r3f.objects=u.__r3f.objects.filter(C=>C!==f)),(x=f.__r3f)!=null&&x.attach)qL(u,f,f.__r3f.attach);else if(f.isObject3D&&u.isObject3D){var w;u.remove(f),(w=f.__r3f)!=null&&w.root&&mZ(k0(f),f)}const S=(b=f.__r3f)==null?void 0:b.primitive,E=!S&&(m===void 0?f.dispose!==null:m);if(!S){var v;s((v=f.__r3f)==null?void 0:v.objects,f,E),s(f.children,f,E)}if(delete f.__r3f,E&&f.dispose&&f.type!=="Scene"){const C=()=>{try{f.dispose()}catch{}};typeof IS_REACT_ACT_ENVIRONMENT>"u"?BL.unstable_scheduleCallback(BL.unstable_IdlePriority,C):C()}od(u)}}function a(u,f,m,g){var x;const b=(x=u.__r3f)==null?void 0:x.parent;if(!b)return;const w=t(f,m,u.__r3f.root);if(u.children){for(const v of u.children)v.__r3f&&i(w,v);u.children=u.children.filter(v=>!v.__r3f)}u.__r3f.objects.forEach(v=>i(w,v)),u.__r3f.objects=[],u.__r3f.autoRemovedBeforeAppend||o(b,u),w.parent&&(w.__r3f.autoRemovedBeforeAppend=!0),i(b,w),w.raycast&&w.__r3f.eventCount&&k0(w).getState().internal.interaction.push(w),[g,g.alternate].forEach(v=>{v!==null&&(v.stateNode=w,v.ref&&(typeof v.ref=="function"?v.ref(w):v.ref.current=w))})}const l=()=>{};return{reconciler:sZ({createInstance:t,removeChild:o,appendChild:i,appendInitialChild:i,insertBefore:r,supportsMutation:!0,isPrimaryRenderer:!1,supportsPersistence:!1,supportsHydration:!1,noTimeout:-1,appendChildToContainer:(u,f)=>{if(!f)return;const m=u.getState().scene;m.__r3f&&(m.__r3f.root=u,i(m,f))},removeChildFromContainer:(u,f)=>{f&&o(u.getState().scene,f)},insertInContainerBefore:(u,f,m)=>{if(!f||!m)return;const g=u.getState().scene;g.__r3f&&r(g,f,m)},getRootHostContext:()=>null,getChildHostContext:u=>u,finalizeInitialChildren(u){var f;return!!((f=u?.__r3f)!=null?f:{}).handlers},prepareUpdate(u,f,m,g){var x;if(((x=u?.__r3f)!=null?x:{}).primitive&&g.object&&g.object!==u)return[!0];{const{args:w=[],children:v,...S}=g,{args:E=[],children:C,...V}=m;if(!Array.isArray(w))throw new Error("R3F: the args prop must be an array!");if(w.some((N,I)=>N!==E[I]))return[!0];const L=k4(u,S,V,!0);return L.changes.length?[!1,L]:null}},commitUpdate(u,[f,m],g,x,b,w){f?a(u,g,b,w):RT(u,m)},commitMount(u,f,m,g){var x;const b=(x=u.__r3f)!=null?x:{};u.raycast&&b.handlers&&b.eventCount&&k0(u).getState().internal.interaction.push(u)},getPublicInstance:u=>u,prepareForCommit:()=>null,preparePortalMount:u=>sd(u.getState().scene),resetAfterCommit:()=>{},shouldSetTextContent:()=>!1,clearContainer:()=>!1,hideInstance(u){var f;const{attach:m,parent:g}=(f=u.__r3f)!=null?f:{};m&&g&&qL(g,u,m),u.isObject3D&&(u.visible=!1),od(u)},unhideInstance(u,f){var m;const{attach:g,parent:x}=(m=u.__r3f)!=null?m:{};g&&x&&PT(x,u,g),(u.isObject3D&&f.visible==null||f.visible)&&(u.visible=!0),od(u)},createTextInstance:l,hideTextInstance:l,unhideTextInstance:l,getCurrentEventPriority:()=>e?e():Rd.DefaultEventPriority,beforeActiveInstanceBlur:()=>{},afterActiveInstanceBlur:()=>{},detachDeletedInstance:()=>{},now:typeof performance<"u"&&Qn.fun(performance.now)?performance.now:Qn.fun(Date.now)?Date.now:()=>0,scheduleTimeout:Qn.fun(setTimeout)?setTimeout:void 0,cancelTimeout:Qn.fun(clearTimeout)?clearTimeout:void 0}),applyProps:RT}}var zL,HL;const IT=n=>"colorSpace"in n||"outputColorSpace"in n,I4=()=>{var n;return(n=aM.ColorManagement)!=null?n:null},P4=n=>n&&n.isOrthographicCamera,lZ=n=>n&&n.hasOwnProperty("current"),Xg=typeof window<"u"&&((zL=window.document)!=null&&zL.createElement||((HL=window.navigator)==null?void 0:HL.product)==="ReactNative")?B.useLayoutEffect:B.useEffect;function R4(n){const e=B.useRef(n);return Xg(()=>void(e.current=n),[n]),e}function cZ({set:n}){return Xg(()=>(n(new Promise(()=>null)),()=>n(!1)),[n]),null}class N4 extends B.Component{constructor(...e){super(...e),this.state={error:!1}}componentDidCatch(e){this.props.set(e)}render(){return this.state.error?null:this.props.children}}N4.getDerivedStateFromError=()=>({error:!0});const L4="__default",GL=new Map,uZ=n=>n&&!!n.memoized&&!!n.changes;function D4(n){var e;const t=typeof window<"u"?(e=window.devicePixelRatio)!=null?e:2:1;return Array.isArray(n)?Math.min(Math.max(n[0],t),n[1]):n}const Lp=n=>{var e;return(e=n.__r3f)==null?void 0:e.root.getState()};function k0(n){let e=n.__r3f.root;for(;e.getState().previousRoot;)e=e.getState().previousRoot;return e}const Qn={obj:n=>n===Object(n)&&!Qn.arr(n)&&typeof n!="function",fun:n=>typeof n=="function",str:n=>typeof n=="string",num:n=>typeof n=="number",boo:n=>typeof n=="boolean",und:n=>n===void 0,arr:n=>Array.isArray(n),equ(n,e,{arrays:t="shallow",objects:i="reference",strict:r=!0}={}){if(typeof n!=typeof e||!!n!=!!e)return!1;if(Qn.str(n)||Qn.num(n)||Qn.boo(n))return n===e;const s=Qn.obj(n);if(s&&i==="reference")return n===e;const o=Qn.arr(n);if(o&&t==="reference")return n===e;if((o||s)&&n===e)return!0;let a;for(a in n)if(!(a in e))return!1;if(s&&t==="shallow"&&i==="shallow"){for(a in r?e:n)if(!Qn.equ(n[a],e[a],{strict:r,objects:"reference"}))return!1}else for(a in r?e:n)if(n[a]!==e[a])return!1;if(Qn.und(a)){if(o&&n.length===0&&e.length===0||s&&Object.keys(n).length===0&&Object.keys(e).length===0)return!0;if(n!==e)return!1}return!0}};function hZ(n){n.dispose&&n.type!=="Scene"&&n.dispose();for(const e in n)e.dispose==null||e.dispose(),delete n[e]}function sd(n,e){const t=n;return t.__r3f={type:"",root:null,previousAttach:null,memoizedProps:{},eventCount:0,handlers:{},objects:[],parent:null,...e},n}function _E(n,e){let t=n;if(e.includes("-")){const i=e.split("-"),r=i.pop();return t=i.reduce((s,o)=>s[o],n),{target:t,key:r}}else return{target:t,key:e}}const WL=/-\d+$/;function PT(n,e,t){if(Qn.str(t)){if(WL.test(t)){const s=t.replace(WL,""),{target:o,key:a}=_E(n,s);Array.isArray(o[a])||(o[a]=[])}const{target:i,key:r}=_E(n,t);e.__r3f.previousAttach=i[r],i[r]=e}else e.__r3f.previousAttach=t(n,e)}function qL(n,e,t){var i,r;if(Qn.str(t)){const{target:s,key:o}=_E(n,t),a=e.__r3f.previousAttach;a===void 0?delete s[o]:s[o]=a}else(i=e.__r3f)==null||i.previousAttach==null||i.previousAttach(n,e);(r=e.__r3f)==null||delete r.previousAttach}function k4(n,{children:e,key:t,ref:i,...r},{children:s,key:o,ref:a,...l}={},c=!1){const u=n.__r3f,f=Object.entries(r),m=[];if(c){const x=Object.keys(l);for(let b=0;b<x.length;b++)r.hasOwnProperty(x[b])||f.unshift([x[b],L4+"remove"])}f.forEach(([x,b])=>{var w;if((w=n.__r3f)!=null&&w.primitive&&x==="object"||Qn.equ(b,l[x]))return;if(/^on(Pointer|Click|DoubleClick|ContextMenu|Wheel)/.test(x))return m.push([x,b,!0,[]]);let v=[];x.includes("-")&&(v=x.split("-")),m.push([x,b,!1,v]);for(const S in r){const E=r[S];S.startsWith(`${x}-`)&&m.push([S,E,!1,S.split("-")])}});const g={...r};return u!=null&&u.memoizedProps&&u!=null&&u.memoizedProps.args&&(g.args=u.memoizedProps.args),u!=null&&u.memoizedProps&&u!=null&&u.memoizedProps.attach&&(g.attach=u.memoizedProps.attach),{memoized:g,changes:m}}const dZ=typeof process<"u"&&!1;function RT(n,e){var t;const i=n.__r3f,r=i?.root,s=r==null||r.getState==null?void 0:r.getState(),{memoized:o,changes:a}=uZ(e)?e:k4(n,e),l=i?.eventCount;n.__r3f&&(n.__r3f.memoizedProps=o);for(let u=0;u<a.length;u++){let[f,m,g,x]=a[u];if(IT(n)){const S="srgb",E="srgb-linear";f==="encoding"?(f="colorSpace",m=m===3001?S:E):f==="outputEncoding"&&(f="outputColorSpace",m=m===3001?S:E)}let b=n,w=b[f];if(x.length&&(w=x.reduce((v,S)=>v[S],n),!(w&&w.set))){const[v,...S]=x.reverse();b=S.reverse().reduce((E,C)=>E[C],n),f=v}if(m===L4+"remove")if(b.constructor){let v=GL.get(b.constructor);v||(v=new b.constructor,GL.set(b.constructor,v)),m=v[f]}else m=0;if(g&&i)m?i.handlers[f]=m:delete i.handlers[f],i.eventCount=Object.keys(i.handlers).length;else if(w&&w.set&&(w.copy||w instanceof Uu)){if(Array.isArray(m))w.fromArray?w.fromArray(m):w.set(...m);else if(w.copy&&m&&m.constructor&&(dZ?w.constructor.name===m.constructor.name:w.constructor===m.constructor))w.copy(m);else if(m!==void 0){const v=w instanceof pt;!v&&w.setScalar?w.setScalar(m):w instanceof Uu&&m instanceof Uu?w.mask=m.mask:w.set(m),!I4()&&s&&!s.linear&&v&&w.convertSRGBToLinear()}}else if(b[f]=m,b[f]instanceof hi&&b[f].format===Pr&&b[f].type===Mo&&s){const v=b[f];IT(v)&&IT(s.gl)?v.colorSpace=s.gl.outputColorSpace:v.encoding=s.gl.outputEncoding}od(n)}if(i&&i.parent&&n.raycast&&l!==i.eventCount){const u=k0(n).getState().internal,f=u.interaction.indexOf(n);f>-1&&u.interaction.splice(f,1),i.eventCount&&u.interaction.push(n)}return!(a.length===1&&a[0][0]==="onUpdate")&&a.length&&(t=n.__r3f)!=null&&t.parent&&wE(n),n}function od(n){var e,t;const i=(e=n.__r3f)==null||(t=e.root)==null||t.getState==null?void 0:t.getState();i&&i.internal.frames===0&&i.invalidate()}function wE(n){n.onUpdate==null||n.onUpdate(n)}function fZ(n,e){n.manual||(P4(n)?(n.left=e.width/-2,n.right=e.width/2,n.top=e.height/2,n.bottom=e.height/-2):n.aspect=e.width/e.height,n.updateProjectionMatrix(),n.updateMatrixWorld())}function s0(n){return(n.eventObject||n.object).uuid+"/"+n.index+n.instanceId}function pZ(){var n;const e=typeof self<"u"&&self||typeof window<"u"&&window;if(!e)return Rd.DefaultEventPriority;switch((n=e.event)==null?void 0:n.type){case"click":case"contextmenu":case"dblclick":case"pointercancel":case"pointerdown":case"pointerup":return Rd.DiscreteEventPriority;case"pointermove":case"pointerout":case"pointerover":case"pointerenter":case"pointerleave":case"wheel":return Rd.ContinuousEventPriority;default:return Rd.DefaultEventPriority}}function O4(n,e,t,i){const r=t.get(e);r&&(t.delete(e),t.size===0&&(n.delete(i),r.target.releasePointerCapture(i)))}function mZ(n,e){const{internal:t}=n.getState();t.interaction=t.interaction.filter(i=>i!==e),t.initialHits=t.initialHits.filter(i=>i!==e),t.hovered.forEach((i,r)=>{(i.eventObject===e||i.object===e)&&t.hovered.delete(r)}),t.capturedMap.forEach((i,r)=>{O4(t.capturedMap,e,i,r)})}function gZ(n){function e(l){const{internal:c}=n.getState(),u=l.offsetX-c.initialClick[0],f=l.offsetY-c.initialClick[1];return Math.round(Math.sqrt(u*u+f*f))}function t(l){return l.filter(c=>["Move","Over","Enter","Out","Leave"].some(u=>{var f;return(f=c.__r3f)==null?void 0:f.handlers["onPointer"+u]}))}function i(l,c){const u=n.getState(),f=new Set,m=[],g=c?c(u.internal.interaction):u.internal.interaction;for(let v=0;v<g.length;v++){const S=Lp(g[v]);S&&(S.raycaster.camera=void 0)}u.previousRoot||u.events.compute==null||u.events.compute(l,u);function x(v){const S=Lp(v);if(!S||!S.events.enabled||S.raycaster.camera===null)return[];if(S.raycaster.camera===void 0){var E;S.events.compute==null||S.events.compute(l,S,(E=S.previousRoot)==null?void 0:E.getState()),S.raycaster.camera===void 0&&(S.raycaster.camera=null)}return S.raycaster.camera?S.raycaster.intersectObject(v,!0):[]}let b=g.flatMap(x).sort((v,S)=>{const E=Lp(v.object),C=Lp(S.object);return!E||!C?v.distance-S.distance:C.events.priority-E.events.priority||v.distance-S.distance}).filter(v=>{const S=s0(v);return f.has(S)?!1:(f.add(S),!0)});u.events.filter&&(b=u.events.filter(b,u));for(const v of b){let S=v.object;for(;S;){var w;(w=S.__r3f)!=null&&w.eventCount&&m.push({...v,eventObject:S}),S=S.parent}}if("pointerId"in l&&u.internal.capturedMap.has(l.pointerId))for(let v of u.internal.capturedMap.get(l.pointerId).values())f.has(s0(v.intersection))||m.push(v.intersection);return m}function r(l,c,u,f){const m=n.getState();if(l.length){const g={stopped:!1};for(const x of l){const b=Lp(x.object)||m,{raycaster:w,pointer:v,camera:S,internal:E}=b,C=new K(v.x,v.y,0).unproject(S),V=M=>{var D,z;return(D=(z=E.capturedMap.get(M))==null?void 0:z.has(x.eventObject))!=null?D:!1},L=M=>{const D={intersection:x,target:c.target};E.capturedMap.has(M)?E.capturedMap.get(M).set(x.eventObject,D):E.capturedMap.set(M,new Map([[x.eventObject,D]])),c.target.setPointerCapture(M)},N=M=>{const D=E.capturedMap.get(M);D&&O4(E.capturedMap,x.eventObject,D,M)};let I={};for(let M in c){let D=c[M];typeof D!="function"&&(I[M]=D)}let A={...x,...I,pointer:v,intersections:l,stopped:g.stopped,delta:u,unprojectedPoint:C,ray:w.ray,camera:S,stopPropagation(){const M="pointerId"in c&&E.capturedMap.get(c.pointerId);if((!M||M.has(x.eventObject))&&(A.stopped=g.stopped=!0,E.hovered.size&&Array.from(E.hovered.values()).find(D=>D.eventObject===x.eventObject))){const D=l.slice(0,l.indexOf(x));s([...D,x])}},target:{hasPointerCapture:V,setPointerCapture:L,releasePointerCapture:N},currentTarget:{hasPointerCapture:V,setPointerCapture:L,releasePointerCapture:N},nativeEvent:c};if(f(A),g.stopped===!0)break}}return l}function s(l){const{internal:c}=n.getState();for(const u of c.hovered.values())if(!l.length||!l.find(f=>f.object===u.object&&f.index===u.index&&f.instanceId===u.instanceId)){const m=u.eventObject.__r3f,g=m?.handlers;if(c.hovered.delete(s0(u)),m!=null&&m.eventCount){const x={...u,intersections:l};g.onPointerOut==null||g.onPointerOut(x),g.onPointerLeave==null||g.onPointerLeave(x)}}}function o(l,c){for(let u=0;u<c.length;u++){const f=c[u].__r3f;f==null||f.handlers.onPointerMissed==null||f.handlers.onPointerMissed(l)}}function a(l){switch(l){case"onPointerLeave":case"onPointerCancel":return()=>s([]);case"onLostPointerCapture":return c=>{const{internal:u}=n.getState();"pointerId"in c&&u.capturedMap.has(c.pointerId)&&requestAnimationFrame(()=>{u.capturedMap.has(c.pointerId)&&(u.capturedMap.delete(c.pointerId),s([]))})}}return function(u){const{onPointerMissed:f,internal:m}=n.getState();m.lastEvent.current=u;const g=l==="onPointerMove",x=l==="onClick"||l==="onContextMenu"||l==="onDoubleClick",w=i(u,g?t:void 0),v=x?e(u):0;l==="onPointerDown"&&(m.initialClick=[u.offsetX,u.offsetY],m.initialHits=w.map(E=>E.eventObject)),x&&!w.length&&v<=2&&(o(u,m.interaction),f&&f(u)),g&&s(w);function S(E){const C=E.eventObject,V=C.__r3f,L=V?.handlers;if(V!=null&&V.eventCount)if(g){if(L.onPointerOver||L.onPointerEnter||L.onPointerOut||L.onPointerLeave){const N=s0(E),I=m.hovered.get(N);I?I.stopped&&E.stopPropagation():(m.hovered.set(N,E),L.onPointerOver==null||L.onPointerOver(E),L.onPointerEnter==null||L.onPointerEnter(E))}L.onPointerMove==null||L.onPointerMove(E)}else{const N=L[l];N?(!x||m.initialHits.includes(C))&&(o(u,m.interaction.filter(I=>!m.initialHits.includes(I))),N(E)):x&&m.initialHits.includes(C)&&o(u,m.interaction.filter(I=>!m.initialHits.includes(I)))}}r(w,u,v,S)}}return{handlePointer:a}}const U4=n=>!!(n!=null&&n.render),F4=B.createContext(null),yZ=(n,e)=>{const t=E4((a,l)=>{const c=new K,u=new K,f=new K;function m(v=l().camera,S=u,E=l().size){const{width:C,height:V,top:L,left:N}=E,I=C/V;S instanceof K?f.copy(S):f.set(...S);const A=v.getWorldPosition(c).distanceTo(f);if(P4(v))return{width:C/v.zoom,height:V/v.zoom,top:L,left:N,factor:1,distance:A,aspect:I};{const M=v.fov*Math.PI/180,D=2*Math.tan(M/2)*A,z=D*(C/V);return{width:z,height:D,top:L,left:N,factor:C/z,distance:A,aspect:I}}}let g;const x=v=>a(S=>({performance:{...S.performance,current:v}})),b=new De;return{set:a,get:l,gl:null,camera:null,raycaster:null,events:{priority:1,enabled:!0,connected:!1},xr:null,scene:null,invalidate:(v=1)=>n(l(),v),advance:(v,S)=>e(v,S,l()),legacy:!1,linear:!1,flat:!1,controls:null,clock:new nM,pointer:b,mouse:b,frameloop:"always",onPointerMissed:void 0,performance:{current:1,min:.5,max:1,debounce:200,regress:()=>{const v=l();g&&clearTimeout(g),v.performance.current!==v.performance.min&&x(v.performance.min),g=setTimeout(()=>x(l().performance.max),v.performance.debounce)}},size:{width:0,height:0,top:0,left:0,updateStyle:!1},viewport:{initialDpr:0,dpr:0,width:0,height:0,top:0,left:0,aspect:0,distance:0,factor:0,getCurrentViewport:m},setEvents:v=>a(S=>({...S,events:{...S.events,...v}})),setSize:(v,S,E,C,V)=>{const L=l().camera,N={width:v,height:S,top:C||0,left:V||0,updateStyle:E};a(I=>({size:N,viewport:{...I.viewport,...m(L,u,N)}}))},setDpr:v=>a(S=>{const E=D4(v);return{viewport:{...S.viewport,dpr:E,initialDpr:S.viewport.initialDpr||E}}}),setFrameloop:(v="always")=>{const S=l().clock;S.stop(),S.elapsedTime=0,v!=="never"&&(S.start(),S.elapsedTime=0),a(()=>({frameloop:v}))},previousRoot:void 0,internal:{active:!1,priority:0,frames:0,lastEvent:B.createRef(),interaction:[],hovered:new Map,subscribers:[],initialClick:[0,0],initialHits:[],capturedMap:new Map,subscribe:(v,S,E)=>{const C=l().internal;return C.priority=C.priority+(S>0?1:0),C.subscribers.push({ref:v,priority:S,store:E}),C.subscribers=C.subscribers.sort((V,L)=>V.priority-L.priority),()=>{const V=l().internal;V!=null&&V.subscribers&&(V.priority=V.priority-(S>0?1:0),V.subscribers=V.subscribers.filter(L=>L.ref!==v))}}}}}),i=t.getState();let r=i.size,s=i.viewport.dpr,o=i.camera;return t.subscribe(()=>{const{camera:a,size:l,viewport:c,gl:u,set:f}=t.getState();if(l.width!==r.width||l.height!==r.height||c.dpr!==s){var m;r=l,s=c.dpr,fZ(a,l),u.setPixelRatio(c.dpr);const g=(m=l.updateStyle)!=null?m:typeof HTMLCanvasElement<"u"&&u.domElement instanceof HTMLCanvasElement;u.setSize(l.width,l.height,g)}a!==o&&(o=a,f(g=>({viewport:{...g.viewport,...g.viewport.getCurrentViewport(a)}})))}),t.subscribe(a=>n(a)),t};let o0,vZ=new Set,xZ=new Set,_Z=new Set;function NT(n,e){if(n.size)for(const{callback:t}of n.values())t(e)}function Dp(n,e){switch(n){case"before":return NT(vZ,e);case"after":return NT(xZ,e);case"tail":return NT(_Z,e)}}let LT,DT;function kT(n,e,t){let i=e.clock.getDelta();for(e.frameloop==="never"&&typeof n=="number"&&(i=n-e.clock.elapsedTime,e.clock.oldTime=e.clock.elapsedTime,e.clock.elapsedTime=n),LT=e.internal.subscribers,o0=0;o0<LT.length;o0++)DT=LT[o0],DT.ref.current(DT.store.getState(),i,t);return!e.internal.priority&&e.gl.render&&e.gl.render(e.scene,e.camera),e.internal.frames=Math.max(0,e.internal.frames-1),e.frameloop==="always"?1:e.internal.frames}function wZ(n){let e=!1,t=!1,i,r,s;function o(c){r=requestAnimationFrame(o),e=!0,i=0,Dp("before",c),t=!0;for(const f of n.values()){var u;s=f.store.getState(),s.internal.active&&(s.frameloop==="always"||s.internal.frames>0)&&!((u=s.gl.xr)!=null&&u.isPresenting)&&(i+=kT(c,s))}if(t=!1,Dp("after",c),i===0)return Dp("tail",c),e=!1,cancelAnimationFrame(r)}function a(c,u=1){var f;if(!c)return n.forEach(m=>a(m.store.getState(),u));(f=c.gl.xr)!=null&&f.isPresenting||!c.internal.active||c.frameloop==="never"||(u>1?c.internal.frames=Math.min(60,c.internal.frames+u):t?c.internal.frames=2:c.internal.frames=1,e||(e=!0,requestAnimationFrame(o)))}function l(c,u=!0,f,m){if(u&&Dp("before",c),f)kT(c,f,m);else for(const g of n.values())kT(c,g.store.getState());u&&Dp("after",c)}return{loop:o,invalidate:a,advance:l}}function j4(){const n=B.useContext(F4);if(!n)throw new Error("R3F: Hooks can only be used within the Canvas component!");return n}function O0(n=t=>t,e){return j4()(n,e)}function Uw(n,e=0){const t=j4(),i=t.getState().internal.subscribe,r=R4(n);return Xg(()=>i(r,e,t),[e,i,t]),null}const cf=new Map,{invalidate:$L,advance:XL}=wZ(cf),{reconciler:u_,applyProps:id}=aZ(cf,pZ),rd={objects:"shallow",strict:!1},bZ=(n,e)=>{const t=typeof n=="function"?n(e):n;return U4(t)?t:new Pj({powerPreference:"high-performance",canvas:e,antialias:!0,alpha:!0,...n})};function SZ(n,e){const t=typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement;if(e){const{width:i,height:r,top:s,left:o,updateStyle:a=t}=e;return{width:i,height:r,top:s,left:o,updateStyle:a}}else if(typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement&&n.parentElement){const{width:i,height:r,top:s,left:o}=n.parentElement.getBoundingClientRect();return{width:i,height:r,top:s,left:o,updateStyle:t}}else if(typeof OffscreenCanvas<"u"&&n instanceof OffscreenCanvas)return{width:n.width,height:n.height,top:0,left:0,updateStyle:t};return{width:0,height:0,top:0,left:0}}function TZ(n){const e=cf.get(n),t=e?.fiber,i=e?.store;e&&console.warn("R3F.createRoot should only be called once!");const r=typeof reportError=="function"?reportError:console.error,s=i||yZ($L,XL),o=t||u_.createContainer(s,Rd.ConcurrentRoot,null,!1,null,"",r,null);e||cf.set(n,{fiber:o,store:s});let a,l=!1,c;return{configure(u={}){let{gl:f,size:m,scene:g,events:x,onCreated:b,shadows:w=!1,linear:v=!1,flat:S=!1,legacy:E=!1,orthographic:C=!1,frameloop:V="always",dpr:L=[1,2],performance:N,raycaster:I,camera:A,onPointerMissed:M}=u,D=s.getState(),z=D.gl;D.gl||D.set({gl:z=bZ(f,n)});let j=D.raycaster;j||D.set({raycaster:j=new b4});const{params:te,...he}=I||{};if(Qn.equ(he,j,rd)||id(j,{...he}),Qn.equ(te,j.params,rd)||id(j,{params:{...j.params,...te}}),!D.camera||D.camera===c&&!Qn.equ(c,A,rd)){c=A;const Y=A instanceof Vg,ne=Y?A:C?new ch(0,0,0,0,.1,1e3):new Oi(75,0,.1,1e3);Y||(ne.position.z=5,A&&(id(ne,A),("aspect"in A||"left"in A||"right"in A||"bottom"in A||"top"in A)&&(ne.manual=!0,ne.updateProjectionMatrix())),!D.camera&&!(A!=null&&A.rotation)&&ne.lookAt(0,0,0)),D.set({camera:ne}),j.camera=ne}if(!D.scene){let Y;g instanceof o_?Y=g:(Y=new o_,g&&id(Y,g)),D.set({scene:sd(Y)})}if(!D.xr){var de;const Y=(Ce,ce)=>{const Ee=s.getState();Ee.frameloop!=="never"&&XL(Ce,!0,Ee,ce)},ne=()=>{const Ce=s.getState();Ce.gl.xr.enabled=Ce.gl.xr.isPresenting,Ce.gl.xr.setAnimationLoop(Ce.gl.xr.isPresenting?Y:null),Ce.gl.xr.isPresenting||$L(Ce)},fe={connect(){const Ce=s.getState().gl;Ce.xr.addEventListener("sessionstart",ne),Ce.xr.addEventListener("sessionend",ne)},disconnect(){const Ce=s.getState().gl;Ce.xr.removeEventListener("sessionstart",ne),Ce.xr.removeEventListener("sessionend",ne)}};typeof((de=z.xr)==null?void 0:de.addEventListener)=="function"&&fe.connect(),D.set({xr:fe})}if(z.shadowMap){const Y=z.shadowMap.enabled,ne=z.shadowMap.type;if(z.shadowMap.enabled=!!w,Qn.boo(w))z.shadowMap.type=um;else if(Qn.str(w)){var U;const fe={basic:IF,percentage:sw,soft:um,variance:vo};z.shadowMap.type=(U=fe[w])!=null?U:um}else Qn.obj(w)&&Object.assign(z.shadowMap,w);(Y!==z.shadowMap.enabled||ne!==z.shadowMap.type)&&(z.shadowMap.needsUpdate=!0)}const F=I4();F&&("enabled"in F?F.enabled=!E:"legacyMode"in F&&(F.legacyMode=E)),l||id(z,{outputEncoding:v?3e3:3001,toneMapping:S?Jo:vA}),D.legacy!==E&&D.set(()=>({legacy:E})),D.linear!==v&&D.set(()=>({linear:v})),D.flat!==S&&D.set(()=>({flat:S})),f&&!Qn.fun(f)&&!U4(f)&&!Qn.equ(f,z,rd)&&id(z,f),x&&!D.events.handlers&&D.set({events:x(s)});const X=SZ(n,m);return Qn.equ(X,D.size,rd)||D.setSize(X.width,X.height,X.updateStyle,X.top,X.left),L&&D.viewport.dpr!==D4(L)&&D.setDpr(L),D.frameloop!==V&&D.setFrameloop(V),D.onPointerMissed||D.set({onPointerMissed:M}),N&&!Qn.equ(N,D.performance,rd)&&D.set(Y=>({performance:{...Y.performance,...N}})),a=b,l=!0,this},render(u){return l||this.configure(),u_.updateContainer(d.jsx(EZ,{store:s,children:u,onCreated:a,rootElement:n}),o,null,()=>{}),s},unmount(){V4(n)}}}function EZ({store:n,children:e,onCreated:t,rootElement:i}){return Xg(()=>{const r=n.getState();r.set(s=>({internal:{...s.internal,active:!0}})),t&&t(r),n.getState().events.connected||r.events.connect==null||r.events.connect(i)},[]),d.jsx(F4.Provider,{value:n,children:e})}function V4(n,e){const t=cf.get(n),i=t?.fiber;if(i){const r=t?.store.getState();r&&(r.internal.active=!1),u_.updateContainer(null,i,null,()=>{r&&setTimeout(()=>{try{var s,o,a,l;r.events.disconnect==null||r.events.disconnect(),(s=r.gl)==null||(o=s.renderLists)==null||o.dispose==null||o.dispose(),(a=r.gl)==null||a.forceContextLoss==null||a.forceContextLoss(),(l=r.gl)!=null&&l.xr&&r.xr.disconnect(),hZ(r),cf.delete(n)}catch{}},500)})}}u_.injectIntoDevTools({bundleType:0,rendererPackageName:"@react-three/fiber",version:B.version});const OT={onClick:["click",!1],onContextMenu:["contextmenu",!1],onDoubleClick:["dblclick",!1],onWheel:["wheel",!0],onPointerDown:["pointerdown",!0],onPointerUp:["pointerup",!0],onPointerLeave:["pointerleave",!0],onPointerMove:["pointermove",!0],onPointerCancel:["pointercancel",!0],onLostPointerCapture:["lostpointercapture",!0]};function CZ(n){const{handlePointer:e}=gZ(n);return{priority:1,enabled:!0,compute(t,i,r){i.pointer.set(t.offsetX/i.size.width*2-1,-(t.offsetY/i.size.height)*2+1),i.raycaster.setFromCamera(i.pointer,i.camera)},connected:void 0,handlers:Object.keys(OT).reduce((t,i)=>({...t,[i]:e(i)}),{}),update:()=>{var t;const{events:i,internal:r}=n.getState();(t=r.lastEvent)!=null&&t.current&&i.handlers&&i.handlers.onPointerMove(r.lastEvent.current)},connect:t=>{var i;const{set:r,events:s}=n.getState();s.disconnect==null||s.disconnect(),r(o=>({events:{...o.events,connected:t}})),Object.entries((i=s.handlers)!=null?i:[]).forEach(([o,a])=>{const[l,c]=OT[o];t.addEventListener(l,a,{passive:c})})},disconnect:()=>{const{set:t,events:i}=n.getState();if(i.connected){var r;Object.entries((r=i.handlers)!=null?r:[]).forEach(([s,o])=>{if(i&&i.connected instanceof HTMLElement){const[a]=OT[s];i.connected.removeEventListener(a,o)}}),t(s=>({events:{...s.events,connected:void 0}}))}}}}function bE(n,e,t){var i,r,s,o,a;e==null&&(e=100);function l(){var u=Date.now()-o;u<e&&u>=0?i=setTimeout(l,e-u):(i=null,t||(a=n.apply(s,r),s=r=null))}var c=function(){s=this,r=arguments,o=Date.now();var u=t&&!i;return i||(i=setTimeout(l,e)),u&&(a=n.apply(s,r),s=r=null),a};return c.clear=function(){i&&(clearTimeout(i),i=null)},c.flush=function(){i&&(a=n.apply(s,r),s=r=null,clearTimeout(i),i=null)},c}bE.debounce=bE;var AZ=bE;const YL=Mg(AZ);var MZ=Object.defineProperty,IZ=Object.defineProperties,PZ=Object.getOwnPropertyDescriptors,KL=Object.getOwnPropertySymbols,RZ=Object.prototype.hasOwnProperty,NZ=Object.prototype.propertyIsEnumerable,JL=(n,e,t)=>e in n?MZ(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,QL=(n,e)=>{for(var t in e||(e={}))RZ.call(e,t)&&JL(n,t,e[t]);if(KL)for(var t of KL(e))NZ.call(e,t)&&JL(n,t,e[t]);return n},LZ=(n,e)=>IZ(n,PZ(e)),ZL,eD;typeof window<"u"&&((ZL=window.document)!=null&&ZL.createElement||((eD=window.navigator)==null?void 0:eD.product)==="ReactNative")?B.useLayoutEffect:B.useEffect;function B4(n,e,t){if(!n)return;if(t(n)===!0)return n;let i=n.child;for(;i;){const r=B4(i,e,t);if(r)return r;i=i.sibling}}function z4(n){try{return Object.defineProperties(n,{_currentRenderer:{get(){return null},set(){}},_currentRenderer2:{get(){return null},set(){}}})}catch{return n}}const tD=console.error;console.error=function(){const n=[...arguments].join("");if(n?.startsWith("Warning:")&&n.includes("useContext")){console.error=tD;return}return tD.apply(this,arguments)};const lM=z4(B.createContext(null));class H4 extends B.Component{render(){return B.createElement(lM.Provider,{value:this._reactInternals},this.props.children)}}function DZ(){const n=B.useContext(lM);if(n===null)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");const e=B.useId();return B.useMemo(()=>{for(const i of[n,n?.alternate]){if(!i)continue;const r=B4(i,!1,s=>{let o=s.memoizedState;for(;o;){if(o.memoizedState===e)return!0;o=o.next}});if(r)return r}},[n,e])}function kZ(){const n=DZ(),[e]=B.useState(()=>new Map);e.clear();let t=n;for(;t;){if(t.type&&typeof t.type=="object"){const r=t.type._context===void 0&&t.type.Provider===t.type?t.type:t.type._context;r&&r!==lM&&!e.has(r)&&e.set(r,B.useContext(z4(r)))}t=t.return}return e}function OZ(){const n=kZ();return B.useMemo(()=>Array.from(n.keys()).reduce((e,t)=>i=>B.createElement(e,null,B.createElement(t.Provider,LZ(QL({},i),{value:n.get(t)}))),e=>B.createElement(H4,QL({},e))),[n])}function UZ({debounce:n,scroll:e,polyfill:t,offsetSize:i}={debounce:0,scroll:!1,offsetSize:!1}){const r=t||typeof window<"u"&&window.ResizeObserver,[s,o]=B.useState({left:0,top:0,width:0,height:0,bottom:0,right:0,x:0,y:0});if(!r)return s.width=1280,s.height=800,[()=>{},s,()=>{}];const a=B.useRef({element:null,scrollContainers:null,resizeObserver:null,lastBounds:s,orientationHandler:null}),l=n?typeof n=="number"?n:n.scroll:null,c=n?typeof n=="number"?n:n.resize:null,u=B.useRef(!1);B.useEffect(()=>(u.current=!0,()=>void(u.current=!1)));const[f,m,g]=B.useMemo(()=>{const v=()=>{if(!a.current.element)return;const{left:S,top:E,width:C,height:V,bottom:L,right:N,x:I,y:A}=a.current.element.getBoundingClientRect(),M={left:S,top:E,width:C,height:V,bottom:L,right:N,x:I,y:A};a.current.element instanceof HTMLElement&&i&&(M.height=a.current.element.offsetHeight,M.width=a.current.element.offsetWidth),Object.freeze(M),u.current&&!BZ(a.current.lastBounds,M)&&o(a.current.lastBounds=M)};return[v,c?YL(v,c):v,l?YL(v,l):v]},[o,i,l,c]);function x(){a.current.scrollContainers&&(a.current.scrollContainers.forEach(v=>v.removeEventListener("scroll",g,!0)),a.current.scrollContainers=null),a.current.resizeObserver&&(a.current.resizeObserver.disconnect(),a.current.resizeObserver=null),a.current.orientationHandler&&("orientation"in screen&&"removeEventListener"in screen.orientation?screen.orientation.removeEventListener("change",a.current.orientationHandler):"onorientationchange"in window&&window.removeEventListener("orientationchange",a.current.orientationHandler))}function b(){var v;a.current.element&&(a.current.resizeObserver=new r(m),(v=a.current.resizeObserver)==null||v.observe(a.current.element),e&&a.current.scrollContainers&&a.current.scrollContainers.forEach(S=>S.addEventListener("scroll",g,{capture:!0,passive:!0})),a.current.orientationHandler=()=>{g()},"orientation"in screen&&"addEventListener"in screen.orientation?screen.orientation.addEventListener("change",a.current.orientationHandler):"onorientationchange"in window&&window.addEventListener("orientationchange",a.current.orientationHandler))}const w=v=>{!v||v===a.current.element||(x(),a.current.element=v,a.current.scrollContainers=G4(v),b())};return jZ(g,!!e),FZ(m),B.useEffect(()=>{x(),b()},[e,g,m]),B.useEffect(()=>x,[]),[w,s,f]}function FZ(n){B.useEffect(()=>{const e=n;return window.addEventListener("resize",e),()=>void window.removeEventListener("resize",e)},[n])}function jZ(n,e){B.useEffect(()=>{if(e){const t=n;return window.addEventListener("scroll",t,{capture:!0,passive:!0}),()=>void window.removeEventListener("scroll",t,!0)}},[n,e])}function G4(n){const e=[];if(!n||n===document.body)return e;const{overflow:t,overflowX:i,overflowY:r}=window.getComputedStyle(n);return[t,i,r].some(s=>s==="auto"||s==="scroll")&&e.push(n),[...e,...G4(n.parentElement)]}const VZ=["x","y","top","bottom","left","right","width","height"],BZ=(n,e)=>VZ.every(t=>n[t]===e[t]),zZ=B.forwardRef(function({children:e,fallback:t,resize:i,style:r,gl:s,events:o=CZ,eventSource:a,eventPrefix:l,shadows:c,linear:u,flat:f,legacy:m,orthographic:g,frameloop:x,dpr:b,performance:w,raycaster:v,camera:S,scene:E,onPointerMissed:C,onCreated:V,...L},N){B.useMemo(()=>oZ(QQ),[]);const I=OZ(),[A,M]=UZ({scroll:!0,debounce:{scroll:50,resize:0},...i}),D=B.useRef(null),z=B.useRef(null);B.useImperativeHandle(N,()=>D.current);const j=R4(C),[te,he]=B.useState(!1),[de,U]=B.useState(!1);if(te)throw te;if(de)throw de;const F=B.useRef(null);Xg(()=>{const Y=D.current;M.width>0&&M.height>0&&Y&&(F.current||(F.current=TZ(Y)),F.current.configure({gl:s,events:o,shadows:c,linear:u,flat:f,legacy:m,orthographic:g,frameloop:x,dpr:b,performance:w,raycaster:v,camera:S,scene:E,size:M,onPointerMissed:(...ne)=>j.current==null?void 0:j.current(...ne),onCreated:ne=>{ne.events.connect==null||ne.events.connect(a?lZ(a)?a.current:a:z.current),l&&ne.setEvents({compute:(fe,Ce)=>{const ce=fe[l+"X"],Ee=fe[l+"Y"];Ce.pointer.set(ce/Ce.size.width*2-1,-(Ee/Ce.size.height)*2+1),Ce.raycaster.setFromCamera(Ce.pointer,Ce.camera)}}),V?.(ne)}}),F.current.render(d.jsx(I,{children:d.jsx(N4,{set:U,children:d.jsx(B.Suspense,{fallback:d.jsx(cZ,{set:he}),children:e})})})))}),B.useEffect(()=>{const Y=D.current;if(Y)return()=>V4(Y)},[]);const X=a?"none":"auto";return d.jsx("div",{ref:z,style:{position:"relative",width:"100%",height:"100%",overflow:"hidden",pointerEvents:X,...r},...L,children:d.jsx("div",{ref:A,style:{width:"100%",height:"100%"},children:d.jsx("canvas",{ref:D,style:{display:"block"},children:t})})})}),W4=B.forwardRef(function(e,t){return d.jsx(H4,{children:d.jsx(zZ,{...e,ref:t})})});function lc(){return lc=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)({}).hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},lc.apply(null,arguments)}const Yg=new K,cM=new K,HZ=new K,nD=new De;function GZ(n,e,t){const i=Yg.setFromMatrixPosition(n.matrixWorld);i.project(e);const r=t.width/2,s=t.height/2;return[i.x*r+r,-(i.y*s)+s]}function WZ(n,e){const t=Yg.setFromMatrixPosition(n.matrixWorld),i=cM.setFromMatrixPosition(e.matrixWorld),r=t.sub(i),s=e.getWorldDirection(HZ);return r.angleTo(s)>Math.PI/2}function qZ(n,e,t,i){const r=Yg.setFromMatrixPosition(n.matrixWorld),s=r.clone();s.project(e),nD.set(s.x,s.y),t.setFromCamera(nD,e);const o=t.intersectObjects(i,!0);if(o.length){const a=o[0].distance;return r.distanceTo(t.ray.origin)<a}return!0}function $Z(n,e){if(e instanceof ch)return e.zoom;if(e instanceof Oi){const t=Yg.setFromMatrixPosition(n.matrixWorld),i=cM.setFromMatrixPosition(e.matrixWorld),r=e.fov*Math.PI/180,s=t.distanceTo(i);return 1/(2*Math.tan(r/2)*s)}else return 1}function XZ(n,e,t){if(e instanceof Oi||e instanceof ch){const i=Yg.setFromMatrixPosition(n.matrixWorld),r=cM.setFromMatrixPosition(e.matrixWorld),s=i.distanceTo(r),o=(t[1]-t[0])/(e.far-e.near),a=t[1]-o*e.far;return Math.round(o*s+a)}}const SE=n=>Math.abs(n)<1e-10?0:n;function q4(n,e,t=""){let i="matrix3d(";for(let r=0;r!==16;r++)i+=SE(e[r]*n.elements[r])+(r!==15?",":")");return t+i}const YZ=(n=>e=>q4(e,n))([1,-1,1,1,1,-1,1,1,1,-1,1,1,1,-1,1,1]),KZ=(n=>(e,t)=>q4(e,n(t),"translate(-50%,-50%)"))(n=>[1/n,1/n,1/n,1,-1/n,-1/n,-1/n,-1,1/n,1/n,1/n,1,1,1,1,1]);function JZ(n){return n&&typeof n=="object"&&"current"in n}const QZ=B.forwardRef(({children:n,eps:e=.001,style:t,className:i,prepend:r,center:s,fullscreen:o,portal:a,distanceFactor:l,sprite:c=!1,transform:u=!1,occlude:f,onOcclude:m,castShadow:g,receiveShadow:x,material:b,geometry:w,zIndexRange:v=[16777271,0],calculatePosition:S=GZ,as:E="div",wrapperClass:C,pointerEvents:V="auto",...L},N)=>{const{gl:I,camera:A,scene:M,size:D,raycaster:z,events:j,viewport:te}=O0(),[he]=B.useState(()=>document.createElement(E)),de=B.useRef(),U=B.useRef(null),F=B.useRef(0),X=B.useRef([0,0]),Y=B.useRef(null),ne=B.useRef(null),fe=a?.current||j.connected||I.domElement.parentNode,Ce=B.useRef(null),ce=B.useRef(!1),Ee=B.useMemo(()=>f&&f!=="blending"||Array.isArray(f)&&f.length&&JZ(f[0]),[f]);B.useLayoutEffect(()=>{const lt=I.domElement;f&&f==="blending"?(lt.style.zIndex=`${Math.floor(v[0]/2)}`,lt.style.position="absolute",lt.style.pointerEvents="none"):(lt.style.zIndex=null,lt.style.position=null,lt.style.pointerEvents=null)},[f]),B.useLayoutEffect(()=>{if(U.current){const lt=de.current=uA(he);if(M.updateMatrixWorld(),u)he.style.cssText="position:absolute;top:0;left:0;pointer-events:none;overflow:hidden;";else{const ze=S(U.current,A,D);he.style.cssText=`position:absolute;top:0;left:0;transform:translate3d(${ze[0]}px,${ze[1]}px,0);transform-origin:0 0;`}return fe&&(r?fe.prepend(he):fe.appendChild(he)),()=>{fe&&fe.removeChild(he),lt.unmount()}}},[fe,u]),B.useLayoutEffect(()=>{C&&(he.className=C)},[C]);const Oe=B.useMemo(()=>u?{position:"absolute",top:0,left:0,width:D.width,height:D.height,transformStyle:"preserve-3d",pointerEvents:"none"}:{position:"absolute",transform:s?"translate3d(-50%,-50%,0)":"none",...o&&{top:-D.height/2,left:-D.width/2,width:D.width,height:D.height},...t},[t,s,o,D,u]),Pe=B.useMemo(()=>({position:"absolute",pointerEvents:V}),[V]);B.useLayoutEffect(()=>{if(ce.current=!1,u){var lt;(lt=de.current)==null||lt.render(B.createElement("div",{ref:Y,style:Oe},B.createElement("div",{ref:ne,style:Pe},B.createElement("div",{ref:N,className:i,style:t,children:n}))))}else{var ze;(ze=de.current)==null||ze.render(B.createElement("div",{ref:N,style:Oe,className:i,children:n}))}});const xt=B.useRef(!0);Uw(lt=>{if(U.current){A.updateMatrixWorld(),U.current.updateWorldMatrix(!0,!1);const ze=u?X.current:S(U.current,A,D);if(u||Math.abs(F.current-A.zoom)>e||Math.abs(X.current[0]-ze[0])>e||Math.abs(X.current[1]-ze[1])>e){const Te=WZ(U.current,A);let Me=!1;Ee&&(Array.isArray(f)?Me=f.map(Ze=>Ze.current):f!=="blending"&&(Me=[M]));const Q=xt.current;if(Me){const Ze=qZ(U.current,A,z,Me);xt.current=Ze&&!Te}else xt.current=!Te;Q!==xt.current&&(m?m(!xt.current):he.style.display=xt.current?"block":"none");const nt=Math.floor(v[0]/2),ke=f?Ee?[v[0],nt]:[nt-1,0]:v;if(he.style.zIndex=`${XZ(U.current,A,ke)}`,u){const[Ze,We]=[D.width/2,D.height/2],Mt=A.projectionMatrix.elements[5]*We,{isOrthographicCamera:Ye,top:$,left:G,bottom:ue,right:be}=A,Re=YZ(A.matrixWorldInverse),xe=Ye?`scale(${Mt})translate(${SE(-(be+G)/2)}px,${SE(($+ue)/2)}px)`:`translateZ(${Mt}px)`;let Ve=U.current.matrixWorld;c&&(Ve=A.matrixWorldInverse.clone().transpose().copyPosition(Ve).scale(U.current.scale),Ve.elements[3]=Ve.elements[7]=Ve.elements[11]=0,Ve.elements[15]=1),he.style.width=D.width+"px",he.style.height=D.height+"px",he.style.perspective=Ye?"":`${Mt}px`,Y.current&&ne.current&&(Y.current.style.transform=`${xe}${Re}translate(${Ze}px,${We}px)`,ne.current.style.transform=KZ(Ve,1/((l||10)/400)))}else{const Ze=l===void 0?1:$Z(U.current,A)*l;he.style.transform=`translate3d(${ze[0]}px,${ze[1]}px,0) scale(${Ze})`}X.current=ze,F.current=A.zoom}}if(!Ee&&Ce.current&&!ce.current)if(u){if(Y.current){const ze=Y.current.children[0];if(ze!=null&&ze.clientWidth&&ze!=null&&ze.clientHeight){const{isOrthographicCamera:Te}=A;if(Te||w)L.scale&&(Array.isArray(L.scale)?L.scale instanceof K?Ce.current.scale.copy(L.scale.clone().divideScalar(1)):Ce.current.scale.set(1/L.scale[0],1/L.scale[1],1/L.scale[2]):Ce.current.scale.setScalar(1/L.scale));else{const Me=(l||10)/400,Q=ze.clientWidth*Me,nt=ze.clientHeight*Me;Ce.current.scale.set(Q,nt,1)}ce.current=!0}}}else{const ze=he.children[0];if(ze!=null&&ze.clientWidth&&ze!=null&&ze.clientHeight){const Te=1/te.factor,Me=ze.clientWidth*Te,Q=ze.clientHeight*Te;Ce.current.scale.set(Me,Q,1),ce.current=!0}Ce.current.lookAt(lt.camera.position)}});const Dt=B.useMemo(()=>({vertexShader:u?void 0:`
          /*
            This shader is from the THREE's SpriteMaterial.
            We need to turn the backing plane into a Sprite
            (make it always face the camera) if "transfrom"
            is false.
          */
          #include <common>

          void main() {
            vec2 center = vec2(0., 1.);
            float rotation = 0.0;

            // This is somewhat arbitrary, but it seems to work well
            // Need to figure out how to derive this dynamically if it even matters
            float size = 0.03;

            vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
            vec2 scale;
            scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
            scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );

            bool isPerspective = isPerspectiveMatrix( projectionMatrix );
            if ( isPerspective ) scale *= - mvPosition.z;

            vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale * size;
            vec2 rotatedPosition;
            rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
            rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
            mvPosition.xy += rotatedPosition;

            gl_Position = projectionMatrix * mvPosition;
          }
      `,fragmentShader:`
        void main() {
          gl_FragColor = vec4(0.0, 0.0, 0.0, 0.0);
        }
      `}),[u]);return B.createElement("group",lc({},L,{ref:U}),f&&!Ee&&B.createElement("mesh",{castShadow:g,receiveShadow:x,ref:Ce},w||B.createElement("planeGeometry",null),b||B.createElement("shaderMaterial",{side:So,vertexShader:Dt.vertexShader,fragmentShader:Dt.fragmentShader})))});let kp=0;const ZZ=E4(n=>(Pd.onStart=(e,t,i)=>{n({active:!0,item:e,loaded:t,total:i,progress:(t-kp)/(i-kp)*100})},Pd.onLoad=()=>{n({active:!1})},Pd.onError=e=>n(t=>({errors:[...t.errors,e]})),Pd.onProgress=(e,t,i)=>{t===i&&(kp=i),n({active:!0,item:e,loaded:t,total:i,progress:(t-kp)/(i-kp)*100||100})},{errors:[],active:!1,progress:0,item:"",loaded:0,total:0}));function Wd(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function iD(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),t.push.apply(t,i)}return t}function rD(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?iD(Object(t),!0).forEach(function(i){Wd(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):iD(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}new De;new De;function $4(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}var Js=function n(e,t,i){var r=this;$4(this,n),Wd(this,"dot2",function(s,o){return r.x*s+r.y*o}),Wd(this,"dot3",function(s,o,a){return r.x*s+r.y*o+r.z*a}),this.x=e,this.y=t,this.z=i},eee=[new Js(1,1,0),new Js(-1,1,0),new Js(1,-1,0),new Js(-1,-1,0),new Js(1,0,1),new Js(-1,0,1),new Js(1,0,-1),new Js(-1,0,-1),new Js(0,1,1),new Js(0,-1,1),new Js(0,1,-1),new Js(0,-1,-1)],sD=[151,160,137,91,90,15,131,13,201,95,96,53,194,233,7,225,140,36,103,30,69,142,8,99,37,240,21,10,23,190,6,148,247,120,234,75,0,26,197,62,94,252,219,203,117,35,11,32,57,177,33,88,237,149,56,87,174,20,125,136,171,168,68,175,74,165,71,134,139,48,27,166,77,146,158,231,83,111,229,122,60,211,133,230,220,105,92,41,55,46,245,40,244,102,143,54,65,25,63,161,1,216,80,73,209,76,132,187,208,89,18,169,200,196,135,130,116,188,159,86,164,100,109,198,173,186,3,64,52,217,226,250,124,123,5,202,38,147,118,126,255,82,85,212,207,206,59,227,47,16,58,17,182,189,28,42,223,183,170,213,119,248,152,2,44,154,163,70,221,153,101,155,167,43,172,9,129,22,39,253,19,98,108,110,79,113,224,232,178,185,112,104,218,246,97,228,251,34,242,193,238,210,144,12,191,179,162,241,81,51,145,235,249,14,239,107,49,192,214,31,181,199,106,157,184,84,204,176,115,121,50,45,127,4,150,254,138,236,205,93,222,114,67,29,24,72,243,141,128,195,78,66,215,61,156,180],oD=new Array(512),aD=new Array(512),tee=function(e){e>0&&e<1&&(e*=65536),e=Math.floor(e),e<256&&(e|=e<<8);for(var t=0;t<256;t++){var i;t&1?i=sD[t]^e&255:i=sD[t]^e>>8&255,oD[t]=oD[t+256]=i,aD[t]=aD[t+256]=eee[i%12]}};tee(0);function nee(n){if(typeof n=="number")n=Math.abs(n);else if(typeof n=="string"){var e=n;n=0;for(var t=0;t<e.length;t++)n=(n+(t+1)*(e.charCodeAt(t)%96))%2147483647}return n===0&&(n=311),n}function lD(n){var e=nee(n);return function(){var t=e*48271%2147483647;return e=t,t/2147483647}}var iee=function n(e){var t=this;$4(this,n),Wd(this,"seed",0),Wd(this,"init",function(i){t.seed=i,t.value=lD(i)}),Wd(this,"value",lD(this.seed)),this.init(e)},ree=new iee(Math.random()),see={radius:1,center:[0,0,0]};function oee(n,e){for(var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:ree,i=rD(rD({},see),e),r=i.radius,s=i.center,o=0;o<n.length;o+=3){var a=Math.pow(t.value(),.3333333333333333),l=t.value()*2-1,c=t.value()*2-1,u=t.value()*2-1,f=Math.sqrt(l*l+c*c+u*u);l=a*l/f,c=a*c/f,u=a*u/f,n[o]=l*r+s[0],n[o+1]=c*r+s[1],n[o+2]=u*r+s[2]}return n}const aee=()=>parseInt(Og.replace(/\D+/g,"")),X4=aee();var Y4={exports:{}},lee="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",cee=lee,uee=cee;function K4(){}function J4(){}J4.resetWarningCache=K4;var hee=function(){function n(i,r,s,o,a,l){if(l!==uee){var c=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw c.name="Invariant Violation",c}}n.isRequired=n;function e(){return n}var t={array:n,bigint:n,bool:n,func:n,number:n,object:n,string:n,symbol:n,any:n,arrayOf:e,element:n,elementType:n,instanceOf:e,node:n,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:J4,resetWarningCache:K4};return t.PropTypes=t,t};Y4.exports=hee();var uM=Y4.exports;const ut=Mg(uM),UT=X4>=154?"opaque_fragment":"output_fragment";class dee extends _w{constructor(e){super(e),this.onBeforeCompile=(t,i)=>{const{isWebGL2:r}=i.capabilities;t.fragmentShader=t.fragmentShader.replace(`#include <${UT}>`,`
        ${r?`#include <${UT}>`:`#extension GL_OES_standard_derivatives : enable
#include <${UT}>`}
      vec2 cxy = 2.0 * gl_PointCoord - 1.0;
      float r = dot(cxy, cxy);
      float delta = fwidth(r);     
      float mask = 1.0 - smoothstep(1.0 - delta, 1.0 + delta, r);
      gl_FragColor = vec4(gl_FragColor.rgb, mask * gl_FragColor.a );
      #include <tonemapping_fragment>
      #include <${X4>=154?"colorspace_fragment":"encodings_fragment"}>
      `)}}}const fee=B.forwardRef((n,e)=>{const[t]=B.useState(()=>new dee(null));return B.createElement("primitive",lc({},n,{object:t,ref:e,attach:"material"}))});let cu,Op;const pee=B.createContext(null),cD=new Bt,uD=new K,mee=B.forwardRef(({children:n,range:e,limit:t=1e3,...i},r)=>{const s=B.useRef(null);B.useImperativeHandle(r,()=>s.current,[]);const[o,a]=B.useState([]),[[l,c,u]]=B.useState(()=>[new Float32Array(t*3),Float32Array.from({length:t*3},()=>1),Float32Array.from({length:t},()=>1)]);B.useEffect(()=>{s.current.geometry.attributes.position.needsUpdate=!0}),Uw(()=>{for(s.current.updateMatrix(),s.current.updateMatrixWorld(),cD.copy(s.current.matrixWorld).invert(),s.current.geometry.drawRange.count=Math.min(t,e!==void 0?e:t,o.length),cu=0;cu<o.length;cu++)Op=o[cu].current,Op.getWorldPosition(uD).applyMatrix4(cD),uD.toArray(l,cu*3),s.current.geometry.attributes.position.needsUpdate=!0,Op.matrixWorldNeedsUpdate=!0,Op.color.toArray(c,cu*3),s.current.geometry.attributes.color.needsUpdate=!0,u.set([Op.size],cu),s.current.geometry.attributes.size.needsUpdate=!0});const f=B.useMemo(()=>({getParent:()=>s,subscribe:m=>(a(g=>[...g,m]),()=>a(g=>g.filter(x=>x.current!==m.current)))}),[]);return B.createElement("points",lc({userData:{instances:o},matrixAutoUpdate:!1,ref:s,raycast:()=>null},i),B.createElement("bufferGeometry",null,B.createElement("bufferAttribute",{attach:"attributes-position",count:l.length/3,array:l,itemSize:3,usage:ku}),B.createElement("bufferAttribute",{attach:"attributes-color",count:c.length/3,array:c,itemSize:3,usage:ku}),B.createElement("bufferAttribute",{attach:"attributes-size",count:u.length,array:u,itemSize:1,usage:ku})),B.createElement(pee.Provider,{value:f},n))}),gee=B.forwardRef(({children:n,positions:e,colors:t,sizes:i,stride:r=3,...s},o)=>{const a=B.useRef(null);return B.useImperativeHandle(o,()=>a.current,[]),Uw(()=>{const l=a.current.geometry.attributes;l.position.needsUpdate=!0,t&&(l.color.needsUpdate=!0),i&&(l.size.needsUpdate=!0)}),B.createElement("points",lc({ref:a},s),B.createElement("bufferGeometry",null,B.createElement("bufferAttribute",{attach:"attributes-position",count:e.length/r,array:e,itemSize:r,usage:ku}),t&&B.createElement("bufferAttribute",{attach:"attributes-color",count:t.length/r,array:t,itemSize:3,usage:ku}),i&&B.createElement("bufferAttribute",{attach:"attributes-size",count:i.length/r,array:i,itemSize:1,usage:ku})),n)}),yee=B.forwardRef((n,e)=>n.positions instanceof Float32Array?B.createElement(gee,lc({},n,{ref:e})):B.createElement(mee,lc({},n,{ref:e})));function vee({all:n,scene:e,camera:t}){const i=O0(({gl:o})=>o),r=O0(({camera:o})=>o),s=O0(({scene:o})=>o);return B.useLayoutEffect(()=>{const o=[];n&&(e||s).traverse(c=>{c.visible===!1&&(o.push(c),c.visible=!0)}),i.compile(e||s,t||r);const a=new OA(128);new kA(.01,1e5,a).update(i,e||s),a.dispose(),o.forEach(c=>c.visible=!1)},[]),null}const xee=n=>{const e=B.useRef(),[t]=B.useState(()=>oee(new Float32Array(5e3),{radius:1.2}));return Uw((i,r)=>{e.current.rotation.x-=r/10,e.current.rotation.y-=r/15}),d.jsx("group",{rotation:[0,0,Math.PI/4],children:d.jsx(yee,{ref:e,positions:t,stride:3,frustumCulled:!0,...n,children:d.jsx(fee,{transparent:!0,color:"#f272c8",size:.004,sizeAtttenuation:!0,depthWrite:!1})})})},_ee=()=>d.jsx("div",{className:"w-full h-auto absolute inset-0 z-[-1]",children:d.jsxs(W4,{camera:{position:[0,0,1]},children:[d.jsx(B.Suspense,{fallback:null,children:d.jsx(xee,{})}),d.jsx(vee,{all:!0})]})});function wee(n){if(typeof Proxy>"u")return n;const e=new Map,t=(...i)=>n(...i);return new Proxy(t,{get:(i,r)=>r==="create"?n:(e.has(r)||e.set(r,n(r)),e.get(r))})}function Fw(n){return n!==null&&typeof n=="object"&&typeof n.start=="function"}const TE=n=>Array.isArray(n);function Q4(n,e){if(!Array.isArray(e))return!1;const t=e.length;if(t!==n.length)return!1;for(let i=0;i<t;i++)if(e[i]!==n[i])return!1;return!0}function fg(n){return typeof n=="string"||Array.isArray(n)}function hD(n){const e=[{},{}];return n?.values.forEach((t,i)=>{e[0][i]=t.get(),e[1][i]=t.getVelocity()}),e}function hM(n,e,t,i){if(typeof e=="function"){const[r,s]=hD(i);e=e(t!==void 0?t:n.custom,r,s)}if(typeof e=="string"&&(e=n.variants&&n.variants[e]),typeof e=="function"){const[r,s]=hD(i);e=e(t!==void 0?t:n.custom,r,s)}return e}function jw(n,e,t){const i=n.getProps();return hM(i,e,t!==void 0?t:i.custom,n)}const dM=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],fM=["initial",...dM],Kg=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],fh=new Set(Kg),Fa=n=>n*1e3,ja=n=>n/1e3,bee={type:"spring",stiffness:500,damping:25,restSpeed:10},See=n=>({type:"spring",stiffness:550,damping:n===0?2*Math.sqrt(550):30,restSpeed:10}),Tee={type:"keyframes",duration:.8},Eee={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},Cee=(n,{keyframes:e})=>e.length>2?Tee:fh.has(n)?n.startsWith("scale")?See(e[1]):bee:Eee;function pM(n,e){return n?n[e]||n.default||n:void 0}const Aee={skipAnimations:!1,useManualTiming:!1},Mee=n=>n!==null;function Vw(n,{repeat:e,repeatType:t="loop"},i){const r=n.filter(Mee),s=e&&t!=="loop"&&e%2===1?0:r.length-1;return!s||i===void 0?r[s]:i}const Dr=n=>n;function Iee(n){let e=new Set,t=new Set,i=!1,r=!1;const s=new WeakSet;let o={delta:0,timestamp:0,isProcessing:!1};function a(c){s.has(c)&&(l.schedule(c),n()),c(o)}const l={schedule:(c,u=!1,f=!1)=>{const g=f&&i?e:t;return u&&s.add(c),g.has(c)||g.add(c),c},cancel:c=>{t.delete(c),s.delete(c)},process:c=>{if(o=c,i){r=!0;return}i=!0,[e,t]=[t,e],t.clear(),e.forEach(a),i=!1,r&&(r=!1,l.process(c))}};return l}const a0=["read","resolveKeyframes","update","preRender","render","postRender"],Pee=40;function Z4(n,e){let t=!1,i=!0;const r={delta:0,timestamp:0,isProcessing:!1},s=()=>t=!0,o=a0.reduce((v,S)=>(v[S]=Iee(s),v),{}),{read:a,resolveKeyframes:l,update:c,preRender:u,render:f,postRender:m}=o,g=()=>{const v=performance.now();t=!1,r.delta=i?1e3/60:Math.max(Math.min(v-r.timestamp,Pee),1),r.timestamp=v,r.isProcessing=!0,a.process(r),l.process(r),c.process(r),u.process(r),f.process(r),m.process(r),r.isProcessing=!1,t&&e&&(i=!1,n(g))},x=()=>{t=!0,i=!0,r.isProcessing||n(g)};return{schedule:a0.reduce((v,S)=>{const E=o[S];return v[S]=(C,V=!1,L=!1)=>(t||x(),E.schedule(C,V,L)),v},{}),cancel:v=>{for(let S=0;S<a0.length;S++)o[a0[S]].cancel(v)},state:r,steps:o}}const{schedule:Wn,cancel:cc,state:sr,steps:FT}=Z4(typeof requestAnimationFrame<"u"?requestAnimationFrame:Dr,!0),eV=(n,e,t)=>(((1-3*t+3*e)*n+(3*t-6*e))*n+3*e)*n,Ree=1e-7,Nee=12;function Lee(n,e,t,i,r){let s,o,a=0;do o=e+(t-e)/2,s=eV(o,i,r)-n,s>0?t=o:e=o;while(Math.abs(s)>Ree&&++a<Nee);return o}function Jg(n,e,t,i){if(n===e&&t===i)return Dr;const r=s=>Lee(s,0,1,n,t);return s=>s===0||s===1?s:eV(r(s),e,i)}const tV=n=>e=>e<=.5?n(2*e)/2:(2-n(2*(1-e)))/2,nV=n=>e=>1-n(1-e),iV=Jg(.33,1.53,.69,.99),mM=nV(iV),rV=tV(mM),sV=n=>(n*=2)<1?.5*mM(n):.5*(2-Math.pow(2,-10*(n-1))),gM=n=>1-Math.sin(Math.acos(n)),oV=nV(gM),aV=tV(gM),lV=n=>/^0[^.\s]+$/u.test(n);function Dee(n){return typeof n=="number"?n===0:n!==null?n==="none"||n==="0"||lV(n):!0}let EE=Dr;const cV=n=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(n),uV=n=>e=>typeof e=="string"&&e.startsWith(n),hV=uV("--"),kee=uV("var(--"),yM=n=>kee(n)?Oee.test(n.split("/*")[0].trim()):!1,Oee=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,Uee=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function Fee(n){const e=Uee.exec(n);if(!e)return[,];const[,t,i,r]=e;return[`--${t??i}`,r]}function dV(n,e,t=1){const[i,r]=Fee(n);if(!i)return;const s=window.getComputedStyle(e).getPropertyValue(i);if(s){const o=s.trim();return cV(o)?parseFloat(o):o}return yM(r)?dV(r,e,t+1):r}const uc=(n,e,t)=>t>e?e:t<n?n:t,Rf={test:n=>typeof n=="number",parse:parseFloat,transform:n=>n},pg={...Rf,transform:n=>uc(0,1,n)},l0={...Rf,default:1},Qg=n=>({test:e=>typeof e=="string"&&e.endsWith(n)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${n}`}),Al=Qg("deg"),ea=Qg("%"),Vt=Qg("px"),jee=Qg("vh"),Vee=Qg("vw"),dD={...ea,parse:n=>ea.parse(n)/100,transform:n=>ea.transform(n*100)},Bee=new Set(["width","height","top","left","right","bottom","x","y","translateX","translateY"]),fD=n=>n===Rf||n===Vt,pD=(n,e)=>parseFloat(n.split(", ")[e]),mD=(n,e)=>(t,{transform:i})=>{if(i==="none"||!i)return 0;const r=i.match(/^matrix3d\((.+)\)$/u);if(r)return pD(r[1],e);{const s=i.match(/^matrix\((.+)\)$/u);return s?pD(s[1],n):0}},zee=new Set(["x","y","z"]),Hee=Kg.filter(n=>!zee.has(n));function Gee(n){const e=[];return Hee.forEach(t=>{const i=n.getValue(t);i!==void 0&&(e.push([t,i.get()]),i.set(t.startsWith("scale")?1:0))}),e}const uf={width:({x:n},{paddingLeft:e="0",paddingRight:t="0"})=>n.max-n.min-parseFloat(e)-parseFloat(t),height:({y:n},{paddingTop:e="0",paddingBottom:t="0"})=>n.max-n.min-parseFloat(e)-parseFloat(t),top:(n,{top:e})=>parseFloat(e),left:(n,{left:e})=>parseFloat(e),bottom:({y:n},{top:e})=>parseFloat(e)+(n.max-n.min),right:({x:n},{left:e})=>parseFloat(e)+(n.max-n.min),x:mD(4,13),y:mD(5,14)};uf.translateX=uf.x;uf.translateY=uf.y;const fV=n=>e=>e.test(n),Wee={test:n=>n==="auto",parse:n=>n},pV=[Rf,Vt,ea,Al,Vee,jee,Wee],gD=n=>pV.find(fV(n)),ju=new Set;let CE=!1,AE=!1;function mV(){if(AE){const n=Array.from(ju).filter(i=>i.needsMeasurement),e=new Set(n.map(i=>i.element)),t=new Map;e.forEach(i=>{const r=Gee(i);r.length&&(t.set(i,r),i.render())}),n.forEach(i=>i.measureInitialState()),e.forEach(i=>{i.render();const r=t.get(i);r&&r.forEach(([s,o])=>{var a;(a=i.getValue(s))===null||a===void 0||a.set(o)})}),n.forEach(i=>i.measureEndState()),n.forEach(i=>{i.suspendedScrollY!==void 0&&window.scrollTo(0,i.suspendedScrollY)})}AE=!1,CE=!1,ju.forEach(n=>n.complete()),ju.clear()}function gV(){ju.forEach(n=>{n.readKeyframes(),n.needsMeasurement&&(AE=!0)})}function qee(){gV(),mV()}class vM{constructor(e,t,i,r,s,o=!1){this.isComplete=!1,this.isAsync=!1,this.needsMeasurement=!1,this.isScheduled=!1,this.unresolvedKeyframes=[...e],this.onComplete=t,this.name=i,this.motionValue=r,this.element=s,this.isAsync=o}scheduleResolve(){this.isScheduled=!0,this.isAsync?(ju.add(this),CE||(CE=!0,Wn.read(gV),Wn.resolveKeyframes(mV))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:t,element:i,motionValue:r}=this;for(let s=0;s<e.length;s++)if(e[s]===null)if(s===0){const o=r?.get(),a=e[e.length-1];if(o!==void 0)e[0]=o;else if(i&&t){const l=i.readValue(t,a);l!=null&&(e[0]=l)}e[0]===void 0&&(e[0]=a),r&&o===void 0&&r.set(e[0])}else e[s]=e[s-1]}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(){this.isComplete=!0,this.onComplete(this.unresolvedKeyframes,this.finalKeyframe),ju.delete(this)}cancel(){this.isComplete||(this.isScheduled=!1,ju.delete(this))}resume(){this.isComplete||this.scheduleResolve()}}const _m=n=>Math.round(n*1e5)/1e5,xM=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function $ee(n){return n==null}const Xee=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,_M=(n,e)=>t=>!!(typeof t=="string"&&Xee.test(t)&&t.startsWith(n)||e&&!$ee(t)&&Object.prototype.hasOwnProperty.call(t,e)),yV=(n,e,t)=>i=>{if(typeof i!="string")return i;const[r,s,o,a]=i.match(xM);return{[n]:parseFloat(r),[e]:parseFloat(s),[t]:parseFloat(o),alpha:a!==void 0?parseFloat(a):1}},Yee=n=>uc(0,255,n),jT={...Rf,transform:n=>Math.round(Yee(n))},Iu={test:_M("rgb","red"),parse:yV("red","green","blue"),transform:({red:n,green:e,blue:t,alpha:i=1})=>"rgba("+jT.transform(n)+", "+jT.transform(e)+", "+jT.transform(t)+", "+_m(pg.transform(i))+")"};function Kee(n){let e="",t="",i="",r="";return n.length>5?(e=n.substring(1,3),t=n.substring(3,5),i=n.substring(5,7),r=n.substring(7,9)):(e=n.substring(1,2),t=n.substring(2,3),i=n.substring(3,4),r=n.substring(4,5),e+=e,t+=t,i+=i,r+=r),{red:parseInt(e,16),green:parseInt(t,16),blue:parseInt(i,16),alpha:r?parseInt(r,16)/255:1}}const ME={test:_M("#"),parse:Kee,transform:Iu.transform},Nd={test:_M("hsl","hue"),parse:yV("hue","saturation","lightness"),transform:({hue:n,saturation:e,lightness:t,alpha:i=1})=>"hsla("+Math.round(n)+", "+ea.transform(_m(e))+", "+ea.transform(_m(t))+", "+_m(pg.transform(i))+")"},Cr={test:n=>Iu.test(n)||ME.test(n)||Nd.test(n),parse:n=>Iu.test(n)?Iu.parse(n):Nd.test(n)?Nd.parse(n):ME.parse(n),transform:n=>typeof n=="string"?n:n.hasOwnProperty("red")?Iu.transform(n):Nd.transform(n)},Jee=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function Qee(n){var e,t;return isNaN(n)&&typeof n=="string"&&(((e=n.match(xM))===null||e===void 0?void 0:e.length)||0)+(((t=n.match(Jee))===null||t===void 0?void 0:t.length)||0)>0}const vV="number",xV="color",Zee="var",ete="var(",yD="${}",tte=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function mg(n){const e=n.toString(),t=[],i={color:[],number:[],var:[]},r=[];let s=0;const a=e.replace(tte,l=>(Cr.test(l)?(i.color.push(s),r.push(xV),t.push(Cr.parse(l))):l.startsWith(ete)?(i.var.push(s),r.push(Zee),t.push(l)):(i.number.push(s),r.push(vV),t.push(parseFloat(l))),++s,yD)).split(yD);return{values:t,split:a,indexes:i,types:r}}function _V(n){return mg(n).values}function wV(n){const{split:e,types:t}=mg(n),i=e.length;return r=>{let s="";for(let o=0;o<i;o++)if(s+=e[o],r[o]!==void 0){const a=t[o];a===vV?s+=_m(r[o]):a===xV?s+=Cr.transform(r[o]):s+=r[o]}return s}}const nte=n=>typeof n=="number"?0:n;function ite(n){const e=_V(n);return wV(n)(e.map(nte))}const hc={test:Qee,parse:_V,createTransformer:wV,getAnimatableNone:ite},rte=new Set(["brightness","contrast","saturate","opacity"]);function ste(n){const[e,t]=n.slice(0,-1).split("(");if(e==="drop-shadow")return n;const[i]=t.match(xM)||[];if(!i)return n;const r=t.replace(i,"");let s=rte.has(e)?1:0;return i!==t&&(s*=100),e+"("+s+r+")"}const ote=/\b([a-z-]*)\(.*?\)/gu,IE={...hc,getAnimatableNone:n=>{const e=n.match(ote);return e?e.map(ste).join(" "):n}},ate={borderWidth:Vt,borderTopWidth:Vt,borderRightWidth:Vt,borderBottomWidth:Vt,borderLeftWidth:Vt,borderRadius:Vt,radius:Vt,borderTopLeftRadius:Vt,borderTopRightRadius:Vt,borderBottomRightRadius:Vt,borderBottomLeftRadius:Vt,width:Vt,maxWidth:Vt,height:Vt,maxHeight:Vt,top:Vt,right:Vt,bottom:Vt,left:Vt,padding:Vt,paddingTop:Vt,paddingRight:Vt,paddingBottom:Vt,paddingLeft:Vt,margin:Vt,marginTop:Vt,marginRight:Vt,marginBottom:Vt,marginLeft:Vt,backgroundPositionX:Vt,backgroundPositionY:Vt},lte={rotate:Al,rotateX:Al,rotateY:Al,rotateZ:Al,scale:l0,scaleX:l0,scaleY:l0,scaleZ:l0,skew:Al,skewX:Al,skewY:Al,distance:Vt,translateX:Vt,translateY:Vt,translateZ:Vt,x:Vt,y:Vt,z:Vt,perspective:Vt,transformPerspective:Vt,opacity:pg,originX:dD,originY:dD,originZ:Vt},vD={...Rf,transform:Math.round},wM={...ate,...lte,zIndex:vD,size:Vt,fillOpacity:pg,strokeOpacity:pg,numOctaves:vD},cte={...wM,color:Cr,backgroundColor:Cr,outlineColor:Cr,fill:Cr,stroke:Cr,borderColor:Cr,borderTopColor:Cr,borderRightColor:Cr,borderBottomColor:Cr,borderLeftColor:Cr,filter:IE,WebkitFilter:IE},bM=n=>cte[n];function bV(n,e){let t=bM(n);return t!==IE&&(t=hc),t.getAnimatableNone?t.getAnimatableNone(e):void 0}const ute=new Set(["auto","none","0"]);function hte(n,e,t){let i=0,r;for(;i<n.length&&!r;){const s=n[i];typeof s=="string"&&!ute.has(s)&&mg(s).values.length&&(r=n[i]),i++}if(r&&t)for(const s of e)n[s]=bV(t,r)}class SV extends vM{constructor(e,t,i,r,s){super(e,t,i,r,s,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:t,name:i}=this;if(!t||!t.current)return;super.readKeyframes();for(let l=0;l<e.length;l++){let c=e[l];if(typeof c=="string"&&(c=c.trim(),yM(c))){const u=dV(c,t.current);u!==void 0&&(e[l]=u),l===e.length-1&&(this.finalKeyframe=c)}}if(this.resolveNoneKeyframes(),!Bee.has(i)||e.length!==2)return;const[r,s]=e,o=gD(r),a=gD(s);if(o!==a)if(fD(o)&&fD(a))for(let l=0;l<e.length;l++){const c=e[l];typeof c=="string"&&(e[l]=parseFloat(c))}else this.needsMeasurement=!0}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:t}=this,i=[];for(let r=0;r<e.length;r++)Dee(e[r])&&i.push(r);i.length&&hte(e,i,t)}measureInitialState(){const{element:e,unresolvedKeyframes:t,name:i}=this;if(!e||!e.current)return;i==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=uf[i](e.measureViewportBox(),window.getComputedStyle(e.current)),t[0]=this.measuredOrigin;const r=t[t.length-1];r!==void 0&&e.getValue(i,r).jump(r,!1)}measureEndState(){var e;const{element:t,name:i,unresolvedKeyframes:r}=this;if(!t||!t.current)return;const s=t.getValue(i);s&&s.jump(this.measuredOrigin,!1);const o=r.length-1,a=r[o];r[o]=uf[i](t.measureViewportBox(),window.getComputedStyle(t.current)),a!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=a),!((e=this.removedTransforms)===null||e===void 0)&&e.length&&this.removedTransforms.forEach(([l,c])=>{t.getValue(l).set(c)}),this.resolveNoneKeyframes()}}function SM(n){return typeof n=="function"}let U0;function dte(){U0=void 0}const ta={now:()=>(U0===void 0&&ta.set(sr.isProcessing||Aee.useManualTiming?sr.timestamp:performance.now()),U0),set:n=>{U0=n,queueMicrotask(dte)}},xD=(n,e)=>e==="zIndex"?!1:!!(typeof n=="number"||Array.isArray(n)||typeof n=="string"&&(hc.test(n)||n==="0")&&!n.startsWith("url("));function fte(n){const e=n[0];if(n.length===1)return!0;for(let t=0;t<n.length;t++)if(n[t]!==e)return!0}function pte(n,e,t,i){const r=n[0];if(r===null)return!1;if(e==="display"||e==="visibility")return!0;const s=n[n.length-1],o=xD(r,e),a=xD(s,e);return!o||!a?!1:fte(n)||(t==="spring"||SM(t))&&i}const mte=40;class TV{constructor({autoplay:e=!0,delay:t=0,type:i="keyframes",repeat:r=0,repeatDelay:s=0,repeatType:o="loop",...a}){this.isStopped=!1,this.hasAttemptedResolve=!1,this.createdAt=ta.now(),this.options={autoplay:e,delay:t,type:i,repeat:r,repeatDelay:s,repeatType:o,...a},this.updateFinishedPromise()}calcStartTime(){return this.resolvedAt?this.resolvedAt-this.createdAt>mte?this.resolvedAt:this.createdAt:this.createdAt}get resolved(){return!this._resolved&&!this.hasAttemptedResolve&&qee(),this._resolved}onKeyframesResolved(e,t){this.resolvedAt=ta.now(),this.hasAttemptedResolve=!0;const{name:i,type:r,velocity:s,delay:o,onComplete:a,onUpdate:l,isGenerator:c}=this.options;if(!c&&!pte(e,i,r,s))if(o)this.options.duration=0;else{l?.(Vw(e,this.options,t)),a?.(),this.resolveFinishedPromise();return}const u=this.initPlayback(e,t);u!==!1&&(this._resolved={keyframes:e,finalKeyframe:t,...u},this.onPostResolved())}onPostResolved(){}then(e,t){return this.currentFinishedPromise.then(e,t)}flatten(){this.options.type="keyframes",this.options.ease="linear"}updateFinishedPromise(){this.currentFinishedPromise=new Promise(e=>{this.resolveFinishedPromise=e})}}function EV(n,e){return e?n*(1e3/e):0}const gte=5;function CV(n,e,t){const i=Math.max(e-gte,0);return EV(t-n(i),e-i)}const VT=.001,yte=.01,vte=10,xte=.05,_te=1;function wte({duration:n=800,bounce:e=.25,velocity:t=0,mass:i=1}){let r,s,o=1-e;o=uc(xte,_te,o),n=uc(yte,vte,ja(n)),o<1?(r=c=>{const u=c*o,f=u*n,m=u-t,g=PE(c,o),x=Math.exp(-f);return VT-m/g*x},s=c=>{const f=c*o*n,m=f*t+t,g=Math.pow(o,2)*Math.pow(c,2)*n,x=Math.exp(-f),b=PE(Math.pow(c,2),o);return(-r(c)+VT>0?-1:1)*((m-g)*x)/b}):(r=c=>{const u=Math.exp(-c*n),f=(c-t)*n+1;return-VT+u*f},s=c=>{const u=Math.exp(-c*n),f=(t-c)*(n*n);return u*f});const a=5/n,l=Ste(r,s,a);if(n=Fa(n),isNaN(l))return{stiffness:100,damping:10,duration:n};{const c=Math.pow(l,2)*i;return{stiffness:c,damping:o*2*Math.sqrt(i*c),duration:n}}}const bte=12;function Ste(n,e,t){let i=t;for(let r=1;r<bte;r++)i=i-n(i)/e(i);return i}function PE(n,e){return n*Math.sqrt(1-e*e)}const Tte=["duration","bounce"],Ete=["stiffness","damping","mass"];function _D(n,e){return e.some(t=>n[t]!==void 0)}function Cte(n){let e={velocity:0,stiffness:100,damping:10,mass:1,isResolvedFromDuration:!1,...n};if(!_D(n,Ete)&&_D(n,Tte)){const t=wte(n);e={...e,...t,mass:1},e.isResolvedFromDuration=!0}return e}function AV({keyframes:n,restDelta:e,restSpeed:t,...i}){const r=n[0],s=n[n.length-1],o={done:!1,value:r},{stiffness:a,damping:l,mass:c,duration:u,velocity:f,isResolvedFromDuration:m}=Cte({...i,velocity:-ja(i.velocity||0)}),g=f||0,x=l/(2*Math.sqrt(a*c)),b=s-r,w=ja(Math.sqrt(a/c)),v=Math.abs(b)<5;t||(t=v?.01:2),e||(e=v?.005:.5);let S;if(x<1){const E=PE(w,x);S=C=>{const V=Math.exp(-x*w*C);return s-V*((g+x*w*b)/E*Math.sin(E*C)+b*Math.cos(E*C))}}else if(x===1)S=E=>s-Math.exp(-w*E)*(b+(g+w*b)*E);else{const E=w*Math.sqrt(x*x-1);S=C=>{const V=Math.exp(-x*w*C),L=Math.min(E*C,300);return s-V*((g+x*w*b)*Math.sinh(L)+E*b*Math.cosh(L))/E}}return{calculatedDuration:m&&u||null,next:E=>{const C=S(E);if(m)o.done=E>=u;else{let V=0;x<1&&(V=E===0?Fa(g):CV(S,E,C));const L=Math.abs(V)<=t,N=Math.abs(s-C)<=e;o.done=L&&N}return o.value=o.done?s:C,o}}}function wD({keyframes:n,velocity:e=0,power:t=.8,timeConstant:i=325,bounceDamping:r=10,bounceStiffness:s=500,modifyTarget:o,min:a,max:l,restDelta:c=.5,restSpeed:u}){const f=n[0],m={done:!1,value:f},g=I=>a!==void 0&&I<a||l!==void 0&&I>l,x=I=>a===void 0?l:l===void 0||Math.abs(a-I)<Math.abs(l-I)?a:l;let b=t*e;const w=f+b,v=o===void 0?w:o(w);v!==w&&(b=v-f);const S=I=>-b*Math.exp(-I/i),E=I=>v+S(I),C=I=>{const A=S(I),M=E(I);m.done=Math.abs(A)<=c,m.value=m.done?v:M};let V,L;const N=I=>{g(m.value)&&(V=I,L=AV({keyframes:[m.value,x(m.value)],velocity:CV(E,I,m.value),damping:r,stiffness:s,restDelta:c,restSpeed:u}))};return N(0),{calculatedDuration:null,next:I=>{let A=!1;return!L&&V===void 0&&(A=!0,C(I),N(I)),V!==void 0&&I>=V?L.next(I-V):(!A&&C(I),m)}}}const Ate=Jg(.42,0,1,1),Mte=Jg(0,0,.58,1),MV=Jg(.42,0,.58,1),Ite=n=>Array.isArray(n)&&typeof n[0]!="number",TM=n=>Array.isArray(n)&&typeof n[0]=="number",bD={linear:Dr,easeIn:Ate,easeInOut:MV,easeOut:Mte,circIn:gM,circInOut:aV,circOut:oV,backIn:mM,backInOut:rV,backOut:iV,anticipate:sV},SD=n=>{if(TM(n)){EE(n.length===4);const[e,t,i,r]=n;return Jg(e,t,i,r)}else if(typeof n=="string")return EE(bD[n]!==void 0),bD[n];return n},Pte=(n,e)=>t=>e(n(t)),Va=(...n)=>n.reduce(Pte),hf=(n,e,t)=>{const i=e-n;return i===0?1:(t-n)/i},ci=(n,e,t)=>n+(e-n)*t;function BT(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*(2/3-t)*6:n}function Rte({hue:n,saturation:e,lightness:t,alpha:i}){n/=360,e/=100,t/=100;let r=0,s=0,o=0;if(!e)r=s=o=t;else{const a=t<.5?t*(1+e):t+e-t*e,l=2*t-a;r=BT(l,a,n+1/3),s=BT(l,a,n),o=BT(l,a,n-1/3)}return{red:Math.round(r*255),green:Math.round(s*255),blue:Math.round(o*255),alpha:i}}function h_(n,e){return t=>t>0?e:n}const zT=(n,e,t)=>{const i=n*n,r=t*(e*e-i)+i;return r<0?0:Math.sqrt(r)},Nte=[ME,Iu,Nd],Lte=n=>Nte.find(e=>e.test(n));function TD(n){const e=Lte(n);if(!e)return!1;let t=e.parse(n);return e===Nd&&(t=Rte(t)),t}const ED=(n,e)=>{const t=TD(n),i=TD(e);if(!t||!i)return h_(n,e);const r={...t};return s=>(r.red=zT(t.red,i.red,s),r.green=zT(t.green,i.green,s),r.blue=zT(t.blue,i.blue,s),r.alpha=ci(t.alpha,i.alpha,s),Iu.transform(r))},RE=new Set(["none","hidden"]);function Dte(n,e){return RE.has(n)?t=>t<=0?n:e:t=>t>=1?e:n}function kte(n,e){return t=>ci(n,e,t)}function EM(n){return typeof n=="number"?kte:typeof n=="string"?yM(n)?h_:Cr.test(n)?ED:Fte:Array.isArray(n)?IV:typeof n=="object"?Cr.test(n)?ED:Ote:h_}function IV(n,e){const t=[...n],i=t.length,r=n.map((s,o)=>EM(s)(s,e[o]));return s=>{for(let o=0;o<i;o++)t[o]=r[o](s);return t}}function Ote(n,e){const t={...n,...e},i={};for(const r in t)n[r]!==void 0&&e[r]!==void 0&&(i[r]=EM(n[r])(n[r],e[r]));return r=>{for(const s in i)t[s]=i[s](r);return t}}function Ute(n,e){var t;const i=[],r={color:0,var:0,number:0};for(let s=0;s<e.values.length;s++){const o=e.types[s],a=n.indexes[o][r[o]],l=(t=n.values[a])!==null&&t!==void 0?t:0;i[s]=l,r[o]++}return i}const Fte=(n,e)=>{const t=hc.createTransformer(e),i=mg(n),r=mg(e);return i.indexes.var.length===r.indexes.var.length&&i.indexes.color.length===r.indexes.color.length&&i.indexes.number.length>=r.indexes.number.length?RE.has(n)&&!r.values.length||RE.has(e)&&!i.values.length?Dte(n,e):Va(IV(Ute(i,r),r.values),t):h_(n,e)};function PV(n,e,t){return typeof n=="number"&&typeof e=="number"&&typeof t=="number"?ci(n,e,t):EM(n)(n,e)}function jte(n,e,t){const i=[],r=t||PV,s=n.length-1;for(let o=0;o<s;o++){let a=r(n[o],n[o+1]);if(e){const l=Array.isArray(e)?e[o]||Dr:e;a=Va(l,a)}i.push(a)}return i}function Vte(n,e,{clamp:t=!0,ease:i,mixer:r}={}){const s=n.length;if(EE(s===e.length),s===1)return()=>e[0];if(s===2&&n[0]===n[1])return()=>e[1];n[0]>n[s-1]&&(n=[...n].reverse(),e=[...e].reverse());const o=jte(e,i,r),a=o.length,l=c=>{let u=0;if(a>1)for(;u<n.length-2&&!(c<n[u+1]);u++);const f=hf(n[u],n[u+1],c);return o[u](f)};return t?c=>l(uc(n[0],n[s-1],c)):l}function Bte(n,e){const t=n[n.length-1];for(let i=1;i<=e;i++){const r=hf(0,e,i);n.push(ci(t,1,r))}}function zte(n){const e=[0];return Bte(e,n.length-1),e}function Hte(n,e){return n.map(t=>t*e)}function Gte(n,e){return n.map(()=>e||MV).splice(0,n.length-1)}function d_({duration:n=300,keyframes:e,times:t,ease:i="easeInOut"}){const r=Ite(i)?i.map(SD):SD(i),s={done:!1,value:e[0]},o=Hte(t&&t.length===e.length?t:zte(e),n),a=Vte(o,e,{ease:Array.isArray(r)?r:Gte(e,r)});return{calculatedDuration:n,next:l=>(s.value=a(l),s.done=l>=n,s)}}const CD=2e4;function Wte(n){let e=0;const t=50;let i=n.next(e);for(;!i.done&&e<CD;)e+=t,i=n.next(e);return e>=CD?1/0:e}const qte=n=>{const e=({timestamp:t})=>n(t);return{start:()=>Wn.update(e,!0),stop:()=>cc(e),now:()=>sr.isProcessing?sr.timestamp:ta.now()}},$te={decay:wD,inertia:wD,tween:d_,keyframes:d_,spring:AV},Xte=n=>n/100;class CM extends TV{constructor(e){super(e),this.holdTime=null,this.cancelTime=null,this.currentTime=0,this.playbackSpeed=1,this.pendingPlayState="running",this.startTime=null,this.state="idle",this.stop=()=>{if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.teardown();const{onStop:l}=this.options;l&&l()};const{name:t,motionValue:i,element:r,keyframes:s}=this.options,o=r?.KeyframeResolver||vM,a=(l,c)=>this.onKeyframesResolved(l,c);this.resolver=new o(s,a,t,i,r),this.resolver.scheduleResolve()}flatten(){super.flatten(),this._resolved&&Object.assign(this._resolved,this.initPlayback(this._resolved.keyframes))}initPlayback(e){const{type:t="keyframes",repeat:i=0,repeatDelay:r=0,repeatType:s,velocity:o=0}=this.options,a=SM(t)?t:$te[t]||d_;let l,c;a!==d_&&typeof e[0]!="number"&&(l=Va(Xte,PV(e[0],e[1])),e=[0,100]);const u=a({...this.options,keyframes:e});s==="mirror"&&(c=a({...this.options,keyframes:[...e].reverse(),velocity:-o})),u.calculatedDuration===null&&(u.calculatedDuration=Wte(u));const{calculatedDuration:f}=u,m=f+r,g=m*(i+1)-r;return{generator:u,mirroredGenerator:c,mapPercentToKeyframes:l,calculatedDuration:f,resolvedDuration:m,totalDuration:g}}onPostResolved(){const{autoplay:e=!0}=this.options;this.play(),this.pendingPlayState==="paused"||!e?this.pause():this.state=this.pendingPlayState}tick(e,t=!1){const{resolved:i}=this;if(!i){const{keyframes:I}=this.options;return{done:!0,value:I[I.length-1]}}const{finalKeyframe:r,generator:s,mirroredGenerator:o,mapPercentToKeyframes:a,keyframes:l,calculatedDuration:c,totalDuration:u,resolvedDuration:f}=i;if(this.startTime===null)return s.next(0);const{delay:m,repeat:g,repeatType:x,repeatDelay:b,onUpdate:w}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-u/this.speed,this.startTime)),t?this.currentTime=e:this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=Math.round(e-this.startTime)*this.speed;const v=this.currentTime-m*(this.speed>=0?1:-1),S=this.speed>=0?v<0:v>u;this.currentTime=Math.max(v,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=u);let E=this.currentTime,C=s;if(g){const I=Math.min(this.currentTime,u)/f;let A=Math.floor(I),M=I%1;!M&&I>=1&&(M=1),M===1&&A--,A=Math.min(A,g+1),!!(A%2)&&(x==="reverse"?(M=1-M,b&&(M-=b/f)):x==="mirror"&&(C=o)),E=uc(0,1,M)*f}const V=S?{done:!1,value:l[0]}:C.next(E);a&&(V.value=a(V.value));let{done:L}=V;!S&&c!==null&&(L=this.speed>=0?this.currentTime>=u:this.currentTime<=0);const N=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&L);return N&&r!==void 0&&(V.value=Vw(l,this.options,r)),w&&w(V.value),N&&this.finish(),V}get duration(){const{resolved:e}=this;return e?ja(e.calculatedDuration):0}get time(){return ja(this.currentTime)}set time(e){e=Fa(e),this.currentTime=e,this.holdTime!==null||this.speed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.speed)}get speed(){return this.playbackSpeed}set speed(e){const t=this.playbackSpeed!==e;this.playbackSpeed=e,t&&(this.time=ja(this.currentTime))}play(){if(this.resolver.isScheduled||this.resolver.resume(),!this._resolved){this.pendingPlayState="running";return}if(this.isStopped)return;const{driver:e=qte,onPlay:t,startTime:i}=this.options;this.driver||(this.driver=e(s=>this.tick(s))),t&&t();const r=this.driver.now();this.holdTime!==null?this.startTime=r-this.holdTime:this.startTime?this.state==="finished"&&(this.startTime=r):this.startTime=i??this.calcStartTime(),this.state==="finished"&&this.updateFinishedPromise(),this.cancelTime=this.startTime,this.holdTime=null,this.state="running",this.driver.start()}pause(){var e;if(!this._resolved){this.pendingPlayState="paused";return}this.state="paused",this.holdTime=(e=this.currentTime)!==null&&e!==void 0?e:0}complete(){this.state!=="running"&&this.play(),this.pendingPlayState=this.state="finished",this.holdTime=null}finish(){this.teardown(),this.state="finished";const{onComplete:e}=this.options;e&&e()}cancel(){this.cancelTime!==null&&this.tick(this.cancelTime),this.teardown(),this.updateFinishedPromise()}teardown(){this.state="idle",this.stopDriver(),this.resolveFinishedPromise(),this.updateFinishedPromise(),this.startTime=this.cancelTime=null,this.resolver.cancel()}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}}const Yte=new Set(["opacity","clipPath","filter","transform"]),Kte=10,Jte=(n,e)=>{let t="";const i=Math.max(Math.round(e/Kte),2);for(let r=0;r<i;r++)t+=n(hf(0,i-1,r))+", ";return`linear(${t.substring(0,t.length-2)})`};function AM(n){let e;return()=>(e===void 0&&(e=n()),e)}const Qte={linearEasing:void 0};function Zte(n,e){const t=AM(n);return()=>{var i;return(i=Qte[e])!==null&&i!==void 0?i:t()}}const f_=Zte(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing");function RV(n){return!!(typeof n=="function"&&f_()||!n||typeof n=="string"&&(n in NE||f_())||TM(n)||Array.isArray(n)&&n.every(RV))}const qp=([n,e,t,i])=>`cubic-bezier(${n}, ${e}, ${t}, ${i})`,NE={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:qp([0,.65,.55,1]),circOut:qp([.55,0,1,.45]),backIn:qp([.31,.01,.66,-.59]),backOut:qp([.33,1.53,.69,.99])};function NV(n,e){if(n)return typeof n=="function"&&f_()?Jte(n,e):TM(n)?qp(n):Array.isArray(n)?n.map(t=>NV(t,e)||NE.easeOut):NE[n]}function ene(n,e,t,{delay:i=0,duration:r=300,repeat:s=0,repeatType:o="loop",ease:a="easeInOut",times:l}={}){const c={[e]:t};l&&(c.offset=l);const u=NV(a,r);return Array.isArray(u)&&(c.easing=u),n.animate(c,{delay:i,duration:r,easing:Array.isArray(u)?"linear":u,fill:"both",iterations:s+1,direction:o==="reverse"?"alternate":"normal"})}function AD(n,e){n.timeline=e,n.onfinish=null}const tne=AM(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),p_=10,nne=2e4;function ine(n){return SM(n.type)||n.type==="spring"||!RV(n.ease)}function rne(n,e){const t=new CM({...e,keyframes:n,repeat:0,delay:0,isGenerator:!0});let i={done:!1,value:n[0]};const r=[];let s=0;for(;!i.done&&s<nne;)i=t.sample(s),r.push(i.value),s+=p_;return{times:void 0,keyframes:r,duration:s-p_,ease:"linear"}}const LV={anticipate:sV,backInOut:rV,circInOut:aV};function sne(n){return n in LV}class MD extends TV{constructor(e){super(e);const{name:t,motionValue:i,element:r,keyframes:s}=this.options;this.resolver=new SV(s,(o,a)=>this.onKeyframesResolved(o,a),t,i,r),this.resolver.scheduleResolve()}initPlayback(e,t){var i;let{duration:r=300,times:s,ease:o,type:a,motionValue:l,name:c,startTime:u}=this.options;if(!(!((i=l.owner)===null||i===void 0)&&i.current))return!1;if(typeof o=="string"&&f_()&&sne(o)&&(o=LV[o]),ine(this.options)){const{onComplete:m,onUpdate:g,motionValue:x,element:b,...w}=this.options,v=rne(e,w);e=v.keyframes,e.length===1&&(e[1]=e[0]),r=v.duration,s=v.times,o=v.ease,a="keyframes"}const f=ene(l.owner.current,c,e,{...this.options,duration:r,times:s,ease:o});return f.startTime=u??this.calcStartTime(),this.pendingTimeline?(AD(f,this.pendingTimeline),this.pendingTimeline=void 0):f.onfinish=()=>{const{onComplete:m}=this.options;l.set(Vw(e,this.options,t)),m&&m(),this.cancel(),this.resolveFinishedPromise()},{animation:f,duration:r,times:s,type:a,ease:o,keyframes:e}}get duration(){const{resolved:e}=this;if(!e)return 0;const{duration:t}=e;return ja(t)}get time(){const{resolved:e}=this;if(!e)return 0;const{animation:t}=e;return ja(t.currentTime||0)}set time(e){const{resolved:t}=this;if(!t)return;const{animation:i}=t;i.currentTime=Fa(e)}get speed(){const{resolved:e}=this;if(!e)return 1;const{animation:t}=e;return t.playbackRate}set speed(e){const{resolved:t}=this;if(!t)return;const{animation:i}=t;i.playbackRate=e}get state(){const{resolved:e}=this;if(!e)return"idle";const{animation:t}=e;return t.playState}get startTime(){const{resolved:e}=this;if(!e)return null;const{animation:t}=e;return t.startTime}attachTimeline(e){if(!this._resolved)this.pendingTimeline=e;else{const{resolved:t}=this;if(!t)return Dr;const{animation:i}=t;AD(i,e)}return Dr}play(){if(this.isStopped)return;const{resolved:e}=this;if(!e)return;const{animation:t}=e;t.playState==="finished"&&this.updateFinishedPromise(),t.play()}pause(){const{resolved:e}=this;if(!e)return;const{animation:t}=e;t.pause()}stop(){if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.resolveFinishedPromise(),this.updateFinishedPromise();const{resolved:e}=this;if(!e)return;const{animation:t,keyframes:i,duration:r,type:s,ease:o,times:a}=e;if(t.playState==="idle"||t.playState==="finished")return;if(this.time){const{motionValue:c,onUpdate:u,onComplete:f,element:m,...g}=this.options,x=new CM({...g,keyframes:i,duration:r,type:s,ease:o,times:a,isGenerator:!0}),b=Fa(this.time);c.setWithVelocity(x.sample(b-p_).value,x.sample(b).value,p_)}const{onStop:l}=this.options;l&&l(),this.cancel()}complete(){const{resolved:e}=this;e&&e.animation.finish()}cancel(){const{resolved:e}=this;e&&e.animation.cancel()}static supports(e){const{motionValue:t,name:i,repeatDelay:r,repeatType:s,damping:o,type:a}=e;return tne()&&i&&Yte.has(i)&&t&&t.owner&&t.owner.current instanceof HTMLElement&&!t.owner.getProps().onUpdate&&!r&&s!=="mirror"&&o!==0&&a!=="inertia"}}const one=AM(()=>window.ScrollTimeline!==void 0);class ane{constructor(e){this.stop=()=>this.runAll("stop"),this.animations=e.filter(Boolean)}then(e,t){return Promise.all(this.animations).then(e).catch(t)}getAll(e){return this.animations[0][e]}setAll(e,t){for(let i=0;i<this.animations.length;i++)this.animations[i][e]=t}attachTimeline(e,t){const i=this.animations.map(r=>one()&&r.attachTimeline?r.attachTimeline(e):t(r));return()=>{i.forEach((r,s)=>{r&&r(),this.animations[s].stop()})}}get time(){return this.getAll("time")}set time(e){this.setAll("time",e)}get speed(){return this.getAll("speed")}set speed(e){this.setAll("speed",e)}get startTime(){return this.getAll("startTime")}get duration(){let e=0;for(let t=0;t<this.animations.length;t++)e=Math.max(e,this.animations[t].duration);return e}runAll(e){this.animations.forEach(t=>t[e]())}flatten(){this.runAll("flatten")}play(){this.runAll("play")}pause(){this.runAll("pause")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}function lne({when:n,delay:e,delayChildren:t,staggerChildren:i,staggerDirection:r,repeat:s,repeatType:o,repeatDelay:a,from:l,elapsed:c,...u}){return!!Object.keys(u).length}const MM=(n,e,t,i={},r,s)=>o=>{const a=pM(i,n)||{},l=a.delay||i.delay||0;let{elapsed:c=0}=i;c=c-Fa(l);let u={keyframes:Array.isArray(t)?t:[null,t],ease:"easeOut",velocity:e.getVelocity(),...a,delay:-c,onUpdate:m=>{e.set(m),a.onUpdate&&a.onUpdate(m)},onComplete:()=>{o(),a.onComplete&&a.onComplete()},name:n,motionValue:e,element:s?void 0:r};lne(a)||(u={...u,...Cee(n,u)}),u.duration&&(u.duration=Fa(u.duration)),u.repeatDelay&&(u.repeatDelay=Fa(u.repeatDelay)),u.from!==void 0&&(u.keyframes[0]=u.from);let f=!1;if((u.type===!1||u.duration===0&&!u.repeatDelay)&&(u.duration=0,u.delay===0&&(f=!0)),f&&!s&&e.get()!==void 0){const m=Vw(u.keyframes,a);if(m!==void 0)return Wn.update(()=>{u.onUpdate(m),u.onComplete()}),new ane([])}return!s&&MD.supports(u)?new MD(u):new CM(u)},cne=n=>!!(n&&typeof n=="object"&&n.mix&&n.toValue),une=n=>TE(n)?n[n.length-1]||0:n;function IM(n,e){n.indexOf(e)===-1&&n.push(e)}function PM(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}class RM{constructor(){this.subscriptions=[]}add(e){return IM(this.subscriptions,e),()=>PM(this.subscriptions,e)}notify(e,t,i){const r=this.subscriptions.length;if(r)if(r===1)this.subscriptions[0](e,t,i);else for(let s=0;s<r;s++){const o=this.subscriptions[s];o&&o(e,t,i)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const ID=30,hne=n=>!isNaN(parseFloat(n));class dne{constructor(e,t={}){this.version="11.11.17",this.canTrackVelocity=null,this.events={},this.updateAndNotify=(i,r=!0)=>{const s=ta.now();this.updatedAt!==s&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(i),this.current!==this.prev&&this.events.change&&this.events.change.notify(this.current),r&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.hasAnimated=!1,this.setCurrent(e),this.owner=t.owner}setCurrent(e){this.current=e,this.updatedAt=ta.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=hne(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,t){this.events[e]||(this.events[e]=new RM);const i=this.events[e].add(t);return e==="change"?()=>{i(),Wn.read(()=>{this.events.change.getSize()||this.stop()})}:i}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,t){this.passiveEffect=e,this.stopPassiveEffect=t}set(e,t=!0){!t||!this.passiveEffect?this.updateAndNotify(e,t):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,t,i){this.set(t),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-i}jump(e,t=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,t&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=ta.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>ID)return 0;const t=Math.min(this.updatedAt-this.prevUpdatedAt,ID);return EV(parseFloat(this.current)-parseFloat(this.prevFrameValue),t)}start(e){return this.stop(),new Promise(t=>{this.hasAnimated=!0,this.animation=e(t),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function gg(n,e){return new dne(n,e)}function fne(n,e,t){n.hasValue(e)?n.getValue(e).set(t):n.addValue(e,gg(t))}function pne(n,e){const t=jw(n,e);let{transitionEnd:i={},transition:r={},...s}=t||{};s={...s,...i};for(const o in s){const a=une(s[o]);fne(n,o,a)}}const NM=n=>n.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),mne="framerAppearId",DV="data-"+NM(mne);function kV(n){return n.props[DV]}const Rr=n=>!!(n&&n.getVelocity);function gne(n){return!!(Rr(n)&&n.add)}function LE(n,e){const t=n.getValue("willChange");if(gne(t))return t.add(e)}function yne({protectedKeys:n,needsAnimating:e},t){const i=n.hasOwnProperty(t)&&e[t]!==!0;return e[t]=!1,i}function OV(n,e,{delay:t=0,transitionOverride:i,type:r}={}){var s;let{transition:o=n.getDefaultTransition(),transitionEnd:a,...l}=e;i&&(o=i);const c=[],u=r&&n.animationState&&n.animationState.getState()[r];for(const f in l){const m=n.getValue(f,(s=n.latestValues[f])!==null&&s!==void 0?s:null),g=l[f];if(g===void 0||u&&yne(u,f))continue;const x={delay:t,...pM(o||{},f)};let b=!1;if(window.MotionHandoffAnimation){const v=kV(n);if(v){const S=window.MotionHandoffAnimation(v,f,Wn);S!==null&&(x.startTime=S,b=!0)}}LE(n,f),m.start(MM(f,m,g,n.shouldReduceMotion&&fh.has(f)?{type:!1}:x,n,b));const w=m.animation;w&&c.push(w)}return a&&Promise.all(c).then(()=>{Wn.update(()=>{a&&pne(n,a)})}),c}function DE(n,e,t={}){var i;const r=jw(n,e,t.type==="exit"?(i=n.presenceContext)===null||i===void 0?void 0:i.custom:void 0);let{transition:s=n.getDefaultTransition()||{}}=r||{};t.transitionOverride&&(s=t.transitionOverride);const o=r?()=>Promise.all(OV(n,r,t)):()=>Promise.resolve(),a=n.variantChildren&&n.variantChildren.size?(c=0)=>{const{delayChildren:u=0,staggerChildren:f,staggerDirection:m}=s;return vne(n,e,u+c,f,m,t)}:()=>Promise.resolve(),{when:l}=s;if(l){const[c,u]=l==="beforeChildren"?[o,a]:[a,o];return c().then(()=>u())}else return Promise.all([o(),a(t.delay)])}function vne(n,e,t=0,i=0,r=1,s){const o=[],a=(n.variantChildren.size-1)*i,l=r===1?(c=0)=>c*i:(c=0)=>a-c*i;return Array.from(n.variantChildren).sort(xne).forEach((c,u)=>{c.notify("AnimationStart",e),o.push(DE(c,e,{...s,delay:t+l(u)}).then(()=>c.notify("AnimationComplete",e)))}),Promise.all(o)}function xne(n,e){return n.sortNodePosition(e)}function _ne(n,e,t={}){n.notify("AnimationStart",e);let i;if(Array.isArray(e)){const r=e.map(s=>DE(n,s,t));i=Promise.all(r)}else if(typeof e=="string")i=DE(n,e,t);else{const r=typeof e=="function"?jw(n,e,t.custom):e;i=Promise.all(OV(n,r,t))}return i.then(()=>{n.notify("AnimationComplete",e)})}const wne=fM.length;function UV(n){if(!n)return;if(!n.isControllingVariants){const t=n.parent?UV(n.parent)||{}:{};return n.props.initial!==void 0&&(t.initial=n.props.initial),t}const e={};for(let t=0;t<wne;t++){const i=fM[t],r=n.props[i];(fg(r)||r===!1)&&(e[i]=r)}return e}const bne=[...dM].reverse(),Sne=dM.length;function Tne(n){return e=>Promise.all(e.map(({animation:t,options:i})=>_ne(n,t,i)))}function Ene(n){let e=Tne(n),t=PD(),i=!0;const r=l=>(c,u)=>{var f;const m=jw(n,u,l==="exit"?(f=n.presenceContext)===null||f===void 0?void 0:f.custom:void 0);if(m){const{transition:g,transitionEnd:x,...b}=m;c={...c,...b,...x}}return c};function s(l){e=l(n)}function o(l){const{props:c}=n,u=UV(n.parent)||{},f=[],m=new Set;let g={},x=1/0;for(let w=0;w<Sne;w++){const v=bne[w],S=t[v],E=c[v]!==void 0?c[v]:u[v],C=fg(E),V=v===l?S.isActive:null;V===!1&&(x=w);let L=E===u[v]&&E!==c[v]&&C;if(L&&i&&n.manuallyAnimateOnMount&&(L=!1),S.protectedKeys={...g},!S.isActive&&V===null||!E&&!S.prevProp||Fw(E)||typeof E=="boolean")continue;const N=Cne(S.prevProp,E);let I=N||v===l&&S.isActive&&!L&&C||w>x&&C,A=!1;const M=Array.isArray(E)?E:[E];let D=M.reduce(r(v),{});V===!1&&(D={});const{prevResolvedValues:z={}}=S,j={...z,...D},te=U=>{I=!0,m.has(U)&&(A=!0,m.delete(U)),S.needsAnimating[U]=!0;const F=n.getValue(U);F&&(F.liveStyle=!1)};for(const U in j){const F=D[U],X=z[U];if(g.hasOwnProperty(U))continue;let Y=!1;TE(F)&&TE(X)?Y=!Q4(F,X):Y=F!==X,Y?F!=null?te(U):m.add(U):F!==void 0&&m.has(U)?te(U):S.protectedKeys[U]=!0}S.prevProp=E,S.prevResolvedValues=D,S.isActive&&(g={...g,...D}),i&&n.blockInitialAnimation&&(I=!1),I&&(!(L&&N)||A)&&f.push(...M.map(U=>({animation:U,options:{type:v}})))}if(m.size){const w={};m.forEach(v=>{const S=n.getBaseTarget(v),E=n.getValue(v);E&&(E.liveStyle=!0),w[v]=S??null}),f.push({animation:w})}let b=!!f.length;return i&&(c.initial===!1||c.initial===c.animate)&&!n.manuallyAnimateOnMount&&(b=!1),i=!1,b?e(f):Promise.resolve()}function a(l,c){var u;if(t[l].isActive===c)return Promise.resolve();(u=n.variantChildren)===null||u===void 0||u.forEach(m=>{var g;return(g=m.animationState)===null||g===void 0?void 0:g.setActive(l,c)}),t[l].isActive=c;const f=o(l);for(const m in t)t[m].protectedKeys={};return f}return{animateChanges:o,setActive:a,setAnimateFunction:s,getState:()=>t,reset:()=>{t=PD(),i=!0}}}function Cne(n,e){return typeof e=="string"?e!==n:Array.isArray(e)?!Q4(e,n):!1}function uu(n=!1){return{isActive:n,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function PD(){return{animate:uu(!0),whileInView:uu(),whileHover:uu(),whileTap:uu(),whileDrag:uu(),whileFocus:uu(),exit:uu()}}class Ic{constructor(e){this.isMounted=!1,this.node=e}update(){}}class Ane extends Ic{constructor(e){super(e),e.animationState||(e.animationState=Ene(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();Fw(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:t}=this.node.prevProps||{};e!==t&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)===null||e===void 0||e.call(this)}}let Mne=0;class Ine extends Ic{constructor(){super(...arguments),this.id=Mne++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:t}=this.node.presenceContext,{isPresent:i}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===i)return;const r=this.node.animationState.setActive("exit",!e);t&&!e&&r.then(()=>t(this.id))}mount(){const{register:e}=this.node.presenceContext||{};e&&(this.unmount=e(this.id))}unmount(){}}const Pne={animation:{Feature:Ane},exit:{Feature:Ine}},FV=n=>n.pointerType==="mouse"?typeof n.button!="number"||n.button<=0:n.isPrimary!==!1;function Bw(n,e="page"){return{point:{x:n[`${e}X`],y:n[`${e}Y`]}}}const Rne=n=>e=>FV(e)&&n(e,Bw(e));function Pa(n,e,t,i={passive:!0}){return n.addEventListener(e,t,i),()=>n.removeEventListener(e,t)}function Ba(n,e,t,i){return Pa(n,e,Rne(t),i)}const RD=(n,e)=>Math.abs(n-e);function Nne(n,e){const t=RD(n.x,e.x),i=RD(n.y,e.y);return Math.sqrt(t**2+i**2)}class jV{constructor(e,t,{transformPagePoint:i,contextWindow:r,dragSnapToOrigin:s=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const f=GT(this.lastMoveEventInfo,this.history),m=this.startEvent!==null,g=Nne(f.offset,{x:0,y:0})>=3;if(!m&&!g)return;const{point:x}=f,{timestamp:b}=sr;this.history.push({...x,timestamp:b});const{onStart:w,onMove:v}=this.handlers;m||(w&&w(this.lastMoveEvent,f),this.startEvent=this.lastMoveEvent),v&&v(this.lastMoveEvent,f)},this.handlePointerMove=(f,m)=>{this.lastMoveEvent=f,this.lastMoveEventInfo=HT(m,this.transformPagePoint),Wn.update(this.updatePoint,!0)},this.handlePointerUp=(f,m)=>{this.end();const{onEnd:g,onSessionEnd:x,resumeAnimation:b}=this.handlers;if(this.dragSnapToOrigin&&b&&b(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const w=GT(f.type==="pointercancel"?this.lastMoveEventInfo:HT(m,this.transformPagePoint),this.history);this.startEvent&&g&&g(f,w),x&&x(f,w)},!FV(e))return;this.dragSnapToOrigin=s,this.handlers=t,this.transformPagePoint=i,this.contextWindow=r||window;const o=Bw(e),a=HT(o,this.transformPagePoint),{point:l}=a,{timestamp:c}=sr;this.history=[{...l,timestamp:c}];const{onSessionStart:u}=t;u&&u(e,GT(a,this.history)),this.removeListeners=Va(Ba(this.contextWindow,"pointermove",this.handlePointerMove),Ba(this.contextWindow,"pointerup",this.handlePointerUp),Ba(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),cc(this.updatePoint)}}function HT(n,e){return e?{point:e(n.point)}:n}function ND(n,e){return{x:n.x-e.x,y:n.y-e.y}}function GT({point:n},e){return{point:n,delta:ND(n,VV(e)),offset:ND(n,Lne(e)),velocity:Dne(e,.1)}}function Lne(n){return n[0]}function VV(n){return n[n.length-1]}function Dne(n,e){if(n.length<2)return{x:0,y:0};let t=n.length-1,i=null;const r=VV(n);for(;t>=0&&(i=n[t],!(r.timestamp-i.timestamp>Fa(e)));)t--;if(!i)return{x:0,y:0};const s=ja(r.timestamp-i.timestamp);if(s===0)return{x:0,y:0};const o={x:(r.x-i.x)/s,y:(r.y-i.y)/s};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}function BV(n){let e=null;return()=>{const t=()=>{e=null};return e===null?(e=n,t):!1}}const LD=BV("dragHorizontal"),DD=BV("dragVertical");function zV(n){let e=!1;if(n==="y")e=DD();else if(n==="x")e=LD();else{const t=LD(),i=DD();t&&i?e=()=>{t(),i()}:(t&&t(),i&&i())}return e}function HV(){const n=zV(!0);return n?(n(),!1):!0}function Ld(n){return n&&typeof n=="object"&&Object.prototype.hasOwnProperty.call(n,"current")}const GV=1e-4,kne=1-GV,One=1+GV,WV=.01,Une=0-WV,Fne=0+WV;function js(n){return n.max-n.min}function jne(n,e,t){return Math.abs(n-e)<=t}function kD(n,e,t,i=.5){n.origin=i,n.originPoint=ci(e.min,e.max,n.origin),n.scale=js(t)/js(e),n.translate=ci(t.min,t.max,n.origin)-n.originPoint,(n.scale>=kne&&n.scale<=One||isNaN(n.scale))&&(n.scale=1),(n.translate>=Une&&n.translate<=Fne||isNaN(n.translate))&&(n.translate=0)}function wm(n,e,t,i){kD(n.x,e.x,t.x,i?i.originX:void 0),kD(n.y,e.y,t.y,i?i.originY:void 0)}function OD(n,e,t){n.min=t.min+e.min,n.max=n.min+js(e)}function Vne(n,e,t){OD(n.x,e.x,t.x),OD(n.y,e.y,t.y)}function UD(n,e,t){n.min=e.min-t.min,n.max=n.min+js(e)}function bm(n,e,t){UD(n.x,e.x,t.x),UD(n.y,e.y,t.y)}function Bne(n,{min:e,max:t},i){return e!==void 0&&n<e?n=i?ci(e,n,i.min):Math.max(n,e):t!==void 0&&n>t&&(n=i?ci(t,n,i.max):Math.min(n,t)),n}function FD(n,e,t){return{min:e!==void 0?n.min+e:void 0,max:t!==void 0?n.max+t-(n.max-n.min):void 0}}function zne(n,{top:e,left:t,bottom:i,right:r}){return{x:FD(n.x,t,r),y:FD(n.y,e,i)}}function jD(n,e){let t=e.min-n.min,i=e.max-n.max;return e.max-e.min<n.max-n.min&&([t,i]=[i,t]),{min:t,max:i}}function Hne(n,e){return{x:jD(n.x,e.x),y:jD(n.y,e.y)}}function Gne(n,e){let t=.5;const i=js(n),r=js(e);return r>i?t=hf(e.min,e.max-i,n.min):i>r&&(t=hf(n.min,n.max-r,e.min)),uc(0,1,t)}function Wne(n,e){const t={};return e.min!==void 0&&(t.min=e.min-n.min),e.max!==void 0&&(t.max=e.max-n.min),t}const kE=.35;function qne(n=kE){return n===!1?n=0:n===!0&&(n=kE),{x:VD(n,"left","right"),y:VD(n,"top","bottom")}}function VD(n,e,t){return{min:BD(n,e),max:BD(n,t)}}function BD(n,e){return typeof n=="number"?n:n[e]||0}const zD=()=>({translate:0,scale:1,origin:0,originPoint:0}),Dd=()=>({x:zD(),y:zD()}),HD=()=>({min:0,max:0}),bi=()=>({x:HD(),y:HD()});function Zs(n){return[n("x"),n("y")]}function qV({top:n,left:e,right:t,bottom:i}){return{x:{min:e,max:t},y:{min:n,max:i}}}function $ne({x:n,y:e}){return{top:e.min,right:n.max,bottom:e.max,left:n.min}}function Xne(n,e){if(!e)return n;const t=e({x:n.left,y:n.top}),i=e({x:n.right,y:n.bottom});return{top:t.y,left:t.x,bottom:i.y,right:i.x}}function WT(n){return n===void 0||n===1}function OE({scale:n,scaleX:e,scaleY:t}){return!WT(n)||!WT(e)||!WT(t)}function mu(n){return OE(n)||$V(n)||n.z||n.rotate||n.rotateX||n.rotateY||n.skewX||n.skewY}function $V(n){return GD(n.x)||GD(n.y)}function GD(n){return n&&n!=="0%"}function m_(n,e,t){const i=n-t,r=e*i;return t+r}function WD(n,e,t,i,r){return r!==void 0&&(n=m_(n,r,i)),m_(n,t,i)+e}function UE(n,e=0,t=1,i,r){n.min=WD(n.min,e,t,i,r),n.max=WD(n.max,e,t,i,r)}function XV(n,{x:e,y:t}){UE(n.x,e.translate,e.scale,e.originPoint),UE(n.y,t.translate,t.scale,t.originPoint)}const qD=.999999999999,$D=1.0000000000001;function Yne(n,e,t,i=!1){const r=t.length;if(!r)return;e.x=e.y=1;let s,o;for(let a=0;a<r;a++){s=t[a],o=s.projectionDelta;const{visualElement:l}=s.options;l&&l.props.style&&l.props.style.display==="contents"||(i&&s.options.layoutScroll&&s.scroll&&s!==s.root&&Od(n,{x:-s.scroll.offset.x,y:-s.scroll.offset.y}),o&&(e.x*=o.x.scale,e.y*=o.y.scale,XV(n,o)),i&&mu(s.latestValues)&&Od(n,s.latestValues))}e.x<$D&&e.x>qD&&(e.x=1),e.y<$D&&e.y>qD&&(e.y=1)}function kd(n,e){n.min=n.min+e,n.max=n.max+e}function XD(n,e,t,i,r=.5){const s=ci(n.min,n.max,r);UE(n,e,t,s,i)}function Od(n,e){XD(n.x,e.x,e.scaleX,e.scale,e.originX),XD(n.y,e.y,e.scaleY,e.scale,e.originY)}function YV(n,e){return qV(Xne(n.getBoundingClientRect(),e))}function Kne(n,e,t){const i=YV(n,t),{scroll:r}=e;return r&&(kd(i.x,r.offset.x),kd(i.y,r.offset.y)),i}const KV=({current:n})=>n?n.ownerDocument.defaultView:null,Jne=new WeakMap;class Qne{constructor(e){this.openGlobalLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=bi(),this.visualElement=e}start(e,{snapToCursor:t=!1}={}){const{presenceContext:i}=this.visualElement;if(i&&i.isPresent===!1)return;const r=u=>{const{dragSnapToOrigin:f}=this.getProps();f?this.pauseAnimation():this.stopAnimation(),t&&this.snapToCursor(Bw(u,"page").point)},s=(u,f)=>{const{drag:m,dragPropagation:g,onDragStart:x}=this.getProps();if(m&&!g&&(this.openGlobalLock&&this.openGlobalLock(),this.openGlobalLock=zV(m),!this.openGlobalLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Zs(w=>{let v=this.getAxisMotionValue(w).get()||0;if(ea.test(v)){const{projection:S}=this.visualElement;if(S&&S.layout){const E=S.layout.layoutBox[w];E&&(v=js(E)*(parseFloat(v)/100))}}this.originPoint[w]=v}),x&&Wn.postRender(()=>x(u,f)),LE(this.visualElement,"transform");const{animationState:b}=this.visualElement;b&&b.setActive("whileDrag",!0)},o=(u,f)=>{const{dragPropagation:m,dragDirectionLock:g,onDirectionLock:x,onDrag:b}=this.getProps();if(!m&&!this.openGlobalLock)return;const{offset:w}=f;if(g&&this.currentDirection===null){this.currentDirection=Zne(w),this.currentDirection!==null&&x&&x(this.currentDirection);return}this.updateAxis("x",f.point,w),this.updateAxis("y",f.point,w),this.visualElement.render(),b&&b(u,f)},a=(u,f)=>this.stop(u,f),l=()=>Zs(u=>{var f;return this.getAnimationState(u)==="paused"&&((f=this.getAxisMotionValue(u).animation)===null||f===void 0?void 0:f.play())}),{dragSnapToOrigin:c}=this.getProps();this.panSession=new jV(e,{onSessionStart:r,onStart:s,onMove:o,onSessionEnd:a,resumeAnimation:l},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:c,contextWindow:KV(this.visualElement)})}stop(e,t){const i=this.isDragging;if(this.cancel(),!i)return;const{velocity:r}=t;this.startAnimation(r);const{onDragEnd:s}=this.getProps();s&&Wn.postRender(()=>s(e,t))}cancel(){this.isDragging=!1;const{projection:e,animationState:t}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:i}=this.getProps();!i&&this.openGlobalLock&&(this.openGlobalLock(),this.openGlobalLock=null),t&&t.setActive("whileDrag",!1)}updateAxis(e,t,i){const{drag:r}=this.getProps();if(!i||!c0(e,r,this.currentDirection))return;const s=this.getAxisMotionValue(e);let o=this.originPoint[e]+i[e];this.constraints&&this.constraints[e]&&(o=Bne(o,this.constraints[e],this.elastic[e])),s.set(o)}resolveConstraints(){var e;const{dragConstraints:t,dragElastic:i}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(e=this.visualElement.projection)===null||e===void 0?void 0:e.layout,s=this.constraints;t&&Ld(t)?this.constraints||(this.constraints=this.resolveRefConstraints()):t&&r?this.constraints=zne(r.layoutBox,t):this.constraints=!1,this.elastic=qne(i),s!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&Zs(o=>{this.constraints!==!1&&this.getAxisMotionValue(o)&&(this.constraints[o]=Wne(r.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:t}=this.getProps();if(!e||!Ld(e))return!1;const i=e.current,{projection:r}=this.visualElement;if(!r||!r.layout)return!1;const s=Kne(i,r.root,this.visualElement.getTransformPagePoint());let o=Hne(r.layout.layoutBox,s);if(t){const a=t($ne(o));this.hasMutatedConstraints=!!a,a&&(o=qV(a))}return o}startAnimation(e){const{drag:t,dragMomentum:i,dragElastic:r,dragTransition:s,dragSnapToOrigin:o,onDragTransitionEnd:a}=this.getProps(),l=this.constraints||{},c=Zs(u=>{if(!c0(u,t,this.currentDirection))return;let f=l&&l[u]||{};o&&(f={min:0,max:0});const m=r?200:1e6,g=r?40:1e7,x={type:"inertia",velocity:i?e[u]:0,bounceStiffness:m,bounceDamping:g,timeConstant:750,restDelta:1,restSpeed:10,...s,...f};return this.startAxisValueAnimation(u,x)});return Promise.all(c).then(a)}startAxisValueAnimation(e,t){const i=this.getAxisMotionValue(e);return LE(this.visualElement,e),i.start(MM(e,i,0,t,this.visualElement,!1))}stopAnimation(){Zs(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){Zs(e=>{var t;return(t=this.getAxisMotionValue(e).animation)===null||t===void 0?void 0:t.pause()})}getAnimationState(e){var t;return(t=this.getAxisMotionValue(e).animation)===null||t===void 0?void 0:t.state}getAxisMotionValue(e){const t=`_drag${e.toUpperCase()}`,i=this.visualElement.getProps(),r=i[t];return r||this.visualElement.getValue(e,(i.initial?i.initial[e]:void 0)||0)}snapToCursor(e){Zs(t=>{const{drag:i}=this.getProps();if(!c0(t,i,this.currentDirection))return;const{projection:r}=this.visualElement,s=this.getAxisMotionValue(t);if(r&&r.layout){const{min:o,max:a}=r.layout.layoutBox[t];s.set(e[t]-ci(o,a,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:t}=this.getProps(),{projection:i}=this.visualElement;if(!Ld(t)||!i||!this.constraints)return;this.stopAnimation();const r={x:0,y:0};Zs(o=>{const a=this.getAxisMotionValue(o);if(a&&this.constraints!==!1){const l=a.get();r[o]=Gne({min:l,max:l},this.constraints[o])}});const{transformTemplate:s}=this.visualElement.getProps();this.visualElement.current.style.transform=s?s({},""):"none",i.root&&i.root.updateScroll(),i.updateLayout(),this.resolveConstraints(),Zs(o=>{if(!c0(o,e,null))return;const a=this.getAxisMotionValue(o),{min:l,max:c}=this.constraints[o];a.set(ci(l,c,r[o]))})}addListeners(){if(!this.visualElement.current)return;Jne.set(this.visualElement,this);const e=this.visualElement.current,t=Ba(e,"pointerdown",l=>{const{drag:c,dragListener:u=!0}=this.getProps();c&&u&&this.start(l)}),i=()=>{const{dragConstraints:l}=this.getProps();Ld(l)&&l.current&&(this.constraints=this.resolveRefConstraints())},{projection:r}=this.visualElement,s=r.addEventListener("measure",i);r&&!r.layout&&(r.root&&r.root.updateScroll(),r.updateLayout()),Wn.read(i);const o=Pa(window,"resize",()=>this.scalePositionWithinConstraints()),a=r.addEventListener("didUpdate",({delta:l,hasLayoutChanged:c})=>{this.isDragging&&c&&(Zs(u=>{const f=this.getAxisMotionValue(u);f&&(this.originPoint[u]+=l[u].translate,f.set(f.get()+l[u].translate))}),this.visualElement.render())});return()=>{o(),t(),s(),a&&a()}}getProps(){const e=this.visualElement.getProps(),{drag:t=!1,dragDirectionLock:i=!1,dragPropagation:r=!1,dragConstraints:s=!1,dragElastic:o=kE,dragMomentum:a=!0}=e;return{...e,drag:t,dragDirectionLock:i,dragPropagation:r,dragConstraints:s,dragElastic:o,dragMomentum:a}}}function c0(n,e,t){return(e===!0||e===n)&&(t===null||t===n)}function Zne(n,e=10){let t=null;return Math.abs(n.y)>e?t="y":Math.abs(n.x)>e&&(t="x"),t}class eie extends Ic{constructor(e){super(e),this.removeGroupControls=Dr,this.removeListeners=Dr,this.controls=new Qne(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Dr}unmount(){this.removeGroupControls(),this.removeListeners()}}const YD=n=>(e,t)=>{n&&Wn.postRender(()=>n(e,t))};class tie extends Ic{constructor(){super(...arguments),this.removePointerDownListener=Dr}onPointerDown(e){this.session=new jV(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:KV(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:t,onPan:i,onPanEnd:r}=this.node.getProps();return{onSessionStart:YD(e),onStart:YD(t),onMove:i,onEnd:(s,o)=>{delete this.session,r&&Wn.postRender(()=>r(s,o))}}}mount(){this.removePointerDownListener=Ba(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const LM=B.createContext(null);function nie(){const n=B.useContext(LM);if(n===null)return[!0,null];const{isPresent:e,onExitComplete:t,register:i}=n,r=B.useId();B.useEffect(()=>i(r),[]);const s=B.useCallback(()=>t&&t(r),[r,t]);return!e&&t?[!1,s]:[!0]}const JV=B.createContext({}),QV=B.createContext({}),F0={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function KD(n,e){return e.max===e.min?0:n/(e.max-e.min)*100}const Up={correct:(n,e)=>{if(!e.target)return n;if(typeof n=="string")if(Vt.test(n))n=parseFloat(n);else return n;const t=KD(n,e.target.x),i=KD(n,e.target.y);return`${t}% ${i}%`}},iie={correct:(n,{treeScale:e,projectionDelta:t})=>{const i=n,r=hc.parse(n);if(r.length>5)return i;const s=hc.createTransformer(n),o=typeof r[0]!="number"?1:0,a=t.x.scale*e.x,l=t.y.scale*e.y;r[0+o]/=a,r[1+o]/=l;const c=ci(a,l,.5);return typeof r[2+o]=="number"&&(r[2+o]/=c),typeof r[3+o]=="number"&&(r[3+o]/=c),s(r)}},g_={};function rie(n){Object.assign(g_,n)}const{schedule:DM,cancel:Dme}=Z4(queueMicrotask,!1);class sie extends B.Component{componentDidMount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:i,layoutId:r}=this.props,{projection:s}=e;rie(oie),s&&(t.group&&t.group.add(s),i&&i.register&&r&&i.register(s),s.root.didUpdate(),s.addEventListener("animationComplete",()=>{this.safeToRemove()}),s.setOptions({...s.options,onExitComplete:()=>this.safeToRemove()})),F0.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:t,visualElement:i,drag:r,isPresent:s}=this.props,o=i.projection;return o&&(o.isPresent=s,r||e.layoutDependency!==t||t===void 0?o.willUpdate():this.safeToRemove(),e.isPresent!==s&&(s?o.promote():o.relegate()||Wn.postRender(()=>{const a=o.getStack();(!a||!a.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),DM.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:i}=this.props,{projection:r}=e;r&&(r.scheduleCheckAfterUnmount(),t&&t.group&&t.group.remove(r),i&&i.deregister&&i.deregister(r))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function ZV(n){const[e,t]=nie(),i=B.useContext(JV);return d.jsx(sie,{...n,layoutGroup:i,switchLayoutGroup:B.useContext(QV),isPresent:e,safeToRemove:t})}const oie={borderRadius:{...Up,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Up,borderTopRightRadius:Up,borderBottomLeftRadius:Up,borderBottomRightRadius:Up,boxShadow:iie},eB=["TopLeft","TopRight","BottomLeft","BottomRight"],aie=eB.length,JD=n=>typeof n=="string"?parseFloat(n):n,QD=n=>typeof n=="number"||Vt.test(n);function lie(n,e,t,i,r,s){r?(n.opacity=ci(0,t.opacity!==void 0?t.opacity:1,cie(i)),n.opacityExit=ci(e.opacity!==void 0?e.opacity:1,0,uie(i))):s&&(n.opacity=ci(e.opacity!==void 0?e.opacity:1,t.opacity!==void 0?t.opacity:1,i));for(let o=0;o<aie;o++){const a=`border${eB[o]}Radius`;let l=ZD(e,a),c=ZD(t,a);if(l===void 0&&c===void 0)continue;l||(l=0),c||(c=0),l===0||c===0||QD(l)===QD(c)?(n[a]=Math.max(ci(JD(l),JD(c),i),0),(ea.test(c)||ea.test(l))&&(n[a]+="%")):n[a]=c}(e.rotate||t.rotate)&&(n.rotate=ci(e.rotate||0,t.rotate||0,i))}function ZD(n,e){return n[e]!==void 0?n[e]:n.borderRadius}const cie=tB(0,.5,oV),uie=tB(.5,.95,Dr);function tB(n,e,t){return i=>i<n?0:i>e?1:t(hf(n,e,i))}function ek(n,e){n.min=e.min,n.max=e.max}function Qs(n,e){ek(n.x,e.x),ek(n.y,e.y)}function tk(n,e){n.translate=e.translate,n.scale=e.scale,n.originPoint=e.originPoint,n.origin=e.origin}function nk(n,e,t,i,r){return n-=e,n=m_(n,1/t,i),r!==void 0&&(n=m_(n,1/r,i)),n}function hie(n,e=0,t=1,i=.5,r,s=n,o=n){if(ea.test(e)&&(e=parseFloat(e),e=ci(o.min,o.max,e/100)-o.min),typeof e!="number")return;let a=ci(s.min,s.max,i);n===s&&(a-=e),n.min=nk(n.min,e,t,a,r),n.max=nk(n.max,e,t,a,r)}function ik(n,e,[t,i,r],s,o){hie(n,e[t],e[i],e[r],e.scale,s,o)}const die=["x","scaleX","originX"],fie=["y","scaleY","originY"];function rk(n,e,t,i){ik(n.x,e,die,t?t.x:void 0,i?i.x:void 0),ik(n.y,e,fie,t?t.y:void 0,i?i.y:void 0)}function sk(n){return n.translate===0&&n.scale===1}function nB(n){return sk(n.x)&&sk(n.y)}function ok(n,e){return n.min===e.min&&n.max===e.max}function pie(n,e){return ok(n.x,e.x)&&ok(n.y,e.y)}function ak(n,e){return Math.round(n.min)===Math.round(e.min)&&Math.round(n.max)===Math.round(e.max)}function iB(n,e){return ak(n.x,e.x)&&ak(n.y,e.y)}function lk(n){return js(n.x)/js(n.y)}function ck(n,e){return n.translate===e.translate&&n.scale===e.scale&&n.originPoint===e.originPoint}class mie{constructor(){this.members=[]}add(e){IM(this.members,e),e.scheduleRender()}remove(e){if(PM(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const t=this.members[this.members.length-1];t&&this.promote(t)}}relegate(e){const t=this.members.findIndex(r=>e===r);if(t===0)return!1;let i;for(let r=t;r>=0;r--){const s=this.members[r];if(s.isPresent!==!1){i=s;break}}return i?(this.promote(i),!0):!1}promote(e,t){const i=this.lead;if(e!==i&&(this.prevLead=i,this.lead=e,e.show(),i)){i.instance&&i.scheduleRender(),e.scheduleRender(),e.resumeFrom=i,t&&(e.resumeFrom.preserveOpacity=!0),i.snapshot&&(e.snapshot=i.snapshot,e.snapshot.latestValues=i.animationValues||i.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:r}=e.options;r===!1&&i.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:t,resumingFrom:i}=e;t.onExitComplete&&t.onExitComplete(),i&&i.options.onExitComplete&&i.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function gie(n,e,t){let i="";const r=n.x.translate/e.x,s=n.y.translate/e.y,o=t?.z||0;if((r||s||o)&&(i=`translate3d(${r}px, ${s}px, ${o}px) `),(e.x!==1||e.y!==1)&&(i+=`scale(${1/e.x}, ${1/e.y}) `),t){const{transformPerspective:c,rotate:u,rotateX:f,rotateY:m,skewX:g,skewY:x}=t;c&&(i=`perspective(${c}px) ${i}`),u&&(i+=`rotate(${u}deg) `),f&&(i+=`rotateX(${f}deg) `),m&&(i+=`rotateY(${m}deg) `),g&&(i+=`skewX(${g}deg) `),x&&(i+=`skewY(${x}deg) `)}const a=n.x.scale*e.x,l=n.y.scale*e.y;return(a!==1||l!==1)&&(i+=`scale(${a}, ${l})`),i||"none"}const yie=(n,e)=>n.depth-e.depth;class vie{constructor(){this.children=[],this.isDirty=!1}add(e){IM(this.children,e),this.isDirty=!0}remove(e){PM(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(yie),this.isDirty=!1,this.children.forEach(e)}}function j0(n){const e=Rr(n)?n.get():n;return cne(e)?e.toValue():e}function xie(n,e){const t=ta.now(),i=({timestamp:r})=>{const s=r-t;s>=e&&(cc(i),n(s-e))};return Wn.read(i,!0),()=>cc(i)}function _ie(n){return n instanceof SVGElement&&n.tagName!=="svg"}function wie(n,e,t){const i=Rr(n)?n:gg(n);return i.start(MM("",i,e,t)),i.animation}const gu={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0},$p=typeof window<"u"&&window.MotionDebug!==void 0,qT=["","X","Y","Z"],bie={visibility:"hidden"},uk=1e3;let Sie=0;function $T(n,e,t,i){const{latestValues:r}=e;r[n]&&(t[n]=r[n],e.setStaticValue(n,0),i&&(i[n]=0))}function rB(n){if(n.hasCheckedOptimisedAppear=!0,n.root===n)return;const{visualElement:e}=n.options;if(!e)return;const t=kV(e);if(window.MotionHasOptimisedAnimation(t,"transform")){const{layout:r,layoutId:s}=n.options;window.MotionCancelOptimisedAnimation(t,"transform",Wn,!(r||s))}const{parent:i}=n;i&&!i.hasCheckedOptimisedAppear&&rB(i)}function sB({attachResizeListener:n,defaultParent:e,measureScroll:t,checkIsScrollRoot:i,resetTransform:r}){return class{constructor(o={},a=e?.()){this.id=Sie++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,$p&&(gu.totalNodes=gu.resolvedTargetDeltas=gu.recalculatedProjection=0),this.nodes.forEach(Cie),this.nodes.forEach(Rie),this.nodes.forEach(Nie),this.nodes.forEach(Aie),$p&&window.MotionDebug.record(gu)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=a?a.root||a:this,this.path=a?[...a.path,a]:[],this.parent=a,this.depth=a?a.depth+1:0;for(let l=0;l<this.path.length;l++)this.path[l].shouldResetTransform=!0;this.root===this&&(this.nodes=new vie)}addEventListener(o,a){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new RM),this.eventHandlers.get(o).add(a)}notifyListeners(o,...a){const l=this.eventHandlers.get(o);l&&l.notify(...a)}hasListeners(o){return this.eventHandlers.has(o)}mount(o,a=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=_ie(o),this.instance=o;const{layoutId:l,layout:c,visualElement:u}=this.options;if(u&&!u.current&&u.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),a&&(c||l)&&(this.isLayoutDirty=!0),n){let f;const m=()=>this.root.updateBlockedByResize=!1;n(o,()=>{this.root.updateBlockedByResize=!0,f&&f(),f=xie(m,250),F0.hasAnimatedSinceResize&&(F0.hasAnimatedSinceResize=!1,this.nodes.forEach(dk))})}l&&this.root.registerSharedNode(l,this),this.options.animate!==!1&&u&&(l||c)&&this.addEventListener("didUpdate",({delta:f,hasLayoutChanged:m,hasRelativeTargetChanged:g,layout:x})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const b=this.options.transition||u.getDefaultTransition()||Uie,{onLayoutAnimationStart:w,onLayoutAnimationComplete:v}=u.getProps(),S=!this.targetLayout||!iB(this.targetLayout,x)||g,E=!m&&g;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||E||m&&(S||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(f,E);const C={...pM(b,"layout"),onPlay:w,onComplete:v};(u.shouldReduceMotion||this.options.layoutRoot)&&(C.delay=0,C.type=!1),this.startAnimation(C)}else m||dk(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=x})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,cc(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(Lie),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&rB(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let u=0;u<this.path.length;u++){const f=this.path[u];f.shouldResetTransform=!0,f.updateScroll("snapshot"),f.options.layoutRoot&&f.willUpdate(!1)}const{layoutId:a,layout:l}=this.options;if(a===void 0&&!l)return;const c=this.getTransformTemplate();this.prevTransformTemplateValue=c?c(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(hk);return}this.isUpdating||this.nodes.forEach(Iie),this.isUpdating=!1,this.nodes.forEach(Pie),this.nodes.forEach(Tie),this.nodes.forEach(Eie),this.clearAllSnapshots();const a=ta.now();sr.delta=uc(0,1e3/60,a-sr.timestamp),sr.timestamp=a,sr.isProcessing=!0,FT.update.process(sr),FT.preRender.process(sr),FT.render.process(sr),sr.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,DM.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(Mie),this.sharedNodes.forEach(Die)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Wn.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Wn.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let l=0;l<this.path.length;l++)this.path[l].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutCorrected=bi(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:a}=this.options;a&&a.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let a=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(a=!1),a){const l=i(this.instance);this.scroll={animationId:this.root.animationId,phase:o,isRoot:l,offset:t(this.instance),wasRoot:this.scroll?this.scroll.isRoot:l}}}resetTransform(){if(!r)return;const o=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,a=this.projectionDelta&&!nB(this.projectionDelta),l=this.getTransformTemplate(),c=l?l(this.latestValues,""):void 0,u=c!==this.prevTransformTemplateValue;o&&(a||mu(this.latestValues)||u)&&(r(this.instance,c),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const a=this.measurePageBox();let l=this.removeElementScroll(a);return o&&(l=this.removeTransform(l)),Fie(l),{animationId:this.root.animationId,measuredBox:a,layoutBox:l,latestValues:{},source:this.id}}measurePageBox(){var o;const{visualElement:a}=this.options;if(!a)return bi();const l=a.measureViewportBox();if(!(((o=this.scroll)===null||o===void 0?void 0:o.wasRoot)||this.path.some(jie))){const{scroll:u}=this.root;u&&(kd(l.x,u.offset.x),kd(l.y,u.offset.y))}return l}removeElementScroll(o){var a;const l=bi();if(Qs(l,o),!((a=this.scroll)===null||a===void 0)&&a.wasRoot)return l;for(let c=0;c<this.path.length;c++){const u=this.path[c],{scroll:f,options:m}=u;u!==this.root&&f&&m.layoutScroll&&(f.wasRoot&&Qs(l,o),kd(l.x,f.offset.x),kd(l.y,f.offset.y))}return l}applyTransform(o,a=!1){const l=bi();Qs(l,o);for(let c=0;c<this.path.length;c++){const u=this.path[c];!a&&u.options.layoutScroll&&u.scroll&&u!==u.root&&Od(l,{x:-u.scroll.offset.x,y:-u.scroll.offset.y}),mu(u.latestValues)&&Od(l,u.latestValues)}return mu(this.latestValues)&&Od(l,this.latestValues),l}removeTransform(o){const a=bi();Qs(a,o);for(let l=0;l<this.path.length;l++){const c=this.path[l];if(!c.instance||!mu(c.latestValues))continue;OE(c.latestValues)&&c.updateSnapshot();const u=bi(),f=c.measurePageBox();Qs(u,f),rk(a,c.latestValues,c.snapshot?c.snapshot.layoutBox:void 0,u)}return mu(this.latestValues)&&rk(a,this.latestValues),a}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==sr.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){var a;const l=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=l.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=l.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=l.isSharedProjectionDirty);const c=!!this.resumingFrom||this!==l;if(!(o||c&&this.isSharedProjectionDirty||this.isProjectionDirty||!((a=this.parent)===null||a===void 0)&&a.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:f,layoutId:m}=this.options;if(!(!this.layout||!(f||m))){if(this.resolvedRelativeTargetAt=sr.timestamp,!this.targetDelta&&!this.relativeTarget){const g=this.getClosestProjectingParent();g&&g.layout&&this.animationProgress!==1?(this.relativeParent=g,this.forceRelativeParentToResolveTarget(),this.relativeTarget=bi(),this.relativeTargetOrigin=bi(),bm(this.relativeTargetOrigin,this.layout.layoutBox,g.layout.layoutBox),Qs(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=bi(),this.targetWithTransforms=bi()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),Vne(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Qs(this.target,this.layout.layoutBox),XV(this.target,this.targetDelta)):Qs(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const g=this.getClosestProjectingParent();g&&!!g.resumingFrom==!!this.resumingFrom&&!g.options.layoutScroll&&g.target&&this.animationProgress!==1?(this.relativeParent=g,this.forceRelativeParentToResolveTarget(),this.relativeTarget=bi(),this.relativeTargetOrigin=bi(),bm(this.relativeTargetOrigin,this.target,g.target),Qs(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}$p&&gu.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||OE(this.parent.latestValues)||$V(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var o;const a=this.getLead(),l=!!this.resumingFrom||this!==a;let c=!0;if((this.isProjectionDirty||!((o=this.parent)===null||o===void 0)&&o.isProjectionDirty)&&(c=!1),l&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(c=!1),this.resolvedRelativeTargetAt===sr.timestamp&&(c=!1),c)return;const{layout:u,layoutId:f}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(u||f))return;Qs(this.layoutCorrected,this.layout.layoutBox);const m=this.treeScale.x,g=this.treeScale.y;Yne(this.layoutCorrected,this.treeScale,this.path,l),a.layout&&!a.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(a.target=a.layout.layoutBox,a.targetWithTransforms=bi());const{target:x}=a;if(!x){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(tk(this.prevProjectionDelta.x,this.projectionDelta.x),tk(this.prevProjectionDelta.y,this.projectionDelta.y)),wm(this.projectionDelta,this.layoutCorrected,x,this.latestValues),(this.treeScale.x!==m||this.treeScale.y!==g||!ck(this.projectionDelta.x,this.prevProjectionDelta.x)||!ck(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",x)),$p&&gu.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){var a;if((a=this.options.visualElement)===null||a===void 0||a.scheduleRender(),o){const l=this.getStack();l&&l.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Dd(),this.projectionDelta=Dd(),this.projectionDeltaWithTransform=Dd()}setAnimationOrigin(o,a=!1){const l=this.snapshot,c=l?l.latestValues:{},u={...this.latestValues},f=Dd();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!a;const m=bi(),g=l?l.source:void 0,x=this.layout?this.layout.source:void 0,b=g!==x,w=this.getStack(),v=!w||w.members.length<=1,S=!!(b&&!v&&this.options.crossfade===!0&&!this.path.some(Oie));this.animationProgress=0;let E;this.mixTargetDelta=C=>{const V=C/1e3;fk(f.x,o.x,V),fk(f.y,o.y,V),this.setTargetDelta(f),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(bm(m,this.layout.layoutBox,this.relativeParent.layout.layoutBox),kie(this.relativeTarget,this.relativeTargetOrigin,m,V),E&&pie(this.relativeTarget,E)&&(this.isProjectionDirty=!1),E||(E=bi()),Qs(E,this.relativeTarget)),b&&(this.animationValues=u,lie(u,c,this.latestValues,V,S,v)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=V},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(cc(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Wn.update(()=>{F0.hasAnimatedSinceResize=!0,this.currentAnimation=wie(0,uk,{...o,onUpdate:a=>{this.mixTargetDelta(a),o.onUpdate&&o.onUpdate(a)},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(uk),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:a,target:l,layout:c,latestValues:u}=o;if(!(!a||!l||!c)){if(this!==o&&this.layout&&c&&oB(this.options.animationType,this.layout.layoutBox,c.layoutBox)){l=this.target||bi();const f=js(this.layout.layoutBox.x);l.x.min=o.target.x.min,l.x.max=l.x.min+f;const m=js(this.layout.layoutBox.y);l.y.min=o.target.y.min,l.y.max=l.y.min+m}Qs(a,l),Od(a,u),wm(this.projectionDeltaWithTransform,this.layoutCorrected,a,u)}}registerSharedNode(o,a){this.sharedNodes.has(o)||this.sharedNodes.set(o,new mie),this.sharedNodes.get(o).add(a);const c=a.options.initialPromotionConfig;a.promote({transition:c?c.transition:void 0,preserveFollowOpacity:c&&c.shouldPreserveFollowOpacity?c.shouldPreserveFollowOpacity(a):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){var o;const{layoutId:a}=this.options;return a?((o=this.getStack())===null||o===void 0?void 0:o.lead)||this:this}getPrevLead(){var o;const{layoutId:a}=this.options;return a?(o=this.getStack())===null||o===void 0?void 0:o.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:a,preserveFollowOpacity:l}={}){const c=this.getStack();c&&c.promote(this,l),o&&(this.projectionDelta=void 0,this.needsReset=!0),a&&this.setOptions({transition:a})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetSkewAndRotation(){const{visualElement:o}=this.options;if(!o)return;let a=!1;const{latestValues:l}=o;if((l.z||l.rotate||l.rotateX||l.rotateY||l.rotateZ||l.skewX||l.skewY)&&(a=!0),!a)return;const c={};l.z&&$T("z",o,c,this.animationValues);for(let u=0;u<qT.length;u++)$T(`rotate${qT[u]}`,o,c,this.animationValues),$T(`skew${qT[u]}`,o,c,this.animationValues);o.render();for(const u in c)o.setStaticValue(u,c[u]),this.animationValues&&(this.animationValues[u]=c[u]);o.scheduleRender()}getProjectionStyles(o){var a,l;if(!this.instance||this.isSVG)return;if(!this.isVisible)return bie;const c={visibility:""},u=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,c.opacity="",c.pointerEvents=j0(o?.pointerEvents)||"",c.transform=u?u(this.latestValues,""):"none",c;const f=this.getLead();if(!this.projectionDelta||!this.layout||!f.target){const b={};return this.options.layoutId&&(b.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,b.pointerEvents=j0(o?.pointerEvents)||""),this.hasProjected&&!mu(this.latestValues)&&(b.transform=u?u({},""):"none",this.hasProjected=!1),b}const m=f.animationValues||f.latestValues;this.applyTransformsToTarget(),c.transform=gie(this.projectionDeltaWithTransform,this.treeScale,m),u&&(c.transform=u(m,c.transform));const{x:g,y:x}=this.projectionDelta;c.transformOrigin=`${g.origin*100}% ${x.origin*100}% 0`,f.animationValues?c.opacity=f===this?(l=(a=m.opacity)!==null&&a!==void 0?a:this.latestValues.opacity)!==null&&l!==void 0?l:1:this.preserveOpacity?this.latestValues.opacity:m.opacityExit:c.opacity=f===this?m.opacity!==void 0?m.opacity:"":m.opacityExit!==void 0?m.opacityExit:0;for(const b in g_){if(m[b]===void 0)continue;const{correct:w,applyTo:v}=g_[b],S=c.transform==="none"?m[b]:w(m[b],f);if(v){const E=v.length;for(let C=0;C<E;C++)c[v[C]]=S}else c[b]=S}return this.options.layoutId&&(c.pointerEvents=f===this?j0(o?.pointerEvents)||"":"none"),c}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>{var a;return(a=o.currentAnimation)===null||a===void 0?void 0:a.stop()}),this.root.nodes.forEach(hk),this.root.sharedNodes.clear()}}}function Tie(n){n.updateLayout()}function Eie(n){var e;const t=((e=n.resumeFrom)===null||e===void 0?void 0:e.snapshot)||n.snapshot;if(n.isLead()&&n.layout&&t&&n.hasListeners("didUpdate")){const{layoutBox:i,measuredBox:r}=n.layout,{animationType:s}=n.options,o=t.source!==n.layout.source;s==="size"?Zs(f=>{const m=o?t.measuredBox[f]:t.layoutBox[f],g=js(m);m.min=i[f].min,m.max=m.min+g}):oB(s,t.layoutBox,i)&&Zs(f=>{const m=o?t.measuredBox[f]:t.layoutBox[f],g=js(i[f]);m.max=m.min+g,n.relativeTarget&&!n.currentAnimation&&(n.isProjectionDirty=!0,n.relativeTarget[f].max=n.relativeTarget[f].min+g)});const a=Dd();wm(a,i,t.layoutBox);const l=Dd();o?wm(l,n.applyTransform(r,!0),t.measuredBox):wm(l,i,t.layoutBox);const c=!nB(a);let u=!1;if(!n.resumeFrom){const f=n.getClosestProjectingParent();if(f&&!f.resumeFrom){const{snapshot:m,layout:g}=f;if(m&&g){const x=bi();bm(x,t.layoutBox,m.layoutBox);const b=bi();bm(b,i,g.layoutBox),iB(x,b)||(u=!0),f.options.layoutRoot&&(n.relativeTarget=b,n.relativeTargetOrigin=x,n.relativeParent=f)}}}n.notifyListeners("didUpdate",{layout:i,snapshot:t,delta:l,layoutDelta:a,hasLayoutChanged:c,hasRelativeTargetChanged:u})}else if(n.isLead()){const{onExitComplete:i}=n.options;i&&i()}n.options.transition=void 0}function Cie(n){$p&&gu.totalNodes++,n.parent&&(n.isProjecting()||(n.isProjectionDirty=n.parent.isProjectionDirty),n.isSharedProjectionDirty||(n.isSharedProjectionDirty=!!(n.isProjectionDirty||n.parent.isProjectionDirty||n.parent.isSharedProjectionDirty)),n.isTransformDirty||(n.isTransformDirty=n.parent.isTransformDirty))}function Aie(n){n.isProjectionDirty=n.isSharedProjectionDirty=n.isTransformDirty=!1}function Mie(n){n.clearSnapshot()}function hk(n){n.clearMeasurements()}function Iie(n){n.isLayoutDirty=!1}function Pie(n){const{visualElement:e}=n.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),n.resetTransform()}function dk(n){n.finishAnimation(),n.targetDelta=n.relativeTarget=n.target=void 0,n.isProjectionDirty=!0}function Rie(n){n.resolveTargetDelta()}function Nie(n){n.calcProjection()}function Lie(n){n.resetSkewAndRotation()}function Die(n){n.removeLeadSnapshot()}function fk(n,e,t){n.translate=ci(e.translate,0,t),n.scale=ci(e.scale,1,t),n.origin=e.origin,n.originPoint=e.originPoint}function pk(n,e,t,i){n.min=ci(e.min,t.min,i),n.max=ci(e.max,t.max,i)}function kie(n,e,t,i){pk(n.x,e.x,t.x,i),pk(n.y,e.y,t.y,i)}function Oie(n){return n.animationValues&&n.animationValues.opacityExit!==void 0}const Uie={duration:.45,ease:[.4,0,.1,1]},mk=n=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(n),gk=mk("applewebkit/")&&!mk("chrome/")?Math.round:Dr;function yk(n){n.min=gk(n.min),n.max=gk(n.max)}function Fie(n){yk(n.x),yk(n.y)}function oB(n,e,t){return n==="position"||n==="preserve-aspect"&&!jne(lk(e),lk(t),.2)}function jie(n){var e;return n!==n.root&&((e=n.scroll)===null||e===void 0?void 0:e.wasRoot)}const Vie=sB({attachResizeListener:(n,e)=>Pa(n,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),XT={current:void 0},aB=sB({measureScroll:n=>({x:n.scrollLeft,y:n.scrollTop}),defaultParent:()=>{if(!XT.current){const n=new Vie({});n.mount(window),n.setOptions({layoutScroll:!0}),XT.current=n}return XT.current},resetTransform:(n,e)=>{n.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:n=>window.getComputedStyle(n).position==="fixed"}),Bie={pan:{Feature:tie},drag:{Feature:eie,ProjectionNode:aB,MeasureLayout:ZV}};function vk(n,e){const t=e?"pointerenter":"pointerleave",i=e?"onHoverStart":"onHoverEnd",r=(s,o)=>{if(s.pointerType==="touch"||HV())return;const a=n.getProps();n.animationState&&a.whileHover&&n.animationState.setActive("whileHover",e);const l=a[i];l&&Wn.postRender(()=>l(s,o))};return Ba(n.current,t,r,{passive:!n.getProps()[i]})}class zie extends Ic{mount(){this.unmount=Va(vk(this.node,!0),vk(this.node,!1))}unmount(){}}class Hie extends Ic{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Va(Pa(this.node.current,"focus",()=>this.onFocus()),Pa(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}const lB=(n,e)=>e?n===e?!0:lB(n,e.parentElement):!1;function YT(n,e){if(!e)return;const t=new PointerEvent("pointer"+n);e(t,Bw(t))}class Gie extends Ic{constructor(){super(...arguments),this.removeStartListeners=Dr,this.removeEndListeners=Dr,this.removeAccessibleListeners=Dr,this.startPointerPress=(e,t)=>{if(this.isPressing)return;this.removeEndListeners();const i=this.node.getProps(),s=Ba(window,"pointerup",(a,l)=>{if(!this.checkPressEnd())return;const{onTap:c,onTapCancel:u,globalTapTarget:f}=this.node.getProps(),m=!f&&!lB(this.node.current,a.target)?u:c;m&&Wn.update(()=>m(a,l))},{passive:!(i.onTap||i.onPointerUp)}),o=Ba(window,"pointercancel",(a,l)=>this.cancelPress(a,l),{passive:!(i.onTapCancel||i.onPointerCancel)});this.removeEndListeners=Va(s,o),this.startPress(e,t)},this.startAccessiblePress=()=>{const e=s=>{if(s.key!=="Enter"||this.isPressing)return;const o=a=>{a.key!=="Enter"||!this.checkPressEnd()||YT("up",(l,c)=>{const{onTap:u}=this.node.getProps();u&&Wn.postRender(()=>u(l,c))})};this.removeEndListeners(),this.removeEndListeners=Pa(this.node.current,"keyup",o),YT("down",(a,l)=>{this.startPress(a,l)})},t=Pa(this.node.current,"keydown",e),i=()=>{this.isPressing&&YT("cancel",(s,o)=>this.cancelPress(s,o))},r=Pa(this.node.current,"blur",i);this.removeAccessibleListeners=Va(t,r)}}startPress(e,t){this.isPressing=!0;const{onTapStart:i,whileTap:r}=this.node.getProps();r&&this.node.animationState&&this.node.animationState.setActive("whileTap",!0),i&&Wn.postRender(()=>i(e,t))}checkPressEnd(){return this.removeEndListeners(),this.isPressing=!1,this.node.getProps().whileTap&&this.node.animationState&&this.node.animationState.setActive("whileTap",!1),!HV()}cancelPress(e,t){if(!this.checkPressEnd())return;const{onTapCancel:i}=this.node.getProps();i&&Wn.postRender(()=>i(e,t))}mount(){const e=this.node.getProps(),t=Ba(e.globalTapTarget?window:this.node.current,"pointerdown",this.startPointerPress,{passive:!(e.onTapStart||e.onPointerStart)}),i=Pa(this.node.current,"focus",this.startAccessiblePress);this.removeStartListeners=Va(t,i)}unmount(){this.removeStartListeners(),this.removeEndListeners(),this.removeAccessibleListeners()}}const FE=new WeakMap,KT=new WeakMap,Wie=n=>{const e=FE.get(n.target);e&&e(n)},qie=n=>{n.forEach(Wie)};function $ie({root:n,...e}){const t=n||document;KT.has(t)||KT.set(t,{});const i=KT.get(t),r=JSON.stringify(e);return i[r]||(i[r]=new IntersectionObserver(qie,{root:n,...e})),i[r]}function Xie(n,e,t){const i=$ie(e);return FE.set(n,t),i.observe(n),()=>{FE.delete(n),i.unobserve(n)}}const Yie={some:0,all:1};class Kie extends Ic{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:t,margin:i,amount:r="some",once:s}=e,o={root:t?t.current:void 0,rootMargin:i,threshold:typeof r=="number"?r:Yie[r]},a=l=>{const{isIntersecting:c}=l;if(this.isInView===c||(this.isInView=c,s&&!c&&this.hasEnteredView))return;c&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",c);const{onViewportEnter:u,onViewportLeave:f}=this.node.getProps(),m=c?u:f;m&&m(l)};return Xie(this.node.current,o,a)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:t}=this.node;["amount","margin","root"].some(Jie(e,t))&&this.startObserver()}unmount(){}}function Jie({viewport:n={}},{viewport:e={}}={}){return t=>n[t]!==e[t]}const Qie={inView:{Feature:Kie},tap:{Feature:Gie},focus:{Feature:Hie},hover:{Feature:zie}},Zie={layout:{ProjectionNode:aB,MeasureLayout:ZV}},cB=B.createContext({transformPagePoint:n=>n,isStatic:!1,reducedMotion:"never"}),zw=B.createContext({}),kM=typeof window<"u",ere=kM?B.useLayoutEffect:B.useEffect,uB=B.createContext({strict:!1});function tre(n,e,t,i,r){var s,o;const{visualElement:a}=B.useContext(zw),l=B.useContext(uB),c=B.useContext(LM),u=B.useContext(cB).reducedMotion,f=B.useRef();i=i||l.renderer,!f.current&&i&&(f.current=i(n,{visualState:e,parent:a,props:t,presenceContext:c,blockInitialAnimation:c?c.initial===!1:!1,reducedMotionConfig:u}));const m=f.current,g=B.useContext(QV);m&&!m.projection&&r&&(m.type==="html"||m.type==="svg")&&nre(f.current,t,r,g);const x=B.useRef(!1);B.useInsertionEffect(()=>{m&&x.current&&m.update(t,c)});const b=t[DV],w=B.useRef(!!b&&!(!((s=window.MotionHandoffIsComplete)===null||s===void 0)&&s.call(window,b))&&((o=window.MotionHasOptimisedAnimation)===null||o===void 0?void 0:o.call(window,b)));return ere(()=>{m&&(x.current=!0,window.MotionIsMounted=!0,m.updateFeatures(),DM.render(m.render),w.current&&m.animationState&&m.animationState.animateChanges())}),B.useEffect(()=>{m&&(!w.current&&m.animationState&&m.animationState.animateChanges(),w.current&&(queueMicrotask(()=>{var v;(v=window.MotionHandoffMarkAsComplete)===null||v===void 0||v.call(window,b)}),w.current=!1))}),m}function nre(n,e,t,i){const{layoutId:r,layout:s,drag:o,dragConstraints:a,layoutScroll:l,layoutRoot:c}=e;n.projection=new t(n.latestValues,e["data-framer-portal-id"]?void 0:hB(n.parent)),n.projection.setOptions({layoutId:r,layout:s,alwaysMeasureLayout:!!o||a&&Ld(a),visualElement:n,animationType:typeof s=="string"?s:"both",initialPromotionConfig:i,layoutScroll:l,layoutRoot:c})}function hB(n){if(n)return n.options.allowProjection!==!1?n.projection:hB(n.parent)}function ire(n,e,t){return B.useCallback(i=>{i&&n.mount&&n.mount(i),e&&(i?e.mount(i):e.unmount()),t&&(typeof t=="function"?t(i):Ld(t)&&(t.current=i))},[e])}function Hw(n){return Fw(n.animate)||fM.some(e=>fg(n[e]))}function dB(n){return!!(Hw(n)||n.variants)}function rre(n,e){if(Hw(n)){const{initial:t,animate:i}=n;return{initial:t===!1||fg(t)?t:void 0,animate:fg(i)?i:void 0}}return n.inherit!==!1?e:{}}function sre(n){const{initial:e,animate:t}=rre(n,B.useContext(zw));return B.useMemo(()=>({initial:e,animate:t}),[xk(e),xk(t)])}function xk(n){return Array.isArray(n)?n.join(" "):n}const _k={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},df={};for(const n in _k)df[n]={isEnabled:e=>_k[n].some(t=>!!e[t])};function ore(n){for(const e in n)df[e]={...df[e],...n[e]}}const are=Symbol.for("motionComponentSymbol");function lre({preloadedFeatures:n,createVisualElement:e,useRender:t,useVisualState:i,Component:r}){n&&ore(n);function s(a,l){let c;const u={...B.useContext(cB),...a,layoutId:cre(a)},{isStatic:f}=u,m=sre(a),g=i(a,f);if(!f&&kM){ure();const x=hre(u);c=x.MeasureLayout,m.visualElement=tre(r,g,u,e,x.ProjectionNode)}return d.jsxs(zw.Provider,{value:m,children:[c&&m.visualElement?d.jsx(c,{visualElement:m.visualElement,...u}):null,t(r,a,ire(g,m.visualElement,l),g,f,m.visualElement)]})}const o=B.forwardRef(s);return o[are]=r,o}function cre({layoutId:n}){const e=B.useContext(JV).id;return e&&n!==void 0?e+"-"+n:n}function ure(n,e){B.useContext(uB).strict}function hre(n){const{drag:e,layout:t}=df;if(!e&&!t)return{};const i={...e,...t};return{MeasureLayout:e?.isEnabled(n)||t?.isEnabled(n)?i.MeasureLayout:void 0,ProjectionNode:i.ProjectionNode}}const dre=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function OM(n){return typeof n!="string"||n.includes("-")?!1:!!(dre.indexOf(n)>-1||/[A-Z]/u.test(n))}function fB(n,{style:e,vars:t},i,r){Object.assign(n.style,e,r&&r.getProjectionStyles(i));for(const s in t)n.style.setProperty(s,t[s])}const pB=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function mB(n,e,t,i){fB(n,e,void 0,i);for(const r in e.attrs)n.setAttribute(pB.has(r)?r:NM(r),e.attrs[r])}function gB(n,{layout:e,layoutId:t}){return fh.has(n)||n.startsWith("origin")||(e||t!==void 0)&&(!!g_[n]||n==="opacity")}function UM(n,e,t){var i;const{style:r}=n,s={};for(const o in r)(Rr(r[o])||e.style&&Rr(e.style[o])||gB(o,n)||((i=t?.getValue(o))===null||i===void 0?void 0:i.liveStyle)!==void 0)&&(s[o]=r[o]);return s}function yB(n,e,t){const i=UM(n,e,t);for(const r in n)if(Rr(n[r])||Rr(e[r])){const s=Kg.indexOf(r)!==-1?"attr"+r.charAt(0).toUpperCase()+r.substring(1):r;i[s]=n[r]}return i}function fre(n){const e=B.useRef(null);return e.current===null&&(e.current=n()),e.current}function pre({scrapeMotionValuesFromProps:n,createRenderState:e,onMount:t},i,r,s){const o={latestValues:mre(i,r,s,n),renderState:e()};return t&&(o.mount=a=>t(i,a,o)),o}const vB=n=>(e,t)=>{const i=B.useContext(zw),r=B.useContext(LM),s=()=>pre(n,e,i,r);return t?s():fre(s)};function mre(n,e,t,i){const r={},s=i(n,{});for(const m in s)r[m]=j0(s[m]);let{initial:o,animate:a}=n;const l=Hw(n),c=dB(n);e&&c&&!l&&n.inherit!==!1&&(o===void 0&&(o=e.initial),a===void 0&&(a=e.animate));let u=t?t.initial===!1:!1;u=u||o===!1;const f=u?a:o;if(f&&typeof f!="boolean"&&!Fw(f)){const m=Array.isArray(f)?f:[f];for(let g=0;g<m.length;g++){const x=hM(n,m[g]);if(x){const{transitionEnd:b,transition:w,...v}=x;for(const S in v){let E=v[S];if(Array.isArray(E)){const C=u?E.length-1:0;E=E[C]}E!==null&&(r[S]=E)}for(const S in b)r[S]=b[S]}}}return r}const FM=()=>({style:{},transform:{},transformOrigin:{},vars:{}}),xB=()=>({...FM(),attrs:{}}),_B=(n,e)=>e&&typeof n=="number"?e.transform(n):n,gre={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},yre=Kg.length;function vre(n,e,t){let i="",r=!0;for(let s=0;s<yre;s++){const o=Kg[s],a=n[o];if(a===void 0)continue;let l=!0;if(typeof a=="number"?l=a===(o.startsWith("scale")?1:0):l=parseFloat(a)===0,!l||t){const c=_B(a,wM[o]);if(!l){r=!1;const u=gre[o]||o;i+=`${u}(${c}) `}t&&(e[o]=c)}}return i=i.trim(),t?i=t(e,r?"":i):r&&(i="none"),i}function jM(n,e,t){const{style:i,vars:r,transformOrigin:s}=n;let o=!1,a=!1;for(const l in e){const c=e[l];if(fh.has(l)){o=!0;continue}else if(hV(l)){r[l]=c;continue}else{const u=_B(c,wM[l]);l.startsWith("origin")?(a=!0,s[l]=u):i[l]=u}}if(e.transform||(o||t?i.transform=vre(e,n.transform,t):i.transform&&(i.transform="none")),a){const{originX:l="50%",originY:c="50%",originZ:u=0}=s;i.transformOrigin=`${l} ${c} ${u}`}}function wk(n,e,t){return typeof n=="string"?n:Vt.transform(e+t*n)}function xre(n,e,t){const i=wk(e,n.x,n.width),r=wk(t,n.y,n.height);return`${i} ${r}`}const _re={offset:"stroke-dashoffset",array:"stroke-dasharray"},wre={offset:"strokeDashoffset",array:"strokeDasharray"};function bre(n,e,t=1,i=0,r=!0){n.pathLength=1;const s=r?_re:wre;n[s.offset]=Vt.transform(-i);const o=Vt.transform(e),a=Vt.transform(t);n[s.array]=`${o} ${a}`}function VM(n,{attrX:e,attrY:t,attrScale:i,originX:r,originY:s,pathLength:o,pathSpacing:a=1,pathOffset:l=0,...c},u,f){if(jM(n,c,f),u){n.style.viewBox&&(n.attrs.viewBox=n.style.viewBox);return}n.attrs=n.style,n.style={};const{attrs:m,style:g,dimensions:x}=n;m.transform&&(x&&(g.transform=m.transform),delete m.transform),x&&(r!==void 0||s!==void 0||g.transform)&&(g.transformOrigin=xre(x,r!==void 0?r:.5,s!==void 0?s:.5)),e!==void 0&&(m.x=e),t!==void 0&&(m.y=t),i!==void 0&&(m.scale=i),o!==void 0&&bre(m,o,a,l,!1)}const BM=n=>typeof n=="string"&&n.toLowerCase()==="svg",Sre={useVisualState:vB({scrapeMotionValuesFromProps:yB,createRenderState:xB,onMount:(n,e,{renderState:t,latestValues:i})=>{Wn.read(()=>{try{t.dimensions=typeof e.getBBox=="function"?e.getBBox():e.getBoundingClientRect()}catch{t.dimensions={x:0,y:0,width:0,height:0}}}),Wn.render(()=>{VM(t,i,BM(e.tagName),n.transformTemplate),mB(e,t)})}})},Tre={useVisualState:vB({scrapeMotionValuesFromProps:UM,createRenderState:FM})};function wB(n,e,t){for(const i in e)!Rr(e[i])&&!gB(i,t)&&(n[i]=e[i])}function Ere({transformTemplate:n},e){return B.useMemo(()=>{const t=FM();return jM(t,e,n),Object.assign({},t.vars,t.style)},[e])}function Cre(n,e){const t=n.style||{},i={};return wB(i,t,n),Object.assign(i,Ere(n,e)),i}function Are(n,e){const t={},i=Cre(n,e);return n.drag&&n.dragListener!==!1&&(t.draggable=!1,i.userSelect=i.WebkitUserSelect=i.WebkitTouchCallout="none",i.touchAction=n.drag===!0?"none":`pan-${n.drag==="x"?"y":"x"}`),n.tabIndex===void 0&&(n.onTap||n.onTapStart||n.whileTap)&&(t.tabIndex=0),t.style=i,t}const Mre=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function y_(n){return n.startsWith("while")||n.startsWith("drag")&&n!=="draggable"||n.startsWith("layout")||n.startsWith("onTap")||n.startsWith("onPan")||n.startsWith("onLayout")||Mre.has(n)}let bB=n=>!y_(n);function Ire(n){n&&(bB=e=>e.startsWith("on")?!y_(e):n(e))}try{Ire(require("@emotion/is-prop-valid").default)}catch{}function Pre(n,e,t){const i={};for(const r in n)r==="values"&&typeof n.values=="object"||(bB(r)||t===!0&&y_(r)||!e&&!y_(r)||n.draggable&&r.startsWith("onDrag"))&&(i[r]=n[r]);return i}function Rre(n,e,t,i){const r=B.useMemo(()=>{const s=xB();return VM(s,e,BM(i),n.transformTemplate),{...s.attrs,style:{...s.style}}},[e]);if(n.style){const s={};wB(s,n.style,n),r.style={...s,...r.style}}return r}function Nre(n=!1){return(t,i,r,{latestValues:s},o)=>{const l=(OM(t)?Rre:Are)(i,s,o,t),c=Pre(i,typeof t=="string",n),u=t!==B.Fragment?{...c,...l,ref:r}:{},{children:f}=i,m=B.useMemo(()=>Rr(f)?f.get():f,[f]);return B.createElement(t,{...u,children:m})}}function Lre(n,e){return function(i,{forwardMotionProps:r}={forwardMotionProps:!1}){const o={...OM(i)?Sre:Tre,preloadedFeatures:n,useRender:Nre(r),createVisualElement:e,Component:i};return lre(o)}}const jE={current:null},SB={current:!1};function Dre(){if(SB.current=!0,!!kM)if(window.matchMedia){const n=window.matchMedia("(prefers-reduced-motion)"),e=()=>jE.current=n.matches;n.addListener(e),e()}else jE.current=!1}function kre(n,e,t){for(const i in e){const r=e[i],s=t[i];if(Rr(r))n.addValue(i,r);else if(Rr(s))n.addValue(i,gg(r,{owner:n}));else if(s!==r)if(n.hasValue(i)){const o=n.getValue(i);o.liveStyle===!0?o.jump(r):o.hasAnimated||o.set(r)}else{const o=n.getStaticValue(i);n.addValue(i,gg(o!==void 0?o:r,{owner:n}))}}for(const i in t)e[i]===void 0&&n.removeValue(i);return e}const bk=new WeakMap,Ore=[...pV,Cr,hc],Ure=n=>Ore.find(fV(n)),Sk=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class Fre{scrapeMotionValuesFromProps(e,t,i){return{}}constructor({parent:e,props:t,presenceContext:i,reducedMotionConfig:r,blockInitialAnimation:s,visualState:o},a={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=vM,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const m=ta.now();this.renderScheduledAt<m&&(this.renderScheduledAt=m,Wn.render(this.render,!1,!0))};const{latestValues:l,renderState:c}=o;this.latestValues=l,this.baseTarget={...l},this.initialValues=t.initial?{...l}:{},this.renderState=c,this.parent=e,this.props=t,this.presenceContext=i,this.depth=e?e.depth+1:0,this.reducedMotionConfig=r,this.options=a,this.blockInitialAnimation=!!s,this.isControllingVariants=Hw(t),this.isVariantNode=dB(t),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:u,...f}=this.scrapeMotionValuesFromProps(t,{},this);for(const m in f){const g=f[m];l[m]!==void 0&&Rr(g)&&g.set(l[m],!1)}}mount(e){this.current=e,bk.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((t,i)=>this.bindToMotionValue(i,t)),SB.current||Dre(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:jE.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){bk.delete(this.current),this.projection&&this.projection.unmount(),cc(this.notifyUpdate),cc(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const t=this.features[e];t&&(t.unmount(),t.isMounted=!1)}this.current=null}bindToMotionValue(e,t){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const i=fh.has(e),r=t.on("change",a=>{this.latestValues[e]=a,this.props.onUpdate&&Wn.preRender(this.notifyUpdate),i&&this.projection&&(this.projection.isTransformDirty=!0)}),s=t.on("renderRequest",this.scheduleRender);let o;window.MotionCheckAppearSync&&(o=window.MotionCheckAppearSync(this,e,t)),this.valueSubscriptions.set(e,()=>{r(),s(),o&&o(),t.owner&&t.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in df){const t=df[e];if(!t)continue;const{isEnabled:i,Feature:r}=t;if(!this.features[e]&&r&&i(this.props)&&(this.features[e]=new r(this)),this.features[e]){const s=this.features[e];s.isMounted?s.update():(s.mount(),s.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):bi()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,t){this.latestValues[e]=t}update(e,t){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=t;for(let i=0;i<Sk.length;i++){const r=Sk[i];this.propEventSubscriptions[r]&&(this.propEventSubscriptions[r](),delete this.propEventSubscriptions[r]);const s="on"+r,o=e[s];o&&(this.propEventSubscriptions[r]=this.on(r,o))}this.prevMotionValues=kre(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const t=this.getClosestVariantNode();if(t)return t.variantChildren&&t.variantChildren.add(e),()=>t.variantChildren.delete(e)}addValue(e,t){const i=this.values.get(e);t!==i&&(i&&this.removeValue(e),this.bindToMotionValue(e,t),this.values.set(e,t),this.latestValues[e]=t.get())}removeValue(e){this.values.delete(e);const t=this.valueSubscriptions.get(e);t&&(t(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,t){if(this.props.values&&this.props.values[e])return this.props.values[e];let i=this.values.get(e);return i===void 0&&t!==void 0&&(i=gg(t===null?void 0:t,{owner:this}),this.addValue(e,i)),i}readValue(e,t){var i;let r=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:(i=this.getBaseTargetFromProps(this.props,e))!==null&&i!==void 0?i:this.readValueFromInstance(this.current,e,this.options);return r!=null&&(typeof r=="string"&&(cV(r)||lV(r))?r=parseFloat(r):!Ure(r)&&hc.test(t)&&(r=bV(e,t)),this.setBaseTarget(e,Rr(r)?r.get():r)),Rr(r)?r.get():r}setBaseTarget(e,t){this.baseTarget[e]=t}getBaseTarget(e){var t;const{initial:i}=this.props;let r;if(typeof i=="string"||typeof i=="object"){const o=hM(this.props,i,(t=this.presenceContext)===null||t===void 0?void 0:t.custom);o&&(r=o[e])}if(i&&r!==void 0)return r;const s=this.getBaseTargetFromProps(this.props,e);return s!==void 0&&!Rr(s)?s:this.initialValues[e]!==void 0&&r===void 0?void 0:this.baseTarget[e]}on(e,t){return this.events[e]||(this.events[e]=new RM),this.events[e].add(t)}notify(e,...t){this.events[e]&&this.events[e].notify(...t)}}class TB extends Fre{constructor(){super(...arguments),this.KeyframeResolver=SV}sortInstanceNodePosition(e,t){return e.compareDocumentPosition(t)&2?1:-1}getBaseTargetFromProps(e,t){return e.style?e.style[t]:void 0}removeValueFromRenderState(e,{vars:t,style:i}){delete t[e],delete i[e]}}function jre(n){return window.getComputedStyle(n)}class Vre extends TB{constructor(){super(...arguments),this.type="html",this.renderInstance=fB}readValueFromInstance(e,t){if(fh.has(t)){const i=bM(t);return i&&i.default||0}else{const i=jre(e),r=(hV(t)?i.getPropertyValue(t):i[t])||0;return typeof r=="string"?r.trim():r}}measureInstanceViewportBox(e,{transformPagePoint:t}){return YV(e,t)}build(e,t,i){jM(e,t,i.transformTemplate)}scrapeMotionValuesFromProps(e,t,i){return UM(e,t,i)}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;Rr(e)&&(this.childSubscription=e.on("change",t=>{this.current&&(this.current.textContent=`${t}`)}))}}class Bre extends TB{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=bi}getBaseTargetFromProps(e,t){return e[t]}readValueFromInstance(e,t){if(fh.has(t)){const i=bM(t);return i&&i.default||0}return t=pB.has(t)?t:NM(t),e.getAttribute(t)}scrapeMotionValuesFromProps(e,t,i){return yB(e,t,i)}build(e,t,i){VM(e,t,this.isSVGTag,i.transformTemplate)}renderInstance(e,t,i,r){mB(e,t,i,r)}mount(e){this.isSVGTag=BM(e.tagName),super.mount(e)}}const zre=(n,e)=>OM(n)?new Bre(e):new Vre(e,{allowProjection:n!==B.Fragment}),Hre=Lre({...Pne,...Qie,...Bie,...Zie},zre),Cn=wee(Hre),q={paddingX:"sm:px-16 px-6",paddingY:"sm:py-16 py-6",padding:"sm:px-16 px-6 sm:py-16 py-10",headText:"font-black text-white lg:text-[80px] sm:text-[60px] xs:text-[50px] text-[40px] lg:leading-[98px] mt-2",headSubText:"text-[#dfd9ff] font-medium lg:text-[30px] sm:text-[26px] xs:text-[20px] text-[16px] lg:leading-[40px]",paragraphHeadText:"text-white font-black md:text-[60px] sm:text-[50px] xs:text-[40px] text-[30px]",paragraphSubText:"sm:text-[18px] text-[14px] text-secondary uppercase tracking-wider",paragraphSubTextLower:"sm:text-[18px] text-[14px] text-secondary tracking-wider",dictionaryText:"text-black sm:text-[18px] text-[14px] tracking-wider uppercase mb-2",AiText:"text-white font-medium lg:text-[40px] sm:text-[26px] xs:text-[20px] text-[16px] lg:leading-[40px]",appointmentSubTextLower:"font-medium sm:text-[20px] text-[14px] text-secondary tracking-wide text-left"},Si=(n,e,t,i)=>({hidden:{x:n==="left"||n==="right"?100:0,y:n==="top"||n==="bottom"?100:0,opacity:0},show:{x:0,y:0,opacity:1,transition:{type:e,delay:t,duration:i,ease:"easeOut"}}}),v_=n=>({hidden:{y:-50,opacity:0},show:{y:0,opacity:1,transition:{type:"spring",duration:1.25,delay:n}}}),EB=(n,e)=>({hidden:{},show:{transition:{staggerChildren:n,delayChildren:e||0}}}),zt=(n,e)=>function(i){return d.jsxs(Cn.section,{variants:EB(),initial:"hidden",whileInView:"show",viewport:{once:!0,amount:.25},className:`${q.padding} max-w-7xl mx-auto relative z-0`,children:[d.jsxs("span",{className:"hash-span",id:e,children:[" ",""," "]}),d.jsx(n,{...i})]})},Pn=({children:n})=>(B.useEffect(()=>{window.scrollTo(0,0)},[]),d.jsx(d.Fragment,{children:n})),Gre=()=>{const{progress:n}=ZZ();return d.jsxs(QZ,{as:"div",center:!0,style:{display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column"},children:[d.jsx("span",{className:"canvas-loader"}),d.jsxs("p",{style:{fontSize:14,color:"#F1F1F1",fontWeight:800,marginTop:40},children:[n.toFixed(2),"%"]})]})},CB=()=>d.jsx(W4,{children:d.jsx(Gre,{})});var AB={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},Tk=Gl.createContext&&Gl.createContext(AB),Wre=["attr","size","title"];function qre(n,e){if(n==null)return{};var t=$re(n,e),i,r;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);for(r=0;r<s.length;r++)i=s[r],!(e.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(n,i)&&(t[i]=n[i])}return t}function $re(n,e){if(n==null)return{};var t={};for(var i in n)if(Object.prototype.hasOwnProperty.call(n,i)){if(e.indexOf(i)>=0)continue;t[i]=n[i]}return t}function x_(){return x_=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},x_.apply(this,arguments)}function Ek(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),t.push.apply(t,i)}return t}function __(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?Ek(Object(t),!0).forEach(function(i){Xre(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):Ek(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}function Xre(n,e,t){return e=Yre(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function Yre(n){var e=Kre(n,"string");return typeof e=="symbol"?e:e+""}function Kre(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e||"default");if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function MB(n){return n&&n.map((e,t)=>Gl.createElement(e.tag,__({key:t},e.attr),MB(e.child)))}function ph(n){return e=>Gl.createElement(Jre,x_({attr:__({},n.attr)},e),MB(n.child))}function Jre(n){var e=t=>{var{attr:i,size:r,title:s}=n,o=qre(n,Wre),a=r||t.size||"1em",l;return t.className&&(l=t.className),n.className&&(l=(l?l+" ":"")+n.className),Gl.createElement("svg",x_({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,i,o,{className:l,style:__(__({color:n.color||t.color},t.style),n.style),height:a,width:a,xmlns:"http://www.w3.org/2000/svg"}),s&&Gl.createElement("title",null,s),n.children)};return Tk!==void 0?Gl.createElement(Tk.Consumer,null,t=>e(t)):e(AB)}function IB(n){return ph({tag:"svg",attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M634 471L36 3.51A16 16 0 0 0 13.51 6l-10 12.49A16 16 0 0 0 6 41l598 467.49a16 16 0 0 0 22.49-2.49l10-12.49A16 16 0 0 0 634 471zM296.79 146.47l134.79 105.38C429.36 191.91 380.48 144 320 144a112.26 112.26 0 0 0-23.21 2.47zm46.42 219.07L208.42 260.16C210.65 320.09 259.53 368 320 368a113 113 0 0 0 23.21-2.46zM320 112c98.65 0 189.09 55 237.93 144a285.53 285.53 0 0 1-44 60.2l37.74 29.5a333.7 333.7 0 0 0 52.9-75.11 32.35 32.35 0 0 0 0-29.19C550.29 135.59 442.93 64 320 64c-36.7 0-71.71 7-104.63 18.81l46.41 36.29c18.94-4.3 38.34-7.1 58.22-7.1zm0 288c-98.65 0-189.08-55-237.93-144a285.47 285.47 0 0 1 44.05-60.19l-37.74-29.5a333.6 333.6 0 0 0-52.89 75.1 32.35 32.35 0 0 0 0 29.19C89.72 376.41 197.08 448 320 448c36.7 0 71.71-7.05 104.63-18.81l-46.41-36.28C359.28 397.2 339.89 400 320 400z"},child:[]}]})(n)}function PB(n){return ph({tag:"svg",attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M288 144a110.94 110.94 0 0 0-31.24 5 55.4 55.4 0 0 1 7.24 27 56 56 0 0 1-56 56 55.4 55.4 0 0 1-27-7.24A111.71 111.71 0 1 0 288 144zm284.52 97.4C518.29 135.59 410.93 64 288 64S57.68 135.64 3.48 241.41a32.35 32.35 0 0 0 0 29.19C57.71 376.41 165.07 448 288 448s230.32-71.64 284.52-177.41a32.35 32.35 0 0 0 0-29.19zM288 400c-98.65 0-189.09-55-237.93-144C98.91 167 189.34 112 288 112s189.09 55 237.93 144C477.1 345 386.66 400 288 400z"},child:[]}]})(n)}var Ck={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const RB=function(n){const e=[];let t=0;for(let i=0;i<n.length;i++){let r=n.charCodeAt(i);r<128?e[t++]=r:r<2048?(e[t++]=r>>6|192,e[t++]=r&63|128):(r&64512)===55296&&i+1<n.length&&(n.charCodeAt(i+1)&64512)===56320?(r=65536+((r&1023)<<10)+(n.charCodeAt(++i)&1023),e[t++]=r>>18|240,e[t++]=r>>12&63|128,e[t++]=r>>6&63|128,e[t++]=r&63|128):(e[t++]=r>>12|224,e[t++]=r>>6&63|128,e[t++]=r&63|128)}return e},Qre=function(n){const e=[];let t=0,i=0;for(;t<n.length;){const r=n[t++];if(r<128)e[i++]=String.fromCharCode(r);else if(r>191&&r<224){const s=n[t++];e[i++]=String.fromCharCode((r&31)<<6|s&63)}else if(r>239&&r<365){const s=n[t++],o=n[t++],a=n[t++],l=((r&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[i++]=String.fromCharCode(55296+(l>>10)),e[i++]=String.fromCharCode(56320+(l&1023))}else{const s=n[t++],o=n[t++];e[i++]=String.fromCharCode((r&15)<<12|(s&63)<<6|o&63)}}return e.join("")},NB={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let r=0;r<n.length;r+=3){const s=n[r],o=r+1<n.length,a=o?n[r+1]:0,l=r+2<n.length,c=l?n[r+2]:0,u=s>>2,f=(s&3)<<4|a>>4;let m=(a&15)<<2|c>>6,g=c&63;l||(g=64,o||(m=64)),i.push(t[u],t[f],t[m],t[g])}return i.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(RB(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):Qre(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let r=0;r<n.length;){const s=t[n.charAt(r++)],a=r<n.length?t[n.charAt(r)]:0;++r;const c=r<n.length?t[n.charAt(r)]:64;++r;const f=r<n.length?t[n.charAt(r)]:64;if(++r,s==null||a==null||c==null||f==null)throw new Zre;const m=s<<2|a>>4;if(i.push(m),c!==64){const g=a<<4&240|c>>2;if(i.push(g),f!==64){const x=c<<6&192|f;i.push(x)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class Zre extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const ese=function(n){const e=RB(n);return NB.encodeByteArray(e,!0)},w_=function(n){return ese(n).replace(/\./g,"")},LB=function(n){try{return NB.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tse(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nse=()=>tse().__FIREBASE_DEFAULTS__,ise=()=>{if(typeof process>"u"||typeof Ck>"u")return;const n=Ck.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},rse=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&LB(n[1]);return e&&JSON.parse(e)},Gw=()=>{try{return nse()||ise()||rse()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},DB=n=>{var e,t;return(t=(e=Gw())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},sse=n=>{const e=DB(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),i]:[e.substring(0,t),i]},kB=()=>{var n;return(n=Gw())===null||n===void 0?void 0:n.config},OB=n=>{var e;return(e=Gw())===null||e===void 0?void 0:e[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ose{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,i)=>{t?this.reject(t):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,i))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ase(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},i=e||"demo-project",r=n.iat||0,s=n.sub||n.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:r,exp:r+3600,auth_time:r,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},n);return[w_(JSON.stringify(t)),w_(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ur(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function lse(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(Ur())}function cse(){var n;const e=(n=Gw())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function use(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function hse(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function dse(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function fse(){const n=Ur();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function pse(){return!cse()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function mse(){try{return typeof indexedDB=="object"}catch{return!1}}function gse(){return new Promise((n,e)=>{try{let t=!0;const i="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(i);r.onsuccess=()=>{r.result.close(),t||self.indexedDB.deleteDatabase(i),n(!0)},r.onupgradeneeded=()=>{t=!1},r.onerror=()=>{var s;e(((s=r.error)===null||s===void 0?void 0:s.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yse="FirebaseError";class il extends Error{constructor(e,t,i){super(t),this.code=e,this.customData=i,this.name=yse,Object.setPrototypeOf(this,il.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Zg.prototype.create)}}class Zg{constructor(e,t,i){this.service=e,this.serviceName=t,this.errors=i}create(e,...t){const i=t[0]||{},r=`${this.service}/${e}`,s=this.errors[e],o=s?vse(s,i):"Error",a=`${this.serviceName}: ${o} (${r}).`;return new il(r,a,i)}}function vse(n,e){return n.replace(xse,(t,i)=>{const r=e[i];return r!=null?String(r):`<${i}?>`})}const xse=/\{\$([^}]+)}/g;function _se(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function b_(n,e){if(n===e)return!0;const t=Object.keys(n),i=Object.keys(e);for(const r of t){if(!i.includes(r))return!1;const s=n[r],o=e[r];if(Ak(s)&&Ak(o)){if(!b_(s,o))return!1}else if(s!==o)return!1}for(const r of i)if(!t.includes(r))return!1;return!0}function Ak(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ey(n){const e=[];for(const[t,i]of Object.entries(n))Array.isArray(i)?i.forEach(r=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(r))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function Xp(n){const e={};return n.replace(/^\?/,"").split("&").forEach(i=>{if(i){const[r,s]=i.split("=");e[decodeURIComponent(r)]=decodeURIComponent(s)}}),e}function Yp(n){const e=n.indexOf("?");if(!e)return"";const t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function wse(n,e){const t=new bse(n,e);return t.subscribe.bind(t)}class bse{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,i){let r;if(e===void 0&&t===void 0&&i===void 0)throw new Error("Missing Observer.");Sse(e,["next","error","complete"])?r=e:r={next:e,error:t,complete:i},r.next===void 0&&(r.next=JT),r.error===void 0&&(r.error=JT),r.complete===void 0&&(r.complete=JT);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch{}}),this.observers.push(r),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Sse(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function JT(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function nr(n){return n&&n._delegate?n._delegate:n}class eh{constructor(e,t,i){this.name=e,this.instanceFactory=t,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yu="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tse{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const i=new ose;if(this.instancesDeferred.set(t,i),this.isInitialized(t)||this.shouldAutoInitialize())try{const r=this.getOrInitializeService({instanceIdentifier:t});r&&i.resolve(r)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const i=this.normalizeInstanceIdentifier(e?.identifier),r=(t=e?.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(s){if(r)return null;throw s}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Cse(e))try{this.getOrInitializeService({instanceIdentifier:yu})}catch{}for(const[t,i]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(t);try{const s=this.getOrInitializeService({instanceIdentifier:r});i.resolve(s)}catch{}}}}clearInstance(e=yu){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=yu){return this.instances.has(e)}getOptions(e=yu){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:i,options:t});for(const[s,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(s);i===a&&o.resolve(r)}return r}onInit(e,t){var i;const r=this.normalizeInstanceIdentifier(t),s=(i=this.onInitCallbacks.get(r))!==null&&i!==void 0?i:new Set;s.add(e),this.onInitCallbacks.set(r,s);const o=this.instances.get(r);return o&&e(o,r),()=>{s.delete(e)}}invokeOnInitCallbacks(e,t){const i=this.onInitCallbacks.get(t);if(i)for(const r of i)try{r(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:Ese(e),options:t}),this.instances.set(e,i),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=yu){return this.component?this.component.multipleInstances?e:yu:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Ese(n){return n===yu?void 0:n}function Cse(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ase{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new Tse(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var mn;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(mn||(mn={}));const Mse={debug:mn.DEBUG,verbose:mn.VERBOSE,info:mn.INFO,warn:mn.WARN,error:mn.ERROR,silent:mn.SILENT},Ise=mn.INFO,Pse={[mn.DEBUG]:"log",[mn.VERBOSE]:"log",[mn.INFO]:"info",[mn.WARN]:"warn",[mn.ERROR]:"error"},Rse=(n,e,...t)=>{if(e<n.logLevel)return;const i=new Date().toISOString(),r=Pse[e];if(r)console[r](`[${i}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class zM{constructor(e){this.name=e,this._logLevel=Ise,this._logHandler=Rse,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in mn))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Mse[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,mn.DEBUG,...e),this._logHandler(this,mn.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,mn.VERBOSE,...e),this._logHandler(this,mn.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,mn.INFO,...e),this._logHandler(this,mn.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,mn.WARN,...e),this._logHandler(this,mn.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,mn.ERROR,...e),this._logHandler(this,mn.ERROR,...e)}}const Nse=(n,e)=>e.some(t=>n instanceof t);let Mk,Ik;function Lse(){return Mk||(Mk=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Dse(){return Ik||(Ik=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const UB=new WeakMap,VE=new WeakMap,FB=new WeakMap,QT=new WeakMap,HM=new WeakMap;function kse(n){const e=new Promise((t,i)=>{const r=()=>{n.removeEventListener("success",s),n.removeEventListener("error",o)},s=()=>{t(ec(n.result)),r()},o=()=>{i(n.error),r()};n.addEventListener("success",s),n.addEventListener("error",o)});return e.then(t=>{t instanceof IDBCursor&&UB.set(t,n)}).catch(()=>{}),HM.set(e,n),e}function Ose(n){if(VE.has(n))return;const e=new Promise((t,i)=>{const r=()=>{n.removeEventListener("complete",s),n.removeEventListener("error",o),n.removeEventListener("abort",o)},s=()=>{t(),r()},o=()=>{i(n.error||new DOMException("AbortError","AbortError")),r()};n.addEventListener("complete",s),n.addEventListener("error",o),n.addEventListener("abort",o)});VE.set(n,e)}let BE={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return VE.get(n);if(e==="objectStoreNames")return n.objectStoreNames||FB.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return ec(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function Use(n){BE=n(BE)}function Fse(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const i=n.call(ZT(this),e,...t);return FB.set(i,e.sort?e.sort():[e]),ec(i)}:Dse().includes(n)?function(...e){return n.apply(ZT(this),e),ec(UB.get(this))}:function(...e){return ec(n.apply(ZT(this),e))}}function jse(n){return typeof n=="function"?Fse(n):(n instanceof IDBTransaction&&Ose(n),Nse(n,Lse())?new Proxy(n,BE):n)}function ec(n){if(n instanceof IDBRequest)return kse(n);if(QT.has(n))return QT.get(n);const e=jse(n);return e!==n&&(QT.set(n,e),HM.set(e,n)),e}const ZT=n=>HM.get(n);function Vse(n,e,{blocked:t,upgrade:i,blocking:r,terminated:s}={}){const o=indexedDB.open(n,e),a=ec(o);return i&&o.addEventListener("upgradeneeded",l=>{i(ec(o.result),l.oldVersion,l.newVersion,ec(o.transaction),l)}),t&&o.addEventListener("blocked",l=>t(l.oldVersion,l.newVersion,l)),a.then(l=>{s&&l.addEventListener("close",()=>s()),r&&l.addEventListener("versionchange",c=>r(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}const Bse=["get","getKey","getAll","getAllKeys","count"],zse=["put","add","delete","clear"],e1=new Map;function Pk(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(e1.get(e))return e1.get(e);const t=e.replace(/FromIndex$/,""),i=e!==t,r=zse.includes(t);if(!(t in(i?IDBIndex:IDBObjectStore).prototype)||!(r||Bse.includes(t)))return;const s=async function(o,...a){const l=this.transaction(o,r?"readwrite":"readonly");let c=l.store;return i&&(c=c.index(a.shift())),(await Promise.all([c[t](...a),r&&l.done]))[0]};return e1.set(e,s),s}Use(n=>({...n,get:(e,t,i)=>Pk(e,t)||n.get(e,t,i),has:(e,t)=>!!Pk(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hse{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(Gse(t)){const i=t.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(t=>t).join(" ")}}function Gse(n){const e=n.getComponent();return e?.type==="VERSION"}const zE="@firebase/app",Rk="0.10.16";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qa=new zM("@firebase/app"),Wse="@firebase/app-compat",qse="@firebase/analytics-compat",$se="@firebase/analytics",Xse="@firebase/app-check-compat",Yse="@firebase/app-check",Kse="@firebase/auth",Jse="@firebase/auth-compat",Qse="@firebase/database",Zse="@firebase/data-connect",eoe="@firebase/database-compat",toe="@firebase/functions",noe="@firebase/functions-compat",ioe="@firebase/installations",roe="@firebase/installations-compat",soe="@firebase/messaging",ooe="@firebase/messaging-compat",aoe="@firebase/performance",loe="@firebase/performance-compat",coe="@firebase/remote-config",uoe="@firebase/remote-config-compat",hoe="@firebase/storage",doe="@firebase/storage-compat",foe="@firebase/firestore",poe="@firebase/vertexai",moe="@firebase/firestore-compat",goe="firebase",yoe="11.0.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HE="[DEFAULT]",voe={[zE]:"fire-core",[Wse]:"fire-core-compat",[$se]:"fire-analytics",[qse]:"fire-analytics-compat",[Yse]:"fire-app-check",[Xse]:"fire-app-check-compat",[Kse]:"fire-auth",[Jse]:"fire-auth-compat",[Qse]:"fire-rtdb",[Zse]:"fire-data-connect",[eoe]:"fire-rtdb-compat",[toe]:"fire-fn",[noe]:"fire-fn-compat",[ioe]:"fire-iid",[roe]:"fire-iid-compat",[soe]:"fire-fcm",[ooe]:"fire-fcm-compat",[aoe]:"fire-perf",[loe]:"fire-perf-compat",[coe]:"fire-rc",[uoe]:"fire-rc-compat",[hoe]:"fire-gcs",[doe]:"fire-gcs-compat",[foe]:"fire-fst",[moe]:"fire-fst-compat",[poe]:"fire-vertex","fire-js":"fire-js",[goe]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S_=new Map,xoe=new Map,GE=new Map;function Nk(n,e){try{n.container.addComponent(e)}catch(t){Qa.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function ff(n){const e=n.name;if(GE.has(e))return Qa.debug(`There were multiple attempts to register component ${e}.`),!1;GE.set(e,n);for(const t of S_.values())Nk(t,n);for(const t of xoe.values())Nk(t,n);return!0}function GM(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function $o(n){return n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _oe={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},tc=new Zg("app","Firebase",_oe);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class woe{constructor(e,t,i){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new eh("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw tc.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Nf=yoe;function jB(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const i=Object.assign({name:HE,automaticDataCollectionEnabled:!1},e),r=i.name;if(typeof r!="string"||!r)throw tc.create("bad-app-name",{appName:String(r)});if(t||(t=kB()),!t)throw tc.create("no-options");const s=S_.get(r);if(s){if(b_(t,s.options)&&b_(i,s.config))return s;throw tc.create("duplicate-app",{appName:r})}const o=new Ase(r);for(const l of GE.values())o.addComponent(l);const a=new woe(t,i,o);return S_.set(r,a),a}function VB(n=HE){const e=S_.get(n);if(!e&&n===HE&&kB())return jB();if(!e)throw tc.create("no-app",{appName:n});return e}function nc(n,e,t){var i;let r=(i=voe[n])!==null&&i!==void 0?i:n;t&&(r+=`-${t}`);const s=r.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const a=[`Unable to register library "${r}" with version "${e}":`];s&&a.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Qa.warn(a.join(" "));return}ff(new eh(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const boe="firebase-heartbeat-database",Soe=1,yg="firebase-heartbeat-store";let t1=null;function BB(){return t1||(t1=Vse(boe,Soe,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(yg)}catch(t){console.warn(t)}}}}).catch(n=>{throw tc.create("idb-open",{originalErrorMessage:n.message})})),t1}async function Toe(n){try{const t=(await BB()).transaction(yg),i=await t.objectStore(yg).get(zB(n));return await t.done,i}catch(e){if(e instanceof il)Qa.warn(e.message);else{const t=tc.create("idb-get",{originalErrorMessage:e?.message});Qa.warn(t.message)}}}async function Lk(n,e){try{const i=(await BB()).transaction(yg,"readwrite");await i.objectStore(yg).put(e,zB(n)),await i.done}catch(t){if(t instanceof il)Qa.warn(t.message);else{const i=tc.create("idb-set",{originalErrorMessage:t?.message});Qa.warn(i.message)}}}function zB(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Eoe=1024,Coe=30*24*60*60*1e3;class Aoe{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new Ioe(t),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,t;try{const r=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=Dk();return((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s)?void 0:(this._heartbeatsCache.heartbeats.push({date:s,agent:r}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(o=>{const a=new Date(o.date).valueOf();return Date.now()-a<=Coe}),this._storage.overwrite(this._heartbeatsCache))}catch(i){Qa.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=Dk(),{heartbeatsToSend:i,unsentEntries:r}=Moe(this._heartbeatsCache.heartbeats),s=w_(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(t){return Qa.warn(t),""}}}function Dk(){return new Date().toISOString().substring(0,10)}function Moe(n,e=Eoe){const t=[];let i=n.slice();for(const r of n){const s=t.find(o=>o.agent===r.agent);if(s){if(s.dates.push(r.date),kk(t)>e){s.dates.pop();break}}else if(t.push({agent:r.agent,dates:[r.date]}),kk(t)>e){t.pop();break}i=i.slice(1)}return{heartbeatsToSend:t,unsentEntries:i}}class Ioe{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return mse()?gse().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await Toe(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const r=await this.read();return Lk(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const r=await this.read();return Lk(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function kk(n){return w_(JSON.stringify({version:2,heartbeats:n})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Poe(n){ff(new eh("platform-logger",e=>new Hse(e),"PRIVATE")),ff(new eh("heartbeat",e=>new Aoe(e),"PRIVATE")),nc(zE,Rk,n),nc(zE,Rk,"esm2017"),nc("fire-js","")}Poe("");var Roe="firebase",Noe="11.0.2";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */nc(Roe,Noe,"app");function WM(n,e){var t={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(t[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(n);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(n,i[r])&&(t[i[r]]=n[i[r]]);return t}function HB(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Loe=HB,GB=new Zg("auth","Firebase",HB());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T_=new zM("@firebase/auth");function Doe(n,...e){T_.logLevel<=mn.WARN&&T_.warn(`Auth (${Nf}): ${n}`,...e)}function V0(n,...e){T_.logLevel<=mn.ERROR&&T_.error(`Auth (${Nf}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ro(n,...e){throw qM(n,...e)}function na(n,...e){return qM(n,...e)}function WB(n,e,t){const i=Object.assign(Object.assign({},Loe()),{[e]:t});return new Zg("auth","Firebase",i).create(e,{appName:n.name})}function za(n){return WB(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function qM(n,...e){if(typeof n!="string"){const t=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=n.name),n._errorFactory.create(t,...i)}return GB.create(n,...e)}function Gt(n,e,...t){if(!n)throw qM(e,...t)}function Ra(n){const e="INTERNAL ASSERTION FAILED: "+n;throw V0(e),new Error(e)}function Za(n,e){n||Ra(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function WE(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function koe(){return Ok()==="http:"||Ok()==="https:"}function Ok(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ooe(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(koe()||hse()||"connection"in navigator)?navigator.onLine:!0}function Uoe(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ty{constructor(e,t){this.shortDelay=e,this.longDelay=t,Za(t>e,"Short delay should be less than long delay!"),this.isMobile=lse()||dse()}get(){return Ooe()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $M(n,e){Za(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qB{static initialize(e,t,i){this.fetchImpl=e,t&&(this.headersImpl=t),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;Ra("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;Ra("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;Ra("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Foe={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const joe=new ty(3e4,6e4);function rl(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}async function sl(n,e,t,i,r={}){return $B(n,r,async()=>{let s={},o={};i&&(e==="GET"?o=i:s={body:JSON.stringify(i)});const a=ey(Object.assign({key:n.config.apiKey},o)).slice(1),l=await n._getAdditionalHeaders();l["Content-Type"]="application/json",n.languageCode&&(l["X-Firebase-Locale"]=n.languageCode);const c=Object.assign({method:e,headers:l},s);return use()||(c.referrerPolicy="no-referrer"),qB.fetch()(XB(n,n.config.apiHost,t,a),c)})}async function $B(n,e,t){n._canInitEmulator=!1;const i=Object.assign(Object.assign({},Foe),e);try{const r=new Boe(n),s=await Promise.race([t(),r.promise]);r.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw u0(n,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const a=s.ok?o.errorMessage:o.error.message,[l,c]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw u0(n,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw u0(n,"email-already-in-use",o);if(l==="USER_DISABLED")throw u0(n,"user-disabled",o);const u=i[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw WB(n,u,c);Ro(n,u)}}catch(r){if(r instanceof il)throw r;Ro(n,"network-request-failed",{message:String(r)})}}async function ny(n,e,t,i,r={}){const s=await sl(n,e,t,i,r);return"mfaPendingCredential"in s&&Ro(n,"multi-factor-auth-required",{_serverResponse:s}),s}function XB(n,e,t,i){const r=`${e}${t}?${i}`;return n.config.emulator?$M(n.config,r):`${n.config.apiScheme}://${r}`}function Voe(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class Boe{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,i)=>{this.timer=setTimeout(()=>i(na(this.auth,"network-request-failed")),joe.get())})}}function u0(n,e,t){const i={appName:n.name};t.email&&(i.email=t.email),t.phoneNumber&&(i.phoneNumber=t.phoneNumber);const r=na(n,e,i);return r.customData._tokenResponse=t,r}function Uk(n){return n!==void 0&&n.enterprise!==void 0}class zoe{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return Voe(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function Hoe(n,e){return sl(n,"GET","/v2/recaptchaConfig",rl(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Goe(n,e){return sl(n,"POST","/v1/accounts:delete",e)}async function YB(n,e){return sl(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sm(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function Woe(n,e=!1){const t=nr(n),i=await t.getIdToken(e),r=XM(i);Gt(r&&r.exp&&r.auth_time&&r.iat,t.auth,"internal-error");const s=typeof r.firebase=="object"?r.firebase:void 0,o=s?.sign_in_provider;return{claims:r,token:i,authTime:Sm(n1(r.auth_time)),issuedAtTime:Sm(n1(r.iat)),expirationTime:Sm(n1(r.exp)),signInProvider:o||null,signInSecondFactor:s?.sign_in_second_factor||null}}function n1(n){return Number(n)*1e3}function XM(n){const[e,t,i]=n.split(".");if(e===void 0||t===void 0||i===void 0)return V0("JWT malformed, contained fewer than 3 sections"),null;try{const r=LB(t);return r?JSON.parse(r):(V0("Failed to decode base64 JWT payload"),null)}catch(r){return V0("Caught error parsing JWT payload as JSON",r?.toString()),null}}function Fk(n){const e=XM(n);return Gt(e,"internal-error"),Gt(typeof e.exp<"u","internal-error"),Gt(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vg(n,e,t=!1){if(t)return e;try{return await e}catch(i){throw i instanceof il&&qoe(i)&&n.auth.currentUser===n&&await n.auth.signOut(),i}}function qoe({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $oe{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const i=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),i}else{this.errorBackoff=3e4;const r=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qE{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Sm(this.lastLoginAt),this.creationTime=Sm(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function E_(n){var e;const t=n.auth,i=await n.getIdToken(),r=await vg(n,YB(t,{idToken:i}));Gt(r?.users.length,t,"internal-error");const s=r.users[0];n._notifyReloadListener(s);const o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?KB(s.providerUserInfo):[],a=Yoe(n.providerData,o),l=n.isAnonymous,c=!(n.email&&s.passwordHash)&&!a?.length,u=l?c:!1,f={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new qE(s.createdAt,s.lastLoginAt),isAnonymous:u};Object.assign(n,f)}async function Xoe(n){const e=nr(n);await E_(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function Yoe(n,e){return[...n.filter(i=>!e.some(r=>r.providerId===i.providerId)),...e]}function KB(n){return n.map(e=>{var{providerId:t}=e,i=WM(e,["providerId"]);return{providerId:t,uid:i.rawId||"",displayName:i.displayName||null,email:i.email||null,phoneNumber:i.phoneNumber||null,photoURL:i.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Koe(n,e){const t=await $B(n,{},async()=>{const i=ey({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:r,apiKey:s}=n.config,o=XB(n,r,"/v1/token",`key=${s}`),a=await n._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",qB.fetch()(o,{method:"POST",headers:a,body:i})});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function Joe(n,e){return sl(n,"POST","/v2/accounts:revokeToken",rl(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qd{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Gt(e.idToken,"internal-error"),Gt(typeof e.idToken<"u","internal-error"),Gt(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Fk(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Gt(e.length!==0,"internal-error");const t=Fk(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Gt(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:i,refreshToken:r,expiresIn:s}=await Koe(e,t);this.updateTokensAndExpiration(i,r,Number(s))}updateTokensAndExpiration(e,t,i){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,t){const{refreshToken:i,accessToken:r,expirationTime:s}=t,o=new qd;return i&&(Gt(typeof i=="string","internal-error",{appName:e}),o.refreshToken=i),r&&(Gt(typeof r=="string","internal-error",{appName:e}),o.accessToken=r),s&&(Gt(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new qd,this.toJSON())}_performRefresh(){return Ra("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sl(n,e){Gt(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class Na{constructor(e){var{uid:t,auth:i,stsTokenManager:r}=e,s=WM(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new $oe(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=i,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new qE(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const t=await vg(this,this.stsTokenManager.getToken(this.auth,e));return Gt(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return Woe(this,e)}reload(){return Xoe(this)}_assign(e){this!==e&&(Gt(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new Na(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){Gt(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),t&&await E_(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if($o(this.auth.app))return Promise.reject(za(this.auth));const e=await this.getIdToken();return await vg(this,Goe(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var i,r,s,o,a,l,c,u;const f=(i=t.displayName)!==null&&i!==void 0?i:void 0,m=(r=t.email)!==null&&r!==void 0?r:void 0,g=(s=t.phoneNumber)!==null&&s!==void 0?s:void 0,x=(o=t.photoURL)!==null&&o!==void 0?o:void 0,b=(a=t.tenantId)!==null&&a!==void 0?a:void 0,w=(l=t._redirectEventId)!==null&&l!==void 0?l:void 0,v=(c=t.createdAt)!==null&&c!==void 0?c:void 0,S=(u=t.lastLoginAt)!==null&&u!==void 0?u:void 0,{uid:E,emailVerified:C,isAnonymous:V,providerData:L,stsTokenManager:N}=t;Gt(E&&N,e,"internal-error");const I=qd.fromJSON(this.name,N);Gt(typeof E=="string",e,"internal-error"),Sl(f,e.name),Sl(m,e.name),Gt(typeof C=="boolean",e,"internal-error"),Gt(typeof V=="boolean",e,"internal-error"),Sl(g,e.name),Sl(x,e.name),Sl(b,e.name),Sl(w,e.name),Sl(v,e.name),Sl(S,e.name);const A=new Na({uid:E,auth:e,email:m,emailVerified:C,displayName:f,isAnonymous:V,photoURL:x,phoneNumber:g,tenantId:b,stsTokenManager:I,createdAt:v,lastLoginAt:S});return L&&Array.isArray(L)&&(A.providerData=L.map(M=>Object.assign({},M))),w&&(A._redirectEventId=w),A}static async _fromIdTokenResponse(e,t,i=!1){const r=new qd;r.updateFromServerResponse(t);const s=new Na({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:i});return await E_(s),s}static async _fromGetAccountInfoResponse(e,t,i){const r=t.users[0];Gt(r.localId!==void 0,"internal-error");const s=r.providerUserInfo!==void 0?KB(r.providerUserInfo):[],o=!(r.email&&r.passwordHash)&&!s?.length,a=new qd;a.updateFromIdToken(i);const l=new Na({uid:r.localId,auth:e,stsTokenManager:a,isAnonymous:o}),c={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:s,metadata:new qE(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!s?.length};return Object.assign(l,c),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jk=new Map;function La(n){Za(n instanceof Function,"Expected a class definition");let e=jk.get(n);return e?(Za(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,jk.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JB{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}JB.type="NONE";const Vk=JB;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function B0(n,e,t){return`firebase:${n}:${e}:${t}`}class $d{constructor(e,t,i){this.persistence=e,this.auth=t,this.userKey=i;const{config:r,name:s}=this.auth;this.fullUserKey=B0(this.userKey,r.apiKey,s),this.fullPersistenceKey=B0("persistence",r.apiKey,s),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Na._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,i="authUser"){if(!t.length)return new $d(La(Vk),e,i);const r=(await Promise.all(t.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let s=r[0]||La(Vk);const o=B0(i,e.config.apiKey,e.name);let a=null;for(const c of t)try{const u=await c._get(o);if(u){const f=Na._fromJSON(e,u);c!==s&&(a=f),s=c;break}}catch{}const l=r.filter(c=>c._shouldAllowMigration);return!s._shouldAllowMigration||!l.length?new $d(s,e,i):(s=l[0],a&&await s._set(o,a.toJSON()),await Promise.all(t.map(async c=>{if(c!==s)try{await c._remove(o)}catch{}})),new $d(s,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bk(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(tz(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(QB(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(iz(e))return"Blackberry";if(rz(e))return"Webos";if(ZB(e))return"Safari";if((e.includes("chrome/")||ez(e))&&!e.includes("edge/"))return"Chrome";if(nz(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=n.match(t);if(i?.length===2)return i[1]}return"Other"}function QB(n=Ur()){return/firefox\//i.test(n)}function ZB(n=Ur()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function ez(n=Ur()){return/crios\//i.test(n)}function tz(n=Ur()){return/iemobile/i.test(n)}function nz(n=Ur()){return/android/i.test(n)}function iz(n=Ur()){return/blackberry/i.test(n)}function rz(n=Ur()){return/webos/i.test(n)}function YM(n=Ur()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function Qoe(n=Ur()){var e;return YM(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function Zoe(){return fse()&&document.documentMode===10}function sz(n=Ur()){return YM(n)||nz(n)||rz(n)||iz(n)||/windows phone/i.test(n)||tz(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oz(n,e=[]){let t;switch(n){case"Browser":t=Bk(Ur());break;case"Worker":t=`${Bk(Ur())}-${n}`;break;default:t=n}const i=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${Nf}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eae{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const i=s=>new Promise((o,a)=>{try{const l=e(s);o(l)}catch(l){a(l)}});i.onAbort=t,this.queue.push(i);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const i of this.queue)await i(e),i.onAbort&&t.push(i.onAbort)}catch(i){t.reverse();for(const r of t)try{r()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i?.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tae(n,e={}){return sl(n,"GET","/v2/passwordPolicy",rl(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nae=6;class iae{constructor(e){var t,i,r,s;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=o.minPasswordLength)!==null&&t!==void 0?t:nae,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(r=(i=e.allowedNonAlphanumericCharacters)===null||i===void 0?void 0:i.join(""))!==null&&r!==void 0?r:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,i,r,s,o,a;const l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,l),this.validatePasswordCharacterOptions(e,l),l.isValid&&(l.isValid=(t=l.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),l.isValid&&(l.isValid=(i=l.meetsMaxPasswordLength)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(r=l.containsLowercaseLetter)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(s=l.containsUppercaseLetter)!==null&&s!==void 0?s:!0),l.isValid&&(l.isValid=(o=l.containsNumericCharacter)!==null&&o!==void 0?o:!0),l.isValid&&(l.isValid=(a=l.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),l}validatePasswordLengthOptions(e,t){const i=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;i&&(t.meetsMinPasswordLength=e.length>=i),r&&(t.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let i;for(let r=0;r<e.length;r++)i=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(t,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,t,i,r,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rae{constructor(e,t,i,r){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=i,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new zk(this),this.idTokenSubscription=new zk(this),this.beforeStateQueue=new eae(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=GB,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=La(t)),this._initializationPromise=this.queue(async()=>{var i,r;if(!this._deleted&&(this.persistenceManager=await $d.create(this,e),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((r=this.currentUser)===null||r===void 0?void 0:r.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await YB(this,{idToken:e}),i=await Na._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(i)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if($o(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const i=await this.assertedPersistence.getCurrentUser();let r=i,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,a=r?._redirectEventId,l=await this.tryRedirectSignIn(e);(!o||o===a)&&l?.user&&(r=l.user,s=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(r)}catch(o){r=i,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return Gt(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await E_(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=Uoe()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if($o(this.app))return Promise.reject(za(this));const t=e?nr(e):null;return t&&Gt(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Gt(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return $o(this.app)?Promise.reject(za(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return $o(this.app)?Promise.reject(za(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(La(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await tae(this),t=new iae(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Zg("auth","Firebase",e())}onAuthStateChanged(e,t,i){return this.registerStateListener(this.authStateSubscription,e,t,i)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,i){return this.registerStateListener(this.idTokenSubscription,e,t,i)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(i.tenantId=this.tenantId),await Joe(this,i)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){const i=await this.getOrInitRedirectPersistenceManager(t);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&La(e)||this._popupRedirectResolver;Gt(t,this,"argument-error"),this.redirectPersistenceManager=await $d.create(this,[La(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,i;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((i=this.redirectUser)===null||i===void 0?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const i=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==i&&(this.lastNotifiedUid=i,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,i,r){if(this._deleted)return()=>{};const s=typeof t=="function"?t:t.next.bind(t);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(Gt(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof t=="function"){const l=e.addObserver(t,i,r);return()=>{o=!0,l()}}else{const l=e.addObserver(t);return()=>{o=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Gt(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=oz(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const i=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());i&&(t["X-Firebase-Client"]=i);const r=await this._getAppCheckToken();return r&&(t["X-Firebase-AppCheck"]=r),t}async _getAppCheckToken(){var e;const t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t?.error&&Doe(`Error while retrieving App Check token: ${t.error}`),t?.token}}function Pc(n){return nr(n)}class zk{constructor(e){this.auth=e,this.observer=null,this.addObserver=wse(t=>this.observer=t)}get next(){return Gt(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ww={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function sae(n){Ww=n}function az(n){return Ww.loadJS(n)}function oae(){return Ww.recaptchaEnterpriseScript}function aae(){return Ww.gapiScript}function lae(n){return`__${n}${Math.floor(Math.random()*1e6)}`}class cae{constructor(){this.enterprise=new uae}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class uae{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const hae="recaptcha-enterprise",lz="NO_RECAPTCHA";class dae{constructor(e){this.type=hae,this.auth=Pc(e)}async verify(e="verify",t=!1){async function i(s){if(!t){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise(async(o,a)=>{Hoe(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{const c=new zoe(l);return s.tenantId==null?s._agentRecaptchaConfig=c:s._tenantRecaptchaConfigs[s.tenantId]=c,o(c.siteKey)}}).catch(l=>{a(l)})})}function r(s,o,a){const l=window.grecaptcha;Uk(l)?l.enterprise.ready(()=>{l.enterprise.execute(s,{action:e}).then(c=>{o(c)}).catch(()=>{o(lz)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new cae().execute("siteKey",{action:"verify"}):new Promise((s,o)=>{i(this.auth).then(a=>{if(!t&&Uk(window.grecaptcha))r(a,s,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let l=oae();l.length!==0&&(l+=a),az(l).then(()=>{r(a,s,o)}).catch(c=>{o(c)})}}).catch(a=>{o(a)})})}}async function Hk(n,e,t,i=!1,r=!1){const s=new dae(n);let o;if(r)o=lz;else try{o=await s.verify(t)}catch{o=await s.verify(t,!0)}const a=Object.assign({},e);if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in a){const l=a.phoneEnrollmentInfo.phoneNumber,c=a.phoneEnrollmentInfo.recaptchaToken;Object.assign(a,{phoneEnrollmentInfo:{phoneNumber:l,recaptchaToken:c,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in a){const l=a.phoneSignInInfo.recaptchaToken;Object.assign(a,{phoneSignInInfo:{recaptchaToken:l,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return a}return i?Object.assign(a,{captchaResp:o}):Object.assign(a,{captchaResponse:o}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a}async function C_(n,e,t,i,r){var s;if(!((s=n._getRecaptchaConfig())===null||s===void 0)&&s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const o=await Hk(n,e,t,t==="getOobCode");return i(n,o)}else return i(n,e).catch(async o=>{if(o.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const a=await Hk(n,e,t,t==="getOobCode");return i(n,a)}else return Promise.reject(o)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fae(n,e){const t=GM(n,"auth");if(t.isInitialized()){const r=t.getImmediate(),s=t.getOptions();if(b_(s,e??{}))return r;Ro(r,"already-initialized")}return t.initialize({options:e})}function pae(n,e){const t=e?.persistence||[],i=(Array.isArray(t)?t:[t]).map(La);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(i,e?.popupRedirectResolver)}function mae(n,e,t){const i=Pc(n);Gt(i._canInitEmulator,i,"emulator-config-failed"),Gt(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const r=!1,s=cz(e),{host:o,port:a}=gae(e),l=a===null?"":`:${a}`;i.config.emulator={url:`${s}//${o}${l}/`},i.settings.appVerificationDisabledForTesting=!0,i.emulatorConfig=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:r})}),yae()}function cz(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function gae(n){const e=cz(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const i=t[2].split("@").pop()||"",r=/^(\[[^\]]+\])(:|$)/.exec(i);if(r){const s=r[1];return{host:s,port:Gk(i.substr(s.length+1))}}else{const[s,o]=i.split(":");return{host:s,port:Gk(o)}}}function Gk(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function yae(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KM{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return Ra("not implemented")}_getIdTokenResponse(e){return Ra("not implemented")}_linkToIdToken(e,t){return Ra("not implemented")}_getReauthenticationResolver(e){return Ra("not implemented")}}async function vae(n,e){return sl(n,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xae(n,e){return ny(n,"POST","/v1/accounts:signInWithPassword",rl(n,e))}async function _ae(n,e){return sl(n,"POST","/v1/accounts:sendOobCode",rl(n,e))}async function wae(n,e){return _ae(n,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bae(n,e){return ny(n,"POST","/v1/accounts:signInWithEmailLink",rl(n,e))}async function Sae(n,e){return ny(n,"POST","/v1/accounts:signInWithEmailLink",rl(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xg extends KM{constructor(e,t,i,r=null){super("password",i),this._email=e,this._password=t,this._tenantId=r}static _fromEmailAndPassword(e,t){return new xg(e,t,"password")}static _fromEmailAndCode(e,t,i=null){return new xg(e,t,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t?.email&&t?.password){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return C_(e,t,"signInWithPassword",xae);case"emailLink":return bae(e,{email:this._email,oobCode:this._password});default:Ro(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const i={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return C_(e,i,"signUpPassword",vae);case"emailLink":return Sae(e,{idToken:t,email:this._email,oobCode:this._password});default:Ro(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Xd(n,e){return ny(n,"POST","/v1/accounts:signInWithIdp",rl(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Tae="http://localhost";class th extends KM{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new th(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):Ro("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:r}=t,s=WM(t,["providerId","signInMethod"]);if(!i||!r)return null;const o=new th(i,r);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){const t=this.buildRequest();return Xd(e,t)}_linkToIdToken(e,t){const i=this.buildRequest();return i.idToken=t,Xd(e,i)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,Xd(e,t)}buildRequest(){const e={requestUri:Tae,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=ey(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Eae(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function Cae(n){const e=Xp(Yp(n)).link,t=e?Xp(Yp(e)).deep_link_id:null,i=Xp(Yp(n)).deep_link_id;return(i?Xp(Yp(i)).link:null)||i||t||e||n}class JM{constructor(e){var t,i,r,s,o,a;const l=Xp(Yp(e)),c=(t=l.apiKey)!==null&&t!==void 0?t:null,u=(i=l.oobCode)!==null&&i!==void 0?i:null,f=Eae((r=l.mode)!==null&&r!==void 0?r:null);Gt(c&&u&&f,"argument-error"),this.apiKey=c,this.operation=f,this.code=u,this.continueUrl=(s=l.continueUrl)!==null&&s!==void 0?s:null,this.languageCode=(o=l.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(a=l.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){const t=Cae(e);try{return new JM(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lf{constructor(){this.providerId=Lf.PROVIDER_ID}static credential(e,t){return xg._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const i=JM.parseLink(t);return Gt(i,"argument-error"),xg._fromEmailAndCode(e,i.code,i.tenantId)}}Lf.PROVIDER_ID="password";Lf.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Lf.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uz{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iy extends uz{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kl extends iy{constructor(){super("facebook.com")}static credential(e){return th._fromParams({providerId:kl.PROVIDER_ID,signInMethod:kl.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return kl.credentialFromTaggedObject(e)}static credentialFromError(e){return kl.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return kl.credential(e.oauthAccessToken)}catch{return null}}}kl.FACEBOOK_SIGN_IN_METHOD="facebook.com";kl.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ol extends iy{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return th._fromParams({providerId:Ol.PROVIDER_ID,signInMethod:Ol.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return Ol.credentialFromTaggedObject(e)}static credentialFromError(e){return Ol.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:i}=e;if(!t&&!i)return null;try{return Ol.credential(t,i)}catch{return null}}}Ol.GOOGLE_SIGN_IN_METHOD="google.com";Ol.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ul extends iy{constructor(){super("github.com")}static credential(e){return th._fromParams({providerId:Ul.PROVIDER_ID,signInMethod:Ul.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Ul.credentialFromTaggedObject(e)}static credentialFromError(e){return Ul.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Ul.credential(e.oauthAccessToken)}catch{return null}}}Ul.GITHUB_SIGN_IN_METHOD="github.com";Ul.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fl extends iy{constructor(){super("twitter.com")}static credential(e,t){return th._fromParams({providerId:Fl.PROVIDER_ID,signInMethod:Fl.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Fl.credentialFromTaggedObject(e)}static credentialFromError(e){return Fl.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:i}=e;if(!t||!i)return null;try{return Fl.credential(t,i)}catch{return null}}}Fl.TWITTER_SIGN_IN_METHOD="twitter.com";Fl.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Aae(n,e){return ny(n,"POST","/v1/accounts:signUp",rl(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nh{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,i,r=!1){const s=await Na._fromIdTokenResponse(e,i,r),o=Wk(i);return new nh({user:s,providerId:o,_tokenResponse:i,operationType:t})}static async _forOperation(e,t,i){await e._updateTokensIfNecessary(i,!0);const r=Wk(i);return new nh({user:e,providerId:r,_tokenResponse:i,operationType:t})}}function Wk(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A_ extends il{constructor(e,t,i,r){var s;super(t.code,t.message),this.operationType=i,this.user=r,Object.setPrototypeOf(this,A_.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:t.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,t,i,r){return new A_(e,t,i,r)}}function hz(n,e,t,i){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?A_._fromErrorAndOperation(n,s,e,i):s})}async function Mae(n,e,t=!1){const i=await vg(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return nh._forOperation(n,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Iae(n,e,t=!1){const{auth:i}=n;if($o(i.app))return Promise.reject(za(i));const r="reauthenticate";try{const s=await vg(n,hz(i,r,e,n),t);Gt(s.idToken,i,"internal-error");const o=XM(s.idToken);Gt(o,i,"internal-error");const{sub:a}=o;return Gt(n.uid===a,i,"user-mismatch"),nh._forOperation(n,r,s)}catch(s){throw s?.code==="auth/user-not-found"&&Ro(i,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dz(n,e,t=!1){if($o(n.app))return Promise.reject(za(n));const i="signIn",r=await hz(n,i,e),s=await nh._fromIdTokenResponse(n,i,r);return t||await n._updateCurrentUser(s.user),s}async function Pae(n,e){return dz(Pc(n),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function fz(n){const e=Pc(n);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function Rae(n,e,t){const i=Pc(n);await C_(i,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",wae)}async function Nae(n,e,t){if($o(n.app))return Promise.reject(za(n));const i=Pc(n),o=await C_(i,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Aae).catch(l=>{throw l.code==="auth/password-does-not-meet-requirements"&&fz(n),l}),a=await nh._fromIdTokenResponse(i,"signIn",o);return await i._updateCurrentUser(a.user),a}function Lae(n,e,t){return $o(n.app)?Promise.reject(za(n)):Pae(nr(n),Lf.credential(e,t)).catch(async i=>{throw i.code==="auth/password-does-not-meet-requirements"&&fz(n),i})}function Dae(n,e,t,i){return nr(n).onIdTokenChanged(e,t,i)}function kae(n,e,t){return nr(n).beforeAuthStateChanged(e,t)}function ry(n,e,t,i){return nr(n).onAuthStateChanged(e,t,i)}const M_="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pz{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(M_,"1"),this.storage.removeItem(M_),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oae=1e3,Uae=10;class mz extends pz{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=sz(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const i=this.storage.getItem(t),r=this.localCache[t];i!==r&&e(t,r,i)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const i=e.key;t?this.detachListener():this.stopPolling();const r=()=>{const o=this.storage.getItem(i);!t&&this.localCache[i]===o||this.notifyListeners(i,o)},s=this.storage.getItem(i);Zoe()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,Uae):r()}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const r of Array.from(i))r(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:i}),!0)})},Oae)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}mz.type="LOCAL";const Fae=mz;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gz extends pz{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}gz.type="SESSION";const yz=gz;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jae(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qw{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(r=>r.isListeningto(e));if(t)return t;const i=new qw(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:i,eventType:r,data:s}=t.data,o=this.handlersMap[r];if(!o?.size)return;t.ports[0].postMessage({status:"ack",eventId:i,eventType:r});const a=Array.from(o).map(async c=>c(t.origin,s)),l=await jae(a);t.ports[0].postMessage({status:"done",eventId:i,eventType:r,response:l})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}qw.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QM(n="",e=10){let t="";for(let i=0;i<e;i++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vae{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,i=50){const r=typeof MessageChannel<"u"?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let s,o;return new Promise((a,l)=>{const c=QM("",20);r.port1.start();const u=setTimeout(()=>{l(new Error("unsupported_event"))},i);o={messageChannel:r,onMessage(f){const m=f;if(m.data.eventId===c)switch(m.data.status){case"ack":clearTimeout(u),s=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(m.data.response);break;default:clearTimeout(u),clearTimeout(s),l(new Error("invalid_response"));break}}},this.handlers.add(o),r.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:c,data:t},[r.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ia(){return window}function Bae(n){ia().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vz(){return typeof ia().WorkerGlobalScope<"u"&&typeof ia().importScripts=="function"}async function zae(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function Hae(){var n;return((n=navigator?.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function Gae(){return vz()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xz="firebaseLocalStorageDb",Wae=1,I_="firebaseLocalStorage",_z="fbase_key";class sy{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function $w(n,e){return n.transaction([I_],e?"readwrite":"readonly").objectStore(I_)}function qae(){const n=indexedDB.deleteDatabase(xz);return new sy(n).toPromise()}function $E(){const n=indexedDB.open(xz,Wae);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const i=n.result;try{i.createObjectStore(I_,{keyPath:_z})}catch(r){t(r)}}),n.addEventListener("success",async()=>{const i=n.result;i.objectStoreNames.contains(I_)?e(i):(i.close(),await qae(),e(await $E()))})})}async function qk(n,e,t){const i=$w(n,!0).put({[_z]:e,value:t});return new sy(i).toPromise()}async function $ae(n,e){const t=$w(n,!1).get(e),i=await new sy(t).toPromise();return i===void 0?null:i.value}function $k(n,e){const t=$w(n,!0).delete(e);return new sy(t).toPromise()}const Xae=800,Yae=3;class wz{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await $E(),this.db)}async _withRetries(e){let t=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(t++>Yae)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return vz()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=qw._getInstance(Gae()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await zae(),!this.activeServiceWorker)return;this.sender=new Vae(this.activeServiceWorker);const i=await this.sender._send("ping",{},800);i&&!((e=i[0])===null||e===void 0)&&e.fulfilled&&!((t=i[0])===null||t===void 0)&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||Hae()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await $E();return await qk(e,M_,"1"),await $k(e,M_),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(i=>qk(i,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(i=>$ae(i,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>$k(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(r=>{const s=$w(r,!1).getAll();return new sy(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],i=new Set;if(e.length!==0)for(const{fbase_key:r,value:s}of e)i.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(s)&&(this.notifyListeners(r,s),t.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!i.has(r)&&(this.notifyListeners(r,null),t.push(r));return t}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const r of Array.from(i))r(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),Xae)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}wz.type="LOCAL";const Kae=wz;new ty(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jae(n,e){return e?La(e):(Gt(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ZM extends KM{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Xd(e,this._buildIdpRequest())}_linkToIdToken(e,t){return Xd(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return Xd(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function Qae(n){return dz(n.auth,new ZM(n),n.bypassAuthState)}function Zae(n){const{auth:e,user:t}=n;return Gt(t,e,"internal-error"),Iae(t,new ZM(n),n.bypassAuthState)}async function ele(n){const{auth:e,user:t}=n;return Gt(t,e,"internal-error"),Mae(t,new ZM(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bz{constructor(e,t,i,r,s=!1){this.auth=e,this.resolver=i,this.user=r,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:i,postBody:r,tenantId:s,error:o,type:a}=e;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:t,sessionId:i,tenantId:s||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Qae;case"linkViaPopup":case"linkViaRedirect":return ele;case"reauthViaPopup":case"reauthViaRedirect":return Zae;default:Ro(this.auth,"internal-error")}}resolve(e){Za(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Za(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tle=new ty(2e3,1e4);class Ud extends bz{constructor(e,t,i,r,s){super(e,t,r,s),this.provider=i,this.authWindow=null,this.pollId=null,Ud.currentPopupAction&&Ud.currentPopupAction.cancel(),Ud.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Gt(e,this.auth,"internal-error"),e}async onExecution(){Za(this.filter.length===1,"Popup operations only handle one event");const e=QM();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(na(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(na(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Ud.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,i;if(!((i=(t=this.authWindow)===null||t===void 0?void 0:t.window)===null||i===void 0)&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(na(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,tle.get())};e()}}Ud.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nle="pendingRedirect",z0=new Map;class ile extends bz{constructor(e,t,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,i),this.eventId=null}async execute(){let e=z0.get(this.auth._key());if(!e){try{const i=await rle(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(t){e=()=>Promise.reject(t)}z0.set(this.auth._key(),e)}return this.bypassAuthState||z0.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function rle(n,e){const t=ale(e),i=ole(n);if(!await i._isAvailable())return!1;const r=await i._get(t)==="true";return await i._remove(t),r}function sle(n,e){z0.set(n._key(),e)}function ole(n){return La(n._redirectPersistence)}function ale(n){return B0(nle,n.config.apiKey,n.name)}async function lle(n,e,t=!1){if($o(n.app))return Promise.reject(za(n));const i=Pc(n),r=Jae(i,e),o=await new ile(i,r,t).execute();return o&&!t&&(delete o.user._redirectEventId,await i._persistUserIfCurrent(o.user),await i._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cle=10*60*1e3;class ule{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(t=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!hle(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var i;if(e.error&&!Sz(e)){const r=((i=e.error.code)===null||i===void 0?void 0:i.split("auth/")[1])||"internal-error";t.onError(na(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const i=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=cle&&this.cachedEventUids.clear(),this.cachedEventUids.has(Xk(e))}saveEventToCache(e){this.cachedEventUids.add(Xk(e)),this.lastProcessedEventTime=Date.now()}}function Xk(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function Sz({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function hle(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Sz(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function dle(n,e={}){return sl(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fle=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,ple=/^https?/;async function mle(n){if(n.config.emulator)return;const{authorizedDomains:e}=await dle(n);for(const t of e)try{if(gle(t))return}catch{}Ro(n,"unauthorized-domain")}function gle(n){const e=WE(),{protocol:t,hostname:i}=new URL(e);if(n.startsWith("chrome-extension://")){const o=new URL(n);return o.hostname===""&&i===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&o.hostname===i}if(!ple.test(t))return!1;if(fle.test(n))return i===n;const r=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yle=new ty(3e4,6e4);function Yk(){const n=ia().___jsl;if(n?.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function vle(n){return new Promise((e,t)=>{var i,r,s;function o(){Yk(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Yk(),t(na(n,"network-request-failed"))},timeout:yle.get()})}if(!((r=(i=ia().gapi)===null||i===void 0?void 0:i.iframes)===null||r===void 0)&&r.Iframe)e(gapi.iframes.getContext());else if(!((s=ia().gapi)===null||s===void 0)&&s.load)o();else{const a=lae("iframefcb");return ia()[a]=()=>{gapi.load?o():t(na(n,"network-request-failed"))},az(`${aae()}?onload=${a}`).catch(l=>t(l))}}).catch(e=>{throw H0=null,e})}let H0=null;function xle(n){return H0=H0||vle(n),H0}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _le=new ty(5e3,15e3),wle="__/auth/iframe",ble="emulator/auth/iframe",Sle={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},Tle=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function Ele(n){const e=n.config;Gt(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?$M(e,ble):`https://${n.config.authDomain}/${wle}`,i={apiKey:e.apiKey,appName:n.name,v:Nf},r=Tle.get(n.config.apiHost);r&&(i.eid=r);const s=n._getFrameworks();return s.length&&(i.fw=s.join(",")),`${t}?${ey(i).slice(1)}`}async function Cle(n){const e=await xle(n),t=ia().gapi;return Gt(t,n,"internal-error"),e.open({where:document.body,url:Ele(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:Sle,dontclear:!0},i=>new Promise(async(r,s)=>{await i.restyle({setHideOnLeave:!1});const o=na(n,"network-request-failed"),a=ia().setTimeout(()=>{s(o)},_le.get());function l(){ia().clearTimeout(a),r(i)}i.ping(l).then(l,()=>{s(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ale={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},Mle=500,Ile=600,Ple="_blank",Rle="http://localhost";class Kk{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function Nle(n,e,t,i=Mle,r=Ile){const s=Math.max((window.screen.availHeight-r)/2,0).toString(),o=Math.max((window.screen.availWidth-i)/2,0).toString();let a="";const l=Object.assign(Object.assign({},Ale),{width:i.toString(),height:r.toString(),top:s,left:o}),c=Ur().toLowerCase();t&&(a=ez(c)?Ple:t),QB(c)&&(e=e||Rle,l.scrollbars="yes");const u=Object.entries(l).reduce((m,[g,x])=>`${m}${g}=${x},`,"");if(Qoe(c)&&a!=="_self")return Lle(e||"",a),new Kk(null);const f=window.open(e||"",a,u);Gt(f,n,"popup-blocked");try{f.focus()}catch{}return new Kk(f)}function Lle(n,e){const t=document.createElement("a");t.href=n,t.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dle="__/auth/handler",kle="emulator/auth/handler",Ole=encodeURIComponent("fac");async function Jk(n,e,t,i,r,s){Gt(n.config.authDomain,n,"auth-domain-config-required"),Gt(n.config.apiKey,n,"invalid-api-key");const o={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:i,v:Nf,eventId:r};if(e instanceof uz){e.setDefaultLanguage(n.languageCode),o.providerId=e.providerId||"",_se(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[u,f]of Object.entries({}))o[u]=f}if(e instanceof iy){const u=e.getScopes().filter(f=>f!=="");u.length>0&&(o.scopes=u.join(","))}n.tenantId&&(o.tid=n.tenantId);const a=o;for(const u of Object.keys(a))a[u]===void 0&&delete a[u];const l=await n._getAppCheckToken(),c=l?`#${Ole}=${encodeURIComponent(l)}`:"";return`${Ule(n)}?${ey(a).slice(1)}${c}`}function Ule({config:n}){return n.emulator?$M(n,kle):`https://${n.authDomain}/${Dle}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i1="webStorageSupport";class Fle{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=yz,this._completeRedirectFn=lle,this._overrideRedirectResult=sle}async _openPopup(e,t,i,r){var s;Za((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const o=await Jk(e,t,i,WE(),r);return Nle(e,o,QM())}async _openRedirect(e,t,i,r){await this._originValidation(e);const s=await Jk(e,t,i,WE(),r);return Bae(s),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:r,promise:s}=this.eventManagers[t];return r?Promise.resolve(r):(Za(s,"If manager is not set, promise should be"),s)}const i=this.initAndGetManager(e);return this.eventManagers[t]={promise:i},i.catch(()=>{delete this.eventManagers[t]}),i}async initAndGetManager(e){const t=await Cle(e),i=new ule(e);return t.register("authEvent",r=>(Gt(r?.authEvent,e,"invalid-auth-event"),{status:i.onEvent(r.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=t,i}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(i1,{type:i1},r=>{var s;const o=(s=r?.[0])===null||s===void 0?void 0:s[i1];o!==void 0&&t(!!o),Ro(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=mle(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return sz()||ZB()||YM()}}const jle=Fle;var Qk="@firebase/auth",Zk="1.8.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vle{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(i=>{e(i?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Gt(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ble(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function zle(n){ff(new eh("auth",(e,{options:t})=>{const i=e.getProvider("app").getImmediate(),r=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=i.options;Gt(o&&!o.includes(":"),"invalid-api-key",{appName:i.name});const l={apiKey:o,authDomain:a,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:oz(n)},c=new rae(i,r,s,l);return pae(c,t),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,i)=>{e.getProvider("auth-internal").initialize()})),ff(new eh("auth-internal",e=>{const t=Pc(e.getProvider("auth").getImmediate());return(i=>new Vle(i))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),nc(Qk,Zk,Ble(n)),nc(Qk,Zk,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Hle=5*60,Gle=OB("authIdTokenMaxAge")||Hle;let e3=null;const Wle=n=>async e=>{const t=e&&await e.getIdTokenResult(),i=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(i&&i>Gle)return;const r=t?.token;e3!==r&&(e3=r,await fetch(n,{method:r?"POST":"DELETE",headers:r?{Authorization:`Bearer ${r}`}:{}}))};function dc(n=VB()){const e=GM(n,"auth");if(e.isInitialized())return e.getImmediate();const t=fae(n,{popupRedirectResolver:jle,persistence:[Kae,Fae,yz]}),i=OB("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(i,location.origin);if(location.origin===s.origin){const o=Wle(s.toString());kae(t,o,()=>o(t.currentUser)),Dae(t,a=>o(a))}}const r=DB("auth");return r&&mae(t,`http://${r}`),t}function qle(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}sae({loadJS(n){return new Promise((e,t)=>{const i=document.createElement("script");i.setAttribute("src",n),i.onload=e,i.onerror=r=>{const s=na("internal-error");s.customData=r,t(s)},i.type="text/javascript",i.charset="UTF-8",qle().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});zle("Browser");var t3=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Vu,Tz;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(N,I){function A(){}A.prototype=I.prototype,N.D=I.prototype,N.prototype=new A,N.prototype.constructor=N,N.C=function(M,D,z){for(var j=Array(arguments.length-2),te=2;te<arguments.length;te++)j[te-2]=arguments[te];return I.prototype[D].apply(M,j)}}function t(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(i,t),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function r(N,I,A){A||(A=0);var M=Array(16);if(typeof I=="string")for(var D=0;16>D;++D)M[D]=I.charCodeAt(A++)|I.charCodeAt(A++)<<8|I.charCodeAt(A++)<<16|I.charCodeAt(A++)<<24;else for(D=0;16>D;++D)M[D]=I[A++]|I[A++]<<8|I[A++]<<16|I[A++]<<24;I=N.g[0],A=N.g[1],D=N.g[2];var z=N.g[3],j=I+(z^A&(D^z))+M[0]+3614090360&4294967295;I=A+(j<<7&4294967295|j>>>25),j=z+(D^I&(A^D))+M[1]+3905402710&4294967295,z=I+(j<<12&4294967295|j>>>20),j=D+(A^z&(I^A))+M[2]+606105819&4294967295,D=z+(j<<17&4294967295|j>>>15),j=A+(I^D&(z^I))+M[3]+3250441966&4294967295,A=D+(j<<22&4294967295|j>>>10),j=I+(z^A&(D^z))+M[4]+4118548399&4294967295,I=A+(j<<7&4294967295|j>>>25),j=z+(D^I&(A^D))+M[5]+1200080426&4294967295,z=I+(j<<12&4294967295|j>>>20),j=D+(A^z&(I^A))+M[6]+2821735955&4294967295,D=z+(j<<17&4294967295|j>>>15),j=A+(I^D&(z^I))+M[7]+4249261313&4294967295,A=D+(j<<22&4294967295|j>>>10),j=I+(z^A&(D^z))+M[8]+1770035416&4294967295,I=A+(j<<7&4294967295|j>>>25),j=z+(D^I&(A^D))+M[9]+2336552879&4294967295,z=I+(j<<12&4294967295|j>>>20),j=D+(A^z&(I^A))+M[10]+4294925233&4294967295,D=z+(j<<17&4294967295|j>>>15),j=A+(I^D&(z^I))+M[11]+2304563134&4294967295,A=D+(j<<22&4294967295|j>>>10),j=I+(z^A&(D^z))+M[12]+1804603682&4294967295,I=A+(j<<7&4294967295|j>>>25),j=z+(D^I&(A^D))+M[13]+4254626195&4294967295,z=I+(j<<12&4294967295|j>>>20),j=D+(A^z&(I^A))+M[14]+2792965006&4294967295,D=z+(j<<17&4294967295|j>>>15),j=A+(I^D&(z^I))+M[15]+1236535329&4294967295,A=D+(j<<22&4294967295|j>>>10),j=I+(D^z&(A^D))+M[1]+4129170786&4294967295,I=A+(j<<5&4294967295|j>>>27),j=z+(A^D&(I^A))+M[6]+3225465664&4294967295,z=I+(j<<9&4294967295|j>>>23),j=D+(I^A&(z^I))+M[11]+643717713&4294967295,D=z+(j<<14&4294967295|j>>>18),j=A+(z^I&(D^z))+M[0]+3921069994&4294967295,A=D+(j<<20&4294967295|j>>>12),j=I+(D^z&(A^D))+M[5]+3593408605&4294967295,I=A+(j<<5&4294967295|j>>>27),j=z+(A^D&(I^A))+M[10]+38016083&4294967295,z=I+(j<<9&4294967295|j>>>23),j=D+(I^A&(z^I))+M[15]+3634488961&4294967295,D=z+(j<<14&4294967295|j>>>18),j=A+(z^I&(D^z))+M[4]+3889429448&4294967295,A=D+(j<<20&4294967295|j>>>12),j=I+(D^z&(A^D))+M[9]+568446438&4294967295,I=A+(j<<5&4294967295|j>>>27),j=z+(A^D&(I^A))+M[14]+3275163606&4294967295,z=I+(j<<9&4294967295|j>>>23),j=D+(I^A&(z^I))+M[3]+4107603335&4294967295,D=z+(j<<14&4294967295|j>>>18),j=A+(z^I&(D^z))+M[8]+1163531501&4294967295,A=D+(j<<20&4294967295|j>>>12),j=I+(D^z&(A^D))+M[13]+2850285829&4294967295,I=A+(j<<5&4294967295|j>>>27),j=z+(A^D&(I^A))+M[2]+4243563512&4294967295,z=I+(j<<9&4294967295|j>>>23),j=D+(I^A&(z^I))+M[7]+1735328473&4294967295,D=z+(j<<14&4294967295|j>>>18),j=A+(z^I&(D^z))+M[12]+2368359562&4294967295,A=D+(j<<20&4294967295|j>>>12),j=I+(A^D^z)+M[5]+4294588738&4294967295,I=A+(j<<4&4294967295|j>>>28),j=z+(I^A^D)+M[8]+2272392833&4294967295,z=I+(j<<11&4294967295|j>>>21),j=D+(z^I^A)+M[11]+1839030562&4294967295,D=z+(j<<16&4294967295|j>>>16),j=A+(D^z^I)+M[14]+4259657740&4294967295,A=D+(j<<23&4294967295|j>>>9),j=I+(A^D^z)+M[1]+2763975236&4294967295,I=A+(j<<4&4294967295|j>>>28),j=z+(I^A^D)+M[4]+1272893353&4294967295,z=I+(j<<11&4294967295|j>>>21),j=D+(z^I^A)+M[7]+4139469664&4294967295,D=z+(j<<16&4294967295|j>>>16),j=A+(D^z^I)+M[10]+3200236656&4294967295,A=D+(j<<23&4294967295|j>>>9),j=I+(A^D^z)+M[13]+681279174&4294967295,I=A+(j<<4&4294967295|j>>>28),j=z+(I^A^D)+M[0]+3936430074&4294967295,z=I+(j<<11&4294967295|j>>>21),j=D+(z^I^A)+M[3]+3572445317&4294967295,D=z+(j<<16&4294967295|j>>>16),j=A+(D^z^I)+M[6]+76029189&4294967295,A=D+(j<<23&4294967295|j>>>9),j=I+(A^D^z)+M[9]+3654602809&4294967295,I=A+(j<<4&4294967295|j>>>28),j=z+(I^A^D)+M[12]+3873151461&4294967295,z=I+(j<<11&4294967295|j>>>21),j=D+(z^I^A)+M[15]+530742520&4294967295,D=z+(j<<16&4294967295|j>>>16),j=A+(D^z^I)+M[2]+3299628645&4294967295,A=D+(j<<23&4294967295|j>>>9),j=I+(D^(A|~z))+M[0]+4096336452&4294967295,I=A+(j<<6&4294967295|j>>>26),j=z+(A^(I|~D))+M[7]+1126891415&4294967295,z=I+(j<<10&4294967295|j>>>22),j=D+(I^(z|~A))+M[14]+2878612391&4294967295,D=z+(j<<15&4294967295|j>>>17),j=A+(z^(D|~I))+M[5]+4237533241&4294967295,A=D+(j<<21&4294967295|j>>>11),j=I+(D^(A|~z))+M[12]+1700485571&4294967295,I=A+(j<<6&4294967295|j>>>26),j=z+(A^(I|~D))+M[3]+2399980690&4294967295,z=I+(j<<10&4294967295|j>>>22),j=D+(I^(z|~A))+M[10]+4293915773&4294967295,D=z+(j<<15&4294967295|j>>>17),j=A+(z^(D|~I))+M[1]+2240044497&4294967295,A=D+(j<<21&4294967295|j>>>11),j=I+(D^(A|~z))+M[8]+1873313359&4294967295,I=A+(j<<6&4294967295|j>>>26),j=z+(A^(I|~D))+M[15]+4264355552&4294967295,z=I+(j<<10&4294967295|j>>>22),j=D+(I^(z|~A))+M[6]+2734768916&4294967295,D=z+(j<<15&4294967295|j>>>17),j=A+(z^(D|~I))+M[13]+1309151649&4294967295,A=D+(j<<21&4294967295|j>>>11),j=I+(D^(A|~z))+M[4]+4149444226&4294967295,I=A+(j<<6&4294967295|j>>>26),j=z+(A^(I|~D))+M[11]+3174756917&4294967295,z=I+(j<<10&4294967295|j>>>22),j=D+(I^(z|~A))+M[2]+718787259&4294967295,D=z+(j<<15&4294967295|j>>>17),j=A+(z^(D|~I))+M[9]+3951481745&4294967295,N.g[0]=N.g[0]+I&4294967295,N.g[1]=N.g[1]+(D+(j<<21&4294967295|j>>>11))&4294967295,N.g[2]=N.g[2]+D&4294967295,N.g[3]=N.g[3]+z&4294967295}i.prototype.u=function(N,I){I===void 0&&(I=N.length);for(var A=I-this.blockSize,M=this.B,D=this.h,z=0;z<I;){if(D==0)for(;z<=A;)r(this,N,z),z+=this.blockSize;if(typeof N=="string"){for(;z<I;)if(M[D++]=N.charCodeAt(z++),D==this.blockSize){r(this,M),D=0;break}}else for(;z<I;)if(M[D++]=N[z++],D==this.blockSize){r(this,M),D=0;break}}this.h=D,this.o+=I},i.prototype.v=function(){var N=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);N[0]=128;for(var I=1;I<N.length-8;++I)N[I]=0;var A=8*this.o;for(I=N.length-8;I<N.length;++I)N[I]=A&255,A/=256;for(this.u(N),N=Array(16),I=A=0;4>I;++I)for(var M=0;32>M;M+=8)N[A++]=this.g[I]>>>M&255;return N};function s(N,I){var A=a;return Object.prototype.hasOwnProperty.call(A,N)?A[N]:A[N]=I(N)}function o(N,I){this.h=I;for(var A=[],M=!0,D=N.length-1;0<=D;D--){var z=N[D]|0;M&&z==I||(A[D]=z,M=!1)}this.g=A}var a={};function l(N){return-128<=N&&128>N?s(N,function(I){return new o([I|0],0>I?-1:0)}):new o([N|0],0>N?-1:0)}function c(N){if(isNaN(N)||!isFinite(N))return f;if(0>N)return w(c(-N));for(var I=[],A=1,M=0;N>=A;M++)I[M]=N/A|0,A*=4294967296;return new o(I,0)}function u(N,I){if(N.length==0)throw Error("number format error: empty string");if(I=I||10,2>I||36<I)throw Error("radix out of range: "+I);if(N.charAt(0)=="-")return w(u(N.substring(1),I));if(0<=N.indexOf("-"))throw Error('number format error: interior "-" character');for(var A=c(Math.pow(I,8)),M=f,D=0;D<N.length;D+=8){var z=Math.min(8,N.length-D),j=parseInt(N.substring(D,D+z),I);8>z?(z=c(Math.pow(I,z)),M=M.j(z).add(c(j))):(M=M.j(A),M=M.add(c(j)))}return M}var f=l(0),m=l(1),g=l(16777216);n=o.prototype,n.m=function(){if(b(this))return-w(this).m();for(var N=0,I=1,A=0;A<this.g.length;A++){var M=this.i(A);N+=(0<=M?M:4294967296+M)*I,I*=4294967296}return N},n.toString=function(N){if(N=N||10,2>N||36<N)throw Error("radix out of range: "+N);if(x(this))return"0";if(b(this))return"-"+w(this).toString(N);for(var I=c(Math.pow(N,6)),A=this,M="";;){var D=C(A,I).g;A=v(A,D.j(I));var z=((0<A.g.length?A.g[0]:A.h)>>>0).toString(N);if(A=D,x(A))return z+M;for(;6>z.length;)z="0"+z;M=z+M}},n.i=function(N){return 0>N?0:N<this.g.length?this.g[N]:this.h};function x(N){if(N.h!=0)return!1;for(var I=0;I<N.g.length;I++)if(N.g[I]!=0)return!1;return!0}function b(N){return N.h==-1}n.l=function(N){return N=v(this,N),b(N)?-1:x(N)?0:1};function w(N){for(var I=N.g.length,A=[],M=0;M<I;M++)A[M]=~N.g[M];return new o(A,~N.h).add(m)}n.abs=function(){return b(this)?w(this):this},n.add=function(N){for(var I=Math.max(this.g.length,N.g.length),A=[],M=0,D=0;D<=I;D++){var z=M+(this.i(D)&65535)+(N.i(D)&65535),j=(z>>>16)+(this.i(D)>>>16)+(N.i(D)>>>16);M=j>>>16,z&=65535,j&=65535,A[D]=j<<16|z}return new o(A,A[A.length-1]&-2147483648?-1:0)};function v(N,I){return N.add(w(I))}n.j=function(N){if(x(this)||x(N))return f;if(b(this))return b(N)?w(this).j(w(N)):w(w(this).j(N));if(b(N))return w(this.j(w(N)));if(0>this.l(g)&&0>N.l(g))return c(this.m()*N.m());for(var I=this.g.length+N.g.length,A=[],M=0;M<2*I;M++)A[M]=0;for(M=0;M<this.g.length;M++)for(var D=0;D<N.g.length;D++){var z=this.i(M)>>>16,j=this.i(M)&65535,te=N.i(D)>>>16,he=N.i(D)&65535;A[2*M+2*D]+=j*he,S(A,2*M+2*D),A[2*M+2*D+1]+=z*he,S(A,2*M+2*D+1),A[2*M+2*D+1]+=j*te,S(A,2*M+2*D+1),A[2*M+2*D+2]+=z*te,S(A,2*M+2*D+2)}for(M=0;M<I;M++)A[M]=A[2*M+1]<<16|A[2*M];for(M=I;M<2*I;M++)A[M]=0;return new o(A,0)};function S(N,I){for(;(N[I]&65535)!=N[I];)N[I+1]+=N[I]>>>16,N[I]&=65535,I++}function E(N,I){this.g=N,this.h=I}function C(N,I){if(x(I))throw Error("division by zero");if(x(N))return new E(f,f);if(b(N))return I=C(w(N),I),new E(w(I.g),w(I.h));if(b(I))return I=C(N,w(I)),new E(w(I.g),I.h);if(30<N.g.length){if(b(N)||b(I))throw Error("slowDivide_ only works with positive integers.");for(var A=m,M=I;0>=M.l(N);)A=V(A),M=V(M);var D=L(A,1),z=L(M,1);for(M=L(M,2),A=L(A,2);!x(M);){var j=z.add(M);0>=j.l(N)&&(D=D.add(A),z=j),M=L(M,1),A=L(A,1)}return I=v(N,D.j(I)),new E(D,I)}for(D=f;0<=N.l(I);){for(A=Math.max(1,Math.floor(N.m()/I.m())),M=Math.ceil(Math.log(A)/Math.LN2),M=48>=M?1:Math.pow(2,M-48),z=c(A),j=z.j(I);b(j)||0<j.l(N);)A-=M,z=c(A),j=z.j(I);x(z)&&(z=m),D=D.add(z),N=v(N,j)}return new E(D,N)}n.A=function(N){return C(this,N).h},n.and=function(N){for(var I=Math.max(this.g.length,N.g.length),A=[],M=0;M<I;M++)A[M]=this.i(M)&N.i(M);return new o(A,this.h&N.h)},n.or=function(N){for(var I=Math.max(this.g.length,N.g.length),A=[],M=0;M<I;M++)A[M]=this.i(M)|N.i(M);return new o(A,this.h|N.h)},n.xor=function(N){for(var I=Math.max(this.g.length,N.g.length),A=[],M=0;M<I;M++)A[M]=this.i(M)^N.i(M);return new o(A,this.h^N.h)};function V(N){for(var I=N.g.length+1,A=[],M=0;M<I;M++)A[M]=N.i(M)<<1|N.i(M-1)>>>31;return new o(A,N.h)}function L(N,I){var A=I>>5;I%=32;for(var M=N.g.length-A,D=[],z=0;z<M;z++)D[z]=0<I?N.i(z+A)>>>I|N.i(z+A+1)<<32-I:N.i(z+A);return new o(D,N.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,Tz=i,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=c,o.fromString=u,Vu=o}).apply(typeof t3<"u"?t3:typeof self<"u"?self:typeof window<"u"?window:{});var h0=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Ez,Kp,Cz,G0,XE,Az,Mz,Iz;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(y,R,k){return y==Array.prototype||y==Object.prototype||(y[R]=k.value),y};function t(y){y=[typeof globalThis=="object"&&globalThis,y,typeof window=="object"&&window,typeof self=="object"&&self,typeof h0=="object"&&h0];for(var R=0;R<y.length;++R){var k=y[R];if(k&&k.Math==Math)return k}throw Error("Cannot find global object")}var i=t(this);function r(y,R){if(R)e:{var k=i;y=y.split(".");for(var W=0;W<y.length-1;W++){var le=y[W];if(!(le in k))break e;k=k[le]}y=y[y.length-1],W=k[y],R=R(W),R!=W&&R!=null&&e(k,y,{configurable:!0,writable:!0,value:R})}}function s(y,R){y instanceof String&&(y+="");var k=0,W=!1,le={next:function(){if(!W&&k<y.length){var ve=k++;return{value:R(ve,y[ve]),done:!1}}return W=!0,{done:!0,value:void 0}}};return le[Symbol.iterator]=function(){return le},le}r("Array.prototype.values",function(y){return y||function(){return s(this,function(R,k){return k})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function l(y){var R=typeof y;return R=R!="object"?R:y?Array.isArray(y)?"array":R:"null",R=="array"||R=="object"&&typeof y.length=="number"}function c(y){var R=typeof y;return R=="object"&&y!=null||R=="function"}function u(y,R,k){return y.call.apply(y.bind,arguments)}function f(y,R,k){if(!y)throw Error();if(2<arguments.length){var W=Array.prototype.slice.call(arguments,2);return function(){var le=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(le,W),y.apply(R,le)}}return function(){return y.apply(R,arguments)}}function m(y,R,k){return m=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?u:f,m.apply(null,arguments)}function g(y,R){var k=Array.prototype.slice.call(arguments,1);return function(){var W=k.slice();return W.push.apply(W,arguments),y.apply(this,W)}}function x(y,R){function k(){}k.prototype=R.prototype,y.aa=R.prototype,y.prototype=new k,y.prototype.constructor=y,y.Qb=function(W,le,ve){for(var He=Array(arguments.length-2),xn=2;xn<arguments.length;xn++)He[xn-2]=arguments[xn];return R.prototype[le].apply(W,He)}}function b(y){const R=y.length;if(0<R){const k=Array(R);for(let W=0;W<R;W++)k[W]=y[W];return k}return[]}function w(y,R){for(let k=1;k<arguments.length;k++){const W=arguments[k];if(l(W)){const le=y.length||0,ve=W.length||0;y.length=le+ve;for(let He=0;He<ve;He++)y[le+He]=W[He]}else y.push(W)}}class v{constructor(R,k){this.i=R,this.j=k,this.h=0,this.g=null}get(){let R;return 0<this.h?(this.h--,R=this.g,this.g=R.next,R.next=null):R=this.i(),R}}function S(y){return/^[\s\xa0]*$/.test(y)}function E(){var y=a.navigator;return y&&(y=y.userAgent)?y:""}function C(y){return C[" "](y),y}C[" "]=function(){};var V=E().indexOf("Gecko")!=-1&&!(E().toLowerCase().indexOf("webkit")!=-1&&E().indexOf("Edge")==-1)&&!(E().indexOf("Trident")!=-1||E().indexOf("MSIE")!=-1)&&E().indexOf("Edge")==-1;function L(y,R,k){for(const W in y)R.call(k,y[W],W,y)}function N(y,R){for(const k in y)R.call(void 0,y[k],k,y)}function I(y){const R={};for(const k in y)R[k]=y[k];return R}const A="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function M(y,R){let k,W;for(let le=1;le<arguments.length;le++){W=arguments[le];for(k in W)y[k]=W[k];for(let ve=0;ve<A.length;ve++)k=A[ve],Object.prototype.hasOwnProperty.call(W,k)&&(y[k]=W[k])}}function D(y){var R=1;y=y.split(":");const k=[];for(;0<R&&y.length;)k.push(y.shift()),R--;return y.length&&k.push(y.join(":")),k}function z(y){a.setTimeout(()=>{throw y},0)}function j(){var y=X;let R=null;return y.g&&(R=y.g,y.g=y.g.next,y.g||(y.h=null),R.next=null),R}class te{constructor(){this.h=this.g=null}add(R,k){const W=he.get();W.set(R,k),this.h?this.h.next=W:this.g=W,this.h=W}}var he=new v(()=>new de,y=>y.reset());class de{constructor(){this.next=this.g=this.h=null}set(R,k){this.h=R,this.g=k,this.next=null}reset(){this.next=this.g=this.h=null}}let U,F=!1,X=new te,Y=()=>{const y=a.Promise.resolve(void 0);U=()=>{y.then(ne)}};var ne=()=>{for(var y;y=j();){try{y.h.call(y.g)}catch(k){z(k)}var R=he;R.j(y),100>R.h&&(R.h++,y.next=R.g,R.g=y)}F=!1};function fe(){this.s=this.s,this.C=this.C}fe.prototype.s=!1,fe.prototype.ma=function(){this.s||(this.s=!0,this.N())},fe.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Ce(y,R){this.type=y,this.g=this.target=R,this.defaultPrevented=!1}Ce.prototype.h=function(){this.defaultPrevented=!0};var ce=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var y=!1,R=Object.defineProperty({},"passive",{get:function(){y=!0}});try{const k=()=>{};a.addEventListener("test",k,R),a.removeEventListener("test",k,R)}catch{}return y}();function Ee(y,R){if(Ce.call(this,y?y.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,y){var k=this.type=y.type,W=y.changedTouches&&y.changedTouches.length?y.changedTouches[0]:null;if(this.target=y.target||y.srcElement,this.g=R,R=y.relatedTarget){if(V){e:{try{C(R.nodeName);var le=!0;break e}catch{}le=!1}le||(R=null)}}else k=="mouseover"?R=y.fromElement:k=="mouseout"&&(R=y.toElement);this.relatedTarget=R,W?(this.clientX=W.clientX!==void 0?W.clientX:W.pageX,this.clientY=W.clientY!==void 0?W.clientY:W.pageY,this.screenX=W.screenX||0,this.screenY=W.screenY||0):(this.clientX=y.clientX!==void 0?y.clientX:y.pageX,this.clientY=y.clientY!==void 0?y.clientY:y.pageY,this.screenX=y.screenX||0,this.screenY=y.screenY||0),this.button=y.button,this.key=y.key||"",this.ctrlKey=y.ctrlKey,this.altKey=y.altKey,this.shiftKey=y.shiftKey,this.metaKey=y.metaKey,this.pointerId=y.pointerId||0,this.pointerType=typeof y.pointerType=="string"?y.pointerType:Oe[y.pointerType]||"",this.state=y.state,this.i=y,y.defaultPrevented&&Ee.aa.h.call(this)}}x(Ee,Ce);var Oe={2:"touch",3:"pen",4:"mouse"};Ee.prototype.h=function(){Ee.aa.h.call(this);var y=this.i;y.preventDefault?y.preventDefault():y.returnValue=!1};var Pe="closure_listenable_"+(1e6*Math.random()|0),xt=0;function Dt(y,R,k,W,le){this.listener=y,this.proxy=null,this.src=R,this.type=k,this.capture=!!W,this.ha=le,this.key=++xt,this.da=this.fa=!1}function lt(y){y.da=!0,y.listener=null,y.proxy=null,y.src=null,y.ha=null}function ze(y){this.src=y,this.g={},this.h=0}ze.prototype.add=function(y,R,k,W,le){var ve=y.toString();y=this.g[ve],y||(y=this.g[ve]=[],this.h++);var He=Me(y,R,W,le);return-1<He?(R=y[He],k||(R.fa=!1)):(R=new Dt(R,this.src,ve,!!W,le),R.fa=k,y.push(R)),R};function Te(y,R){var k=R.type;if(k in y.g){var W=y.g[k],le=Array.prototype.indexOf.call(W,R,void 0),ve;(ve=0<=le)&&Array.prototype.splice.call(W,le,1),ve&&(lt(R),y.g[k].length==0&&(delete y.g[k],y.h--))}}function Me(y,R,k,W){for(var le=0;le<y.length;++le){var ve=y[le];if(!ve.da&&ve.listener==R&&ve.capture==!!k&&ve.ha==W)return le}return-1}var Q="closure_lm_"+(1e6*Math.random()|0),nt={};function ke(y,R,k,W,le){if(Array.isArray(R)){for(var ve=0;ve<R.length;ve++)ke(y,R[ve],k,W,le);return null}return k=Re(k),y&&y[Pe]?y.K(R,k,c(W)?!!W.capture:!!W,le):Ze(y,R,k,!1,W,le)}function Ze(y,R,k,W,le,ve){if(!R)throw Error("Invalid event type");var He=c(le)?!!le.capture:!!le,xn=ue(y);if(xn||(y[Q]=xn=new ze(y)),k=xn.add(R,k,W,He,ve),k.proxy)return k;if(W=We(),k.proxy=W,W.src=y,W.listener=k,y.addEventListener)ce||(le=He),le===void 0&&(le=!1),y.addEventListener(R.toString(),W,le);else if(y.attachEvent)y.attachEvent($(R.toString()),W);else if(y.addListener&&y.removeListener)y.addListener(W);else throw Error("addEventListener and attachEvent are unavailable.");return k}function We(){function y(k){return R.call(y.src,y.listener,k)}const R=G;return y}function Mt(y,R,k,W,le){if(Array.isArray(R))for(var ve=0;ve<R.length;ve++)Mt(y,R[ve],k,W,le);else W=c(W)?!!W.capture:!!W,k=Re(k),y&&y[Pe]?(y=y.i,R=String(R).toString(),R in y.g&&(ve=y.g[R],k=Me(ve,k,W,le),-1<k&&(lt(ve[k]),Array.prototype.splice.call(ve,k,1),ve.length==0&&(delete y.g[R],y.h--)))):y&&(y=ue(y))&&(R=y.g[R.toString()],y=-1,R&&(y=Me(R,k,W,le)),(k=-1<y?R[y]:null)&&Ye(k))}function Ye(y){if(typeof y!="number"&&y&&!y.da){var R=y.src;if(R&&R[Pe])Te(R.i,y);else{var k=y.type,W=y.proxy;R.removeEventListener?R.removeEventListener(k,W,y.capture):R.detachEvent?R.detachEvent($(k),W):R.addListener&&R.removeListener&&R.removeListener(W),(k=ue(R))?(Te(k,y),k.h==0&&(k.src=null,R[Q]=null)):lt(y)}}}function $(y){return y in nt?nt[y]:nt[y]="on"+y}function G(y,R){if(y.da)y=!0;else{R=new Ee(R,this);var k=y.listener,W=y.ha||y.src;y.fa&&Ye(y),y=k.call(W,R)}return y}function ue(y){return y=y[Q],y instanceof ze?y:null}var be="__closure_events_fn_"+(1e9*Math.random()>>>0);function Re(y){return typeof y=="function"?y:(y[be]||(y[be]=function(R){return y.handleEvent(R)}),y[be])}function xe(){fe.call(this),this.i=new ze(this),this.M=this,this.F=null}x(xe,fe),xe.prototype[Pe]=!0,xe.prototype.removeEventListener=function(y,R,k,W){Mt(this,y,R,k,W)};function Ve(y,R){var k,W=y.F;if(W)for(k=[];W;W=W.F)k.push(W);if(y=y.M,W=R.type||R,typeof R=="string")R=new Ce(R,y);else if(R instanceof Ce)R.target=R.target||y;else{var le=R;R=new Ce(W,y),M(R,le)}if(le=!0,k)for(var ve=k.length-1;0<=ve;ve--){var He=R.g=k[ve];le=Ge(He,W,!0,R)&&le}if(He=R.g=y,le=Ge(He,W,!0,R)&&le,le=Ge(He,W,!1,R)&&le,k)for(ve=0;ve<k.length;ve++)He=R.g=k[ve],le=Ge(He,W,!1,R)&&le}xe.prototype.N=function(){if(xe.aa.N.call(this),this.i){var y=this.i,R;for(R in y.g){for(var k=y.g[R],W=0;W<k.length;W++)lt(k[W]);delete y.g[R],y.h--}}this.F=null},xe.prototype.K=function(y,R,k,W){return this.i.add(String(y),R,!1,k,W)},xe.prototype.L=function(y,R,k,W){return this.i.add(String(y),R,!0,k,W)};function Ge(y,R,k,W){if(R=y.i.g[String(R)],!R)return!0;R=R.concat();for(var le=!0,ve=0;ve<R.length;++ve){var He=R[ve];if(He&&!He.da&&He.capture==k){var xn=He.listener,Mi=He.ha||He.src;He.fa&&Te(y.i,He),le=xn.call(Mi,W)!==!1&&le}}return le&&!W.defaultPrevented}function st(y,R,k){if(typeof y=="function")k&&(y=m(y,k));else if(y&&typeof y.handleEvent=="function")y=m(y.handleEvent,y);else throw Error("Invalid listener argument");return 2147483647<Number(R)?-1:a.setTimeout(y,R||0)}function $t(y){y.g=st(()=>{y.g=null,y.i&&(y.i=!1,$t(y))},y.l);const R=y.h;y.h=null,y.m.apply(null,R)}class je extends fe{constructor(R,k){super(),this.m=R,this.l=k,this.h=null,this.i=!1,this.g=null}j(R){this.h=arguments,this.g?this.i=!0:$t(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Je(y){fe.call(this),this.h=y,this.g={}}x(Je,fe);var Nt=[];function Ot(y){L(y.g,function(R,k){this.g.hasOwnProperty(k)&&Ye(R)},y),y.g={}}Je.prototype.N=function(){Je.aa.N.call(this),Ot(this)},Je.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var ht=a.JSON.stringify,an=a.JSON.parse,Ht=class{stringify(y){return a.JSON.stringify(y,void 0)}parse(y){return a.JSON.parse(y,void 0)}};function hn(){}hn.prototype.h=null;function ie(y){return y.h||(y.h=y.i())}function Ke(){}var _e={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Ie(){Ce.call(this,"d")}x(Ie,Ce);function et(){Ce.call(this,"c")}x(et,Ce);var $e={},Ft=null;function bn(){return Ft=Ft||new xe}$e.La="serverreachability";function $n(y){Ce.call(this,$e.La,y)}x($n,Ce);function ln(y){const R=bn();Ve(R,new $n(R))}$e.STAT_EVENT="statevent";function Bi(y,R){Ce.call(this,$e.STAT_EVENT,y),this.stat=R}x(Bi,Ce);function Z(y){const R=bn();Ve(R,new Bi(R,y))}$e.Ma="timingevent";function oe(y,R){Ce.call(this,$e.Ma,y),this.size=R}x(oe,Ce);function ye(y,R){if(typeof y!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){y()},R)}function Ae(){this.g=!0}Ae.prototype.xa=function(){this.g=!1};function rt(y,R,k,W,le,ve){y.info(function(){if(y.g)if(ve)for(var He="",xn=ve.split("&"),Mi=0;Mi<xn.length;Mi++){var fn=xn[Mi].split("=");if(1<fn.length){var Ii=fn[0];fn=fn[1];var Un=Ii.split("_");He=2<=Un.length&&Un[1]=="type"?He+(Ii+"="+fn+"&"):He+(Ii+"=redacted&")}}else He=null;else He=ve;return"XMLHTTP REQ ("+W+") [attempt "+le+"]: "+R+`
`+k+`
`+He})}function Tt(y,R,k,W,le,ve,He){y.info(function(){return"XMLHTTP RESP ("+W+") [ attempt "+le+"]: "+R+`
`+k+`
`+ve+" "+He})}function Ct(y,R,k,W){y.info(function(){return"XMLHTTP TEXT ("+R+"): "+mt(y,k)+(W?" "+W:"")})}function dt(y,R){y.info(function(){return"TIMEOUT: "+R})}Ae.prototype.info=function(){};function mt(y,R){if(!y.g)return R;if(!R)return null;try{var k=JSON.parse(R);if(k){for(y=0;y<k.length;y++)if(Array.isArray(k[y])){var W=k[y];if(!(2>W.length)){var le=W[1];if(Array.isArray(le)&&!(1>le.length)){var ve=le[0];if(ve!="noop"&&ve!="stop"&&ve!="close")for(var He=1;He<le.length;He++)le[He]=""}}}}return ht(k)}catch{return R}}var tt={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},St={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},Xt;function tn(){}x(tn,hn),tn.prototype.g=function(){return new XMLHttpRequest},tn.prototype.i=function(){return{}},Xt=new tn;function Dn(y,R,k,W){this.j=y,this.i=R,this.l=k,this.R=W||1,this.U=new Je(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Sn}function Sn(){this.i=null,this.g="",this.h=!1}var H={},ee={};function pe(y,R,k){y.L=1,y.v=ca(Yi(R)),y.m=k,y.P=!0,me(y,null)}function me(y,R){y.F=Date.now(),Xe(y),y.A=Yi(y.v);var k=y.A,W=y.R;Array.isArray(W)||(W=[String(W)]),vh(k.i,"t",W),y.C=0,k=y.j.J,y.h=new Sn,y.g=Bc(y.j,k?R:null,!y.m),0<y.O&&(y.M=new je(m(y.Y,y,y.g),y.O)),R=y.U,k=y.g,W=y.ca;var le="readystatechange";Array.isArray(le)||(le&&(Nt[0]=le.toString()),le=Nt);for(var ve=0;ve<le.length;ve++){var He=ke(k,le[ve],W||R.handleEvent,!1,R.h||R);if(!He)break;R.g[He.key]=He}R=y.H?I(y.H):{},y.m?(y.u||(y.u="POST"),R["Content-Type"]="application/x-www-form-urlencoded",y.g.ea(y.A,y.u,y.m,R)):(y.u="GET",y.g.ea(y.A,y.u,null,R)),ln(),rt(y.i,y.u,y.A,y.l,y.R,y.m)}Dn.prototype.ca=function(y){y=y.target;const R=this.M;R&&xi(y)==3?R.j():this.Y(y)},Dn.prototype.Y=function(y){try{if(y==this.g)e:{const Un=xi(this.g);var R=this.g.Ba();const Pi=this.g.Z();if(!(3>Un)&&(Un!=3||this.g&&(this.h.h||this.g.oa()||Uc(this.g)))){this.J||Un!=4||R==7||(R==8||0>=Pi?ln(3):ln(2)),ot(this);var k=this.g.Z();this.X=k;t:if(re(this)){var W=Uc(this.g);y="";var le=W.length,ve=xi(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Lt(this),It(this);var He="";break t}this.h.i=new a.TextDecoder}for(R=0;R<le;R++)this.h.h=!0,y+=this.h.i.decode(W[R],{stream:!(ve&&R==le-1)});W.length=0,this.h.g+=y,this.C=0,He=this.h.g}else He=this.g.oa();if(this.o=k==200,Tt(this.i,this.u,this.A,this.l,this.R,Un,k),this.o){if(this.T&&!this.K){t:{if(this.g){var xn,Mi=this.g;if((xn=Mi.g?Mi.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!S(xn)){var fn=xn;break t}}fn=null}if(k=fn)Ct(this.i,this.l,k,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,Fe(this,k);else{this.o=!1,this.s=3,Z(12),Lt(this),It(this);break e}}if(this.P){k=!0;let pn;for(;!this.J&&this.C<He.length;)if(pn=Ue(this,He),pn==ee){Un==4&&(this.s=4,Z(14),k=!1),Ct(this.i,this.l,null,"[Incomplete Response]");break}else if(pn==H){this.s=4,Z(15),Ct(this.i,this.l,He,"[Invalid Chunk]"),k=!1;break}else Ct(this.i,this.l,pn,null),Fe(this,pn);if(re(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Un!=4||He.length!=0||this.h.h||(this.s=1,Z(16),k=!1),this.o=this.o&&k,!k)Ct(this.i,this.l,He,"[Invalid Chunked Response]"),Lt(this),It(this);else if(0<He.length&&!this.W){this.W=!0;var Ii=this.j;Ii.g==this&&Ii.ba&&!Ii.M&&(Ii.j.info("Great, no buffering proxy detected. Bytes received: "+He.length),Ss(Ii),Ii.M=!0,Z(11))}}else Ct(this.i,this.l,He,null),Fe(this,He);Un==4&&Lt(this),this.o&&!this.J&&(Un==4?Wf(this.j,this):(this.o=!1,Xe(this)))}else _h(this.g),k==400&&0<He.indexOf("Unknown SID")?(this.s=3,Z(12)):(this.s=0,Z(13)),Lt(this),It(this)}}}catch{}finally{}};function re(y){return y.g?y.u=="GET"&&y.L!=2&&y.j.Ca:!1}function Ue(y,R){var k=y.C,W=R.indexOf(`
`,k);return W==-1?ee:(k=Number(R.substring(k,W)),isNaN(k)?H:(W+=1,W+k>R.length?ee:(R=R.slice(W,W+k),y.C=W+k,R)))}Dn.prototype.cancel=function(){this.J=!0,Lt(this)};function Xe(y){y.S=Date.now()+y.I,ct(y,y.I)}function ct(y,R){if(y.B!=null)throw Error("WatchDog timer not null");y.B=ye(m(y.ba,y),R)}function ot(y){y.B&&(a.clearTimeout(y.B),y.B=null)}Dn.prototype.ba=function(){this.B=null;const y=Date.now();0<=y-this.S?(dt(this.i,this.A),this.L!=2&&(ln(),Z(17)),Lt(this),this.s=2,It(this)):ct(this,this.S-y)};function It(y){y.j.G==0||y.J||Wf(y.j,y)}function Lt(y){ot(y);var R=y.M;R&&typeof R.ma=="function"&&R.ma(),y.M=null,Ot(y.U),y.g&&(R=y.g,y.g=null,R.abort(),R.ma())}function Fe(y,R){try{var k=y.j;if(k.G!=0&&(k.g==y||jt(k.h,y))){if(!y.K&&jt(k.h,y)&&k.G==3){try{var W=k.Da.g.parse(R)}catch{W=null}if(Array.isArray(W)&&W.length==3){var le=W;if(le[0]==0){e:if(!k.u){if(k.g)if(k.g.F+3e3<y.F)fa(k),jc(k);else break e;Th(k),Z(18)}}else k.za=le[1],0<k.za-k.T&&37500>le[2]&&k.F&&k.v==0&&!k.C&&(k.C=ye(m(k.Za,k),6e3));if(1>=_t(k.h)&&k.ca){try{k.ca()}catch{}k.ca=void 0}}else Uo(k,11)}else if((y.K||k.g==y)&&fa(k),!S(R))for(le=k.Da.g.parse(R),R=0;R<le.length;R++){let fn=le[R];if(k.T=fn[0],fn=fn[1],k.G==2)if(fn[0]=="c"){k.K=fn[1],k.ia=fn[2];const Ii=fn[3];Ii!=null&&(k.la=Ii,k.j.info("VER="+k.la));const Un=fn[4];Un!=null&&(k.Aa=Un,k.j.info("SVER="+k.Aa));const Pi=fn[5];Pi!=null&&typeof Pi=="number"&&0<Pi&&(W=1.5*Pi,k.L=W,k.j.info("backChannelRequestTimeoutMs_="+W)),W=k;const pn=y.g;if(pn){const Fo=pn.g?pn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Fo){var ve=W.h;ve.g||Fo.indexOf("spdy")==-1&&Fo.indexOf("quic")==-1&&Fo.indexOf("h2")==-1||(ve.j=ve.l,ve.g=new Set,ve.h&&(Qe(ve,ve.h),ve.h=null))}if(W.D){const Vr=pn.g?pn.g.getResponseHeader("X-HTTP-Session-Id"):null;Vr&&(W.ya=Vr,On(W.I,W.D,Vr))}}k.G=3,k.l&&k.l.ua(),k.ba&&(k.R=Date.now()-y.F,k.j.info("Handshake RTT: "+k.R+"ms")),W=k;var He=y;if(W.qa=Eh(W,W.J?W.ia:null,W.W),He.K){Vn(W.h,He);var xn=He,Mi=W.L;Mi&&(xn.I=Mi),xn.B&&(ot(xn),Xe(xn)),W.g=He}else Sh(W);0<k.i.length&&al(k)}else fn[0]!="stop"&&fn[0]!="close"||Uo(k,7);else k.G==3&&(fn[0]=="stop"||fn[0]=="close"?fn[0]=="stop"?Uo(k,7):Fc(k):fn[0]!="noop"&&k.l&&k.l.ta(fn),k.v=0)}}ln(4)}catch{}}var bt=class{constructor(y,R){this.g=y,this.map=R}};function Yt(y){this.l=y||10,a.PerformanceNavigationTiming?(y=a.performance.getEntriesByType("navigation"),y=0<y.length&&(y[0].nextHopProtocol=="hq"||y[0].nextHopProtocol=="h2")):y=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=y?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function At(y){return y.h?!0:y.g?y.g.size>=y.j:!1}function _t(y){return y.h?1:y.g?y.g.size:0}function jt(y,R){return y.h?y.h==R:y.g?y.g.has(R):!1}function Qe(y,R){y.g?y.g.add(R):y.h=R}function Vn(y,R){y.h&&y.h==R?y.h=null:y.g&&y.g.has(R)&&y.g.delete(R)}Yt.prototype.cancel=function(){if(this.i=sn(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const y of this.g.values())y.cancel();this.g.clear()}};function sn(y){if(y.h!=null)return y.i.concat(y.h.D);if(y.g!=null&&y.g.size!==0){let R=y.i;for(const k of y.g.values())R=R.concat(k.D);return R}return b(y.i)}function Ci(y){if(y.V&&typeof y.V=="function")return y.V();if(typeof Map<"u"&&y instanceof Map||typeof Set<"u"&&y instanceof Set)return Array.from(y.values());if(typeof y=="string")return y.split("");if(l(y)){for(var R=[],k=y.length,W=0;W<k;W++)R.push(y[W]);return R}R=[],k=0;for(W in y)R[k++]=y[W];return R}function ri(y){if(y.na&&typeof y.na=="function")return y.na();if(!y.V||typeof y.V!="function"){if(typeof Map<"u"&&y instanceof Map)return Array.from(y.keys());if(!(typeof Set<"u"&&y instanceof Set)){if(l(y)||typeof y=="string"){var R=[];y=y.length;for(var k=0;k<y;k++)R.push(k);return R}R=[],k=0;for(const W in y)R[k++]=W;return R}}}function vi(y,R){if(y.forEach&&typeof y.forEach=="function")y.forEach(R,void 0);else if(l(y)||typeof y=="string")Array.prototype.forEach.call(y,R,void 0);else for(var k=ri(y),W=Ci(y),le=W.length,ve=0;ve<le;ve++)R.call(void 0,W[ve],k&&k[ve],y)}var lo=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function kn(y,R){if(y){y=y.split("&");for(var k=0;k<y.length;k++){var W=y[k].indexOf("="),le=null;if(0<=W){var ve=y[k].substring(0,W);le=y[k].substring(W+1)}else ve=y[k];R(ve,le?decodeURIComponent(le.replace(/\+/g," ")):"")}}}function si(y){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,y instanceof si){this.h=y.h,Bn(this,y.j),this.o=y.o,this.g=y.g,Fr(this,y.s),this.l=y.l;var R=y.i,k=new Dc;k.i=R.i,R.g&&(k.g=new Map(R.g),k.h=R.h),vs(this,k),this.m=y.m}else y&&(R=String(y).match(lo))?(this.h=!1,Bn(this,R[1]||"",!0),this.o=Oo(R[2]||""),this.g=Oo(R[3]||"",!0),Fr(this,R[4]),this.l=Oo(R[5]||"",!0),vs(this,R[6]||"",!0),this.m=Oo(R[7]||"")):(this.h=!1,this.i=new Dc(null,this.h))}si.prototype.toString=function(){var y=[],R=this.j;R&&y.push(co(R,dy,!0),":");var k=this.g;return(k||R=="file")&&(y.push("//"),(R=this.o)&&y.push(co(R,dy,!0),"@"),y.push(encodeURIComponent(String(k)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),k=this.s,k!=null&&y.push(":",String(k))),(k=this.l)&&(this.g&&k.charAt(0)!="/"&&y.push("/"),y.push(co(k,k.charAt(0)=="/"?Vf:vb,!0))),(k=this.i.toString())&&y.push("?",k),(k=this.m)&&y.push("#",co(k,Lc)),y.join("")};function Yi(y){return new si(y)}function Bn(y,R,k){y.j=k?Oo(R,!0):R,y.j&&(y.j=y.j.replace(/:$/,""))}function Fr(y,R){if(R){if(R=Number(R),isNaN(R)||0>R)throw Error("Bad port number "+R);y.s=R}else y.s=null}function vs(y,R,k){R instanceof Dc?(y.i=R,xb(y.i,y.h)):(k||(R=co(R,Bf)),y.i=new Dc(R,y.h))}function On(y,R,k){y.i.set(R,k)}function ca(y){return On(y,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),y}function Oo(y,R){return y?R?decodeURI(y.replace(/%25/g,"%2525")):decodeURIComponent(y):""}function co(y,R,k){return typeof y=="string"?(y=encodeURI(y).replace(R,yh),k&&(y=y.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),y):null}function yh(y){return y=y.charCodeAt(0),"%"+(y>>4&15).toString(16)+(y&15).toString(16)}var dy=/[#\/\?@]/g,vb=/[#\?:]/g,Vf=/[#\?]/g,Bf=/[#\?@]/g,Lc=/#/g;function Dc(y,R){this.h=this.g=null,this.i=y||null,this.j=!!R}function zs(y){y.g||(y.g=new Map,y.h=0,y.i&&kn(y.i,function(R,k){y.add(decodeURIComponent(R.replace(/\+/g," ")),k)}))}n=Dc.prototype,n.add=function(y,R){zs(this),this.i=null,y=ua(this,y);var k=this.g.get(y);return k||this.g.set(y,k=[]),k.push(R),this.h+=1,this};function vn(y,R){zs(y),R=ua(y,R),y.g.has(R)&&(y.i=null,y.h-=y.g.get(R).length,y.g.delete(R))}function zf(y,R){return zs(y),R=ua(y,R),y.g.has(R)}n.forEach=function(y,R){zs(this),this.g.forEach(function(k,W){k.forEach(function(le){y.call(R,le,W,this)},this)},this)},n.na=function(){zs(this);const y=Array.from(this.g.values()),R=Array.from(this.g.keys()),k=[];for(let W=0;W<R.length;W++){const le=y[W];for(let ve=0;ve<le.length;ve++)k.push(R[W])}return k},n.V=function(y){zs(this);let R=[];if(typeof y=="string")zf(this,y)&&(R=R.concat(this.g.get(ua(this,y))));else{y=Array.from(this.g.values());for(let k=0;k<y.length;k++)R=R.concat(y[k])}return R},n.set=function(y,R){return zs(this),this.i=null,y=ua(this,y),zf(this,y)&&(this.h-=this.g.get(y).length),this.g.set(y,[R]),this.h+=1,this},n.get=function(y,R){return y?(y=this.V(y),0<y.length?String(y[0]):R):R};function vh(y,R,k){vn(y,R),0<k.length&&(y.i=null,y.g.set(ua(y,R),b(k)),y.h+=k.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const y=[],R=Array.from(this.g.keys());for(var k=0;k<R.length;k++){var W=R[k];const ve=encodeURIComponent(String(W)),He=this.V(W);for(W=0;W<He.length;W++){var le=ve;He[W]!==""&&(le+="="+encodeURIComponent(String(He[W]))),y.push(le)}}return this.i=y.join("&")};function ua(y,R){return R=String(R),y.j&&(R=R.toLowerCase()),R}function xb(y,R){R&&!y.j&&(zs(y),y.i=null,y.g.forEach(function(k,W){var le=W.toLowerCase();W!=le&&(vn(this,W),vh(this,le,k))},y)),y.j=R}function _b(y,R){const k=new Ae;if(a.Image){const W=new Image;W.onload=g(Hs,k,"TestLoadImage: loaded",!0,R,W),W.onerror=g(Hs,k,"TestLoadImage: error",!1,R,W),W.onabort=g(Hs,k,"TestLoadImage: abort",!1,R,W),W.ontimeout=g(Hs,k,"TestLoadImage: timeout",!1,R,W),a.setTimeout(function(){W.ontimeout&&W.ontimeout()},1e4),W.src=y}else R(!1)}function Ai(y,R){const k=new Ae,W=new AbortController,le=setTimeout(()=>{W.abort(),Hs(k,"TestPingServer: timeout",!1,R)},1e4);fetch(y,{signal:W.signal}).then(ve=>{clearTimeout(le),ve.ok?Hs(k,"TestPingServer: ok",!0,R):Hs(k,"TestPingServer: server error",!1,R)}).catch(()=>{clearTimeout(le),Hs(k,"TestPingServer: error",!1,R)})}function Hs(y,R,k,W,le){try{le&&(le.onload=null,le.onerror=null,le.onabort=null,le.ontimeout=null),W(k)}catch{}}function wb(){this.g=new Ht}function Hf(y,R,k){const W=k||"";try{vi(y,function(le,ve){let He=le;c(le)&&(He=ht(le)),R.push(W+ve+"="+encodeURIComponent(He))})}catch(le){throw R.push(W+"type="+encodeURIComponent("_badmap")),le}}function xh(y){this.l=y.Ub||null,this.j=y.eb||!1}x(xh,hn),xh.prototype.g=function(){return new ha(this.l,this.j)},xh.prototype.i=function(y){return function(){return y}}({});function ha(y,R){xe.call(this),this.D=y,this.o=R,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}x(ha,xe),n=ha.prototype,n.open=function(y,R){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=y,this.A=R,this.readyState=1,Oc(this)},n.send=function(y){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const R={headers:this.u,method:this.B,credentials:this.m,cache:void 0};y&&(R.body=y),(this.D||a).fetch(new Request(this.A,R)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,kc(this)),this.readyState=0},n.Sa=function(y){if(this.g&&(this.l=y,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=y.headers,this.readyState=2,Oc(this)),this.g&&(this.readyState=3,Oc(this),this.g)))if(this.responseType==="arraybuffer")y.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in y){if(this.j=y.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;xs(this)}else y.text().then(this.Ra.bind(this),this.ga.bind(this))};function xs(y){y.j.read().then(y.Pa.bind(y)).catch(y.ga.bind(y))}n.Pa=function(y){if(this.g){if(this.o&&y.value)this.response.push(y.value);else if(!this.o){var R=y.value?y.value:new Uint8Array(0);(R=this.v.decode(R,{stream:!y.done}))&&(this.response=this.responseText+=R)}y.done?kc(this):Oc(this),this.readyState==3&&xs(this)}},n.Ra=function(y){this.g&&(this.response=this.responseText=y,kc(this))},n.Qa=function(y){this.g&&(this.response=y,kc(this))},n.ga=function(){this.g&&kc(this)};function kc(y){y.readyState=4,y.l=null,y.j=null,y.v=null,Oc(y)}n.setRequestHeader=function(y,R){this.u.append(y,R)},n.getResponseHeader=function(y){return this.h&&this.h.get(y.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const y=[],R=this.h.entries();for(var k=R.next();!k.done;)k=k.value,y.push(k[0]+": "+k[1]),k=R.next();return y.join(`\r
`)};function Oc(y){y.onreadystatechange&&y.onreadystatechange.call(y)}Object.defineProperty(ha.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(y){this.m=y?"include":"same-origin"}});function _s(y){let R="";return L(y,function(k,W){R+=W,R+=":",R+=k,R+=`\r
`}),R}function ws(y,R,k){e:{for(W in k){var W=!1;break e}W=!0}W||(k=_s(k),typeof y=="string"?k!=null&&encodeURIComponent(String(k)):On(y,R,k))}function Xn(y){xe.call(this),this.headers=new Map,this.o=y||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}x(Xn,xe);var Gf=/^https?$/i,fy=["POST","PUT"];n=Xn.prototype,n.Ha=function(y){this.J=y},n.ea=function(y,R,k,W){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+y);R=R?R.toUpperCase():"GET",this.D=y,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():Xt.g(),this.v=this.o?ie(this.o):ie(Xt),this.g.onreadystatechange=m(this.Ea,this);try{this.B=!0,this.g.open(R,String(y),!0),this.B=!1}catch(ve){py(this,ve);return}if(y=k||"",k=new Map(this.headers),W)if(Object.getPrototypeOf(W)===Object.prototype)for(var le in W)k.set(le,W[le]);else if(typeof W.keys=="function"&&typeof W.get=="function")for(const ve of W.keys())k.set(ve,W.get(ve));else throw Error("Unknown input type for opt_headers: "+String(W));W=Array.from(k.keys()).find(ve=>ve.toLowerCase()=="content-type"),le=a.FormData&&y instanceof a.FormData,!(0<=Array.prototype.indexOf.call(fy,R,void 0))||W||le||k.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[ve,He]of k)this.g.setRequestHeader(ve,He);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{gy(this),this.u=!0,this.g.send(y),this.u=!1}catch(ve){py(this,ve)}};function py(y,R){y.h=!1,y.g&&(y.j=!0,y.g.abort(),y.j=!1),y.l=R,y.m=5,bs(y),da(y)}function bs(y){y.A||(y.A=!0,Ve(y,"complete"),Ve(y,"error"))}n.abort=function(y){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=y||7,Ve(this,"complete"),Ve(this,"abort"),da(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),da(this,!0)),Xn.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?my(this):this.bb())},n.bb=function(){my(this)};function my(y){if(y.h&&typeof o<"u"&&(!y.v[1]||xi(y)!=4||y.Z()!=2)){if(y.u&&xi(y)==4)st(y.Ea,0,y);else if(Ve(y,"readystatechange"),xi(y)==4){y.h=!1;try{const He=y.Z();e:switch(He){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var R=!0;break e;default:R=!1}var k;if(!(k=R)){var W;if(W=He===0){var le=String(y.D).match(lo)[1]||null;!le&&a.self&&a.self.location&&(le=a.self.location.protocol.slice(0,-1)),W=!Gf.test(le?le.toLowerCase():"")}k=W}if(k)Ve(y,"complete"),Ve(y,"success");else{y.m=6;try{var ve=2<xi(y)?y.g.statusText:""}catch{ve=""}y.l=ve+" ["+y.Z()+"]",bs(y)}}finally{da(y)}}}}function da(y,R){if(y.g){gy(y);const k=y.g,W=y.v[0]?()=>{}:null;y.g=null,y.v=null,R||Ve(y,"ready");try{k.onreadystatechange=W}catch{}}}function gy(y){y.I&&(a.clearTimeout(y.I),y.I=null)}n.isActive=function(){return!!this.g};function xi(y){return y.g?y.g.readyState:0}n.Z=function(){try{return 2<xi(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(y){if(this.g){var R=this.g.responseText;return y&&R.indexOf(y)==0&&(R=R.substring(y.length)),an(R)}};function Uc(y){try{if(!y.g)return null;if("response"in y.g)return y.g.response;switch(y.H){case"":case"text":return y.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in y.g)return y.g.mozResponseArrayBuffer}return null}catch{return null}}function _h(y){const R={};y=(y.g&&2<=xi(y)&&y.g.getAllResponseHeaders()||"").split(`\r
`);for(let W=0;W<y.length;W++){if(S(y[W]))continue;var k=D(y[W]);const le=k[0];if(k=k[1],typeof k!="string")continue;k=k.trim();const ve=R[le]||[];R[le]=ve,ve.push(k)}N(R,function(W){return W.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Gs(y,R,k){return k&&k.internalChannelParams&&k.internalChannelParams[y]||R}function wh(y){this.Aa=0,this.i=[],this.j=new Ae,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Gs("failFast",!1,y),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Gs("baseRetryDelayMs",5e3,y),this.cb=Gs("retryDelaySeedMs",1e4,y),this.Wa=Gs("forwardChannelMaxRetries",2,y),this.wa=Gs("forwardChannelRequestTimeoutMs",2e4,y),this.pa=y&&y.xmlHttpFactory||void 0,this.Xa=y&&y.Tb||void 0,this.Ca=y&&y.useFetchStreams||!1,this.L=void 0,this.J=y&&y.supportsCrossDomainXhr||!1,this.K="",this.h=new Yt(y&&y.concurrentRequestLimit),this.Da=new wb,this.P=y&&y.fastHandshake||!1,this.O=y&&y.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=y&&y.Rb||!1,y&&y.xa&&this.j.xa(),y&&y.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&y&&y.detectBufferingProxy||!1,this.ja=void 0,y&&y.longPollingTimeout&&0<y.longPollingTimeout&&(this.ja=y.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=wh.prototype,n.la=8,n.G=1,n.connect=function(y,R,k,W){Z(0),this.W=y,this.H=R||{},k&&W!==void 0&&(this.H.OSID=k,this.H.OAID=W),this.F=this.X,this.I=Eh(this,null,this.W),al(this)};function Fc(y){if(bh(y),y.G==3){var R=y.U++,k=Yi(y.I);if(On(k,"SID",y.K),On(k,"RID",R),On(k,"TYPE","terminate"),pr(y,k),R=new Dn(y,y.j,R),R.L=2,R.v=ca(Yi(k)),k=!1,a.navigator&&a.navigator.sendBeacon)try{k=a.navigator.sendBeacon(R.v.toString(),"")}catch{}!k&&a.Image&&(new Image().src=R.v,k=!0),k||(R.g=Bc(R.j,null),R.g.ea(R.v)),R.F=Date.now(),Xe(R)}qf(y)}function jc(y){y.g&&(Ss(y),y.g.cancel(),y.g=null)}function bh(y){jc(y),y.u&&(a.clearTimeout(y.u),y.u=null),fa(y),y.h.cancel(),y.s&&(typeof y.s=="number"&&a.clearTimeout(y.s),y.s=null)}function al(y){if(!At(y.h)&&!y.s){y.s=!0;var R=y.Ga;U||Y(),F||(U(),F=!0),X.add(R,y),y.B=0}}function ll(y,R){return _t(y.h)>=y.h.j-(y.s?1:0)?!1:y.s?(y.i=R.D.concat(y.i),!0):y.G==1||y.G==2||y.B>=(y.Va?0:y.Wa)?!1:(y.s=ye(m(y.Ga,y,R),Vc(y,y.B)),y.B++,!0)}n.Ga=function(y){if(this.s)if(this.s=null,this.G==1){if(!y){this.U=Math.floor(1e5*Math.random()),y=this.U++;const le=new Dn(this,this.j,y);let ve=this.o;if(this.S&&(ve?(ve=I(ve),M(ve,this.S)):ve=this.S),this.m!==null||this.O||(le.H=ve,ve=null),this.P)e:{for(var R=0,k=0;k<this.i.length;k++){t:{var W=this.i[k];if("__data__"in W.map&&(W=W.map.__data__,typeof W=="string")){W=W.length;break t}W=void 0}if(W===void 0)break;if(R+=W,4096<R){R=k;break e}if(R===4096||k===this.i.length-1){R=k+1;break e}}R=1e3}else R=1e3;R=uo(this,le,R),k=Yi(this.I),On(k,"RID",y),On(k,"CVER",22),this.D&&On(k,"X-HTTP-Session-Id",this.D),pr(this,k),ve&&(this.O?R="headers="+encodeURIComponent(String(_s(ve)))+"&"+R:this.m&&ws(k,this.m,ve)),Qe(this.h,le),this.Ua&&On(k,"TYPE","init"),this.P?(On(k,"$req",R),On(k,"SID","null"),le.T=!0,pe(le,k,null)):pe(le,k,R),this.G=2}}else this.G==3&&(y?jr(this,y):this.i.length==0||At(this.h)||jr(this))};function jr(y,R){var k;R?k=R.l:k=y.U++;const W=Yi(y.I);On(W,"SID",y.K),On(W,"RID",k),On(W,"AID",y.T),pr(y,W),y.m&&y.o&&ws(W,y.m,y.o),k=new Dn(y,y.j,k,y.B+1),y.m===null&&(k.H=y.o),R&&(y.i=R.D.concat(y.i)),R=uo(y,k,1e3),k.I=Math.round(.5*y.wa)+Math.round(.5*y.wa*Math.random()),Qe(y.h,k),pe(k,W,R)}function pr(y,R){y.H&&L(y.H,function(k,W){On(R,W,k)}),y.l&&vi({},function(k,W){On(R,W,k)})}function uo(y,R,k){k=Math.min(y.i.length,k);var W=y.l?m(y.l.Na,y.l,y):null;e:{var le=y.i;let ve=-1;for(;;){const He=["count="+k];ve==-1?0<k?(ve=le[0].g,He.push("ofs="+ve)):ve=0:He.push("ofs="+ve);let xn=!0;for(let Mi=0;Mi<k;Mi++){let fn=le[Mi].g;const Ii=le[Mi].map;if(fn-=ve,0>fn)ve=Math.max(0,le[Mi].g-100),xn=!1;else try{Hf(Ii,He,"req"+fn+"_")}catch{W&&W(Ii)}}if(xn){W=He.join("&");break e}}}return y=y.i.splice(0,k),R.D=y,W}function Sh(y){if(!y.g&&!y.u){y.Y=1;var R=y.Fa;U||Y(),F||(U(),F=!0),X.add(R,y),y.v=0}}function Th(y){return y.g||y.u||3<=y.v?!1:(y.Y++,y.u=ye(m(y.Fa,y),Vc(y,y.v)),y.v++,!0)}n.Fa=function(){if(this.u=null,ho(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var y=2*this.R;this.j.info("BP detection timer enabled: "+y),this.A=ye(m(this.ab,this),y)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Z(10),jc(this),ho(this))};function Ss(y){y.A!=null&&(a.clearTimeout(y.A),y.A=null)}function ho(y){y.g=new Dn(y,y.j,"rpc",y.Y),y.m===null&&(y.g.H=y.o),y.g.O=0;var R=Yi(y.qa);On(R,"RID","rpc"),On(R,"SID",y.K),On(R,"AID",y.T),On(R,"CI",y.F?"0":"1"),!y.F&&y.ja&&On(R,"TO",y.ja),On(R,"TYPE","xmlhttp"),pr(y,R),y.m&&y.o&&ws(R,y.m,y.o),y.L&&(y.g.I=y.L);var k=y.g;y=y.ia,k.L=1,k.v=ca(Yi(R)),k.m=null,k.P=!0,me(k,y)}n.Za=function(){this.C!=null&&(this.C=null,jc(this),Th(this),Z(19))};function fa(y){y.C!=null&&(a.clearTimeout(y.C),y.C=null)}function Wf(y,R){var k=null;if(y.g==R){fa(y),Ss(y),y.g=null;var W=2}else if(jt(y.h,R))k=R.D,Vn(y.h,R),W=1;else return;if(y.G!=0){if(R.o)if(W==1){k=R.m?R.m.length:0,R=Date.now()-R.F;var le=y.B;W=bn(),Ve(W,new oe(W,k)),al(y)}else Sh(y);else if(le=R.s,le==3||le==0&&0<R.X||!(W==1&&ll(y,R)||W==2&&Th(y)))switch(k&&0<k.length&&(R=y.h,R.i=R.i.concat(k)),le){case 1:Uo(y,5);break;case 4:Uo(y,10);break;case 3:Uo(y,6);break;default:Uo(y,2)}}}function Vc(y,R){let k=y.Ta+Math.floor(Math.random()*y.cb);return y.isActive()||(k*=2),k*R}function Uo(y,R){if(y.j.info("Error code "+R),R==2){var k=m(y.fb,y),W=y.Xa;const le=!W;W=new si(W||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||Bn(W,"https"),ca(W),le?_b(W.toString(),k):Ai(W.toString(),k)}else Z(2);y.G=0,y.l&&y.l.sa(R),qf(y),bh(y)}n.fb=function(y){y?(this.j.info("Successfully pinged google.com"),Z(2)):(this.j.info("Failed to ping google.com"),Z(1))};function qf(y){if(y.G=0,y.ka=[],y.l){const R=sn(y.h);(R.length!=0||y.i.length!=0)&&(w(y.ka,R),w(y.ka,y.i),y.h.i.length=0,b(y.i),y.i.length=0),y.l.ra()}}function Eh(y,R,k){var W=k instanceof si?Yi(k):new si(k);if(W.g!="")R&&(W.g=R+"."+W.g),Fr(W,W.s);else{var le=a.location;W=le.protocol,R=R?R+"."+le.hostname:le.hostname,le=+le.port;var ve=new si(null);W&&Bn(ve,W),R&&(ve.g=R),le&&Fr(ve,le),k&&(ve.l=k),W=ve}return k=y.D,R=y.ya,k&&R&&On(W,k,R),On(W,"VER",y.la),pr(y,W),W}function Bc(y,R,k){if(R&&!y.J)throw Error("Can't create secondary domain capable XhrIo object.");return R=y.Ca&&!y.pa?new Xn(new xh({eb:k})):new Xn(y.pa),R.Ha(y.J),R}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function $f(){}n=$f.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function zc(){}zc.prototype.g=function(y,R){return new mr(y,R)};function mr(y,R){xe.call(this),this.g=new wh(R),this.l=y,this.h=R&&R.messageUrlParams||null,y=R&&R.messageHeaders||null,R&&R.clientProtocolHeaderRequired&&(y?y["X-Client-Protocol"]="webchannel":y={"X-Client-Protocol":"webchannel"}),this.g.o=y,y=R&&R.initMessageHeaders||null,R&&R.messageContentType&&(y?y["X-WebChannel-Content-Type"]=R.messageContentType:y={"X-WebChannel-Content-Type":R.messageContentType}),R&&R.va&&(y?y["X-WebChannel-Client-Profile"]=R.va:y={"X-WebChannel-Client-Profile":R.va}),this.g.S=y,(y=R&&R.Sb)&&!S(y)&&(this.g.m=y),this.v=R&&R.supportsCrossDomainXhr||!1,this.u=R&&R.sendRawJson||!1,(R=R&&R.httpSessionIdParam)&&!S(R)&&(this.g.D=R,y=this.h,y!==null&&R in y&&(y=this.h,R in y&&delete y[R])),this.j=new Ts(this)}x(mr,xe),mr.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},mr.prototype.close=function(){Fc(this.g)},mr.prototype.o=function(y){var R=this.g;if(typeof y=="string"){var k={};k.__data__=y,y=k}else this.u&&(k={},k.__data__=ht(y),y=k);R.i.push(new bt(R.Ya++,y)),R.G==3&&al(R)},mr.prototype.N=function(){this.g.l=null,delete this.j,Fc(this.g),delete this.g,mr.aa.N.call(this)};function Ch(y){Ie.call(this),y.__headers__&&(this.headers=y.__headers__,this.statusCode=y.__status__,delete y.__headers__,delete y.__status__);var R=y.__sm__;if(R){e:{for(const k in R){y=k;break e}y=void 0}(this.i=y)&&(y=this.i,R=R!==null&&y in R?R[y]:void 0),this.data=R}else this.data=y}x(Ch,Ie);function pa(){et.call(this),this.status=1}x(pa,et);function Ts(y){this.g=y}x(Ts,$f),Ts.prototype.ua=function(){Ve(this.g,"a")},Ts.prototype.ta=function(y){Ve(this.g,new Ch(y))},Ts.prototype.sa=function(y){Ve(this.g,new pa)},Ts.prototype.ra=function(){Ve(this.g,"b")},zc.prototype.createWebChannel=zc.prototype.g,mr.prototype.send=mr.prototype.o,mr.prototype.open=mr.prototype.m,mr.prototype.close=mr.prototype.close,Iz=function(){return new zc},Mz=function(){return bn()},Az=$e,XE={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},tt.NO_ERROR=0,tt.TIMEOUT=8,tt.HTTP_ERROR=6,G0=tt,St.COMPLETE="complete",Cz=St,Ke.EventType=_e,_e.OPEN="a",_e.CLOSE="b",_e.ERROR="c",_e.MESSAGE="d",xe.prototype.listen=xe.prototype.K,Kp=Ke,Xn.prototype.listenOnce=Xn.prototype.L,Xn.prototype.getLastError=Xn.prototype.Ka,Xn.prototype.getLastErrorCode=Xn.prototype.Ba,Xn.prototype.getStatus=Xn.prototype.Z,Xn.prototype.getResponseJson=Xn.prototype.Oa,Xn.prototype.getResponseText=Xn.prototype.oa,Xn.prototype.send=Xn.prototype.ea,Xn.prototype.setWithCredentials=Xn.prototype.Ha,Ez=Xn}).apply(typeof h0<"u"?h0:typeof self<"u"?self:typeof window<"u"?window:{});const n3="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ar{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Ar.UNAUTHENTICATED=new Ar(null),Ar.GOOGLE_CREDENTIALS=new Ar("google-credentials-uid"),Ar.FIRST_PARTY=new Ar("first-party-uid"),Ar.MOCK_USER=new Ar("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Df="11.0.2";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ih=new zM("@firebase/firestore");function ad(){return ih.logLevel}function gt(n,...e){if(ih.logLevel<=mn.DEBUG){const t=e.map(eI);ih.debug(`Firestore (${Df}): ${n}`,...t)}}function el(n,...e){if(ih.logLevel<=mn.ERROR){const t=e.map(eI);ih.error(`Firestore (${Df}): ${n}`,...t)}}function pf(n,...e){if(ih.logLevel<=mn.WARN){const t=e.map(eI);ih.warn(`Firestore (${Df}): ${n}`,...t)}}function eI(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(t){return JSON.stringify(t)}(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wt(n="Unexpected state"){const e=`FIRESTORE (${Df}) INTERNAL ASSERTION FAILED: `+n;throw el(e),new Error(e)}function jn(n,e){n||Wt()}function Jt(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ne={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class yt extends il{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ha{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pz{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class $le{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(Ar.UNAUTHENTICATED))}shutdown(){}}class Xle{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class Yle{constructor(e){this.t=e,this.currentUser=Ar.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){jn(this.o===void 0);let i=this.i;const r=l=>this.i!==i?(i=this.i,t(l)):Promise.resolve();let s=new Ha;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Ha,e.enqueueRetryable(()=>r(this.currentUser))};const o=()=>{const l=s;e.enqueueRetryable(async()=>{await l.promise,await r(this.currentUser)})},a=l=>{gt("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(gt("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Ha)}},0),o()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(i=>this.i!==e?(gt("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(jn(typeof i.accessToken=="string"),new Pz(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return jn(e===null||typeof e=="string"),new Ar(e)}}class Kle{constructor(e,t,i){this.l=e,this.h=t,this.P=i,this.type="FirstParty",this.user=Ar.FIRST_PARTY,this.T=new Map}I(){return this.P?this.P():null}get headers(){this.T.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.T.set("Authorization",e),this.h&&this.T.set("X-Goog-Iam-Authorization-Token",this.h),this.T}}class Jle{constructor(e,t,i){this.l=e,this.h=t,this.P=i}getToken(){return Promise.resolve(new Kle(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(Ar.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Qle{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class Zle{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,t){jn(this.o===void 0);const i=s=>{s.error!=null&&gt("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.R;return this.R=s.token,gt("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?t(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>i(s))};const r=s=>{gt("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>r(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?r(s):gt("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(jn(typeof t.token=="string"),this.R=t.token,new Qle(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ece(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let i=0;i<n;i++)t[i]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rz{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=Math.floor(256/e.length)*e.length;let i="";for(;i.length<20;){const r=ece(40);for(let s=0;s<r.length;++s)i.length<20&&r[s]<t&&(i+=e.charAt(r[s]%e.length))}return i}}function wn(n,e){return n<e?-1:n>e?1:0}function mf(n,e,t){return n.length===e.length&&n.every((i,r)=>t(i,e[r]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vi{static now(){return Vi.fromMillis(Date.now())}static fromDate(e){return Vi.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),i=Math.floor(1e6*(e-1e3*t));return new Vi(t,i)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new yt(Ne.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new yt(Ne.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<-62135596800)throw new yt(Ne.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new yt(Ne.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?wn(this.nanoseconds,e.nanoseconds):wn(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kt{static fromTimestamp(e){return new Kt(e)}static min(){return new Kt(new Vi(0,0))}static max(){return new Kt(new Vi(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _g{constructor(e,t,i){t===void 0?t=0:t>e.length&&Wt(),i===void 0?i=e.length-t:i>e.length-t&&Wt(),this.segments=e,this.offset=t,this.len=i}get length(){return this.len}isEqual(e){return _g.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof _g?e.forEach(i=>{t.push(i)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,i=this.limit();t<i;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const i=Math.min(e.length,t.length);for(let r=0;r<i;r++){const s=e.get(r),o=t.get(r);if(s<o)return-1;if(s>o)return 1}return e.length<t.length?-1:e.length>t.length?1:0}}class Zn extends _g{construct(e,t,i){return new Zn(e,t,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const i of e){if(i.indexOf("//")>=0)throw new yt(Ne.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);t.push(...i.split("/").filter(r=>r.length>0))}return new Zn(t)}static emptyPath(){return new Zn([])}}const tce=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class lr extends _g{construct(e,t,i){return new lr(e,t,i)}static isValidIdentifier(e){return tce.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),lr.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new lr(["__name__"])}static fromServerFormat(e){const t=[];let i="",r=0;const s=()=>{if(i.length===0)throw new yt(Ne.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(i),i=""};let o=!1;for(;r<e.length;){const a=e[r];if(a==="\\"){if(r+1===e.length)throw new yt(Ne.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[r+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new yt(Ne.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=l,r+=2}else a==="`"?(o=!o,r++):a!=="."||o?(i+=a,r++):(s(),r++)}if(s(),o)throw new yt(Ne.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new lr(t)}static emptyPath(){return new lr([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kt{constructor(e){this.path=e}static fromPath(e){return new kt(Zn.fromString(e))}static fromName(e){return new kt(Zn.fromString(e).popFirst(5))}static empty(){return new kt(Zn.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Zn.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Zn.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new kt(new Zn(e.slice()))}}function nce(n,e){const t=n.toTimestamp().seconds,i=n.toTimestamp().nanoseconds+1,r=Kt.fromTimestamp(i===1e9?new Vi(t+1,0):new Vi(t,i));return new fc(r,kt.empty(),e)}function ice(n){return new fc(n.readTime,n.key,-1)}class fc{constructor(e,t,i){this.readTime=e,this.documentKey=t,this.largestBatchId=i}static min(){return new fc(Kt.min(),kt.empty(),-1)}static max(){return new fc(Kt.max(),kt.empty(),-1)}}function rce(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=kt.comparator(n.documentKey,e.documentKey),t!==0?t:wn(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sce="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class oce{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kf(n){if(n.code!==Ne.FAILED_PRECONDITION||n.message!==sce)throw n;gt("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Le{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&Wt(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new Le((i,r)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(i,r)},this.catchCallback=s=>{this.wrapFailure(t,s).next(i,r)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof Le?t:Le.resolve(t)}catch(t){return Le.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):Le.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):Le.reject(t)}static resolve(e){return new Le((t,i)=>{t(e)})}static reject(e){return new Le((t,i)=>{i(e)})}static waitFor(e){return new Le((t,i)=>{let r=0,s=0,o=!1;e.forEach(a=>{++r,a.next(()=>{++s,o&&s===r&&t()},l=>i(l))}),o=!0,s===r&&t()})}static or(e){let t=Le.resolve(!1);for(const i of e)t=t.next(r=>r?Le.resolve(r):i());return t}static forEach(e,t){const i=[];return e.forEach((r,s)=>{i.push(t.call(this,r,s))}),this.waitFor(i)}static mapArray(e,t){return new Le((i,r)=>{const s=e.length,o=new Array(s);let a=0;for(let l=0;l<s;l++){const c=l;t(e[c]).next(u=>{o[c]=u,++a,a===s&&i(o)},u=>r(u))}})}static doWhile(e,t){return new Le((i,r)=>{const s=()=>{e()===!0?t().next(()=>{s()},r):i()};s()})}}function ace(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function Of(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xw{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=i=>this.ie(i),this.se=i=>t.writeSequenceNumber(i))}ie(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this.se&&this.se(e),e}}Xw.oe=-1;function Yw(n){return n==null}function P_(n){return n===0&&1/n==-1/0}function lce(n){return typeof n=="number"&&Number.isInteger(n)&&!P_(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cce(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=i3(e)),e=uce(n.get(t),e);return i3(e)}function uce(n,e){let t=e;const i=n.length;for(let r=0;r<i;r++){const s=n.charAt(r);switch(s){case"\0":t+="";break;case"":t+="";break;default:t+=s}}return t}function i3(n){return n+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function r3(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function Rc(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function Nz(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fi{constructor(e,t){this.comparator=e,this.root=t||or.EMPTY}insert(e,t){return new fi(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,or.BLACK,null,null))}remove(e){return new fi(this.comparator,this.root.remove(e,this.comparator).copy(null,null,or.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const i=this.comparator(e,t.key);if(i===0)return t.value;i<0?t=t.left:i>0&&(t=t.right)}return null}indexOf(e){let t=0,i=this.root;for(;!i.isEmpty();){const r=this.comparator(e,i.key);if(r===0)return t+i.left.size;r<0?i=i.left:(t+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,i)=>(e(t,i),!1))}toString(){const e=[];return this.inorderTraversal((t,i)=>(e.push(`${t}:${i}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new d0(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new d0(this.root,e,this.comparator,!1)}getReverseIterator(){return new d0(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new d0(this.root,e,this.comparator,!0)}}class d0{constructor(e,t,i,r){this.isReverse=r,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?i(e.key,t):1,t&&r&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class or{constructor(e,t,i,r,s){this.key=e,this.value=t,this.color=i??or.RED,this.left=r??or.EMPTY,this.right=s??or.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,i,r,s){return new or(e??this.key,t??this.value,i??this.color,r??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,i){let r=this;const s=i(e,r.key);return r=s<0?r.copy(null,null,null,r.left.insert(e,t,i),null):s===0?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,i)),r.fixUp()}removeMin(){if(this.left.isEmpty())return or.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let i,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),t(e,r.key)===0){if(r.right.isEmpty())return or.EMPTY;i=r.right.min(),r=r.copy(i.key,i.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,or.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,or.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Wt();const e=this.left.check();if(e!==this.right.check())throw Wt();return e+(this.isRed()?0:1)}}or.EMPTY=null,or.RED=!0,or.BLACK=!1;or.EMPTY=new class{constructor(){this.size=0}get key(){throw Wt()}get value(){throw Wt()}get color(){throw Wt()}get left(){throw Wt()}get right(){throw Wt()}copy(e,t,i,r,s){return this}insert(e,t,i){return new or(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qi{constructor(e){this.comparator=e,this.data=new fi(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,i)=>(e(t),!1))}forEachInRange(e,t){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const r=i.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let i;for(i=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new s3(this.data.getIterator())}getIteratorFrom(e){return new s3(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(i=>{t=t.add(i)}),t}isEqual(e){if(!(e instanceof qi)||this.size!==e.size)return!1;const t=this.data.getIterator(),i=e.data.getIterator();for(;t.hasNext();){const r=t.getNext().key,s=i.getNext().key;if(this.comparator(r,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new qi(this.comparator);return t.data=e,t}}class s3{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ns{constructor(e){this.fields=e,e.sort(lr.comparator)}static empty(){return new Ns([])}unionWith(e){let t=new qi(lr.comparator);for(const i of this.fields)t=t.add(i);for(const i of e)t=t.add(i);return new Ns(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return mf(this.fields,e.fields,(t,i)=>t.isEqual(i))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lz extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dr{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(r){try{return atob(r)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new Lz("Invalid base64 string: "+s):s}}(e);return new dr(t)}static fromUint8Array(e){const t=function(r){let s="";for(let o=0;o<r.length;++o)s+=String.fromCharCode(r[o]);return s}(e);return new dr(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){const i=new Uint8Array(t.length);for(let r=0;r<t.length;r++)i[r]=t.charCodeAt(r);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return wn(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}dr.EMPTY_BYTE_STRING=new dr("");const hce=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function pc(n){if(jn(!!n),typeof n=="string"){let e=0;const t=hce.exec(n);if(jn(!!t),t[1]){let r=t[1];r=(r+"000000000").substr(0,9),e=Number(r)}const i=new Date(n);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:Ti(n.seconds),nanos:Ti(n.nanos)}}function Ti(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function mc(n){return typeof n=="string"?dr.fromBase64String(n):dr.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tI(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="server_timestamp"}function Kw(n){const e=n.mapValue.fields.__previous_value__;return tI(e)?Kw(e):e}function wg(n){const e=pc(n.mapValue.fields.__local_write_time__.timestampValue);return new Vi(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dce{constructor(e,t,i,r,s,o,a,l,c){this.databaseId=e,this.appId=t,this.persistenceKey=i,this.host=r,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=c}}class bg{constructor(e,t){this.projectId=e,this.database=t||"(default)"}static empty(){return new bg("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof bg&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f0={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function gc(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?tI(n)?4:pce(n)?9007199254740991:fce(n)?10:11:Wt()}function oa(n,e){if(n===e)return!0;const t=gc(n);if(t!==gc(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return wg(n).isEqual(wg(e));case 3:return function(r,s){if(typeof r.timestampValue=="string"&&typeof s.timestampValue=="string"&&r.timestampValue.length===s.timestampValue.length)return r.timestampValue===s.timestampValue;const o=pc(r.timestampValue),a=pc(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(r,s){return mc(r.bytesValue).isEqual(mc(s.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,s){return Ti(r.geoPointValue.latitude)===Ti(s.geoPointValue.latitude)&&Ti(r.geoPointValue.longitude)===Ti(s.geoPointValue.longitude)}(n,e);case 2:return function(r,s){if("integerValue"in r&&"integerValue"in s)return Ti(r.integerValue)===Ti(s.integerValue);if("doubleValue"in r&&"doubleValue"in s){const o=Ti(r.doubleValue),a=Ti(s.doubleValue);return o===a?P_(o)===P_(a):isNaN(o)&&isNaN(a)}return!1}(n,e);case 9:return mf(n.arrayValue.values||[],e.arrayValue.values||[],oa);case 10:case 11:return function(r,s){const o=r.mapValue.fields||{},a=s.mapValue.fields||{};if(r3(o)!==r3(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!oa(o[l],a[l])))return!1;return!0}(n,e);default:return Wt()}}function Sg(n,e){return(n.values||[]).find(t=>oa(t,e))!==void 0}function gf(n,e){if(n===e)return 0;const t=gc(n),i=gc(e);if(t!==i)return wn(t,i);switch(t){case 0:case 9007199254740991:return 0;case 1:return wn(n.booleanValue,e.booleanValue);case 2:return function(s,o){const a=Ti(s.integerValue||s.doubleValue),l=Ti(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(n,e);case 3:return o3(n.timestampValue,e.timestampValue);case 4:return o3(wg(n),wg(e));case 5:return wn(n.stringValue,e.stringValue);case 6:return function(s,o){const a=mc(s),l=mc(o);return a.compareTo(l)}(n.bytesValue,e.bytesValue);case 7:return function(s,o){const a=s.split("/"),l=o.split("/");for(let c=0;c<a.length&&c<l.length;c++){const u=wn(a[c],l[c]);if(u!==0)return u}return wn(a.length,l.length)}(n.referenceValue,e.referenceValue);case 8:return function(s,o){const a=wn(Ti(s.latitude),Ti(o.latitude));return a!==0?a:wn(Ti(s.longitude),Ti(o.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return a3(n.arrayValue,e.arrayValue);case 10:return function(s,o){var a,l,c,u;const f=s.fields||{},m=o.fields||{},g=(a=f.value)===null||a===void 0?void 0:a.arrayValue,x=(l=m.value)===null||l===void 0?void 0:l.arrayValue,b=wn(((c=g?.values)===null||c===void 0?void 0:c.length)||0,((u=x?.values)===null||u===void 0?void 0:u.length)||0);return b!==0?b:a3(g,x)}(n.mapValue,e.mapValue);case 11:return function(s,o){if(s===f0.mapValue&&o===f0.mapValue)return 0;if(s===f0.mapValue)return 1;if(o===f0.mapValue)return-1;const a=s.fields||{},l=Object.keys(a),c=o.fields||{},u=Object.keys(c);l.sort(),u.sort();for(let f=0;f<l.length&&f<u.length;++f){const m=wn(l[f],u[f]);if(m!==0)return m;const g=gf(a[l[f]],c[u[f]]);if(g!==0)return g}return wn(l.length,u.length)}(n.mapValue,e.mapValue);default:throw Wt()}}function o3(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return wn(n,e);const t=pc(n),i=pc(e),r=wn(t.seconds,i.seconds);return r!==0?r:wn(t.nanos,i.nanos)}function a3(n,e){const t=n.values||[],i=e.values||[];for(let r=0;r<t.length&&r<i.length;++r){const s=gf(t[r],i[r]);if(s)return s}return wn(t.length,i.length)}function yf(n){return YE(n)}function YE(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){const i=pc(t);return`time(${i.seconds},${i.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return mc(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return kt.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let i="[",r=!0;for(const s of t.values||[])r?r=!1:i+=",",i+=YE(s);return i+"]"}(n.arrayValue):"mapValue"in n?function(t){const i=Object.keys(t.fields||{}).sort();let r="{",s=!0;for(const o of i)s?s=!1:r+=",",r+=`${o}:${YE(t.fields[o])}`;return r+"}"}(n.mapValue):Wt()}function W0(n){switch(gc(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Kw(n);return e?16+W0(e):16;case 5:return 2*n.stringValue.length;case 6:return mc(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return function(i){return(i.values||[]).reduce((r,s)=>r+W0(s),0)}(n.arrayValue);case 10:case 11:return function(i){let r=0;return Rc(i.fields,(s,o)=>{r+=s.length+W0(o)}),r}(n.mapValue);default:throw Wt()}}function l3(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function KE(n){return!!n&&"integerValue"in n}function nI(n){return!!n&&"arrayValue"in n}function c3(n){return!!n&&"nullValue"in n}function u3(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function q0(n){return!!n&&"mapValue"in n}function fce(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||t===void 0?void 0:t.stringValue)==="__vector__"}function Tm(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return Rc(n.mapValue.fields,(t,i)=>e.mapValue.fields[t]=Tm(i)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Tm(n.arrayValue.values[t]);return e}return Object.assign({},n)}function pce(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class us{constructor(e){this.value=e}static empty(){return new us({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let i=0;i<e.length-1;++i)if(t=(t.mapValue.fields||{})[e.get(i)],!q0(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Tm(t)}setAll(e){let t=lr.emptyPath(),i={},r=[];e.forEach((o,a)=>{if(!t.isImmediateParentOf(a)){const l=this.getFieldsMap(t);this.applyChanges(l,i,r),i={},r=[],t=a.popLast()}o?i[a.lastSegment()]=Tm(o):r.push(a.lastSegment())});const s=this.getFieldsMap(t);this.applyChanges(s,i,r)}delete(e){const t=this.field(e.popLast());q0(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return oa(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let i=0;i<e.length;++i){let r=t.mapValue.fields[e.get(i)];q0(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(i)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,i){Rc(t,(r,s)=>e[r]=s);for(const r of i)delete e[r]}clone(){return new us(Tm(this.value))}}function Dz(n){const e=[];return Rc(n.fields,(t,i)=>{const r=new lr([t]);if(q0(i)){const s=Dz(i.mapValue).fields;if(s.length===0)e.push(r);else for(const o of s)e.push(r.child(o))}else e.push(r)}),new Ns(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ir{constructor(e,t,i,r,s,o,a){this.key=e,this.documentType=t,this.version=i,this.readTime=r,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new Ir(e,0,Kt.min(),Kt.min(),Kt.min(),us.empty(),0)}static newFoundDocument(e,t,i,r){return new Ir(e,1,t,Kt.min(),i,r,0)}static newNoDocument(e,t){return new Ir(e,2,t,Kt.min(),Kt.min(),us.empty(),0)}static newUnknownDocument(e,t){return new Ir(e,3,t,Kt.min(),Kt.min(),us.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Kt.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=us.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=us.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Kt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Ir&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Ir(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class R_{constructor(e,t){this.position=e,this.inclusive=t}}function h3(n,e,t){let i=0;for(let r=0;r<n.position.length;r++){const s=e[r],o=n.position[r];if(s.field.isKeyField()?i=kt.comparator(kt.fromName(o.referenceValue),t.key):i=gf(o,t.data.field(s.field)),s.dir==="desc"&&(i*=-1),i!==0)break}return i}function d3(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!oa(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tg{constructor(e,t="asc"){this.field=e,this.dir=t}}function mce(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kz{}class Fi extends kz{constructor(e,t,i){super(),this.field=e,this.op=t,this.value=i}static create(e,t,i){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,i):new yce(e,t,i):t==="array-contains"?new _ce(e,i):t==="in"?new wce(e,i):t==="not-in"?new bce(e,i):t==="array-contains-any"?new Sce(e,i):new Fi(e,t,i)}static createKeyFieldInFilter(e,t,i){return t==="in"?new vce(e,i):new xce(e,i)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&this.matchesComparison(gf(t,this.value)):t!==null&&gc(this.value)===gc(t)&&this.matchesComparison(gf(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Wt()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class No extends kz{constructor(e,t){super(),this.filters=e,this.op=t,this.ae=null}static create(e,t){return new No(e,t)}matches(e){return Oz(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.ae!==null||(this.ae=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ae}getFilters(){return Object.assign([],this.filters)}}function Oz(n){return n.op==="and"}function Uz(n){return gce(n)&&Oz(n)}function gce(n){for(const e of n.filters)if(e instanceof No)return!1;return!0}function JE(n){if(n instanceof Fi)return n.field.canonicalString()+n.op.toString()+yf(n.value);if(Uz(n))return n.filters.map(e=>JE(e)).join(",");{const e=n.filters.map(t=>JE(t)).join(",");return`${n.op}(${e})`}}function Fz(n,e){return n instanceof Fi?function(i,r){return r instanceof Fi&&i.op===r.op&&i.field.isEqual(r.field)&&oa(i.value,r.value)}(n,e):n instanceof No?function(i,r){return r instanceof No&&i.op===r.op&&i.filters.length===r.filters.length?i.filters.reduce((s,o,a)=>s&&Fz(o,r.filters[a]),!0):!1}(n,e):void Wt()}function jz(n){return n instanceof Fi?function(t){return`${t.field.canonicalString()} ${t.op} ${yf(t.value)}`}(n):n instanceof No?function(t){return t.op.toString()+" {"+t.getFilters().map(jz).join(" ,")+"}"}(n):"Filter"}class yce extends Fi{constructor(e,t,i){super(e,t,i),this.key=kt.fromName(i.referenceValue)}matches(e){const t=kt.comparator(e.key,this.key);return this.matchesComparison(t)}}class vce extends Fi{constructor(e,t){super(e,"in",t),this.keys=Vz("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class xce extends Fi{constructor(e,t){super(e,"not-in",t),this.keys=Vz("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function Vz(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(i=>kt.fromName(i.referenceValue))}class _ce extends Fi{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return nI(t)&&Sg(t.arrayValue,this.value)}}class wce extends Fi{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Sg(this.value.arrayValue,t)}}class bce extends Fi{constructor(e,t){super(e,"not-in",t)}matches(e){if(Sg(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&!Sg(this.value.arrayValue,t)}}class Sce extends Fi{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!nI(t)||!t.arrayValue.values)&&t.arrayValue.values.some(i=>Sg(this.value.arrayValue,i))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tce{constructor(e,t=null,i=[],r=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=i,this.filters=r,this.limit=s,this.startAt=o,this.endAt=a,this.ue=null}}function f3(n,e=null,t=[],i=[],r=null,s=null,o=null){return new Tce(n,e,t,i,r,s,o)}function iI(n){const e=Jt(n);if(e.ue===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(i=>JE(i)).join(","),t+="|ob:",t+=e.orderBy.map(i=>function(s){return s.field.canonicalString()+s.dir}(i)).join(","),Yw(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(i=>yf(i)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(i=>yf(i)).join(",")),e.ue=t}return e.ue}function rI(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!mce(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!Fz(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!d3(n.startAt,e.startAt)&&d3(n.endAt,e.endAt)}function QE(n){return kt.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uf{constructor(e,t=null,i=[],r=[],s=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=i,this.filters=r,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=l,this.ce=null,this.le=null,this.he=null,this.startAt,this.endAt}}function Ece(n,e,t,i,r,s,o,a){return new Uf(n,e,t,i,r,s,o,a)}function Jw(n){return new Uf(n)}function p3(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function Bz(n){return n.collectionGroup!==null}function Em(n){const e=Jt(n);if(e.ce===null){e.ce=[];const t=new Set;for(const s of e.explicitOrderBy)e.ce.push(s),t.add(s.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new qi(lr.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(c=>{c.isInequality()&&(a=a.add(c.field))})}),a})(e).forEach(s=>{t.has(s.canonicalString())||s.isKeyField()||e.ce.push(new Tg(s,i))}),t.has(lr.keyField().canonicalString())||e.ce.push(new Tg(lr.keyField(),i))}return e.ce}function ra(n){const e=Jt(n);return e.le||(e.le=Cce(e,Em(n))),e.le}function Cce(n,e){if(n.limitType==="F")return f3(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(r=>{const s=r.dir==="desc"?"asc":"desc";return new Tg(r.field,s)});const t=n.endAt?new R_(n.endAt.position,n.endAt.inclusive):null,i=n.startAt?new R_(n.startAt.position,n.startAt.inclusive):null;return f3(n.path,n.collectionGroup,e,n.filters,n.limit,t,i)}}function ZE(n,e){const t=n.filters.concat([e]);return new Uf(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function N_(n,e,t){return new Uf(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Qw(n,e){return rI(ra(n),ra(e))&&n.limitType===e.limitType}function zz(n){return`${iI(ra(n))}|lt:${n.limitType}`}function ld(n){return`Query(target=${function(t){let i=t.path.canonicalString();return t.collectionGroup!==null&&(i+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(i+=`, filters: [${t.filters.map(r=>jz(r)).join(", ")}]`),Yw(t.limit)||(i+=", limit: "+t.limit),t.orderBy.length>0&&(i+=`, orderBy: [${t.orderBy.map(r=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(r)).join(", ")}]`),t.startAt&&(i+=", startAt: ",i+=t.startAt.inclusive?"b:":"a:",i+=t.startAt.position.map(r=>yf(r)).join(",")),t.endAt&&(i+=", endAt: ",i+=t.endAt.inclusive?"a:":"b:",i+=t.endAt.position.map(r=>yf(r)).join(",")),`Target(${i})`}(ra(n))}; limitType=${n.limitType})`}function Zw(n,e){return e.isFoundDocument()&&function(i,r){const s=r.key.path;return i.collectionGroup!==null?r.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(s):kt.isDocumentKey(i.path)?i.path.isEqual(s):i.path.isImmediateParentOf(s)}(n,e)&&function(i,r){for(const s of Em(i))if(!s.field.isKeyField()&&r.data.field(s.field)===null)return!1;return!0}(n,e)&&function(i,r){for(const s of i.filters)if(!s.matches(r))return!1;return!0}(n,e)&&function(i,r){return!(i.startAt&&!function(o,a,l){const c=h3(o,a,l);return o.inclusive?c<=0:c<0}(i.startAt,Em(i),r)||i.endAt&&!function(o,a,l){const c=h3(o,a,l);return o.inclusive?c>=0:c>0}(i.endAt,Em(i),r))}(n,e)}function Ace(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function Hz(n){return(e,t)=>{let i=!1;for(const r of Em(n)){const s=Mce(r,e,t);if(s!==0)return s;i=i||r.field.isKeyField()}return 0}}function Mce(n,e,t){const i=n.field.isKeyField()?kt.comparator(e.key,t.key):function(s,o,a){const l=o.data.field(s),c=a.data.field(s);return l!==null&&c!==null?gf(l,c):Wt()}(n.field,e,t);switch(n.dir){case"asc":return i;case"desc":return-1*i;default:return Wt()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mh{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i!==void 0){for(const[r,s]of i)if(this.equalsFn(r,e))return s}}has(e){return this.get(e)!==void 0}set(e,t){const i=this.mapKeyFn(e),r=this.inner[i];if(r===void 0)return this.inner[i]=[[e,t]],void this.innerSize++;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return void(r[s]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i===void 0)return!1;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],e))return i.length===1?delete this.inner[t]:i.splice(r,1),this.innerSize--,!0;return!1}forEach(e){Rc(this.inner,(t,i)=>{for(const[r,s]of i)e(r,s)})}isEmpty(){return Nz(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ice=new fi(kt.comparator);function tl(){return Ice}const Gz=new fi(kt.comparator);function Jp(...n){let e=Gz;for(const t of n)e=e.insert(t.key,t);return e}function Wz(n){let e=Gz;return n.forEach((t,i)=>e=e.insert(t,i.overlayedDocument)),e}function Pu(){return Cm()}function qz(){return Cm()}function Cm(){return new mh(n=>n.toString(),(n,e)=>n.isEqual(e))}const Pce=new fi(kt.comparator),Rce=new qi(kt.comparator);function yn(...n){let e=Rce;for(const t of n)e=e.add(t);return e}const Nce=new qi(wn);function Lce(){return Nce}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sI(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:P_(e)?"-0":e}}function $z(n){return{integerValue:""+n}}function Dce(n,e){return lce(e)?$z(e):sI(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eb{constructor(){this._=void 0}}function kce(n,e,t){return n instanceof Eg?function(r,s){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return s&&tI(s)&&(s=Kw(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(t,e):n instanceof Cg?Yz(n,e):n instanceof Ag?Kz(n,e):function(r,s){const o=Xz(r,s),a=m3(o)+m3(r.Pe);return KE(o)&&KE(r.Pe)?$z(a):sI(r.serializer,a)}(n,e)}function Oce(n,e,t){return n instanceof Cg?Yz(n,e):n instanceof Ag?Kz(n,e):t}function Xz(n,e){return n instanceof L_?function(i){return KE(i)||function(s){return!!s&&"doubleValue"in s}(i)}(e)?e:{integerValue:0}:null}class Eg extends eb{}class Cg extends eb{constructor(e){super(),this.elements=e}}function Yz(n,e){const t=Jz(e);for(const i of n.elements)t.some(r=>oa(r,i))||t.push(i);return{arrayValue:{values:t}}}class Ag extends eb{constructor(e){super(),this.elements=e}}function Kz(n,e){let t=Jz(e);for(const i of n.elements)t=t.filter(r=>!oa(r,i));return{arrayValue:{values:t}}}class L_ extends eb{constructor(e,t){super(),this.serializer=e,this.Pe=t}}function m3(n){return Ti(n.integerValue||n.doubleValue)}function Jz(n){return nI(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uce{constructor(e,t){this.field=e,this.transform=t}}function Fce(n,e){return n.field.isEqual(e.field)&&function(i,r){return i instanceof Cg&&r instanceof Cg||i instanceof Ag&&r instanceof Ag?mf(i.elements,r.elements,oa):i instanceof L_&&r instanceof L_?oa(i.Pe,r.Pe):i instanceof Eg&&r instanceof Eg}(n.transform,e.transform)}class jce{constructor(e,t){this.version=e,this.transformResults=t}}class Co{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new Co}static exists(e){return new Co(void 0,e)}static updateTime(e){return new Co(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function $0(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class tb{}function Qz(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new e5(n.key,Co.none()):new oy(n.key,n.data,Co.none());{const t=n.data,i=us.empty();let r=new qi(lr.comparator);for(let s of e.fields)if(!r.has(s)){let o=t.field(s);o===null&&s.length>1&&(s=s.popLast(),o=t.field(s)),o===null?i.delete(s):i.set(s,o),r=r.add(s)}return new Nc(n.key,i,new Ns(r.toArray()),Co.none())}}function Vce(n,e,t){n instanceof oy?function(r,s,o){const a=r.value.clone(),l=y3(r.fieldTransforms,s,o.transformResults);a.setAll(l),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(n,e,t):n instanceof Nc?function(r,s,o){if(!$0(r.precondition,s))return void s.convertToUnknownDocument(o.version);const a=y3(r.fieldTransforms,s,o.transformResults),l=s.data;l.setAll(Zz(r)),l.setAll(a),s.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(n,e,t):function(r,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,t)}function Am(n,e,t,i){return n instanceof oy?function(s,o,a,l){if(!$0(s.precondition,o))return a;const c=s.value.clone(),u=v3(s.fieldTransforms,l,o);return c.setAll(u),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),null}(n,e,t,i):n instanceof Nc?function(s,o,a,l){if(!$0(s.precondition,o))return a;const c=v3(s.fieldTransforms,l,o),u=o.data;return u.setAll(Zz(s)),u.setAll(c),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(f=>f.field))}(n,e,t,i):function(s,o,a){return $0(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(n,e,t)}function Bce(n,e){let t=null;for(const i of n.fieldTransforms){const r=e.data.field(i.field),s=Xz(i.transform,r||null);s!=null&&(t===null&&(t=us.empty()),t.set(i.field,s))}return t||null}function g3(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(i,r){return i===void 0&&r===void 0||!(!i||!r)&&mf(i,r,(s,o)=>Fce(s,o))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class oy extends tb{constructor(e,t,i,r=[]){super(),this.key=e,this.value=t,this.precondition=i,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class Nc extends tb{constructor(e,t,i,r,s=[]){super(),this.key=e,this.data=t,this.fieldMask=i,this.precondition=r,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function Zz(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const i=n.data.field(t);e.set(t,i)}}),e}function y3(n,e,t){const i=new Map;jn(n.length===t.length);for(let r=0;r<t.length;r++){const s=n[r],o=s.transform,a=e.data.field(s.field);i.set(s.field,Oce(o,a,t[r]))}return i}function v3(n,e,t){const i=new Map;for(const r of n){const s=r.transform,o=t.data.field(r.field);i.set(r.field,kce(s,o,e))}return i}class e5 extends tb{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class zce extends tb{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hce{constructor(e,t,i,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=i,this.mutations=r}applyToRemoteDocument(e,t){const i=t.mutationResults;for(let r=0;r<this.mutations.length;r++){const s=this.mutations[r];s.key.isEqual(e.key)&&Vce(s,e,i[r])}}applyToLocalView(e,t){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(t=Am(i,e,t,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(t=Am(i,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const i=qz();return this.mutations.forEach(r=>{const s=e.get(r.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=t.has(r.key)?null:a;const l=Qz(o,a);l!==null&&i.set(r.key,l),o.isValidDocument()||o.convertToNoDocument(Kt.min())}),i}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),yn())}isEqual(e){return this.batchId===e.batchId&&mf(this.mutations,e.mutations,(t,i)=>g3(t,i))&&mf(this.baseMutations,e.baseMutations,(t,i)=>g3(t,i))}}class oI{constructor(e,t,i,r){this.batch=e,this.commitVersion=t,this.mutationResults=i,this.docVersions=r}static from(e,t,i){jn(e.mutations.length===i.length);let r=function(){return Pce}();const s=e.mutations;for(let o=0;o<s.length;o++)r=r.insert(s[o].key,i[o].version);return new oI(e,t,i,r)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gce{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wce{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Di,Tn;function qce(n){switch(n){default:return Wt();case Ne.CANCELLED:case Ne.UNKNOWN:case Ne.DEADLINE_EXCEEDED:case Ne.RESOURCE_EXHAUSTED:case Ne.INTERNAL:case Ne.UNAVAILABLE:case Ne.UNAUTHENTICATED:return!1;case Ne.INVALID_ARGUMENT:case Ne.NOT_FOUND:case Ne.ALREADY_EXISTS:case Ne.PERMISSION_DENIED:case Ne.FAILED_PRECONDITION:case Ne.ABORTED:case Ne.OUT_OF_RANGE:case Ne.UNIMPLEMENTED:case Ne.DATA_LOSS:return!0}}function t5(n){if(n===void 0)return el("GRPC error has no .code"),Ne.UNKNOWN;switch(n){case Di.OK:return Ne.OK;case Di.CANCELLED:return Ne.CANCELLED;case Di.UNKNOWN:return Ne.UNKNOWN;case Di.DEADLINE_EXCEEDED:return Ne.DEADLINE_EXCEEDED;case Di.RESOURCE_EXHAUSTED:return Ne.RESOURCE_EXHAUSTED;case Di.INTERNAL:return Ne.INTERNAL;case Di.UNAVAILABLE:return Ne.UNAVAILABLE;case Di.UNAUTHENTICATED:return Ne.UNAUTHENTICATED;case Di.INVALID_ARGUMENT:return Ne.INVALID_ARGUMENT;case Di.NOT_FOUND:return Ne.NOT_FOUND;case Di.ALREADY_EXISTS:return Ne.ALREADY_EXISTS;case Di.PERMISSION_DENIED:return Ne.PERMISSION_DENIED;case Di.FAILED_PRECONDITION:return Ne.FAILED_PRECONDITION;case Di.ABORTED:return Ne.ABORTED;case Di.OUT_OF_RANGE:return Ne.OUT_OF_RANGE;case Di.UNIMPLEMENTED:return Ne.UNIMPLEMENTED;case Di.DATA_LOSS:return Ne.DATA_LOSS;default:return Wt()}}(Tn=Di||(Di={}))[Tn.OK=0]="OK",Tn[Tn.CANCELLED=1]="CANCELLED",Tn[Tn.UNKNOWN=2]="UNKNOWN",Tn[Tn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Tn[Tn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Tn[Tn.NOT_FOUND=5]="NOT_FOUND",Tn[Tn.ALREADY_EXISTS=6]="ALREADY_EXISTS",Tn[Tn.PERMISSION_DENIED=7]="PERMISSION_DENIED",Tn[Tn.UNAUTHENTICATED=16]="UNAUTHENTICATED",Tn[Tn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Tn[Tn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Tn[Tn.ABORTED=10]="ABORTED",Tn[Tn.OUT_OF_RANGE=11]="OUT_OF_RANGE",Tn[Tn.UNIMPLEMENTED=12]="UNIMPLEMENTED",Tn[Tn.INTERNAL=13]="INTERNAL",Tn[Tn.UNAVAILABLE=14]="UNAVAILABLE",Tn[Tn.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function $ce(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xce=new Vu([4294967295,4294967295],0);function x3(n){const e=$ce().encode(n),t=new Tz;return t.update(e),new Uint8Array(t.digest())}function _3(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),i=e.getUint32(4,!0),r=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Vu([t,i],0),new Vu([r,s],0)]}class aI{constructor(e,t,i){if(this.bitmap=e,this.padding=t,this.hashCount=i,t<0||t>=8)throw new Qp(`Invalid padding: ${t}`);if(i<0)throw new Qp(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new Qp(`Invalid hash count: ${i}`);if(e.length===0&&t!==0)throw new Qp(`Invalid padding when bitmap length is 0: ${t}`);this.Te=8*e.length-t,this.Ie=Vu.fromNumber(this.Te)}Ee(e,t,i){let r=e.add(t.multiply(Vu.fromNumber(i)));return r.compare(Xce)===1&&(r=new Vu([r.getBits(0),r.getBits(1)],0)),r.modulo(this.Ie).toNumber()}de(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Te===0)return!1;const t=x3(e),[i,r]=_3(t);for(let s=0;s<this.hashCount;s++){const o=this.Ee(i,r,s);if(!this.de(o))return!1}return!0}static create(e,t,i){const r=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new aI(s,r,t);return i.forEach(a=>o.insert(a)),o}insert(e){if(this.Te===0)return;const t=x3(e),[i,r]=_3(t);for(let s=0;s<this.hashCount;s++){const o=this.Ee(i,r,s);this.Ae(o)}}Ae(e){const t=Math.floor(e/8),i=e%8;this.bitmap[t]|=1<<i}}class Qp extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nb{constructor(e,t,i,r,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=i,this.documentUpdates=r,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t,i){const r=new Map;return r.set(e,ay.createSynthesizedTargetChangeForCurrentChange(e,t,i)),new nb(Kt.min(),r,new fi(wn),tl(),yn())}}class ay{constructor(e,t,i,r,s){this.resumeToken=e,this.current=t,this.addedDocuments=i,this.modifiedDocuments=r,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t,i){return new ay(i,t,yn(),yn(),yn())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X0{constructor(e,t,i,r){this.Re=e,this.removedTargetIds=t,this.key=i,this.Ve=r}}class n5{constructor(e,t){this.targetId=e,this.me=t}}class i5{constructor(e,t,i=dr.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=t,this.resumeToken=i,this.cause=r}}class w3{constructor(){this.fe=0,this.ge=b3(),this.pe=dr.EMPTY_BYTE_STRING,this.ye=!1,this.we=!0}get current(){return this.ye}get resumeToken(){return this.pe}get Se(){return this.fe!==0}get be(){return this.we}De(e){e.approximateByteSize()>0&&(this.we=!0,this.pe=e)}ve(){let e=yn(),t=yn(),i=yn();return this.ge.forEach((r,s)=>{switch(s){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:i=i.add(r);break;default:Wt()}}),new ay(this.pe,this.ye,e,t,i)}Ce(){this.we=!1,this.ge=b3()}Fe(e,t){this.we=!0,this.ge=this.ge.insert(e,t)}Me(e){this.we=!0,this.ge=this.ge.remove(e)}xe(){this.fe+=1}Oe(){this.fe-=1,jn(this.fe>=0)}Ne(){this.we=!0,this.ye=!0}}class Yce{constructor(e){this.Le=e,this.Be=new Map,this.ke=tl(),this.qe=p0(),this.Qe=p0(),this.Ke=new fi(wn)}$e(e){for(const t of e.Re)e.Ve&&e.Ve.isFoundDocument()?this.Ue(t,e.Ve):this.We(t,e.key,e.Ve);for(const t of e.removedTargetIds)this.We(t,e.key,e.Ve)}Ge(e){this.forEachTarget(e,t=>{const i=this.ze(t);switch(e.state){case 0:this.je(t)&&i.De(e.resumeToken);break;case 1:i.Oe(),i.Se||i.Ce(),i.De(e.resumeToken);break;case 2:i.Oe(),i.Se||this.removeTarget(t);break;case 3:this.je(t)&&(i.Ne(),i.De(e.resumeToken));break;case 4:this.je(t)&&(this.He(t),i.De(e.resumeToken));break;default:Wt()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.Be.forEach((i,r)=>{this.je(r)&&t(r)})}Je(e){const t=e.targetId,i=e.me.count,r=this.Ye(t);if(r){const s=r.target;if(QE(s))if(i===0){const o=new kt(s.path);this.We(t,o,Ir.newNoDocument(o,Kt.min()))}else jn(i===1);else{const o=this.Ze(t);if(o!==i){const a=this.Xe(e),l=a?this.et(a,e,o):1;if(l!==0){this.He(t);const c=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ke=this.Ke.insert(t,c)}}}}}Xe(e){const t=e.me.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:i="",padding:r=0},hashCount:s=0}=t;let o,a;try{o=mc(i).toUint8Array()}catch(l){if(l instanceof Lz)return pf("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new aI(o,r,s)}catch(l){return pf(l instanceof Qp?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.Te===0?null:a}et(e,t,i){return t.me.count===i-this.rt(e,t.targetId)?0:2}rt(e,t){const i=this.Le.getRemoteKeysForTarget(t);let r=0;return i.forEach(s=>{const o=this.Le.nt(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.We(t,s,null),r++)}),r}it(e){const t=new Map;this.Be.forEach((s,o)=>{const a=this.Ye(o);if(a){if(s.current&&QE(a.target)){const l=new kt(a.target.path);this.st(l).has(o)||this.ot(o,l)||this.We(o,l,Ir.newNoDocument(l,e))}s.be&&(t.set(o,s.ve()),s.Ce())}});let i=yn();this.Qe.forEach((s,o)=>{let a=!0;o.forEachWhile(l=>{const c=this.Ye(l);return!c||c.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(i=i.add(s))}),this.ke.forEach((s,o)=>o.setReadTime(e));const r=new nb(e,t,this.Ke,this.ke,i);return this.ke=tl(),this.qe=p0(),this.Qe=p0(),this.Ke=new fi(wn),r}Ue(e,t){if(!this.je(e))return;const i=this.ot(e,t.key)?2:0;this.ze(e).Fe(t.key,i),this.ke=this.ke.insert(t.key,t),this.qe=this.qe.insert(t.key,this.st(t.key).add(e)),this.Qe=this.Qe.insert(t.key,this._t(t.key).add(e))}We(e,t,i){if(!this.je(e))return;const r=this.ze(e);this.ot(e,t)?r.Fe(t,1):r.Me(t),this.Qe=this.Qe.insert(t,this._t(t).delete(e)),this.Qe=this.Qe.insert(t,this._t(t).add(e)),i&&(this.ke=this.ke.insert(t,i))}removeTarget(e){this.Be.delete(e)}Ze(e){const t=this.ze(e).ve();return this.Le.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}xe(e){this.ze(e).xe()}ze(e){let t=this.Be.get(e);return t||(t=new w3,this.Be.set(e,t)),t}_t(e){let t=this.Qe.get(e);return t||(t=new qi(wn),this.Qe=this.Qe.insert(e,t)),t}st(e){let t=this.qe.get(e);return t||(t=new qi(wn),this.qe=this.qe.insert(e,t)),t}je(e){const t=this.Ye(e)!==null;return t||gt("WatchChangeAggregator","Detected inactive target",e),t}Ye(e){const t=this.Be.get(e);return t&&t.Se?null:this.Le.ut(e)}He(e){this.Be.set(e,new w3),this.Le.getRemoteKeysForTarget(e).forEach(t=>{this.We(e,t,null)})}ot(e,t){return this.Le.getRemoteKeysForTarget(e).has(t)}}function p0(){return new fi(kt.comparator)}function b3(){return new fi(kt.comparator)}const Kce={asc:"ASCENDING",desc:"DESCENDING"},Jce={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Qce={and:"AND",or:"OR"};class Zce{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function eC(n,e){return n.useProto3Json||Yw(e)?e:{value:e}}function D_(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function r5(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function eue(n,e){return D_(n,e.toTimestamp())}function sa(n){return jn(!!n),Kt.fromTimestamp(function(t){const i=pc(t);return new Vi(i.seconds,i.nanos)}(n))}function lI(n,e){return tC(n,e).canonicalString()}function tC(n,e){const t=function(r){return new Zn(["projects",r.projectId,"databases",r.database])}(n).child("documents");return e===void 0?t:t.child(e)}function s5(n){const e=Zn.fromString(n);return jn(u5(e)),e}function nC(n,e){return lI(n.databaseId,e.path)}function r1(n,e){const t=s5(e);if(t.get(1)!==n.databaseId.projectId)throw new yt(Ne.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new yt(Ne.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new kt(a5(t))}function o5(n,e){return lI(n.databaseId,e)}function tue(n){const e=s5(n);return e.length===4?Zn.emptyPath():a5(e)}function iC(n){return new Zn(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function a5(n){return jn(n.length>4&&n.get(4)==="documents"),n.popFirst(5)}function S3(n,e,t){return{name:nC(n,e),fields:t.value.mapValue.fields}}function nue(n,e){let t;if("targetChange"in e){e.targetChange;const i=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:Wt()}(e.targetChange.targetChangeType||"NO_CHANGE"),r=e.targetChange.targetIds||[],s=function(c,u){return c.useProto3Json?(jn(u===void 0||typeof u=="string"),dr.fromBase64String(u||"")):(jn(u===void 0||u instanceof Buffer||u instanceof Uint8Array),dr.fromUint8Array(u||new Uint8Array))}(n,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(c){const u=c.code===void 0?Ne.UNKNOWN:t5(c.code);return new yt(u,c.message||"")}(o);t=new i5(i,r,s,a||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const r=r1(n,i.document.name),s=sa(i.document.updateTime),o=i.document.createTime?sa(i.document.createTime):Kt.min(),a=new us({mapValue:{fields:i.document.fields}}),l=Ir.newFoundDocument(r,s,o,a),c=i.targetIds||[],u=i.removedTargetIds||[];t=new X0(c,u,l.key,l)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const r=r1(n,i.document),s=i.readTime?sa(i.readTime):Kt.min(),o=Ir.newNoDocument(r,s),a=i.removedTargetIds||[];t=new X0([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const r=r1(n,i.document),s=i.removedTargetIds||[];t=new X0([],s,r,null)}else{if(!("filter"in e))return Wt();{e.filter;const i=e.filter;i.targetId;const{count:r=0,unchangedNames:s}=i,o=new Wce(r,s),a=i.targetId;t=new n5(a,o)}}return t}function iue(n,e){let t;if(e instanceof oy)t={update:S3(n,e.key,e.value)};else if(e instanceof e5)t={delete:nC(n,e.key)};else if(e instanceof Nc)t={update:S3(n,e.key,e.data),updateMask:due(e.fieldMask)};else{if(!(e instanceof zce))return Wt();t={verify:nC(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(i=>function(s,o){const a=o.transform;if(a instanceof Eg)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof Cg)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Ag)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof L_)return{fieldPath:o.field.canonicalString(),increment:a.Pe};throw Wt()}(0,i))),e.precondition.isNone||(t.currentDocument=function(r,s){return s.updateTime!==void 0?{updateTime:eue(r,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:Wt()}(n,e.precondition)),t}function rue(n,e){return n&&n.length>0?(jn(e!==void 0),n.map(t=>function(r,s){let o=r.updateTime?sa(r.updateTime):sa(s);return o.isEqual(Kt.min())&&(o=sa(s)),new jce(o,r.transformResults||[])}(t,e))):[]}function sue(n,e){return{documents:[o5(n,e.path)]}}function oue(n,e){const t={structuredQuery:{}},i=e.path;let r;e.collectionGroup!==null?(r=i,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(r=i.popLast(),t.structuredQuery.from=[{collectionId:i.lastSegment()}]),t.parent=o5(n,r);const s=function(c){if(c.length!==0)return c5(No.create(c,"and"))}(e.filters);s&&(t.structuredQuery.where=s);const o=function(c){if(c.length!==0)return c.map(u=>function(m){return{field:cd(m.field),direction:cue(m.dir)}}(u))}(e.orderBy);o&&(t.structuredQuery.orderBy=o);const a=eC(n,e.limit);return a!==null&&(t.structuredQuery.limit=a),e.startAt&&(t.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{ct:t,parent:r}}function aue(n){let e=tue(n.parent);const t=n.structuredQuery,i=t.from?t.from.length:0;let r=null;if(i>0){jn(i===1);const u=t.from[0];u.allDescendants?r=u.collectionId:e=e.child(u.collectionId)}let s=[];t.where&&(s=function(f){const m=l5(f);return m instanceof No&&Uz(m)?m.getFilters():[m]}(t.where));let o=[];t.orderBy&&(o=function(f){return f.map(m=>function(x){return new Tg(ud(x.field),function(w){switch(w){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(x.direction))}(m))}(t.orderBy));let a=null;t.limit&&(a=function(f){let m;return m=typeof f=="object"?f.value:f,Yw(m)?null:m}(t.limit));let l=null;t.startAt&&(l=function(f){const m=!!f.before,g=f.values||[];return new R_(g,m)}(t.startAt));let c=null;return t.endAt&&(c=function(f){const m=!f.before,g=f.values||[];return new R_(g,m)}(t.endAt)),Ece(e,r,o,s,a,"F",l,c)}function lue(n,e){const t=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Wt()}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function l5(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":const i=ud(t.unaryFilter.field);return Fi.create(i,"==",{doubleValue:NaN});case"IS_NULL":const r=ud(t.unaryFilter.field);return Fi.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=ud(t.unaryFilter.field);return Fi.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=ud(t.unaryFilter.field);return Fi.create(o,"!=",{nullValue:"NULL_VALUE"});default:return Wt()}}(n):n.fieldFilter!==void 0?function(t){return Fi.create(ud(t.fieldFilter.field),function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Wt()}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return No.create(t.compositeFilter.filters.map(i=>l5(i)),function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return Wt()}}(t.compositeFilter.op))}(n):Wt()}function cue(n){return Kce[n]}function uue(n){return Jce[n]}function hue(n){return Qce[n]}function cd(n){return{fieldPath:n.canonicalString()}}function ud(n){return lr.fromServerFormat(n.fieldPath)}function c5(n){return n instanceof Fi?function(t){if(t.op==="=="){if(u3(t.value))return{unaryFilter:{field:cd(t.field),op:"IS_NAN"}};if(c3(t.value))return{unaryFilter:{field:cd(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(u3(t.value))return{unaryFilter:{field:cd(t.field),op:"IS_NOT_NAN"}};if(c3(t.value))return{unaryFilter:{field:cd(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:cd(t.field),op:uue(t.op),value:t.value}}}(n):n instanceof No?function(t){const i=t.getFilters().map(r=>c5(r));return i.length===1?i[0]:{compositeFilter:{op:hue(t.op),filters:i}}}(n):Wt()}function due(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function u5(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hl{constructor(e,t,i,r,s=Kt.min(),o=Kt.min(),a=dr.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=t,this.purpose=i,this.sequenceNumber=r,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new Hl(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Hl(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Hl(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Hl(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fue{constructor(e){this.ht=e}}function pue(n){const e=aue({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?N_(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mue{constructor(){this.ln=new gue}addToCollectionParentIndex(e,t){return this.ln.add(t),Le.resolve()}getCollectionParents(e,t){return Le.resolve(this.ln.getEntries(t))}addFieldIndex(e,t){return Le.resolve()}deleteFieldIndex(e,t){return Le.resolve()}deleteAllFieldIndexes(e){return Le.resolve()}createTargetIndexes(e,t){return Le.resolve()}getDocumentsMatchingTarget(e,t){return Le.resolve(null)}getIndexType(e,t){return Le.resolve(0)}getFieldIndexes(e,t){return Le.resolve([])}getNextCollectionGroupToUpdate(e){return Le.resolve(null)}getMinOffset(e,t){return Le.resolve(fc.min())}getMinOffsetFromCollectionGroup(e,t){return Le.resolve(fc.min())}updateCollectionGroup(e,t,i){return Le.resolve()}updateIndexEntries(e,t){return Le.resolve()}}class gue{constructor(){this.index={}}add(e){const t=e.lastSegment(),i=e.popLast(),r=this.index[t]||new qi(Zn.comparator),s=!r.has(i);return this.index[t]=r.add(i),s}has(e){const t=e.lastSegment(),i=e.popLast(),r=this.index[t];return r&&r.has(i)}getEntries(e){return(this.index[e]||new qi(Zn.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T3={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0};class ss{static withCacheSize(e){return new ss(e,ss.DEFAULT_COLLECTION_PERCENTILE,ss.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ss.DEFAULT_COLLECTION_PERCENTILE=10,ss.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ss.DEFAULT=new ss(41943040,ss.DEFAULT_COLLECTION_PERCENTILE,ss.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ss.DISABLED=new ss(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vf{constructor(e){this.kn=e}next(){return this.kn+=2,this.kn}static qn(){return new vf(0)}static Qn(){return new vf(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function E3([n,e],[t,i]){const r=wn(n,t);return r===0?wn(e,i):r}class yue{constructor(e){this.Gn=e,this.buffer=new qi(E3),this.zn=0}jn(){return++this.zn}Hn(e){const t=[e,this.jn()];if(this.buffer.size<this.Gn)this.buffer=this.buffer.add(t);else{const i=this.buffer.last();E3(t,i)<0&&(this.buffer=this.buffer.delete(i).add(t))}}get maxValue(){return this.buffer.last()[0]}}class vue{constructor(e,t,i){this.garbageCollector=e,this.asyncQueue=t,this.localStore=i,this.Jn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Yn(6e4)}stop(){this.Jn&&(this.Jn.cancel(),this.Jn=null)}get started(){return this.Jn!==null}Yn(e){gt("LruGarbageCollector",`Garbage collection scheduled in ${e}ms`),this.Jn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Jn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){Of(t)?gt("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",t):await kf(t)}await this.Yn(3e5)})}}class xue{constructor(e,t){this.Zn=e,this.params=t}calculateTargetCount(e,t){return this.Zn.Xn(e).next(i=>Math.floor(t/100*i))}nthSequenceNumber(e,t){if(t===0)return Le.resolve(Xw.oe);const i=new yue(t);return this.Zn.forEachTarget(e,r=>i.Hn(r.sequenceNumber)).next(()=>this.Zn.er(e,r=>i.Hn(r))).next(()=>i.maxValue)}removeTargets(e,t,i){return this.Zn.removeTargets(e,t,i)}removeOrphanedDocuments(e,t){return this.Zn.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(gt("LruGarbageCollector","Garbage collection skipped; disabled"),Le.resolve(T3)):this.getCacheSize(e).next(i=>i<this.params.cacheSizeCollectionThreshold?(gt("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),T3):this.tr(e,t))}getCacheSize(e){return this.Zn.getCacheSize(e)}tr(e,t){let i,r,s,o,a,l,c;const u=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(f=>(f>this.params.maximumSequenceNumbersToCollect?(gt("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${f}`),r=this.params.maximumSequenceNumbersToCollect):r=f,o=Date.now(),this.nthSequenceNumber(e,r))).next(f=>(i=f,a=Date.now(),this.removeTargets(e,i,t))).next(f=>(s=f,l=Date.now(),this.removeOrphanedDocuments(e,i))).next(f=>(c=Date.now(),ad()<=mn.DEBUG&&gt("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-u}ms
	Determined least recently used ${r} in `+(a-o)+`ms
	Removed ${s} targets in `+(l-a)+`ms
	Removed ${f} documents in `+(c-l)+`ms
Total Duration: ${c-u}ms`),Le.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:s,documentsRemoved:f})))}}function _ue(n,e){return new xue(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wue{constructor(){this.changes=new mh(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,Ir.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const i=this.changes.get(t);return i!==void 0?Le.resolve(i):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bue{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sue{constructor(e,t,i,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=i,this.indexManager=r}getDocument(e,t){let i=null;return this.documentOverlayCache.getOverlay(e,t).next(r=>(i=r,this.remoteDocumentCache.getEntry(e,t))).next(r=>(i!==null&&Am(i.mutation,r,Ns.empty(),Vi.now()),r))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(i=>this.getLocalViewOfDocuments(e,i,yn()).next(()=>i))}getLocalViewOfDocuments(e,t,i=yn()){const r=Pu();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,i).next(s=>{let o=Jp();return s.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,t){const i=Pu();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,yn()))}populateOverlays(e,t,i){const r=[];return i.forEach(s=>{t.has(s)||r.push(s)}),this.documentOverlayCache.getOverlays(e,r).next(s=>{s.forEach((o,a)=>{t.set(o,a)})})}computeViews(e,t,i,r){let s=tl();const o=Cm(),a=function(){return Cm()}();return t.forEach((l,c)=>{const u=i.get(c.key);r.has(c.key)&&(u===void 0||u.mutation instanceof Nc)?s=s.insert(c.key,c):u!==void 0?(o.set(c.key,u.mutation.getFieldMask()),Am(u.mutation,c,u.mutation.getFieldMask(),Vi.now())):o.set(c.key,Ns.empty())}),this.recalculateAndSaveOverlays(e,s).next(l=>(l.forEach((c,u)=>o.set(c,u)),t.forEach((c,u)=>{var f;return a.set(c,new bue(u,(f=o.get(c))!==null&&f!==void 0?f:null))}),a))}recalculateAndSaveOverlays(e,t){const i=Cm();let r=new fi((o,a)=>o-a),s=yn();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(o=>{for(const a of o)a.keys().forEach(l=>{const c=t.get(l);if(c===null)return;let u=i.get(l)||Ns.empty();u=a.applyToLocalView(c,u),i.set(l,u);const f=(r.get(a.batchId)||yn()).add(l);r=r.insert(a.batchId,f)})}).next(()=>{const o=[],a=r.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),c=l.key,u=l.value,f=qz();u.forEach(m=>{if(!s.has(m)){const g=Qz(t.get(m),i.get(m));g!==null&&f.set(m,g),s=s.add(m)}}),o.push(this.documentOverlayCache.saveOverlays(e,c,f))}return Le.waitFor(o)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(i=>this.recalculateAndSaveOverlays(e,i))}getDocumentsMatchingQuery(e,t,i,r){return function(o){return kt.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):Bz(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,i,r):this.getDocumentsMatchingCollectionQuery(e,t,i,r)}getNextDocuments(e,t,i,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,i,r).next(s=>{const o=r-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,i.largestBatchId,r-s.size):Le.resolve(Pu());let a=-1,l=s;return o.next(c=>Le.forEach(c,(u,f)=>(a<f.largestBatchId&&(a=f.largestBatchId),s.get(u)?Le.resolve():this.remoteDocumentCache.getEntry(e,u).next(m=>{l=l.insert(u,m)}))).next(()=>this.populateOverlays(e,c,s)).next(()=>this.computeViews(e,l,c,yn())).next(u=>({batchId:a,changes:Wz(u)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new kt(t)).next(i=>{let r=Jp();return i.isFoundDocument()&&(r=r.insert(i.key,i)),r})}getDocumentsMatchingCollectionGroupQuery(e,t,i,r){const s=t.collectionGroup;let o=Jp();return this.indexManager.getCollectionParents(e,s).next(a=>Le.forEach(a,l=>{const c=function(f,m){return new Uf(m,null,f.explicitOrderBy.slice(),f.filters.slice(),f.limit,f.limitType,f.startAt,f.endAt)}(t,l.child(s));return this.getDocumentsMatchingCollectionQuery(e,c,i,r).next(u=>{u.forEach((f,m)=>{o=o.insert(f,m)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,t,i,r){let s;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,i.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,i,s,r))).next(o=>{s.forEach((l,c)=>{const u=c.getKey();o.get(u)===null&&(o=o.insert(u,Ir.newInvalidDocument(u)))});let a=Jp();return o.forEach((l,c)=>{const u=s.get(l);u!==void 0&&Am(u.mutation,c,Ns.empty(),Vi.now()),Zw(t,c)&&(a=a.insert(l,c))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tue{constructor(e){this.serializer=e,this.Tr=new Map,this.Ir=new Map}getBundleMetadata(e,t){return Le.resolve(this.Tr.get(t))}saveBundleMetadata(e,t){return this.Tr.set(t.id,function(r){return{id:r.id,version:r.version,createTime:sa(r.createTime)}}(t)),Le.resolve()}getNamedQuery(e,t){return Le.resolve(this.Ir.get(t))}saveNamedQuery(e,t){return this.Ir.set(t.name,function(r){return{name:r.name,query:pue(r.bundledQuery),readTime:sa(r.readTime)}}(t)),Le.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Eue{constructor(){this.overlays=new fi(kt.comparator),this.Er=new Map}getOverlay(e,t){return Le.resolve(this.overlays.get(t))}getOverlays(e,t){const i=Pu();return Le.forEach(t,r=>this.getOverlay(e,r).next(s=>{s!==null&&i.set(r,s)})).next(()=>i)}saveOverlays(e,t,i){return i.forEach((r,s)=>{this.Tt(e,t,s)}),Le.resolve()}removeOverlaysForBatchId(e,t,i){const r=this.Er.get(i);return r!==void 0&&(r.forEach(s=>this.overlays=this.overlays.remove(s)),this.Er.delete(i)),Le.resolve()}getOverlaysForCollection(e,t,i){const r=Pu(),s=t.length+1,o=new kt(t.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,c=l.getKey();if(!t.isPrefixOf(c.path))break;c.path.length===s&&l.largestBatchId>i&&r.set(l.getKey(),l)}return Le.resolve(r)}getOverlaysForCollectionGroup(e,t,i,r){let s=new fi((c,u)=>c-u);const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===t&&c.largestBatchId>i){let u=s.get(c.largestBatchId);u===null&&(u=Pu(),s=s.insert(c.largestBatchId,u)),u.set(c.getKey(),c)}}const a=Pu(),l=s.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((c,u)=>a.set(c,u)),!(a.size()>=r)););return Le.resolve(a)}Tt(e,t,i){const r=this.overlays.get(i.key);if(r!==null){const o=this.Er.get(r.largestBatchId).delete(i.key);this.Er.set(r.largestBatchId,o)}this.overlays=this.overlays.insert(i.key,new Gce(t,i));let s=this.Er.get(t);s===void 0&&(s=yn(),this.Er.set(t,s)),this.Er.set(t,s.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cue{constructor(){this.sessionToken=dr.EMPTY_BYTE_STRING}getSessionToken(e){return Le.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,Le.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cI{constructor(){this.dr=new qi(Zi.Ar),this.Rr=new qi(Zi.Vr)}isEmpty(){return this.dr.isEmpty()}addReference(e,t){const i=new Zi(e,t);this.dr=this.dr.add(i),this.Rr=this.Rr.add(i)}mr(e,t){e.forEach(i=>this.addReference(i,t))}removeReference(e,t){this.gr(new Zi(e,t))}pr(e,t){e.forEach(i=>this.removeReference(i,t))}yr(e){const t=new kt(new Zn([])),i=new Zi(t,e),r=new Zi(t,e+1),s=[];return this.Rr.forEachInRange([i,r],o=>{this.gr(o),s.push(o.key)}),s}wr(){this.dr.forEach(e=>this.gr(e))}gr(e){this.dr=this.dr.delete(e),this.Rr=this.Rr.delete(e)}Sr(e){const t=new kt(new Zn([])),i=new Zi(t,e),r=new Zi(t,e+1);let s=yn();return this.Rr.forEachInRange([i,r],o=>{s=s.add(o.key)}),s}containsKey(e){const t=new Zi(e,0),i=this.dr.firstAfterOrEqual(t);return i!==null&&e.isEqual(i.key)}}class Zi{constructor(e,t){this.key=e,this.br=t}static Ar(e,t){return kt.comparator(e.key,t.key)||wn(e.br,t.br)}static Vr(e,t){return wn(e.br,t.br)||kt.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Aue{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Dr=1,this.vr=new qi(Zi.Ar)}checkEmpty(e){return Le.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,i,r){const s=this.Dr;this.Dr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new Hce(s,t,i,r);this.mutationQueue.push(o);for(const a of r)this.vr=this.vr.add(new Zi(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return Le.resolve(o)}lookupMutationBatch(e,t){return Le.resolve(this.Cr(t))}getNextMutationBatchAfterBatchId(e,t){const i=t+1,r=this.Fr(i),s=r<0?0:r;return Le.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return Le.resolve(this.mutationQueue.length===0?-1:this.Dr-1)}getAllMutationBatches(e){return Le.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const i=new Zi(t,0),r=new Zi(t,Number.POSITIVE_INFINITY),s=[];return this.vr.forEachInRange([i,r],o=>{const a=this.Cr(o.br);s.push(a)}),Le.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new qi(wn);return t.forEach(r=>{const s=new Zi(r,0),o=new Zi(r,Number.POSITIVE_INFINITY);this.vr.forEachInRange([s,o],a=>{i=i.add(a.br)})}),Le.resolve(this.Mr(i))}getAllMutationBatchesAffectingQuery(e,t){const i=t.path,r=i.length+1;let s=i;kt.isDocumentKey(s)||(s=s.child(""));const o=new Zi(new kt(s),0);let a=new qi(wn);return this.vr.forEachWhile(l=>{const c=l.key.path;return!!i.isPrefixOf(c)&&(c.length===r&&(a=a.add(l.br)),!0)},o),Le.resolve(this.Mr(a))}Mr(e){const t=[];return e.forEach(i=>{const r=this.Cr(i);r!==null&&t.push(r)}),t}removeMutationBatch(e,t){jn(this.Or(t.batchId,"removed")===0),this.mutationQueue.shift();let i=this.vr;return Le.forEach(t.mutations,r=>{const s=new Zi(r.key,t.batchId);return i=i.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.vr=i})}Ln(e){}containsKey(e,t){const i=new Zi(t,0),r=this.vr.firstAfterOrEqual(i);return Le.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,Le.resolve()}Or(e,t){return this.Fr(e)}Fr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Cr(e){const t=this.Fr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Mue{constructor(e){this.Nr=e,this.docs=function(){return new fi(kt.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const i=t.key,r=this.docs.get(i),s=r?r.size:0,o=this.Nr(t);return this.docs=this.docs.insert(i,{document:t.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const i=this.docs.get(t);return Le.resolve(i?i.document.mutableCopy():Ir.newInvalidDocument(t))}getEntries(e,t){let i=tl();return t.forEach(r=>{const s=this.docs.get(r);i=i.insert(r,s?s.document.mutableCopy():Ir.newInvalidDocument(r))}),Le.resolve(i)}getDocumentsMatchingQuery(e,t,i,r){let s=tl();const o=t.path,a=new kt(o.child("")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:c,value:{document:u}}=l.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||rce(ice(u),i)<=0||(r.has(u.key)||Zw(t,u))&&(s=s.insert(u.key,u.mutableCopy()))}return Le.resolve(s)}getAllFromCollectionGroup(e,t,i,r){Wt()}Lr(e,t){return Le.forEach(this.docs,i=>t(i))}newChangeBuffer(e){return new Iue(this)}getSize(e){return Le.resolve(this.size)}}class Iue extends wue{constructor(e){super(),this.hr=e}applyChanges(e){const t=[];return this.changes.forEach((i,r)=>{r.isValidDocument()?t.push(this.hr.addEntry(e,r)):this.hr.removeEntry(i)}),Le.waitFor(t)}getFromCache(e,t){return this.hr.getEntry(e,t)}getAllFromCache(e,t){return this.hr.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pue{constructor(e){this.persistence=e,this.Br=new mh(t=>iI(t),rI),this.lastRemoteSnapshotVersion=Kt.min(),this.highestTargetId=0,this.kr=0,this.qr=new cI,this.targetCount=0,this.Qr=vf.qn()}forEachTarget(e,t){return this.Br.forEach((i,r)=>t(r)),Le.resolve()}getLastRemoteSnapshotVersion(e){return Le.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Le.resolve(this.kr)}allocateTargetId(e){return this.highestTargetId=this.Qr.next(),Le.resolve(this.highestTargetId)}setTargetsMetadata(e,t,i){return i&&(this.lastRemoteSnapshotVersion=i),t>this.kr&&(this.kr=t),Le.resolve()}Un(e){this.Br.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Qr=new vf(t),this.highestTargetId=t),e.sequenceNumber>this.kr&&(this.kr=e.sequenceNumber)}addTargetData(e,t){return this.Un(t),this.targetCount+=1,Le.resolve()}updateTargetData(e,t){return this.Un(t),Le.resolve()}removeTargetData(e,t){return this.Br.delete(t.target),this.qr.yr(t.targetId),this.targetCount-=1,Le.resolve()}removeTargets(e,t,i){let r=0;const s=[];return this.Br.forEach((o,a)=>{a.sequenceNumber<=t&&i.get(a.targetId)===null&&(this.Br.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),r++)}),Le.waitFor(s).next(()=>r)}getTargetCount(e){return Le.resolve(this.targetCount)}getTargetData(e,t){const i=this.Br.get(t)||null;return Le.resolve(i)}addMatchingKeys(e,t,i){return this.qr.mr(t,i),Le.resolve()}removeMatchingKeys(e,t,i){this.qr.pr(t,i);const r=this.persistence.referenceDelegate,s=[];return r&&t.forEach(o=>{s.push(r.markPotentiallyOrphaned(e,o))}),Le.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this.qr.yr(t),Le.resolve()}getMatchingKeysForTargetId(e,t){const i=this.qr.Sr(t);return Le.resolve(i)}containsKey(e,t){return Le.resolve(this.qr.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class h5{constructor(e,t){this.Kr={},this.overlays={},this.$r=new Xw(0),this.Ur=!1,this.Ur=!0,this.Wr=new Cue,this.referenceDelegate=e(this),this.Gr=new Pue(this),this.indexManager=new mue,this.remoteDocumentCache=function(r){return new Mue(r)}(i=>this.referenceDelegate.zr(i)),this.serializer=new fue(t),this.jr=new Tue(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.Ur=!1,Promise.resolve()}get started(){return this.Ur}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new Eue,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let i=this.Kr[e.toKey()];return i||(i=new Aue(t,this.referenceDelegate),this.Kr[e.toKey()]=i),i}getGlobalsCache(){return this.Wr}getTargetCache(){return this.Gr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.jr}runTransaction(e,t,i){gt("MemoryPersistence","Starting transaction:",e);const r=new Rue(this.$r.next());return this.referenceDelegate.Hr(),i(r).next(s=>this.referenceDelegate.Jr(r).next(()=>s)).toPromise().then(s=>(r.raiseOnCommittedEvent(),s))}Yr(e,t){return Le.or(Object.values(this.Kr).map(i=>()=>i.containsKey(e,t)))}}class Rue extends oce{constructor(e){super(),this.currentSequenceNumber=e}}class uI{constructor(e){this.persistence=e,this.Zr=new cI,this.Xr=null}static ei(e){return new uI(e)}get ti(){if(this.Xr)return this.Xr;throw Wt()}addReference(e,t,i){return this.Zr.addReference(i,t),this.ti.delete(i.toString()),Le.resolve()}removeReference(e,t,i){return this.Zr.removeReference(i,t),this.ti.add(i.toString()),Le.resolve()}markPotentiallyOrphaned(e,t){return this.ti.add(t.toString()),Le.resolve()}removeTarget(e,t){this.Zr.yr(t.targetId).forEach(r=>this.ti.add(r.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,t.targetId).next(r=>{r.forEach(s=>this.ti.add(s.toString()))}).next(()=>i.removeTargetData(e,t))}Hr(){this.Xr=new Set}Jr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Le.forEach(this.ti,i=>{const r=kt.fromPath(i);return this.ni(e,r).next(s=>{s||t.removeEntry(r,Kt.min())})}).next(()=>(this.Xr=null,t.apply(e)))}updateLimboDocument(e,t){return this.ni(e,t).next(i=>{i?this.ti.delete(t.toString()):this.ti.add(t.toString())})}zr(e){return 0}ni(e,t){return Le.or([()=>Le.resolve(this.Zr.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.Yr(e,t)])}}class k_{constructor(e,t){this.persistence=e,this.ri=new mh(i=>cce(i.path),(i,r)=>i.isEqual(r)),this.garbageCollector=_ue(this,t)}static ei(e,t){return new k_(e,t)}Hr(){}Jr(e){return Le.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}Xn(e){const t=this.nr(e);return this.persistence.getTargetCache().getTargetCount(e).next(i=>t.next(r=>i+r))}nr(e){let t=0;return this.er(e,i=>{t++}).next(()=>t)}er(e,t){return Le.forEach(this.ri,(i,r)=>this.ir(e,i,r).next(s=>s?Le.resolve():t(r)))}removeTargets(e,t,i){return this.persistence.getTargetCache().removeTargets(e,t,i)}removeOrphanedDocuments(e,t){let i=0;const r=this.persistence.getRemoteDocumentCache(),s=r.newChangeBuffer();return r.Lr(e,o=>this.ir(e,o,t).next(a=>{a||(i++,s.removeEntry(o,Kt.min()))})).next(()=>s.apply(e)).next(()=>i)}markPotentiallyOrphaned(e,t){return this.ri.set(t,e.currentSequenceNumber),Le.resolve()}removeTarget(e,t){const i=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,t,i){return this.ri.set(i,e.currentSequenceNumber),Le.resolve()}removeReference(e,t,i){return this.ri.set(i,e.currentSequenceNumber),Le.resolve()}updateLimboDocument(e,t){return this.ri.set(t,e.currentSequenceNumber),Le.resolve()}zr(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=W0(e.data.value)),t}ir(e,t,i){return Le.or([()=>this.persistence.Yr(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const r=this.ri.get(t);return Le.resolve(r!==void 0&&r>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hI{constructor(e,t,i,r){this.targetId=e,this.fromCache=t,this.Wi=i,this.Gi=r}static zi(e,t){let i=yn(),r=yn();for(const s of t.docChanges)switch(s.type){case 0:i=i.add(s.doc.key);break;case 1:r=r.add(s.doc.key)}return new hI(e,t.fromCache,i,r)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nue{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lue{constructor(){this.ji=!1,this.Hi=!1,this.Ji=100,this.Yi=function(){return pse()?8:ace(Ur())>0?6:4}()}initialize(e,t){this.Zi=e,this.indexManager=t,this.ji=!0}getDocumentsMatchingQuery(e,t,i,r){const s={result:null};return this.Xi(e,t).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.es(e,t,r,i).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new Nue;return this.ts(e,t,o).next(a=>{if(s.result=a,this.Hi)return this.ns(e,t,o,a.size)})}).next(()=>s.result)}ns(e,t,i,r){return i.documentReadCount<this.Ji?(ad()<=mn.DEBUG&&gt("QueryEngine","SDK will not create cache indexes for query:",ld(t),"since it only creates cache indexes for collection contains","more than or equal to",this.Ji,"documents"),Le.resolve()):(ad()<=mn.DEBUG&&gt("QueryEngine","Query:",ld(t),"scans",i.documentReadCount,"local documents and returns",r,"documents as results."),i.documentReadCount>this.Yi*r?(ad()<=mn.DEBUG&&gt("QueryEngine","The SDK decides to create cache indexes for query:",ld(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,ra(t))):Le.resolve())}Xi(e,t){if(p3(t))return Le.resolve(null);let i=ra(t);return this.indexManager.getIndexType(e,i).next(r=>r===0?null:(t.limit!==null&&r===1&&(t=N_(t,null,"F"),i=ra(t)),this.indexManager.getDocumentsMatchingTarget(e,i).next(s=>{const o=yn(...s);return this.Zi.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,i).next(l=>{const c=this.rs(t,a);return this.ss(t,c,o,l.readTime)?this.Xi(e,N_(t,null,"F")):this.os(e,c,t,l)}))})))}es(e,t,i,r){return p3(t)||r.isEqual(Kt.min())?Le.resolve(null):this.Zi.getDocuments(e,i).next(s=>{const o=this.rs(t,s);return this.ss(t,o,i,r)?Le.resolve(null):(ad()<=mn.DEBUG&&gt("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),ld(t)),this.os(e,o,t,nce(r,-1)).next(a=>a))})}rs(e,t){let i=new qi(Hz(e));return t.forEach((r,s)=>{Zw(e,s)&&(i=i.add(s))}),i}ss(e,t,i,r){if(e.limit===null)return!1;if(i.size!==t.size)return!0;const s=e.limitType==="F"?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(r)>0)}ts(e,t,i){return ad()<=mn.DEBUG&&gt("QueryEngine","Using full collection scan to execute query:",ld(t)),this.Zi.getDocumentsMatchingQuery(e,t,fc.min(),i)}os(e,t,i,r){return this.Zi.getDocumentsMatchingQuery(e,i,r).next(s=>(t.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Due{constructor(e,t,i,r){this.persistence=e,this._s=t,this.serializer=r,this.us=new fi(wn),this.cs=new mh(s=>iI(s),rI),this.ls=new Map,this.hs=e.getRemoteDocumentCache(),this.Gr=e.getTargetCache(),this.jr=e.getBundleCache(),this.Ps(i)}Ps(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new Sue(this.hs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.hs.setIndexManager(this.indexManager),this._s.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.us))}}function kue(n,e,t,i){return new Due(n,e,t,i)}async function d5(n,e){const t=Jt(n);return await t.persistence.runTransaction("Handle user change","readonly",i=>{let r;return t.mutationQueue.getAllMutationBatches(i).next(s=>(r=s,t.Ps(e),t.mutationQueue.getAllMutationBatches(i))).next(s=>{const o=[],a=[];let l=yn();for(const c of r){o.push(c.batchId);for(const u of c.mutations)l=l.add(u.key)}for(const c of s){a.push(c.batchId);for(const u of c.mutations)l=l.add(u.key)}return t.localDocuments.getDocuments(i,l).next(c=>({Ts:c,removedBatchIds:o,addedBatchIds:a}))})})}function Oue(n,e){const t=Jt(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{const r=e.batch.keys(),s=t.hs.newChangeBuffer({trackRemovals:!0});return function(a,l,c,u){const f=c.batch,m=f.keys();let g=Le.resolve();return m.forEach(x=>{g=g.next(()=>u.getEntry(l,x)).next(b=>{const w=c.docVersions.get(x);jn(w!==null),b.version.compareTo(w)<0&&(f.applyToRemoteDocument(b,c),b.isValidDocument()&&(b.setReadTime(c.commitVersion),u.addEntry(b)))})}),g.next(()=>a.mutationQueue.removeMutationBatch(l,f))}(t,i,e,s).next(()=>s.apply(i)).next(()=>t.mutationQueue.performConsistencyCheck(i)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(i,r,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(a){let l=yn();for(let c=0;c<a.mutationResults.length;++c)a.mutationResults[c].transformResults.length>0&&(l=l.add(a.batch.mutations[c].key));return l}(e))).next(()=>t.localDocuments.getDocuments(i,r))})}function f5(n){const e=Jt(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Gr.getLastRemoteSnapshotVersion(t))}function Uue(n,e){const t=Jt(n),i=e.snapshotVersion;let r=t.us;return t.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=t.hs.newChangeBuffer({trackRemovals:!0});r=t.us;const a=[];e.targetChanges.forEach((u,f)=>{const m=r.get(f);if(!m)return;a.push(t.Gr.removeMatchingKeys(s,u.removedDocuments,f).next(()=>t.Gr.addMatchingKeys(s,u.addedDocuments,f)));let g=m.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(f)!==null?g=g.withResumeToken(dr.EMPTY_BYTE_STRING,Kt.min()).withLastLimboFreeSnapshotVersion(Kt.min()):u.resumeToken.approximateByteSize()>0&&(g=g.withResumeToken(u.resumeToken,i)),r=r.insert(f,g),function(b,w,v){return b.resumeToken.approximateByteSize()===0||w.snapshotVersion.toMicroseconds()-b.snapshotVersion.toMicroseconds()>=3e8?!0:v.addedDocuments.size+v.modifiedDocuments.size+v.removedDocuments.size>0}(m,g,u)&&a.push(t.Gr.updateTargetData(s,g))});let l=tl(),c=yn();if(e.documentUpdates.forEach(u=>{e.resolvedLimboDocuments.has(u)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(s,u))}),a.push(Fue(s,o,e.documentUpdates).next(u=>{l=u.Is,c=u.Es})),!i.isEqual(Kt.min())){const u=t.Gr.getLastRemoteSnapshotVersion(s).next(f=>t.Gr.setTargetsMetadata(s,s.currentSequenceNumber,i));a.push(u)}return Le.waitFor(a).next(()=>o.apply(s)).next(()=>t.localDocuments.getLocalViewOfDocuments(s,l,c)).next(()=>l)}).then(s=>(t.us=r,s))}function Fue(n,e,t){let i=yn(),r=yn();return t.forEach(s=>i=i.add(s)),e.getEntries(n,i).next(s=>{let o=tl();return t.forEach((a,l)=>{const c=s.get(a);l.isFoundDocument()!==c.isFoundDocument()&&(r=r.add(a)),l.isNoDocument()&&l.version.isEqual(Kt.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!c.isValidDocument()||l.version.compareTo(c.version)>0||l.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):gt("LocalStore","Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",l.version)}),{Is:o,Es:r}})}function jue(n,e){const t=Jt(n);return t.persistence.runTransaction("Get next mutation batch","readonly",i=>(e===void 0&&(e=-1),t.mutationQueue.getNextMutationBatchAfterBatchId(i,e)))}function Vue(n,e){const t=Jt(n);return t.persistence.runTransaction("Allocate target","readwrite",i=>{let r;return t.Gr.getTargetData(i,e).next(s=>s?(r=s,Le.resolve(r)):t.Gr.allocateTargetId(i).next(o=>(r=new Hl(e,o,"TargetPurposeListen",i.currentSequenceNumber),t.Gr.addTargetData(i,r).next(()=>r))))}).then(i=>{const r=t.us.get(i.targetId);return(r===null||i.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(t.us=t.us.insert(i.targetId,i),t.cs.set(e,i.targetId)),i})}async function rC(n,e,t){const i=Jt(n),r=i.us.get(e),s=t?"readwrite":"readwrite-primary";try{t||await i.persistence.runTransaction("Release target",s,o=>i.persistence.referenceDelegate.removeTarget(o,r))}catch(o){if(!Of(o))throw o;gt("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}i.us=i.us.remove(e),i.cs.delete(r.target)}function C3(n,e,t){const i=Jt(n);let r=Kt.min(),s=yn();return i.persistence.runTransaction("Execute query","readwrite",o=>function(l,c,u){const f=Jt(l),m=f.cs.get(u);return m!==void 0?Le.resolve(f.us.get(m)):f.Gr.getTargetData(c,u)}(i,o,ra(e)).next(a=>{if(a)return r=a.lastLimboFreeSnapshotVersion,i.Gr.getMatchingKeysForTargetId(o,a.targetId).next(l=>{s=l})}).next(()=>i._s.getDocumentsMatchingQuery(o,e,t?r:Kt.min(),t?s:yn())).next(a=>(Bue(i,Ace(e),a),{documents:a,ds:s})))}function Bue(n,e,t){let i=n.ls.get(e)||Kt.min();t.forEach((r,s)=>{s.readTime.compareTo(i)>0&&(i=s.readTime)}),n.ls.set(e,i)}class A3{constructor(){this.activeTargetIds=Lce()}ps(e){this.activeTargetIds=this.activeTargetIds.add(e)}ys(e){this.activeTargetIds=this.activeTargetIds.delete(e)}gs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class zue{constructor(){this._o=new A3,this.ao={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,i){}addLocalQueryTarget(e,t=!0){return t&&this._o.ps(e),this.ao[e]||"not-current"}updateQueryState(e,t,i){this.ao[e]=t}removeLocalQueryTarget(e){this._o.ys(e)}isLocalQueryTarget(e){return this._o.activeTargetIds.has(e)}clearQueryState(e){delete this.ao[e]}getAllActiveQueryTargets(){return this._o.activeTargetIds}isActiveQueryTarget(e){return this._o.activeTargetIds.has(e)}start(){return this._o=new A3,Promise.resolve()}handleUserChange(e,t,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hue{uo(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M3{constructor(){this.co=()=>this.lo(),this.ho=()=>this.Po(),this.To=[],this.Io()}uo(e){this.To.push(e)}shutdown(){window.removeEventListener("online",this.co),window.removeEventListener("offline",this.ho)}Io(){window.addEventListener("online",this.co),window.addEventListener("offline",this.ho)}lo(){gt("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.To)e(0)}Po(){gt("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.To)e(1)}static p(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let m0=null;function s1(){return m0===null?m0=function(){return 268435456+Math.round(2147483648*Math.random())}():m0++,"0x"+m0.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Gue={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wue{constructor(e){this.Eo=e.Eo,this.Ao=e.Ao}Ro(e){this.Vo=e}mo(e){this.fo=e}po(e){this.yo=e}onMessage(e){this.wo=e}close(){this.Ao()}send(e){this.Eo(e)}So(){this.Vo()}bo(){this.fo()}Do(e){this.yo(e)}vo(e){this.wo(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Er="WebChannelConnection";class que extends class{get Co(){return!1}constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const i=t.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Fo=i+"://"+t.host,this.Mo=`projects/${r}/databases/${s}`,this.xo=this.databaseId.database==="(default)"?`project_id=${r}`:`project_id=${r}&database_id=${s}`}Oo(t,i,r,s,o){const a=s1(),l=this.No(t,i.toUriEncodedString());gt("RestConnection",`Sending RPC '${t}' ${a}:`,l,r);const c={"google-cloud-resource-prefix":this.Mo,"x-goog-request-params":this.xo};return this.Lo(c,s,o),this.Bo(t,l,c,r).then(u=>(gt("RestConnection",`Received RPC '${t}' ${a}: `,u),u),u=>{throw pf("RestConnection",`RPC '${t}' ${a} failed with error: `,u,"url: ",l,"request:",r),u})}ko(t,i,r,s,o,a){return this.Oo(t,i,r,s,o)}Lo(t,i,r){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Df}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),i&&i.headers.forEach((s,o)=>t[o]=s),r&&r.headers.forEach((s,o)=>t[o]=s)}No(t,i){const r=Gue[t];return`${this.Fo}/v1/${i}:${r}`}terminate(){}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}Bo(e,t,i,r){const s=s1();return new Promise((o,a)=>{const l=new Ez;l.setWithCredentials(!0),l.listenOnce(Cz.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case G0.NO_ERROR:const u=l.getResponseJson();gt(Er,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(u)),o(u);break;case G0.TIMEOUT:gt(Er,`RPC '${e}' ${s} timed out`),a(new yt(Ne.DEADLINE_EXCEEDED,"Request time out"));break;case G0.HTTP_ERROR:const f=l.getStatus();if(gt(Er,`RPC '${e}' ${s} failed with status:`,f,"response text:",l.getResponseText()),f>0){let m=l.getResponseJson();Array.isArray(m)&&(m=m[0]);const g=m?.error;if(g&&g.status&&g.message){const x=function(w){const v=w.toLowerCase().replace(/_/g,"-");return Object.values(Ne).indexOf(v)>=0?v:Ne.UNKNOWN}(g.status);a(new yt(x,g.message))}else a(new yt(Ne.UNKNOWN,"Server responded with status "+l.getStatus()))}else a(new yt(Ne.UNAVAILABLE,"Connection failed."));break;default:Wt()}}finally{gt(Er,`RPC '${e}' ${s} completed.`)}});const c=JSON.stringify(r);gt(Er,`RPC '${e}' ${s} sending request:`,r),l.send(t,"POST",c,i,15)})}qo(e,t,i){const r=s1(),s=[this.Fo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=Iz(),a=Mz(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(l.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(l.useFetchStreams=!0),this.Lo(l.initMessageHeaders,t,i),l.encodeInitMessageHeaders=!0;const u=s.join("");gt(Er,`Creating RPC '${e}' stream ${r}: ${u}`,l);const f=o.createWebChannel(u,l);let m=!1,g=!1;const x=new Wue({Eo:w=>{g?gt(Er,`Not sending because RPC '${e}' stream ${r} is closed:`,w):(m||(gt(Er,`Opening RPC '${e}' stream ${r} transport.`),f.open(),m=!0),gt(Er,`RPC '${e}' stream ${r} sending:`,w),f.send(w))},Ao:()=>f.close()}),b=(w,v,S)=>{w.listen(v,E=>{try{S(E)}catch(C){setTimeout(()=>{throw C},0)}})};return b(f,Kp.EventType.OPEN,()=>{g||(gt(Er,`RPC '${e}' stream ${r} transport opened.`),x.So())}),b(f,Kp.EventType.CLOSE,()=>{g||(g=!0,gt(Er,`RPC '${e}' stream ${r} transport closed`),x.Do())}),b(f,Kp.EventType.ERROR,w=>{g||(g=!0,pf(Er,`RPC '${e}' stream ${r} transport errored:`,w),x.Do(new yt(Ne.UNAVAILABLE,"The operation could not be completed")))}),b(f,Kp.EventType.MESSAGE,w=>{var v;if(!g){const S=w.data[0];jn(!!S);const E=S,C=E?.error||((v=E[0])===null||v===void 0?void 0:v.error);if(C){gt(Er,`RPC '${e}' stream ${r} received error:`,C);const V=C.status;let L=function(A){const M=Di[A];if(M!==void 0)return t5(M)}(V),N=C.message;L===void 0&&(L=Ne.INTERNAL,N="Unknown error status: "+V+" with message "+C.message),g=!0,x.Do(new yt(L,N)),f.close()}else gt(Er,`RPC '${e}' stream ${r} received:`,S),x.vo(S)}}),b(a,Az.STAT_EVENT,w=>{w.stat===XE.PROXY?gt(Er,`RPC '${e}' stream ${r} detected buffering proxy`):w.stat===XE.NOPROXY&&gt(Er,`RPC '${e}' stream ${r} detected no buffering proxy`)}),setTimeout(()=>{x.bo()},0),x}}function o1(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ib(n){return new Zce(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class p5{constructor(e,t,i=1e3,r=1.5,s=6e4){this.li=e,this.timerId=t,this.Qo=i,this.Ko=r,this.$o=s,this.Uo=0,this.Wo=null,this.Go=Date.now(),this.reset()}reset(){this.Uo=0}zo(){this.Uo=this.$o}jo(e){this.cancel();const t=Math.floor(this.Uo+this.Ho()),i=Math.max(0,Date.now()-this.Go),r=Math.max(0,t-i);r>0&&gt("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.Uo} ms, delay with jitter: ${t} ms, last attempt: ${i} ms ago)`),this.Wo=this.li.enqueueAfterDelay(this.timerId,r,()=>(this.Go=Date.now(),e())),this.Uo*=this.Ko,this.Uo<this.Qo&&(this.Uo=this.Qo),this.Uo>this.$o&&(this.Uo=this.$o)}Jo(){this.Wo!==null&&(this.Wo.skipDelay(),this.Wo=null)}cancel(){this.Wo!==null&&(this.Wo.cancel(),this.Wo=null)}Ho(){return(Math.random()-.5)*this.Uo}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m5{constructor(e,t,i,r,s,o,a,l){this.li=e,this.Yo=i,this.Zo=r,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.Xo=0,this.e_=null,this.t_=null,this.stream=null,this.n_=0,this.r_=new p5(e,t)}i_(){return this.state===1||this.state===5||this.s_()}s_(){return this.state===2||this.state===3}start(){this.n_=0,this.state!==4?this.auth():this.o_()}async stop(){this.i_()&&await this.close(0)}__(){this.state=0,this.r_.reset()}a_(){this.s_()&&this.e_===null&&(this.e_=this.li.enqueueAfterDelay(this.Yo,6e4,()=>this.u_()))}c_(e){this.l_(),this.stream.send(e)}async u_(){if(this.s_())return this.close(0)}l_(){this.e_&&(this.e_.cancel(),this.e_=null)}h_(){this.t_&&(this.t_.cancel(),this.t_=null)}async close(e,t){this.l_(),this.h_(),this.r_.cancel(),this.Xo++,e!==4?this.r_.reset():t&&t.code===Ne.RESOURCE_EXHAUSTED?(el(t.toString()),el("Using maximum backoff delay to prevent overloading the backend."),this.r_.zo()):t&&t.code===Ne.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.P_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.po(t)}P_(){}auth(){this.state=1;const e=this.T_(this.Xo),t=this.Xo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,r])=>{this.Xo===t&&this.I_(i,r)},i=>{e(()=>{const r=new yt(Ne.UNKNOWN,"Fetching auth token failed: "+i.message);return this.E_(r)})})}I_(e,t){const i=this.T_(this.Xo);this.stream=this.d_(e,t),this.stream.Ro(()=>{i(()=>this.listener.Ro())}),this.stream.mo(()=>{i(()=>(this.state=2,this.t_=this.li.enqueueAfterDelay(this.Zo,1e4,()=>(this.s_()&&(this.state=3),Promise.resolve())),this.listener.mo()))}),this.stream.po(r=>{i(()=>this.E_(r))}),this.stream.onMessage(r=>{i(()=>++this.n_==1?this.A_(r):this.onNext(r))})}o_(){this.state=5,this.r_.jo(async()=>{this.state=0,this.start()})}E_(e){return gt("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}T_(e){return t=>{this.li.enqueueAndForget(()=>this.Xo===e?t():(gt("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class $ue extends m5{constructor(e,t,i,r,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,i,r,o),this.serializer=s}d_(e,t){return this.connection.qo("Listen",e,t)}A_(e){return this.onNext(e)}onNext(e){this.r_.reset();const t=nue(this.serializer,e),i=function(s){if(!("targetChange"in s))return Kt.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?Kt.min():o.readTime?sa(o.readTime):Kt.min()}(e);return this.listener.R_(t,i)}V_(e){const t={};t.database=iC(this.serializer),t.addTarget=function(s,o){let a;const l=o.target;if(a=QE(l)?{documents:sue(s,l)}:{query:oue(s,l).ct},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=r5(s,o.resumeToken);const c=eC(s,o.expectedCount);c!==null&&(a.expectedCount=c)}else if(o.snapshotVersion.compareTo(Kt.min())>0){a.readTime=D_(s,o.snapshotVersion.toTimestamp());const c=eC(s,o.expectedCount);c!==null&&(a.expectedCount=c)}return a}(this.serializer,e);const i=lue(this.serializer,e);i&&(t.labels=i),this.c_(t)}m_(e){const t={};t.database=iC(this.serializer),t.removeTarget=e,this.c_(t)}}class Xue extends m5{constructor(e,t,i,r,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,i,r,o),this.serializer=s}get f_(){return this.n_>0}start(){this.lastStreamToken=void 0,super.start()}P_(){this.f_&&this.g_([])}d_(e,t){return this.connection.qo("Write",e,t)}A_(e){return jn(!!e.streamToken),this.lastStreamToken=e.streamToken,jn(!e.writeResults||e.writeResults.length===0),this.listener.p_()}onNext(e){jn(!!e.streamToken),this.lastStreamToken=e.streamToken,this.r_.reset();const t=rue(e.writeResults,e.commitTime),i=sa(e.commitTime);return this.listener.y_(i,t)}w_(){const e={};e.database=iC(this.serializer),this.c_(e)}g_(e){const t={streamToken:this.lastStreamToken,writes:e.map(i=>iue(this.serializer,i))};this.c_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yue extends class{}{constructor(e,t,i,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=i,this.serializer=r,this.S_=!1}b_(){if(this.S_)throw new yt(Ne.FAILED_PRECONDITION,"The client has already been terminated.")}Oo(e,t,i,r){return this.b_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.Oo(e,tC(t,i),r,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===Ne.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new yt(Ne.UNKNOWN,s.toString())})}ko(e,t,i,r,s){return this.b_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.ko(e,tC(t,i),r,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===Ne.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new yt(Ne.UNKNOWN,o.toString())})}terminate(){this.S_=!0,this.connection.terminate()}}class Kue{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.D_=0,this.v_=null,this.C_=!0}F_(){this.D_===0&&(this.M_("Unknown"),this.v_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.v_=null,this.x_("Backend didn't respond within 10 seconds."),this.M_("Offline"),Promise.resolve())))}O_(e){this.state==="Online"?this.M_("Unknown"):(this.D_++,this.D_>=1&&(this.N_(),this.x_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.M_("Offline")))}set(e){this.N_(),this.D_=0,e==="Online"&&(this.C_=!1),this.M_(e)}M_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}x_(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.C_?(el(t),this.C_=!1):gt("OnlineStateTracker",t)}N_(){this.v_!==null&&(this.v_.cancel(),this.v_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jue{constructor(e,t,i,r,s){this.localStore=e,this.datastore=t,this.asyncQueue=i,this.remoteSyncer={},this.L_=[],this.B_=new Map,this.k_=new Set,this.q_=[],this.Q_=s,this.Q_.uo(o=>{i.enqueueAndForget(async()=>{gh(this)&&(gt("RemoteStore","Restarting streams for network reachability change."),await async function(l){const c=Jt(l);c.k_.add(4),await ly(c),c.K_.set("Unknown"),c.k_.delete(4),await rb(c)}(this))})}),this.K_=new Kue(i,r)}}async function rb(n){if(gh(n))for(const e of n.q_)await e(!0)}async function ly(n){for(const e of n.q_)await e(!1)}function g5(n,e){const t=Jt(n);t.B_.has(e.targetId)||(t.B_.set(e.targetId,e),mI(t)?pI(t):Ff(t).s_()&&fI(t,e))}function dI(n,e){const t=Jt(n),i=Ff(t);t.B_.delete(e),i.s_()&&y5(t,e),t.B_.size===0&&(i.s_()?i.a_():gh(t)&&t.K_.set("Unknown"))}function fI(n,e){if(n.U_.xe(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Kt.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}Ff(n).V_(e)}function y5(n,e){n.U_.xe(e),Ff(n).m_(e)}function pI(n){n.U_=new Yce({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),ut:e=>n.B_.get(e)||null,nt:()=>n.datastore.serializer.databaseId}),Ff(n).start(),n.K_.F_()}function mI(n){return gh(n)&&!Ff(n).i_()&&n.B_.size>0}function gh(n){return Jt(n).k_.size===0}function v5(n){n.U_=void 0}async function Que(n){n.K_.set("Online")}async function Zue(n){n.B_.forEach((e,t)=>{fI(n,e)})}async function ehe(n,e){v5(n),mI(n)?(n.K_.O_(e),pI(n)):n.K_.set("Unknown")}async function the(n,e,t){if(n.K_.set("Online"),e instanceof i5&&e.state===2&&e.cause)try{await async function(r,s){const o=s.cause;for(const a of s.targetIds)r.B_.has(a)&&(await r.remoteSyncer.rejectListen(a,o),r.B_.delete(a),r.U_.removeTarget(a))}(n,e)}catch(i){gt("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),i),await O_(n,i)}else if(e instanceof X0?n.U_.$e(e):e instanceof n5?n.U_.Je(e):n.U_.Ge(e),!t.isEqual(Kt.min()))try{const i=await f5(n.localStore);t.compareTo(i)>=0&&await function(s,o){const a=s.U_.it(o);return a.targetChanges.forEach((l,c)=>{if(l.resumeToken.approximateByteSize()>0){const u=s.B_.get(c);u&&s.B_.set(c,u.withResumeToken(l.resumeToken,o))}}),a.targetMismatches.forEach((l,c)=>{const u=s.B_.get(l);if(!u)return;s.B_.set(l,u.withResumeToken(dr.EMPTY_BYTE_STRING,u.snapshotVersion)),y5(s,l);const f=new Hl(u.target,l,c,u.sequenceNumber);fI(s,f)}),s.remoteSyncer.applyRemoteEvent(a)}(n,t)}catch(i){gt("RemoteStore","Failed to raise snapshot:",i),await O_(n,i)}}async function O_(n,e,t){if(!Of(e))throw e;n.k_.add(1),await ly(n),n.K_.set("Offline"),t||(t=()=>f5(n.localStore)),n.asyncQueue.enqueueRetryable(async()=>{gt("RemoteStore","Retrying IndexedDB access"),await t(),n.k_.delete(1),await rb(n)})}function x5(n,e){return e().catch(t=>O_(n,t,e))}async function sb(n){const e=Jt(n),t=yc(e);let i=e.L_.length>0?e.L_[e.L_.length-1].batchId:-1;for(;nhe(e);)try{const r=await jue(e.localStore,i);if(r===null){e.L_.length===0&&t.a_();break}i=r.batchId,ihe(e,r)}catch(r){await O_(e,r)}_5(e)&&w5(e)}function nhe(n){return gh(n)&&n.L_.length<10}function ihe(n,e){n.L_.push(e);const t=yc(n);t.s_()&&t.f_&&t.g_(e.mutations)}function _5(n){return gh(n)&&!yc(n).i_()&&n.L_.length>0}function w5(n){yc(n).start()}async function rhe(n){yc(n).w_()}async function she(n){const e=yc(n);for(const t of n.L_)e.g_(t.mutations)}async function ohe(n,e,t){const i=n.L_.shift(),r=oI.from(i,e,t);await x5(n,()=>n.remoteSyncer.applySuccessfulWrite(r)),await sb(n)}async function ahe(n,e){e&&yc(n).f_&&await async function(i,r){if(function(o){return qce(o)&&o!==Ne.ABORTED}(r.code)){const s=i.L_.shift();yc(i).__(),await x5(i,()=>i.remoteSyncer.rejectFailedWrite(s.batchId,r)),await sb(i)}}(n,e),_5(n)&&w5(n)}async function I3(n,e){const t=Jt(n);t.asyncQueue.verifyOperationInProgress(),gt("RemoteStore","RemoteStore received new credentials");const i=gh(t);t.k_.add(3),await ly(t),i&&t.K_.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.k_.delete(3),await rb(t)}async function lhe(n,e){const t=Jt(n);e?(t.k_.delete(2),await rb(t)):e||(t.k_.add(2),await ly(t),t.K_.set("Unknown"))}function Ff(n){return n.W_||(n.W_=function(t,i,r){const s=Jt(t);return s.b_(),new $ue(i,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,r)}(n.datastore,n.asyncQueue,{Ro:Que.bind(null,n),mo:Zue.bind(null,n),po:ehe.bind(null,n),R_:the.bind(null,n)}),n.q_.push(async e=>{e?(n.W_.__(),mI(n)?pI(n):n.K_.set("Unknown")):(await n.W_.stop(),v5(n))})),n.W_}function yc(n){return n.G_||(n.G_=function(t,i,r){const s=Jt(t);return s.b_(),new Xue(i,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,r)}(n.datastore,n.asyncQueue,{Ro:()=>Promise.resolve(),mo:rhe.bind(null,n),po:ahe.bind(null,n),p_:she.bind(null,n),y_:ohe.bind(null,n)}),n.q_.push(async e=>{e?(n.G_.__(),await sb(n)):(await n.G_.stop(),n.L_.length>0&&(gt("RemoteStore",`Stopping write stream with ${n.L_.length} pending writes`),n.L_=[]))})),n.G_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gI{constructor(e,t,i,r,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=i,this.op=r,this.removalCallback=s,this.deferred=new Ha,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,i,r,s){const o=Date.now()+i,a=new gI(e,t,o,r,s);return a.start(i),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new yt(Ne.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function yI(n,e){if(el("AsyncQueue",`${e}: ${n}`),Of(n))return new yt(Ne.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yd{static emptySet(e){return new Yd(e.comparator)}constructor(e){this.comparator=e?(t,i)=>e(t,i)||kt.comparator(t.key,i.key):(t,i)=>kt.comparator(t.key,i.key),this.keyedMap=Jp(),this.sortedSet=new fi(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,i)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Yd)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;t.hasNext();){const r=t.getNext().key,s=i.getNext().key;if(!r.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const i=new Yd;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=t,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class P3{constructor(){this.z_=new fi(kt.comparator)}track(e){const t=e.doc.key,i=this.z_.get(t);i?e.type!==0&&i.type===3?this.z_=this.z_.insert(t,e):e.type===3&&i.type!==1?this.z_=this.z_.insert(t,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.z_=this.z_.insert(t,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.z_=this.z_.insert(t,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.z_=this.z_.remove(t):e.type===1&&i.type===2?this.z_=this.z_.insert(t,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.z_=this.z_.insert(t,{type:2,doc:e.doc}):Wt():this.z_=this.z_.insert(t,e)}j_(){const e=[];return this.z_.inorderTraversal((t,i)=>{e.push(i)}),e}}class xf{constructor(e,t,i,r,s,o,a,l,c){this.query=e,this.docs=t,this.oldDocs=i,this.docChanges=r,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=c}static fromInitialDocuments(e,t,i,r,s){const o=[];return t.forEach(a=>{o.push({type:0,doc:a})}),new xf(e,t,Yd.emptySet(t),o,i,r,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Qw(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,i=e.docChanges;if(t.length!==i.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==i[r].type||!t[r].doc.isEqual(i[r].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class che{constructor(){this.H_=void 0,this.J_=[]}Y_(){return this.J_.some(e=>e.Z_())}}class uhe{constructor(){this.queries=R3(),this.onlineState="Unknown",this.X_=new Set}terminate(){(function(t,i){const r=Jt(t),s=r.queries;r.queries=R3(),s.forEach((o,a)=>{for(const l of a.J_)l.onError(i)})})(this,new yt(Ne.ABORTED,"Firestore shutting down"))}}function R3(){return new mh(n=>zz(n),Qw)}async function vI(n,e){const t=Jt(n);let i=3;const r=e.query;let s=t.queries.get(r);s?!s.Y_()&&e.Z_()&&(i=2):(s=new che,i=e.Z_()?0:1);try{switch(i){case 0:s.H_=await t.onListen(r,!0);break;case 1:s.H_=await t.onListen(r,!1);break;case 2:await t.onFirstRemoteStoreListen(r)}}catch(o){const a=yI(o,`Initialization of query '${ld(e.query)}' failed`);return void e.onError(a)}t.queries.set(r,s),s.J_.push(e),e.ea(t.onlineState),s.H_&&e.ta(s.H_)&&_I(t)}async function xI(n,e){const t=Jt(n),i=e.query;let r=3;const s=t.queries.get(i);if(s){const o=s.J_.indexOf(e);o>=0&&(s.J_.splice(o,1),s.J_.length===0?r=e.Z_()?0:1:!s.Y_()&&e.Z_()&&(r=2))}switch(r){case 0:return t.queries.delete(i),t.onUnlisten(i,!0);case 1:return t.queries.delete(i),t.onUnlisten(i,!1);case 2:return t.onLastRemoteStoreUnlisten(i);default:return}}function hhe(n,e){const t=Jt(n);let i=!1;for(const r of e){const s=r.query,o=t.queries.get(s);if(o){for(const a of o.J_)a.ta(r)&&(i=!0);o.H_=r}}i&&_I(t)}function dhe(n,e,t){const i=Jt(n),r=i.queries.get(e);if(r)for(const s of r.J_)s.onError(t);i.queries.delete(e)}function _I(n){n.X_.forEach(e=>{e.next()})}var sC,N3;(N3=sC||(sC={})).na="default",N3.Cache="cache";class wI{constructor(e,t,i){this.query=e,this.ra=t,this.ia=!1,this.sa=null,this.onlineState="Unknown",this.options=i||{}}ta(e){if(!this.options.includeMetadataChanges){const i=[];for(const r of e.docChanges)r.type!==3&&i.push(r);e=new xf(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.ia?this.oa(e)&&(this.ra.next(e),t=!0):this._a(e,this.onlineState)&&(this.aa(e),t=!0),this.sa=e,t}onError(e){this.ra.error(e)}ea(e){this.onlineState=e;let t=!1;return this.sa&&!this.ia&&this._a(this.sa,e)&&(this.aa(this.sa),t=!0),t}_a(e,t){if(!e.fromCache||!this.Z_())return!0;const i=t!=="Offline";return(!this.options.ua||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}oa(e){if(e.docChanges.length>0)return!0;const t=this.sa&&this.sa.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}aa(e){e=xf.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.ia=!0,this.ra.next(e)}Z_(){return this.options.source!==sC.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class b5{constructor(e){this.key=e}}class S5{constructor(e){this.key=e}}class fhe{constructor(e,t){this.query=e,this.da=t,this.Aa=null,this.hasCachedResults=!1,this.current=!1,this.Ra=yn(),this.mutatedKeys=yn(),this.Va=Hz(e),this.ma=new Yd(this.Va)}get fa(){return this.da}ga(e,t){const i=t?t.pa:new P3,r=t?t.ma:this.ma;let s=t?t.mutatedKeys:this.mutatedKeys,o=r,a=!1;const l=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,c=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((u,f)=>{const m=r.get(u),g=Zw(this.query,f)?f:null,x=!!m&&this.mutatedKeys.has(m.key),b=!!g&&(g.hasLocalMutations||this.mutatedKeys.has(g.key)&&g.hasCommittedMutations);let w=!1;m&&g?m.data.isEqual(g.data)?x!==b&&(i.track({type:3,doc:g}),w=!0):this.ya(m,g)||(i.track({type:2,doc:g}),w=!0,(l&&this.Va(g,l)>0||c&&this.Va(g,c)<0)&&(a=!0)):!m&&g?(i.track({type:0,doc:g}),w=!0):m&&!g&&(i.track({type:1,doc:m}),w=!0,(l||c)&&(a=!0)),w&&(g?(o=o.add(g),s=b?s.add(u):s.delete(u)):(o=o.delete(u),s=s.delete(u)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const u=this.query.limitType==="F"?o.last():o.first();o=o.delete(u.key),s=s.delete(u.key),i.track({type:1,doc:u})}return{ma:o,pa:i,ss:a,mutatedKeys:s}}ya(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,i,r){const s=this.ma;this.ma=e.ma,this.mutatedKeys=e.mutatedKeys;const o=e.pa.j_();o.sort((u,f)=>function(g,x){const b=w=>{switch(w){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Wt()}};return b(g)-b(x)}(u.type,f.type)||this.Va(u.doc,f.doc)),this.wa(i),r=r!=null&&r;const a=t&&!r?this.Sa():[],l=this.Ra.size===0&&this.current&&!r?1:0,c=l!==this.Aa;return this.Aa=l,o.length!==0||c?{snapshot:new xf(this.query,e.ma,s,o,e.mutatedKeys,l===0,c,!1,!!i&&i.resumeToken.approximateByteSize()>0),ba:a}:{ba:a}}ea(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({ma:this.ma,pa:new P3,mutatedKeys:this.mutatedKeys,ss:!1},!1)):{ba:[]}}Da(e){return!this.da.has(e)&&!!this.ma.has(e)&&!this.ma.get(e).hasLocalMutations}wa(e){e&&(e.addedDocuments.forEach(t=>this.da=this.da.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.da=this.da.delete(t)),this.current=e.current)}Sa(){if(!this.current)return[];const e=this.Ra;this.Ra=yn(),this.ma.forEach(i=>{this.Da(i.key)&&(this.Ra=this.Ra.add(i.key))});const t=[];return e.forEach(i=>{this.Ra.has(i)||t.push(new S5(i))}),this.Ra.forEach(i=>{e.has(i)||t.push(new b5(i))}),t}va(e){this.da=e.ds,this.Ra=yn();const t=this.ga(e.documents);return this.applyChanges(t,!0)}Ca(){return xf.fromInitialDocuments(this.query,this.ma,this.mutatedKeys,this.Aa===0,this.hasCachedResults)}}class phe{constructor(e,t,i){this.query=e,this.targetId=t,this.view=i}}class mhe{constructor(e){this.key=e,this.Fa=!1}}class ghe{constructor(e,t,i,r,s,o){this.localStore=e,this.remoteStore=t,this.eventManager=i,this.sharedClientState=r,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Ma={},this.xa=new mh(a=>zz(a),Qw),this.Oa=new Map,this.Na=new Set,this.La=new fi(kt.comparator),this.Ba=new Map,this.ka=new cI,this.qa={},this.Qa=new Map,this.Ka=vf.Qn(),this.onlineState="Unknown",this.$a=void 0}get isPrimaryClient(){return this.$a===!0}}async function yhe(n,e,t=!0){const i=I5(n);let r;const s=i.xa.get(e);return s?(i.sharedClientState.addLocalQueryTarget(s.targetId),r=s.view.Ca()):r=await T5(i,e,t,!0),r}async function vhe(n,e){const t=I5(n);await T5(t,e,!0,!1)}async function T5(n,e,t,i){const r=await Vue(n.localStore,ra(e)),s=r.targetId,o=n.sharedClientState.addLocalQueryTarget(s,t);let a;return i&&(a=await xhe(n,e,s,o==="current",r.resumeToken)),n.isPrimaryClient&&t&&g5(n.remoteStore,r),a}async function xhe(n,e,t,i,r){n.Ua=(f,m,g)=>async function(b,w,v,S){let E=w.view.ga(v);E.ss&&(E=await C3(b.localStore,w.query,!1).then(({documents:N})=>w.view.ga(N,E)));const C=S&&S.targetChanges.get(w.targetId),V=S&&S.targetMismatches.get(w.targetId)!=null,L=w.view.applyChanges(E,b.isPrimaryClient,C,V);return D3(b,w.targetId,L.ba),L.snapshot}(n,f,m,g);const s=await C3(n.localStore,e,!0),o=new fhe(e,s.ds),a=o.ga(s.documents),l=ay.createSynthesizedTargetChangeForCurrentChange(t,i&&n.onlineState!=="Offline",r),c=o.applyChanges(a,n.isPrimaryClient,l);D3(n,t,c.ba);const u=new phe(e,t,o);return n.xa.set(e,u),n.Oa.has(t)?n.Oa.get(t).push(e):n.Oa.set(t,[e]),c.snapshot}async function _he(n,e,t){const i=Jt(n),r=i.xa.get(e),s=i.Oa.get(r.targetId);if(s.length>1)return i.Oa.set(r.targetId,s.filter(o=>!Qw(o,e))),void i.xa.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(r.targetId),i.sharedClientState.isActiveQueryTarget(r.targetId)||await rC(i.localStore,r.targetId,!1).then(()=>{i.sharedClientState.clearQueryState(r.targetId),t&&dI(i.remoteStore,r.targetId),oC(i,r.targetId)}).catch(kf)):(oC(i,r.targetId),await rC(i.localStore,r.targetId,!0))}async function whe(n,e){const t=Jt(n),i=t.xa.get(e),r=t.Oa.get(i.targetId);t.isPrimaryClient&&r.length===1&&(t.sharedClientState.removeLocalQueryTarget(i.targetId),dI(t.remoteStore,i.targetId))}async function bhe(n,e,t){const i=Ihe(n);try{const r=await function(o,a){const l=Jt(o),c=Vi.now(),u=a.reduce((g,x)=>g.add(x.key),yn());let f,m;return l.persistence.runTransaction("Locally write mutations","readwrite",g=>{let x=tl(),b=yn();return l.hs.getEntries(g,u).next(w=>{x=w,x.forEach((v,S)=>{S.isValidDocument()||(b=b.add(v))})}).next(()=>l.localDocuments.getOverlayedDocuments(g,x)).next(w=>{f=w;const v=[];for(const S of a){const E=Bce(S,f.get(S.key).overlayedDocument);E!=null&&v.push(new Nc(S.key,E,Dz(E.value.mapValue),Co.exists(!0)))}return l.mutationQueue.addMutationBatch(g,c,v,a)}).next(w=>{m=w;const v=w.applyToLocalDocumentSet(f,b);return l.documentOverlayCache.saveOverlays(g,w.batchId,v)})}).then(()=>({batchId:m.batchId,changes:Wz(f)}))}(i.localStore,e);i.sharedClientState.addPendingMutation(r.batchId),function(o,a,l){let c=o.qa[o.currentUser.toKey()];c||(c=new fi(wn)),c=c.insert(a,l),o.qa[o.currentUser.toKey()]=c}(i,r.batchId,t),await cy(i,r.changes),await sb(i.remoteStore)}catch(r){const s=yI(r,"Failed to persist write");t.reject(s)}}async function E5(n,e){const t=Jt(n);try{const i=await Uue(t.localStore,e);e.targetChanges.forEach((r,s)=>{const o=t.Ba.get(s);o&&(jn(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1),r.addedDocuments.size>0?o.Fa=!0:r.modifiedDocuments.size>0?jn(o.Fa):r.removedDocuments.size>0&&(jn(o.Fa),o.Fa=!1))}),await cy(t,i,e)}catch(i){await kf(i)}}function L3(n,e,t){const i=Jt(n);if(i.isPrimaryClient&&t===0||!i.isPrimaryClient&&t===1){const r=[];i.xa.forEach((s,o)=>{const a=o.view.ea(e);a.snapshot&&r.push(a.snapshot)}),function(o,a){const l=Jt(o);l.onlineState=a;let c=!1;l.queries.forEach((u,f)=>{for(const m of f.J_)m.ea(a)&&(c=!0)}),c&&_I(l)}(i.eventManager,e),r.length&&i.Ma.R_(r),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function She(n,e,t){const i=Jt(n);i.sharedClientState.updateQueryState(e,"rejected",t);const r=i.Ba.get(e),s=r&&r.key;if(s){let o=new fi(kt.comparator);o=o.insert(s,Ir.newNoDocument(s,Kt.min()));const a=yn().add(s),l=new nb(Kt.min(),new Map,new fi(wn),o,a);await E5(i,l),i.La=i.La.remove(s),i.Ba.delete(e),bI(i)}else await rC(i.localStore,e,!1).then(()=>oC(i,e,t)).catch(kf)}async function The(n,e){const t=Jt(n),i=e.batch.batchId;try{const r=await Oue(t.localStore,e);A5(t,i,null),C5(t,i),t.sharedClientState.updateMutationState(i,"acknowledged"),await cy(t,r)}catch(r){await kf(r)}}async function Ehe(n,e,t){const i=Jt(n);try{const r=await function(o,a){const l=Jt(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let u;return l.mutationQueue.lookupMutationBatch(c,a).next(f=>(jn(f!==null),u=f.keys(),l.mutationQueue.removeMutationBatch(c,f))).next(()=>l.mutationQueue.performConsistencyCheck(c)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(c,u,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,u)).next(()=>l.localDocuments.getDocuments(c,u))})}(i.localStore,e);A5(i,e,t),C5(i,e),i.sharedClientState.updateMutationState(e,"rejected",t),await cy(i,r)}catch(r){await kf(r)}}function C5(n,e){(n.Qa.get(e)||[]).forEach(t=>{t.resolve()}),n.Qa.delete(e)}function A5(n,e,t){const i=Jt(n);let r=i.qa[i.currentUser.toKey()];if(r){const s=r.get(e);s&&(t?s.reject(t):s.resolve(),r=r.remove(e)),i.qa[i.currentUser.toKey()]=r}}function oC(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const i of n.Oa.get(e))n.xa.delete(i),t&&n.Ma.Wa(i,t);n.Oa.delete(e),n.isPrimaryClient&&n.ka.yr(e).forEach(i=>{n.ka.containsKey(i)||M5(n,i)})}function M5(n,e){n.Na.delete(e.path.canonicalString());const t=n.La.get(e);t!==null&&(dI(n.remoteStore,t),n.La=n.La.remove(e),n.Ba.delete(t),bI(n))}function D3(n,e,t){for(const i of t)i instanceof b5?(n.ka.addReference(i.key,e),Che(n,i)):i instanceof S5?(gt("SyncEngine","Document no longer in limbo: "+i.key),n.ka.removeReference(i.key,e),n.ka.containsKey(i.key)||M5(n,i.key)):Wt()}function Che(n,e){const t=e.key,i=t.path.canonicalString();n.La.get(t)||n.Na.has(i)||(gt("SyncEngine","New document in limbo: "+t),n.Na.add(i),bI(n))}function bI(n){for(;n.Na.size>0&&n.La.size<n.maxConcurrentLimboResolutions;){const e=n.Na.values().next().value;n.Na.delete(e);const t=new kt(Zn.fromString(e)),i=n.Ka.next();n.Ba.set(i,new mhe(t)),n.La=n.La.insert(t,i),g5(n.remoteStore,new Hl(ra(Jw(t.path)),i,"TargetPurposeLimboResolution",Xw.oe))}}async function cy(n,e,t){const i=Jt(n),r=[],s=[],o=[];i.xa.isEmpty()||(i.xa.forEach((a,l)=>{o.push(i.Ua(l,e,t).then(c=>{var u;if((c||t)&&i.isPrimaryClient){const f=c?!c.fromCache:(u=t?.targetChanges.get(l.targetId))===null||u===void 0?void 0:u.current;i.sharedClientState.updateQueryState(l.targetId,f?"current":"not-current")}if(c){r.push(c);const f=hI.zi(l.targetId,c);s.push(f)}}))}),await Promise.all(o),i.Ma.R_(r),await async function(l,c){const u=Jt(l);try{await u.persistence.runTransaction("notifyLocalViewChanges","readwrite",f=>Le.forEach(c,m=>Le.forEach(m.Wi,g=>u.persistence.referenceDelegate.addReference(f,m.targetId,g)).next(()=>Le.forEach(m.Gi,g=>u.persistence.referenceDelegate.removeReference(f,m.targetId,g)))))}catch(f){if(!Of(f))throw f;gt("LocalStore","Failed to update sequence numbers: "+f)}for(const f of c){const m=f.targetId;if(!f.fromCache){const g=u.us.get(m),x=g.snapshotVersion,b=g.withLastLimboFreeSnapshotVersion(x);u.us=u.us.insert(m,b)}}}(i.localStore,s))}async function Ahe(n,e){const t=Jt(n);if(!t.currentUser.isEqual(e)){gt("SyncEngine","User change. New user:",e.toKey());const i=await d5(t.localStore,e);t.currentUser=e,function(s,o){s.Qa.forEach(a=>{a.forEach(l=>{l.reject(new yt(Ne.CANCELLED,o))})}),s.Qa.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await cy(t,i.Ts)}}function Mhe(n,e){const t=Jt(n),i=t.Ba.get(e);if(i&&i.Fa)return yn().add(i.key);{let r=yn();const s=t.Oa.get(e);if(!s)return r;for(const o of s){const a=t.xa.get(o);r=r.unionWith(a.view.fa)}return r}}function I5(n){const e=Jt(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=E5.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Mhe.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=She.bind(null,e),e.Ma.R_=hhe.bind(null,e.eventManager),e.Ma.Wa=dhe.bind(null,e.eventManager),e}function Ihe(n){const e=Jt(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=The.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Ehe.bind(null,e),e}class U_{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=ib(e.databaseInfo.databaseId),this.sharedClientState=this.za(e),this.persistence=this.ja(e),await this.persistence.start(),this.localStore=this.Ha(e),this.gcScheduler=this.Ja(e,this.localStore),this.indexBackfillerScheduler=this.Ya(e,this.localStore)}Ja(e,t){return null}Ya(e,t){return null}Ha(e){return kue(this.persistence,new Lue,e.initialUser,this.serializer)}ja(e){return new h5(uI.ei,this.serializer)}za(e){return new zue}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}U_.provider={build:()=>new U_};class Phe extends U_{constructor(e){super(),this.cacheSizeBytes=e}Ja(e,t){jn(this.persistence.referenceDelegate instanceof k_);const i=this.persistence.referenceDelegate.garbageCollector;return new vue(i,e.asyncQueue,t)}ja(e){const t=this.cacheSizeBytes!==void 0?ss.withCacheSize(this.cacheSizeBytes):ss.DEFAULT;return new h5(i=>k_.ei(i,t),this.serializer)}}class aC{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>L3(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=Ahe.bind(null,this.syncEngine),await lhe(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new uhe}()}createDatastore(e){const t=ib(e.databaseInfo.databaseId),i=function(s){return new que(s)}(e.databaseInfo);return function(s,o,a,l){return new Yue(s,o,a,l)}(e.authCredentials,e.appCheckCredentials,i,t)}createRemoteStore(e){return function(i,r,s,o,a){return new Jue(i,r,s,o,a)}(this.localStore,this.datastore,e.asyncQueue,t=>L3(this.syncEngine,t,0),function(){return M3.p()?new M3:new Hue}())}createSyncEngine(e,t){return function(r,s,o,a,l,c,u){const f=new ghe(r,s,o,a,l,c);return u&&(f.$a=!0),f}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(r){const s=Jt(r);gt("RemoteStore","RemoteStore shutting down."),s.k_.add(5),await ly(s),s.Q_.shutdown(),s.K_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()}}aC.provider={build:()=>new aC};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SI{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.Xa(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.Xa(this.observer.error,e):el("Uncaught Error in snapshot listener:",e.toString()))}eu(){this.muted=!0}Xa(e,t){setTimeout(()=>{this.muted||e(t)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rhe{constructor(e,t,i,r,s){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=i,this.databaseInfo=r,this.user=Ar.UNAUTHENTICATED,this.clientId=Rz.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(i,async o=>{gt("FirestoreClient","Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(i,o=>(gt("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Ha;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const i=yI(t,"Failed to shutdown persistence");e.reject(i)}}),e.promise}}async function a1(n,e){n.asyncQueue.verifyOperationInProgress(),gt("FirestoreClient","Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let i=t.initialUser;n.setCredentialChangeListener(async r=>{i.isEqual(r)||(await d5(e.localStore,r),i=r)}),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}async function k3(n,e){n.asyncQueue.verifyOperationInProgress();const t=await Nhe(n);gt("FirestoreClient","Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener(i=>I3(e.remoteStore,i)),n.setAppCheckTokenChangeListener((i,r)=>I3(e.remoteStore,r)),n._onlineComponents=e}async function Nhe(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){gt("FirestoreClient","Using user provided OfflineComponentProvider");try{await a1(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!function(r){return r.name==="FirebaseError"?r.code===Ne.FAILED_PRECONDITION||r.code===Ne.UNIMPLEMENTED:!(typeof DOMException<"u"&&r instanceof DOMException)||r.code===22||r.code===20||r.code===11}(t))throw t;pf("Error using user provided cache. Falling back to memory cache: "+t),await a1(n,new U_)}}else gt("FirestoreClient","Using default OfflineComponentProvider"),await a1(n,new Phe(void 0));return n._offlineComponents}async function P5(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(gt("FirestoreClient","Using user provided OnlineComponentProvider"),await k3(n,n._uninitializedComponentsProvider._online)):(gt("FirestoreClient","Using default OnlineComponentProvider"),await k3(n,new aC))),n._onlineComponents}function Lhe(n){return P5(n).then(e=>e.syncEngine)}async function F_(n){const e=await P5(n),t=e.eventManager;return t.onListen=yhe.bind(null,e.syncEngine),t.onUnlisten=_he.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=vhe.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=whe.bind(null,e.syncEngine),t}function Dhe(n,e,t={}){const i=new Ha;return n.asyncQueue.enqueueAndForget(async()=>function(s,o,a,l,c){const u=new SI({next:m=>{u.eu(),o.enqueueAndForget(()=>xI(s,f));const g=m.docs.has(a);!g&&m.fromCache?c.reject(new yt(Ne.UNAVAILABLE,"Failed to get document because the client is offline.")):g&&m.fromCache&&l&&l.source==="server"?c.reject(new yt(Ne.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(m)},error:m=>c.reject(m)}),f=new wI(Jw(a.path),u,{includeMetadataChanges:!0,ua:!0});return vI(s,f)}(await F_(n),n.asyncQueue,e,t,i)),i.promise}function khe(n,e,t={}){const i=new Ha;return n.asyncQueue.enqueueAndForget(async()=>function(s,o,a,l,c){const u=new SI({next:m=>{u.eu(),o.enqueueAndForget(()=>xI(s,f)),m.fromCache&&l.source==="server"?c.reject(new yt(Ne.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(m)},error:m=>c.reject(m)}),f=new wI(a,u,{includeMetadataChanges:!0,ua:!0});return vI(s,f)}(await F_(n),n.asyncQueue,e,t,i)),i.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function R5(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O3=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function N5(n,e,t){if(!t)throw new yt(Ne.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function Ohe(n,e,t,i){if(e===!0&&i===!0)throw new yt(Ne.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function U3(n){if(!kt.isDocumentKey(n))throw new yt(Ne.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function F3(n){if(kt.isDocumentKey(n))throw new yt(Ne.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function ob(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=function(i){return i.constructor?i.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":Wt()}function Os(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new yt(Ne.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=ob(n);throw new yt(Ne.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j3{constructor(e){var t,i;if(e.host===void 0){if(e.ssl!==void 0)throw new yt(Ne.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(t=e.ssl)===null||t===void 0||t;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new yt(Ne.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Ohe("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=R5((i=e.experimentalLongPollingOptions)!==null&&i!==void 0?i:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new yt(Ne.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new yt(Ne.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new yt(Ne.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(i,r){return i.timeoutSeconds===r.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class ab{constructor(e,t,i,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=i,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new j3({}),this._settingsFrozen=!1,this._terminateTask="notTerminated"}get app(){if(!this._app)throw new yt(Ne.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new yt(Ne.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new j3(e),e.credentials!==void 0&&(this._authCredentials=function(i){if(!i)return new $le;switch(i.type){case"firstParty":return new Jle(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new yt(Ne.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const i=O3.get(t);i&&(gt("ComponentProvider","Removing Datastore"),O3.delete(t),i.terminate())}(this),Promise.resolve()}}function Uhe(n,e,t,i={}){var r;const s=(n=Os(n,ab))._getSettings(),o=`${e}:${t}`;if(s.host!=="firestore.googleapis.com"&&s.host!==o&&pf("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),n._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),i.mockUserToken){let a,l;if(typeof i.mockUserToken=="string")a=i.mockUserToken,l=Ar.MOCK_USER;else{a=ase(i.mockUserToken,(r=n._app)===null||r===void 0?void 0:r.options.projectId);const c=i.mockUserToken.sub||i.mockUserToken.user_id;if(!c)throw new yt(Ne.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");l=new Ar(c)}n._authCredentials=new Xle(new Pz(a,l))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ol{constructor(e,t,i){this.converter=t,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new ol(this.firestore,e,this._query)}}class kr{constructor(e,t,i){this.converter=t,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ic(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new kr(this.firestore,e,this._key)}}class ic extends ol{constructor(e,t,i){super(e,t,Jw(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new kr(this.firestore,null,new kt(e))}withConverter(e){return new ic(this.firestore,e,this._path)}}function Bu(n,e,...t){if(n=nr(n),N5("collection","path",e),n instanceof ab){const i=Zn.fromString(e,...t);return F3(i),new ic(n,null,i)}{if(!(n instanceof kr||n instanceof ic))throw new yt(Ne.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(Zn.fromString(e,...t));return F3(i),new ic(n.firestore,null,i)}}function ao(n,e,...t){if(n=nr(n),arguments.length===1&&(e=Rz.newId()),N5("doc","path",e),n instanceof ab){const i=Zn.fromString(e,...t);return U3(i),new kr(n,null,new kt(i))}{if(!(n instanceof kr||n instanceof ic))throw new yt(Ne.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(Zn.fromString(e,...t));return U3(i),new kr(n.firestore,n instanceof ic?n.converter:null,new kt(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V3{constructor(e=Promise.resolve()){this.Iu=[],this.Eu=!1,this.du=[],this.Au=null,this.Ru=!1,this.Vu=!1,this.mu=[],this.r_=new p5(this,"async_queue_retry"),this.fu=()=>{const i=o1();i&&gt("AsyncQueue","Visibility state changed to "+i.visibilityState),this.r_.Jo()},this.gu=e;const t=o1();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.fu)}get isShuttingDown(){return this.Eu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.pu(),this.yu(e)}enterRestrictedMode(e){if(!this.Eu){this.Eu=!0,this.Vu=e||!1;const t=o1();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.fu)}}enqueue(e){if(this.pu(),this.Eu)return new Promise(()=>{});const t=new Ha;return this.yu(()=>this.Eu&&this.Vu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Iu.push(e),this.wu()))}async wu(){if(this.Iu.length!==0){try{await this.Iu[0](),this.Iu.shift(),this.r_.reset()}catch(e){if(!Of(e))throw e;gt("AsyncQueue","Operation failed with retryable error: "+e)}this.Iu.length>0&&this.r_.jo(()=>this.wu())}}yu(e){const t=this.gu.then(()=>(this.Ru=!0,e().catch(i=>{this.Au=i,this.Ru=!1;const r=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(i);throw el("INTERNAL UNHANDLED ERROR: ",r),i}).then(i=>(this.Ru=!1,i))));return this.gu=t,t}enqueueAfterDelay(e,t,i){this.pu(),this.mu.indexOf(e)>-1&&(t=0);const r=gI.createAndSchedule(this,e,t,i,s=>this.Su(s));return this.du.push(r),r}pu(){this.Au&&Wt()}verifyOperationInProgress(){}async bu(){let e;do e=this.gu,await e;while(e!==this.gu)}Du(e){for(const t of this.du)if(t.timerId===e)return!0;return!1}vu(e){return this.bu().then(()=>{this.du.sort((t,i)=>t.targetTimeMs-i.targetTimeMs);for(const t of this.du)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.bu()})}Cu(e){this.mu.push(e)}Su(e){const t=this.du.indexOf(e);this.du.splice(t,1)}}function B3(n){return function(t,i){if(typeof t!="object"||t===null)return!1;const r=t;for(const s of i)if(s in r&&typeof r[s]=="function")return!0;return!1}(n,["next","error","complete"])}class vc extends ab{constructor(e,t,i,r){super(e,t,i,r),this.type="firestore",this._queue=new V3,this._persistenceKey=r?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new V3(e),this._firestoreClient=void 0,await e}}}function xc(n,e){const t=typeof n=="object"?n:VB(),i=typeof n=="string"?n:"(default)",r=GM(t,"firestore").getImmediate({identifier:i});if(!r._initialized){const s=sse("firestore");s&&Uhe(r,...s)}return r}function lb(n){if(n._terminated)throw new yt(Ne.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||Fhe(n),n._firestoreClient}function Fhe(n){var e,t,i;const r=n._freezeSettings(),s=function(a,l,c,u){return new dce(a,l,c,u.host,u.ssl,u.experimentalForceLongPolling,u.experimentalAutoDetectLongPolling,R5(u.experimentalLongPollingOptions),u.useFetchStreams)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,r);n._componentsProvider||!((t=r.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((i=r.localCache)===null||i===void 0)&&i._onlineComponentProvider)&&(n._componentsProvider={_offline:r.localCache._offlineComponentProvider,_online:r.localCache._onlineComponentProvider}),n._firestoreClient=new Rhe(n._authCredentials,n._appCheckCredentials,n._queue,s,n._componentsProvider&&function(a){const l=a?._online.build();return{_offline:a?._offline.build(l),_online:l}}(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _f{constructor(e){this._byteString=e}static fromBase64String(e){try{return new _f(dr.fromBase64String(e))}catch(t){throw new yt(Ne.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new _f(dr.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cb{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new yt(Ne.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new lr(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ub{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TI{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new yt(Ne.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new yt(Ne.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return wn(this._lat,e._lat)||wn(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EI{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(i,r){if(i.length!==r.length)return!1;for(let s=0;s<i.length;++s)if(i[s]!==r[s])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jhe=/^__.*__$/;class Vhe{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return this.fieldMask!==null?new Nc(e,this.data,this.fieldMask,t,this.fieldTransforms):new oy(e,this.data,t,this.fieldTransforms)}}class L5{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return new Nc(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function D5(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Wt()}}class CI{constructor(e,t,i,r,s,o){this.settings=e,this.databaseId=t,this.serializer=i,this.ignoreUndefinedProperties=r,s===void 0&&this.Fu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Mu(){return this.settings.Mu}xu(e){return new CI(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}Ou(e){var t;const i=(t=this.path)===null||t===void 0?void 0:t.child(e),r=this.xu({path:i,Nu:!1});return r.Lu(e),r}Bu(e){var t;const i=(t=this.path)===null||t===void 0?void 0:t.child(e),r=this.xu({path:i,Nu:!1});return r.Fu(),r}ku(e){return this.xu({path:void 0,Nu:!0})}qu(e){return j_(e,this.settings.methodName,this.settings.Qu||!1,this.path,this.settings.Ku)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}Fu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Lu(this.path.get(e))}Lu(e){if(e.length===0)throw this.qu("Document fields must not be empty");if(D5(this.Mu)&&jhe.test(e))throw this.qu('Document fields cannot begin and end with "__"')}}class Bhe{constructor(e,t,i){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=i||ib(e)}$u(e,t,i,r=!1){return new CI({Mu:e,methodName:t,Ku:i,path:lr.emptyPath(),Nu:!1,Qu:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function hb(n){const e=n._freezeSettings(),t=ib(n._databaseId);return new Bhe(n._databaseId,!!e.ignoreUndefinedProperties,t)}function k5(n,e,t,i,r,s={}){const o=n.$u(s.merge||s.mergeFields?2:0,e,t,r);MI("Data must be an object, but it was:",o,i);const a=O5(i,o);let l,c;if(s.merge)l=new Ns(o.fieldMask),c=o.fieldTransforms;else if(s.mergeFields){const u=[];for(const f of s.mergeFields){const m=lC(e,f,t);if(!o.contains(m))throw new yt(Ne.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);F5(u,m)||u.push(m)}l=new Ns(u),c=o.fieldTransforms.filter(f=>l.covers(f.field))}else l=null,c=o.fieldTransforms;return new Vhe(new us(a),l,c)}class db extends ub{_toFieldTransform(e){if(e.Mu!==2)throw e.Mu===1?e.qu(`${this._methodName}() can only appear at the top level of your update data`):e.qu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof db}}class AI extends ub{_toFieldTransform(e){return new Uce(e.path,new Eg)}isEqual(e){return e instanceof AI}}function zhe(n,e,t,i){const r=n.$u(1,e,t);MI("Data must be an object, but it was:",r,i);const s=[],o=us.empty();Rc(i,(l,c)=>{const u=II(e,l,t);c=nr(c);const f=r.Bu(u);if(c instanceof db)s.push(u);else{const m=uy(c,f);m!=null&&(s.push(u),o.set(u,m))}});const a=new Ns(s);return new L5(o,a,r.fieldTransforms)}function Hhe(n,e,t,i,r,s){const o=n.$u(1,e,t),a=[lC(e,i,t)],l=[r];if(s.length%2!=0)throw new yt(Ne.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let m=0;m<s.length;m+=2)a.push(lC(e,s[m])),l.push(s[m+1]);const c=[],u=us.empty();for(let m=a.length-1;m>=0;--m)if(!F5(c,a[m])){const g=a[m];let x=l[m];x=nr(x);const b=o.Bu(g);if(x instanceof db)c.push(g);else{const w=uy(x,b);w!=null&&(c.push(g),u.set(g,w))}}const f=new Ns(c);return new L5(u,f,o.fieldTransforms)}function Ghe(n,e,t,i=!1){return uy(t,n.$u(i?4:3,e))}function uy(n,e){if(U5(n=nr(n)))return MI("Unsupported field value:",e,n),O5(n,e);if(n instanceof ub)return function(i,r){if(!D5(r.Mu))throw r.qu(`${i._methodName}() can only be used with update() and set()`);if(!r.path)throw r.qu(`${i._methodName}() is not currently supported inside arrays`);const s=i._toFieldTransform(r);s&&r.fieldTransforms.push(s)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.Nu&&e.Mu!==4)throw e.qu("Nested arrays are not supported");return function(i,r){const s=[];let o=0;for(const a of i){let l=uy(a,r.ku(o));l==null&&(l={nullValue:"NULL_VALUE"}),s.push(l),o++}return{arrayValue:{values:s}}}(n,e)}return function(i,r){if((i=nr(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return Dce(r.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const s=Vi.fromDate(i);return{timestampValue:D_(r.serializer,s)}}if(i instanceof Vi){const s=new Vi(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:D_(r.serializer,s)}}if(i instanceof TI)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof _f)return{bytesValue:r5(r.serializer,i._byteString)};if(i instanceof kr){const s=r.databaseId,o=i.firestore._databaseId;if(!o.isEqual(s))throw r.qu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:lI(i.firestore._databaseId||r.databaseId,i._key.path)}}if(i instanceof EI)return function(o,a){return{mapValue:{fields:{__type__:{stringValue:"__vector__"},value:{arrayValue:{values:o.toArray().map(l=>{if(typeof l!="number")throw a.qu("VectorValues must only contain numeric values.");return sI(a.serializer,l)})}}}}}}(i,r);throw r.qu(`Unsupported field value: ${ob(i)}`)}(n,e)}function O5(n,e){const t={};return Nz(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Rc(n,(i,r)=>{const s=uy(r,e.Ou(i));s!=null&&(t[i]=s)}),{mapValue:{fields:t}}}function U5(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof Vi||n instanceof TI||n instanceof _f||n instanceof kr||n instanceof ub||n instanceof EI)}function MI(n,e,t){if(!U5(t)||!function(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}(t)){const i=ob(t);throw i==="an object"?e.qu(n+" a custom object"):e.qu(n+" "+i)}}function lC(n,e,t){if((e=nr(e))instanceof cb)return e._internalPath;if(typeof e=="string")return II(n,e);throw j_("Field path arguments must be of type string or ",n,!1,void 0,t)}const Whe=new RegExp("[~\\*/\\[\\]]");function II(n,e,t){if(e.search(Whe)>=0)throw j_(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new cb(...e.split("."))._internalPath}catch{throw j_(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function j_(n,e,t,i,r){const s=i&&!i.isEmpty(),o=r!==void 0;let a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=` in field ${i}`),o&&(l+=` in document ${r}`),l+=")"),new yt(Ne.INVALID_ARGUMENT,a+n+l)}function F5(n,e){return n.some(t=>t.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class j5{constructor(e,t,i,r,s){this._firestore=e,this._userDataWriter=t,this._key=i,this._document=r,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new kr(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new qhe(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(fb("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class qhe extends j5{data(){return super.data()}}function fb(n,e){return typeof e=="string"?II(n,e):e instanceof cb?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function V5(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new yt(Ne.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class PI{}class RI extends PI{}function cC(n,e,...t){let i=[];e instanceof PI&&i.push(e),i=i.concat(t),function(s){const o=s.filter(l=>l instanceof NI).length,a=s.filter(l=>l instanceof pb).length;if(o>1||o>0&&a>0)throw new yt(Ne.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(i);for(const r of i)n=r._apply(n);return n}class pb extends RI{constructor(e,t,i){super(),this._field=e,this._op=t,this._value=i,this.type="where"}static _create(e,t,i){return new pb(e,t,i)}_apply(e){const t=this._parse(e);return z5(e._query,t),new ol(e.firestore,e.converter,ZE(e._query,t))}_parse(e){const t=hb(e.firestore);return function(s,o,a,l,c,u,f){let m;if(c.isKeyField()){if(u==="array-contains"||u==="array-contains-any")throw new yt(Ne.INVALID_ARGUMENT,`Invalid Query. You can't perform '${u}' queries on documentId().`);if(u==="in"||u==="not-in"){G3(f,u);const g=[];for(const x of f)g.push(H3(l,s,x));m={arrayValue:{values:g}}}else m=H3(l,s,f)}else u!=="in"&&u!=="not-in"&&u!=="array-contains-any"||G3(f,u),m=Ghe(a,o,f,u==="in"||u==="not-in");return Fi.create(c,u,m)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function z3(n,e,t){const i=e,r=fb("where",n);return pb._create(r,i,t)}class NI extends PI{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new NI(e,t)}_parse(e){const t=this._queryConstraints.map(i=>i._parse(e)).filter(i=>i.getFilters().length>0);return t.length===1?t[0]:No.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:(function(r,s){let o=r;const a=s.getFlattenedFilters();for(const l of a)z5(o,l),o=ZE(o,l)}(e._query,t),new ol(e.firestore,e.converter,ZE(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class LI extends RI{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new LI(e,t)}_apply(e){const t=function(r,s,o){if(r.startAt!==null)throw new yt(Ne.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(r.endAt!==null)throw new yt(Ne.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Tg(s,o)}(e._query,this._field,this._direction);return new ol(e.firestore,e.converter,function(r,s){const o=r.explicitOrderBy.concat([s]);return new Uf(r.path,r.collectionGroup,o,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}function B5(n,e="asc"){const t=e,i=fb("orderBy",n);return LI._create(i,t)}class DI extends RI{constructor(e,t,i){super(),this.type=e,this._limit=t,this._limitType=i}static _create(e,t,i){return new DI(e,t,i)}_apply(e){return new ol(e.firestore,e.converter,N_(e._query,this._limit,this._limitType))}}function $he(n){return DI._create("limit",n,"F")}function H3(n,e,t){if(typeof(t=nr(t))=="string"){if(t==="")throw new yt(Ne.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Bz(e)&&t.indexOf("/")!==-1)throw new yt(Ne.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const i=e.path.child(Zn.fromString(t));if(!kt.isDocumentKey(i))throw new yt(Ne.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return l3(n,new kt(i))}if(t instanceof kr)return l3(n,t._key);throw new yt(Ne.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${ob(t)}.`)}function G3(n,e){if(!Array.isArray(n)||n.length===0)throw new yt(Ne.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function z5(n,e){const t=function(r,s){for(const o of r)for(const a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null}(n.filters,function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new yt(Ne.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new yt(Ne.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class Xhe{convertValue(e,t="none"){switch(gc(e)){case 0:return null;case 1:return e.booleanValue;case 2:return Ti(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(mc(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw Wt()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const i={};return Rc(e,(r,s)=>{i[r]=this.convertValue(s,t)}),i}convertVectorValue(e){var t,i,r;const s=(r=(i=(t=e.fields)===null||t===void 0?void 0:t.value.arrayValue)===null||i===void 0?void 0:i.values)===null||r===void 0?void 0:r.map(o=>Ti(o.doubleValue));return new EI(s)}convertGeoPoint(e){return new TI(Ti(e.latitude),Ti(e.longitude))}convertArray(e,t){return(e.values||[]).map(i=>this.convertValue(i,t))}convertServerTimestamp(e,t){switch(t){case"previous":const i=Kw(e);return i==null?null:this.convertValue(i,t);case"estimate":return this.convertTimestamp(wg(e));default:return null}}convertTimestamp(e){const t=pc(e);return new Vi(t.seconds,t.nanos)}convertDocumentKey(e,t){const i=Zn.fromString(e);jn(u5(i));const r=new bg(i.get(1),i.get(3)),s=new kt(i.popFirst(5));return r.isEqual(t)||el(`Document ${s} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function H5(n,e,t){let i;return i=n?n.toFirestore(e):e,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zp{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class G5 extends j5{constructor(e,t,i,r,s,o){super(e,t,i,r,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Y0(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const i=this._document.data.field(fb("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,t.serverTimestamps)}}}class Y0 extends G5{data(e={}){return super.data(e)}}class W5{constructor(e,t,i,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new Zp(r.hasPendingWrites,r.fromCache),this.query=i}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(i=>{e.call(t,new Y0(this._firestore,this._userDataWriter,i.key,i,new Zp(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new yt(Ne.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,s){if(r._snapshot.oldDocs.isEmpty()){let o=0;return r._snapshot.docChanges.map(a=>{const l=new Y0(r._firestore,r._userDataWriter,a.doc.key,a.doc,new Zp(r._snapshot.mutatedKeys.has(a.doc.key),r._snapshot.fromCache),r.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}})}{let o=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{const l=new Y0(r._firestore,r._userDataWriter,a.doc.key,a.doc,new Zp(r._snapshot.mutatedKeys.has(a.doc.key),r._snapshot.fromCache),r.query.converter);let c=-1,u=-1;return a.type!==0&&(c=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),u=o.indexOf(a.doc.key)),{type:Yhe(a.type),doc:l,oldIndex:c,newIndex:u}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function Yhe(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Wt()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jf(n){n=Os(n,kr);const e=Os(n.firestore,vc);return Dhe(lb(e),n._key).then(t=>X5(e,n,t))}class kI extends Xhe{constructor(e){super(),this.firestore=e}convertBytes(e){return new _f(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new kr(this.firestore,null,t)}}function q5(n){n=Os(n,ol);const e=Os(n.firestore,vc),t=lb(e),i=new kI(e);return V5(n._query),khe(t,n._query).then(r=>new W5(e,i,n,r))}function mb(n,e,t){n=Os(n,kr);const i=Os(n.firestore,vc),r=H5(n.converter,e);return OI(i,[k5(hb(i),"setDoc",n._key,r,n.converter!==null,t).toMutation(n._key,Co.none())])}function Khe(n,e,t,...i){n=Os(n,kr);const r=Os(n.firestore,vc),s=hb(r);let o;return o=typeof(e=nr(e))=="string"||e instanceof cb?Hhe(s,"updateDoc",n._key,e,t,i):zhe(s,"updateDoc",n._key,e),OI(r,[o.toMutation(n._key,Co.exists(!0))])}function $5(n,e){const t=Os(n.firestore,vc),i=ao(n),r=H5(n.converter,e);return OI(t,[k5(hb(n.firestore),"addDoc",i._key,r,n.converter!==null,{}).toMutation(i._key,Co.exists(!1))]).then(()=>i)}function uC(n,...e){var t,i,r;n=nr(n);let s={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||B3(e[o])||(s=e[o],o++);const a={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(B3(e[o])){const f=e[o];e[o]=(t=f.next)===null||t===void 0?void 0:t.bind(f),e[o+1]=(i=f.error)===null||i===void 0?void 0:i.bind(f),e[o+2]=(r=f.complete)===null||r===void 0?void 0:r.bind(f)}let l,c,u;if(n instanceof kr)c=Os(n.firestore,vc),u=Jw(n._key.path),l={next:f=>{e[o]&&e[o](X5(c,n,f))},error:e[o+1],complete:e[o+2]};else{const f=Os(n,ol);c=Os(f.firestore,vc),u=f._query;const m=new kI(c);l={next:g=>{e[o]&&e[o](new W5(c,m,f,g))},error:e[o+1],complete:e[o+2]},V5(n._query)}return function(m,g,x,b){const w=new SI(b),v=new wI(g,w,x);return m.asyncQueue.enqueueAndForget(async()=>vI(await F_(m),v)),()=>{w.eu(),m.asyncQueue.enqueueAndForget(async()=>xI(await F_(m),v))}}(lb(c),u,a,l)}function OI(n,e){return function(i,r){const s=new Ha;return i.asyncQueue.enqueueAndForget(async()=>bhe(await Lhe(i),r,s)),s.promise}(lb(n),e)}function X5(n,e,t){const i=t.docs.get(e._key),r=new kI(n);return new G5(n,r,e._key,i,new Zp(t.hasPendingWrites,t.fromCache),e.converter)}function Y5(){return new AI("serverTimestamp")}(function(e,t=!0){(function(r){Df=r})(Nf),ff(new eh("firestore",(i,{instanceIdentifier:r,options:s})=>{const o=i.getProvider("app").getImmediate(),a=new vc(new Yle(i.getProvider("auth-internal")),new Zle(i.getProvider("app-check-internal")),function(c,u){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new yt(Ne.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new bg(c.options.projectId,u)}(o,r),o);return s=Object.assign({useFetchStreams:t},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),nc(n3,"4.7.5",e),nc(n3,"4.7.5","esm2017")})();const Jhe={apiKey:"AIzaSyDPpcxhOuSbk_dknSoUgt34VSYfq2cLg2g",authDomain:"karapatanko-e686b.firebaseapp.com",projectId:"karapatanko-e686b",storageBucket:"karapatanko-e686b.appspot.com",messagingSenderId:"253855212071",appId:"1:253855212071:web:10e25578cb9140b3136402"},K5=jB(Jhe),UI=dc(K5),Xo=xc(K5),Qhe=async n=>{const e=dc(),t=xc();ry(e,async i=>{if(i)try{const r=ao(t,"users",i.uid),s=await jf(r);if(s.exists()){const a=s.data().role;n(a)}else console.error("No user document found in Firestore."),n(null)}catch(r){console.error("Error fetching user role:",r),n(null)}else n(null)})},Zhe=()=>{const n=qt(),[e,t]=B.useState(""),[i,r]=B.useState(""),[s,o]=B.useState(""),[a,l]=B.useState(!1),[c,u]=B.useState(!1),f=async g=>{if(g.preventDefault(),!e||!i){o("Both fields are required.");return}l(!0);try{const b=(await Lae(UI,e,i)).user;console.log("User logged in:",b),Qhe(w=>{w==="admin"?n("/admin_main"):w==="user"?n("/main"):o("Unknown role. Please contact support.")})}catch(x){console.error("Error logging in:",x.message),o(x.message.includes("wrong-password")?"Incorrect password. Please try again.":"Failed to login. Please check your credentials.")}finally{l(!1)}},m=()=>{u(!c)};return d.jsx("div",{className:"login-container",children:a?d.jsx(CB,{}):d.jsx(Cn.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.5},children:d.jsx("div",{id:"wrapper",children:d.jsxs("div",{id:"left",children:[d.jsxs("div",{id:"signin",children:[d.jsx("div",{className:"logo",children:d.jsx("img",{src:"/assets/icon/logoLandscape.png",alt:"Karapatan ko"})}),d.jsxs("form",{onSubmit:f,className:"space-y-4",children:[d.jsxs("div",{children:[d.jsx("label",{htmlFor:"email",className:"block text-sm font-medium",children:"Email"}),d.jsx("input",{type:"email",id:"email",className:"text-input border-gray-300 focus:ring-slate-500 focus:border-slate-500 block w-full sm:text-sm border rounded-md",value:e,onChange:g=>t(g.target.value),required:!0})]}),d.jsxs("div",{children:[d.jsx("label",{htmlFor:"password",className:"block text-sm font-medium",children:"Password"}),d.jsxs("div",{className:"relative",children:[d.jsx("input",{type:c?"text":"password",id:"password",className:"text-input border-gray-300 focus:ring-indigo-500 focus:border-indigo-500 block w-full sm:text-sm border rounded-md pr-10",value:i,onChange:g=>r(g.target.value),required:!0}),c?d.jsx(PB,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-500 cursor-pointer",onClick:m}):d.jsx(IB,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-500 cursor-pointer",onClick:m})]}),d.jsx("a",{onClick:()=>n("/forgotPass"),className:"text-sm cursor-pointer text-slate-600 hover:text-slate-500 mt-2 block",children:"Forgot my password"})]}),s&&d.jsx("p",{className:"text-red-500 text-sm",children:s}),d.jsx("button",{type:"submit",className:"primary-btn w-full py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-slate-600 hover:bg-slate-700 focus:outline-none",children:"Login"})]}),d.jsx("button",{onClick:()=>n("/signup"),className:"secondary-btn",children:"Don't have an account? SignUp"})]}),d.jsxs("footer",{id:"main-footer",className:"text-sm text-gray-500 mt-4",children:[d.jsx("p",{children:"Copyright  2024, KarapatanKo All Rights Reserved"}),d.jsxs("div",{children:[d.jsx("a",{href:"#",className:"hover:underline",children:"Terms of Use"})," ","|"," ",d.jsx("a",{href:"#",className:"hover:underline",children:"Privacy Policy"})]})]})]})})})})},W3=zt(Zhe),ede=()=>{const n=qt(),[e,t]=B.useState(""),[i,r]=B.useState(""),[s,o]=B.useState(""),[a,l]=B.useState(""),[c,u]=B.useState(""),[f,m]=B.useState(""),[g]=B.useState("user"),[x,b]=B.useState(""),[w,v]=B.useState(!1),[S,E]=B.useState(!1),C=async L=>{if(L.preventDefault(),!e||!s||!a||!c||!f){b("All fields are required.");return}if(parseInt(a,10)<18||parseInt(a,10)>80){b("You must be at least 18 years old to sign up.");return}if(f.length<6){b("Password must be at least 6 characters.");return}b(""),v(!0);try{const I=(await Nae(UI,c,f)).user;await mb(ao(Xo,"users",I.uid),{firstName:e,middleName:i,lastName:s,age:parseInt(a,10),email:c,role:g,createdAt:new Date}),console.log("User registered and data saved to Firestore!"),n("/main")}catch(N){console.error("Error signing up:",N.message),b(N.message.includes("email-already-in-use")?"This email is already registered. Log in instead.":"Failed to sign up. Please try again.")}finally{v(!1)}},V=()=>{E(!S)};return d.jsx("div",{className:"login-container",children:w?d.jsx(CB,{}):d.jsx(Cn.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.5},children:d.jsx("div",{id:"register",children:d.jsx("div",{id:"wrapper",children:d.jsxs("div",{id:"left",children:[d.jsxs("div",{id:"signin",children:[d.jsxs("div",{className:"logo",children:[d.jsx("h1",{className:`${q.paragraphHeadText}`,children:"Create an account"}),d.jsx("p",{className:`${q.paragraphSubText} text-center`,children:"Connect with legal professionals"})]}),d.jsxs("form",{onSubmit:C,children:[d.jsxs("div",{children:[d.jsx("label",{htmlFor:"firstName",children:"First Name"}),d.jsx("input",{type:"text",id:"firstName",className:"text-input",value:e,onChange:L=>t(L.target.value),required:!0})]}),d.jsxs("div",{children:[d.jsx("label",{htmlFor:"middleName",children:"Middle Name"}),d.jsx("input",{type:"text",id:"middleName",className:"text-input",value:i,onChange:L=>r(L.target.value)})]}),d.jsxs("div",{children:[d.jsx("label",{htmlFor:"lastName",children:"Last Name"}),d.jsx("input",{type:"text",id:"lastName",className:"text-input",value:s,onChange:L=>o(L.target.value),required:!0})]}),d.jsxs("div",{children:[d.jsx("label",{htmlFor:"age",children:"Age"}),d.jsx("input",{type:"number",id:"age",className:"text-input",value:a,onChange:L=>l(L.target.value),required:!0})]}),d.jsxs("div",{children:[d.jsx("label",{htmlFor:"email",children:"Email"}),d.jsx("input",{type:"email",id:"email",className:"text-input",value:c,onChange:L=>u(L.target.value),required:!0})]}),d.jsxs("div",{children:[d.jsx("label",{htmlFor:"password",children:"Password"}),d.jsxs("div",{className:"relative",children:[d.jsx("input",{type:S?"text":"password",id:"password",className:"text-input",value:f,onChange:L=>m(L.target.value),required:!0}),S?d.jsx(PB,{className:"absolute right-3 top-1/3 transform -translate-y-1/2 text-gray-500 cursor-pointer",onClick:V}):d.jsx(IB,{className:"absolute right-3 top-1/3 transform -translate-y-1/2 text-gray-500 cursor-pointer",onClick:V})]})]}),d.jsxs("div",{style:{display:"none"},children:[d.jsx("label",{htmlFor:"role",children:"Role"}),d.jsx("input",{type:"text",id:"role",className:"text-input",value:g,disabled:!0})]}),x&&d.jsx("p",{className:"error-message text-red-500",children:x}),d.jsx("button",{type:"submit",className:"primary-btn",children:"Sign Up"})]}),d.jsx("button",{onClick:()=>n("/login"),className:"secondary-btn",children:"Already have an account? Login"})]}),d.jsxs("footer",{id:"main-footer",children:[d.jsx("p",{children:"Copyright  2024, KarapatanKo All Rights Reserved"}),d.jsxs("div",{children:[d.jsx("a",{href:"#",children:"Terms of Use"})," | ",d.jsx("a",{href:"#",children:"Privacy Policy"})]})]})]})})})})})},tde=zt(ede),nde=()=>{const n=qt(),[e,t]=B.useState(""),[i,r]=B.useState(""),s=async o=>{o.preventDefault();try{await Rae(UI,e),alert("Check your email for a password reset link."),n("/signin")}catch(a){r(a.message),alert(`Error: ${a.message}`)}};return d.jsx(Cn.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.5},children:d.jsx("div",{id:"wrapper",children:d.jsx("div",{id:"left",children:d.jsxs("div",{id:"signin",children:[d.jsxs("div",{className:"logo",children:[d.jsx("h1",{className:`${q.paragraphHeadText}`,children:"Forgot Your Password?"}),d.jsx("p",{className:`${q.paragraphSubText} text-center`,children:"Send your gmail to change password"})]}),d.jsxs("form",{onSubmit:s,className:"space-y-4",children:[d.jsxs("div",{children:[d.jsx("label",{htmlFor:"email",className:"block text-sm font-medium",children:"Email"}),d.jsx("input",{type:"email",id:"email",className:"text-input border-gray-300 focus:ring-slate-500 focus:border-slate-500 block w-full sm:text-sm border rounded-md",value:e,onChange:o=>t(o.target.value),required:!0})]}),i&&d.jsx("p",{className:"text-sm text-red-500 mt-2",children:i}),d.jsx("button",{type:"submit",className:"primary-btn w-full py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-slate-600 hover:bg-slate-700 focus:outline-none",children:"Submit"})]}),d.jsxs("div",{className:"button-grid",children:[d.jsx("button",{onClick:()=>n("/signup"),className:"pass",children:"Sign Up  |"}),d.jsx("button",{onClick:()=>n("/login"),className:"pass",children:"Login"})]})]})})})})},ide=zt(nde);function rde(n){return ph({tag:"svg",attr:{viewBox:"0 0 16 16",fill:"currentColor"},child:[{tag:"path",attr:{d:"M1 12v-1h9v1H1zm0-5h14v1H1V7zm11-4v1H1V3h11z"},child:[]}]})(n)}function J5(n){return ph({tag:"svg",attr:{viewBox:"0 0 16 16",fill:"currentColor"},child:[{tag:"path",attr:{fillRule:"evenodd",clipRule:"evenodd",d:"M11.02 3.77v1.56l1-.99V2.5l-.5-.5h-9l-.5.5v.486L2 3v10.29l.36.46 5 1.72L8 15v-1h3.52l.5-.5v-1.81l-1-1V13H8V4.71l-.33-.46L4.036 3h6.984v.77zM7 14.28l-4-1.34V3.72l4 1.34v9.22zm6.52-5.8H8.55v-1h4.93l-1.6-1.6.71-.7 2.47 2.46v.71l-2.49 2.48-.7-.7 1.65-1.65z"},child:[]}]})(n)}function sde(n){return ph({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"18",y1:"6",x2:"6",y2:"18"},child:[]},{tag:"line",attr:{x1:"6",y1:"6",x2:"18",y2:"18"},child:[]}]})(n)}const Q5=[{topic:"ARTICLE I National Territory",href:"/articleOne"},{topic:"ARTICLE II Declaration of Principles and State Policies",href:"/articleTwo"},{topic:"ARTICLE III Bill of Rights",href:"/articleThree"},{topic:"ARTICLE IV Citizenship",href:"/articleFour"},{topic:"ARTICLE V Suffrage",href:"/articleFive"},{topic:"ARTICLE VI Legislative Department",href:"/articleSix"},{topic:"ARTICLE VII Executive Department",href:"/articleSeven"},{topic:"ARTICLE VIII Judicial Department",href:"/articleEight"},{topic:"ARTICLE IX Constitutional Commissions",href:"/articleNine"},{topic:"ARTICLE X Local Government",href:"/articleTen"},{topic:"ARTICLE XI Accountability of Public Officers",href:"/articleEleven"},{topic:"ARTICLE XII National Economy and Patrimony",href:"/articleTwelve"},{topic:"ARTICLE XIII Social Justice and Human Rights",href:"/articleThirteen"},{topic:"ARTICLE XIV Education, Science and Technology, Arts, Culture and Sports",href:"/articleFourteen"},{topic:"ARTICLE XV The Family",href:"/articleFifteen"},{topic:"ARTICLE XVI General Provisions",href:"/articleSixteen"},{topic:"ARTICLE XVII Amendments or Revisions",href:"/articleSeventeen"},{topic:"ARTICLE XVIII Transitory Provisions",href:"/articleEighteen"}],Z5=[{topic:"Chapter I: General Provisions",href:"/chapterOne"},{topic:"Chapter II: Definition of Terms",href:"/chapterTwo"},{topic:"Chapter III: Rights to Ancestral Domains",href:"/chapterThree"},{topic:"Chapter IV: Right to Self-Governance and Empowerment",href:"/chapterFour"},{topic:"Chapter V: Social Justice and Human Rights",href:"/chapterFive"},{topic:"Chapter VI: Cultural Integrity",href:"/chapterSix"},{topic:"Chapter VII: National Commission on Indigenous Peoples (NCIP)",href:"/chapterSeven"},{topic:"Chapter VIII: Delineation and Recognition of Ancestral Domains",href:"/chapterEight"},{topic:"Chapter IX: Jurisdiction and Procedures for Enforcement of Rights",href:"/chapterNine"},{topic:"Chapter X: Ancestral Domains Fund",href:"/chapterTen"},{topic:"Chapter XI: Penalties",href:"/chapterEleven"},{topic:"Chapter XII: Merger of the Office for Northern Cultural Communities (ONCC) and the Office for Southern Cultural Communities (OSCC)",href:"/chapterTwelve"},{topic:"Chapter XIII: Final Provisions",href:"/chapterThirteen"}],ode=()=>{const[n,e]=B.useState(!1),[t,i]=B.useState(""),r=Lo(),s=r.pathname.startsWith("/article")?Q5:r.pathname.startsWith("/chapter")?Z5:[],o=a=>{i(a),e(!1)};return d.jsxs("div",{className:"relative",children:[d.jsx("button",{id:"navbar-toggle",onClick:()=>e(a=>!a),className:"fixed top-4 left-4 z-30 bg-primary dark:bg-gray-800 p-2 rounded","aria-label":n?"Close Navigation":"Open Navigation",children:n?d.jsx(sde,{className:"text-white w-6 h-6"}):d.jsx(rde,{className:"text-white w-6 h-6"})}),n&&d.jsx("div",{className:"fixed inset-0 bg-black/50 z-10",onClick:()=>e(!1),"aria-hidden":"true"}),d.jsx("div",{id:"navbar",className:`fixed top-0 left-0 h-full w-64 bg-primary dark:bg-gray-800 transform transition-transform duration-300 ease-in-out z-20 ${n?"translate-x-0":"-translate-x-full"}`,children:d.jsxs("div",{className:"flex flex-col h-full",children:[d.jsx("div",{className:"p-5 border-b border-secondary dark:border-gray-700 flex items-center",children:d.jsxs(Ds,{to:"/main",className:"flex items-center gap-2",onClick:()=>o(""),children:[d.jsx("div",{className:"w-8 h-8 object-contain"}),d.jsx("p",{className:"text-white dark:text-gray-200 text-lg font-bold highlight-border",children:"Karapatan Ko"})]})}),d.jsx("nav",{className:"flex-1 py-4 overflow-y-auto",children:d.jsx("ul",{className:"px-4 space-y-2",children:s.length>0?s.map(a=>d.jsx("li",{className:"group text-white",children:d.jsx(Ds,{to:a.href,className:`block p-3 rounded-lg text-lg transition-colors duration-200 ${t===a.topic?"bg-secondary/20 dark:bg-gray-700/30 text-white":"text-secondary dark:text-gray-300"}`,onClick:()=>o(a.topic),children:a.topic})},a.href)):d.jsxs(Ds,{to:"/",className:"text-center text-secondary dark:text-gray-400 bg-transparent border-0 p-0 cursor-pointer flex items-center gap-2",children:[d.jsx(J5,{className:"text-secondary dark:text-gray-400 w-5 h-5"}),"SIGN OUT"]})})})]})})]})},ade="/assets/lawbook.png",lde="/assets/lawyerIcon.png",cde="/assets/icon/helenaIcon.png",ude="/assets/helena.png",hde="/assets/match.png",dde="/assets/profile.png",hC="/assets/profile1.png",fde="/assets/profile2.png",pde="/assets/testimonial1.png",mde="/assets/icon/bookIcon.png",gde=[{title:"Law books",subtitle:"Simply highlight any word in our law books to instantly fetch its definition.",icon:ade,iconBg:"#383E56",color:"blue-text-gradient",points:[{text:"The Constitution Of The Republic Of The Philippines",id:"Constitution_ID",li:"/constitution"},{text:"Indigenous Peoples Rights Act",id:"RA_8371_ID",li:"/RA_8371"}],image:mde,span:"More law books to come"},{title:"Legal Matching",subtitle:"Connecting You with the Right Expertise, Every Time.",icon:lde,iconBg:"#383E56",color:"green-text-gradient",btn:"/lawyer-status",image:hde},{title:"Helena",subtitle:"Your Smart Guide for Legal Books",icon:cde,iconBg:"#383E56",color:"pink-text-gradient",btn:"/ai",image:ude}],yde=[{testimonial:"The website is well designed and user-friendly, with features like AI chat and definitions for any highlighted text. It is clear how to use it from the first time, and I didn't face any complications.",name:"Jamil Al Amin",designation:"Student",company:"University of the Cordilleras",image:pde},{testimonial:"The website has a clean and professional look, and suitable for legal resources. However, some areas could benefit from improved visual appeal, such as personalized dashboard and inclusion of search bar.",name:"Lina An-an",designation:"Student",company:"University of the Cordilleras",image:fde},{testimonial:"It will help many people, especially those who are unaware of their rights. I love the Legal Matching, as it connects us with professionals. The convenience of booking appointments directly on the site is a great addition.",name:"Palmer Bugtong",designation:"Lawyer",company:"Magalgalit Law Office",image:hC}],Nr=[{image:hC,name:"Palmer Fagyan Bugtong",nickname:"Atty. Palmer",title:"Criminal Law",currentSP:"Face to Face",currentPoints:"5 years lawyer",talent:"Negotiation, Persuasion",tagline:"The Defender of the Defenseless",address:"Liaison Officer at Magalgalit Law Office",btn:"/appointmentLawyer1"},{image:dde,name:"Noel Magalgalit",nickname:"Atty. Magalgalit",title:"Civil Law",currentSP:"Face to Face",currentPoints:"15 years lawyer",talent:"Public Speaking, Negotiation",tagline:"The Defender of the Defenseless",address:"Liaison Officer at Magalgalit Law Office",btn:"/appointmentLawyer2"},{image:hC,name:"Jess B. Evasco",nickname:"Atty. Evasco",title:"Criminal Law",currentSP:"Face to Face",currentPoints:"5 years lawyer",talent:"Persuasion, Public Speaking",tagline:"The Fast Talker and Thinker",address:"Liaison Officer at Magalgalit Law Office",btn:"/appointmentLawyer3"}];var gb={},e6={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/(function(n){(function(){var e={}.hasOwnProperty;function t(){for(var s="",o=0;o<arguments.length;o++){var a=arguments[o];a&&(s=r(s,i(a)))}return s}function i(s){if(typeof s=="string"||typeof s=="number")return s;if(typeof s!="object")return"";if(Array.isArray(s))return t.apply(null,s);if(s.toString!==Object.prototype.toString&&!s.toString.toString().includes("[native code]"))return s.toString();var o="";for(var a in s)e.call(s,a)&&s[a]&&(o=r(o,a));return o}function r(s,o){return o?s?s+" "+o:s+o:s}n.exports?(t.default=t,n.exports=t):window.classNames=t})()})(e6);var t6=e6.exports;gb.__esModule=!0;gb.default=void 0;var vde=FI(B),Tl=FI(uM),xde=FI(t6);function FI(n){return n&&n.__esModule?n:{default:n}}const n6=({animate:n=!0,className:e="",layout:t="2-columns",lineColor:i="#FFF",children:r})=>(typeof window=="object"&&document.documentElement.style.setProperty("--line-color",i),vde.default.createElement("div",{className:(0,xde.default)(e,"vertical-timeline",{"vertical-timeline--animate":n,"vertical-timeline--two-columns":t==="2-columns","vertical-timeline--one-column-left":t==="1-column"||t==="1-column-left","vertical-timeline--one-column-right":t==="1-column-right"})},r));n6.propTypes={children:Tl.default.oneOfType([Tl.default.arrayOf(Tl.default.node),Tl.default.node]).isRequired,className:Tl.default.string,animate:Tl.default.bool,layout:Tl.default.oneOf(["1-column-left","1-column","2-columns","1-column-right"]),lineColor:Tl.default.string};var _de=n6;gb.default=_de;var yb={};function dC(){return dC=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},dC.apply(this,arguments)}function wde(n,e){n.prototype=Object.create(e.prototype),n.prototype.constructor=n,fC(n,e)}function fC(n,e){return fC=Object.setPrototypeOf||function(i,r){return i.__proto__=r,i},fC(n,e)}function bde(n,e){if(n==null)return{};var t={},i=Object.keys(n),r,s;for(s=0;s<i.length;s++)r=i[s],!(e.indexOf(r)>=0)&&(t[r]=n[r]);return t}var pC=new Map,g0=new WeakMap,q3=0,i6=void 0;function Sde(n){i6=n}function Tde(n){return n?(g0.has(n)||(q3+=1,g0.set(n,q3.toString())),g0.get(n)):"0"}function Ede(n){return Object.keys(n).sort().filter(function(e){return n[e]!==void 0}).map(function(e){return e+"_"+(e==="root"?Tde(n.root):n[e])}).toString()}function Cde(n){var e=Ede(n),t=pC.get(e);if(!t){var i=new Map,r,s=new IntersectionObserver(function(o){o.forEach(function(a){var l,c=a.isIntersecting&&r.some(function(u){return a.intersectionRatio>=u});n.trackVisibility&&typeof a.isVisible>"u"&&(a.isVisible=c),(l=i.get(a.target))==null||l.forEach(function(u){u(c,a)})})},n);r=s.thresholds||(Array.isArray(n.threshold)?n.threshold:[n.threshold||0]),t={id:e,observer:s,elements:i},pC.set(e,t)}return t}function jI(n,e,t,i){if(t===void 0&&(t={}),i===void 0&&(i=i6),typeof window.IntersectionObserver>"u"&&i!==void 0){var r=n.getBoundingClientRect();return e(i,{isIntersecting:i,target:n,intersectionRatio:typeof t.threshold=="number"?t.threshold:0,time:0,boundingClientRect:r,intersectionRect:r,rootBounds:r}),function(){}}var s=Cde(t),o=s.id,a=s.observer,l=s.elements,c=l.get(n)||[];return l.has(n)||l.set(n,c),c.push(e),a.observe(n),function(){c.splice(c.indexOf(e),1),c.length===0&&(l.delete(n),a.unobserve(n)),l.size===0&&(a.disconnect(),pC.delete(o))}}var Ade=["children","as","triggerOnce","threshold","root","rootMargin","onChange","skip","trackVisibility","delay","initialInView","fallbackInView"];function $3(n){return typeof n.children!="function"}var V_=function(n){wde(e,n);function e(i){var r;return r=n.call(this,i)||this,r.node=null,r._unobserveCb=null,r.handleNode=function(s){r.node&&(r.unobserve(),!s&&!r.props.triggerOnce&&!r.props.skip&&r.setState({inView:!!r.props.initialInView,entry:void 0})),r.node=s||null,r.observeNode()},r.handleChange=function(s,o){s&&r.props.triggerOnce&&r.unobserve(),$3(r.props)||r.setState({inView:s,entry:o}),r.props.onChange&&r.props.onChange(s,o)},r.state={inView:!!i.initialInView,entry:void 0},r}var t=e.prototype;return t.componentDidUpdate=function(r){(r.rootMargin!==this.props.rootMargin||r.root!==this.props.root||r.threshold!==this.props.threshold||r.skip!==this.props.skip||r.trackVisibility!==this.props.trackVisibility||r.delay!==this.props.delay)&&(this.unobserve(),this.observeNode())},t.componentWillUnmount=function(){this.unobserve(),this.node=null},t.observeNode=function(){if(!(!this.node||this.props.skip)){var r=this.props,s=r.threshold,o=r.root,a=r.rootMargin,l=r.trackVisibility,c=r.delay,u=r.fallbackInView;this._unobserveCb=jI(this.node,this.handleChange,{threshold:s,root:o,rootMargin:a,trackVisibility:l,delay:c},u)}},t.unobserve=function(){this._unobserveCb&&(this._unobserveCb(),this._unobserveCb=null)},t.render=function(){if(!$3(this.props)){var r=this.state,s=r.inView,o=r.entry;return this.props.children({inView:s,entry:o,ref:this.handleNode})}var a=this.props,l=a.children,c=a.as,u=bde(a,Ade);return B.createElement(c||"div",dC({ref:this.handleNode},u),l)},e}(B.Component);V_.displayName="InView";V_.defaultProps={threshold:0,triggerOnce:!1,initialInView:!1};function Mde(n){var e=n===void 0?{}:n,t=e.threshold,i=e.delay,r=e.trackVisibility,s=e.rootMargin,o=e.root,a=e.triggerOnce,l=e.skip,c=e.initialInView,u=e.fallbackInView,f=B.useRef(),m=B.useState({inView:!!c}),g=m[0],x=m[1],b=B.useCallback(function(v){f.current!==void 0&&(f.current(),f.current=void 0),!l&&v&&(f.current=jI(v,function(S,E){x({inView:S,entry:E}),E.isIntersecting&&a&&f.current&&(f.current(),f.current=void 0)},{root:o,rootMargin:s,threshold:t,trackVisibility:r,delay:i},u))},[Array.isArray(t)?t.toString():t,o,s,a,l,r,u,i]);B.useEffect(function(){!f.current&&g.entry&&!a&&!l&&x({inView:!!c})});var w=[b,g.inView,g.entry];return w.ref=w[0],w.inView=w[1],w.entry=w[2],w}const Ide=Object.freeze(Object.defineProperty({__proto__:null,InView:V_,default:V_,defaultFallbackInView:Sde,observe:jI,useInView:Mde},Symbol.toStringTag,{value:"Module"})),Pde=Z6(Ide);yb.__esModule=!0;yb.default=void 0;var El=VI(B),ti=VI(uM),y0=VI(t6),Rde=Pde;function VI(n){return n&&n.__esModule?n:{default:n}}const r6=({children:n="",className:e="",contentArrowStyle:t=null,contentStyle:i=null,date:r="",dateClassName:s="",icon:o=null,iconClassName:a="",iconOnClick:l=null,onTimelineElementClick:c=null,iconStyle:u=null,id:f="",position:m="",style:g=null,textClassName:x="",intersectionObserverProps:b={rootMargin:"0px 0px -40px 0px",triggerOnce:!0},visible:w=!1})=>El.default.createElement(Rde.InView,b,({inView:v,ref:S})=>El.default.createElement("div",{ref:S,id:f,className:(0,y0.default)(e,"vertical-timeline-element",{"vertical-timeline-element--left":m==="left","vertical-timeline-element--right":m==="right","vertical-timeline-element--no-children":n===""}),style:g},El.default.createElement(El.default.Fragment,null,El.default.createElement("span",{style:u,onClick:l,className:(0,y0.default)(a,"vertical-timeline-element-icon",{"bounce-in":v||w,"is-hidden":!(v||w)})},o),El.default.createElement("div",{style:i,onClick:c,className:(0,y0.default)(x,"vertical-timeline-element-content",{"bounce-in":v||w,"is-hidden":!(v||w)})},El.default.createElement("div",{style:t,className:"vertical-timeline-element-content-arrow"}),n,El.default.createElement("span",{className:(0,y0.default)(s,"vertical-timeline-element-date")},r)))));r6.propTypes={children:ti.default.oneOfType([ti.default.arrayOf(ti.default.node),ti.default.node]),className:ti.default.string,contentArrowStyle:ti.default.shape({}),contentStyle:ti.default.shape({}),date:ti.default.node,dateClassName:ti.default.string,icon:ti.default.element,iconClassName:ti.default.string,iconStyle:ti.default.shape({}),iconOnClick:ti.default.func,onTimelineElementClick:ti.default.func,id:ti.default.string,position:ti.default.string,style:ti.default.shape({}),textClassName:ti.default.string,visible:ti.default.bool,intersectionObserverProps:ti.default.shape({root:ti.default.object,rootMargin:ti.default.string,threshold:ti.default.number,triggerOnce:ti.default.bool})};var Nde=r6;yb.default=Nde;var s6={VerticalTimeline:gb.default,VerticalTimelineElement:yb.default};const o6=({feature:n})=>{const e=qt();return d.jsxs(s6.VerticalTimelineElement,{contentStyle:{background:"black",border:"4px solid",borderImage:"linear-gradient(to top, #f12711, #f5af19) 1",borderRadius:"12px",boxShadow:"0 10px 15px rgba(0, 0, 0, 0.5), 0 4px 6px rgba(0, 0, 0, 0.3)",transition:"transform 0.2s ease, box-shadow 0.2s ease"},contentArrowStyle:{borderRight:"15px solid #f5af19"},iconStyle:{background:n.iconBg},icon:d.jsx("div",{className:"flex justify-center items-center w-full h-full",children:d.jsx("img",{src:n.icon,alt:n.title,className:"w-[90%] h-[90%] object-contain",loading:"lazy"})}),children:[d.jsxs("div",{children:[d.jsx("h3",{className:"text-white text-[24px] font-bold",children:n.title}),d.jsx("p",{className:"text-secondary text-[16px] font-semibold",style:{margin:0},children:n.subtitle})]}),n.points&&d.jsx("ul",{className:"mt-5 list-disc ml-5 space-y-2",children:n.points.map((t,i)=>d.jsx("li",{className:"text-gray-100 text-[14px] pl-1 tracking-wider cursor-pointer hover:underline",onClick:()=>e(`${t.li}#${t.id}`),children:t.text},`features-point-${i}`))}),n.image&&d.jsx("div",{className:"flex justify-center mt-3",children:d.jsx("img",{src:n.image,alt:n.title,className:"w-[50%] h-[50%] rounded-lg"})}),n.span&&d.jsx("p",{className:"flex flex-col justify-between items-center mt-3",children:d.jsx("em",{children:n.span})}),n.tags&&d.jsx("div",{className:"flex flex-wrap gap-2 mt-3 justify-center",children:n.tags.map((t,i)=>d.jsx("span",{className:`text-[12px] px-2 py-1 rounded-lg ${t.color}`,children:t.name},i))}),n.btn&&d.jsx("div",{className:"mt-5 flex justify-center",children:d.jsx(Ds,{to:n.btn,className:"px-6 py-2 text-white rounded-lg text-sm font-semibold flex items-center",children:d.jsxs("i",{children:["See More",d.jsx("i",{className:"fa-solid fa-arrow-right ml-1"})]})})})]})};o6.propTypes={feature:ut.shape({title:ut.string.isRequired,subtitle:ut.string.isRequired,icon:ut.string.isRequired,iconBg:ut.string.isRequired,overview:ut.string,update:ut.string,born:ut.string,color:ut.string.isRequired,btn:ut.string,points:ut.arrayOf(ut.shape({text:ut.string.isRequired,li:ut.string,id:ut.string})),span:ut.string,tags:ut.arrayOf(ut.shape({name:ut.string.isRequired,color:ut.string.isRequired})),image:ut.string}).isRequired};const Lde=()=>d.jsx(Pn,{children:d.jsxs(d.Fragment,{children:[d.jsxs(Cn.div,{variants:v_(),children:[d.jsx("p",{id:"features",className:`${q.paragraphSubText} `,children:"Explore Our"}),d.jsx("h2",{className:`${q.headText} highlight-border`,children:d.jsx("span",{className:"title-with-line",children:"Features"})})]}),d.jsx(Cn.div,{variants:v_(),className:"text-secondary text-[17px] max-w-3xl leading-[30px] tracking-wide",children:d.jsx("p",{className:q.paragraphSubTextLower,children:"Access AI Helena for expert help, Legal Match for connections, and a Law Books Library with a tooltip dictionary."})}),d.jsx("div",{className:"mt-20 flex flex-col",children:d.jsx(s6.VerticalTimeline,{children:gde.map((n,e)=>d.jsx(o6,{feature:n},e))})})]})}),Dde=zt(Lde),kde=()=>d.jsxs("section",{id:"home",className:"relative w-full h-screen mx-auto",children:[d.jsxs("div",{className:"relative w-full h-full",children:[d.jsx("img",{src:"/assets/icon/sunflower.png",alt:"Sunflower",className:"absolute inset-0 w-full h-full object-cover z-0",loading:"lazy"}),d.jsx("img",{src:"/assets/blindfold_woman.png",alt:"Blindfold Woman",className:"absolute inset-0 w-full h-full object-cover z-0",loading:"lazy"})]}),d.jsx("div",{className:"fixed inset-0 bg-slate-800/20"}),d.jsxs("div",{className:`absolute inset-0 top-[120px] max-w-7xl mx-auto ${q.paddingX} flex flex-row items-start gap-5`,children:[d.jsxs("div",{className:"flex flex-col justify-center items-center mt-5",children:[d.jsx("div",{className:"w-5 h-5 rounded-full bg-[#ffb42a]"}),d.jsx("div",{className:"w-1 sm:h-80 h-40 orange-gradient"})]}),d.jsxs("div",{children:[d.jsxs("h1",{className:`${q.headText} text-3d`,children:["KARAPATAN",d.jsx("span",{className:"text-white",children:"KO"})]}),d.jsxs("p",{className:`${q.headSubText} mt-2 text-white-100`,children:["Built for Everyone. ",d.jsx("br",{className:"sm:block hidden"})," Your Smart Guide to Legal Understanding"]})]})]}),d.jsx("div",{className:"absolute xs:bottom-10 bottom-32 w-full flex justify-center items-center",children:d.jsx("a",{href:"#features",children:d.jsx("div",{className:"w-[35px] h-[64px] rounded-3xl border-4 border-white flex justify-center items-start p-2",children:d.jsx(Cn.div,{className:"w-3 h-3 rounded-full bg-white mb-1",animate:{y:[0,24,0]},transition:{duration:1.5,repeat:1/0,repeatType:"loop"}})})})})]}),Ode=()=>d.jsxs(Cn.footer,{initial:{opacity:0,y:50},whileInView:{opacity:1,y:0},transition:{duration:.6,ease:"easeOut"},className:`border-t-2 border-orange-800 text-white ${q.paddingY} mt-16`,children:[d.jsxs("div",{className:`container mx-auto ${q.paddingX} grid lg:grid-cols-4 md:grid-cols-2 gap-8`,children:[d.jsxs("div",{children:[d.jsx("h4",{className:`${q.headSubText} highlight-border mb-4`,children:"About Us"}),d.jsx("hr",{className:"title-with-line mb-3"}),d.jsx("p",{className:"text-sm",children:"KARAPATAN KO: A Digital Platform for Legal Rights and Resources Information System is designed to empower students with accessible legal rights information and resources, and connect them with trusted legal professionals."})]}),d.jsxs("div",{children:[d.jsx("h4",{className:`${q.headSubText} highlight-border mb-4`,children:"Our Mission"}),d.jsx("hr",{className:"title-with-line mb-3"}),d.jsx("p",{className:"text-sm",children:"Our mission is to help all individuals, especially students to understand and exercise their rights. Through future AI-powered tools, users can receive real-time support to guide them through legal processes and understanding."})]}),d.jsxs("div",{children:[d.jsx("h4",{className:`${q.headSubText} highlight-border mb-4`,children:"Partnership"}),d.jsx("hr",{className:"title-with-line mb-3"}),d.jsx("p",{className:"text-sm mb-2",children:"Our partnership is non government organization that includes professional lawyers."})]}),d.jsxs("div",{children:[d.jsx("h4",{className:`${q.headSubText} highlight-border mb-4`,children:"Contact Us"}),d.jsx("hr",{className:"title-with-line mb-3"}),d.jsxs("p",{className:"text-sm mb-2",children:["Email: ",d.jsx("span",{className:"text-white",children:"karapatanko@gmail.com"})]}),d.jsx("p",{className:"text-sm mb-2",children:"Phone: (+63) 966-630-6322"}),d.jsx("p",{className:"text-sm mb-2",children:"Address: Legarda Government Pack Road"})]})]}),d.jsx("div",{className:`mt-10 text-center text-sm border-t border-orange-800 pt-6 ${q.paddingX}`,children:d.jsxs("p",{children:[" ",new Date().getFullYear()," KARAPATAN KO. All rights reserved."]})})]}),a6=({index:n,testimonial:e,name:t,designation:i,company:r,image:s})=>d.jsxs(Cn.div,{variants:Si("","spring",n*.5,.75),className:"border-2 border-orange-800 opacity-1 p-10 rounded-3xl xs:w-[320px] w-full",children:[d.jsx("p",{className:"text-white font-black text-[48px]",children:'"'}),d.jsxs("div",{className:"mt-1",children:[d.jsxs("p",{className:"text-white tracking-wider text-[18px]",children:[" ",e," "]}),d.jsxs("div",{className:"mt-7 flex justify-between items-center gap-1",children:[d.jsxs("div",{className:"flex-1 flex flex-col",children:[d.jsxs("p",{className:"text-white font-medium text-[16px]",children:[d.jsx("span",{className:"blue-text-gradient",children:"@"}),t]}),d.jsxs("p",{className:"mt-1 text-secondary text-[12px]",children:[" ",i," at ",r]})]}),d.jsx("img",{src:s,alt:`feedback-by-${t}`,className:"w-10 h-10 rounded-full object-cover",loading:"lazy"})]})]})]});a6.propTypes={index:ut.number.isRequired,testimonial:ut.string.isRequired,name:ut.string.isRequired,designation:ut.string.isRequired,company:ut.string.isRequired,image:ut.string.isRequired};const Ude=()=>d.jsxs("div",{className:"mt-12 rounded-[20px]",children:[d.jsx("div",{className:`${q.padding} rounded-2xl min-h-[300px]`,children:d.jsxs(Cn.div,{variants:v_(),children:[d.jsx("p",{className:q.paragraphSubText,children:"What others say"}),d.jsx("h2",{className:`${q.headText} highlight-border`,children:d.jsx("span",{className:"title-with-line",children:"Testimonial"})})]})}),d.jsx("div",{className:`${q.paddingX} -mt-20 pb-14 flex flex-wrap gap-7`,children:yde.map((n,e)=>d.jsx(a6,{index:e,...n},n.name))})]}),Fde=zt(Ude),Ln=()=>{const[n,e]=B.useState(null),[t,i]=B.useState(null),[r,s]=B.useState({top:0,left:0}),o="d87993c8-62f0-4e2f-a1ba-ccd973139434",a=c=>{const u=window.getSelection(),f=u.toString().trim();if(f){e(f),l(f);const g=u.getRangeAt(0).getBoundingClientRect();s({top:g.bottom+window.scrollY+8,left:g.left+window.scrollX})}else e(null),i(null)},l=async c=>{const u=`https://dictionaryapi.com/api/v3/references/learners/json/${c}?key=${o}`;try{const f=await fetch(u);if(f.ok){const m=await f.json();m.length>0&&m[0].shortdef?i(m[0].shortdef[0]):i("No definition found.")}else i("No definition found.")}catch(f){console.error("Error fetching definition:",f),i("Error fetching definition.")}};return{selectedWord:n,definition:t,tooltipPosition:r,handleTextSelection:a}},jde=()=>{const{selectedWord:n,definition:e,tooltipPosition:t,handleTextSelection:i}=Ln();return d.jsx(Pn,{children:d.jsxs("div",{id:"Constitution_ID",className:"p-8 min-h-screen text-center image-border-table",children:[d.jsxs("div",{className:"mb-16",children:[d.jsx(Cn.p,{onMouseUp:i,variants:Si("top","tween",.1,.6),initial:"hidden",animate:"show",className:`${q.paragraphSubTextLower} text-white mb-2`,children:d.jsx("em",{children:"Principles"})}),d.jsx(Cn.h3,{variants:Si("top","tween",.2,.8),initial:"hidden",animate:"show",className:`${q.paragraphSubText} text-white mb-4`,children:d.jsx("strong",{children:"THE 1987 CONSTITUTION"})}),d.jsx(Cn.h1,{variants:Si("top","tween",.3,1),initial:"hidden",animate:"show",onMouseUp:i,className:`${q.paragraphHeadText} text-white mb-6`,children:d.jsx("strong",{className:"tracking-wide",children:"THE CONSTITUTION OF THE REPUBLIC OF THE PHILIPPINES"})}),d.jsxs(Cn.p,{onMouseUp:i,variants:Si("top","tween",.4,1.2),initial:"hidden",animate:"show",className:`${q.paragraphSubTextLower} text-white mb-12`,children:[d.jsx("strong",{children:"PREAMBLE:"})," ",d.jsx("br",{}),"We, the sovereign Filipino people, imploring the aid of Almighty God, in order to build a just and humane society and establish a Government that shall embody our ideals and aspirations, promote the common good, conserve and develop our patrimony, and secure to ourselves and our posterity the blessings of independence and democracy under the rule of law and a regime of truth, justice, freedom, love, equality, and peace, do ordain and promulgate this Constitution."]})]}),d.jsxs("div",{className:"mb-12",children:[d.jsx(Cn.h3,{variants:Si("top","tween",.5,1.2),initial:"hidden",animate:"show",className:`${q.paragraphSubText} text-white text-2xl font-semibold`,children:"Table of Contents"}),d.jsx(Cn.hr,{variants:Si("top","tween",.6,1.2),initial:"hidden",animate:"show",className:"w-20 mx-auto border-t-2 border-white my-4"})]}),d.jsx(Cn.div,{variants:Si("bottom","tween",.7,1),initial:"hidden",animate:"show",className:"space-y-4 text-left max-w-3xl mx-auto",children:Q5.map(r=>d.jsx(Ds,{to:r.href,className:`${q.paragraphSubText} text-white hover:underline hover:text-purple-400 block py-2 px-4 rounded-md transition duration-300 transform hover:scale-105 hover:shadow-lg`,children:r.topic},r.href))}),n&&d.jsxs("div",{className:"absolute text-left bg-white p-4 shadow-lg rounded-lg max-w-xs text-black",style:{left:t.left,top:t.top,zIndex:100},children:[d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsx("p",{className:q.dictionaryText,children:n}),d.jsx("i",{className:"fas fa-volume-up ml-5 text-gray-600"})]}),d.jsx("hr",{className:"border-2 mb-2"}),d.jsx("p",{children:e})]})]})})},Vde=zt(jde,"Constitution"),Bde=()=>d.jsxs(d.Fragment,{children:[d.jsx("div",{className:"bg-hero-pattern bg-cover bg-no-repeat bg-center",children:d.jsx(kde,{})}),d.jsx(Dde,{}),d.jsx(Fde,{}),d.jsx(z9,{}),d.jsx(Ode,{})]}),zde=()=>{const[n,e]=B.useState(!1),t=B.useRef(null),i=B.useRef(null),r=B.useRef(null);B.useEffect(()=>{const o=()=>{window.scrollY>50?t.current?.classList.add("scrolled"):t.current?.classList.remove("scrolled")},a=()=>{window.innerWidth>768&&n&&s()},l=c=>{c.key==="Escape"&&n&&s()};return window.addEventListener("scroll",o),window.addEventListener("resize",a),document.addEventListener("keydown",l),()=>{window.removeEventListener("scroll",o),window.removeEventListener("resize",a),document.removeEventListener("keydown",l)}},[n]);const s=()=>{e(o=>!o),document.body.style.overflow=n?"":"hidden"};return d.jsxs(d.Fragment,{children:[d.jsx("nav",{className:"admin_navbar",ref:t,children:d.jsxs("div",{className:"admin_navbar-container",children:[d.jsx("div",{className:"text-white dark:text-gray-200 text-lg font-bold admin_logo highlight-border",children:"KARAPATAN KO"}),d.jsxs("button",{className:`admin-mobile-nav-toggle ${n?"active":""}`,"aria-label":"Toggle navigation",onClick:s,children:[d.jsx("span",{className:"bar"}),d.jsx("span",{className:"bar"}),d.jsx("span",{className:"bar"})]}),d.jsxs("ul",{className:`admin-nav-links ${n?"active":""}`,ref:i,children:[d.jsx("li",{children:d.jsx("a",{href:"",onClick:s,children:"HOME"})}),d.jsx("li",{children:d.jsx("a",{href:"#admin_appointment",children:"APPOINTMENT"})}),d.jsx("li",{children:d.jsx("a",{href:"#admin_books",children:"BOOKS"})})]})]})}),d.jsx("div",{className:`admin-overlay ${n?"active":""}`,ref:r,onClick:s})]})},Hde={"Noel Magalgalit":{name:"Noel Magalgalit",title:"Civil Law",address:"Insular Life Building, Legarda Street, corner Abanao extension, Baguio, 2660 Benguet"},"Palmer Fagyan Bugtong":{name:"Palmer Fagyan Bugtong",title:"Criminal Law",address:"Insular Life Building, Legarda Street, corner Abanao extension, Baguio, 2600 Benguet"},"Jess B. Evasco":{name:"Jess B. Evasco",title:"Criminal Law",address:"Insular Life Building, Legarda Street, corner Abanao extension, Baguio, 2600 Benguet"}},Gde=()=>{const[n,e]=B.useState({}),[t,i]=B.useState({}),[r,s]=B.useState(null),[o,a]=B.useState(!1),[l,c]=B.useState(!1),[u,f]=B.useState([]);B.useEffect(()=>{const g=Bu(Xo,"appointments"),x=uC(g,b=>{const w={},v={},S=new Date;b.forEach(E=>{const C=E.data(),V=C.lawyer?.name||"Unknown Lawyer";if(!Hde[V])return;w[V]||(w[V]=[]),v[V]||(v[V]=[]);const L=C.date instanceof Vi?C.date.toDate():new Date(C.date),N={id:E.id,date:L.toLocaleDateString(),time:C.time||"No time provided",reasons:C.reasons||"No reasons provided",client:`${C.firstName||""} ${C.lastName||""}`.trim()||"Unknown Client"};L>=S?w[V].push(N):v[V].push(N)}),e(w),i(v)});return()=>x()},[]);const m=async()=>{if(l){c(!1);return}try{const g=Bu(Xo,"archived_appointments"),b=(await q5(g)).docs.map(w=>({id:w.id,...w.data()}));f(b),c(!0),a(!1)}catch(g){console.error("Error fetching archived appointments:",g)}};return d.jsxs(d.Fragment,{children:[d.jsx(zde,{}),d.jsx(Cn.div,{variants:v_(),children:d.jsx("h2",{id:"admin_appointment",className:`${q.headText} highlight-border`,children:d.jsx("span",{className:"title-with-line",children:"Appointments"})})}),d.jsx(Cn.p,{variants:Si("","",.1,1),className:"text-secondary text-[17px] max-w-3xl leading-[30px] tracking-wide mb-5 mt-2",children:"Manage appointments, send messages, and delete bookings."}),d.jsxs("div",{className:"flex",children:[d.jsxs("div",{className:`${q.paragraphSubTextLower} mt-3 p-4 border-r`,children:[" ",d.jsxs("table",{children:[d.jsx("thead",{children:d.jsx("tr",{children:d.jsx("th",{children:"Lawyer Name"})})}),d.jsxs("tbody",{children:[Object.keys(n).map((g,x)=>d.jsx("tr",{onClick:()=>s(g),children:d.jsxs("td",{className:"cursor-pointer mb-1 hover:text-orange-700 p-2",children:[x+1,". ",g]})},g)),d.jsx("br",{}),d.jsx("br",{}),d.jsx("hr",{}),d.jsx("br",{}),d.jsx("button",{className:"cursor-pointer mb-1 text-orange-400 rounded hover:text-orange-900",onClick:m,children:l?"Hide Archived":"Show Archived"})]})]})]}),d.jsx("div",{className:"w-3/4 p-4",children:r&&d.jsxs(d.Fragment,{children:[d.jsxs("h3",{className:"text-lg font-bold",children:["Appointments for ",r]}),d.jsx("button",{className:"px-4 py-2 text-orange-400 rounded hover:text-orange-900 ml-2",onClick:()=>{a(!o),c(!1)},children:o?"Show Current Appointments":"Show Past Appointments"}),!o&&!l&&d.jsx("h3",{className:"mt-4 text-lg font-bold",children:"Current Appointments"}),!o&&!l&&n[r]?.map((g,x)=>d.jsxs("div",{className:"border p-2 mt-2 rounded shadow-md",children:[d.jsxs("p",{children:[d.jsx("strong",{children:"Date:"})," ",g.date]}),d.jsxs("p",{children:[d.jsx("strong",{children:"Time:"})," ",g.time]}),d.jsxs("p",{children:[d.jsx("strong",{children:"Client:"})," ",g.client]}),d.jsxs("p",{children:[d.jsx("strong",{children:"Reason:"})," ",g.reasons]}),d.jsx("button",{className:"text-red-600 hover:text-red-800",onClick:()=>f(g.id,r),children:"Archive"})]},x)),o&&d.jsx("h3",{className:"mt-4 text-lg font-bold",children:"Past Appointments"}),o&&t[r]?.map((g,x)=>d.jsxs("div",{className:"border p-2 mt-2 rounded shadow-md",children:[d.jsxs("p",{children:[d.jsx("strong",{children:"Date:"})," ",g.date]}),d.jsxs("p",{children:[d.jsx("strong",{children:"Time:"})," ",g.time]}),d.jsxs("p",{children:[d.jsx("strong",{children:"Client:"})," ",g.client]}),d.jsxs("p",{children:[d.jsx("strong",{children:"Reason:"})," ",g.reasons]})]},x)),l&&u.length>0?d.jsxs("div",{className:"mt-2 p-2 shadow-md",children:[d.jsx("h3",{className:"text-lg font-bold",children:"Archived Appointments"}),u.map((g,x)=>d.jsxs("div",{className:"border p-2 mt-2 rounded shadow-md",children:[d.jsxs("p",{children:[d.jsx("strong",{children:"Date:"})," ",g.date]}),d.jsxs("p",{children:[d.jsx("strong",{children:"Time:"})," ",g.time]}),d.jsxs("p",{children:[d.jsx("strong",{children:"Client:"})," ",g.client]}),d.jsxs("p",{children:[d.jsx("strong",{children:"Reason:"})," ",g.reasons]})]},x))]}):l&&d.jsx("p",{children:"No archived appointments found."})]})})]})]})},Wde=zt(Gde,"header"),Fn=({children:n})=>d.jsxs("div",{children:[d.jsx(ode,{}),d.jsx("main",{children:n})]}),l6=({LawyerProfile:n})=>d.jsx("div",{children:d.jsxs(Cn.div,{className:"max-w-md p-6 mt-10 rounded-lg shadow-lg relative text-white image-border-lawyer",initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},children:[d.jsxs("div",{className:"flex flex-col items-center",children:[d.jsx("img",{src:n.image,alt:n.name,className:"w-24 h-24 rounded-lg border-2 bg-white shadow-md",width:96,height:96,loading:"lazy"}),d.jsx("h2",{className:"text-md font-bold mt-2",children:n.name}),d.jsx("p",{className:"text-sm",children:n.title})]}),d.jsxs("div",{className:"mt-5 text-sm",children:[d.jsxs("p",{className:"font-semibold",children:["Consultation:"," ",d.jsx("span",{className:"text-orange-400",children:n.currentSP})]}),d.jsxs("p",{className:"mt-1 font-semibold",children:["Experience:"," ",d.jsx("span",{className:"text-orange-400",children:n.currentPoints})]})]}),d.jsx("hr",{className:"my-4 mt-6 border-white"}),n.tagline&&d.jsx("div",{className:"text-center tracking-wide text-sm text-white mb-4",children:d.jsx("b",{children:n.tagline})}),d.jsxs("div",{className:"grid grid-cols-1 gap-4 text-xs",children:[d.jsxs("div",{children:[d.jsx("p",{className:"font-semibold",children:"TALENT"}),d.jsx("p",{className:"text-center tracking-wide text-sm text-white mb-4",children:n.talent})]}),d.jsxs("div",{children:[d.jsx("p",{className:"font-semibold mt-2",children:"ADDRESS:"}),d.jsx("p",{className:"text-center tracking-wide text-sm text-white mb-4",children:n.address})]})]}),n.btn&&d.jsx("div",{className:"mt-5 flex justify-center",children:d.jsx(Ds,{to:{pathname:n.btn,state:{lawyerName:n.name,lawyerProfile:n}},className:"px-6 py-2 border-2 border-orange-500 hover:bg-slate-700 text-white rounded-lg text-sm font-semibold flex items-center",children:"Get an Appointment"})})]})});l6.propTypes={LawyerProfile:ut.shape({image:ut.string.isRequired,name:ut.string.isRequired,title:ut.string.isRequired,currentSP:ut.string.isRequired,currentPoints:ut.string.isRequired,talent:ut.string.isRequired,tagline:ut.string,address:ut.string.isRequired,btn:ut.string.isRequired}).isRequired};const qde=()=>(B.useEffect(()=>{window.scrollTo(0,0)},[]),d.jsxs("div",{className:"container mx-auto px-4 py-6",children:[d.jsx("span",{className:q.paragraphSubText,children:"Choose Your Lawyer"}),d.jsx("h2",{className:`${q.headText} highlight-border`,children:d.jsx("span",{className:"title-with-line mb-5",children:"Legal Matching"})}),d.jsx("p",{className:q.paragraphSubTextLower,children:"Finding the right lawyer is a crucial step in ensuring the best possible outcome for your legal case. Whether you're dealing with workplace discrimination, personal injury, or family law matters, we connect you with experienced professionals who specialize in your area of need. Legal match helps you find qualified attorneys and lawyers based on your specific legal concerns, ensuring you receive expert guidance."}),d.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-2 lg:grid-cols-3 gap-4",children:Nr.map((n,e)=>d.jsx(l6,{LawyerProfile:n},e))})]})),$de=zt(qde,"lawyer-section"),Xde=({children:n})=>{const[e,t]=B.useState(!1),{newChat:i,darkMode:r,setDarkMode:s}=B.useContext(Ym),[o,a]=B.useState([]),{setSelectedMessage:l}=B.useContext(Ym),c=xc(),u=(f,m)=>{l({message:f,response:m})};return B.useEffect(()=>{(async()=>{const m=cC(Bu(c,"Ai_Message"),B5("timestamp","desc"),$he(5)),x=(await q5(m)).docs.map(b=>({id:b.id,...b.data()}));a(x)})()},[]),d.jsx("div",{className:`Ai_sidebar-container ${r?"dark-mode":""}`,children:d.jsx("div",{className:`Ai_sidebar ${e?"extended":""}`,children:d.jsxs("div",{className:"top",children:[d.jsxs("div",{className:"Ai_menu",children:[d.jsx("img",{onClick:()=>t(f=>!f),src:"/assets/menu_icon.png",alt:"menu_icon"}),e&&d.jsx("p",{onClick:()=>t(f=>!f),children:"Menu"})]}),d.jsxs("div",{onClick:()=>i(),className:"Ai_new-chat",children:[d.jsx("img",{src:"/assets/plus_icon.png",alt:"plus_icon"}),e&&d.jsx("p",{children:"New chat"})]}),e&&d.jsxs("div",{className:"Ai_recent",children:[d.jsx("p",{className:"Ai_recent-title",children:"Recent Messages"}),o.map(f=>d.jsxs("div",{className:"Ai_recent-entry",onClick:()=>u(f.message,f.response),children:[d.jsx("img",{src:"/assets/message_icon.png",alt:"message_icon"}),d.jsxs("p",{children:[f.message.substring(0,18),"..."]})]},f.id))]}),d.jsxs("div",{className:"Ai_bottom",children:[d.jsxs("div",{className:"Ai_bottom-item Ai_recent-entry",children:[d.jsx("img",{onClick:()=>window.open("https://gemini.google.com/faq","_blank"),src:"/assets/question_icon.png",alt:"question_icon"}),e&&d.jsx("p",{onClick:()=>window.open("https://gemini.google.com/faq","_blank"),children:"Help"})]}),d.jsxs("div",{className:"Ai_bottom-item Ai_recent-entry",children:[d.jsx("img",{src:"/assets/history_icon.png",alt:"history_icon"}),e&&d.jsx("p",{children:"Activity"})]}),d.jsxs("div",{className:"Ai_bottom-item Ai_recent-entry",children:[d.jsx("img",{src:"/assets/setting_icon.png",alt:"setting_icon"}),e&&d.jsxs("div",{className:"settings",children:[d.jsxs("label",{className:"toggle-switch",children:[d.jsx("input",{type:"checkbox",checked:r,onChange:()=>s(!r)}),d.jsx("span",{className:"slider"})]}),d.jsx("p",{children:r?"Dark Mode On":"Dark Mode Off"})]})]})]})]})})})},Yde=()=>d.jsxs("div",{className:"relative",children:[d.jsxs(Ds,{to:"/main",className:"text-center text-secondary dark:text-gray-400 bg-transparent border-0 p-0 cursor-pointer flex items-center gap-2",children:[d.jsx("p",{className:"sign text-secondary dark:text-gray-400 w-5 h-5"}),"DASHBOARD"]}),d.jsxs(Ds,{to:"/lawyer-status",className:"text-center text-secondary dark:text-gray-400 bg-transparent border-0 p-0 cursor-pointer flex items-center gap-2",children:[d.jsx("p",{className:"sign text-secondary dark:text-gray-400 w-5 h-5"}),"APPOINTMENT"]}),d.jsxs(Ds,{to:"/",className:"text-center text-secondary dark:text-gray-400 bg-transparent border-0 p-0 cursor-pointer flex items-center gap-2",children:[d.jsx(J5,{className:"sign text-secondary dark:text-gray-400 w-5 h-5"}),"SIGN OUT"]})]}),Kde=window.SpeechRecognition||window.webkitSpeechRecognition,jl=new Kde;jl.continuous=!0;jl.interimResults=!0;jl.lang="en-US";const Jde=()=>{const{onSent:n,recentPrompt:e,showResult:t,loading:i,resultData:r,setInput:s,input:o,darkMode:a}=B.useContext(Ym),[l,c]=B.useState(null),[u,f]=B.useState(!1),[m,g]=B.useState(!1),[x,b]=B.useState(!1),[w,v]=B.useState(null),{selectedMessage:S}=B.useContext(Ym),E=xc();B.useEffect(()=>{(async()=>{const A=dc().currentUser;if(A){const M=ao(E,"users",A.uid),D=await jf(M);D.exists()&&c(D.data())}})()},[]),B.useEffect(()=>{m?jl.start():jl.stop(),jl.onresult=N=>{const I=Array.from(N.results).map(A=>A[0].transcript).join("");s(I)},jl.onerror=N=>console.error(N.error)},[m]);const C=N=>{N.key==="Enter"&&o.trim()&&L()},V=()=>{g(!1),jl.stop(),setTimeout(()=>{o.trim()&&L()},500)},L=async()=>{if(!o.trim())return;const I=dc().currentUser,A=xc();if(I)try{const D=(await $5(Bu(A,"Ai_Message"),{userId:I.uid,message:o,response:"",timestamp:Y5()})).id;n(),b(!1),v(D)}catch(M){console.error("Error saving message:",M)}};return B.useEffect(()=>{(async()=>{!w||!r||x||setTimeout(async()=>{try{await Khe(ao(E,"Ai_Message",w),{response:r}),b(!0)}catch(I){console.error("Error updating AI response:",I)}},12e4)})()},[r]),d.jsxs("div",{className:`Ai_layout ${a?"dark-mode":""}`,children:[d.jsx(Xde,{}),d.jsxs("div",{className:"Ai_main",children:[d.jsxs("div",{className:"Ai_nav",children:[d.jsx("p",{id:"helena",children:"Karapatan Ko"}),d.jsx("img",{onClick:()=>f(!u),src:"/assets/user_icon.png",alt:"user_icon"}),u&&d.jsx("div",{className:"navbar-popup",children:d.jsx(Yde,{})})]}),d.jsxs("div",{className:"Ai_main-container",children:[S?d.jsxs("div",{className:"Ai_result",children:[d.jsxs("div",{className:"Ai_result-title",children:[d.jsx("img",{src:"/assets/user_icon.png",alt:"user_icon"}),d.jsx("p",{children:S.message})]}),d.jsxs("div",{className:"Ai_result-data",children:[d.jsx("img",{src:"/assets/gemini_icon.png",alt:"gemini_icon"}),d.jsx("p",{dangerouslySetInnerHTML:{__html:S.response}})]})]}):d.jsx(d.Fragment,{children:d.jsxs("div",{className:"Ai_greet",children:[d.jsx("p",{children:d.jsxs("span",{children:["Hello, ",l?`${l.firstName}`:"User"]})}),d.jsx("p",{children:"How can I help you today?"})]})}),d.jsxs("div",{className:"Ai_main-bottom",children:[d.jsxs("div",{className:"Ai_search-box",children:[d.jsx("input",{onChange:N=>s(N.target.value),value:o,type:"text",placeholder:"Enter a prompt here",onKeyDown:C}),d.jsxs("div",{children:[d.jsx("img",{src:"/assets/mic_icon.png",alt:"mic_icon",style:{cursor:"pointer"},onMouseDown:()=>g(!0),onMouseUp:()=>V()}),o?d.jsx("img",{onClick:L,src:"/assets/send_icon.png",alt:"send_icon"}):null]})]}),d.jsx("div",{className:"mic-container text-black",children:m?d.jsx("span",{children:" Listening..."}):null}),d.jsx("p",{className:"Ai_bottom-info",children:"Gemini may display inaccurate info, including about people, so double-check its responses."})]})]})]})]})},Qde={"Noel Magalgalit":{name:"Noel Magalgalit",title:"Civil Law",address:"Insular Life Building, Legarda Street, corner Abanao extension, Baguio, 2660 Benguet"},"Palmer Fagyan Bugtong":{name:"Palmer Fagyan Bugtong",title:"Criminal Law",address:"Insular Life Building, Legarda Street, corner Abanao extension, Baguio, 2660 Benguet"},"Jess B. Evasco":{name:"Jess B. Evasco",title:"Criminal Law",address:"Insular Life Building, Legarda Street, corner Abanao extension, Baguio, 2660 Benguet"}},Zde=()=>{const[n,e]=B.useState(null),[t,i]=B.useState([]),[r,s]=B.useState(null),[o,a]=B.useState([]),[l,c]=B.useState(""),[u,f]=B.useState(!0),m=dc(),g=async()=>{if(!r||!l.trim()){alert("Message cannot be empty.");return}const x=m.currentUser;if(!x){alert("User is not authenticated.");return}try{const b=ao(Xo,"users",x.uid),w=await jf(b);let v=x.displayName||"Unknown User";w.exists()&&(v=w.data().firstName+" "+w.data().lastName),await $5(Bu(Xo,"messages"),{date:Y5(),details:l.trim(),sender:v,userId:x.uid,appointmentId:r.id}),c("")}catch(b){console.error("Error sending message:",b),alert("Failed to send the message. Please try again.")}};return B.useEffect(()=>{if(!r)return;const x=Bu(Xo,"messages"),b=cC(x,z3("appointmentId","==",r.id)),w=uC(b,v=>{const S=v.docs.map(E=>({id:E.id,...E.data()}));a(S)});return()=>w()},[r]),B.useEffect(()=>{let x=null,b=null;return x=ry(m,w=>{w?(()=>{const S=Bu(Xo,"appointments"),E=cC(S,z3("email","==",w.email),B5("timestamp","desc"));b=uC(E,C=>{if(C.empty)e(null),i([]);else{const V=C.docs.map(L=>({id:L.id,...L.data(),lawyerInfo:Qde[L.data().lawyer?.name]||{}}));e(V[0]),i(V.slice(1))}f(!1)})})():(e(null),i([]),f(!1))}),()=>{x&&x(),b&&b()}},[m]),u?d.jsx("p",{children:"Loading appointments..."}):d.jsxs(d.Fragment,{children:[d.jsx("h2",{className:`${q.headText} highlight-border`,children:d.jsx("span",{className:"title-with-line mb-5",children:"Appointments"})}),d.jsxs("div",{className:"p-4",children:[d.jsxs("div",{className:"mb-6",children:[d.jsx("h3",{className:"text-lg font-bold mt-3 mb-4",children:"Recent Appointment"}),d.jsx("div",{className:"space-y-4",children:n?d.jsx("div",{className:"p-2 mt-2 rounded shadow-md border-gray-300 tracking-wide",children:d.jsx("table",{className:"min-w-full table-auto border-collapse border border-gray-300 mb-14",children:d.jsxs("tbody",{children:[d.jsxs("tr",{children:[d.jsx("td",{className:"px-4 py-3 text-right border font-semibold",children:"Name"}),d.jsxs("td",{className:"px-4 py-3 text-left border",children:[n.firstName," ",n.lastName]})]}),d.jsxs("tr",{children:[d.jsx("td",{className:"px-4 py-3 text-right border font-semibold",children:"Email"}),d.jsx("td",{className:"px-4 py-3 text-left border",children:n.email})]}),d.jsxs("tr",{children:[d.jsx("td",{className:"px-4 py-3 text-right border font-semibold",children:"Date"}),d.jsx("td",{className:"px-4 py-3 text-left border",children:n.date})]}),d.jsxs("tr",{children:[d.jsx("td",{className:"px-4 py-3 text-right border font-semibold",children:"Time"}),d.jsx("td",{className:"px-4 py-3 text-left border",children:n.time})]}),d.jsxs("tr",{children:[d.jsx("td",{className:"px-4 py-3 text-right border font-semibold",children:"Reason"}),d.jsx("td",{className:"px-4 py-3 text-left border",children:n.reasons})]}),d.jsxs("tr",{children:[d.jsx("td",{className:"px-4 py-3 text-right border font-semibold",children:"Lawyer"}),d.jsx("td",{className:"px-4 py-3 text-left border",children:n.lawyerInfo?.name||"Unknown Lawyer"})]}),d.jsx("tr",{children:d.jsx("td",{colSpan:"2",className:"px-4 py-3 text-center border",children:d.jsx("button",{className:"px-3 py-1 text-orange-400 rounded hover:text-orange-900",onClick:()=>s(n),children:"Message"})})})]})})},n.id):d.jsx("p",{className:"text-gray-500",children:"No recent appointments found."})})]}),d.jsxs("div",{className:"mt-6",children:[d.jsx("h3",{className:"text-lg font-bold mb-4",children:"Past Appointments"}),d.jsx("div",{className:"space-y-4",children:t.length>0?t.map(x=>d.jsx("div",{className:"p-2 mt-2 rounded shadow-md border-gray-300 tracking-wide",children:d.jsx("table",{className:"min-w-full table-auto border-collapse border border-gray-300 mb-14",children:d.jsxs("tbody",{children:[d.jsxs("tr",{children:[d.jsx("td",{className:"px-4 py-3 text-right border font-semibold",children:"Name"}),d.jsxs("td",{className:"px-4 py-3 text-left border",children:[x.firstName," ",x.lastName]})]}),d.jsxs("tr",{children:[d.jsx("td",{className:"px-4 py-3 text-right border font-semibold",children:"Email"}),d.jsx("td",{className:"px-4 py-3 text-left border",children:x.email})]}),d.jsxs("tr",{children:[d.jsx("td",{className:"px-4 py-3 text-right border font-semibold",children:"Date"}),d.jsx("td",{className:"px-4 py-3 text-left border",children:x.date})]}),d.jsxs("tr",{children:[d.jsx("td",{className:"px-4 py-3 text-right border font-semibold",children:"Time"}),d.jsx("td",{className:"px-4 py-3 text-left border",children:x.time})]}),d.jsxs("tr",{children:[d.jsx("td",{className:"px-4 py-3 text-right border font-semibold",children:"Reason"}),d.jsx("td",{className:"px-4 py-3 text-left border",children:x.reasons})]}),d.jsxs("tr",{children:[d.jsx("td",{className:"px-4 py-3 text-right border font-semibold",children:"Lawyer"}),d.jsx("td",{className:"px-4 py-3 text-left border",children:x.lawyerInfo?.name||"Unknown Lawyer"})]}),d.jsx("tr",{children:d.jsx("td",{colSpan:"2",className:"px-4 py-3 text-center border",children:d.jsx("button",{className:"px-3 py-1 text-orange-400 rounded hover:text-orange-900",onClick:()=>s(x),children:"Message"})})})]})})},x.id)):d.jsx("p",{className:"text-gray-500",children:"No past appointments found."})})]})]}),r&&d.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center",children:d.jsxs("div",{className:"bg-white border border-2 rounded-lg p-4 shadow-lg w-8/12",children:[d.jsxs("h6",{className:"text-black mb-4",children:[d.jsx("b",{children:"Chat with:"})," ",r?.lawyer?.name]}),d.jsx("div",{className:"mb-4 p-2 h-40 overflow-y-scroll text-black",children:o.length>0?o.map(x=>d.jsxs("div",{className:`mb-2 ${x.sender==="admin"?"text-right":"text-left"}`,children:[d.jsxs("p",{children:[d.jsx("strong",{children:x.sender==="admin"?"Admin":x.sender||"User"}),": ",x.details]}),d.jsx("p",{className:"text-xs text-gray-500",children:x.date?new Date(x.date.toDate()).toLocaleString():""})]},x.id)):d.jsx("p",{className:"text-gray-500 text-center p-12",children:"No messages yet."})}),d.jsx("textarea",{className:"p-2 w-full bg-gray-200 rounded mb-4 text-black",rows:"3",value:l,onChange:x=>c(x.target.value),placeholder:"Type your message here..."}),d.jsxs("div",{className:"flex justify-end space-x-2",children:[d.jsx("button",{className:"px-4 py-2 text-red-600 hover:text-red-800",onClick:()=>s(null),children:"Cancel"}),d.jsx("button",{className:"px-4 py-2 text-orange-400 rounded hover:text-orange-900",onClick:g,children:"Send"})]})]})})]})},efe=zt(Zde),tfe=()=>{const n=qt(),[e,t]=B.useState(!1);return d.jsxs("div",{children:[d.jsx("p",{className:q.paragraphSubText,children:"Instructions for booking an Appointment with"}),d.jsx("h2",{className:`${q.headText} highlight-border`,children:d.jsxs("span",{className:"title-with-line",children:[" ",Nr[0].nickname]})}),d.jsx("table",{className:"mt-5 w-full border-collapse border border-gray-200",children:d.jsxs("tbody",{children:[d.jsx("tr",{children:d.jsxs("td",{className:`${q.appointmentSubTextLower} border border-gray-300 p-3`,children:["1. Securing an appointment is ",d.jsx("b",{children:"FREE OF CHARGE"})," and Appointment Slip is ",d.jsx("b",{children:"NON-TRANSFERABLE"}),"."]})}),d.jsx("tr",{children:d.jsx("td",{className:`${q.appointmentSubTextLower} border border-gray-300 p-3`,children:"2. The appointment must be named after the requester who will personally apply at the Magalgalit Law Office."})}),d.jsx("tr",{children:d.jsx("td",{className:`${q.appointmentSubTextLower} border border-gray-300 p-3`,children:"3. Be at the Magalgalit Law Office at least fifteen minutes before the appointment schedule."})}),d.jsx("tr",{children:d.jsx("td",{className:`${q.appointmentSubTextLower} border border-gray-300 p-3`,children:d.jsxs("label",{children:[d.jsx("input",{type:"checkbox",checked:e,onChange:i=>t(i.target.checked),className:"mr-2"}),"I agree to the collection and use of the data that I will provide through this form for the purpose of booking an appointment. I understand that the collection and use of this data, which may include personal and sensitive personal information, shall be in accordance with the Data Privacy Act of 2021."]})})})]})}),d.jsxs("div",{className:"flex justify-between mt-10",children:[d.jsx("button",{type:"button",onClick:()=>n("/lawyer-status"),className:"px-6 py-2 border-2 border-orange-700 text-white rounded-lg hover:bg-gray-500",children:"Back"}),d.jsx("div",{className:"w-1/4"}),d.jsx(Ds,{to:e?"/appointmentTableLawyer1":"#",className:`px-6 py-2 border-2 border-orange-500 text-white rounded-lg text-sm font-semibold flex items-center ${e?"hover:bg-slate-700":"bg-gray-500 cursor-not-allowed"}`,onClick:i=>{e||i.preventDefault()},children:"Next"})]})]})},nfe=zt(tfe);function BI(n){return ph({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"m8.854 11.646 5.792-5.792a.5.5 0 0 1 .854.353v11.586a.5.5 0 0 1-.854.353l-5.792-5.792a.5.5 0 0 1 0-.708Z"},child:[]}]})(n)}function zI(n){return ph({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"m15.146 12.354-5.792 5.792a.5.5 0 0 1-.854-.353V6.207a.5.5 0 0 1 .854-.353l5.792 5.792a.5.5 0 0 1 0 .708Z"},child:[]}]})(n)}const ife=()=>{const n=qt();Lo();const[e,t]=B.useState({firstName:"",middleName:"",lastName:"",email:"",date:"",time:""}),[i,r]=B.useState(new Date),[s,o]=B.useState(null),a=["2024-12-24","2024-12-25","2024-12-30","2025-01-01","2025-04-09","2025-04-17","2025-04-19","2025-05-01","2025-06-12","2025-08-21","2025-08-25","2025-11-01","2025-11-30","2025-12-08","2025-12-24","2025-12-25","2025-12-30","2025-12-31"];B.useEffect(()=>{const U=dc(),F=xc(),X=ry(U,async Y=>{if(Y){const ne=ao(F,"users",Y.uid),fe=await jf(ne);if(fe.exists()){const Ce=fe.data();t(ce=>({...ce,firstName:Ce.firstName||"",middleName:Ce.middleName||"",lastName:Ce.lastName||"",email:Ce.email||Y.email}))}}});return()=>X()},[]);const l=()=>{n("/appointmentLawyer2")},c=(U,F)=>{t(X=>({...X,[U]:F}))},u=()=>!e.firstName||!e.lastName||!e.email?(alert("Please fill in all required fields!"),!1):!e.date||!e.time?(alert("Please select a valid date and time slot!"),!1):!0,f=U=>{U.preventDefault(),u()&&n("/appointmentResultLawyer1",{state:{formData:e}})},m=U=>U<new Date().setHours(0,0,0,0),g=U=>a.includes(S(U)),x=U=>!m(U)&&U.getDay()!==0&&U.getDay()!==6&&!g(U),b=U=>new Date(U.getFullYear(),U.getMonth(),1).getDay(),w=U=>new Date(U.getFullYear(),U.getMonth()+1,0).getDate(),v=()=>{const U=b(i),F=w(i),X=[];for(let Y=0;Y<U;Y++)X.push(null);for(let Y=1;Y<=F;Y++){const ne=new Date(i.getFullYear(),i.getMonth(),Y);X.push(ne)}return X},S=U=>{const F=U.getFullYear(),X=String(U.getMonth()+1).padStart(2,"0"),Y=String(U.getDate()).padStart(2,"0");return`${F}-${X}-${Y}`},E=U=>{x(U)&&(o(U),t(F=>({...F,date:S(U),time:""})))},C=()=>{r(U=>{const F=new Date(U.getFullYear(),U.getMonth()-1,1);return F<new Date(2024,0,1)?U:F})},V=()=>{r(U=>new Date(U.getFullYear(),U.getMonth()+1,1))},L=[{id:1,start:"8:00 am",end:"9:00 am"},{id:2,start:"9:00 am",end:"10:00 am"},{id:3,start:"10:00 am",end:"11:00 am"}],N=U=>{const F=new Date,X=new Date().setHours(0,0,0,0),[Y,ne]=U.split(" ");let[fe,Ce]=Y.split(":").map(Number);return ne==="pm"&&fe!==12?fe+=12:ne==="am"&&fe===12&&(fe=0),new Date(X).setHours(fe,Ce,0,0)<F},I=(U,F)=>{if(!(s&&s.toDateString()!==new Date().toDateString())){if(N(U))return}const X=`${U} - ${F}`;t(Y=>({...Y,time:Y.time===X?"":X}))};L.forEach(U=>{console.log(`Time Slot: ${U.start} - Disabled: ${N(U.start)}`)});const A=U=>U?g(U)||U.getDay()===0||U.getDay()===6||m(U)?"bg-gray-800":s?.toDateString()===U?.toDateString()?"bg-orange-800":new Date().toDateString()===U.toDateString()?"border":"hover:bg-orange-900 cursor-pointer":"bg-dark",[M,D]=B.useState(""),[z,j]=B.useState(""),te=["Legal consultation for personal matters","Business-related legal advice","Assistance with document preparation","Representation in a court case","Other reasons"],he=U=>{D(U),t(F=>({...F,reasons:U==="Other reasons"?z:U}))},de=U=>{j(U),M==="Other reasons"&&t(F=>({...F,reasons:U}))};return d.jsxs(d.Fragment,{children:[d.jsx("p",{className:q.paragraphSubText,children:"Schedule a"}),d.jsx("h2",{className:`${q.headText} highlight-border`,children:d.jsx("span",{className:"title-with-line",children:"Consultation"})}),d.jsx("div",{className:"p-6 border-2 border-orange-700 shadow-lg rounded-lg mt-10",children:d.jsxs("form",{onSubmit:f,children:[d.jsxs("div",{className:"flex space-x-4 mb-4",children:[d.jsxs("div",{className:"w-1/3",children:[d.jsx("label",{className:"block text-white font-medium mb-2",htmlFor:"firstName",children:"First Name"}),d.jsx("input",{type:"text",id:"firstName",name:"firstName",value:e.firstName,onChange:U=>c("firstName",U.target.value),className:"w-full px-4 py-2 border border-gray-300 text-white rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-700",placeholder:"First name",required:!0})]}),d.jsxs("div",{className:"w-1/3",children:[d.jsx("label",{className:"block text-white font-medium mb-2",htmlFor:"middleName",children:"Middle Name"}),d.jsx("input",{type:"text",id:"middleName",name:"middleName",value:e.middleName,onChange:U=>c("middleName",U.target.value),className:"w-full px-4 py-2 border border-gray-300 text-white rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-700",placeholder:"Middle name"})]}),d.jsxs("div",{className:"w-1/3",children:[d.jsx("label",{className:"block text-white font-medium mb-2",htmlFor:"lastName",children:"Last Name"}),d.jsx("input",{type:"text",id:"lastName",name:"lastName",value:e.lastName,onChange:U=>c("lastName",U.target.value),className:"w-full px-4 py-2 border border-gray-300 text-white rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-700",placeholder:"Last name",required:!0})]})]}),d.jsxs("div",{className:"w-full mb-4",children:[d.jsx("label",{className:"text-white font-medium mb-2",htmlFor:"email",children:"Email"}),d.jsx("input",{type:"email",id:"email",name:"email",value:e.email,onChange:U=>c("email",U.target.value),className:"w-full px-4 py-2 border border-gray-300 text-white rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-700",placeholder:"sample@gmail.com",required:!0})]}),d.jsx("br",{}),d.jsx("label",{className:"text-white font-medium mb-2",htmlFor:"reason",children:"Select a Reason"}),d.jsx("div",{className:"space-y-3",children:d.jsx("table",{className:"min-w-full border rounded-lg border-gray-300",children:d.jsxs("tbody",{children:[te.map((U,F)=>d.jsx("tr",{className:"rounded-lg",children:d.jsx("td",{className:"border border-gray-300 p-3 rounded-lg",children:d.jsxs("label",{className:"flex items-center space-x-3",children:[d.jsx("input",{type:"radio",name:"reason",value:U,checked:M===U,onChange:X=>he(X.target.value),className:"w-4 h-4"}),d.jsx("span",{className:"text-white",children:U})]})})},F)),M==="Other reasons"&&d.jsx("textarea",{placeholder:"Please specify your reason",value:z,onChange:U=>de(U.target.value),className:"w-full mt-2 p-6 focus:ring-2 focus:ring-orange-700"})]})})}),d.jsx("br",{}),d.jsx("br",{}),d.jsxs("div",{className:"mb-4",children:[d.jsxs("div",{className:"flex justify-between mb-2",children:[d.jsx("button",{type:"button",onClick:C,className:"text-white font-medium py-2 px-4 rounded-lg hover:border-orange-600 focus:outline-none focus:ring-2 focus:ring-orange-700",children:d.jsx(BI,{size:30})}),d.jsxs("p",{className:"text-white font-medium",children:[i.toLocaleString("default",{month:"long"})," ",i.getFullYear()]}),d.jsx("button",{type:"button",onClick:V,className:"text-white font-medium py-2 px-4 rounded-lg hover:border-orange-600 focus:outline-none focus:ring-2 focus:ring-orange-700",children:d.jsx(zI,{size:30})})]}),d.jsx("div",{className:"grid grid-cols-7 gap-2 text-center",children:v().map((U,F)=>d.jsx("div",{className:`py-2 px-4 rounded-lg cursor-pointer ${A(U)}`,onClick:()=>U&&E(U),children:U?U.getDate():""},F))})]}),d.jsx("br",{}),d.jsx("br",{}),d.jsx("br",{}),d.jsxs("div",{className:"mb-4",children:[d.jsx("h3",{className:"text-white font-medium mb-4",children:"These are the available time slots:"}),"            ",d.jsx("div",{className:"grid grid-cols-3 gap-4",children:L.map(U=>d.jsxs("button",{type:"button",onClick:()=>I(U.start,U.end),className:`w-full py-2 text-white rounded-lg border ${e.time===`${U.start} - ${U.end}`?"bg-orange-900":"bg-gray-800"}`,children:[U.start," - ",U.end]},U.id))})]}),d.jsx("br",{})," ",d.jsx("br",{}),d.jsxs("div",{className:"text-center flex justify-between",children:[d.jsx("button",{onClick:l,className:"px-6 py-2 border-2 border-orange-700 text-white rounded-lg hover:bg-gray-500",children:"Go back"}),d.jsx("button",{type:"submit",className:"px-6 py-2 border-2 border-orange-700 text-white rounded-lg hover:bg-gray-500",children:"Confirm"})]})]})})]})},rfe=zt(ife);class hy{constructor(e=0,t="Network Error"){this.status=e,this.text=t}}const sfe=()=>{if(!(typeof localStorage>"u"))return{get:n=>Promise.resolve(localStorage.getItem(n)),set:(n,e)=>Promise.resolve(localStorage.setItem(n,e)),remove:n=>Promise.resolve(localStorage.removeItem(n))}},ar={origin:"https://api.emailjs.com",blockHeadless:!1,storageProvider:sfe()},HI=n=>n?typeof n=="string"?{publicKey:n}:n.toString()==="[object Object]"?n:{}:{},ofe=(n,e="https://api.emailjs.com")=>{if(!n)return;const t=HI(n);ar.publicKey=t.publicKey,ar.blockHeadless=t.blockHeadless,ar.storageProvider=t.storageProvider,ar.blockList=t.blockList,ar.limitRate=t.limitRate,ar.origin=t.origin||e},c6=async(n,e,t={})=>{const i=await fetch(ar.origin+n,{method:"POST",headers:t,body:e}),r=await i.text(),s=new hy(i.status,r);if(i.ok)return s;throw s},u6=(n,e,t)=>{if(!n||typeof n!="string")throw"The public key is required. Visit https://dashboard.emailjs.com/admin/account";if(!e||typeof e!="string")throw"The service ID is required. Visit https://dashboard.emailjs.com/admin";if(!t||typeof t!="string")throw"The template ID is required. Visit https://dashboard.emailjs.com/admin/templates"},afe=n=>{if(n&&n.toString()!=="[object Object]")throw"The template params have to be the object. Visit https://www.emailjs.com/docs/sdk/send/"},h6=n=>n.webdriver||!n.languages||n.languages.length===0,d6=()=>new hy(451,"Unavailable For Headless Browser"),lfe=(n,e)=>{if(!Array.isArray(n))throw"The BlockList list has to be an array";if(typeof e!="string")throw"The BlockList watchVariable has to be a string"},cfe=n=>!n.list?.length||!n.watchVariable,ufe=(n,e)=>n instanceof FormData?n.get(e):n[e],f6=(n,e)=>{if(cfe(n))return!1;lfe(n.list,n.watchVariable);const t=ufe(e,n.watchVariable);return typeof t!="string"?!1:n.list.includes(t)},p6=()=>new hy(403,"Forbidden"),hfe=(n,e)=>{if(typeof n!="number"||n<0)throw"The LimitRate throttle has to be a positive number";if(e&&typeof e!="string")throw"The LimitRate ID has to be a non-empty string"},dfe=async(n,e,t)=>{const i=Number(await t.get(n)||0);return e-Date.now()+i},m6=async(n,e,t)=>{if(!e.throttle||!t)return!1;hfe(e.throttle,e.id);const i=e.id||n;return await dfe(i,e.throttle,t)>0?!0:(await t.set(i,Date.now().toString()),!1)},g6=()=>new hy(429,"Too Many Requests"),ffe=async(n,e,t,i)=>{const r=HI(i),s=r.publicKey||ar.publicKey,o=r.blockHeadless||ar.blockHeadless,a=r.storageProvider||ar.storageProvider,l={...ar.blockList,...r.blockList},c={...ar.limitRate,...r.limitRate};return o&&h6(navigator)?Promise.reject(d6()):(u6(s,n,e),afe(t),t&&f6(l,t)?Promise.reject(p6()):await m6(location.pathname,c,a)?Promise.reject(g6()):c6("/api/v1.0/email/send",JSON.stringify({lib_version:"4.4.1",user_id:s,service_id:n,template_id:e,template_params:t}),{"Content-type":"application/json"}))},pfe=n=>{if(!n||n.nodeName!=="FORM")throw"The 3rd parameter is expected to be the HTML form element or the style selector of the form"},mfe=n=>typeof n=="string"?document.querySelector(n):n,gfe=async(n,e,t,i)=>{const r=HI(i),s=r.publicKey||ar.publicKey,o=r.blockHeadless||ar.blockHeadless,a=ar.storageProvider||r.storageProvider,l={...ar.blockList,...r.blockList},c={...ar.limitRate,...r.limitRate};if(o&&h6(navigator))return Promise.reject(d6());const u=mfe(t);u6(s,n,e),pfe(u);const f=new FormData(u);return f6(l,f)?Promise.reject(p6()):await m6(location.pathname,c,a)?Promise.reject(g6()):(f.append("lib_version","4.4.1"),f.append("service_id",n),f.append("template_id",e),f.append("user_id",s),c6("/api/v1.0/email/send-form",f))},GI={init:ofe,send:ffe,sendForm:gfe,EmailJSResponseStatus:hy},y6=({formData:n,isOpen:e,onClose:t})=>{const i=qt();if(!e)return null;const r=()=>{t(),i("/lawyer-status")};return d.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex justify-center items-center",children:d.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6 w-96",children:[d.jsx("h2",{className:"text-xl font-semibold mb-4 text-center text-orange-700",children:"Appointment Confirmed!"}),d.jsxs("p",{className:"text-gray-700 text-center",children:["You have successfully booked an appointment in"," ",d.jsx("strong",{children:"Magalgalit Law Office"}),", Baguio City on"," ",d.jsx("strong",{children:n.date})," at ",d.jsx("strong",{children:n.time}),"."]}),d.jsx("div",{className:"mt-6 flex justify-center",children:d.jsx("button",{onClick:r,className:"px-4 py-2 border-2 border-orange-700 text-black rounded hover:bg-gray-500 transition",children:"Close"})})]})})};y6.propTypes={formData:ut.shape({date:ut.string.isRequired,time:ut.string.isRequired}).isRequired,isOpen:ut.bool.isRequired,onClose:ut.func.isRequired};const v6=()=>{const[n,e]=B.useState(!1),t=qt(),r=Lo().state?.formData,s=()=>{t("/appointmentTableLawyer1")},o=async()=>{if(!r){alert("No appointment details found.");return}try{const l=ao(Xo,"appointments",`${r.email}_${r.date}_${r.time}`);await mb(l,{firstName:r.firstName,middleName:r.middleName||"",lastName:r.lastName,email:r.email,date:r.date,time:r.time,reasons:r.reasons||"No reason selected",lawyer:{name:Nr[0].name,title:Nr[0].title,address:"Insular Life Building, Legarda Street, corner Abanao extension, Baguio, 2660 Benguet"},timestamp:new Date}),await GI.send("service_f8p4u88","template_rtaqjfs",{from_name:`${r.firstName} ${r.lastName}`,to_name:"Siabell",from_email:r.email,message:`Appointment confirmed for ${r.firstName} ${r.lastName} on ${r.date} at ${r.time}.`},"Z-JlpUZqWVtTdl2mp"),e(!0)}catch(l){console.error("Error saving appointment or sending email:",l),alert("Something went wrong, please try again.")}},a=()=>{e(!1)};return r?d.jsxs("div",{className:"container mx-auto p-6",children:[d.jsx("p",{className:q.paragraphSubText,children:"Appointment"}),d.jsx("h2",{className:`${q.headText} highlight-border`,children:d.jsx("span",{className:"title-with-line",children:"Confirmation"})}),d.jsx("p",{className:q.paragraphSubTextLower,children:"Please review the details of your appointment. Keep in mind that this appointment is non-transferable."}),d.jsx("div",{className:"mt-6 mb-6",children:d.jsx("table",{className:"min-w-full table-auto border-collapse border border-gray-300",children:d.jsxs("tbody",{children:[d.jsxs("tr",{children:[d.jsx("td",{className:"w-1/3 px-4 py-3 text-right border border-gray-300 font-semibold",children:"First Name"}),d.jsx("td",{className:"w-2/3 px-4 py-3 border border-gray-300",children:r.firstName})]}),d.jsxs("tr",{children:[d.jsx("td",{className:"w-1/3 px-4 py-3 text-right border border-gray-300 font-semibold",children:"Middle Name"}),d.jsx("td",{className:"w-2/3 px-4 py-3 border border-gray-300",children:r.middleName||"N/A"})]}),d.jsxs("tr",{children:[d.jsx("td",{className:"w-1/3 px-4 py-3 text-right border border-gray-300 font-semibold",children:"Last Name"}),d.jsx("td",{className:"w-2/3 px-4 py-3 border border-gray-300",children:r.lastName})]}),d.jsxs("tr",{children:[d.jsx("td",{className:"w-1/3 px-4 py-3 text-right border border-gray-300 font-semibold",children:"Date of Appointment"}),d.jsx("td",{className:"w-2/3 px-4 py-3 border border-gray-300",children:r.date})]}),d.jsxs("tr",{children:[d.jsx("td",{className:"w-1/3 px-4 py-3 text-right border border-gray-300 font-semibold",children:"Time of Appointment"}),d.jsx("td",{className:"w-2/3 px-4 py-3 border border-gray-300",children:r.time})]}),d.jsxs("tr",{children:[d.jsx("td",{className:"w-1/3 px-4 py-3 text-right border border-gray-300 font-semibold",children:"Selected Reason"}),d.jsx("td",{className:"w-2/3 px-4 py-3 border border-gray-300",children:r.reasons||"No reason selected"})]})]})})}),d.jsx("br",{}),d.jsx("p",{className:q.paragraphSubText,children:"Contact Information"}),d.jsx("div",{className:"mt-6 mb-6",children:d.jsx("table",{className:"min-w-full table-auto border-collapse border border-gray-300",children:d.jsx("tbody",{children:d.jsxs("tr",{children:[d.jsx("td",{className:"w-1/3 px-4 py-3 text-right border border-gray-300 font-semibold",children:"Email"}),d.jsx("td",{className:"w-2/3 px-4 py-3 border border-gray-300",children:r.email})]})})})}),d.jsx("br",{}),d.jsx("p",{className:q.paragraphSubText,children:"You've got an appointment with an attorney"}),d.jsx("div",{className:"mt-6 mb-6",children:d.jsx("table",{className:"min-w-full table-auto border-collapse border border-gray-300",children:d.jsxs("tbody",{children:[d.jsxs("tr",{children:[d.jsx("td",{className:"w-1/3 px-4 py-3 text-right border border-gray-300 font-semibold",children:"Name"}),d.jsx("td",{className:"w-2/3 px-4 py-3 border border-gray-300",children:Nr[0].name})]}),d.jsxs("tr",{children:[d.jsx("td",{className:"w-1/3 px-4 py-3 text-right border border-gray-300 font-semibold",children:"Title"}),d.jsxs("td",{className:"w-2/3 px-4 py-3 border border-gray-300",children:["Attorney at Law specializing in ",Nr[0].title]})]}),d.jsxs("tr",{children:[d.jsx("td",{className:"w-1/3 px-4 py-3 text-right border border-gray-300 font-semibold",children:"Address"}),d.jsx("td",{className:"w-2/3 px-4 py-3 border border-gray-300",children:"Insular Life Building, Legarda Street, corner Abanao extension, Baguio, 2660 Benguet"})]})]})})}),d.jsxs("div",{className:"mt-10 text-center flex justify-between",children:[d.jsx("button",{onClick:s,className:"px-6 py-2 border-2 border-orange-700 text-white rounded-lg hover:bg-gray-500",children:"Go back"}),d.jsx("button",{onClick:o,className:"px-6 py-2 border-2 border-orange-700 hover:bg-slate-700 text-white rounded-lg text-sm font-semibold flex items-center",children:"Confirm"})]}),d.jsx(y6,{formData:r,isOpen:n,onClose:a})]}):d.jsx("div",{className:"text-center mt-10",children:d.jsx("p",{className:"text-white text-lg",children:"No appointment details found."})})};v6.propTypes={formData:ut.shape({firstName:ut.string.isRequired,middleName:ut.string,lastName:ut.string.isRequired,date:ut.string.isRequired,time:ut.string.isRequired,email:ut.string.isRequired})};const yfe=zt(v6),vfe=()=>{const n=qt(),[e,t]=B.useState(!1);return d.jsxs("div",{children:[d.jsx("p",{className:q.paragraphSubText,children:"Instructions for booking an Appointment with"}),d.jsx("h2",{className:`${q.headText} highlight-border`,children:d.jsxs("span",{className:"title-with-line",children:[" ",Nr[1].nickname]})}),d.jsx("table",{className:"mt-5 w-full border-collapse border border-gray-200",children:d.jsxs("tbody",{children:[d.jsx("tr",{children:d.jsxs("td",{className:`${q.appointmentSubTextLower} border border-gray-300 p-3`,children:["1. Securing an appointment is ",d.jsx("b",{children:"FREE OF CHARGE"})," and Appointment Slip is ",d.jsx("b",{children:"NON-TRANSFERABLE"}),"."]})}),d.jsx("tr",{children:d.jsx("td",{className:`${q.appointmentSubTextLower} border border-gray-300 p-3`,children:"2. The appointment must be named after the requester who will personally apply at the Magalgalit Law Office."})}),d.jsx("tr",{children:d.jsx("td",{className:`${q.appointmentSubTextLower} border border-gray-300 p-3`,children:"3. Be at the Magalgalit Law Office at least fifteen minutes before the appointment schedule."})}),d.jsx("tr",{children:d.jsx("td",{className:`${q.appointmentSubTextLower} border border-gray-300 p-3`,children:d.jsxs("label",{children:[d.jsx("input",{type:"checkbox",checked:e,onChange:i=>t(i.target.checked),className:"mr-2"}),"I agree to the collection and use of the data that I will provide through this form for the purpose of booking an appointment. I understand that the collection and use of this data, which may include personal and sensitive personal information, shall be in accordance with the Data Privacy Act of 2021."]})})})]})}),d.jsxs("div",{className:"flex justify-between mt-10",children:[d.jsx("button",{type:"button",onClick:()=>n("/lawyer-status"),className:"px-6 py-2 border-2 border-orange-700 text-white rounded-lg hover:bg-gray-500",children:"Back"}),d.jsx("div",{className:"w-1/4"}),d.jsx(Ds,{to:e?"/appointmentTableLawyer2":"#",className:`px-6 py-2 border-2 border-orange-500 text-white rounded-lg text-sm font-semibold flex items-center ${e?"hover:bg-slate-700":"bg-gray-500 cursor-not-allowed"}`,onClick:i=>{e||i.preventDefault()},children:"Next"})]})]})},xfe=zt(vfe),_fe=()=>{const n=qt();Lo();const[e,t]=B.useState({firstName:"",middleName:"",lastName:"",email:"",date:"",time:""}),[i,r]=B.useState(new Date),[s,o]=B.useState(null),a=["2024-12-24","2024-12-25","2024-12-30","2025-01-01","2025-04-09","2025-04-17","2025-04-19","2025-05-01","2025-06-12","2025-08-21","2025-08-25","2025-11-01","2025-11-30","2025-12-08","2025-12-24","2025-12-25","2025-12-30","2025-12-31"];B.useEffect(()=>{const U=dc(),F=xc(),X=ry(U,async Y=>{if(Y){const ne=ao(F,"users",Y.uid),fe=await jf(ne);if(fe.exists()){const Ce=fe.data();t(ce=>({...ce,firstName:Ce.firstName||"",middleName:Ce.middleName||"",lastName:Ce.lastName||"",email:Ce.email||Y.email}))}}});return()=>X()},[]);const l=()=>{n("/appointmentLawyer2")},c=(U,F)=>{t(X=>({...X,[U]:F}))},u=()=>!e.firstName||!e.lastName||!e.email?(alert("Please fill in all required fields!"),!1):!e.date||!e.time?(alert("Please select a valid date and time slot!"),!1):!0,f=U=>{U.preventDefault(),u()&&n("/appointmentResultLawyer2",{state:{formData:e}})},m=U=>U<new Date().setHours(0,0,0,0),g=U=>a.includes(S(U)),x=U=>!m(U)&&U.getDay()!==0&&U.getDay()!==6&&!g(U),b=U=>new Date(U.getFullYear(),U.getMonth(),1).getDay(),w=U=>new Date(U.getFullYear(),U.getMonth()+1,0).getDate(),v=()=>{const U=b(i),F=w(i),X=[];for(let Y=0;Y<U;Y++)X.push(null);for(let Y=1;Y<=F;Y++){const ne=new Date(i.getFullYear(),i.getMonth(),Y);X.push(ne)}return X},S=U=>{const F=U.getFullYear(),X=String(U.getMonth()+1).padStart(2,"0"),Y=String(U.getDate()).padStart(2,"0");return`${F}-${X}-${Y}`},E=U=>{x(U)&&(o(U),t(F=>({...F,date:S(U),time:""})))},C=()=>{r(U=>{const F=new Date(U.getFullYear(),U.getMonth()-1,1);return F<new Date(2024,0,1)?U:F})},V=()=>{r(U=>new Date(U.getFullYear(),U.getMonth()+1,1))},L=[{id:1,start:"8:00 am",end:"9:00 am"},{id:2,start:"9:00 am",end:"10:00 am"},{id:3,start:"10:00 am",end:"11:00 am"}],N=U=>{const F=new Date,X=new Date().setHours(0,0,0,0),[Y,ne]=U.split(" ");let[fe,Ce]=Y.split(":").map(Number);return ne==="pm"&&fe!==12?fe+=12:ne==="am"&&fe===12&&(fe=0),new Date(X).setHours(fe,Ce,0,0)<F},I=(U,F)=>{if(!(s&&s.toDateString()!==new Date().toDateString())){if(N(U))return}const X=`${U} - ${F}`;t(Y=>({...Y,time:Y.time===X?"":X}))};L.forEach(U=>{console.log(`Time Slot: ${U.start} - Disabled: ${N(U.start)}`)});const A=U=>U?g(U)||U.getDay()===0||U.getDay()===6||m(U)?"bg-gray-800":s?.toDateString()===U?.toDateString()?"bg-orange-800":new Date().toDateString()===U.toDateString()?"border":"hover:bg-orange-900 cursor-pointer":"bg-dark",[M,D]=B.useState(""),[z,j]=B.useState(""),te=["Legal consultation for personal matters","Business-related legal advice","Assistance with document preparation","Representation in a court case","Other reasons"],he=U=>{D(U),t(F=>({...F,reasons:U==="Other reasons"?z:U}))},de=U=>{j(U),M==="Other reasons"&&t(F=>({...F,reasons:U}))};return d.jsxs(d.Fragment,{children:[d.jsx("p",{className:q.paragraphSubText,children:"Schedule a"}),d.jsx("h2",{className:`${q.headText} highlight-border`,children:d.jsx("span",{className:"title-with-line",children:"Consultation"})}),d.jsx("div",{className:"p-6 border-2 border-orange-700 shadow-lg rounded-lg mt-10",children:d.jsxs("form",{onSubmit:f,children:[d.jsxs("div",{className:"flex space-x-4 mb-4",children:[d.jsxs("div",{className:"w-1/3",children:[d.jsx("label",{className:"block text-white font-medium mb-2",htmlFor:"firstName",children:"First Name"}),d.jsx("input",{type:"text",id:"firstName",name:"firstName",value:e.firstName,onChange:U=>c("firstName",U.target.value),className:"w-full px-4 py-2 border border-gray-300 text-white rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-700",placeholder:"First name",required:!0})]}),d.jsxs("div",{className:"w-1/3",children:[d.jsx("label",{className:"block text-white font-medium mb-2",htmlFor:"middleName",children:"Middle Name"}),d.jsx("input",{type:"text",id:"middleName",name:"middleName",value:e.middleName,onChange:U=>c("middleName",U.target.value),className:"w-full px-4 py-2 border border-gray-300 text-white rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-700",placeholder:"Middle name"})]}),d.jsxs("div",{className:"w-1/3",children:[d.jsx("label",{className:"block text-white font-medium mb-2",htmlFor:"lastName",children:"Last Name"}),d.jsx("input",{type:"text",id:"lastName",name:"lastName",value:e.lastName,onChange:U=>c("lastName",U.target.value),className:"w-full px-4 py-2 border border-gray-300 text-white rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-700",placeholder:"Last name",required:!0})]})]}),d.jsxs("div",{className:"w-full mb-4",children:[d.jsx("label",{className:"text-white font-medium mb-2",htmlFor:"email",children:"Email"}),d.jsx("input",{type:"email",id:"email",name:"email",value:e.email,onChange:U=>c("email",U.target.value),className:"w-full px-4 py-2 border border-gray-300 text-white rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-700",placeholder:"sample@gmail.com",required:!0})]}),d.jsx("br",{}),d.jsx("label",{className:"text-white font-medium mb-2",htmlFor:"reason",children:"Select a Reason"}),d.jsx("div",{className:"space-y-3",children:d.jsx("table",{className:"min-w-full border rounded-lg border-gray-300",children:d.jsxs("tbody",{children:[te.map((U,F)=>d.jsx("tr",{className:"rounded-lg",children:d.jsx("td",{className:"border border-gray-300 p-3 rounded-lg",children:d.jsxs("label",{className:"flex items-center space-x-3",children:[d.jsx("input",{type:"radio",name:"reason",value:U,checked:M===U,onChange:X=>he(X.target.value),className:"w-4 h-4"}),d.jsx("span",{className:"text-white",children:U})]})})},F)),M==="Other reasons"&&d.jsx("textarea",{placeholder:"Please specify your reason",value:z,onChange:U=>de(U.target.value),className:"w-full mt-2 p-6 focus:ring-2 focus:ring-orange-700"})]})})}),d.jsx("br",{}),d.jsx("br",{}),d.jsxs("div",{className:"mb-4",children:[d.jsxs("div",{className:"flex justify-between mb-2",children:[d.jsx("button",{type:"button",onClick:C,className:"text-white font-medium py-2 px-4 rounded-lg hover:border-orange-600 focus:outline-none focus:ring-2 focus:ring-orange-700",children:d.jsx(BI,{size:30})}),d.jsxs("p",{className:"text-white font-medium",children:[i.toLocaleString("default",{month:"long"})," ",i.getFullYear()]}),d.jsx("button",{type:"button",onClick:V,className:"text-white font-medium py-2 px-4 rounded-lg hover:border-orange-600 focus:outline-none focus:ring-2 focus:ring-orange-700",children:d.jsx(zI,{size:30})})]}),d.jsx("div",{className:"grid grid-cols-7 gap-2 text-center",children:v().map((U,F)=>d.jsx("div",{className:`py-2 px-4 rounded-lg cursor-pointer ${A(U)}`,onClick:()=>U&&E(U),children:U?U.getDate():""},F))})]}),d.jsx("br",{}),d.jsx("br",{}),d.jsx("br",{}),d.jsxs("div",{className:"mb-4",children:[d.jsx("h3",{className:"text-white font-medium mb-4",children:"These are the available time slots:"}),d.jsx("div",{className:"grid grid-cols-3 gap-4",children:L.map(U=>d.jsxs("button",{type:"button",onClick:()=>I(U.start,U.end),className:`w-full py-2 text-white rounded-lg border ${e.time===`${U.start} - ${U.end}`?"bg-orange-900":"bg-gray-800"}`,children:[U.start," - ",U.end]},U.id))})]}),d.jsx("br",{})," ",d.jsx("br",{}),d.jsxs("div",{className:"text-center flex justify-between",children:[d.jsx("button",{onClick:l,className:"px-6 py-2 border-2 border-orange-700 text-white rounded-lg hover:bg-gray-500",children:"Go back"}),d.jsx("button",{type:"submit",className:"px-6 py-2 border-2 border-orange-700 text-white rounded-lg hover:bg-gray-500",children:"Confirm"})]})]})})]})},wfe=zt(_fe),x6=({formData:n,isOpen:e,onClose:t})=>{const i=qt();if(!e)return null;const r=()=>{t(),i("/lawyer-status")};return d.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex justify-center items-center",children:d.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6 w-96",children:[d.jsx("h2",{className:"text-xl font-semibold mb-4 text-center text-orange-700",children:"Appointment Confirmed!"}),d.jsxs("p",{className:"text-gray-700 text-center",children:["You have successfully booked an appointment in"," ",d.jsx("strong",{children:"Magalgalit Law Office"}),", Baguio City on"," ",d.jsx("strong",{children:n.date})," at ",d.jsx("strong",{children:n.time}),"."]}),d.jsx("div",{className:"mt-6 flex justify-center",children:d.jsx("button",{onClick:r,className:"px-4 py-2 border-2 border-orange-700 text-black rounded hover:bg-gray-500 transition",children:"Close"})})]})})};x6.propTypes={formData:ut.shape({date:ut.string.isRequired,time:ut.string.isRequired}).isRequired,isOpen:ut.bool.isRequired,onClose:ut.func.isRequired};const _6=()=>{const[n,e]=B.useState(!1),t=qt(),r=Lo().state?.formData,s=()=>{t("/appointmentTableLawyer2")},o=async()=>{if(!r){alert("No appointment details found.");return}try{const l=ao(Xo,"appointments",`${r.email}_${r.date}_${r.time}`);await mb(l,{firstName:r.firstName,middleName:r.middleName||"",lastName:r.lastName,email:r.email,date:r.date,time:r.time,reasons:r.reasons||"No reason selected",lawyer:{name:Nr[1].name,title:Nr[2].title,address:"Insular Life Building, Legarda Street, corner Abanao extension, Baguio, 2660 Benguet"},timestamp:new Date}),await GI.send("service_f8p4u88","template_rtaqjfs",{from_name:`${r.firstName} ${r.lastName}`,to_name:"Siabell",from_email:r.email,message:`Appointment confirmed for ${r.firstName} ${r.lastName} on ${r.date} at ${r.time}.`},"Z-JlpUZqWVtTdl2mp"),e(!0)}catch(l){console.error("Error saving appointment or sending email:",l),alert("Something went wrong, please try again.")}},a=()=>{e(!1)};return r?d.jsxs("div",{className:"container mx-auto p-6",children:[d.jsx("p",{className:q.paragraphSubText,children:"Appointment"}),d.jsx("h2",{className:`${q.headText} highlight-border`,children:d.jsx("span",{className:"title-with-line",children:"Confirmation"})}),d.jsx("p",{className:q.paragraphSubTextLower,children:"Please review the details of your appointment. Keep in mind that this appointment is non-transferable."}),d.jsx("div",{className:"mt-6 mb-6",children:d.jsx("table",{className:"min-w-full table-auto border-collapse border border-gray-300",children:d.jsxs("tbody",{children:[d.jsxs("tr",{children:[d.jsx("td",{className:"w-1/3 px-4 py-3 text-right border border-gray-300 font-semibold",children:"First Name"}),d.jsx("td",{className:"w-2/3 px-4 py-3 border border-gray-300",children:r.firstName})]}),d.jsxs("tr",{children:[d.jsx("td",{className:"w-1/3 px-4 py-3 text-right border border-gray-300 font-semibold",children:"Middle Name"}),d.jsx("td",{className:"w-2/3 px-4 py-3 border border-gray-300",children:r.middleName||"N/A"})]}),d.jsxs("tr",{children:[d.jsx("td",{className:"w-1/3 px-4 py-3 text-right border border-gray-300 font-semibold",children:"Last Name"}),d.jsx("td",{className:"w-2/3 px-4 py-3 border border-gray-300",children:r.lastName})]}),d.jsxs("tr",{children:[d.jsx("td",{className:"w-1/3 px-4 py-3 text-right border border-gray-300 font-semibold",children:"Date of Appointment"}),d.jsx("td",{className:"w-2/3 px-4 py-3 border border-gray-300",children:r.date})]}),d.jsxs("tr",{children:[d.jsx("td",{className:"w-1/3 px-4 py-3 text-right border border-gray-300 font-semibold",children:"Time of Appointment"}),d.jsx("td",{className:"w-2/3 px-4 py-3 border border-gray-300",children:r.time})]}),d.jsxs("tr",{children:[d.jsx("td",{className:"w-1/3 px-4 py-3 text-right border border-gray-300 font-semibold",children:"Selected Reason"}),d.jsx("td",{className:"w-2/3 px-4 py-3 border border-gray-300",children:r.reasons||"No reason selected"})]})]})})}),d.jsx("br",{}),d.jsx("p",{className:q.paragraphSubText,children:"Contact Information"}),d.jsx("div",{className:"mt-6 mb-6",children:d.jsx("table",{className:"min-w-full table-auto border-collapse border border-gray-300",children:d.jsx("tbody",{children:d.jsxs("tr",{children:[d.jsx("td",{className:"w-1/3 px-4 py-3 text-right border border-gray-300 font-semibold",children:"Email"}),d.jsx("td",{className:"w-2/3 px-4 py-3 border border-gray-300",children:r.email})]})})})}),d.jsx("br",{}),d.jsx("p",{className:q.paragraphSubText,children:"You've got an appointment with an attorney"}),d.jsx("div",{className:"mt-6 mb-6",children:d.jsx("table",{className:"min-w-full table-auto border-collapse border border-gray-300",children:d.jsxs("tbody",{children:[d.jsxs("tr",{children:[d.jsx("td",{className:"w-1/3 px-4 py-3 text-right border border-gray-300 font-semibold",children:"Name"}),d.jsx("td",{className:"w-2/3 px-4 py-3 border border-gray-300",children:Nr[1].name})]}),d.jsxs("tr",{children:[d.jsx("td",{className:"w-1/3 px-4 py-3 text-right border border-gray-300 font-semibold",children:"Title"}),d.jsxs("td",{className:"w-2/3 px-4 py-3 border border-gray-300",children:["Attorney at Law specializing in ",Nr[1].title]})]}),d.jsxs("tr",{children:[d.jsx("td",{className:"w-1/3 px-4 py-3 text-right border border-gray-300 font-semibold",children:"Address"}),d.jsx("td",{className:"w-2/3 px-4 py-3 border border-gray-300",children:"Insular Life Building, Legarda Street, corner Abanao extension, Baguio, 2660 Benguet"})]})]})})}),d.jsxs("div",{className:"mt-10 text-center flex justify-between",children:[d.jsx("button",{onClick:s,className:"px-6 py-2 border-2 border-orange-700 text-white rounded-lg hover:bg-gray-500",children:"Go back"}),d.jsx("button",{onClick:o,className:"px-6 py-2 border-2 border-orange-700 hover:bg-slate-700 text-white rounded-lg text-sm font-semibold flex items-center",children:"Confirm"})]}),d.jsx(x6,{formData:r,isOpen:n,onClose:a})]}):d.jsx("div",{className:"text-center mt-10",children:d.jsx("p",{className:"text-white text-lg",children:"No appointment details found."})})};_6.propTypes={formData:ut.shape({firstName:ut.string.isRequired,middleName:ut.string,lastName:ut.string.isRequired,date:ut.string.isRequired,time:ut.string.isRequired,email:ut.string.isRequired})};const bfe=zt(_6),Sfe=()=>{const n=qt(),[e,t]=B.useState(!1);return d.jsxs("div",{children:[d.jsx("p",{className:q.paragraphSubText,children:"Instructions for booking an Appointment with"}),d.jsx("h2",{className:`${q.headText} highlight-border`,children:d.jsxs("span",{className:"title-with-line",children:[" ",Nr[2].nickname]})}),d.jsx("table",{className:"mt-5 w-full border-collapse border border-gray-200",children:d.jsxs("tbody",{children:[d.jsx("tr",{children:d.jsxs("td",{className:`${q.appointmentSubTextLower} border border-gray-300 p-3`,children:["1. Securing an appointment is ",d.jsx("b",{children:"FREE OF CHARGE"})," and Appointment Slip is ",d.jsx("b",{children:"NON-TRANSFERABLE"}),"."]})}),d.jsx("tr",{children:d.jsx("td",{className:`${q.appointmentSubTextLower} border border-gray-300 p-3`,children:"2. The appointment must be named after the requester who will personally apply at the Magalgalit Law Office."})}),d.jsx("tr",{children:d.jsx("td",{className:`${q.appointmentSubTextLower} border border-gray-300 p-3`,children:"3. Be at the Magalgalit Law Office at least fifteen minutes before the appointment schedule."})}),d.jsx("tr",{children:d.jsx("td",{className:`${q.appointmentSubTextLower} border border-gray-300 p-3`,children:d.jsxs("label",{children:[d.jsx("input",{type:"checkbox",checked:e,onChange:i=>t(i.target.checked),className:"mr-2"}),"I agree to the collection and use of the data that I will provide through this form for the purpose of booking an appointment. I understand that the collection and use of this data, which may include personal and sensitive personal information, shall be in accordance with the Data Privacy Act of 2021."]})})})]})}),d.jsxs("div",{className:"flex justify-between mt-10",children:[d.jsx("button",{type:"button",onClick:()=>n("/lawyer-status"),className:"px-6 py-2 border-2 border-orange-700 text-white rounded-lg hover:bg-gray-500",children:"Back"}),d.jsx("div",{className:"w-1/4"}),d.jsx(Ds,{to:e?"/appointmentTableLawyer3":"#",className:`px-6 py-2 border-2 border-orange-500 text-white rounded-lg text-sm font-semibold flex items-center ${e?"hover:bg-slate-700":"bg-gray-500 cursor-not-allowed"}`,onClick:i=>{e||i.preventDefault()},children:"Next"})]})]})},Tfe=zt(Sfe),Efe=()=>{const n=qt();Lo();const[e,t]=B.useState({firstName:"",middleName:"",lastName:"",email:"",date:"",time:""}),[i,r]=B.useState(new Date),[s,o]=B.useState(null),a=["2024-12-24","2024-12-25","2024-12-30","2025-01-01","2025-04-09","2025-04-17","2025-04-19","2025-05-01","2025-06-12","2025-08-21","2025-08-25","2025-11-01","2025-11-30","2025-12-08","2025-12-24","2025-12-25","2025-12-30","2025-12-31"];B.useEffect(()=>{const U=dc(),F=xc(),X=ry(U,async Y=>{if(Y){const ne=ao(F,"users",Y.uid),fe=await jf(ne);if(fe.exists()){const Ce=fe.data();t(ce=>({...ce,firstName:Ce.firstName||"",middleName:Ce.middleName||"",lastName:Ce.lastName||"",email:Ce.email||Y.email}))}}});return()=>X()},[]);const l=()=>{n("/appointmentLawyer2")},c=(U,F)=>{t(X=>({...X,[U]:F}))},u=()=>!e.firstName||!e.lastName||!e.email?(alert("Please fill in all required fields!"),!1):!e.date||!e.time?(alert("Please select a valid date and time slot!"),!1):!0,f=U=>{U.preventDefault(),u()&&n("/appointmentResultLawyer3",{state:{formData:e}})},m=U=>U<new Date().setHours(0,0,0,0),g=U=>a.includes(S(U)),x=U=>!m(U)&&U.getDay()!==0&&U.getDay()!==6&&!g(U),b=U=>new Date(U.getFullYear(),U.getMonth(),1).getDay(),w=U=>new Date(U.getFullYear(),U.getMonth()+1,0).getDate(),v=()=>{const U=b(i),F=w(i),X=[];for(let Y=0;Y<U;Y++)X.push(null);for(let Y=1;Y<=F;Y++){const ne=new Date(i.getFullYear(),i.getMonth(),Y);X.push(ne)}return X},S=U=>{const F=U.getFullYear(),X=String(U.getMonth()+1).padStart(2,"0"),Y=String(U.getDate()).padStart(2,"0");return`${F}-${X}-${Y}`},E=U=>{x(U)&&(o(U),t(F=>({...F,date:S(U),time:""})))},C=()=>{r(U=>{const F=new Date(U.getFullYear(),U.getMonth()-1,1);return F<new Date(2024,0,1)?U:F})},V=()=>{r(U=>new Date(U.getFullYear(),U.getMonth()+1,1))},L=[{id:1,start:"8:00 am",end:"9:00 am"},{id:2,start:"9:00 am",end:"10:00 am"},{id:3,start:"10:00 am",end:"11:00 am"}],N=U=>{const F=new Date,X=new Date().setHours(0,0,0,0),[Y,ne]=U.split(" ");let[fe,Ce]=Y.split(":").map(Number);return ne==="pm"&&fe!==12?fe+=12:ne==="am"&&fe===12&&(fe=0),new Date(X).setHours(fe,Ce,0,0)<F},I=(U,F)=>{if(!(s&&s.toDateString()!==new Date().toDateString())){if(N(U))return}const X=`${U} - ${F}`;t(Y=>({...Y,time:Y.time===X?"":X}))};L.forEach(U=>{console.log(`Time Slot: ${U.start} - Disabled: ${N(U.start)}`)});const A=U=>U?g(U)||U.getDay()===0||U.getDay()===6||m(U)?"bg-gray-800":s?.toDateString()===U?.toDateString()?"bg-orange-800":new Date().toDateString()===U.toDateString()?"border":"hover:bg-orange-900 cursor-pointer":"bg-dark",[M,D]=B.useState(""),[z,j]=B.useState(""),te=["Legal consultation for personal matters","Business-related legal advice","Assistance with document preparation","Representation in a court case","Other reasons"],he=U=>{D(U),t(F=>({...F,reasons:U==="Other reasons"?z:U}))},de=U=>{j(U),M==="Other reasons"&&t(F=>({...F,reasons:U}))};return d.jsxs(d.Fragment,{children:[d.jsx("p",{className:q.paragraphSubText,children:"Schedule a"}),d.jsx("h2",{className:`${q.headText} highlight-border`,children:d.jsx("span",{className:"title-with-line",children:"Consultation"})}),d.jsx("div",{className:"p-6 border-2 border-orange-700 shadow-lg rounded-lg mt-10",children:d.jsxs("form",{onSubmit:f,children:[d.jsxs("div",{className:"flex space-x-4 mb-4",children:[d.jsxs("div",{className:"w-1/3",children:[d.jsx("label",{className:"block text-white font-medium mb-2",htmlFor:"firstName",children:"First Name"}),d.jsx("input",{type:"text",id:"firstName",name:"firstName",value:e.firstName,onChange:U=>c("firstName",U.target.value),className:"w-full px-4 py-2 border border-gray-300 text-white rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-700",placeholder:"First name",required:!0})]}),d.jsxs("div",{className:"w-1/3",children:[d.jsx("label",{className:"block text-white font-medium mb-2",htmlFor:"middleName",children:"Middle Name"}),d.jsx("input",{type:"text",id:"middleName",name:"middleName",value:e.middleName,onChange:U=>c("middleName",U.target.value),className:"w-full px-4 py-2 border border-gray-300 text-white rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-700",placeholder:"Middle name"})]}),d.jsxs("div",{className:"w-1/3",children:[d.jsx("label",{className:"block text-white font-medium mb-2",htmlFor:"lastName",children:"Last Name"}),d.jsx("input",{type:"text",id:"lastName",name:"lastName",value:e.lastName,onChange:U=>c("lastName",U.target.value),className:"w-full px-4 py-2 border border-gray-300 text-white rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-700",placeholder:"Last name",required:!0})]})]}),d.jsxs("div",{className:"w-full mb-4",children:[d.jsx("label",{className:"text-white font-medium mb-2",htmlFor:"email",children:"Email"}),d.jsx("input",{type:"email",id:"email",name:"email",value:e.email,onChange:U=>c("email",U.target.value),className:"w-full px-4 py-2 border border-gray-300 text-white rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-700",placeholder:"sample@gmail.com",required:!0})]}),d.jsx("br",{}),d.jsx("label",{className:"text-white font-medium mb-2",htmlFor:"reason",children:"Select a Reason"}),d.jsx("div",{className:"space-y-3",children:d.jsx("table",{className:"min-w-full border rounded-lg border-gray-300",children:d.jsxs("tbody",{children:[te.map((U,F)=>d.jsx("tr",{className:"rounded-lg",children:d.jsx("td",{className:"border border-gray-300 p-3 rounded-lg",children:d.jsxs("label",{className:"flex items-center space-x-3",children:[d.jsx("input",{type:"radio",name:"reason",value:U,checked:M===U,onChange:X=>he(X.target.value),className:"w-4 h-4"}),d.jsx("span",{className:"text-white",children:U})]})})},F)),M==="Other reasons"&&d.jsx("textarea",{placeholder:"Please specify your reason",value:z,onChange:U=>de(U.target.value),className:"w-full mt-2 p-6 focus:ring-2 focus:ring-orange-700"})]})})}),d.jsx("br",{}),d.jsx("br",{}),d.jsxs("div",{className:"mb-4",children:[d.jsxs("div",{className:"flex justify-between mb-2",children:[d.jsx("button",{type:"button",onClick:C,className:"text-white font-medium py-2 px-4 rounded-lg hover:border-orange-600 focus:outline-none focus:ring-2 focus:ring-orange-700",children:d.jsx(BI,{size:30})}),d.jsxs("p",{className:"text-white font-medium",children:[i.toLocaleString("default",{month:"long"})," ",i.getFullYear()]}),d.jsx("button",{type:"button",onClick:V,className:"text-white font-medium py-2 px-4 rounded-lg hover:border-orange-600 focus:outline-none focus:ring-2 focus:ring-orange-700",children:d.jsx(zI,{size:30})})]}),d.jsx("div",{className:"grid grid-cols-7 gap-2 text-center",children:v().map((U,F)=>d.jsx("div",{className:`py-2 px-4 rounded-lg cursor-pointer ${A(U)}`,onClick:()=>U&&E(U),children:U?U.getDate():""},F))})]}),d.jsx("br",{}),d.jsx("br",{}),d.jsxs("div",{className:"mb-4",children:[d.jsx("h3",{className:"text-white font-medium mb-4",children:"These are the available time slots:"}),d.jsx("div",{className:"grid grid-cols-3 gap-4",children:L.map(U=>d.jsxs("button",{type:"button",onClick:()=>I(U.start,U.end),className:`w-full py-2 text-white rounded-lg border ${e.time===`${U.start} - ${U.end}`?"bg-orange-900":"bg-gray-800"}`,children:[U.start," - ",U.end]},U.id))})]}),d.jsx("br",{})," ",d.jsx("br",{}),d.jsxs("div",{className:"text-center flex justify-between",children:[d.jsx("button",{onClick:l,className:"px-6 py-2 border-2 border-orange-700 text-white rounded-lg hover:bg-gray-500",children:"Go back"}),d.jsx("button",{type:"submit",className:"px-6 py-2 border-2 border-orange-700 text-white rounded-lg hover:bg-gray-500",children:"Confirm"})]})]})})]})},Cfe=zt(Efe),w6=({formData:n,isOpen:e,onClose:t})=>{const i=qt();if(!e)return null;const r=()=>{t(),i("/lawyer-status")};return d.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex justify-center items-center",children:d.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6 w-96",children:[d.jsx("h2",{className:"text-xl font-semibold mb-4 text-center text-orange-700",children:"Appointment Confirmed!"}),d.jsxs("p",{className:"text-gray-700 text-center",children:["You have successfully booked an appointment in"," ",d.jsx("strong",{children:"Magalgalit Law Office"}),", Baguio City on"," ",d.jsx("strong",{children:n.date})," at ",d.jsx("strong",{children:n.time}),"."]}),d.jsx("div",{className:"mt-6 flex justify-center",children:d.jsx("button",{onClick:r,className:"px-4 py-2 border-2 border-orange-700 text-black rounded hover:bg-gray-500 transition",children:"Close"})})]})})};w6.propTypes={formData:ut.shape({date:ut.string.isRequired,time:ut.string.isRequired}).isRequired,isOpen:ut.bool.isRequired,onClose:ut.func.isRequired};const b6=()=>{const[n,e]=B.useState(!1),t=qt(),r=Lo().state?.formData,s=()=>{t("/appointmentTableLawyer3")},o=async()=>{if(!r){alert("No appointment details found.");return}try{const l=ao(Xo,"appointments",`${r.email}_${r.date}_${r.time}`);await mb(l,{firstName:r.firstName,middleName:r.middleName||"",lastName:r.lastName,email:r.email,date:r.date,time:r.time,reasons:r.reasons||"No reason selected",lawyer:{name:Nr[2].name,title:Nr[2].title,address:"Insular Life Building, Legarda Street, corner Abanao extension, Baguio, 2660 Benguet"},timestamp:new Date}),await GI.send("service_f8p4u88","template_rtaqjfs",{from_name:`${r.firstName} ${r.lastName}`,to_name:"Siabell",from_email:r.email,message:`Appointment confirmed for ${r.firstName} ${r.lastName} on ${r.date} at ${r.time}.`},"Z-JlpUZqWVtTdl2mp"),e(!0)}catch(l){console.error("Error saving appointment or sending email:",l),alert("Something went wrong, please try again.")}},a=()=>{e(!1)};return r?d.jsxs("div",{className:"container mx-auto p-6",children:[d.jsx("p",{className:q.paragraphSubText,children:"Appointment"}),d.jsx("h2",{className:`${q.headText} highlight-border`,children:d.jsx("span",{className:"title-with-line",children:"Confirmation"})}),d.jsx("p",{className:q.paragraphSubTextLower,children:"Please review the details of your appointment. Keep in mind that this appointment is non-transferable."}),d.jsx("div",{className:"mt-6 mb-6",children:d.jsx("table",{className:"min-w-full table-auto border-collapse border border-gray-300",children:d.jsxs("tbody",{children:[d.jsxs("tr",{children:[d.jsx("td",{className:"w-1/3 px-4 py-3 text-right border border-gray-300 font-semibold",children:"First Name"}),d.jsx("td",{className:"w-2/3 px-4 py-3 border border-gray-300",children:r.firstName})]}),d.jsxs("tr",{children:[d.jsx("td",{className:"w-1/3 px-4 py-3 text-right border border-gray-300 font-semibold",children:"Middle Name"}),d.jsx("td",{className:"w-2/3 px-4 py-3 border border-gray-300",children:r.middleName||"N/A"})]}),d.jsxs("tr",{children:[d.jsx("td",{className:"w-1/3 px-4 py-3 text-right border border-gray-300 font-semibold",children:"Last Name"}),d.jsx("td",{className:"w-2/3 px-4 py-3 border border-gray-300",children:r.lastName})]}),d.jsxs("tr",{children:[d.jsx("td",{className:"w-1/3 px-4 py-3 text-right border border-gray-300 font-semibold",children:"Date of Appointment"}),d.jsx("td",{className:"w-2/3 px-4 py-3 border border-gray-300",children:r.date})]}),d.jsxs("tr",{children:[d.jsx("td",{className:"w-1/3 px-4 py-3 text-right border border-gray-300 font-semibold",children:"Time of Appointment"}),d.jsx("td",{className:"w-2/3 px-4 py-3 border border-gray-300",children:r.time})]}),d.jsxs("tr",{children:[d.jsx("td",{className:"w-1/3 px-4 py-3 text-right border border-gray-300 font-semibold",children:"Selected Reasons"}),d.jsx("td",{className:"w-2/3 px-4 py-3 border border-gray-300",children:r.reasons||"No reason selected"})]})]})})}),d.jsx("br",{}),d.jsx("p",{className:q.paragraphSubText,children:"Contact Information"}),d.jsx("div",{className:"mt-6 mb-6",children:d.jsx("table",{className:"min-w-full table-auto border-collapse border border-gray-300",children:d.jsx("tbody",{children:d.jsxs("tr",{children:[d.jsx("td",{className:"w-1/3 px-4 py-3 text-right border border-gray-300 font-semibold",children:"Email"}),d.jsx("td",{className:"w-2/3 px-4 py-3 border border-gray-300",children:r.email})]})})})}),d.jsx("br",{}),d.jsx("p",{className:q.paragraphSubText,children:"You've got an appointment with an attorney"}),d.jsx("div",{className:"mt-6 mb-6",children:d.jsx("table",{className:"min-w-full table-auto border-collapse border border-gray-300",children:d.jsxs("tbody",{children:[d.jsxs("tr",{children:[d.jsx("td",{className:"w-1/3 px-4 py-3 text-right border border-gray-300 font-semibold",children:"Name"}),d.jsx("td",{className:"w-2/3 px-4 py-3 border border-gray-300",children:Nr[2].name})]}),d.jsxs("tr",{children:[d.jsx("td",{className:"w-1/3 px-4 py-3 text-right border border-gray-300 font-semibold",children:"Title"}),d.jsxs("td",{className:"w-2/3 px-4 py-3 border border-gray-300",children:["Attorney at Law specializing in ",Nr[2].title]})]}),d.jsxs("tr",{children:[d.jsx("td",{className:"w-1/3 px-4 py-3 text-right border border-gray-300 font-semibold",children:"Address"}),d.jsx("td",{className:"w-2/3 px-4 py-3 border border-gray-300",children:"Insular Life Building, Legarda Street, corner Abanao extension, Baguio, 2660 Benguet"})]})]})})}),d.jsxs("div",{className:"mt-10 text-center flex justify-between",children:[d.jsx("button",{onClick:s,className:"px-6 py-2 border-2 border-orange-700 text-white rounded-lg hover:bg-gray-500",children:"Go back"}),d.jsx("button",{onClick:o,className:"px-6 py-2 border-2 border-orange-700 hover:bg-slate-700 text-white rounded-lg text-sm font-semibold flex items-center",children:"Confirm"})]}),d.jsx(w6,{formData:r,isOpen:n,onClose:a})]}):d.jsx("div",{className:"text-center mt-10",children:d.jsx("p",{className:"text-white text-lg",children:"No appointment details found."})})};b6.propTypes={formData:ut.shape({firstName:ut.string.isRequired,middleName:ut.string,lastName:ut.string.isRequired,date:ut.string.isRequired,time:ut.string.isRequired,email:ut.string.isRequired})};const Afe=zt(b6),Mfe=()=>{const{selectedWord:n,definition:e,tooltipPosition:t,handleTextSelection:i}=Ln();return d.jsxs("div",{children:[d.jsx(Pn,{children:d.jsxs(Cn.div,{initial:"hidden",animate:"show",variants:Si("top","spring",.5,1),id:"Constitution_ID",className:"p-8 min-h-screen text-center image-border-table",children:[d.jsxs(Cn.div,{variants:Si("top","spring",.5,1),className:"mb-16",children:[d.jsx(Cn.p,{variants:Si("top","spring",.5,1.5),onMouseUp:i,className:`${q.paragraphSubTextLower} text-white mb-2`,children:d.jsx("em",{children:"Republic of the Philippines"})}),d.jsx(Cn.p,{variants:Si("top","spring",.5,2),onMouseUp:i,className:`${q.paragraphSubText} text-white mb-2`,children:d.jsx("strong",{children:"Congress of the Philippines"})}),d.jsx("br",{}),d.jsx(Cn.p,{variants:Si("top","spring",.5,3),onMouseUp:i,className:`${q.paragraphSubTextLower} text-white mb-2`,children:"Metro Manila"}),d.jsx("br",{}),d.jsx("br",{}),d.jsx(Cn.p,{variants:Si("top","spring",.5,4),onMouseUp:i,className:`${q.paragraphSubTextLower} text-white mb-2`,children:"Nineteenth Congress"}),d.jsx("br",{}),d.jsx("br",{}),d.jsx(Cn.p,{variants:Si("top","spring",.5,6),onMouseUp:i,className:`${q.paragraphSubTextLower} text-white mb-2`,children:"Third Regular Session"}),d.jsx("br",{}),d.jsx("br",{}),d.jsxs(Cn.p,{variants:Si("top","spring",.5,5),onMouseUp:i,className:`${q.paragraphSubTextLower} text-white mb-2`,children:["Begun and held in Metro Manila, on Monday, the twenty-second ",d.jsx("br",{})," day of July, two thousand twenty-four."]}),d.jsx(Cn.hr,{variants:Si("top","tween",.5,4),initial:"hidden",animate:"show",className:"w-20 mx-auto border-t-2 border-white my-4"})]}),d.jsxs(Cn.div,{variants:Si("top","spring",.5,7),className:"mb-6",children:[d.jsx("h3",{onMouseUp:i,className:`${q.paragraphSubText} text-white mb-4 font-semibold`,children:"This Act shall be known as The Indigenous Peoples Rights Act of 1997."}),d.jsx("p",{onMouseUp:i,className:`${q.paragraphSubTextLower} text-white mb-12`,children:"AN ACT AMENDING SECTIONS 27, 28, 32, 34, 57, 106, 108, 109, 112, 135, 237, 237-A, 269, 292, 293, 294, 295, 296, 297, 300, 301, 308, 309, 310, AND 311, AND ADDING NEW SECTIONS 135-A, 295-A, 296-A, AND 297-A OF THE NATIONAL INTERNAL REVENUE CODE OF 1997, AS AMENDED, AND FOR OTHER PURPOSES"})]}),d.jsxs(Cn.div,{variants:Si("top","spring",.6,8),className:"mb-12",children:[d.jsx("h3",{className:`${q.paragraphSubText} text-white text-2xl font-semibold`,children:"Table of Contents"}),d.jsx("hr",{className:"w-20 mx-auto border-t-2 border-white my-4"})]}),d.jsx(Cn.div,{variants:EB(.2),className:"space-y-4 text-left max-w-3xl mx-auto",children:Z5.map((r,s)=>d.jsx(Cn.div,{variants:Si("bottom","spring",s*.2,.9),children:d.jsx(Ds,{to:r.href,className:`${q.paragraphSubText} text-white hover:underline hover:text-purple-400 block py-2 px-4 rounded-md transition duration-300 transform hover:scale-105 hover:shadow-lg`,children:r.topic})},r.href))})]})}),n&&d.jsxs("div",{className:"absolute text-left bg-white p-4 shadow-lg rounded-lg max-w-xs text-black",style:{left:t.left,top:t.top,zIndex:100},children:[d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsx("p",{className:q.dictionaryText,children:n}),d.jsx("i",{className:"fas fa-volume-up ml-5 text-gray-600"})]}),d.jsx("hr",{className:"border-2 mb-2"}),d.jsx("p",{children:e})]})]})},Ife=zt(Mfe,""),X3=[{id:"national_territory",title:"National Territory",subtitle:"ARTICLE I",paragraph:"The national territory comprises the Philippine archipelago, with all the islands and waters embraced therein, and all other territories over which the Philippines has sovereignty or jurisdiction, consisting of its terrestrial, fluvial, and aerial domains, including its territorial sea, the seabed, the subsoil, the insular shelves, and other submarine areas. The waters around, between, and connecting the islands of the archipelago, regardless of their breadth and dimensions, form part of the internal waters of the Philippines.",btn:"/articleTwo"}],Pfe=()=>{const n=qt(),{selectedWord:e,definition:t,tooltipPosition:i,handleTextSelection:r}=Ln(),[s,o]=B.useState(!1);B.useEffect(()=>{const c=()=>{window.scrollY>200?o(!0):o(!1)};return window.addEventListener("scroll",c),()=>window.removeEventListener("scroll",c)},[]);const a=()=>{window.scrollTo({top:0,behavior:"smooth"})},l=()=>{n(X3[0].btn)};return d.jsxs("div",{className:"text-spacing-3 leading-relaxed tracking-wide",onMouseUp:r,children:[d.jsx(Pn,{children:d.jsxs("div",{children:[X3.map(c=>d.jsxs("div",{className:"my-5",children:[d.jsx("h5",{className:q.paragraphSubText,children:c.subtitle}),d.jsx("h4",{className:`${q.headText} mb-10`,children:c.title}),d.jsx("p",{onMouseUp:r,className:q.paragraphSubTextLower,children:c.paragraph})]},c.id)),e&&d.jsxs("div",{className:"absolute text-left bg-white p-4 shadow-lg rounded-lg max-w-xs text-black",style:{left:i.left,top:i.top,zIndex:100},children:[d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsx("p",{className:q.dictionaryText,children:e}),d.jsx("i",{className:"fas fa-volume-up ml-5 text-gray-600"})]}),d.jsx("hr",{className:"border-2 mb-2"}),d.jsx("p",{children:t})]}),d.jsxs("div",{className:"mt-5 text-center",children:[d.jsx("hr",{}),d.jsx("br",{}),d.jsx("button",{onClick:l,className:"px-6 py-2 border justify-end text-white rounded-lg hover:bg-gray-500 flex ml-auto",children:d.jsx("span",{className:"text-xs",children:"ARTICLE II"})})]})]})}),s&&d.jsx("button",{onClick:a,className:"fixed bottom-6 right-6 w-12 h-12 bg-gray-600 text-white rounded-full shadow-lg flex items-center justify-center hover:bg-gray-800 transition-all duration-300",children:d.jsx("i",{className:"fas fa-arrow-up"})})]})},Rfe=zt(Pfe),Nfe=[{id:"principles_and_state_policies",title:"Declaration of Principles and State Policies",subtitle:"ARTICLE II",btn:"/articleThree",principle:"Principles",principle_section:[{name:"Section 1",paragraph:"The Philippines is a democratic and republican State. Sovereignty resides in the people and all government authority emanates from them."},{name:"Section 2",paragraph:"The Philippines renounces war as an instrument of national policy, adopts the generally accepted principles of international law as part of the law of the land and adheres to the policy of peace, equality, justice, freedom, cooperation, and amity with all nations"},{name:"Section 3",paragraph:"Civilian authority is, at all times, supreme over the military. The Armed Forces of the Philippines is the protector of the people and the State. Its goal is to secure the sovereignty of the State and the integrity of the national territory"},{name:"Section 4",paragraph:"The prime duty of the Government is to serve and protect the people. The Government may call upon the people to defend the State and, in the fulfillment thereof, all citizens may be required, under conditions provided by law, to render personal military or civil service."},{name:"Section 5",paragraph:"The maintenance of peace and order, the protection of life, liberty, and property, and the promotion of the general welfare are essential for the enjoyment by all the people of the blessings of democracy."},{name:"Section 6",paragraph:"The separation of Church and State shall be inviolable."}],policy:"Policies",policy_section:[{name:"Section 7",paragraph:"The State shall pursue an independent foreign policy. In its relations with other states the paramount consideration shall be national sovereignty, territorial integrity, national interest, and the right to self-determination."},{name:"Section 8",paragraph:"The Philippines, consistent with the national interest, adopts and pursues a policy of freedom from nuclear weapons in its territory."},{name:"Section 9",paragraph:"The State shall promote a just and dynamic social order that will ensure the prosperity and independence of the nation and free the people from poverty through policies that provide adequate social services, promote full employment, a rising standard of living, and an improved quality of life for all."},{name:"Section 10",paragraph:"The State shall promote social justice in all phases of national development."},{name:"Section 11",paragraph:"The State values the dignity of every human person and guarantees full respect for human rights."},{name:"Section 12",paragraph:"The State recognizes the sanctity of family life and shall protect and strengthen the family as a basic autonomous social institution. It shall equally protect the life of the mother and the life of the unborn from conception. The natural and primary right and duty of parents in the rearing of the youth for civic efficiency and the development of moral character shall receive the support of the Government."},{name:"Section 13",paragraph:"The State recognizes the vital role of the youth in nation-building and shall promote and protect their physical, moral, spiritual, intellectual, and social well-being. It shall inculcate in the youth patriotism and nationalism, and encourage their involvement in public and civic affairs."},{name:"Section 14",paragraph:"The State recognizes the role of women in nation-building, and shall ensure the fundamental equality before the law of women and men."},{name:"Section 15",paragraph:"The State shall protect and promote the right to health of the people and instill health consciousness among them."},{name:"Section 16",paragraph:"The State shall protect and advance the right of the people to a balanced and healthful ecology in accord with the rhythm and harmony of nature."},{name:"Section 17",paragraph:"The State shall give priority to education, science and technology, arts, culture, and sports to foster patriotism and nationalism, accelerate social progress, and promote total human liberation and development."},{name:"Section 18",paragraph:"The State affirms labor as a primary social economic force. It shall protect the rights of workers and promote their welfare."},{name:"Section 19",paragraph:"The State shall develop a self-reliant and independent national economy effectively controlled by Filipinos."},{name:"Section 20",paragraph:"The State recognizes the indispensable role of the private sector, encourages private enterprise, and provides incentives to needed investments."},{name:"Section 21",paragraph:"The State shall promote comprehensive rural development and agrarian reform."},{name:"Section 22",paragraph:"The State recognizes and promotes the rights of indigenous cultural communities within the framework of national unity and development."},{name:"Section 23",paragraph:"The State shall encourage non-governmental, community-based, or sectoral organizations that promote the welfare of the nation."},{name:"Section 24",paragraph:"The State recognizes the vital role of communication and information in nation-building."},{name:"Section 25",paragraph:"The State shall ensure the autonomy of local governments."},{name:"Section 26",paragraph:"The State shall guarantee equal access to opportunities for public service, and prohibit political dynasties as may be defined by law."},{name:"Section 27",paragraph:"The State shall maintain honesty and integrity in the public service and take positive and effective measures against graft and corruption."},{name:"Section 28",paragraph:"Subject to reasonable conditions prescribed by law, the State adopts and implements a policy of full public disclosure of all its transactions involving public interest."}]}],Lfe=()=>{const n=qt(),{selectedWord:e,definition:t,tooltipPosition:i,handleTextSelection:r}=Ln(),[s,o]=B.useState(!1);B.useEffect(()=>{const u=()=>{window.scrollY>200?o(!0):o(!1)};return window.addEventListener("scroll",u),()=>window.removeEventListener("scroll",u)},[]);const a=()=>{window.scrollTo({top:0,behavior:"smooth"})},l=()=>{n("/articleThree")},c=()=>{n("/articleOne")};return d.jsxs("div",{className:"text-spacing-3 leading-relaxed tracking-wide",children:[d.jsx(Pn,{children:d.jsxs("div",{children:[Nfe.map(u=>d.jsxs("div",{className:"my-5",children:[d.jsx("h5",{className:q.paragraphSubText,children:u.subtitle}),d.jsx("h4",{className:`${q.headText} mb-10`,children:u.title}),d.jsxs("div",{children:[d.jsx("h5",{id:"principles",className:q.paragraphSubText,children:"Principles"}),u.principle_section.map((f,m)=>d.jsxs("div",{className:"my-4",children:[d.jsx("h6",{className:q.paragraphSubText,children:f.name}),d.jsx("p",{onMouseUp:r,className:q.paragraphSubTextLower,children:f.paragraph})]},m))]}),d.jsxs("div",{children:[d.jsx("h5",{id:"policies",className:`${q.paragraphSubText} mt-5`,children:"Policies"}),u.policy_section.map((f,m)=>d.jsxs("div",{className:"my-4",children:[d.jsx("h6",{className:q.paragraphSubText,children:f.name}),d.jsx("p",{onMouseUp:r,className:q.paragraphSubTextLower,children:f.paragraph})]},m))]})]},u.id)),e&&d.jsxs("div",{className:"absolute text-left bg-white p-4 shadow-lg rounded-lg max-w-xs text-black",style:{left:i.left,top:i.top,zIndex:100},children:[d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsx("p",{className:q.dictionaryText,children:e}),d.jsx("i",{className:"fas fa-volume-up ml-5 text-gray-600"})]}),d.jsx("hr",{className:"border-2 mb-2"}),d.jsx("p",{children:t})]}),d.jsxs("div",{className:"mt-10 text-center flex justify-between",children:[d.jsx("button",{onClick:c,className:"px-6 py-2 border justify-end text-white rounded-lg hover:bg-gray-500",children:"Article I"}),d.jsx("button",{onClick:l,className:"px-6 py-2 border justify-end text-white rounded-lg hover:bg-gray-500",children:"Article III"})]})]})}),s&&d.jsx("button",{onClick:a,className:"fixed bottom-6 right-6 w-12 h-12 bg-gray-600 text-white rounded-full shadow-lg flex items-center justify-center hover:bg-gray-800 transition-all duration-300",children:d.jsx("i",{className:"fas fa-arrow-up"})})]})},Dfe=zt(Lfe),kfe=[{id:"bill_of_rights",title:"Bill of Rights",subtitle:"ARTICLE III",sections:[{name:"Section 1",paragraph:"No person shall be deprived of life, liberty, or property without due process of law, nor shall any person be denied the equal protection of the laws."},{name:"Section 2",paragraph:"The right of the people to be secure in their persons, houses, papers, and effects against unreasonable searches and seizures of whatever nature and for any purpose shall be inviolable, and no search warrant or warrant of arrest shall issue except upon probable cause to be determined personally by the judge after examination under oath or affirmation of the complainant and the witnesses he may produce, and particularly describing the place to be searched and the persons or things to be seized."},{name:"Section 3",paragraph:["(1) The privacy of communication and correspondence shall be inviolable except upon lawful order of the court, or when public safety or order requires otherwise as prescribed by law","(2) Any evidence obtained in violation of this or the preceding section shall be inadmissible for any purpose in any proceeding."]},{name:"Section 4",paragraph:"No law shall be passed abridging the freedom of speech, of expression, or of the press, or the right of the people peaceably to assemble and petition the government for redress of grievances."},{name:"Section 5",paragraph:"No law shall be made respecting an establishment of religion, or prohibiting the free exercise thereof. The free exercise and enjoyment of religious profession and worship, without discrimination or preference, shall forever be allowed. No religious test shall be required for the exercise of civil or political rights."},{name:"Section 6",paragraph:"The liberty of abode and of changing the same within the limits prescribed by law shall not be impaired except upon lawful order of the court. Neither shall the right to travel be impaired except in the interest of national security, public safety, or public health, as may be provided by law."},{name:"Section 7",paragraph:"The right of the people to information on matters of public concern shall be recognized. Access to official records, and to documents, and papers pertaining to official acts, transactions, or decisions, as well as to government research data used as basis for policy development, shall be afforded the citizen, subject to such limitations as may be provided by law."},{name:"Section 8",paragraph:"The right of the people, including those employed in the public and private sectors, to form unions, associations, or societies for purposes not contrary to law shall not be abridged"},{name:"Section 9",paragraph:"Private property shall not be taken for public use without just compensation."},{name:"Section 10",paragraph:"No law impairing the obligation of contracts shall be passed."},{name:"Section 11",paragraph:"Free access to the courts and quasi-judicial bodies and adequate legal assistance shall not be denied to any person by reason of poverty."},{name:"Section 12",paragraph:["(1) Any person under investigation for the commission of an offense shall have the right to be informed of his right to remain silent and to have competent and independent counsel preferably of his own choice. If the person cannot afford the services of counsel, he must be provided with one. These rights cannot be waived except in writing and in the presence of counsel.","(2) No torture, force, violence, threat, intimidation, or any other means which vitiate the free will shall be used against him. Secret detention places, solitary, incommunicado, or other similar forms of detention are prohibited.","(3) Any confession or admission obtained in violation of this or Section 17 hereof shall be inadmissible in evidence against him.","(4) The law shall provide for penal and civil sanctions for violations of this section as well as compensation to and rehabilitation of victims of torture or similar practices, and their families."]},{name:"Section 13",paragraph:"All persons, except those charged with offenses punishable by reclusion perpetua when evidence of guilt is strong, shall, before conviction, be bailable by sufficient sureties, or be released on recognizance as may be provided by law. The right to bail shall not be impaired even when the privilege of the writ of habeas corpus is suspended. Excessive bail shall not be required."},{name:"Section 14",paragraph:[". (1) No person shall be held to answer for a criminal offense without due process of law.","(2) In all criminal prosecutions, the accused shall be presumed innocent until the contrary is proved, and shall enjoy the right to be heard by himself and counsel, to be informed of the nature and cause of the accusation against him, to have a speedy, impartial, and public trial, to meet the witnesses face to face, and to have compulsory process to secure the attendance of witnesses and the production of evidence in his behalf. However, after arraignment, trial may proceed notwithstanding the absence of the accused provided that he has been duly notified and his failure to appear is unjustifiable."]},{name:"Section 15",paragraph:"The privilege of the writ of habeas corpus shall not be suspended except in cases of invasion or rebellion when the public safety requires it."},{name:"Section 16",paragraph:"All persons shall have the right to a speedy disposition of their cases before all judicial, quasi-judicial, or administrative bodies."},{name:"Section 17",paragraph:"No person shall be compelled to be a witness against himself."},{name:"Section 18",paragraph:["(1) No person shall be detained solely by reason of his political beliefs and aspirations.","(2) No involuntary servitude in any form shall exist except as a punishment for a crime whereof the party shall have been duly convicted."]},{name:"Section 19",paragraph:["(1) Excessive fines shall not be imposed, nor cruel, degrading or inhuman punishment inflicted. Neither shall death penalty be imposed, unless, for compelling reasons involving heinous crimes, the Congress hereafter provides for it. Any death penalty already imposed shall be reduced to reclusion perpetua.","(2) The employment of physical, psychological, or degrading punishment against any prisoner or detainee or the use of substandard or inadequate penal facilities under subhuman conditions shall be dealt with by law."]},{name:"Section 20",paragraph:"No person shall be imprisoned for debt or non-payment of a poll tax."},{name:"Section 21",paragraph:"No person shall be twice put in jeopardy of punishment for the same offense. If an act is punished by a law and an ordinance, conviction or acquittal under either shall constitute a bar to another prosecution for the same act."},{name:"Section 22",paragraph:" No ex post facto law or bill of attainder shall be enacted."}]}],Ofe=()=>{const n=qt(),{selectedWord:e,definition:t,tooltipPosition:i,handleTextSelection:r}=Ln(),[s,o]=B.useState(!1);B.useEffect(()=>{const u=()=>{window.scrollY>200?o(!0):o(!1)};return window.addEventListener("scroll",u),()=>window.removeEventListener("scroll",u)},[]);const a=()=>{window.scrollTo({top:0,behavior:"smooth"})},l=()=>{n("/articleFour")},c=()=>{n("/articleTwo")};return d.jsxs("div",{className:"text-spacing-3 leading-relaxed tracking-wide",children:[d.jsx(Pn,{children:d.jsxs("div",{children:[kfe.map(u=>d.jsxs("div",{className:"my-5",children:[d.jsx("h5",{className:q.paragraphSubText,children:u.subtitle}),d.jsx("h4",{className:`${q.headText} mb-10`,children:u.title}),d.jsx("div",{children:u.sections.map((f,m)=>d.jsxs("div",{className:"my-4",children:[d.jsx("h6",{className:q.paragraphSubText,children:f.name}),d.jsx("p",{onMouseUp:r,className:q.paragraphSubTextLower,children:f.paragraph})]},m))})]},u.id)),e&&d.jsxs("div",{className:"absolute text-left bg-white p-4 shadow-lg rounded-lg max-w-xs text-black",style:{left:i.left,top:i.top,zIndex:100},children:[d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsx("p",{className:q.dictionaryText,children:e}),d.jsx("i",{className:"fas fa-volume-up ml-5 text-gray-600"})]}),d.jsx("hr",{className:"border-2 mb-2"}),d.jsx("p",{children:t})]}),d.jsxs("div",{className:"mt-10 text-center flex justify-between",children:[d.jsx("button",{onClick:c,className:"px-6 py-2 border justify-end text-white rounded-lg hover:bg-gray-500",children:"Previous Article"}),d.jsx("button",{onClick:l,className:"px-6 py-2 border justify-end text-white rounded-lg hover:bg-gray-500",children:"Next Article"})]})]})}),s&&d.jsx("button",{onClick:a,className:"fixed bottom-6 right-6 w-12 h-12 bg-gray-600 text-white rounded-full shadow-lg flex items-center justify-center hover:bg-gray-800 transition-all duration-300",children:d.jsx("i",{className:"fas fa-arrow-up"})})]})},Ufe=zt(Ofe),Ffe=[{id:"citizenship",title:"Citizenship",subtitle:"ARTICLE IV",sections:[{name:"Section 1",paragraph:["(1) Those who are citizens of the Philippines at the time of the adoption of this Constitution;","(2) Those whose fathers or mothers are citizens of the Philippines;","(3) Those born before January 17, 1973, of Filipino mothers, who elect Philippine citizenship upon reaching the age of majority; and","(4) Those who are naturalized in accordance with law."]},{name:"Section 2",paragraph:"Natural-born citizens are those who are citizens of the Philippines from birth without having to perform any act to acquire or perfect their Philippine citizenship. Those who elect Philippine citizenship in accordance with paragraph (3), Section 1 hereof shall be deemed natural-born citizens."},{name:"Section 3",paragraph:"Philippine citizenship may be lost or reacquired in the manner provided by law."},{name:"Section 4",paragraph:"Citizens of the Philippines who marry aliens shall retain their citizenship, unless by their act or omission they are deemed, under the law, to have renounced it."},{name:"Section 5",paragraph:"Dual allegiance of citizens is inimical to the national interest and shall be dealt with by law."}]}],jfe=()=>{const n=qt(),{selectedWord:e,definition:t,tooltipPosition:i,handleTextSelection:r}=Ln(),[s,o]=B.useState(!1);B.useEffect(()=>{const u=()=>{window.scrollY>200?o(!0):o(!1)};return window.addEventListener("scroll",u),()=>window.removeEventListener("scroll",u)},[]);const a=()=>{window.scrollTo({top:0,behavior:"smooth"})},l=()=>{n("/articleFive")},c=()=>{n("/articleThree")};return d.jsxs("div",{className:"text-spacing-3 leading-relaxed tracking-wide",children:[d.jsx(Pn,{children:d.jsxs("div",{children:[Ffe.map(u=>d.jsxs("div",{className:"my-5",children:[d.jsx("h5",{className:q.paragraphSubText,children:u.subtitle}),d.jsx("h4",{className:`${q.headText} mb-10`,children:u.title}),d.jsx("div",{children:u.sections.map((f,m)=>d.jsxs("div",{className:"my-4",children:[d.jsx("h6",{className:q.paragraphSubText,children:f.name}),d.jsx("p",{onMouseUp:r,className:q.paragraphSubTextLower,children:f.paragraph})]},m))})]},u.id)),e&&d.jsxs("div",{className:"absolute text-left bg-white p-4 shadow-lg rounded-lg max-w-xs text-black",style:{left:i.left,top:i.top,zIndex:100},children:[d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsx("p",{className:q.dictionaryText,children:e}),d.jsx("i",{className:"fas fa-volume-up ml-5 text-gray-600"})]}),d.jsx("hr",{className:"border-2 mb-2"}),d.jsx("p",{children:t})]}),d.jsxs("div",{className:"mt-10 text-center flex justify-between",children:[d.jsx("button",{onClick:c,className:"px-6 py-2 border justify-end text-white rounded-lg hover:bg-gray-500",children:"Previous Article"}),d.jsx("button",{onClick:l,className:"px-6 py-2 border justify-end text-white rounded-lg hover:bg-gray-500",children:"Next Article"})]})]})}),s&&d.jsx("button",{onClick:a,className:"fixed bottom-6 right-6 w-12 h-12 bg-gray-600 text-white rounded-full shadow-lg flex items-center justify-center hover:bg-gray-800 transition-all duration-300",children:d.jsx("i",{className:"fas fa-arrow-up"})})]})},Vfe=zt(jfe),Bfe=[{id:"suff",title:"Suffrage",subtitle:"ARTICLE V",sections:[{name:"Section 1",paragraph:"Suffrage may be exercised by all citizens of the Philippines not otherwise disqualified by law, who are at least eighteen years of age, and who shall have resided in the Philippines for at least one year and in the place wherein they propose to vote for at least six months immediately preceding the election. No literacy, property, or other substantive requirement shall be imposed on the exercise of suffrage."},{name:"Section 2",paragraph:"The Congress shall provide a system for securing the secrecy and sanctity of the ballot as well as a system for absentee voting by qualified Filipinos abroad."}]}],zfe=()=>{const n=qt(),{selectedWord:e,definition:t,tooltipPosition:i,handleTextSelection:r}=Ln(),[s,o]=B.useState(!1);B.useEffect(()=>{const u=()=>{window.scrollY>200?o(!0):o(!1)};return window.addEventListener("scroll",u),()=>window.removeEventListener("scroll",u)},[]);const a=()=>{window.scrollTo({top:0,behavior:"smooth"})},l=()=>{n("/articleSix")},c=()=>{n("/articleFour")};return d.jsxs("div",{className:"text-spacing-3 leading-relaxed tracking-wide",children:[d.jsx(Pn,{children:d.jsxs("div",{children:[Bfe.map(u=>d.jsxs("div",{className:"my-5",children:[d.jsx("h5",{className:q.paragraphSubText,children:u.subtitle}),d.jsx("h4",{className:`${q.headText} mb-10`,children:u.title}),d.jsx("div",{children:u.sections.map((f,m)=>d.jsxs("div",{className:"my-4",children:[d.jsx("h6",{className:q.paragraphSubText,children:f.name}),d.jsx("p",{onMouseUp:r,className:q.paragraphSubTextLower,children:f.paragraph})]},m))})]},u.id)),e&&d.jsxs("div",{className:"absolute text-left bg-white p-4 shadow-lg rounded-lg max-w-xs text-black",style:{left:i.left,top:i.top,zIndex:100},children:[d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsx("p",{className:q.dictionaryText,children:e}),d.jsx("i",{className:"fas fa-volume-up ml-5 text-gray-600"})]}),d.jsx("hr",{className:"border-2 mb-2"}),d.jsx("p",{children:t})]}),d.jsxs("div",{className:"mt-10 text-center flex justify-between",children:[d.jsx("button",{onClick:c,className:"px-6 py-2 border justify-end text-white rounded-lg hover:bg-gray-500",children:"Previous Article"}),d.jsx("button",{onClick:l,className:"px-6 py-2 border justify-end text-white rounded-lg hover:bg-gray-500",children:"Next Article"})]})]})}),s&&d.jsx("button",{onClick:a,className:"fixed bottom-6 right-6 w-12 h-12 bg-gray-600 text-white rounded-full shadow-lg flex items-center justify-center hover:bg-gray-800 transition-all duration-300",children:d.jsx("i",{className:"fas fa-arrow-up"})})]})},Hfe=zt(zfe),Gfe=[{id:"legislative_department",title:"The Legislative Department",subtitle:"ARTICLE VI",sections:[{name:"Section 1",paragraph:"The legislative power shall be vested in the Congress of the Philippines which shall consist of a Senate and a House of Representatives, except to the extent reserved to the people by the provision on initiative and referendum."},{name:"Section 2",paragraph:"The Senate shall be composed of twenty-four Senators who shall be elected at large by the qualified voters of the Philippines, as may be provided by law."},{name:"Section 3",paragraph:"No person shall be a Senator unless he is a natural-born citizen of the Philippines, and, on the day of the election, is at least thirty-five years of age, able to read and write, a registered voter, and a resident of the Philippines for not less than two years immediately preceding the day of the election."},{name:"Section 4",paragraph:"The term of office of the Senators shall be six years and shall commence, unless otherwise provided by law, at noon on the thirtieth day of June next following their election. No Senator shall serve for more than two consecutive terms. Voluntary renunciation of the office for any length of time shall not be considered as an interruption in the continuity of his service for the full term for which he was elected."},{name:"Section 5",paragraph:[" (1) The House of Representatives shall be composed of not more than two hundred and fifty members, unless otherwise fixed by law, who shall be elected from legislative districts apportioned among the provinces, cities, and the Metropolitan Manila area in accordance with the number of their respective inhabitants, and on the basis of a uniform and progressive ratio, and those who, as provided by law, shall be elected through a party-list system of registered national, regional, and sectoral parties or organizations.","(2) The party-list representatives shall constitute twenty per centum of the total number of representatives including those under the party list. For three consecutive terms after the ratification of this Constitution, one-half of the seats allocated to party-list representatives shall be filled, as provided by law, by selection or election from the labor, peasant, urban poor, indigenous cultural communities, women, youth, and such other sectors as may be provided by law, except the religious sector.","(3) Each legislative district shall comprise, as far as practicable, contiguous, compact and adjacent territory. Each city with a population of at least two hundred fifty thousand, or each province, shall have at least one representative.","(4) Within three years following the return of every census, the Congress shall make a reapportionment of legislative districts based on the standards provided in this section."]},{name:"Section 6",paragraph:"No person shall be a Member of the House of Representatives unless he is a natural-born citizen of the Philippines and, on the day of the election, is at least twenty-five years of age, able to read and write, and, except the party-list representatives, a registered voter in the district in which he shall be elected, and a resident thereof for a period of not less than one year immediately preceding the day of the election."},{name:"Section 7",paragraph:["The Members of the House of Representatives shall be elected for a term of three years which shall begin, unless otherwise provided by law, at noon on the thirtieth day of June next following their election.","No member of the House of Representatives shall serve for more than three consecutive terms. Voluntary renunciation of the office for any length of time shall not be considered as an interruption in the continuity of his service for the full term for which he was elected."]},{name:"Section 8",paragraph:"Unless otherwise provided by law, the regular election of the Senators and the Members of the House of Representatives shall be held on the second Monday of May."},{name:"Section 9",paragraph:"In case of vacancy in the Senate or in the House of Representatives, a special election may be called to fill such vacancy in the manner prescribed by law, but the Senator or Member of the House of Representatives thus elected shall serve only for the unexpired term."},{name:"Section 10",paragraph:"The salaries of Senators and Members of the House of Representatives shall be determined by law. No increase in said compensation shall take effect until after the expiration of the full term of all the Members of the Senate and the House of Representatives approving such increase."},{name:"Section 11",paragraph:"A Senator or Member of the House of Representatives shall, in all offenses punishable by not more than six years imprisonment, be privileged from arrest while the Congress is in session. No Member shall be questioned nor be held liable in any other place for any speech or debate in the Congress or in any committee thereof."},{name:"Section 12",paragraph:"All Members of the Senate and the House of Representatives shall, upon assumption of office, make a full disclosure of their financial and business interests. They shall notify the House concerned of a potential conflict of interest that may arise from the filing of a proposed legislation of which they are authors."},{name:"Section 13",paragraph:"No Senator or Member of the House of Representatives may hold any other office or employment in the Government, or any subdivision, agency, or instrumentality thereof, including government-owned or controlled corporations or their subsidiaries, during his term without forfeiting his seat. Neither shall he be appointed to any office which may have been created or the emoluments thereof increased during the term for which he was elected."},{name:"Section 14",paragraph:"No Senator or Member of the House of Representatives may personally appear as counsel before any court of justice or before the Electoral Tribunals, or quasi-judicial and other administrative bodies. Neither shall he, directly or indirectly, be interested financially in any contract with, or in any franchise or special privilege granted by the Government, or any subdivision, agency, or instrumentality thereof, including any government-owned or controlled corporation, or its subsidiary, during his term of office. He shall not intervene in any matter before any office of the Government for his pecuniary benefit or where he may be called upon to act on account of his office."},{name:"Section 15",paragraph:"The Congress shall convene once every year on the fourth Monday of July for its regular session, unless a different date is fixed by law, and shall continue to be in session for such number of days as it may determine until thirty days before the opening of its next regular session, exclusive of Saturdays, Sundays, and legal holidays. The President may call a special session at any time."},{name:"Section 16",paragraph:["(1) The Senate shall elect its President and the House of Representatives its Speaker, by a majority vote of all its respective Members.","Each House shall choose such other officers as it may deem necessary.","(2) A majority of each House shall constitute a quorum to do business, but a smaller number may adjourn from day to day and may compel the attendance of absent Members in such manner, and under such penalties, as such House may provide.","(3) Each House may determine the rules of its proceedings, punish its Members for disorderly behavior, and, with the concurrence of two-thirds of all its Members, suspend or expel a Member. A penalty of suspension, when imposed, shall not exceed sixty days.","(4) Each House shall keep a Journal of its proceedings, and from time to time publish the same, excepting such parts as may, in its judgment, affect national security; and the yeas and nays on any question shall, at the request of one-fifth of the Members present, be entered in the Journal.","Each House shall also keep a Record of its proceedings.","(5) Neither House during the sessions of the Congress shall, without the consent of the other, adjourn for more than three days, nor to any other place than that in which the two Houses shall be sitting."]},{name:"Section 17",paragraph:"The Senate and the House of Representatives shall each have an Electoral Tribunal which shall be the sole judge of all contests relating to the election, returns, and qualifications of their respective Members. Each Electoral Tribunal shall be composed of nine Members, three of whom shall be Justices of the Supreme Court to be designated by the Chief Justice, and the remaining six shall be Members of the Senate or the House of Representatives, as the case may be, who shall be chosen on the basis of proportional representation from the political parties and the parties or organizations registered under the party-list system represented therein. The senior Justice in the Electoral Tribunal shall be its Chairman."},{name:"Section 18",paragraph:"There shall be a Commission on Appointments consisting of the President of the Senate, as ex officio Chairman, twelve Senators and twelve Members of the House of Representatives, elected by each House on the basis of proportional representation from the political parties and parties or organizations registered under the party-list system represented therein. The Chairman of the Commission shall not vote, except in case of a tie. The Commission shall act on all appointments submitted to it within thirty session days of the Congress from their submission. The Commission shall rule by a majority vote of all the Members."},{name:"Section 19",paragraph:"The Electoral Tribunals and the Commission on Appointments shall be constituted within thirty days after the Senate and the House of Representatives shall have been organized with the election of the President and the Speaker. The Commission on Appointments shall meet only while the Congress is in session, at the call of its Chairman or a majority of all its Members, to discharge such powers and functions as are herein conferred upon it."},{name:"Section 20",paragraph:"The records and books of accounts of the Congress shall be preserved and be open to the public in accordance with law, and such books shall be audited by the Commission on Audit which shall publish annually an itemized list of amounts paid to and expenses incurred for each Member."},{name:"Section 21",paragraph:"The Senate or the House of Representatives or any of its respective committees may conduct inquiries in aid of legislation in accordance with its duly published rules of procedure. The rights of persons appearing in or affected by such inquiries shall be respected."},{name:"Section 22",paragraph:"The heads of departments may upon their own initiative, with the consent of the President, or upon the request of either House, as the rules of each House shall provide, appear before and be heard by such House on any matter pertaining to their departments. Written questions shall be submitted to the President of the Senate or the Speaker of the House of Representatives at least three days before their scheduled appearance. Interpellations shall not be limited to written questions, but may cover matters related thereto. When the security of the State or the public interest so requires and the President so states in writing, the appearance shall be conducted in executive session."},{name:"Section 23",paragraph:["(1) The Congress, by a vote of two-thirds of both Houses in joint session assembled, voting separately, shall have the sole power to declare the existence of a state of war.","(2) In times of war or other national emergency, the Congress may, by law, authorize the President, for a limited period and subject to such restrictions as it may prescribe, to exercise powers necessary and proper to carry out a declared national policy. Unless sooner withdrawn by resolution of the Congress, such powers shall cease upon the next adjournment thereof."]},{name:"Section 24",paragraph:"All appropriation, revenue or tariff bills, bills authorizing increase of the public debt, bills of local application, and private bills shall originate exclusively in the House of Representatives, but the Senate may propose or concur with amendments."},{name:"Section 25",paragraph:["(1) The Congress may not increase the appropriations recommended by the President for the operation of the Government as specified in the budget. The form, content, and manner of preparation of the budget shall be prescribed by law.","(2) No provision or enactment shall be embraced in the general appropriations bill unless it relates specifically to some particular appropriation therein. Any such provision or enactment shall be limited in its operation to the appropriation to which it relates.","(3) The procedure in approving appropriations for the Congress shall strictly follow the procedure for approving appropriations for other departments and agencies.","(4) A special appropriations bill shall specify the purpose for which it is intended, and shall be supported by funds actually available as certified by the National Treasurer, or to be raised by a corresponding revenue proposed therein.","(5) No law shall be passed authorizing any transfer of appropriations; however, the President, the President of the Senate, the Speaker of the House of Representatives, the Chief Justice of the Supreme Court, and the heads of Constitutional Commissions may, by law, be authorized to augment any item in the general appropriations law for their respective offices from savings in other items of their respective appropriations.","(6) Discretionary funds appropriated for particular officials shall be disbursed only for public purposes to be supported by appropriate vouchers and subject to such guidelines as may be prescribed by law.","(7) If, by the end of any fiscal year, the Congress shall have failed to pass the general appropriations bill for the ensuing fiscal year, the general appropriations law for the preceding fiscal year shall be deemed reenacted and shall remain in force and effect until the general appropriations bill is passed by the Congress."]},{name:"Section 26",paragraph:["(1) Every bill passed by the Congress shall embrace only one subject which shall be expressed in the title thereof.","(2) No bill passed by either House shall become a law unless it has passed three readings on separate days, and printed copies thereof in its final form have been distributed to its Members three days before its passage, except when the President certifies to the necessity of its immediate enactment to meet a public calamity or emergency. Upon the last reading of a bill, no amendment thereto shall be allowed, and the vote thereon shall be taken immediately thereafter, and the yeas and nays entered in the Journal."]},{name:"Section 27",paragraph:["(1) Every bill passed by the Congress shall, before it becomes a law, be presented to the President. If he approves the same, he shall sign it; otherwise, he shall veto it and return the same with his objections to the House where it originated, which shall enter the objections at large in its Journal and proceed to reconsider it. If, after such reconsideration, two-thirds of all the Members of such House shall agree to pass the bill, it shall be sent, together with the objections, to the other House by which it shall likewise be reconsidered, and if approved by two-thirds of all the Members of that House, it shall become a law. In all such cases, the votes of each House shall be determined by yeas or nays, and the names of the Members voting for or against shall be entered in its Journal. The President shall communicate his veto of any bill to the House where it originated within thirty days after the date of receipt thereof; otherwise, it shall become a law as if he had signed it.","(2) The President shall have the power to veto any particular item or items in an appropriation, revenue, or tariff bill, but the veto shall not affect the item or items to which he does not object."]},{name:"Section 28",paragraph:["(1) The rule of taxation shall be uniform and equitable. The Congress shall evolve a progressive system of taxation.","(2) The Congress may, by law, authorize the President to fix within specified limits, and subject to such limitations and restrictions as it may impose, tariff rates, import and export quotas, tonnage and wharfage dues, and other duties or imposts within the framework of the national development program of the Government.","(3) Charitable institutions, churches and parsonages or convents appurtenant thereto, mosques, non-profit cemeteries, and all lands, buildings, and improvements, actually, directly, and exclusively used for religious, charitable, or educational purposes shall be exempt from taxation.","(4) No law granting any tax exemption shall be passed without the concurrence of a majority of all the Members of the Congress."]},{name:"Section 29",paragraph:["(1) No money shall be paid out of the Treasury except in pursuance of an appropriation made by law.","(2) No public money or property shall be appropriated, applied, paid, or employed, directly or indirectly, for the use, benefit, or support of any sect, church, denomination, sectarian institution, or system of religion, or of any priest, preacher, minister, or other religious teacher, or dignitary as such, except when such priest, preacher, minister, or dignitary is assigned to the armed forces, or to any penal institution, or government orphanage or leprosarium.","(3) All money collected on any tax levied for a special purpose shall be treated as a special fund and paid out for such purpose only. If the purpose for which a special fund was created has been fulfilled or abandoned, the balance, if any, shall be transferred to the general funds of the Government."]},{name:"Section 30",paragraph:"No law shall be passed increasing the appellate jurisdiction of the Supreme Court as provided in this Constitution without its advice and concurrence."},{name:"Section 31",paragraph:"No law granting a title of royalty or nobility shall be enacted."},{name:"Section 32",paragraph:"The Congress shall, as early as possible, provide for a system of initiative and referendum, and the exceptions therefrom, whereby the people can directly propose and enact laws or approve or reject any act or law or part thereof passed by the Congress or local legislative body after the registration of a petition therefor signed by at least ten per centum of the total number of registered voters, of which every legislative district must be represented by at least three per centum of the registered voters thereof."}]}],Wfe=()=>{const n=qt(),{selectedWord:e,definition:t,tooltipPosition:i,handleTextSelection:r}=Ln(),[s,o]=B.useState(!1);B.useEffect(()=>{const u=()=>{window.scrollY>200?o(!0):o(!1)};return window.addEventListener("scroll",u),()=>window.removeEventListener("scroll",u)},[]);const a=()=>{window.scrollTo({top:0,behavior:"smooth"})},l=()=>{n("/articleSeven")},c=()=>{n("/articleFive")};return d.jsxs("div",{className:"text-spacing-3 leading-relaxed tracking-wide",children:[d.jsx(Pn,{children:d.jsxs("div",{children:[Gfe.map(u=>d.jsxs("div",{className:"my-5",children:[d.jsx("h5",{className:q.paragraphSubText,children:u.subtitle}),d.jsx("h4",{className:`${q.headText} mb-10`,children:u.title}),d.jsx("div",{children:u.sections.map((f,m)=>d.jsxs("div",{className:"my-4",children:[d.jsx("h6",{className:q.paragraphSubText,children:f.name}),d.jsx("p",{onMouseUp:r,className:q.paragraphSubTextLower,children:f.paragraph})]},m))})]},u.id)),e&&d.jsxs("div",{className:"absolute text-left bg-white p-4 shadow-lg rounded-lg max-w-xs text-black",style:{left:i.left,top:i.top,zIndex:100},children:[d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsx("p",{className:q.dictionaryText,children:e}),d.jsx("i",{className:"fas fa-volume-up ml-5 text-gray-600"})]}),d.jsx("hr",{className:"border-2 mb-2"}),d.jsx("p",{children:t})]}),d.jsxs("div",{className:"mt-10 text-center flex justify-between",children:[d.jsx("button",{onClick:c,className:"px-6 py-2 border justify-end text-white rounded-lg hover:bg-gray-500",children:"Previous Article"}),d.jsx("button",{onClick:l,className:"px-6 py-2 border justify-end text-white rounded-lg hover:bg-gray-500",children:"Next Article"})]})]})}),s&&d.jsx("button",{onClick:a,className:"fixed bottom-6 right-6 w-12 h-12 bg-gray-600 text-white rounded-full shadow-lg flex items-center justify-center hover:bg-gray-800 transition-all duration-300",children:d.jsx("i",{className:"fas fa-arrow-up"})})]})},qfe=zt(Wfe),$fe=[{id:"executive_department",title:"Executive Department",subtitle:"ARTICLE VII",sections:[{name:"Section 1",paragraph:"The executive power shall be vested in the President of the Philippines."},{name:"Section 2",paragraph:"No person may be elected President unless he is a natural-born citizen of the Philippines, a registered voter, able to read and write, at least forty years of age on the day of the election, and a resident of the Philippines for at least ten years immediately preceding such election."},{name:"Section 3",paragraph:"There shall be a Vice-President who shall have the same qualifications and term of office and be elected with and in the same manner as the President. He may be removed from office in the same manner as the President."},{name:"Section 3",paragraph:["There shall be a Vice-President who shall have the same qualifications and term of office and be elected with and in the same manner as the President. He may be removed from office in the same manner as the President.","The Vice-President may be appointed as a Member of the Cabinet. Such appointment requires no confirmation."]},{name:"Section 4",paragraph:["The President and the Vice-President shall be elected by direct vote of the people for a term of six years which shall begin at noon on the thirtieth day of June next following the day of the election and shall end at noon of the same date six years thereafter. The President shall not be eligible for any reelection. No person who has succeeded as President and has served as such for more than four years shall be qualified for election to the same office at any time.","No Vice-President shall serve for more than two consecutive terms. Voluntary renunciation of the office for any length of time shall not be considered as an interruption in the continuity of the service for the full term for which he was elected.","No Vice-President shall serve for more than two consecutive terms. Voluntary renunciation of the office for any length of time shall not be considered as an interruption in the continuity of the service for the full term for which he was elected.","The returns of every election for President and Vice-President, duly certified by the board of canvassers of each province or city, shall be transmitted to the Congress, directed to the President of the Senate. Upon receipt of the certificates of canvass, the President of the Senate shall, not later than thirty days after the day of the election, open all certificates in the presence of the Senate and the House of Representatives in joint public session, and the Congress, upon determination of the authenticity and due execution thereof in the manner provided by law, canvass the votes.","The returns of every election for President and Vice-President, duly certified by the board of canvassers of each province or city, shall be transmitted to the Congress, directed to the President of the Senate. Upon receipt of the certificates of canvass, the President of the Senate shall, not later than thirty days after the day of the election, open all certificates in the presence of the Senate and the House of Representatives in joint public session, and the Congress, upon determination of the authenticity and due execution thereof in the manner provided by law, canvass the votes.","The Congress shall promulgate its rules for the canvassing of the certificates.","The Supreme Court, sitting en banc, shall be the sole judge of all contests relating to the election, returns, and qualifications of the President or Vice- President, and may promulgate its rules for the purpose."]},{name:"Section 5",paragraph:["Before they enter on the execution of their office, the President, the Vice-President, or the Acting President shall take the following oath or affirmation:","I do solemnly swear (or affirm) that I will faithfully and conscientiously fulfill my duties as President (or Vice-President or Acting President) of the Philippines, preserve and defend its Constitution, execute its laws, do justice to every man, and consecrate myself to the service of the Nation. So help me God. (In case of affirmation, last sentence will be omitted.)"]},{name:"Section 6",paragraph:"The President shall have an official residence. The salaries of the President and Vice-President shall be determined by law and shall not be decreased during their tenure. No increase in said compensation shall take effect until after the expiration of the term of the incumbent during which such increase was approved. They shall not receive during their tenure any other emolument from the Government or any other source."},{name:"Section 7",paragraph:["The President-elect and the Vice-President-elect shall assume office at the beginning of their terms.","If the President-elect fails to qualify, the Vice-President-elect shall act as President until the President-elect shall have qualified.","If a President shall not have been chosen, the Vice-President-elect shall act as President until a President shall have been chosen and qualified.","If a President shall not have been chosen, the Vice-President-elect shall act as President until a President shall have been chosen and qualified.","Where no President and Vice-President shall have been chosen or shall have qualified, or where both shall have died or become permanently disabled, the President of the Senate or, in case of his inability, the Speaker of the House of Representatives shall act as President until a President or a Vice-President shall have been chosen and qualified.","The Congress shall, by law, provide for the manner in which one who is to act as President shall be selected until a President or a Vice-President shall have qualified, in case of death, permanent disability, or inability of the officials mentioned in the next preceding paragraph."]},{name:"Section 8",paragraph:["In case of death, permanent disability, removal from office, or resignation of the President, the Vice-President shall become the President to serve the unexpired term. In case of death, permanent disability, removal from office, or resignation of both the President and Vice-President, the President of the Senate or, in case of his inability, the Speaker of the House of Representatives, shall then act as President until the President or Vice-President shall have been elected and qualified.","The Congress shall, by law, provide who shall serve as President in case of death, permanent disability, or resignation of the Acting President. He shall serve until the President or the Vice-President shall have been elected and qualified, and be subject to the same restrictions of powers and disqualifications as the Acting President."]},{name:"Section 9",paragraph:"Whenever there is a vacancy in the Office of the Vice-President during the term for which he was elected, the President shall nominate a Vice-President from among the Members of the Senate and the House of Representatives who shall assume office upon confirmation by a majority vote of all the Members of both Houses of the Congress, voting separately."},{name:"Section 10",paragraph:"The Congress shall, at ten oclock in the morning of the third day after the vacancy in the offices of the President and Vice-President occurs, convene in accordance with its rules without need of a call and within seven days enact a law calling for a special election to elect a President and a Vice-President to be held not earlier than forty-five days nor later than sixty days from the time of such call. The bill calling such special election shall be deemed certified under paragraph 2, Section 26, Article VI of this Constitution and shall become law upon its approval on third reading by the Congress. Appropriations for the special election shall be charged against any current appropriations and shall be exempt from the requirements of paragraph 4, Section 25, Article VI of this Constitution. The convening of the Congress cannot be suspended nor the special election postponed. No special election shall be called if the vacancy occurs within eighteen months before the date of the next presidential election."},{name:"Section 11",paragraph:["Whenever the President transmits to the President of the Senate and the Speaker of the House of Representatives his written declaration that he is unable to discharge the powers and duties of his office, and until he transmits to them a written declaration to the contrary, such powers and duties shall be discharged by the Vice-President as Acting President.","Whenever a majority of all the Members of the Cabinet transmit to the President of the Senate and to the Speaker of the House of Representatives their written declaration that the President is unable to discharge the powers and duties of his office, the Vice-President shall immediately assume the powers and duties of the office as Acting President.","Thereafter, when the President transmits to the President of the Senate and to the Speaker of the House of Representatives his written declaration that no inability exists, he shall reassume the powers and duties of his office. Meanwhile, should a majority of all the Members of the Cabinet transmit within five days to the President of the Senate and to the Speaker of the House of Representatives their written declaration that the President is unable to discharge the powers and duties of his office, the Congress shall decide the issue. For that purpose, the Congress shall convene, if it is not in session, within forty-eight hours, in accordance with its rules and without need of call.","If the Congress, within ten days after receipt of the last written declaration, or, if not in session, within twelve days after it is required to assemble, determines by a two-thirds vote of both Houses, voting separately, that the President is unable to discharge the powers and duties of his office, the Vice-President shall act as the President; otherwise, the President shall continue exercising the powers and duties of his office."]},{name:"Section 12",paragraph:"In case of serious illness of the President, the public shall be informed of the state of his health. The Members of the Cabinet in charge of national security and foreign relations and the Chief of Staff of the Armed Forces of the Philippines, shall not be denied access to the President during such illness."},{name:"Section 8",paragraph:["The President, Vice-President, the Members of the Cabinet, and their deputies or assistants shall not, unless otherwise provided in this Constitution, hold any other office or employment during their tenure. They shall not, during said tenure, directly or indirectly, practice any other profession, participate in any business, or be financially interested in any contract with, or in any franchise, or special privilege granted by the Government or any subdivision, agency, or instrumentality thereof, including government-owned or controlled corporations or their subsidiaries. They shall strictly avoid conflict of interest in the conduct of their office.","The spouse and relatives by consanguinity or affinity within the fourth civil degree of the President shall not during his tenure be appointed as members of the Constitutional Commissions, or the Office of the Ombudsman, or as Secretaries, Undersecretaries, chairmen or heads of bureaus or offices, including government-owned or controlled corporations and their subsidiaries."]},{name:"Section 14",paragraph:"Appointments extended by an Acting President shall remain effective, unless revoked by the elected President within ninety days from his assumption or reassumption of office."},{name:"Section 15",paragraph:"Two months immediately before the next presidential elections and up to the end of his term, a President or Acting President shall not make appointments, except temporary appointments to executive positions when continued vacancies therein will prejudice public service or endanger public safety."},{name:"Section 16",paragraph:["The President shall nominate and, with the consent of the Commission on Appointments, appoint the heads of the executive departments, ambassadors, other public ministers and consuls, or officers of the armed forces from the rank of colonel or naval captain, and other officers whose appointments are vested in him in this Constitution. He shall also appoint all other officers of the Government whose appointments are not otherwise provided for by law, and those whom he may be authorized by law to appoint. The Congress may, by law, vest the appointment of other officers lower in rank in the President alone, in the courts, or in the heads of departments, agencies, commissions, or boards.","The President shall have the power to make appointments during the recess of the Congress, whether voluntary or compulsory, but such appointments shall be effective only until after disapproval by the Commission on Appointments or until the next adjournment of the Congress."]},{name:"Section 17",paragraph:"The President shall have control of all the executive departments, bureaus, and offices. He shall ensure that the laws be faithfully executed."},{name:"Section 18",paragraph:["The President shall be the Commander-in-Chief of all armed forces of the Philippines and whenever it becomes necessary, he may call out such armed forces to prevent or suppress lawless violence, invasion or rebellion. In case of invasion or rebellion, when the public safety requires it, he may, for a period not exceeding sixty days, suspend the privilege of the writ of habeas corpus or place the Philippines or any part thereof under martial law. Within forty-eight hours from the proclamation of martial law or the suspension of the privilege of the writ of habeas corpus, the President shall submit a report in person or in writing to the Congress.","The Congress, voting jointly, by a vote of at least a majority of all its Members in regular or special session, may revoke such proclamation or suspension, which revocation shall not be set aside by the President. Upon the initiative of the President, the Congress may, in the same manner, extend such proclamation or suspension for a period to be determined by the Congress, if the invasion or rebellion shall persist and public safety requires it.","The Congress, if not in session, shall, within twenty-four hours following such proclamation or suspension, convene in accordance with its rules without any need of a call.","The Supreme Court may review, in an appropriate proceeding filed by any citizen, the sufficiency of the factual basis of the proclamation of martial law or the suspension of the privilege of the writ or the extension thereof, and must promulgate its decision thereon within thirty days from its filing.","A state of martial law does not suspend the operation of the Constitution, nor supplant the functioning of the civil courts or legislative assemblies, nor authorize the conferment of jurisdiction on military courts and agencies over civilians where civil courts are able to function, nor automatically suspend the privilege of the writ.","The suspension of the privilege of the writ shall apply only to persons judicially charged for rebellion or offenses inherent in or directly connected with the invasion.","During the suspension of the privilege of the writ, any person thus arrested or detained shall be judicially charged within three days, otherwise he shall be released."]},{name:"Section 19",paragraph:["Except in cases of impeachment, or as otherwise provided in this Constitution, the President may grant reprieves, commutations and pardons, and remit fines and forfeitures, after conviction by final judgment.","He shall also have the power to grant amnesty with the concurrence of a majority of all the Members of the Congress."]},{name:"Section 20",paragraph:"The President may contract or guarantee foreign loans on behalf of the Republic of the Philippines with the prior concurrence of the Monetary Board, and subject to such limitations as may be provided by law. The Monetary Board shall, within thirty days from the end of every quarter of the calendar year, submit to the Congress a complete report of its decisions on applications for loans to be contracted or guaranteed by the Government or government-owned and controlled corporations which would have the effect of increasing the foreign debt, and containing other matters as may be provided by law."},{name:"Section 21",paragraph:"No treaty or international agreement shall be valid and effective unless concurred in by at least two-thirds of all the Members of the Senate."},{name:"Section 22",paragraph:"The President shall submit to the Congress within thirty days from the opening of every regular session, as the basis of the general appropriations bill, a budget of expenditures and sources of financing, including receipts from existing and proposed revenue measures."},{name:"Section 23",paragraph:"The President shall address the Congress at the opening of its regular session. He may also appear before it at any other time."}]}],Xfe=()=>{const n=qt(),{selectedWord:e,definition:t,tooltipPosition:i,handleTextSelection:r}=Ln(),[s,o]=B.useState(!1);B.useEffect(()=>{const u=()=>{window.scrollY>200?o(!0):o(!1)};return window.addEventListener("scroll",u),()=>window.removeEventListener("scroll",u)},[]);const a=()=>{window.scrollTo({top:0,behavior:"smooth"})},l=()=>{n("/articleEight")},c=()=>{n("/articleSix")};return d.jsxs("div",{className:"text-spacing-3 leading-relaxed tracking-wide",children:[d.jsx(Pn,{children:d.jsxs("div",{children:[$fe.map(u=>d.jsxs("div",{className:"my-5",children:[d.jsx("h5",{className:q.paragraphSubText,children:u.subtitle}),d.jsx("h4",{className:`${q.headText} mb-10`,children:u.title}),d.jsx("div",{children:u.sections.map((f,m)=>d.jsxs("div",{className:"my-4",children:[d.jsx("h6",{className:q.paragraphSubText,children:f.name}),d.jsx("p",{onMouseUp:r,className:q.paragraphSubTextLower,children:f.paragraph})]},m))})]},u.id)),e&&d.jsxs("div",{className:"absolute text-left bg-white p-4 shadow-lg rounded-lg max-w-xs text-black",style:{left:i.left,top:i.top,zIndex:100},children:[d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsx("p",{className:q.dictionaryText,children:e}),d.jsx("i",{className:"fas fa-volume-up ml-5 text-gray-600"})]}),d.jsx("hr",{className:"border-2 mb-2"}),d.jsx("p",{children:t})]}),d.jsxs("div",{className:"mt-10 text-center flex justify-between",children:[d.jsx("button",{onClick:c,className:"px-6 py-2 border justify-end text-white rounded-lg hover:bg-gray-500",children:"Previous Article"}),d.jsx("button",{onClick:l,className:"px-6 py-2 border justify-end text-white rounded-lg hover:bg-gray-500",children:"Next Article"})]})]})}),s&&d.jsx("button",{onClick:a,className:"fixed bottom-6 right-6 w-12 h-12 bg-gray-600 text-white rounded-full shadow-lg flex items-center justify-center hover:bg-gray-800 transition-all duration-300",children:d.jsx("i",{className:"fas fa-arrow-up"})})]})},Yfe=zt(Xfe),Kfe=[{id:"judicial_department",title:"Judicial Department",subtitle:"ARTICLE VIII",sections:[{name:"Section 1",paragraph:["The judicial power shall be vested in one Supreme Court and in such lower courts as may be established by law.","Judicial power includes the duty of the courts of justice to settle actual controversies involving rights which are legally demandable and enforceable, and to determine whether or not there has been a grave abuse of discretion amounting to lack or excess of jurisdiction on the part of any branch or instrumentality of the Government."]},{name:"Section 2",paragraph:["The Congress shall have the power to define, prescribe, and apportion the jurisdiction of various courts but may not deprive the Supreme Court of its jurisdiction over cases enumerated in Section 5 hereof.","No law shall be passed reorganizing the Judiciary when it undermines the security of tenure of its Members."]},{name:"Section 3",paragraph:"The Judiciary shall enjoy fiscal autonomy. Appropriations for the Judiciary may not be reduced by the legislature below the amount appropriated for the previous year and, after approval, shall be automatically and regularly released."},{name:"Section 4",paragraph:["(1) The Supreme Court shall be composed of a Chief Justice and fourteen Associate Justices. It may sit en banc or in its discretion, in divisions of three, five, or seven Members. Any vacancy shall be filled within ninety days from the occurrence thereof.","(2) All cases involving the constitutionality of a treaty, international or executive agreement, or law, which shall be heard by the Supreme Court en banc, and all other cases which under the Rules of Court are required to be heard en banc, including those involving the constitutionality, application, or operation of presidential decrees, proclamations, orders, instructions, ordinances, and other regulations, shall be decided with the concurrence of a majority of the Members who actually took part in the deliberations on the issues in the case and voted thereon.","(3) Cases or matters heard by a division shall be decided or resolved with the concurrence of a majority of the Members who actually took part in the deliberations on the issues in the case and voted thereon, and in no case, without the concurrence of at least three of such Members. When the required number is not obtained, the case shall be decided en banc: Provided, that no doctrine or principle of law laid down by the court in a decision rendered en banc or in division may be modified or reversed except by the court sitting en banc."]},{name:"Section 5",paragraph:["The Supreme Court shall have the following powers:","(1) Exercise original jurisdiction over cases affecting ambassadors, other public ministers and consuls, and over petitions for certiorari, prohibition, mandamus, quo warranto, and habeas corpus.","(2) Review, revise, reverse, modify, or affirm on appeal or certiorari, as the law or the Rules of Court may provide, final judgments and orders of lower courts in:","(a) All cases in which the constitutionality or validity of any treaty, international or executive agreement, law, presidential decree, proclamation, order, instruction, ordinance, or regulation is in question.","(b) All cases involving the legality of any tax, impost, assessment, or toll, or any penalty imposed in relation thereto.","(c) All cases in which the jurisdiction of any lower court is in issue.","(d) All criminal cases in which the penalty imposed is reclusion perpetua or higher.","(e) All cases in which only an error or question of law is involved.","(3) Assign temporarily judges of lower courts to other stations as public interest may require. Such temporary assignment shall not exceed six months without the consent of the judge concerned.","(4) Order a change of venue or place of trial to avoid a miscarriage of justice.","(5) Promulgate rules concerning the protection and enforcement of constitutional rights, pleading, practice, and procedure in all courts, the admission to the practice of law, the Integrated Bar, and legal assistance to the underprivileged. Such rules shall provide a simplified and inexpensive procedure for the speedy disposition of cases, shall be uniform for all courts of the same grade, and shall not diminish, increase, or modify substantive rights. Rules of procedure of special courts and quasi-judicial bodies shall remain effective unless disapproved by the Supreme Court.","(6) Appoint all officials and employees of the Judiciary in accordance with the Civil Service Law."]},{name:"Section 6",paragraph:"The Supreme Court shall have administrative supervision over all courts and the personnel thereof."},{name:"Section 7",paragraph:["(1) No person shall be appointed Member of the Supreme Court or any lower collegiate court unless he is a natural-born citizen of the Philippines. A Member of the Supreme Court must be at least forty years of age, and must have been for fifteen years or more a judge of a lower court or engaged in the practice of law in the Philippines.","(2) The Congress shall prescribe the qualifications of judges of lower courts, but no person may be appointed judge thereof unless he is a citizen of the Philippines and a member of the Philippine Bar.","(3) A Member of the Judiciary must be a person of proven competence, integrity, probity, and independence."]},{name:"Section 8",paragraph:["(1) A Judicial and Bar Council is hereby created under the supervision of the Supreme Court composed of the Chief Justice as ex officio Chairman, the Secretary of Justice, and a representative of the Congress as ex officio Members, a representative of the Integrated Bar, a professor of law, a retired Member of the Supreme Court, and a representative of the private sector.","(2) The regular Members of the Council shall be appointed by the President for a term of four years with the consent of the Commission on Appointments. Of the Members first appointed, the representative of the Integrated Bar shall serve for four years, the professor of law for three years, the retired Justice for two years, and the representative of the private sector for one year.","(3) The Clerk of the Supreme Court shall be the Secretary ex officio of the Council and shall keep a record of its proceedings.","(4) The regular Members of the Council shall receive such emoluments as may be determined by the Supreme Court. The Supreme Court shall provide in its annual budget the appropriations for the Council.","(5) The Council shall have the principal function of recommending appointees to the Judiciary. It may exercise such other functions and duties as the Supreme Court may assign to it."]},{name:"Section 9",paragraph:["The Members of the Supreme Court and judges of lower courts shall be appointed by the President from a list of at least three nominees prepared by the Judicial and Bar Council for every vacancy. Such appointments need no confirmation.","For the lower courts, the President shall issue the appointments within ninety days from the submission of the list."]},{name:"Section 10",paragraph:["The salary of the Chief Justice and of the Associate Justices of the Supreme Court, and of judges of lower courts shall be fixed by law. During their continuance in office, their salary shall not be decreased."]},{name:"Section 11",paragraph:["The Members of the Supreme Court and judges of lower courts shall hold office during good behavior until they reached the age of seventy years or become incapacitated to discharge the duties of their office. The Supreme Court en banc shall have the power to discipline judges of lower courts, or order their dismissal by a vote of a majority of the Members who actually took part in the deliberations on the issues in the case and voted thereon."]},{name:"Section 12",paragraph:["The Members of the Supreme Court and of other courts established by law shall not be designated to any agency performing quasi-judicial or administrative functions."]},{name:"Section 13",paragraph:["The conclusions of the Supreme Court in any case submitted to it for decision en banc or in division shall be reached in consultation before the case is assigned to a Member for the writing of the opinion of the Court. A certification to this effect signed by the Chief Justice shall be issued and a copy thereof attached to the record of the case and served upon the parties. Any Member who took no part, or dissented, or abstained from a decision or resolution must state the reason therefor. The same requirements shall be observed by all lower collegiate courts."]},{name:"Section 14",paragraph:["No decision shall be rendered by any court without expressing therein clearly and distinctly the facts and the law on which it is based.","No petition for review or motion for reconsideration of a decision of the court shall be refused due course or denied without stating the legal basis therefor."]},{name:"Section 15",paragraph:[" (1) All cases or matters filed after the effectivity of this Constitution must be decided or resolved within twenty-four months from date of submission for the Supreme Court, and, unless reduced by the Supreme Court, twelve months for all lower collegiate courts, and three months for all other lower courts.","(2) A case or matter shall be deemed submitted for decision or resolution upon the filing of the last pending, brief, or memorandum required by the Rules of Court or by the court itself.","(3) Upon the expiration of the corresponding period, a certification to this effect signed by the Chief Justice or the presiding judge shall forthwith be issued and a copy thereof attached to the record of the case or matter, and served upon the parties. The certification shall state why a decision or resolution has not been rendered or issued within said period.","(4) Despite the expiration of the applicable mandatory period, the court, without prejudice to such responsibility as may have been incurred in consequence thereof, shall decide or resolve the case or matter submitted thereto for determination, without further delay."]},{name:"Section 16",paragraph:["The Supreme Court shall, within thirty days from the opening of each regular session of the Congress, submit to the President and the Congress an annual report on the operations and activities of the Judiciary."]}]}],Jfe=()=>{const n=qt(),{selectedWord:e,definition:t,tooltipPosition:i,handleTextSelection:r}=Ln(),[s,o]=B.useState(!1);B.useEffect(()=>{const u=()=>{window.scrollY>200?o(!0):o(!1)};return window.addEventListener("scroll",u),()=>window.removeEventListener("scroll",u)},[]);const a=()=>{window.scrollTo({top:0,behavior:"smooth"})},l=()=>{n("/articleNine")},c=()=>{n("/articleSeven")};return d.jsxs("div",{className:"text-spacing-3 leading-relaxed tracking-wide",children:[d.jsx(Pn,{children:d.jsxs("div",{children:[Kfe.map(u=>d.jsxs("div",{className:"my-5",children:[d.jsx("h5",{className:q.paragraphSubText,children:u.subtitle}),d.jsx("h4",{className:`${q.headText} mb-10`,children:u.title}),d.jsx("div",{children:u.sections.map((f,m)=>d.jsxs("div",{className:"my-4",children:[d.jsx("h6",{className:q.paragraphSubText,children:f.name}),d.jsx("p",{className:q.paragraphSubTextLower,onMouseUp:r,children:f.paragraph})]},m))})]},u.id)),e&&d.jsxs("div",{className:"absolute text-left bg-white p-4 shadow-lg rounded-lg max-w-xs text-black",style:{left:i.left,top:i.top,zIndex:100},children:[d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsx("p",{className:q.dictionaryText,children:e}),d.jsx("i",{className:"fas fa-volume-up ml-5 text-gray-600"})]}),d.jsx("hr",{className:"border-2 mb-2"}),d.jsx("p",{children:t})]}),d.jsxs("div",{className:"mt-10 text-center flex justify-between",children:[d.jsx("button",{onClick:c,className:"px-6 py-2 border justify-end text-white rounded-lg hover:bg-gray-500",children:"Previous Article"}),d.jsx("button",{onClick:l,className:"px-6 py-2 border justify-end text-white rounded-lg hover:bg-gray-500",children:"Next Article"})]})]})}),s&&d.jsx("button",{onClick:a,className:"fixed bottom-6 right-6 w-12 h-12 bg-gray-600 text-white rounded-full shadow-lg flex items-center justify-center hover:bg-gray-800 transition-all duration-300",children:d.jsx("i",{className:"fas fa-arrow-up"})})]})},Qfe=zt(Jfe),Zfe=[{id:"constitutional_commissions",title:"Constitutional Commissions",subtitle:"ARTICLE IX - Common Provisions",sections:[{name:"Section 1",paragraph:"The Constitutional Commissions, which shall be independent, are the Civil Service Commission, the Commission on Elections, and the Commission on Audit."},{name:"Section 2",paragraph:"No Member of a Constitutional Commission shall, during his tenure, hold any other office or employment. Neither shall he engage in the practice of any profession or in the active management or control of any business which in any way be affected by the functions of his office, nor shall he be financially interested, directly or indirectly, in any contract with, or in any franchise or privilege granted by the Government, any of its subdivisions, agencies, or instrumentalities, including government-owned or controlled corporations or their subsidiaries."},{name:"Section 3",paragraph:"The salary of the Chairman and the Commissioners shall be fixed by law and shall not be decreased during their tenure."},{name:"Section 4",paragraph:"The Constitutional Commissions shall appoint their officials and employees in accordance with law."},{name:"Section 5",paragraph:"The Commission shall enjoy fiscal autonomy. Their approved annual appropriations shall be automatically and regularly released."},{name:"Section 6",paragraph:"Each Commission en banc may promulgate its own rules concerning pleadings and practice before it or before any of its offices. Such rules however shall not diminish, increase, or modify substantive rights."},{name:"Section 7",paragraph:"Each Commission shall decide by a majority vote of all its Members any case or matter brought before it within sixty days from the date of its submission for decision or resolution. A case or matter is deemed submitted for decision or resolution upon the filing of the last pleading, brief, or memorandum required by the rules of the Commission or by the Commission itself. Unless otherwise provided by this Constitution or by law, any decision, order, or ruling of each Commission may be brought to the Supreme Court on certiorari by the aggrieved party within thirty days from receipt of a copy thereof."},{name:"Section 8",paragraph:"Each Commission shall perform such other functions as may be provided by law."}]}],epe=[{id:"civil_service",title:"The Civil Service Commission",subtitle:"ARTICLE IX",sections:[{name:"Section 1",paragraph:["(1) The Civil Service shall be administered by the Civil Service Commission composed of a Chairman and two Commissioners who shall be natural-born citizens of the Philippines and, at the time of their appointment, at least thirty-five years of age, with proven capacity for public administration, and must not have been candidates for any elective position in the elections immediately preceding their appointment.","(2) The Chairman and the Commissioners shall be appointed by the President with the consent of the Commission on Appointments for a term of seven years without reappointment. Of those first appointed, the Chairman shall hold office for seven years, a Commissioner for five years, and another Commissioner for three years, without reappointment. Appointment to any vacancy shall be only for the unexpired term of the predecessor. In no case shall any Member be appointed or designated in a temporary or acting capacity."]},{name:"Section 2",paragraph:["(1) The civil service embraces all branches, subdivisions, instrumentalities, and agencies of the Government, including government-owned or controlled corporations with original charters.","(2) Appointments in the civil service shall be made only according to merit and fitness to be determined, as far as practicable, and, except to positions which are policy-determining, primarily confidential, or highly technical, by competitive examination.","(3) No officer or employee of the civil service shall be removed or suspended except for cause provided by law.","(4) No officer or employee in the civil service shall engage, directly or indirectly, in any electioneering or partisan political campaign.","(5) The right to self-organization shall not be denied to government employees.","(6) Temporary employees of the Government shall be given such protection as may be provided by law."]},{name:"Section 3",paragraph:["The Civil Service Commission, as the central personnel agency of the Government, shall establish a career service and adopt measures to promote morale, efficiency, integrity, responsiveness, progressiveness, and courtesy in the civil service.","It shall strengthen the merit and rewards system, integrate all human resources development programs for all levels and ranks, and institutionalize a management climate conducive to public accountability.","It shall submit to the President and the Congress an annual report on its personnel programs."]},{name:"Section 4",paragraph:["All public officers and employees shall take an oath or affirmation to uphold and defend this Constitution."]},{name:"Section 5",paragraph:["The Congress shall provide for the standardization of compensation of government officials and employees, including those in government-owned or controlled corporations with original charters, taking into account the nature of the responsibilities pertaining to, and the qualifications required for their positions."]},{name:"Section 6",paragraph:["No candidate who has lost in any election shall, within one year after such election, be appointed to any office in the Government or any government-owned or controlled corporations or in any of their subsidiaries."]},{name:"Section 7",paragraph:["No elective official shall be eligible for appointment or designation in any capacity to any public office or position during his tenure.","Unless otherwise allowed by law or by the primary functions of his position, no appointive official shall hold any other office or employment in the Government or any subdivision, agency or instrumentality thereof, including government-owned or controlled corporations or their subsidiaries."]},{name:"Section 8",paragraph:["No elective or appointive public officer or employee shall receive additional, double, or indirect compensation, unless specifically authorized by law, nor accept without the consent of the Congress, any present, emolument, office, or title of any kind from any foreign government.","Pensions or gratuities shall not be considered as additional, double, or indirect compensation."]}]}],tpe=[{id:"commission_on_elections",title:"The Commission on Elections",subtitle:"ARTICLE IX - C",sections:[{name:"Section 1",paragraph:["(1) There shall be a Commission on Elections composed of a Chairman and six Commissioners who shall be natural-born citizens of the Philippines and, at the time of their appointment, at least thirty-five years of age, holders of a college degree, and must not have been candidates for any elective position in the immediately preceding elections. However, a majority thereof, including the Chairman, shall be Members of the Philippine Bar who have been engaged in the practice of law for at least ten years.","(2) The Chairman and the Commissioners shall be appointed by the President with the consent of the Commission on Appointments for a term of seven years without reappointment. Of those first appointed, three Members shall hold office for seven years, two Members for five years, and the last Members for three years, without reappointment. Appointment to any vacancy shall be only for the unexpired term of the predecessor. In no case shall any Member be appointed or designated in a temporary or acting capacity."]},{name:"Section 2",paragraph:["(1) Enforce and administer all laws and regulations relative to the conduct of an election, plebiscite, initiative, referendum, and recall.","(2) Exercise exclusive original jurisdiction over all contests relating to the elections, returns, and qualifications of all elective regional, provincial, and city officials, and appellate jurisdiction over all contests involving elective municipal officials decided by trial courts of general jurisdiction, or involving elective barangay officials decided by trial courts of limited jurisdiction.","Decisions, final orders, or rulings of the Commission on election contests involving elective municipal and barangay offices shall be final, executory, and not appealable.","(3) Decide, except those involving the right to vote, all questions affecting elections, including determination of the number and location of polling places, appointment of election officials and inspectors, and registration of voters.","(4) Deputize, with the concurrence of the President, law enforcement agencies and instrumentalities of the Government, including the Armed Forces of the Philippines, for the exclusive purpose of ensuring free, orderly, honest, peaceful, and credible elections.","(5) Register, after sufficient publication, political parties, organizations, or coalitions which, in addition to other requirements, must present their platform or program of government; and accredit citizens arms of the Commission on Elections. Religious denominations and sects shall not be registered. Those which seek to achieve their goals through violence or unlawful means, or refuse to uphold and adhere to this Constitution, or which are supported by any foreign government shall likewise be refused registration.","Financial contributions from foreign governments and their agencies to political parties, organizations, coalitions, or candidates related to elections constitute interference in national affairs, and, when accepted, shall be an additional ground for the cancellation of their registration with the Commission, in addition to other penalties that may be prescribed by law.","(6) File, upon a verified complaint, or on its own initiative, petitions in court for inclusion or exclusion of voters; investigate and, where appropriate, prosecute cases of violations of election laws, including acts or omissions constituting election frauds, offenses, and malpractices.","(7) Recommend to the Congress effective measures to minimize election spending, including limitation of places where propaganda materials shall be posted, and to prevent and penalize all forms of election frauds, offenses, malpractices, and nuisance candidacies.","(8) Recommend to the President the removal of any officer or employee it has deputized, or the imposition of any other disciplinary action, for violation or disregard of, or disobedience to its directive, order, or decision.","(9) Submit to the President and the Congress a comprehensive report on the conduct of each election, plebiscite, initiative, referendum, or recall."]},{name:"Section 3",paragraph:["The Commission on Elections may sit en banc or in two divisions, and shall promulgate its rules of procedure in order to expedite disposition of election cases, including pre-proclamation controversies. All such election cases shall be heard and decided in division, provided that motions for reconsideration of decisions shall be decided by the Commission en banc."]},{name:"Section 4",paragraph:["The Commission may, during the election period, supervise or regulate the enjoyment or utilization of all franchises or permits for the operation of transportation and other public utilities, media of communication or information, all grants, special privileges, or concessions granted by the Government or any subdivision, agency, or instrumentality thereof, including any government-owned or controlled corporation or its subsidiary.","Such supervision or regulation shall aim to ensure equal opportunity, time, and space, and the right to reply, including reasonable, equal rates therefor, for public information campaigns and forums among candidates in connection with the objective of holding free, orderly, honest, peaceful, and credible elections."]},{name:"Section 5",paragraph:["No pardon, amnesty, parole, or suspension of sentence for violation of election laws, rules, and regulations shall be granted by the President without the favorable recommendation of the Commission."]},{name:"Section 6",paragraph:["A free and open party system shall be allowed to evolve according to the free choice of the people, subject to the provisions of this Article."]},{name:"Section 7",paragraph:["No votes cast in favor of a political party, organization, or coalition shall be valid, except for those registered under the party-list system as provided in this Constitution."]},{name:"Section 8",paragraph:["Political parties, or organizations or coalitions registered under the party-list system, shall not be represented in the voters registration boards, boards of election inspectors, boards of canvassers, or other similar bodies.","However, they shall be entitled to appoint poll watchers in accordance with law."]},{name:"Section 9",paragraph:["Unless otherwise fixed by the Commission in special cases, the election period shall commence ninety days before the day of the election and shall end thirty days after."]},{name:"Section 10",paragraph:["Bona fide candidates for any public office shall be free from any form of harassment and discrimination."]},{name:"Section 11",paragraph:["Funds certified by the Commission as necessary to defray the expenses for holding regular and special elections, plebiscites, initiatives, referenda, and recalls, shall be provided in the regular or special appropriations and, once approved, shall be released automatically upon certification by the Chairman of the Commission."]}]}],npe=[{id:"commission_on_audit",title:"Commission on Audit",subtitle:"ARTICLE IX - D",sections:[{name:"Section 1",paragraph:["(1) There shall be a Commission on Audit composed of a Chairman and two Commissioners, who shall be natural-born citizens of the Philippines and, at the time of their appointment, at least thirty-five years of age, certified public accountants with not less than ten years of auditing experience, or members of the Philippine Bar who have been engaged in the practice of law for at least ten years, and must not have been candidates for any elective position in the elections immediately preceding their appointment. At no time shall all Members of the Commission belong to the same profession.","(2) The Chairman and the Commissioners shall be appointed by the President with the consent of the Commission on Appointments for a term of seven years without reappointment. Of those first appointed, the Chairman shall hold office for seven years, one Commissioner for five years, and the other Commissioner for three years, without reappointment. Appointment to any vacancy shall be only for the unexpired portion of the term of the predecessor. In no case shall any Member be appointed or designated in a temporary or acting capacity."]},{name:"Section 2",paragraph:["(1) The Commission on Audit shall have the power, authority, and duty to examine, audit, and settle all accounts pertaining to the revenue and receipts of, and expenditures or uses of funds and property, owned or held in trust by, or pertaining to, the Government, or any of its subdivisions, agencies, or instrumentalities, including government-owned or controlled corporations with original charters, and on a post-audit basis: (a) constitutional bodies, commissions and offices that have been granted fiscal autonomy under this Constitution; (b) autonomous state colleges and universities; (c) other government-owned or controlled corporations and their subsidiaries; and (d) such non-governmental entities receiving subsidy or equity, directly or indirectly, from or through the Government, which are required by law or the granting institution to submit to such audit as a condition of subsidy or equity.","However, where the internal control system of the audited agencies is inadequate, the Commission may adopt such measures, including temporary or special pre-audit, as are necessary and appropriate to correct the deficiencies. It shall keep the general accounts of the Government and, for such period as may be provided by law, preserve the vouchers and other supporting papers pertaining thereto.","(2) The Commission shall have exclusive authority, subject to the limitations in this Article, to define the scope of its audit and examination, establish the techniques and methods required therefor, and promulgate accounting and auditing rules and regulations, including those for the prevention and disallowance of irregular, unnecessary, excessive, extravagant, or unconscionable expenditures, or uses of government funds and properties."]},{name:"Section 3",paragraph:["No law shall be passed exempting any entity of the Government or its subsidiary in any guise whatever, or any investment of public funds, from the jurisdiction of the Commission on Audit."]},{name:"Section 4",paragraph:["The Commission shall submit to the President and the Congress, within the time fixed by law, an annual report covering the financial condition and operation of the Government, its subdivisions, agencies, and instrumentalities, including government-owned or controlled corporations, and non-governmental entities subject to its audit, and recommend measures necessary to improve their effectiveness and efficiency. It shall submit such other reports as may be required by law."]}]}],ipe=()=>{const n=qt(),{selectedWord:e,definition:t,tooltipPosition:i,handleTextSelection:r}=Ln(),[s,o]=B.useState(!1);B.useEffect(()=>{const u=()=>{window.scrollY>200?o(!0):o(!1)};return window.addEventListener("scroll",u),()=>window.removeEventListener("scroll",u)},[]);const a=()=>{window.scrollTo({top:0,behavior:"smooth"})},l=()=>{n("/articleTen")},c=()=>{n("/articleEight")};return d.jsxs("div",{className:"text-spacing-3 leading-relaxed tracking-wide",children:[d.jsx(Pn,{children:d.jsxs("div",{children:[Zfe.map(u=>d.jsxs("div",{className:"my-5",children:[d.jsx("h5",{className:q.paragraphSubText,children:u.subtitle}),d.jsx("h4",{className:`${q.headText} mb-10`,children:u.title}),d.jsx("div",{children:u.sections.map((f,m)=>d.jsxs("div",{className:"my-4",children:[d.jsx("h6",{className:q.paragraphSubText,children:f.name}),d.jsx("p",{onMouseUp:r,className:q.paragraphSubTextLower,children:f.paragraph})]},m))})]},u.id)),d.jsx("br",{}),d.jsx("br",{}),epe.map(u=>d.jsxs("div",{className:"my-5",children:[d.jsx("h5",{className:q.paragraphSubText,children:u.subtitle}),d.jsx("h5",{className:q.paragraphHeadText,children:u.title}),d.jsx("div",{children:u.sections.map((f,m)=>d.jsxs("div",{className:"my-4",children:[d.jsx("h6",{className:q.paragraphSubText,children:f.name}),d.jsx("p",{onMouseUp:r,className:q.paragraphSubTextLower,children:f.paragraph})]},m))})]},u.id)),d.jsx("br",{}),d.jsx("br",{}),tpe.map(u=>d.jsxs("div",{className:"my-5",children:[d.jsx("h5",{className:q.paragraphSubText,children:u.subtitle}),d.jsx("h5",{className:q.paragraphHeadText,children:u.title}),d.jsx("div",{children:u.sections.map((f,m)=>d.jsxs("div",{className:"my-4",children:[d.jsx("h6",{className:q.paragraphSubText,children:f.name}),d.jsx("p",{onMouseUp:r,className:q.paragraphSubTextLower,children:f.paragraph})]},m))})]},u.id)),d.jsx("br",{}),d.jsx("br",{}),npe.map(u=>d.jsxs("div",{className:"my-5",children:[d.jsx("h5",{className:q.paragraphSubText,children:u.subtitle}),d.jsx("h5",{className:q.paragraphHeadText,children:u.title}),d.jsx("div",{children:u.sections.map((f,m)=>d.jsxs("div",{className:"my-4",children:[d.jsx("h6",{className:q.paragraphSubText,children:f.name}),d.jsx("p",{onMouseUp:r,className:q.paragraphSubTextLower,children:f.paragraph})]},m))})]},u.id)),e&&d.jsxs("div",{className:"absolute text-left bg-white p-4 shadow-lg rounded-lg max-w-xs text-black",style:{left:i.left,top:i.top,zIndex:100},children:[d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsx("p",{className:q.dictionaryText,children:e}),d.jsx("i",{className:"fas fa-volume-up ml-5 text-gray-600"})]}),d.jsx("hr",{className:"border-2 mb-2"}),d.jsx("p",{children:t})]}),d.jsxs("div",{className:"mt-10 text-center flex justify-between",children:[d.jsx("button",{onClick:c,className:"px-6 py-2 border justify-end text-white rounded-lg hover:bg-gray-500",children:"Previous Article"}),d.jsx("button",{onClick:l,className:"px-6 py-2 border justify-end text-white rounded-lg hover:bg-gray-500",children:"Next Article"})]})]})}),s&&d.jsx("button",{onClick:a,className:"fixed bottom-6 right-6 w-12 h-12 bg-gray-600 text-white rounded-full shadow-lg flex items-center justify-center hover:bg-gray-800 transition-all duration-300",children:d.jsx("i",{className:"fas fa-arrow-up"})})]})},rpe=zt(ipe),spe=[{id:"local_government",title:"Local Government",subtitle:"ARTICLE X - General Provisions",sections:[{name:"Section 1",paragraph:["The territorial and political subdivisions of the Republic of the Philippines are the provinces, cities, municipalities, and barangays. There shall be autonomous regions in Muslim Mindanao and the Cordilleras as hereinafter provided."]},{name:"Section 2",paragraph:["The territorial and political subdivisions shall enjoy local autonomy."]},{name:"Section 3",paragraph:["The Congress shall enact a local government code which shall provide for a more responsive and accountable local government structure instituted through a system of decentralization with effective mechanisms of recall, initiative, and referendum, allocate among the different local government units their powers, responsibilities, and resources, and provide for the qualifications, election, appointment and removal, term, salaries, powers and functions and duties of local officials, and all other matters relating to the organization and operation of the local units."]},{name:"Section 4",paragraph:["The President of the Philippines shall exercise general supervision over local governments. Provinces with respect to component cities and municipalities, and cities and municipalities with respect to component barangays shall ensure that the acts of their component units are within the scope of their prescribed powers and functions."]},{name:"Section 5",paragraph:["Each local government unit shall have the power to create its own sources of revenues and to levy taxes, fees, and charges subject to such guidelines and limitations as the Congress may provide, consistent with the basic policy of local autonomy. Such taxes, fees, and charges shall accrue exclusively to the local governments."]},{name:"Section 6",paragraph:["Local government units shall have a just share, as determined by law, in the national taxes which shall be automatically released to them."]},{name:"Section 7",paragraph:["Local governments shall be entitled to an equitable share in the proceeds of the utilization and development of the national wealth within their respective areas, in the manner provided by law, including sharing the same with the inhabitants by way of direct benefits."]},{name:"Section 8",paragraph:["The term of office of elective local officials, except barangay officials, which shall be determined by law, shall be three years and no such official shall serve for more than three consecutive terms. Voluntary renunciation of the office for any length of time shall not be considered as an interruption in the continuity of his service for the full term for which he was elected."]},{name:"Section 9",paragraph:["Legislative bodies of local governments shall have sectoral representation as may be prescribed by law."]},{name:"Section 10",paragraph:["No province, city, municipality, or barangay may be created, divided, merged, abolished, or its boundary substantially altered, except in accordance with the criteria established in the Local Government Code and subject to approval by a majority of the votes cast in a plebiscite in the political units directly affected."]},{name:"Section 11",paragraph:["The Congress may, by law, create special metropolitan political subdivisions, subject to a plebiscite as set forth in Section 10 hereof. The component cities and municipalities shall retain their basic autonomy and shall be entitled to their own local executives and legislative assemblies. The jurisdiction of the metropolitan authority that will hereby be created shall be limited to basic services requiring coordination."]},{name:"Section 12",paragraph:["Cities that are highly urbanized, as determined by law, and component cities whose charters prohibit their voters from voting for provincial elective officials, shall be independent of the province. The voters of component cities within a province, whose charters contain no such prohibition, shall not be deprived of their right to vote for elective provincial officials."]},{name:"Section 13",paragraph:["Local government units may group themselves, consolidate or coordinate their efforts, services, and resources for purposes commonly beneficial to them in accordance with law."]},{name:"Section 14",paragraph:["The President shall provide for regional development councils or other similar bodies composed of local government officials, regional heads of departments and other government offices, and representatives from non-governmental organizations within the regions for purposes of administrative decentralization to strengthen the autonomy of the units therein and to accelerate the economic and social growth and development of the units in the region."]}]}],ope=[{id:"auto_region",title:"Autonomous Region",sections:[{name:"Section 15",paragraph:["There shall be created autonomous regions in Muslim Mindanao and in the Cordilleras consisting of provinces, cities, municipalities, and geographical areas sharing common and distinctive historical and cultural heritage, economic and social structures, and other relevant characteristics within the framework of this Constitution and the national sovereignty as well as territorial integrity of the Republic of the Philippines."]},{name:"Section 16",paragraph:["The President shall exercise general supervision over autonomous regions to ensure that the laws are faithfully executed."]},{name:"Section 17",paragraph:["All powers, functions, and responsibilities not granted by this Constitution or by law to the autonomous regions shall be vested in the National Government."]},{name:"Section 18",paragraph:["The Congress shall enact an organic act for each autonomous region with the assistance and participation of the regional consultative commission composed of representatives appointed by the President from a list of nominees from multisectoral bodies. The organic act shall define the basic structure of government for the region consisting of the executive department and legislative assembly, both of which shall be elective and representative of the constituent political units. The organic acts shall likewise provide for special courts with personal, family, and property law jurisdiction consistent with the provisions of this Constitution and national laws.","The creation of the autonomous region shall be effective when approved by majority of the votes cast by the constituent units in a plebiscite called for the purpose, provided that only provinces, cities, and geographic areas voting favorably in such plebiscite shall be included in the autonomous region."]},{name:"Section 19",paragraph:["The first Congress elected under this Constitution shall, within eighteen months from the time of organization of both Houses, pass the organic acts for the autonomous regions in Muslim Mindanao and the Cordilleras."]},{name:"Section 20",paragraph:["Within its territorial jurisdiction and subject to the provisions of this Constitution and national laws, the organic act of autonomous regions shall provide for legislative powers over:","(1) Administrative organization;","(2) Creation of sources of revenues;","(3) Ancestral domain and natural resources;","(4) Personal, family, and property relations;","(5) Regional urban and rural planning development;","(6) Economic, social, and tourism development;","(7) Educational policies;","(8) Preservation and development of the cultural heritage; and","(9) Such other matters as may be authorized by law for the promotion of the general welfare of the people of the region."]},{name:"Section 21",paragraph:["The preservation of peace and order within the regions shall be the responsibility of the local police agencies which shall be organized, maintained, supervised, and utilized in accordance with applicable laws. The defense and security of the regions shall be the responsibility of the National Government."]}]}],ape=()=>{const n=qt(),{selectedWord:e,definition:t,tooltipPosition:i,handleTextSelection:r}=Ln(),[s,o]=B.useState(!1);B.useEffect(()=>{const u=()=>{window.scrollY>200?o(!0):o(!1)};return window.addEventListener("scroll",u),()=>window.removeEventListener("scroll",u)},[]);const a=()=>{window.scrollTo({top:0,behavior:"smooth"})},l=()=>{n("/articleEleven")},c=()=>{n("/articleNine")};return d.jsxs("div",{className:"text-spacing-3 leading-relaxed tracking-wide",children:[d.jsx(Pn,{children:d.jsxs("div",{children:[spe.map(u=>d.jsxs("div",{className:"my-5",children:[d.jsx("h5",{className:q.paragraphSubText,children:u.subtitle}),d.jsx("h4",{className:`${q.headText} mb-10`,children:u.title}),d.jsx("div",{children:u.sections.map((f,m)=>d.jsxs("div",{className:"my-4",children:[d.jsx("h6",{className:q.paragraphSubText,children:f.name}),d.jsx("p",{onMouseUp:r,className:q.paragraphSubTextLower,children:f.paragraph})]},m))})]},u.id)),d.jsx("br",{}),d.jsx("br",{}),ope.map(u=>d.jsxs("div",{className:"my-5",children:[d.jsx("h5",{className:q.paragraphSubText,children:u.subtitle}),d.jsx("h4",{className:`${q.headText} mb-10`,children:u.title}),d.jsx("div",{children:u.sections.map((f,m)=>d.jsxs("div",{className:"my-4",children:[d.jsx("h6",{className:q.paragraphSubText,children:f.name}),d.jsx("p",{onMouseUp:r,className:q.paragraphSubTextLower,children:f.paragraph})]},m))})]},u.id)),e&&d.jsxs("div",{className:"absolute text-left bg-white p-4 shadow-lg rounded-lg max-w-xs text-black",style:{left:i.left,top:i.top,zIndex:100},children:[d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsx("p",{className:q.dictionaryText,children:e}),d.jsx("i",{className:"fas fa-volume-up ml-5 text-gray-600"})]}),d.jsx("hr",{className:"border-2 mb-2"}),d.jsx("p",{children:t})]}),d.jsxs("div",{className:"mt-10 text-center flex justify-between",children:[d.jsx("button",{onClick:c,className:"px-6 py-2 border justify-end text-white rounded-lg hover:bg-gray-500",children:"Previous Article"}),d.jsx("button",{onClick:l,className:"px-6 py-2 border justify-end text-white rounded-lg hover:bg-gray-500",children:"Next Article"})]})]})}),s&&d.jsx("button",{onClick:a,className:"fixed bottom-6 right-6 w-12 h-12 bg-gray-600 text-white rounded-full shadow-lg flex items-center justify-center hover:bg-gray-800 transition-all duration-300",children:d.jsx("i",{className:"fas fa-arrow-up"})})]})},lpe=zt(ape),cpe=[{id:"public_officers",title:"Accountability of Public Officers",subtitle:"ARTICLE XI",sections:[{name:"Section 1",paragraph:["Public office is a public trust. Public officers and employees must at all times be accountable to the people, serve them with utmost responsibility, integrity, loyalty, and efficiency, act with patriotism and justice, and lead modest lives."]},{name:"Section 2",paragraph:["The President, the Vice-President, the Members of the Supreme Court, the Members of the Constitutional Commissions, and the Ombudsman may be removed from office, on impeachment for, and conviction of, culpable violation of the Constitution, treason, bribery, graft and corruption, other high crimes, or betrayal of public trust.","All other public officers and employees may be removed from office as provided by law, but not by impeachment."]},{name:"Section 3",paragraph:["(1) The House of Representatives shall have the exclusive power to initiate all cases of impeachment.","(2) A verified complaint for impeachment may be filed by any Member of the House of Representatives or by any citizen upon a resolution of endorsement by any Member thereof, which shall be included in the Order of Business within ten session days, and referred to the proper Committee within three session days thereafter. The Committee, after hearing, and by a majority vote of all its Members, shall submit its report to the House within sixty session days from such referral, together with the corresponding resolution. The resolution shall be calendared for consideration by the House within ten session days from receipt thereof.","(3) A vote of at least one-third of all the Members of the House shall be necessary either to affirm a favorable resolution with the Articles of Impeachment of the Committee, or override its contrary resolution. The vote of each Member shall be recorded.","(4) In case the verified complaint or resolution of impeachment is filed by at least one-third of all the Members of the House, the same shall constitute the Articles of Impeachment, and trial by the Senate shall forthwith proceed.","(5) No impeachment proceedings shall be initiated against the same official more than once within a period of one year.","(6) The Senate shall have the sole power to try and decide all cases of impeachment. When sitting for that purpose, the Senators shall be on oath or affirmation. When the President of the Philippines is on trial, the Chief Justice of the Supreme Court shall preside, but shall not vote. No person shall be convicted without the concurrence of two-thirds of all the Members of the Senate.","(7) Judgment in cases of impeachment shall not extend further than removal from office and disqualification to hold any office under the Republic of the Philippines, but the party convicted shall nevertheless be liable and subject to prosecution, trial, and punishment according to law.","(8) The Congress shall promulgate its rules on impeachment to effectively carry out the purpose of this section."]},{name:"Section 4",paragraph:["The present anti-graft court known as the Sandiganbayan shall continue to function and exercise its jurisdiction as now or hereafter may be provided by law."]},{name:"Section 5",paragraph:["There is hereby created the independent Office of the Ombudsman, composed of the Ombudsman to be known as Tanodbayan, one overall Deputy and at least one Deputy each for Luzon, Visayas, and Mindanao. A separate Deputy for the military establishment may likewise be appointed."]},{name:"Section 6",paragraph:["The officials and employees of the Office of the Ombudsman, other than the Deputies, shall be appointed by the Ombudsman according to the Civil Service Law."]},{name:"Section 7",paragraph:["The existing Tanodbayan shall hereafter be known as the Office of the Special Prosecutor. It shall continue to function and exercise its powers as now or hereafter may be provided by law, except those conferred on the Office of the Ombudsman created under this Constitution."]},{name:"Section 8",paragraph:["The Ombudsman and his Deputies shall be natural-born citizens of the Philippines, and at the time of their appointment, at least forty years old, of recognized probity and independence, and members of the Philippine Bar, and must not have been candidates for any elective office in the immediately preceding election. The Ombudsman must have for ten years or more been a judge or engaged in the practice of law in the Philippines.","During their tenure, they shall be subject to the same disqualifications and prohibitions as provided for in Section 2 of Article IX-A of this Constitution."]},{name:"Section 9",paragraph:["The Ombudsman and his Deputies shall be appointed by the President from a list of at least six nominees prepared by the Judicial and Bar Council, and from a list of three nominees for every vacancy thereafter. Such appointments shall require no confirmation. All vacancies shall be filled within three months after they occur."]},{name:"Section 10",paragraph:["The Ombudsman and his Deputies shall have the rank of Chairman and Members, respectively, of the Constitutional Commissions, and they shall receive the same salary, which shall not be decreased during their term of office."]},{name:"Section 11",paragraph:["The Ombudsman and his Deputies shall serve for a term of seven years without reappointment. They shall not be qualified to run for any office in the election immediately succeeding their cessation from office."]},{name:"Section 12",paragraph:["The Ombudsman and his Deputies, as protectors of the people, shall act promptly on complaints filed in any form or manner against public officials or employees of the Government, or any subdivision, agency or instrumentality thereof, including government-owned or controlled corporations, and shall, in appropriate cases, notify the complainants of the action taken and the result thereof."]},{name:"Section 13",paragraph:["(1) Investigate on its own, or on complaint by any person, any act or omission of any public official, employee, office or agency, when such act or omission appears to be illegal, unjust, improper, or inefficient.","(2) Direct, upon complaint or at its own instance, any public official or employee of the Government, or any subdivision, agency or instrumentality thereof, as well as of any government-owned or controlled corporation with original charter, to perform and expedite any act or duty required by law, or to stop, prevent, and correct any abuse or impropriety in the performance of duties.","(3) Direct the officer concerned to take appropriate action against a public official or employee at fault, and recommend his removal, suspension, demotion, fine, censure, or prosecution, and ensure compliance therewith.","(4) Direct the officer concerned, in any appropriate case, and subject to such limitations as may be provided by law, to furnish it with copies of documents relating to contracts or transactions entered into by his office involving the disbursement or use of public funds or properties, and report any irregularity to the Commission on Audit for appropriate action.","(5) Request any government agency for assistance and information necessary in the discharge of its responsibilities, and to examine, if necessary, pertinent records and documents.","(6) Publicize matters covered by its investigation when circumstances so warrant and with due prudence.","(7) Determine the causes of inefficiency, red tape, mismanagement, fraud, and corruption in the Government and make recommendations for their elimination and the observance of high standards of ethics and efficiency.","(8) Promulgate its rules of procedure and exercise such other powers or perform such functions or duties as may be provided by law."]},{name:"Section 14",paragraph:["The Office of the Ombudsman shall enjoy fiscal autonomy. Its approved annual appropriations shall be automatically and regularly released."]},{name:"Section 15",paragraph:["The right of the State to recover properties unlawfully acquired by public officials or employees, from them or from their nominees or transferees, shall not be barred by prescription, laches, or estoppel."]},{name:"Section 16",paragraph:["No loan, guaranty, or other form of financial accommodation for any business purpose may be granted, directly or indirectly, by any government-owned or controlled bank or financial institution to the President, the Vice-President, the Members of the Cabinet, the Congress, the Supreme Court, and the Constitutional Commissions, the Ombudsman, or to any firm or entity in which they have controlling interest, during their tenure."]},{name:"Section 17",paragraph:["A public officer or employee shall, upon assumption of office and as often thereafter as may be required by law, submit a declaration under oath of his assets, liabilities, and net worth. In the case of the President, the Vice-President, the Members of the Cabinet, the Congress, the Supreme Court, the Constitutional Commissions and other constitutional offices, and officers of the armed forces with general or flag rank, the declaration shall be disclosed to the public in the manner provided by law."]},{name:"Section 18",paragraph:["Public officers and employees owe the State and this Constitution allegiance at all times, and any public officer or employee who seeks to change his citizenship or acquire the status of an immigrant of another country during his tenure shall be dealt with by law."]}]}],upe=()=>{const n=qt(),{selectedWord:e,definition:t,tooltipPosition:i,handleTextSelection:r}=Ln(),[s,o]=B.useState(!1);B.useEffect(()=>{const u=()=>{window.scrollY>200?o(!0):o(!1)};return window.addEventListener("scroll",u),()=>window.removeEventListener("scroll",u)},[]);const a=()=>{window.scrollTo({top:0,behavior:"smooth"})},l=()=>{n("/articleTwelve")},c=()=>{n("/articleTen")};return d.jsxs("div",{className:"text-spacing-3 leading-relaxed tracking-wide",children:[d.jsx(Pn,{children:d.jsxs("div",{children:[cpe.map(u=>d.jsxs("div",{className:"my-5",children:[d.jsx("h5",{className:q.paragraphSubText,children:u.subtitle}),d.jsx("h4",{className:`${q.headText} mb-10`,children:u.title}),d.jsx("div",{children:u.sections.map((f,m)=>d.jsxs("div",{className:"my-4",children:[d.jsx("h6",{className:q.paragraphSubText,children:f.name}),d.jsx("p",{onMouseUp:r,className:q.paragraphSubTextLower,children:f.paragraph})]},m))})]},u.id)),e&&d.jsxs("div",{className:"absolute text-left bg-white p-4 shadow-lg rounded-lg max-w-xs text-black",style:{left:i.left,top:i.top,zIndex:100},children:[d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsx("p",{className:q.dictionaryText,children:e}),d.jsx("i",{className:"fas fa-volume-up ml-5 text-gray-600"})]}),d.jsx("hr",{className:"border-2 mb-2"}),d.jsx("p",{children:t})]}),d.jsxs("div",{className:"mt-10 text-center flex justify-between",children:[d.jsx("button",{onClick:c,className:"px-6 py-2 border justify-end text-white rounded-lg hover:bg-gray-500",children:"Previous Article"}),d.jsx("button",{onClick:l,className:"px-6 py-2 border justify-end text-white rounded-lg hover:bg-gray-500",children:"Next Article"})]})]})}),s&&d.jsx("button",{onClick:a,className:"fixed bottom-6 right-6 w-12 h-12 bg-gray-600 text-white rounded-full shadow-lg flex items-center justify-center hover:bg-gray-800 transition-all duration-300",children:d.jsx("i",{className:"fas fa-arrow-up"})})]})},hpe=zt(upe),dpe=[{id:"economy_and_patrimony",title:"National Economy and Patrimony",subtitle:"ARTICLE XII",sections:[{name:"Section 1",paragraph:["The goals of the national economy are a more equitable distribution of opportunities, income, and wealth; a sustained increase in the amount of goods and services produced by the nation for the benefit of the people; and an expanding productivity as the key to raising the quality of life for all, especially the underprivileged.","The State shall promote industrialization and full employment based on sound agricultural development and agrarian reform, through industries that make full and efficient use of human and natural resources, and which are competitive in both domestic and foreign markets. However, the State shall protect Filipino enterprises against unfair foreign competition and trade practices.","In the pursuit of these goals, all sectors of the economy and all regions of the country shall be given optimum opportunity to develop. Private enterprises, including corporations, cooperatives, and similar collective organizations, shall be encouraged to broaden the base of their ownership."]},{name:"Section 2",paragraph:["All lands of the public domain, waters, minerals, coal, petroleum, and other mineral oils, all forces of potential energy, fisheries, forests or timber, wildlife, flora and fauna, and other natural resources are owned by the State. With the exception of agricultural lands, all other natural resources shall not be alienated. The exploration, development, and utilization of natural resources shall be under the full control and supervision of the State.","The State may directly undertake such activities, or it may enter into co-production, joint venture, or production-sharing agreements with Filipino citizens, or corporations or associations at least sixty per centum of whose capital is owned by such citizens. Such agreements may be for a period not exceeding twenty-five years, renewable for not more than twenty-five years, and under such terms and conditions as may be provided by law. In cases of water rights for irrigation, water supply, fisheries, or industrial uses other than the development of water power, beneficial use may be the measure and limit of the grant.","The State shall protect the nations marine wealth in its archipelagic waters, territorial sea, and exclusive economic zone, and reserve its use and enjoyment exclusively to Filipino citizens.","The Congress may, by law, allow small-scale utilization of natural resources by Filipino citizens, as well as cooperative fish farming, with priority to subsistence fishermen and fishworkers in rivers, lakes, bays, and lagoons.","The President may enter into agreements with foreign-owned corporations involving either technical or financial assistance for large-scale exploration, development, and utilization of minerals, petroleum, and other mineral oils according to the general terms and conditions provided by law, based on real contributions to the economic growth and general welfare of the country. In such agreements, the State shall promote the development and use of local scientific and technical resources.","The President shall notify the Congress of every contract entered into in accordance with this provision, within thirty days from its execution."]},{name:"Section 3",paragraph:["Lands of the public domain are classified into agricultural, forest or timber, mineral lands, and national parks. Agricultural lands of the public domain may be further classified by law according to the uses which they may be devoted. Alienable lands of the public domain shall be limited to agricultural lands. Private corporations or associations may not hold such alienable lands of the public domain except by lease, for a period not exceeding twenty-five years, renewable for not more than twenty-five years, and not to exceed one thousand hectares in area. Citizens of the Philippines may lease not more than five hundred hectares, or acquire not more than twelve hectares thereof by purchase, homestead, or grant.","Taking into account the requirements of conservation, ecology, and development, and subject to the requirements of agrarian reform, the Congress shall determine, by law, the size of lands of the public domain which may be acquired, developed, held, or leased and the conditions therefor."]},{name:"Section 4",paragraph:"The Congress shall, as soon as possible, determine by law the specific limits of forest lands and national parks, marking clearly their boundaries on the ground. Thereafter, such forest lands and national parks shall be conserved and may not be increased nor diminished, except by law. The Congress shall provide, for such period as it may determine, measures to prohibit logging in endangered forests and watershed areas."},{name:"Section 5",paragraph:["The State, subject to the provisions of this Constitution and national development policies and programs, shall protect the rights of indigenous cultural communities to their ancestral lands to ensure their economic, social, and cultural well-being.","The Congress may provide for the applicability of customary laws governing property rights or relations in determining the ownership and extent of ancestral domain."]},{name:"Section 6",paragraph:"The use of property bears a social function, and all economic agents shall contribute to the common good. Individuals and private groups, including corporations, cooperatives, and similar collective organizations, shall have the right to own, establish, and operate economic enterprises, subject to the duty of the State to promote distributive justice and to intervene when the common good so demands."},{name:"Section 7",paragraph:"Save in cases of hereditary succession, no private lands shall be transferred or conveyed except to individuals, corporations, or associations qualified to acquire or hold lands of the public domain."},{name:"Section 8",paragraph:"Notwithstanding the provisions of Section 7 of this Article, a natural-born citizen of the Philippines who has lost his Philippine citizenship may be a transferee of private lands, subject to limitations provided by law."},{name:"Section 9",paragraph:["The Congress may establish an independent economic and planning agency headed by the President, which shall, after consultations with the appropriate public agencies, various private sectors, and local government units, recommend to Congress, and implement continuing integrated and coordinated programs and policies for national development.","Until the Congress provides otherwise, the National Economic and Development Authority shall function as the independent planning agency of the government."]},{name:"Section 10",paragraph:["The Congress shall, upon recommendation of the economic and planning agency, when the national interest dictates, reserve to citizens of the Philippines or to corporations or associations at least sixty per centum of whose capital is owned by such citizens, or such higher percentage as Congress may prescribe, certain areas of investments. The Congress shall enact measures that will encourage the formation and operation of enterprises whose capital is wholly owned by Filipinos.","In the grant of rights, privileges, and concessions covering the national economy and patrimony, the State shall give preference to qualified Filipinos.","The State shall regulate and exercise authority over foreign investments within its national jurisdiction and in accordance with its national goals and priorities."]},{name:"Section 11",paragraph:["No franchise, certificate, or any other form of authorization for the operation of a public utility shall be granted except to citizens of the Philippines or to corporations or associations organized under the laws of the Philippines at least sixty per centum of whose capital is owned by such citizens, nor shall such franchise, certificate, or authorization be exclusive in character or for a longer period than fifty years. Neither shall any such franchise or right be granted except under the condition that it shall be subject to amendment, alteration, or repeal by the Congress when the common good so requires.","The State shall encourage equity participation in public utilities by the general public. The participation of foreign investors in the governing body of any public utility enterprise shall be limited to their proportionate share in its capital, and all the executive and managing officers of such corporation or association must be citizens of the Philippines."]},{name:"Section 12",paragraph:"The State shall promote the preferential use of Filipino labor, domestic materials and locally produced goods, and adopt measures that help make them competitive."},{name:"Section 13",paragraph:"The State shall pursue a trade policy that serves the general welfare and utilizes all forms and arrangements of exchange on the basis of equality and reciprocity."},{name:"Section 14",paragraph:["The sustained development of a reservoir of national talents consisting of Filipino scientists, entrepreneurs, professionals, managers, high-level technical manpower and skilled workers and craftsmen in all fields shall be promoted by the State. The State shall encourage appropriate technology and regulate its transfer for the national benefit.","The practice of all professions in the Philippines shall be limited to Filipino citizens, save in cases prescribed by law."]},{name:"Section 15",paragraph:"The Congress shall create an agency to promote the viability and growth of cooperatives as instruments for social justice and economic development."},{name:"Section 16",paragraph:"The Congress shall not, except by general law, provide for the formation, organization, or regulation of private corporations. Government-owned or controlled corporations may be created or established by special charters in the interest of the common good and subject to the test of economic viability."},{name:"Section 17",paragraph:"In times of national emergency, when the public interest so requires, the State may, during the emergency and under reasonable terms prescribed by it, temporarily take over or direct the operation of any privately owned public utility or business affected with public interest."},{name:"Section 18",paragraph:"The State may, in the interest of national welfare or defense, establish and operate vital industries and, upon payment of just compensation, transfer to public ownership utilities and other private enterprises to be operated by the Government."},{name:"Section 19",paragraph:"The State shall regulate or prohibit monopolies when the public interest so requires. No combinations in restraint of trade or unfair competition shall be allowed."},{name:"Section 20",paragraph:["The Congress shall establish central monetary authority, which shall provide policy direction in the areas of money, banking, and credit. It shall have supervision over the operations of banks and exercise such regulatory powers as may be provided by law over the operations of finance companies and other institutions performing similar functions.","Until the Congress otherwise provides, the Central Bank of the Philippines, operating under existing laws, shall function as the central monetary authority."]},{name:"Section 21",paragraph:"Foreign loans may only be incurred in accordance with law and the regulation of the monetary authority. Information on such loans shall be made available to the public."},{name:"Section 22",paragraph:"Acts which circumvent or negate any of the provisions of this Article shall be considered inimical to the national interest and subject to criminal and civil sanctions, as may be provided by law."}]}],fpe=()=>{const n=qt(),{selectedWord:e,definition:t,tooltipPosition:i,handleTextSelection:r}=Ln(),[s,o]=B.useState(!1);B.useEffect(()=>{const u=()=>{window.scrollY>200?o(!0):o(!1)};return window.addEventListener("scroll",u),()=>window.removeEventListener("scroll",u)},[]);const a=()=>{window.scrollTo({top:0,behavior:"smooth"})},l=()=>{n("/articleThirteen")},c=()=>{n("/articleEleven")};return d.jsxs("div",{className:"text-spacing-3 leading-relaxed tracking-wide",children:[d.jsx(Pn,{children:d.jsxs("div",{children:[dpe.map(u=>d.jsxs("div",{className:"my-5",children:[d.jsx("h5",{className:q.paragraphSubText,children:u.subtitle}),d.jsx("h4",{className:`${q.headText} mb-10`,children:u.title}),d.jsx("div",{children:u.sections.map((f,m)=>d.jsxs("div",{className:"my-4",children:[d.jsx("h6",{className:q.paragraphSubText,children:f.name}),d.jsx("p",{onMouseUp:r,className:q.paragraphSubTextLower,children:f.paragraph})]},m))})]},u.id)),e&&d.jsxs("div",{className:"absolute text-left bg-white p-4 shadow-lg rounded-lg max-w-xs text-black",style:{left:i.left,top:i.top,zIndex:100},children:[d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsx("p",{className:q.dictionaryText,children:e}),d.jsx("i",{className:"fas fa-volume-up ml-5 text-gray-600"})]}),d.jsx("hr",{className:"border-2 mb-2"}),d.jsx("p",{children:t})]}),d.jsxs("div",{className:"mt-10 text-center flex justify-between",children:[d.jsx("button",{onClick:c,className:"px-6 py-2 border justify-end text-white rounded-lg hover:bg-gray-500",children:"Previous Article"}),d.jsx("button",{onClick:l,className:"px-6 py-2 border justify-end text-white rounded-lg hover:bg-gray-500",children:"Next Article"})]})]})}),s&&d.jsx("button",{onClick:a,className:"fixed bottom-6 right-6 w-12 h-12 bg-gray-600 text-white rounded-full shadow-lg flex items-center justify-center hover:bg-gray-800 transition-all duration-300",children:d.jsx("i",{className:"fas fa-arrow-up"})})]})},ppe=zt(fpe),mpe=[{id:"justice_human_rights",title:"Social Justice and Human Rights",subtitle:"ARTICLE XIII",sections:[{name:"Section 1",paragraph:["The Congress shall give highest priority to the enactment of measures that protect and enhance the right of all the people to human dignity, reduce social, economic, and political inequalities, and remove cultural inequities by equitably diffusing wealth and political power for the common good.","To this end, the State shall regulate the acquisition, ownership, use, and disposition of property and its increments."]},{name:"Section 2",paragraph:"The promotion of social justice shall include the commitment to create economic opportunities based on freedom of initiative and self-reliance."}]}],gpe=[{id:"labor",title:"Labor",sections:[{name:"Section 3",paragraph:["The State shall afford full protection to labor, local and overseas, organized and unorganized, and promote full employment and equality of employment opportunities for all.","It shall guarantee the rights of all workers to self-organization, collective bargaining and negotiations, and peaceful concerted activities, including the right to strike in accordance with law. They shall be entitled to security of tenure, humane conditions of work, and a living wage. They shall also participate in policy and decision-making processes affecting their rights and benefits as may be provided by law.","The State shall promote the principle of shared responsibility between workers and employers and the preferential use of voluntary modes in settling disputes, including conciliation, and shall enforce their mutual compliance therewith to foster industrial peace.","The State shall regulate the relations between workers and employers, recognizing the right of labor to its just share in the fruits of production and the right of enterprises to reasonable returns on investments, and to expansion and growth."]}]}],ype=[{id:"agrarian_reform",title:"Agrarian and Natural Resources Reform",sections:[{name:"Section 4",paragraph:"The State shall, by law, undertake an agrarian reform program founded on the right of farmers and regular farmworkers, who are landless, to own directly or collectively the lands they till or, in the case of other farmworkers, to receive a just share of the fruits thereof. To this end, the State shall encourage and undertake the just distribution of all agricultural lands, subject to such priorities and reasonable retention limits as the Congress may prescribe, taking into account ecological, developmental, or equity considerations, and subject to the payment of just compensation. In determining retention limits, the State shall respect the right of small landowners. The State shall further provide incentives for voluntary land-sharing."},{name:"Section 5",paragraph:"The State shall recognize the right of farmers, farmworkers, and landowners, as well as cooperatives, and other independent farmers organizations to participate in the planning, organization, and management of the program, and shall provide support to agriculture through appropriate technology and research, and adequate financial, production, marketing, and other support services"},{name:"Section 6",paragraph:["The State shall apply the principles of agrarian reform or stewardship, whenever applicable in accordance with law, in the disposition or utilization of other natural resources, including lands of the public domain under lease or concession suitable to agriculture, subject to prior rights, homestead rights of small settlers, and the rights of indigenous communities to their ancestral lands.","The State may resettle landless farmers and farmworkers in its own agricultural estates which shall be distributed to them in the manner provided by law."]},{name:"Section 7",paragraph:"The State shall protect the rights of subsistence fishermen, especially of local communities, to the preferential use of local marine and fishing resources, both inland and offshore. It shall provide support to such fishermen through appropriate technology and research, adequate financial, production, and marketing assistance, and other services. The State shall also protect, develop, and conserve such resources. The protection shall extend to offshore fishing grounds of subsistence fishermen against foreign intrusion. Fishworkers shall receive a just share from their labor in the utilization of marine and fishing resources."},{name:"Section 8",paragraph:"The State shall provide incentives to landowners to invest the proceeds of the agrarian reform program to promote industrialization, employment creation, and privatization of public sector enterprises. Financial instruments used as payment for their lands shall be honored as equity in enterprises of their choice."}]}],vpe=[{id:"suff",title:"Urban Land Reform and Housing",sections:[{name:"Section 9",paragraph:"The State shall, by law, and for the common good, undertake, in cooperation with the public sector, a continuing program of urban land reform and housing which will make available at affordable cost decent housing and basic services to underprivileged and homeless citizens in urban centers and resettlements areas. It shall also promote adequate employment opportunities to such citizens. In the implementation of such program the State shall respect the rights of small property owners."},{name:"Section 10",paragraph:["Urban or rural poor dwellers shall not be evicted nor their dwellings demolished, except in accordance with law and in a just and humane manner.","No resettlement of urban or rural dwellers shall be undertaken without adequate consultation with them and the communities where they are to be relocated."]}]}],xpe=[{id:"health",title:"Health",sections:[{name:"Section 11",paragraph:"The State shall adopt an integrated and comprehensive approach to health development which shall endeavor to make essential goods, health and other social services available to all the people at affordable cost. There shall be priority for the needs of the underprivileged sick, elderly, disabled, women, and children. The State shall endeavor to provide free medical care to paupers."},{name:"Section 12",paragraph:"The State shall establish and maintain an effective food and drug regulatory system and undertake appropriate health manpower development and research, responsive to the countrys health needs and problems."},{name:"Section 13",paragraph:"The State shall establish a special agency for disabled persons for rehabilitation, self-development and self-reliance, and their integration into the mainstream of society."}]}],_pe=[{id:"women",title:"Women",sections:[{name:"Section 14",paragraph:"The State shall protect working women by providing safe and healthful working conditions, taking into account their maternal functions, and such facilities and opportunities that will enhance their welfare and enable them to realize their full potential in the service of the nation."}]}],wpe=[{id:"people_orgs",title:"Role and Rights of Peoples Organizations",sections:[{name:"Section 15",paragraph:["The State shall respect the role of independent peoples organizations to enable the people to pursue and protect, within the democratic framework, their legitimate and collective interests and aspirations through peaceful and lawful means.","The State shall respect the role of independent peoples organizations to enable the people to pursue and protect, within the democratic framework, their legitimate and collective interests and aspirations through peaceful and lawful means."]},{name:"Section 16",paragraph:"The right of the people and their organizations to effective and reasonable participation at all levels of social, political, and economic decision-making shall not be abridged. The State shall, by law, facilitate the establishment of adequate consultation mechanisms."}]}],bpe=[{id:"human_rights",title:"Human Rights",sections:[{name:"Section 17",paragraph:["(1) There is hereby created an independent office called the Commission on Human Rights.","(2) The Commission shall be composed of a Chairman and four Members who must be natural-born citizens of the Philippines and a majority of whom shall be members of the Bar. The term of office and other qualifications and disabilities of the Members of the Commission shall be provided by law.","(3) Until this Commission is constituted, the existing Presidential Committee on Human Rights shall continue to exercise its present functions and powers.","(4) The approved annual appropriations of the Commission shall be automatically and regularly released."]},{name:"Section 18",paragraph:["The Commission on Human Rights shall have the following powers and functions:","(1) Investigate, on its own or on complaint by any party, all forms of human rights violations involving civil and political rights;","(2) Adopt its operational guidelines and rules of procedure, and cite for contempt for violations thereof in accordance with the Rules of Court;","(3) Provide appropriate legal measures for the protection of human rights of all persons within the Philippines, as well as Filipinos residing abroad, and provide for preventive measures and legal aid services to the underprivileged whose human rights have been violated or need protection;","(4) Exercise visitorial powers over jails, prisons, or detention facilities;","(5) Establish a continuing program of research, education, and information to enhance respect for the primacy of human rights;","(6) Recommend to the Congress effective measures to promote human rights and to provide for compensation to victims of violations of human rights, or their families;","(7) Monitor the Philippine Governments compliance with international treaty obligations on human rights;","(8) Grant immunity from prosecution to any person whose testimony or whose possession of documents or other evidence is necessary or convenient to determine the truth in any investigation conducted by it or under its authority;","(9) Request the assistance of any department, bureau, office, or agency in the performance of its functions;","(10) Appoint its officers and employees in accordance with law; and","(11) Perform such other duties and functions as may be provided by law."]},{name:"Section 19",paragraph:"The Congress may provide for other cases of violations of human rights that should fall within the authority of the Commission, taking into account its recommendations."}]}],Spe=()=>{const n=qt(),{selectedWord:e,definition:t,tooltipPosition:i,handleTextSelection:r}=Ln(),[s,o]=B.useState(!1);B.useEffect(()=>{const u=()=>{window.scrollY>200?o(!0):o(!1)};return window.addEventListener("scroll",u),()=>window.removeEventListener("scroll",u)},[]);const a=()=>{window.scrollTo({top:0,behavior:"smooth"})},l=()=>{n("/articleFourteen")},c=()=>{n("/articleTwelve")};return d.jsxs("div",{className:"text-spacing-3 leading-relaxed tracking-wide",children:[d.jsx(Pn,{children:d.jsxs("div",{children:[mpe.map(u=>d.jsxs("div",{className:"my-5",children:[d.jsx("h5",{className:q.paragraphSubText,children:u.subtitle}),d.jsx("h4",{className:`${q.headText} mb-10`,children:u.title}),d.jsx("div",{children:u.sections.map((f,m)=>d.jsxs("div",{className:"my-4",children:[d.jsx("h6",{className:q.paragraphSubText,children:f.name}),d.jsx("p",{onMouseUp:r,className:q.paragraphSubTextLower,children:f.paragraph})]},m))})]},u.id)),d.jsx("br",{}),gpe.map(u=>d.jsxs("div",{className:"my-5",children:[d.jsx("h5",{className:q.paragraphHeadText,children:u.title}),d.jsx("div",{children:u.sections.map((f,m)=>d.jsxs("div",{className:"my-4",children:[d.jsx("h6",{className:q.paragraphSubText,children:f.name}),d.jsx("p",{onMouseUp:r,className:q.paragraphSubTextLower,children:f.paragraph})]},m))})]},u.id)),d.jsx("br",{}),ype.map(u=>d.jsxs("div",{className:"my-5",children:[d.jsx("h5",{className:q.paragraphSubText,children:u.subtitle}),d.jsx("h4",{className:`${q.headText} mb-10`,children:u.title}),d.jsx("div",{children:u.sections.map((f,m)=>d.jsxs("div",{className:"my-4",children:[d.jsx("h6",{className:q.paragraphSubText,children:f.name}),d.jsx("p",{onMouseUp:r,className:q.paragraphSubTextLower,children:f.paragraph})]},m))})]},u.id)),d.jsx("br",{}),vpe.map(u=>d.jsxs("div",{className:"my-5",children:[d.jsx("h5",{className:q.paragraphSubText,children:u.subtitle}),d.jsx("h4",{className:`${q.headText} mb-10`,children:u.title}),d.jsx("div",{children:u.sections.map((f,m)=>d.jsxs("div",{className:"my-4",children:[d.jsx("h6",{className:q.paragraphSubText,children:f.name}),d.jsx("p",{onMouseUp:r,className:q.paragraphSubTextLower,children:f.paragraph})]},m))})]},u.id)),d.jsx("br",{}),xpe.map(u=>d.jsxs("div",{className:"my-5",children:[d.jsx("h5",{className:q.paragraphSubText,children:u.subtitle}),d.jsx("h4",{className:`${q.headText} mb-10`,children:u.title}),d.jsx("div",{children:u.sections.map((f,m)=>d.jsxs("div",{className:"my-4",children:[d.jsx("h6",{className:q.paragraphSubText,children:f.name}),d.jsx("p",{onMouseUp:r,className:q.paragraphSubTextLower,children:f.paragraph})]},m))})]},u.id)),d.jsx("br",{}),_pe.map(u=>d.jsxs("div",{className:"my-5",children:[d.jsx("h5",{className:q.paragraphSubText,children:u.subtitle}),d.jsx("h4",{className:`${q.headText} mb-10`,children:u.title}),d.jsx("div",{children:u.sections.map((f,m)=>d.jsxs("div",{className:"my-4",children:[d.jsx("h6",{className:q.paragraphSubText,children:f.name}),d.jsx("p",{onMouseUp:r,className:q.paragraphSubTextLower,children:f.paragraph})]},m))})]},u.id)),d.jsx("br",{}),wpe.map(u=>d.jsxs("div",{className:"my-5",children:[d.jsx("h5",{className:q.paragraphSubText,children:u.subtitle}),d.jsx("h4",{className:`${q.headText} mb-10`,children:u.title}),d.jsx("div",{children:u.sections.map((f,m)=>d.jsxs("div",{className:"my-4",children:[d.jsx("h6",{className:q.paragraphSubText,children:f.name}),d.jsx("p",{onMouseUp:r,className:q.paragraphSubTextLower,children:f.paragraph})]},m))})]},u.id)),d.jsx("br",{}),bpe.map(u=>d.jsxs("div",{className:"my-5",children:[d.jsx("h5",{className:q.paragraphSubText,children:u.subtitle}),d.jsx("h4",{className:`${q.headText} mb-10`,children:u.title}),d.jsx("div",{children:u.sections.map((f,m)=>d.jsxs("div",{className:"my-4",children:[d.jsx("h6",{className:q.paragraphSubText,children:f.name}),d.jsx("p",{onMouseUp:r,className:q.paragraphSubTextLower,children:f.paragraph})]},m))})]},u.id)),d.jsx("br",{}),e&&d.jsxs("div",{className:"absolute text-left bg-white p-4 shadow-lg rounded-lg max-w-xs text-black",style:{left:i.left,top:i.top,zIndex:100},children:[d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsx("p",{className:q.dictionaryText,children:e}),d.jsx("i",{className:"fas fa-volume-up ml-5 text-gray-600"})]}),d.jsx("hr",{className:"border-2 mb-2"}),d.jsx("p",{children:t})]}),d.jsxs("div",{className:"mt-10 text-center flex justify-between",children:[d.jsx("button",{onClick:c,className:"px-6 py-2 border justify-end text-white rounded-lg hover:bg-gray-500",children:"Previous Article"}),d.jsx("button",{onClick:l,className:"px-6 py-2 border justify-end text-white rounded-lg hover:bg-gray-500",children:"Next Article"})]})]})}),s&&d.jsx("button",{onClick:a,className:"fixed bottom-6 right-6 w-12 h-12 bg-gray-600 text-white rounded-full shadow-lg flex items-center justify-center hover:bg-gray-800 transition-all duration-300",children:d.jsx("i",{className:"fas fa-arrow-up"})})]})},Tpe=zt(Spe),Epe=[{id:"education",title:"Education",subtitle:"ARTICLE XIV - Education, Science and Technology, Arts, Culture, and Sports",sections:[{name:"Section 1",paragraph:"The State shall protect and promote the right of all citizens to quality education at all levels and shall take appropriate steps to make such education accessible to all."},{name:"Section 2",paragraph:["(1) Establish, maintain, and support a complete, adequate, and integrated system of education relevant to the needs of the people and society.","(2) Establish and maintain a system of free public education in the elementary and high school levels. Without limiting the natural right of parents to rear their children, elementary education is compulsory for all children of school age.","(3) Establish and maintain a system of scholarship grants, student loan programs, subsidies, and other incentives which shall be available to deserving students in both public and private schools, especially to the underprivileged.","(4) Encourage non-formal, informal, and indigenous learning systems, as well as self-learning, independent, and out-of-school study programs particularly those that respond to community needs.","(5) Provide adult citizens, the disabled, and out-of-school youth with training in civics, vocational efficiency, and other skills."]},{name:"Section 3",paragraph:["(1) All educational institutions shall include the study of the Constitution as part of the curricula.","(2) They shall inculcate patriotism and nationalism, foster love of humanity, respect for human rights, appreciation of the role of national heroes in the historical development of the country, teach the rights and duties of citizenship, strengthen ethical and spiritual values, develop moral character and personal discipline, encourage critical and creative thinking, broaden scientific and technological knowledge, and promote vocational efficiency.","(3) At the option expressed in writing by the parents or guardians, religion shall be allowed to be taught to their children or wards in public elementary and high schools within the regular class hours by instructors designated or approved by the religious authorities of the religion to which the children or wards belong, without additional cost to the Government."]},{name:"Section 4",paragraph:["(1) The State recognizes the complementary roles of public and private institutions in the educational system and shall exercise reasonable supervision and regulation of all educational institutions.","(2) Educational institutions, other than those established by religious groups and mission boards, shall be owned solely by citizens of the Philippines or corporations or associations at least sixty per centum of the capital of which is owned by such citizens. The Congress may, however, require increased Filipino equity participation in all educational institutions.","The control and administration of educational institutions shall be vested in citizens of the Philippines.","No educational institution shall be established exclusively for aliens and no group of aliens shall comprise more than one-third of the enrollment in any school. The provisions of this subsection shall not apply to schools established for foreign diplomatic personnel and their dependents and, unless otherwise provided by law, for other foreign temporary residents.","(3) All revenues and assets of non-stock, non-profit educational institutions used actually, directly, and exclusively for educational purposes shall be exempt from taxes and duties. Upon the dissolution or cessation of the corporate existence of such institutions, their assets shall be disposed of in the manner provided by law.","Proprietary educational institutions, including those cooperatively owned, may likewise be entitled to such exemptions subject to the limitations provided by law including restrictions on dividends and provisions for reinvestment.","(4) Subject to conditions prescribed by law, all grants, endowments, donations, or contributions used actually, directly, and exclusively for educational purposes shall be exempt from tax."]},{name:"Section 5",paragraph:["(1) The State shall take into account regional and sectoral needs and conditions and shall encourage local planning in the development of educational policies and programs.","(2) Academic freedom shall be enjoyed in all institutions of higher learning.","(3) Every citizen has a right to select a profession or course of study, subject to fair, reasonable, and equitable admission and academic requirements.","(4) The State shall enhance the right of teachers to professional advancement. Non-teaching academic and non-academic personnel shall enjoy the protection of the State.","(5) The State shall assign the highest budgetary priority to education and ensure that teaching will attract and retain its rightful share of the best available talents through adequate remuneration and other means of job satisfaction and fulfillment."]}]}],Cpe=[{id:"language",title:"Language",subtitle:"ARTICLE XIV",sections:[{name:"Section 6",paragraph:"The national language of the Philippines is Filipino. As it evolves, it shall be further developed and enriched on the basis of existing Philippine and other languages. Subject to provisions of law and as the Congress may deem appropriate, the Government shall take steps to initiate and sustain the use of Filipino as a medium of official communication and as language of instruction in the educational system."},{name:"Section 7",paragraph:["For purposes of communication and instruction, the official languages of the Philippines are Filipino and, until otherwise provided by law, English.","The regional languages are the auxiliary official languages in the regions and shall serve as auxiliary media of instruction therein.","Spanish and Arabic shall be promoted on a voluntary and optional basis."]},{name:"Section 8",paragraph:"This Constitution shall be promulgated in Filipino and English and shall be translated into major regional languages, Arabic, and Spanish."},{name:"Section 9",paragraph:"The Congress shall establish a national language commission composed of representatives of various regions and disciplines which shall undertake, coordinate, and promote researches for the development, propagation, and preservation of Filipino and other languages."}]}],Ape=[{id:"science_Tech",title:"Science and Technology",subtitle:"ARTICLE XIV",sections:[{name:"Section 10",paragraph:"Science and technology are essential for national development and progress. The State shall give priority to research and development, invention, innovation, and their utilization; and to science and technology education, training, and services. It shall support indigenous, appropriate, and self-reliant scientific and technological capabilities, and their application to the countrys productive systems and national life."},{name:"Section 11",paragraph:["The Congress may provide for incentives, including tax deductions, to encourage private participation in programs of basic and applied scientific research.","Scholarships, grants-in-aid, or other forms of incentives shall be provided to deserving science students, researchers, scientists, inventors, technologists, and specially gifted citizens."]},{name:"Section 12",paragraph:"The State shall regulate the transfer and promote the adaptation of technology from all sources for the national benefit. It shall encourage the widest participation of private groups, local governments, and community-based organizations in the generation and utilization of science and technology."},{name:"Section 13",paragraph:"The State shall protect and secure the exclusive rights of scientists, inventors, artists, and other gifted citizens to their intellectual property and creations, particularly when beneficial to the people, for such period as may be provided by law."}]}],Mpe=[{id:"arts_Culture",title:"Arts and Culture",subtitle:"ARTICLE XIV",sections:[{name:"Section 14",paragraph:"The State shall foster the preservation, enrichment, and dynamic evolution of a Filipino national culture based on the principle of unity in diversity in a climate of free artistic and intellectual expression."},{name:"Section 15",paragraph:"Arts and letters shall enjoy the patronage of the State. The State shall conserve, promote, and popularize the nations historical and cultural heritage and resources, as well as artistic creations."},{name:"Section 16",paragraph:"All the countrys artistic and historic wealth constitutes the cultural treasure of the nation and shall be under the protection of the State which may regulate its disposition."},{name:"Section 17",paragraph:"The State shall recognize, respect, and protect the rights of indigenous cultural communities to preserve and develop their cultures, traditions, and institutions. It shall consider these rights in the formulation of national plans and policies."},{name:"Section 18",paragraph:["(1) The State shall ensure equal access to cultural opportunities through the educational system, public or private cultural entities, scholarships, grants and other incentives, and community cultural centers, and other public venues.","(2) The State shall encourage and support researches and studies on the arts and culture."]}]}],Ipe=[{id:"sport",title:"Sports",subtitle:"ARTICLE XIV",sections:[{name:"Section 19",paragraph:["(1) The State shall promote physical education and encourage sports programs, league competitions, and amateur sports, including training for international competitions, to foster self-discipline, teamwork, and excellence for the development of a healthy and alert citizenry.","(2) All educational institutions shall undertake regular sports activities throughout the country in cooperation with athletic clubs and other sectors."]}]}],Ppe=()=>{const n=qt(),{selectedWord:e,definition:t,tooltipPosition:i,handleTextSelection:r}=Ln(),[s,o]=B.useState(!1);B.useEffect(()=>{const u=()=>{window.scrollY>200?o(!0):o(!1)};return window.addEventListener("scroll",u),()=>window.removeEventListener("scroll",u)},[]);const a=()=>{window.scrollTo({top:0,behavior:"smooth"})},l=()=>{n("/articleFifteen")},c=()=>{n("/articleThirteen")};return d.jsxs("div",{className:"text-spacing-3 leading-relaxed tracking-wide",children:[d.jsx(Pn,{children:d.jsxs("div",{children:[Epe.map(u=>d.jsxs("div",{className:"my-5",children:[d.jsx("h5",{className:q.paragraphSubText,children:u.subtitle}),d.jsx("h4",{className:`${q.headText} mb-10`,children:u.title}),d.jsx("div",{children:u.sections.map((f,m)=>d.jsxs("div",{className:"my-4",children:[d.jsx("h6",{className:q.paragraphSubText,children:f.name}),d.jsx("p",{onMouseUp:r,className:q.paragraphSubTextLower,children:f.paragraph})]},m))})]},u.id)),d.jsx("br",{}),Cpe.map(u=>d.jsxs("div",{className:"my-5",children:[d.jsx("h5",{className:q.paragraphHeadText,children:u.title}),d.jsx("div",{children:u.sections.map((f,m)=>d.jsxs("div",{className:"my-4",children:[d.jsx("h6",{className:q.paragraphSubText,children:f.name}),d.jsx("p",{onMouseUp:r,className:q.paragraphSubTextLower,children:f.paragraph})]},m))})]},u.id)),d.jsx("br",{}),Ape.map(u=>d.jsxs("div",{className:"my-5",children:[d.jsx("h5",{className:q.paragraphSubText,children:u.subtitle}),d.jsx("h4",{className:`${q.headText} mb-10`,children:u.title}),d.jsx("div",{children:u.sections.map((f,m)=>d.jsxs("div",{className:"my-4",children:[d.jsx("h6",{className:q.paragraphSubText,children:f.name}),d.jsx("p",{onMouseUp:r,className:q.paragraphSubTextLower,children:f.paragraph})]},m))})]},u.id)),d.jsx("br",{}),Mpe.map(u=>d.jsxs("div",{className:"my-5",children:[d.jsx("h5",{className:q.paragraphSubText,children:u.subtitle}),d.jsx("h4",{className:`${q.headText} mb-10`,children:u.title}),d.jsx("div",{children:u.sections.map((f,m)=>d.jsxs("div",{className:"my-4",children:[d.jsx("h6",{className:q.paragraphSubText,children:f.name}),d.jsx("p",{onMouseUp:r,className:q.paragraphSubTextLower,children:f.paragraph})]},m))})]},u.id)),d.jsx("br",{}),Ipe.map(u=>d.jsxs("div",{className:"my-5",children:[d.jsx("h5",{className:q.paragraphSubText,children:u.subtitle}),d.jsx("h4",{className:`${q.headText} mb-10`,children:u.title}),d.jsx("div",{children:u.sections.map((f,m)=>d.jsxs("div",{className:"my-4",children:[d.jsx("h6",{className:q.paragraphSubText,children:f.name}),d.jsx("p",{onMouseUp:r,className:q.paragraphSubTextLower,children:f.paragraph})]},m))})]},u.id)),d.jsx("br",{}),e&&d.jsxs("div",{className:"absolute text-left bg-white p-4 shadow-lg rounded-lg max-w-xs text-black",style:{left:i.left,top:i.top,zIndex:100},children:[d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsx("p",{className:q.dictionaryText,children:e}),d.jsx("i",{className:"fas fa-volume-up ml-5 text-gray-600"})]}),d.jsx("hr",{className:"border-2 mb-2"}),d.jsx("p",{children:t})]}),d.jsxs("div",{className:"mt-10 text-center flex justify-between",children:[d.jsx("button",{onClick:c,className:"px-6 py-2 border justify-end text-white rounded-lg hover:bg-gray-500",children:"Previous Article"}),d.jsx("button",{onClick:l,className:"px-6 py-2 border justify-end text-white rounded-lg hover:bg-gray-500",children:"Next Article"})]})]})}),s&&d.jsx("button",{onClick:a,className:"fixed bottom-6 right-6 w-12 h-12 bg-gray-600 text-white rounded-full shadow-lg flex items-center justify-center hover:bg-gray-800 transition-all duration-300",children:d.jsx("i",{className:"fas fa-arrow-up"})})]})},Rpe=zt(Ppe),Npe=[{id:"family",title:"The Family",subtitle:"ARTICLE XV",sections:[{name:"Section 1",paragraph:"The State recognizes the Filipino family as the foundation of the nation. Accordingly, it shall strengthen its solidarity and actively promote its total development."},{name:"Section 2",paragraph:"Marriage, as an inviolable social institution, is the foundation of the family and shall be protected by the State."},{name:"Section 3",paragraph:["(1) The right of spouses to found a family in accordance with their religious convictions and the demands of responsible parenthood.","(2) The right of children to assistance, including proper care and nutrition, and special protection from all forms of neglect, abuse, cruelty, exploitation, and other conditions prejudicial to their development.","(3) The right of the family to a family living wage and income.","(4) The right of families or family associations to participate in the planning and implementation of policies and programs that affect them."]},{name:"Section 4",paragraph:"The family has the duty to care for its elderly members but the State may also do so through just programs of social security."}]}],Lpe=()=>{const n=qt(),{selectedWord:e,definition:t,tooltipPosition:i,handleTextSelection:r}=Ln(),[s,o]=B.useState(!1);B.useEffect(()=>{const u=()=>{window.scrollY>200?o(!0):o(!1)};return window.addEventListener("scroll",u),()=>window.removeEventListener("scroll",u)},[]);const a=()=>{window.scrollTo({top:0,behavior:"smooth"})},l=()=>{n("/articleSixteen")},c=()=>{n("/articleFourteen")};return d.jsxs("div",{className:"text-spacing-3 leading-relaxed tracking-wide",children:[d.jsx(Pn,{children:d.jsxs("div",{children:[Npe.map(u=>d.jsxs("div",{className:"my-5",children:[d.jsx("h5",{className:q.paragraphSubText,children:u.subtitle}),d.jsx("h4",{className:`${q.headText} mb-10`,children:u.title}),d.jsx("div",{children:u.sections.map((f,m)=>d.jsxs("div",{className:"my-4",children:[d.jsx("h6",{className:q.paragraphSubText,children:f.name}),d.jsx("p",{onMouseUp:r,className:q.paragraphSubTextLower,children:f.paragraph})]},m))})]},u.id)),e&&d.jsxs("div",{className:"absolute text-left bg-white p-4 shadow-lg rounded-lg max-w-xs text-black",style:{left:i.left,top:i.top,zIndex:100},children:[d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsx("p",{className:q.dictionaryText,children:e}),d.jsx("i",{className:"fas fa-volume-up ml-5 text-gray-600"})]}),d.jsx("hr",{className:"border-2 mb-2"}),d.jsx("p",{children:t})]}),d.jsxs("div",{className:"mt-10 text-center flex justify-between",children:[d.jsx("button",{onClick:c,className:"px-6 py-2 border justify-end text-white rounded-lg hover:bg-gray-500",children:"Previous Article"}),d.jsx("button",{onClick:l,className:"px-6 py-2 border justify-end text-white rounded-lg hover:bg-gray-500",children:"Next Article"})]})]})}),s&&d.jsx("button",{onClick:a,className:"fixed bottom-6 right-6 w-12 h-12 bg-gray-600 text-white rounded-full shadow-lg flex items-center justify-center hover:bg-gray-800 transition-all duration-300",children:d.jsx("i",{className:"fas fa-arrow-up"})})]})},Dpe=zt(Lpe),kpe=[{id:"general_provisions",title:"General Provisions",subtitle:"ARTICLE XVI",sections:[{name:"Section 1",paragraph:"The flag of the Philippines shall be red, white, and blue, with a sun and three stars, as consecrated and honored by the people and recognized by law."},{name:"Section 2",paragraph:"The Congress may, by law, adopt a new name for the country, a national anthem, or a national seal, which shall all be truly reflective and symbolic of the ideals, history, and traditions of the people. Such law shall take effect only upon its ratification by the people in a national referendum."},{name:"Section 3",paragraph:"The State may not be sued without its consent."},{name:"Section 4",paragraph:"The Armed Forces of the Philippines shall be composed of a citizen armed force which shall undergo military training and serve, as may be provided by law. It shall keep a regular force necessary for the security of the State."},{name:"Section 5",paragraph:["(1) All members of the armed forces shall take an oath or affirmation to uphold and defend this Constitution.","(2) The State shall strengthen the patriotic spirit and nationalist consciousness of the military, and respect for peoples rights in the performance of their duty.","(3) Professionalism in the armed forces and adequate remuneration and benefits of its members shall be a prime concern of the State. The armed forces shall be insulated from partisan politics. No member of the military shall engage directly or indirectly in any partisan political activity, except to vote.","(4) No member of the armed forces in the active service shall, at any time, be appointed or designated in any capacity to a civilian position in the Government including government-owned or controlled corporations or any of their subsidiaries.","(5) Laws on retirement of military officers shall not allow extension of their service.","(6) The officers and men of the regular force of the armed forces shall be recruited proportionately from all provinces and cities as far as practicable.","(7) The tour of duty of the Chief of Staff of the armed forces shall not exceed three years. However, in times of war or other national emergency declared by the Congress, the President may extend such tour of duty."]},{name:"Section 6",paragraph:"The State shall establish and maintain one police force, which shall be national in scope and civilian in character, to be administered and controlled by a national police commission. The authority of local executives over the police units in their jurisdiction shall be provided by law."},{name:"Section 7",paragraph:"The State shall provide immediate and adequate care, benefits, and other forms of assistance to war veterans and veterans of military campaigns, their surviving spouses and orphans. Funds shall be provided therefor and due consideration shall be given them in the disposition of agricultural lands of the public domain and, in appropriate cases, in the utilization of natural resources."},{name:"Section 8",paragraph:"The State shall, from time to time, review to upgrade the pensions and other benefits due to retirees of both the government and the private sectors."},{name:"Section 9",paragraph:"The State shall protect consumers from trade malpractices and from substandard or hazardous products."},{name:"Section 10",paragraph:"The State shall provide the policy environment for the full development of Filipino capability and the emergence of communication structures suitable to the needs and aspirations of the nation and the balanced flow of information into, out of, and across the country, in accordance with a policy that respects the freedom of speech and of the press."},{name:"Section 11",paragraph:["(1) The ownership and management of mass media shall be limited to citizens of the Philippines, or to corporations, cooperatives or associations, wholly-owned and managed by such citizens. The Congress shall regulate or prohibit monopolies in commercial mass media when the public interest so requires. No combinations in restraint of trade or unfair competition therein shall be allowed.","(2) The advertising industry is impressed with public interest, and shall be regulated by law for the protection of consumers and the promotion of the general welfare. Only Filipino citizens or corporations or associations at least seventy per centum of the capital of which is owned by such citizens shall be allowed to engage in the advertising industry. The participation of foreign investors in the governing body of entities in such industry shall be limited to their proportionate share in the capital thereof, and all the executive and managing officers of such entities must be citizens of the Philippines."]},{name:"Section 12",paragraph:"The Congress may create a consultative body to advise the President on policies affecting indigenous cultural communities, the majority of the members of which shall come from such communities."}]}],Ope=()=>{const n=qt(),{selectedWord:e,definition:t,tooltipPosition:i,handleTextSelection:r}=Ln(),[s,o]=B.useState(!1);B.useEffect(()=>{const u=()=>{window.scrollY>200?o(!0):o(!1)};return window.addEventListener("scroll",u),()=>window.removeEventListener("scroll",u)},[]);const a=()=>{window.scrollTo({top:0,behavior:"smooth"})},l=()=>{n("/articleSeventeen")},c=()=>{n("/articleFifteen")};return d.jsxs("div",{className:"text-spacing-3 leading-relaxed tracking-wide",children:[d.jsx(Pn,{children:d.jsxs("div",{children:[kpe.map(u=>d.jsxs("div",{className:"my-5",children:[d.jsx("h5",{className:q.paragraphSubText,children:u.subtitle}),d.jsx("h4",{className:`${q.headText} mb-10`,children:u.title}),d.jsx("div",{children:u.sections.map((f,m)=>d.jsxs("div",{className:"my-4",children:[d.jsx("h6",{className:q.paragraphSubText,children:f.name}),d.jsx("p",{onMouseUp:r,className:q.paragraphSubTextLower,children:f.paragraph})]},m))})]},u.id)),e&&d.jsxs("div",{className:"absolute text-left bg-white p-4 shadow-lg rounded-lg max-w-xs text-black",style:{left:i.left,top:i.top,zIndex:100},children:[d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsx("p",{className:q.dictionaryText,children:e}),d.jsx("i",{className:"fas fa-volume-up ml-5 text-gray-600"})]}),d.jsx("hr",{className:"border-2 mb-2"}),d.jsx("p",{children:t})]}),d.jsxs("div",{className:"mt-10 text-center flex justify-between",children:[d.jsx("button",{onClick:c,className:"px-6 py-2 border justify-end text-white rounded-lg hover:bg-gray-500",children:"Previous Article"}),d.jsx("button",{onClick:l,className:"px-6 py-2 border justify-end text-white rounded-lg hover:bg-gray-500",children:"Next Article"})]})]})}),s&&d.jsx("button",{onClick:a,className:"fixed bottom-6 right-6 w-12 h-12 bg-gray-600 text-white rounded-full shadow-lg flex items-center justify-center hover:bg-gray-800 transition-all duration-300",children:d.jsx("i",{className:"fas fa-arrow-up"})})]})},Upe=zt(Ope),Fpe=[{id:"amendment",title:"Amendments or Revisions",subtitle:"ARTICLE XVII",sections:[{name:"Section 1",paragraph:["Any amendment to, or revision of, this Constitution may be proposed by:","(1) The Congress, upon a vote of three-fourths of all its Members; or","(2) A constitutional convention."]},{name:"Section 2",paragraph:["Amendments to this Constitution may likewise be directly proposed by the people through initiative upon a petition of at least twelve per centum of the total number of registered voters, of which every legislative district must be represented by at least three per centum of the registered voters therein.","No amendment under this section shall be authorized within five years following the ratification of this Constitution nor oftener than once every five years thereafter.","The Congress shall provide for the implementation of the exercise of this right."]},{name:"Section 3",paragraph:["The Congress may, by a vote of two-thirds of all its Members, call a constitutional convention, or by a majority vote of all its Members, submit to the electorate the question of calling such a convention."]},{name:"Section 4",paragraph:["Any amendment to, or revision of, this Constitution under Section 1 hereof shall be valid when ratified by a majority of the votes cast in a plebiscite which shall be held not earlier than sixty days nor later than ninety days after the approval of such amendment or revision.","Any amendment under Section 2 hereof shall be valid when ratified by a majority of the votes cast in a plebiscite which shall be held not earlier than sixty days nor later than ninety days after the certification by the Commission on Elections of the sufficiency of the petition."]}]}],jpe=()=>{const n=qt(),{selectedWord:e,definition:t,tooltipPosition:i,handleTextSelection:r}=Ln(),[s,o]=B.useState(!1);B.useEffect(()=>{const u=()=>{window.scrollY>200?o(!0):o(!1)};return window.addEventListener("scroll",u),()=>window.removeEventListener("scroll",u)},[]);const a=()=>{window.scrollTo({top:0,behavior:"smooth"})},l=()=>{n("/articleEighteen")},c=()=>{n("/articleSixteen")};return d.jsxs("div",{className:"text-spacing-3 leading-relaxed tracking-wide",children:[d.jsx(Pn,{children:d.jsxs("div",{children:[Fpe.map(u=>d.jsxs("div",{className:"my-5",children:[d.jsx("h5",{className:q.paragraphSubText,children:u.subtitle}),d.jsx("h4",{className:`${q.headText} mb-10`,children:u.title}),d.jsx("div",{children:u.sections.map((f,m)=>d.jsxs("div",{className:"my-4",children:[d.jsx("h6",{className:q.paragraphSubText,children:f.name}),d.jsx("p",{onMouseUp:r,className:q.paragraphSubTextLower,children:f.paragraph})]},m))})]},u.id)),e&&d.jsxs("div",{className:"absolute text-left bg-white p-4 shadow-lg rounded-lg max-w-xs text-black",style:{left:i.left,top:i.top,zIndex:100},children:[d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsx("p",{className:q.dictionaryText,children:e}),d.jsx("i",{className:"fas fa-volume-up ml-5 text-gray-600"})]}),d.jsx("hr",{className:"border-2 mb-2"}),d.jsx("p",{children:t})]}),d.jsxs("div",{className:"mt-10 text-center flex justify-between",children:[d.jsx("button",{onClick:c,className:"px-6 py-2 border justify-end text-white rounded-lg hover:bg-gray-500",children:"Previous Article"}),d.jsx("button",{onClick:l,className:"px-6 py-2 border justify-end text-white rounded-lg hover:bg-gray-500",children:"Next Article"})]})]})}),s&&d.jsx("button",{onClick:a,className:"fixed bottom-6 right-6 w-12 h-12 bg-gray-600 text-white rounded-full shadow-lg flex items-center justify-center hover:bg-gray-800 transition-all duration-300",children:d.jsx("i",{className:"fas fa-arrow-up"})})]})},Vpe=zt(jpe),Bpe=[{id:"transitory_provisions",title:"Transitory Provisions",subtitle:"ARTICLE XVIII",sections:[{name:"Section 1",paragraph:["The first elections of Members of the Congress under this Constitution shall be held on the second Monday of May, 1987.","The first local elections shall be held on a date to be determined by the President, which may be simultaneous with the election of the Members of the Congress. It shall include the election of all Members of the city or municipal councils in the Metropolitan Manila area."]},{name:"Section 2",paragraph:["The Senators, Members of the House of Representatives, and the local officials first elected under this Constitution shall serve until noon of June 30, 1992.","Of the Senators elected in the election of 1992, the first twelve obtaining the highest number of votes shall serve for six years and the remaining twelve for three years."]},{name:"Section 3",paragraph:"All existing laws, decrees, executive orders, proclamations, letters of instructions, and other executive issuances not inconsistent with this Constitution shall remain operative until amended, repealed, or revoked."},{name:"Section 4",paragraph:"All existing treaties or international agreements which have not been ratified shall not be renewed or extended without the concurrence of at least two-thirds of all the Members of the Senate."},{name:"Section 5",paragraph:["The six-year term of the incumbent President and Vice-President elected in the February 7, 1986 election is, for purposes of synchronization of elections, hereby extended to noon of June 30, 1992.","The first regular elections for the President and Vice-President under this Constitution shall be held on the second Monday of May, 1992."]},{name:"Section 6",paragraph:"The incumbent President shall continue to exercise legislative powers until the first Congress is convened."},{name:"Section 7",paragraph:"Until a law is passed, the President may fill by appointment from a list of nominees by the respective sectors the seats reserved for sectoral representation in paragraph (2), Section 5 of Article VI of this Constitution."},{name:"Section 8",paragraph:"Until otherwise provided by the Congress, the President may constitute the Metropolitan Authority to be composed of the heads of all local government units comprising the Metropolitan Manila area."},{name:"Section 9",paragraph:"A sub-province shall continue to exist and operate until it is converted into a regular province or until its component municipalities are reverted to the mother province."},{name:"Section 10",paragraph:"All courts existing at the time of the ratification of this Constitution shall continue to exercise their jurisdiction, until otherwise provided by law. The provisions of the existing Rules of Court, judiciary acts, and procedural laws not inconsistent with this Constitution shall remain operative unless amended or repealed by the Supreme Court or the Congress."},{name:"Section 11",paragraph:"The incumbent Members of the Judiciary shall continue in office until they reach the age of seventy years or become incapacitated to discharge the duties of their office or are removed for cause."},{name:"Section 12",paragraph:"The Supreme Court shall, within one year after the ratification of this Constitution, adopt a systematic plan to expedite the decision or resolution of cases or matters pending in the Supreme Court or the lower courts prior to the effectivity of this Constitution. A similar plan shall be adopted for all special courts and quasi-judicial bodies."},{name:"Section 13",paragraph:"The legal effect of the lapse, before the ratification of this Constitution, of the applicable period for the decision or resolution of the cases or matters submitted for adjudication by the courts, shall be determined by the Supreme Court as soon as practicable."},{name:"Section 14",paragraph:"The provisions of paragraphs (3) and (4), Section 15 of Article VIII of this Constitution shall apply to cases or matters filed before the ratification of this Constitution, when the applicable period lapses after such ratification."},{name:"Section 15",paragraph:"The incumbent Members of the Civil Service Commission, the Commission on Elections, and the Commission on Audit shall continue in office for one year after the ratification of this Constitution, unless they are sooner removed for cause or become incapacitated to discharge the duties of their office or appointed to a new term thereunder. In no case shall any Member serve longer than seven years including service before the ratification of this Constitution."},{name:"Section 16",paragraph:"Career civil service employees separated from the service not for cause but as a result of the reorganization pursuant to Proclamation No. 3 dated March 25, 1986 and the reorganization following the ratification of this Constitution shall be entitled to appropriate separation pay and to retirement and other benefits accruing to them under the laws of general application in force at the time of their separation. In lieu thereof, at the option of the employees, they may be considered for employment in the Government or in any of its subdivisions, instrumentalities, or agencies, including government-owned or controlled corporations and their subsidiaries. This provision also applies to career officers whose resignation, tendered in line with the existing policy, had been accepted."},{name:"Section 17",paragraph:"Until the Congress provides otherwise, the President shall receive an annual salary of three hundred thousand pesos; the Vice-President, the President of the Senate, the Speaker of the House of Representatives, and the Chief Justice of the Supreme Court, two hundred forty thousand pesos each; the Senators, the Members of the House of Representatives, the Associate Justices of the Supreme Court, and the Chairmen of the Constitutional Commissions, two hundred four thousand pesos each; and the Members of the Constitutional Commissions, one hundred eighty thousand pesos each."},{name:"Section 18",paragraph:"At the earliest possible time, the Government shall increase the salary scales of the other officials and employees of the National Government."},{name:"Section 19",paragraph:"All properties, records, equipment, buildings, facilities, and other assets of any office or body abolished or reorganized under Proclamation No. 3 dated March 25, 1986 or this Constitution shall be transferred to the office or body to which its powers, functions, and responsibilities substantially pertain."},{name:"Section 20",paragraph:"The first Congress shall give priority to the determination of the period for the full implementation of free public secondary education."},{name:"Section 21",paragraph:"The Congress shall provide efficacious procedures and adequate remedies for the reversion to the State of all lands of the public domain and real rights connected therewith which were acquired in violation of the Constitution or the public land laws, or through corrupt practices. No transfer or disposition of such lands or real rights shall be allowed until after the lapse of one year from the ratification of this Constitution."},{name:"Section 22",paragraph:"At the earliest possible time, the Government shall expropriate idle or abandoned agricultural lands as may be defined by law, for distribution to the beneficiaries of the agrarian reform program."},{name:"Section 23",paragraph:"Advertising entities affected by paragraph (2), Section 11 of Article XVI of this Constitution shall have five years from its ratification to comply on a graduated and proportionate basis with the minimum Filipino ownership requirement therein."},{name:"Section 24",paragraph:"Private armies and other armed groups not recognized by duly constituted authority shall be dismantled. All paramilitary forces including Civilian Home Defense Forces not consistent with the citizen armed force established in this Constitution, shall be dissolved or, where appropriate, converted into the regular force."},{name:"Section 25",paragraph:"After the expiration in 1991 of the Agreement between the Republic of the Philippines and the United States of America concerning Military Bases, foreign military bases, troops, or facilities shall not be allowed in the Philippines except under a treaty duly concurred in by the Senate and, when the Congress so requires, ratified by a majority of the votes cast by the people in a national referendum held for that purpose, and recognized as a treaty by the other contracting State."},{name:"Section 26",paragraph:["The authority to issue sequestration or freeze orders under Proclamation No. 3 dated March 25, 1986 in relation to the recovery of ill-gotten wealth shall remain operative for not more than eighteen months after the ratification of this Constitution. However, in the national interest, as certified by the President, the Congress may extend said period.","A sequestration or freeze order shall be issued only upon showing of a prima facie case. The order and the list of the sequestered or frozen properties shall forthwith be registered with the proper court. For orders issued before the ratification of this Constitution, the corresponding judicial action or proceeding shall be filed within six months from its ratification. For those issued after such ratification, the judicial action or proceeding shall be commenced within six months from the issuance thereof.","The sequestration or freeze order is deemed automatically lifted if no judicial action or proceeding is commenced as herein provided."]},{name:"Section 27",paragraph:"This Constitution shall take effect immediately upon its ratification by a majority of the votes cast in a plebiscite held for the purpose and shall supersede all previous Constitutions."}]}],zpe=()=>{const n=qt(),{selectedWord:e,definition:t,tooltipPosition:i,handleTextSelection:r}=Ln(),[s,o]=B.useState(!1);B.useEffect(()=>{const c=()=>{window.scrollY>200?o(!0):o(!1)};return window.addEventListener("scroll",c),()=>window.removeEventListener("scroll",c)},[]);const a=()=>{window.scrollTo({top:0,behavior:"smooth"})},l=()=>{n("/articleSixteen")};return d.jsxs("div",{className:"text-spacing-3 leading-relaxed tracking-wide",children:[d.jsx(Pn,{children:d.jsxs("div",{children:[Bpe.map(c=>d.jsxs("div",{className:"my-5",children:[d.jsx("h5",{className:q.paragraphSubText,children:c.subtitle}),d.jsx("h4",{className:`${q.headText} mb-10`,children:c.title}),d.jsx("div",{children:c.sections.map((u,f)=>d.jsxs("div",{className:"my-4",children:[d.jsx("h6",{className:q.paragraphSubText,children:u.name}),d.jsx("p",{onMouseUp:r,className:q.paragraphSubTextLower,children:u.paragraph})]},f))})]},c.id)),e&&d.jsxs("div",{className:"absolute text-left bg-white p-4 shadow-lg rounded-lg max-w-xs text-black",style:{left:i.left,top:i.top,zIndex:100},children:[d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsx("p",{className:q.dictionaryText,children:e}),d.jsx("i",{className:"fas fa-volume-up ml-5 text-gray-600"})]}),d.jsx("hr",{className:"border-2 mb-2"}),d.jsx("p",{children:t})]}),d.jsx("div",{className:"mt-10 text-center flex justify-between",children:d.jsx("button",{onClick:l,className:"px-6 py-2 border justify-end text-white rounded-lg hover:bg-gray-500",children:"Previous Article"})})]})}),s&&d.jsx("button",{onClick:a,className:"fixed bottom-6 right-6 w-12 h-12 bg-gray-600 text-white rounded-full shadow-lg flex items-center justify-center hover:bg-gray-800 transition-all duration-300",children:d.jsx("i",{className:"fas fa-arrow-up"})})]})},Hpe=zt(zpe),Gpe=[{id:"general_provisions",title:"General Provisions",subtitle:"Chapter I",sections:[{name:"Section 1",paragraph:"This Act shall be known as The Indigenous Peoples Rights Act of 1997."},{name:"Section 2",paragraph:"a. The State shall recognize and promote the rights of ICCs/IPs within the framework of national unity and development;"},{paragraph:"b. The State shall protect the rights of ICCs/IPs to their ancestral domains to ensure their economic, social and cultural well being and shall recognize the applicability of customary laws governing property rights or relations in determining the ownership and extent of ancestral domain;"},{paragraph:"c. The State shall recognize, respect and protect the rights of ICCs/IPs to preserve and develop their cultures, traditions and institutions. It shall consider these rights in the formulation of national laws and policies;"},{paragraph:"d. The State shall guarantee that members of the ICCs/IPs regardless of sex, shall equally enjoy the full measure of human rights and freedoms without distinction or discrimination;"},{paragraph:"e. The State shall take measures, with the participation of the ICCs/IPs concerned, to protect their rights and guarantee respect for their cultural integrity, and to ensure that members of the ICCs/IPs benefit on an equal footing from the rights and opportunities which national laws and regulations grant to other members of the population; and"},{paragraph:"f. The State recognizes its obligations to respond to the strong expression of the ICCs/IPs for cultural integrity by assuring maximum ICC/IP participation in the direction of education, health, as well as other services of ICCs/IPs, in order to render such services more responsive to the needs and desires of these communities."},{paragraph:["Towards these ends, the State shall institute and establish the necessary mechanisms to enforce and guarantee the realization of these rights, taking into consideration their customs, traditions, values, beliefs, interests and institutions, and to adopt and implement measures to protect their rights to their ancestral domains."]}]}],Wpe=()=>{const n=qt(),{selectedWord:e,definition:t,tooltipPosition:i,handleTextSelection:r}=Ln(),[s,o]=B.useState(!1);B.useEffect(()=>{const c=()=>{window.scrollY>200?o(!0):o(!1)};return window.addEventListener("scroll",c),()=>window.removeEventListener("scroll",c)},[]);const a=()=>{window.scrollTo({top:0,behavior:"smooth"})},l=()=>{n("/chapterTwo")};return d.jsxs("div",{className:"text-spacing-3 leading-relaxed tracking-wide ",children:[d.jsx(Pn,{children:d.jsxs("div",{children:[Gpe.map(c=>d.jsxs("div",{className:"my-5",children:[d.jsx("h5",{className:q.paragraphSubText,children:c.subtitle}),d.jsx("h4",{className:`${q.headText} mb-10`,children:c.title}),d.jsx("div",{children:c.sections.map((u,f)=>d.jsxs("div",{className:"my-4",children:[d.jsx("h6",{className:q.paragraphSubText,children:u.name}),d.jsx("p",{onMouseUp:r,className:q.paragraphSubTextLower,children:u.paragraph})]},f))})]},c.id)),e&&d.jsxs("div",{className:"absolute text-left bg-white p-4 shadow-lg rounded-lg max-w-xs text-black",style:{left:i.left,top:i.top,zIndex:100},children:[d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsx("p",{className:q.dictionaryText,children:e}),d.jsx("i",{className:"fas fa-volume-up ml-5 text-gray-600"})]}),d.jsx("hr",{className:"border-2 mb-2"}),d.jsx("p",{children:t})]}),d.jsx("div",{className:"mt-5 text-center",children:d.jsx("button",{onClick:l,className:"px-6 py-2 border justify-end text-white rounded-lg hover:bg-gray-500 flex ml-auto",children:"Next Chapter"})})]})}),s&&d.jsx("button",{onClick:a,className:"fixed bottom-6 right-6 w-12 h-12 bg-gray-600 text-white rounded-full shadow-lg flex items-center justify-center hover:bg-gray-800 transition-all duration-300",children:d.jsx("i",{className:"fas fa-arrow-up"})})]})},qpe=zt(Wpe),$pe=[{id:"definition",title:"Definition of Terms",subtitle:"Chapter II",sections:[{name:"Section 3",paragraph:"For purposes of this Act, the following terms shall mean:"},{name:"a. Ancestral Domains",paragraph:["Subject to Section 56 hereof, refer to all areas generally belonging to ICCs/IPs comprising lands, inland waters, coastal areas, and natural resources therein, held under a claim of ownership, occupied or possessed by ICCs/IPs, by themselves or through their ancestors, communally or individually since time immemorial, continuously to the present except when interrupted by war, force majeure or displacement by force, deceit, stealth or as a consequence of government projects or any other voluntary dealings entered into by government and private individuals/corporations, and which are necessary to ensure their economic, social and cultural welfare.","It shall include ancestral lands, forests, pasture, residential, agricultural, and other lands individually owned whether alienable and disposable or otherwise, hunting grounds, burial grounds, worship areas, bodies of water, mineral and other natural resources, and lands which may no longer be exclusively occupied by ICCs/IPs but from which they traditionally had access to for their subsistence and traditional activities, particularly the home ranges of ICCs/IPs who are still nomadic and/or shifting cultivators;"]},{name:"b. Ancestral Lands",paragraph:["Subject to Section 56 hereof, refers to land occupied, possessed and utilized by individuals, families and clans who are members of the ICCs/IPs since time immemorial, by themselves or through their predecessors-in-interest, under claims of individual or traditional group ownership, continuously, to the present except when interrupted by war, force majeure or displacement by force, deceit, stealth, or as a consequence of government projects and other voluntary dealings entered into by government and private individuals/corporations, including, but not limited to, residential lots, rice terraces or paddies, private forests, swidden farms and tree lots;"]},{name:"c. Certificate of Ancestral Domain Title",paragraph:["refers to a title formally recognizing the rights of possession and ownership of ICCs/IPs over their ancestral domains identified and delineated in accordance with this law;"]},{name:"d. Certificate of Ancestral Lands Title ",paragraph:["refers to a title formally recognizing the rights of ICCs/IPs over their ancestral lands;"]},{name:"e. Communal Claims",paragraph:[" refer to claims on land, resources and rights thereon, belonging to the whole community within a defined territory;"]},{name:"f. Customary Laws",paragraph:["refer to a body of written and/or unwritten rules, usages, customs and practices traditionally and continually recognized, accepted and observed by respective ICCs/IPs;"]},{name:"g. Free and Prior Informed Consent ",paragraph:[" as used in this Act shall mean the consensus of all members of the ICCs/IPs to be determined in accordance with their respective customary laws and practices, free from any external manipulation, interference and coercion, and obtained after fully disclosing the intent and scope of the activity, in a language and process understandable to the community;"]},{name:"h. Indigenous Cultural Communities/Indigenous Peoples",paragraph:["refer to a group of people or homogenous societies identified by self-ascription and ascription by others, who have continuously lived as organized community on communally bounded and defined territory, and who have, under claims of ownership since time immemorial, occupied, possessed and utilized such territories, sharing common bonds of language, customs, traditions and other distinctive cultural traits, or who have, through resistance to political, social and cultural inroads of colonization, non-indigenous religions and cultures, became historically differentiated from the majority of Filipinos. ","ICCs/IPs shall likewise include peoples who are regarded as indigenous on account of their descent from the populations which inhabited the country, at the time of conquest or colonization, or at the time of inroads of non-indigenous religions and cultures, or the establishment of present state boundaries, who retain some or all of their own social, economic, cultural and political institutions, but who may have been displaced from their traditional domains or who may have resettled outside their ancestral domains;"]},{name:"i. Indigenous Political Structures",paragraph:["refer to organizational and cultural leadership systems, institutions, relationships, patterns and processes for decision-making and participation, identified by ICCs/IPs such as, but not limited to, Council of Elders, Council of Timuays, Bodong Holders, or any other tribunal or body of similar nature;"]},{name:"j. Individual Claims",paragraph:[" refer to claims on land and rights thereon which have been devolved to individuals, families and clans including, but not limited to, residential lots, rice terraces or paddies and tree lots;"]},{name:"k. National Commission on Indigenous Peoples (NCIP) ",paragraph:["refers to the office created under this Act, which shall be under the Office of the President, and which shall be the primary government agency responsible for the formulation and implementation of policies, plans and programs to recognize, protect and promote the rights of ICCs/IPs;"]},{name:"l. Native Title",paragraph:["refers to pre-conquest rights to lands and domains which, as far back as memory reaches, have been held under a claim of private ownership by ICCs/IPs, have never been public lands and are thus indisputably presumed to have been held that way since before the Spanish Conquest;"]},{name:"m. Nongovernment Organization ",paragraph:["refers to a private, nonprofit voluntary organization that has been organized primarily for the delivery of various services to the ICCs/IPs and has an established track record for effectiveness and acceptability in the community where it serves;"]},{name:"n. Peoples Organization",paragraph:[" refers to a private, nonprofit voluntary organization of members of an ICC/IP which is accepted as representative of such ICCs/IPs;"]},{name:"o. Sustainable Traditional Resource Rights ",paragraph:["refer to the rights of ICCs/IPs to sustainably use, manage, protect and conserve a) land, air, water, and minerals; b) plants, animals and other organisms; c) collecting, fishing and hunting grounds; d) sacred sites; and e) other areas of economic, ceremonial and aesthetic value in accordance with their indigenous knowledge, beliefs, systems and practices; and"]},{name:"p. Time Immemorial ",paragraph:["refers to a period of time when as far back as memory can go, certain ICCs/IPs are known to have occupied, possessed in the concept of owner, and utilized a defined territory devolved to them, by operation of customary law or inherited from their ancestors, in accordance with their customs and traditions."]}]}],Xpe=()=>{const n=qt(),{selectedWord:e,definition:t,tooltipPosition:i,handleTextSelection:r}=Ln(),[s,o]=B.useState(!1);B.useEffect(()=>{const u=()=>{window.scrollY>200?o(!0):o(!1)};return window.addEventListener("scroll",u),()=>window.removeEventListener("scroll",u)},[]);const a=()=>{window.scrollTo({top:0,behavior:"smooth"})},l=()=>{n("/chapterThree")},c=()=>{n("/chapterOne")};return d.jsxs("div",{className:"text-spacing-3 leading-relaxed tracking-wide",children:[d.jsx(Pn,{children:d.jsxs("div",{children:[$pe.map(u=>d.jsxs("div",{className:"my-5",children:[d.jsx("h5",{className:q.paragraphSubText,children:u.subtitle}),d.jsx("h4",{className:`${q.headText} mb-10`,children:u.title}),d.jsx("div",{children:u.sections.map((f,m)=>d.jsxs("div",{className:"my-4",children:[d.jsx("h6",{className:q.paragraphSubText,children:f.name}),d.jsx("p",{onMouseUp:r,className:q.paragraphSubTextLower,children:f.paragraph})]},m))})]},u.id)),e&&d.jsxs("div",{className:"absolute text-left bg-white p-4 shadow-lg rounded-lg max-w-xs text-black",style:{left:i.left,top:i.top,zIndex:100},children:[d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsx("p",{className:q.dictionaryText,children:e}),d.jsx("i",{className:"fas fa-volume-up ml-5 text-gray-600"})]}),d.jsx("hr",{className:"border-2 mb-2"}),d.jsx("p",{children:t})]}),d.jsxs("div",{className:"mt-10 text-center flex justify-between",children:[d.jsx("button",{onClick:c,className:"px-6 py-2 border justify-end text-white rounded-lg hover:bg-gray-500",children:"Previous Article"}),d.jsx("button",{onClick:l,className:"px-6 py-2 border justify-end text-white rounded-lg hover:bg-gray-500",children:"Next Article"})]})]})}),s&&d.jsx("button",{onClick:a,className:"fixed bottom-6 right-6 w-12 h-12 bg-gray-600 text-white rounded-full shadow-lg flex items-center justify-center hover:bg-gray-800 transition-all duration-300",children:d.jsx("i",{className:"fas fa-arrow-up"})})]})},Ype=zt(Xpe),Kpe=[{id:"domains",title:"Rights to Ancestral Domains",subtitle:"Chapter III",sections:[{name:"Section 4",subtitle:"Concept of Ancestral Lands/Domains.",paragraph:"Ancestral lands/domains shall include such concepts of territories which cover not only the physical environment but the total environment including the spiritual and cultural bonds to the areas which the ICCs/IPs possess, occupy and use and to which they have claims of ownership."},{name:"Section 5",subtitle:"Indigenous Concept of Ownership.",paragraph:"Indigenous concept of ownership sustains the view that ancestral domains and all resources found therein shall serve as the material bases of their cultural integrity. The indigenous concept of ownership generally holds that ancestral domains are the ICCs/IPs private but community property which belongs to all generations and therefore cannot be sold, disposed or destroyed. It likewise covers sustainable traditional resource rights."},{name:"Section 6",subtitle:"Composition of Ancestral Lands/Domains.",paragraph:"Ancestral lands and domains shall consist of all areas generally belonging to ICCs/IPs as referred under Sec. 3, items (a) and (b) of this Act."},{name:"Section 7",subtitle:"Rights to Ancestral Domains.",paragraph:[{sub_paragraph:"The rights of ownership and possession of ICCs/IPs to their ancestral domains shall be recognized and protected. Such rights shall include:",name:"a. Right of Ownership.",paragraph:"The right to claim ownership over lands, bodies of water traditionally and actually occupied by ICCs/IPs, sacred places, traditional hunting and fishing grounds, and all improvements made by them at any time within the domains;"},{name:"b. Right to Develop Lands and Natural Resources. 9",paragraph:"Subject to Section 56 hereof, right to develop, control and use lands and territories traditionally occupied, owned, or used; to manage and conserve natural resources within the territories and uphold the responsibilities for future generations; to benefit and share the profits from allocation and utilization of the natural resources found therein; the right to negotiate the terms and conditions for the exploration of natural resources in the areas for the purpose of ensuring ecological, environmental protection and the conservation measures, pursuant to national and customary laws; the right to an informed and intelligent participation in the formulation and implementation of any project, government or private, that will affect or impact upon the ancestral domains and to receive just and fair compensation for any damages which they may sustain as a result of the project; and the right to effective measures by the government to prevent any interference with, alienation and encroachment upon these rights;"},{name:"c. Right to Stay in the Territories",paragraph:"The right to stay in the territory and not to be removed therefrom. No ICCs/IPs will be relocated without their free and prior informed consent, nor through any means other than eminent domain. Where relocation is considered necessary as an exceptional measure, such relocation shall take place only with the free and prior informed consent of the ICCs/IPs concerned and whenever possible, they shall be guaranteed the right to return to their ancestral domains, as soon as the grounds for relocation cease to exist. When such return is not possible, as determined by agreement or through appropriate procedures, ICCs/IPs shall be provided in all possible cases with lands of quality and legal status at least equal to that of the land previously occupied by them, suitable to provide for their present needs and future development. Persons thus relocated shall likewise be fully compensated for any resulting loss or injury;"},{name:"d. Right in Case of Displacement",paragraph:"In case displacement occurs as a result of natural catastrophes, the State shall endeavor to resettle the displaced ICCs/IPs in suitable areas where they can have temporary life support systems: Provided, That the displaced ICCs/IPs shall have the right to return to their abandoned lands until such time that the normalcy and safety of such lands shall be determined: Provided, further, That should their ancestral domain cease to exist and normalcy and safety of the previous settlements are not possible, displaced ICCs/IPs shall enjoy security of tenure over lands to which they have been resettled: Provided, furthermore, That basic services and livelihood shall be provided to them to ensure that their needs are adequately addressed;"},{name:"e. Right to Regulate Entry of Migrants",paragraph:"Right to regulate the entry of migrant settlers and organizations into the domains;"},{name:"f. Right to Safe and Clean Air and Water.",paragraph:"For this purpose, the ICCs/IPs shall have access to integrated systems for the management of their inland waters and air space;"},{name:"g. Right to Claim Parts of Reservations",paragraph:" The right to claim parts of the ancestral domains which have been reserved for various purposes, except those reserved and intended for common public welfare and service; and"},{name:"h. Right to Resolve Conflict",paragraph:" Right to resolve land conflicts in accordance with customary laws of the area where the land is located, and only in default thereof shall the complaints be submitted to amicable settlement and to the Courts of Justice whenever necessary."}]},{name:"Section 8",subtitle:"Rights to Ancestral Lands.",paragraph:[{sub_paragraph:"The right of ownership and possession of the ICCs/IPs to their ancestral lands shall be recognized and protected.",name:"Right to transfer land/property.",paragraph:"Such right shall include the right to transfer land or property rights to/among members of the same ICCs/IPs, subject to customary laws and traditions of the community concerned."},{name:"Right to Redemption",paragraph:"In cases where it is shown that the transfer of land/property rights by virtue of any agreement or devise, to a non-member of the concerned ICCs/IPs is tainted by the vitiated consent of the ICCs/IPs, or is transferred for an unconscionable consideration or price, the transferor ICC/IP shall have the right to redeem the same within a period not exceeding fifteen (15) years from the date of transfer."}]},{name:"Section 9",subtitle:"Responsibilities of ICCs/IPs to their Ancestral Domains.",paragraph:[{sub_paragraph:"ICCs/IPs occupying a duly certified ancestral domain shall have the following responsibilities:",name:"a. Maintain Ecological Balance.",paragraph:" To preserve, restore, and maintain a balanced ecology in the ancestral domain by protecting the flora and fauna, watershed areas, and other reserves;"},{name:"b. Restore Denuded Areas",paragraph:"To actively initiate, undertake and participate in the reforestation of denuded areas and other development programs and projects subject to just and reasonable remuneration; and"},{name:"c. Observe Laws",paragraph:"To observe and comply with the provisions of this Act and the rules and regulations for its effective implementation."}]},{name:"Section 10",subtitle:"Unauthorized and Unlawful Intrusion.",paragraph:"Unauthorized and unlawful intrusion upon, or use of any portion of the ancestral domain, or any violation of the rights hereinbefore enumerated, shall be punishable under this law. Furthermore, the Government shall take measures to prevent non-ICCs/IPs from taking advantage of the ICCs/IPs customs or lack of understanding of laws to secure ownership, possession of land belonging to said ICCs/IPs."},{name:"Section 11",subtitle:"Recognition of Ancestral Domain Rights.",paragraph:"The rights of ICCs/IPs to their ancestral domains by virtue of Native Title shall be recognized and respected. Formal recognition, when solicited by ICCs/IPs concerned, shall be embodied in a Certificate of Ancestral Domain Title (CADT), which shall recognize the title of the concerned ICCs/IPs over the territories identified and delineated."},{name:"Section 12",subtitle:"Option to Secure Certificate of Title Under Commonwealth Act 141, as amended, or the Land Registration Act 496.",paragraph:["Individual members of cultural communities, with respect to their individually-owned ancestral lands who, by themselves or through their predecessors-in-interest, have been in continuous possession and occupation of the same in the concept of owner since time immemorial or for a period of not less than thirty (30) years immediately preceding the approval of this Act and uncontested by the members of the same ICCs/IPs shall have the option to secure title to their ancestral lands under the provisions of Commonwealth Act 141, as amended, or the Land Registration Act 496.","For this purpose, said individually-owned ancestral lands, which are agricultural in character and actually used for agricultural, residential, pasture, and tree farming purposes, including those with a slope of eighteen percent (18%) or more, are hereby classified as alienable and disposable agricultural lands.","The option granted under this section shall be exercised within twenty (20) years from the approval of this Act."]}]}],Jpe=()=>{const n=qt(),{selectedWord:e,definition:t,tooltipPosition:i,handleTextSelection:r}=Ln(),[s,o]=B.useState(!1);B.useEffect(()=>{const u=()=>{window.scrollY>200?o(!0):o(!1)};return window.addEventListener("scroll",u),()=>window.removeEventListener("scroll",u)},[]);const a=()=>{window.scrollTo({top:0,behavior:"smooth"})},l=()=>{n("/chapterFour")},c=()=>{n("/chapterTwo")};return d.jsxs("div",{className:"text-spacing-3 leading-relaxed tracking-wide",children:[d.jsx(Pn,{children:d.jsxs("div",{children:[Kpe.map(u=>d.jsxs("div",{className:"my-5",children:[d.jsx("h5",{className:q.paragraphSubText,children:u.subtitle}),d.jsx("h4",{className:`${q.headText} mb-10`,children:u.title}),u.sections.map((f,m)=>d.jsxs("div",{className:"my-4",children:[d.jsx("h6",{className:q.paragraphSubText,children:f.name}),d.jsx("h5",{className:q.paragraphSubText,children:f.subtitle}),Array.isArray(f.paragraph)?f.paragraph.map((g,x)=>d.jsxs("div",{className:"my-2",children:[d.jsx("h6",{className:q.paragraphSubText,children:g.name}),g.sub_paragraph&&d.jsx("p",{onMouseUp:r,className:q.paragraphSubText,children:d.jsx("strong",{children:g.sub_paragraph})}),d.jsx("p",{onMouseUp:r,className:q.paragraphSubTextLower,children:g.paragraph})]},x)):d.jsx("p",{onMouseUp:r,className:q.paragraphSubTextLower,children:f.paragraph})]},m))]},u.id)),e&&d.jsxs("div",{className:"absolute text-left bg-white p-4 shadow-lg rounded-lg max-w-xs text-black",style:{left:i.left,top:i.top,zIndex:100},children:[d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsx("p",{className:q.dictionaryText,children:e}),d.jsx("i",{className:"fas fa-volume-up ml-5 text-gray-600"})]}),d.jsx("hr",{className:"border-2 mb-2"}),d.jsx("p",{children:t})]}),d.jsxs("div",{className:"mt-10 text-center flex justify-between",children:[d.jsx("button",{onClick:c,className:"px-6 py-2 border justify-end text-white rounded-lg hover:bg-gray-500",children:"Previous Article"}),d.jsx("button",{onClick:l,className:"px-6 py-2 border justify-end text-white rounded-lg hover:bg-gray-500",children:"Next Article"})]})]})}),s&&d.jsx("button",{onClick:a,className:"fixed bottom-6 right-6 w-12 h-12 bg-gray-600 text-white rounded-full shadow-lg flex items-center justify-center hover:bg-gray-800 transition-all duration-300",children:d.jsx("i",{className:"fas fa-arrow-up"})})]})},Qpe=zt(Jpe),Zpe=[{id:"self-governance",title:"Right to Self-Governance and Empowerment",subtitle:"Chapter IV",sections:[{name:"Section 13",paragraph:"The State recognizes the inherent right of ICCs/IPs to self-governance and self-determination and respects the integrity of their values, practices and institutions. Consequently, the State shall guarantee the right of ICCs/IPs to freely pursue their economic, social and cultural development."},{name:"Section 14",subtitle:"Support for Autonomous Regions.",paragraph:"The State shall continue to strengthen and support the autonomous regions created under the Constitution as they may require or need. The State shall likewise encourage other ICCs/IPs not included or outside Muslim Mindanao and the Cordilleras to use the form and content of their ways of life as may be compatible with the fundamental rights defined in the Constitution of the Republic of the Philippines and other internationally recognized human rights."},{name:"Section 15",subtitle:"Justice System, Conflict Resolution Institutions, and Peace Building Processes.",paragraph:"The ICCs/IPs shall have the right to use their own commonly accepted justice systems, conflict resolution institutions, peace building processes or mechanisms and other customary laws and practices within their respective communities and as may be compatible with the national legal system and with internationally recognized human rights."},{name:"Section 16",subtitle:"Right to Participate in Decision-Making.",paragraph:"ICCs/IPs have the right to participate fully, if they so choose, at all levels of decision-making in matters which may affect their rights, lives and destinies through procedures determined by them as well as to maintain and develop their own indigenous political structures. Consequently, the State shall ensure that the ICCs/IPs shall be given mandatory representation in policy-making bodies and other local legislative councils."},{name:"Section 17",subtitle:"Right to Determine and Decide Priorities for Development.",paragraph:"The ICCs/IPs shall have the right to determine and decide their own priorities for development affecting their lives, beliefs, institutions, spiritual well-being, and the lands they own, occupy or use. They shall participate in the formulation, implementation and evaluation of policies, plans and programs for national, regional and local development which may directly affect them."},{name:"Section 18",subtitle:"Tribal Barangays.",paragraph:"The ICCs/IPs living in contiguous areas or communities where they form the predominant population but which are located in municipalities, provinces or cities where they do not constitute the majority of the population, may form or constitute a separate barangay in accordance with the Local Government Code on the creation of tribal barangays."},{name:"Section 19",subtitle:"Role of Peoples Organizations.",paragraph:"The State shall recognize and respect the role of independent ICCs/IPs organizations to enable the ICCs/IPs to pursue and protect their legitimate and collective interests and aspirations through peaceful and lawful means."},{name:"Section 20",subtitle:"Means for Development/Empowerment of ICCs/IPs.",paragraph:"The Government shall establish the means for the full development/empowerment of the ICCs/IPs own institutions and initiatives and, where necessary, provide the resources needed therefor."}]}],eme=()=>{const n=qt(),{selectedWord:e,definition:t,tooltipPosition:i,handleTextSelection:r}=Ln(),[s,o]=B.useState(!1);B.useEffect(()=>{const u=()=>{window.scrollY>200?o(!0):o(!1)};return window.addEventListener("scroll",u),()=>window.removeEventListener("scroll",u)},[]);const a=()=>{window.scrollTo({top:0,behavior:"smooth"})},l=()=>{n("/chapterFive")},c=()=>{n("/chapterThree")};return d.jsxs("div",{className:"text-spacing-3 leading-relaxed tracking-wide",children:[d.jsx(Pn,{children:d.jsxs("div",{children:[Zpe.map(u=>d.jsxs("div",{className:"my-5",children:[d.jsx("h5",{className:q.paragraphSubText,children:u.subtitle}),d.jsx("h4",{className:`${q.headText} mb-10`,children:u.title}),d.jsx("div",{children:u.sections.map((f,m)=>d.jsxs("div",{className:"my-4",children:[d.jsxs("h6",{className:q.paragraphSubText,children:[f.name," ",f.subtitle]}),d.jsx("p",{onMouseUp:r,className:q.paragraphSubTextLower,children:f.paragraph})]},m))})]},u.id)),e&&d.jsxs("div",{className:"absolute text-left bg-white p-4 shadow-lg rounded-lg max-w-xs text-black",style:{left:i.left,top:i.top,zIndex:100},children:[d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsx("p",{className:q.dictionaryText,children:e}),d.jsx("i",{className:"fas fa-volume-up ml-5 text-gray-600"})]}),d.jsx("hr",{className:"border-2 mb-2"}),d.jsx("p",{children:t})]}),d.jsxs("div",{className:"mt-10 text-center flex justify-between",children:[d.jsx("button",{onClick:c,className:"px-6 py-2 border justify-end text-white rounded-lg hover:bg-gray-500",children:"Previous Article"}),d.jsx("button",{onClick:l,className:"px-6 py-2 border justify-end text-white rounded-lg hover:bg-gray-500",children:"Next Article"})]})]})}),s&&d.jsx("button",{onClick:a,className:"fixed bottom-6 right-6 w-12 h-12 bg-gray-600 text-white rounded-full shadow-lg flex items-center justify-center hover:bg-gray-800 transition-all duration-300",children:d.jsx("i",{className:"fas fa-arrow-up"})})]})},tme=zt(eme),nme=[{id:"general_provisions",title:"Social Justice and Human Rights",subtitle:"Chapter V",sections:[{name:"Section 21",subtitle:"Equal Protection and Non-discrimination of ICCs/IPs.",paragraph:["Consistent with the equal protection clause of the Constitution of the Republic of the Philippines, the Charter of the United Nations, the Universal Declaration of Human Rights including the Convention on the Elimination of Discrimination Against Women and International Human Rights Law, the State shall, with due recognition of their distinct characteristics and identity, accord to the members of the ICCs/IPs the rights, protections and privileges enjoyed by the rest of the citizenry. ","It shall extend to them the same employment rights, opportunities, basic services, educational and other rights and privileges available to every member of the society. Accordingly, the State shall likewise ensure that the employment of any form of force or coercion against ICCs/IPs shall be dealt with by law.","The State shall ensure that the fundamental human rights and freedoms as enshrined in the Constitution and relevant international instruments are guaranteed also to indigenous women. Towards this end, no provision in this Act shall be interpreted so as to result in the diminution of rights and privileges already recognized and accorded to women under existing laws of general application."]},{name:"Section 22",subtitle:"Rights During Armed Conflict.",paragraph:"ICCs/IPs have the right to special protection and security in periods of armed conflict. The State shall observe international standards, in particular, the Fourth Geneva Convention of 1949, for the protection of civilian populations in circumstances of emergency and armed conflict, and shall not recruit members of the ICCs/IPs against their will into the armed forces, and in particular, for use against other ICCs/IPs; nor recruit children of ICCs/IPs into the armed forces under any circumstance; nor force indigenous individuals to abandon their lands, territories and means of subsistence, or relocate them in special centers for military purposes under any discriminatory condition."},{name:"Section 23",subtitle:"Right to Participate in Decision-Making.",paragraph:"ICCs/IPs have the right to participate fully, if they so choose, at all levels of decision-making in matters which may affect their rights, lives and destinies through procedures determined by them as well as to maintain and develop their own indigenous political structures. Consequently, the State shall ensure that the ICCs/IPs shall be given mandatory representation in policy-making bodies and other local legislative councils."},{name:"Section 17",subtitle:"Freedom from Discrimination and Right to Equal Opportunity and Treatment.",paragraph:["It shall be the right of the ICCs/IPs to be free from any form of discrimination, with respect to recruitment and conditions of employment, such that they may enjoy equal opportunities for admission to employment, medical and social assistance, safety as well as other occupationally-related benefits, informed of their rights under existing labor legislation and of means available to them for redress, not subject to any coercive recruitment systems, including bonded labor and other forms of debt servitude; and equal treatment in employment for men and women, including the protection from sexual harassment.","Towards this end, the State shall, within the framework of national laws and regulations, and in cooperation with the ICCs/IPs concerned, adopt special measures to ensure the effective protection with regard to the recruitment and conditions of employment of persons belonging to these communities, to the extent that they are not effectively protected by laws applicable to workers in general.","ICCs/IPs shall have the right to association and freedom for all trade union activities and the right to conclude collective bargaining agreements with employers organizations. They shall likewise have the right not to be subject to working conditions hazardous to their health, particularly through exposure to pesticides and other toxic substances."]},{name:"Section 24",subtitle:"Unlawful Acts Pertaining to Employment.",sub_paragraph:"It shall be unlawful for any person:",paragraph:["a. To discriminate against any ICC/IP with respect to the terms and conditions of employment on account of their descent. Equal remuneration shall be paid to ICC/IP and non-ICC/IP for work of equal value; and","b. To deny any ICC/IP employee any right or benefit herein provided for or to discharge them for the purpose of preventing them from enjoying any of the rights or benefits provided under this Act."]},{name:"Section 25",subtitle:"Basic Services.",paragraph:"The ICCs/IPs have the right to special measures for the immediate, effective and continuing improvement of their economic and social conditions, including in the areas of employment, vocational training and retraining, housing, sanitation, health and social security. Particular attention shall be paid to the rights and special needs of indigenous women, elderly, youth, children and differently-abled persons. Accordingly, the State shall guarantee the right of ICCs/IPs to governments basic services which shall include, but not limited to, water and electrical facilities, education, health, and infrastructure."},{name:"Section 26",subtitle:"Women",paragraph:["ICC/IP women shall enjoy equal rights and opportunities with men, as regards the social, economic, political and cultural spheres of life. The participation of indigenous women in the decision-making process in all levels, as well as in the development of society, shall be given due respect and recognition.","The State shall provide full access to education, maternal and child care, health and nutrition, and housing services to indigenous women. Vocational, technical, professional and other forms of training shall be provided to enable these women to fully participate in all aspects of social life. As far as possible, the State shall ensure that indigenous women have access to all services in their own languages."]},{name:"Section 27",subtitle:"Children and Youth.",paragraph:"The State shall recognize the vital role of the children and youth of ICCs/IPs in nation-building and shall promote and protect their physical, moral, spiritual, intellectual and social well-being. Towards this end, the State shall support all government programs intended for the development and rearing of the children and youth of ICCs/IPs for civic efficiency and establish such mechanisms as may be necessary for the protection of the rights of the indigenous children and youth."},{name:"Section 28",subtitle:"Integrated System of Education.",paragraph:"The State shall, through the NCIP, provide a complete, adequate and integrated system of education, relevant to the needs of the children and young people of ICCs/IPs."}]}],ime=()=>{const n=qt(),{selectedWord:e,definition:t,tooltipPosition:i,handleTextSelection:r}=Ln(),[s,o]=B.useState(!1);B.useEffect(()=>{const u=()=>{window.scrollY>200?o(!0):o(!1)};return window.addEventListener("scroll",u),()=>window.removeEventListener("scroll",u)},[]);const a=()=>{window.scrollTo({top:0,behavior:"smooth"})},l=()=>{n("/chapterSix")},c=()=>{n("/chapterFour")};return d.jsxs("div",{className:"text-spacing-3 leading-relaxed tracking-wide",children:[d.jsx(Pn,{children:d.jsxs("div",{children:[nme.map(u=>d.jsxs("div",{className:"my-5",children:[d.jsx("h5",{className:q.paragraphSubText,children:u.subtitle}),d.jsx("h4",{className:`${q.headText} mb-10`,children:u.title}),d.jsx("div",{children:u.sections.map((f,m)=>d.jsxs("div",{className:"my-4",children:[d.jsxs("h6",{className:q.paragraphSubText,children:[f.name," ",f.subtitle]}),d.jsx("p",{onMouseUp:r,className:q.paragraphSubTextLower,children:f.paragraph})]},m))})]},u.id)),e&&d.jsxs("div",{className:"absolute text-left bg-white p-4 shadow-lg rounded-lg max-w-xs text-black",style:{left:i.left,top:i.top,zIndex:100},children:[d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsx("p",{className:q.dictionaryText,children:e}),d.jsx("i",{className:"fas fa-volume-up ml-5 text-gray-600"})]}),d.jsx("hr",{className:"border-2 mb-2"}),d.jsx("p",{children:t})]}),d.jsxs("div",{className:"mt-10 text-center flex justify-between",children:[d.jsx("button",{onClick:c,className:"px-6 py-2 border justify-end text-white rounded-lg hover:bg-gray-500",children:"Previous Article"}),d.jsx("button",{onClick:l,className:"px-6 py-2 border justify-end text-white rounded-lg hover:bg-gray-500",children:"Next Article"})]})]})}),s&&d.jsx("button",{onClick:a,className:"fixed bottom-6 right-6 w-12 h-12 bg-gray-600 text-white rounded-full shadow-lg flex items-center justify-center hover:bg-gray-800 transition-all duration-300",children:d.jsx("i",{className:"fas fa-arrow-up"})})]})},rme=zt(ime),sme=[{id:"integrity",title:"Cultural Integrity",subtitle:"Chapter VI",sections:[{name:"Section 29",subtitle:"Protection of Indigenous Culture, Traditions and Institutions.",paragraph:"The State shall respect, recognize and protect the right of ICCs/IPs to preserve and protect their culture, traditions and institutions. It shall consider these rights in the formulation and application of national plans and policies."},{name:"Section 30",subtitle:"Educational Systems.",paragraph:"The State shall provide equal access to various cultural opportunities to the ICCs/IPs through the educational system, public or private cultural entities, scholarships, grants and other incentives without prejudice to their right to establish and control their educational systems and institutions by providing education in their own language, in a manner appropriate to their cultural methods of teaching and learning. Indigenous children/youth shall have the right to all levels and forms of education of the State."},{name:"Section 31",subtitle:"Recognition of Cultural Diversity.",paragraph:"The State shall endeavor to have the dignity and diversity of the cultures, traditions, histories and aspirations of the ICCs/IPs appropriately reflected in all forms of education, public information and cultural-educational exchange. Consequently, the State shall take effective measures, in consultation with ICCs/IPs concerned, to eliminate prejudice and discrimination and to promote tolerance, understanding and good relations among ICCs/IPs and all segments of society. Furthermore, the Government shall take effective measures to ensure that the State-owned media duly reflect indigenous cultural diversity. The State shall likewise ensure the participation of appropriate indigenous leaders in schools, communities and international cooperative undertakings like festivals, conferences, seminars and workshops to promote and enhance their distinctive heritage and values."},{name:"Section 32",subtitle:"Community Intellectual Rights.",paragraph:"ICCs/IPs have the right to practice and revitalize their own cultural traditions and customs. The State shall preserve, protect and develop the past, present and future manifestations of their cultures as well as the right to the restitution of cultural, intellectual, religious, and spiritual property taken without their free and prior informed consent or in violation of their laws, traditions and customs."},{name:"Section 33",subtitle:"Rights to Religious, Cultural Sites and Ceremonies.",paragraph:["ICCs/IPs shall have the right to manifest, practice, develop, and teach their spiritual and religious traditions, customs and ceremonies; the right to maintain, protect and have access to their religious and cultural sites; the right to use and control of ceremonial objects; and, the right to the repatriation of human remains. Accordingly, the State shall take effective measures, in cooperation with the ICCs/IPs concerned, to ensure that indigenous sacred places, including burial sites, be preserved, respected and protected. To achieve this purpose, it shall be unlawful to:","a. Explore, excavate or make diggings on archeological sites of the ICCs/IPs for the purpose of obtaining materials of cultural values without the free and prior informed consent of the community concerned; and","b.Deface, remove or otherwise destroy artifacts which are of great importance to the ICCs/IPs for the preservation of their cultural heritage."]},{name:"Section 34",subtitle:"Right to Indigenous Knowledge Systems and Practices and to Develop own Sciences and Technologies.",paragraph:"ICCs/IPs are entitled to the recognition of the full ownership and control and protection of their cultural and intellectual rights. They shall have the right to special measures to control, develop and protect their sciences, technologies and cultural manifestations, including human and other genetic resources, seeds, including derivatives of these resources, traditional medicines and health practices, vital medicinal plants, animals and minerals, indigenous knowledge systems and practices, knowledge of the properties of fauna and flora, oral traditions, literature, designs, and visual and performing arts."},{name:"Section 35",subtitle:"Access to Biological and Genetic Resources.",paragraph:"Access to biological and genetic resources and to indigenous knowledge related to the conservation, utilization and enhancement of these resources, shall be allowed within ancestral lands and domains of the ICCs/IPs only with a free and prior informed consent of such communities, obtained in accordance with customary laws of the concerned community."},{name:"Section 36",subtitle:"Sustainable Agro-Technical Development.",paragraph:"The State shall recognize the right of ICCs/IPs to a sustainable agro-technological development and shall formulate and implement programs of action for its effective implementation. The State shall likewise promote the bio-genetic and resource management systems among the ICCs/IPs and shall encourage cooperation among government agencies to ensure the successful sustainable development of ICCs/IPs."},{name:"Section 36",subtitle:"Funds for Archeological and Historical Sites.",paragraph:"The ICCs/IPs shall have the right to receive from the national government all funds especially earmarked or allocated for the management and preservation of their archeological and historical sites and artifacts with the financial and technical support of the national government agencies."}]}],ome=()=>{const n=qt(),{selectedWord:e,definition:t,tooltipPosition:i,handleTextSelection:r}=Ln(),[s,o]=B.useState(!1);B.useEffect(()=>{const u=()=>{window.scrollY>200?o(!0):o(!1)};return window.addEventListener("scroll",u),()=>window.removeEventListener("scroll",u)},[]);const a=()=>{window.scrollTo({top:0,behavior:"smooth"})},l=()=>{n("/chapterSeven")},c=()=>{n("/chapterFive")};return d.jsxs("div",{className:"text-spacing-3 leading-relaxed tracking-wide",children:[d.jsx(Pn,{children:d.jsxs("div",{children:[sme.map(u=>d.jsxs("div",{className:"my-5",children:[d.jsx("h5",{className:q.paragraphSubText,children:u.subtitle}),d.jsx("h4",{className:`${q.headText} mb-10`,children:u.title}),d.jsx("div",{children:u.sections.map((f,m)=>d.jsxs("div",{className:"my-4",children:[d.jsxs("h6",{className:q.paragraphSubText,children:[f.name," ",f.subtitle]}),d.jsx("p",{onMouseUp:r,className:q.paragraphSubTextLower,children:f.paragraph})]},m))})]},u.id)),e&&d.jsxs("div",{className:"absolute text-left bg-white p-4 shadow-lg rounded-lg max-w-xs text-black",style:{left:i.left,top:i.top,zIndex:100},children:[d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsx("p",{className:q.dictionaryText,children:e}),d.jsx("i",{className:"fas fa-volume-up ml-5 text-gray-600"})]}),d.jsx("hr",{className:"border-2 mb-2"}),d.jsx("p",{children:t})]}),d.jsxs("div",{className:"mt-10 text-center flex justify-between",children:[d.jsx("button",{onClick:c,className:"px-6 py-2 border justify-end text-white rounded-lg hover:bg-gray-500",children:"Previous Article"}),d.jsx("button",{onClick:l,className:"px-6 py-2 border justify-end text-white rounded-lg hover:bg-gray-500",children:"Next Article"})]})]})}),s&&d.jsx("button",{onClick:a,className:"fixed bottom-6 right-6 w-12 h-12 bg-gray-600 text-white rounded-full shadow-lg flex items-center justify-center hover:bg-gray-800 transition-all duration-300",children:d.jsx("i",{className:"fas fa-arrow-up"})})]})},ame=zt(ome),lme=[{id:"NCIP",title:"National Commission on Indigenous Peoples (NCIP)",subtitle:"Chapter VII",sections:[{name:"Section 38",subtitle:"National Commission on Indigenous Cultural Communities/Indigenous Peoples (NCIP).",paragraph:"To carry out the policies herein set forth, there shall be created the National Commission on ICCs/IPs (NCIP), which shall be the primary government agency responsible for the formulation and implementation of policies, plans and programs to promote and protect the rights and well-being of the ICCs/IPs and the recognition of their ancestral domains as well as the rights thereto."},{name:"Section 39",subtitle:"Mandate.",paragraph:"The NCIP shall protect and promote the interest and well-being of the ICCs/IPs with due regard to their beliefs, customs, traditions and institutions."},{name:"Section 40",subtitle:"Composition",paragraph:"The NCIP shall be an independent agency under the Office of the President and shall be composed of seven (7) Commissioners belonging to ICCs/IPs, one (1) of whom shall be the Chairperson. The Commissioners shall be appointed by the President of the Philippines from a list of recommendees submitted by authentic ICCs/IPs: Provided, That the seven (7) Commissioners shall be appointed specifically from each of the following ethnographic areas: Region I and the Cordilleras; Region II; the rest of Luzon; Island Groups including Mindoro, Palawan, Romblon, Panay and the rest of the Visayas; Northern and Western Mindanao; Southern and Eastern Mindanao; and Central Mindanao: Provided, That at least two (2) of the seven (7) Commissioners shall be women."},{name:"Section 41",subtitle:"Qualifications, Tenure, Compensation.",paragraph:["The Chairperson and the six (6) Commissioners must be natural born Filipino citizens, bona fide members of the ICCs/IPs as certified by his/her tribe, experienced in ethnic affairs and who have worked for at least ten (10) years with an ICC/IP community and/or any government agency involved in ICC/IP, at least 35 years of age at the time of appointment, and must be of proven honesty and integrity: Provided, That at least two (2) of the seven (7) Commissioners shall be members of the Philippine Bar: Provided, further, That the members of the NCIP shall hold office for a period of three (3) years, and may be subject to re-appointment for another term: Provided, furthermore, That no person shall serve for more than two (2) terms.","Appointment to any vacancy shall only be for the unexpired term of the predecessor and in no case shall a member be appointed or designated in a temporary or acting capacity: Provided, finally, That the Chairperson and the Commissioners shall be entitled to compensation in accordance with the Salary Standardization Law."]},{name:"Section 42",subtitle:"Removal from Office.",paragraph:"Any member of the NCIP may be removed from office by the President, on his own initiative or upon recommendation by any indigenous community, before the expiration of his term for cause and after complying with due process requirement of law."},{name:"Section 43",subtitle:"Appointment of Commissioners.",paragraph:"The President shall appoint the seven (7) Commissioners of the NCIP within ninety (90) days from the effectivity of this Act."}]}],cme=[{name:"Section 44",subtitle:"Powers and Functions.",sub_paragraphs:"To accomplish its mandate, the NCIP shall have the following powers, jurisdiction and function:",section:{paragraph:["a. To accomplish its mandate, the NCIP shall have the following powers, jurisdiction and function.","b. To review and assess the conditions of ICCs/IPs including existing laws and policies pertinent thereto and to propose relevant laws and policies to address their role in national development;","c. To formulate and implement policies, plans, programs and projects for the economic, social and cultural development of the ICCs/IPs and to monitor the implementation thereof;","d, To request and engage the services and support of experts from other agencies of government or employ private experts and consultants as may be required in the pursuit of its objectives;","e.To issue certificate of ancestral land/domain title;","f. Subject to existing laws, to enter into contracts, agreements, or arrangement, with government or private agencies or entities as may be necessary to attain the objectives of this Act, and subject to the approval of the President, to obtain loans from government lending institutions and other lending institutions to finance its programs;","g. To negotiate for funds and to accept grants, donations, gifts and/or properties in whatever form and from whatever source, local and international, subject to the approval of the President of the Philippines, for the benefit of ICCs/IPs and administer the same in accordance with the terms thereof; or in the absence of any condition, in such manner consistent with the interest of ICCs/IPs as well as existing laws;","h. To coordinate development programs and projects for the advancement of the ICCs/IPs and to oversee the proper implementation thereof;","i. To convene periodic conventions or assemblies of IPs to review, assess as well as propose policies or plans;","j. To advise the President of the Philippines on all matters relating to the ICCs/IPs and to submit within sixty (60) days after the close of each calendar year, a report of its operations and achievements;","k. To submit to Congress appropriate legislative proposals intended to carry out the policies under this Act;","l. To prepare and submit the appropriate budget to the Office of the President;","m. To issue appropriate certification as a pre-condition to the grant of permit, lease, grant, or any other similar authority for the disposition, utilization, management and appropriation by any private individual, corporate entity or any government agency, corporation or subdivision thereof on any part or portion of the ancestral domain taking into consideration the consensus approval of the ICCs/IPs concerned;","n. To decide all appeals from the decisions and acts of all the various offices within the Commission;","o. To promulgate the necessary rules and regulations for the implementation of this Act;","p. To exercise such other powers and functions as may be directed by the President of the Republic of the Philippines; and","q. To represent the Philippine ICCs/IPs in all international conferences and conventions dealing with indigenous peoples and other related concerns."]}}],ume=[{name:"Section 45",subtitle:"Accessibility and Transparency.",paragraph:"Subject to such limitations as may be provided by law or by rules and regulations promulgated pursuant thereto, all official records, documents and papers pertaining to official acts, transactions or decisions, as well as research data used as basis for policy development of the Commission shall be made accessible to the public."}],hme=[{name:"Section 46",subtitle:"Offices within the NCIP.",sub_paragraphs:"The NCIP shall have the following offices which shall be responsible for the implementation of the policies hereinafter provided:",sections:[{name:"a. Ancestral Domains Office",paragraph:"The Ancestral Domain Office shall be responsible for the identification, delineation and recognition of ancestral lands/domains. It shall also be responsible for the management of ancestral lands/domains in accordance with a master plan as well as the implementation of the ancestral domain rights of the ICCs/IPs as provided in Chapter III of this Act. It shall also issue, upon the free and prior informed consent of the ICCs/IPs concerned, certification prior to the grant of any license, lease or permit for the exploitation of natural resources affecting the interests of ICCs/IPs or their ancestral domains and to assist the ICCs/IPs in protecting the territorial integrity of all ancestral domains. It shall likewise perform such other functions as the Commission may deem appropriate and necessary;"},{name:"b. Office on Policy, Planning and Research",paragraph:"The Office on Policy, Planning and Research shall be responsible for the formulation of appropriate policies and programs for ICCs/IPs such as, but not limited to, the development of a Five-Year Master Plan for the ICCs/IPs. Such plan shall undergo a process such that every five years, the Commission shall endeavor to assess the plan and make ramifications in accordance with the changing situations. The Office shall also undertake the documentation of customary law and shall establish and maintain a Research Center that would serve as a depository of ethnographic information for monitoring, evaluation and policy formulation. It shall assist the legislative branch of the national government in the formulation of appropriate legislation benefiting ICCs/IPs;"},{name:"c. Office of Education, Culture and Health",paragraph:["The Office on Culture, Education and Health shall be responsible for the effective implementation of the education, cultural and related rights as provided in this Act. It shall assist, promote and support community schools, both formal and non-formal, for the benefit of the local indigenous community, especially in areas where existing educational facilities are not accessible to members of the indigenous group. It shall administer all scholarship programs and other educational rights intended for ICC/IP beneficiaries in coordination with the Department of Education, Culture and Sports and the Commission on Higher Education. It shall undertake, within the limits of available appropriation, a special program which includes language and vocational training, public health and family assistance program and related subjects.","It shall also identify ICCs/IPs with potential training in the health profession and encourage and assist them to enroll in schools of medicine, nursing, physical therapy and other allied courses pertaining to the health profession.","Towards this end, the NCIP shall deploy a representative in each of the said offices who shall personally perform the foregoing task and who shall receive complaints from the ICCs/IPs and compel action from appropriate agency. It shall also monitor the activities of the National Museum and other similar government agencies generally intended to manage and preserve historical and archeological artifacts of the ICCs/IPs and shall be responsible for the implementation of such other functions as the NCIP may deem appropriate and necessary;"]},{name:"d. Office on Socio-Economic Services and Special Concerns",paragraph:"The Office on Socio-Economic Services and Special Concerns shall serve as the Office through which the NCIP shall coordinate with pertinent government agencies specially charged with the implementation of various basic socio-economic services, policies, plans and programs affecting the ICCs/IPs to ensure that the same are properly and directly enjoyed by them. It shall also be responsible for such other functions as the NCIP may deem appropriate and necessary;"},{name:"e. Office of Empowerment and Human Rights",paragraph:"The Office of Empowerment and Human Rights shall ensure that indigenous socio-political, cultural and economic rights are respected and recognized. It shall ensure that capacity building mechanisms are instituted and ICCs/IPs are afforded every opportunity, if they so choose, to participate in all levels of decision-making. It shall likewise ensure that the basic human rights, and such other rights as the NCIP may determine, subject to existing laws, rules and regulations, are protected and promoted;"},{name:"f. Administrative Office",paragraph:"The Administrative Office shall provide the NCIP with economical, efficient and effective services pertaining to personnel, finance, records, equipment, security, supplies and related services. It shall also administer the Ancestral Domains Fund; and"},{name:"g. Legal Affairs Office",paragraph:"There shall be a Legal Affairs Office which shall advice the NCIP on all legal matters concerning ICCs/IPs and which shall be responsible for providing ICCs/IPs with legal assistance in litigation involving community interest. It shall conduct preliminary investigation on the basis of complaints filed by the ICCs/IPs against a natural or juridical person believed to have violated ICCs/IPs rights. On the basis of its findings, it shall initiate the filing of appropriate legal or administrative action to the NCIP."}]}],dme=[{name:"Section 47",subtitle:"Other Offices.",paragraph:"The NCIP shall have the power to create additional offices as it may deem necessary subject to existing rules and regulations."},{name:"Section 48",subtitle:"Regional and Field Offices.",paragraph:"Existing regional and field offices shall remain to function under the strengthened organizational structure of the NCIP. Other field offices shall be created wherever appropriate and the staffing pattern thereof shall be determined by the NCIP: Provided, That in provinces where there are ICCs/IPs but without field offices, the NCIP shall establish field offices in said provinces."},{name:"Section 49",subtitle:"Office of the Executive Director.",paragraph:"The NCIP shall create the Office of the Executive Director which shall serve as its secretariat. The Office shall be headed by an Executive Director who shall be appointed by the President of the Republic of the Philippines upon recommendation of the NCIP on a permanent basis. The staffing pattern of the office shall be determined by the NCIP subject to the existing rules and regulations."},{name:"Section 50",subtitle:"Consultative Body.",paragraph:"A body consisting of the traditional leaders, elders and representatives from the women and youth sectors of the different ICCs/IPs shall be constituted by the NCIP from time to time to advise it on matters relating to the problems, aspirations and interests of the ICCs/IPs."}],fme=()=>{const n=qt(),{selectedWord:e,definition:t,tooltipPosition:i,handleTextSelection:r}=Ln(),[s,o]=B.useState(!1);B.useEffect(()=>{const u=()=>{window.scrollY>200?o(!0):o(!1)};return window.addEventListener("scroll",u),()=>window.removeEventListener("scroll",u)},[]);const a=()=>{window.scrollTo({top:0,behavior:"smooth"})},l=()=>n("/chapterEight"),c=()=>n("/ChapterSix");return d.jsxs("div",{children:[d.jsx(Pn,{children:d.jsxs("div",{children:[lme.map(u=>d.jsxs("div",{className:"my-5",children:[d.jsx("h5",{className:q.paragraphSubText,children:u.subtitle}),d.jsx("h4",{className:`${q.headText} mb-10`,children:u.title}),d.jsx("div",{children:u.sections.map((f,m)=>d.jsxs("div",{className:"my-4",children:[d.jsxs("h6",{className:q.paragraphSubText,children:[f.name," ",f.subtitle]}),d.jsx("p",{onMouseUp:r,className:q.paragraphSubTextLower,children:f.paragraph})]},m))})]},u.id)),cme.map(u=>d.jsxs("div",{className:"my-5",children:[d.jsxs("h5",{className:q.paragraphSubText,children:[u.name," ",u.subtitle]}),d.jsxs("div",{children:[d.jsx("p",{onMouseUp:r,className:q.paragraphSubTextLower,children:u.sub_paragraphs}),d.jsx("br",{}),u.section.paragraph.map((f,m)=>d.jsx("p",{onMouseUp:r,className:q.paragraphSubTextLower,children:f},m))]})]},u.name)),ume.map(u=>d.jsxs("div",{className:"my-5",children:[d.jsxs("h6",{className:q.paragraphSubText,children:[u.name," ",u.subtitle]}),d.jsx("p",{onMouseUp:r,className:q.paragraphSubTextLower,children:u.paragraph})]},u.name)),hme.map(u=>d.jsxs("div",{className:"my-5",children:[d.jsxs("h5",{className:q.paragraphSubText,children:[u.name," ",u.subtitle]}),d.jsx("p",{onMouseUp:r,className:q.paragraphSubTextLower,children:u.sub_paragraphs}),d.jsx("div",{children:u.sections.map((f,m)=>d.jsxs("div",{className:"my-4",children:[d.jsx("h6",{className:q.paragraphSubText,children:f.name}),d.jsx("p",{onMouseUp:r,className:q.paragraphSubTextLower,children:f.paragraph})]},m))})]},u.name)),dme.map(u=>d.jsxs("div",{className:"my-5",children:[d.jsxs("h5",{className:q.paragraphSubText,children:[u.name," ",u.subtitle]}),d.jsx("p",{onMouseUp:r,className:q.paragraphSubTextLower,children:u.paragraph})]},u.name)),e&&d.jsxs("div",{className:"absolute text-left bg-white p-4 shadow-lg rounded-lg max-w-xs text-black",style:{left:i.left,top:i.top,zIndex:100},children:[d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsx("p",{className:q.dictionaryText,children:e}),d.jsx("i",{className:"fas fa-volume-up ml-5 text-gray-600"})]}),d.jsx("hr",{className:"border-2 mb-2"}),d.jsx("p",{children:t})]}),d.jsxs("div",{className:"mt-10 text-center flex justify-between",children:[d.jsx("button",{onClick:c,className:"px-6 py-2 border text-white rounded-lg hover:bg-gray-500",children:"Previous Article"}),d.jsx("button",{onClick:l,className:"px-6 py-2 border text-white rounded-lg hover:bg-gray-500",children:"Next Article"})]})]})}),s&&d.jsx("button",{onClick:a,className:"fixed bottom-6 right-6 w-12 h-12 bg-gray-600 text-white rounded-full shadow-lg flex items-center justify-center hover:bg-gray-800 transition-all duration-300",children:d.jsx("i",{className:"fas fa-arrow-up"})})]})},pme=zt(fme),l1=[{id:"recognition",title:"Delineation and Recognition of Ancestral Domains",subtitle:"Chapter VIII",sections:[{name:"Section 51",subtitle:"Delineation and Recognition of Ancestral Domains.",paragraph:"Self-delineation shall be the guiding principle in the identification and delineation of ancestral domains. As such, the ICCs/IPs concerned shall have a decisive role in all the activities pertinent thereto. The Sworn Statement of the Elders as to the scope of the territories and agreements/pacts made with neighboring ICCs/IPs, if any, will be essential to the determination of these traditional territories. The Government shall take the necessary steps to identify lands which the ICCs/IPs concerned traditionally occupy and guarantee effective protection of their rights of ownership and possession thereto. Measures shall be taken in appropriate cases to safeguard the right of the ICCs/IPs concerned to land which may no longer be exclusively occupied by them, but to which they have traditionally had access for their subsistence and traditional activities, particularly of ICCs/IPs who are still nomadic and/or shifting cultivators."},{name:"Section 52",subtitle:"Delineation Process.",sub_paragraphs:"The identification and delineation of ancestral domains shall be done in accordance with the following procedures:",paragraph:[{name:"Ancestral Domains Delineated Prior to this Act.",paragraph:"The provisions hereunder shall not apply to ancestral domains/lands already delineated according to DENR Administrative Order No. 2, series of 1993, nor to ancestral lands and domains delineated under any other community/ancestral domain program prior to the enactment of this law. ICCs/IPs whose ancestral lands/domains were officially delineated prior to the enactment of this law shall have the right to apply for the issuance of a Certificate of Ancestral Domain Title (CADT) over the area without going through the process outlined hereunder;"},{name:"Petition for Delineation",paragraph:"The process of delineating a specific perimeter may be initiated by the NCIP with the consent of the ICC/IP concerned, or through a Petition for Delineation filed with the NCIP, by a majority of the members of the ICCs/IPs;"},{name:"Delineation Proper.",paragraph:"The official delineation of ancestral domain boundaries including census of all community members therein, shall be immediately undertaken by the Ancestral Domains Office upon filing of the application by the ICCs/IPs concerned. Delineation will be done in coordination with the community concerned and shall at all times include genuine involvement and participation by the members of the communities concerned;"},{name:"Proof Required",paragraph:["Proof of Ancestral Domain Claims shall include the testimony of elders or community under oath, and other documents directly or indirectly attesting to the possession or occupation of the area since time immemorial by such ICCs/IPs in the concept of owners which shall be any one (1) of the following authentic documents:","1. Written accounts of the ICCs/IPs customs and traditions","2. Written accounts of the ICCs/IPs political structure and institution;","3. Pictures showing long term occupation such as those of old improvements, burial grounds, sacred places and old villages;","4. Historical accounts, including pacts and agreements concerning boundaries entered into by the ICCs/IPs concerned with other ICCs/IPs;","5. Survey plans and sketch maps;","6. Anthropological data;","7. Genealogical surveys;","8. Pictures and descriptive histories of traditional communal forests and hunting grounds;","9. Pictures and descriptive histories of traditional landmarks such as mountains, rivers, creeks, ridges, hills, terraces and the like; and","10. Write-ups of names and places derived from the native dialect of the community."]},{name:"Preparation of Maps.",paragraph:"On the basis of such investigation and the findings of fact based thereon, the Ancestral Domains Office of the NCIP shall prepare a perimeter map, complete with technical descriptions, and a description of the natural features and landmarks embraced therein;"},{name:"Report of Investigation and Other Documents",paragraph:"A complete copy of the preliminary census and a report of investigation, shall be prepared by the Ancestral Domains Office of the NCIP;"},{name:"Notice and Publication",paragraph:"A copy of each document, including a translation in the native language of the ICCs/IPs concerned shall be posted in a prominent place therein for at least fifteen (15) days. A copy of the document shall also be posted at the local, provincial and regional offices of the NCIP, and shall be published in a newspaper of general circulation once a week for two (2) consecutive weeks to allow other claimants to file opposition thereto within fifteen (15) days from date of such publication: Provided, That in areas where no such newspaper exists, broadcasting in a radio station will be a valid substitute: Provided, further, That mere posting shall be deemed sufficient if both newspaper and radio station are not available;"},{name:"Endorsement to NCIP.",paragraph:" Within fifteen (15) days from publication, and of the inspection process, the Ancestral Domains Office shall prepare a report to the NCIP endorsing a favorable action upon a claim that is deemed to have sufficient proof. However, if the proof is deemed insufficient, the Ancestral Domains Office shall require the submission of additional evidence: Provided, That the Ancestral Domains Office shall reject any claim that is deemed patently false or fraudulent after inspection and verification: Provided, further, That in case of rejection, the Ancestral Domains Office shall give the applicant due notice, copy furnished all concerned, containing the grounds for denial. The denial shall be appealable to the NCIP: Provided, furthermore, That in cases where there are conflicting claims among ICCs/IPs on the boundaries of ancestral domain claims, the Ancestral Domains Office shall cause the contending parties to meet and assist them in coming up with a preliminary resolution of the conflict, without prejudice to its full adjudication according to the section below."},{name:"Turnover of Areas Within Ancestral Domains Managed by Other Government Agencies.",paragraph:" The Chairperson of the NCIP shall certify that the area covered is an ancestral domain. The secretaries of the Department of Agrarian Reform, Department of Environment and Natural Resources, Department of the Interior and Local Government, and Department of Justice, the Commissioner of the National Development Corporation, and any other government agency claiming jurisdiction over the area shall be notified thereof. Such notification shall terminate any legal basis for the jurisdiction previously claimed;"},{name:"Turnover of Areas Within Ancestral Domains Managed by Other Government Agencies.",paragraph:" The Chairperson of the NCIP shall certify that the area covered is an ancestral domain. The secretaries of the Department of Agrarian Reform, Department of Environment and Natural Resources, Department of the Interior and Local Government, and Department of Justice, the Commissioner of the National Development Corporation, and any other government agency claiming jurisdiction over the area shall be notified thereof. Such notification shall terminate any legal basis for the jurisdiction previously claimed;"},{name:"Issuance of CADT",paragraph:"ICCs/IPs whose ancestral domains have been officially delineated and determined by the NCIP shall be issued a CADT in the name of the community concerned, containing a list of all those identified in the census; and"},{name:"Registration of CADTs",paragraph:"The NCIP shall register issued certificates of ancestral domain titles and certificates of ancestral lands titles before the Register of Deeds in the place where the property is situated."}]},{name:"Section 53",subtitle:"Identification, Delineation and Certification of Ancestral Lands.",paragraph:["a. The allocation of lands within any ancestral domain to individual or indigenous corporate (family or clan) claimants shall be left to the ICCs/IPs concerned to decide in accordance with customs and traditions;","b. Individual and indigenous corporate claimants of ancestral lands which are not within ancestral domains, may have their claims officially established by filing applications for the identification and delineation of their claims with the Ancestral Domains Office. An individual or recognized head of a family or clan may file such application in his behalf or in behalf of his family or clan, respectively;","c. Proofs of such claims shall accompany the application form which shall include the testimony under oath of elders of the community and other documents directly or indirectly attesting to the possession or occupation of the areas since time immemorial by the individual or corporate claimants in the concept of owners which shall be any of the authentic documents enumerated under Sec. 52 (d) of this Act, including tax declarations and proofs of payment of taxes;","d. The Ancestral Domains Office may require from each ancestral claimant the submission of such other documents, Sworn Statements and the like, which in its opinion, may shed light on the veracity of the contents of the application/claim;","e. Upon receipt of the applications for delineation and recognition of ancestral land claims, the Ancestral Domains Office shall cause the publication of the application and a copy of each document submitted including a translation in the native language of the ICCs/IPs concerned in a prominent place therein for at least fifteen (15) days. A copy of the document shall also be posted at the local, provincial, and regional offices of the NCIP and shall be published in a newspaper of general circulation once a week for two (2) consecutive weeks to allow other claimants to file opposition thereto within fifteen (15) days from the date of such publication: Provided, That in areas where no such newspaper exists, broadcasting in a radio station will be a valid substitute: Provided, further, That mere posting shall be deemed sufficient if both newspapers and radio station are not available;","f. Fifteen (15) days after such publication, the Ancestral Domains Office shall investigate and inspect each application, and if found to be meritorious, shall cause a parcellary survey of the area being claimed. The Ancestral Domains Office shall reject any claim that is deemed patently false or fraudulent after inspection and verification. In case of rejection, the Ancestral Domains Office shall give the applicant due notice, copy furnished all concerned, containing the grounds for denial. The denial shall be appealable to the NCIP.","In case of conflicting claims among individuals or indigenous corporate claimants, the Ancestral Domains Office shall cause the contending parties to meet and assist them in coming up with a preliminary resolution of the conflict, without prejudice to its full adjudication according to Sec. 62 of this Act. In all proceedings for the identification or delineation of the ancestral domains as herein provided, the Director of Lands shall represent the interest of the Republic of the Philippines; and","g. The Ancestral Domains Office shall prepare and submit a report on each and every application surveyed and delineated to the NCIP, which shall, in turn, evaluate the report submitted. If the NCIP finds such claim meritorious, it shall issue a certificate of ancestral land, declaring and certifying the claim of each individual or corporate (family or clan) claimant over ancestral lands."]},{name:"Section 54",subtitle:"Fraudulent Claims.",paragraph:"The Ancestral Domains Office may, upon written request from the ICCs/IPs, review existing claims which have been fraudulently acquired by any person or community. Any claim found to be fraudulently acquired by, and issued to, any person or community may be cancelled by the NCIP after due notice and hearing of all parties concerned."},{name:"Section 55",subtitle:"Communal Rights.",paragraph:"Subject to Section 56 hereof, areas within the ancestral domains, whether delineated or not, shall be presumed to be communally held: Provided, That communal rights under this Act shall not be construed as co-ownership as provided in Republic Act No. 386, otherwise known as the New Civil Code."},{name:"Section 56",subtitle:"Existing Property Rights Regimes.",paragraph:"Property rights within the ancestral domains already existing and/or vested upon effectivity of this Act, shall be recognized and respected."},{name:"Section 57",sub_paragraphs:"Natural Resources within Ancestral Domains.",paragraph:"The ICCs/IPs shall have priority rights in the harvesting, extraction, development or exploitation of any natural resources within the ancestral domains. A non-member of the ICCs/IPs concerned may be allowed to take part in the development and utilization of the natural resources for a period of not exceeding twenty-five (25) years renewable for not more than twenty-five (25) years: Provided, That a formal and written agreement is entered into with the ICCs/IPs concerned or that the community, pursuant to its own decision making process, has agreed to allow such operation: Provided, finally, That the NCIP may exercise visitorial powers and take appropriate action to safeguard the rights of the ICCs/IPs under the same contract."},{name:"Section 58",subtitle:"Environmental Considerations.",paragraph:"Ancestral domains or portions thereof, which are found to be necessary for critical watersheds, mangroves, wildlife sanctuaries, wilderness, protected areas, forest cover, or reforestation as determined by appropriate agencies with the full participation of the ICCs/IPs concerned shall be maintained, managed and developed for such purposes. The ICCs/IPs concerned shall be given the responsibility to maintain, develop, protect and conserve such areas with the full and effective assistance of government agencies. Should the ICCs/IPs decide to transfer the responsibility over the areas, said decision must be made in writing. The consent of the ICCs/IPs should be arrived at in accordance with its customary laws without prejudice to the basic requirements of existing laws on free and prior informed consent: Provided, That the transfer shall be temporary and will ultimately revert to the ICCs/IPs in accordance with a program for technology transfer: Provided, further, That no ICCs/IPs shall be displaced or relocated for the purpose enumerated under this section without the written consent of the specific persons authorized to give consent."},{name:"Section 59",subtitle:"Certification Precondition.",paragraph:"All departments and other governmental agencies shall henceforth be strictly enjoined from issuing, renewing, or granting any concession, license or lease, or entering into any production-sharing agreement, without prior certification from the NCIP that the area affected does not overlap with any ancestral domain. Such certification shall only be issued after a field-based investigation is conducted by the Ancestral Domains Office of the area concerned: Provided, That no certification shall be issued by the NCIP without the free and prior informed and written consent of ICCs/IPs concerned: Provided, further, That no department, government agency or government-owned or -controlled corporation may issue new concession, license, lease, or production sharing agreement while there is a pending application for a CADT: Provided, finally, That the ICCs/IPs shall have the right to stop or suspend, in accordance with this Act, any project that has not satisfied the requirement of this consultation process."},{name:"Section 60",sub_paragraphs:"Exemption from Taxes.",paragraph:"All lands certified to be ancestral domains shall be exempt from real property taxes, special levies, and other forms of exaction except such portion of the ancestral domains as are actually used for large-scale agriculture, commercial forest plantation and residential purposes or upon titling by private persons: Provided, That all exactions shall be used to facilitate the development and improvement of the ancestral domains."},{name:"Section 61",subtitle:"Temporary Requisition Powers.",paragraph:"Prior to the establishment of an institutional surveying capacity whereby it can effectively fulfill its mandate, but in no case beyond three (3) years after its creation, the NCIP is hereby authorized to request the Department of Environment and Natural Resources (DENR) survey teams as well as other equally capable private survey teams, through a Memorandum of Agreement (MOA), to delineate ancestral domain perimeters. The DENR Secretary shall accommodate any such request within one (1) month of its issuance: Provided, That the Memorandum of Agreement shall stipulate, among others, a provision for technology transfer to the NCIP."},{name:"Section 62",subtitle:"Resolution of Conflicts.",paragraph:"In cases of conflicting interest, where there are adverse claims within the ancestral domains as delineated in the survey plan, and which can not be resolved, the NCIP shall hear and decide, after notice to the proper parties, the disputes arising from the delineation of such ancestral domains: Provided, That if the dispute is between and/or among ICCs/IPs regarding the traditional boundaries of their respective ancestral domains, customary process shall be followed. The NCIP shall promulgate the necessary rules and regulations to carry out its adjudicatory functions: Provided, further, That any decision, order, award or ruling of the NCIP on any ancestral domain dispute or on any matter pertaining to the application, implementation, enforcement and interpretation of this Act may be brought for Petition for Review to the Court of Appeals within fifteen (15) days from receipt of a copy thereof."},{name:"Section 63",subtitle:"Applicable Laws.",paragraph:"Customary laws, traditions and practices of the ICCs/IPs of the land where the conflict arises shall be applied first with respect to property rights, claims and ownerships, hereditary succession and settlement of land disputes. Any doubt or ambiguity in the application and interpretation of laws shall be resolved in favor of the ICCs/IPs."},{name:"Section 64",subtitle:"Remedial Measures.",paragraph:"Expropriation may be resorted to in the resolution of conflicts of interest following the principle of the common good. The NCIP shall take appropriate legal action for the cancellation of officially documented titles which were acquired illegally: Provided, That such procedure shall ensure that the rights of possessors in good faith shall be respected: Provided, further, That the action for cancellation shall be initiated within two (2) years from the effectivity of this Act: Provided, finally, That the action for reconveyance shall be within a period of ten (10) years in accordance with existing laws."}]}],mme=()=>{const n=qt(),{selectedWord:e,definition:t,tooltipPosition:i,handleTextSelection:r}=Ln(),[s,o]=B.useState(!1);B.useEffect(()=>{const u=()=>{window.scrollY>200?o(!0):o(!1)};return window.addEventListener("scroll",u),()=>window.removeEventListener("scroll",u)},[]);const a=()=>{window.scrollTo({top:0,behavior:"smooth"})},l=()=>n("/chapterNine"),c=()=>n("/chapterSeven");return!l1||l1.length===0?d.jsx("div",{children:"No data available"}):d.jsxs("div",{className:"text-spacing-3 leading-relaxed tracking-wide",children:[d.jsx(Pn,{children:d.jsxs("div",{children:[l1.map(u=>d.jsxs("div",{className:"my-5",children:[d.jsx("h5",{className:q.paragraphSubText,children:u.subtitle}),d.jsx("h4",{className:`${q.headText} mb-10`,children:u.title}),d.jsx("div",{children:u.sections?.map((f,m)=>d.jsxs("div",{className:"my-4",children:[d.jsxs("h6",{className:q.paragraphSubText,children:[f.name," ",f.subtitle]}),Array.isArray(f.paragraph)?d.jsx("div",{children:f.paragraph.map((g,x)=>d.jsxs("div",{className:"my-2",children:[d.jsx("h6",{className:q.paragraphSubTextLower,children:g.name}),d.jsx("p",{onMouseUp:r,className:q.paragraphSubTextLower,children:g.paragraph})]},x))}):d.jsx("p",{onMouseUp:r,className:q.paragraphSubTextLower,children:f.paragraph})]},m))})]},u.id)),e&&d.jsxs("div",{className:"absolute text-left bg-white p-4 shadow-lg rounded-lg max-w-xs text-black",style:{left:i.left,top:i.top,zIndex:100},children:[d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsx("p",{className:q.dictionaryText,children:e}),d.jsx("i",{className:"fas fa-volume-up ml-5 text-gray-600"})]}),d.jsx("hr",{className:"border-2 mb-2"}),d.jsx("p",{children:t})]}),d.jsxs("div",{className:"mt-10 text-center flex justify-between",children:[d.jsx("button",{onClick:c,className:"px-6 py-2 border text-white rounded-lg hover:bg-gray-500 transition duration-200",children:"Previous Article"}),d.jsx("button",{onClick:l,className:"px-6 py-2 border text-white rounded-lg hover:bg-gray-500 transition duration-200",children:"Next Article"})]})]})}),s&&d.jsx("button",{onClick:a,className:"fixed bottom-6 right-6 w-12 h-12 bg-gray-600 text-white rounded-full shadow-lg flex items-center justify-center hover:bg-gray-800 transition-all duration-300",children:d.jsx("i",{className:"fas fa-arrow-up"})})]})},gme=zt(mme),yme=[{id:"enforcement",title:"Jurisdiction and Procedures for Enforcement of Rights",subtitle:"Chapter IX",sections:[{name:"Section 65",subtitle:"Primacy of Customary Laws and Practices.",paragraph:"When disputes involve ICCs/IPs, customary laws and practices shall be used to resolve the dispute."},{name:"Section 66",subtitle:"Primacy of Customary Laws and Practices.",paragraph:"The NCIP, through its regional offices, shall have jurisdiction over all claims and disputes involving rights of ICCs/IPs: Provided, however, That no such dispute shall be brought to the NCIP unless the parties have exhausted all remedies provided under their customary laws. For this purpose, a certification shall be issued by the Council of Elders/Leaders who participated in the attempt to settle the dispute that the same has not been resolved, which certification shall be a condition precedent to the filing of a petition with the NCIP."},{name:"Section 67",subtitle:"Appeals to the Court of Appeals.",paragraph:"Decisions of the NCIP shall be appealable to the Court of Appeals by way of a petition for review."},{name:"Section 68",subtitle:"Execution of Decisions, Awards, Orders.",paragraph:"Upon expiration of the period herein provided and no appeal is perfected by any of the contending parties, the Hearing Officer of the NCIP, on its own initiative or upon motion by the prevailing party, shall issue a writ of execution requiring the sheriff or the proper officer to execute final decisions, orders or awards of the Regional Hearing Officer of the NCIP."},{name:"Section 69",subtitle:"Quasi-Judicial Powers of the NCIP.",sub_paragraph:"The NCIP shall have the power and authority:",paragraph:["a. To promulgate rules and regulations governing the hearing and disposition of cases filed before it as well as those pertaining to its internal functions and such rules and regulations as may be necessary to carry out the purposes of this Act;","b. To administer oaths, summon the parties to a controversy, issue subpoenas requiring the attendance and testimony of witnesses or the production of such books, papers, contracts, records, agreements and other document of similar nature as may be material to a just determination of the matter under investigation or hearing conducted in pursuance of this Act;","c. To hold any person in contempt, directly or indirectly, and impose appropriate penalties therefor; and","d. To enjoin any or all acts involving or arising from any case pending before it which, if not restrained forthwith, may cause grave or irreparable damage to any of the parties to the case or seriously affect social or economic activity."]},{name:"Section 70",subtitle:"No Restraining Order or Preliminary Injunction.",paragraph:"No inferior court of the Philippines shall have jurisdiction to issue any restraining order or writ of preliminary injunction against the NCIP or any of its duly authorized or designated offices in any case, dispute or controversy arising from, necessary to, or interpretation of this Act and other pertinent laws relating to ICCs/IPs and ancestral domains."}]}],vme=()=>{const n=qt(),{selectedWord:e,definition:t,tooltipPosition:i,handleTextSelection:r}=Ln(),[s,o]=B.useState(!1);B.useEffect(()=>{const u=()=>{window.scrollY>200?o(!0):o(!1)};return window.addEventListener("scroll",u),()=>window.removeEventListener("scroll",u)},[]);const a=()=>{window.scrollTo({top:0,behavior:"smooth"})},l=()=>{n("/chapterTen")},c=()=>{n("/chapterEight")};return d.jsxs("div",{className:"text-spacing-3 leading-relaxed tracking-wide",children:[d.jsx(Pn,{children:d.jsxs("div",{children:[yme.map(u=>d.jsxs("div",{className:"my-5",children:[d.jsx("h5",{className:q.paragraphSubText,children:u.subtitle}),d.jsx("h4",{className:`${q.headText} mb-10`,children:u.title}),d.jsx("div",{children:u.sections.map((f,m)=>d.jsxs("div",{className:"my-4",children:[d.jsxs("h6",{className:q.paragraphSubText,children:[f.name," ",f.subtitle]}),d.jsx("p",{onMouseUp:r,className:q.paragraphSubTextLower,children:f.paragraph})]},m))})]},u.id)),e&&d.jsxs("div",{className:"absolute text-left bg-white p-4 shadow-lg rounded-lg max-w-xs text-black",style:{left:i.left,top:i.top,zIndex:100},children:[d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsx("p",{className:q.dictionaryText,children:e}),d.jsx("i",{className:"fas fa-volume-up ml-5 text-gray-600"})]}),d.jsx("hr",{className:"border-2 mb-2"}),d.jsx("p",{children:t})]}),d.jsxs("div",{className:"mt-10 text-center flex justify-between",children:[d.jsx("button",{onClick:c,className:"px-6 py-2 border justify-end text-white rounded-lg hover:bg-gray-500",children:"Previous Article"}),d.jsx("button",{onClick:l,className:"px-6 py-2 border justify-end text-white rounded-lg hover:bg-gray-500",children:"Next Article"})]})]})}),s&&d.jsx("button",{onClick:a,className:"fixed bottom-6 right-6 w-12 h-12 bg-gray-600 text-white rounded-full shadow-lg flex items-center justify-center hover:bg-gray-800 transition-all duration-300",children:d.jsx("i",{className:"fas fa-arrow-up"})})]})},xme=zt(vme),_me=[{id:"fund",title:"Ancestral Domains Fund",subtitle:"Chapter X",sections:[{name:"Section 71",subtitle:"Ancestral Domains Fund.",paragraph:"There is hereby created a special fund, to be known as the Ancestral Domains Fund, an initial amount of One hundred thirty million pesos (P130,000,000) to cover compensation for expropriated lands, delineation and development of ancestral domains. An amount of Fifty million pesos (P50,000,000) shall be sourced from the gross income of the Philippine Charity Sweepstakes Office (PCSO) from its lotto operation, Ten million pesos (P10,000,000) from the gross receipts of the travel tax of the preceding year, the fund of the Social Reform Council intended for survey and delineation of ancestral lands/domains, and such other source as the government may deem appropriate. Thereafter, such amount shall be included in the annual General Appropriations Act. Foreign as well as local funds which are made available for the ICCs/IPs through the government of the Philippines shall be coursed through the NCIP. The NCIP may also solicit and receive donations, endowments and grants in the form of contributions, and such endowments shall be exempted from income or gift taxes and all other taxes, charges or fees imposed by the government or any political subdivision or instrumentality thereof."}]}],wme=()=>{const n=qt(),{selectedWord:e,definition:t,tooltipPosition:i,handleTextSelection:r}=Ln(),[s,o]=B.useState(!1);B.useEffect(()=>{const u=()=>{window.scrollY>200?o(!0):o(!1)};return window.addEventListener("scroll",u),()=>window.removeEventListener("scroll",u)},[]);const a=()=>{window.scrollTo({top:0,behavior:"smooth"})},l=()=>{n("/chapterEleven")},c=()=>{n("/chapterNine")};return d.jsxs("div",{className:"text-spacing-3 leading-relaxed tracking-wide",children:[d.jsx(Pn,{children:d.jsxs("div",{children:[_me.map(u=>d.jsxs("div",{className:"my-5",children:[d.jsx("h5",{className:q.paragraphSubText,children:u.subtitle}),d.jsx("h4",{className:`${q.headText} mb-10`,children:u.title}),d.jsx("div",{children:u.sections.map((f,m)=>d.jsxs("div",{className:"my-4",children:[d.jsxs("h6",{className:q.paragraphSubText,children:[f.name," ",f.subtitle]}),d.jsx("p",{onMouseUp:r,className:q.paragraphSubTextLower,children:f.paragraph})]},m))})]},u.id)),e&&d.jsxs("div",{className:"absolute text-left bg-white p-4 shadow-lg rounded-lg max-w-xs text-black",style:{left:i.left,top:i.top,zIndex:100},children:[d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsx("p",{className:q.dictionaryText,children:e}),d.jsx("i",{className:"fas fa-volume-up ml-5 text-gray-600"})]}),d.jsx("hr",{className:"border-2 mb-2"}),d.jsx("p",{children:t})]}),d.jsxs("div",{className:"mt-10 text-center flex justify-between",children:[d.jsx("button",{onClick:c,className:"px-6 py-2 border justify-end text-white rounded-lg hover:bg-gray-500",children:"Previous Article"}),d.jsx("button",{onClick:l,className:"px-6 py-2 border justify-end text-white rounded-lg hover:bg-gray-500",children:"Next Article"})]})]})}),s&&d.jsx("button",{onClick:a,className:"fixed bottom-6 right-6 w-12 h-12 bg-gray-600 text-white rounded-full shadow-lg flex items-center justify-center hover:bg-gray-800 transition-all duration-300",children:d.jsx("i",{className:"fas fa-arrow-up"})})]})},bme=zt(wme),Sme=[{id:"penalty",title:"Penalties",subtitle:"Chapter XI",sections:[{name:"Section 72",subtitle:"Punishable Acts and Applicable Penalties.",paragraph:"Any person who commits violation of any of the provisions of this Act, such as, but not limited to, unauthorized and/or unlawful intrusion upon any ancestral lands or domains as stated in Sec. 10, Chapter III, or shall commit any of the prohibited acts mentioned in Sections 21 and 24, Chapter V, Section 33, Chapter VI hereof, shall be punished in accordance with the customary laws of the ICCs/IPs concerned: Provided, That no such penalty shall be cruel, degrading or inhuman punishment: Provided, further, That neither shall the death penalty or excessive fines be imposed. This provision shall be without prejudice to the right of any ICCs/IPs to avail of the protection of existing laws. In which case, any person who violates any provision of this Act shall, upon conviction, be punished by imprisonment of not less than nine (9) months but not more than twelve (12) years or a fine of not less than One hundred thousand pesos (P100,000) nor more than Five hundred thousand pesos (P500,000) or both such fine and imprisonment upon the discretion of the court. In addition, he shall be obliged to pay to the ICCs/IPs concerned whatever damage may have been suffered by the latter as a consequence of the unlawful act."},{name:"Section 73",subtitle:"Persons Subject to Punishment.",paragraph:"If the offender is a juridical person, all officers such as, but not limited to, its president, manager, or head of office responsible for their unlawful act shall be criminally liable therefor, in addition to the cancellation of certificates of their registration and/or license: Provided, That if the offender is a public official, the penalty shall include perpetual disqualification to hold public office."}]}],Tme=()=>{const n=qt(),{selectedWord:e,definition:t,tooltipPosition:i,handleTextSelection:r}=Ln(),[s,o]=B.useState(!1);B.useEffect(()=>{const u=()=>{window.scrollY>200?o(!0):o(!1)};return window.addEventListener("scroll",u),()=>window.removeEventListener("scroll",u)},[]);const a=()=>{window.scrollTo({top:0,behavior:"smooth"})},l=()=>{n("/chapterTwelve")},c=()=>{n("/chapterTen")};return d.jsxs("div",{className:"text-spacing-3 leading-relaxed tracking-wide",children:[d.jsx(Pn,{children:d.jsxs("div",{children:[Sme.map(u=>d.jsxs("div",{className:"my-5",children:[d.jsx("h5",{className:q.paragraphSubText,children:u.subtitle}),d.jsx("h4",{className:`${q.headText} mb-10`,children:u.title}),d.jsx("div",{children:u.sections.map((f,m)=>d.jsxs("div",{className:"my-4",children:[d.jsxs("h6",{className:q.paragraphSubText,children:[f.name," ",f.subtitle]}),d.jsx("p",{onMouseUp:r,className:q.paragraphSubTextLower,children:f.paragraph})]},m))})]},u.id)),e&&d.jsxs("div",{className:"absolute text-left bg-white p-4 shadow-lg rounded-lg max-w-xs text-black",style:{left:i.left,top:i.top,zIndex:100},children:[d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsx("p",{className:q.dictionaryText,children:e}),d.jsx("i",{className:"fas fa-volume-up ml-5 text-gray-600"})]}),d.jsx("hr",{className:"border-2 mb-2"}),d.jsx("p",{children:t})]}),d.jsxs("div",{className:"mt-10 text-center flex justify-between",children:[d.jsx("button",{onClick:c,className:"px-6 py-2 border justify-end text-white rounded-lg hover:bg-gray-500",children:"Previous Article"}),d.jsx("button",{onClick:l,className:"px-6 py-2 border justify-end text-white rounded-lg hover:bg-gray-500",children:"Next Article"})]})]})}),s&&d.jsx("button",{onClick:a,className:"fixed bottom-6 right-6 w-12 h-12 bg-gray-600 text-white rounded-full shadow-lg flex items-center justify-center hover:bg-gray-800 transition-all duration-300",children:d.jsx("i",{className:"fas fa-arrow-up"})})]})},Eme=zt(Tme),Cme=[{id:"penalty",title:"Merger of the Office for Northern Cultural Communities and the Office for Southern Cultural Communities",subtitle:"Chapter XII",sections:[{name:"Section 74",subtitle:"Merger of ONCC/OSCC.",paragraph:"The Office for Northern Cultural Communities (ONCC) and the Office of Southern Cultural Communities (OSCC), created under Executive Order Nos. 122-B and 122-C respectively, are hereby merged as organic offices of the NCIP and shall continue to function under a revitalized and strengthened structures to achieve the objectives of the NCIP: Provided, That the positions of Staff Directors, Bureau Directors, Deputy Executive Directors and Executive Directors, except positions of Regional Directors and below, are hereby phased-out upon the effectivity of this Act: Provided, further, That officials and employees of the phased-out offices who may be qualified may apply for reappointment with the NCIP and may be given prior rights in the filling up of the newly created positions of NCIP, subject to the qualifications set by the Placement Committee: Provided, furthermore, That in the case where an indigenous person and a non-indigenous person with similar qualifications apply for the same position, priority shall be given to the former. Officers and employees who are to be phased-out as a result of the merger of their offices shall be entitled to gratuity a rate equivalent to one and a half (1 ) months salary for every year of continuous and satisfactory service rendered or the equivalent nearest fraction thereof favorable to them on the basis of the highest salary received. If they are already entitled to retirement or gratuity, they shall have the option to select either such retirement benefits or the gratuity herein provided. Officers and employees who may be reinstated shall refund such retirement benefits or gratuity received: Provided, finally, That absorbed personnel must still meet the qualifications and standards set by the Civil Service and the Placement Committee herein created."},{name:"Section 75",subtitle:"Transition Period.",paragraph:"The ONCC/OSCC shall have a period of six (6) months from the effectivity of this Act within which to wind up its affairs and to conduct audit of its finances."},{name:"Section 76",subtitle:"Transfer of Assets/Properties.",paragraph:"All real and personal properties which are vested in, or belonging to, the merged offices as aforestated shall be transferred to the NCIP without further need of conveyance, transfer or assignment and shall be held for the same purpose as they were held by the former offices: Provided, That all contracts, records and documents relating to the operations of the merged offices shall be transferred to the NCIP. All agreements and contracts entered into by the merged offices shall remain in full force and effect unless otherwise terminated, modified or amended by the NCIP."},{name:"Section 77",subtitle:"Placement Committee.",paragraph:"Subject to rules on government reorganization, a Placement Committee shall be created by the NCIP, in coordination with the Civil Service Commission, which shall assist in the judicious selection and placement of personnel in order that the best qualified and most deserving persons shall be appointed in the reorganized agency. The Placement Committee shall be composed of seven (7) commissioners and an ICCs/IPs representative from each of the first and second level employees association in the Offices for Northern and Southern Cultural Communities (ONCC/OSCC), nongovernment organizations (NGOs) who have served the community for at least five (5) years and peoples organizations (POs) with at least five (5) years of existence. They shall be guided by the criteria of retention and appointment to be prepared by the consultative body and by the pertinent provisions of the civil service law."}]}],Ame=()=>{const n=qt(),{selectedWord:e,definition:t,tooltipPosition:i,handleTextSelection:r}=Ln(),[s,o]=B.useState(!1);B.useEffect(()=>{const c=()=>{window.scrollY>200?o(!0):o(!1)};return window.addEventListener("scroll",c),()=>window.removeEventListener("scroll",c)},[]);const a=()=>{window.scrollTo({top:0,behavior:"smooth"})},l=()=>{n("/chapterEleven")};return d.jsxs("div",{className:"text-spacing-3 leading-relaxed tracking-wide",children:[d.jsx(Pn,{children:d.jsxs("div",{children:[Cme.map(c=>d.jsxs("div",{className:"my-5",children:[d.jsx("h5",{className:q.paragraphSubText,children:c.subtitle}),d.jsx("h4",{className:`${q.headText} mb-10`,children:c.title}),d.jsx("div",{children:c.sections.map((u,f)=>d.jsxs("div",{className:"my-4",children:[d.jsxs("h6",{className:q.paragraphSubText,children:[u.name," ",u.subtitle]}),d.jsx("p",{onMouseUp:r,className:q.paragraphSubTextLower,children:u.paragraph})]},f))})]},c.id)),e&&d.jsxs("div",{className:"absolute text-left bg-white p-4 shadow-lg rounded-lg max-w-xs text-black",style:{left:i.left,top:i.top,zIndex:100},children:[d.jsxs("div",{className:"flex items-center justify-between",children:[d.jsx("p",{className:q.dictionaryText,children:e}),d.jsx("i",{className:"fas fa-volume-up ml-5 text-gray-600"})]}),d.jsx("hr",{className:"border-2 mb-2"}),d.jsx("p",{children:t})]}),d.jsx("div",{className:"mt-10 text-center flex justify-between",children:d.jsx("button",{onClick:l,className:"px-6 py-2 border justify-end text-white rounded-lg hover:bg-gray-500",children:"Previous Article"})})]})}),s&&d.jsx("button",{onClick:a,className:"fixed bottom-6 right-6 w-12 h-12 bg-gray-600 text-white rounded-full shadow-lg flex items-center justify-center hover:bg-gray-800 transition-all duration-300",children:d.jsx("i",{className:"fas fa-arrow-up"})})]})},Mme=zt(Ame),v0=({children:n})=>d.jsxs("div",{className:"relative",children:[d.jsx(_ee,{}),d.jsx("div",{className:"relative z-10",children:n})]}),Ime=[{path:"/",element:d.jsx(v0,{children:d.jsx(W3,{})})},{path:"/login",element:d.jsx(v0,{children:d.jsx(W3,{})})},{path:"/signup",element:d.jsx(v0,{children:d.jsx(tde,{})})},{path:"/forgotPass",element:d.jsx(v0,{children:d.jsx(ide,{})})},{path:"/main",element:d.jsx(Bde,{}),children:[{path:"lawyer-status",element:d.jsx($de,{})},{path:"ai",element:d.jsx(Jde,{})},{path:"constitution",element:d.jsx(Vde,{})},{path:"RA_8371",element:d.jsx(Ife,{})},{path:"lawyer-appointments",element:d.jsx(efe,{})},{path:"appointmentLawyer1",element:d.jsx(nfe,{})},{path:"appointmentTableLawyer1",element:d.jsx(rfe,{})},{path:"appointmentResultLawyer1",element:d.jsx(yfe,{})},{path:"appointmentLawyer2",element:d.jsx(xfe,{})},{path:"appointmentTableLawyer2",element:d.jsx(wfe,{})},{path:"appointmentResultLawyer2",element:d.jsx(bfe,{})},{path:"appointmentLawyer3",element:d.jsx(Tfe,{})},{path:"appointmentTableLawyer3",element:d.jsx(Cfe,{})},{path:"appointmentResultLawyer3",element:d.jsx(Afe,{})},{path:"articleOne",element:d.jsx(Fn,{children:d.jsx(Rfe,{})})},{path:"articleTwo",element:d.jsx(Fn,{children:d.jsx(Dfe,{})})},{path:"articleThree",element:d.jsx(Fn,{children:d.jsx(Ufe,{})})},{path:"articleFour",element:d.jsx(Fn,{children:d.jsx(Vfe,{})})},{path:"articleFive",element:d.jsx(Fn,{children:d.jsx(Hfe,{})})},{path:"articleSix",element:d.jsx(Fn,{children:d.jsx(qfe,{})})},{path:"articleSeven",element:d.jsx(Fn,{children:d.jsx(Yfe,{})})},{path:"articleEight",element:d.jsx(Fn,{children:d.jsx(Qfe,{})})},{path:"articleNine",element:d.jsx(Fn,{children:d.jsx(rpe,{})})},{path:"articleTen",element:d.jsx(Fn,{children:d.jsx(lpe,{})})},{path:"articleEleven",element:d.jsx(Fn,{children:d.jsx(hpe,{})})},{path:"articleTwelve",element:d.jsx(Fn,{children:d.jsx(ppe,{})})},{path:"articleThirteen",element:d.jsx(Fn,{children:d.jsx(Tpe,{})})},{path:"articleFourteen",element:d.jsx(Fn,{children:d.jsx(Rpe,{})})},{path:"articleFifteen",element:d.jsx(Fn,{children:d.jsx(Dpe,{})})},{path:"articleSixteen",element:d.jsx(Fn,{children:d.jsx(Upe,{})})},{path:"articleSeventeen",element:d.jsx(Fn,{children:d.jsx(Vpe,{})})},{path:"articleEighteen",element:d.jsx(Fn,{children:d.jsx(Hpe,{})})},{path:"chapterOne",element:d.jsx(Fn,{children:d.jsx(qpe,{})})},{path:"chapterTwo",element:d.jsx(Fn,{children:d.jsx(Ype,{})})},{path:"chapterThree",element:d.jsx(Fn,{children:d.jsx(Qpe,{})})},{path:"chapterFour",element:d.jsx(Fn,{children:d.jsx(tme,{})})},{path:"chapterFive",element:d.jsx(Fn,{children:d.jsx(rme,{})})},{path:"chapterSix",element:d.jsx(Fn,{children:d.jsx(ame,{})})},{path:"chapterSeven",element:d.jsx(Fn,{children:d.jsx(pme,{})})},{path:"chapterEight",element:d.jsx(Fn,{children:d.jsx(gme,{})})},{path:"chapterNine",element:d.jsx(Fn,{children:d.jsx(xme,{})})},{path:"chapterTen",element:d.jsx(Fn,{children:d.jsx(bme,{})})},{path:"chapterEleven",element:d.jsx(Fn,{children:d.jsx(Eme,{})})},{path:"chapterTwelve",element:d.jsx(Fn,{children:d.jsx(Mme,{})})}]},{path:"/admin_main",element:d.jsx(Wde,{})},{path:"*",element:d.jsx("div",{children:"404 - Page Not Found"})}],Pme=K9(Ime);uA(document.getElementById("root")).render(d.jsx(B.StrictMode,{children:d.jsx(H8,{children:d.jsx(s8,{router:Pme})})}));
