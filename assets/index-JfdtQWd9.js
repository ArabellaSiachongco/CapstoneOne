function U6(n,e){for(var t=0;t<e.length;t++){const i=e[t];if(typeof i!="string"&&!Array.isArray(i)){for(const r in i)if(r!=="default"&&!(r in n)){const s=Object.getOwnPropertyDescriptor(i,r);s&&Object.defineProperty(n,r,s.get?s:{enumerable:!0,get:()=>i[r]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function t(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(r){if(r.ep)return;r.ep=!0;const s=t(r);fetch(r.href,s)}})();function Y1(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}function j6(n){if(n.__esModule)return n;var e=n.default;if(typeof e=="function"){var t=function i(){return this instanceof i?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};t.prototype=e.prototype}else t={};return Object.defineProperty(t,"__esModule",{value:!0}),Object.keys(n).forEach(function(i){var r=Object.getOwnPropertyDescriptor(n,i);Object.defineProperty(t,i,r.get?r:{enumerable:!0,get:function(){return n[i]}})}),t}var E3={exports:{}},A_={},C3={exports:{}},tn={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var vg=Symbol.for("react.element"),F6=Symbol.for("react.portal"),V6=Symbol.for("react.fragment"),B6=Symbol.for("react.strict_mode"),z6=Symbol.for("react.profiler"),H6=Symbol.for("react.provider"),G6=Symbol.for("react.context"),W6=Symbol.for("react.forward_ref"),q6=Symbol.for("react.suspense"),$6=Symbol.for("react.memo"),X6=Symbol.for("react.lazy"),WP=Symbol.iterator;function K6(n){return n===null||typeof n!="object"?null:(n=WP&&n[WP]||n["@@iterator"],typeof n=="function"?n:null)}var A3={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},M3=Object.assign,I3={};function df(n,e,t){this.props=n,this.context=e,this.refs=I3,this.updater=t||A3}df.prototype.isReactComponent={};df.prototype.setState=function(n,e){if(typeof n!="object"&&typeof n!="function"&&n!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,n,e,"setState")};df.prototype.forceUpdate=function(n){this.updater.enqueueForceUpdate(this,n,"forceUpdate")};function P3(){}P3.prototype=df.prototype;function J1(n,e,t){this.props=n,this.context=e,this.refs=I3,this.updater=t||A3}var Q1=J1.prototype=new P3;Q1.constructor=J1;M3(Q1,df.prototype);Q1.isPureReactComponent=!0;var qP=Array.isArray,R3=Object.prototype.hasOwnProperty,Z1={current:null},N3={key:!0,ref:!0,__self:!0,__source:!0};function D3(n,e,t){var i,r={},s=null,o=null;if(e!=null)for(i in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)R3.call(e,i)&&!N3.hasOwnProperty(i)&&(r[i]=e[i]);var a=arguments.length-2;if(a===1)r.children=t;else if(1<a){for(var l=Array(a),c=0;c<a;c++)l[c]=arguments[c+2];r.children=l}if(n&&n.defaultProps)for(i in a=n.defaultProps,a)r[i]===void 0&&(r[i]=a[i]);return{$$typeof:vg,type:n,key:s,ref:o,props:r,_owner:Z1.current}}function Y6(n,e){return{$$typeof:vg,type:n.type,key:e,ref:n.ref,props:n.props,_owner:n._owner}}function eC(n){return typeof n=="object"&&n!==null&&n.$$typeof===vg}function J6(n){var e={"=":"=0",":":"=2"};return"$"+n.replace(/[=:]/g,function(t){return e[t]})}var $P=/\/+/g;function Kb(n,e){return typeof n=="object"&&n!==null&&n.key!=null?J6(""+n.key):e.toString(36)}function lx(n,e,t,i,r){var s=typeof n;(s==="undefined"||s==="boolean")&&(n=null);var o=!1;if(n===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(n.$$typeof){case vg:case F6:o=!0}}if(o)return o=n,r=r(o),n=i===""?"."+Kb(o,0):i,qP(r)?(t="",n!=null&&(t=n.replace($P,"$&/")+"/"),lx(r,e,t,"",function(c){return c})):r!=null&&(eC(r)&&(r=Y6(r,t+(!r.key||o&&o.key===r.key?"":(""+r.key).replace($P,"$&/")+"/")+n)),e.push(r)),1;if(o=0,i=i===""?".":i+":",qP(n))for(var a=0;a<n.length;a++){s=n[a];var l=i+Kb(s,a);o+=lx(s,e,t,l,r)}else if(l=K6(n),typeof l=="function")for(n=l.call(n),a=0;!(s=n.next()).done;)s=s.value,l=i+Kb(s,a++),o+=lx(s,e,t,l,r);else if(s==="object")throw e=String(n),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(n).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Vy(n,e,t){if(n==null)return n;var i=[],r=0;return lx(n,i,"","",function(s){return e.call(t,s,r++)}),i}function Q6(n){if(n._status===-1){var e=n._result;e=e(),e.then(function(t){(n._status===0||n._status===-1)&&(n._status=1,n._result=t)},function(t){(n._status===0||n._status===-1)&&(n._status=2,n._result=t)}),n._status===-1&&(n._status=0,n._result=e)}if(n._status===1)return n._result.default;throw n._result}var Or={current:null},cx={transition:null},Z6={ReactCurrentDispatcher:Or,ReactCurrentBatchConfig:cx,ReactCurrentOwner:Z1};function L3(){throw Error("act(...) is not supported in production builds of React.")}tn.Children={map:Vy,forEach:function(n,e,t){Vy(n,function(){e.apply(this,arguments)},t)},count:function(n){var e=0;return Vy(n,function(){e++}),e},toArray:function(n){return Vy(n,function(e){return e})||[]},only:function(n){if(!eC(n))throw Error("React.Children.only expected to receive a single React element child.");return n}};tn.Component=df;tn.Fragment=V6;tn.Profiler=z6;tn.PureComponent=J1;tn.StrictMode=B6;tn.Suspense=q6;tn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Z6;tn.act=L3;tn.cloneElement=function(n,e,t){if(n==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+n+".");var i=M3({},n.props),r=n.key,s=n.ref,o=n._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=Z1.current),e.key!==void 0&&(r=""+e.key),n.type&&n.type.defaultProps)var a=n.type.defaultProps;for(l in e)R3.call(e,l)&&!N3.hasOwnProperty(l)&&(i[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)i.children=t;else if(1<l){a=Array(l);for(var c=0;c<l;c++)a[c]=arguments[c+2];i.children=a}return{$$typeof:vg,type:n.type,key:r,ref:s,props:i,_owner:o}};tn.createContext=function(n){return n={$$typeof:G6,_currentValue:n,_currentValue2:n,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},n.Provider={$$typeof:H6,_context:n},n.Consumer=n};tn.createElement=D3;tn.createFactory=function(n){var e=D3.bind(null,n);return e.type=n,e};tn.createRef=function(){return{current:null}};tn.forwardRef=function(n){return{$$typeof:W6,render:n}};tn.isValidElement=eC;tn.lazy=function(n){return{$$typeof:X6,_payload:{_status:-1,_result:n},_init:Q6}};tn.memo=function(n,e){return{$$typeof:$6,type:n,compare:e===void 0?null:e}};tn.startTransition=function(n){var e=cx.transition;cx.transition={};try{n()}finally{cx.transition=e}};tn.unstable_act=L3;tn.useCallback=function(n,e){return Or.current.useCallback(n,e)};tn.useContext=function(n){return Or.current.useContext(n)};tn.useDebugValue=function(){};tn.useDeferredValue=function(n){return Or.current.useDeferredValue(n)};tn.useEffect=function(n,e){return Or.current.useEffect(n,e)};tn.useId=function(){return Or.current.useId()};tn.useImperativeHandle=function(n,e,t){return Or.current.useImperativeHandle(n,e,t)};tn.useInsertionEffect=function(n,e){return Or.current.useInsertionEffect(n,e)};tn.useLayoutEffect=function(n,e){return Or.current.useLayoutEffect(n,e)};tn.useMemo=function(n,e){return Or.current.useMemo(n,e)};tn.useReducer=function(n,e,t){return Or.current.useReducer(n,e,t)};tn.useRef=function(n){return Or.current.useRef(n)};tn.useState=function(n){return Or.current.useState(n)};tn.useSyncExternalStore=function(n,e,t){return Or.current.useSyncExternalStore(n,e,t)};tn.useTransition=function(){return Or.current.useTransition()};tn.version="18.3.1";C3.exports=tn;var V=C3.exports;const ko=Y1(V),eH=U6({__proto__:null,default:ko},[V]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var tH=V,nH=Symbol.for("react.element"),iH=Symbol.for("react.fragment"),rH=Object.prototype.hasOwnProperty,sH=tH.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,oH={key:!0,ref:!0,__self:!0,__source:!0};function k3(n,e,t){var i,r={},s=null,o=null;t!==void 0&&(s=""+t),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(i in e)rH.call(e,i)&&!oH.hasOwnProperty(i)&&(r[i]=e[i]);if(n&&n.defaultProps)for(i in e=n.defaultProps,e)r[i]===void 0&&(r[i]=e[i]);return{$$typeof:nH,type:n,key:s,ref:o,props:r,_owner:sH.current}}A_.Fragment=iH;A_.jsx=k3;A_.jsxs=k3;E3.exports=A_;var h=E3.exports,zT={},O3={exports:{}},Es={},U3={exports:{}},j3={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(n){function e(q,Q){var j=q.length;q.push(Q);e:for(;0<j;){var J=j-1>>>1,ce=q[J];if(0<r(ce,Q))q[J]=Q,q[j]=ce,j=J;else break e}}function t(q){return q.length===0?null:q[0]}function i(q){if(q.length===0)return null;var Q=q[0],j=q.pop();if(j!==Q){q[0]=j;e:for(var J=0,ce=q.length,me=ce>>>1;J<me;){var oe=2*(J+1)-1,ye=q[oe],Re=oe+1,Me=q[Re];if(0>r(ye,j))Re<ce&&0>r(Me,ye)?(q[J]=Me,q[Re]=j,J=Re):(q[J]=ye,q[oe]=j,J=oe);else if(Re<ce&&0>r(Me,j))q[J]=Me,q[Re]=j,J=Re;else break e}}return Q}function r(q,Q){var j=q.sortIndex-Q.sortIndex;return j!==0?j:q.id-Q.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;n.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();n.unstable_now=function(){return o.now()-a}}var l=[],c=[],u=1,p=null,m=3,g=!1,x=!1,b=!1,w=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,S=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function E(q){for(var Q=t(c);Q!==null;){if(Q.callback===null)i(c);else if(Q.startTime<=q)i(c),Q.sortIndex=Q.expirationTime,e(l,Q);else break;Q=t(c)}}function C(q){if(b=!1,E(q),!x)if(t(l)!==null)x=!0,he(U);else{var Q=t(c);Q!==null&&ue(C,Q.startTime-q)}}function U(q,Q){x=!1,b&&(b=!1,v(P),P=-1),g=!0;var j=m;try{for(E(Q),p=t(l);p!==null&&(!(p.expirationTime>Q)||q&&!D());){var J=p.callback;if(typeof J=="function"){p.callback=null,m=p.priorityLevel;var ce=J(p.expirationTime<=Q);Q=n.unstable_now(),typeof ce=="function"?p.callback=ce:p===t(l)&&i(l),E(Q)}else i(l);p=t(l)}if(p!==null)var me=!0;else{var oe=t(c);oe!==null&&ue(C,oe.startTime-Q),me=!1}return me}finally{p=null,m=j,g=!1}}var O=!1,N=null,P=-1,A=5,M=-1;function D(){return!(n.unstable_now()-M<A)}function z(){if(N!==null){var q=n.unstable_now();M=q;var Q=!0;try{Q=N(!0,q)}finally{Q?F():(O=!1,N=null)}}else O=!1}var F;if(typeof S=="function")F=function(){S(z)};else if(typeof MessageChannel<"u"){var re=new MessageChannel,le=re.port2;re.port1.onmessage=z,F=function(){le.postMessage(null)}}else F=function(){w(z,0)};function he(q){N=q,O||(O=!0,F())}function ue(q,Q){P=w(function(){q(n.unstable_now())},Q)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(q){q.callback=null},n.unstable_continueExecution=function(){x||g||(x=!0,he(U))},n.unstable_forceFrameRate=function(q){0>q||125<q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<q?Math.floor(1e3/q):5},n.unstable_getCurrentPriorityLevel=function(){return m},n.unstable_getFirstCallbackNode=function(){return t(l)},n.unstable_next=function(q){switch(m){case 1:case 2:case 3:var Q=3;break;default:Q=m}var j=m;m=Q;try{return q()}finally{m=j}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(q,Q){switch(q){case 1:case 2:case 3:case 4:case 5:break;default:q=3}var j=m;m=q;try{return Q()}finally{m=j}},n.unstable_scheduleCallback=function(q,Q,j){var J=n.unstable_now();switch(typeof j=="object"&&j!==null?(j=j.delay,j=typeof j=="number"&&0<j?J+j:J):j=J,q){case 1:var ce=-1;break;case 2:ce=250;break;case 5:ce=1073741823;break;case 4:ce=1e4;break;default:ce=5e3}return ce=j+ce,q={id:u++,callback:Q,priorityLevel:q,startTime:j,expirationTime:ce,sortIndex:-1},j>J?(q.sortIndex=j,e(c,q),t(l)===null&&q===t(c)&&(b?(v(P),P=-1):b=!0,ue(C,j-J))):(q.sortIndex=ce,e(l,q),x||g||(x=!0,he(U))),q},n.unstable_shouldYield=D,n.unstable_wrapCallback=function(q){var Q=m;return function(){var j=m;m=Q;try{return q.apply(this,arguments)}finally{m=j}}}})(j3);U3.exports=j3;var aH=U3.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var lH=V,bs=aH;function ke(n){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+n,t=1;t<arguments.length;t++)e+="&args[]="+encodeURIComponent(arguments[t]);return"Minified React error #"+n+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var F3=new Set,gm={};function Ku(n,e){zd(n,e),zd(n+"Capture",e)}function zd(n,e){for(gm[n]=e,n=0;n<e.length;n++)F3.add(e[n])}var Ma=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),HT=Object.prototype.hasOwnProperty,cH=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,XP={},KP={};function uH(n){return HT.call(KP,n)?!0:HT.call(XP,n)?!1:cH.test(n)?KP[n]=!0:(XP[n]=!0,!1)}function hH(n,e,t,i){if(t!==null&&t.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return i?!1:t!==null?!t.acceptsBooleans:(n=n.toLowerCase().slice(0,5),n!=="data-"&&n!=="aria-");default:return!1}}function dH(n,e,t,i){if(e===null||typeof e>"u"||hH(n,e,t,i))return!0;if(i)return!1;if(t!==null)switch(t.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Ur(n,e,t,i,r,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=i,this.attributeNamespace=r,this.mustUseProperty=t,this.propertyName=n,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var Ji={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(n){Ji[n]=new Ur(n,0,!1,n,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(n){var e=n[0];Ji[e]=new Ur(e,1,!1,n[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(n){Ji[n]=new Ur(n,2,!1,n.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(n){Ji[n]=new Ur(n,2,!1,n,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(n){Ji[n]=new Ur(n,3,!1,n.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(n){Ji[n]=new Ur(n,3,!0,n,null,!1,!1)});["capture","download"].forEach(function(n){Ji[n]=new Ur(n,4,!1,n,null,!1,!1)});["cols","rows","size","span"].forEach(function(n){Ji[n]=new Ur(n,6,!1,n,null,!1,!1)});["rowSpan","start"].forEach(function(n){Ji[n]=new Ur(n,5,!1,n.toLowerCase(),null,!1,!1)});var tC=/[\-:]([a-z])/g;function nC(n){return n[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(n){var e=n.replace(tC,nC);Ji[e]=new Ur(e,1,!1,n,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(n){var e=n.replace(tC,nC);Ji[e]=new Ur(e,1,!1,n,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(n){var e=n.replace(tC,nC);Ji[e]=new Ur(e,1,!1,n,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(n){Ji[n]=new Ur(n,1,!1,n.toLowerCase(),null,!1,!1)});Ji.xlinkHref=new Ur("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(n){Ji[n]=new Ur(n,1,!1,n.toLowerCase(),null,!0,!0)});function iC(n,e,t,i){var r=Ji.hasOwnProperty(e)?Ji[e]:null;(r!==null?r.type!==0:i||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(dH(e,t,r,i)&&(t=null),i||r===null?uH(e)&&(t===null?n.removeAttribute(e):n.setAttribute(e,""+t)):r.mustUseProperty?n[r.propertyName]=t===null?r.type===3?!1:"":t:(e=r.attributeName,i=r.attributeNamespace,t===null?n.removeAttribute(e):(r=r.type,t=r===3||r===4&&t===!0?"":""+t,i?n.setAttributeNS(i,e,t):n.setAttribute(e,t))))}var Ba=lH.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,By=Symbol.for("react.element"),id=Symbol.for("react.portal"),rd=Symbol.for("react.fragment"),rC=Symbol.for("react.strict_mode"),GT=Symbol.for("react.profiler"),V3=Symbol.for("react.provider"),B3=Symbol.for("react.context"),sC=Symbol.for("react.forward_ref"),WT=Symbol.for("react.suspense"),qT=Symbol.for("react.suspense_list"),oC=Symbol.for("react.memo"),ml=Symbol.for("react.lazy"),z3=Symbol.for("react.offscreen"),YP=Symbol.iterator;function tp(n){return n===null||typeof n!="object"?null:(n=YP&&n[YP]||n["@@iterator"],typeof n=="function"?n:null)}var Xn=Object.assign,Yb;function Cp(n){if(Yb===void 0)try{throw Error()}catch(t){var e=t.stack.trim().match(/\n( *(at )?)/);Yb=e&&e[1]||""}return`
`+Yb+n}var Jb=!1;function Qb(n,e){if(!n||Jb)return"";Jb=!0;var t=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var i=c}Reflect.construct(n,[],e)}else{try{e.call()}catch(c){i=c}n.call(e.prototype)}else{try{throw Error()}catch(c){i=c}n()}}catch(c){if(c&&i&&typeof c.stack=="string"){for(var r=c.stack.split(`
`),s=i.stack.split(`
`),o=r.length-1,a=s.length-1;1<=o&&0<=a&&r[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(r[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||r[o]!==s[a]){var l=`
`+r[o].replace(" at new "," at ");return n.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",n.displayName)),l}while(1<=o&&0<=a);break}}}finally{Jb=!1,Error.prepareStackTrace=t}return(n=n?n.displayName||n.name:"")?Cp(n):""}function fH(n){switch(n.tag){case 5:return Cp(n.type);case 16:return Cp("Lazy");case 13:return Cp("Suspense");case 19:return Cp("SuspenseList");case 0:case 2:case 15:return n=Qb(n.type,!1),n;case 11:return n=Qb(n.type.render,!1),n;case 1:return n=Qb(n.type,!0),n;default:return""}}function $T(n){if(n==null)return null;if(typeof n=="function")return n.displayName||n.name||null;if(typeof n=="string")return n;switch(n){case rd:return"Fragment";case id:return"Portal";case GT:return"Profiler";case rC:return"StrictMode";case WT:return"Suspense";case qT:return"SuspenseList"}if(typeof n=="object")switch(n.$$typeof){case B3:return(n.displayName||"Context")+".Consumer";case V3:return(n._context.displayName||"Context")+".Provider";case sC:var e=n.render;return n=n.displayName,n||(n=e.displayName||e.name||"",n=n!==""?"ForwardRef("+n+")":"ForwardRef"),n;case oC:return e=n.displayName||null,e!==null?e:$T(n.type)||"Memo";case ml:e=n._payload,n=n._init;try{return $T(n(e))}catch{}}return null}function pH(n){var e=n.type;switch(n.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return n=e.render,n=n.displayName||n.name||"",e.displayName||(n!==""?"ForwardRef("+n+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return $T(e);case 8:return e===rC?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function $l(n){switch(typeof n){case"boolean":case"number":case"string":case"undefined":return n;case"object":return n;default:return""}}function H3(n){var e=n.type;return(n=n.nodeName)&&n.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function mH(n){var e=H3(n)?"checked":"value",t=Object.getOwnPropertyDescriptor(n.constructor.prototype,e),i=""+n[e];if(!n.hasOwnProperty(e)&&typeof t<"u"&&typeof t.get=="function"&&typeof t.set=="function"){var r=t.get,s=t.set;return Object.defineProperty(n,e,{configurable:!0,get:function(){return r.call(this)},set:function(o){i=""+o,s.call(this,o)}}),Object.defineProperty(n,e,{enumerable:t.enumerable}),{getValue:function(){return i},setValue:function(o){i=""+o},stopTracking:function(){n._valueTracker=null,delete n[e]}}}}function zy(n){n._valueTracker||(n._valueTracker=mH(n))}function G3(n){if(!n)return!1;var e=n._valueTracker;if(!e)return!0;var t=e.getValue(),i="";return n&&(i=H3(n)?n.checked?"true":"false":n.value),n=i,n!==t?(e.setValue(n),!0):!1}function Fx(n){if(n=n||(typeof document<"u"?document:void 0),typeof n>"u")return null;try{return n.activeElement||n.body}catch{return n.body}}function XT(n,e){var t=e.checked;return Xn({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:t??n._wrapperState.initialChecked})}function JP(n,e){var t=e.defaultValue==null?"":e.defaultValue,i=e.checked!=null?e.checked:e.defaultChecked;t=$l(e.value!=null?e.value:t),n._wrapperState={initialChecked:i,initialValue:t,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function W3(n,e){e=e.checked,e!=null&&iC(n,"checked",e,!1)}function KT(n,e){W3(n,e);var t=$l(e.value),i=e.type;if(t!=null)i==="number"?(t===0&&n.value===""||n.value!=t)&&(n.value=""+t):n.value!==""+t&&(n.value=""+t);else if(i==="submit"||i==="reset"){n.removeAttribute("value");return}e.hasOwnProperty("value")?YT(n,e.type,t):e.hasOwnProperty("defaultValue")&&YT(n,e.type,$l(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(n.defaultChecked=!!e.defaultChecked)}function QP(n,e,t){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var i=e.type;if(!(i!=="submit"&&i!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+n._wrapperState.initialValue,t||e===n.value||(n.value=e),n.defaultValue=e}t=n.name,t!==""&&(n.name=""),n.defaultChecked=!!n._wrapperState.initialChecked,t!==""&&(n.name=t)}function YT(n,e,t){(e!=="number"||Fx(n.ownerDocument)!==n)&&(t==null?n.defaultValue=""+n._wrapperState.initialValue:n.defaultValue!==""+t&&(n.defaultValue=""+t))}var Ap=Array.isArray;function Pd(n,e,t,i){if(n=n.options,e){e={};for(var r=0;r<t.length;r++)e["$"+t[r]]=!0;for(t=0;t<n.length;t++)r=e.hasOwnProperty("$"+n[t].value),n[t].selected!==r&&(n[t].selected=r),r&&i&&(n[t].defaultSelected=!0)}else{for(t=""+$l(t),e=null,r=0;r<n.length;r++){if(n[r].value===t){n[r].selected=!0,i&&(n[r].defaultSelected=!0);return}e!==null||n[r].disabled||(e=n[r])}e!==null&&(e.selected=!0)}}function JT(n,e){if(e.dangerouslySetInnerHTML!=null)throw Error(ke(91));return Xn({},e,{value:void 0,defaultValue:void 0,children:""+n._wrapperState.initialValue})}function ZP(n,e){var t=e.value;if(t==null){if(t=e.children,e=e.defaultValue,t!=null){if(e!=null)throw Error(ke(92));if(Ap(t)){if(1<t.length)throw Error(ke(93));t=t[0]}e=t}e==null&&(e=""),t=e}n._wrapperState={initialValue:$l(t)}}function q3(n,e){var t=$l(e.value),i=$l(e.defaultValue);t!=null&&(t=""+t,t!==n.value&&(n.value=t),e.defaultValue==null&&n.defaultValue!==t&&(n.defaultValue=t)),i!=null&&(n.defaultValue=""+i)}function eR(n){var e=n.textContent;e===n._wrapperState.initialValue&&e!==""&&e!==null&&(n.value=e)}function $3(n){switch(n){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function QT(n,e){return n==null||n==="http://www.w3.org/1999/xhtml"?$3(e):n==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":n}var Hy,X3=function(n){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,t,i,r){MSApp.execUnsafeLocalFunction(function(){return n(e,t,i,r)})}:n}(function(n,e){if(n.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in n)n.innerHTML=e;else{for(Hy=Hy||document.createElement("div"),Hy.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Hy.firstChild;n.firstChild;)n.removeChild(n.firstChild);for(;e.firstChild;)n.appendChild(e.firstChild)}});function ym(n,e){if(e){var t=n.firstChild;if(t&&t===n.lastChild&&t.nodeType===3){t.nodeValue=e;return}}n.textContent=e}var Bp={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},gH=["Webkit","ms","Moz","O"];Object.keys(Bp).forEach(function(n){gH.forEach(function(e){e=e+n.charAt(0).toUpperCase()+n.substring(1),Bp[e]=Bp[n]})});function K3(n,e,t){return e==null||typeof e=="boolean"||e===""?"":t||typeof e!="number"||e===0||Bp.hasOwnProperty(n)&&Bp[n]?(""+e).trim():e+"px"}function Y3(n,e){n=n.style;for(var t in e)if(e.hasOwnProperty(t)){var i=t.indexOf("--")===0,r=K3(t,e[t],i);t==="float"&&(t="cssFloat"),i?n.setProperty(t,r):n[t]=r}}var yH=Xn({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function ZT(n,e){if(e){if(yH[n]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(ke(137,n));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(ke(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(ke(61))}if(e.style!=null&&typeof e.style!="object")throw Error(ke(62))}}function eE(n,e){if(n.indexOf("-")===-1)return typeof e.is=="string";switch(n){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var tE=null;function aC(n){return n=n.target||n.srcElement||window,n.correspondingUseElement&&(n=n.correspondingUseElement),n.nodeType===3?n.parentNode:n}var nE=null,Rd=null,Nd=null;function tR(n){if(n=wg(n)){if(typeof nE!="function")throw Error(ke(280));var e=n.stateNode;e&&(e=N_(e),nE(n.stateNode,n.type,e))}}function J3(n){Rd?Nd?Nd.push(n):Nd=[n]:Rd=n}function Q3(){if(Rd){var n=Rd,e=Nd;if(Nd=Rd=null,tR(n),e)for(n=0;n<e.length;n++)tR(e[n])}}function Z3(n,e){return n(e)}function eO(){}var Zb=!1;function tO(n,e,t){if(Zb)return n(e,t);Zb=!0;try{return Z3(n,e,t)}finally{Zb=!1,(Rd!==null||Nd!==null)&&(eO(),Q3())}}function vm(n,e){var t=n.stateNode;if(t===null)return null;var i=N_(t);if(i===null)return null;t=i[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(n=n.type,i=!(n==="button"||n==="input"||n==="select"||n==="textarea")),n=!i;break e;default:n=!1}if(n)return null;if(t&&typeof t!="function")throw Error(ke(231,e,typeof t));return t}var iE=!1;if(Ma)try{var np={};Object.defineProperty(np,"passive",{get:function(){iE=!0}}),window.addEventListener("test",np,np),window.removeEventListener("test",np,np)}catch{iE=!1}function vH(n,e,t,i,r,s,o,a,l){var c=Array.prototype.slice.call(arguments,3);try{e.apply(t,c)}catch(u){this.onError(u)}}var zp=!1,Vx=null,Bx=!1,rE=null,xH={onError:function(n){zp=!0,Vx=n}};function _H(n,e,t,i,r,s,o,a,l){zp=!1,Vx=null,vH.apply(xH,arguments)}function wH(n,e,t,i,r,s,o,a,l){if(_H.apply(this,arguments),zp){if(zp){var c=Vx;zp=!1,Vx=null}else throw Error(ke(198));Bx||(Bx=!0,rE=c)}}function Yu(n){var e=n,t=n;if(n.alternate)for(;e.return;)e=e.return;else{n=e;do e=n,e.flags&4098&&(t=e.return),n=e.return;while(n)}return e.tag===3?t:null}function nO(n){if(n.tag===13){var e=n.memoizedState;if(e===null&&(n=n.alternate,n!==null&&(e=n.memoizedState)),e!==null)return e.dehydrated}return null}function nR(n){if(Yu(n)!==n)throw Error(ke(188))}function bH(n){var e=n.alternate;if(!e){if(e=Yu(n),e===null)throw Error(ke(188));return e!==n?null:n}for(var t=n,i=e;;){var r=t.return;if(r===null)break;var s=r.alternate;if(s===null){if(i=r.return,i!==null){t=i;continue}break}if(r.child===s.child){for(s=r.child;s;){if(s===t)return nR(r),n;if(s===i)return nR(r),e;s=s.sibling}throw Error(ke(188))}if(t.return!==i.return)t=r,i=s;else{for(var o=!1,a=r.child;a;){if(a===t){o=!0,t=r,i=s;break}if(a===i){o=!0,i=r,t=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===t){o=!0,t=s,i=r;break}if(a===i){o=!0,i=s,t=r;break}a=a.sibling}if(!o)throw Error(ke(189))}}if(t.alternate!==i)throw Error(ke(190))}if(t.tag!==3)throw Error(ke(188));return t.stateNode.current===t?n:e}function iO(n){return n=bH(n),n!==null?rO(n):null}function rO(n){if(n.tag===5||n.tag===6)return n;for(n=n.child;n!==null;){var e=rO(n);if(e!==null)return e;n=n.sibling}return null}var sO=bs.unstable_scheduleCallback,iR=bs.unstable_cancelCallback,SH=bs.unstable_shouldYield,TH=bs.unstable_requestPaint,li=bs.unstable_now,EH=bs.unstable_getCurrentPriorityLevel,lC=bs.unstable_ImmediatePriority,oO=bs.unstable_UserBlockingPriority,zx=bs.unstable_NormalPriority,CH=bs.unstable_LowPriority,aO=bs.unstable_IdlePriority,M_=null,Oo=null;function AH(n){if(Oo&&typeof Oo.onCommitFiberRoot=="function")try{Oo.onCommitFiberRoot(M_,n,void 0,(n.current.flags&128)===128)}catch{}}var fo=Math.clz32?Math.clz32:PH,MH=Math.log,IH=Math.LN2;function PH(n){return n>>>=0,n===0?32:31-(MH(n)/IH|0)|0}var Gy=64,Wy=4194304;function Mp(n){switch(n&-n){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return n&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return n&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return n}}function Hx(n,e){var t=n.pendingLanes;if(t===0)return 0;var i=0,r=n.suspendedLanes,s=n.pingedLanes,o=t&268435455;if(o!==0){var a=o&~r;a!==0?i=Mp(a):(s&=o,s!==0&&(i=Mp(s)))}else o=t&~r,o!==0?i=Mp(o):s!==0&&(i=Mp(s));if(i===0)return 0;if(e!==0&&e!==i&&!(e&r)&&(r=i&-i,s=e&-e,r>=s||r===16&&(s&4194240)!==0))return e;if(i&4&&(i|=t&16),e=n.entangledLanes,e!==0)for(n=n.entanglements,e&=i;0<e;)t=31-fo(e),r=1<<t,i|=n[t],e&=~r;return i}function RH(n,e){switch(n){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function NH(n,e){for(var t=n.suspendedLanes,i=n.pingedLanes,r=n.expirationTimes,s=n.pendingLanes;0<s;){var o=31-fo(s),a=1<<o,l=r[o];l===-1?(!(a&t)||a&i)&&(r[o]=RH(a,e)):l<=e&&(n.expiredLanes|=a),s&=~a}}function sE(n){return n=n.pendingLanes&-1073741825,n!==0?n:n&1073741824?1073741824:0}function lO(){var n=Gy;return Gy<<=1,!(Gy&4194240)&&(Gy=64),n}function eS(n){for(var e=[],t=0;31>t;t++)e.push(n);return e}function xg(n,e,t){n.pendingLanes|=e,e!==536870912&&(n.suspendedLanes=0,n.pingedLanes=0),n=n.eventTimes,e=31-fo(e),n[e]=t}function DH(n,e){var t=n.pendingLanes&~e;n.pendingLanes=e,n.suspendedLanes=0,n.pingedLanes=0,n.expiredLanes&=e,n.mutableReadLanes&=e,n.entangledLanes&=e,e=n.entanglements;var i=n.eventTimes;for(n=n.expirationTimes;0<t;){var r=31-fo(t),s=1<<r;e[r]=0,i[r]=-1,n[r]=-1,t&=~s}}function cC(n,e){var t=n.entangledLanes|=e;for(n=n.entanglements;t;){var i=31-fo(t),r=1<<i;r&e|n[i]&e&&(n[i]|=e),t&=~r}}var Mn=0;function cO(n){return n&=-n,1<n?4<n?n&268435455?16:536870912:4:1}var uO,uC,hO,dO,fO,oE=!1,qy=[],Nl=null,Dl=null,Ll=null,xm=new Map,_m=new Map,xl=[],LH="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function rR(n,e){switch(n){case"focusin":case"focusout":Nl=null;break;case"dragenter":case"dragleave":Dl=null;break;case"mouseover":case"mouseout":Ll=null;break;case"pointerover":case"pointerout":xm.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":_m.delete(e.pointerId)}}function ip(n,e,t,i,r,s){return n===null||n.nativeEvent!==s?(n={blockedOn:e,domEventName:t,eventSystemFlags:i,nativeEvent:s,targetContainers:[r]},e!==null&&(e=wg(e),e!==null&&uC(e)),n):(n.eventSystemFlags|=i,e=n.targetContainers,r!==null&&e.indexOf(r)===-1&&e.push(r),n)}function kH(n,e,t,i,r){switch(e){case"focusin":return Nl=ip(Nl,n,e,t,i,r),!0;case"dragenter":return Dl=ip(Dl,n,e,t,i,r),!0;case"mouseover":return Ll=ip(Ll,n,e,t,i,r),!0;case"pointerover":var s=r.pointerId;return xm.set(s,ip(xm.get(s)||null,n,e,t,i,r)),!0;case"gotpointercapture":return s=r.pointerId,_m.set(s,ip(_m.get(s)||null,n,e,t,i,r)),!0}return!1}function pO(n){var e=fu(n.target);if(e!==null){var t=Yu(e);if(t!==null){if(e=t.tag,e===13){if(e=nO(t),e!==null){n.blockedOn=e,fO(n.priority,function(){hO(t)});return}}else if(e===3&&t.stateNode.current.memoizedState.isDehydrated){n.blockedOn=t.tag===3?t.stateNode.containerInfo:null;return}}}n.blockedOn=null}function ux(n){if(n.blockedOn!==null)return!1;for(var e=n.targetContainers;0<e.length;){var t=aE(n.domEventName,n.eventSystemFlags,e[0],n.nativeEvent);if(t===null){t=n.nativeEvent;var i=new t.constructor(t.type,t);tE=i,t.target.dispatchEvent(i),tE=null}else return e=wg(t),e!==null&&uC(e),n.blockedOn=t,!1;e.shift()}return!0}function sR(n,e,t){ux(n)&&t.delete(e)}function OH(){oE=!1,Nl!==null&&ux(Nl)&&(Nl=null),Dl!==null&&ux(Dl)&&(Dl=null),Ll!==null&&ux(Ll)&&(Ll=null),xm.forEach(sR),_m.forEach(sR)}function rp(n,e){n.blockedOn===e&&(n.blockedOn=null,oE||(oE=!0,bs.unstable_scheduleCallback(bs.unstable_NormalPriority,OH)))}function wm(n){function e(r){return rp(r,n)}if(0<qy.length){rp(qy[0],n);for(var t=1;t<qy.length;t++){var i=qy[t];i.blockedOn===n&&(i.blockedOn=null)}}for(Nl!==null&&rp(Nl,n),Dl!==null&&rp(Dl,n),Ll!==null&&rp(Ll,n),xm.forEach(e),_m.forEach(e),t=0;t<xl.length;t++)i=xl[t],i.blockedOn===n&&(i.blockedOn=null);for(;0<xl.length&&(t=xl[0],t.blockedOn===null);)pO(t),t.blockedOn===null&&xl.shift()}var Dd=Ba.ReactCurrentBatchConfig,Gx=!0;function UH(n,e,t,i){var r=Mn,s=Dd.transition;Dd.transition=null;try{Mn=1,hC(n,e,t,i)}finally{Mn=r,Dd.transition=s}}function jH(n,e,t,i){var r=Mn,s=Dd.transition;Dd.transition=null;try{Mn=4,hC(n,e,t,i)}finally{Mn=r,Dd.transition=s}}function hC(n,e,t,i){if(Gx){var r=aE(n,e,t,i);if(r===null)uS(n,e,i,Wx,t),rR(n,i);else if(kH(r,n,e,t,i))i.stopPropagation();else if(rR(n,i),e&4&&-1<LH.indexOf(n)){for(;r!==null;){var s=wg(r);if(s!==null&&uO(s),s=aE(n,e,t,i),s===null&&uS(n,e,i,Wx,t),s===r)break;r=s}r!==null&&i.stopPropagation()}else uS(n,e,i,null,t)}}var Wx=null;function aE(n,e,t,i){if(Wx=null,n=aC(i),n=fu(n),n!==null)if(e=Yu(n),e===null)n=null;else if(t=e.tag,t===13){if(n=nO(e),n!==null)return n;n=null}else if(t===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;n=null}else e!==n&&(n=null);return Wx=n,null}function mO(n){switch(n){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(EH()){case lC:return 1;case oO:return 4;case zx:case CH:return 16;case aO:return 536870912;default:return 16}default:return 16}}var Al=null,dC=null,hx=null;function gO(){if(hx)return hx;var n,e=dC,t=e.length,i,r="value"in Al?Al.value:Al.textContent,s=r.length;for(n=0;n<t&&e[n]===r[n];n++);var o=t-n;for(i=1;i<=o&&e[t-i]===r[s-i];i++);return hx=r.slice(n,1<i?1-i:void 0)}function dx(n){var e=n.keyCode;return"charCode"in n?(n=n.charCode,n===0&&e===13&&(n=13)):n=e,n===10&&(n=13),32<=n||n===13?n:0}function $y(){return!0}function oR(){return!1}function Cs(n){function e(t,i,r,s,o){this._reactName=t,this._targetInst=r,this.type=i,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in n)n.hasOwnProperty(a)&&(t=n[a],this[a]=t?t(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?$y:oR,this.isPropagationStopped=oR,this}return Xn(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var t=this.nativeEvent;t&&(t.preventDefault?t.preventDefault():typeof t.returnValue!="unknown"&&(t.returnValue=!1),this.isDefaultPrevented=$y)},stopPropagation:function(){var t=this.nativeEvent;t&&(t.stopPropagation?t.stopPropagation():typeof t.cancelBubble!="unknown"&&(t.cancelBubble=!0),this.isPropagationStopped=$y)},persist:function(){},isPersistent:$y}),e}var ff={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(n){return n.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},fC=Cs(ff),_g=Xn({},ff,{view:0,detail:0}),FH=Cs(_g),tS,nS,sp,I_=Xn({},_g,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:pC,button:0,buttons:0,relatedTarget:function(n){return n.relatedTarget===void 0?n.fromElement===n.srcElement?n.toElement:n.fromElement:n.relatedTarget},movementX:function(n){return"movementX"in n?n.movementX:(n!==sp&&(sp&&n.type==="mousemove"?(tS=n.screenX-sp.screenX,nS=n.screenY-sp.screenY):nS=tS=0,sp=n),tS)},movementY:function(n){return"movementY"in n?n.movementY:nS}}),aR=Cs(I_),VH=Xn({},I_,{dataTransfer:0}),BH=Cs(VH),zH=Xn({},_g,{relatedTarget:0}),iS=Cs(zH),HH=Xn({},ff,{animationName:0,elapsedTime:0,pseudoElement:0}),GH=Cs(HH),WH=Xn({},ff,{clipboardData:function(n){return"clipboardData"in n?n.clipboardData:window.clipboardData}}),qH=Cs(WH),$H=Xn({},ff,{data:0}),lR=Cs($H),XH={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},KH={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},YH={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function JH(n){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(n):(n=YH[n])?!!e[n]:!1}function pC(){return JH}var QH=Xn({},_g,{key:function(n){if(n.key){var e=XH[n.key]||n.key;if(e!=="Unidentified")return e}return n.type==="keypress"?(n=dx(n),n===13?"Enter":String.fromCharCode(n)):n.type==="keydown"||n.type==="keyup"?KH[n.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:pC,charCode:function(n){return n.type==="keypress"?dx(n):0},keyCode:function(n){return n.type==="keydown"||n.type==="keyup"?n.keyCode:0},which:function(n){return n.type==="keypress"?dx(n):n.type==="keydown"||n.type==="keyup"?n.keyCode:0}}),ZH=Cs(QH),eG=Xn({},I_,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),cR=Cs(eG),tG=Xn({},_g,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:pC}),nG=Cs(tG),iG=Xn({},ff,{propertyName:0,elapsedTime:0,pseudoElement:0}),rG=Cs(iG),sG=Xn({},I_,{deltaX:function(n){return"deltaX"in n?n.deltaX:"wheelDeltaX"in n?-n.wheelDeltaX:0},deltaY:function(n){return"deltaY"in n?n.deltaY:"wheelDeltaY"in n?-n.wheelDeltaY:"wheelDelta"in n?-n.wheelDelta:0},deltaZ:0,deltaMode:0}),oG=Cs(sG),aG=[9,13,27,32],mC=Ma&&"CompositionEvent"in window,Hp=null;Ma&&"documentMode"in document&&(Hp=document.documentMode);var lG=Ma&&"TextEvent"in window&&!Hp,yO=Ma&&(!mC||Hp&&8<Hp&&11>=Hp),uR=" ",hR=!1;function vO(n,e){switch(n){case"keyup":return aG.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function xO(n){return n=n.detail,typeof n=="object"&&"data"in n?n.data:null}var sd=!1;function cG(n,e){switch(n){case"compositionend":return xO(e);case"keypress":return e.which!==32?null:(hR=!0,uR);case"textInput":return n=e.data,n===uR&&hR?null:n;default:return null}}function uG(n,e){if(sd)return n==="compositionend"||!mC&&vO(n,e)?(n=gO(),hx=dC=Al=null,sd=!1,n):null;switch(n){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return yO&&e.locale!=="ko"?null:e.data;default:return null}}var hG={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function dR(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e==="input"?!!hG[n.type]:e==="textarea"}function _O(n,e,t,i){J3(i),e=qx(e,"onChange"),0<e.length&&(t=new fC("onChange","change",null,t,i),n.push({event:t,listeners:e}))}var Gp=null,bm=null;function dG(n){RO(n,0)}function P_(n){var e=ld(n);if(G3(e))return n}function fG(n,e){if(n==="change")return e}var wO=!1;if(Ma){var rS;if(Ma){var sS="oninput"in document;if(!sS){var fR=document.createElement("div");fR.setAttribute("oninput","return;"),sS=typeof fR.oninput=="function"}rS=sS}else rS=!1;wO=rS&&(!document.documentMode||9<document.documentMode)}function pR(){Gp&&(Gp.detachEvent("onpropertychange",bO),bm=Gp=null)}function bO(n){if(n.propertyName==="value"&&P_(bm)){var e=[];_O(e,bm,n,aC(n)),tO(dG,e)}}function pG(n,e,t){n==="focusin"?(pR(),Gp=e,bm=t,Gp.attachEvent("onpropertychange",bO)):n==="focusout"&&pR()}function mG(n){if(n==="selectionchange"||n==="keyup"||n==="keydown")return P_(bm)}function gG(n,e){if(n==="click")return P_(e)}function yG(n,e){if(n==="input"||n==="change")return P_(e)}function vG(n,e){return n===e&&(n!==0||1/n===1/e)||n!==n&&e!==e}var go=typeof Object.is=="function"?Object.is:vG;function Sm(n,e){if(go(n,e))return!0;if(typeof n!="object"||n===null||typeof e!="object"||e===null)return!1;var t=Object.keys(n),i=Object.keys(e);if(t.length!==i.length)return!1;for(i=0;i<t.length;i++){var r=t[i];if(!HT.call(e,r)||!go(n[r],e[r]))return!1}return!0}function mR(n){for(;n&&n.firstChild;)n=n.firstChild;return n}function gR(n,e){var t=mR(n);n=0;for(var i;t;){if(t.nodeType===3){if(i=n+t.textContent.length,n<=e&&i>=e)return{node:t,offset:e-n};n=i}e:{for(;t;){if(t.nextSibling){t=t.nextSibling;break e}t=t.parentNode}t=void 0}t=mR(t)}}function SO(n,e){return n&&e?n===e?!0:n&&n.nodeType===3?!1:e&&e.nodeType===3?SO(n,e.parentNode):"contains"in n?n.contains(e):n.compareDocumentPosition?!!(n.compareDocumentPosition(e)&16):!1:!1}function TO(){for(var n=window,e=Fx();e instanceof n.HTMLIFrameElement;){try{var t=typeof e.contentWindow.location.href=="string"}catch{t=!1}if(t)n=e.contentWindow;else break;e=Fx(n.document)}return e}function gC(n){var e=n&&n.nodeName&&n.nodeName.toLowerCase();return e&&(e==="input"&&(n.type==="text"||n.type==="search"||n.type==="tel"||n.type==="url"||n.type==="password")||e==="textarea"||n.contentEditable==="true")}function xG(n){var e=TO(),t=n.focusedElem,i=n.selectionRange;if(e!==t&&t&&t.ownerDocument&&SO(t.ownerDocument.documentElement,t)){if(i!==null&&gC(t)){if(e=i.start,n=i.end,n===void 0&&(n=e),"selectionStart"in t)t.selectionStart=e,t.selectionEnd=Math.min(n,t.value.length);else if(n=(e=t.ownerDocument||document)&&e.defaultView||window,n.getSelection){n=n.getSelection();var r=t.textContent.length,s=Math.min(i.start,r);i=i.end===void 0?s:Math.min(i.end,r),!n.extend&&s>i&&(r=i,i=s,s=r),r=gR(t,s);var o=gR(t,i);r&&o&&(n.rangeCount!==1||n.anchorNode!==r.node||n.anchorOffset!==r.offset||n.focusNode!==o.node||n.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(r.node,r.offset),n.removeAllRanges(),s>i?(n.addRange(e),n.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),n.addRange(e)))}}for(e=[],n=t;n=n.parentNode;)n.nodeType===1&&e.push({element:n,left:n.scrollLeft,top:n.scrollTop});for(typeof t.focus=="function"&&t.focus(),t=0;t<e.length;t++)n=e[t],n.element.scrollLeft=n.left,n.element.scrollTop=n.top}}var _G=Ma&&"documentMode"in document&&11>=document.documentMode,od=null,lE=null,Wp=null,cE=!1;function yR(n,e,t){var i=t.window===t?t.document:t.nodeType===9?t:t.ownerDocument;cE||od==null||od!==Fx(i)||(i=od,"selectionStart"in i&&gC(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),Wp&&Sm(Wp,i)||(Wp=i,i=qx(lE,"onSelect"),0<i.length&&(e=new fC("onSelect","select",null,e,t),n.push({event:e,listeners:i}),e.target=od)))}function Xy(n,e){var t={};return t[n.toLowerCase()]=e.toLowerCase(),t["Webkit"+n]="webkit"+e,t["Moz"+n]="moz"+e,t}var ad={animationend:Xy("Animation","AnimationEnd"),animationiteration:Xy("Animation","AnimationIteration"),animationstart:Xy("Animation","AnimationStart"),transitionend:Xy("Transition","TransitionEnd")},oS={},EO={};Ma&&(EO=document.createElement("div").style,"AnimationEvent"in window||(delete ad.animationend.animation,delete ad.animationiteration.animation,delete ad.animationstart.animation),"TransitionEvent"in window||delete ad.transitionend.transition);function R_(n){if(oS[n])return oS[n];if(!ad[n])return n;var e=ad[n],t;for(t in e)if(e.hasOwnProperty(t)&&t in EO)return oS[n]=e[t];return n}var CO=R_("animationend"),AO=R_("animationiteration"),MO=R_("animationstart"),IO=R_("transitionend"),PO=new Map,vR="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function cc(n,e){PO.set(n,e),Ku(e,[n])}for(var aS=0;aS<vR.length;aS++){var lS=vR[aS],wG=lS.toLowerCase(),bG=lS[0].toUpperCase()+lS.slice(1);cc(wG,"on"+bG)}cc(CO,"onAnimationEnd");cc(AO,"onAnimationIteration");cc(MO,"onAnimationStart");cc("dblclick","onDoubleClick");cc("focusin","onFocus");cc("focusout","onBlur");cc(IO,"onTransitionEnd");zd("onMouseEnter",["mouseout","mouseover"]);zd("onMouseLeave",["mouseout","mouseover"]);zd("onPointerEnter",["pointerout","pointerover"]);zd("onPointerLeave",["pointerout","pointerover"]);Ku("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Ku("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Ku("onBeforeInput",["compositionend","keypress","textInput","paste"]);Ku("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Ku("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Ku("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ip="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),SG=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ip));function xR(n,e,t){var i=n.type||"unknown-event";n.currentTarget=t,wH(i,e,void 0,n),n.currentTarget=null}function RO(n,e){e=(e&4)!==0;for(var t=0;t<n.length;t++){var i=n[t],r=i.event;i=i.listeners;e:{var s=void 0;if(e)for(var o=i.length-1;0<=o;o--){var a=i[o],l=a.instance,c=a.currentTarget;if(a=a.listener,l!==s&&r.isPropagationStopped())break e;xR(r,a,c),s=l}else for(o=0;o<i.length;o++){if(a=i[o],l=a.instance,c=a.currentTarget,a=a.listener,l!==s&&r.isPropagationStopped())break e;xR(r,a,c),s=l}}}if(Bx)throw n=rE,Bx=!1,rE=null,n}function kn(n,e){var t=e[pE];t===void 0&&(t=e[pE]=new Set);var i=n+"__bubble";t.has(i)||(NO(e,n,2,!1),t.add(i))}function cS(n,e,t){var i=0;e&&(i|=4),NO(t,n,i,e)}var Ky="_reactListening"+Math.random().toString(36).slice(2);function Tm(n){if(!n[Ky]){n[Ky]=!0,F3.forEach(function(t){t!=="selectionchange"&&(SG.has(t)||cS(t,!1,n),cS(t,!0,n))});var e=n.nodeType===9?n:n.ownerDocument;e===null||e[Ky]||(e[Ky]=!0,cS("selectionchange",!1,e))}}function NO(n,e,t,i){switch(mO(e)){case 1:var r=UH;break;case 4:r=jH;break;default:r=hC}t=r.bind(null,e,t,n),r=void 0,!iE||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(r=!0),i?r!==void 0?n.addEventListener(e,t,{capture:!0,passive:r}):n.addEventListener(e,t,!0):r!==void 0?n.addEventListener(e,t,{passive:r}):n.addEventListener(e,t,!1)}function uS(n,e,t,i,r){var s=i;if(!(e&1)&&!(e&2)&&i!==null)e:for(;;){if(i===null)return;var o=i.tag;if(o===3||o===4){var a=i.stateNode.containerInfo;if(a===r||a.nodeType===8&&a.parentNode===r)break;if(o===4)for(o=i.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===r||l.nodeType===8&&l.parentNode===r))return;o=o.return}for(;a!==null;){if(o=fu(a),o===null)return;if(l=o.tag,l===5||l===6){i=s=o;continue e}a=a.parentNode}}i=i.return}tO(function(){var c=s,u=aC(t),p=[];e:{var m=PO.get(n);if(m!==void 0){var g=fC,x=n;switch(n){case"keypress":if(dx(t)===0)break e;case"keydown":case"keyup":g=ZH;break;case"focusin":x="focus",g=iS;break;case"focusout":x="blur",g=iS;break;case"beforeblur":case"afterblur":g=iS;break;case"click":if(t.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":g=aR;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":g=BH;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":g=nG;break;case CO:case AO:case MO:g=GH;break;case IO:g=rG;break;case"scroll":g=FH;break;case"wheel":g=oG;break;case"copy":case"cut":case"paste":g=qH;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":g=cR}var b=(e&4)!==0,w=!b&&n==="scroll",v=b?m!==null?m+"Capture":null:m;b=[];for(var S=c,E;S!==null;){E=S;var C=E.stateNode;if(E.tag===5&&C!==null&&(E=C,v!==null&&(C=vm(S,v),C!=null&&b.push(Em(S,C,E)))),w)break;S=S.return}0<b.length&&(m=new g(m,x,null,t,u),p.push({event:m,listeners:b}))}}if(!(e&7)){e:{if(m=n==="mouseover"||n==="pointerover",g=n==="mouseout"||n==="pointerout",m&&t!==tE&&(x=t.relatedTarget||t.fromElement)&&(fu(x)||x[Ia]))break e;if((g||m)&&(m=u.window===u?u:(m=u.ownerDocument)?m.defaultView||m.parentWindow:window,g?(x=t.relatedTarget||t.toElement,g=c,x=x?fu(x):null,x!==null&&(w=Yu(x),x!==w||x.tag!==5&&x.tag!==6)&&(x=null)):(g=null,x=c),g!==x)){if(b=aR,C="onMouseLeave",v="onMouseEnter",S="mouse",(n==="pointerout"||n==="pointerover")&&(b=cR,C="onPointerLeave",v="onPointerEnter",S="pointer"),w=g==null?m:ld(g),E=x==null?m:ld(x),m=new b(C,S+"leave",g,t,u),m.target=w,m.relatedTarget=E,C=null,fu(u)===c&&(b=new b(v,S+"enter",x,t,u),b.target=E,b.relatedTarget=w,C=b),w=C,g&&x)t:{for(b=g,v=x,S=0,E=b;E;E=Ih(E))S++;for(E=0,C=v;C;C=Ih(C))E++;for(;0<S-E;)b=Ih(b),S--;for(;0<E-S;)v=Ih(v),E--;for(;S--;){if(b===v||v!==null&&b===v.alternate)break t;b=Ih(b),v=Ih(v)}b=null}else b=null;g!==null&&_R(p,m,g,b,!1),x!==null&&w!==null&&_R(p,w,x,b,!0)}}e:{if(m=c?ld(c):window,g=m.nodeName&&m.nodeName.toLowerCase(),g==="select"||g==="input"&&m.type==="file")var U=fG;else if(dR(m))if(wO)U=yG;else{U=mG;var O=pG}else(g=m.nodeName)&&g.toLowerCase()==="input"&&(m.type==="checkbox"||m.type==="radio")&&(U=gG);if(U&&(U=U(n,c))){_O(p,U,t,u);break e}O&&O(n,m,c),n==="focusout"&&(O=m._wrapperState)&&O.controlled&&m.type==="number"&&YT(m,"number",m.value)}switch(O=c?ld(c):window,n){case"focusin":(dR(O)||O.contentEditable==="true")&&(od=O,lE=c,Wp=null);break;case"focusout":Wp=lE=od=null;break;case"mousedown":cE=!0;break;case"contextmenu":case"mouseup":case"dragend":cE=!1,yR(p,t,u);break;case"selectionchange":if(_G)break;case"keydown":case"keyup":yR(p,t,u)}var N;if(mC)e:{switch(n){case"compositionstart":var P="onCompositionStart";break e;case"compositionend":P="onCompositionEnd";break e;case"compositionupdate":P="onCompositionUpdate";break e}P=void 0}else sd?vO(n,t)&&(P="onCompositionEnd"):n==="keydown"&&t.keyCode===229&&(P="onCompositionStart");P&&(yO&&t.locale!=="ko"&&(sd||P!=="onCompositionStart"?P==="onCompositionEnd"&&sd&&(N=gO()):(Al=u,dC="value"in Al?Al.value:Al.textContent,sd=!0)),O=qx(c,P),0<O.length&&(P=new lR(P,n,null,t,u),p.push({event:P,listeners:O}),N?P.data=N:(N=xO(t),N!==null&&(P.data=N)))),(N=lG?cG(n,t):uG(n,t))&&(c=qx(c,"onBeforeInput"),0<c.length&&(u=new lR("onBeforeInput","beforeinput",null,t,u),p.push({event:u,listeners:c}),u.data=N))}RO(p,e)})}function Em(n,e,t){return{instance:n,listener:e,currentTarget:t}}function qx(n,e){for(var t=e+"Capture",i=[];n!==null;){var r=n,s=r.stateNode;r.tag===5&&s!==null&&(r=s,s=vm(n,t),s!=null&&i.unshift(Em(n,s,r)),s=vm(n,e),s!=null&&i.push(Em(n,s,r))),n=n.return}return i}function Ih(n){if(n===null)return null;do n=n.return;while(n&&n.tag!==5);return n||null}function _R(n,e,t,i,r){for(var s=e._reactName,o=[];t!==null&&t!==i;){var a=t,l=a.alternate,c=a.stateNode;if(l!==null&&l===i)break;a.tag===5&&c!==null&&(a=c,r?(l=vm(t,s),l!=null&&o.unshift(Em(t,l,a))):r||(l=vm(t,s),l!=null&&o.push(Em(t,l,a)))),t=t.return}o.length!==0&&n.push({event:e,listeners:o})}var TG=/\r\n?/g,EG=/\u0000|\uFFFD/g;function wR(n){return(typeof n=="string"?n:""+n).replace(TG,`
`).replace(EG,"")}function Yy(n,e,t){if(e=wR(e),wR(n)!==e&&t)throw Error(ke(425))}function $x(){}var uE=null,hE=null;function dE(n,e){return n==="textarea"||n==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var fE=typeof setTimeout=="function"?setTimeout:void 0,CG=typeof clearTimeout=="function"?clearTimeout:void 0,bR=typeof Promise=="function"?Promise:void 0,AG=typeof queueMicrotask=="function"?queueMicrotask:typeof bR<"u"?function(n){return bR.resolve(null).then(n).catch(MG)}:fE;function MG(n){setTimeout(function(){throw n})}function hS(n,e){var t=e,i=0;do{var r=t.nextSibling;if(n.removeChild(t),r&&r.nodeType===8)if(t=r.data,t==="/$"){if(i===0){n.removeChild(r),wm(e);return}i--}else t!=="$"&&t!=="$?"&&t!=="$!"||i++;t=r}while(t);wm(e)}function kl(n){for(;n!=null;n=n.nextSibling){var e=n.nodeType;if(e===1||e===3)break;if(e===8){if(e=n.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return n}function SR(n){n=n.previousSibling;for(var e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="$"||t==="$!"||t==="$?"){if(e===0)return n;e--}else t==="/$"&&e++}n=n.previousSibling}return null}var pf=Math.random().toString(36).slice(2),No="__reactFiber$"+pf,Cm="__reactProps$"+pf,Ia="__reactContainer$"+pf,pE="__reactEvents$"+pf,IG="__reactListeners$"+pf,PG="__reactHandles$"+pf;function fu(n){var e=n[No];if(e)return e;for(var t=n.parentNode;t;){if(e=t[Ia]||t[No]){if(t=e.alternate,e.child!==null||t!==null&&t.child!==null)for(n=SR(n);n!==null;){if(t=n[No])return t;n=SR(n)}return e}n=t,t=n.parentNode}return null}function wg(n){return n=n[No]||n[Ia],!n||n.tag!==5&&n.tag!==6&&n.tag!==13&&n.tag!==3?null:n}function ld(n){if(n.tag===5||n.tag===6)return n.stateNode;throw Error(ke(33))}function N_(n){return n[Cm]||null}var mE=[],cd=-1;function uc(n){return{current:n}}function jn(n){0>cd||(n.current=mE[cd],mE[cd]=null,cd--)}function Ln(n,e){cd++,mE[cd]=n.current,n.current=e}var Xl={},wr=uc(Xl),Zr=uc(!1),Ru=Xl;function Hd(n,e){var t=n.type.contextTypes;if(!t)return Xl;var i=n.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===e)return i.__reactInternalMemoizedMaskedChildContext;var r={},s;for(s in t)r[s]=e[s];return i&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=e,n.__reactInternalMemoizedMaskedChildContext=r),r}function es(n){return n=n.childContextTypes,n!=null}function Xx(){jn(Zr),jn(wr)}function TR(n,e,t){if(wr.current!==Xl)throw Error(ke(168));Ln(wr,e),Ln(Zr,t)}function DO(n,e,t){var i=n.stateNode;if(e=e.childContextTypes,typeof i.getChildContext!="function")return t;i=i.getChildContext();for(var r in i)if(!(r in e))throw Error(ke(108,pH(n)||"Unknown",r));return Xn({},t,i)}function Kx(n){return n=(n=n.stateNode)&&n.__reactInternalMemoizedMergedChildContext||Xl,Ru=wr.current,Ln(wr,n),Ln(Zr,Zr.current),!0}function ER(n,e,t){var i=n.stateNode;if(!i)throw Error(ke(169));t?(n=DO(n,e,Ru),i.__reactInternalMemoizedMergedChildContext=n,jn(Zr),jn(wr),Ln(wr,n)):jn(Zr),Ln(Zr,t)}var da=null,D_=!1,dS=!1;function LO(n){da===null?da=[n]:da.push(n)}function RG(n){D_=!0,LO(n)}function hc(){if(!dS&&da!==null){dS=!0;var n=0,e=Mn;try{var t=da;for(Mn=1;n<t.length;n++){var i=t[n];do i=i(!0);while(i!==null)}da=null,D_=!1}catch(r){throw da!==null&&(da=da.slice(n+1)),sO(lC,hc),r}finally{Mn=e,dS=!1}}return null}var ud=[],hd=0,Yx=null,Jx=0,Vs=[],Bs=0,Nu=null,ma=1,ga="";function ru(n,e){ud[hd++]=Jx,ud[hd++]=Yx,Yx=n,Jx=e}function kO(n,e,t){Vs[Bs++]=ma,Vs[Bs++]=ga,Vs[Bs++]=Nu,Nu=n;var i=ma;n=ga;var r=32-fo(i)-1;i&=~(1<<r),t+=1;var s=32-fo(e)+r;if(30<s){var o=r-r%5;s=(i&(1<<o)-1).toString(32),i>>=o,r-=o,ma=1<<32-fo(e)+r|t<<r|i,ga=s+n}else ma=1<<s|t<<r|i,ga=n}function yC(n){n.return!==null&&(ru(n,1),kO(n,1,0))}function vC(n){for(;n===Yx;)Yx=ud[--hd],ud[hd]=null,Jx=ud[--hd],ud[hd]=null;for(;n===Nu;)Nu=Vs[--Bs],Vs[Bs]=null,ga=Vs[--Bs],Vs[Bs]=null,ma=Vs[--Bs],Vs[Bs]=null}var vs=null,gs=null,zn=!1,lo=null;function OO(n,e){var t=Hs(5,null,null,0);t.elementType="DELETED",t.stateNode=e,t.return=n,e=n.deletions,e===null?(n.deletions=[t],n.flags|=16):e.push(t)}function CR(n,e){switch(n.tag){case 5:var t=n.type;return e=e.nodeType!==1||t.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(n.stateNode=e,vs=n,gs=kl(e.firstChild),!0):!1;case 6:return e=n.pendingProps===""||e.nodeType!==3?null:e,e!==null?(n.stateNode=e,vs=n,gs=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(t=Nu!==null?{id:ma,overflow:ga}:null,n.memoizedState={dehydrated:e,treeContext:t,retryLane:1073741824},t=Hs(18,null,null,0),t.stateNode=e,t.return=n,n.child=t,vs=n,gs=null,!0):!1;default:return!1}}function gE(n){return(n.mode&1)!==0&&(n.flags&128)===0}function yE(n){if(zn){var e=gs;if(e){var t=e;if(!CR(n,e)){if(gE(n))throw Error(ke(418));e=kl(t.nextSibling);var i=vs;e&&CR(n,e)?OO(i,t):(n.flags=n.flags&-4097|2,zn=!1,vs=n)}}else{if(gE(n))throw Error(ke(418));n.flags=n.flags&-4097|2,zn=!1,vs=n}}}function AR(n){for(n=n.return;n!==null&&n.tag!==5&&n.tag!==3&&n.tag!==13;)n=n.return;vs=n}function Jy(n){if(n!==vs)return!1;if(!zn)return AR(n),zn=!0,!1;var e;if((e=n.tag!==3)&&!(e=n.tag!==5)&&(e=n.type,e=e!=="head"&&e!=="body"&&!dE(n.type,n.memoizedProps)),e&&(e=gs)){if(gE(n))throw UO(),Error(ke(418));for(;e;)OO(n,e),e=kl(e.nextSibling)}if(AR(n),n.tag===13){if(n=n.memoizedState,n=n!==null?n.dehydrated:null,!n)throw Error(ke(317));e:{for(n=n.nextSibling,e=0;n;){if(n.nodeType===8){var t=n.data;if(t==="/$"){if(e===0){gs=kl(n.nextSibling);break e}e--}else t!=="$"&&t!=="$!"&&t!=="$?"||e++}n=n.nextSibling}gs=null}}else gs=vs?kl(n.stateNode.nextSibling):null;return!0}function UO(){for(var n=gs;n;)n=kl(n.nextSibling)}function Gd(){gs=vs=null,zn=!1}function xC(n){lo===null?lo=[n]:lo.push(n)}var NG=Ba.ReactCurrentBatchConfig;function op(n,e,t){if(n=t.ref,n!==null&&typeof n!="function"&&typeof n!="object"){if(t._owner){if(t=t._owner,t){if(t.tag!==1)throw Error(ke(309));var i=t.stateNode}if(!i)throw Error(ke(147,n));var r=i,s=""+n;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=r.refs;o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof n!="string")throw Error(ke(284));if(!t._owner)throw Error(ke(290,n))}return n}function Qy(n,e){throw n=Object.prototype.toString.call(e),Error(ke(31,n==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":n))}function MR(n){var e=n._init;return e(n._payload)}function jO(n){function e(v,S){if(n){var E=v.deletions;E===null?(v.deletions=[S],v.flags|=16):E.push(S)}}function t(v,S){if(!n)return null;for(;S!==null;)e(v,S),S=S.sibling;return null}function i(v,S){for(v=new Map;S!==null;)S.key!==null?v.set(S.key,S):v.set(S.index,S),S=S.sibling;return v}function r(v,S){return v=Fl(v,S),v.index=0,v.sibling=null,v}function s(v,S,E){return v.index=E,n?(E=v.alternate,E!==null?(E=E.index,E<S?(v.flags|=2,S):E):(v.flags|=2,S)):(v.flags|=1048576,S)}function o(v){return n&&v.alternate===null&&(v.flags|=2),v}function a(v,S,E,C){return S===null||S.tag!==6?(S=xS(E,v.mode,C),S.return=v,S):(S=r(S,E),S.return=v,S)}function l(v,S,E,C){var U=E.type;return U===rd?u(v,S,E.props.children,C,E.key):S!==null&&(S.elementType===U||typeof U=="object"&&U!==null&&U.$$typeof===ml&&MR(U)===S.type)?(C=r(S,E.props),C.ref=op(v,S,E),C.return=v,C):(C=xx(E.type,E.key,E.props,null,v.mode,C),C.ref=op(v,S,E),C.return=v,C)}function c(v,S,E,C){return S===null||S.tag!==4||S.stateNode.containerInfo!==E.containerInfo||S.stateNode.implementation!==E.implementation?(S=_S(E,v.mode,C),S.return=v,S):(S=r(S,E.children||[]),S.return=v,S)}function u(v,S,E,C,U){return S===null||S.tag!==7?(S=bu(E,v.mode,C,U),S.return=v,S):(S=r(S,E),S.return=v,S)}function p(v,S,E){if(typeof S=="string"&&S!==""||typeof S=="number")return S=xS(""+S,v.mode,E),S.return=v,S;if(typeof S=="object"&&S!==null){switch(S.$$typeof){case By:return E=xx(S.type,S.key,S.props,null,v.mode,E),E.ref=op(v,null,S),E.return=v,E;case id:return S=_S(S,v.mode,E),S.return=v,S;case ml:var C=S._init;return p(v,C(S._payload),E)}if(Ap(S)||tp(S))return S=bu(S,v.mode,E,null),S.return=v,S;Qy(v,S)}return null}function m(v,S,E,C){var U=S!==null?S.key:null;if(typeof E=="string"&&E!==""||typeof E=="number")return U!==null?null:a(v,S,""+E,C);if(typeof E=="object"&&E!==null){switch(E.$$typeof){case By:return E.key===U?l(v,S,E,C):null;case id:return E.key===U?c(v,S,E,C):null;case ml:return U=E._init,m(v,S,U(E._payload),C)}if(Ap(E)||tp(E))return U!==null?null:u(v,S,E,C,null);Qy(v,E)}return null}function g(v,S,E,C,U){if(typeof C=="string"&&C!==""||typeof C=="number")return v=v.get(E)||null,a(S,v,""+C,U);if(typeof C=="object"&&C!==null){switch(C.$$typeof){case By:return v=v.get(C.key===null?E:C.key)||null,l(S,v,C,U);case id:return v=v.get(C.key===null?E:C.key)||null,c(S,v,C,U);case ml:var O=C._init;return g(v,S,E,O(C._payload),U)}if(Ap(C)||tp(C))return v=v.get(E)||null,u(S,v,C,U,null);Qy(S,C)}return null}function x(v,S,E,C){for(var U=null,O=null,N=S,P=S=0,A=null;N!==null&&P<E.length;P++){N.index>P?(A=N,N=null):A=N.sibling;var M=m(v,N,E[P],C);if(M===null){N===null&&(N=A);break}n&&N&&M.alternate===null&&e(v,N),S=s(M,S,P),O===null?U=M:O.sibling=M,O=M,N=A}if(P===E.length)return t(v,N),zn&&ru(v,P),U;if(N===null){for(;P<E.length;P++)N=p(v,E[P],C),N!==null&&(S=s(N,S,P),O===null?U=N:O.sibling=N,O=N);return zn&&ru(v,P),U}for(N=i(v,N);P<E.length;P++)A=g(N,v,P,E[P],C),A!==null&&(n&&A.alternate!==null&&N.delete(A.key===null?P:A.key),S=s(A,S,P),O===null?U=A:O.sibling=A,O=A);return n&&N.forEach(function(D){return e(v,D)}),zn&&ru(v,P),U}function b(v,S,E,C){var U=tp(E);if(typeof U!="function")throw Error(ke(150));if(E=U.call(E),E==null)throw Error(ke(151));for(var O=U=null,N=S,P=S=0,A=null,M=E.next();N!==null&&!M.done;P++,M=E.next()){N.index>P?(A=N,N=null):A=N.sibling;var D=m(v,N,M.value,C);if(D===null){N===null&&(N=A);break}n&&N&&D.alternate===null&&e(v,N),S=s(D,S,P),O===null?U=D:O.sibling=D,O=D,N=A}if(M.done)return t(v,N),zn&&ru(v,P),U;if(N===null){for(;!M.done;P++,M=E.next())M=p(v,M.value,C),M!==null&&(S=s(M,S,P),O===null?U=M:O.sibling=M,O=M);return zn&&ru(v,P),U}for(N=i(v,N);!M.done;P++,M=E.next())M=g(N,v,P,M.value,C),M!==null&&(n&&M.alternate!==null&&N.delete(M.key===null?P:M.key),S=s(M,S,P),O===null?U=M:O.sibling=M,O=M);return n&&N.forEach(function(z){return e(v,z)}),zn&&ru(v,P),U}function w(v,S,E,C){if(typeof E=="object"&&E!==null&&E.type===rd&&E.key===null&&(E=E.props.children),typeof E=="object"&&E!==null){switch(E.$$typeof){case By:e:{for(var U=E.key,O=S;O!==null;){if(O.key===U){if(U=E.type,U===rd){if(O.tag===7){t(v,O.sibling),S=r(O,E.props.children),S.return=v,v=S;break e}}else if(O.elementType===U||typeof U=="object"&&U!==null&&U.$$typeof===ml&&MR(U)===O.type){t(v,O.sibling),S=r(O,E.props),S.ref=op(v,O,E),S.return=v,v=S;break e}t(v,O);break}else e(v,O);O=O.sibling}E.type===rd?(S=bu(E.props.children,v.mode,C,E.key),S.return=v,v=S):(C=xx(E.type,E.key,E.props,null,v.mode,C),C.ref=op(v,S,E),C.return=v,v=C)}return o(v);case id:e:{for(O=E.key;S!==null;){if(S.key===O)if(S.tag===4&&S.stateNode.containerInfo===E.containerInfo&&S.stateNode.implementation===E.implementation){t(v,S.sibling),S=r(S,E.children||[]),S.return=v,v=S;break e}else{t(v,S);break}else e(v,S);S=S.sibling}S=_S(E,v.mode,C),S.return=v,v=S}return o(v);case ml:return O=E._init,w(v,S,O(E._payload),C)}if(Ap(E))return x(v,S,E,C);if(tp(E))return b(v,S,E,C);Qy(v,E)}return typeof E=="string"&&E!==""||typeof E=="number"?(E=""+E,S!==null&&S.tag===6?(t(v,S.sibling),S=r(S,E),S.return=v,v=S):(t(v,S),S=xS(E,v.mode,C),S.return=v,v=S),o(v)):t(v,S)}return w}var Wd=jO(!0),FO=jO(!1),Qx=uc(null),Zx=null,dd=null,_C=null;function wC(){_C=dd=Zx=null}function bC(n){var e=Qx.current;jn(Qx),n._currentValue=e}function vE(n,e,t){for(;n!==null;){var i=n.alternate;if((n.childLanes&e)!==e?(n.childLanes|=e,i!==null&&(i.childLanes|=e)):i!==null&&(i.childLanes&e)!==e&&(i.childLanes|=e),n===t)break;n=n.return}}function Ld(n,e){Zx=n,_C=dd=null,n=n.dependencies,n!==null&&n.firstContext!==null&&(n.lanes&e&&(Jr=!0),n.firstContext=null)}function qs(n){var e=n._currentValue;if(_C!==n)if(n={context:n,memoizedValue:e,next:null},dd===null){if(Zx===null)throw Error(ke(308));dd=n,Zx.dependencies={lanes:0,firstContext:n}}else dd=dd.next=n;return e}var pu=null;function SC(n){pu===null?pu=[n]:pu.push(n)}function VO(n,e,t,i){var r=e.interleaved;return r===null?(t.next=t,SC(e)):(t.next=r.next,r.next=t),e.interleaved=t,Pa(n,i)}function Pa(n,e){n.lanes|=e;var t=n.alternate;for(t!==null&&(t.lanes|=e),t=n,n=n.return;n!==null;)n.childLanes|=e,t=n.alternate,t!==null&&(t.childLanes|=e),t=n,n=n.return;return t.tag===3?t.stateNode:null}var gl=!1;function TC(n){n.updateQueue={baseState:n.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function BO(n,e){n=n.updateQueue,e.updateQueue===n&&(e.updateQueue={baseState:n.baseState,firstBaseUpdate:n.firstBaseUpdate,lastBaseUpdate:n.lastBaseUpdate,shared:n.shared,effects:n.effects})}function wa(n,e){return{eventTime:n,lane:e,tag:0,payload:null,callback:null,next:null}}function Ol(n,e,t){var i=n.updateQueue;if(i===null)return null;if(i=i.shared,gn&2){var r=i.pending;return r===null?e.next=e:(e.next=r.next,r.next=e),i.pending=e,Pa(n,t)}return r=i.interleaved,r===null?(e.next=e,SC(i)):(e.next=r.next,r.next=e),i.interleaved=e,Pa(n,t)}function fx(n,e,t){if(e=e.updateQueue,e!==null&&(e=e.shared,(t&4194240)!==0)){var i=e.lanes;i&=n.pendingLanes,t|=i,e.lanes=t,cC(n,t)}}function IR(n,e){var t=n.updateQueue,i=n.alternate;if(i!==null&&(i=i.updateQueue,t===i)){var r=null,s=null;if(t=t.firstBaseUpdate,t!==null){do{var o={eventTime:t.eventTime,lane:t.lane,tag:t.tag,payload:t.payload,callback:t.callback,next:null};s===null?r=s=o:s=s.next=o,t=t.next}while(t!==null);s===null?r=s=e:s=s.next=e}else r=s=e;t={baseState:i.baseState,firstBaseUpdate:r,lastBaseUpdate:s,shared:i.shared,effects:i.effects},n.updateQueue=t;return}n=t.lastBaseUpdate,n===null?t.firstBaseUpdate=e:n.next=e,t.lastBaseUpdate=e}function e0(n,e,t,i){var r=n.updateQueue;gl=!1;var s=r.firstBaseUpdate,o=r.lastBaseUpdate,a=r.shared.pending;if(a!==null){r.shared.pending=null;var l=a,c=l.next;l.next=null,o===null?s=c:o.next=c,o=l;var u=n.alternate;u!==null&&(u=u.updateQueue,a=u.lastBaseUpdate,a!==o&&(a===null?u.firstBaseUpdate=c:a.next=c,u.lastBaseUpdate=l))}if(s!==null){var p=r.baseState;o=0,u=c=l=null,a=s;do{var m=a.lane,g=a.eventTime;if((i&m)===m){u!==null&&(u=u.next={eventTime:g,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var x=n,b=a;switch(m=e,g=t,b.tag){case 1:if(x=b.payload,typeof x=="function"){p=x.call(g,p,m);break e}p=x;break e;case 3:x.flags=x.flags&-65537|128;case 0:if(x=b.payload,m=typeof x=="function"?x.call(g,p,m):x,m==null)break e;p=Xn({},p,m);break e;case 2:gl=!0}}a.callback!==null&&a.lane!==0&&(n.flags|=64,m=r.effects,m===null?r.effects=[a]:m.push(a))}else g={eventTime:g,lane:m,tag:a.tag,payload:a.payload,callback:a.callback,next:null},u===null?(c=u=g,l=p):u=u.next=g,o|=m;if(a=a.next,a===null){if(a=r.shared.pending,a===null)break;m=a,a=m.next,m.next=null,r.lastBaseUpdate=m,r.shared.pending=null}}while(!0);if(u===null&&(l=p),r.baseState=l,r.firstBaseUpdate=c,r.lastBaseUpdate=u,e=r.shared.interleaved,e!==null){r=e;do o|=r.lane,r=r.next;while(r!==e)}else s===null&&(r.shared.lanes=0);Lu|=o,n.lanes=o,n.memoizedState=p}}function PR(n,e,t){if(n=e.effects,e.effects=null,n!==null)for(e=0;e<n.length;e++){var i=n[e],r=i.callback;if(r!==null){if(i.callback=null,i=t,typeof r!="function")throw Error(ke(191,r));r.call(i)}}}var bg={},Uo=uc(bg),Am=uc(bg),Mm=uc(bg);function mu(n){if(n===bg)throw Error(ke(174));return n}function EC(n,e){switch(Ln(Mm,e),Ln(Am,n),Ln(Uo,bg),n=e.nodeType,n){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:QT(null,"");break;default:n=n===8?e.parentNode:e,e=n.namespaceURI||null,n=n.tagName,e=QT(e,n)}jn(Uo),Ln(Uo,e)}function qd(){jn(Uo),jn(Am),jn(Mm)}function zO(n){mu(Mm.current);var e=mu(Uo.current),t=QT(e,n.type);e!==t&&(Ln(Am,n),Ln(Uo,t))}function CC(n){Am.current===n&&(jn(Uo),jn(Am))}var Gn=uc(0);function t0(n){for(var e=n;e!==null;){if(e.tag===13){var t=e.memoizedState;if(t!==null&&(t=t.dehydrated,t===null||t.data==="$?"||t.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var fS=[];function AC(){for(var n=0;n<fS.length;n++)fS[n]._workInProgressVersionPrimary=null;fS.length=0}var px=Ba.ReactCurrentDispatcher,pS=Ba.ReactCurrentBatchConfig,Du=0,$n=null,Ci=null,Ui=null,n0=!1,qp=!1,Im=0,DG=0;function or(){throw Error(ke(321))}function MC(n,e){if(e===null)return!1;for(var t=0;t<e.length&&t<n.length;t++)if(!go(n[t],e[t]))return!1;return!0}function IC(n,e,t,i,r,s){if(Du=s,$n=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,px.current=n===null||n.memoizedState===null?UG:jG,n=t(i,r),qp){s=0;do{if(qp=!1,Im=0,25<=s)throw Error(ke(301));s+=1,Ui=Ci=null,e.updateQueue=null,px.current=FG,n=t(i,r)}while(qp)}if(px.current=i0,e=Ci!==null&&Ci.next!==null,Du=0,Ui=Ci=$n=null,n0=!1,e)throw Error(ke(300));return n}function PC(){var n=Im!==0;return Im=0,n}function Po(){var n={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ui===null?$n.memoizedState=Ui=n:Ui=Ui.next=n,Ui}function $s(){if(Ci===null){var n=$n.alternate;n=n!==null?n.memoizedState:null}else n=Ci.next;var e=Ui===null?$n.memoizedState:Ui.next;if(e!==null)Ui=e,Ci=n;else{if(n===null)throw Error(ke(310));Ci=n,n={memoizedState:Ci.memoizedState,baseState:Ci.baseState,baseQueue:Ci.baseQueue,queue:Ci.queue,next:null},Ui===null?$n.memoizedState=Ui=n:Ui=Ui.next=n}return Ui}function Pm(n,e){return typeof e=="function"?e(n):e}function mS(n){var e=$s(),t=e.queue;if(t===null)throw Error(ke(311));t.lastRenderedReducer=n;var i=Ci,r=i.baseQueue,s=t.pending;if(s!==null){if(r!==null){var o=r.next;r.next=s.next,s.next=o}i.baseQueue=r=s,t.pending=null}if(r!==null){s=r.next,i=i.baseState;var a=o=null,l=null,c=s;do{var u=c.lane;if((Du&u)===u)l!==null&&(l=l.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),i=c.hasEagerState?c.eagerState:n(i,c.action);else{var p={lane:u,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};l===null?(a=l=p,o=i):l=l.next=p,$n.lanes|=u,Lu|=u}c=c.next}while(c!==null&&c!==s);l===null?o=i:l.next=a,go(i,e.memoizedState)||(Jr=!0),e.memoizedState=i,e.baseState=o,e.baseQueue=l,t.lastRenderedState=i}if(n=t.interleaved,n!==null){r=n;do s=r.lane,$n.lanes|=s,Lu|=s,r=r.next;while(r!==n)}else r===null&&(t.lanes=0);return[e.memoizedState,t.dispatch]}function gS(n){var e=$s(),t=e.queue;if(t===null)throw Error(ke(311));t.lastRenderedReducer=n;var i=t.dispatch,r=t.pending,s=e.memoizedState;if(r!==null){t.pending=null;var o=r=r.next;do s=n(s,o.action),o=o.next;while(o!==r);go(s,e.memoizedState)||(Jr=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),t.lastRenderedState=s}return[s,i]}function HO(){}function GO(n,e){var t=$n,i=$s(),r=e(),s=!go(i.memoizedState,r);if(s&&(i.memoizedState=r,Jr=!0),i=i.queue,RC($O.bind(null,t,i,n),[n]),i.getSnapshot!==e||s||Ui!==null&&Ui.memoizedState.tag&1){if(t.flags|=2048,Rm(9,qO.bind(null,t,i,r,e),void 0,null),ji===null)throw Error(ke(349));Du&30||WO(t,e,r)}return r}function WO(n,e,t){n.flags|=16384,n={getSnapshot:e,value:t},e=$n.updateQueue,e===null?(e={lastEffect:null,stores:null},$n.updateQueue=e,e.stores=[n]):(t=e.stores,t===null?e.stores=[n]:t.push(n))}function qO(n,e,t,i){e.value=t,e.getSnapshot=i,XO(e)&&KO(n)}function $O(n,e,t){return t(function(){XO(e)&&KO(n)})}function XO(n){var e=n.getSnapshot;n=n.value;try{var t=e();return!go(n,t)}catch{return!0}}function KO(n){var e=Pa(n,1);e!==null&&po(e,n,1,-1)}function RR(n){var e=Po();return typeof n=="function"&&(n=n()),e.memoizedState=e.baseState=n,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Pm,lastRenderedState:n},e.queue=n,n=n.dispatch=OG.bind(null,$n,n),[e.memoizedState,n]}function Rm(n,e,t,i){return n={tag:n,create:e,destroy:t,deps:i,next:null},e=$n.updateQueue,e===null?(e={lastEffect:null,stores:null},$n.updateQueue=e,e.lastEffect=n.next=n):(t=e.lastEffect,t===null?e.lastEffect=n.next=n:(i=t.next,t.next=n,n.next=i,e.lastEffect=n)),n}function YO(){return $s().memoizedState}function mx(n,e,t,i){var r=Po();$n.flags|=n,r.memoizedState=Rm(1|e,t,void 0,i===void 0?null:i)}function L_(n,e,t,i){var r=$s();i=i===void 0?null:i;var s=void 0;if(Ci!==null){var o=Ci.memoizedState;if(s=o.destroy,i!==null&&MC(i,o.deps)){r.memoizedState=Rm(e,t,s,i);return}}$n.flags|=n,r.memoizedState=Rm(1|e,t,s,i)}function NR(n,e){return mx(8390656,8,n,e)}function RC(n,e){return L_(2048,8,n,e)}function JO(n,e){return L_(4,2,n,e)}function QO(n,e){return L_(4,4,n,e)}function ZO(n,e){if(typeof e=="function")return n=n(),e(n),function(){e(null)};if(e!=null)return n=n(),e.current=n,function(){e.current=null}}function eU(n,e,t){return t=t!=null?t.concat([n]):null,L_(4,4,ZO.bind(null,e,n),t)}function NC(){}function tU(n,e){var t=$s();e=e===void 0?null:e;var i=t.memoizedState;return i!==null&&e!==null&&MC(e,i[1])?i[0]:(t.memoizedState=[n,e],n)}function nU(n,e){var t=$s();e=e===void 0?null:e;var i=t.memoizedState;return i!==null&&e!==null&&MC(e,i[1])?i[0]:(n=n(),t.memoizedState=[n,e],n)}function iU(n,e,t){return Du&21?(go(t,e)||(t=lO(),$n.lanes|=t,Lu|=t,n.baseState=!0),e):(n.baseState&&(n.baseState=!1,Jr=!0),n.memoizedState=t)}function LG(n,e){var t=Mn;Mn=t!==0&&4>t?t:4,n(!0);var i=pS.transition;pS.transition={};try{n(!1),e()}finally{Mn=t,pS.transition=i}}function rU(){return $s().memoizedState}function kG(n,e,t){var i=jl(n);if(t={lane:i,action:t,hasEagerState:!1,eagerState:null,next:null},sU(n))oU(e,t);else if(t=VO(n,e,t,i),t!==null){var r=Dr();po(t,n,i,r),aU(t,e,i)}}function OG(n,e,t){var i=jl(n),r={lane:i,action:t,hasEagerState:!1,eagerState:null,next:null};if(sU(n))oU(e,r);else{var s=n.alternate;if(n.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,t);if(r.hasEagerState=!0,r.eagerState=a,go(a,o)){var l=e.interleaved;l===null?(r.next=r,SC(e)):(r.next=l.next,l.next=r),e.interleaved=r;return}}catch{}finally{}t=VO(n,e,r,i),t!==null&&(r=Dr(),po(t,n,i,r),aU(t,e,i))}}function sU(n){var e=n.alternate;return n===$n||e!==null&&e===$n}function oU(n,e){qp=n0=!0;var t=n.pending;t===null?e.next=e:(e.next=t.next,t.next=e),n.pending=e}function aU(n,e,t){if(t&4194240){var i=e.lanes;i&=n.pendingLanes,t|=i,e.lanes=t,cC(n,t)}}var i0={readContext:qs,useCallback:or,useContext:or,useEffect:or,useImperativeHandle:or,useInsertionEffect:or,useLayoutEffect:or,useMemo:or,useReducer:or,useRef:or,useState:or,useDebugValue:or,useDeferredValue:or,useTransition:or,useMutableSource:or,useSyncExternalStore:or,useId:or,unstable_isNewReconciler:!1},UG={readContext:qs,useCallback:function(n,e){return Po().memoizedState=[n,e===void 0?null:e],n},useContext:qs,useEffect:NR,useImperativeHandle:function(n,e,t){return t=t!=null?t.concat([n]):null,mx(4194308,4,ZO.bind(null,e,n),t)},useLayoutEffect:function(n,e){return mx(4194308,4,n,e)},useInsertionEffect:function(n,e){return mx(4,2,n,e)},useMemo:function(n,e){var t=Po();return e=e===void 0?null:e,n=n(),t.memoizedState=[n,e],n},useReducer:function(n,e,t){var i=Po();return e=t!==void 0?t(e):e,i.memoizedState=i.baseState=e,n={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:n,lastRenderedState:e},i.queue=n,n=n.dispatch=kG.bind(null,$n,n),[i.memoizedState,n]},useRef:function(n){var e=Po();return n={current:n},e.memoizedState=n},useState:RR,useDebugValue:NC,useDeferredValue:function(n){return Po().memoizedState=n},useTransition:function(){var n=RR(!1),e=n[0];return n=LG.bind(null,n[1]),Po().memoizedState=n,[e,n]},useMutableSource:function(){},useSyncExternalStore:function(n,e,t){var i=$n,r=Po();if(zn){if(t===void 0)throw Error(ke(407));t=t()}else{if(t=e(),ji===null)throw Error(ke(349));Du&30||WO(i,e,t)}r.memoizedState=t;var s={value:t,getSnapshot:e};return r.queue=s,NR($O.bind(null,i,s,n),[n]),i.flags|=2048,Rm(9,qO.bind(null,i,s,t,e),void 0,null),t},useId:function(){var n=Po(),e=ji.identifierPrefix;if(zn){var t=ga,i=ma;t=(i&~(1<<32-fo(i)-1)).toString(32)+t,e=":"+e+"R"+t,t=Im++,0<t&&(e+="H"+t.toString(32)),e+=":"}else t=DG++,e=":"+e+"r"+t.toString(32)+":";return n.memoizedState=e},unstable_isNewReconciler:!1},jG={readContext:qs,useCallback:tU,useContext:qs,useEffect:RC,useImperativeHandle:eU,useInsertionEffect:JO,useLayoutEffect:QO,useMemo:nU,useReducer:mS,useRef:YO,useState:function(){return mS(Pm)},useDebugValue:NC,useDeferredValue:function(n){var e=$s();return iU(e,Ci.memoizedState,n)},useTransition:function(){var n=mS(Pm)[0],e=$s().memoizedState;return[n,e]},useMutableSource:HO,useSyncExternalStore:GO,useId:rU,unstable_isNewReconciler:!1},FG={readContext:qs,useCallback:tU,useContext:qs,useEffect:RC,useImperativeHandle:eU,useInsertionEffect:JO,useLayoutEffect:QO,useMemo:nU,useReducer:gS,useRef:YO,useState:function(){return gS(Pm)},useDebugValue:NC,useDeferredValue:function(n){var e=$s();return Ci===null?e.memoizedState=n:iU(e,Ci.memoizedState,n)},useTransition:function(){var n=gS(Pm)[0],e=$s().memoizedState;return[n,e]},useMutableSource:HO,useSyncExternalStore:GO,useId:rU,unstable_isNewReconciler:!1};function so(n,e){if(n&&n.defaultProps){e=Xn({},e),n=n.defaultProps;for(var t in n)e[t]===void 0&&(e[t]=n[t]);return e}return e}function xE(n,e,t,i){e=n.memoizedState,t=t(i,e),t=t==null?e:Xn({},e,t),n.memoizedState=t,n.lanes===0&&(n.updateQueue.baseState=t)}var k_={isMounted:function(n){return(n=n._reactInternals)?Yu(n)===n:!1},enqueueSetState:function(n,e,t){n=n._reactInternals;var i=Dr(),r=jl(n),s=wa(i,r);s.payload=e,t!=null&&(s.callback=t),e=Ol(n,s,r),e!==null&&(po(e,n,r,i),fx(e,n,r))},enqueueReplaceState:function(n,e,t){n=n._reactInternals;var i=Dr(),r=jl(n),s=wa(i,r);s.tag=1,s.payload=e,t!=null&&(s.callback=t),e=Ol(n,s,r),e!==null&&(po(e,n,r,i),fx(e,n,r))},enqueueForceUpdate:function(n,e){n=n._reactInternals;var t=Dr(),i=jl(n),r=wa(t,i);r.tag=2,e!=null&&(r.callback=e),e=Ol(n,r,i),e!==null&&(po(e,n,i,t),fx(e,n,i))}};function DR(n,e,t,i,r,s,o){return n=n.stateNode,typeof n.shouldComponentUpdate=="function"?n.shouldComponentUpdate(i,s,o):e.prototype&&e.prototype.isPureReactComponent?!Sm(t,i)||!Sm(r,s):!0}function lU(n,e,t){var i=!1,r=Xl,s=e.contextType;return typeof s=="object"&&s!==null?s=qs(s):(r=es(e)?Ru:wr.current,i=e.contextTypes,s=(i=i!=null)?Hd(n,r):Xl),e=new e(t,s),n.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=k_,n.stateNode=e,e._reactInternals=n,i&&(n=n.stateNode,n.__reactInternalMemoizedUnmaskedChildContext=r,n.__reactInternalMemoizedMaskedChildContext=s),e}function LR(n,e,t,i){n=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(t,i),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(t,i),e.state!==n&&k_.enqueueReplaceState(e,e.state,null)}function _E(n,e,t,i){var r=n.stateNode;r.props=t,r.state=n.memoizedState,r.refs={},TC(n);var s=e.contextType;typeof s=="object"&&s!==null?r.context=qs(s):(s=es(e)?Ru:wr.current,r.context=Hd(n,s)),r.state=n.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(xE(n,e,s,t),r.state=n.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof r.getSnapshotBeforeUpdate=="function"||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(e=r.state,typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount(),e!==r.state&&k_.enqueueReplaceState(r,r.state,null),e0(n,t,r,i),r.state=n.memoizedState),typeof r.componentDidMount=="function"&&(n.flags|=4194308)}function $d(n,e){try{var t="",i=e;do t+=fH(i),i=i.return;while(i);var r=t}catch(s){r=`
Error generating stack: `+s.message+`
`+s.stack}return{value:n,source:e,stack:r,digest:null}}function yS(n,e,t){return{value:n,source:null,stack:t??null,digest:e??null}}function wE(n,e){try{console.error(e.value)}catch(t){setTimeout(function(){throw t})}}var VG=typeof WeakMap=="function"?WeakMap:Map;function cU(n,e,t){t=wa(-1,t),t.tag=3,t.payload={element:null};var i=e.value;return t.callback=function(){s0||(s0=!0,RE=i),wE(n,e)},t}function uU(n,e,t){t=wa(-1,t),t.tag=3;var i=n.type.getDerivedStateFromError;if(typeof i=="function"){var r=e.value;t.payload=function(){return i(r)},t.callback=function(){wE(n,e)}}var s=n.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(t.callback=function(){wE(n,e),typeof i!="function"&&(Ul===null?Ul=new Set([this]):Ul.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),t}function kR(n,e,t){var i=n.pingCache;if(i===null){i=n.pingCache=new VG;var r=new Set;i.set(e,r)}else r=i.get(e),r===void 0&&(r=new Set,i.set(e,r));r.has(t)||(r.add(t),n=eW.bind(null,n,e,t),e.then(n,n))}function OR(n){do{var e;if((e=n.tag===13)&&(e=n.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return n;n=n.return}while(n!==null);return null}function UR(n,e,t,i,r){return n.mode&1?(n.flags|=65536,n.lanes=r,n):(n===e?n.flags|=65536:(n.flags|=128,t.flags|=131072,t.flags&=-52805,t.tag===1&&(t.alternate===null?t.tag=17:(e=wa(-1,1),e.tag=2,Ol(t,e,1))),t.lanes|=1),n)}var BG=Ba.ReactCurrentOwner,Jr=!1;function Rr(n,e,t,i){e.child=n===null?FO(e,null,t,i):Wd(e,n.child,t,i)}function jR(n,e,t,i,r){t=t.render;var s=e.ref;return Ld(e,r),i=IC(n,e,t,i,s,r),t=PC(),n!==null&&!Jr?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~r,Ra(n,e,r)):(zn&&t&&yC(e),e.flags|=1,Rr(n,e,i,r),e.child)}function FR(n,e,t,i,r){if(n===null){var s=t.type;return typeof s=="function"&&!VC(s)&&s.defaultProps===void 0&&t.compare===null&&t.defaultProps===void 0?(e.tag=15,e.type=s,hU(n,e,s,i,r)):(n=xx(t.type,null,i,e,e.mode,r),n.ref=e.ref,n.return=e,e.child=n)}if(s=n.child,!(n.lanes&r)){var o=s.memoizedProps;if(t=t.compare,t=t!==null?t:Sm,t(o,i)&&n.ref===e.ref)return Ra(n,e,r)}return e.flags|=1,n=Fl(s,i),n.ref=e.ref,n.return=e,e.child=n}function hU(n,e,t,i,r){if(n!==null){var s=n.memoizedProps;if(Sm(s,i)&&n.ref===e.ref)if(Jr=!1,e.pendingProps=i=s,(n.lanes&r)!==0)n.flags&131072&&(Jr=!0);else return e.lanes=n.lanes,Ra(n,e,r)}return bE(n,e,t,i,r)}function dU(n,e,t){var i=e.pendingProps,r=i.children,s=n!==null?n.memoizedState:null;if(i.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ln(pd,ms),ms|=t;else{if(!(t&1073741824))return n=s!==null?s.baseLanes|t:t,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:n,cachePool:null,transitions:null},e.updateQueue=null,Ln(pd,ms),ms|=n,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=s!==null?s.baseLanes:t,Ln(pd,ms),ms|=i}else s!==null?(i=s.baseLanes|t,e.memoizedState=null):i=t,Ln(pd,ms),ms|=i;return Rr(n,e,r,t),e.child}function fU(n,e){var t=e.ref;(n===null&&t!==null||n!==null&&n.ref!==t)&&(e.flags|=512,e.flags|=2097152)}function bE(n,e,t,i,r){var s=es(t)?Ru:wr.current;return s=Hd(e,s),Ld(e,r),t=IC(n,e,t,i,s,r),i=PC(),n!==null&&!Jr?(e.updateQueue=n.updateQueue,e.flags&=-2053,n.lanes&=~r,Ra(n,e,r)):(zn&&i&&yC(e),e.flags|=1,Rr(n,e,t,r),e.child)}function VR(n,e,t,i,r){if(es(t)){var s=!0;Kx(e)}else s=!1;if(Ld(e,r),e.stateNode===null)gx(n,e),lU(e,t,i),_E(e,t,i,r),i=!0;else if(n===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,c=t.contextType;typeof c=="object"&&c!==null?c=qs(c):(c=es(t)?Ru:wr.current,c=Hd(e,c));var u=t.getDerivedStateFromProps,p=typeof u=="function"||typeof o.getSnapshotBeforeUpdate=="function";p||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==i||l!==c)&&LR(e,o,i,c),gl=!1;var m=e.memoizedState;o.state=m,e0(e,i,o,r),l=e.memoizedState,a!==i||m!==l||Zr.current||gl?(typeof u=="function"&&(xE(e,t,u,i),l=e.memoizedState),(a=gl||DR(e,t,a,i,m,l,c))?(p||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=i,e.memoizedState=l),o.props=i,o.state=l,o.context=c,i=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),i=!1)}else{o=e.stateNode,BO(n,e),a=e.memoizedProps,c=e.type===e.elementType?a:so(e.type,a),o.props=c,p=e.pendingProps,m=o.context,l=t.contextType,typeof l=="object"&&l!==null?l=qs(l):(l=es(t)?Ru:wr.current,l=Hd(e,l));var g=t.getDerivedStateFromProps;(u=typeof g=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==p||m!==l)&&LR(e,o,i,l),gl=!1,m=e.memoizedState,o.state=m,e0(e,i,o,r);var x=e.memoizedState;a!==p||m!==x||Zr.current||gl?(typeof g=="function"&&(xE(e,t,g,i),x=e.memoizedState),(c=gl||DR(e,t,c,i,m,x,l)||!1)?(u||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(i,x,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(i,x,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===n.memoizedProps&&m===n.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===n.memoizedProps&&m===n.memoizedState||(e.flags|=1024),e.memoizedProps=i,e.memoizedState=x),o.props=i,o.state=x,o.context=l,i=c):(typeof o.componentDidUpdate!="function"||a===n.memoizedProps&&m===n.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===n.memoizedProps&&m===n.memoizedState||(e.flags|=1024),i=!1)}return SE(n,e,t,i,s,r)}function SE(n,e,t,i,r,s){fU(n,e);var o=(e.flags&128)!==0;if(!i&&!o)return r&&ER(e,t,!1),Ra(n,e,s);i=e.stateNode,BG.current=e;var a=o&&typeof t.getDerivedStateFromError!="function"?null:i.render();return e.flags|=1,n!==null&&o?(e.child=Wd(e,n.child,null,s),e.child=Wd(e,null,a,s)):Rr(n,e,a,s),e.memoizedState=i.state,r&&ER(e,t,!0),e.child}function pU(n){var e=n.stateNode;e.pendingContext?TR(n,e.pendingContext,e.pendingContext!==e.context):e.context&&TR(n,e.context,!1),EC(n,e.containerInfo)}function BR(n,e,t,i,r){return Gd(),xC(r),e.flags|=256,Rr(n,e,t,i),e.child}var TE={dehydrated:null,treeContext:null,retryLane:0};function EE(n){return{baseLanes:n,cachePool:null,transitions:null}}function mU(n,e,t){var i=e.pendingProps,r=Gn.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=n!==null&&n.memoizedState===null?!1:(r&2)!==0),a?(s=!0,e.flags&=-129):(n===null||n.memoizedState!==null)&&(r|=1),Ln(Gn,r&1),n===null)return yE(e),n=e.memoizedState,n!==null&&(n=n.dehydrated,n!==null)?(e.mode&1?n.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=i.children,n=i.fallback,s?(i=e.mode,s=e.child,o={mode:"hidden",children:o},!(i&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=j_(o,i,0,null),n=bu(n,i,t,null),s.return=e,n.return=e,s.sibling=n,e.child=s,e.child.memoizedState=EE(t),e.memoizedState=TE,n):DC(e,o));if(r=n.memoizedState,r!==null&&(a=r.dehydrated,a!==null))return zG(n,e,o,i,a,r,t);if(s){s=i.fallback,o=e.mode,r=n.child,a=r.sibling;var l={mode:"hidden",children:i.children};return!(o&1)&&e.child!==r?(i=e.child,i.childLanes=0,i.pendingProps=l,e.deletions=null):(i=Fl(r,l),i.subtreeFlags=r.subtreeFlags&14680064),a!==null?s=Fl(a,s):(s=bu(s,o,t,null),s.flags|=2),s.return=e,i.return=e,i.sibling=s,e.child=i,i=s,s=e.child,o=n.child.memoizedState,o=o===null?EE(t):{baseLanes:o.baseLanes|t,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=n.childLanes&~t,e.memoizedState=TE,i}return s=n.child,n=s.sibling,i=Fl(s,{mode:"visible",children:i.children}),!(e.mode&1)&&(i.lanes=t),i.return=e,i.sibling=null,n!==null&&(t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)),e.child=i,e.memoizedState=null,i}function DC(n,e){return e=j_({mode:"visible",children:e},n.mode,0,null),e.return=n,n.child=e}function Zy(n,e,t,i){return i!==null&&xC(i),Wd(e,n.child,null,t),n=DC(e,e.pendingProps.children),n.flags|=2,e.memoizedState=null,n}function zG(n,e,t,i,r,s,o){if(t)return e.flags&256?(e.flags&=-257,i=yS(Error(ke(422))),Zy(n,e,o,i)):e.memoizedState!==null?(e.child=n.child,e.flags|=128,null):(s=i.fallback,r=e.mode,i=j_({mode:"visible",children:i.children},r,0,null),s=bu(s,r,o,null),s.flags|=2,i.return=e,s.return=e,i.sibling=s,e.child=i,e.mode&1&&Wd(e,n.child,null,o),e.child.memoizedState=EE(o),e.memoizedState=TE,s);if(!(e.mode&1))return Zy(n,e,o,null);if(r.data==="$!"){if(i=r.nextSibling&&r.nextSibling.dataset,i)var a=i.dgst;return i=a,s=Error(ke(419)),i=yS(s,i,void 0),Zy(n,e,o,i)}if(a=(o&n.childLanes)!==0,Jr||a){if(i=ji,i!==null){switch(o&-o){case 4:r=2;break;case 16:r=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:r=32;break;case 536870912:r=268435456;break;default:r=0}r=r&(i.suspendedLanes|o)?0:r,r!==0&&r!==s.retryLane&&(s.retryLane=r,Pa(n,r),po(i,n,r,-1))}return FC(),i=yS(Error(ke(421))),Zy(n,e,o,i)}return r.data==="$?"?(e.flags|=128,e.child=n.child,e=tW.bind(null,n),r._reactRetry=e,null):(n=s.treeContext,gs=kl(r.nextSibling),vs=e,zn=!0,lo=null,n!==null&&(Vs[Bs++]=ma,Vs[Bs++]=ga,Vs[Bs++]=Nu,ma=n.id,ga=n.overflow,Nu=e),e=DC(e,i.children),e.flags|=4096,e)}function zR(n,e,t){n.lanes|=e;var i=n.alternate;i!==null&&(i.lanes|=e),vE(n.return,e,t)}function vS(n,e,t,i,r){var s=n.memoizedState;s===null?n.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:i,tail:t,tailMode:r}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=i,s.tail=t,s.tailMode=r)}function gU(n,e,t){var i=e.pendingProps,r=i.revealOrder,s=i.tail;if(Rr(n,e,i.children,t),i=Gn.current,i&2)i=i&1|2,e.flags|=128;else{if(n!==null&&n.flags&128)e:for(n=e.child;n!==null;){if(n.tag===13)n.memoizedState!==null&&zR(n,t,e);else if(n.tag===19)zR(n,t,e);else if(n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break e;for(;n.sibling===null;){if(n.return===null||n.return===e)break e;n=n.return}n.sibling.return=n.return,n=n.sibling}i&=1}if(Ln(Gn,i),!(e.mode&1))e.memoizedState=null;else switch(r){case"forwards":for(t=e.child,r=null;t!==null;)n=t.alternate,n!==null&&t0(n)===null&&(r=t),t=t.sibling;t=r,t===null?(r=e.child,e.child=null):(r=t.sibling,t.sibling=null),vS(e,!1,r,t,s);break;case"backwards":for(t=null,r=e.child,e.child=null;r!==null;){if(n=r.alternate,n!==null&&t0(n)===null){e.child=r;break}n=r.sibling,r.sibling=t,t=r,r=n}vS(e,!0,t,null,s);break;case"together":vS(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function gx(n,e){!(e.mode&1)&&n!==null&&(n.alternate=null,e.alternate=null,e.flags|=2)}function Ra(n,e,t){if(n!==null&&(e.dependencies=n.dependencies),Lu|=e.lanes,!(t&e.childLanes))return null;if(n!==null&&e.child!==n.child)throw Error(ke(153));if(e.child!==null){for(n=e.child,t=Fl(n,n.pendingProps),e.child=t,t.return=e;n.sibling!==null;)n=n.sibling,t=t.sibling=Fl(n,n.pendingProps),t.return=e;t.sibling=null}return e.child}function HG(n,e,t){switch(e.tag){case 3:pU(e),Gd();break;case 5:zO(e);break;case 1:es(e.type)&&Kx(e);break;case 4:EC(e,e.stateNode.containerInfo);break;case 10:var i=e.type._context,r=e.memoizedProps.value;Ln(Qx,i._currentValue),i._currentValue=r;break;case 13:if(i=e.memoizedState,i!==null)return i.dehydrated!==null?(Ln(Gn,Gn.current&1),e.flags|=128,null):t&e.child.childLanes?mU(n,e,t):(Ln(Gn,Gn.current&1),n=Ra(n,e,t),n!==null?n.sibling:null);Ln(Gn,Gn.current&1);break;case 19:if(i=(t&e.childLanes)!==0,n.flags&128){if(i)return gU(n,e,t);e.flags|=128}if(r=e.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),Ln(Gn,Gn.current),i)break;return null;case 22:case 23:return e.lanes=0,dU(n,e,t)}return Ra(n,e,t)}var yU,CE,vU,xU;yU=function(n,e){for(var t=e.child;t!==null;){if(t.tag===5||t.tag===6)n.appendChild(t.stateNode);else if(t.tag!==4&&t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return;t=t.return}t.sibling.return=t.return,t=t.sibling}};CE=function(){};vU=function(n,e,t,i){var r=n.memoizedProps;if(r!==i){n=e.stateNode,mu(Uo.current);var s=null;switch(t){case"input":r=XT(n,r),i=XT(n,i),s=[];break;case"select":r=Xn({},r,{value:void 0}),i=Xn({},i,{value:void 0}),s=[];break;case"textarea":r=JT(n,r),i=JT(n,i),s=[];break;default:typeof r.onClick!="function"&&typeof i.onClick=="function"&&(n.onclick=$x)}ZT(t,i);var o;t=null;for(c in r)if(!i.hasOwnProperty(c)&&r.hasOwnProperty(c)&&r[c]!=null)if(c==="style"){var a=r[c];for(o in a)a.hasOwnProperty(o)&&(t||(t={}),t[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(gm.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in i){var l=i[c];if(a=r?.[c],i.hasOwnProperty(c)&&l!==a&&(l!=null||a!=null))if(c==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(t||(t={}),t[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(t||(t={}),t[o]=l[o])}else t||(s||(s=[]),s.push(c,t)),t=l;else c==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(c,l)):c==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(c,""+l):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(gm.hasOwnProperty(c)?(l!=null&&c==="onScroll"&&kn("scroll",n),s||a===l||(s=[])):(s=s||[]).push(c,l))}t&&(s=s||[]).push("style",t);var c=s;(e.updateQueue=c)&&(e.flags|=4)}};xU=function(n,e,t,i){t!==i&&(e.flags|=4)};function ap(n,e){if(!zn)switch(n.tailMode){case"hidden":e=n.tail;for(var t=null;e!==null;)e.alternate!==null&&(t=e),e=e.sibling;t===null?n.tail=null:t.sibling=null;break;case"collapsed":t=n.tail;for(var i=null;t!==null;)t.alternate!==null&&(i=t),t=t.sibling;i===null?e||n.tail===null?n.tail=null:n.tail.sibling=null:i.sibling=null}}function ar(n){var e=n.alternate!==null&&n.alternate.child===n.child,t=0,i=0;if(e)for(var r=n.child;r!==null;)t|=r.lanes|r.childLanes,i|=r.subtreeFlags&14680064,i|=r.flags&14680064,r.return=n,r=r.sibling;else for(r=n.child;r!==null;)t|=r.lanes|r.childLanes,i|=r.subtreeFlags,i|=r.flags,r.return=n,r=r.sibling;return n.subtreeFlags|=i,n.childLanes=t,e}function GG(n,e,t){var i=e.pendingProps;switch(vC(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ar(e),null;case 1:return es(e.type)&&Xx(),ar(e),null;case 3:return i=e.stateNode,qd(),jn(Zr),jn(wr),AC(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(n===null||n.child===null)&&(Jy(e)?e.flags|=4:n===null||n.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,lo!==null&&(LE(lo),lo=null))),CE(n,e),ar(e),null;case 5:CC(e);var r=mu(Mm.current);if(t=e.type,n!==null&&e.stateNode!=null)vU(n,e,t,i,r),n.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!i){if(e.stateNode===null)throw Error(ke(166));return ar(e),null}if(n=mu(Uo.current),Jy(e)){i=e.stateNode,t=e.type;var s=e.memoizedProps;switch(i[No]=e,i[Cm]=s,n=(e.mode&1)!==0,t){case"dialog":kn("cancel",i),kn("close",i);break;case"iframe":case"object":case"embed":kn("load",i);break;case"video":case"audio":for(r=0;r<Ip.length;r++)kn(Ip[r],i);break;case"source":kn("error",i);break;case"img":case"image":case"link":kn("error",i),kn("load",i);break;case"details":kn("toggle",i);break;case"input":JP(i,s),kn("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!s.multiple},kn("invalid",i);break;case"textarea":ZP(i,s),kn("invalid",i)}ZT(t,s),r=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?i.textContent!==a&&(s.suppressHydrationWarning!==!0&&Yy(i.textContent,a,n),r=["children",a]):typeof a=="number"&&i.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&Yy(i.textContent,a,n),r=["children",""+a]):gm.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&kn("scroll",i)}switch(t){case"input":zy(i),QP(i,s,!0);break;case"textarea":zy(i),eR(i);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(i.onclick=$x)}i=r,e.updateQueue=i,i!==null&&(e.flags|=4)}else{o=r.nodeType===9?r:r.ownerDocument,n==="http://www.w3.org/1999/xhtml"&&(n=$3(t)),n==="http://www.w3.org/1999/xhtml"?t==="script"?(n=o.createElement("div"),n.innerHTML="<script><\/script>",n=n.removeChild(n.firstChild)):typeof i.is=="string"?n=o.createElement(t,{is:i.is}):(n=o.createElement(t),t==="select"&&(o=n,i.multiple?o.multiple=!0:i.size&&(o.size=i.size))):n=o.createElementNS(n,t),n[No]=e,n[Cm]=i,yU(n,e,!1,!1),e.stateNode=n;e:{switch(o=eE(t,i),t){case"dialog":kn("cancel",n),kn("close",n),r=i;break;case"iframe":case"object":case"embed":kn("load",n),r=i;break;case"video":case"audio":for(r=0;r<Ip.length;r++)kn(Ip[r],n);r=i;break;case"source":kn("error",n),r=i;break;case"img":case"image":case"link":kn("error",n),kn("load",n),r=i;break;case"details":kn("toggle",n),r=i;break;case"input":JP(n,i),r=XT(n,i),kn("invalid",n);break;case"option":r=i;break;case"select":n._wrapperState={wasMultiple:!!i.multiple},r=Xn({},i,{value:void 0}),kn("invalid",n);break;case"textarea":ZP(n,i),r=JT(n,i),kn("invalid",n);break;default:r=i}ZT(t,r),a=r;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?Y3(n,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&X3(n,l)):s==="children"?typeof l=="string"?(t!=="textarea"||l!=="")&&ym(n,l):typeof l=="number"&&ym(n,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(gm.hasOwnProperty(s)?l!=null&&s==="onScroll"&&kn("scroll",n):l!=null&&iC(n,s,l,o))}switch(t){case"input":zy(n),QP(n,i,!1);break;case"textarea":zy(n),eR(n);break;case"option":i.value!=null&&n.setAttribute("value",""+$l(i.value));break;case"select":n.multiple=!!i.multiple,s=i.value,s!=null?Pd(n,!!i.multiple,s,!1):i.defaultValue!=null&&Pd(n,!!i.multiple,i.defaultValue,!0);break;default:typeof r.onClick=="function"&&(n.onclick=$x)}switch(t){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return ar(e),null;case 6:if(n&&e.stateNode!=null)xU(n,e,n.memoizedProps,i);else{if(typeof i!="string"&&e.stateNode===null)throw Error(ke(166));if(t=mu(Mm.current),mu(Uo.current),Jy(e)){if(i=e.stateNode,t=e.memoizedProps,i[No]=e,(s=i.nodeValue!==t)&&(n=vs,n!==null))switch(n.tag){case 3:Yy(i.nodeValue,t,(n.mode&1)!==0);break;case 5:n.memoizedProps.suppressHydrationWarning!==!0&&Yy(i.nodeValue,t,(n.mode&1)!==0)}s&&(e.flags|=4)}else i=(t.nodeType===9?t:t.ownerDocument).createTextNode(i),i[No]=e,e.stateNode=i}return ar(e),null;case 13:if(jn(Gn),i=e.memoizedState,n===null||n.memoizedState!==null&&n.memoizedState.dehydrated!==null){if(zn&&gs!==null&&e.mode&1&&!(e.flags&128))UO(),Gd(),e.flags|=98560,s=!1;else if(s=Jy(e),i!==null&&i.dehydrated!==null){if(n===null){if(!s)throw Error(ke(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(ke(317));s[No]=e}else Gd(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;ar(e),s=!1}else lo!==null&&(LE(lo),lo=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=t,e):(i=i!==null,i!==(n!==null&&n.memoizedState!==null)&&i&&(e.child.flags|=8192,e.mode&1&&(n===null||Gn.current&1?Ai===0&&(Ai=3):FC())),e.updateQueue!==null&&(e.flags|=4),ar(e),null);case 4:return qd(),CE(n,e),n===null&&Tm(e.stateNode.containerInfo),ar(e),null;case 10:return bC(e.type._context),ar(e),null;case 17:return es(e.type)&&Xx(),ar(e),null;case 19:if(jn(Gn),s=e.memoizedState,s===null)return ar(e),null;if(i=(e.flags&128)!==0,o=s.rendering,o===null)if(i)ap(s,!1);else{if(Ai!==0||n!==null&&n.flags&128)for(n=e.child;n!==null;){if(o=t0(n),o!==null){for(e.flags|=128,ap(s,!1),i=o.updateQueue,i!==null&&(e.updateQueue=i,e.flags|=4),e.subtreeFlags=0,i=t,t=e.child;t!==null;)s=t,n=i,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=n,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,n=o.dependencies,s.dependencies=n===null?null:{lanes:n.lanes,firstContext:n.firstContext}),t=t.sibling;return Ln(Gn,Gn.current&1|2),e.child}n=n.sibling}s.tail!==null&&li()>Xd&&(e.flags|=128,i=!0,ap(s,!1),e.lanes=4194304)}else{if(!i)if(n=t0(o),n!==null){if(e.flags|=128,i=!0,t=n.updateQueue,t!==null&&(e.updateQueue=t,e.flags|=4),ap(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!zn)return ar(e),null}else 2*li()-s.renderingStartTime>Xd&&t!==1073741824&&(e.flags|=128,i=!0,ap(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(t=s.last,t!==null?t.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=li(),e.sibling=null,t=Gn.current,Ln(Gn,i?t&1|2:t&1),e):(ar(e),null);case 22:case 23:return jC(),i=e.memoizedState!==null,n!==null&&n.memoizedState!==null!==i&&(e.flags|=8192),i&&e.mode&1?ms&1073741824&&(ar(e),e.subtreeFlags&6&&(e.flags|=8192)):ar(e),null;case 24:return null;case 25:return null}throw Error(ke(156,e.tag))}function WG(n,e){switch(vC(e),e.tag){case 1:return es(e.type)&&Xx(),n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 3:return qd(),jn(Zr),jn(wr),AC(),n=e.flags,n&65536&&!(n&128)?(e.flags=n&-65537|128,e):null;case 5:return CC(e),null;case 13:if(jn(Gn),n=e.memoizedState,n!==null&&n.dehydrated!==null){if(e.alternate===null)throw Error(ke(340));Gd()}return n=e.flags,n&65536?(e.flags=n&-65537|128,e):null;case 19:return jn(Gn),null;case 4:return qd(),null;case 10:return bC(e.type._context),null;case 22:case 23:return jC(),null;case 24:return null;default:return null}}var ev=!1,pr=!1,qG=typeof WeakSet=="function"?WeakSet:Set,ct=null;function fd(n,e){var t=n.ref;if(t!==null)if(typeof t=="function")try{t(null)}catch(i){ei(n,e,i)}else t.current=null}function AE(n,e,t){try{t()}catch(i){ei(n,e,i)}}var HR=!1;function $G(n,e){if(uE=Gx,n=TO(),gC(n)){if("selectionStart"in n)var t={start:n.selectionStart,end:n.selectionEnd};else e:{t=(t=n.ownerDocument)&&t.defaultView||window;var i=t.getSelection&&t.getSelection();if(i&&i.rangeCount!==0){t=i.anchorNode;var r=i.anchorOffset,s=i.focusNode;i=i.focusOffset;try{t.nodeType,s.nodeType}catch{t=null;break e}var o=0,a=-1,l=-1,c=0,u=0,p=n,m=null;t:for(;;){for(var g;p!==t||r!==0&&p.nodeType!==3||(a=o+r),p!==s||i!==0&&p.nodeType!==3||(l=o+i),p.nodeType===3&&(o+=p.nodeValue.length),(g=p.firstChild)!==null;)m=p,p=g;for(;;){if(p===n)break t;if(m===t&&++c===r&&(a=o),m===s&&++u===i&&(l=o),(g=p.nextSibling)!==null)break;p=m,m=p.parentNode}p=g}t=a===-1||l===-1?null:{start:a,end:l}}else t=null}t=t||{start:0,end:0}}else t=null;for(hE={focusedElem:n,selectionRange:t},Gx=!1,ct=e;ct!==null;)if(e=ct,n=e.child,(e.subtreeFlags&1028)!==0&&n!==null)n.return=e,ct=n;else for(;ct!==null;){e=ct;try{var x=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(x!==null){var b=x.memoizedProps,w=x.memoizedState,v=e.stateNode,S=v.getSnapshotBeforeUpdate(e.elementType===e.type?b:so(e.type,b),w);v.__reactInternalSnapshotBeforeUpdate=S}break;case 3:var E=e.stateNode.containerInfo;E.nodeType===1?E.textContent="":E.nodeType===9&&E.documentElement&&E.removeChild(E.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(ke(163))}}catch(C){ei(e,e.return,C)}if(n=e.sibling,n!==null){n.return=e.return,ct=n;break}ct=e.return}return x=HR,HR=!1,x}function $p(n,e,t){var i=e.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var r=i=i.next;do{if((r.tag&n)===n){var s=r.destroy;r.destroy=void 0,s!==void 0&&AE(e,t,s)}r=r.next}while(r!==i)}}function O_(n,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var t=e=e.next;do{if((t.tag&n)===n){var i=t.create;t.destroy=i()}t=t.next}while(t!==e)}}function ME(n){var e=n.ref;if(e!==null){var t=n.stateNode;switch(n.tag){case 5:n=t;break;default:n=t}typeof e=="function"?e(n):e.current=n}}function _U(n){var e=n.alternate;e!==null&&(n.alternate=null,_U(e)),n.child=null,n.deletions=null,n.sibling=null,n.tag===5&&(e=n.stateNode,e!==null&&(delete e[No],delete e[Cm],delete e[pE],delete e[IG],delete e[PG])),n.stateNode=null,n.return=null,n.dependencies=null,n.memoizedProps=null,n.memoizedState=null,n.pendingProps=null,n.stateNode=null,n.updateQueue=null}function wU(n){return n.tag===5||n.tag===3||n.tag===4}function GR(n){e:for(;;){for(;n.sibling===null;){if(n.return===null||wU(n.return))return null;n=n.return}for(n.sibling.return=n.return,n=n.sibling;n.tag!==5&&n.tag!==6&&n.tag!==18;){if(n.flags&2||n.child===null||n.tag===4)continue e;n.child.return=n,n=n.child}if(!(n.flags&2))return n.stateNode}}function IE(n,e,t){var i=n.tag;if(i===5||i===6)n=n.stateNode,e?t.nodeType===8?t.parentNode.insertBefore(n,e):t.insertBefore(n,e):(t.nodeType===8?(e=t.parentNode,e.insertBefore(n,t)):(e=t,e.appendChild(n)),t=t._reactRootContainer,t!=null||e.onclick!==null||(e.onclick=$x));else if(i!==4&&(n=n.child,n!==null))for(IE(n,e,t),n=n.sibling;n!==null;)IE(n,e,t),n=n.sibling}function PE(n,e,t){var i=n.tag;if(i===5||i===6)n=n.stateNode,e?t.insertBefore(n,e):t.appendChild(n);else if(i!==4&&(n=n.child,n!==null))for(PE(n,e,t),n=n.sibling;n!==null;)PE(n,e,t),n=n.sibling}var Gi=null,ao=!1;function il(n,e,t){for(t=t.child;t!==null;)bU(n,e,t),t=t.sibling}function bU(n,e,t){if(Oo&&typeof Oo.onCommitFiberUnmount=="function")try{Oo.onCommitFiberUnmount(M_,t)}catch{}switch(t.tag){case 5:pr||fd(t,e);case 6:var i=Gi,r=ao;Gi=null,il(n,e,t),Gi=i,ao=r,Gi!==null&&(ao?(n=Gi,t=t.stateNode,n.nodeType===8?n.parentNode.removeChild(t):n.removeChild(t)):Gi.removeChild(t.stateNode));break;case 18:Gi!==null&&(ao?(n=Gi,t=t.stateNode,n.nodeType===8?hS(n.parentNode,t):n.nodeType===1&&hS(n,t),wm(n)):hS(Gi,t.stateNode));break;case 4:i=Gi,r=ao,Gi=t.stateNode.containerInfo,ao=!0,il(n,e,t),Gi=i,ao=r;break;case 0:case 11:case 14:case 15:if(!pr&&(i=t.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){r=i=i.next;do{var s=r,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&AE(t,e,o),r=r.next}while(r!==i)}il(n,e,t);break;case 1:if(!pr&&(fd(t,e),i=t.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=t.memoizedProps,i.state=t.memoizedState,i.componentWillUnmount()}catch(a){ei(t,e,a)}il(n,e,t);break;case 21:il(n,e,t);break;case 22:t.mode&1?(pr=(i=pr)||t.memoizedState!==null,il(n,e,t),pr=i):il(n,e,t);break;default:il(n,e,t)}}function WR(n){var e=n.updateQueue;if(e!==null){n.updateQueue=null;var t=n.stateNode;t===null&&(t=n.stateNode=new qG),e.forEach(function(i){var r=nW.bind(null,n,i);t.has(i)||(t.add(i),i.then(r,r))})}}function eo(n,e){var t=e.deletions;if(t!==null)for(var i=0;i<t.length;i++){var r=t[i];try{var s=n,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:Gi=a.stateNode,ao=!1;break e;case 3:Gi=a.stateNode.containerInfo,ao=!0;break e;case 4:Gi=a.stateNode.containerInfo,ao=!0;break e}a=a.return}if(Gi===null)throw Error(ke(160));bU(s,o,r),Gi=null,ao=!1;var l=r.alternate;l!==null&&(l.return=null),r.return=null}catch(c){ei(r,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)SU(e,n),e=e.sibling}function SU(n,e){var t=n.alternate,i=n.flags;switch(n.tag){case 0:case 11:case 14:case 15:if(eo(e,n),Io(n),i&4){try{$p(3,n,n.return),O_(3,n)}catch(b){ei(n,n.return,b)}try{$p(5,n,n.return)}catch(b){ei(n,n.return,b)}}break;case 1:eo(e,n),Io(n),i&512&&t!==null&&fd(t,t.return);break;case 5:if(eo(e,n),Io(n),i&512&&t!==null&&fd(t,t.return),n.flags&32){var r=n.stateNode;try{ym(r,"")}catch(b){ei(n,n.return,b)}}if(i&4&&(r=n.stateNode,r!=null)){var s=n.memoizedProps,o=t!==null?t.memoizedProps:s,a=n.type,l=n.updateQueue;if(n.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&W3(r,s),eE(a,o);var c=eE(a,s);for(o=0;o<l.length;o+=2){var u=l[o],p=l[o+1];u==="style"?Y3(r,p):u==="dangerouslySetInnerHTML"?X3(r,p):u==="children"?ym(r,p):iC(r,u,p,c)}switch(a){case"input":KT(r,s);break;case"textarea":q3(r,s);break;case"select":var m=r._wrapperState.wasMultiple;r._wrapperState.wasMultiple=!!s.multiple;var g=s.value;g!=null?Pd(r,!!s.multiple,g,!1):m!==!!s.multiple&&(s.defaultValue!=null?Pd(r,!!s.multiple,s.defaultValue,!0):Pd(r,!!s.multiple,s.multiple?[]:"",!1))}r[Cm]=s}catch(b){ei(n,n.return,b)}}break;case 6:if(eo(e,n),Io(n),i&4){if(n.stateNode===null)throw Error(ke(162));r=n.stateNode,s=n.memoizedProps;try{r.nodeValue=s}catch(b){ei(n,n.return,b)}}break;case 3:if(eo(e,n),Io(n),i&4&&t!==null&&t.memoizedState.isDehydrated)try{wm(e.containerInfo)}catch(b){ei(n,n.return,b)}break;case 4:eo(e,n),Io(n);break;case 13:eo(e,n),Io(n),r=n.child,r.flags&8192&&(s=r.memoizedState!==null,r.stateNode.isHidden=s,!s||r.alternate!==null&&r.alternate.memoizedState!==null||(OC=li())),i&4&&WR(n);break;case 22:if(u=t!==null&&t.memoizedState!==null,n.mode&1?(pr=(c=pr)||u,eo(e,n),pr=c):eo(e,n),Io(n),i&8192){if(c=n.memoizedState!==null,(n.stateNode.isHidden=c)&&!u&&n.mode&1)for(ct=n,u=n.child;u!==null;){for(p=ct=u;ct!==null;){switch(m=ct,g=m.child,m.tag){case 0:case 11:case 14:case 15:$p(4,m,m.return);break;case 1:fd(m,m.return);var x=m.stateNode;if(typeof x.componentWillUnmount=="function"){i=m,t=m.return;try{e=i,x.props=e.memoizedProps,x.state=e.memoizedState,x.componentWillUnmount()}catch(b){ei(i,t,b)}}break;case 5:fd(m,m.return);break;case 22:if(m.memoizedState!==null){$R(p);continue}}g!==null?(g.return=m,ct=g):$R(p)}u=u.sibling}e:for(u=null,p=n;;){if(p.tag===5){if(u===null){u=p;try{r=p.stateNode,c?(s=r.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=p.stateNode,l=p.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=K3("display",o))}catch(b){ei(n,n.return,b)}}}else if(p.tag===6){if(u===null)try{p.stateNode.nodeValue=c?"":p.memoizedProps}catch(b){ei(n,n.return,b)}}else if((p.tag!==22&&p.tag!==23||p.memoizedState===null||p===n)&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===n)break e;for(;p.sibling===null;){if(p.return===null||p.return===n)break e;u===p&&(u=null),p=p.return}u===p&&(u=null),p.sibling.return=p.return,p=p.sibling}}break;case 19:eo(e,n),Io(n),i&4&&WR(n);break;case 21:break;default:eo(e,n),Io(n)}}function Io(n){var e=n.flags;if(e&2){try{e:{for(var t=n.return;t!==null;){if(wU(t)){var i=t;break e}t=t.return}throw Error(ke(160))}switch(i.tag){case 5:var r=i.stateNode;i.flags&32&&(ym(r,""),i.flags&=-33);var s=GR(n);PE(n,s,r);break;case 3:case 4:var o=i.stateNode.containerInfo,a=GR(n);IE(n,a,o);break;default:throw Error(ke(161))}}catch(l){ei(n,n.return,l)}n.flags&=-3}e&4096&&(n.flags&=-4097)}function XG(n,e,t){ct=n,TU(n)}function TU(n,e,t){for(var i=(n.mode&1)!==0;ct!==null;){var r=ct,s=r.child;if(r.tag===22&&i){var o=r.memoizedState!==null||ev;if(!o){var a=r.alternate,l=a!==null&&a.memoizedState!==null||pr;a=ev;var c=pr;if(ev=o,(pr=l)&&!c)for(ct=r;ct!==null;)o=ct,l=o.child,o.tag===22&&o.memoizedState!==null?XR(r):l!==null?(l.return=o,ct=l):XR(r);for(;s!==null;)ct=s,TU(s),s=s.sibling;ct=r,ev=a,pr=c}qR(n)}else r.subtreeFlags&8772&&s!==null?(s.return=r,ct=s):qR(n)}}function qR(n){for(;ct!==null;){var e=ct;if(e.flags&8772){var t=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:pr||O_(5,e);break;case 1:var i=e.stateNode;if(e.flags&4&&!pr)if(t===null)i.componentDidMount();else{var r=e.elementType===e.type?t.memoizedProps:so(e.type,t.memoizedProps);i.componentDidUpdate(r,t.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&PR(e,s,i);break;case 3:var o=e.updateQueue;if(o!==null){if(t=null,e.child!==null)switch(e.child.tag){case 5:t=e.child.stateNode;break;case 1:t=e.child.stateNode}PR(e,o,t)}break;case 5:var a=e.stateNode;if(t===null&&e.flags&4){t=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&t.focus();break;case"img":l.src&&(t.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var u=c.memoizedState;if(u!==null){var p=u.dehydrated;p!==null&&wm(p)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(ke(163))}pr||e.flags&512&&ME(e)}catch(m){ei(e,e.return,m)}}if(e===n){ct=null;break}if(t=e.sibling,t!==null){t.return=e.return,ct=t;break}ct=e.return}}function $R(n){for(;ct!==null;){var e=ct;if(e===n){ct=null;break}var t=e.sibling;if(t!==null){t.return=e.return,ct=t;break}ct=e.return}}function XR(n){for(;ct!==null;){var e=ct;try{switch(e.tag){case 0:case 11:case 15:var t=e.return;try{O_(4,e)}catch(l){ei(e,t,l)}break;case 1:var i=e.stateNode;if(typeof i.componentDidMount=="function"){var r=e.return;try{i.componentDidMount()}catch(l){ei(e,r,l)}}var s=e.return;try{ME(e)}catch(l){ei(e,s,l)}break;case 5:var o=e.return;try{ME(e)}catch(l){ei(e,o,l)}}}catch(l){ei(e,e.return,l)}if(e===n){ct=null;break}var a=e.sibling;if(a!==null){a.return=e.return,ct=a;break}ct=e.return}}var KG=Math.ceil,r0=Ba.ReactCurrentDispatcher,LC=Ba.ReactCurrentOwner,Ws=Ba.ReactCurrentBatchConfig,gn=0,ji=null,vi=null,Ki=0,ms=0,pd=uc(0),Ai=0,Nm=null,Lu=0,U_=0,kC=0,Xp=null,$r=null,OC=0,Xd=1/0,ha=null,s0=!1,RE=null,Ul=null,tv=!1,Ml=null,o0=0,Kp=0,NE=null,yx=-1,vx=0;function Dr(){return gn&6?li():yx!==-1?yx:yx=li()}function jl(n){return n.mode&1?gn&2&&Ki!==0?Ki&-Ki:NG.transition!==null?(vx===0&&(vx=lO()),vx):(n=Mn,n!==0||(n=window.event,n=n===void 0?16:mO(n.type)),n):1}function po(n,e,t,i){if(50<Kp)throw Kp=0,NE=null,Error(ke(185));xg(n,t,i),(!(gn&2)||n!==ji)&&(n===ji&&(!(gn&2)&&(U_|=t),Ai===4&&_l(n,Ki)),ts(n,i),t===1&&gn===0&&!(e.mode&1)&&(Xd=li()+500,D_&&hc()))}function ts(n,e){var t=n.callbackNode;NH(n,e);var i=Hx(n,n===ji?Ki:0);if(i===0)t!==null&&iR(t),n.callbackNode=null,n.callbackPriority=0;else if(e=i&-i,n.callbackPriority!==e){if(t!=null&&iR(t),e===1)n.tag===0?RG(KR.bind(null,n)):LO(KR.bind(null,n)),AG(function(){!(gn&6)&&hc()}),t=null;else{switch(cO(i)){case 1:t=lC;break;case 4:t=oO;break;case 16:t=zx;break;case 536870912:t=aO;break;default:t=zx}t=NU(t,EU.bind(null,n))}n.callbackPriority=e,n.callbackNode=t}}function EU(n,e){if(yx=-1,vx=0,gn&6)throw Error(ke(327));var t=n.callbackNode;if(kd()&&n.callbackNode!==t)return null;var i=Hx(n,n===ji?Ki:0);if(i===0)return null;if(i&30||i&n.expiredLanes||e)e=a0(n,i);else{e=i;var r=gn;gn|=2;var s=AU();(ji!==n||Ki!==e)&&(ha=null,Xd=li()+500,wu(n,e));do try{QG();break}catch(a){CU(n,a)}while(!0);wC(),r0.current=s,gn=r,vi!==null?e=0:(ji=null,Ki=0,e=Ai)}if(e!==0){if(e===2&&(r=sE(n),r!==0&&(i=r,e=DE(n,r))),e===1)throw t=Nm,wu(n,0),_l(n,i),ts(n,li()),t;if(e===6)_l(n,i);else{if(r=n.current.alternate,!(i&30)&&!YG(r)&&(e=a0(n,i),e===2&&(s=sE(n),s!==0&&(i=s,e=DE(n,s))),e===1))throw t=Nm,wu(n,0),_l(n,i),ts(n,li()),t;switch(n.finishedWork=r,n.finishedLanes=i,e){case 0:case 1:throw Error(ke(345));case 2:su(n,$r,ha);break;case 3:if(_l(n,i),(i&130023424)===i&&(e=OC+500-li(),10<e)){if(Hx(n,0)!==0)break;if(r=n.suspendedLanes,(r&i)!==i){Dr(),n.pingedLanes|=n.suspendedLanes&r;break}n.timeoutHandle=fE(su.bind(null,n,$r,ha),e);break}su(n,$r,ha);break;case 4:if(_l(n,i),(i&4194240)===i)break;for(e=n.eventTimes,r=-1;0<i;){var o=31-fo(i);s=1<<o,o=e[o],o>r&&(r=o),i&=~s}if(i=r,i=li()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*KG(i/1960))-i,10<i){n.timeoutHandle=fE(su.bind(null,n,$r,ha),i);break}su(n,$r,ha);break;case 5:su(n,$r,ha);break;default:throw Error(ke(329))}}}return ts(n,li()),n.callbackNode===t?EU.bind(null,n):null}function DE(n,e){var t=Xp;return n.current.memoizedState.isDehydrated&&(wu(n,e).flags|=256),n=a0(n,e),n!==2&&(e=$r,$r=t,e!==null&&LE(e)),n}function LE(n){$r===null?$r=n:$r.push.apply($r,n)}function YG(n){for(var e=n;;){if(e.flags&16384){var t=e.updateQueue;if(t!==null&&(t=t.stores,t!==null))for(var i=0;i<t.length;i++){var r=t[i],s=r.getSnapshot;r=r.value;try{if(!go(s(),r))return!1}catch{return!1}}}if(t=e.child,e.subtreeFlags&16384&&t!==null)t.return=e,e=t;else{if(e===n)break;for(;e.sibling===null;){if(e.return===null||e.return===n)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function _l(n,e){for(e&=~kC,e&=~U_,n.suspendedLanes|=e,n.pingedLanes&=~e,n=n.expirationTimes;0<e;){var t=31-fo(e),i=1<<t;n[t]=-1,e&=~i}}function KR(n){if(gn&6)throw Error(ke(327));kd();var e=Hx(n,0);if(!(e&1))return ts(n,li()),null;var t=a0(n,e);if(n.tag!==0&&t===2){var i=sE(n);i!==0&&(e=i,t=DE(n,i))}if(t===1)throw t=Nm,wu(n,0),_l(n,e),ts(n,li()),t;if(t===6)throw Error(ke(345));return n.finishedWork=n.current.alternate,n.finishedLanes=e,su(n,$r,ha),ts(n,li()),null}function UC(n,e){var t=gn;gn|=1;try{return n(e)}finally{gn=t,gn===0&&(Xd=li()+500,D_&&hc())}}function ku(n){Ml!==null&&Ml.tag===0&&!(gn&6)&&kd();var e=gn;gn|=1;var t=Ws.transition,i=Mn;try{if(Ws.transition=null,Mn=1,n)return n()}finally{Mn=i,Ws.transition=t,gn=e,!(gn&6)&&hc()}}function jC(){ms=pd.current,jn(pd)}function wu(n,e){n.finishedWork=null,n.finishedLanes=0;var t=n.timeoutHandle;if(t!==-1&&(n.timeoutHandle=-1,CG(t)),vi!==null)for(t=vi.return;t!==null;){var i=t;switch(vC(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&Xx();break;case 3:qd(),jn(Zr),jn(wr),AC();break;case 5:CC(i);break;case 4:qd();break;case 13:jn(Gn);break;case 19:jn(Gn);break;case 10:bC(i.type._context);break;case 22:case 23:jC()}t=t.return}if(ji=n,vi=n=Fl(n.current,null),Ki=ms=e,Ai=0,Nm=null,kC=U_=Lu=0,$r=Xp=null,pu!==null){for(e=0;e<pu.length;e++)if(t=pu[e],i=t.interleaved,i!==null){t.interleaved=null;var r=i.next,s=t.pending;if(s!==null){var o=s.next;s.next=r,i.next=o}t.pending=i}pu=null}return n}function CU(n,e){do{var t=vi;try{if(wC(),px.current=i0,n0){for(var i=$n.memoizedState;i!==null;){var r=i.queue;r!==null&&(r.pending=null),i=i.next}n0=!1}if(Du=0,Ui=Ci=$n=null,qp=!1,Im=0,LC.current=null,t===null||t.return===null){Ai=1,Nm=e,vi=null;break}e:{var s=n,o=t.return,a=t,l=e;if(e=Ki,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var c=l,u=a,p=u.tag;if(!(u.mode&1)&&(p===0||p===11||p===15)){var m=u.alternate;m?(u.updateQueue=m.updateQueue,u.memoizedState=m.memoizedState,u.lanes=m.lanes):(u.updateQueue=null,u.memoizedState=null)}var g=OR(o);if(g!==null){g.flags&=-257,UR(g,o,a,s,e),g.mode&1&&kR(s,c,e),e=g,l=c;var x=e.updateQueue;if(x===null){var b=new Set;b.add(l),e.updateQueue=b}else x.add(l);break e}else{if(!(e&1)){kR(s,c,e),FC();break e}l=Error(ke(426))}}else if(zn&&a.mode&1){var w=OR(o);if(w!==null){!(w.flags&65536)&&(w.flags|=256),UR(w,o,a,s,e),xC($d(l,a));break e}}s=l=$d(l,a),Ai!==4&&(Ai=2),Xp===null?Xp=[s]:Xp.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var v=cU(s,l,e);IR(s,v);break e;case 1:a=l;var S=s.type,E=s.stateNode;if(!(s.flags&128)&&(typeof S.getDerivedStateFromError=="function"||E!==null&&typeof E.componentDidCatch=="function"&&(Ul===null||!Ul.has(E)))){s.flags|=65536,e&=-e,s.lanes|=e;var C=uU(s,a,e);IR(s,C);break e}}s=s.return}while(s!==null)}IU(t)}catch(U){e=U,vi===t&&t!==null&&(vi=t=t.return);continue}break}while(!0)}function AU(){var n=r0.current;return r0.current=i0,n===null?i0:n}function FC(){(Ai===0||Ai===3||Ai===2)&&(Ai=4),ji===null||!(Lu&268435455)&&!(U_&268435455)||_l(ji,Ki)}function a0(n,e){var t=gn;gn|=2;var i=AU();(ji!==n||Ki!==e)&&(ha=null,wu(n,e));do try{JG();break}catch(r){CU(n,r)}while(!0);if(wC(),gn=t,r0.current=i,vi!==null)throw Error(ke(261));return ji=null,Ki=0,Ai}function JG(){for(;vi!==null;)MU(vi)}function QG(){for(;vi!==null&&!SH();)MU(vi)}function MU(n){var e=RU(n.alternate,n,ms);n.memoizedProps=n.pendingProps,e===null?IU(n):vi=e,LC.current=null}function IU(n){var e=n;do{var t=e.alternate;if(n=e.return,e.flags&32768){if(t=WG(t,e),t!==null){t.flags&=32767,vi=t;return}if(n!==null)n.flags|=32768,n.subtreeFlags=0,n.deletions=null;else{Ai=6,vi=null;return}}else if(t=GG(t,e,ms),t!==null){vi=t;return}if(e=e.sibling,e!==null){vi=e;return}vi=e=n}while(e!==null);Ai===0&&(Ai=5)}function su(n,e,t){var i=Mn,r=Ws.transition;try{Ws.transition=null,Mn=1,ZG(n,e,t,i)}finally{Ws.transition=r,Mn=i}return null}function ZG(n,e,t,i){do kd();while(Ml!==null);if(gn&6)throw Error(ke(327));t=n.finishedWork;var r=n.finishedLanes;if(t===null)return null;if(n.finishedWork=null,n.finishedLanes=0,t===n.current)throw Error(ke(177));n.callbackNode=null,n.callbackPriority=0;var s=t.lanes|t.childLanes;if(DH(n,s),n===ji&&(vi=ji=null,Ki=0),!(t.subtreeFlags&2064)&&!(t.flags&2064)||tv||(tv=!0,NU(zx,function(){return kd(),null})),s=(t.flags&15990)!==0,t.subtreeFlags&15990||s){s=Ws.transition,Ws.transition=null;var o=Mn;Mn=1;var a=gn;gn|=4,LC.current=null,$G(n,t),SU(t,n),xG(hE),Gx=!!uE,hE=uE=null,n.current=t,XG(t),TH(),gn=a,Mn=o,Ws.transition=s}else n.current=t;if(tv&&(tv=!1,Ml=n,o0=r),s=n.pendingLanes,s===0&&(Ul=null),AH(t.stateNode),ts(n,li()),e!==null)for(i=n.onRecoverableError,t=0;t<e.length;t++)r=e[t],i(r.value,{componentStack:r.stack,digest:r.digest});if(s0)throw s0=!1,n=RE,RE=null,n;return o0&1&&n.tag!==0&&kd(),s=n.pendingLanes,s&1?n===NE?Kp++:(Kp=0,NE=n):Kp=0,hc(),null}function kd(){if(Ml!==null){var n=cO(o0),e=Ws.transition,t=Mn;try{if(Ws.transition=null,Mn=16>n?16:n,Ml===null)var i=!1;else{if(n=Ml,Ml=null,o0=0,gn&6)throw Error(ke(331));var r=gn;for(gn|=4,ct=n.current;ct!==null;){var s=ct,o=s.child;if(ct.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var c=a[l];for(ct=c;ct!==null;){var u=ct;switch(u.tag){case 0:case 11:case 15:$p(8,u,s)}var p=u.child;if(p!==null)p.return=u,ct=p;else for(;ct!==null;){u=ct;var m=u.sibling,g=u.return;if(_U(u),u===c){ct=null;break}if(m!==null){m.return=g,ct=m;break}ct=g}}}var x=s.alternate;if(x!==null){var b=x.child;if(b!==null){x.child=null;do{var w=b.sibling;b.sibling=null,b=w}while(b!==null)}}ct=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,ct=o;else e:for(;ct!==null;){if(s=ct,s.flags&2048)switch(s.tag){case 0:case 11:case 15:$p(9,s,s.return)}var v=s.sibling;if(v!==null){v.return=s.return,ct=v;break e}ct=s.return}}var S=n.current;for(ct=S;ct!==null;){o=ct;var E=o.child;if(o.subtreeFlags&2064&&E!==null)E.return=o,ct=E;else e:for(o=S;ct!==null;){if(a=ct,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:O_(9,a)}}catch(U){ei(a,a.return,U)}if(a===o){ct=null;break e}var C=a.sibling;if(C!==null){C.return=a.return,ct=C;break e}ct=a.return}}if(gn=r,hc(),Oo&&typeof Oo.onPostCommitFiberRoot=="function")try{Oo.onPostCommitFiberRoot(M_,n)}catch{}i=!0}return i}finally{Mn=t,Ws.transition=e}}return!1}function YR(n,e,t){e=$d(t,e),e=cU(n,e,1),n=Ol(n,e,1),e=Dr(),n!==null&&(xg(n,1,e),ts(n,e))}function ei(n,e,t){if(n.tag===3)YR(n,n,t);else for(;e!==null;){if(e.tag===3){YR(e,n,t);break}else if(e.tag===1){var i=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(Ul===null||!Ul.has(i))){n=$d(t,n),n=uU(e,n,1),e=Ol(e,n,1),n=Dr(),e!==null&&(xg(e,1,n),ts(e,n));break}}e=e.return}}function eW(n,e,t){var i=n.pingCache;i!==null&&i.delete(e),e=Dr(),n.pingedLanes|=n.suspendedLanes&t,ji===n&&(Ki&t)===t&&(Ai===4||Ai===3&&(Ki&130023424)===Ki&&500>li()-OC?wu(n,0):kC|=t),ts(n,e)}function PU(n,e){e===0&&(n.mode&1?(e=Wy,Wy<<=1,!(Wy&130023424)&&(Wy=4194304)):e=1);var t=Dr();n=Pa(n,e),n!==null&&(xg(n,e,t),ts(n,t))}function tW(n){var e=n.memoizedState,t=0;e!==null&&(t=e.retryLane),PU(n,t)}function nW(n,e){var t=0;switch(n.tag){case 13:var i=n.stateNode,r=n.memoizedState;r!==null&&(t=r.retryLane);break;case 19:i=n.stateNode;break;default:throw Error(ke(314))}i!==null&&i.delete(e),PU(n,t)}var RU;RU=function(n,e,t){if(n!==null)if(n.memoizedProps!==e.pendingProps||Zr.current)Jr=!0;else{if(!(n.lanes&t)&&!(e.flags&128))return Jr=!1,HG(n,e,t);Jr=!!(n.flags&131072)}else Jr=!1,zn&&e.flags&1048576&&kO(e,Jx,e.index);switch(e.lanes=0,e.tag){case 2:var i=e.type;gx(n,e),n=e.pendingProps;var r=Hd(e,wr.current);Ld(e,t),r=IC(null,e,i,n,r,t);var s=PC();return e.flags|=1,typeof r=="object"&&r!==null&&typeof r.render=="function"&&r.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,es(i)?(s=!0,Kx(e)):s=!1,e.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,TC(e),r.updater=k_,e.stateNode=r,r._reactInternals=e,_E(e,i,n,t),e=SE(null,e,i,!0,s,t)):(e.tag=0,zn&&s&&yC(e),Rr(null,e,r,t),e=e.child),e;case 16:i=e.elementType;e:{switch(gx(n,e),n=e.pendingProps,r=i._init,i=r(i._payload),e.type=i,r=e.tag=rW(i),n=so(i,n),r){case 0:e=bE(null,e,i,n,t);break e;case 1:e=VR(null,e,i,n,t);break e;case 11:e=jR(null,e,i,n,t);break e;case 14:e=FR(null,e,i,so(i.type,n),t);break e}throw Error(ke(306,i,""))}return e;case 0:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:so(i,r),bE(n,e,i,r,t);case 1:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:so(i,r),VR(n,e,i,r,t);case 3:e:{if(pU(e),n===null)throw Error(ke(387));i=e.pendingProps,s=e.memoizedState,r=s.element,BO(n,e),e0(e,i,null,t);var o=e.memoizedState;if(i=o.element,s.isDehydrated)if(s={element:i,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){r=$d(Error(ke(423)),e),e=BR(n,e,i,t,r);break e}else if(i!==r){r=$d(Error(ke(424)),e),e=BR(n,e,i,t,r);break e}else for(gs=kl(e.stateNode.containerInfo.firstChild),vs=e,zn=!0,lo=null,t=FO(e,null,i,t),e.child=t;t;)t.flags=t.flags&-3|4096,t=t.sibling;else{if(Gd(),i===r){e=Ra(n,e,t);break e}Rr(n,e,i,t)}e=e.child}return e;case 5:return zO(e),n===null&&yE(e),i=e.type,r=e.pendingProps,s=n!==null?n.memoizedProps:null,o=r.children,dE(i,r)?o=null:s!==null&&dE(i,s)&&(e.flags|=32),fU(n,e),Rr(n,e,o,t),e.child;case 6:return n===null&&yE(e),null;case 13:return mU(n,e,t);case 4:return EC(e,e.stateNode.containerInfo),i=e.pendingProps,n===null?e.child=Wd(e,null,i,t):Rr(n,e,i,t),e.child;case 11:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:so(i,r),jR(n,e,i,r,t);case 7:return Rr(n,e,e.pendingProps,t),e.child;case 8:return Rr(n,e,e.pendingProps.children,t),e.child;case 12:return Rr(n,e,e.pendingProps.children,t),e.child;case 10:e:{if(i=e.type._context,r=e.pendingProps,s=e.memoizedProps,o=r.value,Ln(Qx,i._currentValue),i._currentValue=o,s!==null)if(go(s.value,o)){if(s.children===r.children&&!Zr.current){e=Ra(n,e,t);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===i){if(s.tag===1){l=wa(-1,t&-t),l.tag=2;var c=s.updateQueue;if(c!==null){c=c.shared;var u=c.pending;u===null?l.next=l:(l.next=u.next,u.next=l),c.pending=l}}s.lanes|=t,l=s.alternate,l!==null&&(l.lanes|=t),vE(s.return,t,e),a.lanes|=t;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(ke(341));o.lanes|=t,a=o.alternate,a!==null&&(a.lanes|=t),vE(o,t,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}Rr(n,e,r.children,t),e=e.child}return e;case 9:return r=e.type,i=e.pendingProps.children,Ld(e,t),r=qs(r),i=i(r),e.flags|=1,Rr(n,e,i,t),e.child;case 14:return i=e.type,r=so(i,e.pendingProps),r=so(i.type,r),FR(n,e,i,r,t);case 15:return hU(n,e,e.type,e.pendingProps,t);case 17:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:so(i,r),gx(n,e),e.tag=1,es(i)?(n=!0,Kx(e)):n=!1,Ld(e,t),lU(e,i,r),_E(e,i,r,t),SE(null,e,i,!0,n,t);case 19:return gU(n,e,t);case 22:return dU(n,e,t)}throw Error(ke(156,e.tag))};function NU(n,e){return sO(n,e)}function iW(n,e,t,i){this.tag=n,this.key=t,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Hs(n,e,t,i){return new iW(n,e,t,i)}function VC(n){return n=n.prototype,!(!n||!n.isReactComponent)}function rW(n){if(typeof n=="function")return VC(n)?1:0;if(n!=null){if(n=n.$$typeof,n===sC)return 11;if(n===oC)return 14}return 2}function Fl(n,e){var t=n.alternate;return t===null?(t=Hs(n.tag,e,n.key,n.mode),t.elementType=n.elementType,t.type=n.type,t.stateNode=n.stateNode,t.alternate=n,n.alternate=t):(t.pendingProps=e,t.type=n.type,t.flags=0,t.subtreeFlags=0,t.deletions=null),t.flags=n.flags&14680064,t.childLanes=n.childLanes,t.lanes=n.lanes,t.child=n.child,t.memoizedProps=n.memoizedProps,t.memoizedState=n.memoizedState,t.updateQueue=n.updateQueue,e=n.dependencies,t.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},t.sibling=n.sibling,t.index=n.index,t.ref=n.ref,t}function xx(n,e,t,i,r,s){var o=2;if(i=n,typeof n=="function")VC(n)&&(o=1);else if(typeof n=="string")o=5;else e:switch(n){case rd:return bu(t.children,r,s,e);case rC:o=8,r|=8;break;case GT:return n=Hs(12,t,e,r|2),n.elementType=GT,n.lanes=s,n;case WT:return n=Hs(13,t,e,r),n.elementType=WT,n.lanes=s,n;case qT:return n=Hs(19,t,e,r),n.elementType=qT,n.lanes=s,n;case z3:return j_(t,r,s,e);default:if(typeof n=="object"&&n!==null)switch(n.$$typeof){case V3:o=10;break e;case B3:o=9;break e;case sC:o=11;break e;case oC:o=14;break e;case ml:o=16,i=null;break e}throw Error(ke(130,n==null?n:typeof n,""))}return e=Hs(o,t,e,r),e.elementType=n,e.type=i,e.lanes=s,e}function bu(n,e,t,i){return n=Hs(7,n,i,e),n.lanes=t,n}function j_(n,e,t,i){return n=Hs(22,n,i,e),n.elementType=z3,n.lanes=t,n.stateNode={isHidden:!1},n}function xS(n,e,t){return n=Hs(6,n,null,e),n.lanes=t,n}function _S(n,e,t){return e=Hs(4,n.children!==null?n.children:[],n.key,e),e.lanes=t,e.stateNode={containerInfo:n.containerInfo,pendingChildren:null,implementation:n.implementation},e}function sW(n,e,t,i,r){this.tag=e,this.containerInfo=n,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=eS(0),this.expirationTimes=eS(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=eS(0),this.identifierPrefix=i,this.onRecoverableError=r,this.mutableSourceEagerHydrationData=null}function BC(n,e,t,i,r,s,o,a,l){return n=new sW(n,e,t,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=Hs(3,null,null,e),n.current=s,s.stateNode=n,s.memoizedState={element:i,isDehydrated:t,cache:null,transitions:null,pendingSuspenseBoundaries:null},TC(s),n}function oW(n,e,t){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:id,key:i==null?null:""+i,children:n,containerInfo:e,implementation:t}}function DU(n){if(!n)return Xl;n=n._reactInternals;e:{if(Yu(n)!==n||n.tag!==1)throw Error(ke(170));var e=n;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(es(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(ke(171))}if(n.tag===1){var t=n.type;if(es(t))return DO(n,t,e)}return e}function LU(n,e,t,i,r,s,o,a,l){return n=BC(t,i,!0,n,r,s,o,a,l),n.context=DU(null),t=n.current,i=Dr(),r=jl(t),s=wa(i,r),s.callback=e??null,Ol(t,s,r),n.current.lanes=r,xg(n,r,i),ts(n,i),n}function F_(n,e,t,i){var r=e.current,s=Dr(),o=jl(r);return t=DU(t),e.context===null?e.context=t:e.pendingContext=t,e=wa(s,o),e.payload={element:n},i=i===void 0?null:i,i!==null&&(e.callback=i),n=Ol(r,e,o),n!==null&&(po(n,r,o,s),fx(n,r,o)),o}function l0(n){if(n=n.current,!n.child)return null;switch(n.child.tag){case 5:return n.child.stateNode;default:return n.child.stateNode}}function JR(n,e){if(n=n.memoizedState,n!==null&&n.dehydrated!==null){var t=n.retryLane;n.retryLane=t!==0&&t<e?t:e}}function zC(n,e){JR(n,e),(n=n.alternate)&&JR(n,e)}function aW(){return null}var kU=typeof reportError=="function"?reportError:function(n){console.error(n)};function HC(n){this._internalRoot=n}V_.prototype.render=HC.prototype.render=function(n){var e=this._internalRoot;if(e===null)throw Error(ke(409));F_(n,e,null,null)};V_.prototype.unmount=HC.prototype.unmount=function(){var n=this._internalRoot;if(n!==null){this._internalRoot=null;var e=n.containerInfo;ku(function(){F_(null,n,null,null)}),e[Ia]=null}};function V_(n){this._internalRoot=n}V_.prototype.unstable_scheduleHydration=function(n){if(n){var e=dO();n={blockedOn:null,target:n,priority:e};for(var t=0;t<xl.length&&e!==0&&e<xl[t].priority;t++);xl.splice(t,0,n),t===0&&pO(n)}};function GC(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11)}function B_(n){return!(!n||n.nodeType!==1&&n.nodeType!==9&&n.nodeType!==11&&(n.nodeType!==8||n.nodeValue!==" react-mount-point-unstable "))}function QR(){}function lW(n,e,t,i,r){if(r){if(typeof i=="function"){var s=i;i=function(){var c=l0(o);s.call(c)}}var o=LU(e,i,n,0,null,!1,!1,"",QR);return n._reactRootContainer=o,n[Ia]=o.current,Tm(n.nodeType===8?n.parentNode:n),ku(),o}for(;r=n.lastChild;)n.removeChild(r);if(typeof i=="function"){var a=i;i=function(){var c=l0(l);a.call(c)}}var l=BC(n,0,!1,null,null,!1,!1,"",QR);return n._reactRootContainer=l,n[Ia]=l.current,Tm(n.nodeType===8?n.parentNode:n),ku(function(){F_(e,l,t,i)}),l}function z_(n,e,t,i,r){var s=t._reactRootContainer;if(s){var o=s;if(typeof r=="function"){var a=r;r=function(){var l=l0(o);a.call(l)}}F_(e,o,n,r)}else o=lW(t,e,n,r,i);return l0(o)}uO=function(n){switch(n.tag){case 3:var e=n.stateNode;if(e.current.memoizedState.isDehydrated){var t=Mp(e.pendingLanes);t!==0&&(cC(e,t|1),ts(e,li()),!(gn&6)&&(Xd=li()+500,hc()))}break;case 13:ku(function(){var i=Pa(n,1);if(i!==null){var r=Dr();po(i,n,1,r)}}),zC(n,1)}};uC=function(n){if(n.tag===13){var e=Pa(n,134217728);if(e!==null){var t=Dr();po(e,n,134217728,t)}zC(n,134217728)}};hO=function(n){if(n.tag===13){var e=jl(n),t=Pa(n,e);if(t!==null){var i=Dr();po(t,n,e,i)}zC(n,e)}};dO=function(){return Mn};fO=function(n,e){var t=Mn;try{return Mn=n,e()}finally{Mn=t}};nE=function(n,e,t){switch(e){case"input":if(KT(n,t),e=t.name,t.type==="radio"&&e!=null){for(t=n;t.parentNode;)t=t.parentNode;for(t=t.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<t.length;e++){var i=t[e];if(i!==n&&i.form===n.form){var r=N_(i);if(!r)throw Error(ke(90));G3(i),KT(i,r)}}}break;case"textarea":q3(n,t);break;case"select":e=t.value,e!=null&&Pd(n,!!t.multiple,e,!1)}};Z3=UC;eO=ku;var cW={usingClientEntryPoint:!1,Events:[wg,ld,N_,J3,Q3,UC]},lp={findFiberByHostInstance:fu,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},uW={bundleType:lp.bundleType,version:lp.version,rendererPackageName:lp.rendererPackageName,rendererConfig:lp.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Ba.ReactCurrentDispatcher,findHostInstanceByFiber:function(n){return n=iO(n),n===null?null:n.stateNode},findFiberByHostInstance:lp.findFiberByHostInstance||aW,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var nv=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!nv.isDisabled&&nv.supportsFiber)try{M_=nv.inject(uW),Oo=nv}catch{}}Es.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=cW;Es.createPortal=function(n,e){var t=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!GC(e))throw Error(ke(200));return oW(n,e,null,t)};Es.createRoot=function(n,e){if(!GC(n))throw Error(ke(299));var t=!1,i="",r=kU;return e!=null&&(e.unstable_strictMode===!0&&(t=!0),e.identifierPrefix!==void 0&&(i=e.identifierPrefix),e.onRecoverableError!==void 0&&(r=e.onRecoverableError)),e=BC(n,1,!1,null,null,t,!1,i,r),n[Ia]=e.current,Tm(n.nodeType===8?n.parentNode:n),new HC(e)};Es.findDOMNode=function(n){if(n==null)return null;if(n.nodeType===1)return n;var e=n._reactInternals;if(e===void 0)throw typeof n.render=="function"?Error(ke(188)):(n=Object.keys(n).join(","),Error(ke(268,n)));return n=iO(e),n=n===null?null:n.stateNode,n};Es.flushSync=function(n){return ku(n)};Es.hydrate=function(n,e,t){if(!B_(e))throw Error(ke(200));return z_(null,n,e,!0,t)};Es.hydrateRoot=function(n,e,t){if(!GC(n))throw Error(ke(405));var i=t!=null&&t.hydratedSources||null,r=!1,s="",o=kU;if(t!=null&&(t.unstable_strictMode===!0&&(r=!0),t.identifierPrefix!==void 0&&(s=t.identifierPrefix),t.onRecoverableError!==void 0&&(o=t.onRecoverableError)),e=LU(e,null,n,1,t??null,r,!1,s,o),n[Ia]=e.current,Tm(n),i)for(n=0;n<i.length;n++)t=i[n],r=t._getVersion,r=r(t._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[t,r]:e.mutableSourceEagerHydrationData.push(t,r);return new V_(e)};Es.render=function(n,e,t){if(!B_(e))throw Error(ke(200));return z_(null,n,e,!1,t)};Es.unmountComponentAtNode=function(n){if(!B_(n))throw Error(ke(40));return n._reactRootContainer?(ku(function(){z_(null,null,n,!1,function(){n._reactRootContainer=null,n[Ia]=null})}),!0):!1};Es.unstable_batchedUpdates=UC;Es.unstable_renderSubtreeIntoContainer=function(n,e,t,i){if(!B_(t))throw Error(ke(200));if(n==null||n._reactInternals===void 0)throw Error(ke(38));return z_(n,e,t,!1,i)};Es.version="18.3.1-next-f1338f8080-20240426";function OU(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(OU)}catch(n){console.error(n)}}OU(),O3.exports=Es;var hW=O3.exports,UU,ZR=hW;UU=zT.createRoot=ZR.createRoot,zT.hydrateRoot=ZR.hydrateRoot;/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Dm(){return Dm=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},Dm.apply(this,arguments)}var Il;(function(n){n.Pop="POP",n.Push="PUSH",n.Replace="REPLACE"})(Il||(Il={}));const eN="popstate";function dW(n){n===void 0&&(n={});function e(r,s){let{pathname:o="/",search:a="",hash:l=""}=Ju(r.location.hash.substr(1));return!o.startsWith("/")&&!o.startsWith(".")&&(o="/"+o),kE("",{pathname:o,search:a,hash:l},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function t(r,s){let o=r.document.querySelector("base"),a="";if(o&&o.getAttribute("href")){let l=r.location.href,c=l.indexOf("#");a=c===-1?l:l.slice(0,c)}return a+"#"+(typeof s=="string"?s:c0(s))}function i(r,s){WC(r.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(s)+")")}return pW(e,t,i,n)}function wi(n,e){if(n===!1||n===null||typeof n>"u")throw new Error(e)}function WC(n,e){if(!n){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function fW(){return Math.random().toString(36).substr(2,8)}function tN(n,e){return{usr:n.state,key:n.key,idx:e}}function kE(n,e,t,i){return t===void 0&&(t=null),Dm({pathname:typeof n=="string"?n:n.pathname,search:"",hash:""},typeof e=="string"?Ju(e):e,{state:t,key:e&&e.key||i||fW()})}function c0(n){let{pathname:e="/",search:t="",hash:i=""}=n;return t&&t!=="?"&&(e+=t.charAt(0)==="?"?t:"?"+t),i&&i!=="#"&&(e+=i.charAt(0)==="#"?i:"#"+i),e}function Ju(n){let e={};if(n){let t=n.indexOf("#");t>=0&&(e.hash=n.substr(t),n=n.substr(0,t));let i=n.indexOf("?");i>=0&&(e.search=n.substr(i),n=n.substr(0,i)),n&&(e.pathname=n)}return e}function pW(n,e,t,i){i===void 0&&(i={});let{window:r=document.defaultView,v5Compat:s=!1}=i,o=r.history,a=Il.Pop,l=null,c=u();c==null&&(c=0,o.replaceState(Dm({},o.state,{idx:c}),""));function u(){return(o.state||{idx:null}).idx}function p(){a=Il.Pop;let w=u(),v=w==null?null:w-c;c=w,l&&l({action:a,location:b.location,delta:v})}function m(w,v){a=Il.Push;let S=kE(b.location,w,v);t&&t(S,w),c=u()+1;let E=tN(S,c),C=b.createHref(S);try{o.pushState(E,"",C)}catch(U){if(U instanceof DOMException&&U.name==="DataCloneError")throw U;r.location.assign(C)}s&&l&&l({action:a,location:b.location,delta:1})}function g(w,v){a=Il.Replace;let S=kE(b.location,w,v);t&&t(S,w),c=u();let E=tN(S,c),C=b.createHref(S);o.replaceState(E,"",C),s&&l&&l({action:a,location:b.location,delta:0})}function x(w){let v=r.location.origin!=="null"?r.location.origin:r.location.href,S=typeof w=="string"?w:c0(w);return S=S.replace(/ $/,"%20"),wi(v,"No window.location.(origin|href) available to create URL for href: "+S),new URL(S,v)}let b={get action(){return a},get location(){return n(r,o)},listen(w){if(l)throw new Error("A history only accepts one active listener");return r.addEventListener(eN,p),l=w,()=>{r.removeEventListener(eN,p),l=null}},createHref(w){return e(r,w)},createURL:x,encodeLocation(w){let v=x(w);return{pathname:v.pathname,search:v.search,hash:v.hash}},push:m,replace:g,go(w){return o.go(w)}};return b}var nN;(function(n){n.data="data",n.deferred="deferred",n.redirect="redirect",n.error="error"})(nN||(nN={}));function mW(n,e,t){return t===void 0&&(t="/"),gW(n,e,t)}function gW(n,e,t,i){let r=typeof e=="string"?Ju(e):e,s=qC(r.pathname||"/",t);if(s==null)return null;let o=jU(n);yW(o);let a=null;for(let l=0;a==null&&l<o.length;++l){let c=IW(s);a=CW(o[l],c)}return a}function jU(n,e,t,i){e===void 0&&(e=[]),t===void 0&&(t=[]),i===void 0&&(i="");let r=(s,o,a)=>{let l={relativePath:a===void 0?s.path||"":a,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};l.relativePath.startsWith("/")&&(wi(l.relativePath.startsWith(i),'Absolute route path "'+l.relativePath+'" nested under path '+('"'+i+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),l.relativePath=l.relativePath.slice(i.length));let c=Vl([i,l.relativePath]),u=t.concat(l);s.children&&s.children.length>0&&(wi(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),jU(s.children,e,u,c)),!(s.path==null&&!s.index)&&e.push({path:c,score:TW(c,s.index),routesMeta:u})};return n.forEach((s,o)=>{var a;if(s.path===""||!((a=s.path)!=null&&a.includes("?")))r(s,o);else for(let l of FU(s.path))r(s,o,l)}),e}function FU(n){let e=n.split("/");if(e.length===0)return[];let[t,...i]=e,r=t.endsWith("?"),s=t.replace(/\?$/,"");if(i.length===0)return r?[s,""]:[s];let o=FU(i.join("/")),a=[];return a.push(...o.map(l=>l===""?s:[s,l].join("/"))),r&&a.push(...o),a.map(l=>n.startsWith("/")&&l===""?"/":l)}function yW(n){n.sort((e,t)=>e.score!==t.score?t.score-e.score:EW(e.routesMeta.map(i=>i.childrenIndex),t.routesMeta.map(i=>i.childrenIndex)))}const vW=/^:[\w-]+$/,xW=3,_W=2,wW=1,bW=10,SW=-2,iN=n=>n==="*";function TW(n,e){let t=n.split("/"),i=t.length;return t.some(iN)&&(i+=SW),e&&(i+=_W),t.filter(r=>!iN(r)).reduce((r,s)=>r+(vW.test(s)?xW:s===""?wW:bW),i)}function EW(n,e){return n.length===e.length&&n.slice(0,-1).every((i,r)=>i===e[r])?n[n.length-1]-e[e.length-1]:0}function CW(n,e,t){let{routesMeta:i}=n,r={},s="/",o=[];for(let a=0;a<i.length;++a){let l=i[a],c=a===i.length-1,u=s==="/"?e:e.slice(s.length)||"/",p=AW({path:l.relativePath,caseSensitive:l.caseSensitive,end:c},u),m=l.route;if(!p)return null;Object.assign(r,p.params),o.push({params:r,pathname:Vl([s,p.pathname]),pathnameBase:DW(Vl([s,p.pathnameBase])),route:m}),p.pathnameBase!=="/"&&(s=Vl([s,p.pathnameBase]))}return o}function AW(n,e){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[t,i]=MW(n.path,n.caseSensitive,n.end),r=e.match(t);if(!r)return null;let s=r[0],o=s.replace(/(.)\/+$/,"$1"),a=r.slice(1);return{params:i.reduce((c,u,p)=>{let{paramName:m,isOptional:g}=u;if(m==="*"){let b=a[p]||"";o=s.slice(0,s.length-b.length).replace(/(.)\/+$/,"$1")}const x=a[p];return g&&!x?c[m]=void 0:c[m]=(x||"").replace(/%2F/g,"/"),c},{}),pathname:s,pathnameBase:o,pattern:n}}function MW(n,e,t){e===void 0&&(e=!1),t===void 0&&(t=!0),WC(n==="*"||!n.endsWith("*")||n.endsWith("/*"),'Route path "'+n+'" will be treated as if it were '+('"'+n.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+n.replace(/\*$/,"/*")+'".'));let i=[],r="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,a,l)=>(i.push({paramName:a,isOptional:l!=null}),l?"/?([^\\/]+)?":"/([^\\/]+)"));return n.endsWith("*")?(i.push({paramName:"*"}),r+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):t?r+="\\/*$":n!==""&&n!=="/"&&(r+="(?:(?=\\/|$))"),[new RegExp(r,e?void 0:"i"),i]}function IW(n){try{return n.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return WC(!1,'The URL path "'+n+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),n}}function qC(n,e){if(e==="/")return n;if(!n.toLowerCase().startsWith(e.toLowerCase()))return null;let t=e.endsWith("/")?e.length-1:e.length,i=n.charAt(t);return i&&i!=="/"?null:n.slice(t)||"/"}function PW(n,e){e===void 0&&(e="/");let{pathname:t,search:i="",hash:r=""}=typeof n=="string"?Ju(n):n;return{pathname:t?t.startsWith("/")?t:RW(t,e):e,search:LW(i),hash:kW(r)}}function RW(n,e){let t=e.replace(/\/+$/,"").split("/");return n.split("/").forEach(r=>{r===".."?t.length>1&&t.pop():r!=="."&&t.push(r)}),t.length>1?t.join("/"):"/"}function wS(n,e,t,i){return"Cannot include a '"+n+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(i)+"].  Please separate it out to the ")+("`to."+t+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function NW(n){return n.filter((e,t)=>t===0||e.route.path&&e.route.path.length>0)}function VU(n,e){let t=NW(n);return e?t.map((i,r)=>r===t.length-1?i.pathname:i.pathnameBase):t.map(i=>i.pathnameBase)}function BU(n,e,t,i){i===void 0&&(i=!1);let r;typeof n=="string"?r=Ju(n):(r=Dm({},n),wi(!r.pathname||!r.pathname.includes("?"),wS("?","pathname","search",r)),wi(!r.pathname||!r.pathname.includes("#"),wS("#","pathname","hash",r)),wi(!r.search||!r.search.includes("#"),wS("#","search","hash",r)));let s=n===""||r.pathname==="",o=s?"/":r.pathname,a;if(o==null)a=t;else{let p=e.length-1;if(!i&&o.startsWith("..")){let m=o.split("/");for(;m[0]==="..";)m.shift(),p-=1;r.pathname=m.join("/")}a=p>=0?e[p]:"/"}let l=PW(r,a),c=o&&o!=="/"&&o.endsWith("/"),u=(s||o===".")&&t.endsWith("/");return!l.pathname.endsWith("/")&&(c||u)&&(l.pathname+="/"),l}const Vl=n=>n.join("/").replace(/\/\/+/g,"/"),DW=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),LW=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,kW=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function OW(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}const zU=["post","put","patch","delete"];new Set(zU);const UW=["get",...zU];new Set(UW);/**
 * React Router v6.30.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Lm(){return Lm=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},Lm.apply(this,arguments)}const $C=V.createContext(null),jW=V.createContext(null),Qu=V.createContext(null),H_=V.createContext(null),dc=V.createContext({outlet:null,matches:[],isDataRoute:!1}),HU=V.createContext(null);function FW(n,e){let{relative:t}=e===void 0?{}:e;Sg()||wi(!1);let{basename:i,navigator:r}=V.useContext(Qu),{hash:s,pathname:o,search:a}=WU(n,{relative:t}),l=o;return i!=="/"&&(l=o==="/"?i:Vl([i,o])),r.createHref({pathname:l,search:a,hash:s})}function Sg(){return V.useContext(H_)!=null}function Ks(){return Sg()||wi(!1),V.useContext(H_).location}function GU(n){V.useContext(Qu).static||V.useLayoutEffect(n)}function Pt(){let{isDataRoute:n}=V.useContext(dc);return n?e9():VW()}function VW(){Sg()||wi(!1);let n=V.useContext($C),{basename:e,future:t,navigator:i}=V.useContext(Qu),{matches:r}=V.useContext(dc),{pathname:s}=Ks(),o=JSON.stringify(VU(r,t.v7_relativeSplatPath)),a=V.useRef(!1);return GU(()=>{a.current=!0}),V.useCallback(function(c,u){if(u===void 0&&(u={}),!a.current)return;if(typeof c=="number"){i.go(c);return}let p=BU(c,JSON.parse(o),s,u.relative==="path");n==null&&e!=="/"&&(p.pathname=p.pathname==="/"?e:Vl([e,p.pathname])),(u.replace?i.replace:i.push)(p,u.state,u)},[e,i,o,s,n])}const BW=V.createContext(null);function zW(n){let e=V.useContext(dc).outlet;return e&&V.createElement(BW.Provider,{value:n},e)}function WU(n,e){let{relative:t}=e===void 0?{}:e,{future:i}=V.useContext(Qu),{matches:r}=V.useContext(dc),{pathname:s}=Ks(),o=JSON.stringify(VU(r,i.v7_relativeSplatPath));return V.useMemo(()=>BU(n,JSON.parse(o),s,t==="path"),[n,o,s,t])}function HW(n,e){return GW(n,e)}function GW(n,e,t,i){Sg()||wi(!1);let{navigator:r,static:s}=V.useContext(Qu),{matches:o}=V.useContext(dc),a=o[o.length-1],l=a?a.params:{};a&&a.pathname;let c=a?a.pathnameBase:"/";a&&a.route;let u=Ks(),p;if(e){var m;let v=typeof e=="string"?Ju(e):e;c==="/"||(m=v.pathname)!=null&&m.startsWith(c)||wi(!1),p=v}else p=u;let g=p.pathname||"/",x=g;if(c!=="/"){let v=c.replace(/^\//,"").split("/");x="/"+g.replace(/^\//,"").split("/").slice(v.length).join("/")}let b=mW(n,{pathname:x}),w=KW(b&&b.map(v=>Object.assign({},v,{params:Object.assign({},l,v.params),pathname:Vl([c,r.encodeLocation?r.encodeLocation(v.pathname).pathname:v.pathname]),pathnameBase:v.pathnameBase==="/"?c:Vl([c,r.encodeLocation?r.encodeLocation(v.pathnameBase).pathname:v.pathnameBase])})),o,t,i);return e&&w?V.createElement(H_.Provider,{value:{location:Lm({pathname:"/",search:"",hash:"",state:null,key:"default"},p),navigationType:Il.Pop}},w):w}function WW(){let n=ZW(),e=OW(n)?n.status+" "+n.statusText:n instanceof Error?n.message:JSON.stringify(n),t=n instanceof Error?n.stack:null,r={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return V.createElement(V.Fragment,null,V.createElement("h2",null,"Unexpected Application Error!"),V.createElement("h3",{style:{fontStyle:"italic"}},e),t?V.createElement("pre",{style:r},t):null,null)}const qW=V.createElement(WW,null);class $W extends V.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,t){return t.location!==e.location||t.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:t.error,location:t.location,revalidation:e.revalidation||t.revalidation}}componentDidCatch(e,t){console.error("React Router caught the following error during render",e,t)}render(){return this.state.error!==void 0?V.createElement(dc.Provider,{value:this.props.routeContext},V.createElement(HU.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function XW(n){let{routeContext:e,match:t,children:i}=n,r=V.useContext($C);return r&&r.static&&r.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=t.route.id),V.createElement(dc.Provider,{value:e},i)}function KW(n,e,t,i){var r;if(e===void 0&&(e=[]),t===void 0&&(t=null),i===void 0&&(i=null),n==null){var s;if(!t)return null;if(t.errors)n=t.matches;else if((s=i)!=null&&s.v7_partialHydration&&e.length===0&&!t.initialized&&t.matches.length>0)n=t.matches;else return null}let o=n,a=(r=t)==null?void 0:r.errors;if(a!=null){let u=o.findIndex(p=>p.route.id&&a?.[p.route.id]!==void 0);u>=0||wi(!1),o=o.slice(0,Math.min(o.length,u+1))}let l=!1,c=-1;if(t&&i&&i.v7_partialHydration)for(let u=0;u<o.length;u++){let p=o[u];if((p.route.HydrateFallback||p.route.hydrateFallbackElement)&&(c=u),p.route.id){let{loaderData:m,errors:g}=t,x=p.route.loader&&m[p.route.id]===void 0&&(!g||g[p.route.id]===void 0);if(p.route.lazy||x){l=!0,c>=0?o=o.slice(0,c+1):o=[o[0]];break}}}return o.reduceRight((u,p,m)=>{let g,x=!1,b=null,w=null;t&&(g=a&&p.route.id?a[p.route.id]:void 0,b=p.route.errorElement||qW,l&&(c<0&&m===0?(t9("route-fallback"),x=!0,w=null):c===m&&(x=!0,w=p.route.hydrateFallbackElement||null)));let v=e.concat(o.slice(0,m+1)),S=()=>{let E;return g?E=b:x?E=w:p.route.Component?E=V.createElement(p.route.Component,null):p.route.element?E=p.route.element:E=u,V.createElement(XW,{match:p,routeContext:{outlet:u,matches:v,isDataRoute:t!=null},children:E})};return t&&(p.route.ErrorBoundary||p.route.errorElement||m===0)?V.createElement($W,{location:t.location,revalidation:t.revalidation,component:b,error:g,children:S(),routeContext:{outlet:null,matches:v,isDataRoute:!0}}):S()},null)}var qU=function(n){return n.UseBlocker="useBlocker",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n}(qU||{}),$U=function(n){return n.UseBlocker="useBlocker",n.UseLoaderData="useLoaderData",n.UseActionData="useActionData",n.UseRouteError="useRouteError",n.UseNavigation="useNavigation",n.UseRouteLoaderData="useRouteLoaderData",n.UseMatches="useMatches",n.UseRevalidator="useRevalidator",n.UseNavigateStable="useNavigate",n.UseRouteId="useRouteId",n}($U||{});function YW(n){let e=V.useContext($C);return e||wi(!1),e}function JW(n){let e=V.useContext(jW);return e||wi(!1),e}function QW(n){let e=V.useContext(dc);return e||wi(!1),e}function XU(n){let e=QW(),t=e.matches[e.matches.length-1];return t.route.id||wi(!1),t.route.id}function ZW(){var n;let e=V.useContext(HU),t=JW(),i=XU();return e!==void 0?e:(n=t.errors)==null?void 0:n[i]}function e9(){let{router:n}=YW(qU.UseNavigateStable),e=XU($U.UseNavigateStable),t=V.useRef(!1);return GU(()=>{t.current=!0}),V.useCallback(function(r,s){s===void 0&&(s={}),t.current&&(typeof r=="number"?n.navigate(r):n.navigate(r,Lm({fromRouteId:e},s)))},[n,e])}const rN={};function t9(n,e,t){rN[n]||(rN[n]=!0)}function n9(n,e){n?.v7_startTransition,n?.v7_relativeSplatPath}function i9(n){return zW(n.context)}function St(n){wi(!1)}function r9(n){let{basename:e="/",children:t=null,location:i,navigationType:r=Il.Pop,navigator:s,static:o=!1,future:a}=n;Sg()&&wi(!1);let l=e.replace(/^\/*/,"/"),c=V.useMemo(()=>({basename:l,navigator:s,static:o,future:Lm({v7_relativeSplatPath:!1},a)}),[l,a,s,o]);typeof i=="string"&&(i=Ju(i));let{pathname:u="/",search:p="",hash:m="",state:g=null,key:x="default"}=i,b=V.useMemo(()=>{let w=qC(u,l);return w==null?null:{location:{pathname:w,search:p,hash:m,state:g,key:x},navigationType:r}},[l,u,p,m,g,x,r]);return b==null?null:V.createElement(Qu.Provider,{value:c},V.createElement(H_.Provider,{children:t,value:b}))}function s9(n){let{children:e,location:t}=n;return HW(OE(e),t)}new Promise(()=>{});function OE(n,e){e===void 0&&(e=[]);let t=[];return V.Children.forEach(n,(i,r)=>{if(!V.isValidElement(i))return;let s=[...e,r];if(i.type===V.Fragment){t.push.apply(t,OE(i.props.children,s));return}i.type!==St&&wi(!1),!i.props.index||!i.props.children||wi(!1);let o={id:i.props.id||s.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,loader:i.props.loader,action:i.props.action,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(o.children=OE(i.props.children,s)),t.push(o)}),t}/**
 * React Router DOM v6.30.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function UE(){return UE=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},UE.apply(this,arguments)}function o9(n,e){if(n==null)return{};var t={},i=Object.keys(n),r,s;for(s=0;s<i.length;s++)r=i[s],!(e.indexOf(r)>=0)&&(t[r]=n[r]);return t}function a9(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function l9(n,e){return n.button===0&&(!e||e==="_self")&&!a9(n)}const c9=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],u9="6";try{window.__reactRouterVersion=u9}catch{}const h9="startTransition",sN=eH[h9];function d9(n){let{basename:e,children:t,future:i,window:r}=n,s=V.useRef();s.current==null&&(s.current=dW({window:r,v5Compat:!0}));let o=s.current,[a,l]=V.useState({action:o.action,location:o.location}),{v7_startTransition:c}=i||{},u=V.useCallback(p=>{c&&sN?sN(()=>l(p)):l(p)},[l,c]);return V.useLayoutEffect(()=>o.listen(u),[o,u]),V.useEffect(()=>n9(i),[i]),V.createElement(r9,{basename:e,children:t,location:a.location,navigationType:a.action,navigator:o,future:i})}const f9=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",p9=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,ns=V.forwardRef(function(e,t){let{onClick:i,relative:r,reloadDocument:s,replace:o,state:a,target:l,to:c,preventScrollReset:u,viewTransition:p}=e,m=o9(e,c9),{basename:g}=V.useContext(Qu),x,b=!1;if(typeof c=="string"&&p9.test(c)&&(x=c,f9))try{let E=new URL(window.location.href),C=c.startsWith("//")?new URL(E.protocol+c):new URL(c),U=qC(C.pathname,g);C.origin===E.origin&&U!=null?c=U+C.search+C.hash:b=!0}catch{}let w=FW(c,{relative:r}),v=m9(c,{replace:o,state:a,target:l,preventScrollReset:u,relative:r,viewTransition:p});function S(E){i&&i(E),E.defaultPrevented||v(E)}return V.createElement("a",UE({},m,{href:x||w,onClick:b||s?i:S,ref:t,target:l}))});var oN;(function(n){n.UseScrollRestoration="useScrollRestoration",n.UseSubmit="useSubmit",n.UseSubmitFetcher="useSubmitFetcher",n.UseFetcher="useFetcher",n.useViewTransitionState="useViewTransitionState"})(oN||(oN={}));var aN;(function(n){n.UseFetcher="useFetcher",n.UseFetchers="useFetchers",n.UseScrollRestoration="useScrollRestoration"})(aN||(aN={}));function m9(n,e){let{target:t,replace:i,state:r,preventScrollReset:s,relative:o,viewTransition:a}=e===void 0?{}:e,l=Pt(),c=Ks(),u=WU(n,{relative:o});return V.useCallback(p=>{if(l9(p,t)){p.preventDefault();let m=i!==void 0?i:c0(c)===c0(u);l(n,{replace:m,state:r,preventScrollReset:s,relative:o,viewTransition:a})}},[c,l,u,i,r,t,n,s,o,a])}var lN;(function(n){n.STRING="string",n.NUMBER="number",n.INTEGER="integer",n.BOOLEAN="boolean",n.ARRAY="array",n.OBJECT="object"})(lN||(lN={}));/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var cN;(function(n){n.LANGUAGE_UNSPECIFIED="language_unspecified",n.PYTHON="python"})(cN||(cN={}));var uN;(function(n){n.OUTCOME_UNSPECIFIED="outcome_unspecified",n.OUTCOME_OK="outcome_ok",n.OUTCOME_FAILED="outcome_failed",n.OUTCOME_DEADLINE_EXCEEDED="outcome_deadline_exceeded"})(uN||(uN={}));/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const hN=["user","model","function","system"];var md;(function(n){n.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",n.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",n.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",n.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",n.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT"})(md||(md={}));var gd;(function(n){n.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",n.BLOCK_NONE="BLOCK_NONE"})(gd||(gd={}));var dN;(function(n){n.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",n.NEGLIGIBLE="NEGLIGIBLE",n.LOW="LOW",n.MEDIUM="MEDIUM",n.HIGH="HIGH"})(dN||(dN={}));var fN;(function(n){n.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",n.SAFETY="SAFETY",n.OTHER="OTHER"})(fN||(fN={}));var Yp;(function(n){n.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",n.STOP="STOP",n.MAX_TOKENS="MAX_TOKENS",n.SAFETY="SAFETY",n.RECITATION="RECITATION",n.LANGUAGE="LANGUAGE",n.BLOCKLIST="BLOCKLIST",n.PROHIBITED_CONTENT="PROHIBITED_CONTENT",n.SPII="SPII",n.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",n.OTHER="OTHER"})(Yp||(Yp={}));var pN;(function(n){n.TASK_TYPE_UNSPECIFIED="TASK_TYPE_UNSPECIFIED",n.RETRIEVAL_QUERY="RETRIEVAL_QUERY",n.RETRIEVAL_DOCUMENT="RETRIEVAL_DOCUMENT",n.SEMANTIC_SIMILARITY="SEMANTIC_SIMILARITY",n.CLASSIFICATION="CLASSIFICATION",n.CLUSTERING="CLUSTERING"})(pN||(pN={}));var mN;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.AUTO="AUTO",n.ANY="ANY",n.NONE="NONE"})(mN||(mN={}));var gN;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.MODE_DYNAMIC="MODE_DYNAMIC"})(gN||(gN={}));/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xr extends Error{constructor(e){super(`[GoogleGenerativeAI Error]: ${e}`)}}class Ph extends Xr{constructor(e,t){super(e),this.response=t}}class KU extends Xr{constructor(e,t,i,r){super(e),this.status=t,this.statusText=i,this.errorDetails=r}}class Bl extends Xr{}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const g9="https://generativelanguage.googleapis.com",y9="v1beta",v9="0.22.0",x9="genai-js";var Ou;(function(n){n.GENERATE_CONTENT="generateContent",n.STREAM_GENERATE_CONTENT="streamGenerateContent",n.COUNT_TOKENS="countTokens",n.EMBED_CONTENT="embedContent",n.BATCH_EMBED_CONTENTS="batchEmbedContents"})(Ou||(Ou={}));class _9{constructor(e,t,i,r,s){this.model=e,this.task=t,this.apiKey=i,this.stream=r,this.requestOptions=s}toString(){var e,t;const i=((e=this.requestOptions)===null||e===void 0?void 0:e.apiVersion)||y9;let s=`${((t=this.requestOptions)===null||t===void 0?void 0:t.baseUrl)||g9}/${i}/${this.model}:${this.task}`;return this.stream&&(s+="?alt=sse"),s}}function w9(n){const e=[];return n?.apiClient&&e.push(n.apiClient),e.push(`${x9}/${v9}`),e.join(" ")}async function b9(n){var e;const t=new Headers;t.append("Content-Type","application/json"),t.append("x-goog-api-client",w9(n.requestOptions)),t.append("x-goog-api-key",n.apiKey);let i=(e=n.requestOptions)===null||e===void 0?void 0:e.customHeaders;if(i){if(!(i instanceof Headers))try{i=new Headers(i)}catch(r){throw new Bl(`unable to convert customHeaders value ${JSON.stringify(i)} to Headers: ${r.message}`)}for(const[r,s]of i.entries()){if(r==="x-goog-api-key")throw new Bl(`Cannot set reserved header name ${r}`);if(r==="x-goog-api-client")throw new Bl(`Header name ${r} can only be set using the apiClient field`);t.append(r,s)}}return t}async function S9(n,e,t,i,r,s){const o=new _9(n,e,t,i,s);return{url:o.toString(),fetchOptions:Object.assign(Object.assign({},A9(s)),{method:"POST",headers:await b9(o),body:r})}}async function Tg(n,e,t,i,r,s={},o=fetch){const{url:a,fetchOptions:l}=await S9(n,e,t,i,r,s);return T9(a,l,o)}async function T9(n,e,t=fetch){let i;try{i=await t(n,e)}catch(r){E9(r,n)}return i.ok||await C9(i,n),i}function E9(n,e){let t=n;throw n instanceof KU||n instanceof Bl||(t=new Xr(`Error fetching from ${e.toString()}: ${n.message}`),t.stack=n.stack),t}async function C9(n,e){let t="",i;try{const r=await n.json();t=r.error.message,r.error.details&&(t+=` ${JSON.stringify(r.error.details)}`,i=r.error.details)}catch{}throw new KU(`Error fetching from ${e.toString()}: [${n.status} ${n.statusText}] ${t}`,n.status,n.statusText,i)}function A9(n){const e={};if(n?.signal!==void 0||n?.timeout>=0){const t=new AbortController;n?.timeout>=0&&setTimeout(()=>t.abort(),n.timeout),n?.signal&&n.signal.addEventListener("abort",()=>{t.abort()}),e.signal=t.signal}return e}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function XC(n){return n.text=()=>{if(n.candidates&&n.candidates.length>0){if(n.candidates.length>1&&console.warn(`This response had ${n.candidates.length} candidates. Returning text from the first candidate only. Access response.candidates directly to use the other candidates.`),_x(n.candidates[0]))throw new Ph(`${yl(n)}`,n);return M9(n)}else if(n.promptFeedback)throw new Ph(`Text not available. ${yl(n)}`,n);return""},n.functionCall=()=>{if(n.candidates&&n.candidates.length>0){if(n.candidates.length>1&&console.warn(`This response had ${n.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`),_x(n.candidates[0]))throw new Ph(`${yl(n)}`,n);return console.warn("response.functionCall() is deprecated. Use response.functionCalls() instead."),yN(n)[0]}else if(n.promptFeedback)throw new Ph(`Function call not available. ${yl(n)}`,n)},n.functionCalls=()=>{if(n.candidates&&n.candidates.length>0){if(n.candidates.length>1&&console.warn(`This response had ${n.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`),_x(n.candidates[0]))throw new Ph(`${yl(n)}`,n);return yN(n)}else if(n.promptFeedback)throw new Ph(`Function call not available. ${yl(n)}`,n)},n}function M9(n){var e,t,i,r;const s=[];if(!((t=(e=n.candidates)===null||e===void 0?void 0:e[0].content)===null||t===void 0)&&t.parts)for(const o of(r=(i=n.candidates)===null||i===void 0?void 0:i[0].content)===null||r===void 0?void 0:r.parts)o.text&&s.push(o.text),o.executableCode&&s.push("\n```"+o.executableCode.language+`
`+o.executableCode.code+"\n```\n"),o.codeExecutionResult&&s.push("\n```\n"+o.codeExecutionResult.output+"\n```\n");return s.length>0?s.join(""):""}function yN(n){var e,t,i,r;const s=[];if(!((t=(e=n.candidates)===null||e===void 0?void 0:e[0].content)===null||t===void 0)&&t.parts)for(const o of(r=(i=n.candidates)===null||i===void 0?void 0:i[0].content)===null||r===void 0?void 0:r.parts)o.functionCall&&s.push(o.functionCall);if(s.length>0)return s}const I9=[Yp.RECITATION,Yp.SAFETY,Yp.LANGUAGE];function _x(n){return!!n.finishReason&&I9.includes(n.finishReason)}function yl(n){var e,t,i;let r="";if((!n.candidates||n.candidates.length===0)&&n.promptFeedback)r+="Response was blocked",!((e=n.promptFeedback)===null||e===void 0)&&e.blockReason&&(r+=` due to ${n.promptFeedback.blockReason}`),!((t=n.promptFeedback)===null||t===void 0)&&t.blockReasonMessage&&(r+=`: ${n.promptFeedback.blockReasonMessage}`);else if(!((i=n.candidates)===null||i===void 0)&&i[0]){const s=n.candidates[0];_x(s)&&(r+=`Candidate was blocked due to ${s.finishReason}`,s.finishMessage&&(r+=`: ${s.finishMessage}`))}return r}function km(n){return this instanceof km?(this.v=n,this):new km(n)}function P9(n,e,t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=t.apply(n,e||[]),r,s=[];return r={},o("next"),o("throw"),o("return"),r[Symbol.asyncIterator]=function(){return this},r;function o(m){i[m]&&(r[m]=function(g){return new Promise(function(x,b){s.push([m,g,x,b])>1||a(m,g)})})}function a(m,g){try{l(i[m](g))}catch(x){p(s[0][3],x)}}function l(m){m.value instanceof km?Promise.resolve(m.value.v).then(c,u):p(s[0][2],m)}function c(m){a("next",m)}function u(m){a("throw",m)}function p(m,g){m(g),s.shift(),s.length&&a(s[0][0],s[0][1])}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vN=/^data\: (.*)(?:\n\n|\r\r|\r\n\r\n)/;function R9(n){const e=n.body.pipeThrough(new TextDecoderStream("utf8",{fatal:!0})),t=L9(e),[i,r]=t.tee();return{stream:D9(i),response:N9(r)}}async function N9(n){const e=[],t=n.getReader();for(;;){const{done:i,value:r}=await t.read();if(i)return XC(k9(e));e.push(r)}}function D9(n){return P9(this,arguments,function*(){const t=n.getReader();for(;;){const{value:i,done:r}=yield km(t.read());if(r)break;yield yield km(XC(i))}})}function L9(n){const e=n.getReader();return new ReadableStream({start(i){let r="";return s();function s(){return e.read().then(({value:o,done:a})=>{if(a){if(r.trim()){i.error(new Xr("Failed to parse stream"));return}i.close();return}r+=o;let l=r.match(vN),c;for(;l;){try{c=JSON.parse(l[1])}catch{i.error(new Xr(`Error parsing JSON response: "${l[1]}"`));return}i.enqueue(c),r=r.substring(l[0].length),l=r.match(vN)}return s()})}}})}function k9(n){const e=n[n.length-1],t={promptFeedback:e?.promptFeedback};for(const i of n){if(i.candidates){let r=0;for(const s of i.candidates)if(t.candidates||(t.candidates=[]),t.candidates[r]||(t.candidates[r]={index:r}),t.candidates[r].citationMetadata=s.citationMetadata,t.candidates[r].groundingMetadata=s.groundingMetadata,t.candidates[r].finishReason=s.finishReason,t.candidates[r].finishMessage=s.finishMessage,t.candidates[r].safetyRatings=s.safetyRatings,s.content&&s.content.parts){t.candidates[r].content||(t.candidates[r].content={role:s.content.role||"user",parts:[]});const o={};for(const a of s.content.parts)a.text&&(o.text=a.text),a.functionCall&&(o.functionCall=a.functionCall),a.executableCode&&(o.executableCode=a.executableCode),a.codeExecutionResult&&(o.codeExecutionResult=a.codeExecutionResult),Object.keys(o).length===0&&(o.text=""),t.candidates[r].content.parts.push(o)}r++}i.usageMetadata&&(t.usageMetadata=i.usageMetadata)}return t}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function YU(n,e,t,i){const r=await Tg(e,Ou.STREAM_GENERATE_CONTENT,n,!0,JSON.stringify(t),i);return R9(r)}async function JU(n,e,t,i){const s=await(await Tg(e,Ou.GENERATE_CONTENT,n,!1,JSON.stringify(t),i)).json();return{response:XC(s)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function QU(n){if(n!=null){if(typeof n=="string")return{role:"system",parts:[{text:n}]};if(n.text)return{role:"system",parts:[n]};if(n.parts)return n.role?n:{role:"system",parts:n.parts}}}function Om(n){let e=[];if(typeof n=="string")e=[{text:n}];else for(const t of n)typeof t=="string"?e.push({text:t}):e.push(t);return O9(e)}function O9(n){const e={role:"user",parts:[]},t={role:"function",parts:[]};let i=!1,r=!1;for(const s of n)"functionResponse"in s?(t.parts.push(s),r=!0):(e.parts.push(s),i=!0);if(i&&r)throw new Xr("Within a single message, FunctionResponse cannot be mixed with other type of part in the request for sending chat message.");if(!i&&!r)throw new Xr("No content is provided for sending chat message.");return i?e:t}function U9(n,e){var t;let i={model:e?.model,generationConfig:e?.generationConfig,safetySettings:e?.safetySettings,tools:e?.tools,toolConfig:e?.toolConfig,systemInstruction:e?.systemInstruction,cachedContent:(t=e?.cachedContent)===null||t===void 0?void 0:t.name,contents:[]};const r=n.generateContentRequest!=null;if(n.contents){if(r)throw new Bl("CountTokensRequest must have one of contents or generateContentRequest, not both.");i.contents=n.contents}else if(r)i=Object.assign(Object.assign({},i),n.generateContentRequest);else{const s=Om(n);i.contents=[s]}return{generateContentRequest:i}}function xN(n){let e;return n.contents?e=n:e={contents:[Om(n)]},n.systemInstruction&&(e.systemInstruction=QU(n.systemInstruction)),e}function j9(n){return typeof n=="string"||Array.isArray(n)?{content:Om(n)}:n}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _N=["text","inlineData","functionCall","functionResponse","executableCode","codeExecutionResult"],F9={user:["text","inlineData"],function:["functionResponse"],model:["text","functionCall","executableCode","codeExecutionResult"],system:["text"]};function V9(n){let e=!1;for(const t of n){const{role:i,parts:r}=t;if(!e&&i!=="user")throw new Xr(`First content should be with role 'user', got ${i}`);if(!hN.includes(i))throw new Xr(`Each item should include role field. Got ${i} but valid roles are: ${JSON.stringify(hN)}`);if(!Array.isArray(r))throw new Xr("Content should have 'parts' property with an array of Parts");if(r.length===0)throw new Xr("Each Content should have at least one part");const s={text:0,inlineData:0,functionCall:0,functionResponse:0,fileData:0,executableCode:0,codeExecutionResult:0};for(const a of r)for(const l of _N)l in a&&(s[l]+=1);const o=F9[i];for(const a of _N)if(!o.includes(a)&&s[a]>0)throw new Xr(`Content with role '${i}' can't contain '${a}' part`);e=!0}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wN="SILENT_ERROR";class B9{constructor(e,t,i,r={}){this.model=t,this.params=i,this._requestOptions=r,this._history=[],this._sendPromise=Promise.resolve(),this._apiKey=e,i?.history&&(V9(i.history),this._history=i.history)}async getHistory(){return await this._sendPromise,this._history}async sendMessage(e,t={}){var i,r,s,o,a,l;await this._sendPromise;const c=Om(e),u={safetySettings:(i=this.params)===null||i===void 0?void 0:i.safetySettings,generationConfig:(r=this.params)===null||r===void 0?void 0:r.generationConfig,tools:(s=this.params)===null||s===void 0?void 0:s.tools,toolConfig:(o=this.params)===null||o===void 0?void 0:o.toolConfig,systemInstruction:(a=this.params)===null||a===void 0?void 0:a.systemInstruction,cachedContent:(l=this.params)===null||l===void 0?void 0:l.cachedContent,contents:[...this._history,c]},p=Object.assign(Object.assign({},this._requestOptions),t);let m;return this._sendPromise=this._sendPromise.then(()=>JU(this._apiKey,this.model,u,p)).then(g=>{var x,b;if(g.response.candidates&&g.response.candidates.length>0&&((x=g.response.candidates[0])===null||x===void 0?void 0:x.content)!==void 0){this._history.push(c);const w=Object.assign({parts:[],role:"model"},(b=g.response.candidates)===null||b===void 0?void 0:b[0].content);this._history.push(w)}else{const w=yl(g.response);w&&console.warn(`sendMessage() was unsuccessful. ${w}. Inspect response object for details.`)}m=g}),await this._sendPromise,m}async sendMessageStream(e,t={}){var i,r,s,o,a,l;await this._sendPromise;const c=Om(e),u={safetySettings:(i=this.params)===null||i===void 0?void 0:i.safetySettings,generationConfig:(r=this.params)===null||r===void 0?void 0:r.generationConfig,tools:(s=this.params)===null||s===void 0?void 0:s.tools,toolConfig:(o=this.params)===null||o===void 0?void 0:o.toolConfig,systemInstruction:(a=this.params)===null||a===void 0?void 0:a.systemInstruction,cachedContent:(l=this.params)===null||l===void 0?void 0:l.cachedContent,contents:[...this._history,c]},p=Object.assign(Object.assign({},this._requestOptions),t),m=YU(this._apiKey,this.model,u,p);return this._sendPromise=this._sendPromise.then(()=>m).catch(g=>{throw new Error(wN)}).then(g=>g.response).then(g=>{var x;if(g.candidates&&g.candidates.length>0&&((x=g.candidates[0])===null||x===void 0?void 0:x.content)!==void 0){this._history.push(c);const b=Object.assign({},g.candidates[0].content);b.role||(b.role="model"),this._history.push(b)}else{const b=yl(g);b&&console.warn(`sendMessageStream() was unsuccessful. ${b}. Inspect response object for details.`)}}).catch(g=>{g.message!==wN&&console.error(g)}),m}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function z9(n,e,t,i){return(await Tg(e,Ou.COUNT_TOKENS,n,!1,JSON.stringify(t),i)).json()}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function H9(n,e,t,i){return(await Tg(e,Ou.EMBED_CONTENT,n,!1,JSON.stringify(t),i)).json()}async function G9(n,e,t,i){const r=t.requests.map(o=>Object.assign(Object.assign({},o),{model:e}));return(await Tg(e,Ou.BATCH_EMBED_CONTENTS,n,!1,JSON.stringify({requests:r}),i)).json()}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bN{constructor(e,t,i={}){this.apiKey=e,this._requestOptions=i,t.model.includes("/")?this.model=t.model:this.model=`models/${t.model}`,this.generationConfig=t.generationConfig||{},this.safetySettings=t.safetySettings||[],this.tools=t.tools,this.toolConfig=t.toolConfig,this.systemInstruction=QU(t.systemInstruction),this.cachedContent=t.cachedContent}async generateContent(e,t={}){var i;const r=xN(e),s=Object.assign(Object.assign({},this._requestOptions),t);return JU(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(i=this.cachedContent)===null||i===void 0?void 0:i.name},r),s)}async generateContentStream(e,t={}){var i;const r=xN(e),s=Object.assign(Object.assign({},this._requestOptions),t);return YU(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(i=this.cachedContent)===null||i===void 0?void 0:i.name},r),s)}startChat(e){var t;return new B9(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(t=this.cachedContent)===null||t===void 0?void 0:t.name},e),this._requestOptions)}async countTokens(e,t={}){const i=U9(e,{model:this.model,generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:this.cachedContent}),r=Object.assign(Object.assign({},this._requestOptions),t);return z9(this.apiKey,this.model,i,r)}async embedContent(e,t={}){const i=j9(e),r=Object.assign(Object.assign({},this._requestOptions),t);return H9(this.apiKey,this.model,i,r)}async batchEmbedContents(e,t={}){const i=Object.assign(Object.assign({},this._requestOptions),t);return G9(this.apiKey,this.model,e,i)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W9{constructor(e){this.apiKey=e}getGenerativeModel(e,t){if(!e.model)throw new Xr("Must provide a model name. Example: genai.getGenerativeModel({ model: 'my-model-name' })");return new bN(this.apiKey,e,t)}getGenerativeModelFromCachedContent(e,t,i){if(!e.name)throw new Bl("Cached content must contain a `name` field.");if(!e.model)throw new Bl("Cached content must contain a `model` field.");const r=["model","systemInstruction"];for(const o of r)if(t?.[o]&&e[o]&&t?.[o]!==e[o]){if(o==="model"){const a=t.model.startsWith("models/")?t.model.replace("models/",""):t.model,l=e.model.startsWith("models/")?e.model.replace("models/",""):e.model;if(a===l)continue}throw new Bl(`Different value for "${o}" specified in modelParams (${t[o]}) and cachedContent (${e[o]})`)}const s=Object.assign(Object.assign({},t),{model:e.model,tools:e.tools,toolConfig:e.toolConfig,systemInstruction:e.systemInstruction,cachedContent:e});return new bN(this.apiKey,s,i)}}const q9="gemini-1.5-pro",$9="AIzaSyDR3vXyfe-NWbMwQvaypVyOWJKZP15FghI";async function SN(n){const t=new W9($9).getGenerativeModel({model:q9}),i={temperature:.9,topP:1,topK:1,maxOutputTokens:2048},r=[{category:md.HARM_CATEGORY_HARASSMENT,threshold:gd.BLOCK_MEDIUM_AND_ABOVE},{category:md.HARM_CATEGORY_HATE_SPEECH,threshold:gd.BLOCK_MEDIUM_AND_ABOVE},{category:md.HARM_CATEGORY_SEXUALLY_EXPLICIT,threshold:gd.BLOCK_MEDIUM_AND_ABOVE},{category:md.HARM_CATEGORY_DANGEROUS_CONTENT,threshold:gd.BLOCK_MEDIUM_AND_ABOVE}],s=t.startChat({generationConfig:i,safetySettings:r,history:[]}),o=`
    You are Karapatan Ko, an AI legal assistant specializing in **Philippine Law**. You can say Hi or Hello.
    Provide a **clear, concise, and structured answers** based on laws in the Philippines, such as:
    - The 1987 Constitution
    - Civil Code, Revised Penal Code, Family Code, Labor Code, 
    - Other relevant statutes (e.g., Data Privacy Act, Cybercrime Prevention Act)
    
    **Response Guidelines**
    - **Be concise & well-structured** (use bullet points when necessary).
    - **Provide citations** where applicable.
    - **Avoid unnecessary explanations or disclamers**.
    - **Explain in simple words and make it more humanize**.
    
    Question: ${n}
    `,l=(await s.sendMessage(o)).response;return console.log(l.text()),l.text()}const Um=V.createContext(),X9=n=>{const[e,t]=V.useState(""),[i,r]=V.useState(""),[s,o]=V.useState([]),[a,l]=V.useState(!1),[c,u]=V.useState(!1),[p,m]=V.useState(""),[g,x]=V.useState(localStorage.getItem("darkMode")==="true"),[b,w]=V.useState(null),v=(N,P)=>{setTimeout(function(){m(A=>A+P)},75*N)},S=()=>{u(!1),l(!1)};let E=0;const C=5e3,O={prevPrompts:s,setPrevPrompts:o,onSent:async N=>{const P=Date.now();if(P-E<C){alert("Please wait a few seconds. Thank you!");return}E=P,m(""),u(!0),l(!0);let A;N!=null?(A=await SN(N),r(N)):(o(re=>[...re,e]),r(e),A=await SN(e));let M=A.split("**"),D="";for(let re=0;re<M.length;re++)re===0||re%2!==1?D+=M[re]:D+="<b>"+M[re]+"</b>";let F=D.split("*").join("</br>").split(" ");for(let re=0;re<F.length;re++){const le=F[re];v(re,le+" ")}u(!1),t("")},setRecentPrompt:r,recentPrompt:i,showResult:a,loading:c,resultData:p,input:e,setInput:t,newChat:S,darkMode:g,setDarkMode:x,selectedMessage:b,setSelectedMessage:w};return V.useEffect(()=>{localStorage.setItem("darkMode",g)},[g]),h.jsx(Um.Provider,{value:O,children:n.children})},K9=()=>{};var TN={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZU=function(n){const e=[];let t=0;for(let i=0;i<n.length;i++){let r=n.charCodeAt(i);r<128?e[t++]=r:r<2048?(e[t++]=r>>6|192,e[t++]=r&63|128):(r&64512)===55296&&i+1<n.length&&(n.charCodeAt(i+1)&64512)===56320?(r=65536+((r&1023)<<10)+(n.charCodeAt(++i)&1023),e[t++]=r>>18|240,e[t++]=r>>12&63|128,e[t++]=r>>6&63|128,e[t++]=r&63|128):(e[t++]=r>>12|224,e[t++]=r>>6&63|128,e[t++]=r&63|128)}return e},Y9=function(n){const e=[];let t=0,i=0;for(;t<n.length;){const r=n[t++];if(r<128)e[i++]=String.fromCharCode(r);else if(r>191&&r<224){const s=n[t++];e[i++]=String.fromCharCode((r&31)<<6|s&63)}else if(r>239&&r<365){const s=n[t++],o=n[t++],a=n[t++],l=((r&7)<<18|(s&63)<<12|(o&63)<<6|a&63)-65536;e[i++]=String.fromCharCode(55296+(l>>10)),e[i++]=String.fromCharCode(56320+(l&1023))}else{const s=n[t++],o=n[t++];e[i++]=String.fromCharCode((r&15)<<12|(s&63)<<6|o&63)}}return e.join("")},ej={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(n,e){if(!Array.isArray(n))throw Error("encodeByteArray takes an array as a parameter");this.init_();const t=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,i=[];for(let r=0;r<n.length;r+=3){const s=n[r],o=r+1<n.length,a=o?n[r+1]:0,l=r+2<n.length,c=l?n[r+2]:0,u=s>>2,p=(s&3)<<4|a>>4;let m=(a&15)<<2|c>>6,g=c&63;l||(g=64,o||(m=64)),i.push(t[u],t[p],t[m],t[g])}return i.join("")},encodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(n):this.encodeByteArray(ZU(n),e)},decodeString(n,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(n):Y9(this.decodeStringToByteArray(n,e))},decodeStringToByteArray(n,e){this.init_();const t=e?this.charToByteMapWebSafe_:this.charToByteMap_,i=[];for(let r=0;r<n.length;){const s=t[n.charAt(r++)],a=r<n.length?t[n.charAt(r)]:0;++r;const c=r<n.length?t[n.charAt(r)]:64;++r;const p=r<n.length?t[n.charAt(r)]:64;if(++r,s==null||a==null||c==null||p==null)throw new J9;const m=s<<2|a>>4;if(i.push(m),c!==64){const g=a<<4&240|c>>2;if(i.push(g),p!==64){const x=c<<6&192|p;i.push(x)}}}return i},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let n=0;n<this.ENCODED_VALS.length;n++)this.byteToCharMap_[n]=this.ENCODED_VALS.charAt(n),this.charToByteMap_[this.byteToCharMap_[n]]=n,this.byteToCharMapWebSafe_[n]=this.ENCODED_VALS_WEBSAFE.charAt(n),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[n]]=n,n>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(n)]=n,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(n)]=n)}}};class J9 extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Q9=function(n){const e=ZU(n);return ej.encodeByteArray(e,!0)},u0=function(n){return Q9(n).replace(/\./g,"")},tj=function(n){try{return ej.decodeString(n,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z9(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const e8=()=>Z9().__FIREBASE_DEFAULTS__,t8=()=>{if(typeof process>"u"||typeof TN>"u")return;const n=TN.__FIREBASE_DEFAULTS__;if(n)return JSON.parse(n)},n8=()=>{if(typeof document>"u")return;let n;try{n=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=n&&tj(n[1]);return e&&JSON.parse(e)},G_=()=>{try{return K9()||e8()||t8()||n8()}catch(n){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${n}`);return}},nj=n=>{var e,t;return(t=(e=G_())===null||e===void 0?void 0:e.emulatorHosts)===null||t===void 0?void 0:t[n]},i8=n=>{const e=nj(n);if(!e)return;const t=e.lastIndexOf(":");if(t<=0||t+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const i=parseInt(e.substring(t+1),10);return e[0]==="["?[e.substring(1,t-1),i]:[e.substring(0,t),i]},ij=()=>{var n;return(n=G_())===null||n===void 0?void 0:n.config},rj=n=>{var e;return(e=G_())===null||e===void 0?void 0:e[`_${n}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r8{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}wrapCallback(e){return(t,i)=>{t?this.reject(t):this.resolve(i),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(t):e(t,i))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function s8(n,e){if(n.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const t={alg:"none",type:"JWT"},i=e||"demo-project",r=n.iat||0,s=n.sub||n.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${i}`,aud:i,iat:r,exp:r+3600,auth_time:r,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},n);return[u0(JSON.stringify(t)),u0(JSON.stringify(o)),""].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function br(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function o8(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(br())}function a8(){var n;const e=(n=G_())===null||n===void 0?void 0:n.forceEnvironment;if(e==="node")return!0;if(e==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function l8(){return typeof navigator<"u"&&navigator.userAgent==="Cloudflare-Workers"}function c8(){const n=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof n=="object"&&n.id!==void 0}function u8(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function h8(){const n=br();return n.indexOf("MSIE ")>=0||n.indexOf("Trident/")>=0}function d8(){return!a8()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function f8(){try{return typeof indexedDB=="object"}catch{return!1}}function p8(){return new Promise((n,e)=>{try{let t=!0;const i="validate-browser-context-for-indexeddb-analytics-module",r=self.indexedDB.open(i);r.onsuccess=()=>{r.result.close(),t||self.indexedDB.deleteDatabase(i),n(!0)},r.onupgradeneeded=()=>{t=!1},r.onerror=()=>{var s;e(((s=r.error)===null||s===void 0?void 0:s.message)||"")}}catch(t){e(t)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m8="FirebaseError";class za extends Error{constructor(e,t,i){super(t),this.code=e,this.customData=i,this.name=m8,Object.setPrototypeOf(this,za.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,Eg.prototype.create)}}class Eg{constructor(e,t,i){this.service=e,this.serviceName=t,this.errors=i}create(e,...t){const i=t[0]||{},r=`${this.service}/${e}`,s=this.errors[e],o=s?g8(s,i):"Error",a=`${this.serviceName}: ${o} (${r}).`;return new za(r,a,i)}}function g8(n,e){return n.replace(y8,(t,i)=>{const r=e[i];return r!=null?String(r):`<${i}?>`})}const y8=/\{\$([^}]+)}/g;function v8(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}function Uu(n,e){if(n===e)return!0;const t=Object.keys(n),i=Object.keys(e);for(const r of t){if(!i.includes(r))return!1;const s=n[r],o=e[r];if(EN(s)&&EN(o)){if(!Uu(s,o))return!1}else if(s!==o)return!1}for(const r of i)if(!t.includes(r))return!1;return!0}function EN(n){return n!==null&&typeof n=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Cg(n){const e=[];for(const[t,i]of Object.entries(n))Array.isArray(i)?i.forEach(r=>{e.push(encodeURIComponent(t)+"="+encodeURIComponent(r))}):e.push(encodeURIComponent(t)+"="+encodeURIComponent(i));return e.length?"&"+e.join("&"):""}function Pp(n){const e={};return n.replace(/^\?/,"").split("&").forEach(i=>{if(i){const[r,s]=i.split("=");e[decodeURIComponent(r)]=decodeURIComponent(s)}}),e}function Rp(n){const e=n.indexOf("?");if(!e)return"";const t=n.indexOf("#",e);return n.substring(e,t>0?t:void 0)}function x8(n,e){const t=new _8(n,e);return t.subscribe.bind(t)}class _8{constructor(e,t){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=t,this.task.then(()=>{e(this)}).catch(i=>{this.error(i)})}next(e){this.forEachObserver(t=>{t.next(e)})}error(e){this.forEachObserver(t=>{t.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,t,i){let r;if(e===void 0&&t===void 0&&i===void 0)throw new Error("Missing Observer.");w8(e,["next","error","complete"])?r=e:r={next:e,error:t,complete:i},r.next===void 0&&(r.next=bS),r.error===void 0&&(r.error=bS),r.complete===void 0&&(r.complete=bS);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?r.error(this.finalError):r.complete()}catch{}}),this.observers.push(r),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let t=0;t<this.observers.length;t++)this.sendOne(t,e)}sendOne(e,t){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{t(this.observers[e])}catch(i){typeof console<"u"&&console.error&&console.error(i)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function w8(n,e){if(typeof n!="object"||n===null)return!1;for(const t of e)if(t in n&&typeof n[t]=="function")return!0;return!1}function bS(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fi(n){return n&&n._delegate?n._delegate:n}class ju{constructor(e,t,i){this.name=e,this.instanceFactory=t,this.type=i,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ou="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let b8=class{constructor(e,t){this.name=e,this.container=t,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const t=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(t)){const i=new r8;if(this.instancesDeferred.set(t,i),this.isInitialized(t)||this.shouldAutoInitialize())try{const r=this.getOrInitializeService({instanceIdentifier:t});r&&i.resolve(r)}catch{}}return this.instancesDeferred.get(t).promise}getImmediate(e){var t;const i=this.normalizeInstanceIdentifier(e?.identifier),r=(t=e?.optional)!==null&&t!==void 0?t:!1;if(this.isInitialized(i)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:i})}catch(s){if(r)return null;throw s}else{if(r)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(T8(e))try{this.getOrInitializeService({instanceIdentifier:ou})}catch{}for(const[t,i]of this.instancesDeferred.entries()){const r=this.normalizeInstanceIdentifier(t);try{const s=this.getOrInitializeService({instanceIdentifier:r});i.resolve(s)}catch{}}}}clearInstance(e=ou){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(t=>"INTERNAL"in t).map(t=>t.INTERNAL.delete()),...e.filter(t=>"_delete"in t).map(t=>t._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=ou){return this.instances.has(e)}getOptions(e=ou){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:t={}}=e,i=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(i))throw Error(`${this.name}(${i}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const r=this.getOrInitializeService({instanceIdentifier:i,options:t});for(const[s,o]of this.instancesDeferred.entries()){const a=this.normalizeInstanceIdentifier(s);i===a&&o.resolve(r)}return r}onInit(e,t){var i;const r=this.normalizeInstanceIdentifier(t),s=(i=this.onInitCallbacks.get(r))!==null&&i!==void 0?i:new Set;s.add(e),this.onInitCallbacks.set(r,s);const o=this.instances.get(r);return o&&e(o,r),()=>{s.delete(e)}}invokeOnInitCallbacks(e,t){const i=this.onInitCallbacks.get(t);if(i)for(const r of i)try{r(e,t)}catch{}}getOrInitializeService({instanceIdentifier:e,options:t={}}){let i=this.instances.get(e);if(!i&&this.component&&(i=this.component.instanceFactory(this.container,{instanceIdentifier:S8(e),options:t}),this.instances.set(e,i),this.instancesOptions.set(e,t),this.invokeOnInitCallbacks(i,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,i)}catch{}return i||null}normalizeInstanceIdentifier(e=ou){return this.component?this.component.multipleInstances?e:ou:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}};function S8(n){return n===ou?void 0:n}function T8(n){return n.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class E8{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const t=this.getProvider(e.name);if(t.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);t.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const t=new b8(e,this);return this.providers.set(e,t),t}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var sn;(function(n){n[n.DEBUG=0]="DEBUG",n[n.VERBOSE=1]="VERBOSE",n[n.INFO=2]="INFO",n[n.WARN=3]="WARN",n[n.ERROR=4]="ERROR",n[n.SILENT=5]="SILENT"})(sn||(sn={}));const C8={debug:sn.DEBUG,verbose:sn.VERBOSE,info:sn.INFO,warn:sn.WARN,error:sn.ERROR,silent:sn.SILENT},A8=sn.INFO,M8={[sn.DEBUG]:"log",[sn.VERBOSE]:"log",[sn.INFO]:"info",[sn.WARN]:"warn",[sn.ERROR]:"error"},I8=(n,e,...t)=>{if(e<n.logLevel)return;const i=new Date().toISOString(),r=M8[e];if(r)console[r](`[${i}]  ${n.name}:`,...t);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class KC{constructor(e){this.name=e,this._logLevel=A8,this._logHandler=I8,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in sn))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?C8[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,sn.DEBUG,...e),this._logHandler(this,sn.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,sn.VERBOSE,...e),this._logHandler(this,sn.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,sn.INFO,...e),this._logHandler(this,sn.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,sn.WARN,...e),this._logHandler(this,sn.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,sn.ERROR,...e),this._logHandler(this,sn.ERROR,...e)}}const P8=(n,e)=>e.some(t=>n instanceof t);let CN,AN;function R8(){return CN||(CN=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function N8(){return AN||(AN=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const sj=new WeakMap,jE=new WeakMap,oj=new WeakMap,SS=new WeakMap,YC=new WeakMap;function D8(n){const e=new Promise((t,i)=>{const r=()=>{n.removeEventListener("success",s),n.removeEventListener("error",o)},s=()=>{t(zl(n.result)),r()},o=()=>{i(n.error),r()};n.addEventListener("success",s),n.addEventListener("error",o)});return e.then(t=>{t instanceof IDBCursor&&sj.set(t,n)}).catch(()=>{}),YC.set(e,n),e}function L8(n){if(jE.has(n))return;const e=new Promise((t,i)=>{const r=()=>{n.removeEventListener("complete",s),n.removeEventListener("error",o),n.removeEventListener("abort",o)},s=()=>{t(),r()},o=()=>{i(n.error||new DOMException("AbortError","AbortError")),r()};n.addEventListener("complete",s),n.addEventListener("error",o),n.addEventListener("abort",o)});jE.set(n,e)}let FE={get(n,e,t){if(n instanceof IDBTransaction){if(e==="done")return jE.get(n);if(e==="objectStoreNames")return n.objectStoreNames||oj.get(n);if(e==="store")return t.objectStoreNames[1]?void 0:t.objectStore(t.objectStoreNames[0])}return zl(n[e])},set(n,e,t){return n[e]=t,!0},has(n,e){return n instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in n}};function k8(n){FE=n(FE)}function O8(n){return n===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...t){const i=n.call(TS(this),e,...t);return oj.set(i,e.sort?e.sort():[e]),zl(i)}:N8().includes(n)?function(...e){return n.apply(TS(this),e),zl(sj.get(this))}:function(...e){return zl(n.apply(TS(this),e))}}function U8(n){return typeof n=="function"?O8(n):(n instanceof IDBTransaction&&L8(n),P8(n,R8())?new Proxy(n,FE):n)}function zl(n){if(n instanceof IDBRequest)return D8(n);if(SS.has(n))return SS.get(n);const e=U8(n);return e!==n&&(SS.set(n,e),YC.set(e,n)),e}const TS=n=>YC.get(n);function j8(n,e,{blocked:t,upgrade:i,blocking:r,terminated:s}={}){const o=indexedDB.open(n,e),a=zl(o);return i&&o.addEventListener("upgradeneeded",l=>{i(zl(o.result),l.oldVersion,l.newVersion,zl(o.transaction),l)}),t&&o.addEventListener("blocked",l=>t(l.oldVersion,l.newVersion,l)),a.then(l=>{s&&l.addEventListener("close",()=>s()),r&&l.addEventListener("versionchange",c=>r(c.oldVersion,c.newVersion,c))}).catch(()=>{}),a}const F8=["get","getKey","getAll","getAllKeys","count"],V8=["put","add","delete","clear"],ES=new Map;function MN(n,e){if(!(n instanceof IDBDatabase&&!(e in n)&&typeof e=="string"))return;if(ES.get(e))return ES.get(e);const t=e.replace(/FromIndex$/,""),i=e!==t,r=V8.includes(t);if(!(t in(i?IDBIndex:IDBObjectStore).prototype)||!(r||F8.includes(t)))return;const s=async function(o,...a){const l=this.transaction(o,r?"readwrite":"readonly");let c=l.store;return i&&(c=c.index(a.shift())),(await Promise.all([c[t](...a),r&&l.done]))[0]};return ES.set(e,s),s}k8(n=>({...n,get:(e,t,i)=>MN(e,t)||n.get(e,t,i),has:(e,t)=>!!MN(e,t)||n.has(e,t)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class B8{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(t=>{if(z8(t)){const i=t.getImmediate();return`${i.library}/${i.version}`}else return null}).filter(t=>t).join(" ")}}function z8(n){const e=n.getComponent();return e?.type==="VERSION"}const VE="@firebase/app",IN="0.11.2";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Na=new KC("@firebase/app"),H8="@firebase/app-compat",G8="@firebase/analytics-compat",W8="@firebase/analytics",q8="@firebase/app-check-compat",$8="@firebase/app-check",X8="@firebase/auth",K8="@firebase/auth-compat",Y8="@firebase/database",J8="@firebase/data-connect",Q8="@firebase/database-compat",Z8="@firebase/functions",e7="@firebase/functions-compat",t7="@firebase/installations",n7="@firebase/installations-compat",i7="@firebase/messaging",r7="@firebase/messaging-compat",s7="@firebase/performance",o7="@firebase/performance-compat",a7="@firebase/remote-config",l7="@firebase/remote-config-compat",c7="@firebase/storage",u7="@firebase/storage-compat",h7="@firebase/firestore",d7="@firebase/vertexai",f7="@firebase/firestore-compat",p7="firebase",m7="11.4.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BE="[DEFAULT]",g7={[VE]:"fire-core",[H8]:"fire-core-compat",[W8]:"fire-analytics",[G8]:"fire-analytics-compat",[$8]:"fire-app-check",[q8]:"fire-app-check-compat",[X8]:"fire-auth",[K8]:"fire-auth-compat",[Y8]:"fire-rtdb",[J8]:"fire-data-connect",[Q8]:"fire-rtdb-compat",[Z8]:"fire-fn",[e7]:"fire-fn-compat",[t7]:"fire-iid",[n7]:"fire-iid-compat",[i7]:"fire-fcm",[r7]:"fire-fcm-compat",[s7]:"fire-perf",[o7]:"fire-perf-compat",[a7]:"fire-rc",[l7]:"fire-rc-compat",[c7]:"fire-gcs",[u7]:"fire-gcs-compat",[h7]:"fire-fst",[f7]:"fire-fst-compat",[d7]:"fire-vertex","fire-js":"fire-js",[p7]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const h0=new Map,y7=new Map,zE=new Map;function PN(n,e){try{n.container.addComponent(e)}catch(t){Na.debug(`Component ${e.name} failed to register with FirebaseApp ${n.name}`,t)}}function Kd(n){const e=n.name;if(zE.has(e))return Na.debug(`There were multiple attempts to register component ${e}.`),!1;zE.set(e,n);for(const t of h0.values())PN(t,n);for(const t of y7.values())PN(t,n);return!0}function JC(n,e){const t=n.container.getProvider("heartbeat").getImmediate({optional:!0});return t&&t.triggerHeartbeat(),n.container.getProvider(e)}function zs(n){return n==null?!1:n.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v7={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},Hl=new Eg("app","Firebase",v7);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x7{constructor(e,t,i){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},t),this._name=t.name,this._automaticDataCollectionEnabled=t.automaticDataCollectionEnabled,this._container=i,this.container.addComponent(new ju("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Hl.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mf=m7;function aj(n,e={}){let t=n;typeof e!="object"&&(e={name:e});const i=Object.assign({name:BE,automaticDataCollectionEnabled:!1},e),r=i.name;if(typeof r!="string"||!r)throw Hl.create("bad-app-name",{appName:String(r)});if(t||(t=ij()),!t)throw Hl.create("no-options");const s=h0.get(r);if(s){if(Uu(t,s.options)&&Uu(i,s.config))return s;throw Hl.create("duplicate-app",{appName:r})}const o=new E8(r);for(const l of zE.values())o.addComponent(l);const a=new x7(t,i,o);return h0.set(r,a),a}function lj(n=BE){const e=h0.get(n);if(!e&&n===BE&&ij())return aj();if(!e)throw Hl.create("no-app",{appName:n});return e}function Gl(n,e,t){var i;let r=(i=g7[n])!==null&&i!==void 0?i:n;t&&(r+=`-${t}`);const s=r.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const a=[`Unable to register library "${r}" with version "${e}":`];s&&a.push(`library name "${r}" contains illegal characters (whitespace or "/")`),s&&o&&a.push("and"),o&&a.push(`version name "${e}" contains illegal characters (whitespace or "/")`),Na.warn(a.join(" "));return}Kd(new ju(`${r}-version`,()=>({library:r,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _7="firebase-heartbeat-database",w7=1,jm="firebase-heartbeat-store";let CS=null;function cj(){return CS||(CS=j8(_7,w7,{upgrade:(n,e)=>{switch(e){case 0:try{n.createObjectStore(jm)}catch(t){console.warn(t)}}}}).catch(n=>{throw Hl.create("idb-open",{originalErrorMessage:n.message})})),CS}async function b7(n){try{const t=(await cj()).transaction(jm),i=await t.objectStore(jm).get(uj(n));return await t.done,i}catch(e){if(e instanceof za)Na.warn(e.message);else{const t=Hl.create("idb-get",{originalErrorMessage:e?.message});Na.warn(t.message)}}}async function RN(n,e){try{const i=(await cj()).transaction(jm,"readwrite");await i.objectStore(jm).put(e,uj(n)),await i.done}catch(t){if(t instanceof za)Na.warn(t.message);else{const i=Hl.create("idb-set",{originalErrorMessage:t?.message});Na.warn(i.message)}}}function uj(n){return`${n.name}!${n.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const S7=1024,T7=30;class E7{constructor(e){this.container=e,this._heartbeatsCache=null;const t=this.container.getProvider("app").getImmediate();this._storage=new A7(t),this._heartbeatsCachePromise=this._storage.read().then(i=>(this._heartbeatsCache=i,i))}async triggerHeartbeat(){var e,t;try{const r=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),s=NN();if(((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===s||this._heartbeatsCache.heartbeats.some(o=>o.date===s))return;if(this._heartbeatsCache.heartbeats.push({date:s,agent:r}),this._heartbeatsCache.heartbeats.length>T7){const o=M7(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(o,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(i){Na.warn(i)}}async getHeartbeatsHeader(){var e;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((e=this._heartbeatsCache)===null||e===void 0?void 0:e.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const t=NN(),{heartbeatsToSend:i,unsentEntries:r}=C7(this._heartbeatsCache.heartbeats),s=u0(JSON.stringify({version:2,heartbeats:i}));return this._heartbeatsCache.lastSentHeartbeatDate=t,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),s}catch(t){return Na.warn(t),""}}}function NN(){return new Date().toISOString().substring(0,10)}function C7(n,e=S7){const t=[];let i=n.slice();for(const r of n){const s=t.find(o=>o.agent===r.agent);if(s){if(s.dates.push(r.date),DN(t)>e){s.dates.pop();break}}else if(t.push({agent:r.agent,dates:[r.date]}),DN(t)>e){t.pop();break}i=i.slice(1)}return{heartbeatsToSend:t,unsentEntries:i}}class A7{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return f8()?p8().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const t=await b7(this.app);return t?.heartbeats?t:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(e){var t;if(await this._canUseIndexedDBPromise){const r=await this.read();return RN(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:r.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var t;if(await this._canUseIndexedDBPromise){const r=await this.read();return RN(this.app,{lastSentHeartbeatDate:(t=e.lastSentHeartbeatDate)!==null&&t!==void 0?t:r.lastSentHeartbeatDate,heartbeats:[...r.heartbeats,...e.heartbeats]})}else return}}function DN(n){return u0(JSON.stringify({version:2,heartbeats:n})).length}function M7(n){if(n.length===0)return-1;let e=0,t=n[0].date;for(let i=1;i<n.length;i++)n[i].date<t&&(t=n[i].date,e=i);return e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function I7(n){Kd(new ju("platform-logger",e=>new B8(e),"PRIVATE")),Kd(new ju("heartbeat",e=>new E7(e),"PRIVATE")),Gl(VE,IN,n),Gl(VE,IN,"esm2017"),Gl("fire-js","")}I7("");function QC(n,e){var t={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&e.indexOf(i)<0&&(t[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,i=Object.getOwnPropertySymbols(n);r<i.length;r++)e.indexOf(i[r])<0&&Object.prototype.propertyIsEnumerable.call(n,i[r])&&(t[i[r]]=n[i[r]]);return t}function hj(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const P7=hj,dj=new Eg("auth","Firebase",hj());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const d0=new KC("@firebase/auth");function R7(n,...e){d0.logLevel<=sn.WARN&&d0.warn(`Auth (${mf}): ${n}`,...e)}function wx(n,...e){d0.logLevel<=sn.ERROR&&d0.error(`Auth (${mf}): ${n}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yo(n,...e){throw ZC(n,...e)}function jo(n,...e){return ZC(n,...e)}function fj(n,e,t){const i=Object.assign(Object.assign({},P7()),{[e]:t});return new Eg("auth","Firebase",i).create(e,{appName:n.name})}function ba(n){return fj(n,"operation-not-supported-in-this-environment","Operations that alter the current user are not supported in conjunction with FirebaseServerApp")}function ZC(n,...e){if(typeof n!="string"){const t=e[0],i=[...e.slice(1)];return i[0]&&(i[0].appName=n.name),n._errorFactory.create(t,...i)}return dj.create(n,...e)}function Ct(n,e,...t){if(!n)throw ZC(e,...t)}function ya(n){const e="INTERNAL ASSERTION FAILED: "+n;throw wx(e),new Error(e)}function Da(n,e){n||ya(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function HE(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.href)||""}function N7(){return LN()==="http:"||LN()==="https:"}function LN(){var n;return typeof self<"u"&&((n=self.location)===null||n===void 0?void 0:n.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function D7(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(N7()||c8()||"connection"in navigator)?navigator.onLine:!0}function L7(){if(typeof navigator>"u")return null;const n=navigator;return n.languages&&n.languages[0]||n.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ag{constructor(e,t){this.shortDelay=e,this.longDelay=t,Da(t>e,"Short delay should be less than long delay!"),this.isMobile=o8()||u8()}get(){return D7()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eA(n,e){Da(n.emulator,"Emulator should always be set here");const{url:t}=n.emulator;return e?`${t}${e.startsWith("/")?e.slice(1):e}`:t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pj{static initialize(e,t,i){this.fetchImpl=e,t&&(this.headersImpl=t),i&&(this.responseImpl=i)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;if(typeof globalThis<"u"&&globalThis.fetch)return globalThis.fetch;if(typeof fetch<"u")return fetch;ya("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;if(typeof globalThis<"u"&&globalThis.Headers)return globalThis.Headers;if(typeof Headers<"u")return Headers;ya("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;if(typeof globalThis<"u"&&globalThis.Response)return globalThis.Response;if(typeof Response<"u")return Response;ya("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const k7={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",INVALID_LOGIN_CREDENTIALS:"invalid-credential",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const O7=new Ag(3e4,6e4);function Ha(n,e){return n.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:n.tenantId}):e}async function Ga(n,e,t,i,r={}){return mj(n,r,async()=>{let s={},o={};i&&(e==="GET"?o=i:s={body:JSON.stringify(i)});const a=Cg(Object.assign({key:n.config.apiKey},o)).slice(1),l=await n._getAdditionalHeaders();l["Content-Type"]="application/json",n.languageCode&&(l["X-Firebase-Locale"]=n.languageCode);const c=Object.assign({method:e,headers:l},s);return l8()||(c.referrerPolicy="no-referrer"),pj.fetch()(gj(n,n.config.apiHost,t,a),c)})}async function mj(n,e,t){n._canInitEmulator=!1;const i=Object.assign(Object.assign({},k7),e);try{const r=new j7(n),s=await Promise.race([t(),r.promise]);r.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw iv(n,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const a=s.ok?o.errorMessage:o.error.message,[l,c]=a.split(" : ");if(l==="FEDERATED_USER_ID_ALREADY_LINKED")throw iv(n,"credential-already-in-use",o);if(l==="EMAIL_EXISTS")throw iv(n,"email-already-in-use",o);if(l==="USER_DISABLED")throw iv(n,"user-disabled",o);const u=i[l]||l.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw fj(n,u,c);yo(n,u)}}catch(r){if(r instanceof za)throw r;yo(n,"network-request-failed",{message:String(r)})}}async function Mg(n,e,t,i,r={}){const s=await Ga(n,e,t,i,r);return"mfaPendingCredential"in s&&yo(n,"multi-factor-auth-required",{_serverResponse:s}),s}function gj(n,e,t,i){const r=`${e}${t}?${i}`;return n.config.emulator?eA(n.config,r):`${n.config.apiScheme}://${r}`}function U7(n){switch(n){case"ENFORCE":return"ENFORCE";case"AUDIT":return"AUDIT";case"OFF":return"OFF";default:return"ENFORCEMENT_STATE_UNSPECIFIED"}}class j7{clearNetworkTimeout(){clearTimeout(this.timer)}constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((t,i)=>{this.timer=setTimeout(()=>i(jo(this.auth,"network-request-failed")),O7.get())})}}function iv(n,e,t){const i={appName:n.name};t.email&&(i.email=t.email),t.phoneNumber&&(i.phoneNumber=t.phoneNumber);const r=jo(n,e,i);return r.customData._tokenResponse=t,r}function kN(n){return n!==void 0&&n.enterprise!==void 0}class F7{constructor(e){if(this.siteKey="",this.recaptchaEnforcementState=[],e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.recaptchaEnforcementState=e.recaptchaEnforcementState}getProviderEnforcementState(e){if(!this.recaptchaEnforcementState||this.recaptchaEnforcementState.length===0)return null;for(const t of this.recaptchaEnforcementState)if(t.provider&&t.provider===e)return U7(t.enforcementState);return null}isProviderEnabled(e){return this.getProviderEnforcementState(e)==="ENFORCE"||this.getProviderEnforcementState(e)==="AUDIT"}isAnyProviderEnabled(){return this.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")||this.isProviderEnabled("PHONE_PROVIDER")}}async function V7(n,e){return Ga(n,"GET","/v2/recaptchaConfig",Ha(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function B7(n,e){return Ga(n,"POST","/v1/accounts:delete",e)}async function yj(n,e){return Ga(n,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jp(n){if(n)try{const e=new Date(Number(n));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function z7(n,e=!1){const t=Fi(n),i=await t.getIdToken(e),r=tA(i);Ct(r&&r.exp&&r.auth_time&&r.iat,t.auth,"internal-error");const s=typeof r.firebase=="object"?r.firebase:void 0,o=s?.sign_in_provider;return{claims:r,token:i,authTime:Jp(AS(r.auth_time)),issuedAtTime:Jp(AS(r.iat)),expirationTime:Jp(AS(r.exp)),signInProvider:o||null,signInSecondFactor:s?.sign_in_second_factor||null}}function AS(n){return Number(n)*1e3}function tA(n){const[e,t,i]=n.split(".");if(e===void 0||t===void 0||i===void 0)return wx("JWT malformed, contained fewer than 3 sections"),null;try{const r=tj(t);return r?JSON.parse(r):(wx("Failed to decode base64 JWT payload"),null)}catch(r){return wx("Caught error parsing JWT payload as JSON",r?.toString()),null}}function ON(n){const e=tA(n);return Ct(e,"internal-error"),Ct(typeof e.exp<"u","internal-error"),Ct(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Fm(n,e,t=!1){if(t)return e;try{return await e}catch(i){throw i instanceof za&&H7(i)&&n.auth.currentUser===n&&await n.auth.signOut(),i}}function H7({code:n}){return n==="auth/user-disabled"||n==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G7{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var t;if(e){const i=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),i}else{this.errorBackoff=3e4;const r=((t=this.user.stsTokenManager.expirationTime)!==null&&t!==void 0?t:0)-Date.now()-3e5;return Math.max(0,r)}}schedule(e=!1){if(!this.isRunning)return;const t=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},t)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){e?.code==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GE{constructor(e,t){this.createdAt=e,this.lastLoginAt=t,this._initializeTime()}_initializeTime(){this.lastSignInTime=Jp(this.lastLoginAt),this.creationTime=Jp(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function f0(n){var e;const t=n.auth,i=await n.getIdToken(),r=await Fm(n,yj(t,{idToken:i}));Ct(r?.users.length,t,"internal-error");const s=r.users[0];n._notifyReloadListener(s);const o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?vj(s.providerUserInfo):[],a=q7(n.providerData,o),l=n.isAnonymous,c=!(n.email&&s.passwordHash)&&!a?.length,u=l?c:!1,p={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:a,metadata:new GE(s.createdAt,s.lastLoginAt),isAnonymous:u};Object.assign(n,p)}async function W7(n){const e=Fi(n);await f0(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function q7(n,e){return[...n.filter(i=>!e.some(r=>r.providerId===i.providerId)),...e]}function vj(n){return n.map(e=>{var{providerId:t}=e,i=QC(e,["providerId"]);return{providerId:t,uid:i.rawId||"",displayName:i.displayName||null,email:i.email||null,phoneNumber:i.phoneNumber||null,photoURL:i.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $7(n,e){const t=await mj(n,{},async()=>{const i=Cg({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:r,apiKey:s}=n.config,o=gj(n,r,"/v1/token",`key=${s}`),a=await n._getAdditionalHeaders();return a["Content-Type"]="application/x-www-form-urlencoded",pj.fetch()(o,{method:"POST",headers:a,body:i})});return{accessToken:t.access_token,expiresIn:t.expires_in,refreshToken:t.refresh_token}}async function X7(n,e){return Ga(n,"POST","/v2/accounts:revokeToken",Ha(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Od{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Ct(e.idToken,"internal-error"),Ct(typeof e.idToken<"u","internal-error"),Ct(typeof e.refreshToken<"u","internal-error");const t="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):ON(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,t)}updateFromIdToken(e){Ct(e.length!==0,"internal-error");const t=ON(e);this.updateTokensAndExpiration(e,null,t)}async getToken(e,t=!1){return!t&&this.accessToken&&!this.isExpired?this.accessToken:(Ct(this.refreshToken,e,"user-token-expired"),this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null)}clearRefreshToken(){this.refreshToken=null}async refresh(e,t){const{accessToken:i,refreshToken:r,expiresIn:s}=await $7(e,t);this.updateTokensAndExpiration(i,r,Number(s))}updateTokensAndExpiration(e,t,i){this.refreshToken=t||null,this.accessToken=e||null,this.expirationTime=Date.now()+i*1e3}static fromJSON(e,t){const{refreshToken:i,accessToken:r,expirationTime:s}=t,o=new Od;return i&&(Ct(typeof i=="string","internal-error",{appName:e}),o.refreshToken=i),r&&(Ct(typeof r=="string","internal-error",{appName:e}),o.accessToken=r),s&&(Ct(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Od,this.toJSON())}_performRefresh(){return ya("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function rl(n,e){Ct(typeof n=="string"||typeof n>"u","internal-error",{appName:e})}class va{constructor(e){var{uid:t,auth:i,stsTokenManager:r}=e,s=QC(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new G7(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=t,this.auth=i,this.stsTokenManager=r,this.accessToken=r.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new GE(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const t=await Fm(this,this.stsTokenManager.getToken(this.auth,e));return Ct(t,this.auth,"internal-error"),this.accessToken!==t&&(this.accessToken=t,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),t}getIdTokenResult(e){return z7(this,e)}reload(){return W7(this)}_assign(e){this!==e&&(Ct(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(t=>Object.assign({},t)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const t=new va(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return t.metadata._copy(this.metadata),t}_onReload(e){Ct(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,t=!1){let i=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),i=!0),t&&await f0(this),await this.auth._persistUserIfCurrent(this),i&&this.auth._notifyListenersIfCurrent(this)}async delete(){if(zs(this.auth.app))return Promise.reject(ba(this.auth));const e=await this.getIdToken();return await Fm(this,B7(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,t){var i,r,s,o,a,l,c,u;const p=(i=t.displayName)!==null&&i!==void 0?i:void 0,m=(r=t.email)!==null&&r!==void 0?r:void 0,g=(s=t.phoneNumber)!==null&&s!==void 0?s:void 0,x=(o=t.photoURL)!==null&&o!==void 0?o:void 0,b=(a=t.tenantId)!==null&&a!==void 0?a:void 0,w=(l=t._redirectEventId)!==null&&l!==void 0?l:void 0,v=(c=t.createdAt)!==null&&c!==void 0?c:void 0,S=(u=t.lastLoginAt)!==null&&u!==void 0?u:void 0,{uid:E,emailVerified:C,isAnonymous:U,providerData:O,stsTokenManager:N}=t;Ct(E&&N,e,"internal-error");const P=Od.fromJSON(this.name,N);Ct(typeof E=="string",e,"internal-error"),rl(p,e.name),rl(m,e.name),Ct(typeof C=="boolean",e,"internal-error"),Ct(typeof U=="boolean",e,"internal-error"),rl(g,e.name),rl(x,e.name),rl(b,e.name),rl(w,e.name),rl(v,e.name),rl(S,e.name);const A=new va({uid:E,auth:e,email:m,emailVerified:C,displayName:p,isAnonymous:U,photoURL:x,phoneNumber:g,tenantId:b,stsTokenManager:P,createdAt:v,lastLoginAt:S});return O&&Array.isArray(O)&&(A.providerData=O.map(M=>Object.assign({},M))),w&&(A._redirectEventId=w),A}static async _fromIdTokenResponse(e,t,i=!1){const r=new Od;r.updateFromServerResponse(t);const s=new va({uid:t.localId,auth:e,stsTokenManager:r,isAnonymous:i});return await f0(s),s}static async _fromGetAccountInfoResponse(e,t,i){const r=t.users[0];Ct(r.localId!==void 0,"internal-error");const s=r.providerUserInfo!==void 0?vj(r.providerUserInfo):[],o=!(r.email&&r.passwordHash)&&!s?.length,a=new Od;a.updateFromIdToken(i);const l=new va({uid:r.localId,auth:e,stsTokenManager:a,isAnonymous:o}),c={uid:r.localId,displayName:r.displayName||null,photoURL:r.photoUrl||null,email:r.email||null,emailVerified:r.emailVerified||!1,phoneNumber:r.phoneNumber||null,tenantId:r.tenantId||null,providerData:s,metadata:new GE(r.createdAt,r.lastLoginAt),isAnonymous:!(r.email&&r.passwordHash)&&!s?.length};return Object.assign(l,c),l}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const UN=new Map;function xa(n){Da(n instanceof Function,"Expected a class definition");let e=UN.get(n);return e?(Da(e instanceof n,"Instance stored in cache mismatched with class"),e):(e=new n,UN.set(n,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xj{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,t){this.storage[e]=t}async _get(e){const t=this.storage[e];return t===void 0?null:t}async _remove(e){delete this.storage[e]}_addListener(e,t){}_removeListener(e,t){}}xj.type="NONE";const jN=xj;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bx(n,e,t){return`firebase:${n}:${e}:${t}`}class Ud{constructor(e,t,i){this.persistence=e,this.auth=t,this.userKey=i;const{config:r,name:s}=this.auth;this.fullUserKey=bx(this.userKey,r.apiKey,s),this.fullPersistenceKey=bx("persistence",r.apiKey,s),this.boundEventHandler=t._onStorageEvent.bind(t),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?va._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const t=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,t)return this.setCurrentUser(t)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,t,i="authUser"){if(!t.length)return new Ud(xa(jN),e,i);const r=(await Promise.all(t.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let s=r[0]||xa(jN);const o=bx(i,e.config.apiKey,e.name);let a=null;for(const c of t)try{const u=await c._get(o);if(u){const p=va._fromJSON(e,u);c!==s&&(a=p),s=c;break}}catch{}const l=r.filter(c=>c._shouldAllowMigration);return!s._shouldAllowMigration||!l.length?new Ud(s,e,i):(s=l[0],a&&await s._set(o,a.toJSON()),await Promise.all(t.map(async c=>{if(c!==s)try{await c._remove(o)}catch{}})),new Ud(s,e,i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function FN(n){const e=n.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(Sj(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(_j(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(Ej(e))return"Blackberry";if(Cj(e))return"Webos";if(wj(e))return"Safari";if((e.includes("chrome/")||bj(e))&&!e.includes("edge/"))return"Chrome";if(Tj(e))return"Android";{const t=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,i=n.match(t);if(i?.length===2)return i[1]}return"Other"}function _j(n=br()){return/firefox\//i.test(n)}function wj(n=br()){const e=n.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function bj(n=br()){return/crios\//i.test(n)}function Sj(n=br()){return/iemobile/i.test(n)}function Tj(n=br()){return/android/i.test(n)}function Ej(n=br()){return/blackberry/i.test(n)}function Cj(n=br()){return/webos/i.test(n)}function nA(n=br()){return/iphone|ipad|ipod/i.test(n)||/macintosh/i.test(n)&&/mobile/i.test(n)}function K7(n=br()){var e;return nA(n)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function Y7(){return h8()&&document.documentMode===10}function Aj(n=br()){return nA(n)||Tj(n)||Cj(n)||Ej(n)||/windows phone/i.test(n)||Sj(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Mj(n,e=[]){let t;switch(n){case"Browser":t=FN(br());break;case"Worker":t=`${FN(br())}-${n}`;break;default:t=n}const i=e.length?e.join(","):"FirebaseCore-web";return`${t}/JsCore/${mf}/${i}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class J7{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,t){const i=s=>new Promise((o,a)=>{try{const l=e(s);o(l)}catch(l){a(l)}});i.onAbort=t,this.queue.push(i);const r=this.queue.length-1;return()=>{this.queue[r]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const t=[];try{for(const i of this.queue)await i(e),i.onAbort&&t.push(i.onAbort)}catch(i){t.reverse();for(const r of t)try{r()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:i?.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Q7(n,e={}){return Ga(n,"GET","/v2/passwordPolicy",Ha(n,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Z7=6;class eq{constructor(e){var t,i,r,s;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(t=o.minPasswordLength)!==null&&t!==void 0?t:Z7,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(r=(i=e.allowedNonAlphanumericCharacters)===null||i===void 0?void 0:i.join(""))!==null&&r!==void 0?r:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var t,i,r,s,o,a;const l={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,l),this.validatePasswordCharacterOptions(e,l),l.isValid&&(l.isValid=(t=l.meetsMinPasswordLength)!==null&&t!==void 0?t:!0),l.isValid&&(l.isValid=(i=l.meetsMaxPasswordLength)!==null&&i!==void 0?i:!0),l.isValid&&(l.isValid=(r=l.containsLowercaseLetter)!==null&&r!==void 0?r:!0),l.isValid&&(l.isValid=(s=l.containsUppercaseLetter)!==null&&s!==void 0?s:!0),l.isValid&&(l.isValid=(o=l.containsNumericCharacter)!==null&&o!==void 0?o:!0),l.isValid&&(l.isValid=(a=l.containsNonAlphanumericCharacter)!==null&&a!==void 0?a:!0),l}validatePasswordLengthOptions(e,t){const i=this.customStrengthOptions.minPasswordLength,r=this.customStrengthOptions.maxPasswordLength;i&&(t.meetsMinPasswordLength=e.length>=i),r&&(t.meetsMaxPasswordLength=e.length<=r)}validatePasswordCharacterOptions(e,t){this.updatePasswordCharacterOptionsStatuses(t,!1,!1,!1,!1);let i;for(let r=0;r<e.length;r++)i=e.charAt(r),this.updatePasswordCharacterOptionsStatuses(t,i>="a"&&i<="z",i>="A"&&i<="Z",i>="0"&&i<="9",this.allowedNonAlphanumericCharacters.includes(i))}updatePasswordCharacterOptionsStatuses(e,t,i,r,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=t)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=i)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=r)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tq{constructor(e,t,i,r){this.app=e,this.heartbeatServiceProvider=t,this.appCheckServiceProvider=i,this.config=r,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new VN(this),this.idTokenSubscription=new VN(this),this.beforeStateQueue=new J7(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=dj,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=r.sdkClientVersion}_initializeWithPersistence(e,t){return t&&(this._popupRedirectResolver=xa(t)),this._initializationPromise=this.queue(async()=>{var i,r;if(!this._deleted&&(this.persistenceManager=await Ud.create(this,e),!this._deleted)){if(!((i=this._popupRedirectResolver)===null||i===void 0)&&i._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(t),this.lastNotifiedUid=((r=this.currentUser)===null||r===void 0?void 0:r.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUserFromIdToken(e){try{const t=await yj(this,{idToken:e}),i=await va._fromGetAccountInfoResponse(this,t,e);await this.directlySetCurrentUser(i)}catch(t){console.warn("FirebaseServerApp could not login user with provided authIdToken: ",t),await this.directlySetCurrentUser(null)}}async initializeCurrentUser(e){var t;if(zs(this.app)){const o=this.app.settings.authIdToken;return o?new Promise(a=>{setTimeout(()=>this.initializeCurrentUserFromIdToken(o).then(a,a))}):this.directlySetCurrentUser(null)}const i=await this.assertedPersistence.getCurrentUser();let r=i,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(t=this.redirectUser)===null||t===void 0?void 0:t._redirectEventId,a=r?._redirectEventId,l=await this.tryRedirectSignIn(e);(!o||o===a)&&l?.user&&(r=l.user,s=!0)}if(!r)return this.directlySetCurrentUser(null);if(!r._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(r)}catch(o){r=i,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return r?this.reloadAndSetCurrentUserOrClear(r):this.directlySetCurrentUser(null)}return Ct(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===r._redirectEventId?this.directlySetCurrentUser(r):this.reloadAndSetCurrentUserOrClear(r)}async tryRedirectSignIn(e){let t=null;try{t=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return t}async reloadAndSetCurrentUserOrClear(e){try{await f0(e)}catch(t){if(t?.code!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=L7()}async _delete(){this._deleted=!0}async updateCurrentUser(e){if(zs(this.app))return Promise.reject(ba(this));const t=e?Fi(e):null;return t&&Ct(t.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(t&&t._clone(this))}async _updateCurrentUser(e,t=!1){if(!this._deleted)return e&&Ct(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),t||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return zs(this.app)?Promise.reject(ba(this)):(await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0))}setPersistence(e){return zs(this.app)?Promise.reject(ba(this)):this.queue(async()=>{await this.assertedPersistence.setPersistence(xa(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const t=this._getPasswordPolicyInternal();return t.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):t.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await Q7(this),t=new eq(e);this.tenantId===null?this._projectPasswordPolicy=t:this._tenantPasswordPolicies[this.tenantId]=t}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new Eg("auth","Firebase",e())}onAuthStateChanged(e,t,i){return this.registerStateListener(this.authStateSubscription,e,t,i)}beforeAuthStateChanged(e,t){return this.beforeStateQueue.pushCallback(e,t)}onIdTokenChanged(e,t,i){return this.registerStateListener(this.idTokenSubscription,e,t,i)}authStateReady(){return new Promise((e,t)=>{if(this.currentUser)e();else{const i=this.onAuthStateChanged(()=>{i(),e()},t)}})}async revokeAccessToken(e){if(this.currentUser){const t=await this.currentUser.getIdToken(),i={providerId:"apple.com",tokenType:"ACCESS_TOKEN",token:e,idToken:t};this.tenantId!=null&&(i.tenantId=this.tenantId),await X7(this,i)}}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,t){const i=await this.getOrInitRedirectPersistenceManager(t);return e===null?i.removeCurrentUser():i.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const t=e&&xa(e)||this._popupRedirectResolver;Ct(t,this,"argument-error"),this.redirectPersistenceManager=await Ud.create(this,[xa(t._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var t,i;return this._isInitialized&&await this.queue(async()=>{}),((t=this._currentUser)===null||t===void 0?void 0:t._redirectEventId)===e?this._currentUser:((i=this.redirectUser)===null||i===void 0?void 0:i._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,t;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const i=(t=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&t!==void 0?t:null;this.lastNotifiedUid!==i&&(this.lastNotifiedUid=i,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,t,i,r){if(this._deleted)return()=>{};const s=typeof t=="function"?t:t.next.bind(t);let o=!1;const a=this._isInitialized?Promise.resolve():this._initializationPromise;if(Ct(a,this,"internal-error"),a.then(()=>{o||s(this.currentUser)}),typeof t=="function"){const l=e.addObserver(t,i,r);return()=>{o=!0,l()}}else{const l=e.addObserver(t);return()=>{o=!0,l()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Ct(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=Mj(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const t={"X-Client-Version":this.clientVersion};this.app.options.appId&&(t["X-Firebase-gmpid"]=this.app.options.appId);const i=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());i&&(t["X-Firebase-Client"]=i);const r=await this._getAppCheckToken();return r&&(t["X-Firebase-AppCheck"]=r),t}async _getAppCheckToken(){var e;if(zs(this.app)&&this.app.settings.appCheckToken)return this.app.settings.appCheckToken;const t=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return t?.error&&R7(`Error while retrieving App Check token: ${t.error}`),t?.token}}function fc(n){return Fi(n)}class VN{constructor(e){this.auth=e,this.observer=null,this.addObserver=x8(t=>this.observer=t)}get next(){return Ct(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let W_={async loadJS(){throw new Error("Unable to load external scripts")},recaptchaV2Script:"",recaptchaEnterpriseScript:"",gapiScript:""};function nq(n){W_=n}function Ij(n){return W_.loadJS(n)}function iq(){return W_.recaptchaEnterpriseScript}function rq(){return W_.gapiScript}function sq(n){return`__${n}${Math.floor(Math.random()*1e6)}`}class oq{constructor(){this.enterprise=new aq}ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}class aq{ready(e){e()}execute(e,t){return Promise.resolve("token")}render(e,t){return""}}const lq="recaptcha-enterprise",Pj="NO_RECAPTCHA";class cq{constructor(e){this.type=lq,this.auth=fc(e)}async verify(e="verify",t=!1){async function i(s){if(!t){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise(async(o,a)=>{V7(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(l=>{if(l.recaptchaKey===void 0)a(new Error("recaptcha Enterprise site key undefined"));else{const c=new F7(l);return s.tenantId==null?s._agentRecaptchaConfig=c:s._tenantRecaptchaConfigs[s.tenantId]=c,o(c.siteKey)}}).catch(l=>{a(l)})})}function r(s,o,a){const l=window.grecaptcha;kN(l)?l.enterprise.ready(()=>{l.enterprise.execute(s,{action:e}).then(c=>{o(c)}).catch(()=>{o(Pj)})}):a(Error("No reCAPTCHA enterprise script loaded."))}return this.auth.settings.appVerificationDisabledForTesting?new oq().execute("siteKey",{action:"verify"}):new Promise((s,o)=>{i(this.auth).then(a=>{if(!t&&kN(window.grecaptcha))r(a,s,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}let l=iq();l.length!==0&&(l+=a),Ij(l).then(()=>{r(a,s,o)}).catch(c=>{o(c)})}}).catch(a=>{o(a)})})}}async function BN(n,e,t,i=!1,r=!1){const s=new cq(n);let o;if(r)o=Pj;else try{o=await s.verify(t)}catch{o=await s.verify(t,!0)}const a=Object.assign({},e);if(t==="mfaSmsEnrollment"||t==="mfaSmsSignIn"){if("phoneEnrollmentInfo"in a){const l=a.phoneEnrollmentInfo.phoneNumber,c=a.phoneEnrollmentInfo.recaptchaToken;Object.assign(a,{phoneEnrollmentInfo:{phoneNumber:l,recaptchaToken:c,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}else if("phoneSignInInfo"in a){const l=a.phoneSignInInfo.recaptchaToken;Object.assign(a,{phoneSignInInfo:{recaptchaToken:l,captchaResponse:o,clientType:"CLIENT_TYPE_WEB",recaptchaVersion:"RECAPTCHA_ENTERPRISE"}})}return a}return i?Object.assign(a,{captchaResp:o}):Object.assign(a,{captchaResponse:o}),Object.assign(a,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(a,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),a}async function p0(n,e,t,i,r){var s;if(!((s=n._getRecaptchaConfig())===null||s===void 0)&&s.isProviderEnabled("EMAIL_PASSWORD_PROVIDER")){const o=await BN(n,e,t,t==="getOobCode");return i(n,o)}else return i(n,e).catch(async o=>{if(o.code==="auth/missing-recaptcha-token"){console.log(`${t} is protected by reCAPTCHA Enterprise for this project. Automatically triggering the reCAPTCHA flow and restarting the flow.`);const a=await BN(n,e,t,t==="getOobCode");return i(n,a)}else return Promise.reject(o)})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uq(n,e){const t=JC(n,"auth");if(t.isInitialized()){const r=t.getImmediate(),s=t.getOptions();if(Uu(s,e??{}))return r;yo(r,"already-initialized")}return t.initialize({options:e})}function hq(n,e){const t=e?.persistence||[],i=(Array.isArray(t)?t:[t]).map(xa);e?.errorMap&&n._updateErrorMap(e.errorMap),n._initializeWithPersistence(i,e?.popupRedirectResolver)}function dq(n,e,t){const i=fc(n);Ct(/^https?:\/\//.test(e),i,"invalid-emulator-scheme");const r=!1,s=Rj(e),{host:o,port:a}=fq(e),l=a===null?"":`:${a}`,c={url:`${s}//${o}${l}/`},u=Object.freeze({host:o,port:a,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:r})});if(!i._canInitEmulator){Ct(i.config.emulator&&i.emulatorConfig,i,"emulator-config-failed"),Ct(Uu(c,i.config.emulator)&&Uu(u,i.emulatorConfig),i,"emulator-config-failed");return}i.config.emulator=c,i.emulatorConfig=u,i.settings.appVerificationDisabledForTesting=!0,pq()}function Rj(n){const e=n.indexOf(":");return e<0?"":n.substr(0,e+1)}function fq(n){const e=Rj(n),t=/(\/\/)?([^?#/]+)/.exec(n.substr(e.length));if(!t)return{host:"",port:null};const i=t[2].split("@").pop()||"",r=/^(\[[^\]]+\])(:|$)/.exec(i);if(r){const s=r[1];return{host:s,port:zN(i.substr(s.length+1))}}else{const[s,o]=i.split(":");return{host:s,port:zN(o)}}}function zN(n){if(!n)return null;const e=Number(n);return isNaN(e)?null:e}function pq(){function n(){const e=document.createElement("p"),t=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",t.position="fixed",t.width="100%",t.backgroundColor="#ffffff",t.border=".1em solid #000000",t.color="#b50000",t.bottom="0px",t.left="0px",t.margin="0px",t.zIndex="10000",t.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",n):n())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iA{constructor(e,t){this.providerId=e,this.signInMethod=t}toJSON(){return ya("not implemented")}_getIdTokenResponse(e){return ya("not implemented")}_linkToIdToken(e,t){return ya("not implemented")}_getReauthenticationResolver(e){return ya("not implemented")}}async function mq(n,e){return Ga(n,"POST","/v1/accounts:signUp",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function gq(n,e){return Mg(n,"POST","/v1/accounts:signInWithPassword",Ha(n,e))}async function yq(n,e){return Ga(n,"POST","/v1/accounts:sendOobCode",Ha(n,e))}async function vq(n,e){return yq(n,e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xq(n,e){return Mg(n,"POST","/v1/accounts:signInWithEmailLink",Ha(n,e))}async function _q(n,e){return Mg(n,"POST","/v1/accounts:signInWithEmailLink",Ha(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vm extends iA{constructor(e,t,i,r=null){super("password",i),this._email=e,this._password=t,this._tenantId=r}static _fromEmailAndPassword(e,t){return new Vm(e,t,"password")}static _fromEmailAndCode(e,t,i=null){return new Vm(e,t,"emailLink",i)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e;if(t?.email&&t?.password){if(t.signInMethod==="password")return this._fromEmailAndPassword(t.email,t.password);if(t.signInMethod==="emailLink")return this._fromEmailAndCode(t.email,t.password,t.tenantId)}return null}async _getIdTokenResponse(e){switch(this.signInMethod){case"password":const t={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return p0(e,t,"signInWithPassword",gq);case"emailLink":return xq(e,{email:this._email,oobCode:this._password});default:yo(e,"internal-error")}}async _linkToIdToken(e,t){switch(this.signInMethod){case"password":const i={idToken:t,returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};return p0(e,i,"signUpPassword",mq);case"emailLink":return _q(e,{idToken:t,email:this._email,oobCode:this._password});default:yo(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function jd(n,e){return Mg(n,"POST","/v1/accounts:signInWithIdp",Ha(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wq="http://localhost";class Fu extends iA{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const t=new Fu(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(t.idToken=e.idToken),e.accessToken&&(t.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(t.nonce=e.nonce),e.pendingToken&&(t.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(t.accessToken=e.oauthToken,t.secret=e.oauthTokenSecret):yo("argument-error"),t}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const t=typeof e=="string"?JSON.parse(e):e,{providerId:i,signInMethod:r}=t,s=QC(t,["providerId","signInMethod"]);if(!i||!r)return null;const o=new Fu(i,r);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){const t=this.buildRequest();return jd(e,t)}_linkToIdToken(e,t){const i=this.buildRequest();return i.idToken=t,jd(e,i)}_getReauthenticationResolver(e){const t=this.buildRequest();return t.autoCreate=!1,jd(e,t)}buildRequest(){const e={requestUri:wq,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const t={};this.idToken&&(t.id_token=this.idToken),this.accessToken&&(t.access_token=this.accessToken),this.secret&&(t.oauth_token_secret=this.secret),t.providerId=this.providerId,this.nonce&&!this.pendingToken&&(t.nonce=this.nonce),e.postBody=Cg(t)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bq(n){switch(n){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function Sq(n){const e=Pp(Rp(n)).link,t=e?Pp(Rp(e)).deep_link_id:null,i=Pp(Rp(n)).deep_link_id;return(i?Pp(Rp(i)).link:null)||i||t||e||n}class rA{constructor(e){var t,i,r,s,o,a;const l=Pp(Rp(e)),c=(t=l.apiKey)!==null&&t!==void 0?t:null,u=(i=l.oobCode)!==null&&i!==void 0?i:null,p=bq((r=l.mode)!==null&&r!==void 0?r:null);Ct(c&&u&&p,"argument-error"),this.apiKey=c,this.operation=p,this.code=u,this.continueUrl=(s=l.continueUrl)!==null&&s!==void 0?s:null,this.languageCode=(o=l.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(a=l.tenantId)!==null&&a!==void 0?a:null}static parseLink(e){const t=Sq(e);try{return new rA(t)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gf{constructor(){this.providerId=gf.PROVIDER_ID}static credential(e,t){return Vm._fromEmailAndPassword(e,t)}static credentialWithLink(e,t){const i=rA.parseLink(t);return Ct(i,"argument-error"),Vm._fromEmailAndCode(e,i.code,i.tenantId)}}gf.PROVIDER_ID="password";gf.EMAIL_PASSWORD_SIGN_IN_METHOD="password";gf.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Nj{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ig extends Nj{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wl extends Ig{constructor(){super("facebook.com")}static credential(e){return Fu._fromParams({providerId:wl.PROVIDER_ID,signInMethod:wl.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return wl.credentialFromTaggedObject(e)}static credentialFromError(e){return wl.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return wl.credential(e.oauthAccessToken)}catch{return null}}}wl.FACEBOOK_SIGN_IN_METHOD="facebook.com";wl.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bl extends Ig{constructor(){super("google.com"),this.addScope("profile")}static credential(e,t){return Fu._fromParams({providerId:bl.PROVIDER_ID,signInMethod:bl.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:t})}static credentialFromResult(e){return bl.credentialFromTaggedObject(e)}static credentialFromError(e){return bl.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:t,oauthAccessToken:i}=e;if(!t&&!i)return null;try{return bl.credential(t,i)}catch{return null}}}bl.GOOGLE_SIGN_IN_METHOD="google.com";bl.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sl extends Ig{constructor(){super("github.com")}static credential(e){return Fu._fromParams({providerId:Sl.PROVIDER_ID,signInMethod:Sl.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Sl.credentialFromTaggedObject(e)}static credentialFromError(e){return Sl.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Sl.credential(e.oauthAccessToken)}catch{return null}}}Sl.GITHUB_SIGN_IN_METHOD="github.com";Sl.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tl extends Ig{constructor(){super("twitter.com")}static credential(e,t){return Fu._fromParams({providerId:Tl.PROVIDER_ID,signInMethod:Tl.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:t})}static credentialFromResult(e){return Tl.credentialFromTaggedObject(e)}static credentialFromError(e){return Tl.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:t,oauthTokenSecret:i}=e;if(!t||!i)return null;try{return Tl.credential(t,i)}catch{return null}}}Tl.TWITTER_SIGN_IN_METHOD="twitter.com";Tl.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Tq(n,e){return Mg(n,"POST","/v1/accounts:signUp",Ha(n,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vu{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,t,i,r=!1){const s=await va._fromIdTokenResponse(e,i,r),o=HN(i);return new Vu({user:s,providerId:o,_tokenResponse:i,operationType:t})}static async _forOperation(e,t,i){await e._updateTokensIfNecessary(i,!0);const r=HN(i);return new Vu({user:e,providerId:r,_tokenResponse:i,operationType:t})}}function HN(n){return n.providerId?n.providerId:"phoneNumber"in n?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m0 extends za{constructor(e,t,i,r){var s;super(t.code,t.message),this.operationType=i,this.user=r,Object.setPrototypeOf(this,m0.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:t.customData._serverResponse,operationType:i}}static _fromErrorAndOperation(e,t,i,r){return new m0(e,t,i,r)}}function Dj(n,e,t,i){return(e==="reauthenticate"?t._getReauthenticationResolver(n):t._getIdTokenResponse(n)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?m0._fromErrorAndOperation(n,s,e,i):s})}async function Eq(n,e,t=!1){const i=await Fm(n,e._linkToIdToken(n.auth,await n.getIdToken()),t);return Vu._forOperation(n,"link",i)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Cq(n,e,t=!1){const{auth:i}=n;if(zs(i.app))return Promise.reject(ba(i));const r="reauthenticate";try{const s=await Fm(n,Dj(i,r,e,n),t);Ct(s.idToken,i,"internal-error");const o=tA(s.idToken);Ct(o,i,"internal-error");const{sub:a}=o;return Ct(n.uid===a,i,"user-mismatch"),Vu._forOperation(n,r,s)}catch(s){throw s?.code==="auth/user-not-found"&&yo(i,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Lj(n,e,t=!1){if(zs(n.app))return Promise.reject(ba(n));const i="signIn",r=await Dj(n,i,e),s=await Vu._fromIdTokenResponse(n,i,r);return t||await n._updateCurrentUser(s.user),s}async function Aq(n,e){return Lj(fc(n),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kj(n){const e=fc(n);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function Mq(n,e,t){const i=fc(n);await p0(i,{requestType:"PASSWORD_RESET",email:e,clientType:"CLIENT_TYPE_WEB"},"getOobCode",vq)}async function Iq(n,e,t){if(zs(n.app))return Promise.reject(ba(n));const i=fc(n),o=await p0(i,{returnSecureToken:!0,email:e,password:t,clientType:"CLIENT_TYPE_WEB"},"signUpPassword",Tq).catch(l=>{throw l.code==="auth/password-does-not-meet-requirements"&&kj(n),l}),a=await Vu._fromIdTokenResponse(i,"signIn",o);return await i._updateCurrentUser(a.user),a}function Pq(n,e,t){return zs(n.app)?Promise.reject(ba(n)):Aq(Fi(n),gf.credential(e,t)).catch(async i=>{throw i.code==="auth/password-does-not-meet-requirements"&&kj(n),i})}function Rq(n,e,t,i){return Fi(n).onIdTokenChanged(e,t,i)}function Nq(n,e,t){return Fi(n).beforeAuthStateChanged(e,t)}function Pg(n,e,t,i){return Fi(n).onAuthStateChanged(e,t,i)}const g0="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oj{constructor(e,t){this.storageRetriever=e,this.type=t}_isAvailable(){try{return this.storage?(this.storage.setItem(g0,"1"),this.storage.removeItem(g0),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,t){return this.storage.setItem(e,JSON.stringify(t)),Promise.resolve()}_get(e){const t=this.storage.getItem(e);return Promise.resolve(t?JSON.parse(t):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dq=1e3,Lq=10;class Uj extends Oj{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,t)=>this.onStorageEvent(e,t),this.listeners={},this.localCache={},this.pollTimer=null,this.fallbackToPolling=Aj(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const t of Object.keys(this.listeners)){const i=this.storage.getItem(t),r=this.localCache[t];i!==r&&e(t,r,i)}}onStorageEvent(e,t=!1){if(!e.key){this.forAllChangedKeys((o,a,l)=>{this.notifyListeners(o,l)});return}const i=e.key;t?this.detachListener():this.stopPolling();const r=()=>{const o=this.storage.getItem(i);!t&&this.localCache[i]===o||this.notifyListeners(i,o)},s=this.storage.getItem(i);Y7()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(r,Lq):r()}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const r of Array.from(i))r(t&&JSON.parse(t))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,t,i)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:t,newValue:i}),!0)})},Dq)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,t){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,t){await super._set(e,t),this.localCache[e]=JSON.stringify(t)}async _get(e){const t=await super._get(e);return this.localCache[e]=JSON.stringify(t),t}async _remove(e){await super._remove(e),delete this.localCache[e]}}Uj.type="LOCAL";const kq=Uj;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jj extends Oj{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,t){}_removeListener(e,t){}}jj.type="SESSION";const Fj=jj;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Oq(n){return Promise.all(n.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(t){return{fulfilled:!1,reason:t}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class q_{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const t=this.receivers.find(r=>r.isListeningto(e));if(t)return t;const i=new q_(e);return this.receivers.push(i),i}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const t=e,{eventId:i,eventType:r,data:s}=t.data,o=this.handlersMap[r];if(!o?.size)return;t.ports[0].postMessage({status:"ack",eventId:i,eventType:r});const a=Array.from(o).map(async c=>c(t.origin,s)),l=await Oq(a);t.ports[0].postMessage({status:"done",eventId:i,eventType:r,response:l})}_subscribe(e,t){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(t)}_unsubscribe(e,t){this.handlersMap[e]&&t&&this.handlersMap[e].delete(t),(!t||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}q_.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sA(n="",e=10){let t="";for(let i=0;i<e;i++)t+=Math.floor(Math.random()*10);return n+t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uq{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,t,i=50){const r=typeof MessageChannel<"u"?new MessageChannel:null;if(!r)throw new Error("connection_unavailable");let s,o;return new Promise((a,l)=>{const c=sA("",20);r.port1.start();const u=setTimeout(()=>{l(new Error("unsupported_event"))},i);o={messageChannel:r,onMessage(p){const m=p;if(m.data.eventId===c)switch(m.data.status){case"ack":clearTimeout(u),s=setTimeout(()=>{l(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),a(m.data.response);break;default:clearTimeout(u),clearTimeout(s),l(new Error("invalid_response"));break}}},this.handlers.add(o),r.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:c,data:t},[r.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fo(){return window}function jq(n){Fo().location.href=n}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vj(){return typeof Fo().WorkerGlobalScope<"u"&&typeof Fo().importScripts=="function"}async function Fq(){if(!navigator?.serviceWorker)return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function Vq(){var n;return((n=navigator?.serviceWorker)===null||n===void 0?void 0:n.controller)||null}function Bq(){return Vj()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bj="firebaseLocalStorageDb",zq=1,y0="firebaseLocalStorage",zj="fbase_key";class Rg{constructor(e){this.request=e}toPromise(){return new Promise((e,t)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{t(this.request.error)})})}}function $_(n,e){return n.transaction([y0],e?"readwrite":"readonly").objectStore(y0)}function Hq(){const n=indexedDB.deleteDatabase(Bj);return new Rg(n).toPromise()}function WE(){const n=indexedDB.open(Bj,zq);return new Promise((e,t)=>{n.addEventListener("error",()=>{t(n.error)}),n.addEventListener("upgradeneeded",()=>{const i=n.result;try{i.createObjectStore(y0,{keyPath:zj})}catch(r){t(r)}}),n.addEventListener("success",async()=>{const i=n.result;i.objectStoreNames.contains(y0)?e(i):(i.close(),await Hq(),e(await WE()))})})}async function GN(n,e,t){const i=$_(n,!0).put({[zj]:e,value:t});return new Rg(i).toPromise()}async function Gq(n,e){const t=$_(n,!1).get(e),i=await new Rg(t).toPromise();return i===void 0?null:i.value}function WN(n,e){const t=$_(n,!0).delete(e);return new Rg(t).toPromise()}const Wq=800,qq=3;class Hj{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await WE(),this.db)}async _withRetries(e){let t=0;for(;;)try{const i=await this._openDb();return await e(i)}catch(i){if(t++>qq)throw i;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return Vj()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=q_._getInstance(Bq()),this.receiver._subscribe("keyChanged",async(e,t)=>({keyProcessed:(await this._poll()).includes(t.key)})),this.receiver._subscribe("ping",async(e,t)=>["keyChanged"])}async initializeSender(){var e,t;if(this.activeServiceWorker=await Fq(),!this.activeServiceWorker)return;this.sender=new Uq(this.activeServiceWorker);const i=await this.sender._send("ping",{},800);i&&!((e=i[0])===null||e===void 0)&&e.fulfilled&&!((t=i[0])===null||t===void 0)&&t.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||Vq()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await WE();return await GN(e,g0,"1"),await WN(e,g0),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,t){return this._withPendingWrite(async()=>(await this._withRetries(i=>GN(i,e,t)),this.localCache[e]=t,this.notifyServiceWorker(e)))}async _get(e){const t=await this._withRetries(i=>Gq(i,e));return this.localCache[e]=t,t}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(t=>WN(t,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(r=>{const s=$_(r,!1).getAll();return new Rg(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const t=[],i=new Set;if(e.length!==0)for(const{fbase_key:r,value:s}of e)i.add(r),JSON.stringify(this.localCache[r])!==JSON.stringify(s)&&(this.notifyListeners(r,s),t.push(r));for(const r of Object.keys(this.localCache))this.localCache[r]&&!i.has(r)&&(this.notifyListeners(r,null),t.push(r));return t}notifyListeners(e,t){this.localCache[e]=t;const i=this.listeners[e];if(i)for(const r of Array.from(i))r(t)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),Wq)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,t){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(t)}_removeListener(e,t){this.listeners[e]&&(this.listeners[e].delete(t),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}Hj.type="LOCAL";const $q=Hj;new Ag(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xq(n,e){return e?xa(e):(Ct(n._popupRedirectResolver,n,"argument-error"),n._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oA extends iA{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return jd(e,this._buildIdpRequest())}_linkToIdToken(e,t){return jd(e,this._buildIdpRequest(t))}_getReauthenticationResolver(e){return jd(e,this._buildIdpRequest())}_buildIdpRequest(e){const t={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(t.idToken=e),t}}function Kq(n){return Lj(n.auth,new oA(n),n.bypassAuthState)}function Yq(n){const{auth:e,user:t}=n;return Ct(t,e,"internal-error"),Cq(t,new oA(n),n.bypassAuthState)}async function Jq(n){const{auth:e,user:t}=n;return Ct(t,e,"internal-error"),Eq(t,new oA(n),n.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gj{constructor(e,t,i,r,s=!1){this.auth=e,this.resolver=i,this.user=r,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(t)?t:[t]}execute(){return new Promise(async(e,t)=>{this.pendingPromise={resolve:e,reject:t};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(i){this.reject(i)}})}async onAuthEvent(e){const{urlResponse:t,sessionId:i,postBody:r,tenantId:s,error:o,type:a}=e;if(o){this.reject(o);return}const l={auth:this.auth,requestUri:t,sessionId:i,tenantId:s||void 0,postBody:r||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(a)(l))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Kq;case"linkViaPopup":case"linkViaRedirect":return Jq;case"reauthViaPopup":case"reauthViaRedirect":return Yq;default:yo(this.auth,"internal-error")}}resolve(e){Da(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Da(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qq=new Ag(2e3,1e4);class yd extends Gj{constructor(e,t,i,r,s){super(e,t,r,s),this.provider=i,this.authWindow=null,this.pollId=null,yd.currentPopupAction&&yd.currentPopupAction.cancel(),yd.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Ct(e,this.auth,"internal-error"),e}async onExecution(){Da(this.filter.length===1,"Popup operations only handle one event");const e=sA();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(t=>{this.reject(t)}),this.resolver._isIframeWebStorageSupported(this.auth,t=>{t||this.reject(jo(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(jo(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,yd.currentPopupAction=null}pollUserCancellation(){const e=()=>{var t,i;if(!((i=(t=this.authWindow)===null||t===void 0?void 0:t.window)===null||i===void 0)&&i.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(jo(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,Qq.get())};e()}}yd.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zq="pendingRedirect",Sx=new Map;class e$ extends Gj{constructor(e,t,i=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],t,void 0,i),this.eventId=null}async execute(){let e=Sx.get(this.auth._key());if(!e){try{const i=await t$(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(i)}catch(t){e=()=>Promise.reject(t)}Sx.set(this.auth._key(),e)}return this.bypassAuthState||Sx.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const t=await this.auth._redirectUserForId(e.eventId);if(t)return this.user=t,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function t$(n,e){const t=r$(e),i=i$(n);if(!await i._isAvailable())return!1;const r=await i._get(t)==="true";return await i._remove(t),r}function n$(n,e){Sx.set(n._key(),e)}function i$(n){return xa(n._redirectPersistence)}function r$(n){return bx(Zq,n.config.apiKey,n.name)}async function s$(n,e,t=!1){if(zs(n.app))return Promise.reject(ba(n));const i=fc(n),r=Xq(i,e),o=await new e$(i,r,t).execute();return o&&!t&&(delete o.user._redirectEventId,await i._persistUserIfCurrent(o.user),await i._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const o$=10*60*1e3;class a${constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let t=!1;return this.consumers.forEach(i=>{this.isEventForConsumer(e,i)&&(t=!0,this.sendToConsumer(e,i),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!l$(e)||(this.hasHandledPotentialRedirect=!0,t||(this.queuedRedirectEvent=e,t=!0)),t}sendToConsumer(e,t){var i;if(e.error&&!Wj(e)){const r=((i=e.error.code)===null||i===void 0?void 0:i.split("auth/")[1])||"internal-error";t.onError(jo(this.auth,r))}else t.onAuthEvent(e)}isEventForConsumer(e,t){const i=t.eventId===null||!!e.eventId&&e.eventId===t.eventId;return t.filter.includes(e.type)&&i}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=o$&&this.cachedEventUids.clear(),this.cachedEventUids.has(qN(e))}saveEventToCache(e){this.cachedEventUids.add(qN(e)),this.lastProcessedEventTime=Date.now()}}function qN(n){return[n.type,n.eventId,n.sessionId,n.tenantId].filter(e=>e).join("-")}function Wj({type:n,error:e}){return n==="unknown"&&e?.code==="auth/no-auth-event"}function l$(n){switch(n.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return Wj(n);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function c$(n,e={}){return Ga(n,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u$=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,h$=/^https?/;async function d$(n){if(n.config.emulator)return;const{authorizedDomains:e}=await c$(n);for(const t of e)try{if(f$(t))return}catch{}yo(n,"unauthorized-domain")}function f$(n){const e=HE(),{protocol:t,hostname:i}=new URL(e);if(n.startsWith("chrome-extension://")){const o=new URL(n);return o.hostname===""&&i===""?t==="chrome-extension:"&&n.replace("chrome-extension://","")===e.replace("chrome-extension://",""):t==="chrome-extension:"&&o.hostname===i}if(!h$.test(t))return!1;if(u$.test(n))return i===n;const r=n.replace(/\./g,"\\.");return new RegExp("^(.+\\."+r+"|"+r+")$","i").test(i)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p$=new Ag(3e4,6e4);function $N(){const n=Fo().___jsl;if(n?.H){for(const e of Object.keys(n.H))if(n.H[e].r=n.H[e].r||[],n.H[e].L=n.H[e].L||[],n.H[e].r=[...n.H[e].L],n.CP)for(let t=0;t<n.CP.length;t++)n.CP[t]=null}}function m$(n){return new Promise((e,t)=>{var i,r,s;function o(){$N(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{$N(),t(jo(n,"network-request-failed"))},timeout:p$.get()})}if(!((r=(i=Fo().gapi)===null||i===void 0?void 0:i.iframes)===null||r===void 0)&&r.Iframe)e(gapi.iframes.getContext());else if(!((s=Fo().gapi)===null||s===void 0)&&s.load)o();else{const a=sq("iframefcb");return Fo()[a]=()=>{gapi.load?o():t(jo(n,"network-request-failed"))},Ij(`${rq()}?onload=${a}`).catch(l=>t(l))}}).catch(e=>{throw Tx=null,e})}let Tx=null;function g$(n){return Tx=Tx||m$(n),Tx}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const y$=new Ag(5e3,15e3),v$="__/auth/iframe",x$="emulator/auth/iframe",_$={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},w$=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function b$(n){const e=n.config;Ct(e.authDomain,n,"auth-domain-config-required");const t=e.emulator?eA(e,x$):`https://${n.config.authDomain}/${v$}`,i={apiKey:e.apiKey,appName:n.name,v:mf},r=w$.get(n.config.apiHost);r&&(i.eid=r);const s=n._getFrameworks();return s.length&&(i.fw=s.join(",")),`${t}?${Cg(i).slice(1)}`}async function S$(n){const e=await g$(n),t=Fo().gapi;return Ct(t,n,"internal-error"),e.open({where:document.body,url:b$(n),messageHandlersFilter:t.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:_$,dontclear:!0},i=>new Promise(async(r,s)=>{await i.restyle({setHideOnLeave:!1});const o=jo(n,"network-request-failed"),a=Fo().setTimeout(()=>{s(o)},y$.get());function l(){Fo().clearTimeout(a),r(i)}i.ping(l).then(l,()=>{s(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T$={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},E$=500,C$=600,A$="_blank",M$="http://localhost";class XN{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function I$(n,e,t,i=E$,r=C$){const s=Math.max((window.screen.availHeight-r)/2,0).toString(),o=Math.max((window.screen.availWidth-i)/2,0).toString();let a="";const l=Object.assign(Object.assign({},T$),{width:i.toString(),height:r.toString(),top:s,left:o}),c=br().toLowerCase();t&&(a=bj(c)?A$:t),_j(c)&&(e=e||M$,l.scrollbars="yes");const u=Object.entries(l).reduce((m,[g,x])=>`${m}${g}=${x},`,"");if(K7(c)&&a!=="_self")return P$(e||"",a),new XN(null);const p=window.open(e||"",a,u);Ct(p,n,"popup-blocked");try{p.focus()}catch{}return new XN(p)}function P$(n,e){const t=document.createElement("a");t.href=n,t.target=e;const i=document.createEvent("MouseEvent");i.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),t.dispatchEvent(i)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const R$="__/auth/handler",N$="emulator/auth/handler",D$=encodeURIComponent("fac");async function KN(n,e,t,i,r,s){Ct(n.config.authDomain,n,"auth-domain-config-required"),Ct(n.config.apiKey,n,"invalid-api-key");const o={apiKey:n.config.apiKey,appName:n.name,authType:t,redirectUrl:i,v:mf,eventId:r};if(e instanceof Nj){e.setDefaultLanguage(n.languageCode),o.providerId=e.providerId||"",v8(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[u,p]of Object.entries({}))o[u]=p}if(e instanceof Ig){const u=e.getScopes().filter(p=>p!=="");u.length>0&&(o.scopes=u.join(","))}n.tenantId&&(o.tid=n.tenantId);const a=o;for(const u of Object.keys(a))a[u]===void 0&&delete a[u];const l=await n._getAppCheckToken(),c=l?`#${D$}=${encodeURIComponent(l)}`:"";return`${L$(n)}?${Cg(a).slice(1)}${c}`}function L$({config:n}){return n.emulator?eA(n,N$):`https://${n.authDomain}/${R$}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const MS="webStorageSupport";class k${constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=Fj,this._completeRedirectFn=s$,this._overrideRedirectResult=n$}async _openPopup(e,t,i,r){var s;Da((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const o=await KN(e,t,i,HE(),r);return I$(e,o,sA())}async _openRedirect(e,t,i,r){await this._originValidation(e);const s=await KN(e,t,i,HE(),r);return jq(s),new Promise(()=>{})}_initialize(e){const t=e._key();if(this.eventManagers[t]){const{manager:r,promise:s}=this.eventManagers[t];return r?Promise.resolve(r):(Da(s,"If manager is not set, promise should be"),s)}const i=this.initAndGetManager(e);return this.eventManagers[t]={promise:i},i.catch(()=>{delete this.eventManagers[t]}),i}async initAndGetManager(e){const t=await S$(e),i=new a$(e);return t.register("authEvent",r=>(Ct(r?.authEvent,e,"invalid-auth-event"),{status:i.onEvent(r.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:i},this.iframes[e._key()]=t,i}_isIframeWebStorageSupported(e,t){this.iframes[e._key()].send(MS,{type:MS},r=>{var s;const o=(s=r?.[0])===null||s===void 0?void 0:s[MS];o!==void 0&&t(!!o),yo(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const t=e._key();return this.originValidationPromises[t]||(this.originValidationPromises[t]=d$(e)),this.originValidationPromises[t]}get _shouldInitProactively(){return Aj()||wj()||nA()}}const O$=k$;var YN="@firebase/auth",JN="1.9.1";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class U${constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const t=this.auth.onIdTokenChanged(i=>{e(i?.stsTokenManager.accessToken||null)});this.internalListeners.set(e,t),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const t=this.internalListeners.get(e);t&&(this.internalListeners.delete(e),t(),this.updateProactiveRefresh())}assertAuthConfigured(){Ct(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function j$(n){switch(n){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";case"WebExtension":return"web-extension";default:return}}function F$(n){Kd(new ju("auth",(e,{options:t})=>{const i=e.getProvider("app").getImmediate(),r=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:a}=i.options;Ct(o&&!o.includes(":"),"invalid-api-key",{appName:i.name});const l={apiKey:o,authDomain:a,clientPlatform:n,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:Mj(n)},c=new tq(i,r,s,l);return hq(c,t),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,t,i)=>{e.getProvider("auth-internal").initialize()})),Kd(new ju("auth-internal",e=>{const t=fc(e.getProvider("auth").getImmediate());return(i=>new U$(i))(t)},"PRIVATE").setInstantiationMode("EXPLICIT")),Gl(YN,JN,j$(n)),Gl(YN,JN,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const V$=5*60,B$=rj("authIdTokenMaxAge")||V$;let QN=null;const z$=n=>async e=>{const t=e&&await e.getIdTokenResult(),i=t&&(new Date().getTime()-Date.parse(t.issuedAtTime))/1e3;if(i&&i>B$)return;const r=t?.token;QN!==r&&(QN=r,await fetch(n,{method:r?"POST":"DELETE",headers:r?{Authorization:`Bearer ${r}`}:{}}))};function Kl(n=lj()){const e=JC(n,"auth");if(e.isInitialized())return e.getImmediate();const t=uq(n,{popupRedirectResolver:O$,persistence:[$q,kq,Fj]}),i=rj("authTokenSyncURL");if(i&&typeof isSecureContext=="boolean"&&isSecureContext){const s=new URL(i,location.origin);if(location.origin===s.origin){const o=z$(s.toString());Nq(t,o,()=>o(t.currentUser)),Rq(t,a=>o(a))}}const r=nj("auth");return r&&dq(t,`http://${r}`),t}function H$(){var n,e;return(e=(n=document.getElementsByTagName("head"))===null||n===void 0?void 0:n[0])!==null&&e!==void 0?e:document}nq({loadJS(n){return new Promise((e,t)=>{const i=document.createElement("script");i.setAttribute("src",n),i.onload=e,i.onerror=r=>{const s=jo("internal-error");s.customData=r,t(s)},i.type="text/javascript",i.charset="UTF-8",H$().appendChild(i)})},gapiScript:"https://apis.google.com/js/api.js",recaptchaV2Script:"https://www.google.com/recaptcha/api.js",recaptchaEnterpriseScript:"https://www.google.com/recaptcha/enterprise.js?render="});F$("Browser");var ZN=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var Wl,qj;(function(){var n;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function e(N,P){function A(){}A.prototype=P.prototype,N.D=P.prototype,N.prototype=new A,N.prototype.constructor=N,N.C=function(M,D,z){for(var F=Array(arguments.length-2),re=2;re<arguments.length;re++)F[re-2]=arguments[re];return P.prototype[D].apply(M,F)}}function t(){this.blockSize=-1}function i(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}e(i,t),i.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function r(N,P,A){A||(A=0);var M=Array(16);if(typeof P=="string")for(var D=0;16>D;++D)M[D]=P.charCodeAt(A++)|P.charCodeAt(A++)<<8|P.charCodeAt(A++)<<16|P.charCodeAt(A++)<<24;else for(D=0;16>D;++D)M[D]=P[A++]|P[A++]<<8|P[A++]<<16|P[A++]<<24;P=N.g[0],A=N.g[1],D=N.g[2];var z=N.g[3],F=P+(z^A&(D^z))+M[0]+3614090360&4294967295;P=A+(F<<7&4294967295|F>>>25),F=z+(D^P&(A^D))+M[1]+3905402710&4294967295,z=P+(F<<12&4294967295|F>>>20),F=D+(A^z&(P^A))+M[2]+606105819&4294967295,D=z+(F<<17&4294967295|F>>>15),F=A+(P^D&(z^P))+M[3]+3250441966&4294967295,A=D+(F<<22&4294967295|F>>>10),F=P+(z^A&(D^z))+M[4]+4118548399&4294967295,P=A+(F<<7&4294967295|F>>>25),F=z+(D^P&(A^D))+M[5]+1200080426&4294967295,z=P+(F<<12&4294967295|F>>>20),F=D+(A^z&(P^A))+M[6]+2821735955&4294967295,D=z+(F<<17&4294967295|F>>>15),F=A+(P^D&(z^P))+M[7]+4249261313&4294967295,A=D+(F<<22&4294967295|F>>>10),F=P+(z^A&(D^z))+M[8]+1770035416&4294967295,P=A+(F<<7&4294967295|F>>>25),F=z+(D^P&(A^D))+M[9]+2336552879&4294967295,z=P+(F<<12&4294967295|F>>>20),F=D+(A^z&(P^A))+M[10]+4294925233&4294967295,D=z+(F<<17&4294967295|F>>>15),F=A+(P^D&(z^P))+M[11]+2304563134&4294967295,A=D+(F<<22&4294967295|F>>>10),F=P+(z^A&(D^z))+M[12]+1804603682&4294967295,P=A+(F<<7&4294967295|F>>>25),F=z+(D^P&(A^D))+M[13]+4254626195&4294967295,z=P+(F<<12&4294967295|F>>>20),F=D+(A^z&(P^A))+M[14]+2792965006&4294967295,D=z+(F<<17&4294967295|F>>>15),F=A+(P^D&(z^P))+M[15]+1236535329&4294967295,A=D+(F<<22&4294967295|F>>>10),F=P+(D^z&(A^D))+M[1]+4129170786&4294967295,P=A+(F<<5&4294967295|F>>>27),F=z+(A^D&(P^A))+M[6]+3225465664&4294967295,z=P+(F<<9&4294967295|F>>>23),F=D+(P^A&(z^P))+M[11]+643717713&4294967295,D=z+(F<<14&4294967295|F>>>18),F=A+(z^P&(D^z))+M[0]+3921069994&4294967295,A=D+(F<<20&4294967295|F>>>12),F=P+(D^z&(A^D))+M[5]+3593408605&4294967295,P=A+(F<<5&4294967295|F>>>27),F=z+(A^D&(P^A))+M[10]+38016083&4294967295,z=P+(F<<9&4294967295|F>>>23),F=D+(P^A&(z^P))+M[15]+3634488961&4294967295,D=z+(F<<14&4294967295|F>>>18),F=A+(z^P&(D^z))+M[4]+3889429448&4294967295,A=D+(F<<20&4294967295|F>>>12),F=P+(D^z&(A^D))+M[9]+568446438&4294967295,P=A+(F<<5&4294967295|F>>>27),F=z+(A^D&(P^A))+M[14]+3275163606&4294967295,z=P+(F<<9&4294967295|F>>>23),F=D+(P^A&(z^P))+M[3]+4107603335&4294967295,D=z+(F<<14&4294967295|F>>>18),F=A+(z^P&(D^z))+M[8]+1163531501&4294967295,A=D+(F<<20&4294967295|F>>>12),F=P+(D^z&(A^D))+M[13]+2850285829&4294967295,P=A+(F<<5&4294967295|F>>>27),F=z+(A^D&(P^A))+M[2]+4243563512&4294967295,z=P+(F<<9&4294967295|F>>>23),F=D+(P^A&(z^P))+M[7]+1735328473&4294967295,D=z+(F<<14&4294967295|F>>>18),F=A+(z^P&(D^z))+M[12]+2368359562&4294967295,A=D+(F<<20&4294967295|F>>>12),F=P+(A^D^z)+M[5]+4294588738&4294967295,P=A+(F<<4&4294967295|F>>>28),F=z+(P^A^D)+M[8]+2272392833&4294967295,z=P+(F<<11&4294967295|F>>>21),F=D+(z^P^A)+M[11]+1839030562&4294967295,D=z+(F<<16&4294967295|F>>>16),F=A+(D^z^P)+M[14]+4259657740&4294967295,A=D+(F<<23&4294967295|F>>>9),F=P+(A^D^z)+M[1]+2763975236&4294967295,P=A+(F<<4&4294967295|F>>>28),F=z+(P^A^D)+M[4]+1272893353&4294967295,z=P+(F<<11&4294967295|F>>>21),F=D+(z^P^A)+M[7]+4139469664&4294967295,D=z+(F<<16&4294967295|F>>>16),F=A+(D^z^P)+M[10]+3200236656&4294967295,A=D+(F<<23&4294967295|F>>>9),F=P+(A^D^z)+M[13]+681279174&4294967295,P=A+(F<<4&4294967295|F>>>28),F=z+(P^A^D)+M[0]+3936430074&4294967295,z=P+(F<<11&4294967295|F>>>21),F=D+(z^P^A)+M[3]+3572445317&4294967295,D=z+(F<<16&4294967295|F>>>16),F=A+(D^z^P)+M[6]+76029189&4294967295,A=D+(F<<23&4294967295|F>>>9),F=P+(A^D^z)+M[9]+3654602809&4294967295,P=A+(F<<4&4294967295|F>>>28),F=z+(P^A^D)+M[12]+3873151461&4294967295,z=P+(F<<11&4294967295|F>>>21),F=D+(z^P^A)+M[15]+530742520&4294967295,D=z+(F<<16&4294967295|F>>>16),F=A+(D^z^P)+M[2]+3299628645&4294967295,A=D+(F<<23&4294967295|F>>>9),F=P+(D^(A|~z))+M[0]+4096336452&4294967295,P=A+(F<<6&4294967295|F>>>26),F=z+(A^(P|~D))+M[7]+1126891415&4294967295,z=P+(F<<10&4294967295|F>>>22),F=D+(P^(z|~A))+M[14]+2878612391&4294967295,D=z+(F<<15&4294967295|F>>>17),F=A+(z^(D|~P))+M[5]+4237533241&4294967295,A=D+(F<<21&4294967295|F>>>11),F=P+(D^(A|~z))+M[12]+1700485571&4294967295,P=A+(F<<6&4294967295|F>>>26),F=z+(A^(P|~D))+M[3]+2399980690&4294967295,z=P+(F<<10&4294967295|F>>>22),F=D+(P^(z|~A))+M[10]+4293915773&4294967295,D=z+(F<<15&4294967295|F>>>17),F=A+(z^(D|~P))+M[1]+2240044497&4294967295,A=D+(F<<21&4294967295|F>>>11),F=P+(D^(A|~z))+M[8]+1873313359&4294967295,P=A+(F<<6&4294967295|F>>>26),F=z+(A^(P|~D))+M[15]+4264355552&4294967295,z=P+(F<<10&4294967295|F>>>22),F=D+(P^(z|~A))+M[6]+2734768916&4294967295,D=z+(F<<15&4294967295|F>>>17),F=A+(z^(D|~P))+M[13]+1309151649&4294967295,A=D+(F<<21&4294967295|F>>>11),F=P+(D^(A|~z))+M[4]+4149444226&4294967295,P=A+(F<<6&4294967295|F>>>26),F=z+(A^(P|~D))+M[11]+3174756917&4294967295,z=P+(F<<10&4294967295|F>>>22),F=D+(P^(z|~A))+M[2]+718787259&4294967295,D=z+(F<<15&4294967295|F>>>17),F=A+(z^(D|~P))+M[9]+3951481745&4294967295,N.g[0]=N.g[0]+P&4294967295,N.g[1]=N.g[1]+(D+(F<<21&4294967295|F>>>11))&4294967295,N.g[2]=N.g[2]+D&4294967295,N.g[3]=N.g[3]+z&4294967295}i.prototype.u=function(N,P){P===void 0&&(P=N.length);for(var A=P-this.blockSize,M=this.B,D=this.h,z=0;z<P;){if(D==0)for(;z<=A;)r(this,N,z),z+=this.blockSize;if(typeof N=="string"){for(;z<P;)if(M[D++]=N.charCodeAt(z++),D==this.blockSize){r(this,M),D=0;break}}else for(;z<P;)if(M[D++]=N[z++],D==this.blockSize){r(this,M),D=0;break}}this.h=D,this.o+=P},i.prototype.v=function(){var N=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);N[0]=128;for(var P=1;P<N.length-8;++P)N[P]=0;var A=8*this.o;for(P=N.length-8;P<N.length;++P)N[P]=A&255,A/=256;for(this.u(N),N=Array(16),P=A=0;4>P;++P)for(var M=0;32>M;M+=8)N[A++]=this.g[P]>>>M&255;return N};function s(N,P){var A=a;return Object.prototype.hasOwnProperty.call(A,N)?A[N]:A[N]=P(N)}function o(N,P){this.h=P;for(var A=[],M=!0,D=N.length-1;0<=D;D--){var z=N[D]|0;M&&z==P||(A[D]=z,M=!1)}this.g=A}var a={};function l(N){return-128<=N&&128>N?s(N,function(P){return new o([P|0],0>P?-1:0)}):new o([N|0],0>N?-1:0)}function c(N){if(isNaN(N)||!isFinite(N))return p;if(0>N)return w(c(-N));for(var P=[],A=1,M=0;N>=A;M++)P[M]=N/A|0,A*=4294967296;return new o(P,0)}function u(N,P){if(N.length==0)throw Error("number format error: empty string");if(P=P||10,2>P||36<P)throw Error("radix out of range: "+P);if(N.charAt(0)=="-")return w(u(N.substring(1),P));if(0<=N.indexOf("-"))throw Error('number format error: interior "-" character');for(var A=c(Math.pow(P,8)),M=p,D=0;D<N.length;D+=8){var z=Math.min(8,N.length-D),F=parseInt(N.substring(D,D+z),P);8>z?(z=c(Math.pow(P,z)),M=M.j(z).add(c(F))):(M=M.j(A),M=M.add(c(F)))}return M}var p=l(0),m=l(1),g=l(16777216);n=o.prototype,n.m=function(){if(b(this))return-w(this).m();for(var N=0,P=1,A=0;A<this.g.length;A++){var M=this.i(A);N+=(0<=M?M:4294967296+M)*P,P*=4294967296}return N},n.toString=function(N){if(N=N||10,2>N||36<N)throw Error("radix out of range: "+N);if(x(this))return"0";if(b(this))return"-"+w(this).toString(N);for(var P=c(Math.pow(N,6)),A=this,M="";;){var D=C(A,P).g;A=v(A,D.j(P));var z=((0<A.g.length?A.g[0]:A.h)>>>0).toString(N);if(A=D,x(A))return z+M;for(;6>z.length;)z="0"+z;M=z+M}},n.i=function(N){return 0>N?0:N<this.g.length?this.g[N]:this.h};function x(N){if(N.h!=0)return!1;for(var P=0;P<N.g.length;P++)if(N.g[P]!=0)return!1;return!0}function b(N){return N.h==-1}n.l=function(N){return N=v(this,N),b(N)?-1:x(N)?0:1};function w(N){for(var P=N.g.length,A=[],M=0;M<P;M++)A[M]=~N.g[M];return new o(A,~N.h).add(m)}n.abs=function(){return b(this)?w(this):this},n.add=function(N){for(var P=Math.max(this.g.length,N.g.length),A=[],M=0,D=0;D<=P;D++){var z=M+(this.i(D)&65535)+(N.i(D)&65535),F=(z>>>16)+(this.i(D)>>>16)+(N.i(D)>>>16);M=F>>>16,z&=65535,F&=65535,A[D]=F<<16|z}return new o(A,A[A.length-1]&-2147483648?-1:0)};function v(N,P){return N.add(w(P))}n.j=function(N){if(x(this)||x(N))return p;if(b(this))return b(N)?w(this).j(w(N)):w(w(this).j(N));if(b(N))return w(this.j(w(N)));if(0>this.l(g)&&0>N.l(g))return c(this.m()*N.m());for(var P=this.g.length+N.g.length,A=[],M=0;M<2*P;M++)A[M]=0;for(M=0;M<this.g.length;M++)for(var D=0;D<N.g.length;D++){var z=this.i(M)>>>16,F=this.i(M)&65535,re=N.i(D)>>>16,le=N.i(D)&65535;A[2*M+2*D]+=F*le,S(A,2*M+2*D),A[2*M+2*D+1]+=z*le,S(A,2*M+2*D+1),A[2*M+2*D+1]+=F*re,S(A,2*M+2*D+1),A[2*M+2*D+2]+=z*re,S(A,2*M+2*D+2)}for(M=0;M<P;M++)A[M]=A[2*M+1]<<16|A[2*M];for(M=P;M<2*P;M++)A[M]=0;return new o(A,0)};function S(N,P){for(;(N[P]&65535)!=N[P];)N[P+1]+=N[P]>>>16,N[P]&=65535,P++}function E(N,P){this.g=N,this.h=P}function C(N,P){if(x(P))throw Error("division by zero");if(x(N))return new E(p,p);if(b(N))return P=C(w(N),P),new E(w(P.g),w(P.h));if(b(P))return P=C(N,w(P)),new E(w(P.g),P.h);if(30<N.g.length){if(b(N)||b(P))throw Error("slowDivide_ only works with positive integers.");for(var A=m,M=P;0>=M.l(N);)A=U(A),M=U(M);var D=O(A,1),z=O(M,1);for(M=O(M,2),A=O(A,2);!x(M);){var F=z.add(M);0>=F.l(N)&&(D=D.add(A),z=F),M=O(M,1),A=O(A,1)}return P=v(N,D.j(P)),new E(D,P)}for(D=p;0<=N.l(P);){for(A=Math.max(1,Math.floor(N.m()/P.m())),M=Math.ceil(Math.log(A)/Math.LN2),M=48>=M?1:Math.pow(2,M-48),z=c(A),F=z.j(P);b(F)||0<F.l(N);)A-=M,z=c(A),F=z.j(P);x(z)&&(z=m),D=D.add(z),N=v(N,F)}return new E(D,N)}n.A=function(N){return C(this,N).h},n.and=function(N){for(var P=Math.max(this.g.length,N.g.length),A=[],M=0;M<P;M++)A[M]=this.i(M)&N.i(M);return new o(A,this.h&N.h)},n.or=function(N){for(var P=Math.max(this.g.length,N.g.length),A=[],M=0;M<P;M++)A[M]=this.i(M)|N.i(M);return new o(A,this.h|N.h)},n.xor=function(N){for(var P=Math.max(this.g.length,N.g.length),A=[],M=0;M<P;M++)A[M]=this.i(M)^N.i(M);return new o(A,this.h^N.h)};function U(N){for(var P=N.g.length+1,A=[],M=0;M<P;M++)A[M]=N.i(M)<<1|N.i(M-1)>>>31;return new o(A,N.h)}function O(N,P){var A=P>>5;P%=32;for(var M=N.g.length-A,D=[],z=0;z<M;z++)D[z]=0<P?N.i(z+A)>>>P|N.i(z+A+1)<<32-P:N.i(z+A);return new o(D,N.h)}i.prototype.digest=i.prototype.v,i.prototype.reset=i.prototype.s,i.prototype.update=i.prototype.u,qj=i,o.prototype.add=o.prototype.add,o.prototype.multiply=o.prototype.j,o.prototype.modulo=o.prototype.A,o.prototype.compare=o.prototype.l,o.prototype.toNumber=o.prototype.m,o.prototype.toString=o.prototype.toString,o.prototype.getBits=o.prototype.i,o.fromNumber=c,o.fromString=u,Wl=o}).apply(typeof ZN<"u"?ZN:typeof self<"u"?self:typeof window<"u"?window:{});var rv=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var $j,Np,Xj,Ex,qE,Kj,Yj,Jj;(function(){var n,e=typeof Object.defineProperties=="function"?Object.defineProperty:function(y,R,L){return y==Array.prototype||y==Object.prototype||(y[R]=L.value),y};function t(y){y=[typeof globalThis=="object"&&globalThis,y,typeof window=="object"&&window,typeof self=="object"&&self,typeof rv=="object"&&rv];for(var R=0;R<y.length;++R){var L=y[R];if(L&&L.Math==Math)return L}throw Error("Cannot find global object")}var i=t(this);function r(y,R){if(R)e:{var L=i;y=y.split(".");for(var G=0;G<y.length-1;G++){var se=y[G];if(!(se in L))break e;L=L[se]}y=y[y.length-1],G=L[y],R=R(G),R!=G&&R!=null&&e(L,y,{configurable:!0,writable:!0,value:R})}}function s(y,R){y instanceof String&&(y+="");var L=0,G=!1,se={next:function(){if(!G&&L<y.length){var ge=L++;return{value:R(ge,y[ge]),done:!1}}return G=!0,{done:!0,value:void 0}}};return se[Symbol.iterator]=function(){return se},se}r("Array.prototype.values",function(y){return y||function(){return s(this,function(R,L){return L})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var o=o||{},a=this||self;function l(y){var R=typeof y;return R=R!="object"?R:y?Array.isArray(y)?"array":R:"null",R=="array"||R=="object"&&typeof y.length=="number"}function c(y){var R=typeof y;return R=="object"&&y!=null||R=="function"}function u(y,R,L){return y.call.apply(y.bind,arguments)}function p(y,R,L){if(!y)throw Error();if(2<arguments.length){var G=Array.prototype.slice.call(arguments,2);return function(){var se=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(se,G),y.apply(R,se)}}return function(){return y.apply(R,arguments)}}function m(y,R,L){return m=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?u:p,m.apply(null,arguments)}function g(y,R){var L=Array.prototype.slice.call(arguments,1);return function(){var G=L.slice();return G.push.apply(G,arguments),y.apply(this,G)}}function x(y,R){function L(){}L.prototype=R.prototype,y.aa=R.prototype,y.prototype=new L,y.prototype.constructor=y,y.Qb=function(G,se,ge){for(var Oe=Array(arguments.length-2),ln=2;ln<arguments.length;ln++)Oe[ln-2]=arguments[ln];return R.prototype[se].apply(G,Oe)}}function b(y){const R=y.length;if(0<R){const L=Array(R);for(let G=0;G<R;G++)L[G]=y[G];return L}return[]}function w(y,R){for(let L=1;L<arguments.length;L++){const G=arguments[L];if(l(G)){const se=y.length||0,ge=G.length||0;y.length=se+ge;for(let Oe=0;Oe<ge;Oe++)y[se+Oe]=G[Oe]}else y.push(G)}}class v{constructor(R,L){this.i=R,this.j=L,this.h=0,this.g=null}get(){let R;return 0<this.h?(this.h--,R=this.g,this.g=R.next,R.next=null):R=this.i(),R}}function S(y){return/^[\s\xa0]*$/.test(y)}function E(){var y=a.navigator;return y&&(y=y.userAgent)?y:""}function C(y){return C[" "](y),y}C[" "]=function(){};var U=E().indexOf("Gecko")!=-1&&!(E().toLowerCase().indexOf("webkit")!=-1&&E().indexOf("Edge")==-1)&&!(E().indexOf("Trident")!=-1||E().indexOf("MSIE")!=-1)&&E().indexOf("Edge")==-1;function O(y,R,L){for(const G in y)R.call(L,y[G],G,y)}function N(y,R){for(const L in y)R.call(void 0,y[L],L,y)}function P(y){const R={};for(const L in y)R[L]=y[L];return R}const A="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function M(y,R){let L,G;for(let se=1;se<arguments.length;se++){G=arguments[se];for(L in G)y[L]=G[L];for(let ge=0;ge<A.length;ge++)L=A[ge],Object.prototype.hasOwnProperty.call(G,L)&&(y[L]=G[L])}}function D(y){var R=1;y=y.split(":");const L=[];for(;0<R&&y.length;)L.push(y.shift()),R--;return y.length&&L.push(y.join(":")),L}function z(y){a.setTimeout(()=>{throw y},0)}function F(){var y=Q;let R=null;return y.g&&(R=y.g,y.g=y.g.next,y.g||(y.h=null),R.next=null),R}class re{constructor(){this.h=this.g=null}add(R,L){const G=le.get();G.set(R,L),this.h?this.h.next=G:this.g=G,this.h=G}}var le=new v(()=>new he,y=>y.reset());class he{constructor(){this.next=this.g=this.h=null}set(R,L){this.h=R,this.g=L,this.next=null}reset(){this.next=this.g=this.h=null}}let ue,q=!1,Q=new re,j=()=>{const y=a.Promise.resolve(void 0);ue=()=>{y.then(J)}};var J=()=>{for(var y;y=F();){try{y.h.call(y.g)}catch(L){z(L)}var R=le;R.j(y),100>R.h&&(R.h++,y.next=R.g,R.g=y)}q=!1};function ce(){this.s=this.s,this.C=this.C}ce.prototype.s=!1,ce.prototype.ma=function(){this.s||(this.s=!0,this.N())},ce.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function me(y,R){this.type=y,this.g=this.target=R,this.defaultPrevented=!1}me.prototype.h=function(){this.defaultPrevented=!0};var oe=function(){if(!a.addEventListener||!Object.defineProperty)return!1;var y=!1,R=Object.defineProperty({},"passive",{get:function(){y=!0}});try{const L=()=>{};a.addEventListener("test",L,R),a.removeEventListener("test",L,R)}catch{}return y}();function ye(y,R){if(me.call(this,y?y.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,y){var L=this.type=y.type,G=y.changedTouches&&y.changedTouches.length?y.changedTouches[0]:null;if(this.target=y.target||y.srcElement,this.g=R,R=y.relatedTarget){if(U){e:{try{C(R.nodeName);var se=!0;break e}catch{}se=!1}se||(R=null)}}else L=="mouseover"?R=y.fromElement:L=="mouseout"&&(R=y.toElement);this.relatedTarget=R,G?(this.clientX=G.clientX!==void 0?G.clientX:G.pageX,this.clientY=G.clientY!==void 0?G.clientY:G.pageY,this.screenX=G.screenX||0,this.screenY=G.screenY||0):(this.clientX=y.clientX!==void 0?y.clientX:y.pageX,this.clientY=y.clientY!==void 0?y.clientY:y.pageY,this.screenX=y.screenX||0,this.screenY=y.screenY||0),this.button=y.button,this.key=y.key||"",this.ctrlKey=y.ctrlKey,this.altKey=y.altKey,this.shiftKey=y.shiftKey,this.metaKey=y.metaKey,this.pointerId=y.pointerId||0,this.pointerType=typeof y.pointerType=="string"?y.pointerType:Re[y.pointerType]||"",this.state=y.state,this.i=y,y.defaultPrevented&&ye.aa.h.call(this)}}x(ye,me);var Re={2:"touch",3:"pen",4:"mouse"};ye.prototype.h=function(){ye.aa.h.call(this);var y=this.i;y.preventDefault?y.preventDefault():y.returnValue=!1};var Me="closure_listenable_"+(1e6*Math.random()|0),ht=0;function zt(y,R,L,G,se){this.listener=y,this.proxy=null,this.src=R,this.type=L,this.capture=!!G,this.ha=se,this.key=++ht,this.da=this.fa=!1}function Ge(y){y.da=!0,y.listener=null,y.proxy=null,y.src=null,y.ha=null}function Je(y){this.src=y,this.g={},this.h=0}Je.prototype.add=function(y,R,L,G,se){var ge=y.toString();y=this.g[ge],y||(y=this.g[ge]=[],this.h++);var Oe=Se(y,R,G,se);return-1<Oe?(R=y[Oe],L||(R.fa=!1)):(R=new zt(R,this.src,ge,!!G,se),R.fa=L,y.push(R)),R};function Ce(y,R){var L=R.type;if(L in y.g){var G=y.g[L],se=Array.prototype.indexOf.call(G,R,void 0),ge;(ge=0<=se)&&Array.prototype.splice.call(G,se,1),ge&&(Ge(R),y.g[L].length==0&&(delete y.g[L],y.h--))}}function Se(y,R,L,G){for(var se=0;se<y.length;++se){var ge=y[se];if(!ge.da&&ge.listener==R&&ge.capture==!!L&&ge.ha==G)return se}return-1}var X="closure_lm_"+(1e6*Math.random()|0),ot={};function Ne(y,R,L,G,se){if(Array.isArray(R)){for(var ge=0;ge<R.length;ge++)Ne(y,R[ge],L,G,se);return null}return L=Pe(L),y&&y[Me]?y.K(R,L,c(G)?!!G.capture:!1,se):qe(y,R,L,!1,G,se)}function qe(y,R,L,G,se,ge){if(!R)throw Error("Invalid event type");var Oe=c(se)?!!se.capture:!!se,ln=ae(y);if(ln||(y[X]=ln=new Je(y)),L=ln.add(R,L,G,Oe,ge),L.proxy)return L;if(G=Ue(),L.proxy=G,G.src=y,G.listener=L,y.addEventListener)oe||(se=Oe),se===void 0&&(se=!1),y.addEventListener(R.toString(),G,se);else if(y.attachEvent)y.attachEvent($(R.toString()),G);else if(y.addListener&&y.removeListener)y.addListener(G);else throw Error("addEventListener and attachEvent are unavailable.");return L}function Ue(){function y(L){return R.call(y.src,y.listener,L)}const R=B;return y}function gt(y,R,L,G,se){if(Array.isArray(R))for(var ge=0;ge<R.length;ge++)gt(y,R[ge],L,G,se);else G=c(G)?!!G.capture:!!G,L=Pe(L),y&&y[Me]?(y=y.i,R=String(R).toString(),R in y.g&&(ge=y.g[R],L=Se(ge,L,G,se),-1<L&&(Ge(ge[L]),Array.prototype.splice.call(ge,L,1),ge.length==0&&(delete y.g[R],y.h--)))):y&&(y=ae(y))&&(R=y.g[R.toString()],y=-1,R&&(y=Se(R,L,G,se)),(L=-1<y?R[y]:null)&&Ve(L))}function Ve(y){if(typeof y!="number"&&y&&!y.da){var R=y.src;if(R&&R[Me])Ce(R.i,y);else{var L=y.type,G=y.proxy;R.removeEventListener?R.removeEventListener(L,G,y.capture):R.detachEvent?R.detachEvent($(L),G):R.addListener&&R.removeListener&&R.removeListener(G),(L=ae(R))?(Ce(L,y),L.h==0&&(L.src=null,R[X]=null)):Ge(y)}}}function $(y){return y in ot?ot[y]:ot[y]="on"+y}function B(y,R){if(y.da)y=!0;else{R=new ye(R,this);var L=y.listener,G=y.ha||y.src;y.fa&&Ve(y),y=L.call(G,R)}return y}function ae(y){return y=y[X],y instanceof Je?y:null}var be="__closure_events_fn_"+(1e9*Math.random()>>>0);function Pe(y){return typeof y=="function"?y:(y[be]||(y[be]=function(R){return y.handleEvent(R)}),y[be])}function ve(){ce.call(this),this.i=new Je(this),this.M=this,this.F=null}x(ve,ce),ve.prototype[Me]=!0,ve.prototype.removeEventListener=function(y,R,L,G){gt(this,y,R,L,G)};function Fe(y,R){var L,G=y.F;if(G)for(L=[];G;G=G.F)L.push(G);if(y=y.M,G=R.type||R,typeof R=="string")R=new me(R,y);else if(R instanceof me)R.target=R.target||y;else{var se=R;R=new me(G,y),M(R,se)}if(se=!0,L)for(var ge=L.length-1;0<=ge;ge--){var Oe=R.g=L[ge];se=We(Oe,G,!0,R)&&se}if(Oe=R.g=y,se=We(Oe,G,!0,R)&&se,se=We(Oe,G,!1,R)&&se,L)for(ge=0;ge<L.length;ge++)Oe=R.g=L[ge],se=We(Oe,G,!1,R)&&se}ve.prototype.N=function(){if(ve.aa.N.call(this),this.i){var y=this.i,R;for(R in y.g){for(var L=y.g[R],G=0;G<L.length;G++)Ge(L[G]);delete y.g[R],y.h--}}this.F=null},ve.prototype.K=function(y,R,L,G){return this.i.add(String(y),R,!1,L,G)},ve.prototype.L=function(y,R,L,G){return this.i.add(String(y),R,!0,L,G)};function We(y,R,L,G){if(R=y.i.g[String(R)],!R)return!0;R=R.concat();for(var se=!0,ge=0;ge<R.length;++ge){var Oe=R[ge];if(Oe&&!Oe.da&&Oe.capture==L){var ln=Oe.listener,ui=Oe.ha||Oe.src;Oe.fa&&Ce(y.i,Oe),se=ln.call(ui,G)!==!1&&se}}return se&&!G.defaultPrevented}function tt(y,R,L){if(typeof y=="function")L&&(y=m(y,L));else if(y&&typeof y.handleEvent=="function")y=m(y.handleEvent,y);else throw Error("Invalid listener argument");return 2147483647<Number(R)?-1:a.setTimeout(y,R||0)}function Gt(y){y.g=tt(()=>{y.g=null,y.i&&(y.i=!1,Gt(y))},y.l);const R=y.h;y.h=null,y.m.apply(null,R)}class Le extends ce{constructor(R,L){super(),this.m=R,this.l=L,this.h=null,this.i=!1,this.g=null}j(R){this.h=arguments,this.g?this.i=!0:Gt(this)}N(){super.N(),this.g&&(a.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function nt(y){ce.call(this),this.h=y,this.g={}}x(nt,ce);var wt=[];function Tt(y){O(y.g,function(R,L){this.g.hasOwnProperty(L)&&Ve(R)},y),y.g={}}nt.prototype.N=function(){nt.aa.N.call(this),Tt(this)},nt.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var rt=a.JSON.stringify,Qt=a.JSON.parse,Nt=class{stringify(y){return a.JSON.stringify(y,void 0)}parse(y){return a.JSON.parse(y,void 0)}};function xn(){}xn.prototype.h=null;function Z(y){return y.h||(y.h=y.i())}function $e(){}var _e={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function Te(){me.call(this,"d")}x(Te,me);function Ke(){me.call(this,"c")}x(Ke,me);var ze={},Rt=null;function Cn(){return Rt=Rt||new ve}ze.La="serverreachability";function Yn(y){me.call(this,ze.La,y)}x(Yn,me);function Zt(y){const R=Cn();Fe(R,new Yn(R))}ze.STAT_EVENT="statevent";function Vi(y,R){me.call(this,ze.STAT_EVENT,y),this.stat=R}x(Vi,me);function Pn(y){const R=Cn();Fe(R,new Vi(R,y))}ze.Ma="timingevent";function wc(y,R){me.call(this,ze.Ma,y),this.size=R}x(wc,me);function So(y,R){if(typeof y!="function")throw Error("Fn must not be null and must be a function");return a.setTimeout(function(){y()},R)}function Zi(){this.g=!0}Zi.prototype.xa=function(){this.g=!1};function Jo(y,R,L,G,se,ge){y.info(function(){if(y.g)if(ge)for(var Oe="",ln=ge.split("&"),ui=0;ui<ln.length;ui++){var nn=ln[ui].split("=");if(1<nn.length){var hi=nn[0];nn=nn[1];var Sn=hi.split("_");Oe=2<=Sn.length&&Sn[1]=="type"?Oe+(hi+"="+nn+"&"):Oe+(hi+"=redacted&")}}else Oe=null;else Oe=ge;return"XMLHTTP REQ ("+G+") [attempt "+se+"]: "+R+`
`+L+`
`+Oe})}function lh(y,R,L,G,se,ge,Oe){y.info(function(){return"XMLHTTP RESP ("+G+") [ attempt "+se+"]: "+R+`
`+L+`
`+ge+" "+Oe})}function Tr(y,R,L,G){y.info(function(){return"XMLHTTP TEXT ("+R+"): "+ch(y,L)+(G?" "+G:"")})}function qa(y,R){y.info(function(){return"TIMEOUT: "+R})}Zi.prototype.info=function(){};function ch(y,R){if(!y.g)return R;if(!R)return null;try{var L=JSON.parse(R);if(L){for(y=0;y<L.length;y++)if(Array.isArray(L[y])){var G=L[y];if(!(2>G.length)){var se=G[1];if(Array.isArray(se)&&!(1>se.length)){var ge=se[0];if(ge!="noop"&&ge!="stop"&&ge!="close")for(var Oe=1;Oe<se.length;Oe++)se[Oe]=""}}}}return rt(L)}catch{return R}}var Ys={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},bc={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},$a;function Xa(){}x(Xa,xn),Xa.prototype.g=function(){return new XMLHttpRequest},Xa.prototype.i=function(){return{}},$a=new Xa;function As(y,R,L,G){this.j=y,this.i=R,this.l=L,this.R=G||1,this.U=new nt(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Sc}function Sc(){this.i=null,this.g="",this.h=!1}var uh={},Tc={};function Ec(y,R,L){y.L=1,y.v=Vn(Ni(R)),y.m=L,y.P=!0,H(y,null)}function H(y,R){y.F=Date.now(),fe(y),y.A=Ni(y.v);var L=y.A,G=y.R;Array.isArray(G)||(G=[String(G)]),dh(L.i,"t",G),y.C=0,L=y.j.J,y.h=new Sc,y.g=Lc(y.j,L?R:null,!y.m),0<y.O&&(y.M=new Le(m(y.Y,y,y.g),y.O)),R=y.U,L=y.g,G=y.ca;var se="readystatechange";Array.isArray(se)||(se&&(wt[0]=se.toString()),se=wt);for(var ge=0;ge<se.length;ge++){var Oe=Ne(L,se[ge],G||R.handleEvent,!1,R.h||R);if(!Oe)break;R.g[Oe.key]=Oe}R=y.H?P(y.H):{},y.m?(y.u||(y.u="POST"),R["Content-Type"]="application/x-www-form-urlencoded",y.g.ea(y.A,y.u,y.m,R)):(y.u="GET",y.g.ea(y.A,y.u,null,R)),Zt(),Jo(y.i,y.u,y.A,y.l,y.R,y.m)}As.prototype.ca=function(y){y=y.target;const R=this.M;R&&ni(y)==3?R.j():this.Y(y)},As.prototype.Y=function(y){try{if(y==this.g)e:{const Sn=ni(this.g);var R=this.g.Ba();const di=this.g.Z();if(!(3>Sn)&&(Sn!=3||this.g&&(this.h.h||this.g.oa()||Pc(this.g)))){this.J||Sn!=4||R==7||(R==8||0>=di?Zt(3):Zt(2)),De(this);var L=this.g.Z();this.X=L;t:if(te(this)){var G=Pc(this.g);y="";var se=G.length,ge=ni(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){Ye(this),Be(this);var Oe="";break t}this.h.i=new a.TextDecoder}for(R=0;R<se;R++)this.h.h=!0,y+=this.h.i.decode(G[R],{stream:!(ge&&R==se-1)});G.length=0,this.h.g+=y,this.C=0,Oe=this.h.g}else Oe=this.g.oa();if(this.o=L==200,lh(this.i,this.u,this.A,this.l,this.R,Sn,L),this.o){if(this.T&&!this.K){t:{if(this.g){var ln,ui=this.g;if((ln=ui.g?ui.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!S(ln)){var nn=ln;break t}}nn=null}if(L=nn)Tr(this.i,this.l,L,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,it(this,L);else{this.o=!1,this.s=3,Pn(12),Ye(this),Be(this);break e}}if(this.P){L=!0;let rn;for(;!this.J&&this.C<Oe.length;)if(rn=pe(this,Oe),rn==Tc){Sn==4&&(this.s=4,Pn(14),L=!1),Tr(this.i,this.l,null,"[Incomplete Response]");break}else if(rn==uh){this.s=4,Pn(15),Tr(this.i,this.l,Oe,"[Invalid Chunk]"),L=!1;break}else Tr(this.i,this.l,rn,null),it(this,rn);if(te(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Sn!=4||Oe.length!=0||this.h.h||(this.s=1,Pn(16),L=!1),this.o=this.o&&L,!L)Tr(this.i,this.l,Oe,"[Invalid Chunked Response]"),Ye(this),Be(this);else if(0<Oe.length&&!this.W){this.W=!0;var hi=this.j;hi.g==this&&hi.ba&&!hi.M&&(hi.j.info("Great, no buffering proxy detected. Bytes received: "+Oe.length),cs(hi),hi.M=!0,Pn(11))}}else Tr(this.i,this.l,Oe,null),it(this,Oe);Sn==4&&Ye(this),this.o&&!this.J&&(Sn==4?Of(this.j,this):(this.o=!1,fe(this)))}else ph(this.g),L==400&&0<Oe.indexOf("Unknown SID")?(this.s=3,Pn(12)):(this.s=0,Pn(13)),Ye(this),Be(this)}}}catch{}finally{}};function te(y){return y.g?y.u=="GET"&&y.L!=2&&y.j.Ca:!1}function pe(y,R){var L=y.C,G=R.indexOf(`
`,L);return G==-1?Tc:(L=Number(R.substring(L,G)),isNaN(L)?uh:(G+=1,G+L>R.length?Tc:(R=R.slice(G,G+L),y.C=G+L,R)))}As.prototype.cancel=function(){this.J=!0,Ye(this)};function fe(y){y.S=Date.now()+y.I,ne(y,y.I)}function ne(y,R){if(y.B!=null)throw Error("WatchDog timer not null");y.B=So(m(y.ba,y),R)}function De(y){y.B&&(a.clearTimeout(y.B),y.B=null)}As.prototype.ba=function(){this.B=null;const y=Date.now();0<=y-this.S?(qa(this.i,this.A),this.L!=2&&(Zt(),Pn(17)),Ye(this),this.s=2,Be(this)):ne(this,this.S-y)};function Be(y){y.j.G==0||y.J||Of(y.j,y)}function Ye(y){De(y);var R=y.M;R&&typeof R.ma=="function"&&R.ma(),y.M=null,Tt(y.U),y.g&&(R=y.g,y.g=null,R.abort(),R.ma())}function it(y,R){try{var L=y.j;if(L.G!=0&&(L.g==y||Ot(L.h,y))){if(!y.K&&Ot(L.h,y)&&L.G==3){try{var G=L.Da.g.parse(R)}catch{G=null}if(Array.isArray(G)&&G.length==3){var se=G;if(se[0]==0){e:if(!L.u){if(L.g)if(L.g.F+3e3<y.F)ta(L),Nc(L);else break e;vh(L),Pn(18)}}else L.za=se[1],0<L.za-L.T&&37500>se[2]&&L.F&&L.v==0&&!L.C&&(L.C=So(m(L.Za,L),6e3));if(1>=dt(L.h)&&L.ca){try{L.ca()}catch{}L.ca=void 0}}else To(L,11)}else if((y.K||L.g==y)&&ta(L),!S(R))for(se=L.Da.g.parse(R),R=0;R<se.length;R++){let nn=se[R];if(L.T=nn[0],nn=nn[1],L.G==2)if(nn[0]=="c"){L.K=nn[1],L.ia=nn[2];const hi=nn[3];hi!=null&&(L.la=hi,L.j.info("VER="+L.la));const Sn=nn[4];Sn!=null&&(L.Aa=Sn,L.j.info("SVER="+L.Aa));const di=nn[5];di!=null&&typeof di=="number"&&0<di&&(G=1.5*di,L.L=G,L.j.info("backChannelRequestTimeoutMs_="+G)),G=L;const rn=y.g;if(rn){const Eo=rn.g?rn.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Eo){var ge=G.h;ge.g||Eo.indexOf("spdy")==-1&&Eo.indexOf("quic")==-1&&Eo.indexOf("h2")==-1||(ge.j=ge.l,ge.g=new Set,ge.h&&(Wt(ge,ge.h),ge.h=null))}if(G.D){const Cr=rn.g?rn.g.getResponseHeader("X-HTTP-Session-Id"):null;Cr&&(G.ya=Cr,jt(G.I,G.D,Cr))}}L.G=3,L.l&&L.l.ua(),L.ba&&(L.R=Date.now()-y.F,L.j.info("Handshake RTT: "+L.R+"ms")),G=L;var Oe=y;if(G.qa=xh(G,G.J?G.ia:null,G.W),Oe.K){Kt(G.h,Oe);var ln=Oe,ui=G.L;ui&&(ln.I=ui),ln.B&&(De(ln),fe(ln)),G.g=Oe}else yh(G);0<L.i.length&&Ka(L)}else nn[0]!="stop"&&nn[0]!="close"||To(L,7);else L.G==3&&(nn[0]=="stop"||nn[0]=="close"?nn[0]=="stop"?To(L,7):Rc(L):nn[0]!="noop"&&L.l&&L.l.ta(nn),L.v=0)}}Zt(4)}catch{}}var xt=class{constructor(y,R){this.g=y,this.map=R}};function vt(y){this.l=y||10,a.PerformanceNavigationTiming?(y=a.performance.getEntriesByType("navigation"),y=0<y.length&&(y[0].nextHopProtocol=="hq"||y[0].nextHopProtocol=="h2")):y=!!(a.chrome&&a.chrome.loadTimes&&a.chrome.loadTimes()&&a.chrome.loadTimes().wasFetchedViaSpdy),this.j=y?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function He(y){return y.h?!0:y.g?y.g.size>=y.j:!1}function dt(y){return y.h?1:y.g?y.g.size:0}function Ot(y,R){return y.h?y.h==R:y.g?y.g.has(R):!1}function Wt(y,R){y.g?y.g.add(R):y.h=R}function Kt(y,R){y.h&&y.h==R?y.h=null:y.g&&y.g.has(R)&&y.g.delete(R)}vt.prototype.cancel=function(){if(this.i=Ut(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const y of this.g.values())y.cancel();this.g.clear()}};function Ut(y){if(y.h!=null)return y.i.concat(y.h.D);if(y.g!=null&&y.g.size!==0){let R=y.i;for(const L of y.g.values())R=R.concat(L.D);return R}return b(y.i)}function pt(y){if(y.V&&typeof y.V=="function")return y.V();if(typeof Map<"u"&&y instanceof Map||typeof Set<"u"&&y instanceof Set)return Array.from(y.values());if(typeof y=="string")return y.split("");if(l(y)){for(var R=[],L=y.length,G=0;G<L;G++)R.push(y[G]);return R}R=[],L=0;for(G in y)R[L++]=y[G];return R}function un(y){if(y.na&&typeof y.na=="function")return y.na();if(!y.V||typeof y.V!="function"){if(typeof Map<"u"&&y instanceof Map)return Array.from(y.keys());if(!(typeof Set<"u"&&y instanceof Set)){if(l(y)||typeof y=="string"){var R=[];y=y.length;for(var L=0;L<y;L++)R.push(L);return R}R=[],L=0;for(const G in y)R[L++]=G;return R}}}function en(y,R){if(y.forEach&&typeof y.forEach=="function")y.forEach(R,void 0);else if(l(y)||typeof y=="string")Array.prototype.forEach.call(y,R,void 0);else for(var L=un(y),G=pt(y),se=G.length,ge=0;ge<se;ge++)R.call(void 0,G[ge],L&&L[ge],y)}var Bi=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Js(y,R){if(y){y=y.split("&");for(var L=0;L<y.length;L++){var G=y[L].indexOf("="),se=null;if(0<=G){var ge=y[L].substring(0,G);se=y[L].substring(G+1)}else ge=y[L];R(ge,se?decodeURIComponent(se.replace(/\+/g," ")):"")}}}function Dn(y){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,y instanceof Dn){this.h=y.h,qt(this,y.j),this.o=y.o,this.g=y.g,Si(this,y.s),this.l=y.l;var R=y.i,L=new Ac;L.i=R.i,R.g&&(L.g=new Map(R.g),L.h=R.h),zi(this,L),this.m=y.m}else y&&(R=String(y).match(Bi))?(this.h=!1,qt(this,R[1]||"",!0),this.o=Fr(R[2]||""),this.g=Fr(R[3]||"",!0),Si(this,R[4]),this.l=Fr(R[5]||"",!0),zi(this,R[6]||"",!0),this.m=Fr(R[7]||"")):(this.h=!1,this.i=new Ac(null,this.h))}Dn.prototype.toString=function(){var y=[],R=this.j;R&&y.push(Ti(R,ny,!0),":");var L=this.g;return(L||R=="file")&&(y.push("//"),(R=this.o)&&y.push(Ti(R,ny,!0),"@"),y.push(encodeURIComponent(String(L)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),L=this.s,L!=null&&y.push(":",String(L))),(L=this.l)&&(this.g&&L.charAt(0)!="/"&&y.push("/"),y.push(Ti(L,L.charAt(0)=="/"?Rf:ib,!0))),(L=this.i.toString())&&y.push("?",L),(L=this.m)&&y.push("#",Ti(L,Cc)),y.join("")};function Ni(y){return new Dn(y)}function qt(y,R,L){y.j=L?Fr(R,!0):R,y.j&&(y.j=y.j.replace(/:$/,""))}function Si(y,R){if(R){if(R=Number(R),isNaN(R)||0>R)throw Error("Bad port number "+R);y.s=R}else y.s=null}function zi(y,R,L){R instanceof Ac?(y.i=R,rb(y.i,y.h)):(L||(R=Ti(R,Nf)),y.i=new Ac(R,y.h))}function jt(y,R,L){y.i.set(R,L)}function Vn(y){return jt(y,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),y}function Fr(y,R){return y?R?decodeURI(y.replace(/%25/g,"%2525")):decodeURIComponent(y):""}function Ti(y,R,L){return typeof y=="string"?(y=encodeURI(y).replace(R,hh),L&&(y=y.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),y):null}function hh(y){return y=y.charCodeAt(0),"%"+(y>>4&15).toString(16)+(y&15).toString(16)}var ny=/[#\/\?@]/g,ib=/[#\?:]/g,Rf=/[#\?]/g,Nf=/[#\?@]/g,Cc=/#/g;function Ac(y,R){this.h=this.g=null,this.i=y||null,this.j=!!R}function Ms(y){y.g||(y.g=new Map,y.h=0,y.i&&Js(y.i,function(R,L){y.add(decodeURIComponent(R.replace(/\+/g," ")),L)}))}n=Ac.prototype,n.add=function(y,R){Ms(this),this.i=null,y=Qo(this,y);var L=this.g.get(y);return L||this.g.set(y,L=[]),L.push(R),this.h+=1,this};function an(y,R){Ms(y),R=Qo(y,R),y.g.has(R)&&(y.i=null,y.h-=y.g.get(R).length,y.g.delete(R))}function Df(y,R){return Ms(y),R=Qo(y,R),y.g.has(R)}n.forEach=function(y,R){Ms(this),this.g.forEach(function(L,G){L.forEach(function(se){y.call(R,se,G,this)},this)},this)},n.na=function(){Ms(this);const y=Array.from(this.g.values()),R=Array.from(this.g.keys()),L=[];for(let G=0;G<R.length;G++){const se=y[G];for(let ge=0;ge<se.length;ge++)L.push(R[G])}return L},n.V=function(y){Ms(this);let R=[];if(typeof y=="string")Df(this,y)&&(R=R.concat(this.g.get(Qo(this,y))));else{y=Array.from(this.g.values());for(let L=0;L<y.length;L++)R=R.concat(y[L])}return R},n.set=function(y,R){return Ms(this),this.i=null,y=Qo(this,y),Df(this,y)&&(this.h-=this.g.get(y).length),this.g.set(y,[R]),this.h+=1,this},n.get=function(y,R){return y?(y=this.V(y),0<y.length?String(y[0]):R):R};function dh(y,R,L){an(y,R),0<L.length&&(y.i=null,y.g.set(Qo(y,R),b(L)),y.h+=L.length)}n.toString=function(){if(this.i)return this.i;if(!this.g)return"";const y=[],R=Array.from(this.g.keys());for(var L=0;L<R.length;L++){var G=R[L];const ge=encodeURIComponent(String(G)),Oe=this.V(G);for(G=0;G<Oe.length;G++){var se=ge;Oe[G]!==""&&(se+="="+encodeURIComponent(String(Oe[G]))),y.push(se)}}return this.i=y.join("&")};function Qo(y,R){return R=String(R),y.j&&(R=R.toLowerCase()),R}function rb(y,R){R&&!y.j&&(Ms(y),y.i=null,y.g.forEach(function(L,G){var se=G.toLowerCase();G!=se&&(an(this,G),dh(this,se,L))},y)),y.j=R}function sb(y,R){const L=new Zi;if(a.Image){const G=new Image;G.onload=g(Is,L,"TestLoadImage: loaded",!0,R,G),G.onerror=g(Is,L,"TestLoadImage: error",!1,R,G),G.onabort=g(Is,L,"TestLoadImage: abort",!1,R,G),G.ontimeout=g(Is,L,"TestLoadImage: timeout",!1,R,G),a.setTimeout(function(){G.ontimeout&&G.ontimeout()},1e4),G.src=y}else R(!1)}function ci(y,R){const L=new Zi,G=new AbortController,se=setTimeout(()=>{G.abort(),Is(L,"TestPingServer: timeout",!1,R)},1e4);fetch(y,{signal:G.signal}).then(ge=>{clearTimeout(se),ge.ok?Is(L,"TestPingServer: ok",!0,R):Is(L,"TestPingServer: server error",!1,R)}).catch(()=>{clearTimeout(se),Is(L,"TestPingServer: error",!1,R)})}function Is(y,R,L,G,se){try{se&&(se.onload=null,se.onerror=null,se.onabort=null,se.ontimeout=null),G(L)}catch{}}function ob(){this.g=new Nt}function Lf(y,R,L){const G=L||"";try{en(y,function(se,ge){let Oe=se;c(se)&&(Oe=rt(se)),R.push(G+ge+"="+encodeURIComponent(Oe))})}catch(se){throw R.push(G+"type="+encodeURIComponent("_badmap")),se}}function fh(y){this.l=y.Ub||null,this.j=y.eb||!1}x(fh,xn),fh.prototype.g=function(){return new Zo(this.l,this.j)},fh.prototype.i=function(y){return function(){return y}}({});function Zo(y,R){ve.call(this),this.D=y,this.o=R,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}x(Zo,ve),n=Zo.prototype,n.open=function(y,R){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=y,this.A=R,this.readyState=1,Ic(this)},n.send=function(y){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const R={headers:this.u,method:this.B,credentials:this.m,cache:void 0};y&&(R.body=y),(this.D||a).fetch(new Request(this.A,R)).then(this.Sa.bind(this),this.ga.bind(this))},n.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Mc(this)),this.readyState=0},n.Sa=function(y){if(this.g&&(this.l=y,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=y.headers,this.readyState=2,Ic(this)),this.g&&(this.readyState=3,Ic(this),this.g)))if(this.responseType==="arraybuffer")y.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof a.ReadableStream<"u"&&"body"in y){if(this.j=y.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;ss(this)}else y.text().then(this.Ra.bind(this),this.ga.bind(this))};function ss(y){y.j.read().then(y.Pa.bind(y)).catch(y.ga.bind(y))}n.Pa=function(y){if(this.g){if(this.o&&y.value)this.response.push(y.value);else if(!this.o){var R=y.value?y.value:new Uint8Array(0);(R=this.v.decode(R,{stream:!y.done}))&&(this.response=this.responseText+=R)}y.done?Mc(this):Ic(this),this.readyState==3&&ss(this)}},n.Ra=function(y){this.g&&(this.response=this.responseText=y,Mc(this))},n.Qa=function(y){this.g&&(this.response=y,Mc(this))},n.ga=function(){this.g&&Mc(this)};function Mc(y){y.readyState=4,y.l=null,y.j=null,y.v=null,Ic(y)}n.setRequestHeader=function(y,R){this.u.append(y,R)},n.getResponseHeader=function(y){return this.h&&this.h.get(y.toLowerCase())||""},n.getAllResponseHeaders=function(){if(!this.h)return"";const y=[],R=this.h.entries();for(var L=R.next();!L.done;)L=L.value,y.push(L[0]+": "+L[1]),L=R.next();return y.join(`\r
`)};function Ic(y){y.onreadystatechange&&y.onreadystatechange.call(y)}Object.defineProperty(Zo.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(y){this.m=y?"include":"same-origin"}});function os(y){let R="";return O(y,function(L,G){R+=G,R+=":",R+=L,R+=`\r
`}),R}function as(y,R,L){e:{for(G in L){var G=!1;break e}G=!0}G||(L=os(L),typeof y=="string"?L!=null&&encodeURIComponent(String(L)):jt(y,R,L))}function Rn(y){ve.call(this),this.headers=new Map,this.o=y||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}x(Rn,ve);var kf=/^https?$/i,iy=["POST","PUT"];n=Rn.prototype,n.Ha=function(y){this.J=y},n.ea=function(y,R,L,G){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+y);R=R?R.toUpperCase():"GET",this.D=y,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():$a.g(),this.v=this.o?Z(this.o):Z($a),this.g.onreadystatechange=m(this.Ea,this);try{this.B=!0,this.g.open(R,String(y),!0),this.B=!1}catch(ge){ry(this,ge);return}if(y=L||"",L=new Map(this.headers),G)if(Object.getPrototypeOf(G)===Object.prototype)for(var se in G)L.set(se,G[se]);else if(typeof G.keys=="function"&&typeof G.get=="function")for(const ge of G.keys())L.set(ge,G.get(ge));else throw Error("Unknown input type for opt_headers: "+String(G));G=Array.from(L.keys()).find(ge=>ge.toLowerCase()=="content-type"),se=a.FormData&&y instanceof a.FormData,!(0<=Array.prototype.indexOf.call(iy,R,void 0))||G||se||L.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[ge,Oe]of L)this.g.setRequestHeader(ge,Oe);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{oy(this),this.u=!0,this.g.send(y),this.u=!1}catch(ge){ry(this,ge)}};function ry(y,R){y.h=!1,y.g&&(y.j=!0,y.g.abort(),y.j=!1),y.l=R,y.m=5,ls(y),ea(y)}function ls(y){y.A||(y.A=!0,Fe(y,"complete"),Fe(y,"error"))}n.abort=function(y){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=y||7,Fe(this,"complete"),Fe(this,"abort"),ea(this))},n.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),ea(this,!0)),Rn.aa.N.call(this)},n.Ea=function(){this.s||(this.B||this.u||this.j?sy(this):this.bb())},n.bb=function(){sy(this)};function sy(y){if(y.h&&typeof o<"u"&&(!y.v[1]||ni(y)!=4||y.Z()!=2)){if(y.u&&ni(y)==4)tt(y.Ea,0,y);else if(Fe(y,"readystatechange"),ni(y)==4){y.h=!1;try{const Oe=y.Z();e:switch(Oe){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var R=!0;break e;default:R=!1}var L;if(!(L=R)){var G;if(G=Oe===0){var se=String(y.D).match(Bi)[1]||null;!se&&a.self&&a.self.location&&(se=a.self.location.protocol.slice(0,-1)),G=!kf.test(se?se.toLowerCase():"")}L=G}if(L)Fe(y,"complete"),Fe(y,"success");else{y.m=6;try{var ge=2<ni(y)?y.g.statusText:""}catch{ge=""}y.l=ge+" ["+y.Z()+"]",ls(y)}}finally{ea(y)}}}}function ea(y,R){if(y.g){oy(y);const L=y.g,G=y.v[0]?()=>{}:null;y.g=null,y.v=null,R||Fe(y,"ready");try{L.onreadystatechange=G}catch{}}}function oy(y){y.I&&(a.clearTimeout(y.I),y.I=null)}n.isActive=function(){return!!this.g};function ni(y){return y.g?y.g.readyState:0}n.Z=function(){try{return 2<ni(this)?this.g.status:-1}catch{return-1}},n.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},n.Oa=function(y){if(this.g){var R=this.g.responseText;return y&&R.indexOf(y)==0&&(R=R.substring(y.length)),Qt(R)}};function Pc(y){try{if(!y.g)return null;if("response"in y.g)return y.g.response;switch(y.H){case"":case"text":return y.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in y.g)return y.g.mozResponseArrayBuffer}return null}catch{return null}}function ph(y){const R={};y=(y.g&&2<=ni(y)&&y.g.getAllResponseHeaders()||"").split(`\r
`);for(let G=0;G<y.length;G++){if(S(y[G]))continue;var L=D(y[G]);const se=L[0];if(L=L[1],typeof L!="string")continue;L=L.trim();const ge=R[se]||[];R[se]=ge,ge.push(L)}N(R,function(G){return G.join(", ")})}n.Ba=function(){return this.m},n.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function Ps(y,R,L){return L&&L.internalChannelParams&&L.internalChannelParams[y]||R}function mh(y){this.Aa=0,this.i=[],this.j=new Zi,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=Ps("failFast",!1,y),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=Ps("baseRetryDelayMs",5e3,y),this.cb=Ps("retryDelaySeedMs",1e4,y),this.Wa=Ps("forwardChannelMaxRetries",2,y),this.wa=Ps("forwardChannelRequestTimeoutMs",2e4,y),this.pa=y&&y.xmlHttpFactory||void 0,this.Xa=y&&y.Tb||void 0,this.Ca=y&&y.useFetchStreams||!1,this.L=void 0,this.J=y&&y.supportsCrossDomainXhr||!1,this.K="",this.h=new vt(y&&y.concurrentRequestLimit),this.Da=new ob,this.P=y&&y.fastHandshake||!1,this.O=y&&y.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=y&&y.Rb||!1,y&&y.xa&&this.j.xa(),y&&y.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&y&&y.detectBufferingProxy||!1,this.ja=void 0,y&&y.longPollingTimeout&&0<y.longPollingTimeout&&(this.ja=y.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}n=mh.prototype,n.la=8,n.G=1,n.connect=function(y,R,L,G){Pn(0),this.W=y,this.H=R||{},L&&G!==void 0&&(this.H.OSID=L,this.H.OAID=G),this.F=this.X,this.I=xh(this,null,this.W),Ka(this)};function Rc(y){if(gh(y),y.G==3){var R=y.U++,L=Ni(y.I);if(jt(L,"SID",y.K),jt(L,"RID",R),jt(L,"TYPE","terminate"),er(y,L),R=new As(y,y.j,R),R.L=2,R.v=Vn(Ni(L)),L=!1,a.navigator&&a.navigator.sendBeacon)try{L=a.navigator.sendBeacon(R.v.toString(),"")}catch{}!L&&a.Image&&(new Image().src=R.v,L=!0),L||(R.g=Lc(R.j,null),R.g.ea(R.v)),R.F=Date.now(),fe(R)}Uf(y)}function Nc(y){y.g&&(cs(y),y.g.cancel(),y.g=null)}function gh(y){Nc(y),y.u&&(a.clearTimeout(y.u),y.u=null),ta(y),y.h.cancel(),y.s&&(typeof y.s=="number"&&a.clearTimeout(y.s),y.s=null)}function Ka(y){if(!He(y.h)&&!y.s){y.s=!0;var R=y.Ga;ue||j(),q||(ue(),q=!0),Q.add(R,y),y.B=0}}function Ya(y,R){return dt(y.h)>=y.h.j-(y.s?1:0)?!1:y.s?(y.i=R.D.concat(y.i),!0):y.G==1||y.G==2||y.B>=(y.Va?0:y.Wa)?!1:(y.s=So(m(y.Ga,y,R),Dc(y,y.B)),y.B++,!0)}n.Ga=function(y){if(this.s)if(this.s=null,this.G==1){if(!y){this.U=Math.floor(1e5*Math.random()),y=this.U++;const se=new As(this,this.j,y);let ge=this.o;if(this.S&&(ge?(ge=P(ge),M(ge,this.S)):ge=this.S),this.m!==null||this.O||(se.H=ge,ge=null),this.P)e:{for(var R=0,L=0;L<this.i.length;L++){t:{var G=this.i[L];if("__data__"in G.map&&(G=G.map.__data__,typeof G=="string")){G=G.length;break t}G=void 0}if(G===void 0)break;if(R+=G,4096<R){R=L;break e}if(R===4096||L===this.i.length-1){R=L+1;break e}}R=1e3}else R=1e3;R=Qs(this,se,R),L=Ni(this.I),jt(L,"RID",y),jt(L,"CVER",22),this.D&&jt(L,"X-HTTP-Session-Id",this.D),er(this,L),ge&&(this.O?R="headers="+encodeURIComponent(String(os(ge)))+"&"+R:this.m&&as(L,this.m,ge)),Wt(this.h,se),this.Ua&&jt(L,"TYPE","init"),this.P?(jt(L,"$req",R),jt(L,"SID","null"),se.T=!0,Ec(se,L,null)):Ec(se,L,R),this.G=2}}else this.G==3&&(y?Er(this,y):this.i.length==0||He(this.h)||Er(this))};function Er(y,R){var L;R?L=R.l:L=y.U++;const G=Ni(y.I);jt(G,"SID",y.K),jt(G,"RID",L),jt(G,"AID",y.T),er(y,G),y.m&&y.o&&as(G,y.m,y.o),L=new As(y,y.j,L,y.B+1),y.m===null&&(L.H=y.o),R&&(y.i=R.D.concat(y.i)),R=Qs(y,L,1e3),L.I=Math.round(.5*y.wa)+Math.round(.5*y.wa*Math.random()),Wt(y.h,L),Ec(L,G,R)}function er(y,R){y.H&&O(y.H,function(L,G){jt(R,G,L)}),y.l&&en({},function(L,G){jt(R,G,L)})}function Qs(y,R,L){L=Math.min(y.i.length,L);var G=y.l?m(y.l.Na,y.l,y):null;e:{var se=y.i;let ge=-1;for(;;){const Oe=["count="+L];ge==-1?0<L?(ge=se[0].g,Oe.push("ofs="+ge)):ge=0:Oe.push("ofs="+ge);let ln=!0;for(let ui=0;ui<L;ui++){let nn=se[ui].g;const hi=se[ui].map;if(nn-=ge,0>nn)ge=Math.max(0,se[ui].g-100),ln=!1;else try{Lf(hi,Oe,"req"+nn+"_")}catch{G&&G(hi)}}if(ln){G=Oe.join("&");break e}}}return y=y.i.splice(0,L),R.D=y,G}function yh(y){if(!y.g&&!y.u){y.Y=1;var R=y.Fa;ue||j(),q||(ue(),q=!0),Q.add(R,y),y.v=0}}function vh(y){return y.g||y.u||3<=y.v?!1:(y.Y++,y.u=So(m(y.Fa,y),Dc(y,y.v)),y.v++,!0)}n.Fa=function(){if(this.u=null,Zs(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var y=2*this.R;this.j.info("BP detection timer enabled: "+y),this.A=So(m(this.ab,this),y)}},n.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,Pn(10),Nc(this),Zs(this))};function cs(y){y.A!=null&&(a.clearTimeout(y.A),y.A=null)}function Zs(y){y.g=new As(y,y.j,"rpc",y.Y),y.m===null&&(y.g.H=y.o),y.g.O=0;var R=Ni(y.qa);jt(R,"RID","rpc"),jt(R,"SID",y.K),jt(R,"AID",y.T),jt(R,"CI",y.F?"0":"1"),!y.F&&y.ja&&jt(R,"TO",y.ja),jt(R,"TYPE","xmlhttp"),er(y,R),y.m&&y.o&&as(R,y.m,y.o),y.L&&(y.g.I=y.L);var L=y.g;y=y.ia,L.L=1,L.v=Vn(Ni(R)),L.m=null,L.P=!0,H(L,y)}n.Za=function(){this.C!=null&&(this.C=null,Nc(this),vh(this),Pn(19))};function ta(y){y.C!=null&&(a.clearTimeout(y.C),y.C=null)}function Of(y,R){var L=null;if(y.g==R){ta(y),cs(y),y.g=null;var G=2}else if(Ot(y.h,R))L=R.D,Kt(y.h,R),G=1;else return;if(y.G!=0){if(R.o)if(G==1){L=R.m?R.m.length:0,R=Date.now()-R.F;var se=y.B;G=Cn(),Fe(G,new wc(G,L)),Ka(y)}else yh(y);else if(se=R.s,se==3||se==0&&0<R.X||!(G==1&&Ya(y,R)||G==2&&vh(y)))switch(L&&0<L.length&&(R=y.h,R.i=R.i.concat(L)),se){case 1:To(y,5);break;case 4:To(y,10);break;case 3:To(y,6);break;default:To(y,2)}}}function Dc(y,R){let L=y.Ta+Math.floor(Math.random()*y.cb);return y.isActive()||(L*=2),L*R}function To(y,R){if(y.j.info("Error code "+R),R==2){var L=m(y.fb,y),G=y.Xa;const se=!G;G=new Dn(G||"//www.google.com/images/cleardot.gif"),a.location&&a.location.protocol=="http"||qt(G,"https"),Vn(G),se?sb(G.toString(),L):ci(G.toString(),L)}else Pn(2);y.G=0,y.l&&y.l.sa(R),Uf(y),gh(y)}n.fb=function(y){y?(this.j.info("Successfully pinged google.com"),Pn(2)):(this.j.info("Failed to ping google.com"),Pn(1))};function Uf(y){if(y.G=0,y.ka=[],y.l){const R=Ut(y.h);(R.length!=0||y.i.length!=0)&&(w(y.ka,R),w(y.ka,y.i),y.h.i.length=0,b(y.i),y.i.length=0),y.l.ra()}}function xh(y,R,L){var G=L instanceof Dn?Ni(L):new Dn(L);if(G.g!="")R&&(G.g=R+"."+G.g),Si(G,G.s);else{var se=a.location;G=se.protocol,R=R?R+"."+se.hostname:se.hostname,se=+se.port;var ge=new Dn(null);G&&qt(ge,G),R&&(ge.g=R),se&&Si(ge,se),L&&(ge.l=L),G=ge}return L=y.D,R=y.ya,L&&R&&jt(G,L,R),jt(G,"VER",y.la),er(y,G),G}function Lc(y,R,L){if(R&&!y.J)throw Error("Can't create secondary domain capable XhrIo object.");return R=y.Ca&&!y.pa?new Rn(new fh({eb:L})):new Rn(y.pa),R.Ha(y.J),R}n.isActive=function(){return!!this.l&&this.l.isActive(this)};function jf(){}n=jf.prototype,n.ua=function(){},n.ta=function(){},n.sa=function(){},n.ra=function(){},n.isActive=function(){return!0},n.Na=function(){};function kc(){}kc.prototype.g=function(y,R){return new tr(y,R)};function tr(y,R){ve.call(this),this.g=new mh(R),this.l=y,this.h=R&&R.messageUrlParams||null,y=R&&R.messageHeaders||null,R&&R.clientProtocolHeaderRequired&&(y?y["X-Client-Protocol"]="webchannel":y={"X-Client-Protocol":"webchannel"}),this.g.o=y,y=R&&R.initMessageHeaders||null,R&&R.messageContentType&&(y?y["X-WebChannel-Content-Type"]=R.messageContentType:y={"X-WebChannel-Content-Type":R.messageContentType}),R&&R.va&&(y?y["X-WebChannel-Client-Profile"]=R.va:y={"X-WebChannel-Client-Profile":R.va}),this.g.S=y,(y=R&&R.Sb)&&!S(y)&&(this.g.m=y),this.v=R&&R.supportsCrossDomainXhr||!1,this.u=R&&R.sendRawJson||!1,(R=R&&R.httpSessionIdParam)&&!S(R)&&(this.g.D=R,y=this.h,y!==null&&R in y&&(y=this.h,R in y&&delete y[R])),this.j=new us(this)}x(tr,ve),tr.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},tr.prototype.close=function(){Rc(this.g)},tr.prototype.o=function(y){var R=this.g;if(typeof y=="string"){var L={};L.__data__=y,y=L}else this.u&&(L={},L.__data__=rt(y),y=L);R.i.push(new xt(R.Ya++,y)),R.G==3&&Ka(R)},tr.prototype.N=function(){this.g.l=null,delete this.j,Rc(this.g),delete this.g,tr.aa.N.call(this)};function _h(y){Te.call(this),y.__headers__&&(this.headers=y.__headers__,this.statusCode=y.__status__,delete y.__headers__,delete y.__status__);var R=y.__sm__;if(R){e:{for(const L in R){y=L;break e}y=void 0}(this.i=y)&&(y=this.i,R=R!==null&&y in R?R[y]:void 0),this.data=R}else this.data=y}x(_h,Te);function na(){Ke.call(this),this.status=1}x(na,Ke);function us(y){this.g=y}x(us,jf),us.prototype.ua=function(){Fe(this.g,"a")},us.prototype.ta=function(y){Fe(this.g,new _h(y))},us.prototype.sa=function(y){Fe(this.g,new na)},us.prototype.ra=function(){Fe(this.g,"b")},kc.prototype.createWebChannel=kc.prototype.g,tr.prototype.send=tr.prototype.o,tr.prototype.open=tr.prototype.m,tr.prototype.close=tr.prototype.close,Jj=function(){return new kc},Yj=function(){return Cn()},Kj=ze,qE={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Ys.NO_ERROR=0,Ys.TIMEOUT=8,Ys.HTTP_ERROR=6,Ex=Ys,bc.COMPLETE="complete",Xj=bc,$e.EventType=_e,_e.OPEN="a",_e.CLOSE="b",_e.ERROR="c",_e.MESSAGE="d",ve.prototype.listen=ve.prototype.K,Np=$e,Rn.prototype.listenOnce=Rn.prototype.L,Rn.prototype.getLastError=Rn.prototype.Ka,Rn.prototype.getLastErrorCode=Rn.prototype.Ba,Rn.prototype.getStatus=Rn.prototype.Z,Rn.prototype.getResponseJson=Rn.prototype.Oa,Rn.prototype.getResponseText=Rn.prototype.oa,Rn.prototype.send=Rn.prototype.ea,Rn.prototype.setWithCredentials=Rn.prototype.Ha,$j=Rn}).apply(typeof rv<"u"?rv:typeof self<"u"?self:typeof window<"u"?window:{});const e2="@firebase/firestore",t2="4.7.9";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fr{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}fr.UNAUTHENTICATED=new fr(null),fr.GOOGLE_CREDENTIALS=new fr("google-credentials-uid"),fr.FIRST_PARTY=new fr("first-party-uid"),fr.MOCK_USER=new fr("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let yf="11.4.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bu=new KC("@firebase/firestore");function Jh(){return Bu.logLevel}function at(n,...e){if(Bu.logLevel<=sn.DEBUG){const t=e.map(aA);Bu.debug(`Firestore (${yf}): ${n}`,...t)}}function La(n,...e){if(Bu.logLevel<=sn.ERROR){const t=e.map(aA);Bu.error(`Firestore (${yf}): ${n}`,...t)}}function Yd(n,...e){if(Bu.logLevel<=sn.WARN){const t=e.map(aA);Bu.warn(`Firestore (${yf}): ${n}`,...t)}}function aA(n){if(typeof n=="string")return n;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(t){return JSON.stringify(t)}(n)}catch{return n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function It(n="Unexpected state"){const e=`FIRESTORE (${yf}) INTERNAL ASSERTION FAILED: `+n;throw La(e),new Error(e)}function En(n,e){n||It()}function kt(n,e){return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ee={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class lt extends za{constructor(e,t){super(e,t),this.code=e,this.message=t,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sa{constructor(){this.promise=new Promise((e,t)=>{this.resolve=e,this.reject=t})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qj{constructor(e,t){this.user=t,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class G${getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,t){e.enqueueRetryable(()=>t(fr.UNAUTHENTICATED))}shutdown(){}}class W${constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,t){this.changeListener=t,e.enqueueRetryable(()=>t(this.token.user))}shutdown(){this.changeListener=null}}class q${constructor(e){this.t=e,this.currentUser=fr.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,t){En(this.o===void 0);let i=this.i;const r=l=>this.i!==i?(i=this.i,t(l)):Promise.resolve();let s=new Sa;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new Sa,e.enqueueRetryable(()=>r(this.currentUser))};const o=()=>{const l=s;e.enqueueRetryable(async()=>{await l.promise,await r(this.currentUser)})},a=l=>{at("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=l,this.o&&(this.auth.addAuthTokenListener(this.o),o())};this.t.onInit(l=>a(l)),setTimeout(()=>{if(!this.auth){const l=this.t.getImmediate({optional:!0});l?a(l):(at("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new Sa)}},0),o()}getToken(){const e=this.i,t=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(t).then(i=>this.i!==e?(at("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):i?(En(typeof i.accessToken=="string"),new Qj(i.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const e=this.auth&&this.auth.getUid();return En(e===null||typeof e=="string"),new fr(e)}}class $${constructor(e,t,i){this.l=e,this.h=t,this.P=i,this.type="FirstParty",this.user=fr.FIRST_PARTY,this.T=new Map}I(){return this.P?this.P():null}get headers(){this.T.set("X-Goog-AuthUser",this.l);const e=this.I();return e&&this.T.set("Authorization",e),this.h&&this.T.set("X-Goog-Iam-Authorization-Token",this.h),this.T}}class X${constructor(e,t,i){this.l=e,this.h=t,this.P=i}getToken(){return Promise.resolve(new $$(this.l,this.h,this.P))}start(e,t){e.enqueueRetryable(()=>t(fr.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class n2{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class K${constructor(e,t){this.A=t,this.forceRefresh=!1,this.appCheck=null,this.R=null,this.V=null,zs(e)&&e.settings.appCheckToken&&(this.V=e.settings.appCheckToken)}start(e,t){En(this.o===void 0);const i=s=>{s.error!=null&&at("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.R;return this.R=s.token,at("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?t(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>i(s))};const r=s=>{at("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.o&&this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>r(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?r(s):at("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.V)return Promise.resolve(new n2(this.V));const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(t=>t?(En(typeof t.token=="string"),this.R=t.token,new n2(t.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Y$(n){const e=typeof self<"u"&&(self.crypto||self.msCrypto),t=new Uint8Array(n);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(t);else for(let i=0;i<n;i++)t[i]=Math.floor(256*Math.random());return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zj{static newId(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",t=62*Math.floor(4.129032258064516);let i="";for(;i.length<20;){const r=Y$(40);for(let s=0;s<r.length;++s)i.length<20&&r[s]<t&&(i+=e.charAt(r[s]%62))}return i}}function cn(n,e){return n<e?-1:n>e?1:0}function Jd(n,e,t){return n.length===e.length&&n.every((i,r)=>t(i,e[r]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const i2=-62135596800,r2=1e6;class bi{static now(){return bi.fromMillis(Date.now())}static fromDate(e){return bi.fromMillis(e.getTime())}static fromMillis(e){const t=Math.floor(e/1e3),i=Math.floor((e-1e3*t)*r2);return new bi(t,i)}constructor(e,t){if(this.seconds=e,this.nanoseconds=t,t<0)throw new lt(Ee.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(t>=1e9)throw new lt(Ee.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+t);if(e<i2)throw new lt(Ee.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new lt(Ee.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/r2}_compareTo(e){return this.seconds===e.seconds?cn(this.nanoseconds,e.nanoseconds):cn(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds-i2;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dt{static fromTimestamp(e){return new Dt(e)}static min(){return new Dt(new bi(0,0))}static max(){return new Dt(new bi(253402300799,999999999))}constructor(e){this.timestamp=e}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const s2="__name__";class Ro{constructor(e,t,i){t===void 0?t=0:t>e.length&&It(),i===void 0?i=e.length-t:i>e.length-t&&It(),this.segments=e,this.offset=t,this.len=i}get length(){return this.len}isEqual(e){return Ro.comparator(this,e)===0}child(e){const t=this.segments.slice(this.offset,this.limit());return e instanceof Ro?e.forEach(i=>{t.push(i)}):t.push(e),this.construct(t)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let t=0;t<this.length;t++)if(this.get(t)!==e.get(t))return!1;return!0}forEach(e){for(let t=this.offset,i=this.limit();t<i;t++)e(this.segments[t])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,t){const i=Math.min(e.length,t.length);for(let r=0;r<i;r++){const s=Ro.compareSegments(e.get(r),t.get(r));if(s!==0)return s}return Math.sign(e.length-t.length)}static compareSegments(e,t){const i=Ro.isNumericId(e),r=Ro.isNumericId(t);return i&&!r?-1:!i&&r?1:i&&r?Ro.extractNumericId(e).compare(Ro.extractNumericId(t)):e<t?-1:e>t?1:0}static isNumericId(e){return e.startsWith("__id")&&e.endsWith("__")}static extractNumericId(e){return Wl.fromString(e.substring(4,e.length-2))}}class Un extends Ro{construct(e,t,i){return new Un(e,t,i)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...e){const t=[];for(const i of e){if(i.indexOf("//")>=0)throw new lt(Ee.INVALID_ARGUMENT,`Invalid segment (${i}). Paths must not contain // in them.`);t.push(...i.split("/").filter(r=>r.length>0))}return new Un(t)}static emptyPath(){return new Un([])}}const J$=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Xi extends Ro{construct(e,t,i){return new Xi(e,t,i)}static isValidIdentifier(e){return J$.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Xi.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===s2}static keyField(){return new Xi([s2])}static fromServerFormat(e){const t=[];let i="",r=0;const s=()=>{if(i.length===0)throw new lt(Ee.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);t.push(i),i=""};let o=!1;for(;r<e.length;){const a=e[r];if(a==="\\"){if(r+1===e.length)throw new lt(Ee.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const l=e[r+1];if(l!=="\\"&&l!=="."&&l!=="`")throw new lt(Ee.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);i+=l,r+=2}else a==="`"?(o=!o,r++):a!=="."||o?(i+=a,r++):(s(),r++)}if(s(),o)throw new lt(Ee.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Xi(t)}static emptyPath(){return new Xi([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _t{constructor(e){this.path=e}static fromPath(e){return new _t(Un.fromString(e))}static fromName(e){return new _t(Un.fromString(e).popFirst(5))}static empty(){return new _t(Un.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Un.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,t){return Un.comparator(e.path,t.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new _t(new Un(e.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bm=-1;function Q$(n,e){const t=n.toTimestamp().seconds,i=n.toTimestamp().nanoseconds+1,r=Dt.fromTimestamp(i===1e9?new bi(t+1,0):new bi(t,i));return new Yl(r,_t.empty(),e)}function Z$(n){return new Yl(n.readTime,n.key,Bm)}class Yl{constructor(e,t,i){this.readTime=e,this.documentKey=t,this.largestBatchId=i}static min(){return new Yl(Dt.min(),_t.empty(),Bm)}static max(){return new Yl(Dt.max(),_t.empty(),Bm)}}function eX(n,e){let t=n.readTime.compareTo(e.readTime);return t!==0?t:(t=_t.comparator(n.documentKey,e.documentKey),t!==0?t:cn(n.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tX="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class nX{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function vf(n){if(n.code!==Ee.FAILED_PRECONDITION||n.message!==tX)throw n;at("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ae{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(t=>{this.isDone=!0,this.result=t,this.nextCallback&&this.nextCallback(t)},t=>{this.isDone=!0,this.error=t,this.catchCallback&&this.catchCallback(t)})}catch(e){return this.next(void 0,e)}next(e,t){return this.callbackAttached&&It(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(t,this.error):this.wrapSuccess(e,this.result):new Ae((i,r)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(i,r)},this.catchCallback=s=>{this.wrapFailure(t,s).next(i,r)}})}toPromise(){return new Promise((e,t)=>{this.next(e,t)})}wrapUserFunction(e){try{const t=e();return t instanceof Ae?t:Ae.resolve(t)}catch(t){return Ae.reject(t)}}wrapSuccess(e,t){return e?this.wrapUserFunction(()=>e(t)):Ae.resolve(t)}wrapFailure(e,t){return e?this.wrapUserFunction(()=>e(t)):Ae.reject(t)}static resolve(e){return new Ae((t,i)=>{t(e)})}static reject(e){return new Ae((t,i)=>{i(e)})}static waitFor(e){return new Ae((t,i)=>{let r=0,s=0,o=!1;e.forEach(a=>{++r,a.next(()=>{++s,o&&s===r&&t()},l=>i(l))}),o=!0,s===r&&t()})}static or(e){let t=Ae.resolve(!1);for(const i of e)t=t.next(r=>r?Ae.resolve(r):i());return t}static forEach(e,t){const i=[];return e.forEach((r,s)=>{i.push(t.call(this,r,s))}),this.waitFor(i)}static mapArray(e,t){return new Ae((i,r)=>{const s=e.length,o=new Array(s);let a=0;for(let l=0;l<s;l++){const c=l;t(e[c]).next(u=>{o[c]=u,++a,a===s&&i(o)},u=>r(u))}})}static doWhile(e,t){return new Ae((i,r)=>{const s=()=>{e()===!0?t().next(()=>{s()},r):i()};s()})}}function iX(n){const e=n.match(/Android ([\d.]+)/i),t=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(t)}function xf(n){return n.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class X_{constructor(e,t){this.previousValue=e,t&&(t.sequenceNumberHandler=i=>this.oe(i),this._e=i=>t.writeSequenceNumber(i))}oe(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this._e&&this._e(e),e}}X_.ae=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lA=-1;function K_(n){return n==null}function v0(n){return n===0&&1/n==-1/0}function rX(n){return typeof n=="number"&&Number.isInteger(n)&&!v0(n)&&n<=Number.MAX_SAFE_INTEGER&&n>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eF="";function sX(n){let e="";for(let t=0;t<n.length;t++)e.length>0&&(e=o2(e)),e=oX(n.get(t),e);return o2(e)}function oX(n,e){let t=e;const i=n.length;for(let r=0;r<i;r++){const s=n.charAt(r);switch(s){case"\0":t+="";break;case eF:t+="";break;default:t+=s}}return t}function o2(n){return n+eF+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function a2(n){let e=0;for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e++;return e}function pc(n,e){for(const t in n)Object.prototype.hasOwnProperty.call(n,t)&&e(t,n[t])}function tF(n){for(const e in n)if(Object.prototype.hasOwnProperty.call(n,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kn{constructor(e,t){this.comparator=e,this.root=t||qi.EMPTY}insert(e,t){return new Kn(this.comparator,this.root.insert(e,t,this.comparator).copy(null,null,qi.BLACK,null,null))}remove(e){return new Kn(this.comparator,this.root.remove(e,this.comparator).copy(null,null,qi.BLACK,null,null))}get(e){let t=this.root;for(;!t.isEmpty();){const i=this.comparator(e,t.key);if(i===0)return t.value;i<0?t=t.left:i>0&&(t=t.right)}return null}indexOf(e){let t=0,i=this.root;for(;!i.isEmpty();){const r=this.comparator(e,i.key);if(r===0)return t+i.left.size;r<0?i=i.left:(t+=i.left.size+1,i=i.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((t,i)=>(e(t,i),!1))}toString(){const e=[];return this.inorderTraversal((t,i)=>(e.push(`${t}:${i}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new sv(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new sv(this.root,e,this.comparator,!1)}getReverseIterator(){return new sv(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new sv(this.root,e,this.comparator,!0)}}class sv{constructor(e,t,i,r){this.isReverse=r,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=t?i(e.key,t):1,t&&r&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const t={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return t}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class qi{constructor(e,t,i,r,s){this.key=e,this.value=t,this.color=i??qi.RED,this.left=r??qi.EMPTY,this.right=s??qi.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,t,i,r,s){return new qi(e??this.key,t??this.value,i??this.color,r??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,t,i){let r=this;const s=i(e,r.key);return r=s<0?r.copy(null,null,null,r.left.insert(e,t,i),null):s===0?r.copy(null,t,null,null,null):r.copy(null,null,null,null,r.right.insert(e,t,i)),r.fixUp()}removeMin(){if(this.left.isEmpty())return qi.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,t){let i,r=this;if(t(e,r.key)<0)r.left.isEmpty()||r.left.isRed()||r.left.left.isRed()||(r=r.moveRedLeft()),r=r.copy(null,null,null,r.left.remove(e,t),null);else{if(r.left.isRed()&&(r=r.rotateRight()),r.right.isEmpty()||r.right.isRed()||r.right.left.isRed()||(r=r.moveRedRight()),t(e,r.key)===0){if(r.right.isEmpty())return qi.EMPTY;i=r.right.min(),r=r.copy(i.key,i.value,null,null,r.right.removeMin())}r=r.copy(null,null,null,null,r.right.remove(e,t))}return r.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,qi.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,qi.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),t=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,t)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw It();const e=this.left.check();if(e!==this.right.check())throw It();return e+(this.isRed()?0:1)}}qi.EMPTY=null,qi.RED=!0,qi.BLACK=!1;qi.EMPTY=new class{constructor(){this.size=0}get key(){throw It()}get value(){throw It()}get color(){throw It()}get left(){throw It()}get right(){throw It()}copy(e,t,i,r,s){return this}insert(e,t,i){return new qi(e,t)}remove(e,t){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ii{constructor(e){this.comparator=e,this.data=new Kn(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((t,i)=>(e(t),!1))}forEachInRange(e,t){const i=this.data.getIteratorFrom(e[0]);for(;i.hasNext();){const r=i.getNext();if(this.comparator(r.key,e[1])>=0)return;t(r.key)}}forEachWhile(e,t){let i;for(i=t!==void 0?this.data.getIteratorFrom(t):this.data.getIterator();i.hasNext();)if(!e(i.getNext().key))return}firstAfterOrEqual(e){const t=this.data.getIteratorFrom(e);return t.hasNext()?t.getNext().key:null}getIterator(){return new l2(this.data.getIterator())}getIteratorFrom(e){return new l2(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let t=this;return t.size<e.size&&(t=e,e=this),e.forEach(i=>{t=t.add(i)}),t}isEqual(e){if(!(e instanceof Ii)||this.size!==e.size)return!1;const t=this.data.getIterator(),i=e.data.getIterator();for(;t.hasNext();){const r=t.getNext().key,s=i.getNext().key;if(this.comparator(r,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(t=>{e.push(t)}),e}toString(){const e=[];return this.forEach(t=>e.push(t)),"SortedSet("+e.toString()+")"}copy(e){const t=new Ii(this.comparator);return t.data=e,t}}class l2{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ys{constructor(e){this.fields=e,e.sort(Xi.comparator)}static empty(){return new ys([])}unionWith(e){let t=new Ii(Xi.comparator);for(const i of this.fields)t=t.add(i);for(const i of e)t=t.add(i);return new ys(t.toArray())}covers(e){for(const t of this.fields)if(t.isPrefixOf(e))return!0;return!1}isEqual(e){return Jd(this.fields,e.fields,(t,i)=>t.isEqual(i))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nF extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qi{constructor(e){this.binaryString=e}static fromBase64String(e){const t=function(r){try{return atob(r)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new nF("Invalid base64 string: "+s):s}}(e);return new Qi(t)}static fromUint8Array(e){const t=function(r){let s="";for(let o=0;o<r.length;++o)s+=String.fromCharCode(r[o]);return s}(e);return new Qi(t)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(t){return btoa(t)}(this.binaryString)}toUint8Array(){return function(t){const i=new Uint8Array(t.length);for(let r=0;r<t.length;r++)i[r]=t.charCodeAt(r);return i}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return cn(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}Qi.EMPTY_BYTE_STRING=new Qi("");const aX=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Jl(n){if(En(!!n),typeof n=="string"){let e=0;const t=aX.exec(n);if(En(!!t),t[1]){let r=t[1];r=(r+"000000000").substr(0,9),e=Number(r)}const i=new Date(n);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:ai(n.seconds),nanos:ai(n.nanos)}}function ai(n){return typeof n=="number"?n:typeof n=="string"?Number(n):0}function Ql(n){return typeof n=="string"?Qi.fromBase64String(n):Qi.fromUint8Array(n)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iF="server_timestamp",rF="__type__",sF="__previous_value__",oF="__local_write_time__";function cA(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{})[rF])===null||t===void 0?void 0:t.stringValue)===iF}function Y_(n){const e=n.mapValue.fields[sF];return cA(e)?Y_(e):e}function zm(n){const e=Jl(n.mapValue.fields[oF].timestampValue);return new bi(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lX{constructor(e,t,i,r,s,o,a,l,c){this.databaseId=e,this.appId=t,this.persistenceKey=i,this.host=r,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=a,this.longPollingOptions=l,this.useFetchStreams=c}}const x0="(default)";class Hm{constructor(e,t){this.projectId=e,this.database=t||x0}static empty(){return new Hm("","")}get isDefaultDatabase(){return this.database===x0}isEqual(e){return e instanceof Hm&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const aF="__type__",cX="__max__",ov={mapValue:{}},lF="__vector__",_0="value";function Zl(n){return"nullValue"in n?0:"booleanValue"in n?1:"integerValue"in n||"doubleValue"in n?2:"timestampValue"in n?3:"stringValue"in n?5:"bytesValue"in n?6:"referenceValue"in n?7:"geoPointValue"in n?8:"arrayValue"in n?9:"mapValue"in n?cA(n)?4:hX(n)?9007199254740991:uX(n)?10:11:It()}function $o(n,e){if(n===e)return!0;const t=Zl(n);if(t!==Zl(e))return!1;switch(t){case 0:case 9007199254740991:return!0;case 1:return n.booleanValue===e.booleanValue;case 4:return zm(n).isEqual(zm(e));case 3:return function(r,s){if(typeof r.timestampValue=="string"&&typeof s.timestampValue=="string"&&r.timestampValue.length===s.timestampValue.length)return r.timestampValue===s.timestampValue;const o=Jl(r.timestampValue),a=Jl(s.timestampValue);return o.seconds===a.seconds&&o.nanos===a.nanos}(n,e);case 5:return n.stringValue===e.stringValue;case 6:return function(r,s){return Ql(r.bytesValue).isEqual(Ql(s.bytesValue))}(n,e);case 7:return n.referenceValue===e.referenceValue;case 8:return function(r,s){return ai(r.geoPointValue.latitude)===ai(s.geoPointValue.latitude)&&ai(r.geoPointValue.longitude)===ai(s.geoPointValue.longitude)}(n,e);case 2:return function(r,s){if("integerValue"in r&&"integerValue"in s)return ai(r.integerValue)===ai(s.integerValue);if("doubleValue"in r&&"doubleValue"in s){const o=ai(r.doubleValue),a=ai(s.doubleValue);return o===a?v0(o)===v0(a):isNaN(o)&&isNaN(a)}return!1}(n,e);case 9:return Jd(n.arrayValue.values||[],e.arrayValue.values||[],$o);case 10:case 11:return function(r,s){const o=r.mapValue.fields||{},a=s.mapValue.fields||{};if(a2(o)!==a2(a))return!1;for(const l in o)if(o.hasOwnProperty(l)&&(a[l]===void 0||!$o(o[l],a[l])))return!1;return!0}(n,e);default:return It()}}function Gm(n,e){return(n.values||[]).find(t=>$o(t,e))!==void 0}function Qd(n,e){if(n===e)return 0;const t=Zl(n),i=Zl(e);if(t!==i)return cn(t,i);switch(t){case 0:case 9007199254740991:return 0;case 1:return cn(n.booleanValue,e.booleanValue);case 2:return function(s,o){const a=ai(s.integerValue||s.doubleValue),l=ai(o.integerValue||o.doubleValue);return a<l?-1:a>l?1:a===l?0:isNaN(a)?isNaN(l)?0:-1:1}(n,e);case 3:return c2(n.timestampValue,e.timestampValue);case 4:return c2(zm(n),zm(e));case 5:return cn(n.stringValue,e.stringValue);case 6:return function(s,o){const a=Ql(s),l=Ql(o);return a.compareTo(l)}(n.bytesValue,e.bytesValue);case 7:return function(s,o){const a=s.split("/"),l=o.split("/");for(let c=0;c<a.length&&c<l.length;c++){const u=cn(a[c],l[c]);if(u!==0)return u}return cn(a.length,l.length)}(n.referenceValue,e.referenceValue);case 8:return function(s,o){const a=cn(ai(s.latitude),ai(o.latitude));return a!==0?a:cn(ai(s.longitude),ai(o.longitude))}(n.geoPointValue,e.geoPointValue);case 9:return u2(n.arrayValue,e.arrayValue);case 10:return function(s,o){var a,l,c,u;const p=s.fields||{},m=o.fields||{},g=(a=p[_0])===null||a===void 0?void 0:a.arrayValue,x=(l=m[_0])===null||l===void 0?void 0:l.arrayValue,b=cn(((c=g?.values)===null||c===void 0?void 0:c.length)||0,((u=x?.values)===null||u===void 0?void 0:u.length)||0);return b!==0?b:u2(g,x)}(n.mapValue,e.mapValue);case 11:return function(s,o){if(s===ov.mapValue&&o===ov.mapValue)return 0;if(s===ov.mapValue)return 1;if(o===ov.mapValue)return-1;const a=s.fields||{},l=Object.keys(a),c=o.fields||{},u=Object.keys(c);l.sort(),u.sort();for(let p=0;p<l.length&&p<u.length;++p){const m=cn(l[p],u[p]);if(m!==0)return m;const g=Qd(a[l[p]],c[u[p]]);if(g!==0)return g}return cn(l.length,u.length)}(n.mapValue,e.mapValue);default:throw It()}}function c2(n,e){if(typeof n=="string"&&typeof e=="string"&&n.length===e.length)return cn(n,e);const t=Jl(n),i=Jl(e),r=cn(t.seconds,i.seconds);return r!==0?r:cn(t.nanos,i.nanos)}function u2(n,e){const t=n.values||[],i=e.values||[];for(let r=0;r<t.length&&r<i.length;++r){const s=Qd(t[r],i[r]);if(s)return s}return cn(t.length,i.length)}function Zd(n){return $E(n)}function $E(n){return"nullValue"in n?"null":"booleanValue"in n?""+n.booleanValue:"integerValue"in n?""+n.integerValue:"doubleValue"in n?""+n.doubleValue:"timestampValue"in n?function(t){const i=Jl(t);return`time(${i.seconds},${i.nanos})`}(n.timestampValue):"stringValue"in n?n.stringValue:"bytesValue"in n?function(t){return Ql(t).toBase64()}(n.bytesValue):"referenceValue"in n?function(t){return _t.fromName(t).toString()}(n.referenceValue):"geoPointValue"in n?function(t){return`geo(${t.latitude},${t.longitude})`}(n.geoPointValue):"arrayValue"in n?function(t){let i="[",r=!0;for(const s of t.values||[])r?r=!1:i+=",",i+=$E(s);return i+"]"}(n.arrayValue):"mapValue"in n?function(t){const i=Object.keys(t.fields||{}).sort();let r="{",s=!0;for(const o of i)s?s=!1:r+=",",r+=`${o}:${$E(t.fields[o])}`;return r+"}"}(n.mapValue):It()}function Cx(n){switch(Zl(n)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const e=Y_(n);return e?16+Cx(e):16;case 5:return 2*n.stringValue.length;case 6:return Ql(n.bytesValue).approximateByteSize();case 7:return n.referenceValue.length;case 9:return function(i){return(i.values||[]).reduce((r,s)=>r+Cx(s),0)}(n.arrayValue);case 10:case 11:return function(i){let r=0;return pc(i.fields,(s,o)=>{r+=s.length+Cx(o)}),r}(n.mapValue);default:throw It()}}function h2(n,e){return{referenceValue:`projects/${n.projectId}/databases/${n.database}/documents/${e.path.canonicalString()}`}}function XE(n){return!!n&&"integerValue"in n}function uA(n){return!!n&&"arrayValue"in n}function d2(n){return!!n&&"nullValue"in n}function f2(n){return!!n&&"doubleValue"in n&&isNaN(Number(n.doubleValue))}function Ax(n){return!!n&&"mapValue"in n}function uX(n){var e,t;return((t=(((e=n?.mapValue)===null||e===void 0?void 0:e.fields)||{})[aF])===null||t===void 0?void 0:t.stringValue)===lF}function Qp(n){if(n.geoPointValue)return{geoPointValue:Object.assign({},n.geoPointValue)};if(n.timestampValue&&typeof n.timestampValue=="object")return{timestampValue:Object.assign({},n.timestampValue)};if(n.mapValue){const e={mapValue:{fields:{}}};return pc(n.mapValue.fields,(t,i)=>e.mapValue.fields[t]=Qp(i)),e}if(n.arrayValue){const e={arrayValue:{values:[]}};for(let t=0;t<(n.arrayValue.values||[]).length;++t)e.arrayValue.values[t]=Qp(n.arrayValue.values[t]);return e}return Object.assign({},n)}function hX(n){return(((n.mapValue||{}).fields||{}).__type__||{}).stringValue===cX}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kr{constructor(e){this.value=e}static empty(){return new Kr({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let t=this.value;for(let i=0;i<e.length-1;++i)if(t=(t.mapValue.fields||{})[e.get(i)],!Ax(t))return null;return t=(t.mapValue.fields||{})[e.lastSegment()],t||null}}set(e,t){this.getFieldsMap(e.popLast())[e.lastSegment()]=Qp(t)}setAll(e){let t=Xi.emptyPath(),i={},r=[];e.forEach((o,a)=>{if(!t.isImmediateParentOf(a)){const l=this.getFieldsMap(t);this.applyChanges(l,i,r),i={},r=[],t=a.popLast()}o?i[a.lastSegment()]=Qp(o):r.push(a.lastSegment())});const s=this.getFieldsMap(t);this.applyChanges(s,i,r)}delete(e){const t=this.field(e.popLast());Ax(t)&&t.mapValue.fields&&delete t.mapValue.fields[e.lastSegment()]}isEqual(e){return $o(this.value,e.value)}getFieldsMap(e){let t=this.value;t.mapValue.fields||(t.mapValue={fields:{}});for(let i=0;i<e.length;++i){let r=t.mapValue.fields[e.get(i)];Ax(r)&&r.mapValue.fields||(r={mapValue:{fields:{}}},t.mapValue.fields[e.get(i)]=r),t=r}return t.mapValue.fields}applyChanges(e,t,i){pc(t,(r,s)=>e[r]=s);for(const r of i)delete e[r]}clone(){return new Kr(Qp(this.value))}}function cF(n){const e=[];return pc(n.fields,(t,i)=>{const r=new Xi([t]);if(Ax(i)){const s=cF(i.mapValue).fields;if(s.length===0)e.push(r);else for(const o of s)e.push(r.child(o))}else e.push(r)}),new ys(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mr{constructor(e,t,i,r,s,o,a){this.key=e,this.documentType=t,this.version=i,this.readTime=r,this.createTime=s,this.data=o,this.documentState=a}static newInvalidDocument(e){return new mr(e,0,Dt.min(),Dt.min(),Dt.min(),Kr.empty(),0)}static newFoundDocument(e,t,i,r){return new mr(e,1,t,Dt.min(),i,r,0)}static newNoDocument(e,t){return new mr(e,2,t,Dt.min(),Dt.min(),Kr.empty(),0)}static newUnknownDocument(e,t){return new mr(e,3,t,Dt.min(),Dt.min(),Kr.empty(),2)}convertToFoundDocument(e,t){return!this.createTime.isEqual(Dt.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=t,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Kr.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Kr.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=Dt.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof mr&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new mr(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class w0{constructor(e,t){this.position=e,this.inclusive=t}}function p2(n,e,t){let i=0;for(let r=0;r<n.position.length;r++){const s=e[r],o=n.position[r];if(s.field.isKeyField()?i=_t.comparator(_t.fromName(o.referenceValue),t.key):i=Qd(o,t.data.field(s.field)),s.dir==="desc"&&(i*=-1),i!==0)break}return i}function m2(n,e){if(n===null)return e===null;if(e===null||n.inclusive!==e.inclusive||n.position.length!==e.position.length)return!1;for(let t=0;t<n.position.length;t++)if(!$o(n.position[t],e.position[t]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wm{constructor(e,t="asc"){this.field=e,this.dir=t}}function dX(n,e){return n.dir===e.dir&&n.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uF{}class xi extends uF{constructor(e,t,i){super(),this.field=e,this.op=t,this.value=i}static create(e,t,i){return e.isKeyField()?t==="in"||t==="not-in"?this.createKeyFieldInFilter(e,t,i):new pX(e,t,i):t==="array-contains"?new yX(e,i):t==="in"?new vX(e,i):t==="not-in"?new xX(e,i):t==="array-contains-any"?new _X(e,i):new xi(e,t,i)}static createKeyFieldInFilter(e,t,i){return t==="in"?new mX(e,i):new gX(e,i)}matches(e){const t=e.data.field(this.field);return this.op==="!="?t!==null&&this.matchesComparison(Qd(t,this.value)):t!==null&&Zl(this.value)===Zl(t)&&this.matchesComparison(Qd(t,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return It()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class vo extends uF{constructor(e,t){super(),this.filters=e,this.op=t,this.ce=null}static create(e,t){return new vo(e,t)}matches(e){return hF(this)?this.filters.find(t=>!t.matches(e))===void 0:this.filters.find(t=>t.matches(e))!==void 0}getFlattenedFilters(){return this.ce!==null||(this.ce=this.filters.reduce((e,t)=>e.concat(t.getFlattenedFilters()),[])),this.ce}getFilters(){return Object.assign([],this.filters)}}function hF(n){return n.op==="and"}function dF(n){return fX(n)&&hF(n)}function fX(n){for(const e of n.filters)if(e instanceof vo)return!1;return!0}function KE(n){if(n instanceof xi)return n.field.canonicalString()+n.op.toString()+Zd(n.value);if(dF(n))return n.filters.map(e=>KE(e)).join(",");{const e=n.filters.map(t=>KE(t)).join(",");return`${n.op}(${e})`}}function fF(n,e){return n instanceof xi?function(i,r){return r instanceof xi&&i.op===r.op&&i.field.isEqual(r.field)&&$o(i.value,r.value)}(n,e):n instanceof vo?function(i,r){return r instanceof vo&&i.op===r.op&&i.filters.length===r.filters.length?i.filters.reduce((s,o,a)=>s&&fF(o,r.filters[a]),!0):!1}(n,e):void It()}function pF(n){return n instanceof xi?function(t){return`${t.field.canonicalString()} ${t.op} ${Zd(t.value)}`}(n):n instanceof vo?function(t){return t.op.toString()+" {"+t.getFilters().map(pF).join(" ,")+"}"}(n):"Filter"}class pX extends xi{constructor(e,t,i){super(e,t,i),this.key=_t.fromName(i.referenceValue)}matches(e){const t=_t.comparator(e.key,this.key);return this.matchesComparison(t)}}class mX extends xi{constructor(e,t){super(e,"in",t),this.keys=mF("in",t)}matches(e){return this.keys.some(t=>t.isEqual(e.key))}}class gX extends xi{constructor(e,t){super(e,"not-in",t),this.keys=mF("not-in",t)}matches(e){return!this.keys.some(t=>t.isEqual(e.key))}}function mF(n,e){var t;return(((t=e.arrayValue)===null||t===void 0?void 0:t.values)||[]).map(i=>_t.fromName(i.referenceValue))}class yX extends xi{constructor(e,t){super(e,"array-contains",t)}matches(e){const t=e.data.field(this.field);return uA(t)&&Gm(t.arrayValue,this.value)}}class vX extends xi{constructor(e,t){super(e,"in",t)}matches(e){const t=e.data.field(this.field);return t!==null&&Gm(this.value.arrayValue,t)}}class xX extends xi{constructor(e,t){super(e,"not-in",t)}matches(e){if(Gm(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const t=e.data.field(this.field);return t!==null&&!Gm(this.value.arrayValue,t)}}class _X extends xi{constructor(e,t){super(e,"array-contains-any",t)}matches(e){const t=e.data.field(this.field);return!(!uA(t)||!t.arrayValue.values)&&t.arrayValue.values.some(i=>Gm(this.value.arrayValue,i))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wX{constructor(e,t=null,i=[],r=[],s=null,o=null,a=null){this.path=e,this.collectionGroup=t,this.orderBy=i,this.filters=r,this.limit=s,this.startAt=o,this.endAt=a,this.le=null}}function g2(n,e=null,t=[],i=[],r=null,s=null,o=null){return new wX(n,e,t,i,r,s,o)}function hA(n){const e=kt(n);if(e.le===null){let t=e.path.canonicalString();e.collectionGroup!==null&&(t+="|cg:"+e.collectionGroup),t+="|f:",t+=e.filters.map(i=>KE(i)).join(","),t+="|ob:",t+=e.orderBy.map(i=>function(s){return s.field.canonicalString()+s.dir}(i)).join(","),K_(e.limit)||(t+="|l:",t+=e.limit),e.startAt&&(t+="|lb:",t+=e.startAt.inclusive?"b:":"a:",t+=e.startAt.position.map(i=>Zd(i)).join(",")),e.endAt&&(t+="|ub:",t+=e.endAt.inclusive?"a:":"b:",t+=e.endAt.position.map(i=>Zd(i)).join(",")),e.le=t}return e.le}function dA(n,e){if(n.limit!==e.limit||n.orderBy.length!==e.orderBy.length)return!1;for(let t=0;t<n.orderBy.length;t++)if(!dX(n.orderBy[t],e.orderBy[t]))return!1;if(n.filters.length!==e.filters.length)return!1;for(let t=0;t<n.filters.length;t++)if(!fF(n.filters[t],e.filters[t]))return!1;return n.collectionGroup===e.collectionGroup&&!!n.path.isEqual(e.path)&&!!m2(n.startAt,e.startAt)&&m2(n.endAt,e.endAt)}function YE(n){return _t.isDocumentKey(n.path)&&n.collectionGroup===null&&n.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _f{constructor(e,t=null,i=[],r=[],s=null,o="F",a=null,l=null){this.path=e,this.collectionGroup=t,this.explicitOrderBy=i,this.filters=r,this.limit=s,this.limitType=o,this.startAt=a,this.endAt=l,this.he=null,this.Pe=null,this.Te=null,this.startAt,this.endAt}}function bX(n,e,t,i,r,s,o,a){return new _f(n,e,t,i,r,s,o,a)}function J_(n){return new _f(n)}function y2(n){return n.filters.length===0&&n.limit===null&&n.startAt==null&&n.endAt==null&&(n.explicitOrderBy.length===0||n.explicitOrderBy.length===1&&n.explicitOrderBy[0].field.isKeyField())}function gF(n){return n.collectionGroup!==null}function Zp(n){const e=kt(n);if(e.he===null){e.he=[];const t=new Set;for(const s of e.explicitOrderBy)e.he.push(s),t.add(s.field.canonicalString());const i=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";(function(o){let a=new Ii(Xi.comparator);return o.filters.forEach(l=>{l.getFlattenedFilters().forEach(c=>{c.isInequality()&&(a=a.add(c.field))})}),a})(e).forEach(s=>{t.has(s.canonicalString())||s.isKeyField()||e.he.push(new Wm(s,i))}),t.has(Xi.keyField().canonicalString())||e.he.push(new Wm(Xi.keyField(),i))}return e.he}function Vo(n){const e=kt(n);return e.Pe||(e.Pe=SX(e,Zp(n))),e.Pe}function SX(n,e){if(n.limitType==="F")return g2(n.path,n.collectionGroup,e,n.filters,n.limit,n.startAt,n.endAt);{e=e.map(r=>{const s=r.dir==="desc"?"asc":"desc";return new Wm(r.field,s)});const t=n.endAt?new w0(n.endAt.position,n.endAt.inclusive):null,i=n.startAt?new w0(n.startAt.position,n.startAt.inclusive):null;return g2(n.path,n.collectionGroup,e,n.filters,n.limit,t,i)}}function JE(n,e){const t=n.filters.concat([e]);return new _f(n.path,n.collectionGroup,n.explicitOrderBy.slice(),t,n.limit,n.limitType,n.startAt,n.endAt)}function b0(n,e,t){return new _f(n.path,n.collectionGroup,n.explicitOrderBy.slice(),n.filters.slice(),e,t,n.startAt,n.endAt)}function Q_(n,e){return dA(Vo(n),Vo(e))&&n.limitType===e.limitType}function yF(n){return`${hA(Vo(n))}|lt:${n.limitType}`}function Qh(n){return`Query(target=${function(t){let i=t.path.canonicalString();return t.collectionGroup!==null&&(i+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(i+=`, filters: [${t.filters.map(r=>pF(r)).join(", ")}]`),K_(t.limit)||(i+=", limit: "+t.limit),t.orderBy.length>0&&(i+=`, orderBy: [${t.orderBy.map(r=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(r)).join(", ")}]`),t.startAt&&(i+=", startAt: ",i+=t.startAt.inclusive?"b:":"a:",i+=t.startAt.position.map(r=>Zd(r)).join(",")),t.endAt&&(i+=", endAt: ",i+=t.endAt.inclusive?"a:":"b:",i+=t.endAt.position.map(r=>Zd(r)).join(",")),`Target(${i})`}(Vo(n))}; limitType=${n.limitType})`}function Z_(n,e){return e.isFoundDocument()&&function(i,r){const s=r.key.path;return i.collectionGroup!==null?r.key.hasCollectionId(i.collectionGroup)&&i.path.isPrefixOf(s):_t.isDocumentKey(i.path)?i.path.isEqual(s):i.path.isImmediateParentOf(s)}(n,e)&&function(i,r){for(const s of Zp(i))if(!s.field.isKeyField()&&r.data.field(s.field)===null)return!1;return!0}(n,e)&&function(i,r){for(const s of i.filters)if(!s.matches(r))return!1;return!0}(n,e)&&function(i,r){return!(i.startAt&&!function(o,a,l){const c=p2(o,a,l);return o.inclusive?c<=0:c<0}(i.startAt,Zp(i),r)||i.endAt&&!function(o,a,l){const c=p2(o,a,l);return o.inclusive?c>=0:c>0}(i.endAt,Zp(i),r))}(n,e)}function TX(n){return n.collectionGroup||(n.path.length%2==1?n.path.lastSegment():n.path.get(n.path.length-2))}function vF(n){return(e,t)=>{let i=!1;for(const r of Zp(n)){const s=EX(r,e,t);if(s!==0)return s;i=i||r.field.isKeyField()}return 0}}function EX(n,e,t){const i=n.field.isKeyField()?_t.comparator(e.key,t.key):function(s,o,a){const l=o.data.field(s),c=a.data.field(s);return l!==null&&c!==null?Qd(l,c):It()}(n.field,e,t);switch(n.dir){case"asc":return i;case"desc":return-1*i;default:return It()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zu{constructor(e,t){this.mapKeyFn=e,this.equalsFn=t,this.inner={},this.innerSize=0}get(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i!==void 0){for(const[r,s]of i)if(this.equalsFn(r,e))return s}}has(e){return this.get(e)!==void 0}set(e,t){const i=this.mapKeyFn(e),r=this.inner[i];if(r===void 0)return this.inner[i]=[[e,t]],void this.innerSize++;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],e))return void(r[s]=[e,t]);r.push([e,t]),this.innerSize++}delete(e){const t=this.mapKeyFn(e),i=this.inner[t];if(i===void 0)return!1;for(let r=0;r<i.length;r++)if(this.equalsFn(i[r][0],e))return i.length===1?delete this.inner[t]:i.splice(r,1),this.innerSize--,!0;return!1}forEach(e){pc(this.inner,(t,i)=>{for(const[r,s]of i)e(r,s)})}isEmpty(){return tF(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CX=new Kn(_t.comparator);function ka(){return CX}const xF=new Kn(_t.comparator);function Dp(...n){let e=xF;for(const t of n)e=e.insert(t.key,t);return e}function _F(n){let e=xF;return n.forEach((t,i)=>e=e.insert(t,i.overlayedDocument)),e}function gu(){return em()}function wF(){return em()}function em(){return new Zu(n=>n.toString(),(n,e)=>n.isEqual(e))}const AX=new Kn(_t.comparator),MX=new Ii(_t.comparator);function on(...n){let e=MX;for(const t of n)e=e.add(t);return e}const IX=new Ii(cn);function PX(){return IX}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function fA(n,e){if(n.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:v0(e)?"-0":e}}function bF(n){return{integerValue:""+n}}function RX(n,e){return rX(e)?bF(e):fA(n,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ew{constructor(){this._=void 0}}function NX(n,e,t){return n instanceof qm?function(r,s){const o={fields:{[rF]:{stringValue:iF},[oF]:{timestampValue:{seconds:r.seconds,nanos:r.nanoseconds}}}};return s&&cA(s)&&(s=Y_(s)),s&&(o.fields[sF]=s),{mapValue:o}}(t,e):n instanceof $m?TF(n,e):n instanceof Xm?EF(n,e):function(r,s){const o=SF(r,s),a=v2(o)+v2(r.Ie);return XE(o)&&XE(r.Ie)?bF(a):fA(r.serializer,a)}(n,e)}function DX(n,e,t){return n instanceof $m?TF(n,e):n instanceof Xm?EF(n,e):t}function SF(n,e){return n instanceof S0?function(i){return XE(i)||function(s){return!!s&&"doubleValue"in s}(i)}(e)?e:{integerValue:0}:null}class qm extends ew{}class $m extends ew{constructor(e){super(),this.elements=e}}function TF(n,e){const t=CF(e);for(const i of n.elements)t.some(r=>$o(r,i))||t.push(i);return{arrayValue:{values:t}}}class Xm extends ew{constructor(e){super(),this.elements=e}}function EF(n,e){let t=CF(e);for(const i of n.elements)t=t.filter(r=>!$o(r,i));return{arrayValue:{values:t}}}class S0 extends ew{constructor(e,t){super(),this.serializer=e,this.Ie=t}}function v2(n){return ai(n.integerValue||n.doubleValue)}function CF(n){return uA(n)&&n.arrayValue.values?n.arrayValue.values.slice():[]}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LX{constructor(e,t){this.field=e,this.transform=t}}function kX(n,e){return n.field.isEqual(e.field)&&function(i,r){return i instanceof $m&&r instanceof $m||i instanceof Xm&&r instanceof Xm?Jd(i.elements,r.elements,$o):i instanceof S0&&r instanceof S0?$o(i.Ie,r.Ie):i instanceof qm&&r instanceof qm}(n.transform,e.transform)}class OX{constructor(e,t){this.version=e,this.transformResults=t}}class mo{constructor(e,t){this.updateTime=e,this.exists=t}static none(){return new mo}static exists(e){return new mo(void 0,e)}static updateTime(e){return new mo(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Mx(n,e){return n.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(n.updateTime):n.exists===void 0||n.exists===e.isFoundDocument()}class tw{}function AF(n,e){if(!n.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return n.isNoDocument()?new IF(n.key,mo.none()):new Ng(n.key,n.data,mo.none());{const t=n.data,i=Kr.empty();let r=new Ii(Xi.comparator);for(let s of e.fields)if(!r.has(s)){let o=t.field(s);o===null&&s.length>1&&(s=s.popLast(),o=t.field(s)),o===null?i.delete(s):i.set(s,o),r=r.add(s)}return new mc(n.key,i,new ys(r.toArray()),mo.none())}}function UX(n,e,t){n instanceof Ng?function(r,s,o){const a=r.value.clone(),l=_2(r.fieldTransforms,s,o.transformResults);a.setAll(l),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(n,e,t):n instanceof mc?function(r,s,o){if(!Mx(r.precondition,s))return void s.convertToUnknownDocument(o.version);const a=_2(r.fieldTransforms,s,o.transformResults),l=s.data;l.setAll(MF(r)),l.setAll(a),s.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(n,e,t):function(r,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,t)}function tm(n,e,t,i){return n instanceof Ng?function(s,o,a,l){if(!Mx(s.precondition,o))return a;const c=s.value.clone(),u=w2(s.fieldTransforms,l,o);return c.setAll(u),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),null}(n,e,t,i):n instanceof mc?function(s,o,a,l){if(!Mx(s.precondition,o))return a;const c=w2(s.fieldTransforms,l,o),u=o.data;return u.setAll(MF(s)),u.setAll(c),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),a===null?null:a.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(p=>p.field))}(n,e,t,i):function(s,o,a){return Mx(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):a}(n,e,t)}function jX(n,e){let t=null;for(const i of n.fieldTransforms){const r=e.data.field(i.field),s=SF(i.transform,r||null);s!=null&&(t===null&&(t=Kr.empty()),t.set(i.field,s))}return t||null}function x2(n,e){return n.type===e.type&&!!n.key.isEqual(e.key)&&!!n.precondition.isEqual(e.precondition)&&!!function(i,r){return i===void 0&&r===void 0||!(!i||!r)&&Jd(i,r,(s,o)=>kX(s,o))}(n.fieldTransforms,e.fieldTransforms)&&(n.type===0?n.value.isEqual(e.value):n.type!==1||n.data.isEqual(e.data)&&n.fieldMask.isEqual(e.fieldMask))}class Ng extends tw{constructor(e,t,i,r=[]){super(),this.key=e,this.value=t,this.precondition=i,this.fieldTransforms=r,this.type=0}getFieldMask(){return null}}class mc extends tw{constructor(e,t,i,r,s=[]){super(),this.key=e,this.data=t,this.fieldMask=i,this.precondition=r,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function MF(n){const e=new Map;return n.fieldMask.fields.forEach(t=>{if(!t.isEmpty()){const i=n.data.field(t);e.set(t,i)}}),e}function _2(n,e,t){const i=new Map;En(n.length===t.length);for(let r=0;r<t.length;r++){const s=n[r],o=s.transform,a=e.data.field(s.field);i.set(s.field,DX(o,a,t[r]))}return i}function w2(n,e,t){const i=new Map;for(const r of n){const s=r.transform,o=t.data.field(r.field);i.set(r.field,NX(s,o,e))}return i}class IF extends tw{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class FX extends tw{constructor(e,t){super(),this.key=e,this.precondition=t,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class VX{constructor(e,t,i,r){this.batchId=e,this.localWriteTime=t,this.baseMutations=i,this.mutations=r}applyToRemoteDocument(e,t){const i=t.mutationResults;for(let r=0;r<this.mutations.length;r++){const s=this.mutations[r];s.key.isEqual(e.key)&&UX(s,e,i[r])}}applyToLocalView(e,t){for(const i of this.baseMutations)i.key.isEqual(e.key)&&(t=tm(i,e,t,this.localWriteTime));for(const i of this.mutations)i.key.isEqual(e.key)&&(t=tm(i,e,t,this.localWriteTime));return t}applyToLocalDocumentSet(e,t){const i=wF();return this.mutations.forEach(r=>{const s=e.get(r.key),o=s.overlayedDocument;let a=this.applyToLocalView(o,s.mutatedFields);a=t.has(r.key)?null:a;const l=AF(o,a);l!==null&&i.set(r.key,l),o.isValidDocument()||o.convertToNoDocument(Dt.min())}),i}keys(){return this.mutations.reduce((e,t)=>e.add(t.key),on())}isEqual(e){return this.batchId===e.batchId&&Jd(this.mutations,e.mutations,(t,i)=>x2(t,i))&&Jd(this.baseMutations,e.baseMutations,(t,i)=>x2(t,i))}}class pA{constructor(e,t,i,r){this.batch=e,this.commitVersion=t,this.mutationResults=i,this.docVersions=r}static from(e,t,i){En(e.mutations.length===i.length);let r=function(){return AX}();const s=e.mutations;for(let o=0;o<s.length;o++)r=r.insert(s[o].key,i[o].version);return new pA(e,t,i,r)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BX{constructor(e,t){this.largestBatchId=e,this.mutation=t}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zX{constructor(e,t){this.count=e,this.unchangedNames=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var gi,hn;function HX(n){switch(n){case Ee.OK:return It();case Ee.CANCELLED:case Ee.UNKNOWN:case Ee.DEADLINE_EXCEEDED:case Ee.RESOURCE_EXHAUSTED:case Ee.INTERNAL:case Ee.UNAVAILABLE:case Ee.UNAUTHENTICATED:return!1;case Ee.INVALID_ARGUMENT:case Ee.NOT_FOUND:case Ee.ALREADY_EXISTS:case Ee.PERMISSION_DENIED:case Ee.FAILED_PRECONDITION:case Ee.ABORTED:case Ee.OUT_OF_RANGE:case Ee.UNIMPLEMENTED:case Ee.DATA_LOSS:return!0;default:return It()}}function PF(n){if(n===void 0)return La("GRPC error has no .code"),Ee.UNKNOWN;switch(n){case gi.OK:return Ee.OK;case gi.CANCELLED:return Ee.CANCELLED;case gi.UNKNOWN:return Ee.UNKNOWN;case gi.DEADLINE_EXCEEDED:return Ee.DEADLINE_EXCEEDED;case gi.RESOURCE_EXHAUSTED:return Ee.RESOURCE_EXHAUSTED;case gi.INTERNAL:return Ee.INTERNAL;case gi.UNAVAILABLE:return Ee.UNAVAILABLE;case gi.UNAUTHENTICATED:return Ee.UNAUTHENTICATED;case gi.INVALID_ARGUMENT:return Ee.INVALID_ARGUMENT;case gi.NOT_FOUND:return Ee.NOT_FOUND;case gi.ALREADY_EXISTS:return Ee.ALREADY_EXISTS;case gi.PERMISSION_DENIED:return Ee.PERMISSION_DENIED;case gi.FAILED_PRECONDITION:return Ee.FAILED_PRECONDITION;case gi.ABORTED:return Ee.ABORTED;case gi.OUT_OF_RANGE:return Ee.OUT_OF_RANGE;case gi.UNIMPLEMENTED:return Ee.UNIMPLEMENTED;case gi.DATA_LOSS:return Ee.DATA_LOSS;default:return It()}}(hn=gi||(gi={}))[hn.OK=0]="OK",hn[hn.CANCELLED=1]="CANCELLED",hn[hn.UNKNOWN=2]="UNKNOWN",hn[hn.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",hn[hn.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",hn[hn.NOT_FOUND=5]="NOT_FOUND",hn[hn.ALREADY_EXISTS=6]="ALREADY_EXISTS",hn[hn.PERMISSION_DENIED=7]="PERMISSION_DENIED",hn[hn.UNAUTHENTICATED=16]="UNAUTHENTICATED",hn[hn.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",hn[hn.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",hn[hn.ABORTED=10]="ABORTED",hn[hn.OUT_OF_RANGE=11]="OUT_OF_RANGE",hn[hn.UNIMPLEMENTED=12]="UNIMPLEMENTED",hn[hn.INTERNAL=13]="INTERNAL",hn[hn.UNAVAILABLE=14]="UNAVAILABLE",hn[hn.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function GX(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const WX=new Wl([4294967295,4294967295],0);function b2(n){const e=GX().encode(n),t=new qj;return t.update(e),new Uint8Array(t.digest())}function S2(n){const e=new DataView(n.buffer),t=e.getUint32(0,!0),i=e.getUint32(4,!0),r=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new Wl([t,i],0),new Wl([r,s],0)]}class mA{constructor(e,t,i){if(this.bitmap=e,this.padding=t,this.hashCount=i,t<0||t>=8)throw new Lp(`Invalid padding: ${t}`);if(i<0)throw new Lp(`Invalid hash count: ${i}`);if(e.length>0&&this.hashCount===0)throw new Lp(`Invalid hash count: ${i}`);if(e.length===0&&t!==0)throw new Lp(`Invalid padding when bitmap length is 0: ${t}`);this.Ee=8*e.length-t,this.de=Wl.fromNumber(this.Ee)}Ae(e,t,i){let r=e.add(t.multiply(Wl.fromNumber(i)));return r.compare(WX)===1&&(r=new Wl([r.getBits(0),r.getBits(1)],0)),r.modulo(this.de).toNumber()}Re(e){return!!(this.bitmap[Math.floor(e/8)]&1<<e%8)}mightContain(e){if(this.Ee===0)return!1;const t=b2(e),[i,r]=S2(t);for(let s=0;s<this.hashCount;s++){const o=this.Ae(i,r,s);if(!this.Re(o))return!1}return!0}static create(e,t,i){const r=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new mA(s,r,t);return i.forEach(a=>o.insert(a)),o}insert(e){if(this.Ee===0)return;const t=b2(e),[i,r]=S2(t);for(let s=0;s<this.hashCount;s++){const o=this.Ae(i,r,s);this.Ve(o)}}Ve(e){const t=Math.floor(e/8),i=e%8;this.bitmap[t]|=1<<i}}class Lp extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nw{constructor(e,t,i,r,s){this.snapshotVersion=e,this.targetChanges=t,this.targetMismatches=i,this.documentUpdates=r,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,t,i){const r=new Map;return r.set(e,Dg.createSynthesizedTargetChangeForCurrentChange(e,t,i)),new nw(Dt.min(),r,new Kn(cn),ka(),on())}}class Dg{constructor(e,t,i,r,s){this.resumeToken=e,this.current=t,this.addedDocuments=i,this.modifiedDocuments=r,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,t,i){return new Dg(i,t,on(),on(),on())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ix{constructor(e,t,i,r){this.me=e,this.removedTargetIds=t,this.key=i,this.fe=r}}class RF{constructor(e,t){this.targetId=e,this.ge=t}}class NF{constructor(e,t,i=Qi.EMPTY_BYTE_STRING,r=null){this.state=e,this.targetIds=t,this.resumeToken=i,this.cause=r}}class T2{constructor(){this.pe=0,this.ye=E2(),this.we=Qi.EMPTY_BYTE_STRING,this.be=!1,this.Se=!0}get current(){return this.be}get resumeToken(){return this.we}get De(){return this.pe!==0}get ve(){return this.Se}Ce(e){e.approximateByteSize()>0&&(this.Se=!0,this.we=e)}Fe(){let e=on(),t=on(),i=on();return this.ye.forEach((r,s)=>{switch(s){case 0:e=e.add(r);break;case 2:t=t.add(r);break;case 1:i=i.add(r);break;default:It()}}),new Dg(this.we,this.be,e,t,i)}Me(){this.Se=!1,this.ye=E2()}xe(e,t){this.Se=!0,this.ye=this.ye.insert(e,t)}Oe(e){this.Se=!0,this.ye=this.ye.remove(e)}Ne(){this.pe+=1}Be(){this.pe-=1,En(this.pe>=0)}Le(){this.Se=!0,this.be=!0}}class qX{constructor(e){this.ke=e,this.qe=new Map,this.Qe=ka(),this.$e=av(),this.Ke=av(),this.Ue=new Kn(cn)}We(e){for(const t of e.me)e.fe&&e.fe.isFoundDocument()?this.Ge(t,e.fe):this.ze(t,e.key,e.fe);for(const t of e.removedTargetIds)this.ze(t,e.key,e.fe)}je(e){this.forEachTarget(e,t=>{const i=this.He(t);switch(e.state){case 0:this.Je(t)&&i.Ce(e.resumeToken);break;case 1:i.Be(),i.De||i.Me(),i.Ce(e.resumeToken);break;case 2:i.Be(),i.De||this.removeTarget(t);break;case 3:this.Je(t)&&(i.Le(),i.Ce(e.resumeToken));break;case 4:this.Je(t)&&(this.Ye(t),i.Ce(e.resumeToken));break;default:It()}})}forEachTarget(e,t){e.targetIds.length>0?e.targetIds.forEach(t):this.qe.forEach((i,r)=>{this.Je(r)&&t(r)})}Ze(e){const t=e.targetId,i=e.ge.count,r=this.Xe(t);if(r){const s=r.target;if(YE(s))if(i===0){const o=new _t(s.path);this.ze(t,o,mr.newNoDocument(o,Dt.min()))}else En(i===1);else{const o=this.et(t);if(o!==i){const a=this.tt(e),l=a?this.nt(a,e,o):1;if(l!==0){this.Ye(t);const c=l===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ue=this.Ue.insert(t,c)}}}}}tt(e){const t=e.ge.unchangedNames;if(!t||!t.bits)return null;const{bits:{bitmap:i="",padding:r=0},hashCount:s=0}=t;let o,a;try{o=Ql(i).toUint8Array()}catch(l){if(l instanceof nF)return Yd("Decoding the base64 bloom filter in existence filter failed ("+l.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw l}try{a=new mA(o,r,s)}catch(l){return Yd(l instanceof Lp?"BloomFilter error: ":"Applying bloom filter failed: ",l),null}return a.Ee===0?null:a}nt(e,t,i){return t.ge.count===i-this.st(e,t.targetId)?0:2}st(e,t){const i=this.ke.getRemoteKeysForTarget(t);let r=0;return i.forEach(s=>{const o=this.ke.it(),a=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(a)||(this.ze(t,s,null),r++)}),r}ot(e){const t=new Map;this.qe.forEach((s,o)=>{const a=this.Xe(o);if(a){if(s.current&&YE(a.target)){const l=new _t(a.target.path);this._t(l).has(o)||this.ut(o,l)||this.ze(o,l,mr.newNoDocument(l,e))}s.ve&&(t.set(o,s.Fe()),s.Me())}});let i=on();this.Ke.forEach((s,o)=>{let a=!0;o.forEachWhile(l=>{const c=this.Xe(l);return!c||c.purpose==="TargetPurposeLimboResolution"||(a=!1,!1)}),a&&(i=i.add(s))}),this.Qe.forEach((s,o)=>o.setReadTime(e));const r=new nw(e,t,this.Ue,this.Qe,i);return this.Qe=ka(),this.$e=av(),this.Ke=av(),this.Ue=new Kn(cn),r}Ge(e,t){if(!this.Je(e))return;const i=this.ut(e,t.key)?2:0;this.He(e).xe(t.key,i),this.Qe=this.Qe.insert(t.key,t),this.$e=this.$e.insert(t.key,this._t(t.key).add(e)),this.Ke=this.Ke.insert(t.key,this.ct(t.key).add(e))}ze(e,t,i){if(!this.Je(e))return;const r=this.He(e);this.ut(e,t)?r.xe(t,1):r.Oe(t),this.Ke=this.Ke.insert(t,this.ct(t).delete(e)),this.Ke=this.Ke.insert(t,this.ct(t).add(e)),i&&(this.Qe=this.Qe.insert(t,i))}removeTarget(e){this.qe.delete(e)}et(e){const t=this.He(e).Fe();return this.ke.getRemoteKeysForTarget(e).size+t.addedDocuments.size-t.removedDocuments.size}Ne(e){this.He(e).Ne()}He(e){let t=this.qe.get(e);return t||(t=new T2,this.qe.set(e,t)),t}ct(e){let t=this.Ke.get(e);return t||(t=new Ii(cn),this.Ke=this.Ke.insert(e,t)),t}_t(e){let t=this.$e.get(e);return t||(t=new Ii(cn),this.$e=this.$e.insert(e,t)),t}Je(e){const t=this.Xe(e)!==null;return t||at("WatchChangeAggregator","Detected inactive target",e),t}Xe(e){const t=this.qe.get(e);return t&&t.De?null:this.ke.lt(e)}Ye(e){this.qe.set(e,new T2),this.ke.getRemoteKeysForTarget(e).forEach(t=>{this.ze(e,t,null)})}ut(e,t){return this.ke.getRemoteKeysForTarget(e).has(t)}}function av(){return new Kn(_t.comparator)}function E2(){return new Kn(_t.comparator)}const $X={asc:"ASCENDING",desc:"DESCENDING"},XX={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},KX={and:"AND",or:"OR"};class YX{constructor(e,t){this.databaseId=e,this.useProto3Json=t}}function QE(n,e){return n.useProto3Json||K_(e)?e:{value:e}}function T0(n,e){return n.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function DF(n,e){return n.useProto3Json?e.toBase64():e.toUint8Array()}function JX(n,e){return T0(n,e.toTimestamp())}function Bo(n){return En(!!n),Dt.fromTimestamp(function(t){const i=Jl(t);return new bi(i.seconds,i.nanos)}(n))}function gA(n,e){return ZE(n,e).canonicalString()}function ZE(n,e){const t=function(r){return new Un(["projects",r.projectId,"databases",r.database])}(n).child("documents");return e===void 0?t:t.child(e)}function LF(n){const e=Un.fromString(n);return En(FF(e)),e}function e1(n,e){return gA(n.databaseId,e.path)}function IS(n,e){const t=LF(e);if(t.get(1)!==n.databaseId.projectId)throw new lt(Ee.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+t.get(1)+" vs "+n.databaseId.projectId);if(t.get(3)!==n.databaseId.database)throw new lt(Ee.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+t.get(3)+" vs "+n.databaseId.database);return new _t(OF(t))}function kF(n,e){return gA(n.databaseId,e)}function QX(n){const e=LF(n);return e.length===4?Un.emptyPath():OF(e)}function t1(n){return new Un(["projects",n.databaseId.projectId,"databases",n.databaseId.database]).canonicalString()}function OF(n){return En(n.length>4&&n.get(4)==="documents"),n.popFirst(5)}function C2(n,e,t){return{name:e1(n,e),fields:t.value.mapValue.fields}}function ZX(n,e){let t;if("targetChange"in e){e.targetChange;const i=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:It()}(e.targetChange.targetChangeType||"NO_CHANGE"),r=e.targetChange.targetIds||[],s=function(c,u){return c.useProto3Json?(En(u===void 0||typeof u=="string"),Qi.fromBase64String(u||"")):(En(u===void 0||u instanceof Buffer||u instanceof Uint8Array),Qi.fromUint8Array(u||new Uint8Array))}(n,e.targetChange.resumeToken),o=e.targetChange.cause,a=o&&function(c){const u=c.code===void 0?Ee.UNKNOWN:PF(c.code);return new lt(u,c.message||"")}(o);t=new NF(i,r,s,a||null)}else if("documentChange"in e){e.documentChange;const i=e.documentChange;i.document,i.document.name,i.document.updateTime;const r=IS(n,i.document.name),s=Bo(i.document.updateTime),o=i.document.createTime?Bo(i.document.createTime):Dt.min(),a=new Kr({mapValue:{fields:i.document.fields}}),l=mr.newFoundDocument(r,s,o,a),c=i.targetIds||[],u=i.removedTargetIds||[];t=new Ix(c,u,l.key,l)}else if("documentDelete"in e){e.documentDelete;const i=e.documentDelete;i.document;const r=IS(n,i.document),s=i.readTime?Bo(i.readTime):Dt.min(),o=mr.newNoDocument(r,s),a=i.removedTargetIds||[];t=new Ix([],a,o.key,o)}else if("documentRemove"in e){e.documentRemove;const i=e.documentRemove;i.document;const r=IS(n,i.document),s=i.removedTargetIds||[];t=new Ix([],s,r,null)}else{if(!("filter"in e))return It();{e.filter;const i=e.filter;i.targetId;const{count:r=0,unchangedNames:s}=i,o=new zX(r,s),a=i.targetId;t=new RF(a,o)}}return t}function eK(n,e){let t;if(e instanceof Ng)t={update:C2(n,e.key,e.value)};else if(e instanceof IF)t={delete:e1(n,e.key)};else if(e instanceof mc)t={update:C2(n,e.key,e.data),updateMask:cK(e.fieldMask)};else{if(!(e instanceof FX))return It();t={verify:e1(n,e.key)}}return e.fieldTransforms.length>0&&(t.updateTransforms=e.fieldTransforms.map(i=>function(s,o){const a=o.transform;if(a instanceof qm)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(a instanceof $m)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:a.elements}};if(a instanceof Xm)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:a.elements}};if(a instanceof S0)return{fieldPath:o.field.canonicalString(),increment:a.Ie};throw It()}(0,i))),e.precondition.isNone||(t.currentDocument=function(r,s){return s.updateTime!==void 0?{updateTime:JX(r,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:It()}(n,e.precondition)),t}function tK(n,e){return n&&n.length>0?(En(e!==void 0),n.map(t=>function(r,s){let o=r.updateTime?Bo(r.updateTime):Bo(s);return o.isEqual(Dt.min())&&(o=Bo(s)),new OX(o,r.transformResults||[])}(t,e))):[]}function nK(n,e){return{documents:[kF(n,e.path)]}}function iK(n,e){const t={structuredQuery:{}},i=e.path;let r;e.collectionGroup!==null?(r=i,t.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(r=i.popLast(),t.structuredQuery.from=[{collectionId:i.lastSegment()}]),t.parent=kF(n,r);const s=function(c){if(c.length!==0)return jF(vo.create(c,"and"))}(e.filters);s&&(t.structuredQuery.where=s);const o=function(c){if(c.length!==0)return c.map(u=>function(m){return{field:Zh(m.field),direction:oK(m.dir)}}(u))}(e.orderBy);o&&(t.structuredQuery.orderBy=o);const a=QE(n,e.limit);return a!==null&&(t.structuredQuery.limit=a),e.startAt&&(t.structuredQuery.startAt=function(c){return{before:c.inclusive,values:c.position}}(e.startAt)),e.endAt&&(t.structuredQuery.endAt=function(c){return{before:!c.inclusive,values:c.position}}(e.endAt)),{ht:t,parent:r}}function rK(n){let e=QX(n.parent);const t=n.structuredQuery,i=t.from?t.from.length:0;let r=null;if(i>0){En(i===1);const u=t.from[0];u.allDescendants?r=u.collectionId:e=e.child(u.collectionId)}let s=[];t.where&&(s=function(p){const m=UF(p);return m instanceof vo&&dF(m)?m.getFilters():[m]}(t.where));let o=[];t.orderBy&&(o=function(p){return p.map(m=>function(x){return new Wm(ed(x.field),function(w){switch(w){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(x.direction))}(m))}(t.orderBy));let a=null;t.limit&&(a=function(p){let m;return m=typeof p=="object"?p.value:p,K_(m)?null:m}(t.limit));let l=null;t.startAt&&(l=function(p){const m=!!p.before,g=p.values||[];return new w0(g,m)}(t.startAt));let c=null;return t.endAt&&(c=function(p){const m=!p.before,g=p.values||[];return new w0(g,m)}(t.endAt)),bX(e,r,o,s,a,"F",l,c)}function sK(n,e){const t=function(r){switch(r){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return It()}}(e.purpose);return t==null?null:{"goog-listen-tags":t}}function UF(n){return n.unaryFilter!==void 0?function(t){switch(t.unaryFilter.op){case"IS_NAN":const i=ed(t.unaryFilter.field);return xi.create(i,"==",{doubleValue:NaN});case"IS_NULL":const r=ed(t.unaryFilter.field);return xi.create(r,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=ed(t.unaryFilter.field);return xi.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=ed(t.unaryFilter.field);return xi.create(o,"!=",{nullValue:"NULL_VALUE"});default:return It()}}(n):n.fieldFilter!==void 0?function(t){return xi.create(ed(t.fieldFilter.field),function(r){switch(r){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return It()}}(t.fieldFilter.op),t.fieldFilter.value)}(n):n.compositeFilter!==void 0?function(t){return vo.create(t.compositeFilter.filters.map(i=>UF(i)),function(r){switch(r){case"AND":return"and";case"OR":return"or";default:return It()}}(t.compositeFilter.op))}(n):It()}function oK(n){return $X[n]}function aK(n){return XX[n]}function lK(n){return KX[n]}function Zh(n){return{fieldPath:n.canonicalString()}}function ed(n){return Xi.fromServerFormat(n.fieldPath)}function jF(n){return n instanceof xi?function(t){if(t.op==="=="){if(f2(t.value))return{unaryFilter:{field:Zh(t.field),op:"IS_NAN"}};if(d2(t.value))return{unaryFilter:{field:Zh(t.field),op:"IS_NULL"}}}else if(t.op==="!="){if(f2(t.value))return{unaryFilter:{field:Zh(t.field),op:"IS_NOT_NAN"}};if(d2(t.value))return{unaryFilter:{field:Zh(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Zh(t.field),op:aK(t.op),value:t.value}}}(n):n instanceof vo?function(t){const i=t.getFilters().map(r=>jF(r));return i.length===1?i[0]:{compositeFilter:{op:lK(t.op),filters:i}}}(n):It()}function cK(n){const e=[];return n.fields.forEach(t=>e.push(t.canonicalString())),{fieldPaths:e}}function FF(n){return n.length>=4&&n.get(0)==="projects"&&n.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pl{constructor(e,t,i,r,s=Dt.min(),o=Dt.min(),a=Qi.EMPTY_BYTE_STRING,l=null){this.target=e,this.targetId=t,this.purpose=i,this.sequenceNumber=r,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=a,this.expectedCount=l}withSequenceNumber(e){return new Pl(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,t){return new Pl(this.target,this.targetId,this.purpose,this.sequenceNumber,t,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new Pl(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new Pl(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uK{constructor(e){this.Tt=e}}function hK(n){const e=rK({parent:n.parent,structuredQuery:n.structuredQuery});return n.limitType==="LAST"?b0(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dK{constructor(){this.Tn=new fK}addToCollectionParentIndex(e,t){return this.Tn.add(t),Ae.resolve()}getCollectionParents(e,t){return Ae.resolve(this.Tn.getEntries(t))}addFieldIndex(e,t){return Ae.resolve()}deleteFieldIndex(e,t){return Ae.resolve()}deleteAllFieldIndexes(e){return Ae.resolve()}createTargetIndexes(e,t){return Ae.resolve()}getDocumentsMatchingTarget(e,t){return Ae.resolve(null)}getIndexType(e,t){return Ae.resolve(0)}getFieldIndexes(e,t){return Ae.resolve([])}getNextCollectionGroupToUpdate(e){return Ae.resolve(null)}getMinOffset(e,t){return Ae.resolve(Yl.min())}getMinOffsetFromCollectionGroup(e,t){return Ae.resolve(Yl.min())}updateCollectionGroup(e,t,i){return Ae.resolve()}updateIndexEntries(e,t){return Ae.resolve()}}class fK{constructor(){this.index={}}add(e){const t=e.lastSegment(),i=e.popLast(),r=this.index[t]||new Ii(Un.comparator),s=!r.has(i);return this.index[t]=r.add(i),s}has(e){const t=e.lastSegment(),i=e.popLast(),r=this.index[t];return r&&r.has(i)}getEntries(e){return(this.index[e]||new Ii(Un.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const A2={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},VF=41943040;class Wr{static withCacheSize(e){return new Wr(e,Wr.DEFAULT_COLLECTION_PERCENTILE,Wr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(e,t,i){this.cacheSizeCollectionThreshold=e,this.percentileToCollect=t,this.maximumSequenceNumbersToCollect=i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Wr.DEFAULT_COLLECTION_PERCENTILE=10,Wr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,Wr.DEFAULT=new Wr(VF,Wr.DEFAULT_COLLECTION_PERCENTILE,Wr.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),Wr.DISABLED=new Wr(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ef{constructor(e){this.$n=e}next(){return this.$n+=2,this.$n}static Kn(){return new ef(0)}static Un(){return new ef(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M2="LruGarbageCollector",pK=1048576;function I2([n,e],[t,i]){const r=cn(n,t);return r===0?cn(e,i):r}class mK{constructor(e){this.Hn=e,this.buffer=new Ii(I2),this.Jn=0}Yn(){return++this.Jn}Zn(e){const t=[e,this.Yn()];if(this.buffer.size<this.Hn)this.buffer=this.buffer.add(t);else{const i=this.buffer.last();I2(t,i)<0&&(this.buffer=this.buffer.delete(i).add(t))}}get maxValue(){return this.buffer.last()[0]}}class gK{constructor(e,t,i){this.garbageCollector=e,this.asyncQueue=t,this.localStore=i,this.Xn=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.er(6e4)}stop(){this.Xn&&(this.Xn.cancel(),this.Xn=null)}get started(){return this.Xn!==null}er(e){at(M2,`Garbage collection scheduled in ${e}ms`),this.Xn=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",e,async()=>{this.Xn=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(t){xf(t)?at(M2,"Ignoring IndexedDB error during garbage collection: ",t):await vf(t)}await this.er(3e5)})}}class yK{constructor(e,t){this.tr=e,this.params=t}calculateTargetCount(e,t){return this.tr.nr(e).next(i=>Math.floor(t/100*i))}nthSequenceNumber(e,t){if(t===0)return Ae.resolve(X_.ae);const i=new mK(t);return this.tr.forEachTarget(e,r=>i.Zn(r.sequenceNumber)).next(()=>this.tr.rr(e,r=>i.Zn(r))).next(()=>i.maxValue)}removeTargets(e,t,i){return this.tr.removeTargets(e,t,i)}removeOrphanedDocuments(e,t){return this.tr.removeOrphanedDocuments(e,t)}collect(e,t){return this.params.cacheSizeCollectionThreshold===-1?(at("LruGarbageCollector","Garbage collection skipped; disabled"),Ae.resolve(A2)):this.getCacheSize(e).next(i=>i<this.params.cacheSizeCollectionThreshold?(at("LruGarbageCollector",`Garbage collection skipped; Cache size ${i} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),A2):this.ir(e,t))}getCacheSize(e){return this.tr.getCacheSize(e)}ir(e,t){let i,r,s,o,a,l,c;const u=Date.now();return this.calculateTargetCount(e,this.params.percentileToCollect).next(p=>(p>this.params.maximumSequenceNumbersToCollect?(at("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${p}`),r=this.params.maximumSequenceNumbersToCollect):r=p,o=Date.now(),this.nthSequenceNumber(e,r))).next(p=>(i=p,a=Date.now(),this.removeTargets(e,i,t))).next(p=>(s=p,l=Date.now(),this.removeOrphanedDocuments(e,i))).next(p=>(c=Date.now(),Jh()<=sn.DEBUG&&at("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${o-u}ms
	Determined least recently used ${r} in `+(a-o)+`ms
	Removed ${s} targets in `+(l-a)+`ms
	Removed ${p} documents in `+(c-l)+`ms
Total Duration: ${c-u}ms`),Ae.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:s,documentsRemoved:p})))}}function vK(n,e){return new yK(n,e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xK{constructor(){this.changes=new Zu(e=>e.toString(),(e,t)=>e.isEqual(t)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,t){this.assertNotApplied(),this.changes.set(e,mr.newInvalidDocument(e).setReadTime(t))}getEntry(e,t){this.assertNotApplied();const i=this.changes.get(t);return i!==void 0?Ae.resolve(i):this.getFromCache(e,t)}getEntries(e,t){return this.getAllFromCache(e,t)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _K{constructor(e,t){this.overlayedDocument=e,this.mutatedFields=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wK{constructor(e,t,i,r){this.remoteDocumentCache=e,this.mutationQueue=t,this.documentOverlayCache=i,this.indexManager=r}getDocument(e,t){let i=null;return this.documentOverlayCache.getOverlay(e,t).next(r=>(i=r,this.remoteDocumentCache.getEntry(e,t))).next(r=>(i!==null&&tm(i.mutation,r,ys.empty(),bi.now()),r))}getDocuments(e,t){return this.remoteDocumentCache.getEntries(e,t).next(i=>this.getLocalViewOfDocuments(e,i,on()).next(()=>i))}getLocalViewOfDocuments(e,t,i=on()){const r=gu();return this.populateOverlays(e,r,t).next(()=>this.computeViews(e,t,r,i).next(s=>{let o=Dp();return s.forEach((a,l)=>{o=o.insert(a,l.overlayedDocument)}),o}))}getOverlayedDocuments(e,t){const i=gu();return this.populateOverlays(e,i,t).next(()=>this.computeViews(e,t,i,on()))}populateOverlays(e,t,i){const r=[];return i.forEach(s=>{t.has(s)||r.push(s)}),this.documentOverlayCache.getOverlays(e,r).next(s=>{s.forEach((o,a)=>{t.set(o,a)})})}computeViews(e,t,i,r){let s=ka();const o=em(),a=function(){return em()}();return t.forEach((l,c)=>{const u=i.get(c.key);r.has(c.key)&&(u===void 0||u.mutation instanceof mc)?s=s.insert(c.key,c):u!==void 0?(o.set(c.key,u.mutation.getFieldMask()),tm(u.mutation,c,u.mutation.getFieldMask(),bi.now())):o.set(c.key,ys.empty())}),this.recalculateAndSaveOverlays(e,s).next(l=>(l.forEach((c,u)=>o.set(c,u)),t.forEach((c,u)=>{var p;return a.set(c,new _K(u,(p=o.get(c))!==null&&p!==void 0?p:null))}),a))}recalculateAndSaveOverlays(e,t){const i=em();let r=new Kn((o,a)=>o-a),s=on();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,t).next(o=>{for(const a of o)a.keys().forEach(l=>{const c=t.get(l);if(c===null)return;let u=i.get(l)||ys.empty();u=a.applyToLocalView(c,u),i.set(l,u);const p=(r.get(a.batchId)||on()).add(l);r=r.insert(a.batchId,p)})}).next(()=>{const o=[],a=r.getReverseIterator();for(;a.hasNext();){const l=a.getNext(),c=l.key,u=l.value,p=wF();u.forEach(m=>{if(!s.has(m)){const g=AF(t.get(m),i.get(m));g!==null&&p.set(m,g),s=s.add(m)}}),o.push(this.documentOverlayCache.saveOverlays(e,c,p))}return Ae.waitFor(o)}).next(()=>i)}recalculateAndSaveOverlaysForDocumentKeys(e,t){return this.remoteDocumentCache.getEntries(e,t).next(i=>this.recalculateAndSaveOverlays(e,i))}getDocumentsMatchingQuery(e,t,i,r){return function(o){return _t.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(t)?this.getDocumentsMatchingDocumentQuery(e,t.path):gF(t)?this.getDocumentsMatchingCollectionGroupQuery(e,t,i,r):this.getDocumentsMatchingCollectionQuery(e,t,i,r)}getNextDocuments(e,t,i,r){return this.remoteDocumentCache.getAllFromCollectionGroup(e,t,i,r).next(s=>{const o=r-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,t,i.largestBatchId,r-s.size):Ae.resolve(gu());let a=Bm,l=s;return o.next(c=>Ae.forEach(c,(u,p)=>(a<p.largestBatchId&&(a=p.largestBatchId),s.get(u)?Ae.resolve():this.remoteDocumentCache.getEntry(e,u).next(m=>{l=l.insert(u,m)}))).next(()=>this.populateOverlays(e,c,s)).next(()=>this.computeViews(e,l,c,on())).next(u=>({batchId:a,changes:_F(u)})))})}getDocumentsMatchingDocumentQuery(e,t){return this.getDocument(e,new _t(t)).next(i=>{let r=Dp();return i.isFoundDocument()&&(r=r.insert(i.key,i)),r})}getDocumentsMatchingCollectionGroupQuery(e,t,i,r){const s=t.collectionGroup;let o=Dp();return this.indexManager.getCollectionParents(e,s).next(a=>Ae.forEach(a,l=>{const c=function(p,m){return new _f(m,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)}(t,l.child(s));return this.getDocumentsMatchingCollectionQuery(e,c,i,r).next(u=>{u.forEach((p,m)=>{o=o.insert(p,m)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,t,i,r){let s;return this.documentOverlayCache.getOverlaysForCollection(e,t.path,i.largestBatchId).next(o=>(s=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,t,i,s,r))).next(o=>{s.forEach((l,c)=>{const u=c.getKey();o.get(u)===null&&(o=o.insert(u,mr.newInvalidDocument(u)))});let a=Dp();return o.forEach((l,c)=>{const u=s.get(l);u!==void 0&&tm(u.mutation,c,ys.empty(),bi.now()),Z_(t,c)&&(a=a.insert(l,c))}),a})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bK{constructor(e){this.serializer=e,this.dr=new Map,this.Ar=new Map}getBundleMetadata(e,t){return Ae.resolve(this.dr.get(t))}saveBundleMetadata(e,t){return this.dr.set(t.id,function(r){return{id:r.id,version:r.version,createTime:Bo(r.createTime)}}(t)),Ae.resolve()}getNamedQuery(e,t){return Ae.resolve(this.Ar.get(t))}saveNamedQuery(e,t){return this.Ar.set(t.name,function(r){return{name:r.name,query:hK(r.bundledQuery),readTime:Bo(r.readTime)}}(t)),Ae.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class SK{constructor(){this.overlays=new Kn(_t.comparator),this.Rr=new Map}getOverlay(e,t){return Ae.resolve(this.overlays.get(t))}getOverlays(e,t){const i=gu();return Ae.forEach(t,r=>this.getOverlay(e,r).next(s=>{s!==null&&i.set(r,s)})).next(()=>i)}saveOverlays(e,t,i){return i.forEach((r,s)=>{this.Et(e,t,s)}),Ae.resolve()}removeOverlaysForBatchId(e,t,i){const r=this.Rr.get(i);return r!==void 0&&(r.forEach(s=>this.overlays=this.overlays.remove(s)),this.Rr.delete(i)),Ae.resolve()}getOverlaysForCollection(e,t,i){const r=gu(),s=t.length+1,o=new _t(t.child("")),a=this.overlays.getIteratorFrom(o);for(;a.hasNext();){const l=a.getNext().value,c=l.getKey();if(!t.isPrefixOf(c.path))break;c.path.length===s&&l.largestBatchId>i&&r.set(l.getKey(),l)}return Ae.resolve(r)}getOverlaysForCollectionGroup(e,t,i,r){let s=new Kn((c,u)=>c-u);const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===t&&c.largestBatchId>i){let u=s.get(c.largestBatchId);u===null&&(u=gu(),s=s.insert(c.largestBatchId,u)),u.set(c.getKey(),c)}}const a=gu(),l=s.getIterator();for(;l.hasNext()&&(l.getNext().value.forEach((c,u)=>a.set(c,u)),!(a.size()>=r)););return Ae.resolve(a)}Et(e,t,i){const r=this.overlays.get(i.key);if(r!==null){const o=this.Rr.get(r.largestBatchId).delete(i.key);this.Rr.set(r.largestBatchId,o)}this.overlays=this.overlays.insert(i.key,new BX(t,i));let s=this.Rr.get(t);s===void 0&&(s=on(),this.Rr.set(t,s)),this.Rr.set(t,s.add(i.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TK{constructor(){this.sessionToken=Qi.EMPTY_BYTE_STRING}getSessionToken(e){return Ae.resolve(this.sessionToken)}setSessionToken(e,t){return this.sessionToken=t,Ae.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yA{constructor(){this.Vr=new Ii(Oi.mr),this.gr=new Ii(Oi.pr)}isEmpty(){return this.Vr.isEmpty()}addReference(e,t){const i=new Oi(e,t);this.Vr=this.Vr.add(i),this.gr=this.gr.add(i)}yr(e,t){e.forEach(i=>this.addReference(i,t))}removeReference(e,t){this.wr(new Oi(e,t))}br(e,t){e.forEach(i=>this.removeReference(i,t))}Sr(e){const t=new _t(new Un([])),i=new Oi(t,e),r=new Oi(t,e+1),s=[];return this.gr.forEachInRange([i,r],o=>{this.wr(o),s.push(o.key)}),s}Dr(){this.Vr.forEach(e=>this.wr(e))}wr(e){this.Vr=this.Vr.delete(e),this.gr=this.gr.delete(e)}vr(e){const t=new _t(new Un([])),i=new Oi(t,e),r=new Oi(t,e+1);let s=on();return this.gr.forEachInRange([i,r],o=>{s=s.add(o.key)}),s}containsKey(e){const t=new Oi(e,0),i=this.Vr.firstAfterOrEqual(t);return i!==null&&e.isEqual(i.key)}}class Oi{constructor(e,t){this.key=e,this.Cr=t}static mr(e,t){return _t.comparator(e.key,t.key)||cn(e.Cr,t.Cr)}static pr(e,t){return cn(e.Cr,t.Cr)||_t.comparator(e.key,t.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EK{constructor(e,t){this.indexManager=e,this.referenceDelegate=t,this.mutationQueue=[],this.Fr=1,this.Mr=new Ii(Oi.mr)}checkEmpty(e){return Ae.resolve(this.mutationQueue.length===0)}addMutationBatch(e,t,i,r){const s=this.Fr;this.Fr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new VX(s,t,i,r);this.mutationQueue.push(o);for(const a of r)this.Mr=this.Mr.add(new Oi(a.key,s)),this.indexManager.addToCollectionParentIndex(e,a.key.path.popLast());return Ae.resolve(o)}lookupMutationBatch(e,t){return Ae.resolve(this.Or(t))}getNextMutationBatchAfterBatchId(e,t){const i=t+1,r=this.Nr(i),s=r<0?0:r;return Ae.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return Ae.resolve(this.mutationQueue.length===0?lA:this.Fr-1)}getAllMutationBatches(e){return Ae.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,t){const i=new Oi(t,0),r=new Oi(t,Number.POSITIVE_INFINITY),s=[];return this.Mr.forEachInRange([i,r],o=>{const a=this.Or(o.Cr);s.push(a)}),Ae.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,t){let i=new Ii(cn);return t.forEach(r=>{const s=new Oi(r,0),o=new Oi(r,Number.POSITIVE_INFINITY);this.Mr.forEachInRange([s,o],a=>{i=i.add(a.Cr)})}),Ae.resolve(this.Br(i))}getAllMutationBatchesAffectingQuery(e,t){const i=t.path,r=i.length+1;let s=i;_t.isDocumentKey(s)||(s=s.child(""));const o=new Oi(new _t(s),0);let a=new Ii(cn);return this.Mr.forEachWhile(l=>{const c=l.key.path;return!!i.isPrefixOf(c)&&(c.length===r&&(a=a.add(l.Cr)),!0)},o),Ae.resolve(this.Br(a))}Br(e){const t=[];return e.forEach(i=>{const r=this.Or(i);r!==null&&t.push(r)}),t}removeMutationBatch(e,t){En(this.Lr(t.batchId,"removed")===0),this.mutationQueue.shift();let i=this.Mr;return Ae.forEach(t.mutations,r=>{const s=new Oi(r.key,t.batchId);return i=i.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,r.key)}).next(()=>{this.Mr=i})}qn(e){}containsKey(e,t){const i=new Oi(t,0),r=this.Mr.firstAfterOrEqual(i);return Ae.resolve(t.isEqual(r&&r.key))}performConsistencyCheck(e){return this.mutationQueue.length,Ae.resolve()}Lr(e,t){return this.Nr(e)}Nr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}Or(e){const t=this.Nr(e);return t<0||t>=this.mutationQueue.length?null:this.mutationQueue[t]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CK{constructor(e){this.kr=e,this.docs=function(){return new Kn(_t.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,t){const i=t.key,r=this.docs.get(i),s=r?r.size:0,o=this.kr(t);return this.docs=this.docs.insert(i,{document:t.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,i.path.popLast())}removeEntry(e){const t=this.docs.get(e);t&&(this.docs=this.docs.remove(e),this.size-=t.size)}getEntry(e,t){const i=this.docs.get(t);return Ae.resolve(i?i.document.mutableCopy():mr.newInvalidDocument(t))}getEntries(e,t){let i=ka();return t.forEach(r=>{const s=this.docs.get(r);i=i.insert(r,s?s.document.mutableCopy():mr.newInvalidDocument(r))}),Ae.resolve(i)}getDocumentsMatchingQuery(e,t,i,r){let s=ka();const o=t.path,a=new _t(o.child("__id-9223372036854775808__")),l=this.docs.getIteratorFrom(a);for(;l.hasNext();){const{key:c,value:{document:u}}=l.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||eX(Z$(u),i)<=0||(r.has(u.key)||Z_(t,u))&&(s=s.insert(u.key,u.mutableCopy()))}return Ae.resolve(s)}getAllFromCollectionGroup(e,t,i,r){It()}qr(e,t){return Ae.forEach(this.docs,i=>t(i))}newChangeBuffer(e){return new AK(this)}getSize(e){return Ae.resolve(this.size)}}class AK extends xK{constructor(e){super(),this.Ir=e}applyChanges(e){const t=[];return this.changes.forEach((i,r)=>{r.isValidDocument()?t.push(this.Ir.addEntry(e,r)):this.Ir.removeEntry(i)}),Ae.waitFor(t)}getFromCache(e,t){return this.Ir.getEntry(e,t)}getAllFromCache(e,t){return this.Ir.getEntries(e,t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MK{constructor(e){this.persistence=e,this.Qr=new Zu(t=>hA(t),dA),this.lastRemoteSnapshotVersion=Dt.min(),this.highestTargetId=0,this.$r=0,this.Kr=new yA,this.targetCount=0,this.Ur=ef.Kn()}forEachTarget(e,t){return this.Qr.forEach((i,r)=>t(r)),Ae.resolve()}getLastRemoteSnapshotVersion(e){return Ae.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return Ae.resolve(this.$r)}allocateTargetId(e){return this.highestTargetId=this.Ur.next(),Ae.resolve(this.highestTargetId)}setTargetsMetadata(e,t,i){return i&&(this.lastRemoteSnapshotVersion=i),t>this.$r&&(this.$r=t),Ae.resolve()}zn(e){this.Qr.set(e.target,e);const t=e.targetId;t>this.highestTargetId&&(this.Ur=new ef(t),this.highestTargetId=t),e.sequenceNumber>this.$r&&(this.$r=e.sequenceNumber)}addTargetData(e,t){return this.zn(t),this.targetCount+=1,Ae.resolve()}updateTargetData(e,t){return this.zn(t),Ae.resolve()}removeTargetData(e,t){return this.Qr.delete(t.target),this.Kr.Sr(t.targetId),this.targetCount-=1,Ae.resolve()}removeTargets(e,t,i){let r=0;const s=[];return this.Qr.forEach((o,a)=>{a.sequenceNumber<=t&&i.get(a.targetId)===null&&(this.Qr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,a.targetId)),r++)}),Ae.waitFor(s).next(()=>r)}getTargetCount(e){return Ae.resolve(this.targetCount)}getTargetData(e,t){const i=this.Qr.get(t)||null;return Ae.resolve(i)}addMatchingKeys(e,t,i){return this.Kr.yr(t,i),Ae.resolve()}removeMatchingKeys(e,t,i){this.Kr.br(t,i);const r=this.persistence.referenceDelegate,s=[];return r&&t.forEach(o=>{s.push(r.markPotentiallyOrphaned(e,o))}),Ae.waitFor(s)}removeMatchingKeysForTargetId(e,t){return this.Kr.Sr(t),Ae.resolve()}getMatchingKeysForTargetId(e,t){const i=this.Kr.vr(t);return Ae.resolve(i)}containsKey(e,t){return Ae.resolve(this.Kr.containsKey(t))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BF{constructor(e,t){this.Wr={},this.overlays={},this.Gr=new X_(0),this.zr=!1,this.zr=!0,this.jr=new TK,this.referenceDelegate=e(this),this.Hr=new MK(this),this.indexManager=new dK,this.remoteDocumentCache=function(r){return new CK(r)}(i=>this.referenceDelegate.Jr(i)),this.serializer=new uK(t),this.Yr=new bK(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.zr=!1,Promise.resolve()}get started(){return this.zr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let t=this.overlays[e.toKey()];return t||(t=new SK,this.overlays[e.toKey()]=t),t}getMutationQueue(e,t){let i=this.Wr[e.toKey()];return i||(i=new EK(t,this.referenceDelegate),this.Wr[e.toKey()]=i),i}getGlobalsCache(){return this.jr}getTargetCache(){return this.Hr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Yr}runTransaction(e,t,i){at("MemoryPersistence","Starting transaction:",e);const r=new IK(this.Gr.next());return this.referenceDelegate.Zr(),i(r).next(s=>this.referenceDelegate.Xr(r).next(()=>s)).toPromise().then(s=>(r.raiseOnCommittedEvent(),s))}ei(e,t){return Ae.or(Object.values(this.Wr).map(i=>()=>i.containsKey(e,t)))}}class IK extends nX{constructor(e){super(),this.currentSequenceNumber=e}}class vA{constructor(e){this.persistence=e,this.ti=new yA,this.ni=null}static ri(e){return new vA(e)}get ii(){if(this.ni)return this.ni;throw It()}addReference(e,t,i){return this.ti.addReference(i,t),this.ii.delete(i.toString()),Ae.resolve()}removeReference(e,t,i){return this.ti.removeReference(i,t),this.ii.add(i.toString()),Ae.resolve()}markPotentiallyOrphaned(e,t){return this.ii.add(t.toString()),Ae.resolve()}removeTarget(e,t){this.ti.Sr(t.targetId).forEach(r=>this.ii.add(r.toString()));const i=this.persistence.getTargetCache();return i.getMatchingKeysForTargetId(e,t.targetId).next(r=>{r.forEach(s=>this.ii.add(s.toString()))}).next(()=>i.removeTargetData(e,t))}Zr(){this.ni=new Set}Xr(e){const t=this.persistence.getRemoteDocumentCache().newChangeBuffer();return Ae.forEach(this.ii,i=>{const r=_t.fromPath(i);return this.si(e,r).next(s=>{s||t.removeEntry(r,Dt.min())})}).next(()=>(this.ni=null,t.apply(e)))}updateLimboDocument(e,t){return this.si(e,t).next(i=>{i?this.ii.delete(t.toString()):this.ii.add(t.toString())})}Jr(e){return 0}si(e,t){return Ae.or([()=>Ae.resolve(this.ti.containsKey(t)),()=>this.persistence.getTargetCache().containsKey(e,t),()=>this.persistence.ei(e,t)])}}class E0{constructor(e,t){this.persistence=e,this.oi=new Zu(i=>sX(i.path),(i,r)=>i.isEqual(r)),this.garbageCollector=vK(this,t)}static ri(e,t){return new E0(e,t)}Zr(){}Xr(e){return Ae.resolve()}forEachTarget(e,t){return this.persistence.getTargetCache().forEachTarget(e,t)}nr(e){const t=this.sr(e);return this.persistence.getTargetCache().getTargetCount(e).next(i=>t.next(r=>i+r))}sr(e){let t=0;return this.rr(e,i=>{t++}).next(()=>t)}rr(e,t){return Ae.forEach(this.oi,(i,r)=>this.ar(e,i,r).next(s=>s?Ae.resolve():t(r)))}removeTargets(e,t,i){return this.persistence.getTargetCache().removeTargets(e,t,i)}removeOrphanedDocuments(e,t){let i=0;const r=this.persistence.getRemoteDocumentCache(),s=r.newChangeBuffer();return r.qr(e,o=>this.ar(e,o,t).next(a=>{a||(i++,s.removeEntry(o,Dt.min()))})).next(()=>s.apply(e)).next(()=>i)}markPotentiallyOrphaned(e,t){return this.oi.set(t,e.currentSequenceNumber),Ae.resolve()}removeTarget(e,t){const i=t.withSequenceNumber(e.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(e,i)}addReference(e,t,i){return this.oi.set(i,e.currentSequenceNumber),Ae.resolve()}removeReference(e,t,i){return this.oi.set(i,e.currentSequenceNumber),Ae.resolve()}updateLimboDocument(e,t){return this.oi.set(t,e.currentSequenceNumber),Ae.resolve()}Jr(e){let t=e.key.toString().length;return e.isFoundDocument()&&(t+=Cx(e.data.value)),t}ar(e,t,i){return Ae.or([()=>this.persistence.ei(e,t),()=>this.persistence.getTargetCache().containsKey(e,t),()=>{const r=this.oi.get(t);return Ae.resolve(r!==void 0&&r>i)}])}getCacheSize(e){return this.persistence.getRemoteDocumentCache().getSize(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xA{constructor(e,t,i,r){this.targetId=e,this.fromCache=t,this.Hi=i,this.Ji=r}static Yi(e,t){let i=on(),r=on();for(const s of t.docChanges)switch(s.type){case 0:i=i.add(s.doc.key);break;case 1:r=r.add(s.doc.key)}return new xA(e,t.fromCache,i,r)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PK{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(e){this._documentReadCount+=e}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RK{constructor(){this.Zi=!1,this.Xi=!1,this.es=100,this.ts=function(){return d8()?8:iX(br())>0?6:4}()}initialize(e,t){this.ns=e,this.indexManager=t,this.Zi=!0}getDocumentsMatchingQuery(e,t,i,r){const s={result:null};return this.rs(e,t).next(o=>{s.result=o}).next(()=>{if(!s.result)return this.ss(e,t,r,i).next(o=>{s.result=o})}).next(()=>{if(s.result)return;const o=new PK;return this._s(e,t,o).next(a=>{if(s.result=a,this.Xi)return this.us(e,t,o,a.size)})}).next(()=>s.result)}us(e,t,i,r){return i.documentReadCount<this.es?(Jh()<=sn.DEBUG&&at("QueryEngine","SDK will not create cache indexes for query:",Qh(t),"since it only creates cache indexes for collection contains","more than or equal to",this.es,"documents"),Ae.resolve()):(Jh()<=sn.DEBUG&&at("QueryEngine","Query:",Qh(t),"scans",i.documentReadCount,"local documents and returns",r,"documents as results."),i.documentReadCount>this.ts*r?(Jh()<=sn.DEBUG&&at("QueryEngine","The SDK decides to create cache indexes for query:",Qh(t),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(e,Vo(t))):Ae.resolve())}rs(e,t){if(y2(t))return Ae.resolve(null);let i=Vo(t);return this.indexManager.getIndexType(e,i).next(r=>r===0?null:(t.limit!==null&&r===1&&(t=b0(t,null,"F"),i=Vo(t)),this.indexManager.getDocumentsMatchingTarget(e,i).next(s=>{const o=on(...s);return this.ns.getDocuments(e,o).next(a=>this.indexManager.getMinOffset(e,i).next(l=>{const c=this.cs(t,a);return this.ls(t,c,o,l.readTime)?this.rs(e,b0(t,null,"F")):this.hs(e,c,t,l)}))})))}ss(e,t,i,r){return y2(t)||r.isEqual(Dt.min())?Ae.resolve(null):this.ns.getDocuments(e,i).next(s=>{const o=this.cs(t,s);return this.ls(t,o,i,r)?Ae.resolve(null):(Jh()<=sn.DEBUG&&at("QueryEngine","Re-using previous result from %s to execute query: %s",r.toString(),Qh(t)),this.hs(e,o,t,Q$(r,Bm)).next(a=>a))})}cs(e,t){let i=new Ii(vF(e));return t.forEach((r,s)=>{Z_(e,s)&&(i=i.add(s))}),i}ls(e,t,i,r){if(e.limit===null)return!1;if(i.size!==t.size)return!0;const s=e.limitType==="F"?t.last():t.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(r)>0)}_s(e,t,i){return Jh()<=sn.DEBUG&&at("QueryEngine","Using full collection scan to execute query:",Qh(t)),this.ns.getDocumentsMatchingQuery(e,t,Yl.min(),i)}hs(e,t,i,r){return this.ns.getDocumentsMatchingQuery(e,i,r).next(s=>(t.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _A="LocalStore",NK=3e8;class DK{constructor(e,t,i,r){this.persistence=e,this.Ps=t,this.serializer=r,this.Ts=new Kn(cn),this.Is=new Zu(s=>hA(s),dA),this.Es=new Map,this.ds=e.getRemoteDocumentCache(),this.Hr=e.getTargetCache(),this.Yr=e.getBundleCache(),this.As(i)}As(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new wK(this.ds,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.ds.setIndexManager(this.indexManager),this.Ps.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",t=>e.collect(t,this.Ts))}}function LK(n,e,t,i){return new DK(n,e,t,i)}async function zF(n,e){const t=kt(n);return await t.persistence.runTransaction("Handle user change","readonly",i=>{let r;return t.mutationQueue.getAllMutationBatches(i).next(s=>(r=s,t.As(e),t.mutationQueue.getAllMutationBatches(i))).next(s=>{const o=[],a=[];let l=on();for(const c of r){o.push(c.batchId);for(const u of c.mutations)l=l.add(u.key)}for(const c of s){a.push(c.batchId);for(const u of c.mutations)l=l.add(u.key)}return t.localDocuments.getDocuments(i,l).next(c=>({Rs:c,removedBatchIds:o,addedBatchIds:a}))})})}function kK(n,e){const t=kt(n);return t.persistence.runTransaction("Acknowledge batch","readwrite-primary",i=>{const r=e.batch.keys(),s=t.ds.newChangeBuffer({trackRemovals:!0});return function(a,l,c,u){const p=c.batch,m=p.keys();let g=Ae.resolve();return m.forEach(x=>{g=g.next(()=>u.getEntry(l,x)).next(b=>{const w=c.docVersions.get(x);En(w!==null),b.version.compareTo(w)<0&&(p.applyToRemoteDocument(b,c),b.isValidDocument()&&(b.setReadTime(c.commitVersion),u.addEntry(b)))})}),g.next(()=>a.mutationQueue.removeMutationBatch(l,p))}(t,i,e,s).next(()=>s.apply(i)).next(()=>t.mutationQueue.performConsistencyCheck(i)).next(()=>t.documentOverlayCache.removeOverlaysForBatchId(i,r,e.batch.batchId)).next(()=>t.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(i,function(a){let l=on();for(let c=0;c<a.mutationResults.length;++c)a.mutationResults[c].transformResults.length>0&&(l=l.add(a.batch.mutations[c].key));return l}(e))).next(()=>t.localDocuments.getDocuments(i,r))})}function HF(n){const e=kt(n);return e.persistence.runTransaction("Get last remote snapshot version","readonly",t=>e.Hr.getLastRemoteSnapshotVersion(t))}function OK(n,e){const t=kt(n),i=e.snapshotVersion;let r=t.Ts;return t.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=t.ds.newChangeBuffer({trackRemovals:!0});r=t.Ts;const a=[];e.targetChanges.forEach((u,p)=>{const m=r.get(p);if(!m)return;a.push(t.Hr.removeMatchingKeys(s,u.removedDocuments,p).next(()=>t.Hr.addMatchingKeys(s,u.addedDocuments,p)));let g=m.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(p)!==null?g=g.withResumeToken(Qi.EMPTY_BYTE_STRING,Dt.min()).withLastLimboFreeSnapshotVersion(Dt.min()):u.resumeToken.approximateByteSize()>0&&(g=g.withResumeToken(u.resumeToken,i)),r=r.insert(p,g),function(b,w,v){return b.resumeToken.approximateByteSize()===0||w.snapshotVersion.toMicroseconds()-b.snapshotVersion.toMicroseconds()>=NK?!0:v.addedDocuments.size+v.modifiedDocuments.size+v.removedDocuments.size>0}(m,g,u)&&a.push(t.Hr.updateTargetData(s,g))});let l=ka(),c=on();if(e.documentUpdates.forEach(u=>{e.resolvedLimboDocuments.has(u)&&a.push(t.persistence.referenceDelegate.updateLimboDocument(s,u))}),a.push(UK(s,o,e.documentUpdates).next(u=>{l=u.Vs,c=u.fs})),!i.isEqual(Dt.min())){const u=t.Hr.getLastRemoteSnapshotVersion(s).next(p=>t.Hr.setTargetsMetadata(s,s.currentSequenceNumber,i));a.push(u)}return Ae.waitFor(a).next(()=>o.apply(s)).next(()=>t.localDocuments.getLocalViewOfDocuments(s,l,c)).next(()=>l)}).then(s=>(t.Ts=r,s))}function UK(n,e,t){let i=on(),r=on();return t.forEach(s=>i=i.add(s)),e.getEntries(n,i).next(s=>{let o=ka();return t.forEach((a,l)=>{const c=s.get(a);l.isFoundDocument()!==c.isFoundDocument()&&(r=r.add(a)),l.isNoDocument()&&l.version.isEqual(Dt.min())?(e.removeEntry(a,l.readTime),o=o.insert(a,l)):!c.isValidDocument()||l.version.compareTo(c.version)>0||l.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(l),o=o.insert(a,l)):at(_A,"Ignoring outdated watch update for ",a,". Current version:",c.version," Watch version:",l.version)}),{Vs:o,fs:r}})}function jK(n,e){const t=kt(n);return t.persistence.runTransaction("Get next mutation batch","readonly",i=>(e===void 0&&(e=lA),t.mutationQueue.getNextMutationBatchAfterBatchId(i,e)))}function FK(n,e){const t=kt(n);return t.persistence.runTransaction("Allocate target","readwrite",i=>{let r;return t.Hr.getTargetData(i,e).next(s=>s?(r=s,Ae.resolve(r)):t.Hr.allocateTargetId(i).next(o=>(r=new Pl(e,o,"TargetPurposeListen",i.currentSequenceNumber),t.Hr.addTargetData(i,r).next(()=>r))))}).then(i=>{const r=t.Ts.get(i.targetId);return(r===null||i.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(t.Ts=t.Ts.insert(i.targetId,i),t.Is.set(e,i.targetId)),i})}async function n1(n,e,t){const i=kt(n),r=i.Ts.get(e),s=t?"readwrite":"readwrite-primary";try{t||await i.persistence.runTransaction("Release target",s,o=>i.persistence.referenceDelegate.removeTarget(o,r))}catch(o){if(!xf(o))throw o;at(_A,`Failed to update sequence numbers for target ${e}: ${o}`)}i.Ts=i.Ts.remove(e),i.Is.delete(r.target)}function P2(n,e,t){const i=kt(n);let r=Dt.min(),s=on();return i.persistence.runTransaction("Execute query","readwrite",o=>function(l,c,u){const p=kt(l),m=p.Is.get(u);return m!==void 0?Ae.resolve(p.Ts.get(m)):p.Hr.getTargetData(c,u)}(i,o,Vo(e)).next(a=>{if(a)return r=a.lastLimboFreeSnapshotVersion,i.Hr.getMatchingKeysForTargetId(o,a.targetId).next(l=>{s=l})}).next(()=>i.Ps.getDocumentsMatchingQuery(o,e,t?r:Dt.min(),t?s:on())).next(a=>(VK(i,TX(e),a),{documents:a,gs:s})))}function VK(n,e,t){let i=n.Es.get(e)||Dt.min();t.forEach((r,s)=>{s.readTime.compareTo(i)>0&&(i=s.readTime)}),n.Es.set(e,i)}class R2{constructor(){this.activeTargetIds=PX()}Ds(e){this.activeTargetIds=this.activeTargetIds.add(e)}vs(e){this.activeTargetIds=this.activeTargetIds.delete(e)}Ss(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class BK{constructor(){this.ho=new R2,this.Po={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,t,i){}addLocalQueryTarget(e,t=!0){return t&&this.ho.Ds(e),this.Po[e]||"not-current"}updateQueryState(e,t,i){this.Po[e]=t}removeLocalQueryTarget(e){this.ho.vs(e)}isLocalQueryTarget(e){return this.ho.activeTargetIds.has(e)}clearQueryState(e){delete this.Po[e]}getAllActiveQueryTargets(){return this.ho.activeTargetIds}isActiveQueryTarget(e){return this.ho.activeTargetIds.has(e)}start(){return this.ho=new R2,Promise.resolve()}handleUserChange(e,t,i){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zK{To(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const N2="ConnectivityMonitor";class D2{constructor(){this.Io=()=>this.Eo(),this.Ao=()=>this.Ro(),this.Vo=[],this.mo()}To(e){this.Vo.push(e)}shutdown(){window.removeEventListener("online",this.Io),window.removeEventListener("offline",this.Ao)}mo(){window.addEventListener("online",this.Io),window.addEventListener("offline",this.Ao)}Eo(){at(N2,"Network connectivity changed: AVAILABLE");for(const e of this.Vo)e(0)}Ro(){at(N2,"Network connectivity changed: UNAVAILABLE");for(const e of this.Vo)e(1)}static D(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let lv=null;function i1(){return lv===null?lv=function(){return 268435456+Math.round(2147483648*Math.random())}():lv++,"0x"+lv.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const PS="RestConnection",HK={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class GK{get fo(){return!1}constructor(e){this.databaseInfo=e,this.databaseId=e.databaseId;const t=e.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),r=encodeURIComponent(this.databaseId.database);this.po=t+"://"+e.host,this.yo=`projects/${i}/databases/${r}`,this.wo=this.databaseId.database===x0?`project_id=${i}`:`project_id=${i}&database_id=${r}`}bo(e,t,i,r,s){const o=i1(),a=this.So(e,t.toUriEncodedString());at(PS,`Sending RPC '${e}' ${o}:`,a,i);const l={"google-cloud-resource-prefix":this.yo,"x-goog-request-params":this.wo};return this.Do(l,r,s),this.vo(e,a,l,i).then(c=>(at(PS,`Received RPC '${e}' ${o}: `,c),c),c=>{throw Yd(PS,`RPC '${e}' ${o} failed with error: `,c,"url: ",a,"request:",i),c})}Co(e,t,i,r,s,o){return this.bo(e,t,i,r,s)}Do(e,t,i){e["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+yf}(),e["Content-Type"]="text/plain",this.databaseInfo.appId&&(e["X-Firebase-GMPID"]=this.databaseInfo.appId),t&&t.headers.forEach((r,s)=>e[s]=r),i&&i.headers.forEach((r,s)=>e[s]=r)}So(e,t){const i=HK[e];return`${this.po}/v1/${t}:${i}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WK{constructor(e){this.Fo=e.Fo,this.Mo=e.Mo}xo(e){this.Oo=e}No(e){this.Bo=e}Lo(e){this.ko=e}onMessage(e){this.qo=e}close(){this.Mo()}send(e){this.Fo(e)}Qo(){this.Oo()}$o(){this.Bo()}Ko(e){this.ko(e)}Uo(e){this.qo(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lr="WebChannelConnection";class qK extends GK{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}vo(e,t,i,r){const s=i1();return new Promise((o,a)=>{const l=new $j;l.setWithCredentials(!0),l.listenOnce(Xj.COMPLETE,()=>{try{switch(l.getLastErrorCode()){case Ex.NO_ERROR:const u=l.getResponseJson();at(lr,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(u)),o(u);break;case Ex.TIMEOUT:at(lr,`RPC '${e}' ${s} timed out`),a(new lt(Ee.DEADLINE_EXCEEDED,"Request time out"));break;case Ex.HTTP_ERROR:const p=l.getStatus();if(at(lr,`RPC '${e}' ${s} failed with status:`,p,"response text:",l.getResponseText()),p>0){let m=l.getResponseJson();Array.isArray(m)&&(m=m[0]);const g=m?.error;if(g&&g.status&&g.message){const x=function(w){const v=w.toLowerCase().replace(/_/g,"-");return Object.values(Ee).indexOf(v)>=0?v:Ee.UNKNOWN}(g.status);a(new lt(x,g.message))}else a(new lt(Ee.UNKNOWN,"Server responded with status "+l.getStatus()))}else a(new lt(Ee.UNAVAILABLE,"Connection failed."));break;default:It()}}finally{at(lr,`RPC '${e}' ${s} completed.`)}});const c=JSON.stringify(r);at(lr,`RPC '${e}' ${s} sending request:`,r),l.send(t,"POST",c,i,15)})}Wo(e,t,i){const r=i1(),s=[this.po,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=Jj(),a=Yj(),l={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(l.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(l.useFetchStreams=!0),this.Do(l.initMessageHeaders,t,i),l.encodeInitMessageHeaders=!0;const u=s.join("");at(lr,`Creating RPC '${e}' stream ${r}: ${u}`,l);const p=o.createWebChannel(u,l);let m=!1,g=!1;const x=new WK({Fo:w=>{g?at(lr,`Not sending because RPC '${e}' stream ${r} is closed:`,w):(m||(at(lr,`Opening RPC '${e}' stream ${r} transport.`),p.open(),m=!0),at(lr,`RPC '${e}' stream ${r} sending:`,w),p.send(w))},Mo:()=>p.close()}),b=(w,v,S)=>{w.listen(v,E=>{try{S(E)}catch(C){setTimeout(()=>{throw C},0)}})};return b(p,Np.EventType.OPEN,()=>{g||(at(lr,`RPC '${e}' stream ${r} transport opened.`),x.Qo())}),b(p,Np.EventType.CLOSE,()=>{g||(g=!0,at(lr,`RPC '${e}' stream ${r} transport closed`),x.Ko())}),b(p,Np.EventType.ERROR,w=>{g||(g=!0,Yd(lr,`RPC '${e}' stream ${r} transport errored:`,w),x.Ko(new lt(Ee.UNAVAILABLE,"The operation could not be completed")))}),b(p,Np.EventType.MESSAGE,w=>{var v;if(!g){const S=w.data[0];En(!!S);const E=S,C=E?.error||((v=E[0])===null||v===void 0?void 0:v.error);if(C){at(lr,`RPC '${e}' stream ${r} received error:`,C);const U=C.status;let O=function(A){const M=gi[A];if(M!==void 0)return PF(M)}(U),N=C.message;O===void 0&&(O=Ee.INTERNAL,N="Unknown error status: "+U+" with message "+C.message),g=!0,x.Ko(new lt(O,N)),p.close()}else at(lr,`RPC '${e}' stream ${r} received:`,S),x.Uo(S)}}),b(a,Kj.STAT_EVENT,w=>{w.stat===qE.PROXY?at(lr,`RPC '${e}' stream ${r} detected buffering proxy`):w.stat===qE.NOPROXY&&at(lr,`RPC '${e}' stream ${r} detected no buffering proxy`)}),setTimeout(()=>{x.$o()},0),x}}function RS(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iw(n){return new YX(n,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GF{constructor(e,t,i=1e3,r=1.5,s=6e4){this.Ti=e,this.timerId=t,this.Go=i,this.zo=r,this.jo=s,this.Ho=0,this.Jo=null,this.Yo=Date.now(),this.reset()}reset(){this.Ho=0}Zo(){this.Ho=this.jo}Xo(e){this.cancel();const t=Math.floor(this.Ho+this.e_()),i=Math.max(0,Date.now()-this.Yo),r=Math.max(0,t-i);r>0&&at("ExponentialBackoff",`Backing off for ${r} ms (base delay: ${this.Ho} ms, delay with jitter: ${t} ms, last attempt: ${i} ms ago)`),this.Jo=this.Ti.enqueueAfterDelay(this.timerId,r,()=>(this.Yo=Date.now(),e())),this.Ho*=this.zo,this.Ho<this.Go&&(this.Ho=this.Go),this.Ho>this.jo&&(this.Ho=this.jo)}t_(){this.Jo!==null&&(this.Jo.skipDelay(),this.Jo=null)}cancel(){this.Jo!==null&&(this.Jo.cancel(),this.Jo=null)}e_(){return(Math.random()-.5)*this.Ho}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L2="PersistentStream";class WF{constructor(e,t,i,r,s,o,a,l){this.Ti=e,this.n_=i,this.r_=r,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=a,this.listener=l,this.state=0,this.i_=0,this.s_=null,this.o_=null,this.stream=null,this.__=0,this.a_=new GF(e,t)}u_(){return this.state===1||this.state===5||this.c_()}c_(){return this.state===2||this.state===3}start(){this.__=0,this.state!==4?this.auth():this.l_()}async stop(){this.u_()&&await this.close(0)}h_(){this.state=0,this.a_.reset()}P_(){this.c_()&&this.s_===null&&(this.s_=this.Ti.enqueueAfterDelay(this.n_,6e4,()=>this.T_()))}I_(e){this.E_(),this.stream.send(e)}async T_(){if(this.c_())return this.close(0)}E_(){this.s_&&(this.s_.cancel(),this.s_=null)}d_(){this.o_&&(this.o_.cancel(),this.o_=null)}async close(e,t){this.E_(),this.d_(),this.a_.cancel(),this.i_++,e!==4?this.a_.reset():t&&t.code===Ee.RESOURCE_EXHAUSTED?(La(t.toString()),La("Using maximum backoff delay to prevent overloading the backend."),this.a_.Zo()):t&&t.code===Ee.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.A_(),this.stream.close(),this.stream=null),this.state=e,await this.listener.Lo(t)}A_(){}auth(){this.state=1;const e=this.R_(this.i_),t=this.i_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([i,r])=>{this.i_===t&&this.V_(i,r)},i=>{e(()=>{const r=new lt(Ee.UNKNOWN,"Fetching auth token failed: "+i.message);return this.m_(r)})})}V_(e,t){const i=this.R_(this.i_);this.stream=this.f_(e,t),this.stream.xo(()=>{i(()=>this.listener.xo())}),this.stream.No(()=>{i(()=>(this.state=2,this.o_=this.Ti.enqueueAfterDelay(this.r_,1e4,()=>(this.c_()&&(this.state=3),Promise.resolve())),this.listener.No()))}),this.stream.Lo(r=>{i(()=>this.m_(r))}),this.stream.onMessage(r=>{i(()=>++this.__==1?this.g_(r):this.onNext(r))})}l_(){this.state=5,this.a_.Xo(async()=>{this.state=0,this.start()})}m_(e){return at(L2,`close with error: ${e}`),this.stream=null,this.close(4,e)}R_(e){return t=>{this.Ti.enqueueAndForget(()=>this.i_===e?t():(at(L2,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class $K extends WF{constructor(e,t,i,r,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",t,i,r,o),this.serializer=s}f_(e,t){return this.connection.Wo("Listen",e,t)}g_(e){return this.onNext(e)}onNext(e){this.a_.reset();const t=ZX(this.serializer,e),i=function(s){if(!("targetChange"in s))return Dt.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?Dt.min():o.readTime?Bo(o.readTime):Dt.min()}(e);return this.listener.p_(t,i)}y_(e){const t={};t.database=t1(this.serializer),t.addTarget=function(s,o){let a;const l=o.target;if(a=YE(l)?{documents:nK(s,l)}:{query:iK(s,l).ht},a.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){a.resumeToken=DF(s,o.resumeToken);const c=QE(s,o.expectedCount);c!==null&&(a.expectedCount=c)}else if(o.snapshotVersion.compareTo(Dt.min())>0){a.readTime=T0(s,o.snapshotVersion.toTimestamp());const c=QE(s,o.expectedCount);c!==null&&(a.expectedCount=c)}return a}(this.serializer,e);const i=sK(this.serializer,e);i&&(t.labels=i),this.I_(t)}w_(e){const t={};t.database=t1(this.serializer),t.removeTarget=e,this.I_(t)}}class XK extends WF{constructor(e,t,i,r,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",t,i,r,o),this.serializer=s}get b_(){return this.__>0}start(){this.lastStreamToken=void 0,super.start()}A_(){this.b_&&this.S_([])}f_(e,t){return this.connection.Wo("Write",e,t)}g_(e){return En(!!e.streamToken),this.lastStreamToken=e.streamToken,En(!e.writeResults||e.writeResults.length===0),this.listener.D_()}onNext(e){En(!!e.streamToken),this.lastStreamToken=e.streamToken,this.a_.reset();const t=tK(e.writeResults,e.commitTime),i=Bo(e.commitTime);return this.listener.v_(i,t)}C_(){const e={};e.database=t1(this.serializer),this.I_(e)}S_(e){const t={streamToken:this.lastStreamToken,writes:e.map(i=>eK(this.serializer,i))};this.I_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class KK{}class YK extends KK{constructor(e,t,i,r){super(),this.authCredentials=e,this.appCheckCredentials=t,this.connection=i,this.serializer=r,this.F_=!1}M_(){if(this.F_)throw new lt(Ee.FAILED_PRECONDITION,"The client has already been terminated.")}bo(e,t,i,r){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.bo(e,ZE(t,i),r,s,o)).catch(s=>{throw s.name==="FirebaseError"?(s.code===Ee.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new lt(Ee.UNKNOWN,s.toString())})}Co(e,t,i,r,s){return this.M_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,a])=>this.connection.Co(e,ZE(t,i),r,o,a,s)).catch(o=>{throw o.name==="FirebaseError"?(o.code===Ee.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new lt(Ee.UNKNOWN,o.toString())})}terminate(){this.F_=!0,this.connection.terminate()}}class JK{constructor(e,t){this.asyncQueue=e,this.onlineStateHandler=t,this.state="Unknown",this.x_=0,this.O_=null,this.N_=!0}B_(){this.x_===0&&(this.L_("Unknown"),this.O_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.O_=null,this.k_("Backend didn't respond within 10 seconds."),this.L_("Offline"),Promise.resolve())))}q_(e){this.state==="Online"?this.L_("Unknown"):(this.x_++,this.x_>=1&&(this.Q_(),this.k_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.L_("Offline")))}set(e){this.Q_(),this.x_=0,e==="Online"&&(this.N_=!1),this.L_(e)}L_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}k_(e){const t=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.N_?(La(t),this.N_=!1):at("OnlineStateTracker",t)}Q_(){this.O_!==null&&(this.O_.cancel(),this.O_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zu="RemoteStore";class QK{constructor(e,t,i,r,s){this.localStore=e,this.datastore=t,this.asyncQueue=i,this.remoteSyncer={},this.K_=[],this.U_=new Map,this.W_=new Set,this.G_=[],this.z_=s,this.z_.To(o=>{i.enqueueAndForget(async()=>{eh(this)&&(at(zu,"Restarting streams for network reachability change."),await async function(l){const c=kt(l);c.W_.add(4),await Lg(c),c.j_.set("Unknown"),c.W_.delete(4),await rw(c)}(this))})}),this.j_=new JK(i,r)}}async function rw(n){if(eh(n))for(const e of n.G_)await e(!0)}async function Lg(n){for(const e of n.G_)await e(!1)}function qF(n,e){const t=kt(n);t.U_.has(e.targetId)||(t.U_.set(e.targetId,e),TA(t)?SA(t):wf(t).c_()&&bA(t,e))}function wA(n,e){const t=kt(n),i=wf(t);t.U_.delete(e),i.c_()&&$F(t,e),t.U_.size===0&&(i.c_()?i.P_():eh(t)&&t.j_.set("Unknown"))}function bA(n,e){if(n.H_.Ne(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(Dt.min())>0){const t=n.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(t)}wf(n).y_(e)}function $F(n,e){n.H_.Ne(e),wf(n).w_(e)}function SA(n){n.H_=new qX({getRemoteKeysForTarget:e=>n.remoteSyncer.getRemoteKeysForTarget(e),lt:e=>n.U_.get(e)||null,it:()=>n.datastore.serializer.databaseId}),wf(n).start(),n.j_.B_()}function TA(n){return eh(n)&&!wf(n).u_()&&n.U_.size>0}function eh(n){return kt(n).W_.size===0}function XF(n){n.H_=void 0}async function ZK(n){n.j_.set("Online")}async function eY(n){n.U_.forEach((e,t)=>{bA(n,e)})}async function tY(n,e){XF(n),TA(n)?(n.j_.q_(e),SA(n)):n.j_.set("Unknown")}async function nY(n,e,t){if(n.j_.set("Online"),e instanceof NF&&e.state===2&&e.cause)try{await async function(r,s){const o=s.cause;for(const a of s.targetIds)r.U_.has(a)&&(await r.remoteSyncer.rejectListen(a,o),r.U_.delete(a),r.H_.removeTarget(a))}(n,e)}catch(i){at(zu,"Failed to remove targets %s: %s ",e.targetIds.join(","),i),await C0(n,i)}else if(e instanceof Ix?n.H_.We(e):e instanceof RF?n.H_.Ze(e):n.H_.je(e),!t.isEqual(Dt.min()))try{const i=await HF(n.localStore);t.compareTo(i)>=0&&await function(s,o){const a=s.H_.ot(o);return a.targetChanges.forEach((l,c)=>{if(l.resumeToken.approximateByteSize()>0){const u=s.U_.get(c);u&&s.U_.set(c,u.withResumeToken(l.resumeToken,o))}}),a.targetMismatches.forEach((l,c)=>{const u=s.U_.get(l);if(!u)return;s.U_.set(l,u.withResumeToken(Qi.EMPTY_BYTE_STRING,u.snapshotVersion)),$F(s,l);const p=new Pl(u.target,l,c,u.sequenceNumber);bA(s,p)}),s.remoteSyncer.applyRemoteEvent(a)}(n,t)}catch(i){at(zu,"Failed to raise snapshot:",i),await C0(n,i)}}async function C0(n,e,t){if(!xf(e))throw e;n.W_.add(1),await Lg(n),n.j_.set("Offline"),t||(t=()=>HF(n.localStore)),n.asyncQueue.enqueueRetryable(async()=>{at(zu,"Retrying IndexedDB access"),await t(),n.W_.delete(1),await rw(n)})}function KF(n,e){return e().catch(t=>C0(n,t,e))}async function sw(n){const e=kt(n),t=ec(e);let i=e.K_.length>0?e.K_[e.K_.length-1].batchId:lA;for(;iY(e);)try{const r=await jK(e.localStore,i);if(r===null){e.K_.length===0&&t.P_();break}i=r.batchId,rY(e,r)}catch(r){await C0(e,r)}YF(e)&&JF(e)}function iY(n){return eh(n)&&n.K_.length<10}function rY(n,e){n.K_.push(e);const t=ec(n);t.c_()&&t.b_&&t.S_(e.mutations)}function YF(n){return eh(n)&&!ec(n).u_()&&n.K_.length>0}function JF(n){ec(n).start()}async function sY(n){ec(n).C_()}async function oY(n){const e=ec(n);for(const t of n.K_)e.S_(t.mutations)}async function aY(n,e,t){const i=n.K_.shift(),r=pA.from(i,e,t);await KF(n,()=>n.remoteSyncer.applySuccessfulWrite(r)),await sw(n)}async function lY(n,e){e&&ec(n).b_&&await async function(i,r){if(function(o){return HX(o)&&o!==Ee.ABORTED}(r.code)){const s=i.K_.shift();ec(i).h_(),await KF(i,()=>i.remoteSyncer.rejectFailedWrite(s.batchId,r)),await sw(i)}}(n,e),YF(n)&&JF(n)}async function k2(n,e){const t=kt(n);t.asyncQueue.verifyOperationInProgress(),at(zu,"RemoteStore received new credentials");const i=eh(t);t.W_.add(3),await Lg(t),i&&t.j_.set("Unknown"),await t.remoteSyncer.handleCredentialChange(e),t.W_.delete(3),await rw(t)}async function cY(n,e){const t=kt(n);e?(t.W_.delete(2),await rw(t)):e||(t.W_.add(2),await Lg(t),t.j_.set("Unknown"))}function wf(n){return n.J_||(n.J_=function(t,i,r){const s=kt(t);return s.M_(),new $K(i,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,r)}(n.datastore,n.asyncQueue,{xo:ZK.bind(null,n),No:eY.bind(null,n),Lo:tY.bind(null,n),p_:nY.bind(null,n)}),n.G_.push(async e=>{e?(n.J_.h_(),TA(n)?SA(n):n.j_.set("Unknown")):(await n.J_.stop(),XF(n))})),n.J_}function ec(n){return n.Y_||(n.Y_=function(t,i,r){const s=kt(t);return s.M_(),new XK(i,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,r)}(n.datastore,n.asyncQueue,{xo:()=>Promise.resolve(),No:sY.bind(null,n),Lo:lY.bind(null,n),D_:oY.bind(null,n),v_:aY.bind(null,n)}),n.G_.push(async e=>{e?(n.Y_.h_(),await sw(n)):(await n.Y_.stop(),n.K_.length>0&&(at(zu,`Stopping write stream with ${n.K_.length} pending writes`),n.K_=[]))})),n.Y_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class EA{constructor(e,t,i,r,s){this.asyncQueue=e,this.timerId=t,this.targetTimeMs=i,this.op=r,this.removalCallback=s,this.deferred=new Sa,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}get promise(){return this.deferred.promise}static createAndSchedule(e,t,i,r,s){const o=Date.now()+i,a=new EA(e,t,o,r,s);return a.start(i),a}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new lt(Ee.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function CA(n,e){if(La("AsyncQueue",`${e}: ${n}`),xf(n))return new lt(Ee.UNAVAILABLE,`${e}: ${n}`);throw n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fd{static emptySet(e){return new Fd(e.comparator)}constructor(e){this.comparator=e?(t,i)=>e(t,i)||_t.comparator(t.key,i.key):(t,i)=>_t.comparator(t.key,i.key),this.keyedMap=Dp(),this.sortedSet=new Kn(this.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const t=this.keyedMap.get(e);return t?this.sortedSet.indexOf(t):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((t,i)=>(e(t),!1))}add(e){const t=this.delete(e.key);return t.copy(t.keyedMap.insert(e.key,e),t.sortedSet.insert(e,null))}delete(e){const t=this.get(e);return t?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(t)):this}isEqual(e){if(!(e instanceof Fd)||this.size!==e.size)return!1;const t=this.sortedSet.getIterator(),i=e.sortedSet.getIterator();for(;t.hasNext();){const r=t.getNext().key,s=i.getNext().key;if(!r.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(t=>{e.push(t.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,t){const i=new Fd;return i.comparator=this.comparator,i.keyedMap=e,i.sortedSet=t,i}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class O2{constructor(){this.Z_=new Kn(_t.comparator)}track(e){const t=e.doc.key,i=this.Z_.get(t);i?e.type!==0&&i.type===3?this.Z_=this.Z_.insert(t,e):e.type===3&&i.type!==1?this.Z_=this.Z_.insert(t,{type:i.type,doc:e.doc}):e.type===2&&i.type===2?this.Z_=this.Z_.insert(t,{type:2,doc:e.doc}):e.type===2&&i.type===0?this.Z_=this.Z_.insert(t,{type:0,doc:e.doc}):e.type===1&&i.type===0?this.Z_=this.Z_.remove(t):e.type===1&&i.type===2?this.Z_=this.Z_.insert(t,{type:1,doc:i.doc}):e.type===0&&i.type===1?this.Z_=this.Z_.insert(t,{type:2,doc:e.doc}):It():this.Z_=this.Z_.insert(t,e)}X_(){const e=[];return this.Z_.inorderTraversal((t,i)=>{e.push(i)}),e}}class tf{constructor(e,t,i,r,s,o,a,l,c){this.query=e,this.docs=t,this.oldDocs=i,this.docChanges=r,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=a,this.excludesMetadataChanges=l,this.hasCachedResults=c}static fromInitialDocuments(e,t,i,r,s){const o=[];return t.forEach(a=>{o.push({type:0,doc:a})}),new tf(e,t,Fd.emptySet(t),o,i,r,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Q_(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const t=this.docChanges,i=e.docChanges;if(t.length!==i.length)return!1;for(let r=0;r<t.length;r++)if(t[r].type!==i[r].type||!t[r].doc.isEqual(i[r].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uY{constructor(){this.ea=void 0,this.ta=[]}na(){return this.ta.some(e=>e.ra())}}class hY{constructor(){this.queries=U2(),this.onlineState="Unknown",this.ia=new Set}terminate(){(function(t,i){const r=kt(t),s=r.queries;r.queries=U2(),s.forEach((o,a)=>{for(const l of a.ta)l.onError(i)})})(this,new lt(Ee.ABORTED,"Firestore shutting down"))}}function U2(){return new Zu(n=>yF(n),Q_)}async function AA(n,e){const t=kt(n);let i=3;const r=e.query;let s=t.queries.get(r);s?!s.na()&&e.ra()&&(i=2):(s=new uY,i=e.ra()?0:1);try{switch(i){case 0:s.ea=await t.onListen(r,!0);break;case 1:s.ea=await t.onListen(r,!1);break;case 2:await t.onFirstRemoteStoreListen(r)}}catch(o){const a=CA(o,`Initialization of query '${Qh(e.query)}' failed`);return void e.onError(a)}t.queries.set(r,s),s.ta.push(e),e.sa(t.onlineState),s.ea&&e.oa(s.ea)&&IA(t)}async function MA(n,e){const t=kt(n),i=e.query;let r=3;const s=t.queries.get(i);if(s){const o=s.ta.indexOf(e);o>=0&&(s.ta.splice(o,1),s.ta.length===0?r=e.ra()?0:1:!s.na()&&e.ra()&&(r=2))}switch(r){case 0:return t.queries.delete(i),t.onUnlisten(i,!0);case 1:return t.queries.delete(i),t.onUnlisten(i,!1);case 2:return t.onLastRemoteStoreUnlisten(i);default:return}}function dY(n,e){const t=kt(n);let i=!1;for(const r of e){const s=r.query,o=t.queries.get(s);if(o){for(const a of o.ta)a.oa(r)&&(i=!0);o.ea=r}}i&&IA(t)}function fY(n,e,t){const i=kt(n),r=i.queries.get(e);if(r)for(const s of r.ta)s.onError(t);i.queries.delete(e)}function IA(n){n.ia.forEach(e=>{e.next()})}var r1,j2;(j2=r1||(r1={}))._a="default",j2.Cache="cache";class PA{constructor(e,t,i){this.query=e,this.aa=t,this.ua=!1,this.ca=null,this.onlineState="Unknown",this.options=i||{}}oa(e){if(!this.options.includeMetadataChanges){const i=[];for(const r of e.docChanges)r.type!==3&&i.push(r);e=new tf(e.query,e.docs,e.oldDocs,i,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let t=!1;return this.ua?this.la(e)&&(this.aa.next(e),t=!0):this.ha(e,this.onlineState)&&(this.Pa(e),t=!0),this.ca=e,t}onError(e){this.aa.error(e)}sa(e){this.onlineState=e;let t=!1;return this.ca&&!this.ua&&this.ha(this.ca,e)&&(this.Pa(this.ca),t=!0),t}ha(e,t){if(!e.fromCache||!this.ra())return!0;const i=t!=="Offline";return(!this.options.Ta||!i)&&(!e.docs.isEmpty()||e.hasCachedResults||t==="Offline")}la(e){if(e.docChanges.length>0)return!0;const t=this.ca&&this.ca.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!t)&&this.options.includeMetadataChanges===!0}Pa(e){e=tf.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.ua=!0,this.aa.next(e)}ra(){return this.options.source!==r1.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QF{constructor(e){this.key=e}}class ZF{constructor(e){this.key=e}}class pY{constructor(e,t){this.query=e,this.fa=t,this.ga=null,this.hasCachedResults=!1,this.current=!1,this.pa=on(),this.mutatedKeys=on(),this.ya=vF(e),this.wa=new Fd(this.ya)}get ba(){return this.fa}Sa(e,t){const i=t?t.Da:new O2,r=t?t.wa:this.wa;let s=t?t.mutatedKeys:this.mutatedKeys,o=r,a=!1;const l=this.query.limitType==="F"&&r.size===this.query.limit?r.last():null,c=this.query.limitType==="L"&&r.size===this.query.limit?r.first():null;if(e.inorderTraversal((u,p)=>{const m=r.get(u),g=Z_(this.query,p)?p:null,x=!!m&&this.mutatedKeys.has(m.key),b=!!g&&(g.hasLocalMutations||this.mutatedKeys.has(g.key)&&g.hasCommittedMutations);let w=!1;m&&g?m.data.isEqual(g.data)?x!==b&&(i.track({type:3,doc:g}),w=!0):this.va(m,g)||(i.track({type:2,doc:g}),w=!0,(l&&this.ya(g,l)>0||c&&this.ya(g,c)<0)&&(a=!0)):!m&&g?(i.track({type:0,doc:g}),w=!0):m&&!g&&(i.track({type:1,doc:m}),w=!0,(l||c)&&(a=!0)),w&&(g?(o=o.add(g),s=b?s.add(u):s.delete(u)):(o=o.delete(u),s=s.delete(u)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const u=this.query.limitType==="F"?o.last():o.first();o=o.delete(u.key),s=s.delete(u.key),i.track({type:1,doc:u})}return{wa:o,Da:i,ls:a,mutatedKeys:s}}va(e,t){return e.hasLocalMutations&&t.hasCommittedMutations&&!t.hasLocalMutations}applyChanges(e,t,i,r){const s=this.wa;this.wa=e.wa,this.mutatedKeys=e.mutatedKeys;const o=e.Da.X_();o.sort((u,p)=>function(g,x){const b=w=>{switch(w){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return It()}};return b(g)-b(x)}(u.type,p.type)||this.ya(u.doc,p.doc)),this.Ca(i),r=r!=null&&r;const a=t&&!r?this.Fa():[],l=this.pa.size===0&&this.current&&!r?1:0,c=l!==this.ga;return this.ga=l,o.length!==0||c?{snapshot:new tf(this.query,e.wa,s,o,e.mutatedKeys,l===0,c,!1,!!i&&i.resumeToken.approximateByteSize()>0),Ma:a}:{Ma:a}}sa(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({wa:this.wa,Da:new O2,mutatedKeys:this.mutatedKeys,ls:!1},!1)):{Ma:[]}}xa(e){return!this.fa.has(e)&&!!this.wa.has(e)&&!this.wa.get(e).hasLocalMutations}Ca(e){e&&(e.addedDocuments.forEach(t=>this.fa=this.fa.add(t)),e.modifiedDocuments.forEach(t=>{}),e.removedDocuments.forEach(t=>this.fa=this.fa.delete(t)),this.current=e.current)}Fa(){if(!this.current)return[];const e=this.pa;this.pa=on(),this.wa.forEach(i=>{this.xa(i.key)&&(this.pa=this.pa.add(i.key))});const t=[];return e.forEach(i=>{this.pa.has(i)||t.push(new ZF(i))}),this.pa.forEach(i=>{e.has(i)||t.push(new QF(i))}),t}Oa(e){this.fa=e.gs,this.pa=on();const t=this.Sa(e.documents);return this.applyChanges(t,!0)}Na(){return tf.fromInitialDocuments(this.query,this.wa,this.mutatedKeys,this.ga===0,this.hasCachedResults)}}const RA="SyncEngine";class mY{constructor(e,t,i){this.query=e,this.targetId=t,this.view=i}}class gY{constructor(e){this.key=e,this.Ba=!1}}class yY{constructor(e,t,i,r,s,o){this.localStore=e,this.remoteStore=t,this.eventManager=i,this.sharedClientState=r,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.La={},this.ka=new Zu(a=>yF(a),Q_),this.qa=new Map,this.Qa=new Set,this.$a=new Kn(_t.comparator),this.Ka=new Map,this.Ua=new yA,this.Wa={},this.Ga=new Map,this.za=ef.Un(),this.onlineState="Unknown",this.ja=void 0}get isPrimaryClient(){return this.ja===!0}}async function vY(n,e,t=!0){const i=sV(n);let r;const s=i.ka.get(e);return s?(i.sharedClientState.addLocalQueryTarget(s.targetId),r=s.view.Na()):r=await eV(i,e,t,!0),r}async function xY(n,e){const t=sV(n);await eV(t,e,!0,!1)}async function eV(n,e,t,i){const r=await FK(n.localStore,Vo(e)),s=r.targetId,o=n.sharedClientState.addLocalQueryTarget(s,t);let a;return i&&(a=await _Y(n,e,s,o==="current",r.resumeToken)),n.isPrimaryClient&&t&&qF(n.remoteStore,r),a}async function _Y(n,e,t,i,r){n.Ha=(p,m,g)=>async function(b,w,v,S){let E=w.view.Sa(v);E.ls&&(E=await P2(b.localStore,w.query,!1).then(({documents:N})=>w.view.Sa(N,E)));const C=S&&S.targetChanges.get(w.targetId),U=S&&S.targetMismatches.get(w.targetId)!=null,O=w.view.applyChanges(E,b.isPrimaryClient,C,U);return V2(b,w.targetId,O.Ma),O.snapshot}(n,p,m,g);const s=await P2(n.localStore,e,!0),o=new pY(e,s.gs),a=o.Sa(s.documents),l=Dg.createSynthesizedTargetChangeForCurrentChange(t,i&&n.onlineState!=="Offline",r),c=o.applyChanges(a,n.isPrimaryClient,l);V2(n,t,c.Ma);const u=new mY(e,t,o);return n.ka.set(e,u),n.qa.has(t)?n.qa.get(t).push(e):n.qa.set(t,[e]),c.snapshot}async function wY(n,e,t){const i=kt(n),r=i.ka.get(e),s=i.qa.get(r.targetId);if(s.length>1)return i.qa.set(r.targetId,s.filter(o=>!Q_(o,e))),void i.ka.delete(e);i.isPrimaryClient?(i.sharedClientState.removeLocalQueryTarget(r.targetId),i.sharedClientState.isActiveQueryTarget(r.targetId)||await n1(i.localStore,r.targetId,!1).then(()=>{i.sharedClientState.clearQueryState(r.targetId),t&&wA(i.remoteStore,r.targetId),s1(i,r.targetId)}).catch(vf)):(s1(i,r.targetId),await n1(i.localStore,r.targetId,!0))}async function bY(n,e){const t=kt(n),i=t.ka.get(e),r=t.qa.get(i.targetId);t.isPrimaryClient&&r.length===1&&(t.sharedClientState.removeLocalQueryTarget(i.targetId),wA(t.remoteStore,i.targetId))}async function SY(n,e,t){const i=PY(n);try{const r=await function(o,a){const l=kt(o),c=bi.now(),u=a.reduce((g,x)=>g.add(x.key),on());let p,m;return l.persistence.runTransaction("Locally write mutations","readwrite",g=>{let x=ka(),b=on();return l.ds.getEntries(g,u).next(w=>{x=w,x.forEach((v,S)=>{S.isValidDocument()||(b=b.add(v))})}).next(()=>l.localDocuments.getOverlayedDocuments(g,x)).next(w=>{p=w;const v=[];for(const S of a){const E=jX(S,p.get(S.key).overlayedDocument);E!=null&&v.push(new mc(S.key,E,cF(E.value.mapValue),mo.exists(!0)))}return l.mutationQueue.addMutationBatch(g,c,v,a)}).next(w=>{m=w;const v=w.applyToLocalDocumentSet(p,b);return l.documentOverlayCache.saveOverlays(g,w.batchId,v)})}).then(()=>({batchId:m.batchId,changes:_F(p)}))}(i.localStore,e);i.sharedClientState.addPendingMutation(r.batchId),function(o,a,l){let c=o.Wa[o.currentUser.toKey()];c||(c=new Kn(cn)),c=c.insert(a,l),o.Wa[o.currentUser.toKey()]=c}(i,r.batchId,t),await kg(i,r.changes),await sw(i.remoteStore)}catch(r){const s=CA(r,"Failed to persist write");t.reject(s)}}async function tV(n,e){const t=kt(n);try{const i=await OK(t.localStore,e);e.targetChanges.forEach((r,s)=>{const o=t.Ka.get(s);o&&(En(r.addedDocuments.size+r.modifiedDocuments.size+r.removedDocuments.size<=1),r.addedDocuments.size>0?o.Ba=!0:r.modifiedDocuments.size>0?En(o.Ba):r.removedDocuments.size>0&&(En(o.Ba),o.Ba=!1))}),await kg(t,i,e)}catch(i){await vf(i)}}function F2(n,e,t){const i=kt(n);if(i.isPrimaryClient&&t===0||!i.isPrimaryClient&&t===1){const r=[];i.ka.forEach((s,o)=>{const a=o.view.sa(e);a.snapshot&&r.push(a.snapshot)}),function(o,a){const l=kt(o);l.onlineState=a;let c=!1;l.queries.forEach((u,p)=>{for(const m of p.ta)m.sa(a)&&(c=!0)}),c&&IA(l)}(i.eventManager,e),r.length&&i.La.p_(r),i.onlineState=e,i.isPrimaryClient&&i.sharedClientState.setOnlineState(e)}}async function TY(n,e,t){const i=kt(n);i.sharedClientState.updateQueryState(e,"rejected",t);const r=i.Ka.get(e),s=r&&r.key;if(s){let o=new Kn(_t.comparator);o=o.insert(s,mr.newNoDocument(s,Dt.min()));const a=on().add(s),l=new nw(Dt.min(),new Map,new Kn(cn),o,a);await tV(i,l),i.$a=i.$a.remove(s),i.Ka.delete(e),NA(i)}else await n1(i.localStore,e,!1).then(()=>s1(i,e,t)).catch(vf)}async function EY(n,e){const t=kt(n),i=e.batch.batchId;try{const r=await kK(t.localStore,e);iV(t,i,null),nV(t,i),t.sharedClientState.updateMutationState(i,"acknowledged"),await kg(t,r)}catch(r){await vf(r)}}async function CY(n,e,t){const i=kt(n);try{const r=await function(o,a){const l=kt(o);return l.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let u;return l.mutationQueue.lookupMutationBatch(c,a).next(p=>(En(p!==null),u=p.keys(),l.mutationQueue.removeMutationBatch(c,p))).next(()=>l.mutationQueue.performConsistencyCheck(c)).next(()=>l.documentOverlayCache.removeOverlaysForBatchId(c,u,a)).next(()=>l.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,u)).next(()=>l.localDocuments.getDocuments(c,u))})}(i.localStore,e);iV(i,e,t),nV(i,e),i.sharedClientState.updateMutationState(e,"rejected",t),await kg(i,r)}catch(r){await vf(r)}}function nV(n,e){(n.Ga.get(e)||[]).forEach(t=>{t.resolve()}),n.Ga.delete(e)}function iV(n,e,t){const i=kt(n);let r=i.Wa[i.currentUser.toKey()];if(r){const s=r.get(e);s&&(t?s.reject(t):s.resolve(),r=r.remove(e)),i.Wa[i.currentUser.toKey()]=r}}function s1(n,e,t=null){n.sharedClientState.removeLocalQueryTarget(e);for(const i of n.qa.get(e))n.ka.delete(i),t&&n.La.Ja(i,t);n.qa.delete(e),n.isPrimaryClient&&n.Ua.Sr(e).forEach(i=>{n.Ua.containsKey(i)||rV(n,i)})}function rV(n,e){n.Qa.delete(e.path.canonicalString());const t=n.$a.get(e);t!==null&&(wA(n.remoteStore,t),n.$a=n.$a.remove(e),n.Ka.delete(t),NA(n))}function V2(n,e,t){for(const i of t)i instanceof QF?(n.Ua.addReference(i.key,e),AY(n,i)):i instanceof ZF?(at(RA,"Document no longer in limbo: "+i.key),n.Ua.removeReference(i.key,e),n.Ua.containsKey(i.key)||rV(n,i.key)):It()}function AY(n,e){const t=e.key,i=t.path.canonicalString();n.$a.get(t)||n.Qa.has(i)||(at(RA,"New document in limbo: "+t),n.Qa.add(i),NA(n))}function NA(n){for(;n.Qa.size>0&&n.$a.size<n.maxConcurrentLimboResolutions;){const e=n.Qa.values().next().value;n.Qa.delete(e);const t=new _t(Un.fromString(e)),i=n.za.next();n.Ka.set(i,new gY(t)),n.$a=n.$a.insert(t,i),qF(n.remoteStore,new Pl(Vo(J_(t.path)),i,"TargetPurposeLimboResolution",X_.ae))}}async function kg(n,e,t){const i=kt(n),r=[],s=[],o=[];i.ka.isEmpty()||(i.ka.forEach((a,l)=>{o.push(i.Ha(l,e,t).then(c=>{var u;if((c||t)&&i.isPrimaryClient){const p=c?!c.fromCache:(u=t?.targetChanges.get(l.targetId))===null||u===void 0?void 0:u.current;i.sharedClientState.updateQueryState(l.targetId,p?"current":"not-current")}if(c){r.push(c);const p=xA.Yi(l.targetId,c);s.push(p)}}))}),await Promise.all(o),i.La.p_(r),await async function(l,c){const u=kt(l);try{await u.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>Ae.forEach(c,m=>Ae.forEach(m.Hi,g=>u.persistence.referenceDelegate.addReference(p,m.targetId,g)).next(()=>Ae.forEach(m.Ji,g=>u.persistence.referenceDelegate.removeReference(p,m.targetId,g)))))}catch(p){if(!xf(p))throw p;at(_A,"Failed to update sequence numbers: "+p)}for(const p of c){const m=p.targetId;if(!p.fromCache){const g=u.Ts.get(m),x=g.snapshotVersion,b=g.withLastLimboFreeSnapshotVersion(x);u.Ts=u.Ts.insert(m,b)}}}(i.localStore,s))}async function MY(n,e){const t=kt(n);if(!t.currentUser.isEqual(e)){at(RA,"User change. New user:",e.toKey());const i=await zF(t.localStore,e);t.currentUser=e,function(s,o){s.Ga.forEach(a=>{a.forEach(l=>{l.reject(new lt(Ee.CANCELLED,o))})}),s.Ga.clear()}(t,"'waitForPendingWrites' promise is rejected due to a user change."),t.sharedClientState.handleUserChange(e,i.removedBatchIds,i.addedBatchIds),await kg(t,i.Rs)}}function IY(n,e){const t=kt(n),i=t.Ka.get(e);if(i&&i.Ba)return on().add(i.key);{let r=on();const s=t.qa.get(e);if(!s)return r;for(const o of s){const a=t.ka.get(o);r=r.unionWith(a.view.ba)}return r}}function sV(n){const e=kt(n);return e.remoteStore.remoteSyncer.applyRemoteEvent=tV.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=IY.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=TY.bind(null,e),e.La.p_=dY.bind(null,e.eventManager),e.La.Ja=fY.bind(null,e.eventManager),e}function PY(n){const e=kt(n);return e.remoteStore.remoteSyncer.applySuccessfulWrite=EY.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=CY.bind(null,e),e}class A0{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(e){this.serializer=iw(e.databaseInfo.databaseId),this.sharedClientState=this.Za(e),this.persistence=this.Xa(e),await this.persistence.start(),this.localStore=this.eu(e),this.gcScheduler=this.tu(e,this.localStore),this.indexBackfillerScheduler=this.nu(e,this.localStore)}tu(e,t){return null}nu(e,t){return null}eu(e){return LK(this.persistence,new RK,e.initialUser,this.serializer)}Xa(e){return new BF(vA.ri,this.serializer)}Za(e){return new BK}async terminate(){var e,t;(e=this.gcScheduler)===null||e===void 0||e.stop(),(t=this.indexBackfillerScheduler)===null||t===void 0||t.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}A0.provider={build:()=>new A0};class RY extends A0{constructor(e){super(),this.cacheSizeBytes=e}tu(e,t){En(this.persistence.referenceDelegate instanceof E0);const i=this.persistence.referenceDelegate.garbageCollector;return new gK(i,e.asyncQueue,t)}Xa(e){const t=this.cacheSizeBytes!==void 0?Wr.withCacheSize(this.cacheSizeBytes):Wr.DEFAULT;return new BF(i=>E0.ri(i,t),this.serializer)}}class o1{async initialize(e,t){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(t),this.remoteStore=this.createRemoteStore(t),this.eventManager=this.createEventManager(t),this.syncEngine=this.createSyncEngine(t,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=i=>F2(this.syncEngine,i,1),this.remoteStore.remoteSyncer.handleCredentialChange=MY.bind(null,this.syncEngine),await cY(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new hY}()}createDatastore(e){const t=iw(e.databaseInfo.databaseId),i=function(s){return new qK(s)}(e.databaseInfo);return function(s,o,a,l){return new YK(s,o,a,l)}(e.authCredentials,e.appCheckCredentials,i,t)}createRemoteStore(e){return function(i,r,s,o,a){return new QK(i,r,s,o,a)}(this.localStore,this.datastore,e.asyncQueue,t=>F2(this.syncEngine,t,0),function(){return D2.D()?new D2:new zK}())}createSyncEngine(e,t){return function(r,s,o,a,l,c,u){const p=new yY(r,s,o,a,l,c);return u&&(p.ja=!0),p}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,t)}async terminate(){var e,t;await async function(r){const s=kt(r);at(zu,"RemoteStore shutting down."),s.W_.add(5),await Lg(s),s.z_.shutdown(),s.j_.set("Unknown")}(this.remoteStore),(e=this.datastore)===null||e===void 0||e.terminate(),(t=this.eventManager)===null||t===void 0||t.terminate()}}o1.provider={build:()=>new o1};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DA{constructor(e){this.observer=e,this.muted=!1}next(e){this.muted||this.observer.next&&this.iu(this.observer.next,e)}error(e){this.muted||(this.observer.error?this.iu(this.observer.error,e):La("Uncaught Error in snapshot listener:",e.toString()))}su(){this.muted=!0}iu(e,t){setTimeout(()=>{this.muted||e(t)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tc="FirestoreClient";class NY{constructor(e,t,i,r,s){this.authCredentials=e,this.appCheckCredentials=t,this.asyncQueue=i,this.databaseInfo=r,this.user=fr.UNAUTHENTICATED,this.clientId=Zj.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=s,this.authCredentials.start(i,async o=>{at(tc,"Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(i,o=>(at(tc,"Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}terminate(){this.asyncQueue.enterRestrictedMode();const e=new Sa;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(t){const i=CA(t,"Failed to shutdown persistence");e.reject(i)}}),e.promise}}async function NS(n,e){n.asyncQueue.verifyOperationInProgress(),at(tc,"Initializing OfflineComponentProvider");const t=n.configuration;await e.initialize(t);let i=t.initialUser;n.setCredentialChangeListener(async r=>{i.isEqual(r)||(await zF(e.localStore,r),i=r)}),e.persistence.setDatabaseDeletedListener(()=>n.terminate()),n._offlineComponents=e}async function B2(n,e){n.asyncQueue.verifyOperationInProgress();const t=await DY(n);at(tc,"Initializing OnlineComponentProvider"),await e.initialize(t,n.configuration),n.setCredentialChangeListener(i=>k2(e.remoteStore,i)),n.setAppCheckTokenChangeListener((i,r)=>k2(e.remoteStore,r)),n._onlineComponents=e}async function DY(n){if(!n._offlineComponents)if(n._uninitializedComponentsProvider){at(tc,"Using user provided OfflineComponentProvider");try{await NS(n,n._uninitializedComponentsProvider._offline)}catch(e){const t=e;if(!function(r){return r.name==="FirebaseError"?r.code===Ee.FAILED_PRECONDITION||r.code===Ee.UNIMPLEMENTED:!(typeof DOMException<"u"&&r instanceof DOMException)||r.code===22||r.code===20||r.code===11}(t))throw t;Yd("Error using user provided cache. Falling back to memory cache: "+t),await NS(n,new A0)}}else at(tc,"Using default OfflineComponentProvider"),await NS(n,new RY(void 0));return n._offlineComponents}async function oV(n){return n._onlineComponents||(n._uninitializedComponentsProvider?(at(tc,"Using user provided OnlineComponentProvider"),await B2(n,n._uninitializedComponentsProvider._online)):(at(tc,"Using default OnlineComponentProvider"),await B2(n,new o1))),n._onlineComponents}function LY(n){return oV(n).then(e=>e.syncEngine)}async function M0(n){const e=await oV(n),t=e.eventManager;return t.onListen=vY.bind(null,e.syncEngine),t.onUnlisten=wY.bind(null,e.syncEngine),t.onFirstRemoteStoreListen=xY.bind(null,e.syncEngine),t.onLastRemoteStoreUnlisten=bY.bind(null,e.syncEngine),t}function kY(n,e,t={}){const i=new Sa;return n.asyncQueue.enqueueAndForget(async()=>function(s,o,a,l,c){const u=new DA({next:m=>{u.su(),o.enqueueAndForget(()=>MA(s,p));const g=m.docs.has(a);!g&&m.fromCache?c.reject(new lt(Ee.UNAVAILABLE,"Failed to get document because the client is offline.")):g&&m.fromCache&&l&&l.source==="server"?c.reject(new lt(Ee.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(m)},error:m=>c.reject(m)}),p=new PA(J_(a.path),u,{includeMetadataChanges:!0,Ta:!0});return AA(s,p)}(await M0(n),n.asyncQueue,e,t,i)),i.promise}function OY(n,e,t={}){const i=new Sa;return n.asyncQueue.enqueueAndForget(async()=>function(s,o,a,l,c){const u=new DA({next:m=>{u.su(),o.enqueueAndForget(()=>MA(s,p)),m.fromCache&&l.source==="server"?c.reject(new lt(Ee.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):c.resolve(m)},error:m=>c.reject(m)}),p=new PA(a,u,{includeMetadataChanges:!0,Ta:!0});return AA(s,p)}(await M0(n),n.asyncQueue,e,t,i)),i.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function aV(n){const e={};return n.timeoutSeconds!==void 0&&(e.timeoutSeconds=n.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const z2=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lV(n,e,t){if(!t)throw new lt(Ee.INVALID_ARGUMENT,`Function ${n}() cannot be called with an empty ${e}.`)}function UY(n,e,t,i){if(e===!0&&i===!0)throw new lt(Ee.INVALID_ARGUMENT,`${n} and ${t} cannot be used together.`)}function H2(n){if(!_t.isDocumentKey(n))throw new lt(Ee.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${n} has ${n.length}.`)}function G2(n){if(_t.isDocumentKey(n))throw new lt(Ee.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${n} has ${n.length}.`)}function ow(n){if(n===void 0)return"undefined";if(n===null)return"null";if(typeof n=="string")return n.length>20&&(n=`${n.substring(0,20)}...`),JSON.stringify(n);if(typeof n=="number"||typeof n=="boolean")return""+n;if(typeof n=="object"){if(n instanceof Array)return"an array";{const e=function(i){return i.constructor?i.constructor.name:null}(n);return e?`a custom ${e} object`:"an object"}}return typeof n=="function"?"a function":It()}function xs(n,e){if("_delegate"in n&&(n=n._delegate),!(n instanceof e)){if(e.name===n.constructor.name)throw new lt(Ee.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const t=ow(n);throw new lt(Ee.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${t}`)}}return n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cV="firestore.googleapis.com",W2=!0;class q2{constructor(e){var t,i;if(e.host===void 0){if(e.ssl!==void 0)throw new lt(Ee.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=cV,this.ssl=W2}else this.host=e.host,this.ssl=(t=e.ssl)!==null&&t!==void 0?t:W2;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=VF;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<pK)throw new lt(Ee.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}UY("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=aV((i=e.experimentalLongPollingOptions)!==null&&i!==void 0?i:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new lt(Ee.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new lt(Ee.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new lt(Ee.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(i,r){return i.timeoutSeconds===r.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class aw{constructor(e,t,i,r){this._authCredentials=e,this._appCheckCredentials=t,this._databaseId=i,this._app=r,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new q2({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new lt(Ee.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(e){if(this._settingsFrozen)throw new lt(Ee.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new q2(e),this._emulatorOptions=e.emulatorOptions||{},e.credentials!==void 0&&(this._authCredentials=function(i){if(!i)return new G$;switch(i.type){case"firstParty":return new X$(i.sessionIndex||"0",i.iamToken||null,i.authTokenFactory||null);case"provider":return i.client;default:throw new lt(Ee.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(t){const i=z2.get(t);i&&(at("ComponentProvider","Removing Datastore"),z2.delete(t),i.terminate())}(this),Promise.resolve()}}function jY(n,e,t,i={}){var r;const s=(n=xs(n,aw))._getSettings(),o=Object.assign(Object.assign({},s),{emulatorOptions:n._getEmulatorOptions()}),a=`${e}:${t}`;s.host!==cV&&s.host!==a&&Yd("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const l=Object.assign(Object.assign({},s),{host:a,ssl:!1,emulatorOptions:i});if(!Uu(l,o)&&(n._setSettings(l),i.mockUserToken)){let c,u;if(typeof i.mockUserToken=="string")c=i.mockUserToken,u=fr.MOCK_USER;else{c=s8(i.mockUserToken,(r=n._app)===null||r===void 0?void 0:r.options.projectId);const p=i.mockUserToken.sub||i.mockUserToken.user_id;if(!p)throw new lt(Ee.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");u=new fr(p)}n._authCredentials=new W$(new Qj(c,u))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wa{constructor(e,t,i){this.converter=t,this._query=i,this.type="query",this.firestore=e}withConverter(e){return new Wa(this.firestore,e,this._query)}}class xr{constructor(e,t,i){this.converter=t,this._key=i,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ql(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new xr(this.firestore,e,this._key)}}class ql extends Wa{constructor(e,t,i){super(e,t,J_(i)),this._path=i,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new xr(this.firestore,null,new _t(e))}withConverter(e){return new ql(this.firestore,e,this._path)}}function Su(n,e,...t){if(n=Fi(n),lV("collection","path",e),n instanceof aw){const i=Un.fromString(e,...t);return G2(i),new ql(n,null,i)}{if(!(n instanceof xr||n instanceof ql))throw new lt(Ee.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(Un.fromString(e,...t));return G2(i),new ql(n.firestore,null,i)}}function Xs(n,e,...t){if(n=Fi(n),arguments.length===1&&(e=Zj.newId()),lV("doc","path",e),n instanceof aw){const i=Un.fromString(e,...t);return H2(i),new xr(n,null,new _t(i))}{if(!(n instanceof xr||n instanceof ql))throw new lt(Ee.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const i=n._path.child(Un.fromString(e,...t));return H2(i),new xr(n.firestore,n instanceof ql?n.converter:null,new _t(i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $2="AsyncQueue";class X2{constructor(e=Promise.resolve()){this.Vu=[],this.mu=!1,this.fu=[],this.gu=null,this.pu=!1,this.yu=!1,this.wu=[],this.a_=new GF(this,"async_queue_retry"),this.bu=()=>{const i=RS();i&&at($2,"Visibility state changed to "+i.visibilityState),this.a_.t_()},this.Su=e;const t=RS();t&&typeof t.addEventListener=="function"&&t.addEventListener("visibilitychange",this.bu)}get isShuttingDown(){return this.mu}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.Du(),this.vu(e)}enterRestrictedMode(e){if(!this.mu){this.mu=!0,this.yu=e||!1;const t=RS();t&&typeof t.removeEventListener=="function"&&t.removeEventListener("visibilitychange",this.bu)}}enqueue(e){if(this.Du(),this.mu)return new Promise(()=>{});const t=new Sa;return this.vu(()=>this.mu&&this.yu?Promise.resolve():(e().then(t.resolve,t.reject),t.promise)).then(()=>t.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.Vu.push(e),this.Cu()))}async Cu(){if(this.Vu.length!==0){try{await this.Vu[0](),this.Vu.shift(),this.a_.reset()}catch(e){if(!xf(e))throw e;at($2,"Operation failed with retryable error: "+e)}this.Vu.length>0&&this.a_.Xo(()=>this.Cu())}}vu(e){const t=this.Su.then(()=>(this.pu=!0,e().catch(i=>{this.gu=i,this.pu=!1;const r=function(o){let a=o.message||"";return o.stack&&(a=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),a}(i);throw La("INTERNAL UNHANDLED ERROR: ",r),i}).then(i=>(this.pu=!1,i))));return this.Su=t,t}enqueueAfterDelay(e,t,i){this.Du(),this.wu.indexOf(e)>-1&&(t=0);const r=EA.createAndSchedule(this,e,t,i,s=>this.Fu(s));return this.fu.push(r),r}Du(){this.gu&&It()}verifyOperationInProgress(){}async Mu(){let e;do e=this.Su,await e;while(e!==this.Su)}xu(e){for(const t of this.fu)if(t.timerId===e)return!0;return!1}Ou(e){return this.Mu().then(()=>{this.fu.sort((t,i)=>t.targetTimeMs-i.targetTimeMs);for(const t of this.fu)if(t.skipDelay(),e!=="all"&&t.timerId===e)break;return this.Mu()})}Nu(e){this.wu.push(e)}Fu(e){const t=this.fu.indexOf(e);this.fu.splice(t,1)}}function K2(n){return function(t,i){if(typeof t!="object"||t===null)return!1;const r=t;for(const s of i)if(s in r&&typeof r[s]=="function")return!0;return!1}(n,["next","error","complete"])}class nc extends aw{constructor(e,t,i,r){super(e,t,i,r),this.type="firestore",this._queue=new X2,this._persistenceKey=r?.name||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const e=this._firestoreClient.terminate();this._queue=new X2(e),this._firestoreClient=void 0,await e}}}function ic(n,e){const t=typeof n=="object"?n:lj(),i=typeof n=="string"?n:x0,r=JC(t,"firestore").getImmediate({identifier:i});if(!r._initialized){const s=i8("firestore");s&&jY(r,...s)}return r}function lw(n){if(n._terminated)throw new lt(Ee.FAILED_PRECONDITION,"The client has already been terminated.");return n._firestoreClient||FY(n),n._firestoreClient}function FY(n){var e,t,i;const r=n._freezeSettings(),s=function(a,l,c,u){return new lX(a,l,c,u.host,u.ssl,u.experimentalForceLongPolling,u.experimentalAutoDetectLongPolling,aV(u.experimentalLongPollingOptions),u.useFetchStreams)}(n._databaseId,((e=n._app)===null||e===void 0?void 0:e.options.appId)||"",n._persistenceKey,r);n._componentsProvider||!((t=r.localCache)===null||t===void 0)&&t._offlineComponentProvider&&(!((i=r.localCache)===null||i===void 0)&&i._onlineComponentProvider)&&(n._componentsProvider={_offline:r.localCache._offlineComponentProvider,_online:r.localCache._onlineComponentProvider}),n._firestoreClient=new NY(n._authCredentials,n._appCheckCredentials,n._queue,s,n._componentsProvider&&function(a){const l=a?._online.build();return{_offline:a?._offline.build(l),_online:l}}(n._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nf{constructor(e){this._byteString=e}static fromBase64String(e){try{return new nf(Qi.fromBase64String(e))}catch(t){throw new lt(Ee.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+t)}}static fromUint8Array(e){return new nf(Qi.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cw{constructor(...e){for(let t=0;t<e.length;++t)if(e[t].length===0)throw new lt(Ee.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Xi(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uw{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LA{constructor(e,t){if(!isFinite(e)||e<-90||e>90)throw new lt(Ee.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(t)||t<-180||t>180)throw new lt(Ee.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+t);this._lat=e,this._long=t}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return cn(this._lat,e._lat)||cn(this._long,e._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kA{constructor(e){this._values=(e||[]).map(t=>t)}toArray(){return this._values.map(e=>e)}isEqual(e){return function(i,r){if(i.length!==r.length)return!1;for(let s=0;s<i.length;++s)if(i[s]!==r[s])return!1;return!0}(this._values,e._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VY=/^__.*__$/;class BY{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return this.fieldMask!==null?new mc(e,this.data,this.fieldMask,t,this.fieldTransforms):new Ng(e,this.data,t,this.fieldTransforms)}}class uV{constructor(e,t,i){this.data=e,this.fieldMask=t,this.fieldTransforms=i}toMutation(e,t){return new mc(e,this.data,this.fieldMask,t,this.fieldTransforms)}}function hV(n){switch(n){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw It()}}class OA{constructor(e,t,i,r,s,o){this.settings=e,this.databaseId=t,this.serializer=i,this.ignoreUndefinedProperties=r,s===void 0&&this.Bu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get Lu(){return this.settings.Lu}ku(e){return new OA(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}qu(e){var t;const i=(t=this.path)===null||t===void 0?void 0:t.child(e),r=this.ku({path:i,Qu:!1});return r.$u(e),r}Ku(e){var t;const i=(t=this.path)===null||t===void 0?void 0:t.child(e),r=this.ku({path:i,Qu:!1});return r.Bu(),r}Uu(e){return this.ku({path:void 0,Qu:!0})}Wu(e){return I0(e,this.settings.methodName,this.settings.Gu||!1,this.path,this.settings.zu)}contains(e){return this.fieldMask.find(t=>e.isPrefixOf(t))!==void 0||this.fieldTransforms.find(t=>e.isPrefixOf(t.field))!==void 0}Bu(){if(this.path)for(let e=0;e<this.path.length;e++)this.$u(this.path.get(e))}$u(e){if(e.length===0)throw this.Wu("Document fields must not be empty");if(hV(this.Lu)&&VY.test(e))throw this.Wu('Document fields cannot begin and end with "__"')}}class zY{constructor(e,t,i){this.databaseId=e,this.ignoreUndefinedProperties=t,this.serializer=i||iw(e)}ju(e,t,i,r=!1){return new OA({Lu:e,methodName:t,zu:i,path:Xi.emptyPath(),Qu:!1,Gu:r},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function hw(n){const e=n._freezeSettings(),t=iw(n._databaseId);return new zY(n._databaseId,!!e.ignoreUndefinedProperties,t)}function dV(n,e,t,i,r,s={}){const o=n.ju(s.merge||s.mergeFields?2:0,e,t,r);jA("Data must be an object, but it was:",o,i);const a=fV(i,o);let l,c;if(s.merge)l=new ys(o.fieldMask),c=o.fieldTransforms;else if(s.mergeFields){const u=[];for(const p of s.mergeFields){const m=a1(e,p,t);if(!o.contains(m))throw new lt(Ee.INVALID_ARGUMENT,`Field '${m}' is specified in your field mask but missing from your input data.`);mV(u,m)||u.push(m)}l=new ys(u),c=o.fieldTransforms.filter(p=>l.covers(p.field))}else l=null,c=o.fieldTransforms;return new BY(new Kr(a),l,c)}class dw extends uw{_toFieldTransform(e){if(e.Lu!==2)throw e.Lu===1?e.Wu(`${this._methodName}() can only appear at the top level of your update data`):e.Wu(`${this._methodName}() cannot be used with set() unless you pass {merge:true}`);return e.fieldMask.push(e.path),null}isEqual(e){return e instanceof dw}}class UA extends uw{_toFieldTransform(e){return new LX(e.path,new qm)}isEqual(e){return e instanceof UA}}function HY(n,e,t,i){const r=n.ju(1,e,t);jA("Data must be an object, but it was:",r,i);const s=[],o=Kr.empty();pc(i,(l,c)=>{const u=FA(e,l,t);c=Fi(c);const p=r.Ku(u);if(c instanceof dw)s.push(u);else{const m=Og(c,p);m!=null&&(s.push(u),o.set(u,m))}});const a=new ys(s);return new uV(o,a,r.fieldTransforms)}function GY(n,e,t,i,r,s){const o=n.ju(1,e,t),a=[a1(e,i,t)],l=[r];if(s.length%2!=0)throw new lt(Ee.INVALID_ARGUMENT,`Function ${e}() needs to be called with an even number of arguments that alternate between field names and values.`);for(let m=0;m<s.length;m+=2)a.push(a1(e,s[m])),l.push(s[m+1]);const c=[],u=Kr.empty();for(let m=a.length-1;m>=0;--m)if(!mV(c,a[m])){const g=a[m];let x=l[m];x=Fi(x);const b=o.Ku(g);if(x instanceof dw)c.push(g);else{const w=Og(x,b);w!=null&&(c.push(g),u.set(g,w))}}const p=new ys(c);return new uV(u,p,o.fieldTransforms)}function WY(n,e,t,i=!1){return Og(t,n.ju(i?4:3,e))}function Og(n,e){if(pV(n=Fi(n)))return jA("Unsupported field value:",e,n),fV(n,e);if(n instanceof uw)return function(i,r){if(!hV(r.Lu))throw r.Wu(`${i._methodName}() can only be used with update() and set()`);if(!r.path)throw r.Wu(`${i._methodName}() is not currently supported inside arrays`);const s=i._toFieldTransform(r);s&&r.fieldTransforms.push(s)}(n,e),null;if(n===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),n instanceof Array){if(e.settings.Qu&&e.Lu!==4)throw e.Wu("Nested arrays are not supported");return function(i,r){const s=[];let o=0;for(const a of i){let l=Og(a,r.Uu(o));l==null&&(l={nullValue:"NULL_VALUE"}),s.push(l),o++}return{arrayValue:{values:s}}}(n,e)}return function(i,r){if((i=Fi(i))===null)return{nullValue:"NULL_VALUE"};if(typeof i=="number")return RX(r.serializer,i);if(typeof i=="boolean")return{booleanValue:i};if(typeof i=="string")return{stringValue:i};if(i instanceof Date){const s=bi.fromDate(i);return{timestampValue:T0(r.serializer,s)}}if(i instanceof bi){const s=new bi(i.seconds,1e3*Math.floor(i.nanoseconds/1e3));return{timestampValue:T0(r.serializer,s)}}if(i instanceof LA)return{geoPointValue:{latitude:i.latitude,longitude:i.longitude}};if(i instanceof nf)return{bytesValue:DF(r.serializer,i._byteString)};if(i instanceof xr){const s=r.databaseId,o=i.firestore._databaseId;if(!o.isEqual(s))throw r.Wu(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:gA(i.firestore._databaseId||r.databaseId,i._key.path)}}if(i instanceof kA)return function(o,a){return{mapValue:{fields:{[aF]:{stringValue:lF},[_0]:{arrayValue:{values:o.toArray().map(c=>{if(typeof c!="number")throw a.Wu("VectorValues must only contain numeric values.");return fA(a.serializer,c)})}}}}}}(i,r);throw r.Wu(`Unsupported field value: ${ow(i)}`)}(n,e)}function fV(n,e){const t={};return tF(n)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):pc(n,(i,r)=>{const s=Og(r,e.qu(i));s!=null&&(t[i]=s)}),{mapValue:{fields:t}}}function pV(n){return!(typeof n!="object"||n===null||n instanceof Array||n instanceof Date||n instanceof bi||n instanceof LA||n instanceof nf||n instanceof xr||n instanceof uw||n instanceof kA)}function jA(n,e,t){if(!pV(t)||!function(r){return typeof r=="object"&&r!==null&&(Object.getPrototypeOf(r)===Object.prototype||Object.getPrototypeOf(r)===null)}(t)){const i=ow(t);throw i==="an object"?e.Wu(n+" a custom object"):e.Wu(n+" "+i)}}function a1(n,e,t){if((e=Fi(e))instanceof cw)return e._internalPath;if(typeof e=="string")return FA(n,e);throw I0("Field path arguments must be of type string or ",n,!1,void 0,t)}const qY=new RegExp("[~\\*/\\[\\]]");function FA(n,e,t){if(e.search(qY)>=0)throw I0(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,n,!1,void 0,t);try{return new cw(...e.split("."))._internalPath}catch{throw I0(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,n,!1,void 0,t)}}function I0(n,e,t,i,r){const s=i&&!i.isEmpty(),o=r!==void 0;let a=`Function ${e}() called with invalid data`;t&&(a+=" (via `toFirestore()`)"),a+=". ";let l="";return(s||o)&&(l+=" (found",s&&(l+=` in field ${i}`),o&&(l+=` in document ${r}`),l+=")"),new lt(Ee.INVALID_ARGUMENT,a+n+l)}function mV(n,e){return n.some(t=>t.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gV{constructor(e,t,i,r,s){this._firestore=e,this._userDataWriter=t,this._key=i,this._document=r,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new xr(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new $Y(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const t=this._document.data.field(fw("DocumentSnapshot.get",e));if(t!==null)return this._userDataWriter.convertValue(t)}}}class $Y extends gV{data(){return super.data()}}function fw(n,e){return typeof e=="string"?FA(n,e):e instanceof cw?e._internalPath:e._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yV(n){if(n.limitType==="L"&&n.explicitOrderBy.length===0)throw new lt(Ee.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class VA{}class BA extends VA{}function l1(n,e,...t){let i=[];e instanceof VA&&i.push(e),i=i.concat(t),function(s){const o=s.filter(l=>l instanceof zA).length,a=s.filter(l=>l instanceof pw).length;if(o>1||o>0&&a>0)throw new lt(Ee.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(i);for(const r of i)n=r._apply(n);return n}class pw extends BA{constructor(e,t,i){super(),this._field=e,this._op=t,this._value=i,this.type="where"}static _create(e,t,i){return new pw(e,t,i)}_apply(e){const t=this._parse(e);return xV(e._query,t),new Wa(e.firestore,e.converter,JE(e._query,t))}_parse(e){const t=hw(e.firestore);return function(s,o,a,l,c,u,p){let m;if(c.isKeyField()){if(u==="array-contains"||u==="array-contains-any")throw new lt(Ee.INVALID_ARGUMENT,`Invalid Query. You can't perform '${u}' queries on documentId().`);if(u==="in"||u==="not-in"){Q2(p,u);const x=[];for(const b of p)x.push(J2(l,s,b));m={arrayValue:{values:x}}}else m=J2(l,s,p)}else u!=="in"&&u!=="not-in"&&u!=="array-contains-any"||Q2(p,u),m=WY(a,o,p,u==="in"||u==="not-in");return xi.create(c,u,m)}(e._query,"where",t,e.firestore._databaseId,this._field,this._op,this._value)}}function Y2(n,e,t){const i=e,r=fw("where",n);return pw._create(r,i,t)}class zA extends VA{constructor(e,t){super(),this.type=e,this._queryConstraints=t}static _create(e,t){return new zA(e,t)}_parse(e){const t=this._queryConstraints.map(i=>i._parse(e)).filter(i=>i.getFilters().length>0);return t.length===1?t[0]:vo.create(t,this._getOperator())}_apply(e){const t=this._parse(e);return t.getFilters().length===0?e:(function(r,s){let o=r;const a=s.getFlattenedFilters();for(const l of a)xV(o,l),o=JE(o,l)}(e._query,t),new Wa(e.firestore,e.converter,JE(e._query,t)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}class HA extends BA{constructor(e,t){super(),this._field=e,this._direction=t,this.type="orderBy"}static _create(e,t){return new HA(e,t)}_apply(e){const t=function(r,s,o){if(r.startAt!==null)throw new lt(Ee.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(r.endAt!==null)throw new lt(Ee.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");return new Wm(s,o)}(e._query,this._field,this._direction);return new Wa(e.firestore,e.converter,function(r,s){const o=r.explicitOrderBy.concat([s]);return new _f(r.path,r.collectionGroup,o,r.filters.slice(),r.limit,r.limitType,r.startAt,r.endAt)}(e._query,t))}}function vV(n,e="asc"){const t=e,i=fw("orderBy",n);return HA._create(i,t)}class GA extends BA{constructor(e,t,i){super(),this.type=e,this._limit=t,this._limitType=i}static _create(e,t,i){return new GA(e,t,i)}_apply(e){return new Wa(e.firestore,e.converter,b0(e._query,this._limit,this._limitType))}}function XY(n){return GA._create("limit",n,"F")}function J2(n,e,t){if(typeof(t=Fi(t))=="string"){if(t==="")throw new lt(Ee.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!gF(e)&&t.indexOf("/")!==-1)throw new lt(Ee.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${t}' contains a '/' character.`);const i=e.path.child(Un.fromString(t));if(!_t.isDocumentKey(i))throw new lt(Ee.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${i}' is not because it has an odd number of segments (${i.length}).`);return h2(n,new _t(i))}if(t instanceof xr)return h2(n,t._key);throw new lt(Ee.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${ow(t)}.`)}function Q2(n,e){if(!Array.isArray(n)||n.length===0)throw new lt(Ee.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${e.toString()}' filters.`)}function xV(n,e){const t=function(r,s){for(const o of r)for(const a of o.getFlattenedFilters())if(s.indexOf(a.op)>=0)return a.op;return null}(n.filters,function(r){switch(r){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(t!==null)throw t===e.op?new lt(Ee.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${e.op.toString()}' filter.`):new lt(Ee.INVALID_ARGUMENT,`Invalid query. You cannot use '${e.op.toString()}' filters with '${t.toString()}' filters.`)}class KY{convertValue(e,t="none"){switch(Zl(e)){case 0:return null;case 1:return e.booleanValue;case 2:return ai(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,t);case 5:return e.stringValue;case 6:return this.convertBytes(Ql(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,t);case 11:return this.convertObject(e.mapValue,t);case 10:return this.convertVectorValue(e.mapValue);default:throw It()}}convertObject(e,t){return this.convertObjectMap(e.fields,t)}convertObjectMap(e,t="none"){const i={};return pc(e,(r,s)=>{i[r]=this.convertValue(s,t)}),i}convertVectorValue(e){var t,i,r;const s=(r=(i=(t=e.fields)===null||t===void 0?void 0:t[_0].arrayValue)===null||i===void 0?void 0:i.values)===null||r===void 0?void 0:r.map(o=>ai(o.doubleValue));return new kA(s)}convertGeoPoint(e){return new LA(ai(e.latitude),ai(e.longitude))}convertArray(e,t){return(e.values||[]).map(i=>this.convertValue(i,t))}convertServerTimestamp(e,t){switch(t){case"previous":const i=Y_(e);return i==null?null:this.convertValue(i,t);case"estimate":return this.convertTimestamp(zm(e));default:return null}}convertTimestamp(e){const t=Jl(e);return new bi(t.seconds,t.nanos)}convertDocumentKey(e,t){const i=Un.fromString(e);En(FF(i));const r=new Hm(i.get(1),i.get(3)),s=new _t(i.popFirst(5));return r.isEqual(t)||La(`Document ${s} contains a document reference within a different database (${r.projectId}/${r.database}) which is not supported. It will be treated as a reference in the current database (${t.projectId}/${t.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _V(n,e,t){let i;return i=n?n.toFirestore(e):e,i}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kp{constructor(e,t){this.hasPendingWrites=e,this.fromCache=t}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class wV extends gV{constructor(e,t,i,r,s,o){super(e,t,i,r,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const t=new Px(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(t,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,t={}){if(this._document){const i=this._document.data.field(fw("DocumentSnapshot.get",e));if(i!==null)return this._userDataWriter.convertValue(i,t.serverTimestamps)}}}class Px extends wV{data(e={}){return super.data(e)}}class bV{constructor(e,t,i,r){this._firestore=e,this._userDataWriter=t,this._snapshot=r,this.metadata=new kp(r.hasPendingWrites,r.fromCache),this.query=i}get docs(){const e=[];return this.forEach(t=>e.push(t)),e}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(e,t){this._snapshot.docs.forEach(i=>{e.call(t,new Px(this._firestore,this._userDataWriter,i.key,i,new kp(this._snapshot.mutatedKeys.has(i.key),this._snapshot.fromCache),this.query.converter))})}docChanges(e={}){const t=!!e.includeMetadataChanges;if(t&&this._snapshot.excludesMetadataChanges)throw new lt(Ee.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===t||(this._cachedChanges=function(r,s){if(r._snapshot.oldDocs.isEmpty()){let o=0;return r._snapshot.docChanges.map(a=>{const l=new Px(r._firestore,r._userDataWriter,a.doc.key,a.doc,new kp(r._snapshot.mutatedKeys.has(a.doc.key),r._snapshot.fromCache),r.query.converter);return a.doc,{type:"added",doc:l,oldIndex:-1,newIndex:o++}})}{let o=r._snapshot.oldDocs;return r._snapshot.docChanges.filter(a=>s||a.type!==3).map(a=>{const l=new Px(r._firestore,r._userDataWriter,a.doc.key,a.doc,new kp(r._snapshot.mutatedKeys.has(a.doc.key),r._snapshot.fromCache),r.query.converter);let c=-1,u=-1;return a.type!==0&&(c=o.indexOf(a.doc.key),o=o.delete(a.doc.key)),a.type!==1&&(o=o.add(a.doc),u=o.indexOf(a.doc.key)),{type:YY(a.type),doc:l,oldIndex:c,newIndex:u}})}}(this,t),this._cachedChangesIncludeMetadataChanges=t),this._cachedChanges}}function YY(n){switch(n){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return It()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function bf(n){n=xs(n,xr);const e=xs(n.firestore,nc);return kY(lw(e),n._key).then(t=>EV(e,n,t))}class WA extends KY{constructor(e){super(),this.firestore=e}convertBytes(e){return new nf(e)}convertReference(e){const t=this.convertDocumentKey(e,this.firestore._databaseId);return new xr(this.firestore,null,t)}}function SV(n){n=xs(n,Wa);const e=xs(n.firestore,nc),t=lw(e),i=new WA(e);return yV(n._query),OY(t,n._query).then(r=>new bV(e,i,n,r))}function mw(n,e,t){n=xs(n,xr);const i=xs(n.firestore,nc),r=_V(n.converter,e);return qA(i,[dV(hw(i),"setDoc",n._key,r,n.converter!==null,t).toMutation(n._key,mo.none())])}function JY(n,e,t,...i){n=xs(n,xr);const r=xs(n.firestore,nc),s=hw(r);let o;return o=typeof(e=Fi(e))=="string"||e instanceof cw?GY(s,"updateDoc",n._key,e,t,i):HY(s,"updateDoc",n._key,e),qA(r,[o.toMutation(n._key,mo.exists(!0))])}function TV(n,e){const t=xs(n.firestore,nc),i=Xs(n),r=_V(n.converter,e);return qA(t,[dV(hw(n.firestore),"addDoc",i._key,r,n.converter!==null,{}).toMutation(i._key,mo.exists(!1))]).then(()=>i)}function c1(n,...e){var t,i,r;n=Fi(n);let s={includeMetadataChanges:!1,source:"default"},o=0;typeof e[o]!="object"||K2(e[o])||(s=e[o],o++);const a={includeMetadataChanges:s.includeMetadataChanges,source:s.source};if(K2(e[o])){const p=e[o];e[o]=(t=p.next)===null||t===void 0?void 0:t.bind(p),e[o+1]=(i=p.error)===null||i===void 0?void 0:i.bind(p),e[o+2]=(r=p.complete)===null||r===void 0?void 0:r.bind(p)}let l,c,u;if(n instanceof xr)c=xs(n.firestore,nc),u=J_(n._key.path),l={next:p=>{e[o]&&e[o](EV(c,n,p))},error:e[o+1],complete:e[o+2]};else{const p=xs(n,Wa);c=xs(p.firestore,nc),u=p._query;const m=new WA(c);l={next:g=>{e[o]&&e[o](new bV(c,m,p,g))},error:e[o+1],complete:e[o+2]},yV(n._query)}return function(m,g,x,b){const w=new DA(b),v=new PA(g,w,x);return m.asyncQueue.enqueueAndForget(async()=>AA(await M0(m),v)),()=>{w.su(),m.asyncQueue.enqueueAndForget(async()=>MA(await M0(m),v))}}(lw(c),u,a,l)}function qA(n,e){return function(i,r){const s=new Sa;return i.asyncQueue.enqueueAndForget(async()=>SY(await LY(i),r,s)),s.promise}(lw(n),e)}function EV(n,e,t){const i=t.docs.get(e._key),r=new WA(n);return new wV(n,r,e._key,i,new kp(t.hasPendingWrites,t.fromCache),e.converter)}function CV(){return new UA("serverTimestamp")}(function(e,t=!0){(function(r){yf=r})(mf),Kd(new ju("firestore",(i,{instanceIdentifier:r,options:s})=>{const o=i.getProvider("app").getImmediate(),a=new nc(new q$(i.getProvider("auth-internal")),new K$(o,i.getProvider("app-check-internal")),function(c,u){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new lt(Ee.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Hm(c.options.projectId,u)}(o,r),o);return s=Object.assign({useFetchStreams:t},s),a._setSettings(s),a},"PUBLIC").setMultipleInstances(!0)),Gl(e2,t2,e),Gl(e2,t2,"esm2017")})();const AV=async n=>{const e=Kl(),t=ic();Pg(e,async i=>{if(i)try{const r=Xs(t,"users",i.uid),s=await bf(r);if(s.exists()){const a=s.data().role;n(a)}else console.error("No user document found in Firestore."),n(null)}catch(r){console.error("Error fetching user role:",r),n(null)}else n(null)})};/**
 * @license
 * Copyright 2010-2025 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const Ug="174",QY={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},ZY={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},MV=0,u1=1,IV=2,eJ=3,PV=0,gw=1,nm=2,oo=3,Oa=0,Lr=1,uo=2,Ta=0,Tu=1,h1=2,d1=3,f1=4,RV=5,El=100,NV=101,DV=102,LV=103,kV=104,OV=200,UV=201,jV=202,FV=203,P0=204,R0=205,VV=206,BV=207,zV=208,HV=209,GV=210,WV=211,qV=212,$V=213,XV=214,N0=0,D0=1,L0=2,Hu=3,k0=4,O0=5,U0=6,j0=7,jg=0,KV=1,YV=2,zo=0,JV=1,QV=2,ZV=3,$A=4,e4=5,t4=6,n4=7,p1="attached",i4="detached",yw=300,Ua=301,rc=302,Km=303,Ym=304,Sf=306,Jm=1e3,Gs=1001,Qm=1002,Yi=1003,XA=1004,tJ=1004,vd=1005,nJ=1005,Mi=1006,im=1007,iJ=1007,Do=1008,rJ=1008,xo=1009,KA=1010,YA=1011,rf=1012,vw=1013,ja=1014,Qr=1015,Tf=1016,xw=1017,_w=1018,Gu=1020,JA=35902,QA=1021,ZA=1022,gr=1023,eM=1024,tM=1025,Eu=1026,Wu=1027,ww=1028,Fg=1029,nM=1030,bw=1031,sJ=1032,Sw=1033,rm=33776,sm=33777,om=33778,am=33779,F0=35840,V0=35841,B0=35842,z0=35843,H0=36196,G0=37492,W0=37496,q0=37808,$0=37809,X0=37810,K0=37811,Y0=37812,J0=37813,Q0=37814,Z0=37815,e_=37816,t_=37817,n_=37818,i_=37819,r_=37820,s_=37821,lm=36492,o_=36494,a_=36495,iM=36283,l_=36284,c_=36285,u_=36286,r4=2200,s4=2201,o4=2202,Zm=2300,h_=2301,Rx=2302,yu=2400,vu=2401,eg=2402,Tw=2500,rM=2501,oJ=0,aJ=1,lJ=2,a4=3200,l4=3201,cJ=3202,uJ=3203,gc=0,c4=1,fa="",qr="srgb",qu="srgb-linear",tg="linear",An="srgb",hJ=0,au=7680,dJ=7681,fJ=7682,pJ=7683,mJ=34055,gJ=34056,yJ=5386,vJ=512,xJ=513,_J=514,wJ=515,bJ=516,SJ=517,TJ=518,m1=519,u4=512,h4=513,d4=514,sM=515,f4=516,p4=517,m4=518,g4=519,ng=35044,Cu=35048,EJ=35040,CJ=35045,AJ=35049,MJ=35041,IJ=35046,PJ=35050,RJ=35042,NJ="100",g1="300 es",ho=2e3,ig=2001,DJ={COMPUTE:"compute",RENDER:"render"};class Ko{addEventListener(e,t){this._listeners===void 0&&(this._listeners={});const i=this._listeners;i[e]===void 0&&(i[e]=[]),i[e].indexOf(t)===-1&&i[e].push(t)}hasEventListener(e,t){const i=this._listeners;return i===void 0?!1:i[e]!==void 0&&i[e].indexOf(t)!==-1}removeEventListener(e,t){const i=this._listeners;if(i===void 0)return;const r=i[e];if(r!==void 0){const s=r.indexOf(t);s!==-1&&r.splice(s,1)}}dispatchEvent(e){const t=this._listeners;if(t===void 0)return;const i=t[e.type];if(i!==void 0){e.target=this;const r=i.slice(0);for(let s=0,o=r.length;s<o;s++)r[s].call(this,e);e.target=null}}}const cr=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let Z2=1234567;const Au=Math.PI/180,sf=180/Math.PI;function _s(){const n=Math.random()*4294967295|0,e=Math.random()*4294967295|0,t=Math.random()*4294967295|0,i=Math.random()*4294967295|0;return(cr[n&255]+cr[n>>8&255]+cr[n>>16&255]+cr[n>>24&255]+"-"+cr[e&255]+cr[e>>8&255]+"-"+cr[e>>16&15|64]+cr[e>>24&255]+"-"+cr[t&63|128]+cr[t>>8&255]+"-"+cr[t>>16&255]+cr[t>>24&255]+cr[i&255]+cr[i>>8&255]+cr[i>>16&255]+cr[i>>24&255]).toLowerCase()}function Lt(n,e,t){return Math.max(e,Math.min(t,n))}function oM(n,e){return(n%e+e)%e}function LJ(n,e,t,i,r){return i+(n-e)*(r-i)/(t-e)}function kJ(n,e,t){return n!==e?(t-n)/(e-n):0}function cm(n,e,t){return(1-t)*n+t*e}function OJ(n,e,t,i){return cm(n,e,1-Math.exp(-t*i))}function UJ(n,e=1){return e-Math.abs(oM(n,e*2)-e)}function jJ(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e),n*n*(3-2*n))}function FJ(n,e,t){return n<=e?0:n>=t?1:(n=(n-e)/(t-e),n*n*n*(n*(n*6-15)+10))}function VJ(n,e){return n+Math.floor(Math.random()*(e-n+1))}function BJ(n,e){return n+Math.random()*(e-n)}function zJ(n){return n*(.5-Math.random())}function HJ(n){n!==void 0&&(Z2=n);let e=Z2+=1831565813;return e=Math.imul(e^e>>>15,e|1),e^=e+Math.imul(e^e>>>7,e|61),((e^e>>>14)>>>0)/4294967296}function GJ(n){return n*Au}function WJ(n){return n*sf}function qJ(n){return(n&n-1)===0&&n!==0}function $J(n){return Math.pow(2,Math.ceil(Math.log(n)/Math.LN2))}function XJ(n){return Math.pow(2,Math.floor(Math.log(n)/Math.LN2))}function KJ(n,e,t,i,r){const s=Math.cos,o=Math.sin,a=s(t/2),l=o(t/2),c=s((e+i)/2),u=o((e+i)/2),p=s((e-i)/2),m=o((e-i)/2),g=s((i-e)/2),x=o((i-e)/2);switch(r){case"XYX":n.set(a*u,l*p,l*m,a*c);break;case"YZY":n.set(l*m,a*u,l*p,a*c);break;case"ZXZ":n.set(l*p,l*m,a*u,a*c);break;case"XZX":n.set(a*u,l*x,l*g,a*c);break;case"YXY":n.set(l*g,a*u,l*x,a*c);break;case"ZYZ":n.set(l*x,l*g,a*u,a*c);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+r)}}function Nr(n,e){switch(e.constructor){case Float32Array:return n;case Uint32Array:return n/4294967295;case Uint16Array:return n/65535;case Uint8Array:return n/255;case Int32Array:return Math.max(n/2147483647,-1);case Int16Array:return Math.max(n/32767,-1);case Int8Array:return Math.max(n/127,-1);default:throw new Error("Invalid component type.")}}function Ht(n,e){switch(e.constructor){case Float32Array:return n;case Uint32Array:return Math.round(n*4294967295);case Uint16Array:return Math.round(n*65535);case Uint8Array:return Math.round(n*255);case Int32Array:return Math.round(n*2147483647);case Int16Array:return Math.round(n*32767);case Int8Array:return Math.round(n*127);default:throw new Error("Invalid component type.")}}const YJ={DEG2RAD:Au,RAD2DEG:sf,generateUUID:_s,clamp:Lt,euclideanModulo:oM,mapLinear:LJ,inverseLerp:kJ,lerp:cm,damp:OJ,pingpong:UJ,smoothstep:jJ,smootherstep:FJ,randInt:VJ,randFloat:BJ,randFloatSpread:zJ,seededRandom:HJ,degToRad:GJ,radToDeg:WJ,isPowerOfTwo:qJ,ceilPowerOfTwo:$J,floorPowerOfTwo:XJ,setQuaternionFromProperEuler:KJ,normalize:Ht,denormalize:Nr};class Ie{constructor(e=0,t=0){Ie.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,i=this.y,r=e.elements;return this.x=r[0]*t+r[3]*i+r[6],this.y=r[1]*t+r[4]*i+r[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Lt(this.x,e.x,t.x),this.y=Lt(this.y,e.y,t.y),this}clampScalar(e,t){return this.x=Lt(this.x,e,t),this.y=Lt(this.y,e,t),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Lt(i,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const i=this.dot(e)/t;return Math.acos(Lt(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,i=this.y-e.y;return t*t+i*i}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const i=Math.cos(t),r=Math.sin(t),s=this.x-e.x,o=this.y-e.y;return this.x=s*i-o*r+e.x,this.y=s*r+o*i+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class Bt{constructor(e,t,i,r,s,o,a,l,c){Bt.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],e!==void 0&&this.set(e,t,i,r,s,o,a,l,c)}set(e,t,i,r,s,o,a,l,c){const u=this.elements;return u[0]=e,u[1]=r,u[2]=a,u[3]=t,u[4]=s,u[5]=l,u[6]=i,u[7]=o,u[8]=c,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],this}extractBasis(e,t,i){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),i.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const i=e.elements,r=t.elements,s=this.elements,o=i[0],a=i[3],l=i[6],c=i[1],u=i[4],p=i[7],m=i[2],g=i[5],x=i[8],b=r[0],w=r[3],v=r[6],S=r[1],E=r[4],C=r[7],U=r[2],O=r[5],N=r[8];return s[0]=o*b+a*S+l*U,s[3]=o*w+a*E+l*O,s[6]=o*v+a*C+l*N,s[1]=c*b+u*S+p*U,s[4]=c*w+u*E+p*O,s[7]=c*v+u*C+p*N,s[2]=m*b+g*S+x*U,s[5]=m*w+g*E+x*O,s[8]=m*v+g*C+x*N,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],i=e[1],r=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],u=e[8];return t*o*u-t*a*c-i*s*u+i*a*l+r*s*c-r*o*l}invert(){const e=this.elements,t=e[0],i=e[1],r=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],u=e[8],p=u*o-a*c,m=a*l-u*s,g=c*s-o*l,x=t*p+i*m+r*g;if(x===0)return this.set(0,0,0,0,0,0,0,0,0);const b=1/x;return e[0]=p*b,e[1]=(r*c-u*i)*b,e[2]=(a*i-r*o)*b,e[3]=m*b,e[4]=(u*t-r*l)*b,e[5]=(r*s-a*t)*b,e[6]=g*b,e[7]=(i*l-c*t)*b,e[8]=(o*t-i*s)*b,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,i,r,s,o,a){const l=Math.cos(s),c=Math.sin(s);return this.set(i*l,i*c,-i*(l*o+c*a)+o+e,-r*c,r*l,-r*(-c*o+l*a)+a+t,0,0,1),this}scale(e,t){return this.premultiply(DS.makeScale(e,t)),this}rotate(e){return this.premultiply(DS.makeRotation(-e)),this}translate(e,t){return this.premultiply(DS.makeTranslation(e,t)),this}makeTranslation(e,t){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,t,0,0,1),this}makeRotation(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,-i,0,i,t,0,0,0,1),this}makeScale(e,t){return this.set(e,0,0,0,t,0,0,0,1),this}equals(e){const t=this.elements,i=e.elements;for(let r=0;r<9;r++)if(t[r]!==i[r])return!1;return!0}fromArray(e,t=0){for(let i=0;i<9;i++)this.elements[i]=e[i+t];return this}toArray(e=[],t=0){const i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e}clone(){return new this.constructor().fromArray(this.elements)}}const DS=new Bt;function y4(n){for(let e=n.length-1;e>=0;--e)if(n[e]>=65535)return!0;return!1}const JJ={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function xd(n,e){return new JJ[n](e)}function rg(n){return document.createElementNS("http://www.w3.org/1999/xhtml",n)}function v4(){const n=rg("canvas");return n.style.display="block",n}const eD={};function lu(n){n in eD||(eD[n]=!0,console.warn(n))}function QJ(n,e,t){return new Promise(function(i,r){function s(){switch(n.clientWaitSync(e,n.SYNC_FLUSH_COMMANDS_BIT,0)){case n.WAIT_FAILED:r();break;case n.TIMEOUT_EXPIRED:setTimeout(s,t);break;default:i()}}setTimeout(s,t)})}function ZJ(n){const e=n.elements;e[2]=.5*e[2]+.5*e[3],e[6]=.5*e[6]+.5*e[7],e[10]=.5*e[10]+.5*e[11],e[14]=.5*e[14]+.5*e[15]}function eQ(n){const e=n.elements;e[11]===-1?(e[10]=-e[10]-1,e[14]=-e[14]):(e[10]=-e[10],e[14]=-e[14]+1)}const tD=new Bt().set(.4123908,.3575843,.1804808,.212639,.7151687,.0721923,.0193308,.1191948,.9505322),nD=new Bt().set(3.2409699,-1.5373832,-.4986108,-.9692436,1.8759675,.0415551,.0556301,-.203977,1.0569715);function tQ(){const n={enabled:!0,workingColorSpace:qu,spaces:{},convert:function(r,s,o){return this.enabled===!1||s===o||!s||!o||(this.spaces[s].transfer===An&&(r.r=Ea(r.r),r.g=Ea(r.g),r.b=Ea(r.b)),this.spaces[s].primaries!==this.spaces[o].primaries&&(r.applyMatrix3(this.spaces[s].toXYZ),r.applyMatrix3(this.spaces[o].fromXYZ)),this.spaces[o].transfer===An&&(r.r=Vd(r.r),r.g=Vd(r.g),r.b=Vd(r.b))),r},fromWorkingColorSpace:function(r,s){return this.convert(r,this.workingColorSpace,s)},toWorkingColorSpace:function(r,s){return this.convert(r,s,this.workingColorSpace)},getPrimaries:function(r){return this.spaces[r].primaries},getTransfer:function(r){return r===fa?tg:this.spaces[r].transfer},getLuminanceCoefficients:function(r,s=this.workingColorSpace){return r.fromArray(this.spaces[s].luminanceCoefficients)},define:function(r){Object.assign(this.spaces,r)},_getMatrix:function(r,s,o){return r.copy(this.spaces[s].toXYZ).multiply(this.spaces[o].fromXYZ)},_getDrawingBufferColorSpace:function(r){return this.spaces[r].outputColorSpaceConfig.drawingBufferColorSpace},_getUnpackColorSpace:function(r=this.workingColorSpace){return this.spaces[r].workingColorSpaceConfig.unpackColorSpace}},e=[.64,.33,.3,.6,.15,.06],t=[.2126,.7152,.0722],i=[.3127,.329];return n.define({[qu]:{primaries:e,whitePoint:i,transfer:tg,toXYZ:tD,fromXYZ:nD,luminanceCoefficients:t,workingColorSpaceConfig:{unpackColorSpace:qr},outputColorSpaceConfig:{drawingBufferColorSpace:qr}},[qr]:{primaries:e,whitePoint:i,transfer:An,toXYZ:tD,fromXYZ:nD,luminanceCoefficients:t,outputColorSpaceConfig:{drawingBufferColorSpace:qr}}}),n}const dn=tQ();function Ea(n){return n<.04045?n*.0773993808:Math.pow(n*.9478672986+.0521327014,2.4)}function Vd(n){return n<.0031308?n*12.92:1.055*Math.pow(n,.41666)-.055}let Rh;class x4{static getDataURL(e){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let t;if(e instanceof HTMLCanvasElement)t=e;else{Rh===void 0&&(Rh=rg("canvas")),Rh.width=e.width,Rh.height=e.height;const i=Rh.getContext("2d");e instanceof ImageData?i.putImageData(e,0,0):i.drawImage(e,0,0,e.width,e.height),t=Rh}return t.toDataURL("image/png")}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const t=rg("canvas");t.width=e.width,t.height=e.height;const i=t.getContext("2d");i.drawImage(e,0,0,e.width,e.height);const r=i.getImageData(0,0,e.width,e.height),s=r.data;for(let o=0;o<s.length;o++)s[o]=Ea(s[o]/255)*255;return i.putImageData(r,0,0),t}else if(e.data){const t=e.data.slice(0);for(let i=0;i<t.length;i++)t instanceof Uint8Array||t instanceof Uint8ClampedArray?t[i]=Math.floor(Ea(t[i]/255)*255):t[i]=Ea(t[i]);return{data:t,width:e.width,height:e.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}let nQ=0;class Rl{constructor(e=null){this.isSource=!0,Object.defineProperty(this,"id",{value:nQ++}),this.uuid=_s(),this.data=e,this.dataReady=!0,this.version=0}set needsUpdate(e){e===!0&&this.version++}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.images[this.uuid]!==void 0)return e.images[this.uuid];const i={uuid:this.uuid,url:""},r=this.data;if(r!==null){let s;if(Array.isArray(r)){s=[];for(let o=0,a=r.length;o<a;o++)r[o].isDataTexture?s.push(LS(r[o].image)):s.push(LS(r[o]))}else s=LS(r);i.url=s}return t||(e.images[this.uuid]=i),i}}function LS(n){return typeof HTMLImageElement<"u"&&n instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&n instanceof ImageBitmap?x4.getDataURL(n):n.data?{data:Array.from(n.data),width:n.width,height:n.height,type:n.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let iQ=0;class ti extends Ko{constructor(e=ti.DEFAULT_IMAGE,t=ti.DEFAULT_MAPPING,i=Gs,r=Gs,s=Mi,o=Do,a=gr,l=xo,c=ti.DEFAULT_ANISOTROPY,u=fa){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:iQ++}),this.uuid=_s(),this.name="",this.source=new Rl(e),this.mipmaps=[],this.mapping=t,this.channel=0,this.wrapS=i,this.wrapT=r,this.magFilter=s,this.minFilter=o,this.anisotropy=c,this.format=a,this.internalFormat=null,this.type=l,this.offset=new Ie(0,0),this.repeat=new Ie(1,1),this.center=new Ie(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Bt,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.colorSpace=u,this.userData={},this.version=0,this.onUpdate=null,this.renderTarget=null,this.isRenderTargetTexture=!1,this.pmremVersion=0}get image(){return this.source.data}set image(e=null){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.colorSpace=e.colorSpace,this.renderTarget=e.renderTarget,this.isRenderTargetTexture=e.isRenderTargetTexture,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const i={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(i.userData=this.userData),t||(e.textures[this.uuid]=i),i}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==yw)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case Jm:e.x=e.x-Math.floor(e.x);break;case Gs:e.x=e.x<0?0:1;break;case Qm:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case Jm:e.y=e.y-Math.floor(e.y);break;case Gs:e.y=e.y<0?0:1;break;case Qm:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}set needsPMREMUpdate(e){e===!0&&this.pmremVersion++}}ti.DEFAULT_IMAGE=null;ti.DEFAULT_MAPPING=yw;ti.DEFAULT_ANISOTROPY=1;class mn{constructor(e=0,t=0,i=0,r=1){mn.prototype.isVector4=!0,this.x=e,this.y=t,this.z=i,this.w=r}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,i,r){return this.x=e,this.y=t,this.z=i,this.w=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,i=this.y,r=this.z,s=this.w,o=e.elements;return this.x=o[0]*t+o[4]*i+o[8]*r+o[12]*s,this.y=o[1]*t+o[5]*i+o[9]*r+o[13]*s,this.z=o[2]*t+o[6]*i+o[10]*r+o[14]*s,this.w=o[3]*t+o[7]*i+o[11]*r+o[15]*s,this}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this.w/=e.w,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,i,r,s;const l=e.elements,c=l[0],u=l[4],p=l[8],m=l[1],g=l[5],x=l[9],b=l[2],w=l[6],v=l[10];if(Math.abs(u-m)<.01&&Math.abs(p-b)<.01&&Math.abs(x-w)<.01){if(Math.abs(u+m)<.1&&Math.abs(p+b)<.1&&Math.abs(x+w)<.1&&Math.abs(c+g+v-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;const E=(c+1)/2,C=(g+1)/2,U=(v+1)/2,O=(u+m)/4,N=(p+b)/4,P=(x+w)/4;return E>C&&E>U?E<.01?(i=0,r=.707106781,s=.707106781):(i=Math.sqrt(E),r=O/i,s=N/i):C>U?C<.01?(i=.707106781,r=0,s=.707106781):(r=Math.sqrt(C),i=O/r,s=P/r):U<.01?(i=.707106781,r=.707106781,s=0):(s=Math.sqrt(U),i=N/s,r=P/s),this.set(i,r,s,t),this}let S=Math.sqrt((w-x)*(w-x)+(p-b)*(p-b)+(m-u)*(m-u));return Math.abs(S)<.001&&(S=1),this.x=(w-x)/S,this.y=(p-b)/S,this.z=(m-u)/S,this.w=Math.acos((c+g+v-1)/2),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this.w=t[15],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Lt(this.x,e.x,t.x),this.y=Lt(this.y,e.y,t.y),this.z=Lt(this.z,e.z,t.z),this.w=Lt(this.w,e.w,t.w),this}clampScalar(e,t){return this.x=Lt(this.x,e,t),this.y=Lt(this.y,e,t),this.z=Lt(this.z,e,t),this.w=Lt(this.w,e,t),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Lt(i,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this.z=e.z+(t.z-e.z)*i,this.w=e.w+(t.w-e.w)*i,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class Ew extends Ko{constructor(e=1,t=1,i={}){super(),this.isRenderTarget=!0,this.width=e,this.height=t,this.depth=1,this.scissor=new mn(0,0,e,t),this.scissorTest=!1,this.viewport=new mn(0,0,e,t);const r={width:e,height:t,depth:1};i=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:Mi,depthBuffer:!0,stencilBuffer:!1,resolveDepthBuffer:!0,resolveStencilBuffer:!0,depthTexture:null,samples:0,count:1},i);const s=new ti(r,i.mapping,i.wrapS,i.wrapT,i.magFilter,i.minFilter,i.format,i.type,i.anisotropy,i.colorSpace);s.flipY=!1,s.generateMipmaps=i.generateMipmaps,s.internalFormat=i.internalFormat,this.textures=[];const o=i.count;for(let a=0;a<o;a++)this.textures[a]=s.clone(),this.textures[a].isRenderTargetTexture=!0,this.textures[a].renderTarget=this;this.depthBuffer=i.depthBuffer,this.stencilBuffer=i.stencilBuffer,this.resolveDepthBuffer=i.resolveDepthBuffer,this.resolveStencilBuffer=i.resolveStencilBuffer,this._depthTexture=null,this.depthTexture=i.depthTexture,this.samples=i.samples}get texture(){return this.textures[0]}set texture(e){this.textures[0]=e}set depthTexture(e){this._depthTexture!==null&&(this._depthTexture.renderTarget=null),e!==null&&(e.renderTarget=this),this._depthTexture=e}get depthTexture(){return this._depthTexture}setSize(e,t,i=1){if(this.width!==e||this.height!==t||this.depth!==i){this.width=e,this.height=t,this.depth=i;for(let r=0,s=this.textures.length;r<s;r++)this.textures[r].image.width=e,this.textures[r].image.height=t,this.textures[r].image.depth=i;this.dispose()}this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.textures.length=0;for(let t=0,i=e.textures.length;t<i;t++){this.textures[t]=e.textures[t].clone(),this.textures[t].isRenderTargetTexture=!0,this.textures[t].renderTarget=this;const r=Object.assign({},e.textures[t].image);this.textures[t].source=new Rl(r)}return this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.resolveDepthBuffer=e.resolveDepthBuffer,this.resolveStencilBuffer=e.resolveStencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class Xo extends Ew{constructor(e=1,t=1,i={}){super(e,t,i),this.isWebGLRenderTarget=!0}}class Vg extends ti{constructor(e=null,t=1,i=1,r=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:i,depth:r},this.magFilter=Yi,this.minFilter=Yi,this.wrapR=Gs,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}}class rQ extends Xo{constructor(e=1,t=1,i=1,r={}){super(e,t,r),this.isWebGLArrayRenderTarget=!0,this.depth=i,this.texture=new Vg(null,e,t,i),this.texture.isRenderTargetTexture=!0}}class Cw extends ti{constructor(e=null,t=1,i=1,r=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:i,depth:r},this.magFilter=Yi,this.minFilter=Yi,this.wrapR=Gs,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class sQ extends Xo{constructor(e=1,t=1,i=1,r={}){super(e,t,r),this.isWebGL3DRenderTarget=!0,this.depth=i,this.texture=new Cw(null,e,t,i),this.texture.isRenderTargetTexture=!0}}class is{constructor(e=0,t=0,i=0,r=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=i,this._w=r}static slerpFlat(e,t,i,r,s,o,a){let l=i[r+0],c=i[r+1],u=i[r+2],p=i[r+3];const m=s[o+0],g=s[o+1],x=s[o+2],b=s[o+3];if(a===0){e[t+0]=l,e[t+1]=c,e[t+2]=u,e[t+3]=p;return}if(a===1){e[t+0]=m,e[t+1]=g,e[t+2]=x,e[t+3]=b;return}if(p!==b||l!==m||c!==g||u!==x){let w=1-a;const v=l*m+c*g+u*x+p*b,S=v>=0?1:-1,E=1-v*v;if(E>Number.EPSILON){const U=Math.sqrt(E),O=Math.atan2(U,v*S);w=Math.sin(w*O)/U,a=Math.sin(a*O)/U}const C=a*S;if(l=l*w+m*C,c=c*w+g*C,u=u*w+x*C,p=p*w+b*C,w===1-a){const U=1/Math.sqrt(l*l+c*c+u*u+p*p);l*=U,c*=U,u*=U,p*=U}}e[t]=l,e[t+1]=c,e[t+2]=u,e[t+3]=p}static multiplyQuaternionsFlat(e,t,i,r,s,o){const a=i[r],l=i[r+1],c=i[r+2],u=i[r+3],p=s[o],m=s[o+1],g=s[o+2],x=s[o+3];return e[t]=a*x+u*p+l*g-c*m,e[t+1]=l*x+u*m+c*p-a*g,e[t+2]=c*x+u*g+a*m-l*p,e[t+3]=u*x-a*p-l*m-c*g,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,i,r){return this._x=e,this._y=t,this._z=i,this._w=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t=!0){const i=e._x,r=e._y,s=e._z,o=e._order,a=Math.cos,l=Math.sin,c=a(i/2),u=a(r/2),p=a(s/2),m=l(i/2),g=l(r/2),x=l(s/2);switch(o){case"XYZ":this._x=m*u*p+c*g*x,this._y=c*g*p-m*u*x,this._z=c*u*x+m*g*p,this._w=c*u*p-m*g*x;break;case"YXZ":this._x=m*u*p+c*g*x,this._y=c*g*p-m*u*x,this._z=c*u*x-m*g*p,this._w=c*u*p+m*g*x;break;case"ZXY":this._x=m*u*p-c*g*x,this._y=c*g*p+m*u*x,this._z=c*u*x+m*g*p,this._w=c*u*p-m*g*x;break;case"ZYX":this._x=m*u*p-c*g*x,this._y=c*g*p+m*u*x,this._z=c*u*x-m*g*p,this._w=c*u*p+m*g*x;break;case"YZX":this._x=m*u*p+c*g*x,this._y=c*g*p+m*u*x,this._z=c*u*x-m*g*p,this._w=c*u*p-m*g*x;break;case"XZY":this._x=m*u*p-c*g*x,this._y=c*g*p-m*u*x,this._z=c*u*x+m*g*p,this._w=c*u*p+m*g*x;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+o)}return t===!0&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const i=t/2,r=Math.sin(i);return this._x=e.x*r,this._y=e.y*r,this._z=e.z*r,this._w=Math.cos(i),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,i=t[0],r=t[4],s=t[8],o=t[1],a=t[5],l=t[9],c=t[2],u=t[6],p=t[10],m=i+a+p;if(m>0){const g=.5/Math.sqrt(m+1);this._w=.25/g,this._x=(u-l)*g,this._y=(s-c)*g,this._z=(o-r)*g}else if(i>a&&i>p){const g=2*Math.sqrt(1+i-a-p);this._w=(u-l)/g,this._x=.25*g,this._y=(r+o)/g,this._z=(s+c)/g}else if(a>p){const g=2*Math.sqrt(1+a-i-p);this._w=(s-c)/g,this._x=(r+o)/g,this._y=.25*g,this._z=(l+u)/g}else{const g=2*Math.sqrt(1+p-i-a);this._w=(o-r)/g,this._x=(s+c)/g,this._y=(l+u)/g,this._z=.25*g}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let i=e.dot(t)+1;return i<Number.EPSILON?(i=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=i):(this._x=0,this._y=-e.z,this._z=e.y,this._w=i)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=i),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(Lt(this.dot(e),-1,1)))}rotateTowards(e,t){const i=this.angleTo(e);if(i===0)return this;const r=Math.min(1,t/i);return this.slerp(e,r),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const i=e._x,r=e._y,s=e._z,o=e._w,a=t._x,l=t._y,c=t._z,u=t._w;return this._x=i*u+o*a+r*c-s*l,this._y=r*u+o*l+s*a-i*c,this._z=s*u+o*c+i*l-r*a,this._w=o*u-i*a-r*l-s*c,this._onChangeCallback(),this}slerp(e,t){if(t===0)return this;if(t===1)return this.copy(e);const i=this._x,r=this._y,s=this._z,o=this._w;let a=o*e._w+i*e._x+r*e._y+s*e._z;if(a<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,a=-a):this.copy(e),a>=1)return this._w=o,this._x=i,this._y=r,this._z=s,this;const l=1-a*a;if(l<=Number.EPSILON){const g=1-t;return this._w=g*o+t*this._w,this._x=g*i+t*this._x,this._y=g*r+t*this._y,this._z=g*s+t*this._z,this.normalize(),this}const c=Math.sqrt(l),u=Math.atan2(c,a),p=Math.sin((1-t)*u)/c,m=Math.sin(t*u)/c;return this._w=o*p+this._w*m,this._x=i*p+this._x*m,this._y=r*p+this._y*m,this._z=s*p+this._z*m,this._onChangeCallback(),this}slerpQuaternions(e,t,i){return this.copy(e).slerp(t,i)}random(){const e=2*Math.PI*Math.random(),t=2*Math.PI*Math.random(),i=Math.random(),r=Math.sqrt(1-i),s=Math.sqrt(i);return this.set(r*Math.sin(e),r*Math.cos(e),s*Math.sin(t),s*Math.cos(t))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class K{constructor(e=0,t=0,i=0){K.prototype.isVector3=!0,this.x=e,this.y=t,this.z=i}set(e,t,i){return i===void 0&&(i=this.z),this.x=e,this.y=t,this.z=i,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(iD.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(iD.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,i=this.y,r=this.z,s=e.elements;return this.x=s[0]*t+s[3]*i+s[6]*r,this.y=s[1]*t+s[4]*i+s[7]*r,this.z=s[2]*t+s[5]*i+s[8]*r,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,i=this.y,r=this.z,s=e.elements,o=1/(s[3]*t+s[7]*i+s[11]*r+s[15]);return this.x=(s[0]*t+s[4]*i+s[8]*r+s[12])*o,this.y=(s[1]*t+s[5]*i+s[9]*r+s[13])*o,this.z=(s[2]*t+s[6]*i+s[10]*r+s[14])*o,this}applyQuaternion(e){const t=this.x,i=this.y,r=this.z,s=e.x,o=e.y,a=e.z,l=e.w,c=2*(o*r-a*i),u=2*(a*t-s*r),p=2*(s*i-o*t);return this.x=t+l*c+o*p-a*u,this.y=i+l*u+a*c-s*p,this.z=r+l*p+s*u-o*c,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,i=this.y,r=this.z,s=e.elements;return this.x=s[0]*t+s[4]*i+s[8]*r,this.y=s[1]*t+s[5]*i+s[9]*r,this.z=s[2]*t+s[6]*i+s[10]*r,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Lt(this.x,e.x,t.x),this.y=Lt(this.y,e.y,t.y),this.z=Lt(this.z,e.z,t.z),this}clampScalar(e,t){return this.x=Lt(this.x,e,t),this.y=Lt(this.y,e,t),this.z=Lt(this.z,e,t),this}clampLength(e,t){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Lt(i,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,i){return this.x=e.x+(t.x-e.x)*i,this.y=e.y+(t.y-e.y)*i,this.z=e.z+(t.z-e.z)*i,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){const i=e.x,r=e.y,s=e.z,o=t.x,a=t.y,l=t.z;return this.x=r*l-s*a,this.y=s*o-i*l,this.z=i*a-r*o,this}projectOnVector(e){const t=e.lengthSq();if(t===0)return this.set(0,0,0);const i=e.dot(this)/t;return this.copy(e).multiplyScalar(i)}projectOnPlane(e){return kS.copy(this).projectOnVector(e),this.sub(kS)}reflect(e){return this.sub(kS.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const i=this.dot(e)/t;return Math.acos(Lt(i,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,i=this.y-e.y,r=this.z-e.z;return t*t+i*i+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,i){const r=Math.sin(t)*e;return this.x=r*Math.sin(i),this.y=Math.cos(t)*e,this.z=r*Math.cos(i),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,i){return this.x=e*Math.sin(t),this.y=i,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),i=this.setFromMatrixColumn(e,1).length(),r=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=i,this.z=r,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,t*4)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,t*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=Math.random()*Math.PI*2,t=Math.random()*2-1,i=Math.sqrt(1-t*t);return this.x=i*Math.cos(e),this.y=t,this.z=i*Math.sin(e),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const kS=new K,iD=new is;class kr{constructor(e=new K(1/0,1/0,1/0),t=new K(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t+=3)this.expandByPoint(to.fromArray(e,t));return this}setFromBufferAttribute(e){this.makeEmpty();for(let t=0,i=e.count;t<i;t++)this.expandByPoint(to.fromBufferAttribute(e,t));return this}setFromPoints(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const i=to.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){e.updateWorldMatrix(!1,!1);const i=e.geometry;if(i!==void 0){const s=i.getAttribute("position");if(t===!0&&s!==void 0&&e.isInstancedMesh!==!0)for(let o=0,a=s.count;o<a;o++)e.isMesh===!0?e.getVertexPosition(o,to):to.fromBufferAttribute(s,o),to.applyMatrix4(e.matrixWorld),this.expandByPoint(to);else e.boundingBox!==void 0?(e.boundingBox===null&&e.computeBoundingBox(),cv.copy(e.boundingBox)):(i.boundingBox===null&&i.computeBoundingBox(),cv.copy(i.boundingBox)),cv.applyMatrix4(e.matrixWorld),this.union(cv)}const r=e.children;for(let s=0,o=r.length;s<o;s++)this.expandByObject(r[s],t);return this}containsPoint(e){return e.x>=this.min.x&&e.x<=this.max.x&&e.y>=this.min.y&&e.y<=this.max.y&&e.z>=this.min.z&&e.z<=this.max.z}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return e.max.x>=this.min.x&&e.min.x<=this.max.x&&e.max.y>=this.min.y&&e.min.y<=this.max.y&&e.max.z>=this.min.z&&e.min.z<=this.max.z}intersectsSphere(e){return this.clampPoint(e.center,to),to.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,i;return e.normal.x>0?(t=e.normal.x*this.min.x,i=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,i=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,i+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,i+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,i+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,i+=e.normal.z*this.min.z),t<=-e.constant&&i>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(cp),uv.subVectors(this.max,cp),Nh.subVectors(e.a,cp),Dh.subVectors(e.b,cp),Lh.subVectors(e.c,cp),sl.subVectors(Dh,Nh),ol.subVectors(Lh,Dh),Hc.subVectors(Nh,Lh);let t=[0,-sl.z,sl.y,0,-ol.z,ol.y,0,-Hc.z,Hc.y,sl.z,0,-sl.x,ol.z,0,-ol.x,Hc.z,0,-Hc.x,-sl.y,sl.x,0,-ol.y,ol.x,0,-Hc.y,Hc.x,0];return!OS(t,Nh,Dh,Lh,uv)||(t=[1,0,0,0,1,0,0,0,1],!OS(t,Nh,Dh,Lh,uv))?!1:(hv.crossVectors(sl,ol),t=[hv.x,hv.y,hv.z],OS(t,Nh,Dh,Lh,uv))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,to).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=this.getSize(to).length()*.5),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(sa[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),sa[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),sa[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),sa[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),sa[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),sa[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),sa[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),sa[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(sa),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const sa=[new K,new K,new K,new K,new K,new K,new K,new K],to=new K,cv=new kr,Nh=new K,Dh=new K,Lh=new K,sl=new K,ol=new K,Hc=new K,cp=new K,uv=new K,hv=new K,Gc=new K;function OS(n,e,t,i,r){for(let s=0,o=n.length-3;s<=o;s+=3){Gc.fromArray(n,s);const a=r.x*Math.abs(Gc.x)+r.y*Math.abs(Gc.y)+r.z*Math.abs(Gc.z),l=e.dot(Gc),c=t.dot(Gc),u=i.dot(Gc);if(Math.max(-Math.max(l,c,u),Math.min(l,c,u))>a)return!1}return!0}const oQ=new kr,up=new K,US=new K;class _r{constructor(e=new K,t=-1){this.isSphere=!0,this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const i=this.center;t!==void 0?i.copy(t):oQ.setFromPoints(e).getCenter(i);let r=0;for(let s=0,o=e.length;s<o;s++)r=Math.max(r,i.distanceToSquared(e[s]));return this.radius=Math.sqrt(r),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const i=this.center.distanceToSquared(e);return t.copy(e),i>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;up.subVectors(e,this.center);const t=up.lengthSq();if(t>this.radius*this.radius){const i=Math.sqrt(t),r=(i-this.radius)*.5;this.center.addScaledVector(up,r/i),this.radius+=r}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(this.center.equals(e.center)===!0?this.radius=Math.max(this.radius,e.radius):(US.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(up.copy(e.center).add(US)),this.expandByPoint(up.copy(e.center).sub(US))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}}const oa=new K,jS=new K,dv=new K,al=new K,FS=new K,fv=new K,VS=new K;class Ef{constructor(e=new K,t=new K(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,oa)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const i=t.dot(this.direction);return i<0?t.copy(this.origin):t.copy(this.origin).addScaledVector(this.direction,i)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=oa.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(oa.copy(this.origin).addScaledVector(this.direction,t),oa.distanceToSquared(e))}distanceSqToSegment(e,t,i,r){jS.copy(e).add(t).multiplyScalar(.5),dv.copy(t).sub(e).normalize(),al.copy(this.origin).sub(jS);const s=e.distanceTo(t)*.5,o=-this.direction.dot(dv),a=al.dot(this.direction),l=-al.dot(dv),c=al.lengthSq(),u=Math.abs(1-o*o);let p,m,g,x;if(u>0)if(p=o*l-a,m=o*a-l,x=s*u,p>=0)if(m>=-x)if(m<=x){const b=1/u;p*=b,m*=b,g=p*(p+o*m+2*a)+m*(o*p+m+2*l)+c}else m=s,p=Math.max(0,-(o*m+a)),g=-p*p+m*(m+2*l)+c;else m=-s,p=Math.max(0,-(o*m+a)),g=-p*p+m*(m+2*l)+c;else m<=-x?(p=Math.max(0,-(-o*s+a)),m=p>0?-s:Math.min(Math.max(-s,-l),s),g=-p*p+m*(m+2*l)+c):m<=x?(p=0,m=Math.min(Math.max(-s,-l),s),g=m*(m+2*l)+c):(p=Math.max(0,-(o*s+a)),m=p>0?s:Math.min(Math.max(-s,-l),s),g=-p*p+m*(m+2*l)+c);else m=o>0?-s:s,p=Math.max(0,-(o*m+a)),g=-p*p+m*(m+2*l)+c;return i&&i.copy(this.origin).addScaledVector(this.direction,p),r&&r.copy(jS).addScaledVector(dv,m),g}intersectSphere(e,t){oa.subVectors(e.center,this.origin);const i=oa.dot(this.direction),r=oa.dot(oa)-i*i,s=e.radius*e.radius;if(r>s)return null;const o=Math.sqrt(s-r),a=i-o,l=i+o;return l<0?null:a<0?this.at(l,t):this.at(a,t)}intersectsSphere(e){return this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(t===0)return e.distanceToPoint(this.origin)===0?0:null;const i=-(this.origin.dot(e.normal)+e.constant)/t;return i>=0?i:null}intersectPlane(e,t){const i=this.distanceToPlane(e);return i===null?null:this.at(i,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);return t===0||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let i,r,s,o,a,l;const c=1/this.direction.x,u=1/this.direction.y,p=1/this.direction.z,m=this.origin;return c>=0?(i=(e.min.x-m.x)*c,r=(e.max.x-m.x)*c):(i=(e.max.x-m.x)*c,r=(e.min.x-m.x)*c),u>=0?(s=(e.min.y-m.y)*u,o=(e.max.y-m.y)*u):(s=(e.max.y-m.y)*u,o=(e.min.y-m.y)*u),i>o||s>r||((s>i||isNaN(i))&&(i=s),(o<r||isNaN(r))&&(r=o),p>=0?(a=(e.min.z-m.z)*p,l=(e.max.z-m.z)*p):(a=(e.max.z-m.z)*p,l=(e.min.z-m.z)*p),i>l||a>r)||((a>i||i!==i)&&(i=a),(l<r||r!==r)&&(r=l),r<0)?null:this.at(i>=0?i:r,t)}intersectsBox(e){return this.intersectBox(e,oa)!==null}intersectTriangle(e,t,i,r,s){FS.subVectors(t,e),fv.subVectors(i,e),VS.crossVectors(FS,fv);let o=this.direction.dot(VS),a;if(o>0){if(r)return null;a=1}else if(o<0)a=-1,o=-o;else return null;al.subVectors(this.origin,e);const l=a*this.direction.dot(fv.crossVectors(al,fv));if(l<0)return null;const c=a*this.direction.dot(FS.cross(al));if(c<0||l+c>o)return null;const u=-a*al.dot(VS);return u<0?null:this.at(u/o,s)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class At{constructor(e,t,i,r,s,o,a,l,c,u,p,m,g,x,b,w){At.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],e!==void 0&&this.set(e,t,i,r,s,o,a,l,c,u,p,m,g,x,b,w)}set(e,t,i,r,s,o,a,l,c,u,p,m,g,x,b,w){const v=this.elements;return v[0]=e,v[4]=t,v[8]=i,v[12]=r,v[1]=s,v[5]=o,v[9]=a,v[13]=l,v[2]=c,v[6]=u,v[10]=p,v[14]=m,v[3]=g,v[7]=x,v[11]=b,v[15]=w,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new At().fromArray(this.elements)}copy(e){const t=this.elements,i=e.elements;return t[0]=i[0],t[1]=i[1],t[2]=i[2],t[3]=i[3],t[4]=i[4],t[5]=i[5],t[6]=i[6],t[7]=i[7],t[8]=i[8],t[9]=i[9],t[10]=i[10],t[11]=i[11],t[12]=i[12],t[13]=i[13],t[14]=i[14],t[15]=i[15],this}copyPosition(e){const t=this.elements,i=e.elements;return t[12]=i[12],t[13]=i[13],t[14]=i[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,i){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),i.setFromMatrixColumn(this,2),this}makeBasis(e,t,i){return this.set(e.x,t.x,i.x,0,e.y,t.y,i.y,0,e.z,t.z,i.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,i=e.elements,r=1/kh.setFromMatrixColumn(e,0).length(),s=1/kh.setFromMatrixColumn(e,1).length(),o=1/kh.setFromMatrixColumn(e,2).length();return t[0]=i[0]*r,t[1]=i[1]*r,t[2]=i[2]*r,t[3]=0,t[4]=i[4]*s,t[5]=i[5]*s,t[6]=i[6]*s,t[7]=0,t[8]=i[8]*o,t[9]=i[9]*o,t[10]=i[10]*o,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){const t=this.elements,i=e.x,r=e.y,s=e.z,o=Math.cos(i),a=Math.sin(i),l=Math.cos(r),c=Math.sin(r),u=Math.cos(s),p=Math.sin(s);if(e.order==="XYZ"){const m=o*u,g=o*p,x=a*u,b=a*p;t[0]=l*u,t[4]=-l*p,t[8]=c,t[1]=g+x*c,t[5]=m-b*c,t[9]=-a*l,t[2]=b-m*c,t[6]=x+g*c,t[10]=o*l}else if(e.order==="YXZ"){const m=l*u,g=l*p,x=c*u,b=c*p;t[0]=m+b*a,t[4]=x*a-g,t[8]=o*c,t[1]=o*p,t[5]=o*u,t[9]=-a,t[2]=g*a-x,t[6]=b+m*a,t[10]=o*l}else if(e.order==="ZXY"){const m=l*u,g=l*p,x=c*u,b=c*p;t[0]=m-b*a,t[4]=-o*p,t[8]=x+g*a,t[1]=g+x*a,t[5]=o*u,t[9]=b-m*a,t[2]=-o*c,t[6]=a,t[10]=o*l}else if(e.order==="ZYX"){const m=o*u,g=o*p,x=a*u,b=a*p;t[0]=l*u,t[4]=x*c-g,t[8]=m*c+b,t[1]=l*p,t[5]=b*c+m,t[9]=g*c-x,t[2]=-c,t[6]=a*l,t[10]=o*l}else if(e.order==="YZX"){const m=o*l,g=o*c,x=a*l,b=a*c;t[0]=l*u,t[4]=b-m*p,t[8]=x*p+g,t[1]=p,t[5]=o*u,t[9]=-a*u,t[2]=-c*u,t[6]=g*p+x,t[10]=m-b*p}else if(e.order==="XZY"){const m=o*l,g=o*c,x=a*l,b=a*c;t[0]=l*u,t[4]=-p,t[8]=c*u,t[1]=m*p+b,t[5]=o*u,t[9]=g*p-x,t[2]=x*p-g,t[6]=a*u,t[10]=b*p+m}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(aQ,e,lQ)}lookAt(e,t,i){const r=this.elements;return fs.subVectors(e,t),fs.lengthSq()===0&&(fs.z=1),fs.normalize(),ll.crossVectors(i,fs),ll.lengthSq()===0&&(Math.abs(i.z)===1?fs.x+=1e-4:fs.z+=1e-4,fs.normalize(),ll.crossVectors(i,fs)),ll.normalize(),pv.crossVectors(fs,ll),r[0]=ll.x,r[4]=pv.x,r[8]=fs.x,r[1]=ll.y,r[5]=pv.y,r[9]=fs.y,r[2]=ll.z,r[6]=pv.z,r[10]=fs.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const i=e.elements,r=t.elements,s=this.elements,o=i[0],a=i[4],l=i[8],c=i[12],u=i[1],p=i[5],m=i[9],g=i[13],x=i[2],b=i[6],w=i[10],v=i[14],S=i[3],E=i[7],C=i[11],U=i[15],O=r[0],N=r[4],P=r[8],A=r[12],M=r[1],D=r[5],z=r[9],F=r[13],re=r[2],le=r[6],he=r[10],ue=r[14],q=r[3],Q=r[7],j=r[11],J=r[15];return s[0]=o*O+a*M+l*re+c*q,s[4]=o*N+a*D+l*le+c*Q,s[8]=o*P+a*z+l*he+c*j,s[12]=o*A+a*F+l*ue+c*J,s[1]=u*O+p*M+m*re+g*q,s[5]=u*N+p*D+m*le+g*Q,s[9]=u*P+p*z+m*he+g*j,s[13]=u*A+p*F+m*ue+g*J,s[2]=x*O+b*M+w*re+v*q,s[6]=x*N+b*D+w*le+v*Q,s[10]=x*P+b*z+w*he+v*j,s[14]=x*A+b*F+w*ue+v*J,s[3]=S*O+E*M+C*re+U*q,s[7]=S*N+E*D+C*le+U*Q,s[11]=S*P+E*z+C*he+U*j,s[15]=S*A+E*F+C*ue+U*J,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],i=e[4],r=e[8],s=e[12],o=e[1],a=e[5],l=e[9],c=e[13],u=e[2],p=e[6],m=e[10],g=e[14],x=e[3],b=e[7],w=e[11],v=e[15];return x*(+s*l*p-r*c*p-s*a*m+i*c*m+r*a*g-i*l*g)+b*(+t*l*g-t*c*m+s*o*m-r*o*g+r*c*u-s*l*u)+w*(+t*c*p-t*a*g-s*o*p+i*o*g+s*a*u-i*c*u)+v*(-r*a*u-t*l*p+t*a*m+r*o*p-i*o*m+i*l*u)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,i){const r=this.elements;return e.isVector3?(r[12]=e.x,r[13]=e.y,r[14]=e.z):(r[12]=e,r[13]=t,r[14]=i),this}invert(){const e=this.elements,t=e[0],i=e[1],r=e[2],s=e[3],o=e[4],a=e[5],l=e[6],c=e[7],u=e[8],p=e[9],m=e[10],g=e[11],x=e[12],b=e[13],w=e[14],v=e[15],S=p*w*c-b*m*c+b*l*g-a*w*g-p*l*v+a*m*v,E=x*m*c-u*w*c-x*l*g+o*w*g+u*l*v-o*m*v,C=u*b*c-x*p*c+x*a*g-o*b*g-u*a*v+o*p*v,U=x*p*l-u*b*l-x*a*m+o*b*m+u*a*w-o*p*w,O=t*S+i*E+r*C+s*U;if(O===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const N=1/O;return e[0]=S*N,e[1]=(b*m*s-p*w*s-b*r*g+i*w*g+p*r*v-i*m*v)*N,e[2]=(a*w*s-b*l*s+b*r*c-i*w*c-a*r*v+i*l*v)*N,e[3]=(p*l*s-a*m*s-p*r*c+i*m*c+a*r*g-i*l*g)*N,e[4]=E*N,e[5]=(u*w*s-x*m*s+x*r*g-t*w*g-u*r*v+t*m*v)*N,e[6]=(x*l*s-o*w*s-x*r*c+t*w*c+o*r*v-t*l*v)*N,e[7]=(o*m*s-u*l*s+u*r*c-t*m*c-o*r*g+t*l*g)*N,e[8]=C*N,e[9]=(x*p*s-u*b*s-x*i*g+t*b*g+u*i*v-t*p*v)*N,e[10]=(o*b*s-x*a*s+x*i*c-t*b*c-o*i*v+t*a*v)*N,e[11]=(u*a*s-o*p*s-u*i*c+t*p*c+o*i*g-t*a*g)*N,e[12]=U*N,e[13]=(u*b*r-x*p*r+x*i*m-t*b*m-u*i*w+t*p*w)*N,e[14]=(x*a*r-o*b*r-x*i*l+t*b*l+o*i*w-t*a*w)*N,e[15]=(o*p*r-u*a*r+u*i*l-t*p*l-o*i*m+t*a*m)*N,this}scale(e){const t=this.elements,i=e.x,r=e.y,s=e.z;return t[0]*=i,t[4]*=r,t[8]*=s,t[1]*=i,t[5]*=r,t[9]*=s,t[2]*=i,t[6]*=r,t[10]*=s,t[3]*=i,t[7]*=r,t[11]*=s,this}getMaxScaleOnAxis(){const e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],i=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],r=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,i,r))}makeTranslation(e,t,i){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,t,0,0,1,i,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),i=Math.sin(e);return this.set(1,0,0,0,0,t,-i,0,0,i,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,0,i,0,0,1,0,0,-i,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),i=Math.sin(e);return this.set(t,-i,0,0,i,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const i=Math.cos(t),r=Math.sin(t),s=1-i,o=e.x,a=e.y,l=e.z,c=s*o,u=s*a;return this.set(c*o+i,c*a-r*l,c*l+r*a,0,c*a+r*l,u*a+i,u*l-r*o,0,c*l-r*a,u*l+r*o,s*l*l+i,0,0,0,0,1),this}makeScale(e,t,i){return this.set(e,0,0,0,0,t,0,0,0,0,i,0,0,0,0,1),this}makeShear(e,t,i,r,s,o){return this.set(1,i,s,0,e,1,o,0,t,r,1,0,0,0,0,1),this}compose(e,t,i){const r=this.elements,s=t._x,o=t._y,a=t._z,l=t._w,c=s+s,u=o+o,p=a+a,m=s*c,g=s*u,x=s*p,b=o*u,w=o*p,v=a*p,S=l*c,E=l*u,C=l*p,U=i.x,O=i.y,N=i.z;return r[0]=(1-(b+v))*U,r[1]=(g+C)*U,r[2]=(x-E)*U,r[3]=0,r[4]=(g-C)*O,r[5]=(1-(m+v))*O,r[6]=(w+S)*O,r[7]=0,r[8]=(x+E)*N,r[9]=(w-S)*N,r[10]=(1-(m+b))*N,r[11]=0,r[12]=e.x,r[13]=e.y,r[14]=e.z,r[15]=1,this}decompose(e,t,i){const r=this.elements;let s=kh.set(r[0],r[1],r[2]).length();const o=kh.set(r[4],r[5],r[6]).length(),a=kh.set(r[8],r[9],r[10]).length();this.determinant()<0&&(s=-s),e.x=r[12],e.y=r[13],e.z=r[14],no.copy(this);const c=1/s,u=1/o,p=1/a;return no.elements[0]*=c,no.elements[1]*=c,no.elements[2]*=c,no.elements[4]*=u,no.elements[5]*=u,no.elements[6]*=u,no.elements[8]*=p,no.elements[9]*=p,no.elements[10]*=p,t.setFromRotationMatrix(no),i.x=s,i.y=o,i.z=a,this}makePerspective(e,t,i,r,s,o,a=ho){const l=this.elements,c=2*s/(t-e),u=2*s/(i-r),p=(t+e)/(t-e),m=(i+r)/(i-r);let g,x;if(a===ho)g=-(o+s)/(o-s),x=-2*o*s/(o-s);else if(a===ig)g=-o/(o-s),x=-o*s/(o-s);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+a);return l[0]=c,l[4]=0,l[8]=p,l[12]=0,l[1]=0,l[5]=u,l[9]=m,l[13]=0,l[2]=0,l[6]=0,l[10]=g,l[14]=x,l[3]=0,l[7]=0,l[11]=-1,l[15]=0,this}makeOrthographic(e,t,i,r,s,o,a=ho){const l=this.elements,c=1/(t-e),u=1/(i-r),p=1/(o-s),m=(t+e)*c,g=(i+r)*u;let x,b;if(a===ho)x=(o+s)*p,b=-2*p;else if(a===ig)x=s*p,b=-1*p;else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+a);return l[0]=2*c,l[4]=0,l[8]=0,l[12]=-m,l[1]=0,l[5]=2*u,l[9]=0,l[13]=-g,l[2]=0,l[6]=0,l[10]=b,l[14]=-x,l[3]=0,l[7]=0,l[11]=0,l[15]=1,this}equals(e){const t=this.elements,i=e.elements;for(let r=0;r<16;r++)if(t[r]!==i[r])return!1;return!0}fromArray(e,t=0){for(let i=0;i<16;i++)this.elements[i]=e[i+t];return this}toArray(e=[],t=0){const i=this.elements;return e[t]=i[0],e[t+1]=i[1],e[t+2]=i[2],e[t+3]=i[3],e[t+4]=i[4],e[t+5]=i[5],e[t+6]=i[6],e[t+7]=i[7],e[t+8]=i[8],e[t+9]=i[9],e[t+10]=i[10],e[t+11]=i[11],e[t+12]=i[12],e[t+13]=i[13],e[t+14]=i[14],e[t+15]=i[15],e}}const kh=new K,no=new At,aQ=new K(0,0,0),lQ=new K(1,1,1),ll=new K,pv=new K,fs=new K,rD=new At,sD=new is;class Ss{constructor(e=0,t=0,i=0,r=Ss.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=t,this._z=i,this._order=r}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,i,r=this._order){return this._x=e,this._y=t,this._z=i,this._order=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t=this._order,i=!0){const r=e.elements,s=r[0],o=r[4],a=r[8],l=r[1],c=r[5],u=r[9],p=r[2],m=r[6],g=r[10];switch(t){case"XYZ":this._y=Math.asin(Lt(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(-u,g),this._z=Math.atan2(-o,s)):(this._x=Math.atan2(m,c),this._z=0);break;case"YXZ":this._x=Math.asin(-Lt(u,-1,1)),Math.abs(u)<.9999999?(this._y=Math.atan2(a,g),this._z=Math.atan2(l,c)):(this._y=Math.atan2(-p,s),this._z=0);break;case"ZXY":this._x=Math.asin(Lt(m,-1,1)),Math.abs(m)<.9999999?(this._y=Math.atan2(-p,g),this._z=Math.atan2(-o,c)):(this._y=0,this._z=Math.atan2(l,s));break;case"ZYX":this._y=Math.asin(-Lt(p,-1,1)),Math.abs(p)<.9999999?(this._x=Math.atan2(m,g),this._z=Math.atan2(l,s)):(this._x=0,this._z=Math.atan2(-o,c));break;case"YZX":this._z=Math.asin(Lt(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-u,c),this._y=Math.atan2(-p,s)):(this._x=0,this._y=Math.atan2(a,g));break;case"XZY":this._z=Math.asin(-Lt(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(m,c),this._y=Math.atan2(a,s)):(this._x=Math.atan2(-u,g),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,i===!0&&this._onChangeCallback(),this}setFromQuaternion(e,t,i){return rD.makeRotationFromQuaternion(e),this.setFromRotationMatrix(rD,t,i)}setFromVector3(e,t=this._order){return this.set(e.x,e.y,e.z,t)}reorder(e){return sD.setFromEuler(this),this.setFromQuaternion(sD,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}Ss.DEFAULT_ORDER="XYZ";class Mu{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}}let cQ=0;const oD=new K,Oh=new is,aa=new At,mv=new K,hp=new K,uQ=new K,hQ=new is,aD=new K(1,0,0),lD=new K(0,1,0),cD=new K(0,0,1),uD={type:"added"},dQ={type:"removed"},Uh={type:"childadded",child:null},BS={type:"childremoved",child:null};class yn extends Ko{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:cQ++}),this.uuid=_s(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=yn.DEFAULT_UP.clone();const e=new K,t=new Ss,i=new is,r=new K(1,1,1);function s(){i.setFromEuler(t,!1)}function o(){t.setFromQuaternion(i,void 0,!1)}t._onChange(s),i._onChange(o),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:i},scale:{configurable:!0,enumerable:!0,value:r},modelViewMatrix:{value:new At},normalMatrix:{value:new Bt}}),this.matrix=new At,this.matrixWorld=new At,this.matrixAutoUpdate=yn.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=yn.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new Mu,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return Oh.setFromAxisAngle(e,t),this.quaternion.multiply(Oh),this}rotateOnWorldAxis(e,t){return Oh.setFromAxisAngle(e,t),this.quaternion.premultiply(Oh),this}rotateX(e){return this.rotateOnAxis(aD,e)}rotateY(e){return this.rotateOnAxis(lD,e)}rotateZ(e){return this.rotateOnAxis(cD,e)}translateOnAxis(e,t){return oD.copy(e).applyQuaternion(this.quaternion),this.position.add(oD.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(aD,e)}translateY(e){return this.translateOnAxis(lD,e)}translateZ(e){return this.translateOnAxis(cD,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(aa.copy(this.matrixWorld).invert())}lookAt(e,t,i){e.isVector3?mv.copy(e):mv.set(e,t,i);const r=this.parent;this.updateWorldMatrix(!0,!1),hp.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?aa.lookAt(hp,mv,this.up):aa.lookAt(mv,hp,this.up),this.quaternion.setFromRotationMatrix(aa),r&&(aa.extractRotation(r.matrixWorld),Oh.setFromRotationMatrix(aa),this.quaternion.premultiply(Oh.invert()))}add(e){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.removeFromParent(),e.parent=this,this.children.push(e),e.dispatchEvent(uD),Uh.child=e,this.dispatchEvent(Uh),Uh.child=null):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let i=0;i<arguments.length;i++)this.remove(arguments[i]);return this}const t=this.children.indexOf(e);return t!==-1&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(dQ),BS.child=e,this.dispatchEvent(BS),BS.child=null),this}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}clear(){return this.remove(...this.children)}attach(e){return this.updateWorldMatrix(!0,!1),aa.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),aa.multiply(e.parent.matrixWorld)),e.applyMatrix4(aa),e.removeFromParent(),e.parent=this,this.children.push(e),e.updateWorldMatrix(!1,!0),e.dispatchEvent(uD),Uh.child=e,this.dispatchEvent(Uh),Uh.child=null,this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let i=0,r=this.children.length;i<r;i++){const o=this.children[i].getObjectByProperty(e,t);if(o!==void 0)return o}}getObjectsByProperty(e,t,i=[]){this[e]===t&&i.push(this);const r=this.children;for(let s=0,o=r.length;s<o;s++)r[s].getObjectsByProperty(e,t,i);return i}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(hp,e,uQ),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(hp,hQ,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);const t=this.children;for(let i=0,r=t.length;i<r;i++)t[i].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const t=this.children;for(let i=0,r=t.length;i<r;i++)t[i].traverseVisible(e)}traverseAncestors(e){const t=this.parent;t!==null&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),this.matrixWorldNeedsUpdate=!1,e=!0);const t=this.children;for(let i=0,r=t.length;i<r;i++)t[i].updateMatrixWorld(e)}updateWorldMatrix(e,t){const i=this.parent;if(e===!0&&i!==null&&i.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),t===!0){const r=this.children;for(let s=0,o=r.length;s<o;s++)r[s].updateWorldMatrix(!1,!0)}}toJSON(e){const t=e===void 0||typeof e=="string",i={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},i.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"});const r={};r.uuid=this.uuid,r.type=this.type,this.name!==""&&(r.name=this.name),this.castShadow===!0&&(r.castShadow=!0),this.receiveShadow===!0&&(r.receiveShadow=!0),this.visible===!1&&(r.visible=!1),this.frustumCulled===!1&&(r.frustumCulled=!1),this.renderOrder!==0&&(r.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(r.userData=this.userData),r.layers=this.layers.mask,r.matrix=this.matrix.toArray(),r.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(r.matrixAutoUpdate=!1),this.isInstancedMesh&&(r.type="InstancedMesh",r.count=this.count,r.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(r.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(r.type="BatchedMesh",r.perObjectFrustumCulled=this.perObjectFrustumCulled,r.sortObjects=this.sortObjects,r.drawRanges=this._drawRanges,r.reservedRanges=this._reservedRanges,r.visibility=this._visibility,r.active=this._active,r.bounds=this._bounds.map(a=>({boxInitialized:a.boxInitialized,boxMin:a.box.min.toArray(),boxMax:a.box.max.toArray(),sphereInitialized:a.sphereInitialized,sphereRadius:a.sphere.radius,sphereCenter:a.sphere.center.toArray()})),r.maxInstanceCount=this._maxInstanceCount,r.maxVertexCount=this._maxVertexCount,r.maxIndexCount=this._maxIndexCount,r.geometryInitialized=this._geometryInitialized,r.geometryCount=this._geometryCount,r.matricesTexture=this._matricesTexture.toJSON(e),this._colorsTexture!==null&&(r.colorsTexture=this._colorsTexture.toJSON(e)),this.boundingSphere!==null&&(r.boundingSphere={center:r.boundingSphere.center.toArray(),radius:r.boundingSphere.radius}),this.boundingBox!==null&&(r.boundingBox={min:r.boundingBox.min.toArray(),max:r.boundingBox.max.toArray()}));function s(a,l){return a[l.uuid]===void 0&&(a[l.uuid]=l.toJSON(e)),l.uuid}if(this.isScene)this.background&&(this.background.isColor?r.background=this.background.toJSON():this.background.isTexture&&(r.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(r.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){r.geometry=s(e.geometries,this.geometry);const a=this.geometry.parameters;if(a!==void 0&&a.shapes!==void 0){const l=a.shapes;if(Array.isArray(l))for(let c=0,u=l.length;c<u;c++){const p=l[c];s(e.shapes,p)}else s(e.shapes,l)}}if(this.isSkinnedMesh&&(r.bindMode=this.bindMode,r.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(s(e.skeletons,this.skeleton),r.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const a=[];for(let l=0,c=this.material.length;l<c;l++)a.push(s(e.materials,this.material[l]));r.material=a}else r.material=s(e.materials,this.material);if(this.children.length>0){r.children=[];for(let a=0;a<this.children.length;a++)r.children.push(this.children[a].toJSON(e).object)}if(this.animations.length>0){r.animations=[];for(let a=0;a<this.animations.length;a++){const l=this.animations[a];r.animations.push(s(e.animations,l))}}if(t){const a=o(e.geometries),l=o(e.materials),c=o(e.textures),u=o(e.images),p=o(e.shapes),m=o(e.skeletons),g=o(e.animations),x=o(e.nodes);a.length>0&&(i.geometries=a),l.length>0&&(i.materials=l),c.length>0&&(i.textures=c),u.length>0&&(i.images=u),p.length>0&&(i.shapes=p),m.length>0&&(i.skeletons=m),g.length>0&&(i.animations=g),x.length>0&&(i.nodes=x)}return i.object=r,i;function o(a){const l=[];for(const c in a){const u=a[c];delete u.metadata,l.push(u)}return l}}clone(e){return new this.constructor().copy(this,e)}copy(e,t=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.animations=e.animations.slice(),this.userData=JSON.parse(JSON.stringify(e.userData)),t===!0)for(let i=0;i<e.children.length;i++){const r=e.children[i];this.add(r.clone())}return this}}yn.DEFAULT_UP=new K(0,1,0);yn.DEFAULT_MATRIX_AUTO_UPDATE=!0;yn.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const io=new K,la=new K,zS=new K,ca=new K,jh=new K,Fh=new K,hD=new K,HS=new K,GS=new K,WS=new K,qS=new mn,$S=new mn,XS=new mn;class Yr{constructor(e=new K,t=new K,i=new K){this.a=e,this.b=t,this.c=i}static getNormal(e,t,i,r){r.subVectors(i,t),io.subVectors(e,t),r.cross(io);const s=r.lengthSq();return s>0?r.multiplyScalar(1/Math.sqrt(s)):r.set(0,0,0)}static getBarycoord(e,t,i,r,s){io.subVectors(r,t),la.subVectors(i,t),zS.subVectors(e,t);const o=io.dot(io),a=io.dot(la),l=io.dot(zS),c=la.dot(la),u=la.dot(zS),p=o*c-a*a;if(p===0)return s.set(0,0,0),null;const m=1/p,g=(c*l-a*u)*m,x=(o*u-a*l)*m;return s.set(1-g-x,x,g)}static containsPoint(e,t,i,r){return this.getBarycoord(e,t,i,r,ca)===null?!1:ca.x>=0&&ca.y>=0&&ca.x+ca.y<=1}static getInterpolation(e,t,i,r,s,o,a,l){return this.getBarycoord(e,t,i,r,ca)===null?(l.x=0,l.y=0,"z"in l&&(l.z=0),"w"in l&&(l.w=0),null):(l.setScalar(0),l.addScaledVector(s,ca.x),l.addScaledVector(o,ca.y),l.addScaledVector(a,ca.z),l)}static getInterpolatedAttribute(e,t,i,r,s,o){return qS.setScalar(0),$S.setScalar(0),XS.setScalar(0),qS.fromBufferAttribute(e,t),$S.fromBufferAttribute(e,i),XS.fromBufferAttribute(e,r),o.setScalar(0),o.addScaledVector(qS,s.x),o.addScaledVector($S,s.y),o.addScaledVector(XS,s.z),o}static isFrontFacing(e,t,i,r){return io.subVectors(i,t),la.subVectors(e,t),io.cross(la).dot(r)<0}set(e,t,i){return this.a.copy(e),this.b.copy(t),this.c.copy(i),this}setFromPointsAndIndices(e,t,i,r){return this.a.copy(e[t]),this.b.copy(e[i]),this.c.copy(e[r]),this}setFromAttributeAndIndices(e,t,i,r){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,i),this.c.fromBufferAttribute(e,r),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return io.subVectors(this.c,this.b),la.subVectors(this.a,this.b),io.cross(la).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return Yr.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return Yr.getBarycoord(e,this.a,this.b,this.c,t)}getInterpolation(e,t,i,r,s){return Yr.getInterpolation(e,this.a,this.b,this.c,t,i,r,s)}containsPoint(e){return Yr.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return Yr.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const i=this.a,r=this.b,s=this.c;let o,a;jh.subVectors(r,i),Fh.subVectors(s,i),HS.subVectors(e,i);const l=jh.dot(HS),c=Fh.dot(HS);if(l<=0&&c<=0)return t.copy(i);GS.subVectors(e,r);const u=jh.dot(GS),p=Fh.dot(GS);if(u>=0&&p<=u)return t.copy(r);const m=l*p-u*c;if(m<=0&&l>=0&&u<=0)return o=l/(l-u),t.copy(i).addScaledVector(jh,o);WS.subVectors(e,s);const g=jh.dot(WS),x=Fh.dot(WS);if(x>=0&&g<=x)return t.copy(s);const b=g*c-l*x;if(b<=0&&c>=0&&x<=0)return a=c/(c-x),t.copy(i).addScaledVector(Fh,a);const w=u*x-g*p;if(w<=0&&p-u>=0&&g-x>=0)return hD.subVectors(s,r),a=(p-u)/(p-u+(g-x)),t.copy(r).addScaledVector(hD,a);const v=1/(w+b+m);return o=b*v,a=m*v,t.copy(i).addScaledVector(jh,o).addScaledVector(Fh,a)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}const _4={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},cl={h:0,s:0,l:0},gv={h:0,s:0,l:0};function KS(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*6*(2/3-t):n}class st{constructor(e,t,i){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,t,i)}set(e,t,i){if(t===void 0&&i===void 0){const r=e;r&&r.isColor?this.copy(r):typeof r=="number"?this.setHex(r):typeof r=="string"&&this.setStyle(r)}else this.setRGB(e,t,i);return this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,t=qr){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,dn.toWorkingColorSpace(this,t),this}setRGB(e,t,i,r=dn.workingColorSpace){return this.r=e,this.g=t,this.b=i,dn.toWorkingColorSpace(this,r),this}setHSL(e,t,i,r=dn.workingColorSpace){if(e=oM(e,1),t=Lt(t,0,1),i=Lt(i,0,1),t===0)this.r=this.g=this.b=i;else{const s=i<=.5?i*(1+t):i+t-i*t,o=2*i-s;this.r=KS(o,s,e+1/3),this.g=KS(o,s,e),this.b=KS(o,s,e-1/3)}return dn.toWorkingColorSpace(this,r),this}setStyle(e,t=qr){function i(s){s!==void 0&&parseFloat(s)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let r;if(r=/^(\w+)\(([^\)]*)\)/.exec(e)){let s;const o=r[1],a=r[2];switch(o){case"rgb":case"rgba":if(s=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return i(s[4]),this.setRGB(Math.min(255,parseInt(s[1],10))/255,Math.min(255,parseInt(s[2],10))/255,Math.min(255,parseInt(s[3],10))/255,t);if(s=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return i(s[4]),this.setRGB(Math.min(100,parseInt(s[1],10))/100,Math.min(100,parseInt(s[2],10))/100,Math.min(100,parseInt(s[3],10))/100,t);break;case"hsl":case"hsla":if(s=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return i(s[4]),this.setHSL(parseFloat(s[1])/360,parseFloat(s[2])/100,parseFloat(s[3])/100,t);break;default:console.warn("THREE.Color: Unknown color model "+e)}}else if(r=/^\#([A-Fa-f\d]+)$/.exec(e)){const s=r[1],o=s.length;if(o===3)return this.setRGB(parseInt(s.charAt(0),16)/15,parseInt(s.charAt(1),16)/15,parseInt(s.charAt(2),16)/15,t);if(o===6)return this.setHex(parseInt(s,16),t);console.warn("THREE.Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,t);return this}setColorName(e,t=qr){const i=_4[e.toLowerCase()];return i!==void 0?this.setHex(i,t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=Ea(e.r),this.g=Ea(e.g),this.b=Ea(e.b),this}copyLinearToSRGB(e){return this.r=Vd(e.r),this.g=Vd(e.g),this.b=Vd(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=qr){return dn.fromWorkingColorSpace(ur.copy(this),e),Math.round(Lt(ur.r*255,0,255))*65536+Math.round(Lt(ur.g*255,0,255))*256+Math.round(Lt(ur.b*255,0,255))}getHexString(e=qr){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,t=dn.workingColorSpace){dn.fromWorkingColorSpace(ur.copy(this),t);const i=ur.r,r=ur.g,s=ur.b,o=Math.max(i,r,s),a=Math.min(i,r,s);let l,c;const u=(a+o)/2;if(a===o)l=0,c=0;else{const p=o-a;switch(c=u<=.5?p/(o+a):p/(2-o-a),o){case i:l=(r-s)/p+(r<s?6:0);break;case r:l=(s-i)/p+2;break;case s:l=(i-r)/p+4;break}l/=6}return e.h=l,e.s=c,e.l=u,e}getRGB(e,t=dn.workingColorSpace){return dn.fromWorkingColorSpace(ur.copy(this),t),e.r=ur.r,e.g=ur.g,e.b=ur.b,e}getStyle(e=qr){dn.fromWorkingColorSpace(ur.copy(this),e);const t=ur.r,i=ur.g,r=ur.b;return e!==qr?`color(${e} ${t.toFixed(3)} ${i.toFixed(3)} ${r.toFixed(3)})`:`rgb(${Math.round(t*255)},${Math.round(i*255)},${Math.round(r*255)})`}offsetHSL(e,t,i){return this.getHSL(cl),this.setHSL(cl.h+e,cl.s+t,cl.l+i)}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,i){return this.r=e.r+(t.r-e.r)*i,this.g=e.g+(t.g-e.g)*i,this.b=e.b+(t.b-e.b)*i,this}lerpHSL(e,t){this.getHSL(cl),e.getHSL(gv);const i=cm(cl.h,gv.h,t),r=cm(cl.s,gv.s,t),s=cm(cl.l,gv.l,t);return this.setHSL(i,r,s),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){const t=this.r,i=this.g,r=this.b,s=e.elements;return this.r=s[0]*t+s[3]*i+s[6]*r,this.g=s[1]*t+s[4]*i+s[7]*r,this.b=s[2]*t+s[5]*i+s[8]*r,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const ur=new st;st.NAMES=_4;let fQ=0;class Sr extends Ko{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:fQ++}),this.uuid=_s(),this.name="",this.type="Material",this.blending=Tu,this.side=Oa,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=P0,this.blendDst=R0,this.blendEquation=El,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new st(0,0,0),this.blendAlpha=0,this.depthFunc=Hu,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=m1,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=au,this.stencilZFail=au,this.stencilZPass=au,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(const t in e){const i=e[t];if(i===void 0){console.warn(`THREE.Material: parameter '${t}' has value of undefined.`);continue}const r=this[t];if(r===void 0){console.warn(`THREE.Material: '${t}' is not a property of THREE.${this.type}.`);continue}r&&r.isColor?r.set(i):r&&r.isVector3&&i&&i.isVector3?r.copy(i):this[t]=i}}toJSON(e){const t=e===void 0||typeof e=="string";t&&(e={textures:{},images:{}});const i={metadata:{version:4.6,type:"Material",generator:"Material.toJSON"}};i.uuid=this.uuid,i.type=this.type,this.name!==""&&(i.name=this.name),this.color&&this.color.isColor&&(i.color=this.color.getHex()),this.roughness!==void 0&&(i.roughness=this.roughness),this.metalness!==void 0&&(i.metalness=this.metalness),this.sheen!==void 0&&(i.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(i.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(i.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(i.emissive=this.emissive.getHex()),this.emissiveIntensity!==void 0&&this.emissiveIntensity!==1&&(i.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(i.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(i.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(i.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(i.shininess=this.shininess),this.clearcoat!==void 0&&(i.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(i.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(i.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(i.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(i.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,i.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.dispersion!==void 0&&(i.dispersion=this.dispersion),this.iridescence!==void 0&&(i.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(i.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(i.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(i.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(i.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.anisotropy!==void 0&&(i.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&&(i.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(i.anisotropyMap=this.anisotropyMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(i.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(i.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(i.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(i.lightMap=this.lightMap.toJSON(e).uuid,i.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(i.aoMap=this.aoMap.toJSON(e).uuid,i.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(i.bumpMap=this.bumpMap.toJSON(e).uuid,i.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(i.normalMap=this.normalMap.toJSON(e).uuid,i.normalMapType=this.normalMapType,i.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(i.displacementMap=this.displacementMap.toJSON(e).uuid,i.displacementScale=this.displacementScale,i.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(i.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(i.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(i.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(i.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(i.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(i.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(i.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(i.combine=this.combine)),this.envMapRotation!==void 0&&(i.envMapRotation=this.envMapRotation.toArray()),this.envMapIntensity!==void 0&&(i.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(i.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(i.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(i.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(i.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(i.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(i.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(i.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(i.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(i.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(i.size=this.size),this.shadowSide!==null&&(i.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(i.sizeAttenuation=this.sizeAttenuation),this.blending!==Tu&&(i.blending=this.blending),this.side!==Oa&&(i.side=this.side),this.vertexColors===!0&&(i.vertexColors=!0),this.opacity<1&&(i.opacity=this.opacity),this.transparent===!0&&(i.transparent=!0),this.blendSrc!==P0&&(i.blendSrc=this.blendSrc),this.blendDst!==R0&&(i.blendDst=this.blendDst),this.blendEquation!==El&&(i.blendEquation=this.blendEquation),this.blendSrcAlpha!==null&&(i.blendSrcAlpha=this.blendSrcAlpha),this.blendDstAlpha!==null&&(i.blendDstAlpha=this.blendDstAlpha),this.blendEquationAlpha!==null&&(i.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(i.blendColor=this.blendColor.getHex()),this.blendAlpha!==0&&(i.blendAlpha=this.blendAlpha),this.depthFunc!==Hu&&(i.depthFunc=this.depthFunc),this.depthTest===!1&&(i.depthTest=this.depthTest),this.depthWrite===!1&&(i.depthWrite=this.depthWrite),this.colorWrite===!1&&(i.colorWrite=this.colorWrite),this.stencilWriteMask!==255&&(i.stencilWriteMask=this.stencilWriteMask),this.stencilFunc!==m1&&(i.stencilFunc=this.stencilFunc),this.stencilRef!==0&&(i.stencilRef=this.stencilRef),this.stencilFuncMask!==255&&(i.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==au&&(i.stencilFail=this.stencilFail),this.stencilZFail!==au&&(i.stencilZFail=this.stencilZFail),this.stencilZPass!==au&&(i.stencilZPass=this.stencilZPass),this.stencilWrite===!0&&(i.stencilWrite=this.stencilWrite),this.rotation!==void 0&&this.rotation!==0&&(i.rotation=this.rotation),this.polygonOffset===!0&&(i.polygonOffset=!0),this.polygonOffsetFactor!==0&&(i.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(i.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(i.linewidth=this.linewidth),this.dashSize!==void 0&&(i.dashSize=this.dashSize),this.gapSize!==void 0&&(i.gapSize=this.gapSize),this.scale!==void 0&&(i.scale=this.scale),this.dithering===!0&&(i.dithering=!0),this.alphaTest>0&&(i.alphaTest=this.alphaTest),this.alphaHash===!0&&(i.alphaHash=!0),this.alphaToCoverage===!0&&(i.alphaToCoverage=!0),this.premultipliedAlpha===!0&&(i.premultipliedAlpha=!0),this.forceSinglePass===!0&&(i.forceSinglePass=!0),this.wireframe===!0&&(i.wireframe=!0),this.wireframeLinewidth>1&&(i.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(i.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(i.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(i.flatShading=!0),this.visible===!1&&(i.visible=!1),this.toneMapped===!1&&(i.toneMapped=!1),this.fog===!1&&(i.fog=!1),Object.keys(this.userData).length>0&&(i.userData=this.userData);function r(s){const o=[];for(const a in s){const l=s[a];delete l.metadata,o.push(l)}return o}if(t){const s=r(e.textures),o=r(e.images);s.length>0&&(i.textures=s),o.length>0&&(i.images=o)}return i}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.blendColor.copy(e.blendColor),this.blendAlpha=e.blendAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let i=null;if(t!==null){const r=t.length;i=new Array(r);for(let s=0;s!==r;++s)i[s]=t[s].clone()}return this.clippingPlanes=i,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaHash=e.alphaHash,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}onBuild(){console.warn("Material: onBuild() has been removed.")}}class yc extends Sr{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new st(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Ss,this.combine=jg,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const pa=pQ();function pQ(){const n=new ArrayBuffer(4),e=new Float32Array(n),t=new Uint32Array(n),i=new Uint32Array(512),r=new Uint32Array(512);for(let l=0;l<256;++l){const c=l-127;c<-27?(i[l]=0,i[l|256]=32768,r[l]=24,r[l|256]=24):c<-14?(i[l]=1024>>-c-14,i[l|256]=1024>>-c-14|32768,r[l]=-c-1,r[l|256]=-c-1):c<=15?(i[l]=c+15<<10,i[l|256]=c+15<<10|32768,r[l]=13,r[l|256]=13):c<128?(i[l]=31744,i[l|256]=64512,r[l]=24,r[l|256]=24):(i[l]=31744,i[l|256]=64512,r[l]=13,r[l|256]=13)}const s=new Uint32Array(2048),o=new Uint32Array(64),a=new Uint32Array(64);for(let l=1;l<1024;++l){let c=l<<13,u=0;for(;!(c&8388608);)c<<=1,u-=8388608;c&=-8388609,u+=947912704,s[l]=c|u}for(let l=1024;l<2048;++l)s[l]=939524096+(l-1024<<13);for(let l=1;l<31;++l)o[l]=l<<23;o[31]=1199570944,o[32]=2147483648;for(let l=33;l<63;++l)o[l]=2147483648+(l-32<<23);o[63]=3347054592;for(let l=1;l<64;++l)l!==32&&(a[l]=1024);return{floatView:e,uint32View:t,baseTable:i,shiftTable:r,mantissaTable:s,exponentTable:o,offsetTable:a}}function Gr(n){Math.abs(n)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),n=Lt(n,-65504,65504),pa.floatView[0]=n;const e=pa.uint32View[0],t=e>>23&511;return pa.baseTable[t]+((e&8388607)>>pa.shiftTable[t])}function Op(n){const e=n>>10;return pa.uint32View[0]=pa.mantissaTable[pa.offsetTable[e]+(n&1023)]+pa.exponentTable[e],pa.floatView[0]}class mQ{static toHalfFloat(e){return Gr(e)}static fromHalfFloat(e){return Op(e)}}const mi=new K,yv=new Ie;let gQ=0;class In{constructor(e,t,i=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,Object.defineProperty(this,"id",{value:gQ++}),this.name="",this.array=e,this.itemSize=t,this.count=e!==void 0?e.length/t:0,this.normalized=i,this.usage=ng,this.updateRanges=[],this.gpuType=Qr,this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}copyAt(e,t,i){e*=this.itemSize,i*=t.itemSize;for(let r=0,s=this.itemSize;r<s;r++)this.array[e+r]=t.array[i+r];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let t=0,i=this.count;t<i;t++)yv.fromBufferAttribute(this,t),yv.applyMatrix3(e),this.setXY(t,yv.x,yv.y);else if(this.itemSize===3)for(let t=0,i=this.count;t<i;t++)mi.fromBufferAttribute(this,t),mi.applyMatrix3(e),this.setXYZ(t,mi.x,mi.y,mi.z);return this}applyMatrix4(e){for(let t=0,i=this.count;t<i;t++)mi.fromBufferAttribute(this,t),mi.applyMatrix4(e),this.setXYZ(t,mi.x,mi.y,mi.z);return this}applyNormalMatrix(e){for(let t=0,i=this.count;t<i;t++)mi.fromBufferAttribute(this,t),mi.applyNormalMatrix(e),this.setXYZ(t,mi.x,mi.y,mi.z);return this}transformDirection(e){for(let t=0,i=this.count;t<i;t++)mi.fromBufferAttribute(this,t),mi.transformDirection(e),this.setXYZ(t,mi.x,mi.y,mi.z);return this}set(e,t=0){return this.array.set(e,t),this}getComponent(e,t){let i=this.array[e*this.itemSize+t];return this.normalized&&(i=Nr(i,this.array)),i}setComponent(e,t,i){return this.normalized&&(i=Ht(i,this.array)),this.array[e*this.itemSize+t]=i,this}getX(e){let t=this.array[e*this.itemSize];return this.normalized&&(t=Nr(t,this.array)),t}setX(e,t){return this.normalized&&(t=Ht(t,this.array)),this.array[e*this.itemSize]=t,this}getY(e){let t=this.array[e*this.itemSize+1];return this.normalized&&(t=Nr(t,this.array)),t}setY(e,t){return this.normalized&&(t=Ht(t,this.array)),this.array[e*this.itemSize+1]=t,this}getZ(e){let t=this.array[e*this.itemSize+2];return this.normalized&&(t=Nr(t,this.array)),t}setZ(e,t){return this.normalized&&(t=Ht(t,this.array)),this.array[e*this.itemSize+2]=t,this}getW(e){let t=this.array[e*this.itemSize+3];return this.normalized&&(t=Nr(t,this.array)),t}setW(e,t){return this.normalized&&(t=Ht(t,this.array)),this.array[e*this.itemSize+3]=t,this}setXY(e,t,i){return e*=this.itemSize,this.normalized&&(t=Ht(t,this.array),i=Ht(i,this.array)),this.array[e+0]=t,this.array[e+1]=i,this}setXYZ(e,t,i,r){return e*=this.itemSize,this.normalized&&(t=Ht(t,this.array),i=Ht(i,this.array),r=Ht(r,this.array)),this.array[e+0]=t,this.array[e+1]=i,this.array[e+2]=r,this}setXYZW(e,t,i,r,s){return e*=this.itemSize,this.normalized&&(t=Ht(t,this.array),i=Ht(i,this.array),r=Ht(r,this.array),s=Ht(s,this.array)),this.array[e+0]=t,this.array[e+1]=i,this.array[e+2]=r,this.array[e+3]=s,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==ng&&(e.usage=this.usage),e}}class yQ extends In{constructor(e,t,i){super(new Int8Array(e),t,i)}}class vQ extends In{constructor(e,t,i){super(new Uint8Array(e),t,i)}}class xQ extends In{constructor(e,t,i){super(new Uint8ClampedArray(e),t,i)}}class _Q extends In{constructor(e,t,i){super(new Int16Array(e),t,i)}}class aM extends In{constructor(e,t,i){super(new Uint16Array(e),t,i)}}class wQ extends In{constructor(e,t,i){super(new Int32Array(e),t,i)}}class lM extends In{constructor(e,t,i){super(new Uint32Array(e),t,i)}}class bQ extends In{constructor(e,t,i){super(new Uint16Array(e),t,i),this.isFloat16BufferAttribute=!0}getX(e){let t=Op(this.array[e*this.itemSize]);return this.normalized&&(t=Nr(t,this.array)),t}setX(e,t){return this.normalized&&(t=Ht(t,this.array)),this.array[e*this.itemSize]=Gr(t),this}getY(e){let t=Op(this.array[e*this.itemSize+1]);return this.normalized&&(t=Nr(t,this.array)),t}setY(e,t){return this.normalized&&(t=Ht(t,this.array)),this.array[e*this.itemSize+1]=Gr(t),this}getZ(e){let t=Op(this.array[e*this.itemSize+2]);return this.normalized&&(t=Nr(t,this.array)),t}setZ(e,t){return this.normalized&&(t=Ht(t,this.array)),this.array[e*this.itemSize+2]=Gr(t),this}getW(e){let t=Op(this.array[e*this.itemSize+3]);return this.normalized&&(t=Nr(t,this.array)),t}setW(e,t){return this.normalized&&(t=Ht(t,this.array)),this.array[e*this.itemSize+3]=Gr(t),this}setXY(e,t,i){return e*=this.itemSize,this.normalized&&(t=Ht(t,this.array),i=Ht(i,this.array)),this.array[e+0]=Gr(t),this.array[e+1]=Gr(i),this}setXYZ(e,t,i,r){return e*=this.itemSize,this.normalized&&(t=Ht(t,this.array),i=Ht(i,this.array),r=Ht(r,this.array)),this.array[e+0]=Gr(t),this.array[e+1]=Gr(i),this.array[e+2]=Gr(r),this}setXYZW(e,t,i,r,s){return e*=this.itemSize,this.normalized&&(t=Ht(t,this.array),i=Ht(i,this.array),r=Ht(r,this.array),s=Ht(s,this.array)),this.array[e+0]=Gr(t),this.array[e+1]=Gr(i),this.array[e+2]=Gr(r),this.array[e+3]=Gr(s),this}}class ft extends In{constructor(e,t,i){super(new Float32Array(e),t,i)}}let SQ=0;const Os=new At,YS=new yn,Vh=new K,ps=new kr,dp=new kr,ki=new K;class Xt extends Ko{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:SQ++}),this.uuid=_s(),this.name="",this.type="BufferGeometry",this.index=null,this.indirect=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(y4(e)?lM:aM)(e,1):this.index=e,this}setIndirect(e){return this.indirect=e,this}getIndirect(){return this.indirect}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,t,i=0){this.groups.push({start:e,count:t,materialIndex:i})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;t!==void 0&&(t.applyMatrix4(e),t.needsUpdate=!0);const i=this.attributes.normal;if(i!==void 0){const s=new Bt().getNormalMatrix(e);i.applyNormalMatrix(s),i.needsUpdate=!0}const r=this.attributes.tangent;return r!==void 0&&(r.transformDirection(e),r.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return Os.makeRotationFromQuaternion(e),this.applyMatrix4(Os),this}rotateX(e){return Os.makeRotationX(e),this.applyMatrix4(Os),this}rotateY(e){return Os.makeRotationY(e),this.applyMatrix4(Os),this}rotateZ(e){return Os.makeRotationZ(e),this.applyMatrix4(Os),this}translate(e,t,i){return Os.makeTranslation(e,t,i),this.applyMatrix4(Os),this}scale(e,t,i){return Os.makeScale(e,t,i),this.applyMatrix4(Os),this}lookAt(e){return YS.lookAt(e),YS.updateMatrix(),this.applyMatrix4(YS.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(Vh).negate(),this.translate(Vh.x,Vh.y,Vh.z),this}setFromPoints(e){const t=this.getAttribute("position");if(t===void 0){const i=[];for(let r=0,s=e.length;r<s;r++){const o=e[r];i.push(o.x,o.y,o.z||0)}this.setAttribute("position",new ft(i,3))}else{const i=Math.min(e.length,t.count);for(let r=0;r<i;r++){const s=e[r];t.setXYZ(r,s.x,s.y,s.z||0)}e.length>t.count&&console.warn("THREE.BufferGeometry: Buffer size too small for points data. Use .dispose() and create a new geometry."),t.needsUpdate=!0}return this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new kr);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box.",this),this.boundingBox.set(new K(-1/0,-1/0,-1/0),new K(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),t)for(let i=0,r=t.length;i<r;i++){const s=t[i];ps.setFromBufferAttribute(s),this.morphTargetsRelative?(ki.addVectors(this.boundingBox.min,ps.min),this.boundingBox.expandByPoint(ki),ki.addVectors(this.boundingBox.max,ps.max),this.boundingBox.expandByPoint(ki)):(this.boundingBox.expandByPoint(ps.min),this.boundingBox.expandByPoint(ps.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new _r);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere.",this),this.boundingSphere.set(new K,1/0);return}if(e){const i=this.boundingSphere.center;if(ps.setFromBufferAttribute(e),t)for(let s=0,o=t.length;s<o;s++){const a=t[s];dp.setFromBufferAttribute(a),this.morphTargetsRelative?(ki.addVectors(ps.min,dp.min),ps.expandByPoint(ki),ki.addVectors(ps.max,dp.max),ps.expandByPoint(ki)):(ps.expandByPoint(dp.min),ps.expandByPoint(dp.max))}ps.getCenter(i);let r=0;for(let s=0,o=e.count;s<o;s++)ki.fromBufferAttribute(e,s),r=Math.max(r,i.distanceToSquared(ki));if(t)for(let s=0,o=t.length;s<o;s++){const a=t[s],l=this.morphTargetsRelative;for(let c=0,u=a.count;c<u;c++)ki.fromBufferAttribute(a,c),l&&(Vh.fromBufferAttribute(e,c),ki.add(Vh)),r=Math.max(r,i.distanceToSquared(ki))}this.boundingSphere.radius=Math.sqrt(r),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,t=this.attributes;if(e===null||t.position===void 0||t.normal===void 0||t.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const i=t.position,r=t.normal,s=t.uv;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new In(new Float32Array(4*i.count),4));const o=this.getAttribute("tangent"),a=[],l=[];for(let P=0;P<i.count;P++)a[P]=new K,l[P]=new K;const c=new K,u=new K,p=new K,m=new Ie,g=new Ie,x=new Ie,b=new K,w=new K;function v(P,A,M){c.fromBufferAttribute(i,P),u.fromBufferAttribute(i,A),p.fromBufferAttribute(i,M),m.fromBufferAttribute(s,P),g.fromBufferAttribute(s,A),x.fromBufferAttribute(s,M),u.sub(c),p.sub(c),g.sub(m),x.sub(m);const D=1/(g.x*x.y-x.x*g.y);isFinite(D)&&(b.copy(u).multiplyScalar(x.y).addScaledVector(p,-g.y).multiplyScalar(D),w.copy(p).multiplyScalar(g.x).addScaledVector(u,-x.x).multiplyScalar(D),a[P].add(b),a[A].add(b),a[M].add(b),l[P].add(w),l[A].add(w),l[M].add(w))}let S=this.groups;S.length===0&&(S=[{start:0,count:e.count}]);for(let P=0,A=S.length;P<A;++P){const M=S[P],D=M.start,z=M.count;for(let F=D,re=D+z;F<re;F+=3)v(e.getX(F+0),e.getX(F+1),e.getX(F+2))}const E=new K,C=new K,U=new K,O=new K;function N(P){U.fromBufferAttribute(r,P),O.copy(U);const A=a[P];E.copy(A),E.sub(U.multiplyScalar(U.dot(A))).normalize(),C.crossVectors(O,A);const D=C.dot(l[P])<0?-1:1;o.setXYZW(P,E.x,E.y,E.z,D)}for(let P=0,A=S.length;P<A;++P){const M=S[P],D=M.start,z=M.count;for(let F=D,re=D+z;F<re;F+=3)N(e.getX(F+0)),N(e.getX(F+1)),N(e.getX(F+2))}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(t!==void 0){let i=this.getAttribute("normal");if(i===void 0)i=new In(new Float32Array(t.count*3),3),this.setAttribute("normal",i);else for(let m=0,g=i.count;m<g;m++)i.setXYZ(m,0,0,0);const r=new K,s=new K,o=new K,a=new K,l=new K,c=new K,u=new K,p=new K;if(e)for(let m=0,g=e.count;m<g;m+=3){const x=e.getX(m+0),b=e.getX(m+1),w=e.getX(m+2);r.fromBufferAttribute(t,x),s.fromBufferAttribute(t,b),o.fromBufferAttribute(t,w),u.subVectors(o,s),p.subVectors(r,s),u.cross(p),a.fromBufferAttribute(i,x),l.fromBufferAttribute(i,b),c.fromBufferAttribute(i,w),a.add(u),l.add(u),c.add(u),i.setXYZ(x,a.x,a.y,a.z),i.setXYZ(b,l.x,l.y,l.z),i.setXYZ(w,c.x,c.y,c.z)}else for(let m=0,g=t.count;m<g;m+=3)r.fromBufferAttribute(t,m+0),s.fromBufferAttribute(t,m+1),o.fromBufferAttribute(t,m+2),u.subVectors(o,s),p.subVectors(r,s),u.cross(p),i.setXYZ(m+0,u.x,u.y,u.z),i.setXYZ(m+1,u.x,u.y,u.z),i.setXYZ(m+2,u.x,u.y,u.z);this.normalizeNormals(),i.needsUpdate=!0}}normalizeNormals(){const e=this.attributes.normal;for(let t=0,i=e.count;t<i;t++)ki.fromBufferAttribute(e,t),ki.normalize(),e.setXYZ(t,ki.x,ki.y,ki.z)}toNonIndexed(){function e(a,l){const c=a.array,u=a.itemSize,p=a.normalized,m=new c.constructor(l.length*u);let g=0,x=0;for(let b=0,w=l.length;b<w;b++){a.isInterleavedBufferAttribute?g=l[b]*a.data.stride+a.offset:g=l[b]*u;for(let v=0;v<u;v++)m[x++]=c[g++]}return new In(m,u,p)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new Xt,i=this.index.array,r=this.attributes;for(const a in r){const l=r[a],c=e(l,i);t.setAttribute(a,c)}const s=this.morphAttributes;for(const a in s){const l=[],c=s[a];for(let u=0,p=c.length;u<p;u++){const m=c[u],g=e(m,i);l.push(g)}t.morphAttributes[a]=l}t.morphTargetsRelative=this.morphTargetsRelative;const o=this.groups;for(let a=0,l=o.length;a<l;a++){const c=o[a];t.addGroup(c.start,c.count,c.materialIndex)}return t}toJSON(){const e={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const l=this.parameters;for(const c in l)l[c]!==void 0&&(e[c]=l[c]);return e}e.data={attributes:{}};const t=this.index;t!==null&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const i=this.attributes;for(const l in i){const c=i[l];e.data.attributes[l]=c.toJSON(e.data)}const r={};let s=!1;for(const l in this.morphAttributes){const c=this.morphAttributes[l],u=[];for(let p=0,m=c.length;p<m;p++){const g=c[p];u.push(g.toJSON(e.data))}u.length>0&&(r[l]=u,s=!0)}s&&(e.data.morphAttributes=r,e.data.morphTargetsRelative=this.morphTargetsRelative);const o=this.groups;o.length>0&&(e.data.groups=JSON.parse(JSON.stringify(o)));const a=this.boundingSphere;return a!==null&&(e.data.boundingSphere={center:a.center.toArray(),radius:a.radius}),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const i=e.index;i!==null&&this.setIndex(i.clone(t));const r=e.attributes;for(const c in r){const u=r[c];this.setAttribute(c,u.clone(t))}const s=e.morphAttributes;for(const c in s){const u=[],p=s[c];for(let m=0,g=p.length;m<g;m++)u.push(p[m].clone(t));this.morphAttributes[c]=u}this.morphTargetsRelative=e.morphTargetsRelative;const o=e.groups;for(let c=0,u=o.length;c<u;c++){const p=o[c];this.addGroup(p.start,p.count,p.materialIndex)}const a=e.boundingBox;a!==null&&(this.boundingBox=a.clone());const l=e.boundingSphere;return l!==null&&(this.boundingSphere=l.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const dD=new At,Wc=new Ef,vv=new _r,fD=new K,xv=new K,_v=new K,wv=new K,JS=new K,bv=new K,pD=new K,Sv=new K;class _i extends yn{constructor(e=new Xt,t=new yc){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}updateMorphTargets(){const t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){const r=t[i[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=r.length;s<o;s++){const a=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}getVertexPosition(e,t){const i=this.geometry,r=i.attributes.position,s=i.morphAttributes.position,o=i.morphTargetsRelative;t.fromBufferAttribute(r,e);const a=this.morphTargetInfluences;if(s&&a){bv.set(0,0,0);for(let l=0,c=s.length;l<c;l++){const u=a[l],p=s[l];u!==0&&(JS.fromBufferAttribute(p,e),o?bv.addScaledVector(JS,u):bv.addScaledVector(JS.sub(t),u))}t.add(bv)}return t}raycast(e,t){const i=this.geometry,r=this.material,s=this.matrixWorld;r!==void 0&&(i.boundingSphere===null&&i.computeBoundingSphere(),vv.copy(i.boundingSphere),vv.applyMatrix4(s),Wc.copy(e.ray).recast(e.near),!(vv.containsPoint(Wc.origin)===!1&&(Wc.intersectSphere(vv,fD)===null||Wc.origin.distanceToSquared(fD)>(e.far-e.near)**2))&&(dD.copy(s).invert(),Wc.copy(e.ray).applyMatrix4(dD),!(i.boundingBox!==null&&Wc.intersectsBox(i.boundingBox)===!1)&&this._computeIntersections(e,t,Wc)))}_computeIntersections(e,t,i){let r;const s=this.geometry,o=this.material,a=s.index,l=s.attributes.position,c=s.attributes.uv,u=s.attributes.uv1,p=s.attributes.normal,m=s.groups,g=s.drawRange;if(a!==null)if(Array.isArray(o))for(let x=0,b=m.length;x<b;x++){const w=m[x],v=o[w.materialIndex],S=Math.max(w.start,g.start),E=Math.min(a.count,Math.min(w.start+w.count,g.start+g.count));for(let C=S,U=E;C<U;C+=3){const O=a.getX(C),N=a.getX(C+1),P=a.getX(C+2);r=Tv(this,v,e,i,c,u,p,O,N,P),r&&(r.faceIndex=Math.floor(C/3),r.face.materialIndex=w.materialIndex,t.push(r))}}else{const x=Math.max(0,g.start),b=Math.min(a.count,g.start+g.count);for(let w=x,v=b;w<v;w+=3){const S=a.getX(w),E=a.getX(w+1),C=a.getX(w+2);r=Tv(this,o,e,i,c,u,p,S,E,C),r&&(r.faceIndex=Math.floor(w/3),t.push(r))}}else if(l!==void 0)if(Array.isArray(o))for(let x=0,b=m.length;x<b;x++){const w=m[x],v=o[w.materialIndex],S=Math.max(w.start,g.start),E=Math.min(l.count,Math.min(w.start+w.count,g.start+g.count));for(let C=S,U=E;C<U;C+=3){const O=C,N=C+1,P=C+2;r=Tv(this,v,e,i,c,u,p,O,N,P),r&&(r.faceIndex=Math.floor(C/3),r.face.materialIndex=w.materialIndex,t.push(r))}}else{const x=Math.max(0,g.start),b=Math.min(l.count,g.start+g.count);for(let w=x,v=b;w<v;w+=3){const S=w,E=w+1,C=w+2;r=Tv(this,o,e,i,c,u,p,S,E,C),r&&(r.faceIndex=Math.floor(w/3),t.push(r))}}}}function TQ(n,e,t,i,r,s,o,a){let l;if(e.side===Lr?l=i.intersectTriangle(o,s,r,!0,a):l=i.intersectTriangle(r,s,o,e.side===Oa,a),l===null)return null;Sv.copy(a),Sv.applyMatrix4(n.matrixWorld);const c=t.ray.origin.distanceTo(Sv);return c<t.near||c>t.far?null:{distance:c,point:Sv.clone(),object:n}}function Tv(n,e,t,i,r,s,o,a,l,c){n.getVertexPosition(a,xv),n.getVertexPosition(l,_v),n.getVertexPosition(c,wv);const u=TQ(n,e,t,i,xv,_v,wv,pD);if(u){const p=new K;Yr.getBarycoord(pD,xv,_v,wv,p),r&&(u.uv=Yr.getInterpolatedAttribute(r,a,l,c,p,new Ie)),s&&(u.uv1=Yr.getInterpolatedAttribute(s,a,l,c,p,new Ie)),o&&(u.normal=Yr.getInterpolatedAttribute(o,a,l,c,p,new K),u.normal.dot(i.direction)>0&&u.normal.multiplyScalar(-1));const m={a,b:l,c,normal:new K,materialIndex:0};Yr.getNormal(xv,_v,wv,m.normal),u.face=m,u.barycoord=p}return u}class th extends Xt{constructor(e=1,t=1,i=1,r=1,s=1,o=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:i,widthSegments:r,heightSegments:s,depthSegments:o};const a=this;r=Math.floor(r),s=Math.floor(s),o=Math.floor(o);const l=[],c=[],u=[],p=[];let m=0,g=0;x("z","y","x",-1,-1,i,t,e,o,s,0),x("z","y","x",1,-1,i,t,-e,o,s,1),x("x","z","y",1,1,e,i,t,r,o,2),x("x","z","y",1,-1,e,i,-t,r,o,3),x("x","y","z",1,-1,e,t,i,r,s,4),x("x","y","z",-1,-1,e,t,-i,r,s,5),this.setIndex(l),this.setAttribute("position",new ft(c,3)),this.setAttribute("normal",new ft(u,3)),this.setAttribute("uv",new ft(p,2));function x(b,w,v,S,E,C,U,O,N,P,A){const M=C/N,D=U/P,z=C/2,F=U/2,re=O/2,le=N+1,he=P+1;let ue=0,q=0;const Q=new K;for(let j=0;j<he;j++){const J=j*D-F;for(let ce=0;ce<le;ce++){const me=ce*M-z;Q[b]=me*S,Q[w]=J*E,Q[v]=re,c.push(Q.x,Q.y,Q.z),Q[b]=0,Q[w]=0,Q[v]=O>0?1:-1,u.push(Q.x,Q.y,Q.z),p.push(ce/N),p.push(1-j/P),ue+=1}}for(let j=0;j<P;j++)for(let J=0;J<N;J++){const ce=m+J+le*j,me=m+J+le*(j+1),oe=m+(J+1)+le*(j+1),ye=m+(J+1)+le*j;l.push(ce,me,ye),l.push(me,oe,ye),q+=6}a.addGroup(g,q,A),g+=q,m+=ue}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new th(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function of(n){const e={};for(const t in n){e[t]={};for(const i in n[t]){const r=n[t][i];r&&(r.isColor||r.isMatrix3||r.isMatrix4||r.isVector2||r.isVector3||r.isVector4||r.isTexture||r.isQuaternion)?r.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),e[t][i]=null):e[t][i]=r.clone():Array.isArray(r)?e[t][i]=r.slice():e[t][i]=r}}return e}function Pr(n){const e={};for(let t=0;t<n.length;t++){const i=of(n[t]);for(const r in i)e[r]=i[r]}return e}function EQ(n){const e=[];for(let t=0;t<n.length;t++)e.push(n[t].clone());return e}function w4(n){const e=n.getRenderTarget();return e===null?n.outputColorSpace:e.isXRRenderTarget===!0?e.texture.colorSpace:dn.workingColorSpace}const b4={clone:of,merge:Pr};var CQ=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,AQ=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class _o extends Sr{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=CQ,this.fragmentShader=AQ,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={clipCullDistance:!1,multiDraw:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=of(e.uniforms),this.uniformsGroups=EQ(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const r in this.uniforms){const o=this.uniforms[r].value;o&&o.isTexture?t.uniforms[r]={type:"t",value:o.toJSON(e).uuid}:o&&o.isColor?t.uniforms[r]={type:"c",value:o.getHex()}:o&&o.isVector2?t.uniforms[r]={type:"v2",value:o.toArray()}:o&&o.isVector3?t.uniforms[r]={type:"v3",value:o.toArray()}:o&&o.isVector4?t.uniforms[r]={type:"v4",value:o.toArray()}:o&&o.isMatrix3?t.uniforms[r]={type:"m3",value:o.toArray()}:o&&o.isMatrix4?t.uniforms[r]={type:"m4",value:o.toArray()}:t.uniforms[r]={value:o}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader,t.lights=this.lights,t.clipping=this.clipping;const i={};for(const r in this.extensions)this.extensions[r]===!0&&(i[r]=!0);return Object.keys(i).length>0&&(t.extensions=i),t}}class Bg extends yn{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new At,this.projectionMatrix=new At,this.projectionMatrixInverse=new At,this.coordinateSystem=ho}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}getWorldDirection(e){return super.getWorldDirection(e).negate()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}const ul=new K,mD=new Ie,gD=new Ie;class yi extends Bg{constructor(e=50,t=1,i=.1,r=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=i,this.far=r,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=sf*2*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(Au*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return sf*2*Math.atan(Math.tan(Au*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}getViewBounds(e,t,i){ul.set(-1,-1,.5).applyMatrix4(this.projectionMatrixInverse),t.set(ul.x,ul.y).multiplyScalar(-e/ul.z),ul.set(1,1,.5).applyMatrix4(this.projectionMatrixInverse),i.set(ul.x,ul.y).multiplyScalar(-e/ul.z)}getViewSize(e,t){return this.getViewBounds(e,mD,gD),t.subVectors(gD,mD)}setViewOffset(e,t,i,r,s,o){this.aspect=e/t,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=r,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(Au*.5*this.fov)/this.zoom,i=2*t,r=this.aspect*i,s=-.5*r;const o=this.view;if(this.view!==null&&this.view.enabled){const l=o.fullWidth,c=o.fullHeight;s+=o.offsetX*r/l,t-=o.offsetY*i/c,r*=o.width/l,i*=o.height/c}const a=this.filmOffset;a!==0&&(s+=e*a/this.getFilmWidth()),this.projectionMatrix.makePerspective(s,s+r,t,t-i,e,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,this.view!==null&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}const Bh=-90,zh=1;class cM extends yn{constructor(e,t,i){super(),this.type="CubeCamera",this.renderTarget=i,this.coordinateSystem=null,this.activeMipmapLevel=0;const r=new yi(Bh,zh,e,t);r.layers=this.layers,this.add(r);const s=new yi(Bh,zh,e,t);s.layers=this.layers,this.add(s);const o=new yi(Bh,zh,e,t);o.layers=this.layers,this.add(o);const a=new yi(Bh,zh,e,t);a.layers=this.layers,this.add(a);const l=new yi(Bh,zh,e,t);l.layers=this.layers,this.add(l);const c=new yi(Bh,zh,e,t);c.layers=this.layers,this.add(c)}updateCoordinateSystem(){const e=this.coordinateSystem,t=this.children.concat(),[i,r,s,o,a,l]=t;for(const c of t)this.remove(c);if(e===ho)i.up.set(0,1,0),i.lookAt(1,0,0),r.up.set(0,1,0),r.lookAt(-1,0,0),s.up.set(0,0,-1),s.lookAt(0,1,0),o.up.set(0,0,1),o.lookAt(0,-1,0),a.up.set(0,1,0),a.lookAt(0,0,1),l.up.set(0,1,0),l.lookAt(0,0,-1);else if(e===ig)i.up.set(0,-1,0),i.lookAt(-1,0,0),r.up.set(0,-1,0),r.lookAt(1,0,0),s.up.set(0,0,1),s.lookAt(0,1,0),o.up.set(0,0,-1),o.lookAt(0,-1,0),a.up.set(0,-1,0),a.lookAt(0,0,1),l.up.set(0,-1,0),l.lookAt(0,0,-1);else throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+e);for(const c of t)this.add(c),c.updateMatrixWorld()}update(e,t){this.parent===null&&this.updateMatrixWorld();const{renderTarget:i,activeMipmapLevel:r}=this;this.coordinateSystem!==e.coordinateSystem&&(this.coordinateSystem=e.coordinateSystem,this.updateCoordinateSystem());const[s,o,a,l,c,u]=this.children,p=e.getRenderTarget(),m=e.getActiveCubeFace(),g=e.getActiveMipmapLevel(),x=e.xr.enabled;e.xr.enabled=!1;const b=i.texture.generateMipmaps;i.texture.generateMipmaps=!1,e.setRenderTarget(i,0,r),e.render(t,s),e.setRenderTarget(i,1,r),e.render(t,o),e.setRenderTarget(i,2,r),e.render(t,a),e.setRenderTarget(i,3,r),e.render(t,l),e.setRenderTarget(i,4,r),e.render(t,c),i.texture.generateMipmaps=b,e.setRenderTarget(i,5,r),e.render(t,u),e.setRenderTarget(p,m,g),e.xr.enabled=x,i.texture.needsPMREMUpdate=!0}}class zg extends ti{constructor(e,t,i,r,s,o,a,l,c,u){e=e!==void 0?e:[],t=t!==void 0?t:Ua,super(e,t,i,r,s,o,a,l,c,u),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class uM extends Xo{constructor(e=1,t={}){super(e,e,t),this.isWebGLCubeRenderTarget=!0;const i={width:e,height:e,depth:1},r=[i,i,i,i,i,i];this.texture=new zg(r,t.mapping,t.wrapS,t.wrapT,t.magFilter,t.minFilter,t.format,t.type,t.anisotropy,t.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=t.generateMipmaps!==void 0?t.generateMipmaps:!1,this.texture.minFilter=t.minFilter!==void 0?t.minFilter:Mi}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.colorSpace=t.colorSpace,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const i={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},r=new th(5,5,5),s=new _o({name:"CubemapFromEquirect",uniforms:of(i.uniforms),vertexShader:i.vertexShader,fragmentShader:i.fragmentShader,side:Lr,blending:Ta});s.uniforms.tEquirect.value=t;const o=new _i(r,s),a=t.minFilter;return t.minFilter===Do&&(t.minFilter=Mi),new cM(1,10,this).update(e,o),t.minFilter=a,o.geometry.dispose(),o.material.dispose(),this}clear(e,t,i,r){const s=e.getRenderTarget();for(let o=0;o<6;o++)e.setRenderTarget(this,o),e.clear(t,i,r);e.setRenderTarget(s)}}class _d extends yn{constructor(){super(),this.isGroup=!0,this.type="Group"}}const MQ={type:"move"};class Nx{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new _d,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new _d,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new K,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new K),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new _d,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new K,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new K),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const t=this._hand;if(t)for(const i of e.hand.values())this._getHandJoint(t,i)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,t,i){let r=null,s=null,o=null;const a=this._targetRay,l=this._grip,c=this._hand;if(e&&t.session.visibilityState!=="visible-blurred"){if(c&&e.hand){o=!0;for(const b of e.hand.values()){const w=t.getJointPose(b,i),v=this._getHandJoint(c,b);w!==null&&(v.matrix.fromArray(w.transform.matrix),v.matrix.decompose(v.position,v.rotation,v.scale),v.matrixWorldNeedsUpdate=!0,v.jointRadius=w.radius),v.visible=w!==null}const u=c.joints["index-finger-tip"],p=c.joints["thumb-tip"],m=u.position.distanceTo(p.position),g=.02,x=.005;c.inputState.pinching&&m>g+x?(c.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!c.inputState.pinching&&m<=g-x&&(c.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else l!==null&&e.gripSpace&&(s=t.getPose(e.gripSpace,i),s!==null&&(l.matrix.fromArray(s.transform.matrix),l.matrix.decompose(l.position,l.rotation,l.scale),l.matrixWorldNeedsUpdate=!0,s.linearVelocity?(l.hasLinearVelocity=!0,l.linearVelocity.copy(s.linearVelocity)):l.hasLinearVelocity=!1,s.angularVelocity?(l.hasAngularVelocity=!0,l.angularVelocity.copy(s.angularVelocity)):l.hasAngularVelocity=!1));a!==null&&(r=t.getPose(e.targetRaySpace,i),r===null&&s!==null&&(r=s),r!==null&&(a.matrix.fromArray(r.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale),a.matrixWorldNeedsUpdate=!0,r.linearVelocity?(a.hasLinearVelocity=!0,a.linearVelocity.copy(r.linearVelocity)):a.hasLinearVelocity=!1,r.angularVelocity?(a.hasAngularVelocity=!0,a.angularVelocity.copy(r.angularVelocity)):a.hasAngularVelocity=!1,this.dispatchEvent(MQ)))}return a!==null&&(a.visible=r!==null),l!==null&&(l.visible=s!==null),c!==null&&(c.visible=o!==null),this}_getHandJoint(e,t){if(e.joints[t.jointName]===void 0){const i=new _d;i.matrixAutoUpdate=!1,i.visible=!1,e.joints[t.jointName]=i,e.add(i)}return e.joints[t.jointName]}}class Aw{constructor(e,t=25e-5){this.isFogExp2=!0,this.name="",this.color=new st(e),this.density=t}clone(){return new Aw(this.color,this.density)}toJSON(){return{type:"FogExp2",name:this.name,color:this.color.getHex(),density:this.density}}}class Mw{constructor(e,t=1,i=1e3){this.isFog=!0,this.name="",this.color=new st(e),this.near=t,this.far=i}clone(){return new Mw(this.color,this.near,this.far)}toJSON(){return{type:"Fog",name:this.name,color:this.color.getHex(),near:this.near,far:this.far}}}class hM extends yn{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.backgroundRotation=new Ss,this.environmentIntensity=1,this.environmentRotation=new Ss,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,this.backgroundRotation.copy(e.backgroundRotation),this.environmentIntensity=e.environmentIntensity,this.environmentRotation.copy(e.environmentRotation),e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return this.fog!==null&&(t.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(t.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(t.object.backgroundIntensity=this.backgroundIntensity),t.object.backgroundRotation=this.backgroundRotation.toArray(),this.environmentIntensity!==1&&(t.object.environmentIntensity=this.environmentIntensity),t.object.environmentRotation=this.environmentRotation.toArray(),t}}class Iw{constructor(e,t){this.isInterleavedBuffer=!0,this.array=e,this.stride=t,this.count=e!==void 0?e.length/t:0,this.usage=ng,this.updateRanges=[],this.version=0,this.uuid=_s()}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,i){e*=this.stride,i*=t.stride;for(let r=0,s=this.stride;r<s;r++)this.array[e+r]=t.array[i+r];return this}set(e,t=0){return this.array.set(e,t),this}clone(e){e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=_s()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),i=new this.constructor(t,this.stride);return i.setUsage(this.usage),i}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=_s()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const Ir=new K;class $u{constructor(e,t,i,r=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=t,this.offset=i,this.normalized=r}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,i=this.data.count;t<i;t++)Ir.fromBufferAttribute(this,t),Ir.applyMatrix4(e),this.setXYZ(t,Ir.x,Ir.y,Ir.z);return this}applyNormalMatrix(e){for(let t=0,i=this.count;t<i;t++)Ir.fromBufferAttribute(this,t),Ir.applyNormalMatrix(e),this.setXYZ(t,Ir.x,Ir.y,Ir.z);return this}transformDirection(e){for(let t=0,i=this.count;t<i;t++)Ir.fromBufferAttribute(this,t),Ir.transformDirection(e),this.setXYZ(t,Ir.x,Ir.y,Ir.z);return this}getComponent(e,t){let i=this.array[e*this.data.stride+this.offset+t];return this.normalized&&(i=Nr(i,this.array)),i}setComponent(e,t,i){return this.normalized&&(i=Ht(i,this.array)),this.data.array[e*this.data.stride+this.offset+t]=i,this}setX(e,t){return this.normalized&&(t=Ht(t,this.array)),this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.normalized&&(t=Ht(t,this.array)),this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.normalized&&(t=Ht(t,this.array)),this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.normalized&&(t=Ht(t,this.array)),this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){let t=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(t=Nr(t,this.array)),t}getY(e){let t=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(t=Nr(t,this.array)),t}getZ(e){let t=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(t=Nr(t,this.array)),t}getW(e){let t=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(t=Nr(t,this.array)),t}setXY(e,t,i){return e=e*this.data.stride+this.offset,this.normalized&&(t=Ht(t,this.array),i=Ht(i,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this}setXYZ(e,t,i,r){return e=e*this.data.stride+this.offset,this.normalized&&(t=Ht(t,this.array),i=Ht(i,this.array),r=Ht(r,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this.data.array[e+2]=r,this}setXYZW(e,t,i,r,s){return e=e*this.data.stride+this.offset,this.normalized&&(t=Ht(t,this.array),i=Ht(i,this.array),r=Ht(r,this.array),s=Ht(s,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=i,this.data.array[e+2]=r,this.data.array[e+3]=s,this}clone(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let i=0;i<this.count;i++){const r=i*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)t.push(this.data.array[r+s])}return new In(new this.array.constructor(t),this.itemSize,this.normalized)}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new $u(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let i=0;i<this.count;i++){const r=i*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)t.push(this.data.array[r+s])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}class dM extends Sr{constructor(e){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new st(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}let Hh;const fp=new K,Gh=new K,Wh=new K,qh=new Ie,pp=new Ie,S4=new At,Ev=new K,mp=new K,Cv=new K,yD=new Ie,QS=new Ie,vD=new Ie;class T4 extends yn{constructor(e=new dM){if(super(),this.isSprite=!0,this.type="Sprite",Hh===void 0){Hh=new Xt;const t=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),i=new Iw(t,5);Hh.setIndex([0,1,2,0,2,3]),Hh.setAttribute("position",new $u(i,3,0,!1)),Hh.setAttribute("uv",new $u(i,2,3,!1))}this.geometry=Hh,this.material=e,this.center=new Ie(.5,.5)}raycast(e,t){e.camera===null&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),Gh.setFromMatrixScale(this.matrixWorld),S4.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),Wh.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&Gh.multiplyScalar(-Wh.z);const i=this.material.rotation;let r,s;i!==0&&(s=Math.cos(i),r=Math.sin(i));const o=this.center;Av(Ev.set(-.5,-.5,0),Wh,o,Gh,r,s),Av(mp.set(.5,-.5,0),Wh,o,Gh,r,s),Av(Cv.set(.5,.5,0),Wh,o,Gh,r,s),yD.set(0,0),QS.set(1,0),vD.set(1,1);let a=e.ray.intersectTriangle(Ev,mp,Cv,!1,fp);if(a===null&&(Av(mp.set(-.5,.5,0),Wh,o,Gh,r,s),QS.set(0,1),a=e.ray.intersectTriangle(Ev,Cv,mp,!1,fp),a===null))return;const l=e.ray.origin.distanceTo(fp);l<e.near||l>e.far||t.push({distance:l,point:fp.clone(),uv:Yr.getInterpolation(fp,Ev,mp,Cv,yD,QS,vD,new Ie),face:null,object:this})}copy(e,t){return super.copy(e,t),e.center!==void 0&&this.center.copy(e.center),this.material=e.material,this}}function Av(n,e,t,i,r,s){qh.subVectors(n,t).addScalar(.5).multiply(i),r!==void 0?(pp.x=s*qh.x-r*qh.y,pp.y=r*qh.x+s*qh.y):pp.copy(qh),n.copy(e),n.x+=pp.x,n.y+=pp.y,n.applyMatrix4(S4)}const Mv=new K,xD=new K;class E4 extends yn{constructor(){super(),this.isLOD=!0,this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]}}),this.autoUpdate=!0}copy(e){super.copy(e,!1);const t=e.levels;for(let i=0,r=t.length;i<r;i++){const s=t[i];this.addLevel(s.object.clone(),s.distance,s.hysteresis)}return this.autoUpdate=e.autoUpdate,this}addLevel(e,t=0,i=0){t=Math.abs(t);const r=this.levels;let s;for(s=0;s<r.length&&!(t<r[s].distance);s++);return r.splice(s,0,{distance:t,hysteresis:i,object:e}),this.add(e),this}removeLevel(e){const t=this.levels;for(let i=0;i<t.length;i++)if(t[i].distance===e){const r=t.splice(i,1);return this.remove(r[0].object),!0}return!1}getCurrentLevel(){return this._currentLevel}getObjectForDistance(e){const t=this.levels;if(t.length>0){let i,r;for(i=1,r=t.length;i<r;i++){let s=t[i].distance;if(t[i].object.visible&&(s-=s*t[i].hysteresis),e<s)break}return t[i-1].object}return null}raycast(e,t){if(this.levels.length>0){Mv.setFromMatrixPosition(this.matrixWorld);const r=e.ray.origin.distanceTo(Mv);this.getObjectForDistance(r).raycast(e,t)}}update(e){const t=this.levels;if(t.length>1){Mv.setFromMatrixPosition(e.matrixWorld),xD.setFromMatrixPosition(this.matrixWorld);const i=Mv.distanceTo(xD)/e.zoom;t[0].object.visible=!0;let r,s;for(r=1,s=t.length;r<s;r++){let o=t[r].distance;if(t[r].object.visible&&(o-=o*t[r].hysteresis),i>=o)t[r-1].object.visible=!1,t[r].object.visible=!0;else break}for(this._currentLevel=r-1;r<s;r++)t[r].object.visible=!1}}toJSON(e){const t=super.toJSON(e);this.autoUpdate===!1&&(t.object.autoUpdate=!1),t.object.levels=[];const i=this.levels;for(let r=0,s=i.length;r<s;r++){const o=i[r];t.object.levels.push({object:o.object.uuid,distance:o.distance,hysteresis:o.hysteresis})}return t}}const _D=new K,wD=new mn,bD=new mn,IQ=new K,SD=new At,Iv=new K,ZS=new _r,TD=new At,eT=new Ef;class C4 extends _i{constructor(e,t){super(e,t),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode=p1,this.bindMatrix=new At,this.bindMatrixInverse=new At,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){const e=this.geometry;this.boundingBox===null&&(this.boundingBox=new kr),this.boundingBox.makeEmpty();const t=e.getAttribute("position");for(let i=0;i<t.count;i++)this.getVertexPosition(i,Iv),this.boundingBox.expandByPoint(Iv)}computeBoundingSphere(){const e=this.geometry;this.boundingSphere===null&&(this.boundingSphere=new _r),this.boundingSphere.makeEmpty();const t=e.getAttribute("position");for(let i=0;i<t.count;i++)this.getVertexPosition(i,Iv),this.boundingSphere.expandByPoint(Iv)}copy(e,t){return super.copy(e,t),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}raycast(e,t){const i=this.material,r=this.matrixWorld;i!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),ZS.copy(this.boundingSphere),ZS.applyMatrix4(r),e.ray.intersectsSphere(ZS)!==!1&&(TD.copy(r).invert(),eT.copy(e.ray).applyMatrix4(TD),!(this.boundingBox!==null&&eT.intersectsBox(this.boundingBox)===!1)&&this._computeIntersections(e,t,eT)))}getVertexPosition(e,t){return super.getVertexPosition(e,t),this.applyBoneTransform(e,t),t}bind(e,t){this.skeleton=e,t===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new mn,t=this.geometry.attributes.skinWeight;for(let i=0,r=t.count;i<r;i++){e.fromBufferAttribute(t,i);const s=1/e.manhattanLength();s!==1/0?e.multiplyScalar(s):e.set(1,0,0,0),t.setXYZW(i,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode===p1?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode===i4?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}applyBoneTransform(e,t){const i=this.skeleton,r=this.geometry;wD.fromBufferAttribute(r.attributes.skinIndex,e),bD.fromBufferAttribute(r.attributes.skinWeight,e),_D.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let s=0;s<4;s++){const o=bD.getComponent(s);if(o!==0){const a=wD.getComponent(s);SD.multiplyMatrices(i.bones[a].matrixWorld,i.boneInverses[a]),t.addScaledVector(IQ.copy(_D).applyMatrix4(SD),o)}}return t.applyMatrix4(this.bindMatrixInverse)}}class fM extends yn{constructor(){super(),this.isBone=!0,this.type="Bone"}}class Ho extends ti{constructor(e=null,t=1,i=1,r,s,o,a,l,c=Yi,u=Yi,p,m){super(null,o,a,l,c,u,r,s,p,m),this.isDataTexture=!0,this.image={data:e,width:t,height:i},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const ED=new At,PQ=new At;class Pw{constructor(e=[],t=[]){this.uuid=_s(),this.bones=e.slice(0),this.boneInverses=t,this.boneMatrices=null,this.boneTexture=null,this.init()}init(){const e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(e.length*16),t.length===0)this.calculateInverses();else if(e.length!==t.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let i=0,r=this.bones.length;i<r;i++)this.boneInverses.push(new At)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,t=this.bones.length;e<t;e++){const i=new At;this.bones[e]&&i.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(i)}}pose(){for(let e=0,t=this.bones.length;e<t;e++){const i=this.bones[e];i&&i.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,t=this.bones.length;e<t;e++){const i=this.bones[e];i&&(i.parent&&i.parent.isBone?(i.matrix.copy(i.parent.matrixWorld).invert(),i.matrix.multiply(i.matrixWorld)):i.matrix.copy(i.matrixWorld),i.matrix.decompose(i.position,i.quaternion,i.scale))}}update(){const e=this.bones,t=this.boneInverses,i=this.boneMatrices,r=this.boneTexture;for(let s=0,o=e.length;s<o;s++){const a=e[s]?e[s].matrixWorld:PQ;ED.multiplyMatrices(a,t[s]),ED.toArray(i,s*16)}r!==null&&(r.needsUpdate=!0)}clone(){return new Pw(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(this.bones.length*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);const t=new Float32Array(e*e*4);t.set(this.boneMatrices);const i=new Ho(t,e,e,gr,Qr);return i.needsUpdate=!0,this.boneMatrices=t,this.boneTexture=i,this}getBoneByName(e){for(let t=0,i=this.bones.length;t<i;t++){const r=this.bones[t];if(r.name===e)return r}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,t){this.uuid=e.uuid;for(let i=0,r=e.bones.length;i<r;i++){const s=e.bones[i];let o=t[s];o===void 0&&(console.warn("THREE.Skeleton: No bone found with UUID:",s),o=new fM),this.bones.push(o),this.boneInverses.push(new At().fromArray(e.boneInverses[i]))}return this.init(),this}toJSON(){const e={metadata:{version:4.6,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const t=this.bones,i=this.boneInverses;for(let r=0,s=t.length;r<s;r++){const o=t[r];e.bones.push(o.uuid);const a=i[r];e.boneInverses.push(a.toArray())}return e}}class af extends In{constructor(e,t,i,r=1){super(e,t,i),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=r}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}const $h=new At,CD=new At,Pv=[],AD=new kr,RQ=new At,gp=new _i,yp=new _r;class A4 extends _i{constructor(e,t,i){super(e,t),this.isInstancedMesh=!0,this.instanceMatrix=new af(new Float32Array(i*16),16),this.instanceColor=null,this.morphTexture=null,this.count=i,this.boundingBox=null,this.boundingSphere=null;for(let r=0;r<i;r++)this.setMatrixAt(r,RQ)}computeBoundingBox(){const e=this.geometry,t=this.count;this.boundingBox===null&&(this.boundingBox=new kr),e.boundingBox===null&&e.computeBoundingBox(),this.boundingBox.makeEmpty();for(let i=0;i<t;i++)this.getMatrixAt(i,$h),AD.copy(e.boundingBox).applyMatrix4($h),this.boundingBox.union(AD)}computeBoundingSphere(){const e=this.geometry,t=this.count;this.boundingSphere===null&&(this.boundingSphere=new _r),e.boundingSphere===null&&e.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(let i=0;i<t;i++)this.getMatrixAt(i,$h),yp.copy(e.boundingSphere).applyMatrix4($h),this.boundingSphere.union(yp)}copy(e,t){return super.copy(e,t),this.instanceMatrix.copy(e.instanceMatrix),e.morphTexture!==null&&(this.morphTexture=e.morphTexture.clone()),e.instanceColor!==null&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}getColorAt(e,t){t.fromArray(this.instanceColor.array,e*3)}getMatrixAt(e,t){t.fromArray(this.instanceMatrix.array,e*16)}getMorphAt(e,t){const i=t.morphTargetInfluences,r=this.morphTexture.source.data.data,s=i.length+1,o=e*s+1;for(let a=0;a<i.length;a++)i[a]=r[o+a]}raycast(e,t){const i=this.matrixWorld,r=this.count;if(gp.geometry=this.geometry,gp.material=this.material,gp.material!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),yp.copy(this.boundingSphere),yp.applyMatrix4(i),e.ray.intersectsSphere(yp)!==!1))for(let s=0;s<r;s++){this.getMatrixAt(s,$h),CD.multiplyMatrices(i,$h),gp.matrixWorld=CD,gp.raycast(e,Pv);for(let o=0,a=Pv.length;o<a;o++){const l=Pv[o];l.instanceId=s,l.object=this,t.push(l)}Pv.length=0}}setColorAt(e,t){this.instanceColor===null&&(this.instanceColor=new af(new Float32Array(this.instanceMatrix.count*3).fill(1),3)),t.toArray(this.instanceColor.array,e*3)}setMatrixAt(e,t){t.toArray(this.instanceMatrix.array,e*16)}setMorphAt(e,t){const i=t.morphTargetInfluences,r=i.length+1;this.morphTexture===null&&(this.morphTexture=new Ho(new Float32Array(r*this.count),r,this.count,ww,Qr));const s=this.morphTexture.source.data.data;let o=0;for(let c=0;c<i.length;c++)o+=i[c];const a=this.geometry.morphTargetsRelative?1:1-o,l=r*e;s[l]=a,s.set(i,l+1)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"}),this.morphTexture!==null&&(this.morphTexture.dispose(),this.morphTexture=null)}}const tT=new K,NQ=new K,DQ=new Bt;class vl{constructor(e=new K(1,0,0),t=0){this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,i,r){return this.normal.set(e,t,i),this.constant=r,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,i){const r=tT.subVectors(i,t).cross(NQ.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(r,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,t){const i=e.delta(tT),r=this.normal.dot(i);if(r===0)return this.distanceToPoint(e.start)===0?t.copy(e.start):null;const s=-(e.start.dot(this.normal)+this.constant)/r;return s<0||s>1?null:t.copy(e.start).addScaledVector(i,s)}intersectsLine(e){const t=this.distanceToPoint(e.start),i=this.distanceToPoint(e.end);return t<0&&i>0||i<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const i=t||DQ.getNormalMatrix(e),r=this.coplanarPoint(tT).applyMatrix4(e),s=this.normal.applyMatrix3(i).normalize();return this.constant=-r.dot(s),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}}const qc=new _r,Rv=new K;class Hg{constructor(e=new vl,t=new vl,i=new vl,r=new vl,s=new vl,o=new vl){this.planes=[e,t,i,r,s,o]}set(e,t,i,r,s,o){const a=this.planes;return a[0].copy(e),a[1].copy(t),a[2].copy(i),a[3].copy(r),a[4].copy(s),a[5].copy(o),this}copy(e){const t=this.planes;for(let i=0;i<6;i++)t[i].copy(e.planes[i]);return this}setFromProjectionMatrix(e,t=ho){const i=this.planes,r=e.elements,s=r[0],o=r[1],a=r[2],l=r[3],c=r[4],u=r[5],p=r[6],m=r[7],g=r[8],x=r[9],b=r[10],w=r[11],v=r[12],S=r[13],E=r[14],C=r[15];if(i[0].setComponents(l-s,m-c,w-g,C-v).normalize(),i[1].setComponents(l+s,m+c,w+g,C+v).normalize(),i[2].setComponents(l+o,m+u,w+x,C+S).normalize(),i[3].setComponents(l-o,m-u,w-x,C-S).normalize(),i[4].setComponents(l-a,m-p,w-b,C-E).normalize(),t===ho)i[5].setComponents(l+a,m+p,w+b,C+E).normalize();else if(t===ig)i[5].setComponents(a,p,b,E).normalize();else throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+t);return this}intersectsObject(e){if(e.boundingSphere!==void 0)e.boundingSphere===null&&e.computeBoundingSphere(),qc.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{const t=e.geometry;t.boundingSphere===null&&t.computeBoundingSphere(),qc.copy(t.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(qc)}intersectsSprite(e){return qc.center.set(0,0,0),qc.radius=.7071067811865476,qc.applyMatrix4(e.matrixWorld),this.intersectsSphere(qc)}intersectsSphere(e){const t=this.planes,i=e.center,r=-e.radius;for(let s=0;s<6;s++)if(t[s].distanceToPoint(i)<r)return!1;return!0}intersectsBox(e){const t=this.planes;for(let i=0;i<6;i++){const r=t[i];if(Rv.x=r.normal.x>0?e.max.x:e.min.x,Rv.y=r.normal.y>0?e.max.y:e.min.y,Rv.z=r.normal.z>0?e.max.z:e.min.z,r.distanceToPoint(Rv)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let i=0;i<6;i++)if(t[i].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}function nT(n,e){return n-e}function LQ(n,e){return n.z-e.z}function kQ(n,e){return e.z-n.z}class OQ{constructor(){this.index=0,this.pool=[],this.list=[]}push(e,t,i,r){const s=this.pool,o=this.list;this.index>=s.length&&s.push({start:-1,count:-1,z:-1,index:-1});const a=s[this.index];o.push(a),this.index++,a.start=e,a.count=t,a.z=i,a.index=r}reset(){this.list.length=0,this.index=0}}const Hr=new At,UQ=new st(1,1,1),iT=new Hg,Nv=new kr,$c=new _r,vp=new K,MD=new K,jQ=new K,rT=new OQ,hr=new _i,Dv=[];function FQ(n,e,t=0){const i=e.itemSize;if(n.isInterleavedBufferAttribute||n.array.constructor!==e.array.constructor){const r=n.count;for(let s=0;s<r;s++)for(let o=0;o<i;o++)e.setComponent(s+t,o,n.getComponent(s,o))}else e.array.set(n.array,t*i);e.needsUpdate=!0}function Xc(n,e){if(n.constructor!==e.constructor){const t=Math.min(n.length,e.length);for(let i=0;i<t;i++)e[i]=n[i]}else{const t=Math.min(n.length,e.length);e.set(new n.constructor(n.buffer,0,t))}}class M4 extends _i{constructor(e,t,i=t*2,r){super(new Xt,r),this.isBatchedMesh=!0,this.perObjectFrustumCulled=!0,this.sortObjects=!0,this.boundingBox=null,this.boundingSphere=null,this.customSort=null,this._instanceInfo=[],this._geometryInfo=[],this._availableInstanceIds=[],this._availableGeometryIds=[],this._nextIndexStart=0,this._nextVertexStart=0,this._geometryCount=0,this._visibilityChanged=!0,this._geometryInitialized=!1,this._maxInstanceCount=e,this._maxVertexCount=t,this._maxIndexCount=i,this._multiDrawCounts=new Int32Array(e),this._multiDrawStarts=new Int32Array(e),this._multiDrawCount=0,this._multiDrawInstances=null,this._matricesTexture=null,this._indirectTexture=null,this._colorsTexture=null,this._initMatricesTexture(),this._initIndirectTexture()}get maxInstanceCount(){return this._maxInstanceCount}get instanceCount(){return this._instanceInfo.length-this._availableInstanceIds.length}get unusedVertexCount(){return this._maxVertexCount-this._nextVertexStart}get unusedIndexCount(){return this._maxIndexCount-this._nextIndexStart}_initMatricesTexture(){let e=Math.sqrt(this._maxInstanceCount*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);const t=new Float32Array(e*e*4),i=new Ho(t,e,e,gr,Qr);this._matricesTexture=i}_initIndirectTexture(){let e=Math.sqrt(this._maxInstanceCount);e=Math.ceil(e);const t=new Uint32Array(e*e),i=new Ho(t,e,e,Fg,ja);this._indirectTexture=i}_initColorsTexture(){let e=Math.sqrt(this._maxInstanceCount);e=Math.ceil(e);const t=new Float32Array(e*e*4).fill(1),i=new Ho(t,e,e,gr,Qr);i.colorSpace=dn.workingColorSpace,this._colorsTexture=i}_initializeGeometry(e){const t=this.geometry,i=this._maxVertexCount,r=this._maxIndexCount;if(this._geometryInitialized===!1){for(const s in e.attributes){const o=e.getAttribute(s),{array:a,itemSize:l,normalized:c}=o,u=new a.constructor(i*l),p=new In(u,l,c);t.setAttribute(s,p)}if(e.getIndex()!==null){const s=i>65535?new Uint32Array(r):new Uint16Array(r);t.setIndex(new In(s,1))}this._geometryInitialized=!0}}_validateGeometry(e){const t=this.geometry;if(!!e.getIndex()!=!!t.getIndex())throw new Error('THREE.BatchedMesh: All geometries must consistently have "index".');for(const i in t.attributes){if(!e.hasAttribute(i))throw new Error(`THREE.BatchedMesh: Added geometry missing "${i}". All geometries must have consistent attributes.`);const r=e.getAttribute(i),s=t.getAttribute(i);if(r.itemSize!==s.itemSize||r.normalized!==s.normalized)throw new Error("THREE.BatchedMesh: All attributes must have a consistent itemSize and normalized value.")}}validateInstanceId(e){const t=this._instanceInfo;if(e<0||e>=t.length||t[e].active===!1)throw new Error(`THREE.BatchedMesh: Invalid instanceId ${e}. Instance is either out of range or has been deleted.`)}validateGeometryId(e){const t=this._geometryInfo;if(e<0||e>=t.length||t[e].active===!1)throw new Error(`THREE.BatchedMesh: Invalid geometryId ${e}. Geometry is either out of range or has been deleted.`)}setCustomSort(e){return this.customSort=e,this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new kr);const e=this.boundingBox,t=this._instanceInfo;e.makeEmpty();for(let i=0,r=t.length;i<r;i++){if(t[i].active===!1)continue;const s=t[i].geometryIndex;this.getMatrixAt(i,Hr),this.getBoundingBoxAt(s,Nv).applyMatrix4(Hr),e.union(Nv)}}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new _r);const e=this.boundingSphere,t=this._instanceInfo;e.makeEmpty();for(let i=0,r=t.length;i<r;i++){if(t[i].active===!1)continue;const s=t[i].geometryIndex;this.getMatrixAt(i,Hr),this.getBoundingSphereAt(s,$c).applyMatrix4(Hr),e.union($c)}}addInstance(e){if(this._instanceInfo.length>=this.maxInstanceCount&&this._availableInstanceIds.length===0)throw new Error("THREE.BatchedMesh: Maximum item count reached.");const i={visible:!0,active:!0,geometryIndex:e};let r=null;this._availableInstanceIds.length>0?(this._availableInstanceIds.sort(nT),r=this._availableInstanceIds.shift(),this._instanceInfo[r]=i):(r=this._instanceInfo.length,this._instanceInfo.push(i));const s=this._matricesTexture;Hr.identity().toArray(s.image.data,r*16),s.needsUpdate=!0;const o=this._colorsTexture;return o&&(UQ.toArray(o.image.data,r*4),o.needsUpdate=!0),this._visibilityChanged=!0,r}addGeometry(e,t=-1,i=-1){this._initializeGeometry(e),this._validateGeometry(e);const r={vertexStart:-1,vertexCount:-1,reservedVertexCount:-1,indexStart:-1,indexCount:-1,reservedIndexCount:-1,start:-1,count:-1,boundingBox:null,boundingSphere:null,active:!0},s=this._geometryInfo;r.vertexStart=this._nextVertexStart,r.reservedVertexCount=t===-1?e.getAttribute("position").count:t;const o=e.getIndex();if(o!==null&&(r.indexStart=this._nextIndexStart,r.reservedIndexCount=i===-1?o.count:i),r.indexStart!==-1&&r.indexStart+r.reservedIndexCount>this._maxIndexCount||r.vertexStart+r.reservedVertexCount>this._maxVertexCount)throw new Error("THREE.BatchedMesh: Reserved space request exceeds the maximum buffer size.");let l;return this._availableGeometryIds.length>0?(this._availableGeometryIds.sort(nT),l=this._availableGeometryIds.shift(),s[l]=r):(l=this._geometryCount,this._geometryCount++,s.push(r)),this.setGeometryAt(l,e),this._nextIndexStart=r.indexStart+r.reservedIndexCount,this._nextVertexStart=r.vertexStart+r.reservedVertexCount,l}setGeometryAt(e,t){if(e>=this._geometryCount)throw new Error("THREE.BatchedMesh: Maximum geometry count reached.");this._validateGeometry(t);const i=this.geometry,r=i.getIndex()!==null,s=i.getIndex(),o=t.getIndex(),a=this._geometryInfo[e];if(r&&o.count>a.reservedIndexCount||t.attributes.position.count>a.reservedVertexCount)throw new Error("THREE.BatchedMesh: Reserved space not large enough for provided geometry.");const l=a.vertexStart,c=a.reservedVertexCount;a.vertexCount=t.getAttribute("position").count;for(const u in i.attributes){const p=t.getAttribute(u),m=i.getAttribute(u);FQ(p,m,l);const g=p.itemSize;for(let x=p.count,b=c;x<b;x++){const w=l+x;for(let v=0;v<g;v++)m.setComponent(w,v,0)}m.needsUpdate=!0,m.addUpdateRange(l*g,c*g)}if(r){const u=a.indexStart,p=a.reservedIndexCount;a.indexCount=t.getIndex().count;for(let m=0;m<o.count;m++)s.setX(u+m,l+o.getX(m));for(let m=o.count,g=p;m<g;m++)s.setX(u+m,l);s.needsUpdate=!0,s.addUpdateRange(u,a.reservedIndexCount)}return a.start=r?a.indexStart:a.vertexStart,a.count=r?a.indexCount:a.vertexCount,a.boundingBox=null,t.boundingBox!==null&&(a.boundingBox=t.boundingBox.clone()),a.boundingSphere=null,t.boundingSphere!==null&&(a.boundingSphere=t.boundingSphere.clone()),this._visibilityChanged=!0,e}deleteGeometry(e){const t=this._geometryInfo;if(e>=t.length||t[e].active===!1)return this;const i=this._instanceInfo;for(let r=0,s=i.length;r<s;r++)i[r].active&&i[r].geometryIndex===e&&this.deleteInstance(r);return t[e].active=!1,this._availableGeometryIds.push(e),this._visibilityChanged=!0,this}deleteInstance(e){return this.validateInstanceId(e),this._instanceInfo[e].active=!1,this._availableInstanceIds.push(e),this._visibilityChanged=!0,this}optimize(){let e=0,t=0;const i=this._geometryInfo,r=i.map((o,a)=>a).sort((o,a)=>i[o].vertexStart-i[a].vertexStart),s=this.geometry;for(let o=0,a=i.length;o<a;o++){const l=r[o],c=i[l];if(c.active!==!1){if(s.index!==null){if(c.indexStart!==t){const{indexStart:u,vertexStart:p,reservedIndexCount:m}=c,g=s.index,x=g.array,b=e-p;for(let w=u;w<u+m;w++)x[w]=x[w]+b;g.array.copyWithin(t,u,u+m),g.addUpdateRange(t,m),c.indexStart=t}t+=c.reservedIndexCount}if(c.vertexStart!==e){const{vertexStart:u,reservedVertexCount:p}=c,m=s.attributes;for(const g in m){const x=m[g],{array:b,itemSize:w}=x;b.copyWithin(e*w,u*w,(u+p)*w),x.addUpdateRange(e*w,p*w)}c.vertexStart=e}e+=c.reservedVertexCount,c.start=s.index?c.indexStart:c.vertexStart,this._nextIndexStart=s.index?c.indexStart+c.reservedIndexCount:0,this._nextVertexStart=c.vertexStart+c.reservedVertexCount}}return this}getBoundingBoxAt(e,t){if(e>=this._geometryCount)return null;const i=this.geometry,r=this._geometryInfo[e];if(r.boundingBox===null){const s=new kr,o=i.index,a=i.attributes.position;for(let l=r.start,c=r.start+r.count;l<c;l++){let u=l;o&&(u=o.getX(u)),s.expandByPoint(vp.fromBufferAttribute(a,u))}r.boundingBox=s}return t.copy(r.boundingBox),t}getBoundingSphereAt(e,t){if(e>=this._geometryCount)return null;const i=this.geometry,r=this._geometryInfo[e];if(r.boundingSphere===null){const s=new _r;this.getBoundingBoxAt(e,Nv),Nv.getCenter(s.center);const o=i.index,a=i.attributes.position;let l=0;for(let c=r.start,u=r.start+r.count;c<u;c++){let p=c;o&&(p=o.getX(p)),vp.fromBufferAttribute(a,p),l=Math.max(l,s.center.distanceToSquared(vp))}s.radius=Math.sqrt(l),r.boundingSphere=s}return t.copy(r.boundingSphere),t}setMatrixAt(e,t){this.validateInstanceId(e);const i=this._matricesTexture,r=this._matricesTexture.image.data;return t.toArray(r,e*16),i.needsUpdate=!0,this}getMatrixAt(e,t){return this.validateInstanceId(e),t.fromArray(this._matricesTexture.image.data,e*16)}setColorAt(e,t){return this.validateInstanceId(e),this._colorsTexture===null&&this._initColorsTexture(),t.toArray(this._colorsTexture.image.data,e*4),this._colorsTexture.needsUpdate=!0,this}getColorAt(e,t){return this.validateInstanceId(e),t.fromArray(this._colorsTexture.image.data,e*4)}setVisibleAt(e,t){return this.validateInstanceId(e),this._instanceInfo[e].visible===t?this:(this._instanceInfo[e].visible=t,this._visibilityChanged=!0,this)}getVisibleAt(e){return this.validateInstanceId(e),this._instanceInfo[e].visible}setGeometryIdAt(e,t){return this.validateInstanceId(e),this.validateGeometryId(t),this._instanceInfo[e].geometryIndex=t,this}getGeometryIdAt(e){return this.validateInstanceId(e),this._instanceInfo[e].geometryIndex}getGeometryRangeAt(e,t={}){this.validateGeometryId(e);const i=this._geometryInfo[e];return t.vertexStart=i.vertexStart,t.vertexCount=i.vertexCount,t.reservedVertexCount=i.reservedVertexCount,t.indexStart=i.indexStart,t.indexCount=i.indexCount,t.reservedIndexCount=i.reservedIndexCount,t.start=i.start,t.count=i.count,t}setInstanceCount(e){const t=this._availableInstanceIds,i=this._instanceInfo;for(t.sort(nT);t[t.length-1]===i.length;)i.pop(),t.pop();if(e<i.length)throw new Error(`BatchedMesh: Instance ids outside the range ${e} are being used. Cannot shrink instance count.`);const r=new Int32Array(e),s=new Int32Array(e);Xc(this._multiDrawCounts,r),Xc(this._multiDrawStarts,s),this._multiDrawCounts=r,this._multiDrawStarts=s,this._maxInstanceCount=e;const o=this._indirectTexture,a=this._matricesTexture,l=this._colorsTexture;o.dispose(),this._initIndirectTexture(),Xc(o.image.data,this._indirectTexture.image.data),a.dispose(),this._initMatricesTexture(),Xc(a.image.data,this._matricesTexture.image.data),l&&(l.dispose(),this._initColorsTexture(),Xc(l.image.data,this._colorsTexture.image.data))}setGeometrySize(e,t){const i=[...this._geometryInfo].filter(a=>a.active);if(Math.max(...i.map(a=>a.vertexStart+a.reservedVertexCount))>e)throw new Error(`BatchedMesh: Geometry vertex values are being used outside the range ${t}. Cannot shrink further.`);if(this.geometry.index&&Math.max(...i.map(l=>l.indexStart+l.reservedIndexCount))>t)throw new Error(`BatchedMesh: Geometry index values are being used outside the range ${t}. Cannot shrink further.`);const s=this.geometry;s.dispose(),this._maxVertexCount=e,this._maxIndexCount=t,this._geometryInitialized&&(this._geometryInitialized=!1,this.geometry=new Xt,this._initializeGeometry(s));const o=this.geometry;s.index&&Xc(s.index.array,o.index.array);for(const a in s.attributes)Xc(s.attributes[a].array,o.attributes[a].array)}raycast(e,t){const i=this._instanceInfo,r=this._geometryInfo,s=this.matrixWorld,o=this.geometry;hr.material=this.material,hr.geometry.index=o.index,hr.geometry.attributes=o.attributes,hr.geometry.boundingBox===null&&(hr.geometry.boundingBox=new kr),hr.geometry.boundingSphere===null&&(hr.geometry.boundingSphere=new _r);for(let a=0,l=i.length;a<l;a++){if(!i[a].visible||!i[a].active)continue;const c=i[a].geometryIndex,u=r[c];hr.geometry.setDrawRange(u.start,u.count),this.getMatrixAt(a,hr.matrixWorld).premultiply(s),this.getBoundingBoxAt(c,hr.geometry.boundingBox),this.getBoundingSphereAt(c,hr.geometry.boundingSphere),hr.raycast(e,Dv);for(let p=0,m=Dv.length;p<m;p++){const g=Dv[p];g.object=this,g.batchId=a,t.push(g)}Dv.length=0}hr.material=null,hr.geometry.index=null,hr.geometry.attributes={},hr.geometry.setDrawRange(0,1/0)}copy(e){return super.copy(e),this.geometry=e.geometry.clone(),this.perObjectFrustumCulled=e.perObjectFrustumCulled,this.sortObjects=e.sortObjects,this.boundingBox=e.boundingBox!==null?e.boundingBox.clone():null,this.boundingSphere=e.boundingSphere!==null?e.boundingSphere.clone():null,this._geometryInfo=e._geometryInfo.map(t=>({...t,boundingBox:t.boundingBox!==null?t.boundingBox.clone():null,boundingSphere:t.boundingSphere!==null?t.boundingSphere.clone():null})),this._instanceInfo=e._instanceInfo.map(t=>({...t})),this._maxInstanceCount=e._maxInstanceCount,this._maxVertexCount=e._maxVertexCount,this._maxIndexCount=e._maxIndexCount,this._geometryInitialized=e._geometryInitialized,this._geometryCount=e._geometryCount,this._multiDrawCounts=e._multiDrawCounts.slice(),this._multiDrawStarts=e._multiDrawStarts.slice(),this._matricesTexture=e._matricesTexture.clone(),this._matricesTexture.image.data=this._matricesTexture.image.data.slice(),this._colorsTexture!==null&&(this._colorsTexture=e._colorsTexture.clone(),this._colorsTexture.image.data=this._colorsTexture.image.data.slice()),this}dispose(){this.geometry.dispose(),this._matricesTexture.dispose(),this._matricesTexture=null,this._indirectTexture.dispose(),this._indirectTexture=null,this._colorsTexture!==null&&(this._colorsTexture.dispose(),this._colorsTexture=null)}onBeforeRender(e,t,i,r,s){if(!this._visibilityChanged&&!this.perObjectFrustumCulled&&!this.sortObjects)return;const o=r.getIndex(),a=o===null?1:o.array.BYTES_PER_ELEMENT,l=this._instanceInfo,c=this._multiDrawStarts,u=this._multiDrawCounts,p=this._geometryInfo,m=this.perObjectFrustumCulled,g=this._indirectTexture,x=g.image.data;m&&(Hr.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse).multiply(this.matrixWorld),iT.setFromProjectionMatrix(Hr,e.coordinateSystem));let b=0;if(this.sortObjects){Hr.copy(this.matrixWorld).invert(),vp.setFromMatrixPosition(i.matrixWorld).applyMatrix4(Hr),MD.set(0,0,-1).transformDirection(i.matrixWorld).transformDirection(Hr);for(let S=0,E=l.length;S<E;S++)if(l[S].visible&&l[S].active){const C=l[S].geometryIndex;this.getMatrixAt(S,Hr),this.getBoundingSphereAt(C,$c).applyMatrix4(Hr);let U=!1;if(m&&(U=!iT.intersectsSphere($c)),!U){const O=p[C],N=jQ.subVectors($c.center,vp).dot(MD);rT.push(O.start,O.count,N,S)}}const w=rT.list,v=this.customSort;v===null?w.sort(s.transparent?kQ:LQ):v.call(this,w,i);for(let S=0,E=w.length;S<E;S++){const C=w[S];c[b]=C.start*a,u[b]=C.count,x[b]=C.index,b++}rT.reset()}else for(let w=0,v=l.length;w<v;w++)if(l[w].visible&&l[w].active){const S=l[w].geometryIndex;let E=!1;if(m&&(this.getMatrixAt(w,Hr),this.getBoundingSphereAt(S,$c).applyMatrix4(Hr),E=!iT.intersectsSphere($c)),!E){const C=p[S];c[b]=C.start*a,u[b]=C.count,x[b]=w,b++}}g.needsUpdate=!0,this._multiDrawCount=b,this._visibilityChanged=!1}onBeforeShadow(e,t,i,r,s,o){this.onBeforeRender(e,null,r,s,o)}}class jr extends Sr{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new st(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const d_=new K,f_=new K,ID=new At,xp=new Ef,Lv=new _r,sT=new K,PD=new K;class sc extends yn{constructor(e=new Xt,t=new jr){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=t,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,i=[0];for(let r=1,s=t.count;r<s;r++)d_.fromBufferAttribute(t,r-1),f_.fromBufferAttribute(t,r),i[r]=i[r-1],i[r]+=d_.distanceTo(f_);e.setAttribute("lineDistance",new ft(i,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,t){const i=this.geometry,r=this.matrixWorld,s=e.params.Line.threshold,o=i.drawRange;if(i.boundingSphere===null&&i.computeBoundingSphere(),Lv.copy(i.boundingSphere),Lv.applyMatrix4(r),Lv.radius+=s,e.ray.intersectsSphere(Lv)===!1)return;ID.copy(r).invert(),xp.copy(e.ray).applyMatrix4(ID);const a=s/((this.scale.x+this.scale.y+this.scale.z)/3),l=a*a,c=this.isLineSegments?2:1,u=i.index,m=i.attributes.position;if(u!==null){const g=Math.max(0,o.start),x=Math.min(u.count,o.start+o.count);for(let b=g,w=x-1;b<w;b+=c){const v=u.getX(b),S=u.getX(b+1),E=kv(this,e,xp,l,v,S,b);E&&t.push(E)}if(this.isLineLoop){const b=u.getX(x-1),w=u.getX(g),v=kv(this,e,xp,l,b,w,x-1);v&&t.push(v)}}else{const g=Math.max(0,o.start),x=Math.min(m.count,o.start+o.count);for(let b=g,w=x-1;b<w;b+=c){const v=kv(this,e,xp,l,b,b+1,b);v&&t.push(v)}if(this.isLineLoop){const b=kv(this,e,xp,l,x-1,g,x-1);b&&t.push(b)}}}updateMorphTargets(){const t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){const r=t[i[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=r.length;s<o;s++){const a=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}}function kv(n,e,t,i,r,s,o){const a=n.geometry.attributes.position;if(d_.fromBufferAttribute(a,r),f_.fromBufferAttribute(a,s),t.distanceSqToSegment(d_,f_,sT,PD)>i)return;sT.applyMatrix4(n.matrixWorld);const c=e.ray.origin.distanceTo(sT);if(!(c<e.near||c>e.far))return{distance:c,point:PD.clone().applyMatrix4(n.matrixWorld),index:o,face:null,faceIndex:null,barycoord:null,object:n}}const RD=new K,ND=new K;class Yo extends sc{constructor(e,t){super(e,t),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,i=[];for(let r=0,s=t.count;r<s;r+=2)RD.fromBufferAttribute(t,r),ND.fromBufferAttribute(t,r+1),i[r]=r===0?0:i[r-1],i[r+1]=i[r]+RD.distanceTo(ND);e.setAttribute("lineDistance",new ft(i,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class I4 extends sc{constructor(e,t){super(e,t),this.isLineLoop=!0,this.type="LineLoop"}}class Rw extends Sr{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new st(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}const DD=new At,y1=new Ef,Ov=new _r,Uv=new K;let P4=class extends yn{constructor(e=new Xt,t=new Rw){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=t,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}raycast(e,t){const i=this.geometry,r=this.matrixWorld,s=e.params.Points.threshold,o=i.drawRange;if(i.boundingSphere===null&&i.computeBoundingSphere(),Ov.copy(i.boundingSphere),Ov.applyMatrix4(r),Ov.radius+=s,e.ray.intersectsSphere(Ov)===!1)return;DD.copy(r).invert(),y1.copy(e.ray).applyMatrix4(DD);const a=s/((this.scale.x+this.scale.y+this.scale.z)/3),l=a*a,c=i.index,p=i.attributes.position;if(c!==null){const m=Math.max(0,o.start),g=Math.min(c.count,o.start+o.count);for(let x=m,b=g;x<b;x++){const w=c.getX(x);Uv.fromBufferAttribute(p,w),LD(Uv,w,l,r,e,t,this)}}else{const m=Math.max(0,o.start),g=Math.min(p.count,o.start+o.count);for(let x=m,b=g;x<b;x++)Uv.fromBufferAttribute(p,x),LD(Uv,x,l,r,e,t,this)}}updateMorphTargets(){const t=this.geometry.morphAttributes,i=Object.keys(t);if(i.length>0){const r=t[i[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=r.length;s<o;s++){const a=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}};function LD(n,e,t,i,r,s,o){const a=y1.distanceSqToPoint(n);if(a<t){const l=new K;y1.closestPointToPoint(n,l),l.applyMatrix4(i);const c=r.ray.origin.distanceTo(l);if(c<r.near||c>r.far)return;s.push({distance:c,distanceToRay:Math.sqrt(a),point:l,index:e,face:null,faceIndex:null,barycoord:null,object:o})}}class R4 extends ti{constructor(e,t,i,r,s,o,a,l,c){super(e,t,i,r,s,o,a,l,c),this.isVideoTexture=!0,this.minFilter=o!==void 0?o:Mi,this.magFilter=s!==void 0?s:Mi,this.generateMipmaps=!1;const u=this;function p(){u.needsUpdate=!0,e.requestVideoFrameCallback(p)}"requestVideoFrameCallback"in e&&e.requestVideoFrameCallback(p)}clone(){return new this.constructor(this.image).copy(this)}update(){const e=this.image;"requestVideoFrameCallback"in e===!1&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}}class VQ extends R4{constructor(e,t,i,r,s,o,a,l){super({},e,t,i,r,s,o,a,l),this.isVideoFrameTexture=!0}update(){}clone(){return new this.constructor().copy(this)}setFrame(e){this.image=e,this.needsUpdate=!0}}class BQ extends ti{constructor(e,t){super({width:e,height:t}),this.isFramebufferTexture=!0,this.magFilter=Yi,this.minFilter=Yi,this.generateMipmaps=!1,this.needsUpdate=!0}}class Nw extends ti{constructor(e,t,i,r,s,o,a,l,c,u,p,m){super(null,o,a,l,c,u,r,s,p,m),this.isCompressedTexture=!0,this.image={width:t,height:i},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}}class zQ extends Nw{constructor(e,t,i,r,s,o){super(e,t,i,s,o),this.isCompressedArrayTexture=!0,this.image.depth=r,this.wrapR=Gs,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}}class HQ extends Nw{constructor(e,t,i){super(void 0,e[0].width,e[0].height,t,i,Ua),this.isCompressedCubeTexture=!0,this.isCubeTexture=!0,this.image=e}}class GQ extends ti{constructor(e,t,i,r,s,o,a,l,c){super(e,t,i,r,s,o,a,l,c),this.isCanvasTexture=!0,this.needsUpdate=!0}}class pM extends ti{constructor(e,t,i,r,s,o,a,l,c,u=Eu){if(u!==Eu&&u!==Wu)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");i===void 0&&u===Eu&&(i=ja),i===void 0&&u===Wu&&(i=Gu),super(null,r,s,o,a,l,u,i,c),this.isDepthTexture=!0,this.image={width:e,height:t},this.magFilter=a!==void 0?a:Yi,this.minFilter=l!==void 0?l:Yi,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(e){return super.copy(e),this.source=new Rl(Object.assign({},e.image)),this.compareFunction=e.compareFunction,this}toJSON(e){const t=super.toJSON(e);return this.compareFunction!==null&&(t.compareFunction=this.compareFunction),t}}class wo{constructor(){this.type="Curve",this.arcLengthDivisions=200,this.needsUpdate=!1,this.cacheArcLengths=null}getPoint(){console.warn("THREE.Curve: .getPoint() not implemented.")}getPointAt(e,t){const i=this.getUtoTmapping(e);return this.getPoint(i,t)}getPoints(e=5){const t=[];for(let i=0;i<=e;i++)t.push(this.getPoint(i/e));return t}getSpacedPoints(e=5){const t=[];for(let i=0;i<=e;i++)t.push(this.getPointAt(i/e));return t}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const t=[];let i,r=this.getPoint(0),s=0;t.push(0);for(let o=1;o<=e;o++)i=this.getPoint(o/e),s+=i.distanceTo(r),t.push(s),r=i;return this.cacheArcLengths=t,t}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,t=null){const i=this.getLengths();let r=0;const s=i.length;let o;t?o=t:o=e*i[s-1];let a=0,l=s-1,c;for(;a<=l;)if(r=Math.floor(a+(l-a)/2),c=i[r]-o,c<0)a=r+1;else if(c>0)l=r-1;else{l=r;break}if(r=l,i[r]===o)return r/(s-1);const u=i[r],m=i[r+1]-u,g=(o-u)/m;return(r+g)/(s-1)}getTangent(e,t){let r=e-1e-4,s=e+1e-4;r<0&&(r=0),s>1&&(s=1);const o=this.getPoint(r),a=this.getPoint(s),l=t||(o.isVector2?new Ie:new K);return l.copy(a).sub(o).normalize(),l}getTangentAt(e,t){const i=this.getUtoTmapping(e);return this.getTangent(i,t)}computeFrenetFrames(e,t=!1){const i=new K,r=[],s=[],o=[],a=new K,l=new At;for(let g=0;g<=e;g++){const x=g/e;r[g]=this.getTangentAt(x,new K)}s[0]=new K,o[0]=new K;let c=Number.MAX_VALUE;const u=Math.abs(r[0].x),p=Math.abs(r[0].y),m=Math.abs(r[0].z);u<=c&&(c=u,i.set(1,0,0)),p<=c&&(c=p,i.set(0,1,0)),m<=c&&i.set(0,0,1),a.crossVectors(r[0],i).normalize(),s[0].crossVectors(r[0],a),o[0].crossVectors(r[0],s[0]);for(let g=1;g<=e;g++){if(s[g]=s[g-1].clone(),o[g]=o[g-1].clone(),a.crossVectors(r[g-1],r[g]),a.length()>Number.EPSILON){a.normalize();const x=Math.acos(Lt(r[g-1].dot(r[g]),-1,1));s[g].applyMatrix4(l.makeRotationAxis(a,x))}o[g].crossVectors(r[g],s[g])}if(t===!0){let g=Math.acos(Lt(s[0].dot(s[e]),-1,1));g/=e,r[0].dot(a.crossVectors(s[0],s[e]))>0&&(g=-g);for(let x=1;x<=e;x++)s[x].applyMatrix4(l.makeRotationAxis(r[x],g*x)),o[x].crossVectors(r[x],s[x])}return{tangents:r,normals:s,binormals:o}}clone(){return new this.constructor().copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.6,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class Dw extends wo{constructor(e=0,t=0,i=1,r=1,s=0,o=Math.PI*2,a=!1,l=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=e,this.aY=t,this.xRadius=i,this.yRadius=r,this.aStartAngle=s,this.aEndAngle=o,this.aClockwise=a,this.aRotation=l}getPoint(e,t=new Ie){const i=t,r=Math.PI*2;let s=this.aEndAngle-this.aStartAngle;const o=Math.abs(s)<Number.EPSILON;for(;s<0;)s+=r;for(;s>r;)s-=r;s<Number.EPSILON&&(o?s=0:s=r),this.aClockwise===!0&&!o&&(s===r?s=-r:s=s-r);const a=this.aStartAngle+e*s;let l=this.aX+this.xRadius*Math.cos(a),c=this.aY+this.yRadius*Math.sin(a);if(this.aRotation!==0){const u=Math.cos(this.aRotation),p=Math.sin(this.aRotation),m=l-this.aX,g=c-this.aY;l=m*u-g*p+this.aX,c=m*p+g*u+this.aY}return i.set(l,c)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}class N4 extends Dw{constructor(e,t,i,r,s,o){super(e,t,i,i,r,s,o),this.isArcCurve=!0,this.type="ArcCurve"}}function mM(){let n=0,e=0,t=0,i=0;function r(s,o,a,l){n=s,e=a,t=-3*s+3*o-2*a-l,i=2*s-2*o+a+l}return{initCatmullRom:function(s,o,a,l,c){r(o,a,c*(a-s),c*(l-o))},initNonuniformCatmullRom:function(s,o,a,l,c,u,p){let m=(o-s)/c-(a-s)/(c+u)+(a-o)/u,g=(a-o)/u-(l-o)/(u+p)+(l-a)/p;m*=u,g*=u,r(o,a,m,g)},calc:function(s){const o=s*s,a=o*s;return n+e*s+t*o+i*a}}}const jv=new K,oT=new mM,aT=new mM,lT=new mM;class D4 extends wo{constructor(e=[],t=!1,i="centripetal",r=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=e,this.closed=t,this.curveType=i,this.tension=r}getPoint(e,t=new K){const i=t,r=this.points,s=r.length,o=(s-(this.closed?0:1))*e;let a=Math.floor(o),l=o-a;this.closed?a+=a>0?0:(Math.floor(Math.abs(a)/s)+1)*s:l===0&&a===s-1&&(a=s-2,l=1);let c,u;this.closed||a>0?c=r[(a-1)%s]:(jv.subVectors(r[0],r[1]).add(r[0]),c=jv);const p=r[a%s],m=r[(a+1)%s];if(this.closed||a+2<s?u=r[(a+2)%s]:(jv.subVectors(r[s-1],r[s-2]).add(r[s-1]),u=jv),this.curveType==="centripetal"||this.curveType==="chordal"){const g=this.curveType==="chordal"?.5:.25;let x=Math.pow(c.distanceToSquared(p),g),b=Math.pow(p.distanceToSquared(m),g),w=Math.pow(m.distanceToSquared(u),g);b<1e-4&&(b=1),x<1e-4&&(x=b),w<1e-4&&(w=b),oT.initNonuniformCatmullRom(c.x,p.x,m.x,u.x,x,b,w),aT.initNonuniformCatmullRom(c.y,p.y,m.y,u.y,x,b,w),lT.initNonuniformCatmullRom(c.z,p.z,m.z,u.z,x,b,w)}else this.curveType==="catmullrom"&&(oT.initCatmullRom(c.x,p.x,m.x,u.x,this.tension),aT.initCatmullRom(c.y,p.y,m.y,u.y,this.tension),lT.initCatmullRom(c.z,p.z,m.z,u.z,this.tension));return i.set(oT.calc(l),aT.calc(l),lT.calc(l)),i}copy(e){super.copy(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const r=e.points[t];this.points.push(r.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,i=this.points.length;t<i;t++){const r=this.points[t];e.points.push(r.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const r=e.points[t];this.points.push(new K().fromArray(r))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}function kD(n,e,t,i,r){const s=(i-e)*.5,o=(r-t)*.5,a=n*n,l=n*a;return(2*t-2*i+s+o)*l+(-3*t+3*i-2*s-o)*a+s*n+t}function WQ(n,e){const t=1-n;return t*t*e}function qQ(n,e){return 2*(1-n)*n*e}function $Q(n,e){return n*n*e}function um(n,e,t,i){return WQ(n,e)+qQ(n,t)+$Q(n,i)}function XQ(n,e){const t=1-n;return t*t*t*e}function KQ(n,e){const t=1-n;return 3*t*t*n*e}function YQ(n,e){return 3*(1-n)*n*n*e}function JQ(n,e){return n*n*n*e}function hm(n,e,t,i,r){return XQ(n,e)+KQ(n,t)+YQ(n,i)+JQ(n,r)}class gM extends wo{constructor(e=new Ie,t=new Ie,i=new Ie,r=new Ie){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=e,this.v1=t,this.v2=i,this.v3=r}getPoint(e,t=new Ie){const i=t,r=this.v0,s=this.v1,o=this.v2,a=this.v3;return i.set(hm(e,r.x,s.x,o.x,a.x),hm(e,r.y,s.y,o.y,a.y)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class L4 extends wo{constructor(e=new K,t=new K,i=new K,r=new K){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=e,this.v1=t,this.v2=i,this.v3=r}getPoint(e,t=new K){const i=t,r=this.v0,s=this.v1,o=this.v2,a=this.v3;return i.set(hm(e,r.x,s.x,o.x,a.x),hm(e,r.y,s.y,o.y,a.y),hm(e,r.z,s.z,o.z,a.z)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class yM extends wo{constructor(e=new Ie,t=new Ie){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=e,this.v2=t}getPoint(e,t=new Ie){const i=t;return e===1?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(e).add(this.v1)),i}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new Ie){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class k4 extends wo{constructor(e=new K,t=new K){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=e,this.v2=t}getPoint(e,t=new K){const i=t;return e===1?i.copy(this.v2):(i.copy(this.v2).sub(this.v1),i.multiplyScalar(e).add(this.v1)),i}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new K){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class vM extends wo{constructor(e=new Ie,t=new Ie,i=new Ie){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=e,this.v1=t,this.v2=i}getPoint(e,t=new Ie){const i=t,r=this.v0,s=this.v1,o=this.v2;return i.set(um(e,r.x,s.x,o.x),um(e,r.y,s.y,o.y)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class xM extends wo{constructor(e=new K,t=new K,i=new K){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=e,this.v1=t,this.v2=i}getPoint(e,t=new K){const i=t,r=this.v0,s=this.v1,o=this.v2;return i.set(um(e,r.x,s.x,o.x),um(e,r.y,s.y,o.y),um(e,r.z,s.z,o.z)),i}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class _M extends wo{constructor(e=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=e}getPoint(e,t=new Ie){const i=t,r=this.points,s=(r.length-1)*e,o=Math.floor(s),a=s-o,l=r[o===0?o:o-1],c=r[o],u=r[o>r.length-2?r.length-1:o+1],p=r[o>r.length-3?r.length-1:o+2];return i.set(kD(a,l.x,c.x,u.x,p.x),kD(a,l.y,c.y,u.y,p.y)),i}copy(e){super.copy(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const r=e.points[t];this.points.push(r.clone())}return this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,i=this.points.length;t<i;t++){const r=this.points[t];e.points.push(r.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,i=e.points.length;t<i;t++){const r=e.points[t];this.points.push(new Ie().fromArray(r))}return this}}var p_=Object.freeze({__proto__:null,ArcCurve:N4,CatmullRomCurve3:D4,CubicBezierCurve:gM,CubicBezierCurve3:L4,EllipseCurve:Dw,LineCurve:yM,LineCurve3:k4,QuadraticBezierCurve:vM,QuadraticBezierCurve3:xM,SplineCurve:_M});class O4 extends wo{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){const e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);if(!e.equals(t)){const i=e.isVector2===!0?"LineCurve":"LineCurve3";this.curves.push(new p_[i](t,e))}return this}getPoint(e,t){const i=e*this.getLength(),r=this.getCurveLengths();let s=0;for(;s<r.length;){if(r[s]>=i){const o=r[s]-i,a=this.curves[s],l=a.getLength(),c=l===0?0:1-o/l;return a.getPointAt(c,t)}s++}return null}getLength(){const e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let t=0;for(let i=0,r=this.curves.length;i<r;i++)t+=this.curves[i].getLength(),e.push(t);return this.cacheLengths=e,e}getSpacedPoints(e=40){const t=[];for(let i=0;i<=e;i++)t.push(this.getPoint(i/e));return this.autoClose&&t.push(t[0]),t}getPoints(e=12){const t=[];let i;for(let r=0,s=this.curves;r<s.length;r++){const o=s[r],a=o.isEllipseCurve?e*2:o.isLineCurve||o.isLineCurve3?1:o.isSplineCurve?e*o.points.length:e,l=o.getPoints(a);for(let c=0;c<l.length;c++){const u=l[c];i&&i.equals(u)||(t.push(u),i=u)}}return this.autoClose&&t.length>1&&!t[t.length-1].equals(t[0])&&t.push(t[0]),t}copy(e){super.copy(e),this.curves=[];for(let t=0,i=e.curves.length;t<i;t++){const r=e.curves[t];this.curves.push(r.clone())}return this.autoClose=e.autoClose,this}toJSON(){const e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let t=0,i=this.curves.length;t<i;t++){const r=this.curves[t];e.curves.push(r.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let t=0,i=e.curves.length;t<i;t++){const r=e.curves[t];this.curves.push(new p_[r.type]().fromJSON(r))}return this}}class sg extends O4{constructor(e){super(),this.type="Path",this.currentPoint=new Ie,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let t=1,i=e.length;t<i;t++)this.lineTo(e[t].x,e[t].y);return this}moveTo(e,t){return this.currentPoint.set(e,t),this}lineTo(e,t){const i=new yM(this.currentPoint.clone(),new Ie(e,t));return this.curves.push(i),this.currentPoint.set(e,t),this}quadraticCurveTo(e,t,i,r){const s=new vM(this.currentPoint.clone(),new Ie(e,t),new Ie(i,r));return this.curves.push(s),this.currentPoint.set(i,r),this}bezierCurveTo(e,t,i,r,s,o){const a=new gM(this.currentPoint.clone(),new Ie(e,t),new Ie(i,r),new Ie(s,o));return this.curves.push(a),this.currentPoint.set(s,o),this}splineThru(e){const t=[this.currentPoint.clone()].concat(e),i=new _M(t);return this.curves.push(i),this.currentPoint.copy(e[e.length-1]),this}arc(e,t,i,r,s,o){const a=this.currentPoint.x,l=this.currentPoint.y;return this.absarc(e+a,t+l,i,r,s,o),this}absarc(e,t,i,r,s,o){return this.absellipse(e,t,i,i,r,s,o),this}ellipse(e,t,i,r,s,o,a,l){const c=this.currentPoint.x,u=this.currentPoint.y;return this.absellipse(e+c,t+u,i,r,s,o,a,l),this}absellipse(e,t,i,r,s,o,a,l){const c=new Dw(e,t,i,r,s,o,a,l);if(this.curves.length>0){const p=c.getPoint(0);p.equals(this.currentPoint)||this.lineTo(p.x,p.y)}this.curves.push(c);const u=c.getPoint(1);return this.currentPoint.copy(u),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){const e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}}class Gg extends Xt{constructor(e=[new Ie(0,-.5),new Ie(.5,0),new Ie(0,.5)],t=12,i=0,r=Math.PI*2){super(),this.type="LatheGeometry",this.parameters={points:e,segments:t,phiStart:i,phiLength:r},t=Math.floor(t),r=Lt(r,0,Math.PI*2);const s=[],o=[],a=[],l=[],c=[],u=1/t,p=new K,m=new Ie,g=new K,x=new K,b=new K;let w=0,v=0;for(let S=0;S<=e.length-1;S++)switch(S){case 0:w=e[S+1].x-e[S].x,v=e[S+1].y-e[S].y,g.x=v*1,g.y=-w,g.z=v*0,b.copy(g),g.normalize(),l.push(g.x,g.y,g.z);break;case e.length-1:l.push(b.x,b.y,b.z);break;default:w=e[S+1].x-e[S].x,v=e[S+1].y-e[S].y,g.x=v*1,g.y=-w,g.z=v*0,x.copy(g),g.x+=b.x,g.y+=b.y,g.z+=b.z,g.normalize(),l.push(g.x,g.y,g.z),b.copy(x)}for(let S=0;S<=t;S++){const E=i+S*u*r,C=Math.sin(E),U=Math.cos(E);for(let O=0;O<=e.length-1;O++){p.x=e[O].x*C,p.y=e[O].y,p.z=e[O].x*U,o.push(p.x,p.y,p.z),m.x=S/t,m.y=O/(e.length-1),a.push(m.x,m.y);const N=l[3*O+0]*C,P=l[3*O+1],A=l[3*O+0]*U;c.push(N,P,A)}}for(let S=0;S<t;S++)for(let E=0;E<e.length-1;E++){const C=E+S*e.length,U=C,O=C+e.length,N=C+e.length+1,P=C+1;s.push(U,O,P),s.push(N,P,O)}this.setIndex(s),this.setAttribute("position",new ft(o,3)),this.setAttribute("uv",new ft(a,2)),this.setAttribute("normal",new ft(c,3))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Gg(e.points,e.segments,e.phiStart,e.phiLength)}}class Lw extends Gg{constructor(e=1,t=1,i=4,r=8){const s=new sg;s.absarc(0,-t/2,e,Math.PI*1.5,0),s.absarc(0,t/2,e,0,Math.PI*.5),super(s.getPoints(i),r),this.type="CapsuleGeometry",this.parameters={radius:e,length:t,capSegments:i,radialSegments:r}}static fromJSON(e){return new Lw(e.radius,e.length,e.capSegments,e.radialSegments)}}class kw extends Xt{constructor(e=1,t=32,i=0,r=Math.PI*2){super(),this.type="CircleGeometry",this.parameters={radius:e,segments:t,thetaStart:i,thetaLength:r},t=Math.max(3,t);const s=[],o=[],a=[],l=[],c=new K,u=new Ie;o.push(0,0,0),a.push(0,0,1),l.push(.5,.5);for(let p=0,m=3;p<=t;p++,m+=3){const g=i+p/t*r;c.x=e*Math.cos(g),c.y=e*Math.sin(g),o.push(c.x,c.y,c.z),a.push(0,0,1),u.x=(o[m]/e+1)/2,u.y=(o[m+1]/e+1)/2,l.push(u.x,u.y)}for(let p=1;p<=t;p++)s.push(p,p+1,0);this.setIndex(s),this.setAttribute("position",new ft(o,3)),this.setAttribute("normal",new ft(a,3)),this.setAttribute("uv",new ft(l,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new kw(e.radius,e.segments,e.thetaStart,e.thetaLength)}}class Cf extends Xt{constructor(e=1,t=1,i=1,r=32,s=1,o=!1,a=0,l=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:i,radialSegments:r,heightSegments:s,openEnded:o,thetaStart:a,thetaLength:l};const c=this;r=Math.floor(r),s=Math.floor(s);const u=[],p=[],m=[],g=[];let x=0;const b=[],w=i/2;let v=0;S(),o===!1&&(e>0&&E(!0),t>0&&E(!1)),this.setIndex(u),this.setAttribute("position",new ft(p,3)),this.setAttribute("normal",new ft(m,3)),this.setAttribute("uv",new ft(g,2));function S(){const C=new K,U=new K;let O=0;const N=(t-e)/i;for(let P=0;P<=s;P++){const A=[],M=P/s,D=M*(t-e)+e;for(let z=0;z<=r;z++){const F=z/r,re=F*l+a,le=Math.sin(re),he=Math.cos(re);U.x=D*le,U.y=-M*i+w,U.z=D*he,p.push(U.x,U.y,U.z),C.set(le,N,he).normalize(),m.push(C.x,C.y,C.z),g.push(F,1-M),A.push(x++)}b.push(A)}for(let P=0;P<r;P++)for(let A=0;A<s;A++){const M=b[A][P],D=b[A+1][P],z=b[A+1][P+1],F=b[A][P+1];(e>0||A!==0)&&(u.push(M,D,F),O+=3),(t>0||A!==s-1)&&(u.push(D,z,F),O+=3)}c.addGroup(v,O,0),v+=O}function E(C){const U=x,O=new Ie,N=new K;let P=0;const A=C===!0?e:t,M=C===!0?1:-1;for(let z=1;z<=r;z++)p.push(0,w*M,0),m.push(0,M,0),g.push(.5,.5),x++;const D=x;for(let z=0;z<=r;z++){const re=z/r*l+a,le=Math.cos(re),he=Math.sin(re);N.x=A*he,N.y=w*M,N.z=A*le,p.push(N.x,N.y,N.z),m.push(0,M,0),O.x=le*.5+.5,O.y=he*.5*M+.5,g.push(O.x,O.y),x++}for(let z=0;z<r;z++){const F=U+z,re=D+z;C===!0?u.push(re,re+1,F):u.push(re+1,re,F),P+=3}c.addGroup(v,P,C===!0?1:2),v+=P}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Cf(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class Ow extends Cf{constructor(e=1,t=1,i=32,r=1,s=!1,o=0,a=Math.PI*2){super(0,e,t,i,r,s,o,a),this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:i,heightSegments:r,openEnded:s,thetaStart:o,thetaLength:a}}static fromJSON(e){return new Ow(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class vc extends Xt{constructor(e=[],t=[],i=1,r=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:t,radius:i,detail:r};const s=[],o=[];a(r),c(i),u(),this.setAttribute("position",new ft(s,3)),this.setAttribute("normal",new ft(s.slice(),3)),this.setAttribute("uv",new ft(o,2)),r===0?this.computeVertexNormals():this.normalizeNormals();function a(S){const E=new K,C=new K,U=new K;for(let O=0;O<t.length;O+=3)g(t[O+0],E),g(t[O+1],C),g(t[O+2],U),l(E,C,U,S)}function l(S,E,C,U){const O=U+1,N=[];for(let P=0;P<=O;P++){N[P]=[];const A=S.clone().lerp(C,P/O),M=E.clone().lerp(C,P/O),D=O-P;for(let z=0;z<=D;z++)z===0&&P===O?N[P][z]=A:N[P][z]=A.clone().lerp(M,z/D)}for(let P=0;P<O;P++)for(let A=0;A<2*(O-P)-1;A++){const M=Math.floor(A/2);A%2===0?(m(N[P][M+1]),m(N[P+1][M]),m(N[P][M])):(m(N[P][M+1]),m(N[P+1][M+1]),m(N[P+1][M]))}}function c(S){const E=new K;for(let C=0;C<s.length;C+=3)E.x=s[C+0],E.y=s[C+1],E.z=s[C+2],E.normalize().multiplyScalar(S),s[C+0]=E.x,s[C+1]=E.y,s[C+2]=E.z}function u(){const S=new K;for(let E=0;E<s.length;E+=3){S.x=s[E+0],S.y=s[E+1],S.z=s[E+2];const C=w(S)/2/Math.PI+.5,U=v(S)/Math.PI+.5;o.push(C,1-U)}x(),p()}function p(){for(let S=0;S<o.length;S+=6){const E=o[S+0],C=o[S+2],U=o[S+4],O=Math.max(E,C,U),N=Math.min(E,C,U);O>.9&&N<.1&&(E<.2&&(o[S+0]+=1),C<.2&&(o[S+2]+=1),U<.2&&(o[S+4]+=1))}}function m(S){s.push(S.x,S.y,S.z)}function g(S,E){const C=S*3;E.x=e[C+0],E.y=e[C+1],E.z=e[C+2]}function x(){const S=new K,E=new K,C=new K,U=new K,O=new Ie,N=new Ie,P=new Ie;for(let A=0,M=0;A<s.length;A+=9,M+=6){S.set(s[A+0],s[A+1],s[A+2]),E.set(s[A+3],s[A+4],s[A+5]),C.set(s[A+6],s[A+7],s[A+8]),O.set(o[M+0],o[M+1]),N.set(o[M+2],o[M+3]),P.set(o[M+4],o[M+5]),U.copy(S).add(E).add(C).divideScalar(3);const D=w(U);b(O,M+0,S,D),b(N,M+2,E,D),b(P,M+4,C,D)}}function b(S,E,C,U){U<0&&S.x===1&&(o[E]=S.x-1),C.x===0&&C.z===0&&(o[E]=U/2/Math.PI+.5)}function w(S){return Math.atan2(S.z,-S.x)}function v(S){return Math.atan2(-S.y,Math.sqrt(S.x*S.x+S.z*S.z))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new vc(e.vertices,e.indices,e.radius,e.details)}}class Uw extends vc{constructor(e=1,t=0){const i=(1+Math.sqrt(5))/2,r=1/i,s=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-r,-i,0,-r,i,0,r,-i,0,r,i,-r,-i,0,-r,i,0,r,-i,0,r,i,0,-i,0,-r,i,0,-r,-i,0,r,i,0,r],o=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];super(s,o,e,t),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new Uw(e.radius,e.detail)}}const Fv=new K,Vv=new K,cT=new K,Bv=new Yr;class U4 extends Xt{constructor(e=null,t=1){if(super(),this.type="EdgesGeometry",this.parameters={geometry:e,thresholdAngle:t},e!==null){const r=Math.pow(10,4),s=Math.cos(Au*t),o=e.getIndex(),a=e.getAttribute("position"),l=o?o.count:a.count,c=[0,0,0],u=["a","b","c"],p=new Array(3),m={},g=[];for(let x=0;x<l;x+=3){o?(c[0]=o.getX(x),c[1]=o.getX(x+1),c[2]=o.getX(x+2)):(c[0]=x,c[1]=x+1,c[2]=x+2);const{a:b,b:w,c:v}=Bv;if(b.fromBufferAttribute(a,c[0]),w.fromBufferAttribute(a,c[1]),v.fromBufferAttribute(a,c[2]),Bv.getNormal(cT),p[0]=`${Math.round(b.x*r)},${Math.round(b.y*r)},${Math.round(b.z*r)}`,p[1]=`${Math.round(w.x*r)},${Math.round(w.y*r)},${Math.round(w.z*r)}`,p[2]=`${Math.round(v.x*r)},${Math.round(v.y*r)},${Math.round(v.z*r)}`,!(p[0]===p[1]||p[1]===p[2]||p[2]===p[0]))for(let S=0;S<3;S++){const E=(S+1)%3,C=p[S],U=p[E],O=Bv[u[S]],N=Bv[u[E]],P=`${C}_${U}`,A=`${U}_${C}`;A in m&&m[A]?(cT.dot(m[A].normal)<=s&&(g.push(O.x,O.y,O.z),g.push(N.x,N.y,N.z)),m[A]=null):P in m||(m[P]={index0:c[S],index1:c[E],normal:cT.clone()})}}for(const x in m)if(m[x]){const{index0:b,index1:w}=m[x];Fv.fromBufferAttribute(a,b),Vv.fromBufferAttribute(a,w),g.push(Fv.x,Fv.y,Fv.z),g.push(Vv.x,Vv.y,Vv.z)}this.setAttribute("position",new ft(g,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}class Iu extends sg{constructor(e){super(e),this.uuid=_s(),this.type="Shape",this.holes=[]}getPointsHoles(e){const t=[];for(let i=0,r=this.holes.length;i<r;i++)t[i]=this.holes[i].getPoints(e);return t}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let t=0,i=e.holes.length;t<i;t++){const r=e.holes[t];this.holes.push(r.clone())}return this}toJSON(){const e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let t=0,i=this.holes.length;t<i;t++){const r=this.holes[t];e.holes.push(r.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let t=0,i=e.holes.length;t<i;t++){const r=e.holes[t];this.holes.push(new sg().fromJSON(r))}return this}}class QQ{static triangulate(e,t,i=2){const r=t&&t.length,s=r?t[0]*i:e.length;let o=j4(e,0,s,i,!0);const a=[];if(!o||o.next===o.prev)return a;let l,c,u,p,m,g,x;if(r&&(o=iZ(e,t,o,i)),e.length>80*i){l=u=e[0],c=p=e[1];for(let b=i;b<s;b+=i)m=e[b],g=e[b+1],m<l&&(l=m),g<c&&(c=g),m>u&&(u=m),g>p&&(p=g);x=Math.max(u-l,p-c),x=x!==0?32767/x:0}return og(o,a,i,l,c,x,0),a}}function j4(n,e,t,i,r){let s,o;if(r===pZ(n,e,t,i)>0)for(s=e;s<t;s+=i)o=OD(s,n[s],n[s+1],o);else for(s=t-i;s>=e;s-=i)o=OD(s,n[s],n[s+1],o);return o&&jw(o,o.next)&&(lg(o),o=o.next),o}function Xu(n,e){if(!n)return n;e||(e=n);let t=n,i;do if(i=!1,!t.steiner&&(jw(t,t.next)||Wn(t.prev,t,t.next)===0)){if(lg(t),t=e=t.prev,t===t.next)break;i=!0}else t=t.next;while(i||t!==e);return e}function og(n,e,t,i,r,s,o){if(!n)return;!o&&s&&lZ(n,i,r,s);let a=n,l,c;for(;n.prev!==n.next;){if(l=n.prev,c=n.next,s?eZ(n,i,r,s):ZQ(n)){e.push(l.i/t|0),e.push(n.i/t|0),e.push(c.i/t|0),lg(n),n=c.next,a=c.next;continue}if(n=c,n===a){o?o===1?(n=tZ(Xu(n),e,t),og(n,e,t,i,r,s,2)):o===2&&nZ(n,e,t,i,r,s):og(Xu(n),e,t,i,r,s,1);break}}}function ZQ(n){const e=n.prev,t=n,i=n.next;if(Wn(e,t,i)>=0)return!1;const r=e.x,s=t.x,o=i.x,a=e.y,l=t.y,c=i.y,u=r<s?r<o?r:o:s<o?s:o,p=a<l?a<c?a:c:l<c?l:c,m=r>s?r>o?r:o:s>o?s:o,g=a>l?a>c?a:c:l>c?l:c;let x=i.next;for(;x!==e;){if(x.x>=u&&x.x<=m&&x.y>=p&&x.y<=g&&wd(r,a,s,l,o,c,x.x,x.y)&&Wn(x.prev,x,x.next)>=0)return!1;x=x.next}return!0}function eZ(n,e,t,i){const r=n.prev,s=n,o=n.next;if(Wn(r,s,o)>=0)return!1;const a=r.x,l=s.x,c=o.x,u=r.y,p=s.y,m=o.y,g=a<l?a<c?a:c:l<c?l:c,x=u<p?u<m?u:m:p<m?p:m,b=a>l?a>c?a:c:l>c?l:c,w=u>p?u>m?u:m:p>m?p:m,v=v1(g,x,e,t,i),S=v1(b,w,e,t,i);let E=n.prevZ,C=n.nextZ;for(;E&&E.z>=v&&C&&C.z<=S;){if(E.x>=g&&E.x<=b&&E.y>=x&&E.y<=w&&E!==r&&E!==o&&wd(a,u,l,p,c,m,E.x,E.y)&&Wn(E.prev,E,E.next)>=0||(E=E.prevZ,C.x>=g&&C.x<=b&&C.y>=x&&C.y<=w&&C!==r&&C!==o&&wd(a,u,l,p,c,m,C.x,C.y)&&Wn(C.prev,C,C.next)>=0))return!1;C=C.nextZ}for(;E&&E.z>=v;){if(E.x>=g&&E.x<=b&&E.y>=x&&E.y<=w&&E!==r&&E!==o&&wd(a,u,l,p,c,m,E.x,E.y)&&Wn(E.prev,E,E.next)>=0)return!1;E=E.prevZ}for(;C&&C.z<=S;){if(C.x>=g&&C.x<=b&&C.y>=x&&C.y<=w&&C!==r&&C!==o&&wd(a,u,l,p,c,m,C.x,C.y)&&Wn(C.prev,C,C.next)>=0)return!1;C=C.nextZ}return!0}function tZ(n,e,t){let i=n;do{const r=i.prev,s=i.next.next;!jw(r,s)&&F4(r,i,i.next,s)&&ag(r,s)&&ag(s,r)&&(e.push(r.i/t|0),e.push(i.i/t|0),e.push(s.i/t|0),lg(i),lg(i.next),i=n=s),i=i.next}while(i!==n);return Xu(i)}function nZ(n,e,t,i,r,s){let o=n;do{let a=o.next.next;for(;a!==o.prev;){if(o.i!==a.i&&hZ(o,a)){let l=V4(o,a);o=Xu(o,o.next),l=Xu(l,l.next),og(o,e,t,i,r,s,0),og(l,e,t,i,r,s,0);return}a=a.next}o=o.next}while(o!==n)}function iZ(n,e,t,i){const r=[];let s,o,a,l,c;for(s=0,o=e.length;s<o;s++)a=e[s]*i,l=s<o-1?e[s+1]*i:n.length,c=j4(n,a,l,i,!1),c===c.next&&(c.steiner=!0),r.push(uZ(c));for(r.sort(rZ),s=0;s<r.length;s++)t=sZ(r[s],t);return t}function rZ(n,e){return n.x-e.x}function sZ(n,e){const t=oZ(n,e);if(!t)return e;const i=V4(t,n);return Xu(i,i.next),Xu(t,t.next)}function oZ(n,e){let t=e,i=-1/0,r;const s=n.x,o=n.y;do{if(o<=t.y&&o>=t.next.y&&t.next.y!==t.y){const m=t.x+(o-t.y)*(t.next.x-t.x)/(t.next.y-t.y);if(m<=s&&m>i&&(i=m,r=t.x<t.next.x?t:t.next,m===s))return r}t=t.next}while(t!==e);if(!r)return null;const a=r,l=r.x,c=r.y;let u=1/0,p;t=r;do s>=t.x&&t.x>=l&&s!==t.x&&wd(o<c?s:i,o,l,c,o<c?i:s,o,t.x,t.y)&&(p=Math.abs(o-t.y)/(s-t.x),ag(t,n)&&(p<u||p===u&&(t.x>r.x||t.x===r.x&&aZ(r,t)))&&(r=t,u=p)),t=t.next;while(t!==a);return r}function aZ(n,e){return Wn(n.prev,n,e.prev)<0&&Wn(e.next,n,n.next)<0}function lZ(n,e,t,i){let r=n;do r.z===0&&(r.z=v1(r.x,r.y,e,t,i)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next;while(r!==n);r.prevZ.nextZ=null,r.prevZ=null,cZ(r)}function cZ(n){let e,t,i,r,s,o,a,l,c=1;do{for(t=n,n=null,s=null,o=0;t;){for(o++,i=t,a=0,e=0;e<c&&(a++,i=i.nextZ,!!i);e++);for(l=c;a>0||l>0&&i;)a!==0&&(l===0||!i||t.z<=i.z)?(r=t,t=t.nextZ,a--):(r=i,i=i.nextZ,l--),s?s.nextZ=r:n=r,r.prevZ=s,s=r;t=i}s.nextZ=null,c*=2}while(o>1);return n}function v1(n,e,t,i,r){return n=(n-t)*r|0,e=(e-i)*r|0,n=(n|n<<8)&16711935,n=(n|n<<4)&252645135,n=(n|n<<2)&858993459,n=(n|n<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,n|e<<1}function uZ(n){let e=n,t=n;do(e.x<t.x||e.x===t.x&&e.y<t.y)&&(t=e),e=e.next;while(e!==n);return t}function wd(n,e,t,i,r,s,o,a){return(r-o)*(e-a)>=(n-o)*(s-a)&&(n-o)*(i-a)>=(t-o)*(e-a)&&(t-o)*(s-a)>=(r-o)*(i-a)}function hZ(n,e){return n.next.i!==e.i&&n.prev.i!==e.i&&!dZ(n,e)&&(ag(n,e)&&ag(e,n)&&fZ(n,e)&&(Wn(n.prev,n,e.prev)||Wn(n,e.prev,e))||jw(n,e)&&Wn(n.prev,n,n.next)>0&&Wn(e.prev,e,e.next)>0)}function Wn(n,e,t){return(e.y-n.y)*(t.x-e.x)-(e.x-n.x)*(t.y-e.y)}function jw(n,e){return n.x===e.x&&n.y===e.y}function F4(n,e,t,i){const r=Hv(Wn(n,e,t)),s=Hv(Wn(n,e,i)),o=Hv(Wn(t,i,n)),a=Hv(Wn(t,i,e));return!!(r!==s&&o!==a||r===0&&zv(n,t,e)||s===0&&zv(n,i,e)||o===0&&zv(t,n,i)||a===0&&zv(t,e,i))}function zv(n,e,t){return e.x<=Math.max(n.x,t.x)&&e.x>=Math.min(n.x,t.x)&&e.y<=Math.max(n.y,t.y)&&e.y>=Math.min(n.y,t.y)}function Hv(n){return n>0?1:n<0?-1:0}function dZ(n,e){let t=n;do{if(t.i!==n.i&&t.next.i!==n.i&&t.i!==e.i&&t.next.i!==e.i&&F4(t,t.next,n,e))return!0;t=t.next}while(t!==n);return!1}function ag(n,e){return Wn(n.prev,n,n.next)<0?Wn(n,e,n.next)>=0&&Wn(n,n.prev,e)>=0:Wn(n,e,n.prev)<0||Wn(n,n.next,e)<0}function fZ(n,e){let t=n,i=!1;const r=(n.x+e.x)/2,s=(n.y+e.y)/2;do t.y>s!=t.next.y>s&&t.next.y!==t.y&&r<(t.next.x-t.x)*(s-t.y)/(t.next.y-t.y)+t.x&&(i=!i),t=t.next;while(t!==n);return i}function V4(n,e){const t=new x1(n.i,n.x,n.y),i=new x1(e.i,e.x,e.y),r=n.next,s=e.prev;return n.next=e,e.prev=n,t.next=r,r.prev=t,i.next=t,t.prev=i,s.next=i,i.prev=s,i}function OD(n,e,t,i){const r=new x1(n,e,t);return i?(r.next=i.next,r.prev=i,i.next.prev=r,i.next=r):(r.prev=r,r.next=r),r}function lg(n){n.next.prev=n.prev,n.prev.next=n.next,n.prevZ&&(n.prevZ.nextZ=n.nextZ),n.nextZ&&(n.nextZ.prevZ=n.prevZ)}function x1(n,e,t){this.i=n,this.x=e,this.y=t,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function pZ(n,e,t,i){let r=0;for(let s=e,o=t-i;s<t;s+=i)r+=(n[o]-n[s])*(n[s+1]+n[o+1]),o=s;return r}class Go{static area(e){const t=e.length;let i=0;for(let r=t-1,s=0;s<t;r=s++)i+=e[r].x*e[s].y-e[s].x*e[r].y;return i*.5}static isClockWise(e){return Go.area(e)<0}static triangulateShape(e,t){const i=[],r=[],s=[];UD(e),jD(i,e);let o=e.length;t.forEach(UD);for(let l=0;l<t.length;l++)r.push(o),o+=t[l].length,jD(i,t[l]);const a=QQ.triangulate(i,r);for(let l=0;l<a.length;l+=3)s.push(a.slice(l,l+3));return s}}function UD(n){const e=n.length;e>2&&n[e-1].equals(n[0])&&n.pop()}function jD(n,e){for(let t=0;t<e.length;t++)n.push(e[t].x),n.push(e[t].y)}class Fw extends Xt{constructor(e=new Iu([new Ie(.5,.5),new Ie(-.5,.5),new Ie(-.5,-.5),new Ie(.5,-.5)]),t={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},e=Array.isArray(e)?e:[e];const i=this,r=[],s=[];for(let a=0,l=e.length;a<l;a++){const c=e[a];o(c)}this.setAttribute("position",new ft(r,3)),this.setAttribute("uv",new ft(s,2)),this.computeVertexNormals();function o(a){const l=[],c=t.curveSegments!==void 0?t.curveSegments:12,u=t.steps!==void 0?t.steps:1,p=t.depth!==void 0?t.depth:1;let m=t.bevelEnabled!==void 0?t.bevelEnabled:!0,g=t.bevelThickness!==void 0?t.bevelThickness:.2,x=t.bevelSize!==void 0?t.bevelSize:g-.1,b=t.bevelOffset!==void 0?t.bevelOffset:0,w=t.bevelSegments!==void 0?t.bevelSegments:3;const v=t.extrudePath,S=t.UVGenerator!==void 0?t.UVGenerator:mZ;let E,C=!1,U,O,N,P;v&&(E=v.getSpacedPoints(u),C=!0,m=!1,U=v.computeFrenetFrames(u,!1),O=new K,N=new K,P=new K),m||(w=0,g=0,x=0,b=0);const A=a.extractPoints(c);let M=A.shape;const D=A.holes;if(!Go.isClockWise(M)){M=M.reverse();for(let Ce=0,Se=D.length;Ce<Se;Ce++){const X=D[Ce];Go.isClockWise(X)&&(D[Ce]=X.reverse())}}const F=Go.triangulateShape(M,D),re=M;for(let Ce=0,Se=D.length;Ce<Se;Ce++){const X=D[Ce];M=M.concat(X)}function le(Ce,Se,X){return Se||console.error("THREE.ExtrudeGeometry: vec does not exist"),Ce.clone().addScaledVector(Se,X)}const he=M.length,ue=F.length;function q(Ce,Se,X){let ot,Ne,qe;const Ue=Ce.x-Se.x,gt=Ce.y-Se.y,Ve=X.x-Ce.x,$=X.y-Ce.y,B=Ue*Ue+gt*gt,ae=Ue*$-gt*Ve;if(Math.abs(ae)>Number.EPSILON){const be=Math.sqrt(B),Pe=Math.sqrt(Ve*Ve+$*$),ve=Se.x-gt/be,Fe=Se.y+Ue/be,We=X.x-$/Pe,tt=X.y+Ve/Pe,Gt=((We-ve)*$-(tt-Fe)*Ve)/(Ue*$-gt*Ve);ot=ve+Ue*Gt-Ce.x,Ne=Fe+gt*Gt-Ce.y;const Le=ot*ot+Ne*Ne;if(Le<=2)return new Ie(ot,Ne);qe=Math.sqrt(Le/2)}else{let be=!1;Ue>Number.EPSILON?Ve>Number.EPSILON&&(be=!0):Ue<-Number.EPSILON?Ve<-Number.EPSILON&&(be=!0):Math.sign(gt)===Math.sign($)&&(be=!0),be?(ot=-gt,Ne=Ue,qe=Math.sqrt(B)):(ot=Ue,Ne=gt,qe=Math.sqrt(B/2))}return new Ie(ot/qe,Ne/qe)}const Q=[];for(let Ce=0,Se=re.length,X=Se-1,ot=Ce+1;Ce<Se;Ce++,X++,ot++)X===Se&&(X=0),ot===Se&&(ot=0),Q[Ce]=q(re[Ce],re[X],re[ot]);const j=[];let J,ce=Q.concat();for(let Ce=0,Se=D.length;Ce<Se;Ce++){const X=D[Ce];J=[];for(let ot=0,Ne=X.length,qe=Ne-1,Ue=ot+1;ot<Ne;ot++,qe++,Ue++)qe===Ne&&(qe=0),Ue===Ne&&(Ue=0),J[ot]=q(X[ot],X[qe],X[Ue]);j.push(J),ce=ce.concat(J)}for(let Ce=0;Ce<w;Ce++){const Se=Ce/w,X=g*Math.cos(Se*Math.PI/2),ot=x*Math.sin(Se*Math.PI/2)+b;for(let Ne=0,qe=re.length;Ne<qe;Ne++){const Ue=le(re[Ne],Q[Ne],ot);Me(Ue.x,Ue.y,-X)}for(let Ne=0,qe=D.length;Ne<qe;Ne++){const Ue=D[Ne];J=j[Ne];for(let gt=0,Ve=Ue.length;gt<Ve;gt++){const $=le(Ue[gt],J[gt],ot);Me($.x,$.y,-X)}}}const me=x+b;for(let Ce=0;Ce<he;Ce++){const Se=m?le(M[Ce],ce[Ce],me):M[Ce];C?(N.copy(U.normals[0]).multiplyScalar(Se.x),O.copy(U.binormals[0]).multiplyScalar(Se.y),P.copy(E[0]).add(N).add(O),Me(P.x,P.y,P.z)):Me(Se.x,Se.y,0)}for(let Ce=1;Ce<=u;Ce++)for(let Se=0;Se<he;Se++){const X=m?le(M[Se],ce[Se],me):M[Se];C?(N.copy(U.normals[Ce]).multiplyScalar(X.x),O.copy(U.binormals[Ce]).multiplyScalar(X.y),P.copy(E[Ce]).add(N).add(O),Me(P.x,P.y,P.z)):Me(X.x,X.y,p/u*Ce)}for(let Ce=w-1;Ce>=0;Ce--){const Se=Ce/w,X=g*Math.cos(Se*Math.PI/2),ot=x*Math.sin(Se*Math.PI/2)+b;for(let Ne=0,qe=re.length;Ne<qe;Ne++){const Ue=le(re[Ne],Q[Ne],ot);Me(Ue.x,Ue.y,p+X)}for(let Ne=0,qe=D.length;Ne<qe;Ne++){const Ue=D[Ne];J=j[Ne];for(let gt=0,Ve=Ue.length;gt<Ve;gt++){const $=le(Ue[gt],J[gt],ot);C?Me($.x,$.y+E[u-1].y,E[u-1].x+X):Me($.x,$.y,p+X)}}}oe(),ye();function oe(){const Ce=r.length/3;if(m){let Se=0,X=he*Se;for(let ot=0;ot<ue;ot++){const Ne=F[ot];ht(Ne[2]+X,Ne[1]+X,Ne[0]+X)}Se=u+w*2,X=he*Se;for(let ot=0;ot<ue;ot++){const Ne=F[ot];ht(Ne[0]+X,Ne[1]+X,Ne[2]+X)}}else{for(let Se=0;Se<ue;Se++){const X=F[Se];ht(X[2],X[1],X[0])}for(let Se=0;Se<ue;Se++){const X=F[Se];ht(X[0]+he*u,X[1]+he*u,X[2]+he*u)}}i.addGroup(Ce,r.length/3-Ce,0)}function ye(){const Ce=r.length/3;let Se=0;Re(re,Se),Se+=re.length;for(let X=0,ot=D.length;X<ot;X++){const Ne=D[X];Re(Ne,Se),Se+=Ne.length}i.addGroup(Ce,r.length/3-Ce,1)}function Re(Ce,Se){let X=Ce.length;for(;--X>=0;){const ot=X;let Ne=X-1;Ne<0&&(Ne=Ce.length-1);for(let qe=0,Ue=u+w*2;qe<Ue;qe++){const gt=he*qe,Ve=he*(qe+1),$=Se+ot+gt,B=Se+Ne+gt,ae=Se+Ne+Ve,be=Se+ot+Ve;zt($,B,ae,be)}}}function Me(Ce,Se,X){l.push(Ce),l.push(Se),l.push(X)}function ht(Ce,Se,X){Ge(Ce),Ge(Se),Ge(X);const ot=r.length/3,Ne=S.generateTopUV(i,r,ot-3,ot-2,ot-1);Je(Ne[0]),Je(Ne[1]),Je(Ne[2])}function zt(Ce,Se,X,ot){Ge(Ce),Ge(Se),Ge(ot),Ge(Se),Ge(X),Ge(ot);const Ne=r.length/3,qe=S.generateSideWallUV(i,r,Ne-6,Ne-3,Ne-2,Ne-1);Je(qe[0]),Je(qe[1]),Je(qe[3]),Je(qe[1]),Je(qe[2]),Je(qe[3])}function Ge(Ce){r.push(l[Ce*3+0]),r.push(l[Ce*3+1]),r.push(l[Ce*3+2])}function Je(Ce){s.push(Ce.x),s.push(Ce.y)}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),t=this.parameters.shapes,i=this.parameters.options;return gZ(t,i,e)}static fromJSON(e,t){const i=[];for(let s=0,o=e.shapes.length;s<o;s++){const a=t[e.shapes[s]];i.push(a)}const r=e.options.extrudePath;return r!==void 0&&(e.options.extrudePath=new p_[r.type]().fromJSON(r)),new Fw(i,e.options)}}const mZ={generateTopUV:function(n,e,t,i,r){const s=e[t*3],o=e[t*3+1],a=e[i*3],l=e[i*3+1],c=e[r*3],u=e[r*3+1];return[new Ie(s,o),new Ie(a,l),new Ie(c,u)]},generateSideWallUV:function(n,e,t,i,r,s){const o=e[t*3],a=e[t*3+1],l=e[t*3+2],c=e[i*3],u=e[i*3+1],p=e[i*3+2],m=e[r*3],g=e[r*3+1],x=e[r*3+2],b=e[s*3],w=e[s*3+1],v=e[s*3+2];return Math.abs(a-u)<Math.abs(o-c)?[new Ie(o,1-l),new Ie(c,1-p),new Ie(m,1-x),new Ie(b,1-v)]:[new Ie(a,1-l),new Ie(u,1-p),new Ie(g,1-x),new Ie(w,1-v)]}};function gZ(n,e,t){if(t.shapes=[],Array.isArray(n))for(let i=0,r=n.length;i<r;i++){const s=n[i];t.shapes.push(s.uuid)}else t.shapes.push(n.uuid);return t.options=Object.assign({},e),e.extrudePath!==void 0&&(t.options.extrudePath=e.extrudePath.toJSON()),t}class Vw extends vc{constructor(e=1,t=0){const i=(1+Math.sqrt(5))/2,r=[-1,i,0,1,i,0,-1,-i,0,1,-i,0,0,-1,i,0,1,i,0,-1,-i,0,1,-i,i,0,-1,i,0,1,-i,0,-1,-i,0,1],s=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];super(r,s,e,t),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new Vw(e.radius,e.detail)}}class Wg extends vc{constructor(e=1,t=0){const i=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],r=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];super(i,r,e,t),this.type="OctahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new Wg(e.radius,e.detail)}}class Af extends Xt{constructor(e=1,t=1,i=1,r=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:i,heightSegments:r};const s=e/2,o=t/2,a=Math.floor(i),l=Math.floor(r),c=a+1,u=l+1,p=e/a,m=t/l,g=[],x=[],b=[],w=[];for(let v=0;v<u;v++){const S=v*m-o;for(let E=0;E<c;E++){const C=E*p-s;x.push(C,-S,0),b.push(0,0,1),w.push(E/a),w.push(1-v/l)}}for(let v=0;v<l;v++)for(let S=0;S<a;S++){const E=S+c*v,C=S+c*(v+1),U=S+1+c*(v+1),O=S+1+c*v;g.push(E,C,O),g.push(C,U,O)}this.setIndex(g),this.setAttribute("position",new ft(x,3)),this.setAttribute("normal",new ft(b,3)),this.setAttribute("uv",new ft(w,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Af(e.width,e.height,e.widthSegments,e.heightSegments)}}class Bw extends Xt{constructor(e=.5,t=1,i=32,r=1,s=0,o=Math.PI*2){super(),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:i,phiSegments:r,thetaStart:s,thetaLength:o},i=Math.max(3,i),r=Math.max(1,r);const a=[],l=[],c=[],u=[];let p=e;const m=(t-e)/r,g=new K,x=new Ie;for(let b=0;b<=r;b++){for(let w=0;w<=i;w++){const v=s+w/i*o;g.x=p*Math.cos(v),g.y=p*Math.sin(v),l.push(g.x,g.y,g.z),c.push(0,0,1),x.x=(g.x/t+1)/2,x.y=(g.y/t+1)/2,u.push(x.x,x.y)}p+=m}for(let b=0;b<r;b++){const w=b*(i+1);for(let v=0;v<i;v++){const S=v+w,E=S,C=S+i+1,U=S+i+2,O=S+1;a.push(E,C,O),a.push(C,U,O)}}this.setIndex(a),this.setAttribute("position",new ft(l,3)),this.setAttribute("normal",new ft(c,3)),this.setAttribute("uv",new ft(u,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Bw(e.innerRadius,e.outerRadius,e.thetaSegments,e.phiSegments,e.thetaStart,e.thetaLength)}}class zw extends Xt{constructor(e=new Iu([new Ie(0,.5),new Ie(-.5,-.5),new Ie(.5,-.5)]),t=12){super(),this.type="ShapeGeometry",this.parameters={shapes:e,curveSegments:t};const i=[],r=[],s=[],o=[];let a=0,l=0;if(Array.isArray(e)===!1)c(e);else for(let u=0;u<e.length;u++)c(e[u]),this.addGroup(a,l,u),a+=l,l=0;this.setIndex(i),this.setAttribute("position",new ft(r,3)),this.setAttribute("normal",new ft(s,3)),this.setAttribute("uv",new ft(o,2));function c(u){const p=r.length/3,m=u.extractPoints(t);let g=m.shape;const x=m.holes;Go.isClockWise(g)===!1&&(g=g.reverse());for(let w=0,v=x.length;w<v;w++){const S=x[w];Go.isClockWise(S)===!0&&(x[w]=S.reverse())}const b=Go.triangulateShape(g,x);for(let w=0,v=x.length;w<v;w++){const S=x[w];g=g.concat(S)}for(let w=0,v=g.length;w<v;w++){const S=g[w];r.push(S.x,S.y,0),s.push(0,0,1),o.push(S.x,S.y)}for(let w=0,v=b.length;w<v;w++){const S=b[w],E=S[0]+p,C=S[1]+p,U=S[2]+p;i.push(E,C,U),l+=3}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),t=this.parameters.shapes;return yZ(t,e)}static fromJSON(e,t){const i=[];for(let r=0,s=e.shapes.length;r<s;r++){const o=t[e.shapes[r]];i.push(o)}return new zw(i,e.curveSegments)}}function yZ(n,e){if(e.shapes=[],Array.isArray(n))for(let t=0,i=n.length;t<i;t++){const r=n[t];e.shapes.push(r.uuid)}else e.shapes.push(n.uuid);return e}class qg extends Xt{constructor(e=1,t=32,i=16,r=0,s=Math.PI*2,o=0,a=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:i,phiStart:r,phiLength:s,thetaStart:o,thetaLength:a},t=Math.max(3,Math.floor(t)),i=Math.max(2,Math.floor(i));const l=Math.min(o+a,Math.PI);let c=0;const u=[],p=new K,m=new K,g=[],x=[],b=[],w=[];for(let v=0;v<=i;v++){const S=[],E=v/i;let C=0;v===0&&o===0?C=.5/t:v===i&&l===Math.PI&&(C=-.5/t);for(let U=0;U<=t;U++){const O=U/t;p.x=-e*Math.cos(r+O*s)*Math.sin(o+E*a),p.y=e*Math.cos(o+E*a),p.z=e*Math.sin(r+O*s)*Math.sin(o+E*a),x.push(p.x,p.y,p.z),m.copy(p).normalize(),b.push(m.x,m.y,m.z),w.push(O+C,1-E),S.push(c++)}u.push(S)}for(let v=0;v<i;v++)for(let S=0;S<t;S++){const E=u[v][S+1],C=u[v][S],U=u[v+1][S],O=u[v+1][S+1];(v!==0||o>0)&&g.push(E,C,O),(v!==i-1||l<Math.PI)&&g.push(C,U,O)}this.setIndex(g),this.setAttribute("position",new ft(x,3)),this.setAttribute("normal",new ft(b,3)),this.setAttribute("uv",new ft(w,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new qg(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class Hw extends vc{constructor(e=1,t=0){const i=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],r=[2,1,0,0,3,2,1,3,0,2,3,1];super(i,r,e,t),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new Hw(e.radius,e.detail)}}class Gw extends Xt{constructor(e=1,t=.4,i=12,r=48,s=Math.PI*2){super(),this.type="TorusGeometry",this.parameters={radius:e,tube:t,radialSegments:i,tubularSegments:r,arc:s},i=Math.floor(i),r=Math.floor(r);const o=[],a=[],l=[],c=[],u=new K,p=new K,m=new K;for(let g=0;g<=i;g++)for(let x=0;x<=r;x++){const b=x/r*s,w=g/i*Math.PI*2;p.x=(e+t*Math.cos(w))*Math.cos(b),p.y=(e+t*Math.cos(w))*Math.sin(b),p.z=t*Math.sin(w),a.push(p.x,p.y,p.z),u.x=e*Math.cos(b),u.y=e*Math.sin(b),m.subVectors(p,u).normalize(),l.push(m.x,m.y,m.z),c.push(x/r),c.push(g/i)}for(let g=1;g<=i;g++)for(let x=1;x<=r;x++){const b=(r+1)*g+x-1,w=(r+1)*(g-1)+x-1,v=(r+1)*(g-1)+x,S=(r+1)*g+x;o.push(b,w,S),o.push(w,v,S)}this.setIndex(o),this.setAttribute("position",new ft(a,3)),this.setAttribute("normal",new ft(l,3)),this.setAttribute("uv",new ft(c,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Gw(e.radius,e.tube,e.radialSegments,e.tubularSegments,e.arc)}}class Ww extends Xt{constructor(e=1,t=.4,i=64,r=8,s=2,o=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:t,tubularSegments:i,radialSegments:r,p:s,q:o},i=Math.floor(i),r=Math.floor(r);const a=[],l=[],c=[],u=[],p=new K,m=new K,g=new K,x=new K,b=new K,w=new K,v=new K;for(let E=0;E<=i;++E){const C=E/i*s*Math.PI*2;S(C,s,o,e,g),S(C+.01,s,o,e,x),w.subVectors(x,g),v.addVectors(x,g),b.crossVectors(w,v),v.crossVectors(b,w),b.normalize(),v.normalize();for(let U=0;U<=r;++U){const O=U/r*Math.PI*2,N=-t*Math.cos(O),P=t*Math.sin(O);p.x=g.x+(N*v.x+P*b.x),p.y=g.y+(N*v.y+P*b.y),p.z=g.z+(N*v.z+P*b.z),l.push(p.x,p.y,p.z),m.subVectors(p,g).normalize(),c.push(m.x,m.y,m.z),u.push(E/i),u.push(U/r)}}for(let E=1;E<=i;E++)for(let C=1;C<=r;C++){const U=(r+1)*(E-1)+(C-1),O=(r+1)*E+(C-1),N=(r+1)*E+C,P=(r+1)*(E-1)+C;a.push(U,O,P),a.push(O,N,P)}this.setIndex(a),this.setAttribute("position",new ft(l,3)),this.setAttribute("normal",new ft(c,3)),this.setAttribute("uv",new ft(u,2));function S(E,C,U,O,N){const P=Math.cos(E),A=Math.sin(E),M=U/C*E,D=Math.cos(M);N.x=O*(2+D)*.5*P,N.y=O*(2+D)*A*.5,N.z=O*Math.sin(M)*.5}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Ww(e.radius,e.tube,e.tubularSegments,e.radialSegments,e.p,e.q)}}class qw extends Xt{constructor(e=new xM(new K(-1,-1,0),new K(-1,1,0),new K(1,1,0)),t=64,i=1,r=8,s=!1){super(),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:t,radius:i,radialSegments:r,closed:s};const o=e.computeFrenetFrames(t,s);this.tangents=o.tangents,this.normals=o.normals,this.binormals=o.binormals;const a=new K,l=new K,c=new Ie;let u=new K;const p=[],m=[],g=[],x=[];b(),this.setIndex(x),this.setAttribute("position",new ft(p,3)),this.setAttribute("normal",new ft(m,3)),this.setAttribute("uv",new ft(g,2));function b(){for(let E=0;E<t;E++)w(E);w(s===!1?t:0),S(),v()}function w(E){u=e.getPointAt(E/t,u);const C=o.normals[E],U=o.binormals[E];for(let O=0;O<=r;O++){const N=O/r*Math.PI*2,P=Math.sin(N),A=-Math.cos(N);l.x=A*C.x+P*U.x,l.y=A*C.y+P*U.y,l.z=A*C.z+P*U.z,l.normalize(),m.push(l.x,l.y,l.z),a.x=u.x+i*l.x,a.y=u.y+i*l.y,a.z=u.z+i*l.z,p.push(a.x,a.y,a.z)}}function v(){for(let E=1;E<=t;E++)for(let C=1;C<=r;C++){const U=(r+1)*(E-1)+(C-1),O=(r+1)*E+(C-1),N=(r+1)*E+C,P=(r+1)*(E-1)+C;x.push(U,O,P),x.push(O,N,P)}}function S(){for(let E=0;E<=t;E++)for(let C=0;C<=r;C++)c.x=E/t,c.y=C/r,g.push(c.x,c.y)}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON();return e.path=this.parameters.path.toJSON(),e}static fromJSON(e){return new qw(new p_[e.path.type]().fromJSON(e.path),e.tubularSegments,e.radius,e.radialSegments,e.closed)}}class B4 extends Xt{constructor(e=null){if(super(),this.type="WireframeGeometry",this.parameters={geometry:e},e!==null){const t=[],i=new Set,r=new K,s=new K;if(e.index!==null){const o=e.attributes.position,a=e.index;let l=e.groups;l.length===0&&(l=[{start:0,count:a.count,materialIndex:0}]);for(let c=0,u=l.length;c<u;++c){const p=l[c],m=p.start,g=p.count;for(let x=m,b=m+g;x<b;x+=3)for(let w=0;w<3;w++){const v=a.getX(x+w),S=a.getX(x+(w+1)%3);r.fromBufferAttribute(o,v),s.fromBufferAttribute(o,S),FD(r,s,i)===!0&&(t.push(r.x,r.y,r.z),t.push(s.x,s.y,s.z))}}}else{const o=e.attributes.position;for(let a=0,l=o.count/3;a<l;a++)for(let c=0;c<3;c++){const u=3*a+c,p=3*a+(c+1)%3;r.fromBufferAttribute(o,u),s.fromBufferAttribute(o,p),FD(r,s,i)===!0&&(t.push(r.x,r.y,r.z),t.push(s.x,s.y,s.z))}}this.setAttribute("position",new ft(t,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}function FD(n,e,t){const i=`${n.x},${n.y},${n.z}-${e.x},${e.y},${e.z}`,r=`${e.x},${e.y},${e.z}-${n.x},${n.y},${n.z}`;return t.has(i)===!0||t.has(r)===!0?!1:(t.add(i),t.add(r),!0)}var VD=Object.freeze({__proto__:null,BoxGeometry:th,CapsuleGeometry:Lw,CircleGeometry:kw,ConeGeometry:Ow,CylinderGeometry:Cf,DodecahedronGeometry:Uw,EdgesGeometry:U4,ExtrudeGeometry:Fw,IcosahedronGeometry:Vw,LatheGeometry:Gg,OctahedronGeometry:Wg,PlaneGeometry:Af,PolyhedronGeometry:vc,RingGeometry:Bw,ShapeGeometry:zw,SphereGeometry:qg,TetrahedronGeometry:Hw,TorusGeometry:Gw,TorusKnotGeometry:Ww,TubeGeometry:qw,WireframeGeometry:B4});class z4 extends Sr{constructor(e){super(),this.isShadowMaterial=!0,this.type="ShadowMaterial",this.color=new st(0),this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.fog=e.fog,this}}class H4 extends _o{constructor(e){super(e),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}}class wM extends Sr{constructor(e){super(),this.isMeshStandardMaterial=!0,this.type="MeshStandardMaterial",this.defines={STANDARD:""},this.color=new st(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new st(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=gc,this.normalScale=new Ie(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Ss,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class G4 extends wM{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.anisotropyRotation=0,this.anisotropyMap=null,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new Ie(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return Lt(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(t){this.ior=(1+.4*t)/(1-.4*t)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new st(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new st(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new st(1,1,1),this.specularColorMap=null,this._anisotropy=0,this._clearcoat=0,this._dispersion=0,this._iridescence=0,this._sheen=0,this._transmission=0,this.setValues(e)}get anisotropy(){return this._anisotropy}set anisotropy(e){this._anisotropy>0!=e>0&&this.version++,this._anisotropy=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!=e>0&&this.version++,this._iridescence=e}get dispersion(){return this._dispersion}set dispersion(e){this._dispersion>0!=e>0&&this.version++,this._dispersion=e}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.anisotropy=e.anisotropy,this.anisotropyRotation=e.anisotropyRotation,this.anisotropyMap=e.anisotropyMap,this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.dispersion=e.dispersion,this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}class W4 extends Sr{constructor(e){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new st(16777215),this.specular=new st(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new st(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=gc,this.normalScale=new Ie(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Ss,this.combine=jg,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class q4 extends Sr{constructor(e){super(),this.isMeshToonMaterial=!0,this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new st(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new st(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=gc,this.normalScale=new Ie(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}class $4 extends Sr{constructor(e){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=gc,this.normalScale=new Ie(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}class X4 extends Sr{constructor(e){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new st(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new st(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=gc,this.normalScale=new Ie(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Ss,this.combine=jg,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class bM extends Sr{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=a4,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class SM extends Sr{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}class K4 extends Sr{constructor(e){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new st(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=gc,this.normalScale=new Ie(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.flatShading=e.flatShading,this.fog=e.fog,this}}class Y4 extends jr{constructor(e){super(),this.isLineDashedMaterial=!0,this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}copy(e){return super.copy(e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}function xu(n,e,t){return!n||!t&&n.constructor===e?n:typeof e.BYTES_PER_ELEMENT=="number"?new e(n):Array.prototype.slice.call(n)}function J4(n){return ArrayBuffer.isView(n)&&!(n instanceof DataView)}function Q4(n){function e(r,s){return n[r]-n[s]}const t=n.length,i=new Array(t);for(let r=0;r!==t;++r)i[r]=r;return i.sort(e),i}function _1(n,e,t){const i=n.length,r=new n.constructor(i);for(let s=0,o=0;o!==i;++s){const a=t[s]*e;for(let l=0;l!==e;++l)r[o++]=n[a+l]}return r}function TM(n,e,t,i){let r=1,s=n[0];for(;s!==void 0&&s[i]===void 0;)s=n[r++];if(s===void 0)return;let o=s[i];if(o!==void 0)if(Array.isArray(o))do o=s[i],o!==void 0&&(e.push(s.time),t.push(...o)),s=n[r++];while(s!==void 0);else if(o.toArray!==void 0)do o=s[i],o!==void 0&&(e.push(s.time),o.toArray(t,t.length)),s=n[r++];while(s!==void 0);else do o=s[i],o!==void 0&&(e.push(s.time),t.push(o)),s=n[r++];while(s!==void 0)}function vZ(n,e,t,i,r=30){const s=n.clone();s.name=e;const o=[];for(let l=0;l<s.tracks.length;++l){const c=s.tracks[l],u=c.getValueSize(),p=[],m=[];for(let g=0;g<c.times.length;++g){const x=c.times[g]*r;if(!(x<t||x>=i)){p.push(c.times[g]);for(let b=0;b<u;++b)m.push(c.values[g*u+b])}}p.length!==0&&(c.times=xu(p,c.times.constructor),c.values=xu(m,c.values.constructor),o.push(c))}s.tracks=o;let a=1/0;for(let l=0;l<s.tracks.length;++l)a>s.tracks[l].times[0]&&(a=s.tracks[l].times[0]);for(let l=0;l<s.tracks.length;++l)s.tracks[l].shift(-1*a);return s.resetDuration(),s}function xZ(n,e=0,t=n,i=30){i<=0&&(i=30);const r=t.tracks.length,s=e/i;for(let o=0;o<r;++o){const a=t.tracks[o],l=a.ValueTypeName;if(l==="bool"||l==="string")continue;const c=n.tracks.find(function(v){return v.name===a.name&&v.ValueTypeName===l});if(c===void 0)continue;let u=0;const p=a.getValueSize();a.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(u=p/3);let m=0;const g=c.getValueSize();c.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(m=g/3);const x=a.times.length-1;let b;if(s<=a.times[0]){const v=u,S=p-u;b=a.values.slice(v,S)}else if(s>=a.times[x]){const v=x*p+u,S=v+p-u;b=a.values.slice(v,S)}else{const v=a.createInterpolant(),S=u,E=p-u;v.evaluate(s),b=v.resultBuffer.slice(S,E)}l==="quaternion"&&new is().fromArray(b).normalize().conjugate().toArray(b);const w=c.times.length;for(let v=0;v<w;++v){const S=v*g+m;if(l==="quaternion")is.multiplyQuaternionsFlat(c.values,S,b,0,c.values,S);else{const E=g-m*2;for(let C=0;C<E;++C)c.values[S+C]-=b[C]}}}return n.blendMode=rM,n}const _Z={convertArray:xu,isTypedArray:J4,getKeyframeOrder:Q4,sortedArray:_1,flattenJSON:TM,subclip:vZ,makeClipAdditive:xZ};class $g{constructor(e,t,i,r){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=r!==void 0?r:new t.constructor(i),this.sampleValues=t,this.valueSize=i,this.settings=null,this.DefaultSettings_={}}evaluate(e){const t=this.parameterPositions;let i=this._cachedIndex,r=t[i],s=t[i-1];e:{t:{let o;n:{i:if(!(e<r)){for(let a=i+2;;){if(r===void 0){if(e<s)break i;return i=t.length,this._cachedIndex=i,this.copySampleValue_(i-1)}if(i===a)break;if(s=r,r=t[++i],e<r)break t}o=t.length;break n}if(!(e>=s)){const a=t[1];e<a&&(i=2,s=a);for(let l=i-2;;){if(s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(i===l)break;if(r=s,s=t[--i-1],e>=s)break t}o=i,i=0;break n}break e}for(;i<o;){const a=i+o>>>1;e<t[a]?o=a:i=a+1}if(r=t[i],s=t[i-1],s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(r===void 0)return i=t.length,this._cachedIndex=i,this.copySampleValue_(i-1)}this._cachedIndex=i,this.intervalChanged_(i,s,r)}return this.interpolate_(i,s,e,r)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const t=this.resultBuffer,i=this.sampleValues,r=this.valueSize,s=e*r;for(let o=0;o!==r;++o)t[o]=i[s+o];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class Z4 extends $g{constructor(e,t,i,r){super(e,t,i,r),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:yu,endingEnd:yu}}intervalChanged_(e,t,i){const r=this.parameterPositions;let s=e-2,o=e+1,a=r[s],l=r[o];if(a===void 0)switch(this.getSettings_().endingStart){case vu:s=e,a=2*t-i;break;case eg:s=r.length-2,a=t+r[s]-r[s+1];break;default:s=e,a=i}if(l===void 0)switch(this.getSettings_().endingEnd){case vu:o=e,l=2*i-t;break;case eg:o=1,l=i+r[1]-r[0];break;default:o=e-1,l=t}const c=(i-t)*.5,u=this.valueSize;this._weightPrev=c/(t-a),this._weightNext=c/(l-i),this._offsetPrev=s*u,this._offsetNext=o*u}interpolate_(e,t,i,r){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=e*a,c=l-a,u=this._offsetPrev,p=this._offsetNext,m=this._weightPrev,g=this._weightNext,x=(i-t)/(r-t),b=x*x,w=b*x,v=-m*w+2*m*b-m*x,S=(1+m)*w+(-1.5-2*m)*b+(-.5+m)*x+1,E=(-1-g)*w+(1.5+g)*b+.5*x,C=g*w-g*b;for(let U=0;U!==a;++U)s[U]=v*o[u+U]+S*o[c+U]+E*o[l+U]+C*o[p+U];return s}}class EM extends $g{constructor(e,t,i,r){super(e,t,i,r)}interpolate_(e,t,i,r){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=e*a,c=l-a,u=(i-t)/(r-t),p=1-u;for(let m=0;m!==a;++m)s[m]=o[c+m]*p+o[l+m]*u;return s}}class eB extends $g{constructor(e,t,i,r){super(e,t,i,r)}interpolate_(e){return this.copySampleValue_(e-1)}}class bo{constructor(e,t,i,r){if(e===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(t===void 0||t.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=xu(t,this.TimeBufferType),this.values=xu(i,this.ValueBufferType),this.setInterpolation(r||this.DefaultInterpolation)}static toJSON(e){const t=e.constructor;let i;if(t.toJSON!==this.toJSON)i=t.toJSON(e);else{i={name:e.name,times:xu(e.times,Array),values:xu(e.values,Array)};const r=e.getInterpolation();r!==e.DefaultInterpolation&&(i.interpolation=r)}return i.type=e.ValueTypeName,i}InterpolantFactoryMethodDiscrete(e){return new eB(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new EM(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new Z4(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case Zm:t=this.InterpolantFactoryMethodDiscrete;break;case h_:t=this.InterpolantFactoryMethodLinear;break;case Rx:t=this.InterpolantFactoryMethodSmooth;break}if(t===void 0){const i="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(i);return console.warn("THREE.KeyframeTrack:",i),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return Zm;case this.InterpolantFactoryMethodLinear:return h_;case this.InterpolantFactoryMethodSmooth:return Rx}}getValueSize(){return this.values.length/this.times.length}shift(e){if(e!==0){const t=this.times;for(let i=0,r=t.length;i!==r;++i)t[i]+=e}return this}scale(e){if(e!==1){const t=this.times;for(let i=0,r=t.length;i!==r;++i)t[i]*=e}return this}trim(e,t){const i=this.times,r=i.length;let s=0,o=r-1;for(;s!==r&&i[s]<e;)++s;for(;o!==-1&&i[o]>t;)--o;if(++o,s!==0||o!==r){s>=o&&(o=Math.max(o,1),s=o-1);const a=this.getValueSize();this.times=i.slice(s,o),this.values=this.values.slice(s*a,o*a)}return this}validate(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const i=this.times,r=this.values,s=i.length;s===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let o=null;for(let a=0;a!==s;a++){const l=i[a];if(typeof l=="number"&&isNaN(l)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,a,l),e=!1;break}if(o!==null&&o>l){console.error("THREE.KeyframeTrack: Out of order keys.",this,a,l,o),e=!1;break}o=l}if(r!==void 0&&J4(r))for(let a=0,l=r.length;a!==l;++a){const c=r[a];if(isNaN(c)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,a,c),e=!1;break}}return e}optimize(){const e=this.times.slice(),t=this.values.slice(),i=this.getValueSize(),r=this.getInterpolation()===Rx,s=e.length-1;let o=1;for(let a=1;a<s;++a){let l=!1;const c=e[a],u=e[a+1];if(c!==u&&(a!==1||c!==e[0]))if(r)l=!0;else{const p=a*i,m=p-i,g=p+i;for(let x=0;x!==i;++x){const b=t[p+x];if(b!==t[m+x]||b!==t[g+x]){l=!0;break}}}if(l){if(a!==o){e[o]=e[a];const p=a*i,m=o*i;for(let g=0;g!==i;++g)t[m+g]=t[p+g]}++o}}if(s>0){e[o]=e[s];for(let a=s*i,l=o*i,c=0;c!==i;++c)t[l+c]=t[a+c];++o}return o!==e.length?(this.times=e.slice(0,o),this.values=t.slice(0,o*i)):(this.times=e,this.values=t),this}clone(){const e=this.times.slice(),t=this.values.slice(),i=this.constructor,r=new i(this.name,e,t);return r.createInterpolant=this.createInterpolant,r}}bo.prototype.TimeBufferType=Float32Array;bo.prototype.ValueBufferType=Float32Array;bo.prototype.DefaultInterpolation=h_;class nh extends bo{constructor(e,t,i){super(e,t,i)}}nh.prototype.ValueTypeName="bool";nh.prototype.ValueBufferType=Array;nh.prototype.DefaultInterpolation=Zm;nh.prototype.InterpolantFactoryMethodLinear=void 0;nh.prototype.InterpolantFactoryMethodSmooth=void 0;class CM extends bo{}CM.prototype.ValueTypeName="color";class cg extends bo{}cg.prototype.ValueTypeName="number";class tB extends $g{constructor(e,t,i,r){super(e,t,i,r)}interpolate_(e,t,i,r){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=(i-t)/(r-t);let c=e*a;for(let u=c+a;c!==u;c+=4)is.slerpFlat(s,0,o,c-a,o,c,l);return s}}class Xg extends bo{InterpolantFactoryMethodLinear(e){return new tB(this.times,this.values,this.getValueSize(),e)}}Xg.prototype.ValueTypeName="quaternion";Xg.prototype.InterpolantFactoryMethodSmooth=void 0;class ih extends bo{constructor(e,t,i){super(e,t,i)}}ih.prototype.ValueTypeName="string";ih.prototype.ValueBufferType=Array;ih.prototype.DefaultInterpolation=Zm;ih.prototype.InterpolantFactoryMethodLinear=void 0;ih.prototype.InterpolantFactoryMethodSmooth=void 0;class ug extends bo{}ug.prototype.ValueTypeName="vector";class hg{constructor(e="",t=-1,i=[],r=Tw){this.name=e,this.tracks=i,this.duration=t,this.blendMode=r,this.uuid=_s(),this.duration<0&&this.resetDuration()}static parse(e){const t=[],i=e.tracks,r=1/(e.fps||1);for(let o=0,a=i.length;o!==a;++o)t.push(bZ(i[o]).scale(r));const s=new this(e.name,e.duration,t,e.blendMode);return s.uuid=e.uuid,s}static toJSON(e){const t=[],i=e.tracks,r={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode};for(let s=0,o=i.length;s!==o;++s)t.push(bo.toJSON(i[s]));return r}static CreateFromMorphTargetSequence(e,t,i,r){const s=t.length,o=[];for(let a=0;a<s;a++){let l=[],c=[];l.push((a+s-1)%s,a,(a+1)%s),c.push(0,1,0);const u=Q4(l);l=_1(l,1,u),c=_1(c,1,u),!r&&l[0]===0&&(l.push(s),c.push(c[0])),o.push(new cg(".morphTargetInfluences["+t[a].name+"]",l,c).scale(1/i))}return new this(e,-1,o)}static findByName(e,t){let i=e;if(!Array.isArray(e)){const r=e;i=r.geometry&&r.geometry.animations||r.animations}for(let r=0;r<i.length;r++)if(i[r].name===t)return i[r];return null}static CreateClipsFromMorphTargetSequences(e,t,i){const r={},s=/^([\w-]*?)([\d]+)$/;for(let a=0,l=e.length;a<l;a++){const c=e[a],u=c.name.match(s);if(u&&u.length>1){const p=u[1];let m=r[p];m||(r[p]=m=[]),m.push(c)}}const o=[];for(const a in r)o.push(this.CreateFromMorphTargetSequence(a,r[a],t,i));return o}static parseAnimation(e,t){if(!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const i=function(p,m,g,x,b){if(g.length!==0){const w=[],v=[];TM(g,w,v,x),w.length!==0&&b.push(new p(m,w,v))}},r=[],s=e.name||"default",o=e.fps||30,a=e.blendMode;let l=e.length||-1;const c=e.hierarchy||[];for(let p=0;p<c.length;p++){const m=c[p].keys;if(!(!m||m.length===0))if(m[0].morphTargets){const g={};let x;for(x=0;x<m.length;x++)if(m[x].morphTargets)for(let b=0;b<m[x].morphTargets.length;b++)g[m[x].morphTargets[b]]=-1;for(const b in g){const w=[],v=[];for(let S=0;S!==m[x].morphTargets.length;++S){const E=m[x];w.push(E.time),v.push(E.morphTarget===b?1:0)}r.push(new cg(".morphTargetInfluence["+b+"]",w,v))}l=g.length*o}else{const g=".bones["+t[p].name+"]";i(ug,g+".position",m,"pos",r),i(Xg,g+".quaternion",m,"rot",r),i(ug,g+".scale",m,"scl",r)}}return r.length===0?null:new this(s,l,r,a)}resetDuration(){const e=this.tracks;let t=0;for(let i=0,r=e.length;i!==r;++i){const s=this.tracks[i];t=Math.max(t,s.times[s.times.length-1])}return this.duration=t,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function wZ(n){switch(n.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return cg;case"vector":case"vector2":case"vector3":case"vector4":return ug;case"color":return CM;case"quaternion":return Xg;case"bool":case"boolean":return nh;case"string":return ih}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+n)}function bZ(n){if(n.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=wZ(n.type);if(n.times===void 0){const t=[],i=[];TM(n.keys,t,i,"value"),n.times=t,n.values=i}return e.parse!==void 0?e.parse(n):new e(n.name,n.times,n.values,n.interpolation)}const _a={enabled:!1,files:{},add:function(n,e){this.enabled!==!1&&(this.files[n]=e)},get:function(n){if(this.enabled!==!1)return this.files[n]},remove:function(n){delete this.files[n]},clear:function(){this.files={}}};class AM{constructor(e,t,i){const r=this;let s=!1,o=0,a=0,l;const c=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=i,this.itemStart=function(u){a++,s===!1&&r.onStart!==void 0&&r.onStart(u,o,a),s=!0},this.itemEnd=function(u){o++,r.onProgress!==void 0&&r.onProgress(u,o,a),o===a&&(s=!1,r.onLoad!==void 0&&r.onLoad())},this.itemError=function(u){r.onError!==void 0&&r.onError(u)},this.resolveURL=function(u){return l?l(u):u},this.setURLModifier=function(u){return l=u,this},this.addHandler=function(u,p){return c.push(u,p),this},this.removeHandler=function(u){const p=c.indexOf(u);return p!==-1&&c.splice(p,2),this},this.getHandler=function(u){for(let p=0,m=c.length;p<m;p+=2){const g=c[p],x=c[p+1];if(g.global&&(g.lastIndex=0),g.test(u))return x}return null}}}const bd=new AM;let rs=class{constructor(e){this.manager=e!==void 0?e:bd,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){const i=this;return new Promise(function(r,s){i.load(e,r,t,s)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}};rs.DEFAULT_MATERIAL_NAME="__DEFAULT";const ua={};class SZ extends Error{constructor(e,t){super(e),this.response=t}}class Fa extends rs{constructor(e){super(e)}load(e,t,i,r){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=_a.get(e);if(s!==void 0)return this.manager.itemStart(e),setTimeout(()=>{t&&t(s),this.manager.itemEnd(e)},0),s;if(ua[e]!==void 0){ua[e].push({onLoad:t,onProgress:i,onError:r});return}ua[e]=[],ua[e].push({onLoad:t,onProgress:i,onError:r});const o=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin"}),a=this.mimeType,l=this.responseType;fetch(o).then(c=>{if(c.status===200||c.status===0){if(c.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||c.body===void 0||c.body.getReader===void 0)return c;const u=ua[e],p=c.body.getReader(),m=c.headers.get("X-File-Size")||c.headers.get("Content-Length"),g=m?parseInt(m):0,x=g!==0;let b=0;const w=new ReadableStream({start(v){S();function S(){p.read().then(({done:E,value:C})=>{if(E)v.close();else{b+=C.byteLength;const U=new ProgressEvent("progress",{lengthComputable:x,loaded:b,total:g});for(let O=0,N=u.length;O<N;O++){const P=u[O];P.onProgress&&P.onProgress(U)}v.enqueue(C),S()}},E=>{v.error(E)})}}});return new Response(w)}else throw new SZ(`fetch for "${c.url}" responded with ${c.status}: ${c.statusText}`,c)}).then(c=>{switch(l){case"arraybuffer":return c.arrayBuffer();case"blob":return c.blob();case"document":return c.text().then(u=>new DOMParser().parseFromString(u,a));case"json":return c.json();default:if(a===void 0)return c.text();{const p=/charset="?([^;"\s]*)"?/i.exec(a),m=p&&p[1]?p[1].toLowerCase():void 0,g=new TextDecoder(m);return c.arrayBuffer().then(x=>g.decode(x))}}}).then(c=>{_a.add(e,c);const u=ua[e];delete ua[e];for(let p=0,m=u.length;p<m;p++){const g=u[p];g.onLoad&&g.onLoad(c)}}).catch(c=>{const u=ua[e];if(u===void 0)throw this.manager.itemError(e),c;delete ua[e];for(let p=0,m=u.length;p<m;p++){const g=u[p];g.onError&&g.onError(c)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}}class TZ extends rs{constructor(e){super(e)}load(e,t,i,r){const s=this,o=new Fa(this.manager);o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(a){try{t(s.parse(JSON.parse(a)))}catch(l){r?r(l):console.error(l),s.manager.itemError(e)}},i,r)}parse(e){const t=[];for(let i=0;i<e.length;i++){const r=hg.parse(e[i]);t.push(r)}return t}}class EZ extends rs{constructor(e){super(e)}load(e,t,i,r){const s=this,o=[],a=new Nw,l=new Fa(this.manager);l.setPath(this.path),l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setWithCredentials(s.withCredentials);let c=0;function u(p){l.load(e[p],function(m){const g=s.parse(m,!0);o[p]={width:g.width,height:g.height,format:g.format,mipmaps:g.mipmaps},c+=1,c===6&&(g.mipmapCount===1&&(a.minFilter=Mi),a.image=o,a.format=g.format,a.needsUpdate=!0,t&&t(a))},i,r)}if(Array.isArray(e))for(let p=0,m=e.length;p<m;++p)u(p);else l.load(e,function(p){const m=s.parse(p,!0);if(m.isCubemap){const g=m.mipmaps.length/m.mipmapCount;for(let x=0;x<g;x++){o[x]={mipmaps:[]};for(let b=0;b<m.mipmapCount;b++)o[x].mipmaps.push(m.mipmaps[x*m.mipmapCount+b]),o[x].format=m.format,o[x].width=m.width,o[x].height=m.height}a.image=o}else a.image.width=m.width,a.image.height=m.height,a.mipmaps=m.mipmaps;m.mipmapCount===1&&(a.minFilter=Mi),a.format=m.format,a.needsUpdate=!0,t&&t(a)},i,r);return a}}class dg extends rs{constructor(e){super(e)}load(e,t,i,r){this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,o=_a.get(e);if(o!==void 0)return s.manager.itemStart(e),setTimeout(function(){t&&t(o),s.manager.itemEnd(e)},0),o;const a=rg("img");function l(){u(),_a.add(e,this),t&&t(this),s.manager.itemEnd(e)}function c(p){u(),r&&r(p),s.manager.itemError(e),s.manager.itemEnd(e)}function u(){a.removeEventListener("load",l,!1),a.removeEventListener("error",c,!1)}return a.addEventListener("load",l,!1),a.addEventListener("error",c,!1),e.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(a.crossOrigin=this.crossOrigin),s.manager.itemStart(e),a.src=e,a}}class CZ extends rs{constructor(e){super(e)}load(e,t,i,r){const s=new zg;s.colorSpace=qr;const o=new dg(this.manager);o.setCrossOrigin(this.crossOrigin),o.setPath(this.path);let a=0;function l(c){o.load(e[c],function(u){s.images[c]=u,a++,a===6&&(s.needsUpdate=!0,t&&t(s))},void 0,r)}for(let c=0;c<e.length;++c)l(c);return s}}class AZ extends rs{constructor(e){super(e)}load(e,t,i,r){const s=this,o=new Ho,a=new Fa(this.manager);return a.setResponseType("arraybuffer"),a.setRequestHeader(this.requestHeader),a.setPath(this.path),a.setWithCredentials(s.withCredentials),a.load(e,function(l){let c;try{c=s.parse(l)}catch(u){if(r!==void 0)r(u);else{console.error(u);return}}c.image!==void 0?o.image=c.image:c.data!==void 0&&(o.image.width=c.width,o.image.height=c.height,o.image.data=c.data),o.wrapS=c.wrapS!==void 0?c.wrapS:Gs,o.wrapT=c.wrapT!==void 0?c.wrapT:Gs,o.magFilter=c.magFilter!==void 0?c.magFilter:Mi,o.minFilter=c.minFilter!==void 0?c.minFilter:Mi,o.anisotropy=c.anisotropy!==void 0?c.anisotropy:1,c.colorSpace!==void 0&&(o.colorSpace=c.colorSpace),c.flipY!==void 0&&(o.flipY=c.flipY),c.format!==void 0&&(o.format=c.format),c.type!==void 0&&(o.type=c.type),c.mipmaps!==void 0&&(o.mipmaps=c.mipmaps,o.minFilter=Do),c.mipmapCount===1&&(o.minFilter=Mi),c.generateMipmaps!==void 0&&(o.generateMipmaps=c.generateMipmaps),o.needsUpdate=!0,t&&t(o,c)},i,r),o}}class MZ extends rs{constructor(e){super(e)}load(e,t,i,r){const s=new ti,o=new dg(this.manager);return o.setCrossOrigin(this.crossOrigin),o.setPath(this.path),o.load(e,function(a){s.image=a,s.needsUpdate=!0,t!==void 0&&t(s)},i,r),s}}class xc extends yn{constructor(e,t=1){super(),this.isLight=!0,this.type="Light",this.color=new st(e),this.intensity=t}dispose(){}copy(e,t){return super.copy(e,t),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,this.groundColor!==void 0&&(t.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(t.object.distance=this.distance),this.angle!==void 0&&(t.object.angle=this.angle),this.decay!==void 0&&(t.object.decay=this.decay),this.penumbra!==void 0&&(t.object.penumbra=this.penumbra),this.shadow!==void 0&&(t.object.shadow=this.shadow.toJSON()),this.target!==void 0&&(t.object.target=this.target.uuid),t}}class nB extends xc{constructor(e,t,i){super(e,i),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(yn.DEFAULT_UP),this.updateMatrix(),this.groundColor=new st(t)}copy(e,t){return super.copy(e,t),this.groundColor.copy(e.groundColor),this}}const uT=new At,BD=new K,zD=new K;class MM{constructor(e){this.camera=e,this.intensity=1,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new Ie(512,512),this.map=null,this.mapPass=null,this.matrix=new At,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new Hg,this._frameExtents=new Ie(1,1),this._viewportCount=1,this._viewports=[new mn(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const t=this.camera,i=this.matrix;BD.setFromMatrixPosition(e.matrixWorld),t.position.copy(BD),zD.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(zD),t.updateMatrixWorld(),uT.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(uT),i.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),i.multiply(uT)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.intensity=e.intensity,this.bias=e.bias,this.radius=e.radius,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const e={};return this.intensity!==1&&(e.intensity=this.intensity),this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class IZ extends MM{constructor(){super(new yi(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1}updateMatrices(e){const t=this.camera,i=sf*2*e.angle*this.focus,r=this.mapSize.width/this.mapSize.height,s=e.distance||t.far;(i!==t.fov||r!==t.aspect||s!==t.far)&&(t.fov=i,t.aspect=r,t.far=s,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}class iB extends xc{constructor(e,t,i=0,r=Math.PI/3,s=0,o=2){super(e,t),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(yn.DEFAULT_UP),this.updateMatrix(),this.target=new yn,this.distance=i,this.angle=r,this.penumbra=s,this.decay=o,this.map=null,this.shadow=new IZ}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}const HD=new At,_p=new K,hT=new K;class PZ extends MM{constructor(){super(new yi(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new Ie(4,2),this._viewportCount=6,this._viewports=[new mn(2,1,1,1),new mn(0,1,1,1),new mn(3,1,1,1),new mn(1,1,1,1),new mn(3,0,1,1),new mn(1,0,1,1)],this._cubeDirections=[new K(1,0,0),new K(-1,0,0),new K(0,0,1),new K(0,0,-1),new K(0,1,0),new K(0,-1,0)],this._cubeUps=[new K(0,1,0),new K(0,1,0),new K(0,1,0),new K(0,1,0),new K(0,0,1),new K(0,0,-1)]}updateMatrices(e,t=0){const i=this.camera,r=this.matrix,s=e.distance||i.far;s!==i.far&&(i.far=s,i.updateProjectionMatrix()),_p.setFromMatrixPosition(e.matrixWorld),i.position.copy(_p),hT.copy(i.position),hT.add(this._cubeDirections[t]),i.up.copy(this._cubeUps[t]),i.lookAt(hT),i.updateMatrixWorld(),r.makeTranslation(-_p.x,-_p.y,-_p.z),HD.multiplyMatrices(i.projectionMatrix,i.matrixWorldInverse),this._frustum.setFromProjectionMatrix(HD)}}class rB extends xc{constructor(e,t,i=0,r=2){super(e,t),this.isPointLight=!0,this.type="PointLight",this.distance=i,this.decay=r,this.shadow=new PZ}get power(){return this.intensity*4*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}class rh extends Bg{constructor(e=-1,t=1,i=1,r=-1,s=.1,o=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=i,this.bottom=r,this.near=s,this.far=o,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,t,i,r,s,o){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=i,this.view.offsetY=r,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),i=(this.right+this.left)/2,r=(this.top+this.bottom)/2;let s=i-e,o=i+e,a=r+t,l=r-t;if(this.view!==null&&this.view.enabled){const c=(this.right-this.left)/this.view.fullWidth/this.zoom,u=(this.top-this.bottom)/this.view.fullHeight/this.zoom;s+=c*this.view.offsetX,o=s+c*this.view.width,a-=u*this.view.offsetY,l=a-u*this.view.height}this.projectionMatrix.makeOrthographic(s,o,a,l,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,this.view!==null&&(t.object.view=Object.assign({},this.view)),t}}class RZ extends MM{constructor(){super(new rh(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class sB extends xc{constructor(e,t){super(e,t),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(yn.DEFAULT_UP),this.updateMatrix(),this.target=new yn,this.shadow=new RZ}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}class oB extends xc{constructor(e,t){super(e,t),this.isAmbientLight=!0,this.type="AmbientLight"}}class aB extends xc{constructor(e,t,i=10,r=10){super(e,t),this.isRectAreaLight=!0,this.type="RectAreaLight",this.width=i,this.height=r}get power(){return this.intensity*this.width*this.height*Math.PI}set power(e){this.intensity=e/(this.width*this.height*Math.PI)}copy(e){return super.copy(e),this.width=e.width,this.height=e.height,this}toJSON(e){const t=super.toJSON(e);return t.object.width=this.width,t.object.height=this.height,t}}class lB{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new K)}set(e){for(let t=0;t<9;t++)this.coefficients[t].copy(e[t]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,t){const i=e.x,r=e.y,s=e.z,o=this.coefficients;return t.copy(o[0]).multiplyScalar(.282095),t.addScaledVector(o[1],.488603*r),t.addScaledVector(o[2],.488603*s),t.addScaledVector(o[3],.488603*i),t.addScaledVector(o[4],1.092548*(i*r)),t.addScaledVector(o[5],1.092548*(r*s)),t.addScaledVector(o[6],.315392*(3*s*s-1)),t.addScaledVector(o[7],1.092548*(i*s)),t.addScaledVector(o[8],.546274*(i*i-r*r)),t}getIrradianceAt(e,t){const i=e.x,r=e.y,s=e.z,o=this.coefficients;return t.copy(o[0]).multiplyScalar(.886227),t.addScaledVector(o[1],2*.511664*r),t.addScaledVector(o[2],2*.511664*s),t.addScaledVector(o[3],2*.511664*i),t.addScaledVector(o[4],2*.429043*i*r),t.addScaledVector(o[5],2*.429043*r*s),t.addScaledVector(o[6],.743125*s*s-.247708),t.addScaledVector(o[7],2*.429043*i*s),t.addScaledVector(o[8],.429043*(i*i-r*r)),t}add(e){for(let t=0;t<9;t++)this.coefficients[t].add(e.coefficients[t]);return this}addScaledSH(e,t){for(let i=0;i<9;i++)this.coefficients[i].addScaledVector(e.coefficients[i],t);return this}scale(e){for(let t=0;t<9;t++)this.coefficients[t].multiplyScalar(e);return this}lerp(e,t){for(let i=0;i<9;i++)this.coefficients[i].lerp(e.coefficients[i],t);return this}equals(e){for(let t=0;t<9;t++)if(!this.coefficients[t].equals(e.coefficients[t]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return new this.constructor().copy(this)}fromArray(e,t=0){const i=this.coefficients;for(let r=0;r<9;r++)i[r].fromArray(e,t+r*3);return this}toArray(e=[],t=0){const i=this.coefficients;for(let r=0;r<9;r++)i[r].toArray(e,t+r*3);return e}static getBasisAt(e,t){const i=e.x,r=e.y,s=e.z;t[0]=.282095,t[1]=.488603*r,t[2]=.488603*s,t[3]=.488603*i,t[4]=1.092548*i*r,t[5]=1.092548*r*s,t[6]=.315392*(3*s*s-1),t[7]=1.092548*i*s,t[8]=.546274*(i*i-r*r)}}class cB extends xc{constructor(e=new lB,t=1){super(void 0,t),this.isLightProbe=!0,this.sh=e}copy(e){return super.copy(e),this.sh.copy(e.sh),this}fromJSON(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this}toJSON(e){const t=super.toJSON(e);return t.object.sh=this.sh.toArray(),t}}class $w extends rs{constructor(e){super(e),this.textures={}}load(e,t,i,r){const s=this,o=new Fa(s.manager);o.setPath(s.path),o.setRequestHeader(s.requestHeader),o.setWithCredentials(s.withCredentials),o.load(e,function(a){try{t(s.parse(JSON.parse(a)))}catch(l){r?r(l):console.error(l),s.manager.itemError(e)}},i,r)}parse(e){const t=this.textures;function i(s){return t[s]===void 0&&console.warn("THREE.MaterialLoader: Undefined texture",s),t[s]}const r=this.createMaterialFromType(e.type);if(e.uuid!==void 0&&(r.uuid=e.uuid),e.name!==void 0&&(r.name=e.name),e.color!==void 0&&r.color!==void 0&&r.color.setHex(e.color),e.roughness!==void 0&&(r.roughness=e.roughness),e.metalness!==void 0&&(r.metalness=e.metalness),e.sheen!==void 0&&(r.sheen=e.sheen),e.sheenColor!==void 0&&(r.sheenColor=new st().setHex(e.sheenColor)),e.sheenRoughness!==void 0&&(r.sheenRoughness=e.sheenRoughness),e.emissive!==void 0&&r.emissive!==void 0&&r.emissive.setHex(e.emissive),e.specular!==void 0&&r.specular!==void 0&&r.specular.setHex(e.specular),e.specularIntensity!==void 0&&(r.specularIntensity=e.specularIntensity),e.specularColor!==void 0&&r.specularColor!==void 0&&r.specularColor.setHex(e.specularColor),e.shininess!==void 0&&(r.shininess=e.shininess),e.clearcoat!==void 0&&(r.clearcoat=e.clearcoat),e.clearcoatRoughness!==void 0&&(r.clearcoatRoughness=e.clearcoatRoughness),e.dispersion!==void 0&&(r.dispersion=e.dispersion),e.iridescence!==void 0&&(r.iridescence=e.iridescence),e.iridescenceIOR!==void 0&&(r.iridescenceIOR=e.iridescenceIOR),e.iridescenceThicknessRange!==void 0&&(r.iridescenceThicknessRange=e.iridescenceThicknessRange),e.transmission!==void 0&&(r.transmission=e.transmission),e.thickness!==void 0&&(r.thickness=e.thickness),e.attenuationDistance!==void 0&&(r.attenuationDistance=e.attenuationDistance),e.attenuationColor!==void 0&&r.attenuationColor!==void 0&&r.attenuationColor.setHex(e.attenuationColor),e.anisotropy!==void 0&&(r.anisotropy=e.anisotropy),e.anisotropyRotation!==void 0&&(r.anisotropyRotation=e.anisotropyRotation),e.fog!==void 0&&(r.fog=e.fog),e.flatShading!==void 0&&(r.flatShading=e.flatShading),e.blending!==void 0&&(r.blending=e.blending),e.combine!==void 0&&(r.combine=e.combine),e.side!==void 0&&(r.side=e.side),e.shadowSide!==void 0&&(r.shadowSide=e.shadowSide),e.opacity!==void 0&&(r.opacity=e.opacity),e.transparent!==void 0&&(r.transparent=e.transparent),e.alphaTest!==void 0&&(r.alphaTest=e.alphaTest),e.alphaHash!==void 0&&(r.alphaHash=e.alphaHash),e.depthFunc!==void 0&&(r.depthFunc=e.depthFunc),e.depthTest!==void 0&&(r.depthTest=e.depthTest),e.depthWrite!==void 0&&(r.depthWrite=e.depthWrite),e.colorWrite!==void 0&&(r.colorWrite=e.colorWrite),e.blendSrc!==void 0&&(r.blendSrc=e.blendSrc),e.blendDst!==void 0&&(r.blendDst=e.blendDst),e.blendEquation!==void 0&&(r.blendEquation=e.blendEquation),e.blendSrcAlpha!==void 0&&(r.blendSrcAlpha=e.blendSrcAlpha),e.blendDstAlpha!==void 0&&(r.blendDstAlpha=e.blendDstAlpha),e.blendEquationAlpha!==void 0&&(r.blendEquationAlpha=e.blendEquationAlpha),e.blendColor!==void 0&&r.blendColor!==void 0&&r.blendColor.setHex(e.blendColor),e.blendAlpha!==void 0&&(r.blendAlpha=e.blendAlpha),e.stencilWriteMask!==void 0&&(r.stencilWriteMask=e.stencilWriteMask),e.stencilFunc!==void 0&&(r.stencilFunc=e.stencilFunc),e.stencilRef!==void 0&&(r.stencilRef=e.stencilRef),e.stencilFuncMask!==void 0&&(r.stencilFuncMask=e.stencilFuncMask),e.stencilFail!==void 0&&(r.stencilFail=e.stencilFail),e.stencilZFail!==void 0&&(r.stencilZFail=e.stencilZFail),e.stencilZPass!==void 0&&(r.stencilZPass=e.stencilZPass),e.stencilWrite!==void 0&&(r.stencilWrite=e.stencilWrite),e.wireframe!==void 0&&(r.wireframe=e.wireframe),e.wireframeLinewidth!==void 0&&(r.wireframeLinewidth=e.wireframeLinewidth),e.wireframeLinecap!==void 0&&(r.wireframeLinecap=e.wireframeLinecap),e.wireframeLinejoin!==void 0&&(r.wireframeLinejoin=e.wireframeLinejoin),e.rotation!==void 0&&(r.rotation=e.rotation),e.linewidth!==void 0&&(r.linewidth=e.linewidth),e.dashSize!==void 0&&(r.dashSize=e.dashSize),e.gapSize!==void 0&&(r.gapSize=e.gapSize),e.scale!==void 0&&(r.scale=e.scale),e.polygonOffset!==void 0&&(r.polygonOffset=e.polygonOffset),e.polygonOffsetFactor!==void 0&&(r.polygonOffsetFactor=e.polygonOffsetFactor),e.polygonOffsetUnits!==void 0&&(r.polygonOffsetUnits=e.polygonOffsetUnits),e.dithering!==void 0&&(r.dithering=e.dithering),e.alphaToCoverage!==void 0&&(r.alphaToCoverage=e.alphaToCoverage),e.premultipliedAlpha!==void 0&&(r.premultipliedAlpha=e.premultipliedAlpha),e.forceSinglePass!==void 0&&(r.forceSinglePass=e.forceSinglePass),e.visible!==void 0&&(r.visible=e.visible),e.toneMapped!==void 0&&(r.toneMapped=e.toneMapped),e.userData!==void 0&&(r.userData=e.userData),e.vertexColors!==void 0&&(typeof e.vertexColors=="number"?r.vertexColors=e.vertexColors>0:r.vertexColors=e.vertexColors),e.uniforms!==void 0)for(const s in e.uniforms){const o=e.uniforms[s];switch(r.uniforms[s]={},o.type){case"t":r.uniforms[s].value=i(o.value);break;case"c":r.uniforms[s].value=new st().setHex(o.value);break;case"v2":r.uniforms[s].value=new Ie().fromArray(o.value);break;case"v3":r.uniforms[s].value=new K().fromArray(o.value);break;case"v4":r.uniforms[s].value=new mn().fromArray(o.value);break;case"m3":r.uniforms[s].value=new Bt().fromArray(o.value);break;case"m4":r.uniforms[s].value=new At().fromArray(o.value);break;default:r.uniforms[s].value=o.value}}if(e.defines!==void 0&&(r.defines=e.defines),e.vertexShader!==void 0&&(r.vertexShader=e.vertexShader),e.fragmentShader!==void 0&&(r.fragmentShader=e.fragmentShader),e.glslVersion!==void 0&&(r.glslVersion=e.glslVersion),e.extensions!==void 0)for(const s in e.extensions)r.extensions[s]=e.extensions[s];if(e.lights!==void 0&&(r.lights=e.lights),e.clipping!==void 0&&(r.clipping=e.clipping),e.size!==void 0&&(r.size=e.size),e.sizeAttenuation!==void 0&&(r.sizeAttenuation=e.sizeAttenuation),e.map!==void 0&&(r.map=i(e.map)),e.matcap!==void 0&&(r.matcap=i(e.matcap)),e.alphaMap!==void 0&&(r.alphaMap=i(e.alphaMap)),e.bumpMap!==void 0&&(r.bumpMap=i(e.bumpMap)),e.bumpScale!==void 0&&(r.bumpScale=e.bumpScale),e.normalMap!==void 0&&(r.normalMap=i(e.normalMap)),e.normalMapType!==void 0&&(r.normalMapType=e.normalMapType),e.normalScale!==void 0){let s=e.normalScale;Array.isArray(s)===!1&&(s=[s,s]),r.normalScale=new Ie().fromArray(s)}return e.displacementMap!==void 0&&(r.displacementMap=i(e.displacementMap)),e.displacementScale!==void 0&&(r.displacementScale=e.displacementScale),e.displacementBias!==void 0&&(r.displacementBias=e.displacementBias),e.roughnessMap!==void 0&&(r.roughnessMap=i(e.roughnessMap)),e.metalnessMap!==void 0&&(r.metalnessMap=i(e.metalnessMap)),e.emissiveMap!==void 0&&(r.emissiveMap=i(e.emissiveMap)),e.emissiveIntensity!==void 0&&(r.emissiveIntensity=e.emissiveIntensity),e.specularMap!==void 0&&(r.specularMap=i(e.specularMap)),e.specularIntensityMap!==void 0&&(r.specularIntensityMap=i(e.specularIntensityMap)),e.specularColorMap!==void 0&&(r.specularColorMap=i(e.specularColorMap)),e.envMap!==void 0&&(r.envMap=i(e.envMap)),e.envMapRotation!==void 0&&r.envMapRotation.fromArray(e.envMapRotation),e.envMapIntensity!==void 0&&(r.envMapIntensity=e.envMapIntensity),e.reflectivity!==void 0&&(r.reflectivity=e.reflectivity),e.refractionRatio!==void 0&&(r.refractionRatio=e.refractionRatio),e.lightMap!==void 0&&(r.lightMap=i(e.lightMap)),e.lightMapIntensity!==void 0&&(r.lightMapIntensity=e.lightMapIntensity),e.aoMap!==void 0&&(r.aoMap=i(e.aoMap)),e.aoMapIntensity!==void 0&&(r.aoMapIntensity=e.aoMapIntensity),e.gradientMap!==void 0&&(r.gradientMap=i(e.gradientMap)),e.clearcoatMap!==void 0&&(r.clearcoatMap=i(e.clearcoatMap)),e.clearcoatRoughnessMap!==void 0&&(r.clearcoatRoughnessMap=i(e.clearcoatRoughnessMap)),e.clearcoatNormalMap!==void 0&&(r.clearcoatNormalMap=i(e.clearcoatNormalMap)),e.clearcoatNormalScale!==void 0&&(r.clearcoatNormalScale=new Ie().fromArray(e.clearcoatNormalScale)),e.iridescenceMap!==void 0&&(r.iridescenceMap=i(e.iridescenceMap)),e.iridescenceThicknessMap!==void 0&&(r.iridescenceThicknessMap=i(e.iridescenceThicknessMap)),e.transmissionMap!==void 0&&(r.transmissionMap=i(e.transmissionMap)),e.thicknessMap!==void 0&&(r.thicknessMap=i(e.thicknessMap)),e.anisotropyMap!==void 0&&(r.anisotropyMap=i(e.anisotropyMap)),e.sheenColorMap!==void 0&&(r.sheenColorMap=i(e.sheenColorMap)),e.sheenRoughnessMap!==void 0&&(r.sheenRoughnessMap=i(e.sheenRoughnessMap)),r}setTextures(e){return this.textures=e,this}createMaterialFromType(e){return $w.createMaterialFromType(e)}static createMaterialFromType(e){const t={ShadowMaterial:z4,SpriteMaterial:dM,RawShaderMaterial:H4,ShaderMaterial:_o,PointsMaterial:Rw,MeshPhysicalMaterial:G4,MeshStandardMaterial:wM,MeshPhongMaterial:W4,MeshToonMaterial:q4,MeshNormalMaterial:$4,MeshLambertMaterial:X4,MeshDepthMaterial:bM,MeshDistanceMaterial:SM,MeshBasicMaterial:yc,MeshMatcapMaterial:K4,LineDashedMaterial:Y4,LineBasicMaterial:jr,Material:Sr};return new t[e]}}class w1{static decodeText(e){if(console.warn("THREE.LoaderUtils: decodeText() has been deprecated with r165 and will be removed with r175. Use TextDecoder instead."),typeof TextDecoder<"u")return new TextDecoder().decode(e);let t="";for(let i=0,r=e.length;i<r;i++)t+=String.fromCharCode(e[i]);try{return decodeURIComponent(escape(t))}catch{return t}}static extractUrlBase(e){const t=e.lastIndexOf("/");return t===-1?"./":e.slice(0,t+1)}static resolveURL(e,t){return typeof e!="string"||e===""?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}}class uB extends Xt{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}toJSON(){const e=super.toJSON();return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}class hB extends rs{constructor(e){super(e)}load(e,t,i,r){const s=this,o=new Fa(s.manager);o.setPath(s.path),o.setRequestHeader(s.requestHeader),o.setWithCredentials(s.withCredentials),o.load(e,function(a){try{t(s.parse(JSON.parse(a)))}catch(l){r?r(l):console.error(l),s.manager.itemError(e)}},i,r)}parse(e){const t={},i={};function r(g,x){if(t[x]!==void 0)return t[x];const w=g.interleavedBuffers[x],v=s(g,w.buffer),S=xd(w.type,v),E=new Iw(S,w.stride);return E.uuid=w.uuid,t[x]=E,E}function s(g,x){if(i[x]!==void 0)return i[x];const w=g.arrayBuffers[x],v=new Uint32Array(w).buffer;return i[x]=v,v}const o=e.isInstancedBufferGeometry?new uB:new Xt,a=e.data.index;if(a!==void 0){const g=xd(a.type,a.array);o.setIndex(new In(g,1))}const l=e.data.attributes;for(const g in l){const x=l[g];let b;if(x.isInterleavedBufferAttribute){const w=r(e.data,x.data);b=new $u(w,x.itemSize,x.offset,x.normalized)}else{const w=xd(x.type,x.array),v=x.isInstancedBufferAttribute?af:In;b=new v(w,x.itemSize,x.normalized)}x.name!==void 0&&(b.name=x.name),x.usage!==void 0&&b.setUsage(x.usage),o.setAttribute(g,b)}const c=e.data.morphAttributes;if(c)for(const g in c){const x=c[g],b=[];for(let w=0,v=x.length;w<v;w++){const S=x[w];let E;if(S.isInterleavedBufferAttribute){const C=r(e.data,S.data);E=new $u(C,S.itemSize,S.offset,S.normalized)}else{const C=xd(S.type,S.array);E=new In(C,S.itemSize,S.normalized)}S.name!==void 0&&(E.name=S.name),b.push(E)}o.morphAttributes[g]=b}e.data.morphTargetsRelative&&(o.morphTargetsRelative=!0);const p=e.data.groups||e.data.drawcalls||e.data.offsets;if(p!==void 0)for(let g=0,x=p.length;g!==x;++g){const b=p[g];o.addGroup(b.start,b.count,b.materialIndex)}const m=e.data.boundingSphere;if(m!==void 0){const g=new K;m.center!==void 0&&g.fromArray(m.center),o.boundingSphere=new _r(g,m.radius)}return e.name&&(o.name=e.name),e.userData&&(o.userData=e.userData),o}}class NZ extends rs{constructor(e){super(e)}load(e,t,i,r){const s=this,o=this.path===""?w1.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||o;const a=new Fa(this.manager);a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,function(l){let c=null;try{c=JSON.parse(l)}catch(p){r!==void 0&&r(p),console.error("THREE:ObjectLoader: Can't parse "+e+".",p.message);return}const u=c.metadata;if(u===void 0||u.type===void 0||u.type.toLowerCase()==="geometry"){r!==void 0&&r(new Error("THREE.ObjectLoader: Can't load "+e)),console.error("THREE.ObjectLoader: Can't load "+e);return}s.parse(c,t)},i,r)}async loadAsync(e,t){const i=this,r=this.path===""?w1.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||r;const s=new Fa(this.manager);s.setPath(this.path),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials);const o=await s.loadAsync(e,t),a=JSON.parse(o),l=a.metadata;if(l===void 0||l.type===void 0||l.type.toLowerCase()==="geometry")throw new Error("THREE.ObjectLoader: Can't load "+e);return await i.parseAsync(a)}parse(e,t){const i=this.parseAnimations(e.animations),r=this.parseShapes(e.shapes),s=this.parseGeometries(e.geometries,r),o=this.parseImages(e.images,function(){t!==void 0&&t(c)}),a=this.parseTextures(e.textures,o),l=this.parseMaterials(e.materials,a),c=this.parseObject(e.object,s,l,a,i),u=this.parseSkeletons(e.skeletons,c);if(this.bindSkeletons(c,u),this.bindLightTargets(c),t!==void 0){let p=!1;for(const m in o)if(o[m].data instanceof HTMLImageElement){p=!0;break}p===!1&&t(c)}return c}async parseAsync(e){const t=this.parseAnimations(e.animations),i=this.parseShapes(e.shapes),r=this.parseGeometries(e.geometries,i),s=await this.parseImagesAsync(e.images),o=this.parseTextures(e.textures,s),a=this.parseMaterials(e.materials,o),l=this.parseObject(e.object,r,a,o,t),c=this.parseSkeletons(e.skeletons,l);return this.bindSkeletons(l,c),this.bindLightTargets(l),l}parseShapes(e){const t={};if(e!==void 0)for(let i=0,r=e.length;i<r;i++){const s=new Iu().fromJSON(e[i]);t[s.uuid]=s}return t}parseSkeletons(e,t){const i={},r={};if(t.traverse(function(s){s.isBone&&(r[s.uuid]=s)}),e!==void 0)for(let s=0,o=e.length;s<o;s++){const a=new Pw().fromJSON(e[s],r);i[a.uuid]=a}return i}parseGeometries(e,t){const i={};if(e!==void 0){const r=new hB;for(let s=0,o=e.length;s<o;s++){let a;const l=e[s];switch(l.type){case"BufferGeometry":case"InstancedBufferGeometry":a=r.parse(l);break;default:l.type in VD?a=VD[l.type].fromJSON(l,t):console.warn(`THREE.ObjectLoader: Unsupported geometry type "${l.type}"`)}a.uuid=l.uuid,l.name!==void 0&&(a.name=l.name),l.userData!==void 0&&(a.userData=l.userData),i[l.uuid]=a}}return i}parseMaterials(e,t){const i={},r={};if(e!==void 0){const s=new $w;s.setTextures(t);for(let o=0,a=e.length;o<a;o++){const l=e[o];i[l.uuid]===void 0&&(i[l.uuid]=s.parse(l)),r[l.uuid]=i[l.uuid]}}return r}parseAnimations(e){const t={};if(e!==void 0)for(let i=0;i<e.length;i++){const r=e[i],s=hg.parse(r);t[s.uuid]=s}return t}parseImages(e,t){const i=this,r={};let s;function o(l){return i.manager.itemStart(l),s.load(l,function(){i.manager.itemEnd(l)},void 0,function(){i.manager.itemError(l),i.manager.itemEnd(l)})}function a(l){if(typeof l=="string"){const c=l,u=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(c)?c:i.resourcePath+c;return o(u)}else return l.data?{data:xd(l.type,l.data),width:l.width,height:l.height}:null}if(e!==void 0&&e.length>0){const l=new AM(t);s=new dg(l),s.setCrossOrigin(this.crossOrigin);for(let c=0,u=e.length;c<u;c++){const p=e[c],m=p.url;if(Array.isArray(m)){const g=[];for(let x=0,b=m.length;x<b;x++){const w=m[x],v=a(w);v!==null&&(v instanceof HTMLImageElement?g.push(v):g.push(new Ho(v.data,v.width,v.height)))}r[p.uuid]=new Rl(g)}else{const g=a(p.url);r[p.uuid]=new Rl(g)}}}return r}async parseImagesAsync(e){const t=this,i={};let r;async function s(o){if(typeof o=="string"){const a=o,l=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(a)?a:t.resourcePath+a;return await r.loadAsync(l)}else return o.data?{data:xd(o.type,o.data),width:o.width,height:o.height}:null}if(e!==void 0&&e.length>0){r=new dg(this.manager),r.setCrossOrigin(this.crossOrigin);for(let o=0,a=e.length;o<a;o++){const l=e[o],c=l.url;if(Array.isArray(c)){const u=[];for(let p=0,m=c.length;p<m;p++){const g=c[p],x=await s(g);x!==null&&(x instanceof HTMLImageElement?u.push(x):u.push(new Ho(x.data,x.width,x.height)))}i[l.uuid]=new Rl(u)}else{const u=await s(l.url);i[l.uuid]=new Rl(u)}}}return i}parseTextures(e,t){function i(s,o){return typeof s=="number"?s:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",s),o[s])}const r={};if(e!==void 0)for(let s=0,o=e.length;s<o;s++){const a=e[s];a.image===void 0&&console.warn('THREE.ObjectLoader: No "image" specified for',a.uuid),t[a.image]===void 0&&console.warn("THREE.ObjectLoader: Undefined image",a.image);const l=t[a.image],c=l.data;let u;Array.isArray(c)?(u=new zg,c.length===6&&(u.needsUpdate=!0)):(c&&c.data?u=new Ho:u=new ti,c&&(u.needsUpdate=!0)),u.source=l,u.uuid=a.uuid,a.name!==void 0&&(u.name=a.name),a.mapping!==void 0&&(u.mapping=i(a.mapping,DZ)),a.channel!==void 0&&(u.channel=a.channel),a.offset!==void 0&&u.offset.fromArray(a.offset),a.repeat!==void 0&&u.repeat.fromArray(a.repeat),a.center!==void 0&&u.center.fromArray(a.center),a.rotation!==void 0&&(u.rotation=a.rotation),a.wrap!==void 0&&(u.wrapS=i(a.wrap[0],GD),u.wrapT=i(a.wrap[1],GD)),a.format!==void 0&&(u.format=a.format),a.internalFormat!==void 0&&(u.internalFormat=a.internalFormat),a.type!==void 0&&(u.type=a.type),a.colorSpace!==void 0&&(u.colorSpace=a.colorSpace),a.minFilter!==void 0&&(u.minFilter=i(a.minFilter,WD)),a.magFilter!==void 0&&(u.magFilter=i(a.magFilter,WD)),a.anisotropy!==void 0&&(u.anisotropy=a.anisotropy),a.flipY!==void 0&&(u.flipY=a.flipY),a.generateMipmaps!==void 0&&(u.generateMipmaps=a.generateMipmaps),a.premultiplyAlpha!==void 0&&(u.premultiplyAlpha=a.premultiplyAlpha),a.unpackAlignment!==void 0&&(u.unpackAlignment=a.unpackAlignment),a.compareFunction!==void 0&&(u.compareFunction=a.compareFunction),a.userData!==void 0&&(u.userData=a.userData),r[a.uuid]=u}return r}parseObject(e,t,i,r,s){let o;function a(m){return t[m]===void 0&&console.warn("THREE.ObjectLoader: Undefined geometry",m),t[m]}function l(m){if(m!==void 0){if(Array.isArray(m)){const g=[];for(let x=0,b=m.length;x<b;x++){const w=m[x];i[w]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",w),g.push(i[w])}return g}return i[m]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",m),i[m]}}function c(m){return r[m]===void 0&&console.warn("THREE.ObjectLoader: Undefined texture",m),r[m]}let u,p;switch(e.type){case"Scene":o=new hM,e.background!==void 0&&(Number.isInteger(e.background)?o.background=new st(e.background):o.background=c(e.background)),e.environment!==void 0&&(o.environment=c(e.environment)),e.fog!==void 0&&(e.fog.type==="Fog"?o.fog=new Mw(e.fog.color,e.fog.near,e.fog.far):e.fog.type==="FogExp2"&&(o.fog=new Aw(e.fog.color,e.fog.density)),e.fog.name!==""&&(o.fog.name=e.fog.name)),e.backgroundBlurriness!==void 0&&(o.backgroundBlurriness=e.backgroundBlurriness),e.backgroundIntensity!==void 0&&(o.backgroundIntensity=e.backgroundIntensity),e.backgroundRotation!==void 0&&o.backgroundRotation.fromArray(e.backgroundRotation),e.environmentIntensity!==void 0&&(o.environmentIntensity=e.environmentIntensity),e.environmentRotation!==void 0&&o.environmentRotation.fromArray(e.environmentRotation);break;case"PerspectiveCamera":o=new yi(e.fov,e.aspect,e.near,e.far),e.focus!==void 0&&(o.focus=e.focus),e.zoom!==void 0&&(o.zoom=e.zoom),e.filmGauge!==void 0&&(o.filmGauge=e.filmGauge),e.filmOffset!==void 0&&(o.filmOffset=e.filmOffset),e.view!==void 0&&(o.view=Object.assign({},e.view));break;case"OrthographicCamera":o=new rh(e.left,e.right,e.top,e.bottom,e.near,e.far),e.zoom!==void 0&&(o.zoom=e.zoom),e.view!==void 0&&(o.view=Object.assign({},e.view));break;case"AmbientLight":o=new oB(e.color,e.intensity);break;case"DirectionalLight":o=new sB(e.color,e.intensity),o.target=e.target||"";break;case"PointLight":o=new rB(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":o=new aB(e.color,e.intensity,e.width,e.height);break;case"SpotLight":o=new iB(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay),o.target=e.target||"";break;case"HemisphereLight":o=new nB(e.color,e.groundColor,e.intensity);break;case"LightProbe":o=new cB().fromJSON(e);break;case"SkinnedMesh":u=a(e.geometry),p=l(e.material),o=new C4(u,p),e.bindMode!==void 0&&(o.bindMode=e.bindMode),e.bindMatrix!==void 0&&o.bindMatrix.fromArray(e.bindMatrix),e.skeleton!==void 0&&(o.skeleton=e.skeleton);break;case"Mesh":u=a(e.geometry),p=l(e.material),o=new _i(u,p);break;case"InstancedMesh":u=a(e.geometry),p=l(e.material);const m=e.count,g=e.instanceMatrix,x=e.instanceColor;o=new A4(u,p,m),o.instanceMatrix=new af(new Float32Array(g.array),16),x!==void 0&&(o.instanceColor=new af(new Float32Array(x.array),x.itemSize));break;case"BatchedMesh":u=a(e.geometry),p=l(e.material),o=new M4(e.maxInstanceCount,e.maxVertexCount,e.maxIndexCount,p),o.geometry=u,o.perObjectFrustumCulled=e.perObjectFrustumCulled,o.sortObjects=e.sortObjects,o._drawRanges=e.drawRanges,o._reservedRanges=e.reservedRanges,o._visibility=e.visibility,o._active=e.active,o._bounds=e.bounds.map(b=>{const w=new kr;w.min.fromArray(b.boxMin),w.max.fromArray(b.boxMax);const v=new _r;return v.radius=b.sphereRadius,v.center.fromArray(b.sphereCenter),{boxInitialized:b.boxInitialized,box:w,sphereInitialized:b.sphereInitialized,sphere:v}}),o._maxInstanceCount=e.maxInstanceCount,o._maxVertexCount=e.maxVertexCount,o._maxIndexCount=e.maxIndexCount,o._geometryInitialized=e.geometryInitialized,o._geometryCount=e.geometryCount,o._matricesTexture=c(e.matricesTexture.uuid),e.colorsTexture!==void 0&&(o._colorsTexture=c(e.colorsTexture.uuid));break;case"LOD":o=new E4;break;case"Line":o=new sc(a(e.geometry),l(e.material));break;case"LineLoop":o=new I4(a(e.geometry),l(e.material));break;case"LineSegments":o=new Yo(a(e.geometry),l(e.material));break;case"PointCloud":case"Points":o=new P4(a(e.geometry),l(e.material));break;case"Sprite":o=new T4(l(e.material));break;case"Group":o=new _d;break;case"Bone":o=new fM;break;default:o=new yn}if(o.uuid=e.uuid,e.name!==void 0&&(o.name=e.name),e.matrix!==void 0?(o.matrix.fromArray(e.matrix),e.matrixAutoUpdate!==void 0&&(o.matrixAutoUpdate=e.matrixAutoUpdate),o.matrixAutoUpdate&&o.matrix.decompose(o.position,o.quaternion,o.scale)):(e.position!==void 0&&o.position.fromArray(e.position),e.rotation!==void 0&&o.rotation.fromArray(e.rotation),e.quaternion!==void 0&&o.quaternion.fromArray(e.quaternion),e.scale!==void 0&&o.scale.fromArray(e.scale)),e.up!==void 0&&o.up.fromArray(e.up),e.castShadow!==void 0&&(o.castShadow=e.castShadow),e.receiveShadow!==void 0&&(o.receiveShadow=e.receiveShadow),e.shadow&&(e.shadow.intensity!==void 0&&(o.shadow.intensity=e.shadow.intensity),e.shadow.bias!==void 0&&(o.shadow.bias=e.shadow.bias),e.shadow.normalBias!==void 0&&(o.shadow.normalBias=e.shadow.normalBias),e.shadow.radius!==void 0&&(o.shadow.radius=e.shadow.radius),e.shadow.mapSize!==void 0&&o.shadow.mapSize.fromArray(e.shadow.mapSize),e.shadow.camera!==void 0&&(o.shadow.camera=this.parseObject(e.shadow.camera))),e.visible!==void 0&&(o.visible=e.visible),e.frustumCulled!==void 0&&(o.frustumCulled=e.frustumCulled),e.renderOrder!==void 0&&(o.renderOrder=e.renderOrder),e.userData!==void 0&&(o.userData=e.userData),e.layers!==void 0&&(o.layers.mask=e.layers),e.children!==void 0){const m=e.children;for(let g=0;g<m.length;g++)o.add(this.parseObject(m[g],t,i,r,s))}if(e.animations!==void 0){const m=e.animations;for(let g=0;g<m.length;g++){const x=m[g];o.animations.push(s[x])}}if(e.type==="LOD"){e.autoUpdate!==void 0&&(o.autoUpdate=e.autoUpdate);const m=e.levels;for(let g=0;g<m.length;g++){const x=m[g],b=o.getObjectByProperty("uuid",x.object);b!==void 0&&o.addLevel(b,x.distance,x.hysteresis)}}return o}bindSkeletons(e,t){Object.keys(t).length!==0&&e.traverse(function(i){if(i.isSkinnedMesh===!0&&i.skeleton!==void 0){const r=t[i.skeleton];r===void 0?console.warn("THREE.ObjectLoader: No skeleton found with UUID:",i.skeleton):i.bind(r,i.bindMatrix)}})}bindLightTargets(e){e.traverse(function(t){if(t.isDirectionalLight||t.isSpotLight){const i=t.target,r=e.getObjectByProperty("uuid",i);r!==void 0?t.target=r:t.target=new yn}})}}const DZ={UVMapping:yw,CubeReflectionMapping:Ua,CubeRefractionMapping:rc,EquirectangularReflectionMapping:Km,EquirectangularRefractionMapping:Ym,CubeUVReflectionMapping:Sf},GD={RepeatWrapping:Jm,ClampToEdgeWrapping:Gs,MirroredRepeatWrapping:Qm},WD={NearestFilter:Yi,NearestMipmapNearestFilter:XA,NearestMipmapLinearFilter:vd,LinearFilter:Mi,LinearMipmapNearestFilter:im,LinearMipmapLinearFilter:Do};class LZ extends rs{constructor(e){super(e),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"}}setOptions(e){return this.options=e,this}load(e,t,i,r){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,o=_a.get(e);if(o!==void 0){if(s.manager.itemStart(e),o.then){o.then(c=>{t&&t(c),s.manager.itemEnd(e)}).catch(c=>{r&&r(c)});return}return setTimeout(function(){t&&t(o),s.manager.itemEnd(e)},0),o}const a={};a.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",a.headers=this.requestHeader;const l=fetch(e,a).then(function(c){return c.blob()}).then(function(c){return createImageBitmap(c,Object.assign(s.options,{colorSpaceConversion:"none"}))}).then(function(c){return _a.add(e,c),t&&t(c),s.manager.itemEnd(e),c}).catch(function(c){r&&r(c),_a.remove(e),s.manager.itemError(e),s.manager.itemEnd(e)});_a.add(e,l),s.manager.itemStart(e)}}let Gv;class IM{static getContext(){return Gv===void 0&&(Gv=new(window.AudioContext||window.webkitAudioContext)),Gv}static setContext(e){Gv=e}}class kZ extends rs{constructor(e){super(e)}load(e,t,i,r){const s=this,o=new Fa(this.manager);o.setResponseType("arraybuffer"),o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(l){try{const c=l.slice(0);IM.getContext().decodeAudioData(c,function(p){t(p)}).catch(a)}catch(c){a(c)}},i,r);function a(l){r?r(l):console.error(l),s.manager.itemError(e)}}}const qD=new At,$D=new At,Kc=new At;class OZ{constructor(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new yi,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new yi,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(e){const t=this._cache;if(t.focus!==e.focus||t.fov!==e.fov||t.aspect!==e.aspect*this.aspect||t.near!==e.near||t.far!==e.far||t.zoom!==e.zoom||t.eyeSep!==this.eyeSep){t.focus=e.focus,t.fov=e.fov,t.aspect=e.aspect*this.aspect,t.near=e.near,t.far=e.far,t.zoom=e.zoom,t.eyeSep=this.eyeSep,Kc.copy(e.projectionMatrix);const r=t.eyeSep/2,s=r*t.near/t.focus,o=t.near*Math.tan(Au*t.fov*.5)/t.zoom;let a,l;$D.elements[12]=-r,qD.elements[12]=r,a=-o*t.aspect+s,l=o*t.aspect+s,Kc.elements[0]=2*t.near/(l-a),Kc.elements[8]=(l+a)/(l-a),this.cameraL.projectionMatrix.copy(Kc),a=-o*t.aspect-s,l=o*t.aspect-s,Kc.elements[0]=2*t.near/(l-a),Kc.elements[8]=(l+a)/(l-a),this.cameraR.projectionMatrix.copy(Kc)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply($D),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(qD)}}class dB extends yi{constructor(e=[]){super(),this.isArrayCamera=!0,this.cameras=e,this.index=0}}class PM{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=XD(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const t=XD();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}}function XD(){return performance.now()}const Yc=new K,KD=new is,UZ=new K,Jc=new K;class jZ extends yn{constructor(){super(),this.type="AudioListener",this.context=IM.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new PM}getInput(){return this.gain}removeFilter(){return this.filter!==null&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(e){return this.filter!==null?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}updateMatrixWorld(e){super.updateMatrixWorld(e);const t=this.context.listener,i=this.up;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(Yc,KD,UZ),Jc.set(0,0,-1).applyQuaternion(KD),t.positionX){const r=this.context.currentTime+this.timeDelta;t.positionX.linearRampToValueAtTime(Yc.x,r),t.positionY.linearRampToValueAtTime(Yc.y,r),t.positionZ.linearRampToValueAtTime(Yc.z,r),t.forwardX.linearRampToValueAtTime(Jc.x,r),t.forwardY.linearRampToValueAtTime(Jc.y,r),t.forwardZ.linearRampToValueAtTime(Jc.z,r),t.upX.linearRampToValueAtTime(i.x,r),t.upY.linearRampToValueAtTime(i.y,r),t.upZ.linearRampToValueAtTime(i.z,r)}else t.setPosition(Yc.x,Yc.y,Yc.z),t.setOrientation(Jc.x,Jc.y,Jc.z,i.x,i.y,i.z)}}class fB extends yn{constructor(e){super(),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}setMediaElementSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}setMediaStreamSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}setBuffer(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}play(e=0){if(this.isPlaying===!0){console.warn("THREE.Audio: Audio is already playing.");return}if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}this._startedAt=this.context.currentTime+e;const t=this.context.createBufferSource();return t.buffer=this.buffer,t.loop=this.loop,t.loopStart=this.loopStart,t.loopEnd=this.loopEnd,t.onended=this.onEnded.bind(this),t.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=t,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.isPlaying===!0&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,this.loop===!0&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this}stop(e=0){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this._progress=0,this.source!==null&&(this.source.stop(this.context.currentTime+e),this.source.onended=null),this.isPlaying=!1,this}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this._connected!==!1){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}}getFilters(){return this.filters}setFilters(e){return e||(e=[]),this._connected===!0?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}setDetune(e){return this.detune=e,this.isPlaying===!0&&this.source.detune!==void 0&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(e){return this.setFilters(e?[e]:[])}setPlaybackRate(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.playbackRate=e,this.isPlaying===!0&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1,this._progress=0}getLoop(){return this.hasPlaybackControl===!1?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.loop=e,this.isPlaying===!0&&(this.source.loop=this.loop),this}setLoopStart(e){return this.loopStart=e,this}setLoopEnd(e){return this.loopEnd=e,this}getVolume(){return this.gain.gain.value}setVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}copy(e,t){return super.copy(e,t),e.sourceType!=="buffer"?(console.warn("THREE.Audio: Audio source type cannot be copied."),this):(this.autoplay=e.autoplay,this.buffer=e.buffer,this.detune=e.detune,this.loop=e.loop,this.loopStart=e.loopStart,this.loopEnd=e.loopEnd,this.offset=e.offset,this.duration=e.duration,this.playbackRate=e.playbackRate,this.hasPlaybackControl=e.hasPlaybackControl,this.sourceType=e.sourceType,this.filters=e.filters.slice(),this)}clone(e){return new this.constructor(this.listener).copy(this,e)}}const Qc=new K,YD=new is,FZ=new K,Zc=new K;class VZ extends fB{constructor(e){super(e),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}connect(){return super.connect(),this.panner.connect(this.gain),this}disconnect(){return super.disconnect(),this.panner.disconnect(this.gain),this}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(e){return this.panner.refDistance=e,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(e){return this.panner.rolloffFactor=e,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(e){return this.panner.distanceModel=e,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(e){return this.panner.maxDistance=e,this}setDirectionalCone(e,t,i){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=t,this.panner.coneOuterGain=i,this}updateMatrixWorld(e){if(super.updateMatrixWorld(e),this.hasPlaybackControl===!0&&this.isPlaying===!1)return;this.matrixWorld.decompose(Qc,YD,FZ),Zc.set(0,0,1).applyQuaternion(YD);const t=this.panner;if(t.positionX){const i=this.context.currentTime+this.listener.timeDelta;t.positionX.linearRampToValueAtTime(Qc.x,i),t.positionY.linearRampToValueAtTime(Qc.y,i),t.positionZ.linearRampToValueAtTime(Qc.z,i),t.orientationX.linearRampToValueAtTime(Zc.x,i),t.orientationY.linearRampToValueAtTime(Zc.y,i),t.orientationZ.linearRampToValueAtTime(Zc.z,i)}else t.setPosition(Qc.x,Qc.y,Qc.z),t.setOrientation(Zc.x,Zc.y,Zc.z)}}class BZ{constructor(e,t=2048){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=t,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let e=0;const t=this.getFrequencyData();for(let i=0;i<t.length;i++)e+=t[i];return e/t.length}}class pB{constructor(e,t,i){this.binding=e,this.valueSize=i;let r,s,o;switch(t){case"quaternion":r=this._slerp,s=this._slerpAdditive,o=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(i*6),this._workIndex=5;break;case"string":case"bool":r=this._select,s=this._select,o=this._setAdditiveIdentityOther,this.buffer=new Array(i*5);break;default:r=this._lerp,s=this._lerpAdditive,o=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(i*5)}this._mixBufferRegion=r,this._mixBufferRegionAdditive=s,this._setIdentity=o,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,t){const i=this.buffer,r=this.valueSize,s=e*r+r;let o=this.cumulativeWeight;if(o===0){for(let a=0;a!==r;++a)i[s+a]=i[a];o=t}else{o+=t;const a=t/o;this._mixBufferRegion(i,s,0,a,r)}this.cumulativeWeight=o}accumulateAdditive(e){const t=this.buffer,i=this.valueSize,r=i*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(t,r,0,e,i),this.cumulativeWeightAdditive+=e}apply(e){const t=this.valueSize,i=this.buffer,r=e*t+t,s=this.cumulativeWeight,o=this.cumulativeWeightAdditive,a=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,s<1){const l=t*this._origIndex;this._mixBufferRegion(i,r,l,1-s,t)}o>0&&this._mixBufferRegionAdditive(i,r,this._addIndex*t,1,t);for(let l=t,c=t+t;l!==c;++l)if(i[l]!==i[l+t]){a.setValue(i,r);break}}saveOriginalState(){const e=this.binding,t=this.buffer,i=this.valueSize,r=i*this._origIndex;e.getValue(t,r);for(let s=i,o=r;s!==o;++s)t[s]=t[r+s%i];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const e=this.valueSize*3;this.binding.setValue(this.buffer,e)}_setAdditiveIdentityNumeric(){const e=this._addIndex*this.valueSize,t=e+this.valueSize;for(let i=e;i<t;i++)this.buffer[i]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const e=this._origIndex*this.valueSize,t=this._addIndex*this.valueSize;for(let i=0;i<this.valueSize;i++)this.buffer[t+i]=this.buffer[e+i]}_select(e,t,i,r,s){if(r>=.5)for(let o=0;o!==s;++o)e[t+o]=e[i+o]}_slerp(e,t,i,r){is.slerpFlat(e,t,e,t,e,i,r)}_slerpAdditive(e,t,i,r,s){const o=this._workIndex*s;is.multiplyQuaternionsFlat(e,o,e,t,e,i),is.slerpFlat(e,t,e,t,e,o,r)}_lerp(e,t,i,r,s){const o=1-r;for(let a=0;a!==s;++a){const l=t+a;e[l]=e[l]*o+e[i+a]*r}}_lerpAdditive(e,t,i,r,s){for(let o=0;o!==s;++o){const a=t+o;e[a]=e[a]+e[i+o]*r}}}const RM="\\[\\]\\.:\\/",zZ=new RegExp("["+RM+"]","g"),NM="[^"+RM+"]",HZ="[^"+RM.replace("\\.","")+"]",GZ=/((?:WC+[\/:])*)/.source.replace("WC",NM),WZ=/(WCOD+)?/.source.replace("WCOD",HZ),qZ=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",NM),$Z=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",NM),XZ=new RegExp("^"+GZ+WZ+qZ+$Z+"$"),KZ=["material","materials","bones","map"];class YZ{constructor(e,t,i){const r=i||fn.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,r)}getValue(e,t){this.bind();const i=this._targetGroup.nCachedObjects_,r=this._bindings[i];r!==void 0&&r.getValue(e,t)}setValue(e,t){const i=this._bindings;for(let r=this._targetGroup.nCachedObjects_,s=i.length;r!==s;++r)i[r].setValue(e,t)}bind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,i=e.length;t!==i;++t)e[t].bind()}unbind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,i=e.length;t!==i;++t)e[t].unbind()}}class fn{constructor(e,t,i){this.path=t,this.parsedPath=i||fn.parseTrackName(t),this.node=fn.findNode(e,this.parsedPath.nodeName),this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,t,i){return e&&e.isAnimationObjectGroup?new fn.Composite(e,t,i):new fn(e,t,i)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(zZ,"")}static parseTrackName(e){const t=XZ.exec(e);if(t===null)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const i={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},r=i.nodeName&&i.nodeName.lastIndexOf(".");if(r!==void 0&&r!==-1){const s=i.nodeName.substring(r+1);KZ.indexOf(s)!==-1&&(i.nodeName=i.nodeName.substring(0,r),i.objectName=s)}if(i.propertyName===null||i.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return i}static findNode(e,t){if(t===void 0||t===""||t==="."||t===-1||t===e.name||t===e.uuid)return e;if(e.skeleton){const i=e.skeleton.getBoneByName(t);if(i!==void 0)return i}if(e.children){const i=function(s){for(let o=0;o<s.length;o++){const a=s[o];if(a.name===t||a.uuid===t)return a;const l=i(a.children);if(l)return l}return null},r=i(e.children);if(r)return r}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,t){e[t]=this.targetObject[this.propertyName]}_getValue_array(e,t){const i=this.resolvedProperty;for(let r=0,s=i.length;r!==s;++r)e[t++]=i[r]}_getValue_arrayElement(e,t){e[t]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,t){this.resolvedProperty.toArray(e,t)}_setValue_direct(e,t){this.targetObject[this.propertyName]=e[t]}_setValue_direct_setNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,t){const i=this.resolvedProperty;for(let r=0,s=i.length;r!==s;++r)i[r]=e[t++]}_setValue_array_setNeedsUpdate(e,t){const i=this.resolvedProperty;for(let r=0,s=i.length;r!==s;++r)i[r]=e[t++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,t){const i=this.resolvedProperty;for(let r=0,s=i.length;r!==s;++r)i[r]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,t){this.resolvedProperty[this.propertyIndex]=e[t]}_setValue_arrayElement_setNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,t){this.resolvedProperty.fromArray(e,t)}_setValue_fromArray_setNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,t){this.bind(),this.getValue(e,t)}_setValue_unbound(e,t){this.bind(),this.setValue(e,t)}bind(){let e=this.node;const t=this.parsedPath,i=t.objectName,r=t.propertyName;let s=t.propertyIndex;if(e||(e=fn.findNode(this.rootNode,t.nodeName),this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e){console.warn("THREE.PropertyBinding: No target node found for track: "+this.path+".");return}if(i){let c=t.objectIndex;switch(i){case"materials":if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}e=e.material.materials;break;case"bones":if(!e.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}e=e.skeleton.bones;for(let u=0;u<e.length;u++)if(e[u].name===c){c=u;break}break;case"map":if("map"in e){e=e.map;break}if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.map){console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}e=e.material.map;break;default:if(e[i]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}e=e[i]}if(c!==void 0){if(e[c]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);return}e=e[c]}}const o=e[r];if(o===void 0){const c=t.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+c+"."+r+" but it wasn't found.",e);return}let a=this.Versioning.None;this.targetObject=e,e.isMaterial===!0?a=this.Versioning.NeedsUpdate:e.isObject3D===!0&&(a=this.Versioning.MatrixWorldNeedsUpdate);let l=this.BindingType.Direct;if(s!==void 0){if(r==="morphTargetInfluences"){if(!e.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!e.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}e.morphTargetDictionary[s]!==void 0&&(s=e.morphTargetDictionary[s])}l=this.BindingType.ArrayElement,this.resolvedProperty=o,this.propertyIndex=s}else o.fromArray!==void 0&&o.toArray!==void 0?(l=this.BindingType.HasFromToArray,this.resolvedProperty=o):Array.isArray(o)?(l=this.BindingType.EntireArray,this.resolvedProperty=o):this.propertyName=r;this.getValue=this.GetterByBindingType[l],this.setValue=this.SetterByBindingTypeAndVersioning[l][a]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}fn.Composite=YZ;fn.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};fn.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};fn.prototype.GetterByBindingType=[fn.prototype._getValue_direct,fn.prototype._getValue_array,fn.prototype._getValue_arrayElement,fn.prototype._getValue_toArray];fn.prototype.SetterByBindingTypeAndVersioning=[[fn.prototype._setValue_direct,fn.prototype._setValue_direct_setNeedsUpdate,fn.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[fn.prototype._setValue_array,fn.prototype._setValue_array_setNeedsUpdate,fn.prototype._setValue_array_setMatrixWorldNeedsUpdate],[fn.prototype._setValue_arrayElement,fn.prototype._setValue_arrayElement_setNeedsUpdate,fn.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[fn.prototype._setValue_fromArray,fn.prototype._setValue_fromArray_setNeedsUpdate,fn.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class JZ{constructor(){this.isAnimationObjectGroup=!0,this.uuid=_s(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const e={};this._indicesByUUID=e;for(let i=0,r=arguments.length;i!==r;++i)e[arguments[i].uuid]=i;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const t=this;this.stats={objects:{get total(){return t._objects.length},get inUse(){return this.total-t.nCachedObjects_}},get bindingsPerObject(){return t._bindings.length}}}add(){const e=this._objects,t=this._indicesByUUID,i=this._paths,r=this._parsedPaths,s=this._bindings,o=s.length;let a,l=e.length,c=this.nCachedObjects_;for(let u=0,p=arguments.length;u!==p;++u){const m=arguments[u],g=m.uuid;let x=t[g];if(x===void 0){x=l++,t[g]=x,e.push(m);for(let b=0,w=o;b!==w;++b)s[b].push(new fn(m,i[b],r[b]))}else if(x<c){a=e[x];const b=--c,w=e[b];t[w.uuid]=x,e[x]=w,t[g]=b,e[b]=m;for(let v=0,S=o;v!==S;++v){const E=s[v],C=E[b];let U=E[x];E[x]=C,U===void 0&&(U=new fn(m,i[v],r[v])),E[b]=U}}else e[x]!==a&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=c}remove(){const e=this._objects,t=this._indicesByUUID,i=this._bindings,r=i.length;let s=this.nCachedObjects_;for(let o=0,a=arguments.length;o!==a;++o){const l=arguments[o],c=l.uuid,u=t[c];if(u!==void 0&&u>=s){const p=s++,m=e[p];t[m.uuid]=u,e[u]=m,t[c]=p,e[p]=l;for(let g=0,x=r;g!==x;++g){const b=i[g],w=b[p],v=b[u];b[u]=w,b[p]=v}}}this.nCachedObjects_=s}uncache(){const e=this._objects,t=this._indicesByUUID,i=this._bindings,r=i.length;let s=this.nCachedObjects_,o=e.length;for(let a=0,l=arguments.length;a!==l;++a){const c=arguments[a],u=c.uuid,p=t[u];if(p!==void 0)if(delete t[u],p<s){const m=--s,g=e[m],x=--o,b=e[x];t[g.uuid]=p,e[p]=g,t[b.uuid]=m,e[m]=b,e.pop();for(let w=0,v=r;w!==v;++w){const S=i[w],E=S[m],C=S[x];S[p]=E,S[m]=C,S.pop()}}else{const m=--o,g=e[m];m>0&&(t[g.uuid]=p),e[p]=g,e.pop();for(let x=0,b=r;x!==b;++x){const w=i[x];w[p]=w[m],w.pop()}}}this.nCachedObjects_=s}subscribe_(e,t){const i=this._bindingsIndicesByPath;let r=i[e];const s=this._bindings;if(r!==void 0)return s[r];const o=this._paths,a=this._parsedPaths,l=this._objects,c=l.length,u=this.nCachedObjects_,p=new Array(c);r=s.length,i[e]=r,o.push(e),a.push(t),s.push(p);for(let m=u,g=l.length;m!==g;++m){const x=l[m];p[m]=new fn(x,e,t)}return p}unsubscribe_(e){const t=this._bindingsIndicesByPath,i=t[e];if(i!==void 0){const r=this._paths,s=this._parsedPaths,o=this._bindings,a=o.length-1,l=o[a],c=e[a];t[c]=i,o[i]=l,o.pop(),s[i]=s[a],s.pop(),r[i]=r[a],r.pop()}}}class mB{constructor(e,t,i=null,r=t.blendMode){this._mixer=e,this._clip=t,this._localRoot=i,this.blendMode=r;const s=t.tracks,o=s.length,a=new Array(o),l={endingStart:yu,endingEnd:yu};for(let c=0;c!==o;++c){const u=s[c].createInterpolant(null);a[c]=u,u.settings=l}this._interpolantSettings=l,this._interpolants=a,this._propertyBindings=new Array(o),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=s4,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,t){return this.loop=e,this.repetitions=t,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,t,i){if(e.fadeOut(t),this.fadeIn(t),i){const r=this._clip.duration,s=e._clip.duration,o=s/r,a=r/s;e.warp(1,o,t),this.warp(a,1,t)}return this}crossFadeTo(e,t,i){return e.crossFadeFrom(this,t,i)}stopFading(){const e=this._weightInterpolant;return e!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,t,i){const r=this._mixer,s=r.time,o=this.timeScale;let a=this._timeScaleInterpolant;a===null&&(a=r._lendControlInterpolant(),this._timeScaleInterpolant=a);const l=a.parameterPositions,c=a.sampleValues;return l[0]=s,l[1]=s+i,c[0]=e/o,c[1]=t/o,this}stopWarping(){const e=this._timeScaleInterpolant;return e!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,t,i,r){if(!this.enabled){this._updateWeight(e);return}const s=this._startTime;if(s!==null){const l=(e-s)*i;l<0||i===0?t=0:(this._startTime=null,t=i*l)}t*=this._updateTimeScale(e);const o=this._updateTime(t),a=this._updateWeight(e);if(a>0){const l=this._interpolants,c=this._propertyBindings;switch(this.blendMode){case rM:for(let u=0,p=l.length;u!==p;++u)l[u].evaluate(o),c[u].accumulateAdditive(a);break;case Tw:default:for(let u=0,p=l.length;u!==p;++u)l[u].evaluate(o),c[u].accumulate(r,a)}}}_updateWeight(e){let t=0;if(this.enabled){t=this.weight;const i=this._weightInterpolant;if(i!==null){const r=i.evaluate(e)[0];t*=r,e>i.parameterPositions[1]&&(this.stopFading(),r===0&&(this.enabled=!1))}}return this._effectiveWeight=t,t}_updateTimeScale(e){let t=0;if(!this.paused){t=this.timeScale;const i=this._timeScaleInterpolant;if(i!==null){const r=i.evaluate(e)[0];t*=r,e>i.parameterPositions[1]&&(this.stopWarping(),t===0?this.paused=!0:this.timeScale=t)}}return this._effectiveTimeScale=t,t}_updateTime(e){const t=this._clip.duration,i=this.loop;let r=this.time+e,s=this._loopCount;const o=i===o4;if(e===0)return s===-1?r:o&&(s&1)===1?t-r:r;if(i===r4){s===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(r>=t)r=t;else if(r<0)r=0;else{this.time=r;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(s===-1&&(e>=0?(s=0,this._setEndings(!0,this.repetitions===0,o)):this._setEndings(this.repetitions===0,!0,o)),r>=t||r<0){const a=Math.floor(r/t);r-=t*a,s+=Math.abs(a);const l=this.repetitions-s;if(l<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,r=e>0?t:0,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(l===1){const c=e<0;this._setEndings(c,!c,o)}else this._setEndings(!1,!1,o);this._loopCount=s,this.time=r,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:a})}}else this.time=r;if(o&&(s&1)===1)return t-r}return r}_setEndings(e,t,i){const r=this._interpolantSettings;i?(r.endingStart=vu,r.endingEnd=vu):(e?r.endingStart=this.zeroSlopeAtStart?vu:yu:r.endingStart=eg,t?r.endingEnd=this.zeroSlopeAtEnd?vu:yu:r.endingEnd=eg)}_scheduleFading(e,t,i){const r=this._mixer,s=r.time;let o=this._weightInterpolant;o===null&&(o=r._lendControlInterpolant(),this._weightInterpolant=o);const a=o.parameterPositions,l=o.sampleValues;return a[0]=s,l[0]=t,a[1]=s+e,l[1]=i,this}}const QZ=new Float32Array(1);class ZZ extends Ko{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,t){const i=e._localRoot||this._root,r=e._clip.tracks,s=r.length,o=e._propertyBindings,a=e._interpolants,l=i.uuid,c=this._bindingsByRootAndName;let u=c[l];u===void 0&&(u={},c[l]=u);for(let p=0;p!==s;++p){const m=r[p],g=m.name;let x=u[g];if(x!==void 0)++x.referenceCount,o[p]=x;else{if(x=o[p],x!==void 0){x._cacheIndex===null&&(++x.referenceCount,this._addInactiveBinding(x,l,g));continue}const b=t&&t._propertyBindings[p].binding.parsedPath;x=new pB(fn.create(i,g,b),m.ValueTypeName,m.getValueSize()),++x.referenceCount,this._addInactiveBinding(x,l,g),o[p]=x}a[p].resultBuffer=x.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(e._cacheIndex===null){const i=(e._localRoot||this._root).uuid,r=e._clip.uuid,s=this._actionsByClip[r];this._bindAction(e,s&&s.knownActions[0]),this._addInactiveAction(e,r,i)}const t=e._propertyBindings;for(let i=0,r=t.length;i!==r;++i){const s=t[i];s.useCount++===0&&(this._lendBinding(s),s.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){const t=e._propertyBindings;for(let i=0,r=t.length;i!==r;++i){const s=t[i];--s.useCount===0&&(s.restoreOriginalState(),this._takeBackBinding(s))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){const t=e._cacheIndex;return t!==null&&t<this._nActiveActions}_addInactiveAction(e,t,i){const r=this._actions,s=this._actionsByClip;let o=s[t];if(o===void 0)o={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,s[t]=o;else{const a=o.knownActions;e._byClipCacheIndex=a.length,a.push(e)}e._cacheIndex=r.length,r.push(e),o.actionByRoot[i]=e}_removeInactiveAction(e){const t=this._actions,i=t[t.length-1],r=e._cacheIndex;i._cacheIndex=r,t[r]=i,t.pop(),e._cacheIndex=null;const s=e._clip.uuid,o=this._actionsByClip,a=o[s],l=a.knownActions,c=l[l.length-1],u=e._byClipCacheIndex;c._byClipCacheIndex=u,l[u]=c,l.pop(),e._byClipCacheIndex=null;const p=a.actionByRoot,m=(e._localRoot||this._root).uuid;delete p[m],l.length===0&&delete o[s],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){const t=e._propertyBindings;for(let i=0,r=t.length;i!==r;++i){const s=t[i];--s.referenceCount===0&&this._removeInactiveBinding(s)}}_lendAction(e){const t=this._actions,i=e._cacheIndex,r=this._nActiveActions++,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=i,t[i]=s}_takeBackAction(e){const t=this._actions,i=e._cacheIndex,r=--this._nActiveActions,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=i,t[i]=s}_addInactiveBinding(e,t,i){const r=this._bindingsByRootAndName,s=this._bindings;let o=r[t];o===void 0&&(o={},r[t]=o),o[i]=e,e._cacheIndex=s.length,s.push(e)}_removeInactiveBinding(e){const t=this._bindings,i=e.binding,r=i.rootNode.uuid,s=i.path,o=this._bindingsByRootAndName,a=o[r],l=t[t.length-1],c=e._cacheIndex;l._cacheIndex=c,t[c]=l,t.pop(),delete a[s],Object.keys(a).length===0&&delete o[r]}_lendBinding(e){const t=this._bindings,i=e._cacheIndex,r=this._nActiveBindings++,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=i,t[i]=s}_takeBackBinding(e){const t=this._bindings,i=e._cacheIndex,r=--this._nActiveBindings,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=i,t[i]=s}_lendControlInterpolant(){const e=this._controlInterpolants,t=this._nActiveControlInterpolants++;let i=e[t];return i===void 0&&(i=new EM(new Float32Array(2),new Float32Array(2),1,QZ),i.__cacheIndex=t,e[t]=i),i}_takeBackControlInterpolant(e){const t=this._controlInterpolants,i=e.__cacheIndex,r=--this._nActiveControlInterpolants,s=t[r];e.__cacheIndex=r,t[r]=e,s.__cacheIndex=i,t[i]=s}clipAction(e,t,i){const r=t||this._root,s=r.uuid;let o=typeof e=="string"?hg.findByName(r,e):e;const a=o!==null?o.uuid:e,l=this._actionsByClip[a];let c=null;if(i===void 0&&(o!==null?i=o.blendMode:i=Tw),l!==void 0){const p=l.actionByRoot[s];if(p!==void 0&&p.blendMode===i)return p;c=l.knownActions[0],o===null&&(o=c._clip)}if(o===null)return null;const u=new mB(this,o,t,i);return this._bindAction(u,c),this._addInactiveAction(u,a,s),u}existingAction(e,t){const i=t||this._root,r=i.uuid,s=typeof e=="string"?hg.findByName(i,e):e,o=s?s.uuid:e,a=this._actionsByClip[o];return a!==void 0&&a.actionByRoot[r]||null}stopAllAction(){const e=this._actions,t=this._nActiveActions;for(let i=t-1;i>=0;--i)e[i].stop();return this}update(e){e*=this.timeScale;const t=this._actions,i=this._nActiveActions,r=this.time+=e,s=Math.sign(e),o=this._accuIndex^=1;for(let c=0;c!==i;++c)t[c]._update(r,e,s,o);const a=this._bindings,l=this._nActiveBindings;for(let c=0;c!==l;++c)a[c].apply(o);return this}setTime(e){this.time=0;for(let t=0;t<this._actions.length;t++)this._actions[t].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){const t=this._actions,i=e.uuid,r=this._actionsByClip,s=r[i];if(s!==void 0){const o=s.knownActions;for(let a=0,l=o.length;a!==l;++a){const c=o[a];this._deactivateAction(c);const u=c._cacheIndex,p=t[t.length-1];c._cacheIndex=null,c._byClipCacheIndex=null,p._cacheIndex=u,t[u]=p,t.pop(),this._removeInactiveBindingsForAction(c)}delete r[i]}}uncacheRoot(e){const t=e.uuid,i=this._actionsByClip;for(const o in i){const a=i[o].actionByRoot,l=a[t];l!==void 0&&(this._deactivateAction(l),this._removeInactiveAction(l))}const r=this._bindingsByRootAndName,s=r[t];if(s!==void 0)for(const o in s){const a=s[o];a.restoreOriginalState(),this._removeInactiveBinding(a)}}uncacheAction(e,t){const i=this.existingAction(e,t);i!==null&&(this._deactivateAction(i),this._removeInactiveAction(i))}}class eee extends Ew{constructor(e=1,t=1,i=1,r={}){super(e,t,r),this.isRenderTarget3D=!0,this.depth=i,this.texture=new Cw(null,e,t,i),this.texture.isRenderTargetTexture=!0}}class tee extends Ew{constructor(e=1,t=1,i=1,r={}){super(e,t,r),this.isRenderTargetArray=!0,this.depth=i,this.texture=new Vg(null,e,t,i),this.texture.isRenderTargetTexture=!0}}class DM{constructor(e){this.value=e}clone(){return new DM(this.value.clone===void 0?this.value:this.value.clone())}}let nee=0;class iee extends Ko{constructor(){super(),this.isUniformsGroup=!0,Object.defineProperty(this,"id",{value:nee++}),this.name="",this.usage=ng,this.uniforms=[]}add(e){return this.uniforms.push(e),this}remove(e){const t=this.uniforms.indexOf(e);return t!==-1&&this.uniforms.splice(t,1),this}setName(e){return this.name=e,this}setUsage(e){return this.usage=e,this}dispose(){return this.dispatchEvent({type:"dispose"}),this}copy(e){this.name=e.name,this.usage=e.usage;const t=e.uniforms;this.uniforms.length=0;for(let i=0,r=t.length;i<r;i++){const s=Array.isArray(t[i])?t[i]:[t[i]];for(let o=0;o<s.length;o++)this.uniforms.push(s[o].clone())}return this}clone(){return new this.constructor().copy(this)}}class ree extends Iw{constructor(e,t,i=1){super(e,t),this.isInstancedInterleavedBuffer=!0,this.meshPerAttribute=i}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}clone(e){const t=super.clone(e);return t.meshPerAttribute=this.meshPerAttribute,t}toJSON(e){const t=super.toJSON(e);return t.isInstancedInterleavedBuffer=!0,t.meshPerAttribute=this.meshPerAttribute,t}}class see{constructor(e,t,i,r,s){this.isGLBufferAttribute=!0,this.name="",this.buffer=e,this.type=t,this.itemSize=i,this.elementSize=r,this.count=s,this.version=0}set needsUpdate(e){e===!0&&this.version++}setBuffer(e){return this.buffer=e,this}setType(e,t){return this.type=e,this.elementSize=t,this}setItemSize(e){return this.itemSize=e,this}setCount(e){return this.count=e,this}}const JD=new At;class gB{constructor(e,t,i=0,r=1/0){this.ray=new Ef(e,t),this.near=i,this.far=r,this.camera=null,this.layers=new Mu,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,t){this.ray.set(e,t)}setFromCamera(e,t){t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):console.error("THREE.Raycaster: Unsupported camera type: "+t.type)}setFromXRController(e){return JD.identity().extractRotation(e.matrixWorld),this.ray.origin.setFromMatrixPosition(e.matrixWorld),this.ray.direction.set(0,0,-1).applyMatrix4(JD),this}intersectObject(e,t=!0,i=[]){return b1(e,this,i,t),i.sort(QD),i}intersectObjects(e,t=!0,i=[]){for(let r=0,s=e.length;r<s;r++)b1(e[r],this,i,t);return i.sort(QD),i}}function QD(n,e){return n.distance-e.distance}function b1(n,e,t,i){let r=!0;if(n.layers.test(e.layers)&&n.raycast(e,t)===!1&&(r=!1),r===!0&&i===!0){const s=n.children;for(let o=0,a=s.length;o<a;o++)b1(s[o],e,t,!0)}}class oee{constructor(e=1,t=0,i=0){this.radius=e,this.phi=t,this.theta=i}set(e,t,i){return this.radius=e,this.phi=t,this.theta=i,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=Lt(this.phi,1e-6,Math.PI-1e-6),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,i){return this.radius=Math.sqrt(e*e+t*t+i*i),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,i),this.phi=Math.acos(Lt(t/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}class aee{constructor(e=1,t=0,i=0){this.radius=e,this.theta=t,this.y=i}set(e,t,i){return this.radius=e,this.theta=t,this.y=i,this}copy(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,i){return this.radius=Math.sqrt(e*e+i*i),this.theta=Math.atan2(e,i),this.y=t,this}clone(){return new this.constructor().copy(this)}}class LM{constructor(e,t,i,r){LM.prototype.isMatrix2=!0,this.elements=[1,0,0,1],e!==void 0&&this.set(e,t,i,r)}identity(){return this.set(1,0,0,1),this}fromArray(e,t=0){for(let i=0;i<4;i++)this.elements[i]=e[i+t];return this}set(e,t,i,r){const s=this.elements;return s[0]=e,s[2]=t,s[1]=i,s[3]=r,this}}const ZD=new Ie;class lee{constructor(e=new Ie(1/0,1/0),t=new Ie(-1/0,-1/0)){this.isBox2=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromPoints(e){this.makeEmpty();for(let t=0,i=e.length;t<i;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const i=ZD.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(i),this.max.copy(e).add(i),this}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}containsPoint(e){return e.x>=this.min.x&&e.x<=this.max.x&&e.y>=this.min.y&&e.y<=this.max.y}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(e){return e.max.x>=this.min.x&&e.min.x<=this.max.x&&e.max.y>=this.min.y&&e.min.y<=this.max.y}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,ZD).distanceTo(e)}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const eL=new K,Wv=new K;class cee{constructor(e=new K,t=new K){this.start=e,this.end=t}set(e,t){return this.start.copy(e),this.end.copy(t),this}copy(e){return this.start.copy(e.start),this.end.copy(e.end),this}getCenter(e){return e.addVectors(this.start,this.end).multiplyScalar(.5)}delta(e){return e.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(e,t){return this.delta(t).multiplyScalar(e).add(this.start)}closestPointToPointParameter(e,t){eL.subVectors(e,this.start),Wv.subVectors(this.end,this.start);const i=Wv.dot(Wv);let s=Wv.dot(eL)/i;return t&&(s=Lt(s,0,1)),s}closestPointToPoint(e,t,i){const r=this.closestPointToPointParameter(e,t);return this.delta(i).multiplyScalar(r).add(this.start)}applyMatrix4(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}equals(e){return e.start.equals(this.start)&&e.end.equals(this.end)}clone(){return new this.constructor().copy(this)}}const tL=new K;class uee extends yn{constructor(e,t){super(),this.light=e,this.matrixAutoUpdate=!1,this.color=t,this.type="SpotLightHelper";const i=new Xt,r=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let o=0,a=1,l=32;o<l;o++,a++){const c=o/l*Math.PI*2,u=a/l*Math.PI*2;r.push(Math.cos(c),Math.sin(c),1,Math.cos(u),Math.sin(u),1)}i.setAttribute("position",new ft(r,3));const s=new jr({fog:!1,toneMapped:!1});this.cone=new Yo(i,s),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),this.parent?(this.parent.updateWorldMatrix(!0),this.matrix.copy(this.parent.matrixWorld).invert().multiply(this.light.matrixWorld)):this.matrix.copy(this.light.matrixWorld),this.matrixWorld.copy(this.light.matrixWorld);const e=this.light.distance?this.light.distance:1e3,t=e*Math.tan(this.light.angle);this.cone.scale.set(t,t,e),tL.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(tL),this.color!==void 0?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}const hl=new K,qv=new At,dT=new At;class hee extends Yo{constructor(e){const t=yB(e),i=new Xt,r=[],s=[],o=new st(0,0,1),a=new st(0,1,0);for(let c=0;c<t.length;c++){const u=t[c];u.parent&&u.parent.isBone&&(r.push(0,0,0),r.push(0,0,0),s.push(o.r,o.g,o.b),s.push(a.r,a.g,a.b))}i.setAttribute("position",new ft(r,3)),i.setAttribute("color",new ft(s,3));const l=new jr({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});super(i,l),this.isSkeletonHelper=!0,this.type="SkeletonHelper",this.root=e,this.bones=t,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1}updateMatrixWorld(e){const t=this.bones,i=this.geometry,r=i.getAttribute("position");dT.copy(this.root.matrixWorld).invert();for(let s=0,o=0;s<t.length;s++){const a=t[s];a.parent&&a.parent.isBone&&(qv.multiplyMatrices(dT,a.matrixWorld),hl.setFromMatrixPosition(qv),r.setXYZ(o,hl.x,hl.y,hl.z),qv.multiplyMatrices(dT,a.parent.matrixWorld),hl.setFromMatrixPosition(qv),r.setXYZ(o+1,hl.x,hl.y,hl.z),o+=2)}i.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose()}}function yB(n){const e=[];n.isBone===!0&&e.push(n);for(let t=0;t<n.children.length;t++)e.push(...yB(n.children[t]));return e}class dee extends _i{constructor(e,t,i){const r=new qg(t,4,2),s=new yc({wireframe:!0,fog:!1,toneMapped:!1});super(r,s),this.light=e,this.color=i,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.color!==void 0?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}const fee=new K,nL=new st,iL=new st;class pee extends yn{constructor(e,t,i){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=i,this.type="HemisphereLightHelper";const r=new Wg(t);r.rotateY(Math.PI*.5),this.material=new yc({wireframe:!0,fog:!1,toneMapped:!1}),this.color===void 0&&(this.material.vertexColors=!0);const s=r.getAttribute("position"),o=new Float32Array(s.count*3);r.setAttribute("color",new In(o,3)),this.add(new _i(r,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const e=this.children[0];if(this.color!==void 0)this.material.color.set(this.color);else{const t=e.geometry.getAttribute("color");nL.copy(this.light.color),iL.copy(this.light.groundColor);for(let i=0,r=t.count;i<r;i++){const s=i<r/2?nL:iL;t.setXYZ(i,s.r,s.g,s.b)}t.needsUpdate=!0}this.light.updateWorldMatrix(!0,!1),e.lookAt(fee.setFromMatrixPosition(this.light.matrixWorld).negate())}}class mee extends Yo{constructor(e=10,t=10,i=4473924,r=8947848){i=new st(i),r=new st(r);const s=t/2,o=e/t,a=e/2,l=[],c=[];for(let m=0,g=0,x=-a;m<=t;m++,x+=o){l.push(-a,0,x,a,0,x),l.push(x,0,-a,x,0,a);const b=m===s?i:r;b.toArray(c,g),g+=3,b.toArray(c,g),g+=3,b.toArray(c,g),g+=3,b.toArray(c,g),g+=3}const u=new Xt;u.setAttribute("position",new ft(l,3)),u.setAttribute("color",new ft(c,3));const p=new jr({vertexColors:!0,toneMapped:!1});super(u,p),this.type="GridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}class gee extends Yo{constructor(e=10,t=16,i=8,r=64,s=4473924,o=8947848){s=new st(s),o=new st(o);const a=[],l=[];if(t>1)for(let p=0;p<t;p++){const m=p/t*(Math.PI*2),g=Math.sin(m)*e,x=Math.cos(m)*e;a.push(0,0,0),a.push(g,0,x);const b=p&1?s:o;l.push(b.r,b.g,b.b),l.push(b.r,b.g,b.b)}for(let p=0;p<i;p++){const m=p&1?s:o,g=e-e/i*p;for(let x=0;x<r;x++){let b=x/r*(Math.PI*2),w=Math.sin(b)*g,v=Math.cos(b)*g;a.push(w,0,v),l.push(m.r,m.g,m.b),b=(x+1)/r*(Math.PI*2),w=Math.sin(b)*g,v=Math.cos(b)*g,a.push(w,0,v),l.push(m.r,m.g,m.b)}}const c=new Xt;c.setAttribute("position",new ft(a,3)),c.setAttribute("color",new ft(l,3));const u=new jr({vertexColors:!0,toneMapped:!1});super(c,u),this.type="PolarGridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}const rL=new K,$v=new K,sL=new K;class yee extends yn{constructor(e,t,i){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=i,this.type="DirectionalLightHelper",t===void 0&&(t=1);let r=new Xt;r.setAttribute("position",new ft([-t,t,0,t,t,0,t,-t,0,-t,-t,0,-t,t,0],3));const s=new jr({fog:!1,toneMapped:!1});this.lightPlane=new sc(r,s),this.add(this.lightPlane),r=new Xt,r.setAttribute("position",new ft([0,0,0,0,0,1],3)),this.targetLine=new sc(r,s),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),rL.setFromMatrixPosition(this.light.matrixWorld),$v.setFromMatrixPosition(this.light.target.matrixWorld),sL.subVectors($v,rL),this.lightPlane.lookAt($v),this.color!==void 0?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt($v),this.targetLine.scale.z=sL.length()}}const Xv=new K,Qn=new Bg;class vee extends Yo{constructor(e){const t=new Xt,i=new jr({color:16777215,vertexColors:!0,toneMapped:!1}),r=[],s=[],o={};a("n1","n2"),a("n2","n4"),a("n4","n3"),a("n3","n1"),a("f1","f2"),a("f2","f4"),a("f4","f3"),a("f3","f1"),a("n1","f1"),a("n2","f2"),a("n3","f3"),a("n4","f4"),a("p","n1"),a("p","n2"),a("p","n3"),a("p","n4"),a("u1","u2"),a("u2","u3"),a("u3","u1"),a("c","t"),a("p","c"),a("cn1","cn2"),a("cn3","cn4"),a("cf1","cf2"),a("cf3","cf4");function a(x,b){l(x),l(b)}function l(x){r.push(0,0,0),s.push(0,0,0),o[x]===void 0&&(o[x]=[]),o[x].push(r.length/3-1)}t.setAttribute("position",new ft(r,3)),t.setAttribute("color",new ft(s,3)),super(t,i),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=o,this.update();const c=new st(16755200),u=new st(16711680),p=new st(43775),m=new st(16777215),g=new st(3355443);this.setColors(c,u,p,m,g)}setColors(e,t,i,r,s){const a=this.geometry.getAttribute("color");a.setXYZ(0,e.r,e.g,e.b),a.setXYZ(1,e.r,e.g,e.b),a.setXYZ(2,e.r,e.g,e.b),a.setXYZ(3,e.r,e.g,e.b),a.setXYZ(4,e.r,e.g,e.b),a.setXYZ(5,e.r,e.g,e.b),a.setXYZ(6,e.r,e.g,e.b),a.setXYZ(7,e.r,e.g,e.b),a.setXYZ(8,e.r,e.g,e.b),a.setXYZ(9,e.r,e.g,e.b),a.setXYZ(10,e.r,e.g,e.b),a.setXYZ(11,e.r,e.g,e.b),a.setXYZ(12,e.r,e.g,e.b),a.setXYZ(13,e.r,e.g,e.b),a.setXYZ(14,e.r,e.g,e.b),a.setXYZ(15,e.r,e.g,e.b),a.setXYZ(16,e.r,e.g,e.b),a.setXYZ(17,e.r,e.g,e.b),a.setXYZ(18,e.r,e.g,e.b),a.setXYZ(19,e.r,e.g,e.b),a.setXYZ(20,e.r,e.g,e.b),a.setXYZ(21,e.r,e.g,e.b),a.setXYZ(22,e.r,e.g,e.b),a.setXYZ(23,e.r,e.g,e.b),a.setXYZ(24,t.r,t.g,t.b),a.setXYZ(25,t.r,t.g,t.b),a.setXYZ(26,t.r,t.g,t.b),a.setXYZ(27,t.r,t.g,t.b),a.setXYZ(28,t.r,t.g,t.b),a.setXYZ(29,t.r,t.g,t.b),a.setXYZ(30,t.r,t.g,t.b),a.setXYZ(31,t.r,t.g,t.b),a.setXYZ(32,i.r,i.g,i.b),a.setXYZ(33,i.r,i.g,i.b),a.setXYZ(34,i.r,i.g,i.b),a.setXYZ(35,i.r,i.g,i.b),a.setXYZ(36,i.r,i.g,i.b),a.setXYZ(37,i.r,i.g,i.b),a.setXYZ(38,r.r,r.g,r.b),a.setXYZ(39,r.r,r.g,r.b),a.setXYZ(40,s.r,s.g,s.b),a.setXYZ(41,s.r,s.g,s.b),a.setXYZ(42,s.r,s.g,s.b),a.setXYZ(43,s.r,s.g,s.b),a.setXYZ(44,s.r,s.g,s.b),a.setXYZ(45,s.r,s.g,s.b),a.setXYZ(46,s.r,s.g,s.b),a.setXYZ(47,s.r,s.g,s.b),a.setXYZ(48,s.r,s.g,s.b),a.setXYZ(49,s.r,s.g,s.b),a.needsUpdate=!0}update(){const e=this.geometry,t=this.pointMap,i=1,r=1;Qn.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse);const s=this.camera.coordinateSystem===ho?-1:0;ri("c",t,e,Qn,0,0,s),ri("t",t,e,Qn,0,0,1),ri("n1",t,e,Qn,-1,-1,s),ri("n2",t,e,Qn,i,-1,s),ri("n3",t,e,Qn,-1,r,s),ri("n4",t,e,Qn,i,r,s),ri("f1",t,e,Qn,-1,-1,1),ri("f2",t,e,Qn,i,-1,1),ri("f3",t,e,Qn,-1,r,1),ri("f4",t,e,Qn,i,r,1),ri("u1",t,e,Qn,i*.7,r*1.1,s),ri("u2",t,e,Qn,-1*.7,r*1.1,s),ri("u3",t,e,Qn,0,r*2,s),ri("cf1",t,e,Qn,-1,0,1),ri("cf2",t,e,Qn,i,0,1),ri("cf3",t,e,Qn,0,-1,1),ri("cf4",t,e,Qn,0,r,1),ri("cn1",t,e,Qn,-1,0,s),ri("cn2",t,e,Qn,i,0,s),ri("cn3",t,e,Qn,0,-1,s),ri("cn4",t,e,Qn,0,r,s),e.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}}function ri(n,e,t,i,r,s,o){Xv.set(r,s,o).unproject(i);const a=e[n];if(a!==void 0){const l=t.getAttribute("position");for(let c=0,u=a.length;c<u;c++)l.setXYZ(a[c],Xv.x,Xv.y,Xv.z)}}const Kv=new kr;class xee extends Yo{constructor(e,t=16776960){const i=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=new Float32Array(8*3),s=new Xt;s.setIndex(new In(i,1)),s.setAttribute("position",new In(r,3)),super(s,new jr({color:t,toneMapped:!1})),this.object=e,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(){if(this.object!==void 0&&Kv.setFromObject(this.object),Kv.isEmpty())return;const e=Kv.min,t=Kv.max,i=this.geometry.attributes.position,r=i.array;r[0]=t.x,r[1]=t.y,r[2]=t.z,r[3]=e.x,r[4]=t.y,r[5]=t.z,r[6]=e.x,r[7]=e.y,r[8]=t.z,r[9]=t.x,r[10]=e.y,r[11]=t.z,r[12]=t.x,r[13]=t.y,r[14]=e.z,r[15]=e.x,r[16]=t.y,r[17]=e.z,r[18]=e.x,r[19]=e.y,r[20]=e.z,r[21]=t.x,r[22]=e.y,r[23]=e.z,i.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(e){return this.object=e,this.update(),this}copy(e,t){return super.copy(e,t),this.object=e.object,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class _ee extends Yo{constructor(e,t=16776960){const i=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],s=new Xt;s.setIndex(new In(i,1)),s.setAttribute("position",new ft(r,3)),super(s,new jr({color:t,toneMapped:!1})),this.box=e,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(e){const t=this.box;t.isEmpty()||(t.getCenter(this.position),t.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(e))}dispose(){this.geometry.dispose(),this.material.dispose()}}class wee extends sc{constructor(e,t=1,i=16776960){const r=i,s=[1,-1,0,-1,1,0,-1,-1,0,1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],o=new Xt;o.setAttribute("position",new ft(s,3)),o.computeBoundingSphere(),super(o,new jr({color:r,toneMapped:!1})),this.type="PlaneHelper",this.plane=e,this.size=t;const a=[1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],l=new Xt;l.setAttribute("position",new ft(a,3)),l.computeBoundingSphere(),this.add(new _i(l,new yc({color:r,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(e){this.position.set(0,0,0),this.scale.set(.5*this.size,.5*this.size,1),this.lookAt(this.plane.normal),this.translateZ(-this.plane.constant),super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()}}const oL=new K;let Yv,fT;class bee extends yn{constructor(e=new K(0,0,1),t=new K(0,0,0),i=1,r=16776960,s=i*.2,o=s*.2){super(),this.type="ArrowHelper",Yv===void 0&&(Yv=new Xt,Yv.setAttribute("position",new ft([0,0,0,0,1,0],3)),fT=new Cf(0,.5,1,5,1),fT.translate(0,-.5,0)),this.position.copy(t),this.line=new sc(Yv,new jr({color:r,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new _i(fT,new yc({color:r,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(i,s,o)}setDirection(e){if(e.y>.99999)this.quaternion.set(0,0,0,1);else if(e.y<-.99999)this.quaternion.set(1,0,0,0);else{oL.set(e.z,0,-e.x).normalize();const t=Math.acos(e.y);this.quaternion.setFromAxisAngle(oL,t)}}setLength(e,t=e*.2,i=t*.2){this.line.scale.set(1,Math.max(1e-4,e-t),1),this.line.updateMatrix(),this.cone.scale.set(i,t,i),this.cone.position.y=e,this.cone.updateMatrix()}setColor(e){this.line.material.color.set(e),this.cone.material.color.set(e)}copy(e){return super.copy(e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this}dispose(){this.line.geometry.dispose(),this.line.material.dispose(),this.cone.geometry.dispose(),this.cone.material.dispose()}}class See extends Yo{constructor(e=1){const t=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],i=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],r=new Xt;r.setAttribute("position",new ft(t,3)),r.setAttribute("color",new ft(i,3));const s=new jr({vertexColors:!0,toneMapped:!1});super(r,s),this.type="AxesHelper"}setColors(e,t,i){const r=new st,s=this.geometry.attributes.color.array;return r.set(e),r.toArray(s,0),r.toArray(s,3),r.set(t),r.toArray(s,6),r.toArray(s,9),r.set(i),r.toArray(s,12),r.toArray(s,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class Tee{constructor(){this.type="ShapePath",this.color=new st,this.subPaths=[],this.currentPath=null}moveTo(e,t){return this.currentPath=new sg,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t),this}lineTo(e,t){return this.currentPath.lineTo(e,t),this}quadraticCurveTo(e,t,i,r){return this.currentPath.quadraticCurveTo(e,t,i,r),this}bezierCurveTo(e,t,i,r,s,o){return this.currentPath.bezierCurveTo(e,t,i,r,s,o),this}splineThru(e){return this.currentPath.splineThru(e),this}toShapes(e){function t(v){const S=[];for(let E=0,C=v.length;E<C;E++){const U=v[E],O=new Iu;O.curves=U.curves,S.push(O)}return S}function i(v,S){const E=S.length;let C=!1;for(let U=E-1,O=0;O<E;U=O++){let N=S[U],P=S[O],A=P.x-N.x,M=P.y-N.y;if(Math.abs(M)>Number.EPSILON){if(M<0&&(N=S[O],A=-A,P=S[U],M=-M),v.y<N.y||v.y>P.y)continue;if(v.y===N.y){if(v.x===N.x)return!0}else{const D=M*(v.x-N.x)-A*(v.y-N.y);if(D===0)return!0;if(D<0)continue;C=!C}}else{if(v.y!==N.y)continue;if(P.x<=v.x&&v.x<=N.x||N.x<=v.x&&v.x<=P.x)return!0}}return C}const r=Go.isClockWise,s=this.subPaths;if(s.length===0)return[];let o,a,l;const c=[];if(s.length===1)return a=s[0],l=new Iu,l.curves=a.curves,c.push(l),c;let u=!r(s[0].getPoints());u=e?!u:u;const p=[],m=[];let g=[],x=0,b;m[x]=void 0,g[x]=[];for(let v=0,S=s.length;v<S;v++)a=s[v],b=a.getPoints(),o=r(b),o=e?!o:o,o?(!u&&m[x]&&x++,m[x]={s:new Iu,p:b},m[x].s.curves=a.curves,u&&x++,g[x]=[]):g[x].push({h:a,p:b[0]});if(!m[0])return t(s);if(m.length>1){let v=!1,S=0;for(let E=0,C=m.length;E<C;E++)p[E]=[];for(let E=0,C=m.length;E<C;E++){const U=g[E];for(let O=0;O<U.length;O++){const N=U[O];let P=!0;for(let A=0;A<m.length;A++)i(N.p,m[A].p)&&(E!==A&&S++,P?(P=!1,p[A].push(N)):v=!0);P&&p[E].push(N)}}S>0&&v===!1&&(g=p)}let w;for(let v=0,S=m.length;v<S;v++){l=m[v].s,c.push(l),w=g[v];for(let E=0,C=w.length;E<C;E++)l.holes.push(w[E].h)}return c}}class Eee extends Ko{constructor(e,t=null){super(),this.object=e,this.domElement=t,this.enabled=!0,this.state=-1,this.keys={},this.mouseButtons={LEFT:null,MIDDLE:null,RIGHT:null},this.touches={ONE:null,TWO:null}}connect(){}disconnect(){}dispose(){}update(){}}function Cee(n,e){const t=n.image&&n.image.width?n.image.width/n.image.height:1;return t>e?(n.repeat.x=1,n.repeat.y=t/e,n.offset.x=0,n.offset.y=(1-n.repeat.y)/2):(n.repeat.x=e/t,n.repeat.y=1,n.offset.x=(1-n.repeat.x)/2,n.offset.y=0),n}function Aee(n,e){const t=n.image&&n.image.width?n.image.width/n.image.height:1;return t>e?(n.repeat.x=e/t,n.repeat.y=1,n.offset.x=(1-n.repeat.x)/2,n.offset.y=0):(n.repeat.x=1,n.repeat.y=t/e,n.offset.x=0,n.offset.y=(1-n.repeat.y)/2),n}function Mee(n){return n.repeat.x=1,n.repeat.y=1,n.offset.x=0,n.offset.y=0,n}function S1(n,e,t,i){const r=Iee(i);switch(t){case QA:return n*e;case eM:return n*e;case tM:return n*e*2;case ww:return n*e/r.components*r.byteLength;case Fg:return n*e/r.components*r.byteLength;case nM:return n*e*2/r.components*r.byteLength;case bw:return n*e*2/r.components*r.byteLength;case ZA:return n*e*3/r.components*r.byteLength;case gr:return n*e*4/r.components*r.byteLength;case Sw:return n*e*4/r.components*r.byteLength;case rm:case sm:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*8;case om:case am:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*16;case V0:case z0:return Math.max(n,16)*Math.max(e,8)/4;case F0:case B0:return Math.max(n,8)*Math.max(e,8)/2;case H0:case G0:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*8;case W0:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*16;case q0:return Math.floor((n+3)/4)*Math.floor((e+3)/4)*16;case $0:return Math.floor((n+4)/5)*Math.floor((e+3)/4)*16;case X0:return Math.floor((n+4)/5)*Math.floor((e+4)/5)*16;case K0:return Math.floor((n+5)/6)*Math.floor((e+4)/5)*16;case Y0:return Math.floor((n+5)/6)*Math.floor((e+5)/6)*16;case J0:return Math.floor((n+7)/8)*Math.floor((e+4)/5)*16;case Q0:return Math.floor((n+7)/8)*Math.floor((e+5)/6)*16;case Z0:return Math.floor((n+7)/8)*Math.floor((e+7)/8)*16;case e_:return Math.floor((n+9)/10)*Math.floor((e+4)/5)*16;case t_:return Math.floor((n+9)/10)*Math.floor((e+5)/6)*16;case n_:return Math.floor((n+9)/10)*Math.floor((e+7)/8)*16;case i_:return Math.floor((n+9)/10)*Math.floor((e+9)/10)*16;case r_:return Math.floor((n+11)/12)*Math.floor((e+9)/10)*16;case s_:return Math.floor((n+11)/12)*Math.floor((e+11)/12)*16;case lm:case o_:case a_:return Math.ceil(n/4)*Math.ceil(e/4)*16;case iM:case l_:return Math.ceil(n/4)*Math.ceil(e/4)*8;case c_:case u_:return Math.ceil(n/4)*Math.ceil(e/4)*16}throw new Error(`Unable to determine texture byte length for ${t} format.`)}function Iee(n){switch(n){case xo:case KA:return{byteLength:1,components:1};case rf:case YA:case Tf:return{byteLength:2,components:1};case xw:case _w:return{byteLength:2,components:4};case ja:case vw:case Qr:return{byteLength:4,components:1};case JA:return{byteLength:4,components:3}}throw new Error(`Unknown texture type ${n}.`)}class Pee{static contain(e,t){return Cee(e,t)}static cover(e,t){return Aee(e,t)}static fill(e){return Mee(e)}static getByteLength(e,t,i,r){return S1(e,t,i,r)}}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:Ug}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=Ug);/**
 * @license
 * Copyright 2010-2025 Three.js Authors
 * SPDX-License-Identifier: MIT
 */function vB(){let n=null,e=!1,t=null,i=null;function r(s,o){t(s,o),i=n.requestAnimationFrame(r)}return{start:function(){e!==!0&&t!==null&&(i=n.requestAnimationFrame(r),e=!0)},stop:function(){n.cancelAnimationFrame(i),e=!1},setAnimationLoop:function(s){t=s},setContext:function(s){n=s}}}function Ree(n){const e=new WeakMap;function t(a,l){const c=a.array,u=a.usage,p=c.byteLength,m=n.createBuffer();n.bindBuffer(l,m),n.bufferData(l,c,u),a.onUploadCallback();let g;if(c instanceof Float32Array)g=n.FLOAT;else if(c instanceof Uint16Array)a.isFloat16BufferAttribute?g=n.HALF_FLOAT:g=n.UNSIGNED_SHORT;else if(c instanceof Int16Array)g=n.SHORT;else if(c instanceof Uint32Array)g=n.UNSIGNED_INT;else if(c instanceof Int32Array)g=n.INT;else if(c instanceof Int8Array)g=n.BYTE;else if(c instanceof Uint8Array)g=n.UNSIGNED_BYTE;else if(c instanceof Uint8ClampedArray)g=n.UNSIGNED_BYTE;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+c);return{buffer:m,type:g,bytesPerElement:c.BYTES_PER_ELEMENT,version:a.version,size:p}}function i(a,l,c){const u=l.array,p=l.updateRanges;if(n.bindBuffer(c,a),p.length===0)n.bufferSubData(c,0,u);else{p.sort((g,x)=>g.start-x.start);let m=0;for(let g=1;g<p.length;g++){const x=p[m],b=p[g];b.start<=x.start+x.count+1?x.count=Math.max(x.count,b.start+b.count-x.start):(++m,p[m]=b)}p.length=m+1;for(let g=0,x=p.length;g<x;g++){const b=p[g];n.bufferSubData(c,b.start*u.BYTES_PER_ELEMENT,u,b.start,b.count)}l.clearUpdateRanges()}l.onUploadCallback()}function r(a){return a.isInterleavedBufferAttribute&&(a=a.data),e.get(a)}function s(a){a.isInterleavedBufferAttribute&&(a=a.data);const l=e.get(a);l&&(n.deleteBuffer(l.buffer),e.delete(a))}function o(a,l){if(a.isInterleavedBufferAttribute&&(a=a.data),a.isGLBufferAttribute){const u=e.get(a);(!u||u.version<a.version)&&e.set(a,{buffer:a.buffer,type:a.type,bytesPerElement:a.elementSize,version:a.version});return}const c=e.get(a);if(c===void 0)e.set(a,t(a,l));else if(c.version<a.version){if(c.size!==a.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");i(c.buffer,a,l),c.version=a.version}}return{get:r,remove:s,update:o}}var Nee=`#ifdef USE_ALPHAHASH
	if ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;
#endif`,Dee=`#ifdef USE_ALPHAHASH
	const float ALPHA_HASH_SCALE = 0.05;
	float hash2D( vec2 value ) {
		return fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );
	}
	float hash3D( vec3 value ) {
		return hash2D( vec2( hash2D( value.xy ), value.z ) );
	}
	float getAlphaHashThreshold( vec3 position ) {
		float maxDeriv = max(
			length( dFdx( position.xyz ) ),
			length( dFdy( position.xyz ) )
		);
		float pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );
		vec2 pixScales = vec2(
			exp2( floor( log2( pixScale ) ) ),
			exp2( ceil( log2( pixScale ) ) )
		);
		vec2 alpha = vec2(
			hash3D( floor( pixScales.x * position.xyz ) ),
			hash3D( floor( pixScales.y * position.xyz ) )
		);
		float lerpFactor = fract( log2( pixScale ) );
		float x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;
		float a = min( lerpFactor, 1.0 - lerpFactor );
		vec3 cases = vec3(
			x * x / ( 2.0 * a * ( 1.0 - a ) ),
			( x - 0.5 * a ) / ( 1.0 - a ),
			1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )
		);
		float threshold = ( x < ( 1.0 - a ) )
			? ( ( x < a ) ? cases.x : cases.y )
			: cases.z;
		return clamp( threshold , 1.0e-6, 1.0 );
	}
#endif`,Lee=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`,kee=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,Oee=`#ifdef USE_ALPHATEST
	#ifdef ALPHA_TO_COVERAGE
	diffuseColor.a = smoothstep( alphaTest, alphaTest + fwidth( diffuseColor.a ), diffuseColor.a );
	if ( diffuseColor.a == 0.0 ) discard;
	#else
	if ( diffuseColor.a < alphaTest ) discard;
	#endif
#endif`,Uee=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,jee=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_CLEARCOAT ) 
		clearcoatSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_SHEEN ) 
		sheenSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometryNormal, geometryViewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,Fee=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,Vee=`#ifdef USE_BATCHING
	#if ! defined( GL_ANGLE_multi_draw )
	#define gl_DrawID _gl_DrawID
	uniform int _gl_DrawID;
	#endif
	uniform highp sampler2D batchingTexture;
	uniform highp usampler2D batchingIdTexture;
	mat4 getBatchingMatrix( const in float i ) {
		int size = textureSize( batchingTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
	float getIndirectIndex( const in int i ) {
		int size = textureSize( batchingIdTexture, 0 ).x;
		int x = i % size;
		int y = i / size;
		return float( texelFetch( batchingIdTexture, ivec2( x, y ), 0 ).r );
	}
#endif
#ifdef USE_BATCHING_COLOR
	uniform sampler2D batchingColorTexture;
	vec3 getBatchingColor( const in float i ) {
		int size = textureSize( batchingColorTexture, 0 ).x;
		int j = int( i );
		int x = j % size;
		int y = j / size;
		return texelFetch( batchingColorTexture, ivec2( x, y ), 0 ).rgb;
	}
#endif`,Bee=`#ifdef USE_BATCHING
	mat4 batchingMatrix = getBatchingMatrix( getIndirectIndex( gl_DrawID ) );
#endif`,zee=`vec3 transformed = vec3( position );
#ifdef USE_ALPHAHASH
	vPosition = vec3( position );
#endif`,Hee=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,Gee=`float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
} // validated`,Wee=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,qee=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vBumpMapUv );
		vec2 dSTdy = dFdy( vBumpMapUv );
		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );
		vec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,$ee=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#ifdef ALPHA_TO_COVERAGE
		float distanceToPlane, distanceGradient;
		float clipOpacity = 1.0;
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
			distanceGradient = fwidth( distanceToPlane ) / 2.0;
			clipOpacity *= smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			if ( clipOpacity == 0.0 ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			float unionClipOpacity = 1.0;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
				distanceGradient = fwidth( distanceToPlane ) / 2.0;
				unionClipOpacity *= 1.0 - smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			}
			#pragma unroll_loop_end
			clipOpacity *= 1.0 - unionClipOpacity;
		#endif
		diffuseColor.a *= clipOpacity;
		if ( diffuseColor.a == 0.0 ) discard;
	#else
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			bool clipped = true;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
			}
			#pragma unroll_loop_end
			if ( clipped ) discard;
		#endif
	#endif
#endif`,Xee=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,Kee=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,Yee=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,Jee=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,Qee=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,Zee=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	varying vec3 vColor;
#endif`,ete=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif
#ifdef USE_BATCHING_COLOR
	vec3 batchingColor = getBatchingColor( getIndirectIndex( gl_DrawID ) );
	vColor.xyz *= batchingColor.xyz;
#endif`,tte=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
#ifdef USE_ALPHAHASH
	varying vec3 vPosition;
#endif
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
} // validated`,nte=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,ite=`vec3 transformedNormal = objectNormal;
#ifdef USE_TANGENT
	vec3 transformedTangent = objectTangent;
#endif
#ifdef USE_BATCHING
	mat3 bm = mat3( batchingMatrix );
	transformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );
	transformedNormal = bm * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = bm * transformedTangent;
	#endif
#endif
#ifdef USE_INSTANCING
	mat3 im = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );
	transformedNormal = im * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = im * transformedTangent;
	#endif
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	transformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,rte=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,ste=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`,ote=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
	#ifdef DECODE_VIDEO_TEXTURE_EMISSIVE
		emissiveColor = sRGBTransferEOTF( emissiveColor );
	#endif
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,ate=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,lte="gl_FragColor = linearToOutputTexel( gl_FragColor );",cte=`vec4 LinearTransferOETF( in vec4 value ) {
	return value;
}
vec4 sRGBTransferEOTF( in vec4 value ) {
	return vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );
}
vec4 sRGBTransferOETF( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,ute=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, envMapRotation * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,hte=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	uniform mat3 envMapRotation;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,dte=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,fte=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,pte=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,mte=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,gte=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,yte=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,vte=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,xte=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,_te=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,wte=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,bte=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,Ste=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
#if defined( USE_LIGHT_PROBES )
	uniform vec3 lightProbe[ 9 ];
#endif
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
	if ( cutoffDistance > 0.0 ) {
		distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
	}
	return distanceFalloff;
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,Tte=`#ifdef USE_ENVMAP
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	#ifdef USE_ANISOTROPY
		vec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {
			#ifdef ENVMAP_TYPE_CUBE_UV
				vec3 bentNormal = cross( bitangent, viewDir );
				bentNormal = normalize( cross( bentNormal, bitangent ) );
				bentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );
				return getIBLRadiance( viewDir, bentNormal, roughness );
			#else
				return vec3( 0.0 );
			#endif
		}
	#endif
#endif`,Ete=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,Cte=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,Ate=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,Mte=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,Ite=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef USE_SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULAR_COLORMAP
			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
		#endif
		#ifdef USE_SPECULAR_INTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_DISPERSION
	material.dispersion = dispersion;
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEEN_COLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEEN_ROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
	#endif
#endif
#ifdef USE_ANISOTROPY
	#ifdef USE_ANISOTROPYMAP
		mat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );
		vec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;
		vec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;
	#else
		vec2 anisotropyV = anisotropyVector;
	#endif
	material.anisotropy = length( anisotropyV );
	if( material.anisotropy == 0.0 ) {
		anisotropyV = vec2( 1.0, 0.0 );
	} else {
		anisotropyV /= material.anisotropy;
		material.anisotropy = saturate( material.anisotropy );
	}
	material.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );
	material.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;
	material.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;
#endif`,Pte=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	float dispersion;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
	#ifdef USE_ANISOTROPY
		float anisotropy;
		float alphaT;
		vec3 anisotropyT;
		vec3 anisotropyB;
	#endif
};
vec3 clearcoatSpecularDirect = vec3( 0.0 );
vec3 clearcoatSpecularIndirect = vec3( 0.0 );
vec3 sheenSpecularDirect = vec3( 0.0 );
vec3 sheenSpecularIndirect = vec3(0.0 );
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
#ifdef USE_ANISOTROPY
	float V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {
		float gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );
		float gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );
		float v = 0.5 / ( gv + gl );
		return saturate(v);
	}
	float D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {
		float a2 = alphaT * alphaB;
		highp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );
		highp float v2 = dot( v, v );
		float w2 = a2 / v2;
		return RECIPROCAL_PI * a2 * pow2 ( w2 );
	}
#endif
#ifdef USE_CLEARCOAT
	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
		vec3 f0 = material.clearcoatF0;
		float f90 = material.clearcoatF90;
		float roughness = material.clearcoatRoughness;
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = F_Schlick( f0, f90, dotVH );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 f0 = material.specularColor;
	float f90 = material.specularF90;
	float roughness = material.roughness;
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	#ifdef USE_IRIDESCENCE
		F = mix( F, material.iridescenceFresnel, material.iridescence );
	#endif
	#ifdef USE_ANISOTROPY
		float dotTL = dot( material.anisotropyT, lightDir );
		float dotTV = dot( material.anisotropyT, viewDir );
		float dotTH = dot( material.anisotropyT, halfDir );
		float dotBL = dot( material.anisotropyB, lightDir );
		float dotBV = dot( material.anisotropyB, viewDir );
		float dotBH = dot( material.anisotropyB, halfDir );
		float V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );
		float D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );
	#else
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
	#endif
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometryNormal;
		vec3 viewDir = geometryViewDir;
		vec3 position = geometryPosition;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );
	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometryViewDir, geometryNormal, material );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,Rte=`
vec3 geometryPosition = - vViewPosition;
vec3 geometryNormal = normal;
vec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
vec3 geometryClearcoatNormal = vec3( 0.0 );
#ifdef USE_CLEARCOAT
	geometryClearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometryViewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometryPosition, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowIntensity, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometryPosition, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowIntensity, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowIntensity, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	#if defined( USE_LIGHT_PROBES )
		irradiance += getLightProbeIrradiance( lightProbe, geometryNormal );
	#endif
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,Nte=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometryNormal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	#ifdef USE_ANISOTROPY
		radiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );
	#else
		radiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );
	#endif
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,Dte=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif`,Lte=`#if defined( USE_LOGDEPTHBUF )
	gl_FragDepth = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,kte=`#if defined( USE_LOGDEPTHBUF )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,Ote=`#ifdef USE_LOGDEPTHBUF
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,Ute=`#ifdef USE_LOGDEPTHBUF
	vFragDepth = 1.0 + gl_Position.w;
	vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
#endif`,jte=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vMapUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = sRGBTransferEOTF( sampledDiffuseColor );
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,Fte=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,Vte=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	#if defined( USE_POINTS_UV )
		vec2 uv = vUv;
	#else
		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	#endif
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,Bte=`#if defined( USE_POINTS_UV )
	varying vec2 vUv;
#else
	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
		uniform mat3 uvTransform;
	#endif
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,zte=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
	metalnessFactor *= texelMetalness.b;
#endif`,Hte=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,Gte=`#ifdef USE_INSTANCING_MORPH
	float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	float morphTargetBaseInfluence = texelFetch( morphTexture, ivec2( 0, gl_InstanceID ), 0 ).r;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		morphTargetInfluences[i] =  texelFetch( morphTexture, ivec2( i + 1, gl_InstanceID ), 0 ).r;
	}
#endif`,Wte=`#if defined( USE_MORPHCOLORS )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,qte=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,$te=`#ifdef USE_MORPHTARGETS
	#ifndef USE_INSTANCING_MORPH
		uniform float morphTargetBaseInfluence;
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	#endif
	uniform sampler2DArray morphTargetsTexture;
	uniform ivec2 morphTargetsTextureSize;
	vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
		int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
		int y = texelIndex / morphTargetsTextureSize.x;
		int x = texelIndex - y * morphTargetsTextureSize.x;
		ivec3 morphUV = ivec3( x, y, morphTargetIndex );
		return texelFetch( morphTargetsTexture, morphUV, 0 );
	}
#endif`,Xte=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,Kte=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal *= faceDirection;
	#endif
#endif
#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )
	#ifdef USE_TANGENT
		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn = getTangentFrame( - vViewPosition, normal,
		#if defined( USE_NORMALMAP )
			vNormalMapUv
		#elif defined( USE_CLEARCOAT_NORMALMAP )
			vClearcoatNormalMapUv
		#else
			vUv
		#endif
		);
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn[0] *= faceDirection;
		tbn[1] *= faceDirection;
	#endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	#ifdef USE_TANGENT
		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn2[0] *= faceDirection;
		tbn2[1] *= faceDirection;
	#endif
#endif
vec3 nonPerturbedNormal = normal;`,Yte=`#ifdef USE_NORMALMAP_OBJECTSPACE
	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( USE_NORMALMAP_TANGENTSPACE )
	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	normal = normalize( tbn * mapN );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,Jte=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,Qte=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,Zte=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,ene=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )
	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( uv.st );
		vec2 st1 = dFdy( uv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
		return mat3( T * scale, B * scale, N );
	}
#endif`,tne=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = nonPerturbedNormal;
#endif`,nne=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	clearcoatNormal = normalize( tbn2 * clearcoatMapN );
#endif`,ine=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif`,rne=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,sne=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,one=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;const float ShiftRight8 = 1. / 256.;
const float Inv255 = 1. / 255.;
const vec4 PackFactors = vec4( 1.0, 256.0, 256.0 * 256.0, 256.0 * 256.0 * 256.0 );
const vec2 UnpackFactors2 = vec2( UnpackDownscale, 1.0 / PackFactors.g );
const vec3 UnpackFactors3 = vec3( UnpackDownscale / PackFactors.rg, 1.0 / PackFactors.b );
const vec4 UnpackFactors4 = vec4( UnpackDownscale / PackFactors.rgb, 1.0 / PackFactors.a );
vec4 packDepthToRGBA( const in float v ) {
	if( v <= 0.0 )
		return vec4( 0., 0., 0., 0. );
	if( v >= 1.0 )
		return vec4( 1., 1., 1., 1. );
	float vuf;
	float af = modf( v * PackFactors.a, vuf );
	float bf = modf( vuf * ShiftRight8, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec4( vuf * Inv255, gf * PackUpscale, bf * PackUpscale, af );
}
vec3 packDepthToRGB( const in float v ) {
	if( v <= 0.0 )
		return vec3( 0., 0., 0. );
	if( v >= 1.0 )
		return vec3( 1., 1., 1. );
	float vuf;
	float bf = modf( v * PackFactors.b, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec3( vuf * Inv255, gf * PackUpscale, bf );
}
vec2 packDepthToRG( const in float v ) {
	if( v <= 0.0 )
		return vec2( 0., 0. );
	if( v >= 1.0 )
		return vec2( 1., 1. );
	float vuf;
	float gf = modf( v * 256., vuf );
	return vec2( vuf * Inv255, gf );
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors4 );
}
float unpackRGBToDepth( const in vec3 v ) {
	return dot( v, UnpackFactors3 );
}
float unpackRGToDepth( const in vec2 v ) {
	return v.r * UnpackFactors2.r + v.g * UnpackFactors2.g;
}
vec4 pack2HalfToRGBA( const in vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( const in vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return depth * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * depth - far );
}`,ane=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,lne=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_BATCHING
	mvPosition = batchingMatrix * mvPosition;
#endif
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,cne=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,une=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,hne=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
	roughnessFactor *= texelRoughness.g;
#endif`,dne=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,fne=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		return step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		float hard_shadow = step( compare , distribution.x );
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		float shadow = 1.0;
		vec3 lightToPosition = shadowCoord.xyz;
		
		float lightToPositionLength = length( lightToPosition );
		if ( lightToPositionLength - shadowCameraFar <= 0.0 && lightToPositionLength - shadowCameraNear >= 0.0 ) {
			float dp = ( lightToPositionLength - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );			dp += shadowBias;
			vec3 bd3D = normalize( lightToPosition );
			vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
			#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
				vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
				shadow = (
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
				) * ( 1.0 / 9.0 );
			#else
				shadow = texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
			#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
#endif`,pne=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,mne=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,gne=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowIntensity, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowIntensity, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowIntensity, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,yne=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,vne=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	mat4 getBoneMatrix( const in float i ) {
		int size = textureSize( boneTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif`,xne=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,_ne=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,wne=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,bne=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,Sne=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,Tne=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return saturate( toneMappingExposure * color );
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 CineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
const mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(
	vec3( 1.6605, - 0.1246, - 0.0182 ),
	vec3( - 0.5876, 1.1329, - 0.1006 ),
	vec3( - 0.0728, - 0.0083, 1.1187 )
);
const mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(
	vec3( 0.6274, 0.0691, 0.0164 ),
	vec3( 0.3293, 0.9195, 0.0880 ),
	vec3( 0.0433, 0.0113, 0.8956 )
);
vec3 agxDefaultContrastApprox( vec3 x ) {
	vec3 x2 = x * x;
	vec3 x4 = x2 * x2;
	return + 15.5 * x4 * x2
		- 40.14 * x4 * x
		+ 31.96 * x4
		- 6.868 * x2 * x
		+ 0.4298 * x2
		+ 0.1191 * x
		- 0.00232;
}
vec3 AgXToneMapping( vec3 color ) {
	const mat3 AgXInsetMatrix = mat3(
		vec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),
		vec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),
		vec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )
	);
	const mat3 AgXOutsetMatrix = mat3(
		vec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),
		vec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),
		vec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )
	);
	const float AgxMinEv = - 12.47393;	const float AgxMaxEv = 4.026069;
	color *= toneMappingExposure;
	color = LINEAR_SRGB_TO_LINEAR_REC2020 * color;
	color = AgXInsetMatrix * color;
	color = max( color, 1e-10 );	color = log2( color );
	color = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );
	color = clamp( color, 0.0, 1.0 );
	color = agxDefaultContrastApprox( color );
	color = AgXOutsetMatrix * color;
	color = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );
	color = LINEAR_REC2020_TO_LINEAR_SRGB * color;
	color = clamp( color, 0.0, 1.0 );
	return color;
}
vec3 NeutralToneMapping( vec3 color ) {
	const float StartCompression = 0.8 - 0.04;
	const float Desaturation = 0.15;
	color *= toneMappingExposure;
	float x = min( color.r, min( color.g, color.b ) );
	float offset = x < 0.08 ? x - 6.25 * x * x : 0.04;
	color -= offset;
	float peak = max( color.r, max( color.g, color.b ) );
	if ( peak < StartCompression ) return color;
	float d = 1. - StartCompression;
	float newPeak = 1. - d * d / ( peak + d - StartCompression );
	color *= newPeak / peak;
	float g = 1. - 1. / ( Desaturation * ( peak - newPeak ) + 1. );
	return mix( color, vec3( newPeak ), g );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,Ene=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmitted = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.dispersion, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );
#endif`,Cne=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return vec3( 1.0 );
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float dispersion, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec4 transmittedLight;
		vec3 transmittance;
		#ifdef USE_DISPERSION
			float halfSpread = ( ior - 1.0 ) * 0.025 * dispersion;
			vec3 iors = vec3( ior - halfSpread, ior, ior + halfSpread );
			for ( int i = 0; i < 3; i ++ ) {
				vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, iors[ i ], modelMatrix );
				vec3 refractedRayExit = position + transmissionRay;
				vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
				vec2 refractionCoords = ndcPos.xy / ndcPos.w;
				refractionCoords += 1.0;
				refractionCoords /= 2.0;
				vec4 transmissionSample = getTransmissionSample( refractionCoords, roughness, iors[ i ] );
				transmittedLight[ i ] = transmissionSample[ i ];
				transmittedLight.a += transmissionSample.a;
				transmittance[ i ] = diffuseColor[ i ] * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance )[ i ];
			}
			transmittedLight.a /= 3.0;
		#else
			vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
			vec3 refractedRayExit = position + transmissionRay;
			vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
			vec2 refractionCoords = ndcPos.xy / ndcPos.w;
			refractionCoords += 1.0;
			refractionCoords /= 2.0;
			transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
			transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );
		#endif
		vec3 attenuatedColor = transmittance * transmittedLight.rgb;
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		float transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;
		return vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );
	}
#endif`,Ane=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_SPECULARMAP
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,Mne=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	uniform mat3 mapTransform;
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	uniform mat3 alphaMapTransform;
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	uniform mat3 lightMapTransform;
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	uniform mat3 aoMapTransform;
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	uniform mat3 bumpMapTransform;
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	uniform mat3 normalMapTransform;
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_DISPLACEMENTMAP
	uniform mat3 displacementMapTransform;
	varying vec2 vDisplacementMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	uniform mat3 emissiveMapTransform;
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	uniform mat3 metalnessMapTransform;
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	uniform mat3 roughnessMapTransform;
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	uniform mat3 anisotropyMapTransform;
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	uniform mat3 clearcoatMapTransform;
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform mat3 clearcoatNormalMapTransform;
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform mat3 clearcoatRoughnessMapTransform;
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	uniform mat3 sheenColorMapTransform;
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	uniform mat3 sheenRoughnessMapTransform;
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	uniform mat3 iridescenceMapTransform;
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform mat3 iridescenceThicknessMapTransform;
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SPECULARMAP
	uniform mat3 specularMapTransform;
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	uniform mat3 specularColorMapTransform;
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	uniform mat3 specularIntensityMapTransform;
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,Ine=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	vUv = vec3( uv, 1 ).xy;
#endif
#ifdef USE_MAP
	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ANISOTROPYMAP
	vAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
#endif`,Pne=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_BATCHING
		worldPosition = batchingMatrix * worldPosition;
	#endif
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const Rne=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,Nne=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,Dne=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,Lne=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
uniform mat3 backgroundRotation;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, backgroundRotation * vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, backgroundRotation * vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,kne=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,One=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,Une=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,jne=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <logdepthbuf_fragment>
	float fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#elif DEPTH_PACKING == 3202
		gl_FragColor = vec4( packDepthToRGB( fragCoordZ ), 1.0 );
	#elif DEPTH_PACKING == 3203
		gl_FragColor = vec4( packDepthToRG( fragCoordZ ), 0.0, 1.0 );
	#endif
}`,Fne=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,Vne=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,Bne=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,zne=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,Hne=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,Gne=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,Wne=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,qne=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,$ne=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,Xne=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Kne=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,Yne=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Jne=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	vViewPosition = - mvPosition.xyz;
#endif
}`,Qne=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( 0.0, 0.0, 0.0, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), diffuseColor.a );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,Zne=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,eie=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,tie=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,nie=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define USE_SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef USE_SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULAR_COLORMAP
		uniform sampler2D specularColorMap;
	#endif
	#ifdef USE_SPECULAR_INTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_DISPERSION
	uniform float dispersion;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEEN_COLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEEN_ROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
#ifdef USE_ANISOTROPY
	uniform vec2 anisotropyVector;
	#ifdef USE_ANISOTROPYMAP
		uniform sampler2D anisotropyMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;
	#endif
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,iie=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,rie=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,sie=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
#ifdef USE_POINTS_UV
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif
void main() {
	#ifdef USE_POINTS_UV
		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	#endif
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,oie=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,aie=`#include <common>
#include <batching_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,lie=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,cie=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix[ 3 ];
	vec2 scale = vec2( length( modelMatrix[ 0 ].xyz ), length( modelMatrix[ 1 ].xyz ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,uie=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,$t={alphahash_fragment:Nee,alphahash_pars_fragment:Dee,alphamap_fragment:Lee,alphamap_pars_fragment:kee,alphatest_fragment:Oee,alphatest_pars_fragment:Uee,aomap_fragment:jee,aomap_pars_fragment:Fee,batching_pars_vertex:Vee,batching_vertex:Bee,begin_vertex:zee,beginnormal_vertex:Hee,bsdfs:Gee,iridescence_fragment:Wee,bumpmap_pars_fragment:qee,clipping_planes_fragment:$ee,clipping_planes_pars_fragment:Xee,clipping_planes_pars_vertex:Kee,clipping_planes_vertex:Yee,color_fragment:Jee,color_pars_fragment:Qee,color_pars_vertex:Zee,color_vertex:ete,common:tte,cube_uv_reflection_fragment:nte,defaultnormal_vertex:ite,displacementmap_pars_vertex:rte,displacementmap_vertex:ste,emissivemap_fragment:ote,emissivemap_pars_fragment:ate,colorspace_fragment:lte,colorspace_pars_fragment:cte,envmap_fragment:ute,envmap_common_pars_fragment:hte,envmap_pars_fragment:dte,envmap_pars_vertex:fte,envmap_physical_pars_fragment:Tte,envmap_vertex:pte,fog_vertex:mte,fog_pars_vertex:gte,fog_fragment:yte,fog_pars_fragment:vte,gradientmap_pars_fragment:xte,lightmap_pars_fragment:_te,lights_lambert_fragment:wte,lights_lambert_pars_fragment:bte,lights_pars_begin:Ste,lights_toon_fragment:Ete,lights_toon_pars_fragment:Cte,lights_phong_fragment:Ate,lights_phong_pars_fragment:Mte,lights_physical_fragment:Ite,lights_physical_pars_fragment:Pte,lights_fragment_begin:Rte,lights_fragment_maps:Nte,lights_fragment_end:Dte,logdepthbuf_fragment:Lte,logdepthbuf_pars_fragment:kte,logdepthbuf_pars_vertex:Ote,logdepthbuf_vertex:Ute,map_fragment:jte,map_pars_fragment:Fte,map_particle_fragment:Vte,map_particle_pars_fragment:Bte,metalnessmap_fragment:zte,metalnessmap_pars_fragment:Hte,morphinstance_vertex:Gte,morphcolor_vertex:Wte,morphnormal_vertex:qte,morphtarget_pars_vertex:$te,morphtarget_vertex:Xte,normal_fragment_begin:Kte,normal_fragment_maps:Yte,normal_pars_fragment:Jte,normal_pars_vertex:Qte,normal_vertex:Zte,normalmap_pars_fragment:ene,clearcoat_normal_fragment_begin:tne,clearcoat_normal_fragment_maps:nne,clearcoat_pars_fragment:ine,iridescence_pars_fragment:rne,opaque_fragment:sne,packing:one,premultiplied_alpha_fragment:ane,project_vertex:lne,dithering_fragment:cne,dithering_pars_fragment:une,roughnessmap_fragment:hne,roughnessmap_pars_fragment:dne,shadowmap_pars_fragment:fne,shadowmap_pars_vertex:pne,shadowmap_vertex:mne,shadowmask_pars_fragment:gne,skinbase_vertex:yne,skinning_pars_vertex:vne,skinning_vertex:xne,skinnormal_vertex:_ne,specularmap_fragment:wne,specularmap_pars_fragment:bne,tonemapping_fragment:Sne,tonemapping_pars_fragment:Tne,transmission_fragment:Ene,transmission_pars_fragment:Cne,uv_pars_fragment:Ane,uv_pars_vertex:Mne,uv_vertex:Ine,worldpos_vertex:Pne,background_vert:Rne,background_frag:Nne,backgroundCube_vert:Dne,backgroundCube_frag:Lne,cube_vert:kne,cube_frag:One,depth_vert:Une,depth_frag:jne,distanceRGBA_vert:Fne,distanceRGBA_frag:Vne,equirect_vert:Bne,equirect_frag:zne,linedashed_vert:Hne,linedashed_frag:Gne,meshbasic_vert:Wne,meshbasic_frag:qne,meshlambert_vert:$ne,meshlambert_frag:Xne,meshmatcap_vert:Kne,meshmatcap_frag:Yne,meshnormal_vert:Jne,meshnormal_frag:Qne,meshphong_vert:Zne,meshphong_frag:eie,meshphysical_vert:tie,meshphysical_frag:nie,meshtoon_vert:iie,meshtoon_frag:rie,points_vert:sie,points_frag:oie,shadow_vert:aie,shadow_frag:lie,sprite_vert:cie,sprite_frag:uie},Xe={common:{diffuse:{value:new st(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new Bt},alphaMap:{value:null},alphaMapTransform:{value:new Bt},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new Bt}},envmap:{envMap:{value:null},envMapRotation:{value:new Bt},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new Bt}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new Bt}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new Bt},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new Bt},normalScale:{value:new Ie(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new Bt},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new Bt}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new Bt}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new Bt}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new st(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new st(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new Bt},alphaTest:{value:0},uvTransform:{value:new Bt}},sprite:{diffuse:{value:new st(16777215)},opacity:{value:1},center:{value:new Ie(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new Bt},alphaMap:{value:null},alphaMapTransform:{value:new Bt},alphaTest:{value:0}}},co={basic:{uniforms:Pr([Xe.common,Xe.specularmap,Xe.envmap,Xe.aomap,Xe.lightmap,Xe.fog]),vertexShader:$t.meshbasic_vert,fragmentShader:$t.meshbasic_frag},lambert:{uniforms:Pr([Xe.common,Xe.specularmap,Xe.envmap,Xe.aomap,Xe.lightmap,Xe.emissivemap,Xe.bumpmap,Xe.normalmap,Xe.displacementmap,Xe.fog,Xe.lights,{emissive:{value:new st(0)}}]),vertexShader:$t.meshlambert_vert,fragmentShader:$t.meshlambert_frag},phong:{uniforms:Pr([Xe.common,Xe.specularmap,Xe.envmap,Xe.aomap,Xe.lightmap,Xe.emissivemap,Xe.bumpmap,Xe.normalmap,Xe.displacementmap,Xe.fog,Xe.lights,{emissive:{value:new st(0)},specular:{value:new st(1118481)},shininess:{value:30}}]),vertexShader:$t.meshphong_vert,fragmentShader:$t.meshphong_frag},standard:{uniforms:Pr([Xe.common,Xe.envmap,Xe.aomap,Xe.lightmap,Xe.emissivemap,Xe.bumpmap,Xe.normalmap,Xe.displacementmap,Xe.roughnessmap,Xe.metalnessmap,Xe.fog,Xe.lights,{emissive:{value:new st(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:$t.meshphysical_vert,fragmentShader:$t.meshphysical_frag},toon:{uniforms:Pr([Xe.common,Xe.aomap,Xe.lightmap,Xe.emissivemap,Xe.bumpmap,Xe.normalmap,Xe.displacementmap,Xe.gradientmap,Xe.fog,Xe.lights,{emissive:{value:new st(0)}}]),vertexShader:$t.meshtoon_vert,fragmentShader:$t.meshtoon_frag},matcap:{uniforms:Pr([Xe.common,Xe.bumpmap,Xe.normalmap,Xe.displacementmap,Xe.fog,{matcap:{value:null}}]),vertexShader:$t.meshmatcap_vert,fragmentShader:$t.meshmatcap_frag},points:{uniforms:Pr([Xe.points,Xe.fog]),vertexShader:$t.points_vert,fragmentShader:$t.points_frag},dashed:{uniforms:Pr([Xe.common,Xe.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:$t.linedashed_vert,fragmentShader:$t.linedashed_frag},depth:{uniforms:Pr([Xe.common,Xe.displacementmap]),vertexShader:$t.depth_vert,fragmentShader:$t.depth_frag},normal:{uniforms:Pr([Xe.common,Xe.bumpmap,Xe.normalmap,Xe.displacementmap,{opacity:{value:1}}]),vertexShader:$t.meshnormal_vert,fragmentShader:$t.meshnormal_frag},sprite:{uniforms:Pr([Xe.sprite,Xe.fog]),vertexShader:$t.sprite_vert,fragmentShader:$t.sprite_frag},background:{uniforms:{uvTransform:{value:new Bt},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:$t.background_vert,fragmentShader:$t.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1},backgroundRotation:{value:new Bt}},vertexShader:$t.backgroundCube_vert,fragmentShader:$t.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:$t.cube_vert,fragmentShader:$t.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:$t.equirect_vert,fragmentShader:$t.equirect_frag},distanceRGBA:{uniforms:Pr([Xe.common,Xe.displacementmap,{referencePosition:{value:new K},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:$t.distanceRGBA_vert,fragmentShader:$t.distanceRGBA_frag},shadow:{uniforms:Pr([Xe.lights,Xe.fog,{color:{value:new st(0)},opacity:{value:1}}]),vertexShader:$t.shadow_vert,fragmentShader:$t.shadow_frag}};co.physical={uniforms:Pr([co.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new Bt},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new Bt},clearcoatNormalScale:{value:new Ie(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new Bt},dispersion:{value:0},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new Bt},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new Bt},sheen:{value:0},sheenColor:{value:new st(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new Bt},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new Bt},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new Bt},transmissionSamplerSize:{value:new Ie},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new Bt},attenuationDistance:{value:0},attenuationColor:{value:new st(0)},specularColor:{value:new st(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new Bt},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new Bt},anisotropyVector:{value:new Ie},anisotropyMap:{value:null},anisotropyMapTransform:{value:new Bt}}]),vertexShader:$t.meshphysical_vert,fragmentShader:$t.meshphysical_frag};const Jv={r:0,b:0,g:0},eu=new Ss,hie=new At;function die(n,e,t,i,r,s,o){const a=new st(0);let l=s===!0?0:1,c,u,p=null,m=0,g=null;function x(E){let C=E.isScene===!0?E.background:null;return C&&C.isTexture&&(C=(E.backgroundBlurriness>0?t:e).get(C)),C}function b(E){let C=!1;const U=x(E);U===null?v(a,l):U&&U.isColor&&(v(U,1),C=!0);const O=n.xr.getEnvironmentBlendMode();O==="additive"?i.buffers.color.setClear(0,0,0,1,o):O==="alpha-blend"&&i.buffers.color.setClear(0,0,0,0,o),(n.autoClear||C)&&(i.buffers.depth.setTest(!0),i.buffers.depth.setMask(!0),i.buffers.color.setMask(!0),n.clear(n.autoClearColor,n.autoClearDepth,n.autoClearStencil))}function w(E,C){const U=x(C);U&&(U.isCubeTexture||U.mapping===Sf)?(u===void 0&&(u=new _i(new th(1,1,1),new _o({name:"BackgroundCubeMaterial",uniforms:of(co.backgroundCube.uniforms),vertexShader:co.backgroundCube.vertexShader,fragmentShader:co.backgroundCube.fragmentShader,side:Lr,depthTest:!1,depthWrite:!1,fog:!1})),u.geometry.deleteAttribute("normal"),u.geometry.deleteAttribute("uv"),u.onBeforeRender=function(O,N,P){this.matrixWorld.copyPosition(P.matrixWorld)},Object.defineProperty(u.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),r.update(u)),eu.copy(C.backgroundRotation),eu.x*=-1,eu.y*=-1,eu.z*=-1,U.isCubeTexture&&U.isRenderTargetTexture===!1&&(eu.y*=-1,eu.z*=-1),u.material.uniforms.envMap.value=U,u.material.uniforms.flipEnvMap.value=U.isCubeTexture&&U.isRenderTargetTexture===!1?-1:1,u.material.uniforms.backgroundBlurriness.value=C.backgroundBlurriness,u.material.uniforms.backgroundIntensity.value=C.backgroundIntensity,u.material.uniforms.backgroundRotation.value.setFromMatrix4(hie.makeRotationFromEuler(eu)),u.material.toneMapped=dn.getTransfer(U.colorSpace)!==An,(p!==U||m!==U.version||g!==n.toneMapping)&&(u.material.needsUpdate=!0,p=U,m=U.version,g=n.toneMapping),u.layers.enableAll(),E.unshift(u,u.geometry,u.material,0,0,null)):U&&U.isTexture&&(c===void 0&&(c=new _i(new Af(2,2),new _o({name:"BackgroundMaterial",uniforms:of(co.background.uniforms),vertexShader:co.background.vertexShader,fragmentShader:co.background.fragmentShader,side:Oa,depthTest:!1,depthWrite:!1,fog:!1})),c.geometry.deleteAttribute("normal"),Object.defineProperty(c.material,"map",{get:function(){return this.uniforms.t2D.value}}),r.update(c)),c.material.uniforms.t2D.value=U,c.material.uniforms.backgroundIntensity.value=C.backgroundIntensity,c.material.toneMapped=dn.getTransfer(U.colorSpace)!==An,U.matrixAutoUpdate===!0&&U.updateMatrix(),c.material.uniforms.uvTransform.value.copy(U.matrix),(p!==U||m!==U.version||g!==n.toneMapping)&&(c.material.needsUpdate=!0,p=U,m=U.version,g=n.toneMapping),c.layers.enableAll(),E.unshift(c,c.geometry,c.material,0,0,null))}function v(E,C){E.getRGB(Jv,w4(n)),i.buffers.color.setClear(Jv.r,Jv.g,Jv.b,C,o)}function S(){u!==void 0&&(u.geometry.dispose(),u.material.dispose(),u=void 0),c!==void 0&&(c.geometry.dispose(),c.material.dispose(),c=void 0)}return{getClearColor:function(){return a},setClearColor:function(E,C=1){a.set(E),l=C,v(a,l)},getClearAlpha:function(){return l},setClearAlpha:function(E){l=E,v(a,l)},render:b,addToRenderList:w,dispose:S}}function fie(n,e){const t=n.getParameter(n.MAX_VERTEX_ATTRIBS),i={},r=m(null);let s=r,o=!1;function a(M,D,z,F,re){let le=!1;const he=p(F,z,D);s!==he&&(s=he,c(s.object)),le=g(M,F,z,re),le&&x(M,F,z,re),re!==null&&e.update(re,n.ELEMENT_ARRAY_BUFFER),(le||o)&&(o=!1,C(M,D,z,F),re!==null&&n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,e.get(re).buffer))}function l(){return n.createVertexArray()}function c(M){return n.bindVertexArray(M)}function u(M){return n.deleteVertexArray(M)}function p(M,D,z){const F=z.wireframe===!0;let re=i[M.id];re===void 0&&(re={},i[M.id]=re);let le=re[D.id];le===void 0&&(le={},re[D.id]=le);let he=le[F];return he===void 0&&(he=m(l()),le[F]=he),he}function m(M){const D=[],z=[],F=[];for(let re=0;re<t;re++)D[re]=0,z[re]=0,F[re]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:D,enabledAttributes:z,attributeDivisors:F,object:M,attributes:{},index:null}}function g(M,D,z,F){const re=s.attributes,le=D.attributes;let he=0;const ue=z.getAttributes();for(const q in ue)if(ue[q].location>=0){const j=re[q];let J=le[q];if(J===void 0&&(q==="instanceMatrix"&&M.instanceMatrix&&(J=M.instanceMatrix),q==="instanceColor"&&M.instanceColor&&(J=M.instanceColor)),j===void 0||j.attribute!==J||J&&j.data!==J.data)return!0;he++}return s.attributesNum!==he||s.index!==F}function x(M,D,z,F){const re={},le=D.attributes;let he=0;const ue=z.getAttributes();for(const q in ue)if(ue[q].location>=0){let j=le[q];j===void 0&&(q==="instanceMatrix"&&M.instanceMatrix&&(j=M.instanceMatrix),q==="instanceColor"&&M.instanceColor&&(j=M.instanceColor));const J={};J.attribute=j,j&&j.data&&(J.data=j.data),re[q]=J,he++}s.attributes=re,s.attributesNum=he,s.index=F}function b(){const M=s.newAttributes;for(let D=0,z=M.length;D<z;D++)M[D]=0}function w(M){v(M,0)}function v(M,D){const z=s.newAttributes,F=s.enabledAttributes,re=s.attributeDivisors;z[M]=1,F[M]===0&&(n.enableVertexAttribArray(M),F[M]=1),re[M]!==D&&(n.vertexAttribDivisor(M,D),re[M]=D)}function S(){const M=s.newAttributes,D=s.enabledAttributes;for(let z=0,F=D.length;z<F;z++)D[z]!==M[z]&&(n.disableVertexAttribArray(z),D[z]=0)}function E(M,D,z,F,re,le,he){he===!0?n.vertexAttribIPointer(M,D,z,re,le):n.vertexAttribPointer(M,D,z,F,re,le)}function C(M,D,z,F){b();const re=F.attributes,le=z.getAttributes(),he=D.defaultAttributeValues;for(const ue in le){const q=le[ue];if(q.location>=0){let Q=re[ue];if(Q===void 0&&(ue==="instanceMatrix"&&M.instanceMatrix&&(Q=M.instanceMatrix),ue==="instanceColor"&&M.instanceColor&&(Q=M.instanceColor)),Q!==void 0){const j=Q.normalized,J=Q.itemSize,ce=e.get(Q);if(ce===void 0)continue;const me=ce.buffer,oe=ce.type,ye=ce.bytesPerElement,Re=oe===n.INT||oe===n.UNSIGNED_INT||Q.gpuType===vw;if(Q.isInterleavedBufferAttribute){const Me=Q.data,ht=Me.stride,zt=Q.offset;if(Me.isInstancedInterleavedBuffer){for(let Ge=0;Ge<q.locationSize;Ge++)v(q.location+Ge,Me.meshPerAttribute);M.isInstancedMesh!==!0&&F._maxInstanceCount===void 0&&(F._maxInstanceCount=Me.meshPerAttribute*Me.count)}else for(let Ge=0;Ge<q.locationSize;Ge++)w(q.location+Ge);n.bindBuffer(n.ARRAY_BUFFER,me);for(let Ge=0;Ge<q.locationSize;Ge++)E(q.location+Ge,J/q.locationSize,oe,j,ht*ye,(zt+J/q.locationSize*Ge)*ye,Re)}else{if(Q.isInstancedBufferAttribute){for(let Me=0;Me<q.locationSize;Me++)v(q.location+Me,Q.meshPerAttribute);M.isInstancedMesh!==!0&&F._maxInstanceCount===void 0&&(F._maxInstanceCount=Q.meshPerAttribute*Q.count)}else for(let Me=0;Me<q.locationSize;Me++)w(q.location+Me);n.bindBuffer(n.ARRAY_BUFFER,me);for(let Me=0;Me<q.locationSize;Me++)E(q.location+Me,J/q.locationSize,oe,j,J*ye,J/q.locationSize*Me*ye,Re)}}else if(he!==void 0){const j=he[ue];if(j!==void 0)switch(j.length){case 2:n.vertexAttrib2fv(q.location,j);break;case 3:n.vertexAttrib3fv(q.location,j);break;case 4:n.vertexAttrib4fv(q.location,j);break;default:n.vertexAttrib1fv(q.location,j)}}}}S()}function U(){P();for(const M in i){const D=i[M];for(const z in D){const F=D[z];for(const re in F)u(F[re].object),delete F[re];delete D[z]}delete i[M]}}function O(M){if(i[M.id]===void 0)return;const D=i[M.id];for(const z in D){const F=D[z];for(const re in F)u(F[re].object),delete F[re];delete D[z]}delete i[M.id]}function N(M){for(const D in i){const z=i[D];if(z[M.id]===void 0)continue;const F=z[M.id];for(const re in F)u(F[re].object),delete F[re];delete z[M.id]}}function P(){A(),o=!0,s!==r&&(s=r,c(s.object))}function A(){r.geometry=null,r.program=null,r.wireframe=!1}return{setup:a,reset:P,resetDefaultState:A,dispose:U,releaseStatesOfGeometry:O,releaseStatesOfProgram:N,initAttributes:b,enableAttribute:w,disableUnusedAttributes:S}}function pie(n,e,t){let i;function r(c){i=c}function s(c,u){n.drawArrays(i,c,u),t.update(u,i,1)}function o(c,u,p){p!==0&&(n.drawArraysInstanced(i,c,u,p),t.update(u,i,p))}function a(c,u,p){if(p===0)return;e.get("WEBGL_multi_draw").multiDrawArraysWEBGL(i,c,0,u,0,p);let g=0;for(let x=0;x<p;x++)g+=u[x];t.update(g,i,1)}function l(c,u,p,m){if(p===0)return;const g=e.get("WEBGL_multi_draw");if(g===null)for(let x=0;x<c.length;x++)o(c[x],u[x],m[x]);else{g.multiDrawArraysInstancedWEBGL(i,c,0,u,0,m,0,p);let x=0;for(let b=0;b<p;b++)x+=u[b]*m[b];t.update(x,i,1)}}this.setMode=r,this.render=s,this.renderInstances=o,this.renderMultiDraw=a,this.renderMultiDrawInstances=l}function mie(n,e,t,i){let r;function s(){if(r!==void 0)return r;if(e.has("EXT_texture_filter_anisotropic")===!0){const N=e.get("EXT_texture_filter_anisotropic");r=n.getParameter(N.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else r=0;return r}function o(N){return!(N!==gr&&i.convert(N)!==n.getParameter(n.IMPLEMENTATION_COLOR_READ_FORMAT))}function a(N){const P=N===Tf&&(e.has("EXT_color_buffer_half_float")||e.has("EXT_color_buffer_float"));return!(N!==xo&&i.convert(N)!==n.getParameter(n.IMPLEMENTATION_COLOR_READ_TYPE)&&N!==Qr&&!P)}function l(N){if(N==="highp"){if(n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.HIGH_FLOAT).precision>0&&n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.HIGH_FLOAT).precision>0)return"highp";N="mediump"}return N==="mediump"&&n.getShaderPrecisionFormat(n.VERTEX_SHADER,n.MEDIUM_FLOAT).precision>0&&n.getShaderPrecisionFormat(n.FRAGMENT_SHADER,n.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}let c=t.precision!==void 0?t.precision:"highp";const u=l(c);u!==c&&(console.warn("THREE.WebGLRenderer:",c,"not supported, using",u,"instead."),c=u);const p=t.logarithmicDepthBuffer===!0,m=t.reverseDepthBuffer===!0&&e.has("EXT_clip_control"),g=n.getParameter(n.MAX_TEXTURE_IMAGE_UNITS),x=n.getParameter(n.MAX_VERTEX_TEXTURE_IMAGE_UNITS),b=n.getParameter(n.MAX_TEXTURE_SIZE),w=n.getParameter(n.MAX_CUBE_MAP_TEXTURE_SIZE),v=n.getParameter(n.MAX_VERTEX_ATTRIBS),S=n.getParameter(n.MAX_VERTEX_UNIFORM_VECTORS),E=n.getParameter(n.MAX_VARYING_VECTORS),C=n.getParameter(n.MAX_FRAGMENT_UNIFORM_VECTORS),U=x>0,O=n.getParameter(n.MAX_SAMPLES);return{isWebGL2:!0,getMaxAnisotropy:s,getMaxPrecision:l,textureFormatReadable:o,textureTypeReadable:a,precision:c,logarithmicDepthBuffer:p,reverseDepthBuffer:m,maxTextures:g,maxVertexTextures:x,maxTextureSize:b,maxCubemapSize:w,maxAttributes:v,maxVertexUniforms:S,maxVaryings:E,maxFragmentUniforms:C,vertexTextures:U,maxSamples:O}}function gie(n){const e=this;let t=null,i=0,r=!1,s=!1;const o=new vl,a=new Bt,l={value:null,needsUpdate:!1};this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(p,m){const g=p.length!==0||m||i!==0||r;return r=m,i=p.length,g},this.beginShadows=function(){s=!0,u(null)},this.endShadows=function(){s=!1},this.setGlobalState=function(p,m){t=u(p,m,0)},this.setState=function(p,m,g){const x=p.clippingPlanes,b=p.clipIntersection,w=p.clipShadows,v=n.get(p);if(!r||x===null||x.length===0||s&&!w)s?u(null):c();else{const S=s?0:i,E=S*4;let C=v.clippingState||null;l.value=C,C=u(x,m,E,g);for(let U=0;U!==E;++U)C[U]=t[U];v.clippingState=C,this.numIntersection=b?this.numPlanes:0,this.numPlanes+=S}};function c(){l.value!==t&&(l.value=t,l.needsUpdate=i>0),e.numPlanes=i,e.numIntersection=0}function u(p,m,g,x){const b=p!==null?p.length:0;let w=null;if(b!==0){if(w=l.value,x!==!0||w===null){const v=g+b*4,S=m.matrixWorldInverse;a.getNormalMatrix(S),(w===null||w.length<v)&&(w=new Float32Array(v));for(let E=0,C=g;E!==b;++E,C+=4)o.copy(p[E]).applyMatrix4(S,a),o.normal.toArray(w,C),w[C+3]=o.constant}l.value=w,l.needsUpdate=!0}return e.numPlanes=b,e.numIntersection=0,w}}function yie(n){let e=new WeakMap;function t(o,a){return a===Km?o.mapping=Ua:a===Ym&&(o.mapping=rc),o}function i(o){if(o&&o.isTexture){const a=o.mapping;if(a===Km||a===Ym)if(e.has(o)){const l=e.get(o).texture;return t(l,o.mapping)}else{const l=o.image;if(l&&l.height>0){const c=new uM(l.height);return c.fromEquirectangularTexture(n,o),e.set(o,c),o.addEventListener("dispose",r),t(c.texture,o.mapping)}else return null}}return o}function r(o){const a=o.target;a.removeEventListener("dispose",r);const l=e.get(a);l!==void 0&&(e.delete(a),l.dispose())}function s(){e=new WeakMap}return{get:i,dispose:s}}const Sd=4,aL=[.125,.215,.35,.446,.526,.582],du=20,pT=new rh,lL=new st;let mT=null,gT=0,yT=0,vT=!1;const cu=(1+Math.sqrt(5))/2,Xh=1/cu,cL=[new K(-cu,Xh,0),new K(cu,Xh,0),new K(-Xh,0,cu),new K(Xh,0,cu),new K(0,cu,-Xh),new K(0,cu,Xh),new K(-1,1,-1),new K(1,1,-1),new K(-1,1,1),new K(1,1,1)],vie=new K;class T1{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,i=.1,r=100,s={}){const{size:o=256,position:a=vie}=s;mT=this._renderer.getRenderTarget(),gT=this._renderer.getActiveCubeFace(),yT=this._renderer.getActiveMipmapLevel(),vT=this._renderer.xr.enabled,this._renderer.xr.enabled=!1,this._setSize(o);const l=this._allocateTargets();return l.depthBuffer=!0,this._sceneToCubeUV(e,i,r,l,a),t>0&&this._blur(l,0,0,t),this._applyPMREM(l),this._cleanup(l),l}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=dL(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=hL(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(mT,gT,yT),this._renderer.xr.enabled=vT,e.scissorTest=!1,Qv(e,0,0,e.width,e.height)}_fromTexture(e,t){e.mapping===Ua||e.mapping===rc?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),mT=this._renderer.getRenderTarget(),gT=this._renderer.getActiveCubeFace(),yT=this._renderer.getActiveMipmapLevel(),vT=this._renderer.xr.enabled,this._renderer.xr.enabled=!1;const i=t||this._allocateTargets();return this._textureToCubeUV(e,i),this._applyPMREM(i),this._cleanup(i),i}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,i={magFilter:Mi,minFilter:Mi,generateMipmaps:!1,type:Tf,format:gr,colorSpace:qu,depthBuffer:!1},r=uL(e,t,i);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==t){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=uL(e,t,i);const{_lodMax:s}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=xie(s)),this._blurMaterial=_ie(s,e,t)}return r}_compileMaterial(e){const t=new _i(this._lodPlanes[0],e);this._renderer.compile(t,pT)}_sceneToCubeUV(e,t,i,r,s){const l=new yi(90,1,t,i),c=[1,-1,1,1,1,1],u=[1,1,1,-1,-1,-1],p=this._renderer,m=p.autoClear,g=p.toneMapping;p.getClearColor(lL),p.toneMapping=zo,p.autoClear=!1;const x=new yc({name:"PMREM.Background",side:Lr,depthWrite:!1,depthTest:!1}),b=new _i(new th,x);let w=!1;const v=e.background;v?v.isColor&&(x.color.copy(v),e.background=null,w=!0):(x.color.copy(lL),w=!0);for(let S=0;S<6;S++){const E=S%3;E===0?(l.up.set(0,c[S],0),l.position.set(s.x,s.y,s.z),l.lookAt(s.x+u[S],s.y,s.z)):E===1?(l.up.set(0,0,c[S]),l.position.set(s.x,s.y,s.z),l.lookAt(s.x,s.y+u[S],s.z)):(l.up.set(0,c[S],0),l.position.set(s.x,s.y,s.z),l.lookAt(s.x,s.y,s.z+u[S]));const C=this._cubeSize;Qv(r,E*C,S>2?C:0,C,C),p.setRenderTarget(r),w&&p.render(b,l),p.render(e,l)}b.geometry.dispose(),b.material.dispose(),p.toneMapping=g,p.autoClear=m,e.background=v}_textureToCubeUV(e,t){const i=this._renderer,r=e.mapping===Ua||e.mapping===rc;r?(this._cubemapMaterial===null&&(this._cubemapMaterial=dL()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=hL());const s=r?this._cubemapMaterial:this._equirectMaterial,o=new _i(this._lodPlanes[0],s),a=s.uniforms;a.envMap.value=e;const l=this._cubeSize;Qv(t,0,0,3*l,2*l),i.setRenderTarget(t),i.render(o,pT)}_applyPMREM(e){const t=this._renderer,i=t.autoClear;t.autoClear=!1;const r=this._lodPlanes.length;for(let s=1;s<r;s++){const o=Math.sqrt(this._sigmas[s]*this._sigmas[s]-this._sigmas[s-1]*this._sigmas[s-1]),a=cL[(r-s-1)%cL.length];this._blur(e,s-1,s,o,a)}t.autoClear=i}_blur(e,t,i,r,s){const o=this._pingPongRenderTarget;this._halfBlur(e,o,t,i,r,"latitudinal",s),this._halfBlur(o,e,i,i,r,"longitudinal",s)}_halfBlur(e,t,i,r,s,o,a){const l=this._renderer,c=this._blurMaterial;o!=="latitudinal"&&o!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const u=3,p=new _i(this._lodPlanes[r],c),m=c.uniforms,g=this._sizeLods[i]-1,x=isFinite(s)?Math.PI/(2*g):2*Math.PI/(2*du-1),b=s/x,w=isFinite(s)?1+Math.floor(u*b):du;w>du&&console.warn(`sigmaRadians, ${s}, is too large and will clip, as it requested ${w} samples when the maximum is set to ${du}`);const v=[];let S=0;for(let N=0;N<du;++N){const P=N/b,A=Math.exp(-P*P/2);v.push(A),N===0?S+=A:N<w&&(S+=2*A)}for(let N=0;N<v.length;N++)v[N]=v[N]/S;m.envMap.value=e.texture,m.samples.value=w,m.weights.value=v,m.latitudinal.value=o==="latitudinal",a&&(m.poleAxis.value=a);const{_lodMax:E}=this;m.dTheta.value=x,m.mipInt.value=E-i;const C=this._sizeLods[r],U=3*C*(r>E-Sd?r-E+Sd:0),O=4*(this._cubeSize-C);Qv(t,U,O,3*C,2*C),l.setRenderTarget(t),l.render(p,pT)}}function xie(n){const e=[],t=[],i=[];let r=n;const s=n-Sd+1+aL.length;for(let o=0;o<s;o++){const a=Math.pow(2,r);t.push(a);let l=1/a;o>n-Sd?l=aL[o-n+Sd-1]:o===0&&(l=0),i.push(l);const c=1/(a-2),u=-c,p=1+c,m=[u,u,p,u,p,p,u,u,p,p,u,p],g=6,x=6,b=3,w=2,v=1,S=new Float32Array(b*x*g),E=new Float32Array(w*x*g),C=new Float32Array(v*x*g);for(let O=0;O<g;O++){const N=O%3*2/3-1,P=O>2?0:-1,A=[N,P,0,N+2/3,P,0,N+2/3,P+1,0,N,P,0,N+2/3,P+1,0,N,P+1,0];S.set(A,b*x*O),E.set(m,w*x*O);const M=[O,O,O,O,O,O];C.set(M,v*x*O)}const U=new Xt;U.setAttribute("position",new In(S,b)),U.setAttribute("uv",new In(E,w)),U.setAttribute("faceIndex",new In(C,v)),e.push(U),r>Sd&&r--}return{lodPlanes:e,sizeLods:t,sigmas:i}}function uL(n,e,t){const i=new Xo(n,e,t);return i.texture.mapping=Sf,i.texture.name="PMREM.cubeUv",i.scissorTest=!0,i}function Qv(n,e,t,i,r){n.viewport.set(e,t,i,r),n.scissor.set(e,t,i,r)}function _ie(n,e,t){const i=new Float32Array(du),r=new K(0,1,0);return new _o({name:"SphericalGaussianBlur",defines:{n:du,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/t,CUBEUV_MAX_MIP:`${n}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:i},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:r}},vertexShader:kM(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:Ta,depthTest:!1,depthWrite:!1})}function hL(){return new _o({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:kM(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:Ta,depthTest:!1,depthWrite:!1})}function dL(){return new _o({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:kM(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:Ta,depthTest:!1,depthWrite:!1})}function kM(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function wie(n){let e=new WeakMap,t=null;function i(a){if(a&&a.isTexture){const l=a.mapping,c=l===Km||l===Ym,u=l===Ua||l===rc;if(c||u){let p=e.get(a);const m=p!==void 0?p.texture.pmremVersion:0;if(a.isRenderTargetTexture&&a.pmremVersion!==m)return t===null&&(t=new T1(n)),p=c?t.fromEquirectangular(a,p):t.fromCubemap(a,p),p.texture.pmremVersion=a.pmremVersion,e.set(a,p),p.texture;if(p!==void 0)return p.texture;{const g=a.image;return c&&g&&g.height>0||u&&g&&r(g)?(t===null&&(t=new T1(n)),p=c?t.fromEquirectangular(a):t.fromCubemap(a),p.texture.pmremVersion=a.pmremVersion,e.set(a,p),a.addEventListener("dispose",s),p.texture):null}}}return a}function r(a){let l=0;const c=6;for(let u=0;u<c;u++)a[u]!==void 0&&l++;return l===c}function s(a){const l=a.target;l.removeEventListener("dispose",s);const c=e.get(l);c!==void 0&&(e.delete(l),c.dispose())}function o(){e=new WeakMap,t!==null&&(t.dispose(),t=null)}return{get:i,dispose:o}}function bie(n){const e={};function t(i){if(e[i]!==void 0)return e[i];let r;switch(i){case"WEBGL_depth_texture":r=n.getExtension("WEBGL_depth_texture")||n.getExtension("MOZ_WEBGL_depth_texture")||n.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":r=n.getExtension("EXT_texture_filter_anisotropic")||n.getExtension("MOZ_EXT_texture_filter_anisotropic")||n.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=n.getExtension("WEBGL_compressed_texture_s3tc")||n.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=n.getExtension("WEBGL_compressed_texture_pvrtc")||n.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:r=n.getExtension(i)}return e[i]=r,r}return{has:function(i){return t(i)!==null},init:function(){t("EXT_color_buffer_float"),t("WEBGL_clip_cull_distance"),t("OES_texture_float_linear"),t("EXT_color_buffer_half_float"),t("WEBGL_multisampled_render_to_texture"),t("WEBGL_render_shared_exponent")},get:function(i){const r=t(i);return r===null&&lu("THREE.WebGLRenderer: "+i+" extension not supported."),r}}}function Sie(n,e,t,i){const r={},s=new WeakMap;function o(p){const m=p.target;m.index!==null&&e.remove(m.index);for(const x in m.attributes)e.remove(m.attributes[x]);m.removeEventListener("dispose",o),delete r[m.id];const g=s.get(m);g&&(e.remove(g),s.delete(m)),i.releaseStatesOfGeometry(m),m.isInstancedBufferGeometry===!0&&delete m._maxInstanceCount,t.memory.geometries--}function a(p,m){return r[m.id]===!0||(m.addEventListener("dispose",o),r[m.id]=!0,t.memory.geometries++),m}function l(p){const m=p.attributes;for(const g in m)e.update(m[g],n.ARRAY_BUFFER)}function c(p){const m=[],g=p.index,x=p.attributes.position;let b=0;if(g!==null){const S=g.array;b=g.version;for(let E=0,C=S.length;E<C;E+=3){const U=S[E+0],O=S[E+1],N=S[E+2];m.push(U,O,O,N,N,U)}}else if(x!==void 0){const S=x.array;b=x.version;for(let E=0,C=S.length/3-1;E<C;E+=3){const U=E+0,O=E+1,N=E+2;m.push(U,O,O,N,N,U)}}else return;const w=new(y4(m)?lM:aM)(m,1);w.version=b;const v=s.get(p);v&&e.remove(v),s.set(p,w)}function u(p){const m=s.get(p);if(m){const g=p.index;g!==null&&m.version<g.version&&c(p)}else c(p);return s.get(p)}return{get:a,update:l,getWireframeAttribute:u}}function Tie(n,e,t){let i;function r(m){i=m}let s,o;function a(m){s=m.type,o=m.bytesPerElement}function l(m,g){n.drawElements(i,g,s,m*o),t.update(g,i,1)}function c(m,g,x){x!==0&&(n.drawElementsInstanced(i,g,s,m*o,x),t.update(g,i,x))}function u(m,g,x){if(x===0)return;e.get("WEBGL_multi_draw").multiDrawElementsWEBGL(i,g,0,s,m,0,x);let w=0;for(let v=0;v<x;v++)w+=g[v];t.update(w,i,1)}function p(m,g,x,b){if(x===0)return;const w=e.get("WEBGL_multi_draw");if(w===null)for(let v=0;v<m.length;v++)c(m[v]/o,g[v],b[v]);else{w.multiDrawElementsInstancedWEBGL(i,g,0,s,m,0,b,0,x);let v=0;for(let S=0;S<x;S++)v+=g[S]*b[S];t.update(v,i,1)}}this.setMode=r,this.setIndex=a,this.render=l,this.renderInstances=c,this.renderMultiDraw=u,this.renderMultiDrawInstances=p}function Eie(n){const e={geometries:0,textures:0},t={frame:0,calls:0,triangles:0,points:0,lines:0};function i(s,o,a){switch(t.calls++,o){case n.TRIANGLES:t.triangles+=a*(s/3);break;case n.LINES:t.lines+=a*(s/2);break;case n.LINE_STRIP:t.lines+=a*(s-1);break;case n.LINE_LOOP:t.lines+=a*s;break;case n.POINTS:t.points+=a*s;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",o);break}}function r(){t.calls=0,t.triangles=0,t.points=0,t.lines=0}return{memory:e,render:t,programs:null,autoReset:!0,reset:r,update:i}}function Cie(n,e,t){const i=new WeakMap,r=new mn;function s(o,a,l){const c=o.morphTargetInfluences,u=a.morphAttributes.position||a.morphAttributes.normal||a.morphAttributes.color,p=u!==void 0?u.length:0;let m=i.get(a);if(m===void 0||m.count!==p){let M=function(){P.dispose(),i.delete(a),a.removeEventListener("dispose",M)};var g=M;m!==void 0&&m.texture.dispose();const x=a.morphAttributes.position!==void 0,b=a.morphAttributes.normal!==void 0,w=a.morphAttributes.color!==void 0,v=a.morphAttributes.position||[],S=a.morphAttributes.normal||[],E=a.morphAttributes.color||[];let C=0;x===!0&&(C=1),b===!0&&(C=2),w===!0&&(C=3);let U=a.attributes.position.count*C,O=1;U>e.maxTextureSize&&(O=Math.ceil(U/e.maxTextureSize),U=e.maxTextureSize);const N=new Float32Array(U*O*4*p),P=new Vg(N,U,O,p);P.type=Qr,P.needsUpdate=!0;const A=C*4;for(let D=0;D<p;D++){const z=v[D],F=S[D],re=E[D],le=U*O*4*D;for(let he=0;he<z.count;he++){const ue=he*A;x===!0&&(r.fromBufferAttribute(z,he),N[le+ue+0]=r.x,N[le+ue+1]=r.y,N[le+ue+2]=r.z,N[le+ue+3]=0),b===!0&&(r.fromBufferAttribute(F,he),N[le+ue+4]=r.x,N[le+ue+5]=r.y,N[le+ue+6]=r.z,N[le+ue+7]=0),w===!0&&(r.fromBufferAttribute(re,he),N[le+ue+8]=r.x,N[le+ue+9]=r.y,N[le+ue+10]=r.z,N[le+ue+11]=re.itemSize===4?r.w:1)}}m={count:p,texture:P,size:new Ie(U,O)},i.set(a,m),a.addEventListener("dispose",M)}if(o.isInstancedMesh===!0&&o.morphTexture!==null)l.getUniforms().setValue(n,"morphTexture",o.morphTexture,t);else{let x=0;for(let w=0;w<c.length;w++)x+=c[w];const b=a.morphTargetsRelative?1:1-x;l.getUniforms().setValue(n,"morphTargetBaseInfluence",b),l.getUniforms().setValue(n,"morphTargetInfluences",c)}l.getUniforms().setValue(n,"morphTargetsTexture",m.texture,t),l.getUniforms().setValue(n,"morphTargetsTextureSize",m.size)}return{update:s}}function Aie(n,e,t,i){let r=new WeakMap;function s(l){const c=i.render.frame,u=l.geometry,p=e.get(l,u);if(r.get(p)!==c&&(e.update(p),r.set(p,c)),l.isInstancedMesh&&(l.hasEventListener("dispose",a)===!1&&l.addEventListener("dispose",a),r.get(l)!==c&&(t.update(l.instanceMatrix,n.ARRAY_BUFFER),l.instanceColor!==null&&t.update(l.instanceColor,n.ARRAY_BUFFER),r.set(l,c))),l.isSkinnedMesh){const m=l.skeleton;r.get(m)!==c&&(m.update(),r.set(m,c))}return p}function o(){r=new WeakMap}function a(l){const c=l.target;c.removeEventListener("dispose",a),t.remove(c.instanceMatrix),c.instanceColor!==null&&t.remove(c.instanceColor)}return{update:s,dispose:o}}const xB=new ti,fL=new pM(1,1),_B=new Vg,wB=new Cw,bB=new zg,pL=[],mL=[],gL=new Float32Array(16),yL=new Float32Array(9),vL=new Float32Array(4);function Mf(n,e,t){const i=n[0];if(i<=0||i>0)return n;const r=e*t;let s=pL[r];if(s===void 0&&(s=new Float32Array(r),pL[r]=s),e!==0){i.toArray(s,0);for(let o=1,a=0;o!==e;++o)a+=t,n[o].toArray(s,a)}return s}function Pi(n,e){if(n.length!==e.length)return!1;for(let t=0,i=n.length;t<i;t++)if(n[t]!==e[t])return!1;return!0}function Ri(n,e){for(let t=0,i=e.length;t<i;t++)n[t]=e[t]}function Xw(n,e){let t=mL[e];t===void 0&&(t=new Int32Array(e),mL[e]=t);for(let i=0;i!==e;++i)t[i]=n.allocateTextureUnit();return t}function Mie(n,e){const t=this.cache;t[0]!==e&&(n.uniform1f(this.addr,e),t[0]=e)}function Iie(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2f(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Pi(t,e))return;n.uniform2fv(this.addr,e),Ri(t,e)}}function Pie(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3f(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else if(e.r!==void 0)(t[0]!==e.r||t[1]!==e.g||t[2]!==e.b)&&(n.uniform3f(this.addr,e.r,e.g,e.b),t[0]=e.r,t[1]=e.g,t[2]=e.b);else{if(Pi(t,e))return;n.uniform3fv(this.addr,e),Ri(t,e)}}function Rie(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4f(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Pi(t,e))return;n.uniform4fv(this.addr,e),Ri(t,e)}}function Nie(n,e){const t=this.cache,i=e.elements;if(i===void 0){if(Pi(t,e))return;n.uniformMatrix2fv(this.addr,!1,e),Ri(t,e)}else{if(Pi(t,i))return;vL.set(i),n.uniformMatrix2fv(this.addr,!1,vL),Ri(t,i)}}function Die(n,e){const t=this.cache,i=e.elements;if(i===void 0){if(Pi(t,e))return;n.uniformMatrix3fv(this.addr,!1,e),Ri(t,e)}else{if(Pi(t,i))return;yL.set(i),n.uniformMatrix3fv(this.addr,!1,yL),Ri(t,i)}}function Lie(n,e){const t=this.cache,i=e.elements;if(i===void 0){if(Pi(t,e))return;n.uniformMatrix4fv(this.addr,!1,e),Ri(t,e)}else{if(Pi(t,i))return;gL.set(i),n.uniformMatrix4fv(this.addr,!1,gL),Ri(t,i)}}function kie(n,e){const t=this.cache;t[0]!==e&&(n.uniform1i(this.addr,e),t[0]=e)}function Oie(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2i(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Pi(t,e))return;n.uniform2iv(this.addr,e),Ri(t,e)}}function Uie(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3i(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(Pi(t,e))return;n.uniform3iv(this.addr,e),Ri(t,e)}}function jie(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4i(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Pi(t,e))return;n.uniform4iv(this.addr,e),Ri(t,e)}}function Fie(n,e){const t=this.cache;t[0]!==e&&(n.uniform1ui(this.addr,e),t[0]=e)}function Vie(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(n.uniform2ui(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(Pi(t,e))return;n.uniform2uiv(this.addr,e),Ri(t,e)}}function Bie(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(n.uniform3ui(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(Pi(t,e))return;n.uniform3uiv(this.addr,e),Ri(t,e)}}function zie(n,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(n.uniform4ui(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(Pi(t,e))return;n.uniform4uiv(this.addr,e),Ri(t,e)}}function Hie(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r);let s;this.type===n.SAMPLER_2D_SHADOW?(fL.compareFunction=sM,s=fL):s=xB,t.setTexture2D(e||s,r)}function Gie(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTexture3D(e||wB,r)}function Wie(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTextureCube(e||bB,r)}function qie(n,e,t){const i=this.cache,r=t.allocateTextureUnit();i[0]!==r&&(n.uniform1i(this.addr,r),i[0]=r),t.setTexture2DArray(e||_B,r)}function $ie(n){switch(n){case 5126:return Mie;case 35664:return Iie;case 35665:return Pie;case 35666:return Rie;case 35674:return Nie;case 35675:return Die;case 35676:return Lie;case 5124:case 35670:return kie;case 35667:case 35671:return Oie;case 35668:case 35672:return Uie;case 35669:case 35673:return jie;case 5125:return Fie;case 36294:return Vie;case 36295:return Bie;case 36296:return zie;case 35678:case 36198:case 36298:case 36306:case 35682:return Hie;case 35679:case 36299:case 36307:return Gie;case 35680:case 36300:case 36308:case 36293:return Wie;case 36289:case 36303:case 36311:case 36292:return qie}}function Xie(n,e){n.uniform1fv(this.addr,e)}function Kie(n,e){const t=Mf(e,this.size,2);n.uniform2fv(this.addr,t)}function Yie(n,e){const t=Mf(e,this.size,3);n.uniform3fv(this.addr,t)}function Jie(n,e){const t=Mf(e,this.size,4);n.uniform4fv(this.addr,t)}function Qie(n,e){const t=Mf(e,this.size,4);n.uniformMatrix2fv(this.addr,!1,t)}function Zie(n,e){const t=Mf(e,this.size,9);n.uniformMatrix3fv(this.addr,!1,t)}function ere(n,e){const t=Mf(e,this.size,16);n.uniformMatrix4fv(this.addr,!1,t)}function tre(n,e){n.uniform1iv(this.addr,e)}function nre(n,e){n.uniform2iv(this.addr,e)}function ire(n,e){n.uniform3iv(this.addr,e)}function rre(n,e){n.uniform4iv(this.addr,e)}function sre(n,e){n.uniform1uiv(this.addr,e)}function ore(n,e){n.uniform2uiv(this.addr,e)}function are(n,e){n.uniform3uiv(this.addr,e)}function lre(n,e){n.uniform4uiv(this.addr,e)}function cre(n,e,t){const i=this.cache,r=e.length,s=Xw(t,r);Pi(i,s)||(n.uniform1iv(this.addr,s),Ri(i,s));for(let o=0;o!==r;++o)t.setTexture2D(e[o]||xB,s[o])}function ure(n,e,t){const i=this.cache,r=e.length,s=Xw(t,r);Pi(i,s)||(n.uniform1iv(this.addr,s),Ri(i,s));for(let o=0;o!==r;++o)t.setTexture3D(e[o]||wB,s[o])}function hre(n,e,t){const i=this.cache,r=e.length,s=Xw(t,r);Pi(i,s)||(n.uniform1iv(this.addr,s),Ri(i,s));for(let o=0;o!==r;++o)t.setTextureCube(e[o]||bB,s[o])}function dre(n,e,t){const i=this.cache,r=e.length,s=Xw(t,r);Pi(i,s)||(n.uniform1iv(this.addr,s),Ri(i,s));for(let o=0;o!==r;++o)t.setTexture2DArray(e[o]||_B,s[o])}function fre(n){switch(n){case 5126:return Xie;case 35664:return Kie;case 35665:return Yie;case 35666:return Jie;case 35674:return Qie;case 35675:return Zie;case 35676:return ere;case 5124:case 35670:return tre;case 35667:case 35671:return nre;case 35668:case 35672:return ire;case 35669:case 35673:return rre;case 5125:return sre;case 36294:return ore;case 36295:return are;case 36296:return lre;case 35678:case 36198:case 36298:case 36306:case 35682:return cre;case 35679:case 36299:case 36307:return ure;case 35680:case 36300:case 36308:case 36293:return hre;case 36289:case 36303:case 36311:case 36292:return dre}}class pre{constructor(e,t,i){this.id=e,this.addr=i,this.cache=[],this.type=t.type,this.setValue=$ie(t.type)}}class mre{constructor(e,t,i){this.id=e,this.addr=i,this.cache=[],this.type=t.type,this.size=t.size,this.setValue=fre(t.type)}}class gre{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,i){const r=this.seq;for(let s=0,o=r.length;s!==o;++s){const a=r[s];a.setValue(e,t[a.id],i)}}}const xT=/(\w+)(\])?(\[|\.)?/g;function xL(n,e){n.seq.push(e),n.map[e.id]=e}function yre(n,e,t){const i=n.name,r=i.length;for(xT.lastIndex=0;;){const s=xT.exec(i),o=xT.lastIndex;let a=s[1];const l=s[2]==="]",c=s[3];if(l&&(a=a|0),c===void 0||c==="["&&o+2===r){xL(t,c===void 0?new pre(a,n,e):new mre(a,n,e));break}else{let p=t.map[a];p===void 0&&(p=new gre(a),xL(t,p)),t=p}}}class Dx{constructor(e,t){this.seq=[],this.map={};const i=e.getProgramParameter(t,e.ACTIVE_UNIFORMS);for(let r=0;r<i;++r){const s=e.getActiveUniform(t,r),o=e.getUniformLocation(t,s.name);yre(s,o,this)}}setValue(e,t,i,r){const s=this.map[t];s!==void 0&&s.setValue(e,i,r)}setOptional(e,t,i){const r=t[i];r!==void 0&&this.setValue(e,i,r)}static upload(e,t,i,r){for(let s=0,o=t.length;s!==o;++s){const a=t[s],l=i[a.id];l.needsUpdate!==!1&&a.setValue(e,l.value,r)}}static seqWithValue(e,t){const i=[];for(let r=0,s=e.length;r!==s;++r){const o=e[r];o.id in t&&i.push(o)}return i}}function _L(n,e,t){const i=n.createShader(e);return n.shaderSource(i,t),n.compileShader(i),i}const vre=37297;let xre=0;function _re(n,e){const t=n.split(`
`),i=[],r=Math.max(e-6,0),s=Math.min(e+6,t.length);for(let o=r;o<s;o++){const a=o+1;i.push(`${a===e?">":" "} ${a}: ${t[o]}`)}return i.join(`
`)}const wL=new Bt;function wre(n){dn._getMatrix(wL,dn.workingColorSpace,n);const e=`mat3( ${wL.elements.map(t=>t.toFixed(4))} )`;switch(dn.getTransfer(n)){case tg:return[e,"LinearTransferOETF"];case An:return[e,"sRGBTransferOETF"];default:return console.warn("THREE.WebGLProgram: Unsupported color space: ",n),[e,"LinearTransferOETF"]}}function bL(n,e,t){const i=n.getShaderParameter(e,n.COMPILE_STATUS),r=n.getShaderInfoLog(e).trim();if(i&&r==="")return"";const s=/ERROR: 0:(\d+)/.exec(r);if(s){const o=parseInt(s[1]);return t.toUpperCase()+`

`+r+`

`+_re(n.getShaderSource(e),o)}else return r}function bre(n,e){const t=wre(e);return[`vec4 ${n}( vec4 value ) {`,`	return ${t[1]}( vec4( value.rgb * ${t[0]}, value.a ) );`,"}"].join(`
`)}function Sre(n,e){let t;switch(e){case JV:t="Linear";break;case QV:t="Reinhard";break;case ZV:t="Cineon";break;case $A:t="ACESFilmic";break;case t4:t="AgX";break;case n4:t="Neutral";break;case e4:t="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),t="Linear"}return"vec3 "+n+"( vec3 color ) { return "+t+"ToneMapping( color ); }"}const Zv=new K;function Tre(){dn.getLuminanceCoefficients(Zv);const n=Zv.x.toFixed(4),e=Zv.y.toFixed(4),t=Zv.z.toFixed(4);return["float luminance( const in vec3 rgb ) {",`	const vec3 weights = vec3( ${n}, ${e}, ${t} );`,"	return dot( weights, rgb );","}"].join(`
`)}function Ere(n){return[n.extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":"",n.extensionMultiDraw?"#extension GL_ANGLE_multi_draw : require":""].filter(Up).join(`
`)}function Cre(n){const e=[];for(const t in n){const i=n[t];i!==!1&&e.push("#define "+t+" "+i)}return e.join(`
`)}function Are(n,e){const t={},i=n.getProgramParameter(e,n.ACTIVE_ATTRIBUTES);for(let r=0;r<i;r++){const s=n.getActiveAttrib(e,r),o=s.name;let a=1;s.type===n.FLOAT_MAT2&&(a=2),s.type===n.FLOAT_MAT3&&(a=3),s.type===n.FLOAT_MAT4&&(a=4),t[o]={type:s.type,location:n.getAttribLocation(e,o),locationSize:a}}return t}function Up(n){return n!==""}function SL(n,e){const t=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return n.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,t).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function TL(n,e){return n.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const Mre=/^[ \t]*#include +<([\w\d./]+)>/gm;function E1(n){return n.replace(Mre,Pre)}const Ire=new Map;function Pre(n,e){let t=$t[e];if(t===void 0){const i=Ire.get(e);if(i!==void 0)t=$t[i],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',e,i);else throw new Error("Can not resolve #include <"+e+">")}return E1(t)}const Rre=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function EL(n){return n.replace(Rre,Nre)}function Nre(n,e,t,i){let r="";for(let s=parseInt(e);s<parseInt(t);s++)r+=i.replace(/\[\s*i\s*\]/g,"[ "+s+" ]").replace(/UNROLLED_LOOP_INDEX/g,s);return r}function CL(n){let e=`precision ${n.precision} float;
	precision ${n.precision} int;
	precision ${n.precision} sampler2D;
	precision ${n.precision} samplerCube;
	precision ${n.precision} sampler3D;
	precision ${n.precision} sampler2DArray;
	precision ${n.precision} sampler2DShadow;
	precision ${n.precision} samplerCubeShadow;
	precision ${n.precision} sampler2DArrayShadow;
	precision ${n.precision} isampler2D;
	precision ${n.precision} isampler3D;
	precision ${n.precision} isamplerCube;
	precision ${n.precision} isampler2DArray;
	precision ${n.precision} usampler2D;
	precision ${n.precision} usampler3D;
	precision ${n.precision} usamplerCube;
	precision ${n.precision} usampler2DArray;
	`;return n.precision==="highp"?e+=`
#define HIGH_PRECISION`:n.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:n.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}function Dre(n){let e="SHADOWMAP_TYPE_BASIC";return n.shadowMapType===gw?e="SHADOWMAP_TYPE_PCF":n.shadowMapType===nm?e="SHADOWMAP_TYPE_PCF_SOFT":n.shadowMapType===oo&&(e="SHADOWMAP_TYPE_VSM"),e}function Lre(n){let e="ENVMAP_TYPE_CUBE";if(n.envMap)switch(n.envMapMode){case Ua:case rc:e="ENVMAP_TYPE_CUBE";break;case Sf:e="ENVMAP_TYPE_CUBE_UV";break}return e}function kre(n){let e="ENVMAP_MODE_REFLECTION";if(n.envMap)switch(n.envMapMode){case rc:e="ENVMAP_MODE_REFRACTION";break}return e}function Ore(n){let e="ENVMAP_BLENDING_NONE";if(n.envMap)switch(n.combine){case jg:e="ENVMAP_BLENDING_MULTIPLY";break;case KV:e="ENVMAP_BLENDING_MIX";break;case YV:e="ENVMAP_BLENDING_ADD";break}return e}function Ure(n){const e=n.envMapCubeUVHeight;if(e===null)return null;const t=Math.log2(e)-2,i=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,t),7*16)),texelHeight:i,maxMip:t}}function jre(n,e,t,i){const r=n.getContext(),s=t.defines;let o=t.vertexShader,a=t.fragmentShader;const l=Dre(t),c=Lre(t),u=kre(t),p=Ore(t),m=Ure(t),g=Ere(t),x=Cre(s),b=r.createProgram();let w,v,S=t.glslVersion?"#version "+t.glslVersion+`
`:"";t.isRawShaderMaterial?(w=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,x].filter(Up).join(`
`),w.length>0&&(w+=`
`),v=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,x].filter(Up).join(`
`),v.length>0&&(v+=`
`)):(w=[CL(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,x,t.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",t.batching?"#define USE_BATCHING":"",t.batchingColor?"#define USE_BATCHING_COLOR":"",t.instancing?"#define USE_INSTANCING":"",t.instancingColor?"#define USE_INSTANCING_COLOR":"",t.instancingMorph?"#define USE_INSTANCING_MORPH":"",t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+u:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.displacementMap?"#define USE_DISPLACEMENTMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.mapUv?"#define MAP_UV "+t.mapUv:"",t.alphaMapUv?"#define ALPHAMAP_UV "+t.alphaMapUv:"",t.lightMapUv?"#define LIGHTMAP_UV "+t.lightMapUv:"",t.aoMapUv?"#define AOMAP_UV "+t.aoMapUv:"",t.emissiveMapUv?"#define EMISSIVEMAP_UV "+t.emissiveMapUv:"",t.bumpMapUv?"#define BUMPMAP_UV "+t.bumpMapUv:"",t.normalMapUv?"#define NORMALMAP_UV "+t.normalMapUv:"",t.displacementMapUv?"#define DISPLACEMENTMAP_UV "+t.displacementMapUv:"",t.metalnessMapUv?"#define METALNESSMAP_UV "+t.metalnessMapUv:"",t.roughnessMapUv?"#define ROUGHNESSMAP_UV "+t.roughnessMapUv:"",t.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+t.anisotropyMapUv:"",t.clearcoatMapUv?"#define CLEARCOATMAP_UV "+t.clearcoatMapUv:"",t.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+t.clearcoatNormalMapUv:"",t.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+t.clearcoatRoughnessMapUv:"",t.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+t.iridescenceMapUv:"",t.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+t.iridescenceThicknessMapUv:"",t.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+t.sheenColorMapUv:"",t.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+t.sheenRoughnessMapUv:"",t.specularMapUv?"#define SPECULARMAP_UV "+t.specularMapUv:"",t.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+t.specularColorMapUv:"",t.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+t.specularIntensityMapUv:"",t.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+t.transmissionMapUv:"",t.thicknessMapUv?"#define THICKNESSMAP_UV "+t.thicknessMapUv:"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.flatShading?"#define FLAT_SHADED":"",t.skinning?"#define USE_SKINNING":"",t.morphTargets?"#define USE_MORPHTARGETS":"",t.morphNormals&&t.flatShading===!1?"#define USE_MORPHNORMALS":"",t.morphColors?"#define USE_MORPHCOLORS":"",t.morphTargetsCount>0?"#define MORPHTARGETS_TEXTURE_STRIDE "+t.morphTextureStride:"",t.morphTargetsCount>0?"#define MORPHTARGETS_COUNT "+t.morphTargetsCount:"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+l:"",t.sizeAttenuation?"#define USE_SIZEATTENUATION":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.reverseDepthBuffer?"#define USE_REVERSEDEPTHBUF":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","#ifdef USE_INSTANCING_MORPH","	uniform sampler2D morphTexture;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(Up).join(`
`),v=[CL(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,x,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.alphaToCoverage?"#define ALPHA_TO_COVERAGE":"",t.map?"#define USE_MAP":"",t.matcap?"#define USE_MATCAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+c:"",t.envMap?"#define "+u:"",t.envMap?"#define "+p:"",m?"#define CUBEUV_TEXEL_WIDTH "+m.texelWidth:"",m?"#define CUBEUV_TEXEL_HEIGHT "+m.texelHeight:"",m?"#define CUBEUV_MAX_MIP "+m.maxMip+".0":"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoat?"#define USE_CLEARCOAT":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.dispersion?"#define USE_DISPERSION":"",t.iridescence?"#define USE_IRIDESCENCE":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaTest?"#define USE_ALPHATEST":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.sheen?"#define USE_SHEEN":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors||t.instancingColor||t.batchingColor?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.gradientMap?"#define USE_GRADIENTMAP":"",t.flatShading?"#define FLAT_SHADED":"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+l:"",t.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",t.decodeVideoTextureEmissive?"#define DECODE_VIDEO_TEXTURE_EMISSIVE":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.reverseDepthBuffer?"#define USE_REVERSEDEPTHBUF":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",t.toneMapping!==zo?"#define TONE_MAPPING":"",t.toneMapping!==zo?$t.tonemapping_pars_fragment:"",t.toneMapping!==zo?Sre("toneMapping",t.toneMapping):"",t.dithering?"#define DITHERING":"",t.opaque?"#define OPAQUE":"",$t.colorspace_pars_fragment,bre("linearToOutputTexel",t.outputColorSpace),Tre(),t.useDepthPacking?"#define DEPTH_PACKING "+t.depthPacking:"",`
`].filter(Up).join(`
`)),o=E1(o),o=SL(o,t),o=TL(o,t),a=E1(a),a=SL(a,t),a=TL(a,t),o=EL(o),a=EL(a),t.isRawShaderMaterial!==!0&&(S=`#version 300 es
`,w=[g,"#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+w,v=["#define varying in",t.glslVersion===g1?"":"layout(location = 0) out highp vec4 pc_fragColor;",t.glslVersion===g1?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+v);const E=S+w+o,C=S+v+a,U=_L(r,r.VERTEX_SHADER,E),O=_L(r,r.FRAGMENT_SHADER,C);r.attachShader(b,U),r.attachShader(b,O),t.index0AttributeName!==void 0?r.bindAttribLocation(b,0,t.index0AttributeName):t.morphTargets===!0&&r.bindAttribLocation(b,0,"position"),r.linkProgram(b);function N(D){if(n.debug.checkShaderErrors){const z=r.getProgramInfoLog(b).trim(),F=r.getShaderInfoLog(U).trim(),re=r.getShaderInfoLog(O).trim();let le=!0,he=!0;if(r.getProgramParameter(b,r.LINK_STATUS)===!1)if(le=!1,typeof n.debug.onShaderError=="function")n.debug.onShaderError(r,b,U,O);else{const ue=bL(r,U,"vertex"),q=bL(r,O,"fragment");console.error("THREE.WebGLProgram: Shader Error "+r.getError()+" - VALIDATE_STATUS "+r.getProgramParameter(b,r.VALIDATE_STATUS)+`

Material Name: `+D.name+`
Material Type: `+D.type+`

Program Info Log: `+z+`
`+ue+`
`+q)}else z!==""?console.warn("THREE.WebGLProgram: Program Info Log:",z):(F===""||re==="")&&(he=!1);he&&(D.diagnostics={runnable:le,programLog:z,vertexShader:{log:F,prefix:w},fragmentShader:{log:re,prefix:v}})}r.deleteShader(U),r.deleteShader(O),P=new Dx(r,b),A=Are(r,b)}let P;this.getUniforms=function(){return P===void 0&&N(this),P};let A;this.getAttributes=function(){return A===void 0&&N(this),A};let M=t.rendererExtensionParallelShaderCompile===!1;return this.isReady=function(){return M===!1&&(M=r.getProgramParameter(b,vre)),M},this.destroy=function(){i.releaseStatesOfProgram(this),r.deleteProgram(b),this.program=void 0},this.type=t.shaderType,this.name=t.shaderName,this.id=xre++,this.cacheKey=e,this.usedTimes=1,this.program=b,this.vertexShader=U,this.fragmentShader=O,this}let Fre=0;class Vre{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const t=e.vertexShader,i=e.fragmentShader,r=this._getShaderStage(t),s=this._getShaderStage(i),o=this._getShaderCacheForMaterial(e);return o.has(r)===!1&&(o.add(r),r.usedTimes++),o.has(s)===!1&&(o.add(s),s.usedTimes++),this}remove(e){const t=this.materialCache.get(e);for(const i of t)i.usedTimes--,i.usedTimes===0&&this.shaderCache.delete(i.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const t=this.materialCache;let i=t.get(e);return i===void 0&&(i=new Set,t.set(e,i)),i}_getShaderStage(e){const t=this.shaderCache;let i=t.get(e);return i===void 0&&(i=new Bre(e),t.set(e,i)),i}}class Bre{constructor(e){this.id=Fre++,this.code=e,this.usedTimes=0}}function zre(n,e,t,i,r,s,o){const a=new Mu,l=new Vre,c=new Set,u=[],p=r.logarithmicDepthBuffer,m=r.vertexTextures;let g=r.precision;const x={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function b(A){return c.add(A),A===0?"uv":`uv${A}`}function w(A,M,D,z,F){const re=z.fog,le=F.geometry,he=A.isMeshStandardMaterial?z.environment:null,ue=(A.isMeshStandardMaterial?t:e).get(A.envMap||he),q=ue&&ue.mapping===Sf?ue.image.height:null,Q=x[A.type];A.precision!==null&&(g=r.getMaxPrecision(A.precision),g!==A.precision&&console.warn("THREE.WebGLProgram.getParameters:",A.precision,"not supported, using",g,"instead."));const j=le.morphAttributes.position||le.morphAttributes.normal||le.morphAttributes.color,J=j!==void 0?j.length:0;let ce=0;le.morphAttributes.position!==void 0&&(ce=1),le.morphAttributes.normal!==void 0&&(ce=2),le.morphAttributes.color!==void 0&&(ce=3);let me,oe,ye,Re;if(Q){const Zt=co[Q];me=Zt.vertexShader,oe=Zt.fragmentShader}else me=A.vertexShader,oe=A.fragmentShader,l.update(A),ye=l.getVertexShaderID(A),Re=l.getFragmentShaderID(A);const Me=n.getRenderTarget(),ht=n.state.buffers.depth.getReversed(),zt=F.isInstancedMesh===!0,Ge=F.isBatchedMesh===!0,Je=!!A.map,Ce=!!A.matcap,Se=!!ue,X=!!A.aoMap,ot=!!A.lightMap,Ne=!!A.bumpMap,qe=!!A.normalMap,Ue=!!A.displacementMap,gt=!!A.emissiveMap,Ve=!!A.metalnessMap,$=!!A.roughnessMap,B=A.anisotropy>0,ae=A.clearcoat>0,be=A.dispersion>0,Pe=A.iridescence>0,ve=A.sheen>0,Fe=A.transmission>0,We=B&&!!A.anisotropyMap,tt=ae&&!!A.clearcoatMap,Gt=ae&&!!A.clearcoatNormalMap,Le=ae&&!!A.clearcoatRoughnessMap,nt=Pe&&!!A.iridescenceMap,wt=Pe&&!!A.iridescenceThicknessMap,Tt=ve&&!!A.sheenColorMap,rt=ve&&!!A.sheenRoughnessMap,Qt=!!A.specularMap,Nt=!!A.specularColorMap,xn=!!A.specularIntensityMap,Z=Fe&&!!A.transmissionMap,$e=Fe&&!!A.thicknessMap,_e=!!A.gradientMap,Te=!!A.alphaMap,Ke=A.alphaTest>0,ze=!!A.alphaHash,Rt=!!A.extensions;let Cn=zo;A.toneMapped&&(Me===null||Me.isXRRenderTarget===!0)&&(Cn=n.toneMapping);const Yn={shaderID:Q,shaderType:A.type,shaderName:A.name,vertexShader:me,fragmentShader:oe,defines:A.defines,customVertexShaderID:ye,customFragmentShaderID:Re,isRawShaderMaterial:A.isRawShaderMaterial===!0,glslVersion:A.glslVersion,precision:g,batching:Ge,batchingColor:Ge&&F._colorsTexture!==null,instancing:zt,instancingColor:zt&&F.instanceColor!==null,instancingMorph:zt&&F.morphTexture!==null,supportsVertexTextures:m,outputColorSpace:Me===null?n.outputColorSpace:Me.isXRRenderTarget===!0?Me.texture.colorSpace:qu,alphaToCoverage:!!A.alphaToCoverage,map:Je,matcap:Ce,envMap:Se,envMapMode:Se&&ue.mapping,envMapCubeUVHeight:q,aoMap:X,lightMap:ot,bumpMap:Ne,normalMap:qe,displacementMap:m&&Ue,emissiveMap:gt,normalMapObjectSpace:qe&&A.normalMapType===c4,normalMapTangentSpace:qe&&A.normalMapType===gc,metalnessMap:Ve,roughnessMap:$,anisotropy:B,anisotropyMap:We,clearcoat:ae,clearcoatMap:tt,clearcoatNormalMap:Gt,clearcoatRoughnessMap:Le,dispersion:be,iridescence:Pe,iridescenceMap:nt,iridescenceThicknessMap:wt,sheen:ve,sheenColorMap:Tt,sheenRoughnessMap:rt,specularMap:Qt,specularColorMap:Nt,specularIntensityMap:xn,transmission:Fe,transmissionMap:Z,thicknessMap:$e,gradientMap:_e,opaque:A.transparent===!1&&A.blending===Tu&&A.alphaToCoverage===!1,alphaMap:Te,alphaTest:Ke,alphaHash:ze,combine:A.combine,mapUv:Je&&b(A.map.channel),aoMapUv:X&&b(A.aoMap.channel),lightMapUv:ot&&b(A.lightMap.channel),bumpMapUv:Ne&&b(A.bumpMap.channel),normalMapUv:qe&&b(A.normalMap.channel),displacementMapUv:Ue&&b(A.displacementMap.channel),emissiveMapUv:gt&&b(A.emissiveMap.channel),metalnessMapUv:Ve&&b(A.metalnessMap.channel),roughnessMapUv:$&&b(A.roughnessMap.channel),anisotropyMapUv:We&&b(A.anisotropyMap.channel),clearcoatMapUv:tt&&b(A.clearcoatMap.channel),clearcoatNormalMapUv:Gt&&b(A.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:Le&&b(A.clearcoatRoughnessMap.channel),iridescenceMapUv:nt&&b(A.iridescenceMap.channel),iridescenceThicknessMapUv:wt&&b(A.iridescenceThicknessMap.channel),sheenColorMapUv:Tt&&b(A.sheenColorMap.channel),sheenRoughnessMapUv:rt&&b(A.sheenRoughnessMap.channel),specularMapUv:Qt&&b(A.specularMap.channel),specularColorMapUv:Nt&&b(A.specularColorMap.channel),specularIntensityMapUv:xn&&b(A.specularIntensityMap.channel),transmissionMapUv:Z&&b(A.transmissionMap.channel),thicknessMapUv:$e&&b(A.thicknessMap.channel),alphaMapUv:Te&&b(A.alphaMap.channel),vertexTangents:!!le.attributes.tangent&&(qe||B),vertexColors:A.vertexColors,vertexAlphas:A.vertexColors===!0&&!!le.attributes.color&&le.attributes.color.itemSize===4,pointsUvs:F.isPoints===!0&&!!le.attributes.uv&&(Je||Te),fog:!!re,useFog:A.fog===!0,fogExp2:!!re&&re.isFogExp2,flatShading:A.flatShading===!0,sizeAttenuation:A.sizeAttenuation===!0,logarithmicDepthBuffer:p,reverseDepthBuffer:ht,skinning:F.isSkinnedMesh===!0,morphTargets:le.morphAttributes.position!==void 0,morphNormals:le.morphAttributes.normal!==void 0,morphColors:le.morphAttributes.color!==void 0,morphTargetsCount:J,morphTextureStride:ce,numDirLights:M.directional.length,numPointLights:M.point.length,numSpotLights:M.spot.length,numSpotLightMaps:M.spotLightMap.length,numRectAreaLights:M.rectArea.length,numHemiLights:M.hemi.length,numDirLightShadows:M.directionalShadowMap.length,numPointLightShadows:M.pointShadowMap.length,numSpotLightShadows:M.spotShadowMap.length,numSpotLightShadowsWithMaps:M.numSpotLightShadowsWithMaps,numLightProbes:M.numLightProbes,numClippingPlanes:o.numPlanes,numClipIntersection:o.numIntersection,dithering:A.dithering,shadowMapEnabled:n.shadowMap.enabled&&D.length>0,shadowMapType:n.shadowMap.type,toneMapping:Cn,decodeVideoTexture:Je&&A.map.isVideoTexture===!0&&dn.getTransfer(A.map.colorSpace)===An,decodeVideoTextureEmissive:gt&&A.emissiveMap.isVideoTexture===!0&&dn.getTransfer(A.emissiveMap.colorSpace)===An,premultipliedAlpha:A.premultipliedAlpha,doubleSided:A.side===uo,flipSided:A.side===Lr,useDepthPacking:A.depthPacking>=0,depthPacking:A.depthPacking||0,index0AttributeName:A.index0AttributeName,extensionClipCullDistance:Rt&&A.extensions.clipCullDistance===!0&&i.has("WEBGL_clip_cull_distance"),extensionMultiDraw:(Rt&&A.extensions.multiDraw===!0||Ge)&&i.has("WEBGL_multi_draw"),rendererExtensionParallelShaderCompile:i.has("KHR_parallel_shader_compile"),customProgramCacheKey:A.customProgramCacheKey()};return Yn.vertexUv1s=c.has(1),Yn.vertexUv2s=c.has(2),Yn.vertexUv3s=c.has(3),c.clear(),Yn}function v(A){const M=[];if(A.shaderID?M.push(A.shaderID):(M.push(A.customVertexShaderID),M.push(A.customFragmentShaderID)),A.defines!==void 0)for(const D in A.defines)M.push(D),M.push(A.defines[D]);return A.isRawShaderMaterial===!1&&(S(M,A),E(M,A),M.push(n.outputColorSpace)),M.push(A.customProgramCacheKey),M.join()}function S(A,M){A.push(M.precision),A.push(M.outputColorSpace),A.push(M.envMapMode),A.push(M.envMapCubeUVHeight),A.push(M.mapUv),A.push(M.alphaMapUv),A.push(M.lightMapUv),A.push(M.aoMapUv),A.push(M.bumpMapUv),A.push(M.normalMapUv),A.push(M.displacementMapUv),A.push(M.emissiveMapUv),A.push(M.metalnessMapUv),A.push(M.roughnessMapUv),A.push(M.anisotropyMapUv),A.push(M.clearcoatMapUv),A.push(M.clearcoatNormalMapUv),A.push(M.clearcoatRoughnessMapUv),A.push(M.iridescenceMapUv),A.push(M.iridescenceThicknessMapUv),A.push(M.sheenColorMapUv),A.push(M.sheenRoughnessMapUv),A.push(M.specularMapUv),A.push(M.specularColorMapUv),A.push(M.specularIntensityMapUv),A.push(M.transmissionMapUv),A.push(M.thicknessMapUv),A.push(M.combine),A.push(M.fogExp2),A.push(M.sizeAttenuation),A.push(M.morphTargetsCount),A.push(M.morphAttributeCount),A.push(M.numDirLights),A.push(M.numPointLights),A.push(M.numSpotLights),A.push(M.numSpotLightMaps),A.push(M.numHemiLights),A.push(M.numRectAreaLights),A.push(M.numDirLightShadows),A.push(M.numPointLightShadows),A.push(M.numSpotLightShadows),A.push(M.numSpotLightShadowsWithMaps),A.push(M.numLightProbes),A.push(M.shadowMapType),A.push(M.toneMapping),A.push(M.numClippingPlanes),A.push(M.numClipIntersection),A.push(M.depthPacking)}function E(A,M){a.disableAll(),M.supportsVertexTextures&&a.enable(0),M.instancing&&a.enable(1),M.instancingColor&&a.enable(2),M.instancingMorph&&a.enable(3),M.matcap&&a.enable(4),M.envMap&&a.enable(5),M.normalMapObjectSpace&&a.enable(6),M.normalMapTangentSpace&&a.enable(7),M.clearcoat&&a.enable(8),M.iridescence&&a.enable(9),M.alphaTest&&a.enable(10),M.vertexColors&&a.enable(11),M.vertexAlphas&&a.enable(12),M.vertexUv1s&&a.enable(13),M.vertexUv2s&&a.enable(14),M.vertexUv3s&&a.enable(15),M.vertexTangents&&a.enable(16),M.anisotropy&&a.enable(17),M.alphaHash&&a.enable(18),M.batching&&a.enable(19),M.dispersion&&a.enable(20),M.batchingColor&&a.enable(21),A.push(a.mask),a.disableAll(),M.fog&&a.enable(0),M.useFog&&a.enable(1),M.flatShading&&a.enable(2),M.logarithmicDepthBuffer&&a.enable(3),M.reverseDepthBuffer&&a.enable(4),M.skinning&&a.enable(5),M.morphTargets&&a.enable(6),M.morphNormals&&a.enable(7),M.morphColors&&a.enable(8),M.premultipliedAlpha&&a.enable(9),M.shadowMapEnabled&&a.enable(10),M.doubleSided&&a.enable(11),M.flipSided&&a.enable(12),M.useDepthPacking&&a.enable(13),M.dithering&&a.enable(14),M.transmission&&a.enable(15),M.sheen&&a.enable(16),M.opaque&&a.enable(17),M.pointsUvs&&a.enable(18),M.decodeVideoTexture&&a.enable(19),M.decodeVideoTextureEmissive&&a.enable(20),M.alphaToCoverage&&a.enable(21),A.push(a.mask)}function C(A){const M=x[A.type];let D;if(M){const z=co[M];D=b4.clone(z.uniforms)}else D=A.uniforms;return D}function U(A,M){let D;for(let z=0,F=u.length;z<F;z++){const re=u[z];if(re.cacheKey===M){D=re,++D.usedTimes;break}}return D===void 0&&(D=new jre(n,M,A,s),u.push(D)),D}function O(A){if(--A.usedTimes===0){const M=u.indexOf(A);u[M]=u[u.length-1],u.pop(),A.destroy()}}function N(A){l.remove(A)}function P(){l.dispose()}return{getParameters:w,getProgramCacheKey:v,getUniforms:C,acquireProgram:U,releaseProgram:O,releaseShaderCache:N,programs:u,dispose:P}}function Hre(){let n=new WeakMap;function e(o){return n.has(o)}function t(o){let a=n.get(o);return a===void 0&&(a={},n.set(o,a)),a}function i(o){n.delete(o)}function r(o,a,l){n.get(o)[a]=l}function s(){n=new WeakMap}return{has:e,get:t,remove:i,update:r,dispose:s}}function Gre(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.material.id!==e.material.id?n.material.id-e.material.id:n.z!==e.z?n.z-e.z:n.id-e.id}function AL(n,e){return n.groupOrder!==e.groupOrder?n.groupOrder-e.groupOrder:n.renderOrder!==e.renderOrder?n.renderOrder-e.renderOrder:n.z!==e.z?e.z-n.z:n.id-e.id}function ML(){const n=[];let e=0;const t=[],i=[],r=[];function s(){e=0,t.length=0,i.length=0,r.length=0}function o(p,m,g,x,b,w){let v=n[e];return v===void 0?(v={id:p.id,object:p,geometry:m,material:g,groupOrder:x,renderOrder:p.renderOrder,z:b,group:w},n[e]=v):(v.id=p.id,v.object=p,v.geometry=m,v.material=g,v.groupOrder=x,v.renderOrder=p.renderOrder,v.z=b,v.group=w),e++,v}function a(p,m,g,x,b,w){const v=o(p,m,g,x,b,w);g.transmission>0?i.push(v):g.transparent===!0?r.push(v):t.push(v)}function l(p,m,g,x,b,w){const v=o(p,m,g,x,b,w);g.transmission>0?i.unshift(v):g.transparent===!0?r.unshift(v):t.unshift(v)}function c(p,m){t.length>1&&t.sort(p||Gre),i.length>1&&i.sort(m||AL),r.length>1&&r.sort(m||AL)}function u(){for(let p=e,m=n.length;p<m;p++){const g=n[p];if(g.id===null)break;g.id=null,g.object=null,g.geometry=null,g.material=null,g.group=null}}return{opaque:t,transmissive:i,transparent:r,init:s,push:a,unshift:l,finish:u,sort:c}}function Wre(){let n=new WeakMap;function e(i,r){const s=n.get(i);let o;return s===void 0?(o=new ML,n.set(i,[o])):r>=s.length?(o=new ML,s.push(o)):o=s[r],o}function t(){n=new WeakMap}return{get:e,dispose:t}}function qre(){const n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let t;switch(e.type){case"DirectionalLight":t={direction:new K,color:new st};break;case"SpotLight":t={position:new K,direction:new K,color:new st,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":t={position:new K,color:new st,distance:0,decay:0};break;case"HemisphereLight":t={direction:new K,skyColor:new st,groundColor:new st};break;case"RectAreaLight":t={color:new st,position:new K,halfWidth:new K,halfHeight:new K};break}return n[e.id]=t,t}}}function $re(){const n={};return{get:function(e){if(n[e.id]!==void 0)return n[e.id];let t;switch(e.type){case"DirectionalLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Ie};break;case"SpotLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Ie};break;case"PointLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Ie,shadowCameraNear:1,shadowCameraFar:1e3};break}return n[e.id]=t,t}}}let Xre=0;function Kre(n,e){return(e.castShadow?2:0)-(n.castShadow?2:0)+(e.map?1:0)-(n.map?1:0)}function Yre(n){const e=new qre,t=$re(),i={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let c=0;c<9;c++)i.probe.push(new K);const r=new K,s=new At,o=new At;function a(c){let u=0,p=0,m=0;for(let A=0;A<9;A++)i.probe[A].set(0,0,0);let g=0,x=0,b=0,w=0,v=0,S=0,E=0,C=0,U=0,O=0,N=0;c.sort(Kre);for(let A=0,M=c.length;A<M;A++){const D=c[A],z=D.color,F=D.intensity,re=D.distance,le=D.shadow&&D.shadow.map?D.shadow.map.texture:null;if(D.isAmbientLight)u+=z.r*F,p+=z.g*F,m+=z.b*F;else if(D.isLightProbe){for(let he=0;he<9;he++)i.probe[he].addScaledVector(D.sh.coefficients[he],F);N++}else if(D.isDirectionalLight){const he=e.get(D);if(he.color.copy(D.color).multiplyScalar(D.intensity),D.castShadow){const ue=D.shadow,q=t.get(D);q.shadowIntensity=ue.intensity,q.shadowBias=ue.bias,q.shadowNormalBias=ue.normalBias,q.shadowRadius=ue.radius,q.shadowMapSize=ue.mapSize,i.directionalShadow[g]=q,i.directionalShadowMap[g]=le,i.directionalShadowMatrix[g]=D.shadow.matrix,S++}i.directional[g]=he,g++}else if(D.isSpotLight){const he=e.get(D);he.position.setFromMatrixPosition(D.matrixWorld),he.color.copy(z).multiplyScalar(F),he.distance=re,he.coneCos=Math.cos(D.angle),he.penumbraCos=Math.cos(D.angle*(1-D.penumbra)),he.decay=D.decay,i.spot[b]=he;const ue=D.shadow;if(D.map&&(i.spotLightMap[U]=D.map,U++,ue.updateMatrices(D),D.castShadow&&O++),i.spotLightMatrix[b]=ue.matrix,D.castShadow){const q=t.get(D);q.shadowIntensity=ue.intensity,q.shadowBias=ue.bias,q.shadowNormalBias=ue.normalBias,q.shadowRadius=ue.radius,q.shadowMapSize=ue.mapSize,i.spotShadow[b]=q,i.spotShadowMap[b]=le,C++}b++}else if(D.isRectAreaLight){const he=e.get(D);he.color.copy(z).multiplyScalar(F),he.halfWidth.set(D.width*.5,0,0),he.halfHeight.set(0,D.height*.5,0),i.rectArea[w]=he,w++}else if(D.isPointLight){const he=e.get(D);if(he.color.copy(D.color).multiplyScalar(D.intensity),he.distance=D.distance,he.decay=D.decay,D.castShadow){const ue=D.shadow,q=t.get(D);q.shadowIntensity=ue.intensity,q.shadowBias=ue.bias,q.shadowNormalBias=ue.normalBias,q.shadowRadius=ue.radius,q.shadowMapSize=ue.mapSize,q.shadowCameraNear=ue.camera.near,q.shadowCameraFar=ue.camera.far,i.pointShadow[x]=q,i.pointShadowMap[x]=le,i.pointShadowMatrix[x]=D.shadow.matrix,E++}i.point[x]=he,x++}else if(D.isHemisphereLight){const he=e.get(D);he.skyColor.copy(D.color).multiplyScalar(F),he.groundColor.copy(D.groundColor).multiplyScalar(F),i.hemi[v]=he,v++}}w>0&&(n.has("OES_texture_float_linear")===!0?(i.rectAreaLTC1=Xe.LTC_FLOAT_1,i.rectAreaLTC2=Xe.LTC_FLOAT_2):(i.rectAreaLTC1=Xe.LTC_HALF_1,i.rectAreaLTC2=Xe.LTC_HALF_2)),i.ambient[0]=u,i.ambient[1]=p,i.ambient[2]=m;const P=i.hash;(P.directionalLength!==g||P.pointLength!==x||P.spotLength!==b||P.rectAreaLength!==w||P.hemiLength!==v||P.numDirectionalShadows!==S||P.numPointShadows!==E||P.numSpotShadows!==C||P.numSpotMaps!==U||P.numLightProbes!==N)&&(i.directional.length=g,i.spot.length=b,i.rectArea.length=w,i.point.length=x,i.hemi.length=v,i.directionalShadow.length=S,i.directionalShadowMap.length=S,i.pointShadow.length=E,i.pointShadowMap.length=E,i.spotShadow.length=C,i.spotShadowMap.length=C,i.directionalShadowMatrix.length=S,i.pointShadowMatrix.length=E,i.spotLightMatrix.length=C+U-O,i.spotLightMap.length=U,i.numSpotLightShadowsWithMaps=O,i.numLightProbes=N,P.directionalLength=g,P.pointLength=x,P.spotLength=b,P.rectAreaLength=w,P.hemiLength=v,P.numDirectionalShadows=S,P.numPointShadows=E,P.numSpotShadows=C,P.numSpotMaps=U,P.numLightProbes=N,i.version=Xre++)}function l(c,u){let p=0,m=0,g=0,x=0,b=0;const w=u.matrixWorldInverse;for(let v=0,S=c.length;v<S;v++){const E=c[v];if(E.isDirectionalLight){const C=i.directional[p];C.direction.setFromMatrixPosition(E.matrixWorld),r.setFromMatrixPosition(E.target.matrixWorld),C.direction.sub(r),C.direction.transformDirection(w),p++}else if(E.isSpotLight){const C=i.spot[g];C.position.setFromMatrixPosition(E.matrixWorld),C.position.applyMatrix4(w),C.direction.setFromMatrixPosition(E.matrixWorld),r.setFromMatrixPosition(E.target.matrixWorld),C.direction.sub(r),C.direction.transformDirection(w),g++}else if(E.isRectAreaLight){const C=i.rectArea[x];C.position.setFromMatrixPosition(E.matrixWorld),C.position.applyMatrix4(w),o.identity(),s.copy(E.matrixWorld),s.premultiply(w),o.extractRotation(s),C.halfWidth.set(E.width*.5,0,0),C.halfHeight.set(0,E.height*.5,0),C.halfWidth.applyMatrix4(o),C.halfHeight.applyMatrix4(o),x++}else if(E.isPointLight){const C=i.point[m];C.position.setFromMatrixPosition(E.matrixWorld),C.position.applyMatrix4(w),m++}else if(E.isHemisphereLight){const C=i.hemi[b];C.direction.setFromMatrixPosition(E.matrixWorld),C.direction.transformDirection(w),b++}}}return{setup:a,setupView:l,state:i}}function IL(n){const e=new Yre(n),t=[],i=[];function r(u){c.camera=u,t.length=0,i.length=0}function s(u){t.push(u)}function o(u){i.push(u)}function a(){e.setup(t)}function l(u){e.setupView(t,u)}const c={lightsArray:t,shadowsArray:i,camera:null,lights:e,transmissionRenderTarget:{}};return{init:r,state:c,setupLights:a,setupLightsView:l,pushLight:s,pushShadow:o}}function Jre(n){let e=new WeakMap;function t(r,s=0){const o=e.get(r);let a;return o===void 0?(a=new IL(n),e.set(r,[a])):s>=o.length?(a=new IL(n),o.push(a)):a=o[s],a}function i(){e=new WeakMap}return{get:t,dispose:i}}const Qre=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,Zre=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function ese(n,e,t){let i=new Hg;const r=new Ie,s=new Ie,o=new mn,a=new bM({depthPacking:l4}),l=new SM,c={},u=t.maxTextureSize,p={[Oa]:Lr,[Lr]:Oa,[uo]:uo},m=new _o({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new Ie},radius:{value:4}},vertexShader:Qre,fragmentShader:Zre}),g=m.clone();g.defines.HORIZONTAL_PASS=1;const x=new Xt;x.setAttribute("position",new In(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const b=new _i(x,m),w=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=gw;let v=this.type;this.render=function(O,N,P){if(w.enabled===!1||w.autoUpdate===!1&&w.needsUpdate===!1||O.length===0)return;const A=n.getRenderTarget(),M=n.getActiveCubeFace(),D=n.getActiveMipmapLevel(),z=n.state;z.setBlending(Ta),z.buffers.color.setClear(1,1,1,1),z.buffers.depth.setTest(!0),z.setScissorTest(!1);const F=v!==oo&&this.type===oo,re=v===oo&&this.type!==oo;for(let le=0,he=O.length;le<he;le++){const ue=O[le],q=ue.shadow;if(q===void 0){console.warn("THREE.WebGLShadowMap:",ue,"has no shadow.");continue}if(q.autoUpdate===!1&&q.needsUpdate===!1)continue;r.copy(q.mapSize);const Q=q.getFrameExtents();if(r.multiply(Q),s.copy(q.mapSize),(r.x>u||r.y>u)&&(r.x>u&&(s.x=Math.floor(u/Q.x),r.x=s.x*Q.x,q.mapSize.x=s.x),r.y>u&&(s.y=Math.floor(u/Q.y),r.y=s.y*Q.y,q.mapSize.y=s.y)),q.map===null||F===!0||re===!0){const J=this.type!==oo?{minFilter:Yi,magFilter:Yi}:{};q.map!==null&&q.map.dispose(),q.map=new Xo(r.x,r.y,J),q.map.texture.name=ue.name+".shadowMap",q.camera.updateProjectionMatrix()}n.setRenderTarget(q.map),n.clear();const j=q.getViewportCount();for(let J=0;J<j;J++){const ce=q.getViewport(J);o.set(s.x*ce.x,s.y*ce.y,s.x*ce.z,s.y*ce.w),z.viewport(o),q.updateMatrices(ue,J),i=q.getFrustum(),C(N,P,q.camera,ue,this.type)}q.isPointLightShadow!==!0&&this.type===oo&&S(q,P),q.needsUpdate=!1}v=this.type,w.needsUpdate=!1,n.setRenderTarget(A,M,D)};function S(O,N){const P=e.update(b);m.defines.VSM_SAMPLES!==O.blurSamples&&(m.defines.VSM_SAMPLES=O.blurSamples,g.defines.VSM_SAMPLES=O.blurSamples,m.needsUpdate=!0,g.needsUpdate=!0),O.mapPass===null&&(O.mapPass=new Xo(r.x,r.y)),m.uniforms.shadow_pass.value=O.map.texture,m.uniforms.resolution.value=O.mapSize,m.uniforms.radius.value=O.radius,n.setRenderTarget(O.mapPass),n.clear(),n.renderBufferDirect(N,null,P,m,b,null),g.uniforms.shadow_pass.value=O.mapPass.texture,g.uniforms.resolution.value=O.mapSize,g.uniforms.radius.value=O.radius,n.setRenderTarget(O.map),n.clear(),n.renderBufferDirect(N,null,P,g,b,null)}function E(O,N,P,A){let M=null;const D=P.isPointLight===!0?O.customDistanceMaterial:O.customDepthMaterial;if(D!==void 0)M=D;else if(M=P.isPointLight===!0?l:a,n.localClippingEnabled&&N.clipShadows===!0&&Array.isArray(N.clippingPlanes)&&N.clippingPlanes.length!==0||N.displacementMap&&N.displacementScale!==0||N.alphaMap&&N.alphaTest>0||N.map&&N.alphaTest>0){const z=M.uuid,F=N.uuid;let re=c[z];re===void 0&&(re={},c[z]=re);let le=re[F];le===void 0&&(le=M.clone(),re[F]=le,N.addEventListener("dispose",U)),M=le}if(M.visible=N.visible,M.wireframe=N.wireframe,A===oo?M.side=N.shadowSide!==null?N.shadowSide:N.side:M.side=N.shadowSide!==null?N.shadowSide:p[N.side],M.alphaMap=N.alphaMap,M.alphaTest=N.alphaTest,M.map=N.map,M.clipShadows=N.clipShadows,M.clippingPlanes=N.clippingPlanes,M.clipIntersection=N.clipIntersection,M.displacementMap=N.displacementMap,M.displacementScale=N.displacementScale,M.displacementBias=N.displacementBias,M.wireframeLinewidth=N.wireframeLinewidth,M.linewidth=N.linewidth,P.isPointLight===!0&&M.isMeshDistanceMaterial===!0){const z=n.properties.get(M);z.light=P}return M}function C(O,N,P,A,M){if(O.visible===!1)return;if(O.layers.test(N.layers)&&(O.isMesh||O.isLine||O.isPoints)&&(O.castShadow||O.receiveShadow&&M===oo)&&(!O.frustumCulled||i.intersectsObject(O))){O.modelViewMatrix.multiplyMatrices(P.matrixWorldInverse,O.matrixWorld);const F=e.update(O),re=O.material;if(Array.isArray(re)){const le=F.groups;for(let he=0,ue=le.length;he<ue;he++){const q=le[he],Q=re[q.materialIndex];if(Q&&Q.visible){const j=E(O,Q,A,M);O.onBeforeShadow(n,O,N,P,F,j,q),n.renderBufferDirect(P,null,F,j,O,q),O.onAfterShadow(n,O,N,P,F,j,q)}}}else if(re.visible){const le=E(O,re,A,M);O.onBeforeShadow(n,O,N,P,F,le,null),n.renderBufferDirect(P,null,F,le,O,null),O.onAfterShadow(n,O,N,P,F,le,null)}}const z=O.children;for(let F=0,re=z.length;F<re;F++)C(z[F],N,P,A,M)}function U(O){O.target.removeEventListener("dispose",U);for(const P in c){const A=c[P],M=O.target.uuid;M in A&&(A[M].dispose(),delete A[M])}}}const tse={[N0]:D0,[L0]:U0,[k0]:j0,[Hu]:O0,[D0]:N0,[U0]:L0,[j0]:k0,[O0]:Hu};function nse(n,e){function t(){let Z=!1;const $e=new mn;let _e=null;const Te=new mn(0,0,0,0);return{setMask:function(Ke){_e!==Ke&&!Z&&(n.colorMask(Ke,Ke,Ke,Ke),_e=Ke)},setLocked:function(Ke){Z=Ke},setClear:function(Ke,ze,Rt,Cn,Yn){Yn===!0&&(Ke*=Cn,ze*=Cn,Rt*=Cn),$e.set(Ke,ze,Rt,Cn),Te.equals($e)===!1&&(n.clearColor(Ke,ze,Rt,Cn),Te.copy($e))},reset:function(){Z=!1,_e=null,Te.set(-1,0,0,0)}}}function i(){let Z=!1,$e=!1,_e=null,Te=null,Ke=null;return{setReversed:function(ze){if($e!==ze){const Rt=e.get("EXT_clip_control");$e?Rt.clipControlEXT(Rt.LOWER_LEFT_EXT,Rt.ZERO_TO_ONE_EXT):Rt.clipControlEXT(Rt.LOWER_LEFT_EXT,Rt.NEGATIVE_ONE_TO_ONE_EXT);const Cn=Ke;Ke=null,this.setClear(Cn)}$e=ze},getReversed:function(){return $e},setTest:function(ze){ze?Me(n.DEPTH_TEST):ht(n.DEPTH_TEST)},setMask:function(ze){_e!==ze&&!Z&&(n.depthMask(ze),_e=ze)},setFunc:function(ze){if($e&&(ze=tse[ze]),Te!==ze){switch(ze){case N0:n.depthFunc(n.NEVER);break;case D0:n.depthFunc(n.ALWAYS);break;case L0:n.depthFunc(n.LESS);break;case Hu:n.depthFunc(n.LEQUAL);break;case k0:n.depthFunc(n.EQUAL);break;case O0:n.depthFunc(n.GEQUAL);break;case U0:n.depthFunc(n.GREATER);break;case j0:n.depthFunc(n.NOTEQUAL);break;default:n.depthFunc(n.LEQUAL)}Te=ze}},setLocked:function(ze){Z=ze},setClear:function(ze){Ke!==ze&&($e&&(ze=1-ze),n.clearDepth(ze),Ke=ze)},reset:function(){Z=!1,_e=null,Te=null,Ke=null,$e=!1}}}function r(){let Z=!1,$e=null,_e=null,Te=null,Ke=null,ze=null,Rt=null,Cn=null,Yn=null;return{setTest:function(Zt){Z||(Zt?Me(n.STENCIL_TEST):ht(n.STENCIL_TEST))},setMask:function(Zt){$e!==Zt&&!Z&&(n.stencilMask(Zt),$e=Zt)},setFunc:function(Zt,Vi,Pn){(_e!==Zt||Te!==Vi||Ke!==Pn)&&(n.stencilFunc(Zt,Vi,Pn),_e=Zt,Te=Vi,Ke=Pn)},setOp:function(Zt,Vi,Pn){(ze!==Zt||Rt!==Vi||Cn!==Pn)&&(n.stencilOp(Zt,Vi,Pn),ze=Zt,Rt=Vi,Cn=Pn)},setLocked:function(Zt){Z=Zt},setClear:function(Zt){Yn!==Zt&&(n.clearStencil(Zt),Yn=Zt)},reset:function(){Z=!1,$e=null,_e=null,Te=null,Ke=null,ze=null,Rt=null,Cn=null,Yn=null}}}const s=new t,o=new i,a=new r,l=new WeakMap,c=new WeakMap;let u={},p={},m=new WeakMap,g=[],x=null,b=!1,w=null,v=null,S=null,E=null,C=null,U=null,O=null,N=new st(0,0,0),P=0,A=!1,M=null,D=null,z=null,F=null,re=null;const le=n.getParameter(n.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let he=!1,ue=0;const q=n.getParameter(n.VERSION);q.indexOf("WebGL")!==-1?(ue=parseFloat(/^WebGL (\d)/.exec(q)[1]),he=ue>=1):q.indexOf("OpenGL ES")!==-1&&(ue=parseFloat(/^OpenGL ES (\d)/.exec(q)[1]),he=ue>=2);let Q=null,j={};const J=n.getParameter(n.SCISSOR_BOX),ce=n.getParameter(n.VIEWPORT),me=new mn().fromArray(J),oe=new mn().fromArray(ce);function ye(Z,$e,_e,Te){const Ke=new Uint8Array(4),ze=n.createTexture();n.bindTexture(Z,ze),n.texParameteri(Z,n.TEXTURE_MIN_FILTER,n.NEAREST),n.texParameteri(Z,n.TEXTURE_MAG_FILTER,n.NEAREST);for(let Rt=0;Rt<_e;Rt++)Z===n.TEXTURE_3D||Z===n.TEXTURE_2D_ARRAY?n.texImage3D($e,0,n.RGBA,1,1,Te,0,n.RGBA,n.UNSIGNED_BYTE,Ke):n.texImage2D($e+Rt,0,n.RGBA,1,1,0,n.RGBA,n.UNSIGNED_BYTE,Ke);return ze}const Re={};Re[n.TEXTURE_2D]=ye(n.TEXTURE_2D,n.TEXTURE_2D,1),Re[n.TEXTURE_CUBE_MAP]=ye(n.TEXTURE_CUBE_MAP,n.TEXTURE_CUBE_MAP_POSITIVE_X,6),Re[n.TEXTURE_2D_ARRAY]=ye(n.TEXTURE_2D_ARRAY,n.TEXTURE_2D_ARRAY,1,1),Re[n.TEXTURE_3D]=ye(n.TEXTURE_3D,n.TEXTURE_3D,1,1),s.setClear(0,0,0,1),o.setClear(1),a.setClear(0),Me(n.DEPTH_TEST),o.setFunc(Hu),Ne(!1),qe(u1),Me(n.CULL_FACE),X(Ta);function Me(Z){u[Z]!==!0&&(n.enable(Z),u[Z]=!0)}function ht(Z){u[Z]!==!1&&(n.disable(Z),u[Z]=!1)}function zt(Z,$e){return p[Z]!==$e?(n.bindFramebuffer(Z,$e),p[Z]=$e,Z===n.DRAW_FRAMEBUFFER&&(p[n.FRAMEBUFFER]=$e),Z===n.FRAMEBUFFER&&(p[n.DRAW_FRAMEBUFFER]=$e),!0):!1}function Ge(Z,$e){let _e=g,Te=!1;if(Z){_e=m.get($e),_e===void 0&&(_e=[],m.set($e,_e));const Ke=Z.textures;if(_e.length!==Ke.length||_e[0]!==n.COLOR_ATTACHMENT0){for(let ze=0,Rt=Ke.length;ze<Rt;ze++)_e[ze]=n.COLOR_ATTACHMENT0+ze;_e.length=Ke.length,Te=!0}}else _e[0]!==n.BACK&&(_e[0]=n.BACK,Te=!0);Te&&n.drawBuffers(_e)}function Je(Z){return x!==Z?(n.useProgram(Z),x=Z,!0):!1}const Ce={[El]:n.FUNC_ADD,[NV]:n.FUNC_SUBTRACT,[DV]:n.FUNC_REVERSE_SUBTRACT};Ce[LV]=n.MIN,Ce[kV]=n.MAX;const Se={[OV]:n.ZERO,[UV]:n.ONE,[jV]:n.SRC_COLOR,[P0]:n.SRC_ALPHA,[GV]:n.SRC_ALPHA_SATURATE,[zV]:n.DST_COLOR,[VV]:n.DST_ALPHA,[FV]:n.ONE_MINUS_SRC_COLOR,[R0]:n.ONE_MINUS_SRC_ALPHA,[HV]:n.ONE_MINUS_DST_COLOR,[BV]:n.ONE_MINUS_DST_ALPHA,[WV]:n.CONSTANT_COLOR,[qV]:n.ONE_MINUS_CONSTANT_COLOR,[$V]:n.CONSTANT_ALPHA,[XV]:n.ONE_MINUS_CONSTANT_ALPHA};function X(Z,$e,_e,Te,Ke,ze,Rt,Cn,Yn,Zt){if(Z===Ta){b===!0&&(ht(n.BLEND),b=!1);return}if(b===!1&&(Me(n.BLEND),b=!0),Z!==RV){if(Z!==w||Zt!==A){if((v!==El||C!==El)&&(n.blendEquation(n.FUNC_ADD),v=El,C=El),Zt)switch(Z){case Tu:n.blendFuncSeparate(n.ONE,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case h1:n.blendFunc(n.ONE,n.ONE);break;case d1:n.blendFuncSeparate(n.ZERO,n.ONE_MINUS_SRC_COLOR,n.ZERO,n.ONE);break;case f1:n.blendFuncSeparate(n.ZERO,n.SRC_COLOR,n.ZERO,n.SRC_ALPHA);break;default:console.error("THREE.WebGLState: Invalid blending: ",Z);break}else switch(Z){case Tu:n.blendFuncSeparate(n.SRC_ALPHA,n.ONE_MINUS_SRC_ALPHA,n.ONE,n.ONE_MINUS_SRC_ALPHA);break;case h1:n.blendFunc(n.SRC_ALPHA,n.ONE);break;case d1:n.blendFuncSeparate(n.ZERO,n.ONE_MINUS_SRC_COLOR,n.ZERO,n.ONE);break;case f1:n.blendFunc(n.ZERO,n.SRC_COLOR);break;default:console.error("THREE.WebGLState: Invalid blending: ",Z);break}S=null,E=null,U=null,O=null,N.set(0,0,0),P=0,w=Z,A=Zt}return}Ke=Ke||$e,ze=ze||_e,Rt=Rt||Te,($e!==v||Ke!==C)&&(n.blendEquationSeparate(Ce[$e],Ce[Ke]),v=$e,C=Ke),(_e!==S||Te!==E||ze!==U||Rt!==O)&&(n.blendFuncSeparate(Se[_e],Se[Te],Se[ze],Se[Rt]),S=_e,E=Te,U=ze,O=Rt),(Cn.equals(N)===!1||Yn!==P)&&(n.blendColor(Cn.r,Cn.g,Cn.b,Yn),N.copy(Cn),P=Yn),w=Z,A=!1}function ot(Z,$e){Z.side===uo?ht(n.CULL_FACE):Me(n.CULL_FACE);let _e=Z.side===Lr;$e&&(_e=!_e),Ne(_e),Z.blending===Tu&&Z.transparent===!1?X(Ta):X(Z.blending,Z.blendEquation,Z.blendSrc,Z.blendDst,Z.blendEquationAlpha,Z.blendSrcAlpha,Z.blendDstAlpha,Z.blendColor,Z.blendAlpha,Z.premultipliedAlpha),o.setFunc(Z.depthFunc),o.setTest(Z.depthTest),o.setMask(Z.depthWrite),s.setMask(Z.colorWrite);const Te=Z.stencilWrite;a.setTest(Te),Te&&(a.setMask(Z.stencilWriteMask),a.setFunc(Z.stencilFunc,Z.stencilRef,Z.stencilFuncMask),a.setOp(Z.stencilFail,Z.stencilZFail,Z.stencilZPass)),gt(Z.polygonOffset,Z.polygonOffsetFactor,Z.polygonOffsetUnits),Z.alphaToCoverage===!0?Me(n.SAMPLE_ALPHA_TO_COVERAGE):ht(n.SAMPLE_ALPHA_TO_COVERAGE)}function Ne(Z){M!==Z&&(Z?n.frontFace(n.CW):n.frontFace(n.CCW),M=Z)}function qe(Z){Z!==MV?(Me(n.CULL_FACE),Z!==D&&(Z===u1?n.cullFace(n.BACK):Z===IV?n.cullFace(n.FRONT):n.cullFace(n.FRONT_AND_BACK))):ht(n.CULL_FACE),D=Z}function Ue(Z){Z!==z&&(he&&n.lineWidth(Z),z=Z)}function gt(Z,$e,_e){Z?(Me(n.POLYGON_OFFSET_FILL),(F!==$e||re!==_e)&&(n.polygonOffset($e,_e),F=$e,re=_e)):ht(n.POLYGON_OFFSET_FILL)}function Ve(Z){Z?Me(n.SCISSOR_TEST):ht(n.SCISSOR_TEST)}function $(Z){Z===void 0&&(Z=n.TEXTURE0+le-1),Q!==Z&&(n.activeTexture(Z),Q=Z)}function B(Z,$e,_e){_e===void 0&&(Q===null?_e=n.TEXTURE0+le-1:_e=Q);let Te=j[_e];Te===void 0&&(Te={type:void 0,texture:void 0},j[_e]=Te),(Te.type!==Z||Te.texture!==$e)&&(Q!==_e&&(n.activeTexture(_e),Q=_e),n.bindTexture(Z,$e||Re[Z]),Te.type=Z,Te.texture=$e)}function ae(){const Z=j[Q];Z!==void 0&&Z.type!==void 0&&(n.bindTexture(Z.type,null),Z.type=void 0,Z.texture=void 0)}function be(){try{n.compressedTexImage2D(...arguments)}catch(Z){console.error("THREE.WebGLState:",Z)}}function Pe(){try{n.compressedTexImage3D(...arguments)}catch(Z){console.error("THREE.WebGLState:",Z)}}function ve(){try{n.texSubImage2D(...arguments)}catch(Z){console.error("THREE.WebGLState:",Z)}}function Fe(){try{n.texSubImage3D(...arguments)}catch(Z){console.error("THREE.WebGLState:",Z)}}function We(){try{n.compressedTexSubImage2D(...arguments)}catch(Z){console.error("THREE.WebGLState:",Z)}}function tt(){try{n.compressedTexSubImage3D(...arguments)}catch(Z){console.error("THREE.WebGLState:",Z)}}function Gt(){try{n.texStorage2D(...arguments)}catch(Z){console.error("THREE.WebGLState:",Z)}}function Le(){try{n.texStorage3D(...arguments)}catch(Z){console.error("THREE.WebGLState:",Z)}}function nt(){try{n.texImage2D(...arguments)}catch(Z){console.error("THREE.WebGLState:",Z)}}function wt(){try{n.texImage3D(...arguments)}catch(Z){console.error("THREE.WebGLState:",Z)}}function Tt(Z){me.equals(Z)===!1&&(n.scissor(Z.x,Z.y,Z.z,Z.w),me.copy(Z))}function rt(Z){oe.equals(Z)===!1&&(n.viewport(Z.x,Z.y,Z.z,Z.w),oe.copy(Z))}function Qt(Z,$e){let _e=c.get($e);_e===void 0&&(_e=new WeakMap,c.set($e,_e));let Te=_e.get(Z);Te===void 0&&(Te=n.getUniformBlockIndex($e,Z.name),_e.set(Z,Te))}function Nt(Z,$e){const Te=c.get($e).get(Z);l.get($e)!==Te&&(n.uniformBlockBinding($e,Te,Z.__bindingPointIndex),l.set($e,Te))}function xn(){n.disable(n.BLEND),n.disable(n.CULL_FACE),n.disable(n.DEPTH_TEST),n.disable(n.POLYGON_OFFSET_FILL),n.disable(n.SCISSOR_TEST),n.disable(n.STENCIL_TEST),n.disable(n.SAMPLE_ALPHA_TO_COVERAGE),n.blendEquation(n.FUNC_ADD),n.blendFunc(n.ONE,n.ZERO),n.blendFuncSeparate(n.ONE,n.ZERO,n.ONE,n.ZERO),n.blendColor(0,0,0,0),n.colorMask(!0,!0,!0,!0),n.clearColor(0,0,0,0),n.depthMask(!0),n.depthFunc(n.LESS),o.setReversed(!1),n.clearDepth(1),n.stencilMask(4294967295),n.stencilFunc(n.ALWAYS,0,4294967295),n.stencilOp(n.KEEP,n.KEEP,n.KEEP),n.clearStencil(0),n.cullFace(n.BACK),n.frontFace(n.CCW),n.polygonOffset(0,0),n.activeTexture(n.TEXTURE0),n.bindFramebuffer(n.FRAMEBUFFER,null),n.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),n.bindFramebuffer(n.READ_FRAMEBUFFER,null),n.useProgram(null),n.lineWidth(1),n.scissor(0,0,n.canvas.width,n.canvas.height),n.viewport(0,0,n.canvas.width,n.canvas.height),u={},Q=null,j={},p={},m=new WeakMap,g=[],x=null,b=!1,w=null,v=null,S=null,E=null,C=null,U=null,O=null,N=new st(0,0,0),P=0,A=!1,M=null,D=null,z=null,F=null,re=null,me.set(0,0,n.canvas.width,n.canvas.height),oe.set(0,0,n.canvas.width,n.canvas.height),s.reset(),o.reset(),a.reset()}return{buffers:{color:s,depth:o,stencil:a},enable:Me,disable:ht,bindFramebuffer:zt,drawBuffers:Ge,useProgram:Je,setBlending:X,setMaterial:ot,setFlipSided:Ne,setCullFace:qe,setLineWidth:Ue,setPolygonOffset:gt,setScissorTest:Ve,activeTexture:$,bindTexture:B,unbindTexture:ae,compressedTexImage2D:be,compressedTexImage3D:Pe,texImage2D:nt,texImage3D:wt,updateUBOMapping:Qt,uniformBlockBinding:Nt,texStorage2D:Gt,texStorage3D:Le,texSubImage2D:ve,texSubImage3D:Fe,compressedTexSubImage2D:We,compressedTexSubImage3D:tt,scissor:Tt,viewport:rt,reset:xn}}function ise(n,e,t,i,r,s,o){const a=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,l=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),c=new Ie,u=new WeakMap;let p;const m=new WeakMap;let g=!1;try{g=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function x($,B){return g?new OffscreenCanvas($,B):rg("canvas")}function b($,B,ae){let be=1;const Pe=Ve($);if((Pe.width>ae||Pe.height>ae)&&(be=ae/Math.max(Pe.width,Pe.height)),be<1)if(typeof HTMLImageElement<"u"&&$ instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&$ instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&$ instanceof ImageBitmap||typeof VideoFrame<"u"&&$ instanceof VideoFrame){const ve=Math.floor(be*Pe.width),Fe=Math.floor(be*Pe.height);p===void 0&&(p=x(ve,Fe));const We=B?x(ve,Fe):p;return We.width=ve,We.height=Fe,We.getContext("2d").drawImage($,0,0,ve,Fe),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+Pe.width+"x"+Pe.height+") to ("+ve+"x"+Fe+")."),We}else return"data"in $&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+Pe.width+"x"+Pe.height+")."),$;return $}function w($){return $.generateMipmaps}function v($){n.generateMipmap($)}function S($){return $.isWebGLCubeRenderTarget?n.TEXTURE_CUBE_MAP:$.isWebGL3DRenderTarget?n.TEXTURE_3D:$.isWebGLArrayRenderTarget||$.isCompressedArrayTexture?n.TEXTURE_2D_ARRAY:n.TEXTURE_2D}function E($,B,ae,be,Pe=!1){if($!==null){if(n[$]!==void 0)return n[$];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+$+"'")}let ve=B;if(B===n.RED&&(ae===n.FLOAT&&(ve=n.R32F),ae===n.HALF_FLOAT&&(ve=n.R16F),ae===n.UNSIGNED_BYTE&&(ve=n.R8)),B===n.RED_INTEGER&&(ae===n.UNSIGNED_BYTE&&(ve=n.R8UI),ae===n.UNSIGNED_SHORT&&(ve=n.R16UI),ae===n.UNSIGNED_INT&&(ve=n.R32UI),ae===n.BYTE&&(ve=n.R8I),ae===n.SHORT&&(ve=n.R16I),ae===n.INT&&(ve=n.R32I)),B===n.RG&&(ae===n.FLOAT&&(ve=n.RG32F),ae===n.HALF_FLOAT&&(ve=n.RG16F),ae===n.UNSIGNED_BYTE&&(ve=n.RG8)),B===n.RG_INTEGER&&(ae===n.UNSIGNED_BYTE&&(ve=n.RG8UI),ae===n.UNSIGNED_SHORT&&(ve=n.RG16UI),ae===n.UNSIGNED_INT&&(ve=n.RG32UI),ae===n.BYTE&&(ve=n.RG8I),ae===n.SHORT&&(ve=n.RG16I),ae===n.INT&&(ve=n.RG32I)),B===n.RGB_INTEGER&&(ae===n.UNSIGNED_BYTE&&(ve=n.RGB8UI),ae===n.UNSIGNED_SHORT&&(ve=n.RGB16UI),ae===n.UNSIGNED_INT&&(ve=n.RGB32UI),ae===n.BYTE&&(ve=n.RGB8I),ae===n.SHORT&&(ve=n.RGB16I),ae===n.INT&&(ve=n.RGB32I)),B===n.RGBA_INTEGER&&(ae===n.UNSIGNED_BYTE&&(ve=n.RGBA8UI),ae===n.UNSIGNED_SHORT&&(ve=n.RGBA16UI),ae===n.UNSIGNED_INT&&(ve=n.RGBA32UI),ae===n.BYTE&&(ve=n.RGBA8I),ae===n.SHORT&&(ve=n.RGBA16I),ae===n.INT&&(ve=n.RGBA32I)),B===n.RGB&&ae===n.UNSIGNED_INT_5_9_9_9_REV&&(ve=n.RGB9_E5),B===n.RGBA){const Fe=Pe?tg:dn.getTransfer(be);ae===n.FLOAT&&(ve=n.RGBA32F),ae===n.HALF_FLOAT&&(ve=n.RGBA16F),ae===n.UNSIGNED_BYTE&&(ve=Fe===An?n.SRGB8_ALPHA8:n.RGBA8),ae===n.UNSIGNED_SHORT_4_4_4_4&&(ve=n.RGBA4),ae===n.UNSIGNED_SHORT_5_5_5_1&&(ve=n.RGB5_A1)}return(ve===n.R16F||ve===n.R32F||ve===n.RG16F||ve===n.RG32F||ve===n.RGBA16F||ve===n.RGBA32F)&&e.get("EXT_color_buffer_float"),ve}function C($,B){let ae;return $?B===null||B===ja||B===Gu?ae=n.DEPTH24_STENCIL8:B===Qr?ae=n.DEPTH32F_STENCIL8:B===rf&&(ae=n.DEPTH24_STENCIL8,console.warn("DepthTexture: 16 bit depth attachment is not supported with stencil. Using 24-bit attachment.")):B===null||B===ja||B===Gu?ae=n.DEPTH_COMPONENT24:B===Qr?ae=n.DEPTH_COMPONENT32F:B===rf&&(ae=n.DEPTH_COMPONENT16),ae}function U($,B){return w($)===!0||$.isFramebufferTexture&&$.minFilter!==Yi&&$.minFilter!==Mi?Math.log2(Math.max(B.width,B.height))+1:$.mipmaps!==void 0&&$.mipmaps.length>0?$.mipmaps.length:$.isCompressedTexture&&Array.isArray($.image)?B.mipmaps.length:1}function O($){const B=$.target;B.removeEventListener("dispose",O),P(B),B.isVideoTexture&&u.delete(B)}function N($){const B=$.target;B.removeEventListener("dispose",N),M(B)}function P($){const B=i.get($);if(B.__webglInit===void 0)return;const ae=$.source,be=m.get(ae);if(be){const Pe=be[B.__cacheKey];Pe.usedTimes--,Pe.usedTimes===0&&A($),Object.keys(be).length===0&&m.delete(ae)}i.remove($)}function A($){const B=i.get($);n.deleteTexture(B.__webglTexture);const ae=$.source,be=m.get(ae);delete be[B.__cacheKey],o.memory.textures--}function M($){const B=i.get($);if($.depthTexture&&($.depthTexture.dispose(),i.remove($.depthTexture)),$.isWebGLCubeRenderTarget)for(let be=0;be<6;be++){if(Array.isArray(B.__webglFramebuffer[be]))for(let Pe=0;Pe<B.__webglFramebuffer[be].length;Pe++)n.deleteFramebuffer(B.__webglFramebuffer[be][Pe]);else n.deleteFramebuffer(B.__webglFramebuffer[be]);B.__webglDepthbuffer&&n.deleteRenderbuffer(B.__webglDepthbuffer[be])}else{if(Array.isArray(B.__webglFramebuffer))for(let be=0;be<B.__webglFramebuffer.length;be++)n.deleteFramebuffer(B.__webglFramebuffer[be]);else n.deleteFramebuffer(B.__webglFramebuffer);if(B.__webglDepthbuffer&&n.deleteRenderbuffer(B.__webglDepthbuffer),B.__webglMultisampledFramebuffer&&n.deleteFramebuffer(B.__webglMultisampledFramebuffer),B.__webglColorRenderbuffer)for(let be=0;be<B.__webglColorRenderbuffer.length;be++)B.__webglColorRenderbuffer[be]&&n.deleteRenderbuffer(B.__webglColorRenderbuffer[be]);B.__webglDepthRenderbuffer&&n.deleteRenderbuffer(B.__webglDepthRenderbuffer)}const ae=$.textures;for(let be=0,Pe=ae.length;be<Pe;be++){const ve=i.get(ae[be]);ve.__webglTexture&&(n.deleteTexture(ve.__webglTexture),o.memory.textures--),i.remove(ae[be])}i.remove($)}let D=0;function z(){D=0}function F(){const $=D;return $>=r.maxTextures&&console.warn("THREE.WebGLTextures: Trying to use "+$+" texture units while this GPU supports only "+r.maxTextures),D+=1,$}function re($){const B=[];return B.push($.wrapS),B.push($.wrapT),B.push($.wrapR||0),B.push($.magFilter),B.push($.minFilter),B.push($.anisotropy),B.push($.internalFormat),B.push($.format),B.push($.type),B.push($.generateMipmaps),B.push($.premultiplyAlpha),B.push($.flipY),B.push($.unpackAlignment),B.push($.colorSpace),B.join()}function le($,B){const ae=i.get($);if($.isVideoTexture&&Ue($),$.isRenderTargetTexture===!1&&$.version>0&&ae.__version!==$.version){const be=$.image;if(be===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(be.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{oe(ae,$,B);return}}t.bindTexture(n.TEXTURE_2D,ae.__webglTexture,n.TEXTURE0+B)}function he($,B){const ae=i.get($);if($.version>0&&ae.__version!==$.version){oe(ae,$,B);return}t.bindTexture(n.TEXTURE_2D_ARRAY,ae.__webglTexture,n.TEXTURE0+B)}function ue($,B){const ae=i.get($);if($.version>0&&ae.__version!==$.version){oe(ae,$,B);return}t.bindTexture(n.TEXTURE_3D,ae.__webglTexture,n.TEXTURE0+B)}function q($,B){const ae=i.get($);if($.version>0&&ae.__version!==$.version){ye(ae,$,B);return}t.bindTexture(n.TEXTURE_CUBE_MAP,ae.__webglTexture,n.TEXTURE0+B)}const Q={[Jm]:n.REPEAT,[Gs]:n.CLAMP_TO_EDGE,[Qm]:n.MIRRORED_REPEAT},j={[Yi]:n.NEAREST,[XA]:n.NEAREST_MIPMAP_NEAREST,[vd]:n.NEAREST_MIPMAP_LINEAR,[Mi]:n.LINEAR,[im]:n.LINEAR_MIPMAP_NEAREST,[Do]:n.LINEAR_MIPMAP_LINEAR},J={[u4]:n.NEVER,[g4]:n.ALWAYS,[h4]:n.LESS,[sM]:n.LEQUAL,[d4]:n.EQUAL,[m4]:n.GEQUAL,[f4]:n.GREATER,[p4]:n.NOTEQUAL};function ce($,B){if(B.type===Qr&&e.has("OES_texture_float_linear")===!1&&(B.magFilter===Mi||B.magFilter===im||B.magFilter===vd||B.magFilter===Do||B.minFilter===Mi||B.minFilter===im||B.minFilter===vd||B.minFilter===Do)&&console.warn("THREE.WebGLRenderer: Unable to use linear filtering with floating point textures. OES_texture_float_linear not supported on this device."),n.texParameteri($,n.TEXTURE_WRAP_S,Q[B.wrapS]),n.texParameteri($,n.TEXTURE_WRAP_T,Q[B.wrapT]),($===n.TEXTURE_3D||$===n.TEXTURE_2D_ARRAY)&&n.texParameteri($,n.TEXTURE_WRAP_R,Q[B.wrapR]),n.texParameteri($,n.TEXTURE_MAG_FILTER,j[B.magFilter]),n.texParameteri($,n.TEXTURE_MIN_FILTER,j[B.minFilter]),B.compareFunction&&(n.texParameteri($,n.TEXTURE_COMPARE_MODE,n.COMPARE_REF_TO_TEXTURE),n.texParameteri($,n.TEXTURE_COMPARE_FUNC,J[B.compareFunction])),e.has("EXT_texture_filter_anisotropic")===!0){if(B.magFilter===Yi||B.minFilter!==vd&&B.minFilter!==Do||B.type===Qr&&e.has("OES_texture_float_linear")===!1)return;if(B.anisotropy>1||i.get(B).__currentAnisotropy){const ae=e.get("EXT_texture_filter_anisotropic");n.texParameterf($,ae.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(B.anisotropy,r.getMaxAnisotropy())),i.get(B).__currentAnisotropy=B.anisotropy}}}function me($,B){let ae=!1;$.__webglInit===void 0&&($.__webglInit=!0,B.addEventListener("dispose",O));const be=B.source;let Pe=m.get(be);Pe===void 0&&(Pe={},m.set(be,Pe));const ve=re(B);if(ve!==$.__cacheKey){Pe[ve]===void 0&&(Pe[ve]={texture:n.createTexture(),usedTimes:0},o.memory.textures++,ae=!0),Pe[ve].usedTimes++;const Fe=Pe[$.__cacheKey];Fe!==void 0&&(Pe[$.__cacheKey].usedTimes--,Fe.usedTimes===0&&A(B)),$.__cacheKey=ve,$.__webglTexture=Pe[ve].texture}return ae}function oe($,B,ae){let be=n.TEXTURE_2D;(B.isDataArrayTexture||B.isCompressedArrayTexture)&&(be=n.TEXTURE_2D_ARRAY),B.isData3DTexture&&(be=n.TEXTURE_3D);const Pe=me($,B),ve=B.source;t.bindTexture(be,$.__webglTexture,n.TEXTURE0+ae);const Fe=i.get(ve);if(ve.version!==Fe.__version||Pe===!0){t.activeTexture(n.TEXTURE0+ae);const We=dn.getPrimaries(dn.workingColorSpace),tt=B.colorSpace===fa?null:dn.getPrimaries(B.colorSpace),Gt=B.colorSpace===fa||We===tt?n.NONE:n.BROWSER_DEFAULT_WEBGL;n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,B.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,B.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,B.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,Gt);let Le=b(B.image,!1,r.maxTextureSize);Le=gt(B,Le);const nt=s.convert(B.format,B.colorSpace),wt=s.convert(B.type);let Tt=E(B.internalFormat,nt,wt,B.colorSpace,B.isVideoTexture);ce(be,B);let rt;const Qt=B.mipmaps,Nt=B.isVideoTexture!==!0,xn=Fe.__version===void 0||Pe===!0,Z=ve.dataReady,$e=U(B,Le);if(B.isDepthTexture)Tt=C(B.format===Wu,B.type),xn&&(Nt?t.texStorage2D(n.TEXTURE_2D,1,Tt,Le.width,Le.height):t.texImage2D(n.TEXTURE_2D,0,Tt,Le.width,Le.height,0,nt,wt,null));else if(B.isDataTexture)if(Qt.length>0){Nt&&xn&&t.texStorage2D(n.TEXTURE_2D,$e,Tt,Qt[0].width,Qt[0].height);for(let _e=0,Te=Qt.length;_e<Te;_e++)rt=Qt[_e],Nt?Z&&t.texSubImage2D(n.TEXTURE_2D,_e,0,0,rt.width,rt.height,nt,wt,rt.data):t.texImage2D(n.TEXTURE_2D,_e,Tt,rt.width,rt.height,0,nt,wt,rt.data);B.generateMipmaps=!1}else Nt?(xn&&t.texStorage2D(n.TEXTURE_2D,$e,Tt,Le.width,Le.height),Z&&t.texSubImage2D(n.TEXTURE_2D,0,0,0,Le.width,Le.height,nt,wt,Le.data)):t.texImage2D(n.TEXTURE_2D,0,Tt,Le.width,Le.height,0,nt,wt,Le.data);else if(B.isCompressedTexture)if(B.isCompressedArrayTexture){Nt&&xn&&t.texStorage3D(n.TEXTURE_2D_ARRAY,$e,Tt,Qt[0].width,Qt[0].height,Le.depth);for(let _e=0,Te=Qt.length;_e<Te;_e++)if(rt=Qt[_e],B.format!==gr)if(nt!==null)if(Nt){if(Z)if(B.layerUpdates.size>0){const Ke=S1(rt.width,rt.height,B.format,B.type);for(const ze of B.layerUpdates){const Rt=rt.data.subarray(ze*Ke/rt.data.BYTES_PER_ELEMENT,(ze+1)*Ke/rt.data.BYTES_PER_ELEMENT);t.compressedTexSubImage3D(n.TEXTURE_2D_ARRAY,_e,0,0,ze,rt.width,rt.height,1,nt,Rt)}B.clearLayerUpdates()}else t.compressedTexSubImage3D(n.TEXTURE_2D_ARRAY,_e,0,0,0,rt.width,rt.height,Le.depth,nt,rt.data)}else t.compressedTexImage3D(n.TEXTURE_2D_ARRAY,_e,Tt,rt.width,rt.height,Le.depth,0,rt.data,0,0);else console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()");else Nt?Z&&t.texSubImage3D(n.TEXTURE_2D_ARRAY,_e,0,0,0,rt.width,rt.height,Le.depth,nt,wt,rt.data):t.texImage3D(n.TEXTURE_2D_ARRAY,_e,Tt,rt.width,rt.height,Le.depth,0,nt,wt,rt.data)}else{Nt&&xn&&t.texStorage2D(n.TEXTURE_2D,$e,Tt,Qt[0].width,Qt[0].height);for(let _e=0,Te=Qt.length;_e<Te;_e++)rt=Qt[_e],B.format!==gr?nt!==null?Nt?Z&&t.compressedTexSubImage2D(n.TEXTURE_2D,_e,0,0,rt.width,rt.height,nt,rt.data):t.compressedTexImage2D(n.TEXTURE_2D,_e,Tt,rt.width,rt.height,0,rt.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):Nt?Z&&t.texSubImage2D(n.TEXTURE_2D,_e,0,0,rt.width,rt.height,nt,wt,rt.data):t.texImage2D(n.TEXTURE_2D,_e,Tt,rt.width,rt.height,0,nt,wt,rt.data)}else if(B.isDataArrayTexture)if(Nt){if(xn&&t.texStorage3D(n.TEXTURE_2D_ARRAY,$e,Tt,Le.width,Le.height,Le.depth),Z)if(B.layerUpdates.size>0){const _e=S1(Le.width,Le.height,B.format,B.type);for(const Te of B.layerUpdates){const Ke=Le.data.subarray(Te*_e/Le.data.BYTES_PER_ELEMENT,(Te+1)*_e/Le.data.BYTES_PER_ELEMENT);t.texSubImage3D(n.TEXTURE_2D_ARRAY,0,0,0,Te,Le.width,Le.height,1,nt,wt,Ke)}B.clearLayerUpdates()}else t.texSubImage3D(n.TEXTURE_2D_ARRAY,0,0,0,0,Le.width,Le.height,Le.depth,nt,wt,Le.data)}else t.texImage3D(n.TEXTURE_2D_ARRAY,0,Tt,Le.width,Le.height,Le.depth,0,nt,wt,Le.data);else if(B.isData3DTexture)Nt?(xn&&t.texStorage3D(n.TEXTURE_3D,$e,Tt,Le.width,Le.height,Le.depth),Z&&t.texSubImage3D(n.TEXTURE_3D,0,0,0,0,Le.width,Le.height,Le.depth,nt,wt,Le.data)):t.texImage3D(n.TEXTURE_3D,0,Tt,Le.width,Le.height,Le.depth,0,nt,wt,Le.data);else if(B.isFramebufferTexture){if(xn)if(Nt)t.texStorage2D(n.TEXTURE_2D,$e,Tt,Le.width,Le.height);else{let _e=Le.width,Te=Le.height;for(let Ke=0;Ke<$e;Ke++)t.texImage2D(n.TEXTURE_2D,Ke,Tt,_e,Te,0,nt,wt,null),_e>>=1,Te>>=1}}else if(Qt.length>0){if(Nt&&xn){const _e=Ve(Qt[0]);t.texStorage2D(n.TEXTURE_2D,$e,Tt,_e.width,_e.height)}for(let _e=0,Te=Qt.length;_e<Te;_e++)rt=Qt[_e],Nt?Z&&t.texSubImage2D(n.TEXTURE_2D,_e,0,0,nt,wt,rt):t.texImage2D(n.TEXTURE_2D,_e,Tt,nt,wt,rt);B.generateMipmaps=!1}else if(Nt){if(xn){const _e=Ve(Le);t.texStorage2D(n.TEXTURE_2D,$e,Tt,_e.width,_e.height)}Z&&t.texSubImage2D(n.TEXTURE_2D,0,0,0,nt,wt,Le)}else t.texImage2D(n.TEXTURE_2D,0,Tt,nt,wt,Le);w(B)&&v(be),Fe.__version=ve.version,B.onUpdate&&B.onUpdate(B)}$.__version=B.version}function ye($,B,ae){if(B.image.length!==6)return;const be=me($,B),Pe=B.source;t.bindTexture(n.TEXTURE_CUBE_MAP,$.__webglTexture,n.TEXTURE0+ae);const ve=i.get(Pe);if(Pe.version!==ve.__version||be===!0){t.activeTexture(n.TEXTURE0+ae);const Fe=dn.getPrimaries(dn.workingColorSpace),We=B.colorSpace===fa?null:dn.getPrimaries(B.colorSpace),tt=B.colorSpace===fa||Fe===We?n.NONE:n.BROWSER_DEFAULT_WEBGL;n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,B.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,B.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,B.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,tt);const Gt=B.isCompressedTexture||B.image[0].isCompressedTexture,Le=B.image[0]&&B.image[0].isDataTexture,nt=[];for(let Te=0;Te<6;Te++)!Gt&&!Le?nt[Te]=b(B.image[Te],!0,r.maxCubemapSize):nt[Te]=Le?B.image[Te].image:B.image[Te],nt[Te]=gt(B,nt[Te]);const wt=nt[0],Tt=s.convert(B.format,B.colorSpace),rt=s.convert(B.type),Qt=E(B.internalFormat,Tt,rt,B.colorSpace),Nt=B.isVideoTexture!==!0,xn=ve.__version===void 0||be===!0,Z=Pe.dataReady;let $e=U(B,wt);ce(n.TEXTURE_CUBE_MAP,B);let _e;if(Gt){Nt&&xn&&t.texStorage2D(n.TEXTURE_CUBE_MAP,$e,Qt,wt.width,wt.height);for(let Te=0;Te<6;Te++){_e=nt[Te].mipmaps;for(let Ke=0;Ke<_e.length;Ke++){const ze=_e[Ke];B.format!==gr?Tt!==null?Nt?Z&&t.compressedTexSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Te,Ke,0,0,ze.width,ze.height,Tt,ze.data):t.compressedTexImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Te,Ke,Qt,ze.width,ze.height,0,ze.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):Nt?Z&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Te,Ke,0,0,ze.width,ze.height,Tt,rt,ze.data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Te,Ke,Qt,ze.width,ze.height,0,Tt,rt,ze.data)}}}else{if(_e=B.mipmaps,Nt&&xn){_e.length>0&&$e++;const Te=Ve(nt[0]);t.texStorage2D(n.TEXTURE_CUBE_MAP,$e,Qt,Te.width,Te.height)}for(let Te=0;Te<6;Te++)if(Le){Nt?Z&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Te,0,0,0,nt[Te].width,nt[Te].height,Tt,rt,nt[Te].data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Te,0,Qt,nt[Te].width,nt[Te].height,0,Tt,rt,nt[Te].data);for(let Ke=0;Ke<_e.length;Ke++){const Rt=_e[Ke].image[Te].image;Nt?Z&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Te,Ke+1,0,0,Rt.width,Rt.height,Tt,rt,Rt.data):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Te,Ke+1,Qt,Rt.width,Rt.height,0,Tt,rt,Rt.data)}}else{Nt?Z&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Te,0,0,0,Tt,rt,nt[Te]):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Te,0,Qt,Tt,rt,nt[Te]);for(let Ke=0;Ke<_e.length;Ke++){const ze=_e[Ke];Nt?Z&&t.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Te,Ke+1,0,0,Tt,rt,ze.image[Te]):t.texImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+Te,Ke+1,Qt,Tt,rt,ze.image[Te])}}}w(B)&&v(n.TEXTURE_CUBE_MAP),ve.__version=Pe.version,B.onUpdate&&B.onUpdate(B)}$.__version=B.version}function Re($,B,ae,be,Pe,ve){const Fe=s.convert(ae.format,ae.colorSpace),We=s.convert(ae.type),tt=E(ae.internalFormat,Fe,We,ae.colorSpace),Gt=i.get(B),Le=i.get(ae);if(Le.__renderTarget=B,!Gt.__hasExternalTextures){const nt=Math.max(1,B.width>>ve),wt=Math.max(1,B.height>>ve);Pe===n.TEXTURE_3D||Pe===n.TEXTURE_2D_ARRAY?t.texImage3D(Pe,ve,tt,nt,wt,B.depth,0,Fe,We,null):t.texImage2D(Pe,ve,tt,nt,wt,0,Fe,We,null)}t.bindFramebuffer(n.FRAMEBUFFER,$),qe(B)?a.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,be,Pe,Le.__webglTexture,0,Ne(B)):(Pe===n.TEXTURE_2D||Pe>=n.TEXTURE_CUBE_MAP_POSITIVE_X&&Pe<=n.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&n.framebufferTexture2D(n.FRAMEBUFFER,be,Pe,Le.__webglTexture,ve),t.bindFramebuffer(n.FRAMEBUFFER,null)}function Me($,B,ae){if(n.bindRenderbuffer(n.RENDERBUFFER,$),B.depthBuffer){const be=B.depthTexture,Pe=be&&be.isDepthTexture?be.type:null,ve=C(B.stencilBuffer,Pe),Fe=B.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,We=Ne(B);qe(B)?a.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,We,ve,B.width,B.height):ae?n.renderbufferStorageMultisample(n.RENDERBUFFER,We,ve,B.width,B.height):n.renderbufferStorage(n.RENDERBUFFER,ve,B.width,B.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,Fe,n.RENDERBUFFER,$)}else{const be=B.textures;for(let Pe=0;Pe<be.length;Pe++){const ve=be[Pe],Fe=s.convert(ve.format,ve.colorSpace),We=s.convert(ve.type),tt=E(ve.internalFormat,Fe,We,ve.colorSpace),Gt=Ne(B);ae&&qe(B)===!1?n.renderbufferStorageMultisample(n.RENDERBUFFER,Gt,tt,B.width,B.height):qe(B)?a.renderbufferStorageMultisampleEXT(n.RENDERBUFFER,Gt,tt,B.width,B.height):n.renderbufferStorage(n.RENDERBUFFER,tt,B.width,B.height)}}n.bindRenderbuffer(n.RENDERBUFFER,null)}function ht($,B){if(B&&B.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(t.bindFramebuffer(n.FRAMEBUFFER,$),!(B.depthTexture&&B.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");const be=i.get(B.depthTexture);be.__renderTarget=B,(!be.__webglTexture||B.depthTexture.image.width!==B.width||B.depthTexture.image.height!==B.height)&&(B.depthTexture.image.width=B.width,B.depthTexture.image.height=B.height,B.depthTexture.needsUpdate=!0),le(B.depthTexture,0);const Pe=be.__webglTexture,ve=Ne(B);if(B.depthTexture.format===Eu)qe(B)?a.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,Pe,0,ve):n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,Pe,0);else if(B.depthTexture.format===Wu)qe(B)?a.framebufferTexture2DMultisampleEXT(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.TEXTURE_2D,Pe,0,ve):n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.TEXTURE_2D,Pe,0);else throw new Error("Unknown depthTexture format")}function zt($){const B=i.get($),ae=$.isWebGLCubeRenderTarget===!0;if(B.__boundDepthTexture!==$.depthTexture){const be=$.depthTexture;if(B.__depthDisposeCallback&&B.__depthDisposeCallback(),be){const Pe=()=>{delete B.__boundDepthTexture,delete B.__depthDisposeCallback,be.removeEventListener("dispose",Pe)};be.addEventListener("dispose",Pe),B.__depthDisposeCallback=Pe}B.__boundDepthTexture=be}if($.depthTexture&&!B.__autoAllocateDepthBuffer){if(ae)throw new Error("target.depthTexture not supported in Cube render targets");ht(B.__webglFramebuffer,$)}else if(ae){B.__webglDepthbuffer=[];for(let be=0;be<6;be++)if(t.bindFramebuffer(n.FRAMEBUFFER,B.__webglFramebuffer[be]),B.__webglDepthbuffer[be]===void 0)B.__webglDepthbuffer[be]=n.createRenderbuffer(),Me(B.__webglDepthbuffer[be],$,!1);else{const Pe=$.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,ve=B.__webglDepthbuffer[be];n.bindRenderbuffer(n.RENDERBUFFER,ve),n.framebufferRenderbuffer(n.FRAMEBUFFER,Pe,n.RENDERBUFFER,ve)}}else if(t.bindFramebuffer(n.FRAMEBUFFER,B.__webglFramebuffer),B.__webglDepthbuffer===void 0)B.__webglDepthbuffer=n.createRenderbuffer(),Me(B.__webglDepthbuffer,$,!1);else{const be=$.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,Pe=B.__webglDepthbuffer;n.bindRenderbuffer(n.RENDERBUFFER,Pe),n.framebufferRenderbuffer(n.FRAMEBUFFER,be,n.RENDERBUFFER,Pe)}t.bindFramebuffer(n.FRAMEBUFFER,null)}function Ge($,B,ae){const be=i.get($);B!==void 0&&Re(be.__webglFramebuffer,$,$.texture,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,0),ae!==void 0&&zt($)}function Je($){const B=$.texture,ae=i.get($),be=i.get(B);$.addEventListener("dispose",N);const Pe=$.textures,ve=$.isWebGLCubeRenderTarget===!0,Fe=Pe.length>1;if(Fe||(be.__webglTexture===void 0&&(be.__webglTexture=n.createTexture()),be.__version=B.version,o.memory.textures++),ve){ae.__webglFramebuffer=[];for(let We=0;We<6;We++)if(B.mipmaps&&B.mipmaps.length>0){ae.__webglFramebuffer[We]=[];for(let tt=0;tt<B.mipmaps.length;tt++)ae.__webglFramebuffer[We][tt]=n.createFramebuffer()}else ae.__webglFramebuffer[We]=n.createFramebuffer()}else{if(B.mipmaps&&B.mipmaps.length>0){ae.__webglFramebuffer=[];for(let We=0;We<B.mipmaps.length;We++)ae.__webglFramebuffer[We]=n.createFramebuffer()}else ae.__webglFramebuffer=n.createFramebuffer();if(Fe)for(let We=0,tt=Pe.length;We<tt;We++){const Gt=i.get(Pe[We]);Gt.__webglTexture===void 0&&(Gt.__webglTexture=n.createTexture(),o.memory.textures++)}if($.samples>0&&qe($)===!1){ae.__webglMultisampledFramebuffer=n.createFramebuffer(),ae.__webglColorRenderbuffer=[],t.bindFramebuffer(n.FRAMEBUFFER,ae.__webglMultisampledFramebuffer);for(let We=0;We<Pe.length;We++){const tt=Pe[We];ae.__webglColorRenderbuffer[We]=n.createRenderbuffer(),n.bindRenderbuffer(n.RENDERBUFFER,ae.__webglColorRenderbuffer[We]);const Gt=s.convert(tt.format,tt.colorSpace),Le=s.convert(tt.type),nt=E(tt.internalFormat,Gt,Le,tt.colorSpace,$.isXRRenderTarget===!0),wt=Ne($);n.renderbufferStorageMultisample(n.RENDERBUFFER,wt,nt,$.width,$.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+We,n.RENDERBUFFER,ae.__webglColorRenderbuffer[We])}n.bindRenderbuffer(n.RENDERBUFFER,null),$.depthBuffer&&(ae.__webglDepthRenderbuffer=n.createRenderbuffer(),Me(ae.__webglDepthRenderbuffer,$,!0)),t.bindFramebuffer(n.FRAMEBUFFER,null)}}if(ve){t.bindTexture(n.TEXTURE_CUBE_MAP,be.__webglTexture),ce(n.TEXTURE_CUBE_MAP,B);for(let We=0;We<6;We++)if(B.mipmaps&&B.mipmaps.length>0)for(let tt=0;tt<B.mipmaps.length;tt++)Re(ae.__webglFramebuffer[We][tt],$,B,n.COLOR_ATTACHMENT0,n.TEXTURE_CUBE_MAP_POSITIVE_X+We,tt);else Re(ae.__webglFramebuffer[We],$,B,n.COLOR_ATTACHMENT0,n.TEXTURE_CUBE_MAP_POSITIVE_X+We,0);w(B)&&v(n.TEXTURE_CUBE_MAP),t.unbindTexture()}else if(Fe){for(let We=0,tt=Pe.length;We<tt;We++){const Gt=Pe[We],Le=i.get(Gt);t.bindTexture(n.TEXTURE_2D,Le.__webglTexture),ce(n.TEXTURE_2D,Gt),Re(ae.__webglFramebuffer,$,Gt,n.COLOR_ATTACHMENT0+We,n.TEXTURE_2D,0),w(Gt)&&v(n.TEXTURE_2D)}t.unbindTexture()}else{let We=n.TEXTURE_2D;if(($.isWebGL3DRenderTarget||$.isWebGLArrayRenderTarget)&&(We=$.isWebGL3DRenderTarget?n.TEXTURE_3D:n.TEXTURE_2D_ARRAY),t.bindTexture(We,be.__webglTexture),ce(We,B),B.mipmaps&&B.mipmaps.length>0)for(let tt=0;tt<B.mipmaps.length;tt++)Re(ae.__webglFramebuffer[tt],$,B,n.COLOR_ATTACHMENT0,We,tt);else Re(ae.__webglFramebuffer,$,B,n.COLOR_ATTACHMENT0,We,0);w(B)&&v(We),t.unbindTexture()}$.depthBuffer&&zt($)}function Ce($){const B=$.textures;for(let ae=0,be=B.length;ae<be;ae++){const Pe=B[ae];if(w(Pe)){const ve=S($),Fe=i.get(Pe).__webglTexture;t.bindTexture(ve,Fe),v(ve),t.unbindTexture()}}}const Se=[],X=[];function ot($){if($.samples>0){if(qe($)===!1){const B=$.textures,ae=$.width,be=$.height;let Pe=n.COLOR_BUFFER_BIT;const ve=$.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT,Fe=i.get($),We=B.length>1;if(We)for(let tt=0;tt<B.length;tt++)t.bindFramebuffer(n.FRAMEBUFFER,Fe.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+tt,n.RENDERBUFFER,null),t.bindFramebuffer(n.FRAMEBUFFER,Fe.__webglFramebuffer),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0+tt,n.TEXTURE_2D,null,0);t.bindFramebuffer(n.READ_FRAMEBUFFER,Fe.__webglMultisampledFramebuffer),t.bindFramebuffer(n.DRAW_FRAMEBUFFER,Fe.__webglFramebuffer);for(let tt=0;tt<B.length;tt++){if($.resolveDepthBuffer&&($.depthBuffer&&(Pe|=n.DEPTH_BUFFER_BIT),$.stencilBuffer&&$.resolveStencilBuffer&&(Pe|=n.STENCIL_BUFFER_BIT)),We){n.framebufferRenderbuffer(n.READ_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.RENDERBUFFER,Fe.__webglColorRenderbuffer[tt]);const Gt=i.get(B[tt]).__webglTexture;n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.TEXTURE_2D,Gt,0)}n.blitFramebuffer(0,0,ae,be,0,0,ae,be,Pe,n.NEAREST),l===!0&&(Se.length=0,X.length=0,Se.push(n.COLOR_ATTACHMENT0+tt),$.depthBuffer&&$.resolveDepthBuffer===!1&&(Se.push(ve),X.push(ve),n.invalidateFramebuffer(n.DRAW_FRAMEBUFFER,X)),n.invalidateFramebuffer(n.READ_FRAMEBUFFER,Se))}if(t.bindFramebuffer(n.READ_FRAMEBUFFER,null),t.bindFramebuffer(n.DRAW_FRAMEBUFFER,null),We)for(let tt=0;tt<B.length;tt++){t.bindFramebuffer(n.FRAMEBUFFER,Fe.__webglMultisampledFramebuffer),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+tt,n.RENDERBUFFER,Fe.__webglColorRenderbuffer[tt]);const Gt=i.get(B[tt]).__webglTexture;t.bindFramebuffer(n.FRAMEBUFFER,Fe.__webglFramebuffer),n.framebufferTexture2D(n.DRAW_FRAMEBUFFER,n.COLOR_ATTACHMENT0+tt,n.TEXTURE_2D,Gt,0)}t.bindFramebuffer(n.DRAW_FRAMEBUFFER,Fe.__webglMultisampledFramebuffer)}else if($.depthBuffer&&$.resolveDepthBuffer===!1&&l){const B=$.stencilBuffer?n.DEPTH_STENCIL_ATTACHMENT:n.DEPTH_ATTACHMENT;n.invalidateFramebuffer(n.DRAW_FRAMEBUFFER,[B])}}}function Ne($){return Math.min(r.maxSamples,$.samples)}function qe($){const B=i.get($);return $.samples>0&&e.has("WEBGL_multisampled_render_to_texture")===!0&&B.__useRenderToTexture!==!1}function Ue($){const B=o.render.frame;u.get($)!==B&&(u.set($,B),$.update())}function gt($,B){const ae=$.colorSpace,be=$.format,Pe=$.type;return $.isCompressedTexture===!0||$.isVideoTexture===!0||ae!==qu&&ae!==fa&&(dn.getTransfer(ae)===An?(be!==gr||Pe!==xo)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",ae)),B}function Ve($){return typeof HTMLImageElement<"u"&&$ instanceof HTMLImageElement?(c.width=$.naturalWidth||$.width,c.height=$.naturalHeight||$.height):typeof VideoFrame<"u"&&$ instanceof VideoFrame?(c.width=$.displayWidth,c.height=$.displayHeight):(c.width=$.width,c.height=$.height),c}this.allocateTextureUnit=F,this.resetTextureUnits=z,this.setTexture2D=le,this.setTexture2DArray=he,this.setTexture3D=ue,this.setTextureCube=q,this.rebindTextures=Ge,this.setupRenderTarget=Je,this.updateRenderTargetMipmap=Ce,this.updateMultisampleRenderTarget=ot,this.setupDepthRenderbuffer=zt,this.setupFrameBufferTexture=Re,this.useMultisampledRTT=qe}function SB(n,e){function t(i,r=fa){let s;const o=dn.getTransfer(r);if(i===xo)return n.UNSIGNED_BYTE;if(i===xw)return n.UNSIGNED_SHORT_4_4_4_4;if(i===_w)return n.UNSIGNED_SHORT_5_5_5_1;if(i===JA)return n.UNSIGNED_INT_5_9_9_9_REV;if(i===KA)return n.BYTE;if(i===YA)return n.SHORT;if(i===rf)return n.UNSIGNED_SHORT;if(i===vw)return n.INT;if(i===ja)return n.UNSIGNED_INT;if(i===Qr)return n.FLOAT;if(i===Tf)return n.HALF_FLOAT;if(i===QA)return n.ALPHA;if(i===ZA)return n.RGB;if(i===gr)return n.RGBA;if(i===eM)return n.LUMINANCE;if(i===tM)return n.LUMINANCE_ALPHA;if(i===Eu)return n.DEPTH_COMPONENT;if(i===Wu)return n.DEPTH_STENCIL;if(i===ww)return n.RED;if(i===Fg)return n.RED_INTEGER;if(i===nM)return n.RG;if(i===bw)return n.RG_INTEGER;if(i===Sw)return n.RGBA_INTEGER;if(i===rm||i===sm||i===om||i===am)if(o===An)if(s=e.get("WEBGL_compressed_texture_s3tc_srgb"),s!==null){if(i===rm)return s.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(i===sm)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(i===om)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(i===am)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(s=e.get("WEBGL_compressed_texture_s3tc"),s!==null){if(i===rm)return s.COMPRESSED_RGB_S3TC_DXT1_EXT;if(i===sm)return s.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(i===om)return s.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(i===am)return s.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(i===F0||i===V0||i===B0||i===z0)if(s=e.get("WEBGL_compressed_texture_pvrtc"),s!==null){if(i===F0)return s.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(i===V0)return s.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(i===B0)return s.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(i===z0)return s.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(i===H0||i===G0||i===W0)if(s=e.get("WEBGL_compressed_texture_etc"),s!==null){if(i===H0||i===G0)return o===An?s.COMPRESSED_SRGB8_ETC2:s.COMPRESSED_RGB8_ETC2;if(i===W0)return o===An?s.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:s.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(i===q0||i===$0||i===X0||i===K0||i===Y0||i===J0||i===Q0||i===Z0||i===e_||i===t_||i===n_||i===i_||i===r_||i===s_)if(s=e.get("WEBGL_compressed_texture_astc"),s!==null){if(i===q0)return o===An?s.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:s.COMPRESSED_RGBA_ASTC_4x4_KHR;if(i===$0)return o===An?s.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:s.COMPRESSED_RGBA_ASTC_5x4_KHR;if(i===X0)return o===An?s.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:s.COMPRESSED_RGBA_ASTC_5x5_KHR;if(i===K0)return o===An?s.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:s.COMPRESSED_RGBA_ASTC_6x5_KHR;if(i===Y0)return o===An?s.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:s.COMPRESSED_RGBA_ASTC_6x6_KHR;if(i===J0)return o===An?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:s.COMPRESSED_RGBA_ASTC_8x5_KHR;if(i===Q0)return o===An?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:s.COMPRESSED_RGBA_ASTC_8x6_KHR;if(i===Z0)return o===An?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:s.COMPRESSED_RGBA_ASTC_8x8_KHR;if(i===e_)return o===An?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:s.COMPRESSED_RGBA_ASTC_10x5_KHR;if(i===t_)return o===An?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:s.COMPRESSED_RGBA_ASTC_10x6_KHR;if(i===n_)return o===An?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:s.COMPRESSED_RGBA_ASTC_10x8_KHR;if(i===i_)return o===An?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:s.COMPRESSED_RGBA_ASTC_10x10_KHR;if(i===r_)return o===An?s.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:s.COMPRESSED_RGBA_ASTC_12x10_KHR;if(i===s_)return o===An?s.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:s.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(i===lm||i===o_||i===a_)if(s=e.get("EXT_texture_compression_bptc"),s!==null){if(i===lm)return o===An?s.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:s.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(i===o_)return s.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(i===a_)return s.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}else return null;if(i===iM||i===l_||i===c_||i===u_)if(s=e.get("EXT_texture_compression_rgtc"),s!==null){if(i===lm)return s.COMPRESSED_RED_RGTC1_EXT;if(i===l_)return s.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(i===c_)return s.COMPRESSED_RED_GREEN_RGTC2_EXT;if(i===u_)return s.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return i===Gu?n.UNSIGNED_INT_24_8:n[i]!==void 0?n[i]:null}return{convert:t}}const rse=`
void main() {

	gl_Position = vec4( position, 1.0 );

}`,sse=`
uniform sampler2DArray depthColor;
uniform float depthWidth;
uniform float depthHeight;

void main() {

	vec2 coord = vec2( gl_FragCoord.x / depthWidth, gl_FragCoord.y / depthHeight );

	if ( coord.x >= 1.0 ) {

		gl_FragDepth = texture( depthColor, vec3( coord.x - 1.0, coord.y, 1 ) ).r;

	} else {

		gl_FragDepth = texture( depthColor, vec3( coord.x, coord.y, 0 ) ).r;

	}

}`;class ose{constructor(){this.texture=null,this.mesh=null,this.depthNear=0,this.depthFar=0}init(e,t,i){if(this.texture===null){const r=new ti,s=e.properties.get(r);s.__webglTexture=t.texture,(t.depthNear!==i.depthNear||t.depthFar!==i.depthFar)&&(this.depthNear=t.depthNear,this.depthFar=t.depthFar),this.texture=r}}getMesh(e){if(this.texture!==null&&this.mesh===null){const t=e.cameras[0].viewport,i=new _o({vertexShader:rse,fragmentShader:sse,uniforms:{depthColor:{value:this.texture},depthWidth:{value:t.z},depthHeight:{value:t.w}}});this.mesh=new _i(new Af(20,20),i)}return this.mesh}reset(){this.texture=null,this.mesh=null}getDepthTexture(){return this.texture}}class ase extends Ko{constructor(e,t){super();const i=this;let r=null,s=1,o=null,a="local-floor",l=1,c=null,u=null,p=null,m=null,g=null,x=null;const b=new ose,w=t.getContextAttributes();let v=null,S=null;const E=[],C=[],U=new Ie;let O=null;const N=new yi;N.viewport=new mn;const P=new yi;P.viewport=new mn;const A=[N,P],M=new dB;let D=null,z=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(oe){let ye=E[oe];return ye===void 0&&(ye=new Nx,E[oe]=ye),ye.getTargetRaySpace()},this.getControllerGrip=function(oe){let ye=E[oe];return ye===void 0&&(ye=new Nx,E[oe]=ye),ye.getGripSpace()},this.getHand=function(oe){let ye=E[oe];return ye===void 0&&(ye=new Nx,E[oe]=ye),ye.getHandSpace()};function F(oe){const ye=C.indexOf(oe.inputSource);if(ye===-1)return;const Re=E[ye];Re!==void 0&&(Re.update(oe.inputSource,oe.frame,c||o),Re.dispatchEvent({type:oe.type,data:oe.inputSource}))}function re(){r.removeEventListener("select",F),r.removeEventListener("selectstart",F),r.removeEventListener("selectend",F),r.removeEventListener("squeeze",F),r.removeEventListener("squeezestart",F),r.removeEventListener("squeezeend",F),r.removeEventListener("end",re),r.removeEventListener("inputsourceschange",le);for(let oe=0;oe<E.length;oe++){const ye=C[oe];ye!==null&&(C[oe]=null,E[oe].disconnect(ye))}D=null,z=null,b.reset(),e.setRenderTarget(v),g=null,m=null,p=null,r=null,S=null,me.stop(),i.isPresenting=!1,e.setPixelRatio(O),e.setSize(U.width,U.height,!1),i.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(oe){s=oe,i.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(oe){a=oe,i.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return c||o},this.setReferenceSpace=function(oe){c=oe},this.getBaseLayer=function(){return m!==null?m:g},this.getBinding=function(){return p},this.getFrame=function(){return x},this.getSession=function(){return r},this.setSession=async function(oe){if(r=oe,r!==null){if(v=e.getRenderTarget(),r.addEventListener("select",F),r.addEventListener("selectstart",F),r.addEventListener("selectend",F),r.addEventListener("squeeze",F),r.addEventListener("squeezestart",F),r.addEventListener("squeezeend",F),r.addEventListener("end",re),r.addEventListener("inputsourceschange",le),w.xrCompatible!==!0&&await t.makeXRCompatible(),O=e.getPixelRatio(),e.getSize(U),typeof XRWebGLBinding<"u"&&"createProjectionLayer"in XRWebGLBinding.prototype){let Re=null,Me=null,ht=null;w.depth&&(ht=w.stencil?t.DEPTH24_STENCIL8:t.DEPTH_COMPONENT24,Re=w.stencil?Wu:Eu,Me=w.stencil?Gu:ja);const zt={colorFormat:t.RGBA8,depthFormat:ht,scaleFactor:s};p=new XRWebGLBinding(r,t),m=p.createProjectionLayer(zt),r.updateRenderState({layers:[m]}),e.setPixelRatio(1),e.setSize(m.textureWidth,m.textureHeight,!1),S=new Xo(m.textureWidth,m.textureHeight,{format:gr,type:xo,depthTexture:new pM(m.textureWidth,m.textureHeight,Me,void 0,void 0,void 0,void 0,void 0,void 0,Re),stencilBuffer:w.stencil,colorSpace:e.outputColorSpace,samples:w.antialias?4:0,resolveDepthBuffer:m.ignoreDepthValues===!1,resolveStencilBuffer:m.ignoreDepthValues===!1})}else{const Re={antialias:w.antialias,alpha:!0,depth:w.depth,stencil:w.stencil,framebufferScaleFactor:s};g=new XRWebGLLayer(r,t,Re),r.updateRenderState({baseLayer:g}),e.setPixelRatio(1),e.setSize(g.framebufferWidth,g.framebufferHeight,!1),S=new Xo(g.framebufferWidth,g.framebufferHeight,{format:gr,type:xo,colorSpace:e.outputColorSpace,stencilBuffer:w.stencil,resolveDepthBuffer:g.ignoreDepthValues===!1,resolveStencilBuffer:g.ignoreDepthValues===!1})}S.isXRRenderTarget=!0,this.setFoveation(l),c=null,o=await r.requestReferenceSpace(a),me.setContext(r),me.start(),i.isPresenting=!0,i.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(r!==null)return r.environmentBlendMode},this.getDepthTexture=function(){return b.getDepthTexture()};function le(oe){for(let ye=0;ye<oe.removed.length;ye++){const Re=oe.removed[ye],Me=C.indexOf(Re);Me>=0&&(C[Me]=null,E[Me].disconnect(Re))}for(let ye=0;ye<oe.added.length;ye++){const Re=oe.added[ye];let Me=C.indexOf(Re);if(Me===-1){for(let zt=0;zt<E.length;zt++)if(zt>=C.length){C.push(Re),Me=zt;break}else if(C[zt]===null){C[zt]=Re,Me=zt;break}if(Me===-1)break}const ht=E[Me];ht&&ht.connect(Re)}}const he=new K,ue=new K;function q(oe,ye,Re){he.setFromMatrixPosition(ye.matrixWorld),ue.setFromMatrixPosition(Re.matrixWorld);const Me=he.distanceTo(ue),ht=ye.projectionMatrix.elements,zt=Re.projectionMatrix.elements,Ge=ht[14]/(ht[10]-1),Je=ht[14]/(ht[10]+1),Ce=(ht[9]+1)/ht[5],Se=(ht[9]-1)/ht[5],X=(ht[8]-1)/ht[0],ot=(zt[8]+1)/zt[0],Ne=Ge*X,qe=Ge*ot,Ue=Me/(-X+ot),gt=Ue*-X;if(ye.matrixWorld.decompose(oe.position,oe.quaternion,oe.scale),oe.translateX(gt),oe.translateZ(Ue),oe.matrixWorld.compose(oe.position,oe.quaternion,oe.scale),oe.matrixWorldInverse.copy(oe.matrixWorld).invert(),ht[10]===-1)oe.projectionMatrix.copy(ye.projectionMatrix),oe.projectionMatrixInverse.copy(ye.projectionMatrixInverse);else{const Ve=Ge+Ue,$=Je+Ue,B=Ne-gt,ae=qe+(Me-gt),be=Ce*Je/$*Ve,Pe=Se*Je/$*Ve;oe.projectionMatrix.makePerspective(B,ae,be,Pe,Ve,$),oe.projectionMatrixInverse.copy(oe.projectionMatrix).invert()}}function Q(oe,ye){ye===null?oe.matrixWorld.copy(oe.matrix):oe.matrixWorld.multiplyMatrices(ye.matrixWorld,oe.matrix),oe.matrixWorldInverse.copy(oe.matrixWorld).invert()}this.updateCamera=function(oe){if(r===null)return;let ye=oe.near,Re=oe.far;b.texture!==null&&(b.depthNear>0&&(ye=b.depthNear),b.depthFar>0&&(Re=b.depthFar)),M.near=P.near=N.near=ye,M.far=P.far=N.far=Re,(D!==M.near||z!==M.far)&&(r.updateRenderState({depthNear:M.near,depthFar:M.far}),D=M.near,z=M.far),N.layers.mask=oe.layers.mask|2,P.layers.mask=oe.layers.mask|4,M.layers.mask=N.layers.mask|P.layers.mask;const Me=oe.parent,ht=M.cameras;Q(M,Me);for(let zt=0;zt<ht.length;zt++)Q(ht[zt],Me);ht.length===2?q(M,N,P):M.projectionMatrix.copy(N.projectionMatrix),j(oe,M,Me)};function j(oe,ye,Re){Re===null?oe.matrix.copy(ye.matrixWorld):(oe.matrix.copy(Re.matrixWorld),oe.matrix.invert(),oe.matrix.multiply(ye.matrixWorld)),oe.matrix.decompose(oe.position,oe.quaternion,oe.scale),oe.updateMatrixWorld(!0),oe.projectionMatrix.copy(ye.projectionMatrix),oe.projectionMatrixInverse.copy(ye.projectionMatrixInverse),oe.isPerspectiveCamera&&(oe.fov=sf*2*Math.atan(1/oe.projectionMatrix.elements[5]),oe.zoom=1)}this.getCamera=function(){return M},this.getFoveation=function(){if(!(m===null&&g===null))return l},this.setFoveation=function(oe){l=oe,m!==null&&(m.fixedFoveation=oe),g!==null&&g.fixedFoveation!==void 0&&(g.fixedFoveation=oe)},this.hasDepthSensing=function(){return b.texture!==null},this.getDepthSensingMesh=function(){return b.getMesh(M)};let J=null;function ce(oe,ye){if(u=ye.getViewerPose(c||o),x=ye,u!==null){const Re=u.views;g!==null&&(e.setRenderTargetFramebuffer(S,g.framebuffer),e.setRenderTarget(S));let Me=!1;Re.length!==M.cameras.length&&(M.cameras.length=0,Me=!0);for(let Ge=0;Ge<Re.length;Ge++){const Je=Re[Ge];let Ce=null;if(g!==null)Ce=g.getViewport(Je);else{const X=p.getViewSubImage(m,Je);Ce=X.viewport,Ge===0&&(e.setRenderTargetTextures(S,X.colorTexture,m.ignoreDepthValues?void 0:X.depthStencilTexture),e.setRenderTarget(S))}let Se=A[Ge];Se===void 0&&(Se=new yi,Se.layers.enable(Ge),Se.viewport=new mn,A[Ge]=Se),Se.matrix.fromArray(Je.transform.matrix),Se.matrix.decompose(Se.position,Se.quaternion,Se.scale),Se.projectionMatrix.fromArray(Je.projectionMatrix),Se.projectionMatrixInverse.copy(Se.projectionMatrix).invert(),Se.viewport.set(Ce.x,Ce.y,Ce.width,Ce.height),Ge===0&&(M.matrix.copy(Se.matrix),M.matrix.decompose(M.position,M.quaternion,M.scale)),Me===!0&&M.cameras.push(Se)}const ht=r.enabledFeatures;if(ht&&ht.includes("depth-sensing")&&r.depthUsage=="gpu-optimized"&&p){const Ge=p.getDepthInformation(Re[0]);Ge&&Ge.isValid&&Ge.texture&&b.init(e,Ge,r.renderState)}}for(let Re=0;Re<E.length;Re++){const Me=C[Re],ht=E[Re];Me!==null&&ht!==void 0&&ht.update(Me,ye,c||o)}J&&J(oe,ye),ye.detectedPlanes&&i.dispatchEvent({type:"planesdetected",data:ye}),x=null}const me=new vB;me.setAnimationLoop(ce),this.setAnimationLoop=function(oe){J=oe},this.dispose=function(){}}}const tu=new Ss,lse=new At;function cse(n,e){function t(w,v){w.matrixAutoUpdate===!0&&w.updateMatrix(),v.value.copy(w.matrix)}function i(w,v){v.color.getRGB(w.fogColor.value,w4(n)),v.isFog?(w.fogNear.value=v.near,w.fogFar.value=v.far):v.isFogExp2&&(w.fogDensity.value=v.density)}function r(w,v,S,E,C){v.isMeshBasicMaterial||v.isMeshLambertMaterial?s(w,v):v.isMeshToonMaterial?(s(w,v),p(w,v)):v.isMeshPhongMaterial?(s(w,v),u(w,v)):v.isMeshStandardMaterial?(s(w,v),m(w,v),v.isMeshPhysicalMaterial&&g(w,v,C)):v.isMeshMatcapMaterial?(s(w,v),x(w,v)):v.isMeshDepthMaterial?s(w,v):v.isMeshDistanceMaterial?(s(w,v),b(w,v)):v.isMeshNormalMaterial?s(w,v):v.isLineBasicMaterial?(o(w,v),v.isLineDashedMaterial&&a(w,v)):v.isPointsMaterial?l(w,v,S,E):v.isSpriteMaterial?c(w,v):v.isShadowMaterial?(w.color.value.copy(v.color),w.opacity.value=v.opacity):v.isShaderMaterial&&(v.uniformsNeedUpdate=!1)}function s(w,v){w.opacity.value=v.opacity,v.color&&w.diffuse.value.copy(v.color),v.emissive&&w.emissive.value.copy(v.emissive).multiplyScalar(v.emissiveIntensity),v.map&&(w.map.value=v.map,t(v.map,w.mapTransform)),v.alphaMap&&(w.alphaMap.value=v.alphaMap,t(v.alphaMap,w.alphaMapTransform)),v.bumpMap&&(w.bumpMap.value=v.bumpMap,t(v.bumpMap,w.bumpMapTransform),w.bumpScale.value=v.bumpScale,v.side===Lr&&(w.bumpScale.value*=-1)),v.normalMap&&(w.normalMap.value=v.normalMap,t(v.normalMap,w.normalMapTransform),w.normalScale.value.copy(v.normalScale),v.side===Lr&&w.normalScale.value.negate()),v.displacementMap&&(w.displacementMap.value=v.displacementMap,t(v.displacementMap,w.displacementMapTransform),w.displacementScale.value=v.displacementScale,w.displacementBias.value=v.displacementBias),v.emissiveMap&&(w.emissiveMap.value=v.emissiveMap,t(v.emissiveMap,w.emissiveMapTransform)),v.specularMap&&(w.specularMap.value=v.specularMap,t(v.specularMap,w.specularMapTransform)),v.alphaTest>0&&(w.alphaTest.value=v.alphaTest);const S=e.get(v),E=S.envMap,C=S.envMapRotation;E&&(w.envMap.value=E,tu.copy(C),tu.x*=-1,tu.y*=-1,tu.z*=-1,E.isCubeTexture&&E.isRenderTargetTexture===!1&&(tu.y*=-1,tu.z*=-1),w.envMapRotation.value.setFromMatrix4(lse.makeRotationFromEuler(tu)),w.flipEnvMap.value=E.isCubeTexture&&E.isRenderTargetTexture===!1?-1:1,w.reflectivity.value=v.reflectivity,w.ior.value=v.ior,w.refractionRatio.value=v.refractionRatio),v.lightMap&&(w.lightMap.value=v.lightMap,w.lightMapIntensity.value=v.lightMapIntensity,t(v.lightMap,w.lightMapTransform)),v.aoMap&&(w.aoMap.value=v.aoMap,w.aoMapIntensity.value=v.aoMapIntensity,t(v.aoMap,w.aoMapTransform))}function o(w,v){w.diffuse.value.copy(v.color),w.opacity.value=v.opacity,v.map&&(w.map.value=v.map,t(v.map,w.mapTransform))}function a(w,v){w.dashSize.value=v.dashSize,w.totalSize.value=v.dashSize+v.gapSize,w.scale.value=v.scale}function l(w,v,S,E){w.diffuse.value.copy(v.color),w.opacity.value=v.opacity,w.size.value=v.size*S,w.scale.value=E*.5,v.map&&(w.map.value=v.map,t(v.map,w.uvTransform)),v.alphaMap&&(w.alphaMap.value=v.alphaMap,t(v.alphaMap,w.alphaMapTransform)),v.alphaTest>0&&(w.alphaTest.value=v.alphaTest)}function c(w,v){w.diffuse.value.copy(v.color),w.opacity.value=v.opacity,w.rotation.value=v.rotation,v.map&&(w.map.value=v.map,t(v.map,w.mapTransform)),v.alphaMap&&(w.alphaMap.value=v.alphaMap,t(v.alphaMap,w.alphaMapTransform)),v.alphaTest>0&&(w.alphaTest.value=v.alphaTest)}function u(w,v){w.specular.value.copy(v.specular),w.shininess.value=Math.max(v.shininess,1e-4)}function p(w,v){v.gradientMap&&(w.gradientMap.value=v.gradientMap)}function m(w,v){w.metalness.value=v.metalness,v.metalnessMap&&(w.metalnessMap.value=v.metalnessMap,t(v.metalnessMap,w.metalnessMapTransform)),w.roughness.value=v.roughness,v.roughnessMap&&(w.roughnessMap.value=v.roughnessMap,t(v.roughnessMap,w.roughnessMapTransform)),v.envMap&&(w.envMapIntensity.value=v.envMapIntensity)}function g(w,v,S){w.ior.value=v.ior,v.sheen>0&&(w.sheenColor.value.copy(v.sheenColor).multiplyScalar(v.sheen),w.sheenRoughness.value=v.sheenRoughness,v.sheenColorMap&&(w.sheenColorMap.value=v.sheenColorMap,t(v.sheenColorMap,w.sheenColorMapTransform)),v.sheenRoughnessMap&&(w.sheenRoughnessMap.value=v.sheenRoughnessMap,t(v.sheenRoughnessMap,w.sheenRoughnessMapTransform))),v.clearcoat>0&&(w.clearcoat.value=v.clearcoat,w.clearcoatRoughness.value=v.clearcoatRoughness,v.clearcoatMap&&(w.clearcoatMap.value=v.clearcoatMap,t(v.clearcoatMap,w.clearcoatMapTransform)),v.clearcoatRoughnessMap&&(w.clearcoatRoughnessMap.value=v.clearcoatRoughnessMap,t(v.clearcoatRoughnessMap,w.clearcoatRoughnessMapTransform)),v.clearcoatNormalMap&&(w.clearcoatNormalMap.value=v.clearcoatNormalMap,t(v.clearcoatNormalMap,w.clearcoatNormalMapTransform),w.clearcoatNormalScale.value.copy(v.clearcoatNormalScale),v.side===Lr&&w.clearcoatNormalScale.value.negate())),v.dispersion>0&&(w.dispersion.value=v.dispersion),v.iridescence>0&&(w.iridescence.value=v.iridescence,w.iridescenceIOR.value=v.iridescenceIOR,w.iridescenceThicknessMinimum.value=v.iridescenceThicknessRange[0],w.iridescenceThicknessMaximum.value=v.iridescenceThicknessRange[1],v.iridescenceMap&&(w.iridescenceMap.value=v.iridescenceMap,t(v.iridescenceMap,w.iridescenceMapTransform)),v.iridescenceThicknessMap&&(w.iridescenceThicknessMap.value=v.iridescenceThicknessMap,t(v.iridescenceThicknessMap,w.iridescenceThicknessMapTransform))),v.transmission>0&&(w.transmission.value=v.transmission,w.transmissionSamplerMap.value=S.texture,w.transmissionSamplerSize.value.set(S.width,S.height),v.transmissionMap&&(w.transmissionMap.value=v.transmissionMap,t(v.transmissionMap,w.transmissionMapTransform)),w.thickness.value=v.thickness,v.thicknessMap&&(w.thicknessMap.value=v.thicknessMap,t(v.thicknessMap,w.thicknessMapTransform)),w.attenuationDistance.value=v.attenuationDistance,w.attenuationColor.value.copy(v.attenuationColor)),v.anisotropy>0&&(w.anisotropyVector.value.set(v.anisotropy*Math.cos(v.anisotropyRotation),v.anisotropy*Math.sin(v.anisotropyRotation)),v.anisotropyMap&&(w.anisotropyMap.value=v.anisotropyMap,t(v.anisotropyMap,w.anisotropyMapTransform))),w.specularIntensity.value=v.specularIntensity,w.specularColor.value.copy(v.specularColor),v.specularColorMap&&(w.specularColorMap.value=v.specularColorMap,t(v.specularColorMap,w.specularColorMapTransform)),v.specularIntensityMap&&(w.specularIntensityMap.value=v.specularIntensityMap,t(v.specularIntensityMap,w.specularIntensityMapTransform))}function x(w,v){v.matcap&&(w.matcap.value=v.matcap)}function b(w,v){const S=e.get(v).light;w.referencePosition.value.setFromMatrixPosition(S.matrixWorld),w.nearDistance.value=S.shadow.camera.near,w.farDistance.value=S.shadow.camera.far}return{refreshFogUniforms:i,refreshMaterialUniforms:r}}function use(n,e,t,i){let r={},s={},o=[];const a=n.getParameter(n.MAX_UNIFORM_BUFFER_BINDINGS);function l(S,E){const C=E.program;i.uniformBlockBinding(S,C)}function c(S,E){let C=r[S.id];C===void 0&&(x(S),C=u(S),r[S.id]=C,S.addEventListener("dispose",w));const U=E.program;i.updateUBOMapping(S,U);const O=e.render.frame;s[S.id]!==O&&(m(S),s[S.id]=O)}function u(S){const E=p();S.__bindingPointIndex=E;const C=n.createBuffer(),U=S.__size,O=S.usage;return n.bindBuffer(n.UNIFORM_BUFFER,C),n.bufferData(n.UNIFORM_BUFFER,U,O),n.bindBuffer(n.UNIFORM_BUFFER,null),n.bindBufferBase(n.UNIFORM_BUFFER,E,C),C}function p(){for(let S=0;S<a;S++)if(o.indexOf(S)===-1)return o.push(S),S;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function m(S){const E=r[S.id],C=S.uniforms,U=S.__cache;n.bindBuffer(n.UNIFORM_BUFFER,E);for(let O=0,N=C.length;O<N;O++){const P=Array.isArray(C[O])?C[O]:[C[O]];for(let A=0,M=P.length;A<M;A++){const D=P[A];if(g(D,O,A,U)===!0){const z=D.__offset,F=Array.isArray(D.value)?D.value:[D.value];let re=0;for(let le=0;le<F.length;le++){const he=F[le],ue=b(he);typeof he=="number"||typeof he=="boolean"?(D.__data[0]=he,n.bufferSubData(n.UNIFORM_BUFFER,z+re,D.__data)):he.isMatrix3?(D.__data[0]=he.elements[0],D.__data[1]=he.elements[1],D.__data[2]=he.elements[2],D.__data[3]=0,D.__data[4]=he.elements[3],D.__data[5]=he.elements[4],D.__data[6]=he.elements[5],D.__data[7]=0,D.__data[8]=he.elements[6],D.__data[9]=he.elements[7],D.__data[10]=he.elements[8],D.__data[11]=0):(he.toArray(D.__data,re),re+=ue.storage/Float32Array.BYTES_PER_ELEMENT)}n.bufferSubData(n.UNIFORM_BUFFER,z,D.__data)}}}n.bindBuffer(n.UNIFORM_BUFFER,null)}function g(S,E,C,U){const O=S.value,N=E+"_"+C;if(U[N]===void 0)return typeof O=="number"||typeof O=="boolean"?U[N]=O:U[N]=O.clone(),!0;{const P=U[N];if(typeof O=="number"||typeof O=="boolean"){if(P!==O)return U[N]=O,!0}else if(P.equals(O)===!1)return P.copy(O),!0}return!1}function x(S){const E=S.uniforms;let C=0;const U=16;for(let N=0,P=E.length;N<P;N++){const A=Array.isArray(E[N])?E[N]:[E[N]];for(let M=0,D=A.length;M<D;M++){const z=A[M],F=Array.isArray(z.value)?z.value:[z.value];for(let re=0,le=F.length;re<le;re++){const he=F[re],ue=b(he),q=C%U,Q=q%ue.boundary,j=q+Q;C+=Q,j!==0&&U-j<ue.storage&&(C+=U-j),z.__data=new Float32Array(ue.storage/Float32Array.BYTES_PER_ELEMENT),z.__offset=C,C+=ue.storage}}}const O=C%U;return O>0&&(C+=U-O),S.__size=C,S.__cache={},this}function b(S){const E={boundary:0,storage:0};return typeof S=="number"||typeof S=="boolean"?(E.boundary=4,E.storage=4):S.isVector2?(E.boundary=8,E.storage=8):S.isVector3||S.isColor?(E.boundary=16,E.storage=12):S.isVector4?(E.boundary=16,E.storage=16):S.isMatrix3?(E.boundary=48,E.storage=48):S.isMatrix4?(E.boundary=64,E.storage=64):S.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",S),E}function w(S){const E=S.target;E.removeEventListener("dispose",w);const C=o.indexOf(E.__bindingPointIndex);o.splice(C,1),n.deleteBuffer(r[E.id]),delete r[E.id],delete s[E.id]}function v(){for(const S in r)n.deleteBuffer(r[S]);o=[],r={},s={}}return{bind:l,update:c,dispose:v}}class TB{constructor(e={}){const{canvas:t=v4(),context:i=null,depth:r=!0,stencil:s=!1,alpha:o=!1,antialias:a=!1,premultipliedAlpha:l=!0,preserveDrawingBuffer:c=!1,powerPreference:u="default",failIfMajorPerformanceCaveat:p=!1,reverseDepthBuffer:m=!1}=e;this.isWebGLRenderer=!0;let g;if(i!==null){if(typeof WebGLRenderingContext<"u"&&i instanceof WebGLRenderingContext)throw new Error("THREE.WebGLRenderer: WebGL 1 is not supported since r163.");g=i.getContextAttributes().alpha}else g=o;const x=new Uint32Array(4),b=new Int32Array(4);let w=null,v=null;const S=[],E=[];this.domElement=t,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this._outputColorSpace=qr,this.toneMapping=zo,this.toneMappingExposure=1;const C=this;let U=!1,O=0,N=0,P=null,A=-1,M=null;const D=new mn,z=new mn;let F=null;const re=new st(0);let le=0,he=t.width,ue=t.height,q=1,Q=null,j=null;const J=new mn(0,0,he,ue),ce=new mn(0,0,he,ue);let me=!1;const oe=new Hg;let ye=!1,Re=!1;this.transmissionResolutionScale=1;const Me=new At,ht=new At,zt=new K,Ge=new mn,Je={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};let Ce=!1;function Se(){return P===null?q:1}let X=i;function ot(H,te){return t.getContext(H,te)}try{const H={alpha:!0,depth:r,stencil:s,antialias:a,premultipliedAlpha:l,preserveDrawingBuffer:c,powerPreference:u,failIfMajorPerformanceCaveat:p};if("setAttribute"in t&&t.setAttribute("data-engine",`three.js r${Ug}`),t.addEventListener("webglcontextlost",Te,!1),t.addEventListener("webglcontextrestored",Ke,!1),t.addEventListener("webglcontextcreationerror",ze,!1),X===null){const te="webgl2";if(X=ot(te,H),X===null)throw ot(te)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}}catch(H){throw console.error("THREE.WebGLRenderer: "+H.message),H}let Ne,qe,Ue,gt,Ve,$,B,ae,be,Pe,ve,Fe,We,tt,Gt,Le,nt,wt,Tt,rt,Qt,Nt,xn,Z;function $e(){Ne=new bie(X),Ne.init(),Nt=new SB(X,Ne),qe=new mie(X,Ne,e,Nt),Ue=new nse(X,Ne),qe.reverseDepthBuffer&&m&&Ue.buffers.depth.setReversed(!0),gt=new Eie(X),Ve=new Hre,$=new ise(X,Ne,Ue,Ve,qe,Nt,gt),B=new yie(C),ae=new wie(C),be=new Ree(X),xn=new fie(X,be),Pe=new Sie(X,be,gt,xn),ve=new Aie(X,Pe,be,gt),Tt=new Cie(X,qe,$),Le=new gie(Ve),Fe=new zre(C,B,ae,Ne,qe,xn,Le),We=new cse(C,Ve),tt=new Wre,Gt=new Jre(Ne),wt=new die(C,B,ae,Ue,ve,g,l),nt=new ese(C,ve,qe),Z=new use(X,gt,qe,Ue),rt=new pie(X,Ne,gt),Qt=new Tie(X,Ne,gt),gt.programs=Fe.programs,C.capabilities=qe,C.extensions=Ne,C.properties=Ve,C.renderLists=tt,C.shadowMap=nt,C.state=Ue,C.info=gt}$e();const _e=new ase(C,X);this.xr=_e,this.getContext=function(){return X},this.getContextAttributes=function(){return X.getContextAttributes()},this.forceContextLoss=function(){const H=Ne.get("WEBGL_lose_context");H&&H.loseContext()},this.forceContextRestore=function(){const H=Ne.get("WEBGL_lose_context");H&&H.restoreContext()},this.getPixelRatio=function(){return q},this.setPixelRatio=function(H){H!==void 0&&(q=H,this.setSize(he,ue,!1))},this.getSize=function(H){return H.set(he,ue)},this.setSize=function(H,te,pe=!0){if(_e.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}he=H,ue=te,t.width=Math.floor(H*q),t.height=Math.floor(te*q),pe===!0&&(t.style.width=H+"px",t.style.height=te+"px"),this.setViewport(0,0,H,te)},this.getDrawingBufferSize=function(H){return H.set(he*q,ue*q).floor()},this.setDrawingBufferSize=function(H,te,pe){he=H,ue=te,q=pe,t.width=Math.floor(H*pe),t.height=Math.floor(te*pe),this.setViewport(0,0,H,te)},this.getCurrentViewport=function(H){return H.copy(D)},this.getViewport=function(H){return H.copy(J)},this.setViewport=function(H,te,pe,fe){H.isVector4?J.set(H.x,H.y,H.z,H.w):J.set(H,te,pe,fe),Ue.viewport(D.copy(J).multiplyScalar(q).round())},this.getScissor=function(H){return H.copy(ce)},this.setScissor=function(H,te,pe,fe){H.isVector4?ce.set(H.x,H.y,H.z,H.w):ce.set(H,te,pe,fe),Ue.scissor(z.copy(ce).multiplyScalar(q).round())},this.getScissorTest=function(){return me},this.setScissorTest=function(H){Ue.setScissorTest(me=H)},this.setOpaqueSort=function(H){Q=H},this.setTransparentSort=function(H){j=H},this.getClearColor=function(H){return H.copy(wt.getClearColor())},this.setClearColor=function(){wt.setClearColor(...arguments)},this.getClearAlpha=function(){return wt.getClearAlpha()},this.setClearAlpha=function(){wt.setClearAlpha(...arguments)},this.clear=function(H=!0,te=!0,pe=!0){let fe=0;if(H){let ne=!1;if(P!==null){const De=P.texture.format;ne=De===Sw||De===bw||De===Fg}if(ne){const De=P.texture.type,Be=De===xo||De===ja||De===rf||De===Gu||De===xw||De===_w,Ye=wt.getClearColor(),it=wt.getClearAlpha(),xt=Ye.r,vt=Ye.g,He=Ye.b;Be?(x[0]=xt,x[1]=vt,x[2]=He,x[3]=it,X.clearBufferuiv(X.COLOR,0,x)):(b[0]=xt,b[1]=vt,b[2]=He,b[3]=it,X.clearBufferiv(X.COLOR,0,b))}else fe|=X.COLOR_BUFFER_BIT}te&&(fe|=X.DEPTH_BUFFER_BIT),pe&&(fe|=X.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),X.clear(fe)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",Te,!1),t.removeEventListener("webglcontextrestored",Ke,!1),t.removeEventListener("webglcontextcreationerror",ze,!1),wt.dispose(),tt.dispose(),Gt.dispose(),Ve.dispose(),B.dispose(),ae.dispose(),ve.dispose(),xn.dispose(),Z.dispose(),Fe.dispose(),_e.dispose(),_e.removeEventListener("sessionstart",wc),_e.removeEventListener("sessionend",So),Zi.stop()};function Te(H){H.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),U=!0}function Ke(){console.log("THREE.WebGLRenderer: Context Restored."),U=!1;const H=gt.autoReset,te=nt.enabled,pe=nt.autoUpdate,fe=nt.needsUpdate,ne=nt.type;$e(),gt.autoReset=H,nt.enabled=te,nt.autoUpdate=pe,nt.needsUpdate=fe,nt.type=ne}function ze(H){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",H.statusMessage)}function Rt(H){const te=H.target;te.removeEventListener("dispose",Rt),Cn(te)}function Cn(H){Yn(H),Ve.remove(H)}function Yn(H){const te=Ve.get(H).programs;te!==void 0&&(te.forEach(function(pe){Fe.releaseProgram(pe)}),H.isShaderMaterial&&Fe.releaseShaderCache(H))}this.renderBufferDirect=function(H,te,pe,fe,ne,De){te===null&&(te=Je);const Be=ne.isMesh&&ne.matrixWorld.determinant()<0,Ye=Xa(H,te,pe,fe,ne);Ue.setMaterial(fe,Be);let it=pe.index,xt=1;if(fe.wireframe===!0){if(it=Pe.getWireframeAttribute(pe),it===void 0)return;xt=2}const vt=pe.drawRange,He=pe.attributes.position;let dt=vt.start*xt,Ot=(vt.start+vt.count)*xt;De!==null&&(dt=Math.max(dt,De.start*xt),Ot=Math.min(Ot,(De.start+De.count)*xt)),it!==null?(dt=Math.max(dt,0),Ot=Math.min(Ot,it.count)):He!=null&&(dt=Math.max(dt,0),Ot=Math.min(Ot,He.count));const Wt=Ot-dt;if(Wt<0||Wt===1/0)return;xn.setup(ne,fe,Ye,pe,it);let Kt,Ut=rt;if(it!==null&&(Kt=be.get(it),Ut=Qt,Ut.setIndex(Kt)),ne.isMesh)fe.wireframe===!0?(Ue.setLineWidth(fe.wireframeLinewidth*Se()),Ut.setMode(X.LINES)):Ut.setMode(X.TRIANGLES);else if(ne.isLine){let pt=fe.linewidth;pt===void 0&&(pt=1),Ue.setLineWidth(pt*Se()),ne.isLineSegments?Ut.setMode(X.LINES):ne.isLineLoop?Ut.setMode(X.LINE_LOOP):Ut.setMode(X.LINE_STRIP)}else ne.isPoints?Ut.setMode(X.POINTS):ne.isSprite&&Ut.setMode(X.TRIANGLES);if(ne.isBatchedMesh)if(ne._multiDrawInstances!==null)lu("THREE.WebGLRenderer: renderMultiDrawInstances has been deprecated and will be removed in r184. Append to renderMultiDraw arguments and use indirection."),Ut.renderMultiDrawInstances(ne._multiDrawStarts,ne._multiDrawCounts,ne._multiDrawCount,ne._multiDrawInstances);else if(Ne.get("WEBGL_multi_draw"))Ut.renderMultiDraw(ne._multiDrawStarts,ne._multiDrawCounts,ne._multiDrawCount);else{const pt=ne._multiDrawStarts,un=ne._multiDrawCounts,en=ne._multiDrawCount,Bi=it?be.get(it).bytesPerElement:1,Js=Ve.get(fe).currentProgram.getUniforms();for(let Dn=0;Dn<en;Dn++)Js.setValue(X,"_gl_DrawID",Dn),Ut.render(pt[Dn]/Bi,un[Dn])}else if(ne.isInstancedMesh)Ut.renderInstances(dt,Wt,ne.count);else if(pe.isInstancedBufferGeometry){const pt=pe._maxInstanceCount!==void 0?pe._maxInstanceCount:1/0,un=Math.min(pe.instanceCount,pt);Ut.renderInstances(dt,Wt,un)}else Ut.render(dt,Wt)};function Zt(H,te,pe){H.transparent===!0&&H.side===uo&&H.forceSinglePass===!1?(H.side=Lr,H.needsUpdate=!0,Ys(H,te,pe),H.side=Oa,H.needsUpdate=!0,Ys(H,te,pe),H.side=uo):Ys(H,te,pe)}this.compile=function(H,te,pe=null){pe===null&&(pe=H),v=Gt.get(pe),v.init(te),E.push(v),pe.traverseVisible(function(ne){ne.isLight&&ne.layers.test(te.layers)&&(v.pushLight(ne),ne.castShadow&&v.pushShadow(ne))}),H!==pe&&H.traverseVisible(function(ne){ne.isLight&&ne.layers.test(te.layers)&&(v.pushLight(ne),ne.castShadow&&v.pushShadow(ne))}),v.setupLights();const fe=new Set;return H.traverse(function(ne){if(!(ne.isMesh||ne.isPoints||ne.isLine||ne.isSprite))return;const De=ne.material;if(De)if(Array.isArray(De))for(let Be=0;Be<De.length;Be++){const Ye=De[Be];Zt(Ye,pe,ne),fe.add(Ye)}else Zt(De,pe,ne),fe.add(De)}),v=E.pop(),fe},this.compileAsync=function(H,te,pe=null){const fe=this.compile(H,te,pe);return new Promise(ne=>{function De(){if(fe.forEach(function(Be){Ve.get(Be).currentProgram.isReady()&&fe.delete(Be)}),fe.size===0){ne(H);return}setTimeout(De,10)}Ne.get("KHR_parallel_shader_compile")!==null?De():setTimeout(De,10)})};let Vi=null;function Pn(H){Vi&&Vi(H)}function wc(){Zi.stop()}function So(){Zi.start()}const Zi=new vB;Zi.setAnimationLoop(Pn),typeof self<"u"&&Zi.setContext(self),this.setAnimationLoop=function(H){Vi=H,_e.setAnimationLoop(H),H===null?Zi.stop():Zi.start()},_e.addEventListener("sessionstart",wc),_e.addEventListener("sessionend",So),this.render=function(H,te){if(te!==void 0&&te.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(U===!0)return;if(H.matrixWorldAutoUpdate===!0&&H.updateMatrixWorld(),te.parent===null&&te.matrixWorldAutoUpdate===!0&&te.updateMatrixWorld(),_e.enabled===!0&&_e.isPresenting===!0&&(_e.cameraAutoUpdate===!0&&_e.updateCamera(te),te=_e.getCamera()),H.isScene===!0&&H.onBeforeRender(C,H,te,P),v=Gt.get(H,E.length),v.init(te),E.push(v),ht.multiplyMatrices(te.projectionMatrix,te.matrixWorldInverse),oe.setFromProjectionMatrix(ht),Re=this.localClippingEnabled,ye=Le.init(this.clippingPlanes,Re),w=tt.get(H,S.length),w.init(),S.push(w),_e.enabled===!0&&_e.isPresenting===!0){const De=C.xr.getDepthSensingMesh();De!==null&&Jo(De,te,-1/0,C.sortObjects)}Jo(H,te,0,C.sortObjects),w.finish(),C.sortObjects===!0&&w.sort(Q,j),Ce=_e.enabled===!1||_e.isPresenting===!1||_e.hasDepthSensing()===!1,Ce&&wt.addToRenderList(w,H),this.info.render.frame++,ye===!0&&Le.beginShadows();const pe=v.state.shadowsArray;nt.render(pe,H,te),ye===!0&&Le.endShadows(),this.info.autoReset===!0&&this.info.reset();const fe=w.opaque,ne=w.transmissive;if(v.setupLights(),te.isArrayCamera){const De=te.cameras;if(ne.length>0)for(let Be=0,Ye=De.length;Be<Ye;Be++){const it=De[Be];Tr(fe,ne,H,it)}Ce&&wt.render(H);for(let Be=0,Ye=De.length;Be<Ye;Be++){const it=De[Be];lh(w,H,it,it.viewport)}}else ne.length>0&&Tr(fe,ne,H,te),Ce&&wt.render(H),lh(w,H,te);P!==null&&N===0&&($.updateMultisampleRenderTarget(P),$.updateRenderTargetMipmap(P)),H.isScene===!0&&H.onAfterRender(C,H,te),xn.resetDefaultState(),A=-1,M=null,E.pop(),E.length>0?(v=E[E.length-1],ye===!0&&Le.setGlobalState(C.clippingPlanes,v.state.camera)):v=null,S.pop(),S.length>0?w=S[S.length-1]:w=null};function Jo(H,te,pe,fe){if(H.visible===!1)return;if(H.layers.test(te.layers)){if(H.isGroup)pe=H.renderOrder;else if(H.isLOD)H.autoUpdate===!0&&H.update(te);else if(H.isLight)v.pushLight(H),H.castShadow&&v.pushShadow(H);else if(H.isSprite){if(!H.frustumCulled||oe.intersectsSprite(H)){fe&&Ge.setFromMatrixPosition(H.matrixWorld).applyMatrix4(ht);const Be=ve.update(H),Ye=H.material;Ye.visible&&w.push(H,Be,Ye,pe,Ge.z,null)}}else if((H.isMesh||H.isLine||H.isPoints)&&(!H.frustumCulled||oe.intersectsObject(H))){const Be=ve.update(H),Ye=H.material;if(fe&&(H.boundingSphere!==void 0?(H.boundingSphere===null&&H.computeBoundingSphere(),Ge.copy(H.boundingSphere.center)):(Be.boundingSphere===null&&Be.computeBoundingSphere(),Ge.copy(Be.boundingSphere.center)),Ge.applyMatrix4(H.matrixWorld).applyMatrix4(ht)),Array.isArray(Ye)){const it=Be.groups;for(let xt=0,vt=it.length;xt<vt;xt++){const He=it[xt],dt=Ye[He.materialIndex];dt&&dt.visible&&w.push(H,Be,dt,pe,Ge.z,He)}}else Ye.visible&&w.push(H,Be,Ye,pe,Ge.z,null)}}const De=H.children;for(let Be=0,Ye=De.length;Be<Ye;Be++)Jo(De[Be],te,pe,fe)}function lh(H,te,pe,fe){const ne=H.opaque,De=H.transmissive,Be=H.transparent;v.setupLightsView(pe),ye===!0&&Le.setGlobalState(C.clippingPlanes,pe),fe&&Ue.viewport(D.copy(fe)),ne.length>0&&qa(ne,te,pe),De.length>0&&qa(De,te,pe),Be.length>0&&qa(Be,te,pe),Ue.buffers.depth.setTest(!0),Ue.buffers.depth.setMask(!0),Ue.buffers.color.setMask(!0),Ue.setPolygonOffset(!1)}function Tr(H,te,pe,fe){if((pe.isScene===!0?pe.overrideMaterial:null)!==null)return;v.state.transmissionRenderTarget[fe.id]===void 0&&(v.state.transmissionRenderTarget[fe.id]=new Xo(1,1,{generateMipmaps:!0,type:Ne.has("EXT_color_buffer_half_float")||Ne.has("EXT_color_buffer_float")?Tf:xo,minFilter:Do,samples:4,stencilBuffer:s,resolveDepthBuffer:!1,resolveStencilBuffer:!1,colorSpace:dn.workingColorSpace}));const De=v.state.transmissionRenderTarget[fe.id],Be=fe.viewport||D;De.setSize(Be.z*C.transmissionResolutionScale,Be.w*C.transmissionResolutionScale);const Ye=C.getRenderTarget();C.setRenderTarget(De),C.getClearColor(re),le=C.getClearAlpha(),le<1&&C.setClearColor(16777215,.5),C.clear(),Ce&&wt.render(pe);const it=C.toneMapping;C.toneMapping=zo;const xt=fe.viewport;if(fe.viewport!==void 0&&(fe.viewport=void 0),v.setupLightsView(fe),ye===!0&&Le.setGlobalState(C.clippingPlanes,fe),qa(H,pe,fe),$.updateMultisampleRenderTarget(De),$.updateRenderTargetMipmap(De),Ne.has("WEBGL_multisampled_render_to_texture")===!1){let vt=!1;for(let He=0,dt=te.length;He<dt;He++){const Ot=te[He],Wt=Ot.object,Kt=Ot.geometry,Ut=Ot.material,pt=Ot.group;if(Ut.side===uo&&Wt.layers.test(fe.layers)){const un=Ut.side;Ut.side=Lr,Ut.needsUpdate=!0,ch(Wt,pe,fe,Kt,Ut,pt),Ut.side=un,Ut.needsUpdate=!0,vt=!0}}vt===!0&&($.updateMultisampleRenderTarget(De),$.updateRenderTargetMipmap(De))}C.setRenderTarget(Ye),C.setClearColor(re,le),xt!==void 0&&(fe.viewport=xt),C.toneMapping=it}function qa(H,te,pe){const fe=te.isScene===!0?te.overrideMaterial:null;for(let ne=0,De=H.length;ne<De;ne++){const Be=H[ne],Ye=Be.object,it=Be.geometry,xt=fe===null?Be.material:fe,vt=Be.group;Ye.layers.test(pe.layers)&&ch(Ye,te,pe,it,xt,vt)}}function ch(H,te,pe,fe,ne,De){H.onBeforeRender(C,te,pe,fe,ne,De),H.modelViewMatrix.multiplyMatrices(pe.matrixWorldInverse,H.matrixWorld),H.normalMatrix.getNormalMatrix(H.modelViewMatrix),ne.onBeforeRender(C,te,pe,fe,H,De),ne.transparent===!0&&ne.side===uo&&ne.forceSinglePass===!1?(ne.side=Lr,ne.needsUpdate=!0,C.renderBufferDirect(pe,te,fe,ne,H,De),ne.side=Oa,ne.needsUpdate=!0,C.renderBufferDirect(pe,te,fe,ne,H,De),ne.side=uo):C.renderBufferDirect(pe,te,fe,ne,H,De),H.onAfterRender(C,te,pe,fe,ne,De)}function Ys(H,te,pe){te.isScene!==!0&&(te=Je);const fe=Ve.get(H),ne=v.state.lights,De=v.state.shadowsArray,Be=ne.state.version,Ye=Fe.getParameters(H,ne.state,De,te,pe),it=Fe.getProgramCacheKey(Ye);let xt=fe.programs;fe.environment=H.isMeshStandardMaterial?te.environment:null,fe.fog=te.fog,fe.envMap=(H.isMeshStandardMaterial?ae:B).get(H.envMap||fe.environment),fe.envMapRotation=fe.environment!==null&&H.envMap===null?te.environmentRotation:H.envMapRotation,xt===void 0&&(H.addEventListener("dispose",Rt),xt=new Map,fe.programs=xt);let vt=xt.get(it);if(vt!==void 0){if(fe.currentProgram===vt&&fe.lightsStateVersion===Be)return $a(H,Ye),vt}else Ye.uniforms=Fe.getUniforms(H),H.onBeforeCompile(Ye,C),vt=Fe.acquireProgram(Ye,it),xt.set(it,vt),fe.uniforms=Ye.uniforms;const He=fe.uniforms;return(!H.isShaderMaterial&&!H.isRawShaderMaterial||H.clipping===!0)&&(He.clippingPlanes=Le.uniform),$a(H,Ye),fe.needsLights=Sc(H),fe.lightsStateVersion=Be,fe.needsLights&&(He.ambientLightColor.value=ne.state.ambient,He.lightProbe.value=ne.state.probe,He.directionalLights.value=ne.state.directional,He.directionalLightShadows.value=ne.state.directionalShadow,He.spotLights.value=ne.state.spot,He.spotLightShadows.value=ne.state.spotShadow,He.rectAreaLights.value=ne.state.rectArea,He.ltc_1.value=ne.state.rectAreaLTC1,He.ltc_2.value=ne.state.rectAreaLTC2,He.pointLights.value=ne.state.point,He.pointLightShadows.value=ne.state.pointShadow,He.hemisphereLights.value=ne.state.hemi,He.directionalShadowMap.value=ne.state.directionalShadowMap,He.directionalShadowMatrix.value=ne.state.directionalShadowMatrix,He.spotShadowMap.value=ne.state.spotShadowMap,He.spotLightMatrix.value=ne.state.spotLightMatrix,He.spotLightMap.value=ne.state.spotLightMap,He.pointShadowMap.value=ne.state.pointShadowMap,He.pointShadowMatrix.value=ne.state.pointShadowMatrix),fe.currentProgram=vt,fe.uniformsList=null,vt}function bc(H){if(H.uniformsList===null){const te=H.currentProgram.getUniforms();H.uniformsList=Dx.seqWithValue(te.seq,H.uniforms)}return H.uniformsList}function $a(H,te){const pe=Ve.get(H);pe.outputColorSpace=te.outputColorSpace,pe.batching=te.batching,pe.batchingColor=te.batchingColor,pe.instancing=te.instancing,pe.instancingColor=te.instancingColor,pe.instancingMorph=te.instancingMorph,pe.skinning=te.skinning,pe.morphTargets=te.morphTargets,pe.morphNormals=te.morphNormals,pe.morphColors=te.morphColors,pe.morphTargetsCount=te.morphTargetsCount,pe.numClippingPlanes=te.numClippingPlanes,pe.numIntersection=te.numClipIntersection,pe.vertexAlphas=te.vertexAlphas,pe.vertexTangents=te.vertexTangents,pe.toneMapping=te.toneMapping}function Xa(H,te,pe,fe,ne){te.isScene!==!0&&(te=Je),$.resetTextureUnits();const De=te.fog,Be=fe.isMeshStandardMaterial?te.environment:null,Ye=P===null?C.outputColorSpace:P.isXRRenderTarget===!0?P.texture.colorSpace:qu,it=(fe.isMeshStandardMaterial?ae:B).get(fe.envMap||Be),xt=fe.vertexColors===!0&&!!pe.attributes.color&&pe.attributes.color.itemSize===4,vt=!!pe.attributes.tangent&&(!!fe.normalMap||fe.anisotropy>0),He=!!pe.morphAttributes.position,dt=!!pe.morphAttributes.normal,Ot=!!pe.morphAttributes.color;let Wt=zo;fe.toneMapped&&(P===null||P.isXRRenderTarget===!0)&&(Wt=C.toneMapping);const Kt=pe.morphAttributes.position||pe.morphAttributes.normal||pe.morphAttributes.color,Ut=Kt!==void 0?Kt.length:0,pt=Ve.get(fe),un=v.state.lights;if(ye===!0&&(Re===!0||H!==M)){const jt=H===M&&fe.id===A;Le.setState(fe,H,jt)}let en=!1;fe.version===pt.__version?(pt.needsLights&&pt.lightsStateVersion!==un.state.version||pt.outputColorSpace!==Ye||ne.isBatchedMesh&&pt.batching===!1||!ne.isBatchedMesh&&pt.batching===!0||ne.isBatchedMesh&&pt.batchingColor===!0&&ne.colorTexture===null||ne.isBatchedMesh&&pt.batchingColor===!1&&ne.colorTexture!==null||ne.isInstancedMesh&&pt.instancing===!1||!ne.isInstancedMesh&&pt.instancing===!0||ne.isSkinnedMesh&&pt.skinning===!1||!ne.isSkinnedMesh&&pt.skinning===!0||ne.isInstancedMesh&&pt.instancingColor===!0&&ne.instanceColor===null||ne.isInstancedMesh&&pt.instancingColor===!1&&ne.instanceColor!==null||ne.isInstancedMesh&&pt.instancingMorph===!0&&ne.morphTexture===null||ne.isInstancedMesh&&pt.instancingMorph===!1&&ne.morphTexture!==null||pt.envMap!==it||fe.fog===!0&&pt.fog!==De||pt.numClippingPlanes!==void 0&&(pt.numClippingPlanes!==Le.numPlanes||pt.numIntersection!==Le.numIntersection)||pt.vertexAlphas!==xt||pt.vertexTangents!==vt||pt.morphTargets!==He||pt.morphNormals!==dt||pt.morphColors!==Ot||pt.toneMapping!==Wt||pt.morphTargetsCount!==Ut)&&(en=!0):(en=!0,pt.__version=fe.version);let Bi=pt.currentProgram;en===!0&&(Bi=Ys(fe,te,ne));let Js=!1,Dn=!1,Ni=!1;const qt=Bi.getUniforms(),Si=pt.uniforms;if(Ue.useProgram(Bi.program)&&(Js=!0,Dn=!0,Ni=!0),fe.id!==A&&(A=fe.id,Dn=!0),Js||M!==H){Ue.buffers.depth.getReversed()?(Me.copy(H.projectionMatrix),ZJ(Me),eQ(Me),qt.setValue(X,"projectionMatrix",Me)):qt.setValue(X,"projectionMatrix",H.projectionMatrix),qt.setValue(X,"viewMatrix",H.matrixWorldInverse);const Vn=qt.map.cameraPosition;Vn!==void 0&&Vn.setValue(X,zt.setFromMatrixPosition(H.matrixWorld)),qe.logarithmicDepthBuffer&&qt.setValue(X,"logDepthBufFC",2/(Math.log(H.far+1)/Math.LN2)),(fe.isMeshPhongMaterial||fe.isMeshToonMaterial||fe.isMeshLambertMaterial||fe.isMeshBasicMaterial||fe.isMeshStandardMaterial||fe.isShaderMaterial)&&qt.setValue(X,"isOrthographic",H.isOrthographicCamera===!0),M!==H&&(M=H,Dn=!0,Ni=!0)}if(ne.isSkinnedMesh){qt.setOptional(X,ne,"bindMatrix"),qt.setOptional(X,ne,"bindMatrixInverse");const jt=ne.skeleton;jt&&(jt.boneTexture===null&&jt.computeBoneTexture(),qt.setValue(X,"boneTexture",jt.boneTexture,$))}ne.isBatchedMesh&&(qt.setOptional(X,ne,"batchingTexture"),qt.setValue(X,"batchingTexture",ne._matricesTexture,$),qt.setOptional(X,ne,"batchingIdTexture"),qt.setValue(X,"batchingIdTexture",ne._indirectTexture,$),qt.setOptional(X,ne,"batchingColorTexture"),ne._colorsTexture!==null&&qt.setValue(X,"batchingColorTexture",ne._colorsTexture,$));const zi=pe.morphAttributes;if((zi.position!==void 0||zi.normal!==void 0||zi.color!==void 0)&&Tt.update(ne,pe,Bi),(Dn||pt.receiveShadow!==ne.receiveShadow)&&(pt.receiveShadow=ne.receiveShadow,qt.setValue(X,"receiveShadow",ne.receiveShadow)),fe.isMeshGouraudMaterial&&fe.envMap!==null&&(Si.envMap.value=it,Si.flipEnvMap.value=it.isCubeTexture&&it.isRenderTargetTexture===!1?-1:1),fe.isMeshStandardMaterial&&fe.envMap===null&&te.environment!==null&&(Si.envMapIntensity.value=te.environmentIntensity),Dn&&(qt.setValue(X,"toneMappingExposure",C.toneMappingExposure),pt.needsLights&&As(Si,Ni),De&&fe.fog===!0&&We.refreshFogUniforms(Si,De),We.refreshMaterialUniforms(Si,fe,q,ue,v.state.transmissionRenderTarget[H.id]),Dx.upload(X,bc(pt),Si,$)),fe.isShaderMaterial&&fe.uniformsNeedUpdate===!0&&(Dx.upload(X,bc(pt),Si,$),fe.uniformsNeedUpdate=!1),fe.isSpriteMaterial&&qt.setValue(X,"center",ne.center),qt.setValue(X,"modelViewMatrix",ne.modelViewMatrix),qt.setValue(X,"normalMatrix",ne.normalMatrix),qt.setValue(X,"modelMatrix",ne.matrixWorld),fe.isShaderMaterial||fe.isRawShaderMaterial){const jt=fe.uniformsGroups;for(let Vn=0,Fr=jt.length;Vn<Fr;Vn++){const Ti=jt[Vn];Z.update(Ti,Bi),Z.bind(Ti,Bi)}}return Bi}function As(H,te){H.ambientLightColor.needsUpdate=te,H.lightProbe.needsUpdate=te,H.directionalLights.needsUpdate=te,H.directionalLightShadows.needsUpdate=te,H.pointLights.needsUpdate=te,H.pointLightShadows.needsUpdate=te,H.spotLights.needsUpdate=te,H.spotLightShadows.needsUpdate=te,H.rectAreaLights.needsUpdate=te,H.hemisphereLights.needsUpdate=te}function Sc(H){return H.isMeshLambertMaterial||H.isMeshToonMaterial||H.isMeshPhongMaterial||H.isMeshStandardMaterial||H.isShadowMaterial||H.isShaderMaterial&&H.lights===!0}this.getActiveCubeFace=function(){return O},this.getActiveMipmapLevel=function(){return N},this.getRenderTarget=function(){return P},this.setRenderTargetTextures=function(H,te,pe){Ve.get(H.texture).__webglTexture=te,Ve.get(H.depthTexture).__webglTexture=pe;const fe=Ve.get(H);fe.__hasExternalTextures=!0,fe.__autoAllocateDepthBuffer=pe===void 0,fe.__autoAllocateDepthBuffer||Ne.has("WEBGL_multisampled_render_to_texture")===!0&&(console.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),fe.__useRenderToTexture=!1)},this.setRenderTargetFramebuffer=function(H,te){const pe=Ve.get(H);pe.__webglFramebuffer=te,pe.__useDefaultFramebuffer=te===void 0};const uh=X.createFramebuffer();this.setRenderTarget=function(H,te=0,pe=0){P=H,O=te,N=pe;let fe=!0,ne=null,De=!1,Be=!1;if(H){const it=Ve.get(H);if(it.__useDefaultFramebuffer!==void 0)Ue.bindFramebuffer(X.FRAMEBUFFER,null),fe=!1;else if(it.__webglFramebuffer===void 0)$.setupRenderTarget(H);else if(it.__hasExternalTextures)$.rebindTextures(H,Ve.get(H.texture).__webglTexture,Ve.get(H.depthTexture).__webglTexture);else if(H.depthBuffer){const He=H.depthTexture;if(it.__boundDepthTexture!==He){if(He!==null&&Ve.has(He)&&(H.width!==He.image.width||H.height!==He.image.height))throw new Error("WebGLRenderTarget: Attached DepthTexture is initialized to the incorrect size.");$.setupDepthRenderbuffer(H)}}const xt=H.texture;(xt.isData3DTexture||xt.isDataArrayTexture||xt.isCompressedArrayTexture)&&(Be=!0);const vt=Ve.get(H).__webglFramebuffer;H.isWebGLCubeRenderTarget?(Array.isArray(vt[te])?ne=vt[te][pe]:ne=vt[te],De=!0):H.samples>0&&$.useMultisampledRTT(H)===!1?ne=Ve.get(H).__webglMultisampledFramebuffer:Array.isArray(vt)?ne=vt[pe]:ne=vt,D.copy(H.viewport),z.copy(H.scissor),F=H.scissorTest}else D.copy(J).multiplyScalar(q).floor(),z.copy(ce).multiplyScalar(q).floor(),F=me;if(pe!==0&&(ne=uh),Ue.bindFramebuffer(X.FRAMEBUFFER,ne)&&fe&&Ue.drawBuffers(H,ne),Ue.viewport(D),Ue.scissor(z),Ue.setScissorTest(F),De){const it=Ve.get(H.texture);X.framebufferTexture2D(X.FRAMEBUFFER,X.COLOR_ATTACHMENT0,X.TEXTURE_CUBE_MAP_POSITIVE_X+te,it.__webglTexture,pe)}else if(Be){const it=Ve.get(H.texture),xt=te;X.framebufferTextureLayer(X.FRAMEBUFFER,X.COLOR_ATTACHMENT0,it.__webglTexture,pe,xt)}else if(H!==null&&pe!==0){const it=Ve.get(H.texture);X.framebufferTexture2D(X.FRAMEBUFFER,X.COLOR_ATTACHMENT0,X.TEXTURE_2D,it.__webglTexture,pe)}A=-1},this.readRenderTargetPixels=function(H,te,pe,fe,ne,De,Be){if(!(H&&H.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let Ye=Ve.get(H).__webglFramebuffer;if(H.isWebGLCubeRenderTarget&&Be!==void 0&&(Ye=Ye[Be]),Ye){Ue.bindFramebuffer(X.FRAMEBUFFER,Ye);try{const it=H.texture,xt=it.format,vt=it.type;if(!qe.textureFormatReadable(xt)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}if(!qe.textureTypeReadable(vt)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}te>=0&&te<=H.width-fe&&pe>=0&&pe<=H.height-ne&&X.readPixels(te,pe,fe,ne,Nt.convert(xt),Nt.convert(vt),De)}finally{const it=P!==null?Ve.get(P).__webglFramebuffer:null;Ue.bindFramebuffer(X.FRAMEBUFFER,it)}}},this.readRenderTargetPixelsAsync=async function(H,te,pe,fe,ne,De,Be){if(!(H&&H.isWebGLRenderTarget))throw new Error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let Ye=Ve.get(H).__webglFramebuffer;if(H.isWebGLCubeRenderTarget&&Be!==void 0&&(Ye=Ye[Be]),Ye){const it=H.texture,xt=it.format,vt=it.type;if(!qe.textureFormatReadable(xt))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in RGBA or implementation defined format.");if(!qe.textureTypeReadable(vt))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in UnsignedByteType or implementation defined type.");if(te>=0&&te<=H.width-fe&&pe>=0&&pe<=H.height-ne){Ue.bindFramebuffer(X.FRAMEBUFFER,Ye);const He=X.createBuffer();X.bindBuffer(X.PIXEL_PACK_BUFFER,He),X.bufferData(X.PIXEL_PACK_BUFFER,De.byteLength,X.STREAM_READ),X.readPixels(te,pe,fe,ne,Nt.convert(xt),Nt.convert(vt),0);const dt=P!==null?Ve.get(P).__webglFramebuffer:null;Ue.bindFramebuffer(X.FRAMEBUFFER,dt);const Ot=X.fenceSync(X.SYNC_GPU_COMMANDS_COMPLETE,0);return X.flush(),await QJ(X,Ot,4),X.bindBuffer(X.PIXEL_PACK_BUFFER,He),X.getBufferSubData(X.PIXEL_PACK_BUFFER,0,De),X.deleteBuffer(He),X.deleteSync(Ot),De}else throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: requested read bounds are out of range.")}},this.copyFramebufferToTexture=function(H,te=null,pe=0){H.isTexture!==!0&&(lu("WebGLRenderer: copyFramebufferToTexture function signature has changed."),te=arguments[0]||null,H=arguments[1]);const fe=Math.pow(2,-pe),ne=Math.floor(H.image.width*fe),De=Math.floor(H.image.height*fe),Be=te!==null?te.x:0,Ye=te!==null?te.y:0;$.setTexture2D(H,0),X.copyTexSubImage2D(X.TEXTURE_2D,pe,0,0,Be,Ye,ne,De),Ue.unbindTexture()};const Tc=X.createFramebuffer(),Ec=X.createFramebuffer();this.copyTextureToTexture=function(H,te,pe=null,fe=null,ne=0,De=null){H.isTexture!==!0&&(lu("WebGLRenderer: copyTextureToTexture function signature has changed."),fe=arguments[0]||null,H=arguments[1],te=arguments[2],De=arguments[3]||0,pe=null),De===null&&(ne!==0?(lu("WebGLRenderer: copyTextureToTexture function signature has changed to support src and dst mipmap levels."),De=ne,ne=0):De=0);let Be,Ye,it,xt,vt,He,dt,Ot,Wt;const Kt=H.isCompressedTexture?H.mipmaps[De]:H.image;if(pe!==null)Be=pe.max.x-pe.min.x,Ye=pe.max.y-pe.min.y,it=pe.isBox3?pe.max.z-pe.min.z:1,xt=pe.min.x,vt=pe.min.y,He=pe.isBox3?pe.min.z:0;else{const zi=Math.pow(2,-ne);Be=Math.floor(Kt.width*zi),Ye=Math.floor(Kt.height*zi),H.isDataArrayTexture?it=Kt.depth:H.isData3DTexture?it=Math.floor(Kt.depth*zi):it=1,xt=0,vt=0,He=0}fe!==null?(dt=fe.x,Ot=fe.y,Wt=fe.z):(dt=0,Ot=0,Wt=0);const Ut=Nt.convert(te.format),pt=Nt.convert(te.type);let un;te.isData3DTexture?($.setTexture3D(te,0),un=X.TEXTURE_3D):te.isDataArrayTexture||te.isCompressedArrayTexture?($.setTexture2DArray(te,0),un=X.TEXTURE_2D_ARRAY):($.setTexture2D(te,0),un=X.TEXTURE_2D),X.pixelStorei(X.UNPACK_FLIP_Y_WEBGL,te.flipY),X.pixelStorei(X.UNPACK_PREMULTIPLY_ALPHA_WEBGL,te.premultiplyAlpha),X.pixelStorei(X.UNPACK_ALIGNMENT,te.unpackAlignment);const en=X.getParameter(X.UNPACK_ROW_LENGTH),Bi=X.getParameter(X.UNPACK_IMAGE_HEIGHT),Js=X.getParameter(X.UNPACK_SKIP_PIXELS),Dn=X.getParameter(X.UNPACK_SKIP_ROWS),Ni=X.getParameter(X.UNPACK_SKIP_IMAGES);X.pixelStorei(X.UNPACK_ROW_LENGTH,Kt.width),X.pixelStorei(X.UNPACK_IMAGE_HEIGHT,Kt.height),X.pixelStorei(X.UNPACK_SKIP_PIXELS,xt),X.pixelStorei(X.UNPACK_SKIP_ROWS,vt),X.pixelStorei(X.UNPACK_SKIP_IMAGES,He);const qt=H.isDataArrayTexture||H.isData3DTexture,Si=te.isDataArrayTexture||te.isData3DTexture;if(H.isDepthTexture){const zi=Ve.get(H),jt=Ve.get(te),Vn=Ve.get(zi.__renderTarget),Fr=Ve.get(jt.__renderTarget);Ue.bindFramebuffer(X.READ_FRAMEBUFFER,Vn.__webglFramebuffer),Ue.bindFramebuffer(X.DRAW_FRAMEBUFFER,Fr.__webglFramebuffer);for(let Ti=0;Ti<it;Ti++)qt&&(X.framebufferTextureLayer(X.READ_FRAMEBUFFER,X.COLOR_ATTACHMENT0,Ve.get(H).__webglTexture,ne,He+Ti),X.framebufferTextureLayer(X.DRAW_FRAMEBUFFER,X.COLOR_ATTACHMENT0,Ve.get(te).__webglTexture,De,Wt+Ti)),X.blitFramebuffer(xt,vt,Be,Ye,dt,Ot,Be,Ye,X.DEPTH_BUFFER_BIT,X.NEAREST);Ue.bindFramebuffer(X.READ_FRAMEBUFFER,null),Ue.bindFramebuffer(X.DRAW_FRAMEBUFFER,null)}else if(ne!==0||H.isRenderTargetTexture||Ve.has(H)){const zi=Ve.get(H),jt=Ve.get(te);Ue.bindFramebuffer(X.READ_FRAMEBUFFER,Tc),Ue.bindFramebuffer(X.DRAW_FRAMEBUFFER,Ec);for(let Vn=0;Vn<it;Vn++)qt?X.framebufferTextureLayer(X.READ_FRAMEBUFFER,X.COLOR_ATTACHMENT0,zi.__webglTexture,ne,He+Vn):X.framebufferTexture2D(X.READ_FRAMEBUFFER,X.COLOR_ATTACHMENT0,X.TEXTURE_2D,zi.__webglTexture,ne),Si?X.framebufferTextureLayer(X.DRAW_FRAMEBUFFER,X.COLOR_ATTACHMENT0,jt.__webglTexture,De,Wt+Vn):X.framebufferTexture2D(X.DRAW_FRAMEBUFFER,X.COLOR_ATTACHMENT0,X.TEXTURE_2D,jt.__webglTexture,De),ne!==0?X.blitFramebuffer(xt,vt,Be,Ye,dt,Ot,Be,Ye,X.COLOR_BUFFER_BIT,X.NEAREST):Si?X.copyTexSubImage3D(un,De,dt,Ot,Wt+Vn,xt,vt,Be,Ye):X.copyTexSubImage2D(un,De,dt,Ot,xt,vt,Be,Ye);Ue.bindFramebuffer(X.READ_FRAMEBUFFER,null),Ue.bindFramebuffer(X.DRAW_FRAMEBUFFER,null)}else Si?H.isDataTexture||H.isData3DTexture?X.texSubImage3D(un,De,dt,Ot,Wt,Be,Ye,it,Ut,pt,Kt.data):te.isCompressedArrayTexture?X.compressedTexSubImage3D(un,De,dt,Ot,Wt,Be,Ye,it,Ut,Kt.data):X.texSubImage3D(un,De,dt,Ot,Wt,Be,Ye,it,Ut,pt,Kt):H.isDataTexture?X.texSubImage2D(X.TEXTURE_2D,De,dt,Ot,Be,Ye,Ut,pt,Kt.data):H.isCompressedTexture?X.compressedTexSubImage2D(X.TEXTURE_2D,De,dt,Ot,Kt.width,Kt.height,Ut,Kt.data):X.texSubImage2D(X.TEXTURE_2D,De,dt,Ot,Be,Ye,Ut,pt,Kt);X.pixelStorei(X.UNPACK_ROW_LENGTH,en),X.pixelStorei(X.UNPACK_IMAGE_HEIGHT,Bi),X.pixelStorei(X.UNPACK_SKIP_PIXELS,Js),X.pixelStorei(X.UNPACK_SKIP_ROWS,Dn),X.pixelStorei(X.UNPACK_SKIP_IMAGES,Ni),De===0&&te.generateMipmaps&&X.generateMipmap(un),Ue.unbindTexture()},this.copyTextureToTexture3D=function(H,te,pe=null,fe=null,ne=0){return H.isTexture!==!0&&(lu("WebGLRenderer: copyTextureToTexture3D function signature has changed."),pe=arguments[0]||null,fe=arguments[1]||null,H=arguments[2],te=arguments[3],ne=arguments[4]||0),lu('WebGLRenderer: copyTextureToTexture3D function has been deprecated. Use "copyTextureToTexture" instead.'),this.copyTextureToTexture(H,te,pe,fe,ne)},this.initRenderTarget=function(H){Ve.get(H).__webglFramebuffer===void 0&&$.setupRenderTarget(H)},this.initTexture=function(H){H.isCubeTexture?$.setTextureCube(H,0):H.isData3DTexture?$.setTexture3D(H,0):H.isDataArrayTexture||H.isCompressedArrayTexture?$.setTexture2DArray(H,0):$.setTexture2D(H,0),Ue.unbindTexture()},this.resetState=function(){O=0,N=0,P=null,Ue.reset(),xn.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return ho}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(e){this._outputColorSpace=e;const t=this.getContext();t.drawingBufferColorspace=dn._getDrawingBufferColorSpace(e),t.unpackColorSpace=dn._getUnpackColorSpace()}}const hse=Object.freeze(Object.defineProperty({__proto__:null,ACESFilmicToneMapping:$A,AddEquation:El,AddOperation:YV,AdditiveAnimationBlendMode:rM,AdditiveBlending:h1,AgXToneMapping:t4,AlphaFormat:QA,AlwaysCompare:g4,AlwaysDepth:D0,AlwaysStencilFunc:m1,AmbientLight:oB,AnimationAction:mB,AnimationClip:hg,AnimationLoader:TZ,AnimationMixer:ZZ,AnimationObjectGroup:JZ,AnimationUtils:_Z,ArcCurve:N4,ArrayCamera:dB,ArrowHelper:bee,AttachedBindMode:p1,Audio:fB,AudioAnalyser:BZ,AudioContext:IM,AudioListener:jZ,AudioLoader:kZ,AxesHelper:See,BackSide:Lr,BasicDepthPacking:a4,BasicShadowMap:PV,BatchedMesh:M4,Bone:fM,BooleanKeyframeTrack:nh,Box2:lee,Box3:kr,Box3Helper:_ee,BoxGeometry:th,BoxHelper:xee,BufferAttribute:In,BufferGeometry:Xt,BufferGeometryLoader:hB,ByteType:KA,Cache:_a,Camera:Bg,CameraHelper:vee,CanvasTexture:GQ,CapsuleGeometry:Lw,CatmullRomCurve3:D4,CineonToneMapping:ZV,CircleGeometry:kw,ClampToEdgeWrapping:Gs,Clock:PM,Color:st,ColorKeyframeTrack:CM,ColorManagement:dn,CompressedArrayTexture:zQ,CompressedCubeTexture:HQ,CompressedTexture:Nw,CompressedTextureLoader:EZ,ConeGeometry:Ow,ConstantAlphaFactor:$V,ConstantColorFactor:WV,Controls:Eee,CubeCamera:cM,CubeReflectionMapping:Ua,CubeRefractionMapping:rc,CubeTexture:zg,CubeTextureLoader:CZ,CubeUVReflectionMapping:Sf,CubicBezierCurve:gM,CubicBezierCurve3:L4,CubicInterpolant:Z4,CullFaceBack:u1,CullFaceFront:IV,CullFaceFrontBack:eJ,CullFaceNone:MV,Curve:wo,CurvePath:O4,CustomBlending:RV,CustomToneMapping:e4,CylinderGeometry:Cf,Cylindrical:aee,Data3DTexture:Cw,DataArrayTexture:Vg,DataTexture:Ho,DataTextureLoader:AZ,DataUtils:mQ,DecrementStencilOp:pJ,DecrementWrapStencilOp:gJ,DefaultLoadingManager:bd,DepthFormat:Eu,DepthStencilFormat:Wu,DepthTexture:pM,DetachedBindMode:i4,DirectionalLight:sB,DirectionalLightHelper:yee,DiscreteInterpolant:eB,DodecahedronGeometry:Uw,DoubleSide:uo,DstAlphaFactor:VV,DstColorFactor:zV,DynamicCopyUsage:PJ,DynamicDrawUsage:Cu,DynamicReadUsage:AJ,EdgesGeometry:U4,EllipseCurve:Dw,EqualCompare:d4,EqualDepth:k0,EqualStencilFunc:_J,EquirectangularReflectionMapping:Km,EquirectangularRefractionMapping:Ym,Euler:Ss,EventDispatcher:Ko,ExtrudeGeometry:Fw,FileLoader:Fa,Float16BufferAttribute:bQ,Float32BufferAttribute:ft,FloatType:Qr,Fog:Mw,FogExp2:Aw,FramebufferTexture:BQ,FrontSide:Oa,Frustum:Hg,GLBufferAttribute:see,GLSL1:NJ,GLSL3:g1,GreaterCompare:f4,GreaterDepth:U0,GreaterEqualCompare:m4,GreaterEqualDepth:O0,GreaterEqualStencilFunc:TJ,GreaterStencilFunc:bJ,GridHelper:mee,Group:_d,HalfFloatType:Tf,HemisphereLight:nB,HemisphereLightHelper:pee,IcosahedronGeometry:Vw,ImageBitmapLoader:LZ,ImageLoader:dg,ImageUtils:x4,IncrementStencilOp:fJ,IncrementWrapStencilOp:mJ,InstancedBufferAttribute:af,InstancedBufferGeometry:uB,InstancedInterleavedBuffer:ree,InstancedMesh:A4,Int16BufferAttribute:_Q,Int32BufferAttribute:wQ,Int8BufferAttribute:yQ,IntType:vw,InterleavedBuffer:Iw,InterleavedBufferAttribute:$u,Interpolant:$g,InterpolateDiscrete:Zm,InterpolateLinear:h_,InterpolateSmooth:Rx,InvertStencilOp:yJ,KeepStencilOp:au,KeyframeTrack:bo,LOD:E4,LatheGeometry:Gg,Layers:Mu,LessCompare:h4,LessDepth:L0,LessEqualCompare:sM,LessEqualDepth:Hu,LessEqualStencilFunc:wJ,LessStencilFunc:xJ,Light:xc,LightProbe:cB,Line:sc,Line3:cee,LineBasicMaterial:jr,LineCurve:yM,LineCurve3:k4,LineDashedMaterial:Y4,LineLoop:I4,LineSegments:Yo,LinearFilter:Mi,LinearInterpolant:EM,LinearMipMapLinearFilter:rJ,LinearMipMapNearestFilter:iJ,LinearMipmapLinearFilter:Do,LinearMipmapNearestFilter:im,LinearSRGBColorSpace:qu,LinearToneMapping:JV,LinearTransfer:tg,Loader:rs,LoaderUtils:w1,LoadingManager:AM,LoopOnce:r4,LoopPingPong:o4,LoopRepeat:s4,LuminanceAlphaFormat:tM,LuminanceFormat:eM,MOUSE:QY,Material:Sr,MaterialLoader:$w,MathUtils:YJ,Matrix2:LM,Matrix3:Bt,Matrix4:At,MaxEquation:kV,Mesh:_i,MeshBasicMaterial:yc,MeshDepthMaterial:bM,MeshDistanceMaterial:SM,MeshLambertMaterial:X4,MeshMatcapMaterial:K4,MeshNormalMaterial:$4,MeshPhongMaterial:W4,MeshPhysicalMaterial:G4,MeshStandardMaterial:wM,MeshToonMaterial:q4,MinEquation:LV,MirroredRepeatWrapping:Qm,MixOperation:KV,MultiplyBlending:f1,MultiplyOperation:jg,NearestFilter:Yi,NearestMipMapLinearFilter:nJ,NearestMipMapNearestFilter:tJ,NearestMipmapLinearFilter:vd,NearestMipmapNearestFilter:XA,NeutralToneMapping:n4,NeverCompare:u4,NeverDepth:N0,NeverStencilFunc:vJ,NoBlending:Ta,NoColorSpace:fa,NoToneMapping:zo,NormalAnimationBlendMode:Tw,NormalBlending:Tu,NotEqualCompare:p4,NotEqualDepth:j0,NotEqualStencilFunc:SJ,NumberKeyframeTrack:cg,Object3D:yn,ObjectLoader:NZ,ObjectSpaceNormalMap:c4,OctahedronGeometry:Wg,OneFactor:UV,OneMinusConstantAlphaFactor:XV,OneMinusConstantColorFactor:qV,OneMinusDstAlphaFactor:BV,OneMinusDstColorFactor:HV,OneMinusSrcAlphaFactor:R0,OneMinusSrcColorFactor:FV,OrthographicCamera:rh,PCFShadowMap:gw,PCFSoftShadowMap:nm,PMREMGenerator:T1,Path:sg,PerspectiveCamera:yi,Plane:vl,PlaneGeometry:Af,PlaneHelper:wee,PointLight:rB,PointLightHelper:dee,Points:P4,PointsMaterial:Rw,PolarGridHelper:gee,PolyhedronGeometry:vc,PositionalAudio:VZ,PropertyBinding:fn,PropertyMixer:pB,QuadraticBezierCurve:vM,QuadraticBezierCurve3:xM,Quaternion:is,QuaternionKeyframeTrack:Xg,QuaternionLinearInterpolant:tB,RED_GREEN_RGTC2_Format:c_,RED_RGTC1_Format:iM,REVISION:Ug,RGBADepthPacking:l4,RGBAFormat:gr,RGBAIntegerFormat:Sw,RGBA_ASTC_10x10_Format:i_,RGBA_ASTC_10x5_Format:e_,RGBA_ASTC_10x6_Format:t_,RGBA_ASTC_10x8_Format:n_,RGBA_ASTC_12x10_Format:r_,RGBA_ASTC_12x12_Format:s_,RGBA_ASTC_4x4_Format:q0,RGBA_ASTC_5x4_Format:$0,RGBA_ASTC_5x5_Format:X0,RGBA_ASTC_6x5_Format:K0,RGBA_ASTC_6x6_Format:Y0,RGBA_ASTC_8x5_Format:J0,RGBA_ASTC_8x6_Format:Q0,RGBA_ASTC_8x8_Format:Z0,RGBA_BPTC_Format:lm,RGBA_ETC2_EAC_Format:W0,RGBA_PVRTC_2BPPV1_Format:z0,RGBA_PVRTC_4BPPV1_Format:B0,RGBA_S3TC_DXT1_Format:sm,RGBA_S3TC_DXT3_Format:om,RGBA_S3TC_DXT5_Format:am,RGBDepthPacking:cJ,RGBFormat:ZA,RGBIntegerFormat:sJ,RGB_BPTC_SIGNED_Format:o_,RGB_BPTC_UNSIGNED_Format:a_,RGB_ETC1_Format:H0,RGB_ETC2_Format:G0,RGB_PVRTC_2BPPV1_Format:V0,RGB_PVRTC_4BPPV1_Format:F0,RGB_S3TC_DXT1_Format:rm,RGDepthPacking:uJ,RGFormat:nM,RGIntegerFormat:bw,RawShaderMaterial:H4,Ray:Ef,Raycaster:gB,RectAreaLight:aB,RedFormat:ww,RedIntegerFormat:Fg,ReinhardToneMapping:QV,RenderTarget:Ew,RenderTarget3D:eee,RenderTargetArray:tee,RepeatWrapping:Jm,ReplaceStencilOp:dJ,ReverseSubtractEquation:DV,RingGeometry:Bw,SIGNED_RED_GREEN_RGTC2_Format:u_,SIGNED_RED_RGTC1_Format:l_,SRGBColorSpace:qr,SRGBTransfer:An,Scene:hM,ShaderChunk:$t,ShaderLib:co,ShaderMaterial:_o,ShadowMaterial:z4,Shape:Iu,ShapeGeometry:zw,ShapePath:Tee,ShapeUtils:Go,ShortType:YA,Skeleton:Pw,SkeletonHelper:hee,SkinnedMesh:C4,Source:Rl,Sphere:_r,SphereGeometry:qg,Spherical:oee,SphericalHarmonics3:lB,SplineCurve:_M,SpotLight:iB,SpotLightHelper:uee,Sprite:T4,SpriteMaterial:dM,SrcAlphaFactor:P0,SrcAlphaSaturateFactor:GV,SrcColorFactor:jV,StaticCopyUsage:IJ,StaticDrawUsage:ng,StaticReadUsage:CJ,StereoCamera:OZ,StreamCopyUsage:RJ,StreamDrawUsage:EJ,StreamReadUsage:MJ,StringKeyframeTrack:ih,SubtractEquation:NV,SubtractiveBlending:d1,TOUCH:ZY,TangentSpaceNormalMap:gc,TetrahedronGeometry:Hw,Texture:ti,TextureLoader:MZ,TextureUtils:Pee,TimestampQuery:DJ,TorusGeometry:Gw,TorusKnotGeometry:Ww,Triangle:Yr,TriangleFanDrawMode:lJ,TriangleStripDrawMode:aJ,TrianglesDrawMode:oJ,TubeGeometry:qw,UVMapping:yw,Uint16BufferAttribute:aM,Uint32BufferAttribute:lM,Uint8BufferAttribute:vQ,Uint8ClampedBufferAttribute:xQ,Uniform:DM,UniformsGroup:iee,UniformsLib:Xe,UniformsUtils:b4,UnsignedByteType:xo,UnsignedInt248Type:Gu,UnsignedInt5999Type:JA,UnsignedIntType:ja,UnsignedShort4444Type:xw,UnsignedShort5551Type:_w,UnsignedShortType:rf,VSMShadowMap:oo,Vector2:Ie,Vector3:K,Vector4:mn,VectorKeyframeTrack:ug,VideoFrameTexture:VQ,VideoTexture:R4,WebGL3DRenderTarget:sQ,WebGLArrayRenderTarget:rQ,WebGLCoordinateSystem:ho,WebGLCubeRenderTarget:uM,WebGLRenderTarget:Xo,WebGLRenderer:TB,WebGLUtils:SB,WebGPUCoordinateSystem:ig,WebXRController:Nx,WireframeGeometry:B4,WrapAroundEnding:eg,ZeroCurvatureEnding:yu,ZeroFactor:OV,ZeroSlopeEnding:vu,ZeroStencilOp:hJ,createCanvasElement:v4},Symbol.toStringTag,{value:"Module"}));var EB={exports:{}},sh={};/**
 * @license React
 * react-reconciler-constants.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */sh.ConcurrentRoot=1;sh.ContinuousEventPriority=4;sh.DefaultEventPriority=16;sh.DiscreteEventPriority=1;sh.IdleEventPriority=536870912;sh.LegacyRoot=0;EB.exports=sh;var Td=EB.exports;function dse(n){let e;const t=new Set,i=(c,u)=>{const p=typeof c=="function"?c(e):c;if(p!==e){const m=e;e=u?p:Object.assign({},e,p),t.forEach(g=>g(e,m))}},r=()=>e,s=(c,u=r,p=Object.is)=>{console.warn("[DEPRECATED] Please use `subscribeWithSelector` middleware");let m=u(e);function g(){const x=u(e);if(!p(m,x)){const b=m;c(m=x,b)}}return t.add(g),()=>t.delete(g)},l={setState:i,getState:r,subscribe:(c,u,p)=>u||p?s(c,u,p):(t.add(c),()=>t.delete(c)),destroy:()=>t.clear()};return e=n(i,r,l),l}const fse=typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),PL=fse?V.useEffect:V.useLayoutEffect;function pse(n){const e=typeof n=="function"?dse(n):n,t=(i=e.getState,r=Object.is)=>{const[,s]=V.useReducer(w=>w+1,0),o=e.getState(),a=V.useRef(o),l=V.useRef(i),c=V.useRef(r),u=V.useRef(!1),p=V.useRef();p.current===void 0&&(p.current=i(o));let m,g=!1;(a.current!==o||l.current!==i||c.current!==r||u.current)&&(m=i(o),g=!r(p.current,m)),PL(()=>{g&&(p.current=m),a.current=o,l.current=i,c.current=r,u.current=!1});const x=V.useRef(o);PL(()=>{const w=()=>{try{const S=e.getState(),E=l.current(S);c.current(p.current,E)||(a.current=S,p.current=E,s())}catch{u.current=!0,s()}},v=e.subscribe(w);return e.getState()!==x.current&&w(),v},[]);const b=g?m:p.current;return V.useDebugValue(b),b};return Object.assign(t,e),t[Symbol.iterator]=function(){console.warn("[useStore, api] = create() is deprecated and will be removed in v4");const i=[t,e];return{next(){const r=i.length<=0;return{value:i.shift(),done:r}}}},t}var CB={exports:{}},AB={exports:{}},MB={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(n){function e(q,Q){var j=q.length;q.push(Q);e:for(;0<j;){var J=j-1>>>1,ce=q[J];if(0<r(ce,Q))q[J]=Q,q[j]=ce,j=J;else break e}}function t(q){return q.length===0?null:q[0]}function i(q){if(q.length===0)return null;var Q=q[0],j=q.pop();if(j!==Q){q[0]=j;e:for(var J=0,ce=q.length,me=ce>>>1;J<me;){var oe=2*(J+1)-1,ye=q[oe],Re=oe+1,Me=q[Re];if(0>r(ye,j))Re<ce&&0>r(Me,ye)?(q[J]=Me,q[Re]=j,J=Re):(q[J]=ye,q[oe]=j,J=oe);else if(Re<ce&&0>r(Me,j))q[J]=Me,q[Re]=j,J=Re;else break e}}return Q}function r(q,Q){var j=q.sortIndex-Q.sortIndex;return j!==0?j:q.id-Q.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;n.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();n.unstable_now=function(){return o.now()-a}}var l=[],c=[],u=1,p=null,m=3,g=!1,x=!1,b=!1,w=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,S=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function E(q){for(var Q=t(c);Q!==null;){if(Q.callback===null)i(c);else if(Q.startTime<=q)i(c),Q.sortIndex=Q.expirationTime,e(l,Q);else break;Q=t(c)}}function C(q){if(b=!1,E(q),!x)if(t(l)!==null)x=!0,he(U);else{var Q=t(c);Q!==null&&ue(C,Q.startTime-q)}}function U(q,Q){x=!1,b&&(b=!1,v(P),P=-1),g=!0;var j=m;try{for(E(Q),p=t(l);p!==null&&(!(p.expirationTime>Q)||q&&!D());){var J=p.callback;if(typeof J=="function"){p.callback=null,m=p.priorityLevel;var ce=J(p.expirationTime<=Q);Q=n.unstable_now(),typeof ce=="function"?p.callback=ce:p===t(l)&&i(l),E(Q)}else i(l);p=t(l)}if(p!==null)var me=!0;else{var oe=t(c);oe!==null&&ue(C,oe.startTime-Q),me=!1}return me}finally{p=null,m=j,g=!1}}var O=!1,N=null,P=-1,A=5,M=-1;function D(){return!(n.unstable_now()-M<A)}function z(){if(N!==null){var q=n.unstable_now();M=q;var Q=!0;try{Q=N(!0,q)}finally{Q?F():(O=!1,N=null)}}else O=!1}var F;if(typeof S=="function")F=function(){S(z)};else if(typeof MessageChannel<"u"){var re=new MessageChannel,le=re.port2;re.port1.onmessage=z,F=function(){le.postMessage(null)}}else F=function(){w(z,0)};function he(q){N=q,O||(O=!0,F())}function ue(q,Q){P=w(function(){q(n.unstable_now())},Q)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(q){q.callback=null},n.unstable_continueExecution=function(){x||g||(x=!0,he(U))},n.unstable_forceFrameRate=function(q){0>q||125<q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<q?Math.floor(1e3/q):5},n.unstable_getCurrentPriorityLevel=function(){return m},n.unstable_getFirstCallbackNode=function(){return t(l)},n.unstable_next=function(q){switch(m){case 1:case 2:case 3:var Q=3;break;default:Q=m}var j=m;m=Q;try{return q()}finally{m=j}},n.unstable_pauseExecution=function(){},n.unstable_requestPaint=function(){},n.unstable_runWithPriority=function(q,Q){switch(q){case 1:case 2:case 3:case 4:case 5:break;default:q=3}var j=m;m=q;try{return Q()}finally{m=j}},n.unstable_scheduleCallback=function(q,Q,j){var J=n.unstable_now();switch(typeof j=="object"&&j!==null?(j=j.delay,j=typeof j=="number"&&0<j?J+j:J):j=J,q){case 1:var ce=-1;break;case 2:ce=250;break;case 5:ce=1073741823;break;case 4:ce=1e4;break;default:ce=5e3}return ce=j+ce,q={id:u++,callback:Q,priorityLevel:q,startTime:j,expirationTime:ce,sortIndex:-1},j>J?(q.sortIndex=j,e(c,q),t(l)===null&&q===t(c)&&(b?(v(P),P=-1):b=!0,ue(C,j-J))):(q.sortIndex=ce,e(l,q),x||g||(x=!0,he(U))),q},n.unstable_shouldYield=D,n.unstable_wrapCallback=function(q){var Q=m;return function(){var j=m;m=Q;try{return q.apply(this,arguments)}finally{m=j}}}})(MB);AB.exports=MB;var C1=AB.exports;/**
 * @license React
 * react-reconciler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var mse=function(e){var t={},i=V,r=C1,s=Object.assign;function o(d){for(var f="https://reactjs.org/docs/error-decoder.html?invariant="+d,_=1;_<arguments.length;_++)f+="&args[]="+encodeURIComponent(arguments[_]);return"Minified React error #"+d+"; visit "+f+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var a=i.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,l=Symbol.for("react.element"),c=Symbol.for("react.portal"),u=Symbol.for("react.fragment"),p=Symbol.for("react.strict_mode"),m=Symbol.for("react.profiler"),g=Symbol.for("react.provider"),x=Symbol.for("react.context"),b=Symbol.for("react.forward_ref"),w=Symbol.for("react.suspense"),v=Symbol.for("react.suspense_list"),S=Symbol.for("react.memo"),E=Symbol.for("react.lazy"),C=Symbol.for("react.offscreen"),U=Symbol.iterator;function O(d){return d===null||typeof d!="object"?null:(d=U&&d[U]||d["@@iterator"],typeof d=="function"?d:null)}function N(d){if(d==null)return null;if(typeof d=="function")return d.displayName||d.name||null;if(typeof d=="string")return d;switch(d){case u:return"Fragment";case c:return"Portal";case m:return"Profiler";case p:return"StrictMode";case w:return"Suspense";case v:return"SuspenseList"}if(typeof d=="object")switch(d.$$typeof){case x:return(d.displayName||"Context")+".Consumer";case g:return(d._context.displayName||"Context")+".Provider";case b:var f=d.render;return d=d.displayName,d||(d=f.displayName||f.name||"",d=d!==""?"ForwardRef("+d+")":"ForwardRef"),d;case S:return f=d.displayName||null,f!==null?f:N(d.type)||"Memo";case E:f=d._payload,d=d._init;try{return N(d(f))}catch{}}return null}function P(d){var f=d.type;switch(d.tag){case 24:return"Cache";case 9:return(f.displayName||"Context")+".Consumer";case 10:return(f._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return d=f.render,d=d.displayName||d.name||"",f.displayName||(d!==""?"ForwardRef("+d+")":"ForwardRef");case 7:return"Fragment";case 5:return f;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return N(f);case 8:return f===p?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof f=="function")return f.displayName||f.name||null;if(typeof f=="string")return f}return null}function A(d){var f=d,_=d;if(d.alternate)for(;f.return;)f=f.return;else{d=f;do f=d,f.flags&4098&&(_=f.return),d=f.return;while(d)}return f.tag===3?_:null}function M(d){if(A(d)!==d)throw Error(o(188))}function D(d){var f=d.alternate;if(!f){if(f=A(d),f===null)throw Error(o(188));return f!==d?null:d}for(var _=d,T=f;;){var I=_.return;if(I===null)break;var k=I.alternate;if(k===null){if(T=I.return,T!==null){_=T;continue}break}if(I.child===k.child){for(k=I.child;k;){if(k===_)return M(I),d;if(k===T)return M(I),f;k=k.sibling}throw Error(o(188))}if(_.return!==T.return)_=I,T=k;else{for(var Y=!1,ee=I.child;ee;){if(ee===_){Y=!0,_=I,T=k;break}if(ee===T){Y=!0,T=I,_=k;break}ee=ee.sibling}if(!Y){for(ee=k.child;ee;){if(ee===_){Y=!0,_=k,T=I;break}if(ee===T){Y=!0,T=k,_=I;break}ee=ee.sibling}if(!Y)throw Error(o(189))}}if(_.alternate!==T)throw Error(o(190))}if(_.tag!==3)throw Error(o(188));return _.stateNode.current===_?d:f}function z(d){return d=D(d),d!==null?F(d):null}function F(d){if(d.tag===5||d.tag===6)return d;for(d=d.child;d!==null;){var f=F(d);if(f!==null)return f;d=d.sibling}return null}function re(d){if(d.tag===5||d.tag===6)return d;for(d=d.child;d!==null;){if(d.tag!==4){var f=re(d);if(f!==null)return f}d=d.sibling}return null}var le=Array.isArray,he=e.getPublicInstance,ue=e.getRootHostContext,q=e.getChildHostContext,Q=e.prepareForCommit,j=e.resetAfterCommit,J=e.createInstance,ce=e.appendInitialChild,me=e.finalizeInitialChildren,oe=e.prepareUpdate,ye=e.shouldSetTextContent,Re=e.createTextInstance,Me=e.scheduleTimeout,ht=e.cancelTimeout,zt=e.noTimeout,Ge=e.isPrimaryRenderer,Je=e.supportsMutation,Ce=e.supportsPersistence,Se=e.supportsHydration,X=e.getInstanceFromNode,ot=e.preparePortalMount,Ne=e.getCurrentEventPriority,qe=e.detachDeletedInstance,Ue=e.supportsMicrotasks,gt=e.scheduleMicrotask,Ve=e.supportsTestSelectors,$=e.findFiberRoot,B=e.getBoundingRect,ae=e.getTextContent,be=e.isHiddenSubtree,Pe=e.matchAccessibilityRole,ve=e.setFocusIfFocusable,Fe=e.setupIntersectionObserver,We=e.appendChild,tt=e.appendChildToContainer,Gt=e.commitTextUpdate,Le=e.commitMount,nt=e.commitUpdate,wt=e.insertBefore,Tt=e.insertInContainerBefore,rt=e.removeChild,Qt=e.removeChildFromContainer,Nt=e.resetTextContent,xn=e.hideInstance,Z=e.hideTextInstance,$e=e.unhideInstance,_e=e.unhideTextInstance,Te=e.clearContainer,Ke=e.cloneInstance,ze=e.createContainerChildSet,Rt=e.appendChildToContainerChildSet,Cn=e.finalizeContainerChildren,Yn=e.replaceContainerChildren,Zt=e.cloneHiddenInstance,Vi=e.cloneHiddenTextInstance,Pn=e.canHydrateInstance,wc=e.canHydrateTextInstance,So=e.canHydrateSuspenseInstance,Zi=e.isSuspenseInstancePending,Jo=e.isSuspenseInstanceFallback,lh=e.registerSuspenseInstanceRetry,Tr=e.getNextHydratableSibling,qa=e.getFirstHydratableChild,ch=e.getFirstHydratableChildWithinContainer,Ys=e.getFirstHydratableChildWithinSuspenseInstance,bc=e.hydrateInstance,$a=e.hydrateTextInstance,Xa=e.hydrateSuspenseInstance,As=e.getNextHydratableInstanceAfterSuspenseInstance,Sc=e.commitHydratedContainer,uh=e.commitHydratedSuspenseInstance,Tc=e.clearSuspenseBoundary,Ec=e.clearSuspenseBoundaryFromContainer,H=e.shouldDeleteUnhydratedTailInstances,te=e.didNotMatchHydratedContainerTextInstance,pe=e.didNotMatchHydratedTextInstance,fe;function ne(d){if(fe===void 0)try{throw Error()}catch(_){var f=_.stack.trim().match(/\n( *(at )?)/);fe=f&&f[1]||""}return`
`+fe+d}var De=!1;function Be(d,f){if(!d||De)return"";De=!0;var _=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(f)if(f=function(){throw Error()},Object.defineProperty(f.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(f,[])}catch(je){var T=je}Reflect.construct(d,[],f)}else{try{f.call()}catch(je){T=je}d.call(f.prototype)}else{try{throw Error()}catch(je){T=je}d()}}catch(je){if(je&&T&&typeof je.stack=="string"){for(var I=je.stack.split(`
`),k=T.stack.split(`
`),Y=I.length-1,ee=k.length-1;1<=Y&&0<=ee&&I[Y]!==k[ee];)ee--;for(;1<=Y&&0<=ee;Y--,ee--)if(I[Y]!==k[ee]){if(Y!==1||ee!==1)do if(Y--,ee--,0>ee||I[Y]!==k[ee]){var we=`
`+I[Y].replace(" at new "," at ");return d.displayName&&we.includes("<anonymous>")&&(we=we.replace("<anonymous>",d.displayName)),we}while(1<=Y&&0<=ee);break}}}finally{De=!1,Error.prepareStackTrace=_}return(d=d?d.displayName||d.name:"")?ne(d):""}var Ye=Object.prototype.hasOwnProperty,it=[],xt=-1;function vt(d){return{current:d}}function He(d){0>xt||(d.current=it[xt],it[xt]=null,xt--)}function dt(d,f){xt++,it[xt]=d.current,d.current=f}var Ot={},Wt=vt(Ot),Kt=vt(!1),Ut=Ot;function pt(d,f){var _=d.type.contextTypes;if(!_)return Ot;var T=d.stateNode;if(T&&T.__reactInternalMemoizedUnmaskedChildContext===f)return T.__reactInternalMemoizedMaskedChildContext;var I={},k;for(k in _)I[k]=f[k];return T&&(d=d.stateNode,d.__reactInternalMemoizedUnmaskedChildContext=f,d.__reactInternalMemoizedMaskedChildContext=I),I}function un(d){return d=d.childContextTypes,d!=null}function en(){He(Kt),He(Wt)}function Bi(d,f,_){if(Wt.current!==Ot)throw Error(o(168));dt(Wt,f),dt(Kt,_)}function Js(d,f,_){var T=d.stateNode;if(f=f.childContextTypes,typeof T.getChildContext!="function")return _;T=T.getChildContext();for(var I in T)if(!(I in f))throw Error(o(108,P(d)||"Unknown",I));return s({},_,T)}function Dn(d){return d=(d=d.stateNode)&&d.__reactInternalMemoizedMergedChildContext||Ot,Ut=Wt.current,dt(Wt,d),dt(Kt,Kt.current),!0}function Ni(d,f,_){var T=d.stateNode;if(!T)throw Error(o(169));_?(d=Js(d,f,Ut),T.__reactInternalMemoizedMergedChildContext=d,He(Kt),He(Wt),dt(Wt,d)):He(Kt),dt(Kt,_)}var qt=Math.clz32?Math.clz32:jt,Si=Math.log,zi=Math.LN2;function jt(d){return d>>>=0,d===0?32:31-(Si(d)/zi|0)|0}var Vn=64,Fr=4194304;function Ti(d){switch(d&-d){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return d&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return d&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return d}}function hh(d,f){var _=d.pendingLanes;if(_===0)return 0;var T=0,I=d.suspendedLanes,k=d.pingedLanes,Y=_&268435455;if(Y!==0){var ee=Y&~I;ee!==0?T=Ti(ee):(k&=Y,k!==0&&(T=Ti(k)))}else Y=_&~I,Y!==0?T=Ti(Y):k!==0&&(T=Ti(k));if(T===0)return 0;if(f!==0&&f!==T&&!(f&I)&&(I=T&-T,k=f&-f,I>=k||I===16&&(k&4194240)!==0))return f;if(T&4&&(T|=_&16),f=d.entangledLanes,f!==0)for(d=d.entanglements,f&=T;0<f;)_=31-qt(f),I=1<<_,T|=d[_],f&=~I;return T}function ny(d,f){switch(d){case 1:case 2:case 4:return f+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return f+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ib(d,f){for(var _=d.suspendedLanes,T=d.pingedLanes,I=d.expirationTimes,k=d.pendingLanes;0<k;){var Y=31-qt(k),ee=1<<Y,we=I[Y];we===-1?(!(ee&_)||ee&T)&&(I[Y]=ny(ee,f)):we<=f&&(d.expiredLanes|=ee),k&=~ee}}function Rf(d){return d=d.pendingLanes&-1073741825,d!==0?d:d&1073741824?1073741824:0}function Nf(d){for(var f=[],_=0;31>_;_++)f.push(d);return f}function Cc(d,f,_){d.pendingLanes|=f,f!==536870912&&(d.suspendedLanes=0,d.pingedLanes=0),d=d.eventTimes,f=31-qt(f),d[f]=_}function Ac(d,f){var _=d.pendingLanes&~f;d.pendingLanes=f,d.suspendedLanes=0,d.pingedLanes=0,d.expiredLanes&=f,d.mutableReadLanes&=f,d.entangledLanes&=f,f=d.entanglements;var T=d.eventTimes;for(d=d.expirationTimes;0<_;){var I=31-qt(_),k=1<<I;f[I]=0,T[I]=-1,d[I]=-1,_&=~k}}function Ms(d,f){var _=d.entangledLanes|=f;for(d=d.entanglements;_;){var T=31-qt(_),I=1<<T;I&f|d[T]&f&&(d[T]|=f),_&=~I}}var an=0;function Df(d){return d&=-d,1<d?4<d?d&268435455?16:536870912:4:1}var dh=r.unstable_scheduleCallback,Qo=r.unstable_cancelCallback,rb=r.unstable_shouldYield,sb=r.unstable_requestPaint,ci=r.unstable_now,Is=r.unstable_ImmediatePriority,ob=r.unstable_UserBlockingPriority,Lf=r.unstable_NormalPriority,fh=r.unstable_IdlePriority,Zo=null,ss=null;function Mc(d){if(ss&&typeof ss.onCommitFiberRoot=="function")try{ss.onCommitFiberRoot(Zo,d,void 0,(d.current.flags&128)===128)}catch{}}function Ic(d,f){return d===f&&(d!==0||1/d===1/f)||d!==d&&f!==f}var os=typeof Object.is=="function"?Object.is:Ic,as=null,Rn=!1,kf=!1;function iy(d){as===null?as=[d]:as.push(d)}function ry(d){Rn=!0,iy(d)}function ls(){if(!kf&&as!==null){kf=!0;var d=0,f=an;try{var _=as;for(an=1;d<_.length;d++){var T=_[d];do T=T(!0);while(T!==null)}as=null,Rn=!1}catch(I){throw as!==null&&(as=as.slice(d+1)),dh(Is,ls),I}finally{an=f,kf=!1}}return null}var sy=a.ReactCurrentBatchConfig;function ea(d,f){if(os(d,f))return!0;if(typeof d!="object"||d===null||typeof f!="object"||f===null)return!1;var _=Object.keys(d),T=Object.keys(f);if(_.length!==T.length)return!1;for(T=0;T<_.length;T++){var I=_[T];if(!Ye.call(f,I)||!os(d[I],f[I]))return!1}return!0}function oy(d){switch(d.tag){case 5:return ne(d.type);case 16:return ne("Lazy");case 13:return ne("Suspense");case 19:return ne("SuspenseList");case 0:case 2:case 15:return d=Be(d.type,!1),d;case 11:return d=Be(d.type.render,!1),d;case 1:return d=Be(d.type,!0),d;default:return""}}function ni(d,f){if(d&&d.defaultProps){f=s({},f),d=d.defaultProps;for(var _ in d)f[_]===void 0&&(f[_]=d[_]);return f}return f}var Pc=vt(null),ph=null,Ps=null,mh=null;function Rc(){mh=Ps=ph=null}function Nc(d,f,_){Ge?(dt(Pc,f._currentValue),f._currentValue=_):(dt(Pc,f._currentValue2),f._currentValue2=_)}function gh(d){var f=Pc.current;He(Pc),Ge?d._currentValue=f:d._currentValue2=f}function Ka(d,f,_){for(;d!==null;){var T=d.alternate;if((d.childLanes&f)!==f?(d.childLanes|=f,T!==null&&(T.childLanes|=f)):T!==null&&(T.childLanes&f)!==f&&(T.childLanes|=f),d===_)break;d=d.return}}function Ya(d,f){ph=d,mh=Ps=null,d=d.dependencies,d!==null&&d.firstContext!==null&&(d.lanes&f&&(hs=!0),d.firstContext=null)}function Er(d){var f=Ge?d._currentValue:d._currentValue2;if(mh!==d)if(d={context:d,memoizedValue:f,next:null},Ps===null){if(ph===null)throw Error(o(308));Ps=d,ph.dependencies={lanes:0,firstContext:d}}else Ps=Ps.next=d;return f}var er=null,Qs=!1;function yh(d){d.updateQueue={baseState:d.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function vh(d,f){d=d.updateQueue,f.updateQueue===d&&(f.updateQueue={baseState:d.baseState,firstBaseUpdate:d.firstBaseUpdate,lastBaseUpdate:d.lastBaseUpdate,shared:d.shared,effects:d.effects})}function cs(d,f){return{eventTime:d,lane:f,tag:0,payload:null,callback:null,next:null}}function Zs(d,f){var _=d.updateQueue;_!==null&&(_=_.shared,fi!==null&&d.mode&1&&!(Jt&2)?(d=_.interleaved,d===null?(f.next=f,er===null?er=[_]:er.push(_)):(f.next=d.next,d.next=f),_.interleaved=f):(d=_.pending,d===null?f.next=f:(f.next=d.next,d.next=f),_.pending=f))}function ta(d,f,_){if(f=f.updateQueue,f!==null&&(f=f.shared,(_&4194240)!==0)){var T=f.lanes;T&=d.pendingLanes,_|=T,f.lanes=_,Ms(d,_)}}function Of(d,f){var _=d.updateQueue,T=d.alternate;if(T!==null&&(T=T.updateQueue,_===T)){var I=null,k=null;if(_=_.firstBaseUpdate,_!==null){do{var Y={eventTime:_.eventTime,lane:_.lane,tag:_.tag,payload:_.payload,callback:_.callback,next:null};k===null?I=k=Y:k=k.next=Y,_=_.next}while(_!==null);k===null?I=k=f:k=k.next=f}else I=k=f;_={baseState:T.baseState,firstBaseUpdate:I,lastBaseUpdate:k,shared:T.shared,effects:T.effects},d.updateQueue=_;return}d=_.lastBaseUpdate,d===null?_.firstBaseUpdate=f:d.next=f,_.lastBaseUpdate=f}function Dc(d,f,_,T){var I=d.updateQueue;Qs=!1;var k=I.firstBaseUpdate,Y=I.lastBaseUpdate,ee=I.shared.pending;if(ee!==null){I.shared.pending=null;var we=ee,je=we.next;we.next=null,Y===null?k=je:Y.next=je,Y=we;var ut=d.alternate;ut!==null&&(ut=ut.updateQueue,ee=ut.lastBaseUpdate,ee!==Y&&(ee===null?ut.firstBaseUpdate=je:ee.next=je,ut.lastBaseUpdate=we))}if(k!==null){var Ft=I.baseState;Y=0,ut=je=we=null,ee=k;do{var bt=ee.lane,Nn=ee.eventTime;if((T&bt)===bt){ut!==null&&(ut=ut.next={eventTime:Nn,lane:0,tag:ee.tag,payload:ee.payload,callback:ee.callback,next:null});e:{var yt=d,sr=ee;switch(bt=f,Nn=_,sr.tag){case 1:if(yt=sr.payload,typeof yt=="function"){Ft=yt.call(Nn,Ft,bt);break e}Ft=yt;break e;case 3:yt.flags=yt.flags&-65537|128;case 0:if(yt=sr.payload,bt=typeof yt=="function"?yt.call(Nn,Ft,bt):yt,bt==null)break e;Ft=s({},Ft,bt);break e;case 2:Qs=!0}}ee.callback!==null&&ee.lane!==0&&(d.flags|=64,bt=I.effects,bt===null?I.effects=[ee]:bt.push(ee))}else Nn={eventTime:Nn,lane:bt,tag:ee.tag,payload:ee.payload,callback:ee.callback,next:null},ut===null?(je=ut=Nn,we=Ft):ut=ut.next=Nn,Y|=bt;if(ee=ee.next,ee===null){if(ee=I.shared.pending,ee===null)break;bt=ee,ee=bt.next,bt.next=null,I.lastBaseUpdate=bt,I.shared.pending=null}}while(!0);if(ut===null&&(we=Ft),I.baseState=we,I.firstBaseUpdate=je,I.lastBaseUpdate=ut,f=I.shared.interleaved,f!==null){I=f;do Y|=I.lane,I=I.next;while(I!==f)}else k===null&&(I.shared.lanes=0);Ah|=Y,d.lanes=Y,d.memoizedState=Ft}}function To(d,f,_){if(d=f.effects,f.effects=null,d!==null)for(f=0;f<d.length;f++){var T=d[f],I=T.callback;if(I!==null){if(T.callback=null,T=_,typeof I!="function")throw Error(o(191,I));I.call(T)}}}var Uf=new i.Component().refs;function xh(d,f,_,T){f=d.memoizedState,_=_(T,f),_=_==null?f:s({},f,_),d.memoizedState=_,d.lanes===0&&(d.updateQueue.baseState=_)}var Lc={isMounted:function(d){return(d=d._reactInternals)?A(d)===d:!1},enqueueSetState:function(d,f,_){d=d._reactInternals;var T=Mr(),I=Za(d),k=cs(T,I);k.payload=f,_!=null&&(k.callback=_),Zs(d,k),f=Ds(d,I,T),f!==null&&ta(f,d,I)},enqueueReplaceState:function(d,f,_){d=d._reactInternals;var T=Mr(),I=Za(d),k=cs(T,I);k.tag=1,k.payload=f,_!=null&&(k.callback=_),Zs(d,k),f=Ds(d,I,T),f!==null&&ta(f,d,I)},enqueueForceUpdate:function(d,f){d=d._reactInternals;var _=Mr(),T=Za(d),I=cs(_,T);I.tag=2,f!=null&&(I.callback=f),Zs(d,I),f=Ds(d,T,_),f!==null&&ta(f,d,T)}};function jf(d,f,_,T,I,k,Y){return d=d.stateNode,typeof d.shouldComponentUpdate=="function"?d.shouldComponentUpdate(T,k,Y):f.prototype&&f.prototype.isPureReactComponent?!ea(_,T)||!ea(I,k):!0}function kc(d,f,_){var T=!1,I=Ot,k=f.contextType;return typeof k=="object"&&k!==null?k=Er(k):(I=un(f)?Ut:Wt.current,T=f.contextTypes,k=(T=T!=null)?pt(d,I):Ot),f=new f(_,k),d.memoizedState=f.state!==null&&f.state!==void 0?f.state:null,f.updater=Lc,d.stateNode=f,f._reactInternals=d,T&&(d=d.stateNode,d.__reactInternalMemoizedUnmaskedChildContext=I,d.__reactInternalMemoizedMaskedChildContext=k),f}function tr(d,f,_,T){d=f.state,typeof f.componentWillReceiveProps=="function"&&f.componentWillReceiveProps(_,T),typeof f.UNSAFE_componentWillReceiveProps=="function"&&f.UNSAFE_componentWillReceiveProps(_,T),f.state!==d&&Lc.enqueueReplaceState(f,f.state,null)}function _h(d,f,_,T){var I=d.stateNode;I.props=_,I.state=d.memoizedState,I.refs=Uf,yh(d);var k=f.contextType;typeof k=="object"&&k!==null?I.context=Er(k):(k=un(f)?Ut:Wt.current,I.context=pt(d,k)),I.state=d.memoizedState,k=f.getDerivedStateFromProps,typeof k=="function"&&(xh(d,f,k,_),I.state=d.memoizedState),typeof f.getDerivedStateFromProps=="function"||typeof I.getSnapshotBeforeUpdate=="function"||typeof I.UNSAFE_componentWillMount!="function"&&typeof I.componentWillMount!="function"||(f=I.state,typeof I.componentWillMount=="function"&&I.componentWillMount(),typeof I.UNSAFE_componentWillMount=="function"&&I.UNSAFE_componentWillMount(),f!==I.state&&Lc.enqueueReplaceState(I,I.state,null),Dc(d,_,I,T),I.state=d.memoizedState),typeof I.componentDidMount=="function"&&(d.flags|=4194308)}var na=[],us=0,y=null,R=0,L=[],G=0,se=null,ge=1,Oe="";function ln(d,f){na[us++]=R,na[us++]=y,y=d,R=f}function ui(d,f,_){L[G++]=ge,L[G++]=Oe,L[G++]=se,se=d;var T=ge;d=Oe;var I=32-qt(T)-1;T&=~(1<<I),_+=1;var k=32-qt(f)+I;if(30<k){var Y=I-I%5;k=(T&(1<<Y)-1).toString(32),T>>=Y,I-=Y,ge=1<<32-qt(f)+I|_<<I|T,Oe=k+d}else ge=1<<k|_<<I|T,Oe=d}function nn(d){d.return!==null&&(ln(d,1),ui(d,1,0))}function hi(d){for(;d===y;)y=na[--us],na[us]=null,R=na[--us],na[us]=null;for(;d===se;)se=L[--G],L[G]=null,Oe=L[--G],L[G]=null,ge=L[--G],L[G]=null}var Sn=null,di=null,rn=!1,Eo=!1,Cr=null;function CI(d,f){var _=Ls(5,null,null,0);_.elementType="DELETED",_.stateNode=f,_.return=d,f=d.deletions,f===null?(d.deletions=[_],d.flags|=16):f.push(_)}function AI(d,f){switch(d.tag){case 5:return f=Pn(f,d.type,d.pendingProps),f!==null?(d.stateNode=f,Sn=d,di=qa(f),!0):!1;case 6:return f=wc(f,d.pendingProps),f!==null?(d.stateNode=f,Sn=d,di=null,!0):!1;case 13:if(f=So(f),f!==null){var _=se!==null?{id:ge,overflow:Oe}:null;return d.memoizedState={dehydrated:f,treeContext:_,retryLane:1073741824},_=Ls(18,null,null,0),_.stateNode=f,_.return=d,d.child=_,Sn=d,di=null,!0}return!1;default:return!1}}function ab(d){return(d.mode&1)!==0&&(d.flags&128)===0}function lb(d){if(rn){var f=di;if(f){var _=f;if(!AI(d,f)){if(ab(d))throw Error(o(418));f=Tr(_);var T=Sn;f&&AI(d,f)?CI(T,_):(d.flags=d.flags&-4097|2,rn=!1,Sn=d)}}else{if(ab(d))throw Error(o(418));d.flags=d.flags&-4097|2,rn=!1,Sn=d}}}function MI(d){for(d=d.return;d!==null&&d.tag!==5&&d.tag!==3&&d.tag!==13;)d=d.return;Sn=d}function Ff(d){if(!Se||d!==Sn)return!1;if(!rn)return MI(d),rn=!0,!1;if(d.tag!==3&&(d.tag!==5||H(d.type)&&!ye(d.type,d.memoizedProps))){var f=di;if(f){if(ab(d)){for(d=di;d;)d=Tr(d);throw Error(o(418))}for(;f;)CI(d,f),f=Tr(f)}}if(MI(d),d.tag===13){if(!Se)throw Error(o(316));if(d=d.memoizedState,d=d!==null?d.dehydrated:null,!d)throw Error(o(317));di=As(d)}else di=Sn?Tr(d.stateNode):null;return!0}function wh(){Se&&(di=Sn=null,Eo=rn=!1)}function cb(d){Cr===null?Cr=[d]:Cr.push(d)}function Vf(d,f,_){if(d=_.ref,d!==null&&typeof d!="function"&&typeof d!="object"){if(_._owner){if(_=_._owner,_){if(_.tag!==1)throw Error(o(309));var T=_.stateNode}if(!T)throw Error(o(147,d));var I=T,k=""+d;return f!==null&&f.ref!==null&&typeof f.ref=="function"&&f.ref._stringRef===k?f.ref:(f=function(Y){var ee=I.refs;ee===Uf&&(ee=I.refs={}),Y===null?delete ee[k]:ee[k]=Y},f._stringRef=k,f)}if(typeof d!="string")throw Error(o(284));if(!_._owner)throw Error(o(290,d))}return d}function ay(d,f){throw d=Object.prototype.toString.call(f),Error(o(31,d==="[object Object]"?"object with keys {"+Object.keys(f).join(", ")+"}":d))}function II(d){var f=d._init;return f(d._payload)}function PI(d){function f(de,ie){if(d){var xe=de.deletions;xe===null?(de.deletions=[ie],de.flags|=16):xe.push(ie)}}function _(de,ie){if(!d)return null;for(;ie!==null;)f(de,ie),ie=ie.sibling;return null}function T(de,ie){for(de=new Map;ie!==null;)ie.key!==null?de.set(ie.key,ie):de.set(ie.index,ie),ie=ie.sibling;return de}function I(de,ie){return de=tl(de,ie),de.index=0,de.sibling=null,de}function k(de,ie,xe){return de.index=xe,d?(xe=de.alternate,xe!==null?(xe=xe.index,xe<ie?(de.flags|=2,ie):xe):(de.flags|=2,ie)):(de.flags|=1048576,ie)}function Y(de){return d&&de.alternate===null&&(de.flags|=2),de}function ee(de,ie,xe,et){return ie===null||ie.tag!==6?(ie=qb(xe,de.mode,et),ie.return=de,ie):(ie=I(ie,xe),ie.return=de,ie)}function we(de,ie,xe,et){var mt=xe.type;return mt===u?ut(de,ie,xe.props.children,et,xe.key):ie!==null&&(ie.elementType===mt||typeof mt=="object"&&mt!==null&&mt.$$typeof===E&&II(mt)===ie.type)?(et=I(ie,xe.props),et.ref=Vf(de,ie,xe),et.return=de,et):(et=jy(xe.type,xe.key,xe.props,null,de.mode,et),et.ref=Vf(de,ie,xe),et.return=de,et)}function je(de,ie,xe,et){return ie===null||ie.tag!==4||ie.stateNode.containerInfo!==xe.containerInfo||ie.stateNode.implementation!==xe.implementation?(ie=$b(xe,de.mode,et),ie.return=de,ie):(ie=I(ie,xe.children||[]),ie.return=de,ie)}function ut(de,ie,xe,et,mt){return ie===null||ie.tag!==7?(ie=zc(xe,de.mode,et,mt),ie.return=de,ie):(ie=I(ie,xe),ie.return=de,ie)}function Ft(de,ie,xe){if(typeof ie=="string"&&ie!==""||typeof ie=="number")return ie=qb(""+ie,de.mode,xe),ie.return=de,ie;if(typeof ie=="object"&&ie!==null){switch(ie.$$typeof){case l:return xe=jy(ie.type,ie.key,ie.props,null,de.mode,xe),xe.ref=Vf(de,null,ie),xe.return=de,xe;case c:return ie=$b(ie,de.mode,xe),ie.return=de,ie;case E:var et=ie._init;return Ft(de,et(ie._payload),xe)}if(le(ie)||O(ie))return ie=zc(ie,de.mode,xe,null),ie.return=de,ie;ay(de,ie)}return null}function bt(de,ie,xe,et){var mt=ie!==null?ie.key:null;if(typeof xe=="string"&&xe!==""||typeof xe=="number")return mt!==null?null:ee(de,ie,""+xe,et);if(typeof xe=="object"&&xe!==null){switch(xe.$$typeof){case l:return xe.key===mt?we(de,ie,xe,et):null;case c:return xe.key===mt?je(de,ie,xe,et):null;case E:return mt=xe._init,bt(de,ie,mt(xe._payload),et)}if(le(xe)||O(xe))return mt!==null?null:ut(de,ie,xe,et,null);ay(de,xe)}return null}function Nn(de,ie,xe,et,mt){if(typeof et=="string"&&et!==""||typeof et=="number")return de=de.get(xe)||null,ee(ie,de,""+et,mt);if(typeof et=="object"&&et!==null){switch(et.$$typeof){case l:return de=de.get(et.key===null?xe:et.key)||null,we(ie,de,et,mt);case c:return de=de.get(et.key===null?xe:et.key)||null,je(ie,de,et,mt);case E:var Yt=et._init;return Nn(de,ie,xe,Yt(et._payload),mt)}if(le(et)||O(et))return de=de.get(xe)||null,ut(ie,de,et,mt,null);ay(ie,et)}return null}function yt(de,ie,xe,et){for(var mt=null,Yt=null,Vt=ie,_n=ie=0,Li=null;Vt!==null&&_n<xe.length;_n++){Vt.index>_n?(Li=Vt,Vt=null):Li=Vt.sibling;var wn=bt(de,Vt,xe[_n],et);if(wn===null){Vt===null&&(Vt=Li);break}d&&Vt&&wn.alternate===null&&f(de,Vt),ie=k(wn,ie,_n),Yt===null?mt=wn:Yt.sibling=wn,Yt=wn,Vt=Li}if(_n===xe.length)return _(de,Vt),rn&&ln(de,_n),mt;if(Vt===null){for(;_n<xe.length;_n++)Vt=Ft(de,xe[_n],et),Vt!==null&&(ie=k(Vt,ie,_n),Yt===null?mt=Vt:Yt.sibling=Vt,Yt=Vt);return rn&&ln(de,_n),mt}for(Vt=T(de,Vt);_n<xe.length;_n++)Li=Nn(Vt,de,_n,xe[_n],et),Li!==null&&(d&&Li.alternate!==null&&Vt.delete(Li.key===null?_n:Li.key),ie=k(Li,ie,_n),Yt===null?mt=Li:Yt.sibling=Li,Yt=Li);return d&&Vt.forEach(function(nl){return f(de,nl)}),rn&&ln(de,_n),mt}function sr(de,ie,xe,et){var mt=O(xe);if(typeof mt!="function")throw Error(o(150));if(xe=mt.call(xe),xe==null)throw Error(o(151));for(var Yt=mt=null,Vt=ie,_n=ie=0,Li=null,wn=xe.next();Vt!==null&&!wn.done;_n++,wn=xe.next()){Vt.index>_n?(Li=Vt,Vt=null):Li=Vt.sibling;var nl=bt(de,Vt,wn.value,et);if(nl===null){Vt===null&&(Vt=Li);break}d&&Vt&&nl.alternate===null&&f(de,Vt),ie=k(nl,ie,_n),Yt===null?mt=nl:Yt.sibling=nl,Yt=nl,Vt=Li}if(wn.done)return _(de,Vt),rn&&ln(de,_n),mt;if(Vt===null){for(;!wn.done;_n++,wn=xe.next())wn=Ft(de,wn.value,et),wn!==null&&(ie=k(wn,ie,_n),Yt===null?mt=wn:Yt.sibling=wn,Yt=wn);return rn&&ln(de,_n),mt}for(Vt=T(de,Vt);!wn.done;_n++,wn=xe.next())wn=Nn(Vt,de,_n,wn.value,et),wn!==null&&(d&&wn.alternate!==null&&Vt.delete(wn.key===null?_n:wn.key),ie=k(wn,ie,_n),Yt===null?mt=wn:Yt.sibling=wn,Yt=wn);return d&&Vt.forEach(function(O6){return f(de,O6)}),rn&&ln(de,_n),mt}function ks(de,ie,xe,et){if(typeof xe=="object"&&xe!==null&&xe.type===u&&xe.key===null&&(xe=xe.props.children),typeof xe=="object"&&xe!==null){switch(xe.$$typeof){case l:e:{for(var mt=xe.key,Yt=ie;Yt!==null;){if(Yt.key===mt){if(mt=xe.type,mt===u){if(Yt.tag===7){_(de,Yt.sibling),ie=I(Yt,xe.props.children),ie.return=de,de=ie;break e}}else if(Yt.elementType===mt||typeof mt=="object"&&mt!==null&&mt.$$typeof===E&&II(mt)===Yt.type){_(de,Yt.sibling),ie=I(Yt,xe.props),ie.ref=Vf(de,Yt,xe),ie.return=de,de=ie;break e}_(de,Yt);break}else f(de,Yt);Yt=Yt.sibling}xe.type===u?(ie=zc(xe.props.children,de.mode,et,xe.key),ie.return=de,de=ie):(et=jy(xe.type,xe.key,xe.props,null,de.mode,et),et.ref=Vf(de,ie,xe),et.return=de,de=et)}return Y(de);case c:e:{for(Yt=xe.key;ie!==null;){if(ie.key===Yt)if(ie.tag===4&&ie.stateNode.containerInfo===xe.containerInfo&&ie.stateNode.implementation===xe.implementation){_(de,ie.sibling),ie=I(ie,xe.children||[]),ie.return=de,de=ie;break e}else{_(de,ie);break}else f(de,ie);ie=ie.sibling}ie=$b(xe,de.mode,et),ie.return=de,de=ie}return Y(de);case E:return Yt=xe._init,ks(de,ie,Yt(xe._payload),et)}if(le(xe))return yt(de,ie,xe,et);if(O(xe))return sr(de,ie,xe,et);ay(de,xe)}return typeof xe=="string"&&xe!==""||typeof xe=="number"?(xe=""+xe,ie!==null&&ie.tag===6?(_(de,ie.sibling),ie=I(ie,xe),ie.return=de,de=ie):(_(de,ie),ie=qb(xe,de.mode,et),ie.return=de,de=ie),Y(de)):_(de,ie)}return ks}var bh=PI(!0),RI=PI(!1),Bf={},Rs=vt(Bf),zf=vt(Bf),Sh=vt(Bf);function Co(d){if(d===Bf)throw Error(o(174));return d}function ub(d,f){dt(Sh,f),dt(zf,d),dt(Rs,Bf),d=ue(f),He(Rs),dt(Rs,d)}function Th(){He(Rs),He(zf),He(Sh)}function NI(d){var f=Co(Sh.current),_=Co(Rs.current);f=q(_,d.type,f),_!==f&&(dt(zf,d),dt(Rs,f))}function hb(d){zf.current===d&&(He(Rs),He(zf))}var Hn=vt(0);function ly(d){for(var f=d;f!==null;){if(f.tag===13){var _=f.memoizedState;if(_!==null&&(_=_.dehydrated,_===null||Zi(_)||Jo(_)))return f}else if(f.tag===19&&f.memoizedProps.revealOrder!==void 0){if(f.flags&128)return f}else if(f.child!==null){f.child.return=f,f=f.child;continue}if(f===d)break;for(;f.sibling===null;){if(f.return===null||f.return===d)return null;f=f.return}f.sibling.return=f.return,f=f.sibling}return null}var db=[];function fb(){for(var d=0;d<db.length;d++){var f=db[d];Ge?f._workInProgressVersionPrimary=null:f._workInProgressVersionSecondary=null}db.length=0}var cy=a.ReactCurrentDispatcher,Ns=a.ReactCurrentBatchConfig,Eh=0,Jn=null,nr=null,Di=null,uy=!1,Hf=!1,Gf=0,a6=0;function ir(){throw Error(o(321))}function pb(d,f){if(f===null)return!1;for(var _=0;_<f.length&&_<d.length;_++)if(!os(d[_],f[_]))return!1;return!0}function mb(d,f,_,T,I,k){if(Eh=k,Jn=f,f.memoizedState=null,f.updateQueue=null,f.lanes=0,cy.current=d===null||d.memoizedState===null?h6:d6,d=_(T,I),Hf){k=0;do{if(Hf=!1,Gf=0,25<=k)throw Error(o(301));k+=1,Di=nr=null,f.updateQueue=null,cy.current=f6,d=_(T,I)}while(Hf)}if(cy.current=my,f=nr!==null&&nr.next!==null,Eh=0,Di=nr=Jn=null,uy=!1,f)throw Error(o(300));return d}function gb(){var d=Gf!==0;return Gf=0,d}function ia(){var d={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Di===null?Jn.memoizedState=Di=d:Di=Di.next=d,Di}function Ao(){if(nr===null){var d=Jn.alternate;d=d!==null?d.memoizedState:null}else d=nr.next;var f=Di===null?Jn.memoizedState:Di.next;if(f!==null)Di=f,nr=d;else{if(d===null)throw Error(o(310));nr=d,d={memoizedState:nr.memoizedState,baseState:nr.baseState,baseQueue:nr.baseQueue,queue:nr.queue,next:null},Di===null?Jn.memoizedState=Di=d:Di=Di.next=d}return Di}function Oc(d,f){return typeof f=="function"?f(d):f}function hy(d){var f=Ao(),_=f.queue;if(_===null)throw Error(o(311));_.lastRenderedReducer=d;var T=nr,I=T.baseQueue,k=_.pending;if(k!==null){if(I!==null){var Y=I.next;I.next=k.next,k.next=Y}T.baseQueue=I=k,_.pending=null}if(I!==null){k=I.next,T=T.baseState;var ee=Y=null,we=null,je=k;do{var ut=je.lane;if((Eh&ut)===ut)we!==null&&(we=we.next={lane:0,action:je.action,hasEagerState:je.hasEagerState,eagerState:je.eagerState,next:null}),T=je.hasEagerState?je.eagerState:d(T,je.action);else{var Ft={lane:ut,action:je.action,hasEagerState:je.hasEagerState,eagerState:je.eagerState,next:null};we===null?(ee=we=Ft,Y=T):we=we.next=Ft,Jn.lanes|=ut,Ah|=ut}je=je.next}while(je!==null&&je!==k);we===null?Y=T:we.next=ee,os(T,f.memoizedState)||(hs=!0),f.memoizedState=T,f.baseState=Y,f.baseQueue=we,_.lastRenderedState=T}if(d=_.interleaved,d!==null){I=d;do k=I.lane,Jn.lanes|=k,Ah|=k,I=I.next;while(I!==d)}else I===null&&(_.lanes=0);return[f.memoizedState,_.dispatch]}function dy(d){var f=Ao(),_=f.queue;if(_===null)throw Error(o(311));_.lastRenderedReducer=d;var T=_.dispatch,I=_.pending,k=f.memoizedState;if(I!==null){_.pending=null;var Y=I=I.next;do k=d(k,Y.action),Y=Y.next;while(Y!==I);os(k,f.memoizedState)||(hs=!0),f.memoizedState=k,f.baseQueue===null&&(f.baseState=k),_.lastRenderedState=k}return[k,T]}function DI(){}function LI(d,f){var _=Jn,T=Ao(),I=f(),k=!os(T.memoizedState,I);if(k&&(T.memoizedState=I,hs=!0),T=T.queue,qf(UI.bind(null,_,T,d),[d]),T.getSnapshot!==f||k||Di!==null&&Di.memoizedState.tag&1){if(_.flags|=2048,Wf(9,OI.bind(null,_,T,I,f),void 0,null),fi===null)throw Error(o(349));Eh&30||kI(_,f,I)}return I}function kI(d,f,_){d.flags|=16384,d={getSnapshot:f,value:_},f=Jn.updateQueue,f===null?(f={lastEffect:null,stores:null},Jn.updateQueue=f,f.stores=[d]):(_=f.stores,_===null?f.stores=[d]:_.push(d))}function OI(d,f,_,T){f.value=_,f.getSnapshot=T,jI(f)&&Ds(d,1,-1)}function UI(d,f,_){return _(function(){jI(f)&&Ds(d,1,-1)})}function jI(d){var f=d.getSnapshot;d=d.value;try{var _=f();return!os(d,_)}catch{return!0}}function yb(d){var f=ia();return typeof d=="function"&&(d=d()),f.memoizedState=f.baseState=d,d={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Oc,lastRenderedState:d},f.queue=d,d=d.dispatch=u6.bind(null,Jn,d),[f.memoizedState,d]}function Wf(d,f,_,T){return d={tag:d,create:f,destroy:_,deps:T,next:null},f=Jn.updateQueue,f===null?(f={lastEffect:null,stores:null},Jn.updateQueue=f,f.lastEffect=d.next=d):(_=f.lastEffect,_===null?f.lastEffect=d.next=d:(T=_.next,_.next=d,d.next=T,f.lastEffect=d)),d}function FI(){return Ao().memoizedState}function fy(d,f,_,T){var I=ia();Jn.flags|=d,I.memoizedState=Wf(1|f,_,void 0,T===void 0?null:T)}function py(d,f,_,T){var I=Ao();T=T===void 0?null:T;var k=void 0;if(nr!==null){var Y=nr.memoizedState;if(k=Y.destroy,T!==null&&pb(T,Y.deps)){I.memoizedState=Wf(f,_,k,T);return}}Jn.flags|=d,I.memoizedState=Wf(1|f,_,k,T)}function vb(d,f){return fy(8390656,8,d,f)}function qf(d,f){return py(2048,8,d,f)}function VI(d,f){return py(4,2,d,f)}function BI(d,f){return py(4,4,d,f)}function zI(d,f){if(typeof f=="function")return d=d(),f(d),function(){f(null)};if(f!=null)return d=d(),f.current=d,function(){f.current=null}}function HI(d,f,_){return _=_!=null?_.concat([d]):null,py(4,4,zI.bind(null,f,d),_)}function xb(){}function GI(d,f){var _=Ao();f=f===void 0?null:f;var T=_.memoizedState;return T!==null&&f!==null&&pb(f,T[1])?T[0]:(_.memoizedState=[d,f],d)}function WI(d,f){var _=Ao();f=f===void 0?null:f;var T=_.memoizedState;return T!==null&&f!==null&&pb(f,T[1])?T[0]:(d=d(),_.memoizedState=[d,f],d)}function l6(d,f){var _=an;an=_!==0&&4>_?_:4,d(!0);var T=Ns.transition;Ns.transition={};try{d(!1),f()}finally{an=_,Ns.transition=T}}function qI(){return Ao().memoizedState}function c6(d,f,_){var T=Za(d);_={lane:T,action:_,hasEagerState:!1,eagerState:null,next:null},$I(d)?XI(f,_):(KI(d,f,_),_=Mr(),d=Ds(d,T,_),d!==null&&YI(d,f,T))}function u6(d,f,_){var T=Za(d),I={lane:T,action:_,hasEagerState:!1,eagerState:null,next:null};if($I(d))XI(f,I);else{KI(d,f,I);var k=d.alternate;if(d.lanes===0&&(k===null||k.lanes===0)&&(k=f.lastRenderedReducer,k!==null))try{var Y=f.lastRenderedState,ee=k(Y,_);if(I.hasEagerState=!0,I.eagerState=ee,os(ee,Y))return}catch{}finally{}_=Mr(),d=Ds(d,T,_),d!==null&&YI(d,f,T)}}function $I(d){var f=d.alternate;return d===Jn||f!==null&&f===Jn}function XI(d,f){Hf=uy=!0;var _=d.pending;_===null?f.next=f:(f.next=_.next,_.next=f),d.pending=f}function KI(d,f,_){fi!==null&&d.mode&1&&!(Jt&2)?(d=f.interleaved,d===null?(_.next=_,er===null?er=[f]:er.push(f)):(_.next=d.next,d.next=_),f.interleaved=_):(d=f.pending,d===null?_.next=_:(_.next=d.next,d.next=_),f.pending=_)}function YI(d,f,_){if(_&4194240){var T=f.lanes;T&=d.pendingLanes,_|=T,f.lanes=_,Ms(d,_)}}var my={readContext:Er,useCallback:ir,useContext:ir,useEffect:ir,useImperativeHandle:ir,useInsertionEffect:ir,useLayoutEffect:ir,useMemo:ir,useReducer:ir,useRef:ir,useState:ir,useDebugValue:ir,useDeferredValue:ir,useTransition:ir,useMutableSource:ir,useSyncExternalStore:ir,useId:ir,unstable_isNewReconciler:!1},h6={readContext:Er,useCallback:function(d,f){return ia().memoizedState=[d,f===void 0?null:f],d},useContext:Er,useEffect:vb,useImperativeHandle:function(d,f,_){return _=_!=null?_.concat([d]):null,fy(4194308,4,zI.bind(null,f,d),_)},useLayoutEffect:function(d,f){return fy(4194308,4,d,f)},useInsertionEffect:function(d,f){return fy(4,2,d,f)},useMemo:function(d,f){var _=ia();return f=f===void 0?null:f,d=d(),_.memoizedState=[d,f],d},useReducer:function(d,f,_){var T=ia();return f=_!==void 0?_(f):f,T.memoizedState=T.baseState=f,d={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:d,lastRenderedState:f},T.queue=d,d=d.dispatch=c6.bind(null,Jn,d),[T.memoizedState,d]},useRef:function(d){var f=ia();return d={current:d},f.memoizedState=d},useState:yb,useDebugValue:xb,useDeferredValue:function(d){var f=yb(d),_=f[0],T=f[1];return vb(function(){var I=Ns.transition;Ns.transition={};try{T(d)}finally{Ns.transition=I}},[d]),_},useTransition:function(){var d=yb(!1),f=d[0];return d=l6.bind(null,d[1]),ia().memoizedState=d,[f,d]},useMutableSource:function(){},useSyncExternalStore:function(d,f,_){var T=Jn,I=ia();if(rn){if(_===void 0)throw Error(o(407));_=_()}else{if(_=f(),fi===null)throw Error(o(349));Eh&30||kI(T,f,_)}I.memoizedState=_;var k={value:_,getSnapshot:f};return I.queue=k,vb(UI.bind(null,T,k,d),[d]),T.flags|=2048,Wf(9,OI.bind(null,T,k,_,f),void 0,null),_},useId:function(){var d=ia(),f=fi.identifierPrefix;if(rn){var _=Oe,T=ge;_=(T&~(1<<32-qt(T)-1)).toString(32)+_,f=":"+f+"R"+_,_=Gf++,0<_&&(f+="H"+_.toString(32)),f+=":"}else _=a6++,f=":"+f+"r"+_.toString(32)+":";return d.memoizedState=f},unstable_isNewReconciler:!1},d6={readContext:Er,useCallback:GI,useContext:Er,useEffect:qf,useImperativeHandle:HI,useInsertionEffect:VI,useLayoutEffect:BI,useMemo:WI,useReducer:hy,useRef:FI,useState:function(){return hy(Oc)},useDebugValue:xb,useDeferredValue:function(d){var f=hy(Oc),_=f[0],T=f[1];return qf(function(){var I=Ns.transition;Ns.transition={};try{T(d)}finally{Ns.transition=I}},[d]),_},useTransition:function(){var d=hy(Oc)[0],f=Ao().memoizedState;return[d,f]},useMutableSource:DI,useSyncExternalStore:LI,useId:qI,unstable_isNewReconciler:!1},f6={readContext:Er,useCallback:GI,useContext:Er,useEffect:qf,useImperativeHandle:HI,useInsertionEffect:VI,useLayoutEffect:BI,useMemo:WI,useReducer:dy,useRef:FI,useState:function(){return dy(Oc)},useDebugValue:xb,useDeferredValue:function(d){var f=dy(Oc),_=f[0],T=f[1];return qf(function(){var I=Ns.transition;Ns.transition={};try{T(d)}finally{Ns.transition=I}},[d]),_},useTransition:function(){var d=dy(Oc)[0],f=Ao().memoizedState;return[d,f]},useMutableSource:DI,useSyncExternalStore:LI,useId:qI,unstable_isNewReconciler:!1};function _b(d,f){try{var _="",T=f;do _+=oy(T),T=T.return;while(T);var I=_}catch(k){I=`
Error generating stack: `+k.message+`
`+k.stack}return{value:d,source:f,stack:I}}function wb(d,f){try{console.error(f.value)}catch(_){setTimeout(function(){throw _})}}var p6=typeof WeakMap=="function"?WeakMap:Map;function JI(d,f,_){_=cs(-1,_),_.tag=3,_.payload={element:null};var T=f.value;return _.callback=function(){Ry||(Ry=!0,Fb=T),wb(d,f)},_}function QI(d,f,_){_=cs(-1,_),_.tag=3;var T=d.type.getDerivedStateFromError;if(typeof T=="function"){var I=f.value;_.payload=function(){return T(I)},_.callback=function(){wb(d,f)}}var k=d.stateNode;return k!==null&&typeof k.componentDidCatch=="function"&&(_.callback=function(){wb(d,f),typeof T!="function"&&(Ja===null?Ja=new Set([this]):Ja.add(this));var Y=f.stack;this.componentDidCatch(f.value,{componentStack:Y!==null?Y:""})}),_}function ZI(d,f,_){var T=d.pingCache;if(T===null){T=d.pingCache=new p6;var I=new Set;T.set(f,I)}else I=T.get(f),I===void 0&&(I=new Set,T.set(f,I));I.has(_)||(I.add(_),d=M6.bind(null,d,f,_),f.then(d,d))}function eP(d){do{var f;if((f=d.tag===13)&&(f=d.memoizedState,f=f!==null?f.dehydrated!==null:!0),f)return d;d=d.return}while(d!==null);return null}function tP(d,f,_,T,I){return d.mode&1?(d.flags|=65536,d.lanes=I,d):(d===f?d.flags|=65536:(d.flags|=128,_.flags|=131072,_.flags&=-52805,_.tag===1&&(_.alternate===null?_.tag=17:(f=cs(-1,1),f.tag=2,Zs(_,f))),_.lanes|=1),d)}function Mo(d){d.flags|=4}function nP(d,f){if(d!==null&&d.child===f.child)return!0;if(f.flags&16)return!1;for(d=f.child;d!==null;){if(d.flags&12854||d.subtreeFlags&12854)return!1;d=d.sibling}return!0}var $f,Xf,gy,yy;if(Je)$f=function(d,f){for(var _=f.child;_!==null;){if(_.tag===5||_.tag===6)ce(d,_.stateNode);else if(_.tag!==4&&_.child!==null){_.child.return=_,_=_.child;continue}if(_===f)break;for(;_.sibling===null;){if(_.return===null||_.return===f)return;_=_.return}_.sibling.return=_.return,_=_.sibling}},Xf=function(){},gy=function(d,f,_,T,I){if(d=d.memoizedProps,d!==T){var k=f.stateNode,Y=Co(Rs.current);_=oe(k,_,d,T,I,Y),(f.updateQueue=_)&&Mo(f)}},yy=function(d,f,_,T){_!==T&&Mo(f)};else if(Ce){$f=function(d,f,_,T){for(var I=f.child;I!==null;){if(I.tag===5){var k=I.stateNode;_&&T&&(k=Zt(k,I.type,I.memoizedProps,I)),ce(d,k)}else if(I.tag===6)k=I.stateNode,_&&T&&(k=Vi(k,I.memoizedProps,I)),ce(d,k);else if(I.tag!==4){if(I.tag===22&&I.memoizedState!==null)k=I.child,k!==null&&(k.return=I),$f(d,I,!0,!0);else if(I.child!==null){I.child.return=I,I=I.child;continue}}if(I===f)break;for(;I.sibling===null;){if(I.return===null||I.return===f)return;I=I.return}I.sibling.return=I.return,I=I.sibling}};var iP=function(d,f,_,T){for(var I=f.child;I!==null;){if(I.tag===5){var k=I.stateNode;_&&T&&(k=Zt(k,I.type,I.memoizedProps,I)),Rt(d,k)}else if(I.tag===6)k=I.stateNode,_&&T&&(k=Vi(k,I.memoizedProps,I)),Rt(d,k);else if(I.tag!==4){if(I.tag===22&&I.memoizedState!==null)k=I.child,k!==null&&(k.return=I),iP(d,I,!0,!0);else if(I.child!==null){I.child.return=I,I=I.child;continue}}if(I===f)break;for(;I.sibling===null;){if(I.return===null||I.return===f)return;I=I.return}I.sibling.return=I.return,I=I.sibling}};Xf=function(d,f){var _=f.stateNode;if(!nP(d,f)){d=_.containerInfo;var T=ze(d);iP(T,f,!1,!1),_.pendingChildren=T,Mo(f),Cn(d,T)}},gy=function(d,f,_,T,I){var k=d.stateNode,Y=d.memoizedProps;if((d=nP(d,f))&&Y===T)f.stateNode=k;else{var ee=f.stateNode,we=Co(Rs.current),je=null;Y!==T&&(je=oe(ee,_,Y,T,I,we)),d&&je===null?f.stateNode=k:(k=Ke(k,je,_,Y,T,f,d,ee),me(k,_,T,I,we)&&Mo(f),f.stateNode=k,d?Mo(f):$f(k,f,!1,!1))}},yy=function(d,f,_,T){_!==T?(d=Co(Sh.current),_=Co(Rs.current),f.stateNode=Re(T,d,_,f),Mo(f)):f.stateNode=d.stateNode}}else Xf=function(){},gy=function(){},yy=function(){};function Kf(d,f){if(!rn)switch(d.tailMode){case"hidden":f=d.tail;for(var _=null;f!==null;)f.alternate!==null&&(_=f),f=f.sibling;_===null?d.tail=null:_.sibling=null;break;case"collapsed":_=d.tail;for(var T=null;_!==null;)_.alternate!==null&&(T=_),_=_.sibling;T===null?f||d.tail===null?d.tail=null:d.tail.sibling=null:T.sibling=null}}function rr(d){var f=d.alternate!==null&&d.alternate.child===d.child,_=0,T=0;if(f)for(var I=d.child;I!==null;)_|=I.lanes|I.childLanes,T|=I.subtreeFlags&14680064,T|=I.flags&14680064,I.return=d,I=I.sibling;else for(I=d.child;I!==null;)_|=I.lanes|I.childLanes,T|=I.subtreeFlags,T|=I.flags,I.return=d,I=I.sibling;return d.subtreeFlags|=T,d.childLanes=_,f}function m6(d,f,_){var T=f.pendingProps;switch(hi(f),f.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return rr(f),null;case 1:return un(f.type)&&en(),rr(f),null;case 3:return T=f.stateNode,Th(),He(Kt),He(Wt),fb(),T.pendingContext&&(T.context=T.pendingContext,T.pendingContext=null),(d===null||d.child===null)&&(Ff(f)?Mo(f):d===null||d.memoizedState.isDehydrated&&!(f.flags&256)||(f.flags|=1024,Cr!==null&&(zb(Cr),Cr=null))),Xf(d,f),rr(f),null;case 5:hb(f),_=Co(Sh.current);var I=f.type;if(d!==null&&f.stateNode!=null)gy(d,f,I,T,_),d.ref!==f.ref&&(f.flags|=512,f.flags|=2097152);else{if(!T){if(f.stateNode===null)throw Error(o(166));return rr(f),null}if(d=Co(Rs.current),Ff(f)){if(!Se)throw Error(o(175));d=bc(f.stateNode,f.type,f.memoizedProps,_,d,f,!Eo),f.updateQueue=d,d!==null&&Mo(f)}else{var k=J(I,T,_,d,f);$f(k,f,!1,!1),f.stateNode=k,me(k,I,T,_,d)&&Mo(f)}f.ref!==null&&(f.flags|=512,f.flags|=2097152)}return rr(f),null;case 6:if(d&&f.stateNode!=null)yy(d,f,d.memoizedProps,T);else{if(typeof T!="string"&&f.stateNode===null)throw Error(o(166));if(d=Co(Sh.current),_=Co(Rs.current),Ff(f)){if(!Se)throw Error(o(176));if(d=f.stateNode,T=f.memoizedProps,(_=$a(d,T,f,!Eo))&&(I=Sn,I!==null))switch(k=(I.mode&1)!==0,I.tag){case 3:te(I.stateNode.containerInfo,d,T,k);break;case 5:pe(I.type,I.memoizedProps,I.stateNode,d,T,k)}_&&Mo(f)}else f.stateNode=Re(T,d,_,f)}return rr(f),null;case 13:if(He(Hn),T=f.memoizedState,rn&&di!==null&&f.mode&1&&!(f.flags&128)){for(d=di;d;)d=Tr(d);return wh(),f.flags|=98560,f}if(T!==null&&T.dehydrated!==null){if(T=Ff(f),d===null){if(!T)throw Error(o(318));if(!Se)throw Error(o(344));if(d=f.memoizedState,d=d!==null?d.dehydrated:null,!d)throw Error(o(317));Xa(d,f)}else wh(),!(f.flags&128)&&(f.memoizedState=null),f.flags|=4;return rr(f),null}return Cr!==null&&(zb(Cr),Cr=null),f.flags&128?(f.lanes=_,f):(T=T!==null,_=!1,d===null?Ff(f):_=d.memoizedState!==null,T&&!_&&(f.child.flags|=8192,f.mode&1&&(d===null||Hn.current&1?Ei===0&&(Ei=3):Gb())),f.updateQueue!==null&&(f.flags|=4),rr(f),null);case 4:return Th(),Xf(d,f),d===null&&ot(f.stateNode.containerInfo),rr(f),null;case 10:return gh(f.type._context),rr(f),null;case 17:return un(f.type)&&en(),rr(f),null;case 19:if(He(Hn),I=f.memoizedState,I===null)return rr(f),null;if(T=(f.flags&128)!==0,k=I.rendering,k===null)if(T)Kf(I,!1);else{if(Ei!==0||d!==null&&d.flags&128)for(d=f.child;d!==null;){if(k=ly(d),k!==null){for(f.flags|=128,Kf(I,!1),d=k.updateQueue,d!==null&&(f.updateQueue=d,f.flags|=4),f.subtreeFlags=0,d=_,T=f.child;T!==null;)_=T,I=d,_.flags&=14680066,k=_.alternate,k===null?(_.childLanes=0,_.lanes=I,_.child=null,_.subtreeFlags=0,_.memoizedProps=null,_.memoizedState=null,_.updateQueue=null,_.dependencies=null,_.stateNode=null):(_.childLanes=k.childLanes,_.lanes=k.lanes,_.child=k.child,_.subtreeFlags=0,_.deletions=null,_.memoizedProps=k.memoizedProps,_.memoizedState=k.memoizedState,_.updateQueue=k.updateQueue,_.type=k.type,I=k.dependencies,_.dependencies=I===null?null:{lanes:I.lanes,firstContext:I.firstContext}),T=T.sibling;return dt(Hn,Hn.current&1|2),f.child}d=d.sibling}I.tail!==null&&ci()>jb&&(f.flags|=128,T=!0,Kf(I,!1),f.lanes=4194304)}else{if(!T)if(d=ly(k),d!==null){if(f.flags|=128,T=!0,d=d.updateQueue,d!==null&&(f.updateQueue=d,f.flags|=4),Kf(I,!0),I.tail===null&&I.tailMode==="hidden"&&!k.alternate&&!rn)return rr(f),null}else 2*ci()-I.renderingStartTime>jb&&_!==1073741824&&(f.flags|=128,T=!0,Kf(I,!1),f.lanes=4194304);I.isBackwards?(k.sibling=f.child,f.child=k):(d=I.last,d!==null?d.sibling=k:f.child=k,I.last=k)}return I.tail!==null?(f=I.tail,I.rendering=f,I.tail=f.sibling,I.renderingStartTime=ci(),f.sibling=null,d=Hn.current,dt(Hn,T?d&1|2:d&1),f):(rr(f),null);case 22:case 23:return Hb(),T=f.memoizedState!==null,d!==null&&d.memoizedState!==null!==T&&(f.flags|=8192),T&&f.mode&1?ds&1073741824&&(rr(f),Je&&f.subtreeFlags&6&&(f.flags|=8192)):rr(f),null;case 24:return null;case 25:return null}throw Error(o(156,f.tag))}var g6=a.ReactCurrentOwner,hs=!1;function Ar(d,f,_,T){f.child=d===null?RI(f,null,_,T):bh(f,d.child,_,T)}function rP(d,f,_,T,I){_=_.render;var k=f.ref;return Ya(f,I),T=mb(d,f,_,T,k,I),_=gb(),d!==null&&!hs?(f.updateQueue=d.updateQueue,f.flags&=-2053,d.lanes&=~I,ra(d,f,I)):(rn&&_&&nn(f),f.flags|=1,Ar(d,f,T,I),f.child)}function sP(d,f,_,T,I){if(d===null){var k=_.type;return typeof k=="function"&&!Wb(k)&&k.defaultProps===void 0&&_.compare===null&&_.defaultProps===void 0?(f.tag=15,f.type=k,oP(d,f,k,T,I)):(d=jy(_.type,null,T,f,f.mode,I),d.ref=f.ref,d.return=f,f.child=d)}if(k=d.child,!(d.lanes&I)){var Y=k.memoizedProps;if(_=_.compare,_=_!==null?_:ea,_(Y,T)&&d.ref===f.ref)return ra(d,f,I)}return f.flags|=1,d=tl(k,T),d.ref=f.ref,d.return=f,f.child=d}function oP(d,f,_,T,I){if(d!==null&&ea(d.memoizedProps,T)&&d.ref===f.ref)if(hs=!1,(d.lanes&I)!==0)d.flags&131072&&(hs=!0);else return f.lanes=d.lanes,ra(d,f,I);return bb(d,f,_,T,I)}function aP(d,f,_){var T=f.pendingProps,I=T.children,k=d!==null?d.memoizedState:null;if(T.mode==="hidden")if(!(f.mode&1))f.memoizedState={baseLanes:0,cachePool:null},dt(Ch,ds),ds|=_;else if(_&1073741824)f.memoizedState={baseLanes:0,cachePool:null},T=k!==null?k.baseLanes:_,dt(Ch,ds),ds|=T;else return d=k!==null?k.baseLanes|_:_,f.lanes=f.childLanes=1073741824,f.memoizedState={baseLanes:d,cachePool:null},f.updateQueue=null,dt(Ch,ds),ds|=d,null;else k!==null?(T=k.baseLanes|_,f.memoizedState=null):T=_,dt(Ch,ds),ds|=T;return Ar(d,f,I,_),f.child}function lP(d,f){var _=f.ref;(d===null&&_!==null||d!==null&&d.ref!==_)&&(f.flags|=512,f.flags|=2097152)}function bb(d,f,_,T,I){var k=un(_)?Ut:Wt.current;return k=pt(f,k),Ya(f,I),_=mb(d,f,_,T,k,I),T=gb(),d!==null&&!hs?(f.updateQueue=d.updateQueue,f.flags&=-2053,d.lanes&=~I,ra(d,f,I)):(rn&&T&&nn(f),f.flags|=1,Ar(d,f,_,I),f.child)}function cP(d,f,_,T,I){if(un(_)){var k=!0;Dn(f)}else k=!1;if(Ya(f,I),f.stateNode===null)d!==null&&(d.alternate=null,f.alternate=null,f.flags|=2),kc(f,_,T),_h(f,_,T,I),T=!0;else if(d===null){var Y=f.stateNode,ee=f.memoizedProps;Y.props=ee;var we=Y.context,je=_.contextType;typeof je=="object"&&je!==null?je=Er(je):(je=un(_)?Ut:Wt.current,je=pt(f,je));var ut=_.getDerivedStateFromProps,Ft=typeof ut=="function"||typeof Y.getSnapshotBeforeUpdate=="function";Ft||typeof Y.UNSAFE_componentWillReceiveProps!="function"&&typeof Y.componentWillReceiveProps!="function"||(ee!==T||we!==je)&&tr(f,Y,T,je),Qs=!1;var bt=f.memoizedState;Y.state=bt,Dc(f,T,Y,I),we=f.memoizedState,ee!==T||bt!==we||Kt.current||Qs?(typeof ut=="function"&&(xh(f,_,ut,T),we=f.memoizedState),(ee=Qs||jf(f,_,ee,T,bt,we,je))?(Ft||typeof Y.UNSAFE_componentWillMount!="function"&&typeof Y.componentWillMount!="function"||(typeof Y.componentWillMount=="function"&&Y.componentWillMount(),typeof Y.UNSAFE_componentWillMount=="function"&&Y.UNSAFE_componentWillMount()),typeof Y.componentDidMount=="function"&&(f.flags|=4194308)):(typeof Y.componentDidMount=="function"&&(f.flags|=4194308),f.memoizedProps=T,f.memoizedState=we),Y.props=T,Y.state=we,Y.context=je,T=ee):(typeof Y.componentDidMount=="function"&&(f.flags|=4194308),T=!1)}else{Y=f.stateNode,vh(d,f),ee=f.memoizedProps,je=f.type===f.elementType?ee:ni(f.type,ee),Y.props=je,Ft=f.pendingProps,bt=Y.context,we=_.contextType,typeof we=="object"&&we!==null?we=Er(we):(we=un(_)?Ut:Wt.current,we=pt(f,we));var Nn=_.getDerivedStateFromProps;(ut=typeof Nn=="function"||typeof Y.getSnapshotBeforeUpdate=="function")||typeof Y.UNSAFE_componentWillReceiveProps!="function"&&typeof Y.componentWillReceiveProps!="function"||(ee!==Ft||bt!==we)&&tr(f,Y,T,we),Qs=!1,bt=f.memoizedState,Y.state=bt,Dc(f,T,Y,I);var yt=f.memoizedState;ee!==Ft||bt!==yt||Kt.current||Qs?(typeof Nn=="function"&&(xh(f,_,Nn,T),yt=f.memoizedState),(je=Qs||jf(f,_,je,T,bt,yt,we)||!1)?(ut||typeof Y.UNSAFE_componentWillUpdate!="function"&&typeof Y.componentWillUpdate!="function"||(typeof Y.componentWillUpdate=="function"&&Y.componentWillUpdate(T,yt,we),typeof Y.UNSAFE_componentWillUpdate=="function"&&Y.UNSAFE_componentWillUpdate(T,yt,we)),typeof Y.componentDidUpdate=="function"&&(f.flags|=4),typeof Y.getSnapshotBeforeUpdate=="function"&&(f.flags|=1024)):(typeof Y.componentDidUpdate!="function"||ee===d.memoizedProps&&bt===d.memoizedState||(f.flags|=4),typeof Y.getSnapshotBeforeUpdate!="function"||ee===d.memoizedProps&&bt===d.memoizedState||(f.flags|=1024),f.memoizedProps=T,f.memoizedState=yt),Y.props=T,Y.state=yt,Y.context=we,T=je):(typeof Y.componentDidUpdate!="function"||ee===d.memoizedProps&&bt===d.memoizedState||(f.flags|=4),typeof Y.getSnapshotBeforeUpdate!="function"||ee===d.memoizedProps&&bt===d.memoizedState||(f.flags|=1024),T=!1)}return Sb(d,f,_,T,k,I)}function Sb(d,f,_,T,I,k){lP(d,f);var Y=(f.flags&128)!==0;if(!T&&!Y)return I&&Ni(f,_,!1),ra(d,f,k);T=f.stateNode,g6.current=f;var ee=Y&&typeof _.getDerivedStateFromError!="function"?null:T.render();return f.flags|=1,d!==null&&Y?(f.child=bh(f,d.child,null,k),f.child=bh(f,null,ee,k)):Ar(d,f,ee,k),f.memoizedState=T.state,I&&Ni(f,_,!0),f.child}function uP(d){var f=d.stateNode;f.pendingContext?Bi(d,f.pendingContext,f.pendingContext!==f.context):f.context&&Bi(d,f.context,!1),ub(d,f.containerInfo)}function hP(d,f,_,T,I){return wh(),cb(I),f.flags|=256,Ar(d,f,_,T),f.child}var vy={dehydrated:null,treeContext:null,retryLane:0};function xy(d){return{baseLanes:d,cachePool:null}}function dP(d,f,_){var T=f.pendingProps,I=Hn.current,k=!1,Y=(f.flags&128)!==0,ee;if((ee=Y)||(ee=d!==null&&d.memoizedState===null?!1:(I&2)!==0),ee?(k=!0,f.flags&=-129):(d===null||d.memoizedState!==null)&&(I|=1),dt(Hn,I&1),d===null)return lb(f),d=f.memoizedState,d!==null&&(d=d.dehydrated,d!==null)?(f.mode&1?Jo(d)?f.lanes=8:f.lanes=1073741824:f.lanes=1,null):(I=T.children,d=T.fallback,k?(T=f.mode,k=f.child,I={mode:"hidden",children:I},!(T&1)&&k!==null?(k.childLanes=0,k.pendingProps=I):k=Fy(I,T,0,null),d=zc(d,T,_,null),k.return=f,d.return=f,k.sibling=d,f.child=k,f.child.memoizedState=xy(_),f.memoizedState=vy,d):Tb(f,I));if(I=d.memoizedState,I!==null){if(ee=I.dehydrated,ee!==null){if(Y)return f.flags&256?(f.flags&=-257,_y(d,f,_,Error(o(422)))):f.memoizedState!==null?(f.child=d.child,f.flags|=128,null):(k=T.fallback,I=f.mode,T=Fy({mode:"visible",children:T.children},I,0,null),k=zc(k,I,_,null),k.flags|=2,T.return=f,k.return=f,T.sibling=k,f.child=T,f.mode&1&&bh(f,d.child,null,_),f.child.memoizedState=xy(_),f.memoizedState=vy,k);if(!(f.mode&1))f=_y(d,f,_,null);else if(Jo(ee))f=_y(d,f,_,Error(o(419)));else if(T=(_&d.childLanes)!==0,hs||T){if(T=fi,T!==null){switch(_&-_){case 4:k=2;break;case 16:k=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:k=32;break;case 536870912:k=268435456;break;default:k=0}T=k&(T.suspendedLanes|_)?0:k,T!==0&&T!==I.retryLane&&(I.retryLane=T,Ds(d,T,-1))}Gb(),f=_y(d,f,_,Error(o(421)))}else Zi(ee)?(f.flags|=128,f.child=d.child,f=I6.bind(null,d),lh(ee,f),f=null):(_=I.treeContext,Se&&(di=Ys(ee),Sn=f,rn=!0,Cr=null,Eo=!1,_!==null&&(L[G++]=ge,L[G++]=Oe,L[G++]=se,ge=_.id,Oe=_.overflow,se=f)),f=Tb(f,f.pendingProps.children),f.flags|=4096);return f}return k?(T=pP(d,f,T.children,T.fallback,_),k=f.child,I=d.child.memoizedState,k.memoizedState=I===null?xy(_):{baseLanes:I.baseLanes|_,cachePool:null},k.childLanes=d.childLanes&~_,f.memoizedState=vy,T):(_=fP(d,f,T.children,_),f.memoizedState=null,_)}return k?(T=pP(d,f,T.children,T.fallback,_),k=f.child,I=d.child.memoizedState,k.memoizedState=I===null?xy(_):{baseLanes:I.baseLanes|_,cachePool:null},k.childLanes=d.childLanes&~_,f.memoizedState=vy,T):(_=fP(d,f,T.children,_),f.memoizedState=null,_)}function Tb(d,f){return f=Fy({mode:"visible",children:f},d.mode,0,null),f.return=d,d.child=f}function fP(d,f,_,T){var I=d.child;return d=I.sibling,_=tl(I,{mode:"visible",children:_}),!(f.mode&1)&&(_.lanes=T),_.return=f,_.sibling=null,d!==null&&(T=f.deletions,T===null?(f.deletions=[d],f.flags|=16):T.push(d)),f.child=_}function pP(d,f,_,T,I){var k=f.mode;d=d.child;var Y=d.sibling,ee={mode:"hidden",children:_};return!(k&1)&&f.child!==d?(_=f.child,_.childLanes=0,_.pendingProps=ee,f.deletions=null):(_=tl(d,ee),_.subtreeFlags=d.subtreeFlags&14680064),Y!==null?T=tl(Y,T):(T=zc(T,k,I,null),T.flags|=2),T.return=f,_.return=f,_.sibling=T,f.child=_,T}function _y(d,f,_,T){return T!==null&&cb(T),bh(f,d.child,null,_),d=Tb(f,f.pendingProps.children),d.flags|=2,f.memoizedState=null,d}function mP(d,f,_){d.lanes|=f;var T=d.alternate;T!==null&&(T.lanes|=f),Ka(d.return,f,_)}function Eb(d,f,_,T,I){var k=d.memoizedState;k===null?d.memoizedState={isBackwards:f,rendering:null,renderingStartTime:0,last:T,tail:_,tailMode:I}:(k.isBackwards=f,k.rendering=null,k.renderingStartTime=0,k.last=T,k.tail=_,k.tailMode=I)}function gP(d,f,_){var T=f.pendingProps,I=T.revealOrder,k=T.tail;if(Ar(d,f,T.children,_),T=Hn.current,T&2)T=T&1|2,f.flags|=128;else{if(d!==null&&d.flags&128)e:for(d=f.child;d!==null;){if(d.tag===13)d.memoizedState!==null&&mP(d,_,f);else if(d.tag===19)mP(d,_,f);else if(d.child!==null){d.child.return=d,d=d.child;continue}if(d===f)break e;for(;d.sibling===null;){if(d.return===null||d.return===f)break e;d=d.return}d.sibling.return=d.return,d=d.sibling}T&=1}if(dt(Hn,T),!(f.mode&1))f.memoizedState=null;else switch(I){case"forwards":for(_=f.child,I=null;_!==null;)d=_.alternate,d!==null&&ly(d)===null&&(I=_),_=_.sibling;_=I,_===null?(I=f.child,f.child=null):(I=_.sibling,_.sibling=null),Eb(f,!1,I,_,k);break;case"backwards":for(_=null,I=f.child,f.child=null;I!==null;){if(d=I.alternate,d!==null&&ly(d)===null){f.child=I;break}d=I.sibling,I.sibling=_,_=I,I=d}Eb(f,!0,_,null,k);break;case"together":Eb(f,!1,null,null,void 0);break;default:f.memoizedState=null}return f.child}function ra(d,f,_){if(d!==null&&(f.dependencies=d.dependencies),Ah|=f.lanes,!(_&f.childLanes))return null;if(d!==null&&f.child!==d.child)throw Error(o(153));if(f.child!==null){for(d=f.child,_=tl(d,d.pendingProps),f.child=_,_.return=f;d.sibling!==null;)d=d.sibling,_=_.sibling=tl(d,d.pendingProps),_.return=f;_.sibling=null}return f.child}function y6(d,f,_){switch(f.tag){case 3:uP(f),wh();break;case 5:NI(f);break;case 1:un(f.type)&&Dn(f);break;case 4:ub(f,f.stateNode.containerInfo);break;case 10:Nc(f,f.type._context,f.memoizedProps.value);break;case 13:var T=f.memoizedState;if(T!==null)return T.dehydrated!==null?(dt(Hn,Hn.current&1),f.flags|=128,null):_&f.child.childLanes?dP(d,f,_):(dt(Hn,Hn.current&1),d=ra(d,f,_),d!==null?d.sibling:null);dt(Hn,Hn.current&1);break;case 19:if(T=(_&f.childLanes)!==0,d.flags&128){if(T)return gP(d,f,_);f.flags|=128}var I=f.memoizedState;if(I!==null&&(I.rendering=null,I.tail=null,I.lastEffect=null),dt(Hn,Hn.current),T)break;return null;case 22:case 23:return f.lanes=0,aP(d,f,_)}return ra(d,f,_)}function v6(d,f){switch(hi(f),f.tag){case 1:return un(f.type)&&en(),d=f.flags,d&65536?(f.flags=d&-65537|128,f):null;case 3:return Th(),He(Kt),He(Wt),fb(),d=f.flags,d&65536&&!(d&128)?(f.flags=d&-65537|128,f):null;case 5:return hb(f),null;case 13:if(He(Hn),d=f.memoizedState,d!==null&&d.dehydrated!==null){if(f.alternate===null)throw Error(o(340));wh()}return d=f.flags,d&65536?(f.flags=d&-65537|128,f):null;case 19:return He(Hn),null;case 4:return Th(),null;case 10:return gh(f.type._context),null;case 22:case 23:return Hb(),null;case 24:return null;default:return null}}var wy=!1,Uc=!1,x6=typeof WeakSet=="function"?WeakSet:Set,Qe=null;function by(d,f){var _=d.ref;if(_!==null)if(typeof _=="function")try{_(null)}catch(T){zr(d,f,T)}else _.current=null}function Cb(d,f,_){try{_()}catch(T){zr(d,f,T)}}var yP=!1;function _6(d,f){for(Q(d.containerInfo),Qe=f;Qe!==null;)if(d=Qe,f=d.child,(d.subtreeFlags&1028)!==0&&f!==null)f.return=d,Qe=f;else for(;Qe!==null;){d=Qe;try{var _=d.alternate;if(d.flags&1024)switch(d.tag){case 0:case 11:case 15:break;case 1:if(_!==null){var T=_.memoizedProps,I=_.memoizedState,k=d.stateNode,Y=k.getSnapshotBeforeUpdate(d.elementType===d.type?T:ni(d.type,T),I);k.__reactInternalSnapshotBeforeUpdate=Y}break;case 3:Je&&Te(d.stateNode.containerInfo);break;case 5:case 6:case 4:case 17:break;default:throw Error(o(163))}}catch(ee){zr(d,d.return,ee)}if(f=d.sibling,f!==null){f.return=d.return,Qe=f;break}Qe=d.return}return _=yP,yP=!1,_}function jc(d,f,_){var T=f.updateQueue;if(T=T!==null?T.lastEffect:null,T!==null){var I=T=T.next;do{if((I.tag&d)===d){var k=I.destroy;I.destroy=void 0,k!==void 0&&Cb(f,_,k)}I=I.next}while(I!==T)}}function Yf(d,f){if(f=f.updateQueue,f=f!==null?f.lastEffect:null,f!==null){var _=f=f.next;do{if((_.tag&d)===d){var T=_.create;_.destroy=T()}_=_.next}while(_!==f)}}function Ab(d){var f=d.ref;if(f!==null){var _=d.stateNode;switch(d.tag){case 5:d=he(_);break;default:d=_}typeof f=="function"?f(d):f.current=d}}function vP(d,f,_){if(ss&&typeof ss.onCommitFiberUnmount=="function")try{ss.onCommitFiberUnmount(Zo,f)}catch{}switch(f.tag){case 0:case 11:case 14:case 15:if(d=f.updateQueue,d!==null&&(d=d.lastEffect,d!==null)){var T=d=d.next;do{var I=T,k=I.destroy;I=I.tag,k!==void 0&&(I&2||I&4)&&Cb(f,_,k),T=T.next}while(T!==d)}break;case 1:if(by(f,_),d=f.stateNode,typeof d.componentWillUnmount=="function")try{d.props=f.memoizedProps,d.state=f.memoizedState,d.componentWillUnmount()}catch(Y){zr(f,_,Y)}break;case 5:by(f,_);break;case 4:Je?TP(d,f,_):Ce&&Ce&&(f=f.stateNode.containerInfo,_=ze(f),Yn(f,_))}}function xP(d,f,_){for(var T=f;;)if(vP(d,T,_),T.child===null||Je&&T.tag===4){if(T===f)break;for(;T.sibling===null;){if(T.return===null||T.return===f)return;T=T.return}T.sibling.return=T.return,T=T.sibling}else T.child.return=T,T=T.child}function _P(d){var f=d.alternate;f!==null&&(d.alternate=null,_P(f)),d.child=null,d.deletions=null,d.sibling=null,d.tag===5&&(f=d.stateNode,f!==null&&qe(f)),d.stateNode=null,d.return=null,d.dependencies=null,d.memoizedProps=null,d.memoizedState=null,d.pendingProps=null,d.stateNode=null,d.updateQueue=null}function wP(d){return d.tag===5||d.tag===3||d.tag===4}function bP(d){e:for(;;){for(;d.sibling===null;){if(d.return===null||wP(d.return))return null;d=d.return}for(d.sibling.return=d.return,d=d.sibling;d.tag!==5&&d.tag!==6&&d.tag!==18;){if(d.flags&2||d.child===null||d.tag===4)continue e;d.child.return=d,d=d.child}if(!(d.flags&2))return d.stateNode}}function SP(d){if(Je){e:{for(var f=d.return;f!==null;){if(wP(f))break e;f=f.return}throw Error(o(160))}var _=f;switch(_.tag){case 5:f=_.stateNode,_.flags&32&&(Nt(f),_.flags&=-33),_=bP(d),Ib(d,_,f);break;case 3:case 4:f=_.stateNode.containerInfo,_=bP(d),Mb(d,_,f);break;default:throw Error(o(161))}}}function Mb(d,f,_){var T=d.tag;if(T===5||T===6)d=d.stateNode,f?Tt(_,d,f):tt(_,d);else if(T!==4&&(d=d.child,d!==null))for(Mb(d,f,_),d=d.sibling;d!==null;)Mb(d,f,_),d=d.sibling}function Ib(d,f,_){var T=d.tag;if(T===5||T===6)d=d.stateNode,f?wt(_,d,f):We(_,d);else if(T!==4&&(d=d.child,d!==null))for(Ib(d,f,_),d=d.sibling;d!==null;)Ib(d,f,_),d=d.sibling}function TP(d,f,_){for(var T=f,I=!1,k,Y;;){if(!I){I=T.return;e:for(;;){if(I===null)throw Error(o(160));switch(k=I.stateNode,I.tag){case 5:Y=!1;break e;case 3:k=k.containerInfo,Y=!0;break e;case 4:k=k.containerInfo,Y=!0;break e}I=I.return}I=!0}if(T.tag===5||T.tag===6)xP(d,T,_),Y?Qt(k,T.stateNode):rt(k,T.stateNode);else if(T.tag===18)Y?Ec(k,T.stateNode):Tc(k,T.stateNode);else if(T.tag===4){if(T.child!==null){k=T.stateNode.containerInfo,Y=!0,T.child.return=T,T=T.child;continue}}else if(vP(d,T,_),T.child!==null){T.child.return=T,T=T.child;continue}if(T===f)break;for(;T.sibling===null;){if(T.return===null||T.return===f)return;T=T.return,T.tag===4&&(I=!1)}T.sibling.return=T.return,T=T.sibling}}function Pb(d,f){if(Je){switch(f.tag){case 0:case 11:case 14:case 15:jc(3,f,f.return),Yf(3,f),jc(5,f,f.return);return;case 1:return;case 5:var _=f.stateNode;if(_!=null){var T=f.memoizedProps;d=d!==null?d.memoizedProps:T;var I=f.type,k=f.updateQueue;f.updateQueue=null,k!==null&&nt(_,k,I,d,T,f)}return;case 6:if(f.stateNode===null)throw Error(o(162));_=f.memoizedProps,Gt(f.stateNode,d!==null?d.memoizedProps:_,_);return;case 3:Se&&d!==null&&d.memoizedState.isDehydrated&&Sc(f.stateNode.containerInfo);return;case 12:return;case 13:Sy(f);return;case 19:Sy(f);return;case 17:return}throw Error(o(163))}switch(f.tag){case 0:case 11:case 14:case 15:jc(3,f,f.return),Yf(3,f),jc(5,f,f.return);return;case 12:return;case 13:Sy(f);return;case 19:Sy(f);return;case 3:Se&&d!==null&&d.memoizedState.isDehydrated&&Sc(f.stateNode.containerInfo);break;case 22:case 23:return}e:if(Ce){switch(f.tag){case 1:case 5:case 6:break e;case 3:case 4:f=f.stateNode,Yn(f.containerInfo,f.pendingChildren);break e}throw Error(o(163))}}function Sy(d){var f=d.updateQueue;if(f!==null){d.updateQueue=null;var _=d.stateNode;_===null&&(_=d.stateNode=new x6),f.forEach(function(T){var I=P6.bind(null,d,T);_.has(T)||(_.add(T),T.then(I,I))})}}function w6(d,f){for(Qe=f;Qe!==null;){f=Qe;var _=f.deletions;if(_!==null)for(var T=0;T<_.length;T++){var I=_[T];try{var k=d;Je?TP(k,I,f):xP(k,I,f);var Y=I.alternate;Y!==null&&(Y.return=null),I.return=null}catch(mt){zr(I,f,mt)}}if(_=f.child,f.subtreeFlags&12854&&_!==null)_.return=f,Qe=_;else for(;Qe!==null;){f=Qe;try{var ee=f.flags;if(ee&32&&Je&&Nt(f.stateNode),ee&512){var we=f.alternate;if(we!==null){var je=we.ref;je!==null&&(typeof je=="function"?je(null):je.current=null)}}if(ee&8192)switch(f.tag){case 13:if(f.memoizedState!==null){var ut=f.alternate;(ut===null||ut.memoizedState===null)&&(Ub=ci())}break;case 22:var Ft=f.memoizedState!==null,bt=f.alternate,Nn=bt!==null&&bt.memoizedState!==null;if(_=f,Je){e:if(T=_,I=Ft,k=null,Je)for(var yt=T;;){if(yt.tag===5){if(k===null){k=yt;var sr=yt.stateNode;I?xn(sr):$e(yt.stateNode,yt.memoizedProps)}}else if(yt.tag===6){if(k===null){var ks=yt.stateNode;I?Z(ks):_e(ks,yt.memoizedProps)}}else if((yt.tag!==22&&yt.tag!==23||yt.memoizedState===null||yt===T)&&yt.child!==null){yt.child.return=yt,yt=yt.child;continue}if(yt===T)break;for(;yt.sibling===null;){if(yt.return===null||yt.return===T)break e;k===yt&&(k=null),yt=yt.return}k===yt&&(k=null),yt.sibling.return=yt.return,yt=yt.sibling}}if(Ft&&!Nn&&_.mode&1){Qe=_;for(var de=_.child;de!==null;){for(_=Qe=de;Qe!==null;){T=Qe;var ie=T.child;switch(T.tag){case 0:case 11:case 14:case 15:jc(4,T,T.return);break;case 1:by(T,T.return);var xe=T.stateNode;if(typeof xe.componentWillUnmount=="function"){var et=T.return;try{xe.props=T.memoizedProps,xe.state=T.memoizedState,xe.componentWillUnmount()}catch(mt){zr(T,et,mt)}}break;case 5:by(T,T.return);break;case 22:if(T.memoizedState!==null){AP(_);continue}}ie!==null?(ie.return=T,Qe=ie):AP(_)}de=de.sibling}}}switch(ee&4102){case 2:SP(f),f.flags&=-3;break;case 6:SP(f),f.flags&=-3,Pb(f.alternate,f);break;case 4096:f.flags&=-4097;break;case 4100:f.flags&=-4097,Pb(f.alternate,f);break;case 4:Pb(f.alternate,f)}}catch(mt){zr(f,f.return,mt)}if(_=f.sibling,_!==null){_.return=f.return,Qe=_;break}Qe=f.return}}}function b6(d,f,_){Qe=d,EP(d)}function EP(d,f,_){for(var T=(d.mode&1)!==0;Qe!==null;){var I=Qe,k=I.child;if(I.tag===22&&T){var Y=I.memoizedState!==null||wy;if(!Y){var ee=I.alternate,we=ee!==null&&ee.memoizedState!==null||Uc;ee=wy;var je=Uc;if(wy=Y,(Uc=we)&&!je)for(Qe=I;Qe!==null;)Y=Qe,we=Y.child,Y.tag===22&&Y.memoizedState!==null?MP(I):we!==null?(we.return=Y,Qe=we):MP(I);for(;k!==null;)Qe=k,EP(k),k=k.sibling;Qe=I,wy=ee,Uc=je}CP(d)}else I.subtreeFlags&8772&&k!==null?(k.return=I,Qe=k):CP(d)}}function CP(d){for(;Qe!==null;){var f=Qe;if(f.flags&8772){var _=f.alternate;try{if(f.flags&8772)switch(f.tag){case 0:case 11:case 15:Uc||Yf(5,f);break;case 1:var T=f.stateNode;if(f.flags&4&&!Uc)if(_===null)T.componentDidMount();else{var I=f.elementType===f.type?_.memoizedProps:ni(f.type,_.memoizedProps);T.componentDidUpdate(I,_.memoizedState,T.__reactInternalSnapshotBeforeUpdate)}var k=f.updateQueue;k!==null&&To(f,k,T);break;case 3:var Y=f.updateQueue;if(Y!==null){if(_=null,f.child!==null)switch(f.child.tag){case 5:_=he(f.child.stateNode);break;case 1:_=f.child.stateNode}To(f,Y,_)}break;case 5:var ee=f.stateNode;_===null&&f.flags&4&&Le(ee,f.type,f.memoizedProps,f);break;case 6:break;case 4:break;case 12:break;case 13:if(Se&&f.memoizedState===null){var we=f.alternate;if(we!==null){var je=we.memoizedState;if(je!==null){var ut=je.dehydrated;ut!==null&&uh(ut)}}}break;case 19:case 17:case 21:case 22:case 23:break;default:throw Error(o(163))}Uc||f.flags&512&&Ab(f)}catch(Ft){zr(f,f.return,Ft)}}if(f===d){Qe=null;break}if(_=f.sibling,_!==null){_.return=f.return,Qe=_;break}Qe=f.return}}function AP(d){for(;Qe!==null;){var f=Qe;if(f===d){Qe=null;break}var _=f.sibling;if(_!==null){_.return=f.return,Qe=_;break}Qe=f.return}}function MP(d){for(;Qe!==null;){var f=Qe;try{switch(f.tag){case 0:case 11:case 15:var _=f.return;try{Yf(4,f)}catch(we){zr(f,_,we)}break;case 1:var T=f.stateNode;if(typeof T.componentDidMount=="function"){var I=f.return;try{T.componentDidMount()}catch(we){zr(f,I,we)}}var k=f.return;try{Ab(f)}catch(we){zr(f,k,we)}break;case 5:var Y=f.return;try{Ab(f)}catch(we){zr(f,Y,we)}}}catch(we){zr(f,f.return,we)}if(f===d){Qe=null;break}var ee=f.sibling;if(ee!==null){ee.return=f.return,Qe=ee;break}Qe=f.return}}var Ty=0,Ey=1,Cy=2,Ay=3,My=4;if(typeof Symbol=="function"&&Symbol.for){var Jf=Symbol.for;Ty=Jf("selector.component"),Ey=Jf("selector.has_pseudo_class"),Cy=Jf("selector.role"),Ay=Jf("selector.test_id"),My=Jf("selector.text")}function Rb(d){var f=X(d);if(f!=null){if(typeof f.memoizedProps["data-testname"]!="string")throw Error(o(364));return f}if(d=$(d),d===null)throw Error(o(362));return d.stateNode.current}function Nb(d,f){switch(f.$$typeof){case Ty:if(d.type===f.value)return!0;break;case Ey:e:{f=f.value,d=[d,0];for(var _=0;_<d.length;){var T=d[_++],I=d[_++],k=f[I];if(T.tag!==5||!be(T)){for(;k!=null&&Nb(T,k);)I++,k=f[I];if(I===f.length){f=!0;break e}else for(T=T.child;T!==null;)d.push(T,I),T=T.sibling}}f=!1}return f;case Cy:if(d.tag===5&&Pe(d.stateNode,f.value))return!0;break;case My:if((d.tag===5||d.tag===6)&&(d=ae(d),d!==null&&0<=d.indexOf(f.value)))return!0;break;case Ay:if(d.tag===5&&(d=d.memoizedProps["data-testname"],typeof d=="string"&&d.toLowerCase()===f.value.toLowerCase()))return!0;break;default:throw Error(o(365))}return!1}function Db(d){switch(d.$$typeof){case Ty:return"<"+(N(d.value)||"Unknown")+">";case Ey:return":has("+(Db(d)||"")+")";case Cy:return'[role="'+d.value+'"]';case My:return'"'+d.value+'"';case Ay:return'[data-testname="'+d.value+'"]';default:throw Error(o(365))}}function IP(d,f){var _=[];d=[d,0];for(var T=0;T<d.length;){var I=d[T++],k=d[T++],Y=f[k];if(I.tag!==5||!be(I)){for(;Y!=null&&Nb(I,Y);)k++,Y=f[k];if(k===f.length)_.push(I);else for(I=I.child;I!==null;)d.push(I,k),I=I.sibling}}return _}function Lb(d,f){if(!Ve)throw Error(o(363));d=Rb(d),d=IP(d,f),f=[],d=Array.from(d);for(var _=0;_<d.length;){var T=d[_++];if(T.tag===5)be(T)||f.push(T.stateNode);else for(T=T.child;T!==null;)d.push(T),T=T.sibling}return f}var S6=Math.ceil,Iy=a.ReactCurrentDispatcher,kb=a.ReactCurrentOwner,ii=a.ReactCurrentBatchConfig,Jt=0,fi=null,pi=null,Hi=0,ds=0,Ch=vt(0),Ei=0,Qf=null,Ah=0,Py=0,Ob=0,Zf=null,Vr=null,Ub=0,jb=1/0;function Mh(){jb=ci()+500}var Ry=!1,Fb=null,Ja=null,Ny=!1,Qa=null,Dy=0,ep=0,Vb=null,Ly=-1,ky=0;function Mr(){return Jt&6?ci():Ly!==-1?Ly:Ly=ci()}function Za(d){return d.mode&1?Jt&2&&Hi!==0?Hi&-Hi:sy.transition!==null?(ky===0&&(d=Vn,Vn<<=1,!(Vn&4194240)&&(Vn=64),ky=d),ky):(d=an,d!==0?d:Ne()):1}function Ds(d,f,_){if(50<ep)throw ep=0,Vb=null,Error(o(185));var T=Oy(d,f);return T===null?null:(Cc(T,f,_),(!(Jt&2)||T!==fi)&&(T===fi&&(!(Jt&2)&&(Py|=f),Ei===4&&el(T,Hi)),Br(T,_),f===1&&Jt===0&&!(d.mode&1)&&(Mh(),Rn&&ls())),T)}function Oy(d,f){d.lanes|=f;var _=d.alternate;for(_!==null&&(_.lanes|=f),_=d,d=d.return;d!==null;)d.childLanes|=f,_=d.alternate,_!==null&&(_.childLanes|=f),_=d,d=d.return;return _.tag===3?_.stateNode:null}function Br(d,f){var _=d.callbackNode;ib(d,f);var T=hh(d,d===fi?Hi:0);if(T===0)_!==null&&Qo(_),d.callbackNode=null,d.callbackPriority=0;else if(f=T&-T,d.callbackPriority!==f){if(_!=null&&Qo(_),f===1)d.tag===0?ry(RP.bind(null,d)):iy(RP.bind(null,d)),Ue?gt(function(){Jt===0&&ls()}):dh(Is,ls),_=null;else{switch(Df(T)){case 1:_=Is;break;case 4:_=ob;break;case 16:_=Lf;break;case 536870912:_=fh;break;default:_=Lf}_=VP(_,PP.bind(null,d))}d.callbackPriority=f,d.callbackNode=_}}function PP(d,f){if(Ly=-1,ky=0,Jt&6)throw Error(o(327));var _=d.callbackNode;if(Bc()&&d.callbackNode!==_)return null;var T=hh(d,d===fi?Hi:0);if(T===0)return null;if(T&30||T&d.expiredLanes||f)f=Uy(d,T);else{f=T;var I=Jt;Jt|=2;var k=LP();(fi!==d||Hi!==f)&&(Mh(),Fc(d,f));do try{C6();break}catch(ee){DP(d,ee)}while(!0);Rc(),Iy.current=k,Jt=I,pi!==null?f=0:(fi=null,Hi=0,f=Ei)}if(f!==0){if(f===2&&(I=Rf(d),I!==0&&(T=I,f=Bb(d,I))),f===1)throw _=Qf,Fc(d,0),el(d,T),Br(d,ci()),_;if(f===6)el(d,T);else{if(I=d.current.alternate,!(T&30)&&!T6(I)&&(f=Uy(d,T),f===2&&(k=Rf(d),k!==0&&(T=k,f=Bb(d,k))),f===1))throw _=Qf,Fc(d,0),el(d,T),Br(d,ci()),_;switch(d.finishedWork=I,d.finishedLanes=T,f){case 0:case 1:throw Error(o(345));case 2:Vc(d,Vr);break;case 3:if(el(d,T),(T&130023424)===T&&(f=Ub+500-ci(),10<f)){if(hh(d,0)!==0)break;if(I=d.suspendedLanes,(I&T)!==T){Mr(),d.pingedLanes|=d.suspendedLanes&I;break}d.timeoutHandle=Me(Vc.bind(null,d,Vr),f);break}Vc(d,Vr);break;case 4:if(el(d,T),(T&4194240)===T)break;for(f=d.eventTimes,I=-1;0<T;){var Y=31-qt(T);k=1<<Y,Y=f[Y],Y>I&&(I=Y),T&=~k}if(T=I,T=ci()-T,T=(120>T?120:480>T?480:1080>T?1080:1920>T?1920:3e3>T?3e3:4320>T?4320:1960*S6(T/1960))-T,10<T){d.timeoutHandle=Me(Vc.bind(null,d,Vr),T);break}Vc(d,Vr);break;case 5:Vc(d,Vr);break;default:throw Error(o(329))}}}return Br(d,ci()),d.callbackNode===_?PP.bind(null,d):null}function Bb(d,f){var _=Zf;return d.current.memoizedState.isDehydrated&&(Fc(d,f).flags|=256),d=Uy(d,f),d!==2&&(f=Vr,Vr=_,f!==null&&zb(f)),d}function zb(d){Vr===null?Vr=d:Vr.push.apply(Vr,d)}function T6(d){for(var f=d;;){if(f.flags&16384){var _=f.updateQueue;if(_!==null&&(_=_.stores,_!==null))for(var T=0;T<_.length;T++){var I=_[T],k=I.getSnapshot;I=I.value;try{if(!os(k(),I))return!1}catch{return!1}}}if(_=f.child,f.subtreeFlags&16384&&_!==null)_.return=f,f=_;else{if(f===d)break;for(;f.sibling===null;){if(f.return===null||f.return===d)return!0;f=f.return}f.sibling.return=f.return,f=f.sibling}}return!0}function el(d,f){for(f&=~Ob,f&=~Py,d.suspendedLanes|=f,d.pingedLanes&=~f,d=d.expirationTimes;0<f;){var _=31-qt(f),T=1<<_;d[_]=-1,f&=~T}}function RP(d){if(Jt&6)throw Error(o(327));Bc();var f=hh(d,0);if(!(f&1))return Br(d,ci()),null;var _=Uy(d,f);if(d.tag!==0&&_===2){var T=Rf(d);T!==0&&(f=T,_=Bb(d,T))}if(_===1)throw _=Qf,Fc(d,0),el(d,f),Br(d,ci()),_;if(_===6)throw Error(o(345));return d.finishedWork=d.current.alternate,d.finishedLanes=f,Vc(d,Vr),Br(d,ci()),null}function NP(d){Qa!==null&&Qa.tag===0&&!(Jt&6)&&Bc();var f=Jt;Jt|=1;var _=ii.transition,T=an;try{if(ii.transition=null,an=1,d)return d()}finally{an=T,ii.transition=_,Jt=f,!(Jt&6)&&ls()}}function Hb(){ds=Ch.current,He(Ch)}function Fc(d,f){d.finishedWork=null,d.finishedLanes=0;var _=d.timeoutHandle;if(_!==zt&&(d.timeoutHandle=zt,ht(_)),pi!==null)for(_=pi.return;_!==null;){var T=_;switch(hi(T),T.tag){case 1:T=T.type.childContextTypes,T!=null&&en();break;case 3:Th(),He(Kt),He(Wt),fb();break;case 5:hb(T);break;case 4:Th();break;case 13:He(Hn);break;case 19:He(Hn);break;case 10:gh(T.type._context);break;case 22:case 23:Hb()}_=_.return}if(fi=d,pi=d=tl(d.current,null),Hi=ds=f,Ei=0,Qf=null,Ob=Py=Ah=0,Vr=Zf=null,er!==null){for(f=0;f<er.length;f++)if(_=er[f],T=_.interleaved,T!==null){_.interleaved=null;var I=T.next,k=_.pending;if(k!==null){var Y=k.next;k.next=I,T.next=Y}_.pending=T}er=null}return d}function DP(d,f){do{var _=pi;try{if(Rc(),cy.current=my,uy){for(var T=Jn.memoizedState;T!==null;){var I=T.queue;I!==null&&(I.pending=null),T=T.next}uy=!1}if(Eh=0,Di=nr=Jn=null,Hf=!1,Gf=0,kb.current=null,_===null||_.return===null){Ei=1,Qf=f,pi=null;break}e:{var k=d,Y=_.return,ee=_,we=f;if(f=Hi,ee.flags|=32768,we!==null&&typeof we=="object"&&typeof we.then=="function"){var je=we,ut=ee,Ft=ut.tag;if(!(ut.mode&1)&&(Ft===0||Ft===11||Ft===15)){var bt=ut.alternate;bt?(ut.updateQueue=bt.updateQueue,ut.memoizedState=bt.memoizedState,ut.lanes=bt.lanes):(ut.updateQueue=null,ut.memoizedState=null)}var Nn=eP(Y);if(Nn!==null){Nn.flags&=-257,tP(Nn,Y,ee,k,f),Nn.mode&1&&ZI(k,je,f),f=Nn,we=je;var yt=f.updateQueue;if(yt===null){var sr=new Set;sr.add(we),f.updateQueue=sr}else yt.add(we);break e}else{if(!(f&1)){ZI(k,je,f),Gb();break e}we=Error(o(426))}}else if(rn&&ee.mode&1){var ks=eP(Y);if(ks!==null){!(ks.flags&65536)&&(ks.flags|=256),tP(ks,Y,ee,k,f),cb(we);break e}}k=we,Ei!==4&&(Ei=2),Zf===null?Zf=[k]:Zf.push(k),we=_b(we,ee),ee=Y;do{switch(ee.tag){case 3:ee.flags|=65536,f&=-f,ee.lanes|=f;var de=JI(ee,we,f);Of(ee,de);break e;case 1:k=we;var ie=ee.type,xe=ee.stateNode;if(!(ee.flags&128)&&(typeof ie.getDerivedStateFromError=="function"||xe!==null&&typeof xe.componentDidCatch=="function"&&(Ja===null||!Ja.has(xe)))){ee.flags|=65536,f&=-f,ee.lanes|=f;var et=QI(ee,k,f);Of(ee,et);break e}}ee=ee.return}while(ee!==null)}OP(_)}catch(mt){f=mt,pi===_&&_!==null&&(pi=_=_.return);continue}break}while(!0)}function LP(){var d=Iy.current;return Iy.current=my,d===null?my:d}function Gb(){(Ei===0||Ei===3||Ei===2)&&(Ei=4),fi===null||!(Ah&268435455)&&!(Py&268435455)||el(fi,Hi)}function Uy(d,f){var _=Jt;Jt|=2;var T=LP();fi===d&&Hi===f||Fc(d,f);do try{E6();break}catch(I){DP(d,I)}while(!0);if(Rc(),Jt=_,Iy.current=T,pi!==null)throw Error(o(261));return fi=null,Hi=0,Ei}function E6(){for(;pi!==null;)kP(pi)}function C6(){for(;pi!==null&&!rb();)kP(pi)}function kP(d){var f=FP(d.alternate,d,ds);d.memoizedProps=d.pendingProps,f===null?OP(d):pi=f,kb.current=null}function OP(d){var f=d;do{var _=f.alternate;if(d=f.return,f.flags&32768){if(_=v6(_,f),_!==null){_.flags&=32767,pi=_;return}if(d!==null)d.flags|=32768,d.subtreeFlags=0,d.deletions=null;else{Ei=6,pi=null;return}}else if(_=m6(_,f,ds),_!==null){pi=_;return}if(f=f.sibling,f!==null){pi=f;return}pi=f=d}while(f!==null);Ei===0&&(Ei=5)}function Vc(d,f){var _=an,T=ii.transition;try{ii.transition=null,an=1,A6(d,f,_)}finally{ii.transition=T,an=_}return null}function A6(d,f,_){do Bc();while(Qa!==null);if(Jt&6)throw Error(o(327));var T=d.finishedWork,I=d.finishedLanes;if(T===null)return null;if(d.finishedWork=null,d.finishedLanes=0,T===d.current)throw Error(o(177));d.callbackNode=null,d.callbackPriority=0;var k=T.lanes|T.childLanes;if(Ac(d,k),d===fi&&(pi=fi=null,Hi=0),!(T.subtreeFlags&2064)&&!(T.flags&2064)||Ny||(Ny=!0,VP(Lf,function(){return Bc(),null})),k=(T.flags&15990)!==0,T.subtreeFlags&15990||k){k=ii.transition,ii.transition=null;var Y=an;an=1;var ee=Jt;Jt|=4,kb.current=null,_6(d,T),w6(d,T),j(d.containerInfo),d.current=T,b6(T),sb(),Jt=ee,an=Y,ii.transition=k}else d.current=T;if(Ny&&(Ny=!1,Qa=d,Dy=I),k=d.pendingLanes,k===0&&(Ja=null),Mc(T.stateNode),Br(d,ci()),f!==null)for(_=d.onRecoverableError,T=0;T<f.length;T++)_(f[T]);if(Ry)throw Ry=!1,d=Fb,Fb=null,d;return Dy&1&&d.tag!==0&&Bc(),k=d.pendingLanes,k&1?d===Vb?ep++:(ep=0,Vb=d):ep=0,ls(),null}function Bc(){if(Qa!==null){var d=Df(Dy),f=ii.transition,_=an;try{if(ii.transition=null,an=16>d?16:d,Qa===null)var T=!1;else{if(d=Qa,Qa=null,Dy=0,Jt&6)throw Error(o(331));var I=Jt;for(Jt|=4,Qe=d.current;Qe!==null;){var k=Qe,Y=k.child;if(Qe.flags&16){var ee=k.deletions;if(ee!==null){for(var we=0;we<ee.length;we++){var je=ee[we];for(Qe=je;Qe!==null;){var ut=Qe;switch(ut.tag){case 0:case 11:case 15:jc(8,ut,k)}var Ft=ut.child;if(Ft!==null)Ft.return=ut,Qe=Ft;else for(;Qe!==null;){ut=Qe;var bt=ut.sibling,Nn=ut.return;if(_P(ut),ut===je){Qe=null;break}if(bt!==null){bt.return=Nn,Qe=bt;break}Qe=Nn}}}var yt=k.alternate;if(yt!==null){var sr=yt.child;if(sr!==null){yt.child=null;do{var ks=sr.sibling;sr.sibling=null,sr=ks}while(sr!==null)}}Qe=k}}if(k.subtreeFlags&2064&&Y!==null)Y.return=k,Qe=Y;else e:for(;Qe!==null;){if(k=Qe,k.flags&2048)switch(k.tag){case 0:case 11:case 15:jc(9,k,k.return)}var de=k.sibling;if(de!==null){de.return=k.return,Qe=de;break e}Qe=k.return}}var ie=d.current;for(Qe=ie;Qe!==null;){Y=Qe;var xe=Y.child;if(Y.subtreeFlags&2064&&xe!==null)xe.return=Y,Qe=xe;else e:for(Y=ie;Qe!==null;){if(ee=Qe,ee.flags&2048)try{switch(ee.tag){case 0:case 11:case 15:Yf(9,ee)}}catch(mt){zr(ee,ee.return,mt)}if(ee===Y){Qe=null;break e}var et=ee.sibling;if(et!==null){et.return=ee.return,Qe=et;break e}Qe=ee.return}}if(Jt=I,ls(),ss&&typeof ss.onPostCommitFiberRoot=="function")try{ss.onPostCommitFiberRoot(Zo,d)}catch{}T=!0}return T}finally{an=_,ii.transition=f}}return!1}function UP(d,f,_){f=_b(_,f),f=JI(d,f,1),Zs(d,f),f=Mr(),d=Oy(d,1),d!==null&&(Cc(d,1,f),Br(d,f))}function zr(d,f,_){if(d.tag===3)UP(d,d,_);else for(;f!==null;){if(f.tag===3){UP(f,d,_);break}else if(f.tag===1){var T=f.stateNode;if(typeof f.type.getDerivedStateFromError=="function"||typeof T.componentDidCatch=="function"&&(Ja===null||!Ja.has(T))){d=_b(_,d),d=QI(f,d,1),Zs(f,d),d=Mr(),f=Oy(f,1),f!==null&&(Cc(f,1,d),Br(f,d));break}}f=f.return}}function M6(d,f,_){var T=d.pingCache;T!==null&&T.delete(f),f=Mr(),d.pingedLanes|=d.suspendedLanes&_,fi===d&&(Hi&_)===_&&(Ei===4||Ei===3&&(Hi&130023424)===Hi&&500>ci()-Ub?Fc(d,0):Ob|=_),Br(d,f)}function jP(d,f){f===0&&(d.mode&1?(f=Fr,Fr<<=1,!(Fr&130023424)&&(Fr=4194304)):f=1);var _=Mr();d=Oy(d,f),d!==null&&(Cc(d,f,_),Br(d,_))}function I6(d){var f=d.memoizedState,_=0;f!==null&&(_=f.retryLane),jP(d,_)}function P6(d,f){var _=0;switch(d.tag){case 13:var T=d.stateNode,I=d.memoizedState;I!==null&&(_=I.retryLane);break;case 19:T=d.stateNode;break;default:throw Error(o(314))}T!==null&&T.delete(f),jP(d,_)}var FP;FP=function(d,f,_){if(d!==null)if(d.memoizedProps!==f.pendingProps||Kt.current)hs=!0;else{if(!(d.lanes&_)&&!(f.flags&128))return hs=!1,y6(d,f,_);hs=!!(d.flags&131072)}else hs=!1,rn&&f.flags&1048576&&ui(f,R,f.index);switch(f.lanes=0,f.tag){case 2:var T=f.type;d!==null&&(d.alternate=null,f.alternate=null,f.flags|=2),d=f.pendingProps;var I=pt(f,Wt.current);Ya(f,_),I=mb(null,f,T,d,I,_);var k=gb();return f.flags|=1,typeof I=="object"&&I!==null&&typeof I.render=="function"&&I.$$typeof===void 0?(f.tag=1,f.memoizedState=null,f.updateQueue=null,un(T)?(k=!0,Dn(f)):k=!1,f.memoizedState=I.state!==null&&I.state!==void 0?I.state:null,yh(f),I.updater=Lc,f.stateNode=I,I._reactInternals=f,_h(f,T,d,_),f=Sb(null,f,T,!0,k,_)):(f.tag=0,rn&&k&&nn(f),Ar(null,f,I,_),f=f.child),f;case 16:T=f.elementType;e:{switch(d!==null&&(d.alternate=null,f.alternate=null,f.flags|=2),d=f.pendingProps,I=T._init,T=I(T._payload),f.type=T,I=f.tag=N6(T),d=ni(T,d),I){case 0:f=bb(null,f,T,d,_);break e;case 1:f=cP(null,f,T,d,_);break e;case 11:f=rP(null,f,T,d,_);break e;case 14:f=sP(null,f,T,ni(T.type,d),_);break e}throw Error(o(306,T,""))}return f;case 0:return T=f.type,I=f.pendingProps,I=f.elementType===T?I:ni(T,I),bb(d,f,T,I,_);case 1:return T=f.type,I=f.pendingProps,I=f.elementType===T?I:ni(T,I),cP(d,f,T,I,_);case 3:e:{if(uP(f),d===null)throw Error(o(387));T=f.pendingProps,k=f.memoizedState,I=k.element,vh(d,f),Dc(f,T,null,_);var Y=f.memoizedState;if(T=Y.element,Se&&k.isDehydrated)if(k={element:T,isDehydrated:!1,cache:Y.cache,transitions:Y.transitions},f.updateQueue.baseState=k,f.memoizedState=k,f.flags&256){I=Error(o(423)),f=hP(d,f,T,_,I);break e}else if(T!==I){I=Error(o(424)),f=hP(d,f,T,_,I);break e}else for(Se&&(di=ch(f.stateNode.containerInfo),Sn=f,rn=!0,Cr=null,Eo=!1),_=RI(f,null,T,_),f.child=_;_;)_.flags=_.flags&-3|4096,_=_.sibling;else{if(wh(),T===I){f=ra(d,f,_);break e}Ar(d,f,T,_)}f=f.child}return f;case 5:return NI(f),d===null&&lb(f),T=f.type,I=f.pendingProps,k=d!==null?d.memoizedProps:null,Y=I.children,ye(T,I)?Y=null:k!==null&&ye(T,k)&&(f.flags|=32),lP(d,f),Ar(d,f,Y,_),f.child;case 6:return d===null&&lb(f),null;case 13:return dP(d,f,_);case 4:return ub(f,f.stateNode.containerInfo),T=f.pendingProps,d===null?f.child=bh(f,null,T,_):Ar(d,f,T,_),f.child;case 11:return T=f.type,I=f.pendingProps,I=f.elementType===T?I:ni(T,I),rP(d,f,T,I,_);case 7:return Ar(d,f,f.pendingProps,_),f.child;case 8:return Ar(d,f,f.pendingProps.children,_),f.child;case 12:return Ar(d,f,f.pendingProps.children,_),f.child;case 10:e:{if(T=f.type._context,I=f.pendingProps,k=f.memoizedProps,Y=I.value,Nc(f,T,Y),k!==null)if(os(k.value,Y)){if(k.children===I.children&&!Kt.current){f=ra(d,f,_);break e}}else for(k=f.child,k!==null&&(k.return=f);k!==null;){var ee=k.dependencies;if(ee!==null){Y=k.child;for(var we=ee.firstContext;we!==null;){if(we.context===T){if(k.tag===1){we=cs(-1,_&-_),we.tag=2;var je=k.updateQueue;if(je!==null){je=je.shared;var ut=je.pending;ut===null?we.next=we:(we.next=ut.next,ut.next=we),je.pending=we}}k.lanes|=_,we=k.alternate,we!==null&&(we.lanes|=_),Ka(k.return,_,f),ee.lanes|=_;break}we=we.next}}else if(k.tag===10)Y=k.type===f.type?null:k.child;else if(k.tag===18){if(Y=k.return,Y===null)throw Error(o(341));Y.lanes|=_,ee=Y.alternate,ee!==null&&(ee.lanes|=_),Ka(Y,_,f),Y=k.sibling}else Y=k.child;if(Y!==null)Y.return=k;else for(Y=k;Y!==null;){if(Y===f){Y=null;break}if(k=Y.sibling,k!==null){k.return=Y.return,Y=k;break}Y=Y.return}k=Y}Ar(d,f,I.children,_),f=f.child}return f;case 9:return I=f.type,T=f.pendingProps.children,Ya(f,_),I=Er(I),T=T(I),f.flags|=1,Ar(d,f,T,_),f.child;case 14:return T=f.type,I=ni(T,f.pendingProps),I=ni(T.type,I),sP(d,f,T,I,_);case 15:return oP(d,f,f.type,f.pendingProps,_);case 17:return T=f.type,I=f.pendingProps,I=f.elementType===T?I:ni(T,I),d!==null&&(d.alternate=null,f.alternate=null,f.flags|=2),f.tag=1,un(T)?(d=!0,Dn(f)):d=!1,Ya(f,_),kc(f,T,I),_h(f,T,I,_),Sb(null,f,T,!0,d,_);case 19:return gP(d,f,_);case 22:return aP(d,f,_)}throw Error(o(156,f.tag))};function VP(d,f){return dh(d,f)}function R6(d,f,_,T){this.tag=d,this.key=_,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=f,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=T,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ls(d,f,_,T){return new R6(d,f,_,T)}function Wb(d){return d=d.prototype,!(!d||!d.isReactComponent)}function N6(d){if(typeof d=="function")return Wb(d)?1:0;if(d!=null){if(d=d.$$typeof,d===b)return 11;if(d===S)return 14}return 2}function tl(d,f){var _=d.alternate;return _===null?(_=Ls(d.tag,f,d.key,d.mode),_.elementType=d.elementType,_.type=d.type,_.stateNode=d.stateNode,_.alternate=d,d.alternate=_):(_.pendingProps=f,_.type=d.type,_.flags=0,_.subtreeFlags=0,_.deletions=null),_.flags=d.flags&14680064,_.childLanes=d.childLanes,_.lanes=d.lanes,_.child=d.child,_.memoizedProps=d.memoizedProps,_.memoizedState=d.memoizedState,_.updateQueue=d.updateQueue,f=d.dependencies,_.dependencies=f===null?null:{lanes:f.lanes,firstContext:f.firstContext},_.sibling=d.sibling,_.index=d.index,_.ref=d.ref,_}function jy(d,f,_,T,I,k){var Y=2;if(T=d,typeof d=="function")Wb(d)&&(Y=1);else if(typeof d=="string")Y=5;else e:switch(d){case u:return zc(_.children,I,k,f);case p:Y=8,I|=8;break;case m:return d=Ls(12,_,f,I|2),d.elementType=m,d.lanes=k,d;case w:return d=Ls(13,_,f,I),d.elementType=w,d.lanes=k,d;case v:return d=Ls(19,_,f,I),d.elementType=v,d.lanes=k,d;case C:return Fy(_,I,k,f);default:if(typeof d=="object"&&d!==null)switch(d.$$typeof){case g:Y=10;break e;case x:Y=9;break e;case b:Y=11;break e;case S:Y=14;break e;case E:Y=16,T=null;break e}throw Error(o(130,d==null?d:typeof d,""))}return f=Ls(Y,_,f,I),f.elementType=d,f.type=T,f.lanes=k,f}function zc(d,f,_,T){return d=Ls(7,d,T,f),d.lanes=_,d}function Fy(d,f,_,T){return d=Ls(22,d,T,f),d.elementType=C,d.lanes=_,d.stateNode={},d}function qb(d,f,_){return d=Ls(6,d,null,f),d.lanes=_,d}function $b(d,f,_){return f=Ls(4,d.children!==null?d.children:[],d.key,f),f.lanes=_,f.stateNode={containerInfo:d.containerInfo,pendingChildren:null,implementation:d.implementation},f}function D6(d,f,_,T,I){this.tag=f,this.containerInfo=d,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=zt,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Nf(0),this.expirationTimes=Nf(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Nf(0),this.identifierPrefix=T,this.onRecoverableError=I,Se&&(this.mutableSourceEagerHydrationData=null)}function BP(d,f,_,T,I,k,Y,ee,we){return d=new D6(d,f,_,ee,we),f===1?(f=1,k===!0&&(f|=8)):f=0,k=Ls(3,null,null,f),d.current=k,k.stateNode=d,k.memoizedState={element:T,isDehydrated:_,cache:null,transitions:null},yh(k),d}function zP(d){if(!d)return Ot;d=d._reactInternals;e:{if(A(d)!==d||d.tag!==1)throw Error(o(170));var f=d;do{switch(f.tag){case 3:f=f.stateNode.context;break e;case 1:if(un(f.type)){f=f.stateNode.__reactInternalMemoizedMergedChildContext;break e}}f=f.return}while(f!==null);throw Error(o(171))}if(d.tag===1){var _=d.type;if(un(_))return Js(d,_,f)}return f}function HP(d){var f=d._reactInternals;if(f===void 0)throw typeof d.render=="function"?Error(o(188)):(d=Object.keys(d).join(","),Error(o(268,d)));return d=z(f),d===null?null:d.stateNode}function GP(d,f){if(d=d.memoizedState,d!==null&&d.dehydrated!==null){var _=d.retryLane;d.retryLane=_!==0&&_<f?_:f}}function Xb(d,f){GP(d,f),(d=d.alternate)&&GP(d,f)}function L6(d){return d=z(d),d===null?null:d.stateNode}function k6(){return null}return t.attemptContinuousHydration=function(d){if(d.tag===13){var f=Mr();Ds(d,134217728,f),Xb(d,134217728)}},t.attemptHydrationAtCurrentPriority=function(d){if(d.tag===13){var f=Mr(),_=Za(d);Ds(d,_,f),Xb(d,_)}},t.attemptSynchronousHydration=function(d){switch(d.tag){case 3:var f=d.stateNode;if(f.current.memoizedState.isDehydrated){var _=Ti(f.pendingLanes);_!==0&&(Ms(f,_|1),Br(f,ci()),!(Jt&6)&&(Mh(),ls()))}break;case 13:var T=Mr();NP(function(){return Ds(d,1,T)}),Xb(d,1)}},t.batchedUpdates=function(d,f){var _=Jt;Jt|=1;try{return d(f)}finally{Jt=_,Jt===0&&(Mh(),Rn&&ls())}},t.createComponentSelector=function(d){return{$$typeof:Ty,value:d}},t.createContainer=function(d,f,_,T,I,k,Y){return BP(d,f,!1,null,_,T,I,k,Y)},t.createHasPseudoClassSelector=function(d){return{$$typeof:Ey,value:d}},t.createHydrationContainer=function(d,f,_,T,I,k,Y,ee,we){return d=BP(_,T,!0,d,I,k,Y,ee,we),d.context=zP(null),_=d.current,T=Mr(),I=Za(_),k=cs(T,I),k.callback=f??null,Zs(_,k),d.current.lanes=I,Cc(d,I,T),Br(d,T),d},t.createPortal=function(d,f,_){var T=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:c,key:T==null?null:""+T,children:d,containerInfo:f,implementation:_}},t.createRoleSelector=function(d){return{$$typeof:Cy,value:d}},t.createTestNameSelector=function(d){return{$$typeof:Ay,value:d}},t.createTextSelector=function(d){return{$$typeof:My,value:d}},t.deferredUpdates=function(d){var f=an,_=ii.transition;try{return ii.transition=null,an=16,d()}finally{an=f,ii.transition=_}},t.discreteUpdates=function(d,f,_,T,I){var k=an,Y=ii.transition;try{return ii.transition=null,an=1,d(f,_,T,I)}finally{an=k,ii.transition=Y,Jt===0&&Mh()}},t.findAllNodes=Lb,t.findBoundingRects=function(d,f){if(!Ve)throw Error(o(363));f=Lb(d,f),d=[];for(var _=0;_<f.length;_++)d.push(B(f[_]));for(f=d.length-1;0<f;f--){_=d[f];for(var T=_.x,I=T+_.width,k=_.y,Y=k+_.height,ee=f-1;0<=ee;ee--)if(f!==ee){var we=d[ee],je=we.x,ut=je+we.width,Ft=we.y,bt=Ft+we.height;if(T>=je&&k>=Ft&&I<=ut&&Y<=bt){d.splice(f,1);break}else if(T!==je||_.width!==we.width||bt<k||Ft>Y){if(!(k!==Ft||_.height!==we.height||ut<T||je>I)){je>T&&(we.width+=je-T,we.x=T),ut<I&&(we.width=I-je),d.splice(f,1);break}}else{Ft>k&&(we.height+=Ft-k,we.y=k),bt<Y&&(we.height=Y-Ft),d.splice(f,1);break}}}return d},t.findHostInstance=HP,t.findHostInstanceWithNoPortals=function(d){return d=D(d),d=d!==null?re(d):null,d===null?null:d.stateNode},t.findHostInstanceWithWarning=function(d){return HP(d)},t.flushControlled=function(d){var f=Jt;Jt|=1;var _=ii.transition,T=an;try{ii.transition=null,an=1,d()}finally{an=T,ii.transition=_,Jt=f,Jt===0&&(Mh(),ls())}},t.flushPassiveEffects=Bc,t.flushSync=NP,t.focusWithin=function(d,f){if(!Ve)throw Error(o(363));for(d=Rb(d),f=IP(d,f),f=Array.from(f),d=0;d<f.length;){var _=f[d++];if(!be(_)){if(_.tag===5&&ve(_.stateNode))return!0;for(_=_.child;_!==null;)f.push(_),_=_.sibling}}return!1},t.getCurrentUpdatePriority=function(){return an},t.getFindAllNodesFailureDescription=function(d,f){if(!Ve)throw Error(o(363));var _=0,T=[];d=[Rb(d),0];for(var I=0;I<d.length;){var k=d[I++],Y=d[I++],ee=f[Y];if((k.tag!==5||!be(k))&&(Nb(k,ee)&&(T.push(Db(ee)),Y++,Y>_&&(_=Y)),Y<f.length))for(k=k.child;k!==null;)d.push(k,Y),k=k.sibling}if(_<f.length){for(d=[];_<f.length;_++)d.push(Db(f[_]));return`findAllNodes was able to match part of the selector:
  `+(T.join(" > ")+`

No matching component was found for:
  `)+d.join(" > ")}return null},t.getPublicRootInstance=function(d){if(d=d.current,!d.child)return null;switch(d.child.tag){case 5:return he(d.child.stateNode);default:return d.child.stateNode}},t.injectIntoDevTools=function(d){if(d={bundleType:d.bundleType,version:d.version,rendererPackageName:d.rendererPackageName,rendererConfig:d.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:a.ReactCurrentDispatcher,findHostInstanceByFiber:L6,findFiberByHostInstance:d.findFiberByHostInstance||k6,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.0.0-fc46dba67-20220329"},typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")d=!1;else{var f=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(f.isDisabled||!f.supportsFiber)d=!0;else{try{Zo=f.inject(d),ss=f}catch{}d=!!f.checkDCE}}return d},t.isAlreadyRendering=function(){return!1},t.observeVisibleRects=function(d,f,_,T){if(!Ve)throw Error(o(363));d=Lb(d,f);var I=Fe(d,_,T).disconnect;return{disconnect:function(){I()}}},t.registerMutableSourceForHydration=function(d,f){var _=f._getVersion;_=_(f._source),d.mutableSourceEagerHydrationData==null?d.mutableSourceEagerHydrationData=[f,_]:d.mutableSourceEagerHydrationData.push(f,_)},t.runWithPriority=function(d,f){var _=an;try{return an=d,f()}finally{an=_}},t.shouldError=function(){return null},t.shouldSuspend=function(){return!1},t.updateContainer=function(d,f,_,T){var I=f.current,k=Mr(),Y=Za(I);return _=zP(_),f.context===null?f.context=_:f.pendingContext=_,f=cs(k,Y),f.payload={element:d},T=T===void 0?null:T,T!==null&&(f.callback=T),Zs(I,f),d=Ds(I,Y,k),d!==null&&ta(d,I,Y),Y},t};CB.exports=mse;var gse=CB.exports;const yse=Y1(gse),OM={},vse=n=>void Object.assign(OM,n);function xse(n,e){function t(u,{args:p=[],attach:m,...g},x){let b=`${u[0].toUpperCase()}${u.slice(1)}`,w;if(u==="primitive"){if(g.object===void 0)throw new Error("R3F: Primitives without 'object' are invalid!");const v=g.object;w=td(v,{type:u,root:x,attach:m,primitive:!0})}else{const v=OM[b];if(!v)throw new Error(`R3F: ${b} is not part of the THREE namespace! Did you forget to extend? See: https://docs.pmnd.rs/react-three-fiber/api/objects#using-3rd-party-objects-declaratively`);if(!Array.isArray(p))throw new Error("R3F: The args prop must be an array!");w=td(new v(...p),{type:u,root:x,attach:m,memoizedProps:{args:p}})}return w.__r3f.attach===void 0&&(w.isBufferGeometry?w.__r3f.attach="geometry":w.isMaterial&&(w.__r3f.attach="material")),b!=="inject"&&bT(w,g),w}function i(u,p){let m=!1;if(p){var g,x;(g=p.__r3f)!=null&&g.attach?wT(u,p,p.__r3f.attach):p.isObject3D&&u.isObject3D&&(u.add(p),m=!0),m||(x=u.__r3f)==null||x.objects.push(p),p.__r3f||td(p,{}),p.__r3f.parent=u,M1(p),nd(p)}}function r(u,p,m){let g=!1;if(p){var x,b;if((x=p.__r3f)!=null&&x.attach)wT(u,p,p.__r3f.attach);else if(p.isObject3D&&u.isObject3D){p.parent=u,p.dispatchEvent({type:"added"}),u.dispatchEvent({type:"childadded",child:p});const w=u.children.filter(S=>S!==p),v=w.indexOf(m);u.children=[...w.slice(0,v),p,...w.slice(v)],g=!0}g||(b=u.__r3f)==null||b.objects.push(p),p.__r3f||td(p,{}),p.__r3f.parent=u,M1(p),nd(p)}}function s(u,p,m=!1){u&&[...u].forEach(g=>o(p,g,m))}function o(u,p,m){if(p){var g,x,b;if(p.__r3f&&(p.__r3f.parent=null),(g=u.__r3f)!=null&&g.objects&&(u.__r3f.objects=u.__r3f.objects.filter(C=>C!==p)),(x=p.__r3f)!=null&&x.attach)kL(u,p,p.__r3f.attach);else if(p.isObject3D&&u.isObject3D){var w;u.remove(p),(w=p.__r3f)!=null&&w.root&&Cse(Lx(p),p)}const S=(b=p.__r3f)==null?void 0:b.primitive,E=!S&&(m===void 0?p.dispose!==null:m);if(!S){var v;s((v=p.__r3f)==null?void 0:v.objects,p,E),s(p.children,p,E)}if(delete p.__r3f,E&&p.dispose&&p.type!=="Scene"){const C=()=>{try{p.dispose()}catch{}};typeof IS_REACT_ACT_ENVIRONMENT>"u"?C1.unstable_scheduleCallback(C1.unstable_IdlePriority,C):C()}nd(u)}}function a(u,p,m,g){var x;const b=(x=u.__r3f)==null?void 0:x.parent;if(!b)return;const w=t(p,m,u.__r3f.root);if(u.children){for(const v of u.children)v.__r3f&&i(w,v);u.children=u.children.filter(v=>!v.__r3f)}u.__r3f.objects.forEach(v=>i(w,v)),u.__r3f.objects=[],u.__r3f.autoRemovedBeforeAppend||o(b,u),w.parent&&(w.__r3f.autoRemovedBeforeAppend=!0),i(b,w),w.raycast&&w.__r3f.eventCount&&Lx(w).getState().internal.interaction.push(w),[g,g.alternate].forEach(v=>{v!==null&&(v.stateNode=w,v.ref&&(typeof v.ref=="function"?v.ref(w):v.ref.current=w))})}const l=()=>{};return{reconciler:yse({createInstance:t,removeChild:o,appendChild:i,appendInitialChild:i,insertBefore:r,supportsMutation:!0,isPrimaryRenderer:!1,supportsPersistence:!1,supportsHydration:!1,noTimeout:-1,appendChildToContainer:(u,p)=>{if(!p)return;const m=u.getState().scene;m.__r3f&&(m.__r3f.root=u,i(m,p))},removeChildFromContainer:(u,p)=>{p&&o(u.getState().scene,p)},insertInContainerBefore:(u,p,m)=>{if(!p||!m)return;const g=u.getState().scene;g.__r3f&&r(g,p,m)},getRootHostContext:()=>null,getChildHostContext:u=>u,finalizeInitialChildren(u){var p;return!!((p=u?.__r3f)!=null?p:{}).handlers},prepareUpdate(u,p,m,g){var x;if(((x=u?.__r3f)!=null?x:{}).primitive&&g.object&&g.object!==u)return[!0];{const{args:w=[],children:v,...S}=g,{args:E=[],children:C,...U}=m;if(!Array.isArray(w))throw new Error("R3F: the args prop must be an array!");if(w.some((N,P)=>N!==E[P]))return[!0];const O=kB(u,S,U,!0);return O.changes.length?[!1,O]:null}},commitUpdate(u,[p,m],g,x,b,w){p?a(u,g,b,w):bT(u,m)},commitMount(u,p,m,g){var x;const b=(x=u.__r3f)!=null?x:{};u.raycast&&b.handlers&&b.eventCount&&Lx(u).getState().internal.interaction.push(u)},getPublicInstance:u=>u,prepareForCommit:()=>null,preparePortalMount:u=>td(u.getState().scene),resetAfterCommit:()=>{},shouldSetTextContent:()=>!1,clearContainer:()=>!1,hideInstance(u){var p;const{attach:m,parent:g}=(p=u.__r3f)!=null?p:{};m&&g&&kL(g,u,m),u.isObject3D&&(u.visible=!1),nd(u)},unhideInstance(u,p){var m;const{attach:g,parent:x}=(m=u.__r3f)!=null?m:{};g&&x&&wT(x,u,g),(u.isObject3D&&p.visible==null||p.visible)&&(u.visible=!0),nd(u)},createTextInstance:l,hideTextInstance:l,unhideTextInstance:l,getCurrentEventPriority:()=>e?e():Td.DefaultEventPriority,beforeActiveInstanceBlur:()=>{},afterActiveInstanceBlur:()=>{},detachDeletedInstance:()=>{},now:typeof performance<"u"&&On.fun(performance.now)?performance.now:On.fun(Date.now)?Date.now:()=>0,scheduleTimeout:On.fun(setTimeout)?setTimeout:void 0,cancelTimeout:On.fun(clearTimeout)?clearTimeout:void 0}),applyProps:bT}}var RL,NL;const _T=n=>"colorSpace"in n||"outputColorSpace"in n,IB=()=>{var n;return(n=OM.ColorManagement)!=null?n:null},PB=n=>n&&n.isOrthographicCamera,_se=n=>n&&n.hasOwnProperty("current"),Kg=typeof window<"u"&&((RL=window.document)!=null&&RL.createElement||((NL=window.navigator)==null?void 0:NL.product)==="ReactNative")?V.useLayoutEffect:V.useEffect;function RB(n){const e=V.useRef(n);return Kg(()=>void(e.current=n),[n]),e}function wse({set:n}){return Kg(()=>(n(new Promise(()=>null)),()=>n(!1)),[n]),null}class NB extends V.Component{constructor(...e){super(...e),this.state={error:!1}}componentDidCatch(e){this.props.set(e)}render(){return this.state.error?null:this.props.children}}NB.getDerivedStateFromError=()=>({error:!0});const DB="__default",DL=new Map,bse=n=>n&&!!n.memoized&&!!n.changes;function LB(n){var e;const t=typeof window<"u"?(e=window.devicePixelRatio)!=null?e:2:1;return Array.isArray(n)?Math.min(Math.max(n[0],t),n[1]):n}const wp=n=>{var e;return(e=n.__r3f)==null?void 0:e.root.getState()};function Lx(n){let e=n.__r3f.root;for(;e.getState().previousRoot;)e=e.getState().previousRoot;return e}const On={obj:n=>n===Object(n)&&!On.arr(n)&&typeof n!="function",fun:n=>typeof n=="function",str:n=>typeof n=="string",num:n=>typeof n=="number",boo:n=>typeof n=="boolean",und:n=>n===void 0,arr:n=>Array.isArray(n),equ(n,e,{arrays:t="shallow",objects:i="reference",strict:r=!0}={}){if(typeof n!=typeof e||!!n!=!!e)return!1;if(On.str(n)||On.num(n)||On.boo(n))return n===e;const s=On.obj(n);if(s&&i==="reference")return n===e;const o=On.arr(n);if(o&&t==="reference")return n===e;if((o||s)&&n===e)return!0;let a;for(a in n)if(!(a in e))return!1;if(s&&t==="shallow"&&i==="shallow"){for(a in r?e:n)if(!On.equ(n[a],e[a],{strict:r,objects:"reference"}))return!1}else for(a in r?e:n)if(n[a]!==e[a])return!1;if(On.und(a)){if(o&&n.length===0&&e.length===0||s&&Object.keys(n).length===0&&Object.keys(e).length===0)return!0;if(n!==e)return!1}return!0}};function Sse(n){n.dispose&&n.type!=="Scene"&&n.dispose();for(const e in n)e.dispose==null||e.dispose(),delete n[e]}function td(n,e){const t=n;return t.__r3f={type:"",root:null,previousAttach:null,memoizedProps:{},eventCount:0,handlers:{},objects:[],parent:null,...e},n}function A1(n,e){let t=n;if(e.includes("-")){const i=e.split("-"),r=i.pop();return t=i.reduce((s,o)=>s[o],n),{target:t,key:r}}else return{target:t,key:e}}const LL=/-\d+$/;function wT(n,e,t){if(On.str(t)){if(LL.test(t)){const s=t.replace(LL,""),{target:o,key:a}=A1(n,s);Array.isArray(o[a])||(o[a]=[])}const{target:i,key:r}=A1(n,t);e.__r3f.previousAttach=i[r],i[r]=e}else e.__r3f.previousAttach=t(n,e)}function kL(n,e,t){var i,r;if(On.str(t)){const{target:s,key:o}=A1(n,t),a=e.__r3f.previousAttach;a===void 0?delete s[o]:s[o]=a}else(i=e.__r3f)==null||i.previousAttach==null||i.previousAttach(n,e);(r=e.__r3f)==null||delete r.previousAttach}function kB(n,{children:e,key:t,ref:i,...r},{children:s,key:o,ref:a,...l}={},c=!1){const u=n.__r3f,p=Object.entries(r),m=[];if(c){const x=Object.keys(l);for(let b=0;b<x.length;b++)r.hasOwnProperty(x[b])||p.unshift([x[b],DB+"remove"])}p.forEach(([x,b])=>{var w;if((w=n.__r3f)!=null&&w.primitive&&x==="object"||On.equ(b,l[x]))return;if(/^on(Pointer|Click|DoubleClick|ContextMenu|Wheel)/.test(x))return m.push([x,b,!0,[]]);let v=[];x.includes("-")&&(v=x.split("-")),m.push([x,b,!1,v]);for(const S in r){const E=r[S];S.startsWith(`${x}-`)&&m.push([S,E,!1,S.split("-")])}});const g={...r};return u!=null&&u.memoizedProps&&u!=null&&u.memoizedProps.args&&(g.args=u.memoizedProps.args),u!=null&&u.memoizedProps&&u!=null&&u.memoizedProps.attach&&(g.attach=u.memoizedProps.attach),{memoized:g,changes:m}}function bT(n,e){var t;const i=n.__r3f,r=i?.root,s=r==null||r.getState==null?void 0:r.getState(),{memoized:o,changes:a}=bse(e)?e:kB(n,e),l=i?.eventCount;n.__r3f&&(n.__r3f.memoizedProps=o);for(let m=0;m<a.length;m++){let[g,x,b,w]=a[m];if(_T(n)){const C="srgb",U="srgb-linear";g==="encoding"?(g="colorSpace",x=x===3001?C:U):g==="outputEncoding"&&(g="outputColorSpace",x=x===3001?C:U)}let v=n,S=v[g];if(w.length&&(S=w.reduce((E,C)=>E[C],n),!(S&&S.set))){const[E,...C]=w.reverse();v=C.reverse().reduce((U,O)=>U[O],n),g=E}if(x===DB+"remove")if(v.constructor){let E=DL.get(v.constructor);E||(E=new v.constructor,DL.set(v.constructor,E)),x=E[g]}else x=0;if(b&&i)x?i.handlers[g]=x:delete i.handlers[g],i.eventCount=Object.keys(i.handlers).length;else if(S&&S.set&&(S.copy||S instanceof Mu)){if(Array.isArray(x))S.fromArray?S.fromArray(x):S.set(...x);else if(S.copy&&x&&x.constructor&&S.constructor===x.constructor)S.copy(x);else if(x!==void 0){var c;const E=(c=S)==null?void 0:c.isColor;!E&&S.setScalar?S.setScalar(x):S instanceof Mu&&x instanceof Mu?S.mask=x.mask:S.set(x),!IB()&&s&&!s.linear&&E&&S.convertSRGBToLinear()}}else{var u;if(v[g]=x,(u=v[g])!=null&&u.isTexture&&v[g].format===gr&&v[g].type===xo&&s){const E=v[g];_T(E)&&_T(s.gl)?E.colorSpace=s.gl.outputColorSpace:E.encoding=s.gl.outputEncoding}}nd(n)}if(i&&i.parent&&n.raycast&&l!==i.eventCount){const m=Lx(n).getState().internal,g=m.interaction.indexOf(n);g>-1&&m.interaction.splice(g,1),i.eventCount&&m.interaction.push(n)}return!(a.length===1&&a[0][0]==="onUpdate")&&a.length&&(t=n.__r3f)!=null&&t.parent&&M1(n),n}function nd(n){var e,t;const i=(e=n.__r3f)==null||(t=e.root)==null||t.getState==null?void 0:t.getState();i&&i.internal.frames===0&&i.invalidate()}function M1(n){n.onUpdate==null||n.onUpdate(n)}function Tse(n,e){n.manual||(PB(n)?(n.left=e.width/-2,n.right=e.width/2,n.top=e.height/2,n.bottom=e.height/-2):n.aspect=e.width/e.height,n.updateProjectionMatrix(),n.updateMatrixWorld())}function ex(n){return(n.eventObject||n.object).uuid+"/"+n.index+n.instanceId}function Ese(){var n;const e=typeof self<"u"&&self||typeof window<"u"&&window;if(!e)return Td.DefaultEventPriority;switch((n=e.event)==null?void 0:n.type){case"click":case"contextmenu":case"dblclick":case"pointercancel":case"pointerdown":case"pointerup":return Td.DiscreteEventPriority;case"pointermove":case"pointerout":case"pointerover":case"pointerenter":case"pointerleave":case"wheel":return Td.ContinuousEventPriority;default:return Td.DefaultEventPriority}}function OB(n,e,t,i){const r=t.get(e);r&&(t.delete(e),t.size===0&&(n.delete(i),r.target.releasePointerCapture(i)))}function Cse(n,e){const{internal:t}=n.getState();t.interaction=t.interaction.filter(i=>i!==e),t.initialHits=t.initialHits.filter(i=>i!==e),t.hovered.forEach((i,r)=>{(i.eventObject===e||i.object===e)&&t.hovered.delete(r)}),t.capturedMap.forEach((i,r)=>{OB(t.capturedMap,e,i,r)})}function Ase(n){function e(l){const{internal:c}=n.getState(),u=l.offsetX-c.initialClick[0],p=l.offsetY-c.initialClick[1];return Math.round(Math.sqrt(u*u+p*p))}function t(l){return l.filter(c=>["Move","Over","Enter","Out","Leave"].some(u=>{var p;return(p=c.__r3f)==null?void 0:p.handlers["onPointer"+u]}))}function i(l,c){const u=n.getState(),p=new Set,m=[],g=c?c(u.internal.interaction):u.internal.interaction;for(let v=0;v<g.length;v++){const S=wp(g[v]);S&&(S.raycaster.camera=void 0)}u.previousRoot||u.events.compute==null||u.events.compute(l,u);function x(v){const S=wp(v);if(!S||!S.events.enabled||S.raycaster.camera===null)return[];if(S.raycaster.camera===void 0){var E;S.events.compute==null||S.events.compute(l,S,(E=S.previousRoot)==null?void 0:E.getState()),S.raycaster.camera===void 0&&(S.raycaster.camera=null)}return S.raycaster.camera?S.raycaster.intersectObject(v,!0):[]}let b=g.flatMap(x).sort((v,S)=>{const E=wp(v.object),C=wp(S.object);return!E||!C?v.distance-S.distance:C.events.priority-E.events.priority||v.distance-S.distance}).filter(v=>{const S=ex(v);return p.has(S)?!1:(p.add(S),!0)});u.events.filter&&(b=u.events.filter(b,u));for(const v of b){let S=v.object;for(;S;){var w;(w=S.__r3f)!=null&&w.eventCount&&m.push({...v,eventObject:S}),S=S.parent}}if("pointerId"in l&&u.internal.capturedMap.has(l.pointerId))for(let v of u.internal.capturedMap.get(l.pointerId).values())p.has(ex(v.intersection))||m.push(v.intersection);return m}function r(l,c,u,p){const m=n.getState();if(l.length){const g={stopped:!1};for(const x of l){const b=wp(x.object)||m,{raycaster:w,pointer:v,camera:S,internal:E}=b,C=new K(v.x,v.y,0).unproject(S),U=M=>{var D,z;return(D=(z=E.capturedMap.get(M))==null?void 0:z.has(x.eventObject))!=null?D:!1},O=M=>{const D={intersection:x,target:c.target};E.capturedMap.has(M)?E.capturedMap.get(M).set(x.eventObject,D):E.capturedMap.set(M,new Map([[x.eventObject,D]])),c.target.setPointerCapture(M)},N=M=>{const D=E.capturedMap.get(M);D&&OB(E.capturedMap,x.eventObject,D,M)};let P={};for(let M in c){let D=c[M];typeof D!="function"&&(P[M]=D)}let A={...x,...P,pointer:v,intersections:l,stopped:g.stopped,delta:u,unprojectedPoint:C,ray:w.ray,camera:S,stopPropagation(){const M="pointerId"in c&&E.capturedMap.get(c.pointerId);if((!M||M.has(x.eventObject))&&(A.stopped=g.stopped=!0,E.hovered.size&&Array.from(E.hovered.values()).find(D=>D.eventObject===x.eventObject))){const D=l.slice(0,l.indexOf(x));s([...D,x])}},target:{hasPointerCapture:U,setPointerCapture:O,releasePointerCapture:N},currentTarget:{hasPointerCapture:U,setPointerCapture:O,releasePointerCapture:N},nativeEvent:c};if(p(A),g.stopped===!0)break}}return l}function s(l){const{internal:c}=n.getState();for(const u of c.hovered.values())if(!l.length||!l.find(p=>p.object===u.object&&p.index===u.index&&p.instanceId===u.instanceId)){const m=u.eventObject.__r3f,g=m?.handlers;if(c.hovered.delete(ex(u)),m!=null&&m.eventCount){const x={...u,intersections:l};g.onPointerOut==null||g.onPointerOut(x),g.onPointerLeave==null||g.onPointerLeave(x)}}}function o(l,c){for(let u=0;u<c.length;u++){const p=c[u].__r3f;p==null||p.handlers.onPointerMissed==null||p.handlers.onPointerMissed(l)}}function a(l){switch(l){case"onPointerLeave":case"onPointerCancel":return()=>s([]);case"onLostPointerCapture":return c=>{const{internal:u}=n.getState();"pointerId"in c&&u.capturedMap.has(c.pointerId)&&requestAnimationFrame(()=>{u.capturedMap.has(c.pointerId)&&(u.capturedMap.delete(c.pointerId),s([]))})}}return function(u){const{onPointerMissed:p,internal:m}=n.getState();m.lastEvent.current=u;const g=l==="onPointerMove",x=l==="onClick"||l==="onContextMenu"||l==="onDoubleClick",w=i(u,g?t:void 0),v=x?e(u):0;l==="onPointerDown"&&(m.initialClick=[u.offsetX,u.offsetY],m.initialHits=w.map(E=>E.eventObject)),x&&!w.length&&v<=2&&(o(u,m.interaction),p&&p(u)),g&&s(w);function S(E){const C=E.eventObject,U=C.__r3f,O=U?.handlers;if(U!=null&&U.eventCount)if(g){if(O.onPointerOver||O.onPointerEnter||O.onPointerOut||O.onPointerLeave){const N=ex(E),P=m.hovered.get(N);P?P.stopped&&E.stopPropagation():(m.hovered.set(N,E),O.onPointerOver==null||O.onPointerOver(E),O.onPointerEnter==null||O.onPointerEnter(E))}O.onPointerMove==null||O.onPointerMove(E)}else{const N=O[l];N?(!x||m.initialHits.includes(C))&&(o(u,m.interaction.filter(P=>!m.initialHits.includes(P))),N(E)):x&&m.initialHits.includes(C)&&o(u,m.interaction.filter(P=>!m.initialHits.includes(P)))}}r(w,u,v,S)}}return{handlePointer:a}}const UB=n=>!!(n!=null&&n.render),jB=V.createContext(null),Mse=(n,e)=>{const t=pse((a,l)=>{const c=new K,u=new K,p=new K;function m(v=l().camera,S=u,E=l().size){const{width:C,height:U,top:O,left:N}=E,P=C/U;S.isVector3?p.copy(S):p.set(...S);const A=v.getWorldPosition(c).distanceTo(p);if(PB(v))return{width:C/v.zoom,height:U/v.zoom,top:O,left:N,factor:1,distance:A,aspect:P};{const M=v.fov*Math.PI/180,D=2*Math.tan(M/2)*A,z=D*(C/U);return{width:z,height:D,top:O,left:N,factor:C/z,distance:A,aspect:P}}}let g;const x=v=>a(S=>({performance:{...S.performance,current:v}})),b=new Ie;return{set:a,get:l,gl:null,camera:null,raycaster:null,events:{priority:1,enabled:!0,connected:!1},xr:null,scene:null,invalidate:(v=1)=>n(l(),v),advance:(v,S)=>e(v,S,l()),legacy:!1,linear:!1,flat:!1,controls:null,clock:new PM,pointer:b,mouse:b,frameloop:"always",onPointerMissed:void 0,performance:{current:1,min:.5,max:1,debounce:200,regress:()=>{const v=l();g&&clearTimeout(g),v.performance.current!==v.performance.min&&x(v.performance.min),g=setTimeout(()=>x(l().performance.max),v.performance.debounce)}},size:{width:0,height:0,top:0,left:0,updateStyle:!1},viewport:{initialDpr:0,dpr:0,width:0,height:0,top:0,left:0,aspect:0,distance:0,factor:0,getCurrentViewport:m},setEvents:v=>a(S=>({...S,events:{...S.events,...v}})),setSize:(v,S,E,C,U)=>{const O=l().camera,N={width:v,height:S,top:C||0,left:U||0,updateStyle:E};a(P=>({size:N,viewport:{...P.viewport,...m(O,u,N)}}))},setDpr:v=>a(S=>{const E=LB(v);return{viewport:{...S.viewport,dpr:E,initialDpr:S.viewport.initialDpr||E}}}),setFrameloop:(v="always")=>{const S=l().clock;S.stop(),S.elapsedTime=0,v!=="never"&&(S.start(),S.elapsedTime=0),a(()=>({frameloop:v}))},previousRoot:void 0,internal:{active:!1,priority:0,frames:0,lastEvent:V.createRef(),interaction:[],hovered:new Map,subscribers:[],initialClick:[0,0],initialHits:[],capturedMap:new Map,subscribe:(v,S,E)=>{const C=l().internal;return C.priority=C.priority+(S>0?1:0),C.subscribers.push({ref:v,priority:S,store:E}),C.subscribers=C.subscribers.sort((U,O)=>U.priority-O.priority),()=>{const U=l().internal;U!=null&&U.subscribers&&(U.priority=U.priority-(S>0?1:0),U.subscribers=U.subscribers.filter(O=>O.ref!==v))}}}}}),i=t.getState();let r=i.size,s=i.viewport.dpr,o=i.camera;return t.subscribe(()=>{const{camera:a,size:l,viewport:c,gl:u,set:p}=t.getState();if(l.width!==r.width||l.height!==r.height||c.dpr!==s){var m;r=l,s=c.dpr,Tse(a,l),u.setPixelRatio(c.dpr);const g=(m=l.updateStyle)!=null?m:typeof HTMLCanvasElement<"u"&&u.domElement instanceof HTMLCanvasElement;u.setSize(l.width,l.height,g)}a!==o&&(o=a,p(g=>({viewport:{...g.viewport,...g.viewport.getCurrentViewport(a)}})))}),t.subscribe(a=>n(a)),t};let tx,Ise=new Set,Pse=new Set,Rse=new Set;function ST(n,e){if(n.size)for(const{callback:t}of n.values())t(e)}function bp(n,e){switch(n){case"before":return ST(Ise,e);case"after":return ST(Pse,e);case"tail":return ST(Rse,e)}}let TT,ET;function CT(n,e,t){let i=e.clock.getDelta();for(e.frameloop==="never"&&typeof n=="number"&&(i=n-e.clock.elapsedTime,e.clock.oldTime=e.clock.elapsedTime,e.clock.elapsedTime=n),TT=e.internal.subscribers,tx=0;tx<TT.length;tx++)ET=TT[tx],ET.ref.current(ET.store.getState(),i,t);return!e.internal.priority&&e.gl.render&&e.gl.render(e.scene,e.camera),e.internal.frames=Math.max(0,e.internal.frames-1),e.frameloop==="always"?1:e.internal.frames}function Nse(n){let e=!1,t=!1,i,r,s;function o(c){r=requestAnimationFrame(o),e=!0,i=0,bp("before",c),t=!0;for(const p of n.values()){var u;s=p.store.getState(),s.internal.active&&(s.frameloop==="always"||s.internal.frames>0)&&!((u=s.gl.xr)!=null&&u.isPresenting)&&(i+=CT(c,s))}if(t=!1,bp("after",c),i===0)return bp("tail",c),e=!1,cancelAnimationFrame(r)}function a(c,u=1){var p;if(!c)return n.forEach(m=>a(m.store.getState(),u));(p=c.gl.xr)!=null&&p.isPresenting||!c.internal.active||c.frameloop==="never"||(u>1?c.internal.frames=Math.min(60,c.internal.frames+u):t?c.internal.frames=2:c.internal.frames=1,e||(e=!0,requestAnimationFrame(o)))}function l(c,u=!0,p,m){if(u&&bp("before",c),p)CT(c,p,m);else for(const g of n.values())CT(c,g.store.getState());u&&bp("after",c)}return{loop:o,invalidate:a,advance:l}}function FB(){const n=V.useContext(jB);if(!n)throw new Error("R3F: Hooks can only be used within the Canvas component!");return n}function kx(n=t=>t,e){return FB()(n,e)}function Kw(n,e=0){const t=FB(),i=t.getState().internal.subscribe,r=RB(n);return Kg(()=>i(r,e,t),[e,i,t]),null}const lf=new Map,{invalidate:OL,advance:UL}=Nse(lf),{reconciler:m_,applyProps:Kh}=xse(lf,Ese),Yh={objects:"shallow",strict:!1},Dse=(n,e)=>{const t=typeof n=="function"?n(e):n;return UB(t)?t:new TB({powerPreference:"high-performance",canvas:e,antialias:!0,alpha:!0,...n})};function Lse(n,e){const t=typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement;if(e){const{width:i,height:r,top:s,left:o,updateStyle:a=t}=e;return{width:i,height:r,top:s,left:o,updateStyle:a}}else if(typeof HTMLCanvasElement<"u"&&n instanceof HTMLCanvasElement&&n.parentElement){const{width:i,height:r,top:s,left:o}=n.parentElement.getBoundingClientRect();return{width:i,height:r,top:s,left:o,updateStyle:t}}else if(typeof OffscreenCanvas<"u"&&n instanceof OffscreenCanvas)return{width:n.width,height:n.height,top:0,left:0,updateStyle:t};return{width:0,height:0,top:0,left:0}}function kse(n){const e=lf.get(n),t=e?.fiber,i=e?.store;e&&console.warn("R3F.createRoot should only be called once!");const r=typeof reportError=="function"?reportError:console.error,s=i||Mse(OL,UL),o=t||m_.createContainer(s,Td.ConcurrentRoot,null,!1,null,"",r,null);e||lf.set(n,{fiber:o,store:s});let a,l=!1,c;return{configure(u={}){let{gl:p,size:m,scene:g,events:x,onCreated:b,shadows:w=!1,linear:v=!1,flat:S=!1,legacy:E=!1,orthographic:C=!1,frameloop:U="always",dpr:O=[1,2],performance:N,raycaster:P,camera:A,onPointerMissed:M}=u,D=s.getState(),z=D.gl;D.gl||D.set({gl:z=Dse(p,n)});let F=D.raycaster;F||D.set({raycaster:F=new gB});const{params:re,...le}=P||{};if(On.equ(le,F,Yh)||Kh(F,{...le}),On.equ(re,F.params,Yh)||Kh(F,{params:{...F.params,...re}}),!D.camera||D.camera===c&&!On.equ(c,A,Yh)){c=A;const j=A instanceof Bg,J=j?A:C?new rh(0,0,0,0,.1,1e3):new yi(75,0,.1,1e3);j||(J.position.z=5,A&&(Kh(J,A),("aspect"in A||"left"in A||"right"in A||"bottom"in A||"top"in A)&&(J.manual=!0,J.updateProjectionMatrix())),!D.camera&&!(A!=null&&A.rotation)&&J.lookAt(0,0,0)),D.set({camera:J}),F.camera=J}if(!D.scene){let j;g!=null&&g.isScene?j=g:(j=new hM,g&&Kh(j,g)),D.set({scene:td(j)})}if(!D.xr){var he;const j=(me,oe)=>{const ye=s.getState();ye.frameloop!=="never"&&UL(me,!0,ye,oe)},J=()=>{const me=s.getState();me.gl.xr.enabled=me.gl.xr.isPresenting,me.gl.xr.setAnimationLoop(me.gl.xr.isPresenting?j:null),me.gl.xr.isPresenting||OL(me)},ce={connect(){const me=s.getState().gl;me.xr.addEventListener("sessionstart",J),me.xr.addEventListener("sessionend",J)},disconnect(){const me=s.getState().gl;me.xr.removeEventListener("sessionstart",J),me.xr.removeEventListener("sessionend",J)}};typeof((he=z.xr)==null?void 0:he.addEventListener)=="function"&&ce.connect(),D.set({xr:ce})}if(z.shadowMap){const j=z.shadowMap.enabled,J=z.shadowMap.type;if(z.shadowMap.enabled=!!w,On.boo(w))z.shadowMap.type=nm;else if(On.str(w)){var ue;const ce={basic:PV,percentage:gw,soft:nm,variance:oo};z.shadowMap.type=(ue=ce[w])!=null?ue:nm}else On.obj(w)&&Object.assign(z.shadowMap,w);(j!==z.shadowMap.enabled||J!==z.shadowMap.type)&&(z.shadowMap.needsUpdate=!0)}const q=IB();q&&("enabled"in q?q.enabled=!E:"legacyMode"in q&&(q.legacyMode=E)),l||Kh(z,{outputEncoding:v?3e3:3001,toneMapping:S?zo:$A}),D.legacy!==E&&D.set(()=>({legacy:E})),D.linear!==v&&D.set(()=>({linear:v})),D.flat!==S&&D.set(()=>({flat:S})),p&&!On.fun(p)&&!UB(p)&&!On.equ(p,z,Yh)&&Kh(z,p),x&&!D.events.handlers&&D.set({events:x(s)});const Q=Lse(n,m);return On.equ(Q,D.size,Yh)||D.setSize(Q.width,Q.height,Q.updateStyle,Q.top,Q.left),O&&D.viewport.dpr!==LB(O)&&D.setDpr(O),D.frameloop!==U&&D.setFrameloop(U),D.onPointerMissed||D.set({onPointerMissed:M}),N&&!On.equ(N,D.performance,Yh)&&D.set(j=>({performance:{...j.performance,...N}})),a=b,l=!0,this},render(u){return l||this.configure(),m_.updateContainer(h.jsx(Ose,{store:s,children:u,onCreated:a,rootElement:n}),o,null,()=>{}),s},unmount(){VB(n)}}}function Ose({store:n,children:e,onCreated:t,rootElement:i}){return Kg(()=>{const r=n.getState();r.set(s=>({internal:{...s.internal,active:!0}})),t&&t(r),n.getState().events.connected||r.events.connect==null||r.events.connect(i)},[]),h.jsx(jB.Provider,{value:n,children:e})}function VB(n,e){const t=lf.get(n),i=t?.fiber;if(i){const r=t?.store.getState();r&&(r.internal.active=!1),m_.updateContainer(null,i,null,()=>{r&&setTimeout(()=>{try{var s,o,a,l;r.events.disconnect==null||r.events.disconnect(),(s=r.gl)==null||(o=s.renderLists)==null||o.dispose==null||o.dispose(),(a=r.gl)==null||a.forceContextLoss==null||a.forceContextLoss(),(l=r.gl)!=null&&l.xr&&r.xr.disconnect(),Sse(r),lf.delete(n)}catch{}},500)})}}m_.injectIntoDevTools({bundleType:0,rendererPackageName:"@react-three/fiber",version:V.version});const AT={onClick:["click",!1],onContextMenu:["contextmenu",!1],onDoubleClick:["dblclick",!1],onWheel:["wheel",!0],onPointerDown:["pointerdown",!0],onPointerUp:["pointerup",!0],onPointerLeave:["pointerleave",!0],onPointerMove:["pointermove",!0],onPointerCancel:["pointercancel",!0],onLostPointerCapture:["lostpointercapture",!0]};function Use(n){const{handlePointer:e}=Ase(n);return{priority:1,enabled:!0,compute(t,i,r){i.pointer.set(t.offsetX/i.size.width*2-1,-(t.offsetY/i.size.height)*2+1),i.raycaster.setFromCamera(i.pointer,i.camera)},connected:void 0,handlers:Object.keys(AT).reduce((t,i)=>({...t,[i]:e(i)}),{}),update:()=>{var t;const{events:i,internal:r}=n.getState();(t=r.lastEvent)!=null&&t.current&&i.handlers&&i.handlers.onPointerMove(r.lastEvent.current)},connect:t=>{var i;const{set:r,events:s}=n.getState();s.disconnect==null||s.disconnect(),r(o=>({events:{...o.events,connected:t}})),Object.entries((i=s.handlers)!=null?i:[]).forEach(([o,a])=>{const[l,c]=AT[o];t.addEventListener(l,a,{passive:c})})},disconnect:()=>{const{set:t,events:i}=n.getState();if(i.connected){var r;Object.entries((r=i.handlers)!=null?r:[]).forEach(([s,o])=>{if(i&&i.connected instanceof HTMLElement){const[a]=AT[s];i.connected.removeEventListener(a,o)}}),t(s=>({events:{...s.events,connected:void 0}}))}}}}function jL(n,e){let t;return(...i)=>{window.clearTimeout(t),t=window.setTimeout(()=>n(...i),e)}}function jse({debounce:n,scroll:e,polyfill:t,offsetSize:i}={debounce:0,scroll:!1,offsetSize:!1}){const r=t||(typeof window>"u"?class{}:window.ResizeObserver);if(!r)throw new Error("This browser does not support ResizeObserver out of the box. See: https://github.com/react-spring/react-use-measure/#resize-observer-polyfills");const[s,o]=V.useState({left:0,top:0,width:0,height:0,bottom:0,right:0,x:0,y:0}),a=V.useRef({element:null,scrollContainers:null,resizeObserver:null,lastBounds:s,orientationHandler:null}),l=n?typeof n=="number"?n:n.scroll:null,c=n?typeof n=="number"?n:n.resize:null,u=V.useRef(!1);V.useEffect(()=>(u.current=!0,()=>void(u.current=!1)));const[p,m,g]=V.useMemo(()=>{const v=()=>{if(!a.current.element)return;const{left:S,top:E,width:C,height:U,bottom:O,right:N,x:P,y:A}=a.current.element.getBoundingClientRect(),M={left:S,top:E,width:C,height:U,bottom:O,right:N,x:P,y:A};a.current.element instanceof HTMLElement&&i&&(M.height=a.current.element.offsetHeight,M.width=a.current.element.offsetWidth),Object.freeze(M),u.current&&!zse(a.current.lastBounds,M)&&o(a.current.lastBounds=M)};return[v,c?jL(v,c):v,l?jL(v,l):v]},[o,i,l,c]);function x(){a.current.scrollContainers&&(a.current.scrollContainers.forEach(v=>v.removeEventListener("scroll",g,!0)),a.current.scrollContainers=null),a.current.resizeObserver&&(a.current.resizeObserver.disconnect(),a.current.resizeObserver=null),a.current.orientationHandler&&("orientation"in screen&&"removeEventListener"in screen.orientation?screen.orientation.removeEventListener("change",a.current.orientationHandler):"onorientationchange"in window&&window.removeEventListener("orientationchange",a.current.orientationHandler))}function b(){a.current.element&&(a.current.resizeObserver=new r(g),a.current.resizeObserver.observe(a.current.element),e&&a.current.scrollContainers&&a.current.scrollContainers.forEach(v=>v.addEventListener("scroll",g,{capture:!0,passive:!0})),a.current.orientationHandler=()=>{g()},"orientation"in screen&&"addEventListener"in screen.orientation?screen.orientation.addEventListener("change",a.current.orientationHandler):"onorientationchange"in window&&window.addEventListener("orientationchange",a.current.orientationHandler))}const w=v=>{!v||v===a.current.element||(x(),a.current.element=v,a.current.scrollContainers=BB(v),b())};return Vse(g,!!e),Fse(m),V.useEffect(()=>{x(),b()},[e,g,m]),V.useEffect(()=>x,[]),[w,s,p]}function Fse(n){V.useEffect(()=>{const e=n;return window.addEventListener("resize",e),()=>void window.removeEventListener("resize",e)},[n])}function Vse(n,e){V.useEffect(()=>{if(e){const t=n;return window.addEventListener("scroll",t,{capture:!0,passive:!0}),()=>void window.removeEventListener("scroll",t,!0)}},[n,e])}function BB(n){const e=[];if(!n||n===document.body)return e;const{overflow:t,overflowX:i,overflowY:r}=window.getComputedStyle(n);return[t,i,r].some(s=>s==="auto"||s==="scroll")&&e.push(n),[...e,...BB(n.parentElement)]}const Bse=["x","y","top","bottom","left","right","width","height"],zse=(n,e)=>Bse.every(t=>n[t]===e[t]);var Hse=Object.defineProperty,Gse=Object.defineProperties,Wse=Object.getOwnPropertyDescriptors,FL=Object.getOwnPropertySymbols,qse=Object.prototype.hasOwnProperty,$se=Object.prototype.propertyIsEnumerable,VL=(n,e,t)=>e in n?Hse(n,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):n[e]=t,BL=(n,e)=>{for(var t in e||(e={}))qse.call(e,t)&&VL(n,t,e[t]);if(FL)for(var t of FL(e))$se.call(e,t)&&VL(n,t,e[t]);return n},Xse=(n,e)=>Gse(n,Wse(e)),zL,HL;typeof window<"u"&&((zL=window.document)!=null&&zL.createElement||((HL=window.navigator)==null?void 0:HL.product)==="ReactNative")?V.useLayoutEffect:V.useEffect;function zB(n,e,t){if(!n)return;if(t(n)===!0)return n;let i=n.child;for(;i;){const r=zB(i,e,t);if(r)return r;i=i.sibling}}function HB(n){try{return Object.defineProperties(n,{_currentRenderer:{get(){return null},set(){}},_currentRenderer2:{get(){return null},set(){}}})}catch{return n}}const GL=console.error;console.error=function(){const n=[...arguments].join("");if(n?.startsWith("Warning:")&&n.includes("useContext")){console.error=GL;return}return GL.apply(this,arguments)};const UM=HB(V.createContext(null));class GB extends V.Component{render(){return V.createElement(UM.Provider,{value:this._reactInternals},this.props.children)}}function Kse(){const n=V.useContext(UM);if(n===null)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");const e=V.useId();return V.useMemo(()=>{for(const i of[n,n?.alternate]){if(!i)continue;const r=zB(i,!1,s=>{let o=s.memoizedState;for(;o;){if(o.memoizedState===e)return!0;o=o.next}});if(r)return r}},[n,e])}function Yse(){const n=Kse(),[e]=V.useState(()=>new Map);e.clear();let t=n;for(;t;){if(t.type&&typeof t.type=="object"){const r=t.type._context===void 0&&t.type.Provider===t.type?t.type:t.type._context;r&&r!==UM&&!e.has(r)&&e.set(r,V.useContext(HB(r)))}t=t.return}return e}function Jse(){const n=Yse();return V.useMemo(()=>Array.from(n.keys()).reduce((e,t)=>i=>V.createElement(e,null,V.createElement(t.Provider,Xse(BL({},i),{value:n.get(t)}))),e=>V.createElement(GB,BL({},e))),[n])}const Qse=V.forwardRef(function({children:e,fallback:t,resize:i,style:r,gl:s,events:o=Use,eventSource:a,eventPrefix:l,shadows:c,linear:u,flat:p,legacy:m,orthographic:g,frameloop:x,dpr:b,performance:w,raycaster:v,camera:S,scene:E,onPointerMissed:C,onCreated:U,...O},N){V.useMemo(()=>vse(hse),[]);const P=Jse(),[A,M]=jse({scroll:!0,debounce:{scroll:50,resize:0},...i}),D=V.useRef(null),z=V.useRef(null);V.useImperativeHandle(N,()=>D.current);const F=RB(C),[re,le]=V.useState(!1),[he,ue]=V.useState(!1);if(re)throw re;if(he)throw he;const q=V.useRef(null);Kg(()=>{const j=D.current;M.width>0&&M.height>0&&j&&(q.current||(q.current=kse(j)),q.current.configure({gl:s,events:o,shadows:c,linear:u,flat:p,legacy:m,orthographic:g,frameloop:x,dpr:b,performance:w,raycaster:v,camera:S,scene:E,size:M,onPointerMissed:(...J)=>F.current==null?void 0:F.current(...J),onCreated:J=>{J.events.connect==null||J.events.connect(a?_se(a)?a.current:a:z.current),l&&J.setEvents({compute:(ce,me)=>{const oe=ce[l+"X"],ye=ce[l+"Y"];me.pointer.set(oe/me.size.width*2-1,-(ye/me.size.height)*2+1),me.raycaster.setFromCamera(me.pointer,me.camera)}}),U?.(J)}}),q.current.render(h.jsx(P,{children:h.jsx(NB,{set:ue,children:h.jsx(V.Suspense,{fallback:h.jsx(wse,{set:le}),children:e??null})})})))}),V.useEffect(()=>{const j=D.current;if(j)return()=>VB(j)},[]);const Q=a?"none":"auto";return h.jsx("div",{ref:z,style:{position:"relative",width:"100%",height:"100%",overflow:"hidden",pointerEvents:Q,...r},...O,children:h.jsx("div",{ref:A,style:{width:"100%",height:"100%"},children:h.jsx("canvas",{ref:D,style:{display:"block"},children:t})})})}),WB=V.forwardRef(function(e,t){return h.jsx(GB,{children:h.jsx(Qse,{...e,ref:t})})});function oc(){return oc=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)({}).hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},oc.apply(null,arguments)}const Yg=new K,jM=new K,Zse=new K,WL=new Ie;function eoe(n,e,t){const i=Yg.setFromMatrixPosition(n.matrixWorld);i.project(e);const r=t.width/2,s=t.height/2;return[i.x*r+r,-(i.y*s)+s]}function toe(n,e){const t=Yg.setFromMatrixPosition(n.matrixWorld),i=jM.setFromMatrixPosition(e.matrixWorld),r=t.sub(i),s=e.getWorldDirection(Zse);return r.angleTo(s)>Math.PI/2}function noe(n,e,t,i){const r=Yg.setFromMatrixPosition(n.matrixWorld),s=r.clone();s.project(e),WL.set(s.x,s.y),t.setFromCamera(WL,e);const o=t.intersectObjects(i,!0);if(o.length){const a=o[0].distance;return r.distanceTo(t.ray.origin)<a}return!0}function ioe(n,e){if(e instanceof rh)return e.zoom;if(e instanceof yi){const t=Yg.setFromMatrixPosition(n.matrixWorld),i=jM.setFromMatrixPosition(e.matrixWorld),r=e.fov*Math.PI/180,s=t.distanceTo(i);return 1/(2*Math.tan(r/2)*s)}else return 1}function roe(n,e,t){if(e instanceof yi||e instanceof rh){const i=Yg.setFromMatrixPosition(n.matrixWorld),r=jM.setFromMatrixPosition(e.matrixWorld),s=i.distanceTo(r),o=(t[1]-t[0])/(e.far-e.near),a=t[1]-o*e.far;return Math.round(o*s+a)}}const I1=n=>Math.abs(n)<1e-10?0:n;function qB(n,e,t=""){let i="matrix3d(";for(let r=0;r!==16;r++)i+=I1(e[r]*n.elements[r])+(r!==15?",":")");return t+i}const soe=(n=>e=>qB(e,n))([1,-1,1,1,1,-1,1,1,1,-1,1,1,1,-1,1,1]),ooe=(n=>(e,t)=>qB(e,n(t),"translate(-50%,-50%)"))(n=>[1/n,1/n,1/n,1,-1/n,-1/n,-1/n,-1,1/n,1/n,1/n,1,1,1,1,1]);function aoe(n){return n&&typeof n=="object"&&"current"in n}const loe=V.forwardRef(({children:n,eps:e=.001,style:t,className:i,prepend:r,center:s,fullscreen:o,portal:a,distanceFactor:l,sprite:c=!1,transform:u=!1,occlude:p,onOcclude:m,castShadow:g,receiveShadow:x,material:b,geometry:w,zIndexRange:v=[16777271,0],calculatePosition:S=eoe,as:E="div",wrapperClass:C,pointerEvents:U="auto",...O},N)=>{const{gl:P,camera:A,scene:M,size:D,raycaster:z,events:F,viewport:re}=kx(),[le]=V.useState(()=>document.createElement(E)),he=V.useRef(),ue=V.useRef(null),q=V.useRef(0),Q=V.useRef([0,0]),j=V.useRef(null),J=V.useRef(null),ce=a?.current||F.connected||P.domElement.parentNode,me=V.useRef(null),oe=V.useRef(!1),ye=V.useMemo(()=>p&&p!=="blending"||Array.isArray(p)&&p.length&&aoe(p[0]),[p]);V.useLayoutEffect(()=>{const Ge=P.domElement;p&&p==="blending"?(Ge.style.zIndex=`${Math.floor(v[0]/2)}`,Ge.style.position="absolute",Ge.style.pointerEvents="none"):(Ge.style.zIndex=null,Ge.style.position=null,Ge.style.pointerEvents=null)},[p]),V.useLayoutEffect(()=>{if(ue.current){const Ge=he.current=UU(le);if(M.updateMatrixWorld(),u)le.style.cssText="position:absolute;top:0;left:0;pointer-events:none;overflow:hidden;";else{const Je=S(ue.current,A,D);le.style.cssText=`position:absolute;top:0;left:0;transform:translate3d(${Je[0]}px,${Je[1]}px,0);transform-origin:0 0;`}return ce&&(r?ce.prepend(le):ce.appendChild(le)),()=>{ce&&ce.removeChild(le),Ge.unmount()}}},[ce,u]),V.useLayoutEffect(()=>{C&&(le.className=C)},[C]);const Re=V.useMemo(()=>u?{position:"absolute",top:0,left:0,width:D.width,height:D.height,transformStyle:"preserve-3d",pointerEvents:"none"}:{position:"absolute",transform:s?"translate3d(-50%,-50%,0)":"none",...o&&{top:-D.height/2,left:-D.width/2,width:D.width,height:D.height},...t},[t,s,o,D,u]),Me=V.useMemo(()=>({position:"absolute",pointerEvents:U}),[U]);V.useLayoutEffect(()=>{if(oe.current=!1,u){var Ge;(Ge=he.current)==null||Ge.render(V.createElement("div",{ref:j,style:Re},V.createElement("div",{ref:J,style:Me},V.createElement("div",{ref:N,className:i,style:t,children:n}))))}else{var Je;(Je=he.current)==null||Je.render(V.createElement("div",{ref:N,style:Re,className:i,children:n}))}});const ht=V.useRef(!0);Kw(Ge=>{if(ue.current){A.updateMatrixWorld(),ue.current.updateWorldMatrix(!0,!1);const Je=u?Q.current:S(ue.current,A,D);if(u||Math.abs(q.current-A.zoom)>e||Math.abs(Q.current[0]-Je[0])>e||Math.abs(Q.current[1]-Je[1])>e){const Ce=toe(ue.current,A);let Se=!1;ye&&(Array.isArray(p)?Se=p.map(qe=>qe.current):p!=="blending"&&(Se=[M]));const X=ht.current;if(Se){const qe=noe(ue.current,A,z,Se);ht.current=qe&&!Ce}else ht.current=!Ce;X!==ht.current&&(m?m(!ht.current):le.style.display=ht.current?"block":"none");const ot=Math.floor(v[0]/2),Ne=p?ye?[v[0],ot]:[ot-1,0]:v;if(le.style.zIndex=`${roe(ue.current,A,Ne)}`,u){const[qe,Ue]=[D.width/2,D.height/2],gt=A.projectionMatrix.elements[5]*Ue,{isOrthographicCamera:Ve,top:$,left:B,bottom:ae,right:be}=A,Pe=soe(A.matrixWorldInverse),ve=Ve?`scale(${gt})translate(${I1(-(be+B)/2)}px,${I1(($+ae)/2)}px)`:`translateZ(${gt}px)`;let Fe=ue.current.matrixWorld;c&&(Fe=A.matrixWorldInverse.clone().transpose().copyPosition(Fe).scale(ue.current.scale),Fe.elements[3]=Fe.elements[7]=Fe.elements[11]=0,Fe.elements[15]=1),le.style.width=D.width+"px",le.style.height=D.height+"px",le.style.perspective=Ve?"":`${gt}px`,j.current&&J.current&&(j.current.style.transform=`${ve}${Pe}translate(${qe}px,${Ue}px)`,J.current.style.transform=ooe(Fe,1/((l||10)/400)))}else{const qe=l===void 0?1:ioe(ue.current,A)*l;le.style.transform=`translate3d(${Je[0]}px,${Je[1]}px,0) scale(${qe})`}Q.current=Je,q.current=A.zoom}}if(!ye&&me.current&&!oe.current)if(u){if(j.current){const Je=j.current.children[0];if(Je!=null&&Je.clientWidth&&Je!=null&&Je.clientHeight){const{isOrthographicCamera:Ce}=A;if(Ce||w)O.scale&&(Array.isArray(O.scale)?O.scale instanceof K?me.current.scale.copy(O.scale.clone().divideScalar(1)):me.current.scale.set(1/O.scale[0],1/O.scale[1],1/O.scale[2]):me.current.scale.setScalar(1/O.scale));else{const Se=(l||10)/400,X=Je.clientWidth*Se,ot=Je.clientHeight*Se;me.current.scale.set(X,ot,1)}oe.current=!0}}}else{const Je=le.children[0];if(Je!=null&&Je.clientWidth&&Je!=null&&Je.clientHeight){const Ce=1/re.factor,Se=Je.clientWidth*Ce,X=Je.clientHeight*Ce;me.current.scale.set(Se,X,1),oe.current=!0}me.current.lookAt(Ge.camera.position)}});const zt=V.useMemo(()=>({vertexShader:u?void 0:`
          /*
            This shader is from the THREE's SpriteMaterial.
            We need to turn the backing plane into a Sprite
            (make it always face the camera) if "transfrom"
            is false.
          */
          #include <common>

          void main() {
            vec2 center = vec2(0., 1.);
            float rotation = 0.0;

            // This is somewhat arbitrary, but it seems to work well
            // Need to figure out how to derive this dynamically if it even matters
            float size = 0.03;

            vec4 mvPosition = modelViewMatrix * vec4( 0.0, 0.0, 0.0, 1.0 );
            vec2 scale;
            scale.x = length( vec3( modelMatrix[ 0 ].x, modelMatrix[ 0 ].y, modelMatrix[ 0 ].z ) );
            scale.y = length( vec3( modelMatrix[ 1 ].x, modelMatrix[ 1 ].y, modelMatrix[ 1 ].z ) );

            bool isPerspective = isPerspectiveMatrix( projectionMatrix );
            if ( isPerspective ) scale *= - mvPosition.z;

            vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale * size;
            vec2 rotatedPosition;
            rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
            rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
            mvPosition.xy += rotatedPosition;

            gl_Position = projectionMatrix * mvPosition;
          }
      `,fragmentShader:`
        void main() {
          gl_FragColor = vec4(0.0, 0.0, 0.0, 0.0);
        }
      `}),[u]);return V.createElement("group",oc({},O,{ref:ue}),p&&!ye&&V.createElement("mesh",{castShadow:g,receiveShadow:x,ref:me},w||V.createElement("planeGeometry",null),b||V.createElement("shaderMaterial",{side:uo,vertexShader:zt.vertexShader,fragmentShader:zt.fragmentShader})))}),qL=n=>{let e;const t=new Set,i=(c,u)=>{const p=typeof c=="function"?c(e):c;if(!Object.is(p,e)){const m=e;e=u??(typeof p!="object"||p===null)?p:Object.assign({},e,p),t.forEach(g=>g(e,m))}},r=()=>e,a={setState:i,getState:r,getInitialState:()=>l,subscribe:c=>(t.add(c),()=>t.delete(c))},l=e=n(i,r,a);return a},coe=n=>n?qL(n):qL,uoe=n=>n;function hoe(n,e=uoe){const t=ko.useSyncExternalStore(n.subscribe,()=>e(n.getState()),()=>e(n.getInitialState()));return ko.useDebugValue(t),t}const $L=n=>{const e=coe(n),t=i=>hoe(e,i);return Object.assign(t,e),t},doe=n=>n?$L(n):$L;let Sp=0;const foe=doe(n=>(bd.onStart=(e,t,i)=>{n({active:!0,item:e,loaded:t,total:i,progress:(t-Sp)/(i-Sp)*100})},bd.onLoad=()=>{n({active:!1})},bd.onError=e=>n(t=>({errors:[...t.errors,e]})),bd.onProgress=(e,t,i)=>{t===i&&(Sp=i),n({active:!0,item:e,loaded:t,total:i,progress:(t-Sp)/(i-Sp)*100||100})},{errors:[],active:!1,progress:0,item:"",loaded:0,total:0}));function Bd(n,e,t){return e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function XL(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),t.push.apply(t,i)}return t}function KL(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?XL(Object(t),!0).forEach(function(i){Bd(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):XL(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}new Ie;new Ie;function $B(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}var Us=function n(e,t,i){var r=this;$B(this,n),Bd(this,"dot2",function(s,o){return r.x*s+r.y*o}),Bd(this,"dot3",function(s,o,a){return r.x*s+r.y*o+r.z*a}),this.x=e,this.y=t,this.z=i},poe=[new Us(1,1,0),new Us(-1,1,0),new Us(1,-1,0),new Us(-1,-1,0),new Us(1,0,1),new Us(-1,0,1),new Us(1,0,-1),new Us(-1,0,-1),new Us(0,1,1),new Us(0,-1,1),new Us(0,1,-1),new Us(0,-1,-1)],YL=[151,160,137,91,90,15,131,13,201,95,96,53,194,233,7,225,140,36,103,30,69,142,8,99,37,240,21,10,23,190,6,148,247,120,234,75,0,26,197,62,94,252,219,203,117,35,11,32,57,177,33,88,237,149,56,87,174,20,125,136,171,168,68,175,74,165,71,134,139,48,27,166,77,146,158,231,83,111,229,122,60,211,133,230,220,105,92,41,55,46,245,40,244,102,143,54,65,25,63,161,1,216,80,73,209,76,132,187,208,89,18,169,200,196,135,130,116,188,159,86,164,100,109,198,173,186,3,64,52,217,226,250,124,123,5,202,38,147,118,126,255,82,85,212,207,206,59,227,47,16,58,17,182,189,28,42,223,183,170,213,119,248,152,2,44,154,163,70,221,153,101,155,167,43,172,9,129,22,39,253,19,98,108,110,79,113,224,232,178,185,112,104,218,246,97,228,251,34,242,193,238,210,144,12,191,179,162,241,81,51,145,235,249,14,239,107,49,192,214,31,181,199,106,157,184,84,204,176,115,121,50,45,127,4,150,254,138,236,205,93,222,114,67,29,24,72,243,141,128,195,78,66,215,61,156,180],JL=new Array(512),QL=new Array(512),moe=function(e){e>0&&e<1&&(e*=65536),e=Math.floor(e),e<256&&(e|=e<<8);for(var t=0;t<256;t++){var i;t&1?i=YL[t]^e&255:i=YL[t]^e>>8&255,JL[t]=JL[t+256]=i,QL[t]=QL[t+256]=poe[i%12]}};moe(0);function goe(n){if(typeof n=="number")n=Math.abs(n);else if(typeof n=="string"){var e=n;n=0;for(var t=0;t<e.length;t++)n=(n+(t+1)*(e.charCodeAt(t)%96))%2147483647}return n===0&&(n=311),n}function ZL(n){var e=goe(n);return function(){var t=e*48271%2147483647;return e=t,t/2147483647}}var yoe=function n(e){var t=this;$B(this,n),Bd(this,"seed",0),Bd(this,"init",function(i){t.seed=i,t.value=ZL(i)}),Bd(this,"value",ZL(this.seed)),this.init(e)},voe=new yoe(Math.random()),xoe={radius:1,center:[0,0,0]};function _oe(n,e){for(var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:voe,i=KL(KL({},xoe),e),r=i.radius,s=i.center,o=0;o<n.length;o+=3){var a=Math.pow(t.value(),.3333333333333333),l=t.value()*2-1,c=t.value()*2-1,u=t.value()*2-1,p=Math.sqrt(l*l+c*c+u*u);l=a*l/p,c=a*c/p,u=a*u/p,n[o]=l*r+s[0],n[o+1]=c*r+s[1],n[o+2]=u*r+s[2]}return n}const woe=()=>parseInt(Ug.replace(/\D+/g,"")),XB=woe();var KB={exports:{}},boe="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",Soe=boe,Toe=Soe;function YB(){}function JB(){}JB.resetWarningCache=YB;var Eoe=function(){function n(i,r,s,o,a,l){if(l!==Toe){var c=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw c.name="Invariant Violation",c}}n.isRequired=n;function e(){return n}var t={array:n,bigint:n,bool:n,func:n,number:n,object:n,string:n,symbol:n,any:n,arrayOf:e,element:n,elementType:n,instanceOf:e,node:n,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:JB,resetWarningCache:YB};return t.PropTypes=t,t};KB.exports=Eoe();var FM=KB.exports;const Ze=Y1(FM),MT=XB>=154?"opaque_fragment":"output_fragment";class Coe extends Rw{constructor(e){super(e),this.onBeforeCompile=(t,i)=>{const{isWebGL2:r}=i.capabilities;t.fragmentShader=t.fragmentShader.replace(`#include <${MT}>`,`
        ${r?`#include <${MT}>`:`#extension GL_OES_standard_derivatives : enable
#include <${MT}>`}
      vec2 cxy = 2.0 * gl_PointCoord - 1.0;
      float r = dot(cxy, cxy);
      float delta = fwidth(r);     
      float mask = 1.0 - smoothstep(1.0 - delta, 1.0 + delta, r);
      gl_FragColor = vec4(gl_FragColor.rgb, mask * gl_FragColor.a );
      #include <tonemapping_fragment>
      #include <${XB>=154?"colorspace_fragment":"encodings_fragment"}>
      `)}}}const Aoe=V.forwardRef((n,e)=>{const[t]=V.useState(()=>new Coe(null));return V.createElement("primitive",oc({},n,{object:t,ref:e,attach:"material"}))});let nu,Tp;const Moe=V.createContext(null),ek=new At,tk=new K,Ioe=V.forwardRef(({children:n,range:e,limit:t=1e3,...i},r)=>{const s=V.useRef(null);V.useImperativeHandle(r,()=>s.current,[]);const[o,a]=V.useState([]),[[l,c,u]]=V.useState(()=>[new Float32Array(t*3),Float32Array.from({length:t*3},()=>1),Float32Array.from({length:t},()=>1)]);V.useEffect(()=>{s.current.geometry.attributes.position.needsUpdate=!0}),Kw(()=>{for(s.current.updateMatrix(),s.current.updateMatrixWorld(),ek.copy(s.current.matrixWorld).invert(),s.current.geometry.drawRange.count=Math.min(t,e!==void 0?e:t,o.length),nu=0;nu<o.length;nu++)Tp=o[nu].current,Tp.getWorldPosition(tk).applyMatrix4(ek),tk.toArray(l,nu*3),s.current.geometry.attributes.position.needsUpdate=!0,Tp.matrixWorldNeedsUpdate=!0,Tp.color.toArray(c,nu*3),s.current.geometry.attributes.color.needsUpdate=!0,u.set([Tp.size],nu),s.current.geometry.attributes.size.needsUpdate=!0});const p=V.useMemo(()=>({getParent:()=>s,subscribe:m=>(a(g=>[...g,m]),()=>a(g=>g.filter(x=>x.current!==m.current)))}),[]);return V.createElement("points",oc({userData:{instances:o},matrixAutoUpdate:!1,ref:s,raycast:()=>null},i),V.createElement("bufferGeometry",null,V.createElement("bufferAttribute",{attach:"attributes-position",count:l.length/3,array:l,itemSize:3,usage:Cu}),V.createElement("bufferAttribute",{attach:"attributes-color",count:c.length/3,array:c,itemSize:3,usage:Cu}),V.createElement("bufferAttribute",{attach:"attributes-size",count:u.length,array:u,itemSize:1,usage:Cu})),V.createElement(Moe.Provider,{value:p},n))}),Poe=V.forwardRef(({children:n,positions:e,colors:t,sizes:i,stride:r=3,...s},o)=>{const a=V.useRef(null);return V.useImperativeHandle(o,()=>a.current,[]),Kw(()=>{const l=a.current.geometry.attributes;l.position.needsUpdate=!0,t&&(l.color.needsUpdate=!0),i&&(l.size.needsUpdate=!0)}),V.createElement("points",oc({ref:a},s),V.createElement("bufferGeometry",null,V.createElement("bufferAttribute",{attach:"attributes-position",count:e.length/r,array:e,itemSize:r,usage:Cu}),t&&V.createElement("bufferAttribute",{attach:"attributes-color",count:t.length/r,array:t,itemSize:3,usage:Cu}),i&&V.createElement("bufferAttribute",{attach:"attributes-size",count:i.length/r,array:i,itemSize:1,usage:Cu})),n)}),Roe=V.forwardRef((n,e)=>n.positions instanceof Float32Array?V.createElement(Poe,oc({},n,{ref:e})):V.createElement(Ioe,oc({},n,{ref:e})));function Noe({all:n,scene:e,camera:t}){const i=kx(({gl:o})=>o),r=kx(({camera:o})=>o),s=kx(({scene:o})=>o);return V.useLayoutEffect(()=>{const o=[];n&&(e||s).traverse(c=>{c.visible===!1&&(o.push(c),c.visible=!0)}),i.compile(e||s,t||r);const a=new uM(128);new cM(.01,1e5,a).update(i,e||s),a.dispose(),o.forEach(c=>c.visible=!1)},[]),null}const Doe=n=>{const e=V.useRef(),[t]=V.useState(()=>_oe(new Float32Array(5e3),{radius:1.2}));return Kw((i,r)=>{e.current.rotation.x-=r/10,e.current.rotation.y-=r/15}),h.jsx("group",{rotation:[0,0,Math.PI/4],children:h.jsx(Roe,{ref:e,positions:t,stride:3,frustumCulled:!0,...n,children:h.jsx(Aoe,{transparent:!0,color:"#f272c8",size:.004,sizeAtttenuation:!0,depthWrite:!1})})})},Loe=()=>h.jsx("div",{className:"w-full h-auto absolute inset-0 z-[-1]",children:h.jsxs(WB,{camera:{position:[0,0,1]},children:[h.jsx(V.Suspense,{fallback:null,children:h.jsx(Doe,{})}),h.jsx(Noe,{all:!0})]})}),QB=V.createContext({});function koe(n){const e=V.useRef(null);return e.current===null&&(e.current=n()),e.current}const VM=V.createContext(null),ZB=V.createContext({transformPagePoint:n=>n,isStatic:!1,reducedMotion:"never"});function Ooe(n=!0){const e=V.useContext(VM);if(e===null)return[!0,null];const{isPresent:t,onExitComplete:i,register:r}=e,s=V.useId();V.useEffect(()=>{n&&r(s)},[n]);const o=V.useCallback(()=>n&&i&&i(s),[s,i,n]);return!t&&i?[!1,o]:[!0]}const BM=typeof window<"u",Uoe=BM?V.useLayoutEffect:V.useEffect,ws=n=>n;let ez=ws;function zM(n){let e;return()=>(e===void 0&&(e=n()),e)}const cf=(n,e,t)=>{const i=e-n;return i===0?1:(t-n)/i},Ca=n=>n*1e3,Aa=n=>n/1e3,joe={useManualTiming:!1};function Foe(n){let e=new Set,t=new Set,i=!1,r=!1;const s=new WeakSet;let o={delta:0,timestamp:0,isProcessing:!1};function a(c){s.has(c)&&(l.schedule(c),n()),c(o)}const l={schedule:(c,u=!1,p=!1)=>{const g=p&&i?e:t;return u&&s.add(c),g.has(c)||g.add(c),c},cancel:c=>{t.delete(c),s.delete(c)},process:c=>{if(o=c,i){r=!0;return}i=!0,[e,t]=[t,e],e.forEach(a),e.clear(),i=!1,r&&(r=!1,l.process(c))}};return l}const nx=["read","resolveKeyframes","update","preRender","render","postRender"],Voe=40;function tz(n,e){let t=!1,i=!0;const r={delta:0,timestamp:0,isProcessing:!1},s=()=>t=!0,o=nx.reduce((v,S)=>(v[S]=Foe(s),v),{}),{read:a,resolveKeyframes:l,update:c,preRender:u,render:p,postRender:m}=o,g=()=>{const v=performance.now();t=!1,r.delta=i?1e3/60:Math.max(Math.min(v-r.timestamp,Voe),1),r.timestamp=v,r.isProcessing=!0,a.process(r),l.process(r),c.process(r),u.process(r),p.process(r),m.process(r),r.isProcessing=!1,t&&e&&(i=!1,n(g))},x=()=>{t=!0,i=!0,r.isProcessing||n(g)};return{schedule:nx.reduce((v,S)=>{const E=o[S];return v[S]=(C,U=!1,O=!1)=>(t||x(),E.schedule(C,U,O)),v},{}),cancel:v=>{for(let S=0;S<nx.length;S++)o[nx[S]].cancel(v)},state:r,steps:o}}const{schedule:Fn,cancel:ac,state:Wi,steps:IT}=tz(typeof requestAnimationFrame<"u"?requestAnimationFrame:ws,!0),nz=V.createContext({strict:!1}),nk={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},uf={};for(const n in nk)uf[n]={isEnabled:e=>nk[n].some(t=>!!e[t])};function Boe(n){for(const e in n)uf[e]={...uf[e],...n[e]}}const zoe=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function g_(n){return n.startsWith("while")||n.startsWith("drag")&&n!=="draggable"||n.startsWith("layout")||n.startsWith("onTap")||n.startsWith("onPan")||n.startsWith("onLayout")||zoe.has(n)}let iz=n=>!g_(n);function Hoe(n){n&&(iz=e=>e.startsWith("on")?!g_(e):n(e))}try{Hoe(require("@emotion/is-prop-valid").default)}catch{}function Goe(n,e,t){const i={};for(const r in n)r==="values"&&typeof n.values=="object"||(iz(r)||t===!0&&g_(r)||!e&&!g_(r)||n.draggable&&r.startsWith("onDrag"))&&(i[r]=n[r]);return i}function Woe(n){if(typeof Proxy>"u")return n;const e=new Map,t=(...i)=>n(...i);return new Proxy(t,{get:(i,r)=>r==="create"?n:(e.has(r)||e.set(r,n(r)),e.get(r))})}const Yw=V.createContext({});function fg(n){return typeof n=="string"||Array.isArray(n)}function Jw(n){return n!==null&&typeof n=="object"&&typeof n.start=="function"}const HM=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],GM=["initial",...HM];function Qw(n){return Jw(n.animate)||GM.some(e=>fg(n[e]))}function rz(n){return!!(Qw(n)||n.variants)}function qoe(n,e){if(Qw(n)){const{initial:t,animate:i}=n;return{initial:t===!1||fg(t)?t:void 0,animate:fg(i)?i:void 0}}return n.inherit!==!1?e:{}}function $oe(n){const{initial:e,animate:t}=qoe(n,V.useContext(Yw));return V.useMemo(()=>({initial:e,animate:t}),[ik(e),ik(t)])}function ik(n){return Array.isArray(n)?n.join(" "):n}const Xoe=Symbol.for("motionComponentSymbol");function Ed(n){return n&&typeof n=="object"&&Object.prototype.hasOwnProperty.call(n,"current")}function Koe(n,e,t){return V.useCallback(i=>{i&&n.onMount&&n.onMount(i),e&&(i?e.mount(i):e.unmount()),t&&(typeof t=="function"?t(i):Ed(t)&&(t.current=i))},[e])}const WM=n=>n.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),Yoe="framerAppearId",sz="data-"+WM(Yoe),{schedule:qM}=tz(queueMicrotask,!1),oz=V.createContext({});function Joe(n,e,t,i,r){var s,o;const{visualElement:a}=V.useContext(Yw),l=V.useContext(nz),c=V.useContext(VM),u=V.useContext(ZB).reducedMotion,p=V.useRef(null);i=i||l.renderer,!p.current&&i&&(p.current=i(n,{visualState:e,parent:a,props:t,presenceContext:c,blockInitialAnimation:c?c.initial===!1:!1,reducedMotionConfig:u}));const m=p.current,g=V.useContext(oz);m&&!m.projection&&r&&(m.type==="html"||m.type==="svg")&&Qoe(p.current,t,r,g);const x=V.useRef(!1);V.useInsertionEffect(()=>{m&&x.current&&m.update(t,c)});const b=t[sz],w=V.useRef(!!b&&!(!((s=window.MotionHandoffIsComplete)===null||s===void 0)&&s.call(window,b))&&((o=window.MotionHasOptimisedAnimation)===null||o===void 0?void 0:o.call(window,b)));return Uoe(()=>{m&&(x.current=!0,window.MotionIsMounted=!0,m.updateFeatures(),qM.render(m.render),w.current&&m.animationState&&m.animationState.animateChanges())}),V.useEffect(()=>{m&&(!w.current&&m.animationState&&m.animationState.animateChanges(),w.current&&(queueMicrotask(()=>{var v;(v=window.MotionHandoffMarkAsComplete)===null||v===void 0||v.call(window,b)}),w.current=!1))}),m}function Qoe(n,e,t,i){const{layoutId:r,layout:s,drag:o,dragConstraints:a,layoutScroll:l,layoutRoot:c}=e;n.projection=new t(n.latestValues,e["data-framer-portal-id"]?void 0:az(n.parent)),n.projection.setOptions({layoutId:r,layout:s,alwaysMeasureLayout:!!o||a&&Ed(a),visualElement:n,animationType:typeof s=="string"?s:"both",initialPromotionConfig:i,layoutScroll:l,layoutRoot:c})}function az(n){if(n)return n.options.allowProjection!==!1?n.projection:az(n.parent)}function Zoe({preloadedFeatures:n,createVisualElement:e,useRender:t,useVisualState:i,Component:r}){var s,o;n&&Boe(n);function a(c,u){let p;const m={...V.useContext(ZB),...c,layoutId:eae(c)},{isStatic:g}=m,x=$oe(c),b=i(c,g);if(!g&&BM){tae();const w=nae(m);p=w.MeasureLayout,x.visualElement=Joe(r,b,m,e,w.ProjectionNode)}return h.jsxs(Yw.Provider,{value:x,children:[p&&x.visualElement?h.jsx(p,{visualElement:x.visualElement,...m}):null,t(r,c,Koe(b,x.visualElement,u),b,g,x.visualElement)]})}a.displayName=`motion.${typeof r=="string"?r:`create(${(o=(s=r.displayName)!==null&&s!==void 0?s:r.name)!==null&&o!==void 0?o:""})`}`;const l=V.forwardRef(a);return l[Xoe]=r,l}function eae({layoutId:n}){const e=V.useContext(QB).id;return e&&n!==void 0?e+"-"+n:n}function tae(n,e){V.useContext(nz).strict}function nae(n){const{drag:e,layout:t}=uf;if(!e&&!t)return{};const i={...e,...t};return{MeasureLayout:e?.isEnabled(n)||t?.isEnabled(n)?i.MeasureLayout:void 0,ProjectionNode:i.ProjectionNode}}const iae=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function $M(n){return typeof n!="string"||n.includes("-")?!1:!!(iae.indexOf(n)>-1||/[A-Z]/u.test(n))}function rk(n){const e=[{},{}];return n?.values.forEach((t,i)=>{e[0][i]=t.get(),e[1][i]=t.getVelocity()}),e}function XM(n,e,t,i){if(typeof e=="function"){const[r,s]=rk(i);e=e(t!==void 0?t:n.custom,r,s)}if(typeof e=="string"&&(e=n.variants&&n.variants[e]),typeof e=="function"){const[r,s]=rk(i);e=e(t!==void 0?t:n.custom,r,s)}return e}const P1=n=>Array.isArray(n),rae=n=>!!(n&&typeof n=="object"&&n.mix&&n.toValue),sae=n=>P1(n)?n[n.length-1]||0:n,yr=n=>!!(n&&n.getVelocity);function Ox(n){const e=yr(n)?n.get():n;return rae(e)?e.toValue():e}function oae({scrapeMotionValuesFromProps:n,createRenderState:e,onUpdate:t},i,r,s){const o={latestValues:aae(i,r,s,n),renderState:e()};return t&&(o.onMount=a=>t({props:i,current:a,...o}),o.onUpdate=a=>t(a)),o}const lz=n=>(e,t)=>{const i=V.useContext(Yw),r=V.useContext(VM),s=()=>oae(n,e,i,r);return t?s():koe(s)};function aae(n,e,t,i){const r={},s=i(n,{});for(const m in s)r[m]=Ox(s[m]);let{initial:o,animate:a}=n;const l=Qw(n),c=rz(n);e&&c&&!l&&n.inherit!==!1&&(o===void 0&&(o=e.initial),a===void 0&&(a=e.animate));let u=t?t.initial===!1:!1;u=u||o===!1;const p=u?a:o;if(p&&typeof p!="boolean"&&!Jw(p)){const m=Array.isArray(p)?p:[p];for(let g=0;g<m.length;g++){const x=XM(n,m[g]);if(x){const{transitionEnd:b,transition:w,...v}=x;for(const S in v){let E=v[S];if(Array.isArray(E)){const C=u?E.length-1:0;E=E[C]}E!==null&&(r[S]=E)}for(const S in b)r[S]=b[S]}}}return r}const If=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],oh=new Set(If),cz=n=>e=>typeof e=="string"&&e.startsWith(n),uz=cz("--"),lae=cz("var(--"),KM=n=>lae(n)?cae.test(n.split("/*")[0].trim()):!1,cae=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,hz=(n,e)=>e&&typeof n=="number"?e.transform(n):n,Va=(n,e,t)=>t>e?e:t<n?n:t,Pf={test:n=>typeof n=="number",parse:parseFloat,transform:n=>n},pg={...Pf,transform:n=>Va(0,1,n)},ix={...Pf,default:1},Jg=n=>({test:e=>typeof e=="string"&&e.endsWith(n)&&e.split(" ").length===1,parse:parseFloat,transform:e=>`${e}${n}`}),pl=Jg("deg"),Wo=Jg("%"),Et=Jg("px"),uae=Jg("vh"),hae=Jg("vw"),sk={...Wo,parse:n=>Wo.parse(n)/100,transform:n=>Wo.transform(n*100)},dae={borderWidth:Et,borderTopWidth:Et,borderRightWidth:Et,borderBottomWidth:Et,borderLeftWidth:Et,borderRadius:Et,radius:Et,borderTopLeftRadius:Et,borderTopRightRadius:Et,borderBottomRightRadius:Et,borderBottomLeftRadius:Et,width:Et,maxWidth:Et,height:Et,maxHeight:Et,top:Et,right:Et,bottom:Et,left:Et,padding:Et,paddingTop:Et,paddingRight:Et,paddingBottom:Et,paddingLeft:Et,margin:Et,marginTop:Et,marginRight:Et,marginBottom:Et,marginLeft:Et,backgroundPositionX:Et,backgroundPositionY:Et},fae={rotate:pl,rotateX:pl,rotateY:pl,rotateZ:pl,scale:ix,scaleX:ix,scaleY:ix,scaleZ:ix,skew:pl,skewX:pl,skewY:pl,distance:Et,translateX:Et,translateY:Et,translateZ:Et,x:Et,y:Et,z:Et,perspective:Et,transformPerspective:Et,opacity:pg,originX:sk,originY:sk,originZ:Et},ok={...Pf,transform:Math.round},YM={...dae,...fae,zIndex:ok,size:Et,fillOpacity:pg,strokeOpacity:pg,numOctaves:ok},pae={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},mae=If.length;function gae(n,e,t){let i="",r=!0;for(let s=0;s<mae;s++){const o=If[s],a=n[o];if(a===void 0)continue;let l=!0;if(typeof a=="number"?l=a===(o.startsWith("scale")?1:0):l=parseFloat(a)===0,!l||t){const c=hz(a,YM[o]);if(!l){r=!1;const u=pae[o]||o;i+=`${u}(${c}) `}t&&(e[o]=c)}}return i=i.trim(),t?i=t(e,r?"":i):r&&(i="none"),i}function JM(n,e,t){const{style:i,vars:r,transformOrigin:s}=n;let o=!1,a=!1;for(const l in e){const c=e[l];if(oh.has(l)){o=!0;continue}else if(uz(l)){r[l]=c;continue}else{const u=hz(c,YM[l]);l.startsWith("origin")?(a=!0,s[l]=u):i[l]=u}}if(e.transform||(o||t?i.transform=gae(e,n.transform,t):i.transform&&(i.transform="none")),a){const{originX:l="50%",originY:c="50%",originZ:u=0}=s;i.transformOrigin=`${l} ${c} ${u}`}}const yae={offset:"stroke-dashoffset",array:"stroke-dasharray"},vae={offset:"strokeDashoffset",array:"strokeDasharray"};function xae(n,e,t=1,i=0,r=!0){n.pathLength=1;const s=r?yae:vae;n[s.offset]=Et.transform(-i);const o=Et.transform(e),a=Et.transform(t);n[s.array]=`${o} ${a}`}function ak(n,e,t){return typeof n=="string"?n:Et.transform(e+t*n)}function _ae(n,e,t){const i=ak(e,n.x,n.width),r=ak(t,n.y,n.height);return`${i} ${r}`}function QM(n,{attrX:e,attrY:t,attrScale:i,originX:r,originY:s,pathLength:o,pathSpacing:a=1,pathOffset:l=0,...c},u,p){if(JM(n,c,p),u){n.style.viewBox&&(n.attrs.viewBox=n.style.viewBox);return}n.attrs=n.style,n.style={};const{attrs:m,style:g,dimensions:x}=n;m.transform&&(x&&(g.transform=m.transform),delete m.transform),x&&(r!==void 0||s!==void 0||g.transform)&&(g.transformOrigin=_ae(x,r!==void 0?r:.5,s!==void 0?s:.5)),e!==void 0&&(m.x=e),t!==void 0&&(m.y=t),i!==void 0&&(m.scale=i),o!==void 0&&xae(m,o,a,l,!1)}const ZM=()=>({style:{},transform:{},transformOrigin:{},vars:{}}),dz=()=>({...ZM(),attrs:{}}),eI=n=>typeof n=="string"&&n.toLowerCase()==="svg";function fz(n,{style:e,vars:t},i,r){Object.assign(n.style,e,r&&r.getProjectionStyles(i));for(const s in t)n.style.setProperty(s,t[s])}const pz=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function mz(n,e,t,i){fz(n,e,void 0,i);for(const r in e.attrs)n.setAttribute(pz.has(r)?r:WM(r),e.attrs[r])}const y_={};function wae(n){Object.assign(y_,n)}function gz(n,{layout:e,layoutId:t}){return oh.has(n)||n.startsWith("origin")||(e||t!==void 0)&&(!!y_[n]||n==="opacity")}function tI(n,e,t){var i;const{style:r}=n,s={};for(const o in r)(yr(r[o])||e.style&&yr(e.style[o])||gz(o,n)||((i=t?.getValue(o))===null||i===void 0?void 0:i.liveStyle)!==void 0)&&(s[o]=r[o]);return s}function yz(n,e,t){const i=tI(n,e,t);for(const r in n)if(yr(n[r])||yr(e[r])){const s=If.indexOf(r)!==-1?"attr"+r.charAt(0).toUpperCase()+r.substring(1):r;i[s]=n[r]}return i}function bae(n,e){try{e.dimensions=typeof n.getBBox=="function"?n.getBBox():n.getBoundingClientRect()}catch{e.dimensions={x:0,y:0,width:0,height:0}}}const lk=["x","y","width","height","cx","cy","r"],Sae={useVisualState:lz({scrapeMotionValuesFromProps:yz,createRenderState:dz,onUpdate:({props:n,prevProps:e,current:t,renderState:i,latestValues:r})=>{if(!t)return;let s=!!n.drag;if(!s){for(const a in r)if(oh.has(a)){s=!0;break}}if(!s)return;let o=!e;if(e)for(let a=0;a<lk.length;a++){const l=lk[a];n[l]!==e[l]&&(o=!0)}o&&Fn.read(()=>{bae(t,i),Fn.render(()=>{QM(i,r,eI(t.tagName),n.transformTemplate),mz(t,i)})})}})},Tae={useVisualState:lz({scrapeMotionValuesFromProps:tI,createRenderState:ZM})};function vz(n,e,t){for(const i in e)!yr(e[i])&&!gz(i,t)&&(n[i]=e[i])}function Eae({transformTemplate:n},e){return V.useMemo(()=>{const t=ZM();return JM(t,e,n),Object.assign({},t.vars,t.style)},[e])}function Cae(n,e){const t=n.style||{},i={};return vz(i,t,n),Object.assign(i,Eae(n,e)),i}function Aae(n,e){const t={},i=Cae(n,e);return n.drag&&n.dragListener!==!1&&(t.draggable=!1,i.userSelect=i.WebkitUserSelect=i.WebkitTouchCallout="none",i.touchAction=n.drag===!0?"none":`pan-${n.drag==="x"?"y":"x"}`),n.tabIndex===void 0&&(n.onTap||n.onTapStart||n.whileTap)&&(t.tabIndex=0),t.style=i,t}function Mae(n,e,t,i){const r=V.useMemo(()=>{const s=dz();return QM(s,e,eI(i),n.transformTemplate),{...s.attrs,style:{...s.style}}},[e]);if(n.style){const s={};vz(s,n.style,n),r.style={...s,...r.style}}return r}function Iae(n=!1){return(t,i,r,{latestValues:s},o)=>{const l=($M(t)?Mae:Aae)(i,s,o,t),c=Goe(i,typeof t=="string",n),u=t!==V.Fragment?{...c,...l,ref:r}:{},{children:p}=i,m=V.useMemo(()=>yr(p)?p.get():p,[p]);return V.createElement(t,{...u,children:m})}}function Pae(n,e){return function(i,{forwardMotionProps:r}={forwardMotionProps:!1}){const o={...$M(i)?Sae:Tae,preloadedFeatures:n,useRender:Iae(r),createVisualElement:e,Component:i};return Zoe(o)}}function xz(n,e){if(!Array.isArray(e))return!1;const t=e.length;if(t!==n.length)return!1;for(let i=0;i<t;i++)if(e[i]!==n[i])return!1;return!0}function Zw(n,e,t){const i=n.getProps();return XM(i,e,t!==void 0?t:i.custom,n)}const Rae=zM(()=>window.ScrollTimeline!==void 0);class Nae{constructor(e){this.stop=()=>this.runAll("stop"),this.animations=e.filter(Boolean)}get finished(){return Promise.all(this.animations.map(e=>"finished"in e?e.finished:e))}getAll(e){return this.animations[0][e]}setAll(e,t){for(let i=0;i<this.animations.length;i++)this.animations[i][e]=t}attachTimeline(e,t){const i=this.animations.map(r=>{if(Rae()&&r.attachTimeline)return r.attachTimeline(e);if(typeof t=="function")return t(r)});return()=>{i.forEach((r,s)=>{r&&r(),this.animations[s].stop()})}}get time(){return this.getAll("time")}set time(e){this.setAll("time",e)}get speed(){return this.getAll("speed")}set speed(e){this.setAll("speed",e)}get startTime(){return this.getAll("startTime")}get duration(){let e=0;for(let t=0;t<this.animations.length;t++)e=Math.max(e,this.animations[t].duration);return e}runAll(e){this.animations.forEach(t=>t[e]())}flatten(){this.runAll("flatten")}play(){this.runAll("play")}pause(){this.runAll("pause")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}class Dae extends Nae{then(e,t){return Promise.all(this.animations).then(e).catch(t)}}function nI(n,e){return n?n[e]||n.default||n:void 0}const R1=2e4;function _z(n){let e=0;const t=50;let i=n.next(e);for(;!i.done&&e<R1;)e+=t,i=n.next(e);return e>=R1?1/0:e}function iI(n){return typeof n=="function"}function ck(n,e){n.timeline=e,n.onfinish=null}const rI=n=>Array.isArray(n)&&typeof n[0]=="number",Lae={linearEasing:void 0};function kae(n,e){const t=zM(n);return()=>{var i;return(i=Lae[e])!==null&&i!==void 0?i:t()}}const v_=kae(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),wz=(n,e,t=10)=>{let i="";const r=Math.max(Math.round(e/t),2);for(let s=0;s<r;s++)i+=n(cf(0,r-1,s))+", ";return`linear(${i.substring(0,i.length-2)})`};function bz(n){return!!(typeof n=="function"&&v_()||!n||typeof n=="string"&&(n in N1||v_())||rI(n)||Array.isArray(n)&&n.every(bz))}const jp=([n,e,t,i])=>`cubic-bezier(${n}, ${e}, ${t}, ${i})`,N1={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:jp([0,.65,.55,1]),circOut:jp([.55,0,1,.45]),backIn:jp([.31,.01,.66,-.59]),backOut:jp([.33,1.53,.69,.99])};function Sz(n,e){if(n)return typeof n=="function"&&v_()?wz(n,e):rI(n)?jp(n):Array.isArray(n)?n.map(t=>Sz(t,e)||N1.easeOut):N1[n]}const ro={x:!1,y:!1};function Tz(){return ro.x||ro.y}function Oae(n,e,t){var i;if(n instanceof Element)return[n];if(typeof n=="string"){let r=document;const s=(i=void 0)!==null&&i!==void 0?i:r.querySelectorAll(n);return s?Array.from(s):[]}return Array.from(n)}function Ez(n,e){const t=Oae(n),i=new AbortController,r={passive:!0,...e,signal:i.signal};return[t,r,()=>i.abort()]}function uk(n){return e=>{e.pointerType==="touch"||Tz()||n(e)}}function Uae(n,e,t={}){const[i,r,s]=Ez(n,t),o=uk(a=>{const{target:l}=a,c=e(a);if(typeof c!="function"||!l)return;const u=uk(p=>{c(p),l.removeEventListener("pointerleave",u)});l.addEventListener("pointerleave",u,r)});return i.forEach(a=>{a.addEventListener("pointerenter",o,r)}),s}const Cz=(n,e)=>e?n===e?!0:Cz(n,e.parentElement):!1,sI=n=>n.pointerType==="mouse"?typeof n.button!="number"||n.button<=0:n.isPrimary!==!1,jae=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function Fae(n){return jae.has(n.tagName)||n.tabIndex!==-1}const Fp=new WeakSet;function hk(n){return e=>{e.key==="Enter"&&n(e)}}function PT(n,e){n.dispatchEvent(new PointerEvent("pointer"+e,{isPrimary:!0,bubbles:!0}))}const Vae=(n,e)=>{const t=n.currentTarget;if(!t)return;const i=hk(()=>{if(Fp.has(t))return;PT(t,"down");const r=hk(()=>{PT(t,"up")}),s=()=>PT(t,"cancel");t.addEventListener("keyup",r,e),t.addEventListener("blur",s,e)});t.addEventListener("keydown",i,e),t.addEventListener("blur",()=>t.removeEventListener("keydown",i),e)};function dk(n){return sI(n)&&!Tz()}function Bae(n,e,t={}){const[i,r,s]=Ez(n,t),o=a=>{const l=a.currentTarget;if(!dk(a)||Fp.has(l))return;Fp.add(l);const c=e(a),u=(g,x)=>{window.removeEventListener("pointerup",p),window.removeEventListener("pointercancel",m),!(!dk(g)||!Fp.has(l))&&(Fp.delete(l),typeof c=="function"&&c(g,{success:x}))},p=g=>{u(g,t.useGlobalTarget||Cz(l,g.target))},m=g=>{u(g,!1)};window.addEventListener("pointerup",p,r),window.addEventListener("pointercancel",m,r)};return i.forEach(a=>{!Fae(a)&&a.getAttribute("tabindex")===null&&(a.tabIndex=0),(t.useGlobalTarget?window:a).addEventListener("pointerdown",o,r),a.addEventListener("focus",c=>Vae(c,r),r)}),s}function zae(n){return n==="x"||n==="y"?ro[n]?null:(ro[n]=!0,()=>{ro[n]=!1}):ro.x||ro.y?null:(ro.x=ro.y=!0,()=>{ro.x=ro.y=!1})}const Az=new Set(["width","height","top","left","right","bottom",...If]);let Ux;function Hae(){Ux=void 0}const qo={now:()=>(Ux===void 0&&qo.set(Wi.isProcessing||joe.useManualTiming?Wi.timestamp:performance.now()),Ux),set:n=>{Ux=n,queueMicrotask(Hae)}};function oI(n,e){n.indexOf(e)===-1&&n.push(e)}function aI(n,e){const t=n.indexOf(e);t>-1&&n.splice(t,1)}class lI{constructor(){this.subscriptions=[]}add(e){return oI(this.subscriptions,e),()=>aI(this.subscriptions,e)}notify(e,t,i){const r=this.subscriptions.length;if(r)if(r===1)this.subscriptions[0](e,t,i);else for(let s=0;s<r;s++){const o=this.subscriptions[s];o&&o(e,t,i)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}function Mz(n,e){return e?n*(1e3/e):0}const fk=30,Gae=n=>!isNaN(parseFloat(n));class Wae{constructor(e,t={}){this.version="11.18.2",this.canTrackVelocity=null,this.events={},this.updateAndNotify=(i,r=!0)=>{const s=qo.now();this.updatedAt!==s&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(i),this.current!==this.prev&&this.events.change&&this.events.change.notify(this.current),r&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.hasAnimated=!1,this.setCurrent(e),this.owner=t.owner}setCurrent(e){this.current=e,this.updatedAt=qo.now(),this.canTrackVelocity===null&&e!==void 0&&(this.canTrackVelocity=Gae(this.current))}setPrevFrameValue(e=this.current){this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt}onChange(e){return this.on("change",e)}on(e,t){this.events[e]||(this.events[e]=new lI);const i=this.events[e].add(t);return e==="change"?()=>{i(),Fn.read(()=>{this.events.change.getSize()||this.stop()})}:i}clearListeners(){for(const e in this.events)this.events[e].clear()}attach(e,t){this.passiveEffect=e,this.stopPassiveEffect=t}set(e,t=!0){!t||!this.passiveEffect?this.updateAndNotify(e,t):this.passiveEffect(e,this.updateAndNotify)}setWithVelocity(e,t,i){this.set(t),this.prev=void 0,this.prevFrameValue=e,this.prevUpdatedAt=this.updatedAt-i}jump(e,t=!0){this.updateAndNotify(e),this.prev=e,this.prevUpdatedAt=this.prevFrameValue=void 0,t&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const e=qo.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||e-this.updatedAt>fk)return 0;const t=Math.min(this.updatedAt-this.prevUpdatedAt,fk);return Mz(parseFloat(this.current)-parseFloat(this.prevFrameValue),t)}start(e){return this.stop(),new Promise(t=>{this.hasAnimated=!0,this.animation=e(t),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function mg(n,e){return new Wae(n,e)}function qae(n,e,t){n.hasValue(e)?n.getValue(e).set(t):n.addValue(e,mg(t))}function $ae(n,e){const t=Zw(n,e);let{transitionEnd:i={},transition:r={},...s}=t||{};s={...s,...i};for(const o in s){const a=sae(s[o]);qae(n,o,a)}}function Xae(n){return!!(yr(n)&&n.add)}function D1(n,e){const t=n.getValue("willChange");if(Xae(t))return t.add(e)}function Iz(n){return n.props[sz]}const Pz=(n,e,t)=>(((1-3*t+3*e)*n+(3*t-6*e))*n+3*e)*n,Kae=1e-7,Yae=12;function Jae(n,e,t,i,r){let s,o,a=0;do o=e+(t-e)/2,s=Pz(o,i,r)-n,s>0?t=o:e=o;while(Math.abs(s)>Kae&&++a<Yae);return o}function Qg(n,e,t,i){if(n===e&&t===i)return ws;const r=s=>Jae(s,0,1,n,t);return s=>s===0||s===1?s:Pz(r(s),e,i)}const Rz=n=>e=>e<=.5?n(2*e)/2:(2-n(2*(1-e)))/2,Nz=n=>e=>1-n(1-e),Dz=Qg(.33,1.53,.69,.99),cI=Nz(Dz),Lz=Rz(cI),kz=n=>(n*=2)<1?.5*cI(n):.5*(2-Math.pow(2,-10*(n-1))),uI=n=>1-Math.sin(Math.acos(n)),Oz=Nz(uI),Uz=Rz(uI),jz=n=>/^0[^.\s]+$/u.test(n);function Qae(n){return typeof n=="number"?n===0:n!==null?n==="none"||n==="0"||jz(n):!0}const dm=n=>Math.round(n*1e5)/1e5,hI=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function Zae(n){return n==null}const ele=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,dI=(n,e)=>t=>!!(typeof t=="string"&&ele.test(t)&&t.startsWith(n)||e&&!Zae(t)&&Object.prototype.hasOwnProperty.call(t,e)),Fz=(n,e,t)=>i=>{if(typeof i!="string")return i;const[r,s,o,a]=i.match(hI);return{[n]:parseFloat(r),[e]:parseFloat(s),[t]:parseFloat(o),alpha:a!==void 0?parseFloat(a):1}},tle=n=>Va(0,255,n),RT={...Pf,transform:n=>Math.round(tle(n))},_u={test:dI("rgb","red"),parse:Fz("red","green","blue"),transform:({red:n,green:e,blue:t,alpha:i=1})=>"rgba("+RT.transform(n)+", "+RT.transform(e)+", "+RT.transform(t)+", "+dm(pg.transform(i))+")"};function nle(n){let e="",t="",i="",r="";return n.length>5?(e=n.substring(1,3),t=n.substring(3,5),i=n.substring(5,7),r=n.substring(7,9)):(e=n.substring(1,2),t=n.substring(2,3),i=n.substring(3,4),r=n.substring(4,5),e+=e,t+=t,i+=i,r+=r),{red:parseInt(e,16),green:parseInt(t,16),blue:parseInt(i,16),alpha:r?parseInt(r,16)/255:1}}const L1={test:dI("#"),parse:nle,transform:_u.transform},Cd={test:dI("hsl","hue"),parse:Fz("hue","saturation","lightness"),transform:({hue:n,saturation:e,lightness:t,alpha:i=1})=>"hsla("+Math.round(n)+", "+Wo.transform(dm(e))+", "+Wo.transform(dm(t))+", "+dm(pg.transform(i))+")"},dr={test:n=>_u.test(n)||L1.test(n)||Cd.test(n),parse:n=>_u.test(n)?_u.parse(n):Cd.test(n)?Cd.parse(n):L1.parse(n),transform:n=>typeof n=="string"?n:n.hasOwnProperty("red")?_u.transform(n):Cd.transform(n)},ile=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function rle(n){var e,t;return isNaN(n)&&typeof n=="string"&&(((e=n.match(hI))===null||e===void 0?void 0:e.length)||0)+(((t=n.match(ile))===null||t===void 0?void 0:t.length)||0)>0}const Vz="number",Bz="color",sle="var",ole="var(",pk="${}",ale=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function gg(n){const e=n.toString(),t=[],i={color:[],number:[],var:[]},r=[];let s=0;const a=e.replace(ale,l=>(dr.test(l)?(i.color.push(s),r.push(Bz),t.push(dr.parse(l))):l.startsWith(ole)?(i.var.push(s),r.push(sle),t.push(l)):(i.number.push(s),r.push(Vz),t.push(parseFloat(l))),++s,pk)).split(pk);return{values:t,split:a,indexes:i,types:r}}function zz(n){return gg(n).values}function Hz(n){const{split:e,types:t}=gg(n),i=e.length;return r=>{let s="";for(let o=0;o<i;o++)if(s+=e[o],r[o]!==void 0){const a=t[o];a===Vz?s+=dm(r[o]):a===Bz?s+=dr.transform(r[o]):s+=r[o]}return s}}const lle=n=>typeof n=="number"?0:n;function cle(n){const e=zz(n);return Hz(n)(e.map(lle))}const lc={test:rle,parse:zz,createTransformer:Hz,getAnimatableNone:cle},ule=new Set(["brightness","contrast","saturate","opacity"]);function hle(n){const[e,t]=n.slice(0,-1).split("(");if(e==="drop-shadow")return n;const[i]=t.match(hI)||[];if(!i)return n;const r=t.replace(i,"");let s=ule.has(e)?1:0;return i!==t&&(s*=100),e+"("+s+r+")"}const dle=/\b([a-z-]*)\(.*?\)/gu,k1={...lc,getAnimatableNone:n=>{const e=n.match(dle);return e?e.map(hle).join(" "):n}},fle={...YM,color:dr,backgroundColor:dr,outlineColor:dr,fill:dr,stroke:dr,borderColor:dr,borderTopColor:dr,borderRightColor:dr,borderBottomColor:dr,borderLeftColor:dr,filter:k1,WebkitFilter:k1},fI=n=>fle[n];function Gz(n,e){let t=fI(n);return t!==k1&&(t=lc),t.getAnimatableNone?t.getAnimatableNone(e):void 0}const ple=new Set(["auto","none","0"]);function mle(n,e,t){let i=0,r;for(;i<n.length&&!r;){const s=n[i];typeof s=="string"&&!ple.has(s)&&gg(s).values.length&&(r=n[i]),i++}if(r&&t)for(const s of e)n[s]=Gz(t,r)}const mk=n=>n===Pf||n===Et,gk=(n,e)=>parseFloat(n.split(", ")[e]),yk=(n,e)=>(t,{transform:i})=>{if(i==="none"||!i)return 0;const r=i.match(/^matrix3d\((.+)\)$/u);if(r)return gk(r[1],e);{const s=i.match(/^matrix\((.+)\)$/u);return s?gk(s[1],n):0}},gle=new Set(["x","y","z"]),yle=If.filter(n=>!gle.has(n));function vle(n){const e=[];return yle.forEach(t=>{const i=n.getValue(t);i!==void 0&&(e.push([t,i.get()]),i.set(t.startsWith("scale")?1:0))}),e}const hf={width:({x:n},{paddingLeft:e="0",paddingRight:t="0"})=>n.max-n.min-parseFloat(e)-parseFloat(t),height:({y:n},{paddingTop:e="0",paddingBottom:t="0"})=>n.max-n.min-parseFloat(e)-parseFloat(t),top:(n,{top:e})=>parseFloat(e),left:(n,{left:e})=>parseFloat(e),bottom:({y:n},{top:e})=>parseFloat(e)+(n.max-n.min),right:({x:n},{left:e})=>parseFloat(e)+(n.max-n.min),x:yk(4,13),y:yk(5,14)};hf.translateX=hf.x;hf.translateY=hf.y;const Pu=new Set;let O1=!1,U1=!1;function Wz(){if(U1){const n=Array.from(Pu).filter(i=>i.needsMeasurement),e=new Set(n.map(i=>i.element)),t=new Map;e.forEach(i=>{const r=vle(i);r.length&&(t.set(i,r),i.render())}),n.forEach(i=>i.measureInitialState()),e.forEach(i=>{i.render();const r=t.get(i);r&&r.forEach(([s,o])=>{var a;(a=i.getValue(s))===null||a===void 0||a.set(o)})}),n.forEach(i=>i.measureEndState()),n.forEach(i=>{i.suspendedScrollY!==void 0&&window.scrollTo(0,i.suspendedScrollY)})}U1=!1,O1=!1,Pu.forEach(n=>n.complete()),Pu.clear()}function qz(){Pu.forEach(n=>{n.readKeyframes(),n.needsMeasurement&&(U1=!0)})}function xle(){qz(),Wz()}class pI{constructor(e,t,i,r,s,o=!1){this.isComplete=!1,this.isAsync=!1,this.needsMeasurement=!1,this.isScheduled=!1,this.unresolvedKeyframes=[...e],this.onComplete=t,this.name=i,this.motionValue=r,this.element=s,this.isAsync=o}scheduleResolve(){this.isScheduled=!0,this.isAsync?(Pu.add(this),O1||(O1=!0,Fn.read(qz),Fn.resolveKeyframes(Wz))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:e,name:t,element:i,motionValue:r}=this;for(let s=0;s<e.length;s++)if(e[s]===null)if(s===0){const o=r?.get(),a=e[e.length-1];if(o!==void 0)e[0]=o;else if(i&&t){const l=i.readValue(t,a);l!=null&&(e[0]=l)}e[0]===void 0&&(e[0]=a),r&&o===void 0&&r.set(e[0])}else e[s]=e[s-1]}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(){this.isComplete=!0,this.onComplete(this.unresolvedKeyframes,this.finalKeyframe),Pu.delete(this)}cancel(){this.isComplete||(this.isScheduled=!1,Pu.delete(this))}resume(){this.isComplete||this.scheduleResolve()}}const $z=n=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(n),_le=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function wle(n){const e=_le.exec(n);if(!e)return[,];const[,t,i,r]=e;return[`--${t??i}`,r]}function Xz(n,e,t=1){const[i,r]=wle(n);if(!i)return;const s=window.getComputedStyle(e).getPropertyValue(i);if(s){const o=s.trim();return $z(o)?parseFloat(o):o}return KM(r)?Xz(r,e,t+1):r}const Kz=n=>e=>e.test(n),ble={test:n=>n==="auto",parse:n=>n},Yz=[Pf,Et,Wo,pl,hae,uae,ble],vk=n=>Yz.find(Kz(n));class Jz extends pI{constructor(e,t,i,r,s){super(e,t,i,r,s,!0)}readKeyframes(){const{unresolvedKeyframes:e,element:t,name:i}=this;if(!t||!t.current)return;super.readKeyframes();for(let l=0;l<e.length;l++){let c=e[l];if(typeof c=="string"&&(c=c.trim(),KM(c))){const u=Xz(c,t.current);u!==void 0&&(e[l]=u),l===e.length-1&&(this.finalKeyframe=c)}}if(this.resolveNoneKeyframes(),!Az.has(i)||e.length!==2)return;const[r,s]=e,o=vk(r),a=vk(s);if(o!==a)if(mk(o)&&mk(a))for(let l=0;l<e.length;l++){const c=e[l];typeof c=="string"&&(e[l]=parseFloat(c))}else this.needsMeasurement=!0}resolveNoneKeyframes(){const{unresolvedKeyframes:e,name:t}=this,i=[];for(let r=0;r<e.length;r++)Qae(e[r])&&i.push(r);i.length&&mle(e,i,t)}measureInitialState(){const{element:e,unresolvedKeyframes:t,name:i}=this;if(!e||!e.current)return;i==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=hf[i](e.measureViewportBox(),window.getComputedStyle(e.current)),t[0]=this.measuredOrigin;const r=t[t.length-1];r!==void 0&&e.getValue(i,r).jump(r,!1)}measureEndState(){var e;const{element:t,name:i,unresolvedKeyframes:r}=this;if(!t||!t.current)return;const s=t.getValue(i);s&&s.jump(this.measuredOrigin,!1);const o=r.length-1,a=r[o];r[o]=hf[i](t.measureViewportBox(),window.getComputedStyle(t.current)),a!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=a),!((e=this.removedTransforms)===null||e===void 0)&&e.length&&this.removedTransforms.forEach(([l,c])=>{t.getValue(l).set(c)}),this.resolveNoneKeyframes()}}const xk=(n,e)=>e==="zIndex"?!1:!!(typeof n=="number"||Array.isArray(n)||typeof n=="string"&&(lc.test(n)||n==="0")&&!n.startsWith("url("));function Sle(n){const e=n[0];if(n.length===1)return!0;for(let t=0;t<n.length;t++)if(n[t]!==e)return!0}function Tle(n,e,t,i){const r=n[0];if(r===null)return!1;if(e==="display"||e==="visibility")return!0;const s=n[n.length-1],o=xk(r,e),a=xk(s,e);return!o||!a?!1:Sle(n)||(t==="spring"||iI(t))&&i}const Ele=n=>n!==null;function eb(n,{repeat:e,repeatType:t="loop"},i){const r=n.filter(Ele),s=e&&t!=="loop"&&e%2===1?0:r.length-1;return!s||i===void 0?r[s]:i}const Cle=40;class Qz{constructor({autoplay:e=!0,delay:t=0,type:i="keyframes",repeat:r=0,repeatDelay:s=0,repeatType:o="loop",...a}){this.isStopped=!1,this.hasAttemptedResolve=!1,this.createdAt=qo.now(),this.options={autoplay:e,delay:t,type:i,repeat:r,repeatDelay:s,repeatType:o,...a},this.updateFinishedPromise()}calcStartTime(){return this.resolvedAt?this.resolvedAt-this.createdAt>Cle?this.resolvedAt:this.createdAt:this.createdAt}get resolved(){return!this._resolved&&!this.hasAttemptedResolve&&xle(),this._resolved}onKeyframesResolved(e,t){this.resolvedAt=qo.now(),this.hasAttemptedResolve=!0;const{name:i,type:r,velocity:s,delay:o,onComplete:a,onUpdate:l,isGenerator:c}=this.options;if(!c&&!Tle(e,i,r,s))if(o)this.options.duration=0;else{l&&l(eb(e,this.options,t)),a&&a(),this.resolveFinishedPromise();return}const u=this.initPlayback(e,t);u!==!1&&(this._resolved={keyframes:e,finalKeyframe:t,...u},this.onPostResolved())}onPostResolved(){}then(e,t){return this.currentFinishedPromise.then(e,t)}flatten(){this.options.type="keyframes",this.options.ease="linear"}updateFinishedPromise(){this.currentFinishedPromise=new Promise(e=>{this.resolveFinishedPromise=e})}}const qn=(n,e,t)=>n+(e-n)*t;function NT(n,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?n+(e-n)*6*t:t<1/2?e:t<2/3?n+(e-n)*(2/3-t)*6:n}function Ale({hue:n,saturation:e,lightness:t,alpha:i}){n/=360,e/=100,t/=100;let r=0,s=0,o=0;if(!e)r=s=o=t;else{const a=t<.5?t*(1+e):t+e-t*e,l=2*t-a;r=NT(l,a,n+1/3),s=NT(l,a,n),o=NT(l,a,n-1/3)}return{red:Math.round(r*255),green:Math.round(s*255),blue:Math.round(o*255),alpha:i}}function x_(n,e){return t=>t>0?e:n}const DT=(n,e,t)=>{const i=n*n,r=t*(e*e-i)+i;return r<0?0:Math.sqrt(r)},Mle=[L1,_u,Cd],Ile=n=>Mle.find(e=>e.test(n));function _k(n){const e=Ile(n);if(!e)return!1;let t=e.parse(n);return e===Cd&&(t=Ale(t)),t}const wk=(n,e)=>{const t=_k(n),i=_k(e);if(!t||!i)return x_(n,e);const r={...t};return s=>(r.red=DT(t.red,i.red,s),r.green=DT(t.green,i.green,s),r.blue=DT(t.blue,i.blue,s),r.alpha=qn(t.alpha,i.alpha,s),_u.transform(r))},Ple=(n,e)=>t=>e(n(t)),Zg=(...n)=>n.reduce(Ple),j1=new Set(["none","hidden"]);function Rle(n,e){return j1.has(n)?t=>t<=0?n:e:t=>t>=1?e:n}function Nle(n,e){return t=>qn(n,e,t)}function mI(n){return typeof n=="number"?Nle:typeof n=="string"?KM(n)?x_:dr.test(n)?wk:kle:Array.isArray(n)?Zz:typeof n=="object"?dr.test(n)?wk:Dle:x_}function Zz(n,e){const t=[...n],i=t.length,r=n.map((s,o)=>mI(s)(s,e[o]));return s=>{for(let o=0;o<i;o++)t[o]=r[o](s);return t}}function Dle(n,e){const t={...n,...e},i={};for(const r in t)n[r]!==void 0&&e[r]!==void 0&&(i[r]=mI(n[r])(n[r],e[r]));return r=>{for(const s in i)t[s]=i[s](r);return t}}function Lle(n,e){var t;const i=[],r={color:0,var:0,number:0};for(let s=0;s<e.values.length;s++){const o=e.types[s],a=n.indexes[o][r[o]],l=(t=n.values[a])!==null&&t!==void 0?t:0;i[s]=l,r[o]++}return i}const kle=(n,e)=>{const t=lc.createTransformer(e),i=gg(n),r=gg(e);return i.indexes.var.length===r.indexes.var.length&&i.indexes.color.length===r.indexes.color.length&&i.indexes.number.length>=r.indexes.number.length?j1.has(n)&&!r.values.length||j1.has(e)&&!i.values.length?Rle(n,e):Zg(Zz(Lle(i,r),r.values),t):x_(n,e)};function e5(n,e,t){return typeof n=="number"&&typeof e=="number"&&typeof t=="number"?qn(n,e,t):mI(n)(n,e)}const Ole=5;function t5(n,e,t){const i=Math.max(e-Ole,0);return Mz(t-n(i),e-i)}const Zn={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},bk=.001;function Ule({duration:n=Zn.duration,bounce:e=Zn.bounce,velocity:t=Zn.velocity,mass:i=Zn.mass}){let r,s,o=1-e;o=Va(Zn.minDamping,Zn.maxDamping,o),n=Va(Zn.minDuration,Zn.maxDuration,Aa(n)),o<1?(r=c=>{const u=c*o,p=u*n,m=u-t,g=F1(c,o),x=Math.exp(-p);return bk-m/g*x},s=c=>{const p=c*o*n,m=p*t+t,g=Math.pow(o,2)*Math.pow(c,2)*n,x=Math.exp(-p),b=F1(Math.pow(c,2),o);return(-r(c)+bk>0?-1:1)*((m-g)*x)/b}):(r=c=>{const u=Math.exp(-c*n),p=(c-t)*n+1;return-.001+u*p},s=c=>{const u=Math.exp(-c*n),p=(t-c)*(n*n);return u*p});const a=5/n,l=Fle(r,s,a);if(n=Ca(n),isNaN(l))return{stiffness:Zn.stiffness,damping:Zn.damping,duration:n};{const c=Math.pow(l,2)*i;return{stiffness:c,damping:o*2*Math.sqrt(i*c),duration:n}}}const jle=12;function Fle(n,e,t){let i=t;for(let r=1;r<jle;r++)i=i-n(i)/e(i);return i}function F1(n,e){return n*Math.sqrt(1-e*e)}const Vle=["duration","bounce"],Ble=["stiffness","damping","mass"];function Sk(n,e){return e.some(t=>n[t]!==void 0)}function zle(n){let e={velocity:Zn.velocity,stiffness:Zn.stiffness,damping:Zn.damping,mass:Zn.mass,isResolvedFromDuration:!1,...n};if(!Sk(n,Ble)&&Sk(n,Vle))if(n.visualDuration){const t=n.visualDuration,i=2*Math.PI/(t*1.2),r=i*i,s=2*Va(.05,1,1-(n.bounce||0))*Math.sqrt(r);e={...e,mass:Zn.mass,stiffness:r,damping:s}}else{const t=Ule(n);e={...e,...t,mass:Zn.mass},e.isResolvedFromDuration=!0}return e}function n5(n=Zn.visualDuration,e=Zn.bounce){const t=typeof n!="object"?{visualDuration:n,keyframes:[0,1],bounce:e}:n;let{restSpeed:i,restDelta:r}=t;const s=t.keyframes[0],o=t.keyframes[t.keyframes.length-1],a={done:!1,value:s},{stiffness:l,damping:c,mass:u,duration:p,velocity:m,isResolvedFromDuration:g}=zle({...t,velocity:-Aa(t.velocity||0)}),x=m||0,b=c/(2*Math.sqrt(l*u)),w=o-s,v=Aa(Math.sqrt(l/u)),S=Math.abs(w)<5;i||(i=S?Zn.restSpeed.granular:Zn.restSpeed.default),r||(r=S?Zn.restDelta.granular:Zn.restDelta.default);let E;if(b<1){const U=F1(v,b);E=O=>{const N=Math.exp(-b*v*O);return o-N*((x+b*v*w)/U*Math.sin(U*O)+w*Math.cos(U*O))}}else if(b===1)E=U=>o-Math.exp(-v*U)*(w+(x+v*w)*U);else{const U=v*Math.sqrt(b*b-1);E=O=>{const N=Math.exp(-b*v*O),P=Math.min(U*O,300);return o-N*((x+b*v*w)*Math.sinh(P)+U*w*Math.cosh(P))/U}}const C={calculatedDuration:g&&p||null,next:U=>{const O=E(U);if(g)a.done=U>=p;else{let N=0;b<1&&(N=U===0?Ca(x):t5(E,U,O));const P=Math.abs(N)<=i,A=Math.abs(o-O)<=r;a.done=P&&A}return a.value=a.done?o:O,a},toString:()=>{const U=Math.min(_z(C),R1),O=wz(N=>C.next(U*N).value,U,30);return U+"ms "+O}};return C}function Tk({keyframes:n,velocity:e=0,power:t=.8,timeConstant:i=325,bounceDamping:r=10,bounceStiffness:s=500,modifyTarget:o,min:a,max:l,restDelta:c=.5,restSpeed:u}){const p=n[0],m={done:!1,value:p},g=P=>a!==void 0&&P<a||l!==void 0&&P>l,x=P=>a===void 0?l:l===void 0||Math.abs(a-P)<Math.abs(l-P)?a:l;let b=t*e;const w=p+b,v=o===void 0?w:o(w);v!==w&&(b=v-p);const S=P=>-b*Math.exp(-P/i),E=P=>v+S(P),C=P=>{const A=S(P),M=E(P);m.done=Math.abs(A)<=c,m.value=m.done?v:M};let U,O;const N=P=>{g(m.value)&&(U=P,O=n5({keyframes:[m.value,x(m.value)],velocity:t5(E,P,m.value),damping:r,stiffness:s,restDelta:c,restSpeed:u}))};return N(0),{calculatedDuration:null,next:P=>{let A=!1;return!O&&U===void 0&&(A=!0,C(P),N(P)),U!==void 0&&P>=U?O.next(P-U):(!A&&C(P),m)}}}const Hle=Qg(.42,0,1,1),Gle=Qg(0,0,.58,1),i5=Qg(.42,0,.58,1),Wle=n=>Array.isArray(n)&&typeof n[0]!="number",qle={linear:ws,easeIn:Hle,easeInOut:i5,easeOut:Gle,circIn:uI,circInOut:Uz,circOut:Oz,backIn:cI,backInOut:Lz,backOut:Dz,anticipate:kz},Ek=n=>{if(rI(n)){ez(n.length===4);const[e,t,i,r]=n;return Qg(e,t,i,r)}else if(typeof n=="string")return qle[n];return n};function $le(n,e,t){const i=[],r=t||e5,s=n.length-1;for(let o=0;o<s;o++){let a=r(n[o],n[o+1]);if(e){const l=Array.isArray(e)?e[o]||ws:e;a=Zg(l,a)}i.push(a)}return i}function Xle(n,e,{clamp:t=!0,ease:i,mixer:r}={}){const s=n.length;if(ez(s===e.length),s===1)return()=>e[0];if(s===2&&e[0]===e[1])return()=>e[1];const o=n[0]===n[1];n[0]>n[s-1]&&(n=[...n].reverse(),e=[...e].reverse());const a=$le(e,i,r),l=a.length,c=u=>{if(o&&u<n[0])return e[0];let p=0;if(l>1)for(;p<n.length-2&&!(u<n[p+1]);p++);const m=cf(n[p],n[p+1],u);return a[p](m)};return t?u=>c(Va(n[0],n[s-1],u)):c}function Kle(n,e){const t=n[n.length-1];for(let i=1;i<=e;i++){const r=cf(0,e,i);n.push(qn(t,1,r))}}function Yle(n){const e=[0];return Kle(e,n.length-1),e}function Jle(n,e){return n.map(t=>t*e)}function Qle(n,e){return n.map(()=>e||i5).splice(0,n.length-1)}function __({duration:n=300,keyframes:e,times:t,ease:i="easeInOut"}){const r=Wle(i)?i.map(Ek):Ek(i),s={done:!1,value:e[0]},o=Jle(t&&t.length===e.length?t:Yle(e),n),a=Xle(o,e,{ease:Array.isArray(r)?r:Qle(e,r)});return{calculatedDuration:n,next:l=>(s.value=a(l),s.done=l>=n,s)}}const Zle=n=>{const e=({timestamp:t})=>n(t);return{start:()=>Fn.update(e,!0),stop:()=>ac(e),now:()=>Wi.isProcessing?Wi.timestamp:qo.now()}},ece={decay:Tk,inertia:Tk,tween:__,keyframes:__,spring:n5},tce=n=>n/100;class gI extends Qz{constructor(e){super(e),this.holdTime=null,this.cancelTime=null,this.currentTime=0,this.playbackSpeed=1,this.pendingPlayState="running",this.startTime=null,this.state="idle",this.stop=()=>{if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.teardown();const{onStop:l}=this.options;l&&l()};const{name:t,motionValue:i,element:r,keyframes:s}=this.options,o=r?.KeyframeResolver||pI,a=(l,c)=>this.onKeyframesResolved(l,c);this.resolver=new o(s,a,t,i,r),this.resolver.scheduleResolve()}flatten(){super.flatten(),this._resolved&&Object.assign(this._resolved,this.initPlayback(this._resolved.keyframes))}initPlayback(e){const{type:t="keyframes",repeat:i=0,repeatDelay:r=0,repeatType:s,velocity:o=0}=this.options,a=iI(t)?t:ece[t]||__;let l,c;a!==__&&typeof e[0]!="number"&&(l=Zg(tce,e5(e[0],e[1])),e=[0,100]);const u=a({...this.options,keyframes:e});s==="mirror"&&(c=a({...this.options,keyframes:[...e].reverse(),velocity:-o})),u.calculatedDuration===null&&(u.calculatedDuration=_z(u));const{calculatedDuration:p}=u,m=p+r,g=m*(i+1)-r;return{generator:u,mirroredGenerator:c,mapPercentToKeyframes:l,calculatedDuration:p,resolvedDuration:m,totalDuration:g}}onPostResolved(){const{autoplay:e=!0}=this.options;this.play(),this.pendingPlayState==="paused"||!e?this.pause():this.state=this.pendingPlayState}tick(e,t=!1){const{resolved:i}=this;if(!i){const{keyframes:P}=this.options;return{done:!0,value:P[P.length-1]}}const{finalKeyframe:r,generator:s,mirroredGenerator:o,mapPercentToKeyframes:a,keyframes:l,calculatedDuration:c,totalDuration:u,resolvedDuration:p}=i;if(this.startTime===null)return s.next(0);const{delay:m,repeat:g,repeatType:x,repeatDelay:b,onUpdate:w}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,e):this.speed<0&&(this.startTime=Math.min(e-u/this.speed,this.startTime)),t?this.currentTime=e:this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=Math.round(e-this.startTime)*this.speed;const v=this.currentTime-m*(this.speed>=0?1:-1),S=this.speed>=0?v<0:v>u;this.currentTime=Math.max(v,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=u);let E=this.currentTime,C=s;if(g){const P=Math.min(this.currentTime,u)/p;let A=Math.floor(P),M=P%1;!M&&P>=1&&(M=1),M===1&&A--,A=Math.min(A,g+1),!!(A%2)&&(x==="reverse"?(M=1-M,b&&(M-=b/p)):x==="mirror"&&(C=o)),E=Va(0,1,M)*p}const U=S?{done:!1,value:l[0]}:C.next(E);a&&(U.value=a(U.value));let{done:O}=U;!S&&c!==null&&(O=this.speed>=0?this.currentTime>=u:this.currentTime<=0);const N=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&O);return N&&r!==void 0&&(U.value=eb(l,this.options,r)),w&&w(U.value),N&&this.finish(),U}get duration(){const{resolved:e}=this;return e?Aa(e.calculatedDuration):0}get time(){return Aa(this.currentTime)}set time(e){e=Ca(e),this.currentTime=e,this.holdTime!==null||this.speed===0?this.holdTime=e:this.driver&&(this.startTime=this.driver.now()-e/this.speed)}get speed(){return this.playbackSpeed}set speed(e){const t=this.playbackSpeed!==e;this.playbackSpeed=e,t&&(this.time=Aa(this.currentTime))}play(){if(this.resolver.isScheduled||this.resolver.resume(),!this._resolved){this.pendingPlayState="running";return}if(this.isStopped)return;const{driver:e=Zle,onPlay:t,startTime:i}=this.options;this.driver||(this.driver=e(s=>this.tick(s))),t&&t();const r=this.driver.now();this.holdTime!==null?this.startTime=r-this.holdTime:this.startTime?this.state==="finished"&&(this.startTime=r):this.startTime=i??this.calcStartTime(),this.state==="finished"&&this.updateFinishedPromise(),this.cancelTime=this.startTime,this.holdTime=null,this.state="running",this.driver.start()}pause(){var e;if(!this._resolved){this.pendingPlayState="paused";return}this.state="paused",this.holdTime=(e=this.currentTime)!==null&&e!==void 0?e:0}complete(){this.state!=="running"&&this.play(),this.pendingPlayState=this.state="finished",this.holdTime=null}finish(){this.teardown(),this.state="finished";const{onComplete:e}=this.options;e&&e()}cancel(){this.cancelTime!==null&&this.tick(this.cancelTime),this.teardown(),this.updateFinishedPromise()}teardown(){this.state="idle",this.stopDriver(),this.resolveFinishedPromise(),this.updateFinishedPromise(),this.startTime=this.cancelTime=null,this.resolver.cancel()}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(e){return this.startTime=0,this.tick(e,!0)}}const nce=new Set(["opacity","clipPath","filter","transform"]);function ice(n,e,t,{delay:i=0,duration:r=300,repeat:s=0,repeatType:o="loop",ease:a="easeInOut",times:l}={}){const c={[e]:t};l&&(c.offset=l);const u=Sz(a,r);return Array.isArray(u)&&(c.easing=u),n.animate(c,{delay:i,duration:r,easing:Array.isArray(u)?"linear":u,fill:"both",iterations:s+1,direction:o==="reverse"?"alternate":"normal"})}const rce=zM(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),w_=10,sce=2e4;function oce(n){return iI(n.type)||n.type==="spring"||!bz(n.ease)}function ace(n,e){const t=new gI({...e,keyframes:n,repeat:0,delay:0,isGenerator:!0});let i={done:!1,value:n[0]};const r=[];let s=0;for(;!i.done&&s<sce;)i=t.sample(s),r.push(i.value),s+=w_;return{times:void 0,keyframes:r,duration:s-w_,ease:"linear"}}const r5={anticipate:kz,backInOut:Lz,circInOut:Uz};function lce(n){return n in r5}class Ck extends Qz{constructor(e){super(e);const{name:t,motionValue:i,element:r,keyframes:s}=this.options;this.resolver=new Jz(s,(o,a)=>this.onKeyframesResolved(o,a),t,i,r),this.resolver.scheduleResolve()}initPlayback(e,t){let{duration:i=300,times:r,ease:s,type:o,motionValue:a,name:l,startTime:c}=this.options;if(!a.owner||!a.owner.current)return!1;if(typeof s=="string"&&v_()&&lce(s)&&(s=r5[s]),oce(this.options)){const{onComplete:p,onUpdate:m,motionValue:g,element:x,...b}=this.options,w=ace(e,b);e=w.keyframes,e.length===1&&(e[1]=e[0]),i=w.duration,r=w.times,s=w.ease,o="keyframes"}const u=ice(a.owner.current,l,e,{...this.options,duration:i,times:r,ease:s});return u.startTime=c??this.calcStartTime(),this.pendingTimeline?(ck(u,this.pendingTimeline),this.pendingTimeline=void 0):u.onfinish=()=>{const{onComplete:p}=this.options;a.set(eb(e,this.options,t)),p&&p(),this.cancel(),this.resolveFinishedPromise()},{animation:u,duration:i,times:r,type:o,ease:s,keyframes:e}}get duration(){const{resolved:e}=this;if(!e)return 0;const{duration:t}=e;return Aa(t)}get time(){const{resolved:e}=this;if(!e)return 0;const{animation:t}=e;return Aa(t.currentTime||0)}set time(e){const{resolved:t}=this;if(!t)return;const{animation:i}=t;i.currentTime=Ca(e)}get speed(){const{resolved:e}=this;if(!e)return 1;const{animation:t}=e;return t.playbackRate}set speed(e){const{resolved:t}=this;if(!t)return;const{animation:i}=t;i.playbackRate=e}get state(){const{resolved:e}=this;if(!e)return"idle";const{animation:t}=e;return t.playState}get startTime(){const{resolved:e}=this;if(!e)return null;const{animation:t}=e;return t.startTime}attachTimeline(e){if(!this._resolved)this.pendingTimeline=e;else{const{resolved:t}=this;if(!t)return ws;const{animation:i}=t;ck(i,e)}return ws}play(){if(this.isStopped)return;const{resolved:e}=this;if(!e)return;const{animation:t}=e;t.playState==="finished"&&this.updateFinishedPromise(),t.play()}pause(){const{resolved:e}=this;if(!e)return;const{animation:t}=e;t.pause()}stop(){if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.resolveFinishedPromise(),this.updateFinishedPromise();const{resolved:e}=this;if(!e)return;const{animation:t,keyframes:i,duration:r,type:s,ease:o,times:a}=e;if(t.playState==="idle"||t.playState==="finished")return;if(this.time){const{motionValue:c,onUpdate:u,onComplete:p,element:m,...g}=this.options,x=new gI({...g,keyframes:i,duration:r,type:s,ease:o,times:a,isGenerator:!0}),b=Ca(this.time);c.setWithVelocity(x.sample(b-w_).value,x.sample(b).value,w_)}const{onStop:l}=this.options;l&&l(),this.cancel()}complete(){const{resolved:e}=this;e&&e.animation.finish()}cancel(){const{resolved:e}=this;e&&e.animation.cancel()}static supports(e){const{motionValue:t,name:i,repeatDelay:r,repeatType:s,damping:o,type:a}=e;if(!t||!t.owner||!(t.owner.current instanceof HTMLElement))return!1;const{onUpdate:l,transformTemplate:c}=t.owner.getProps();return rce()&&i&&nce.has(i)&&!l&&!c&&!r&&s!=="mirror"&&o!==0&&a!=="inertia"}}const cce={type:"spring",stiffness:500,damping:25,restSpeed:10},uce=n=>({type:"spring",stiffness:550,damping:n===0?2*Math.sqrt(550):30,restSpeed:10}),hce={type:"keyframes",duration:.8},dce={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},fce=(n,{keyframes:e})=>e.length>2?hce:oh.has(n)?n.startsWith("scale")?uce(e[1]):cce:dce;function pce({when:n,delay:e,delayChildren:t,staggerChildren:i,staggerDirection:r,repeat:s,repeatType:o,repeatDelay:a,from:l,elapsed:c,...u}){return!!Object.keys(u).length}const yI=(n,e,t,i={},r,s)=>o=>{const a=nI(i,n)||{},l=a.delay||i.delay||0;let{elapsed:c=0}=i;c=c-Ca(l);let u={keyframes:Array.isArray(t)?t:[null,t],ease:"easeOut",velocity:e.getVelocity(),...a,delay:-c,onUpdate:m=>{e.set(m),a.onUpdate&&a.onUpdate(m)},onComplete:()=>{o(),a.onComplete&&a.onComplete()},name:n,motionValue:e,element:s?void 0:r};pce(a)||(u={...u,...fce(n,u)}),u.duration&&(u.duration=Ca(u.duration)),u.repeatDelay&&(u.repeatDelay=Ca(u.repeatDelay)),u.from!==void 0&&(u.keyframes[0]=u.from);let p=!1;if((u.type===!1||u.duration===0&&!u.repeatDelay)&&(u.duration=0,u.delay===0&&(p=!0)),p&&!s&&e.get()!==void 0){const m=eb(u.keyframes,a);if(m!==void 0)return Fn.update(()=>{u.onUpdate(m),u.onComplete()}),new Dae([])}return!s&&Ck.supports(u)?new Ck(u):new gI(u)};function mce({protectedKeys:n,needsAnimating:e},t){const i=n.hasOwnProperty(t)&&e[t]!==!0;return e[t]=!1,i}function s5(n,e,{delay:t=0,transitionOverride:i,type:r}={}){var s;let{transition:o=n.getDefaultTransition(),transitionEnd:a,...l}=e;i&&(o=i);const c=[],u=r&&n.animationState&&n.animationState.getState()[r];for(const p in l){const m=n.getValue(p,(s=n.latestValues[p])!==null&&s!==void 0?s:null),g=l[p];if(g===void 0||u&&mce(u,p))continue;const x={delay:t,...nI(o||{},p)};let b=!1;if(window.MotionHandoffAnimation){const v=Iz(n);if(v){const S=window.MotionHandoffAnimation(v,p,Fn);S!==null&&(x.startTime=S,b=!0)}}D1(n,p),m.start(yI(p,m,g,n.shouldReduceMotion&&Az.has(p)?{type:!1}:x,n,b));const w=m.animation;w&&c.push(w)}return a&&Promise.all(c).then(()=>{Fn.update(()=>{a&&$ae(n,a)})}),c}function V1(n,e,t={}){var i;const r=Zw(n,e,t.type==="exit"?(i=n.presenceContext)===null||i===void 0?void 0:i.custom:void 0);let{transition:s=n.getDefaultTransition()||{}}=r||{};t.transitionOverride&&(s=t.transitionOverride);const o=r?()=>Promise.all(s5(n,r,t)):()=>Promise.resolve(),a=n.variantChildren&&n.variantChildren.size?(c=0)=>{const{delayChildren:u=0,staggerChildren:p,staggerDirection:m}=s;return gce(n,e,u+c,p,m,t)}:()=>Promise.resolve(),{when:l}=s;if(l){const[c,u]=l==="beforeChildren"?[o,a]:[a,o];return c().then(()=>u())}else return Promise.all([o(),a(t.delay)])}function gce(n,e,t=0,i=0,r=1,s){const o=[],a=(n.variantChildren.size-1)*i,l=r===1?(c=0)=>c*i:(c=0)=>a-c*i;return Array.from(n.variantChildren).sort(yce).forEach((c,u)=>{c.notify("AnimationStart",e),o.push(V1(c,e,{...s,delay:t+l(u)}).then(()=>c.notify("AnimationComplete",e)))}),Promise.all(o)}function yce(n,e){return n.sortNodePosition(e)}function vce(n,e,t={}){n.notify("AnimationStart",e);let i;if(Array.isArray(e)){const r=e.map(s=>V1(n,s,t));i=Promise.all(r)}else if(typeof e=="string")i=V1(n,e,t);else{const r=typeof e=="function"?Zw(n,e,t.custom):e;i=Promise.all(s5(n,r,t))}return i.then(()=>{n.notify("AnimationComplete",e)})}const xce=GM.length;function o5(n){if(!n)return;if(!n.isControllingVariants){const t=n.parent?o5(n.parent)||{}:{};return n.props.initial!==void 0&&(t.initial=n.props.initial),t}const e={};for(let t=0;t<xce;t++){const i=GM[t],r=n.props[i];(fg(r)||r===!1)&&(e[i]=r)}return e}const _ce=[...HM].reverse(),wce=HM.length;function bce(n){return e=>Promise.all(e.map(({animation:t,options:i})=>vce(n,t,i)))}function Sce(n){let e=bce(n),t=Ak(),i=!0;const r=l=>(c,u)=>{var p;const m=Zw(n,u,l==="exit"?(p=n.presenceContext)===null||p===void 0?void 0:p.custom:void 0);if(m){const{transition:g,transitionEnd:x,...b}=m;c={...c,...b,...x}}return c};function s(l){e=l(n)}function o(l){const{props:c}=n,u=o5(n.parent)||{},p=[],m=new Set;let g={},x=1/0;for(let w=0;w<wce;w++){const v=_ce[w],S=t[v],E=c[v]!==void 0?c[v]:u[v],C=fg(E),U=v===l?S.isActive:null;U===!1&&(x=w);let O=E===u[v]&&E!==c[v]&&C;if(O&&i&&n.manuallyAnimateOnMount&&(O=!1),S.protectedKeys={...g},!S.isActive&&U===null||!E&&!S.prevProp||Jw(E)||typeof E=="boolean")continue;const N=Tce(S.prevProp,E);let P=N||v===l&&S.isActive&&!O&&C||w>x&&C,A=!1;const M=Array.isArray(E)?E:[E];let D=M.reduce(r(v),{});U===!1&&(D={});const{prevResolvedValues:z={}}=S,F={...z,...D},re=ue=>{P=!0,m.has(ue)&&(A=!0,m.delete(ue)),S.needsAnimating[ue]=!0;const q=n.getValue(ue);q&&(q.liveStyle=!1)};for(const ue in F){const q=D[ue],Q=z[ue];if(g.hasOwnProperty(ue))continue;let j=!1;P1(q)&&P1(Q)?j=!xz(q,Q):j=q!==Q,j?q!=null?re(ue):m.add(ue):q!==void 0&&m.has(ue)?re(ue):S.protectedKeys[ue]=!0}S.prevProp=E,S.prevResolvedValues=D,S.isActive&&(g={...g,...D}),i&&n.blockInitialAnimation&&(P=!1),P&&(!(O&&N)||A)&&p.push(...M.map(ue=>({animation:ue,options:{type:v}})))}if(m.size){const w={};m.forEach(v=>{const S=n.getBaseTarget(v),E=n.getValue(v);E&&(E.liveStyle=!0),w[v]=S??null}),p.push({animation:w})}let b=!!p.length;return i&&(c.initial===!1||c.initial===c.animate)&&!n.manuallyAnimateOnMount&&(b=!1),i=!1,b?e(p):Promise.resolve()}function a(l,c){var u;if(t[l].isActive===c)return Promise.resolve();(u=n.variantChildren)===null||u===void 0||u.forEach(m=>{var g;return(g=m.animationState)===null||g===void 0?void 0:g.setActive(l,c)}),t[l].isActive=c;const p=o(l);for(const m in t)t[m].protectedKeys={};return p}return{animateChanges:o,setActive:a,setAnimateFunction:s,getState:()=>t,reset:()=>{t=Ak(),i=!0}}}function Tce(n,e){return typeof e=="string"?e!==n:Array.isArray(e)?!xz(e,n):!1}function iu(n=!1){return{isActive:n,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function Ak(){return{animate:iu(!0),whileInView:iu(),whileHover:iu(),whileTap:iu(),whileDrag:iu(),whileFocus:iu(),exit:iu()}}class _c{constructor(e){this.isMounted=!1,this.node=e}update(){}}class Ece extends _c{constructor(e){super(e),e.animationState||(e.animationState=Sce(e))}updateAnimationControlsSubscription(){const{animate:e}=this.node.getProps();Jw(e)&&(this.unmountControls=e.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:e}=this.node.getProps(),{animate:t}=this.node.prevProps||{};e!==t&&this.updateAnimationControlsSubscription()}unmount(){var e;this.node.animationState.reset(),(e=this.unmountControls)===null||e===void 0||e.call(this)}}let Cce=0;class Ace extends _c{constructor(){super(...arguments),this.id=Cce++}update(){if(!this.node.presenceContext)return;const{isPresent:e,onExitComplete:t}=this.node.presenceContext,{isPresent:i}=this.node.prevPresenceContext||{};if(!this.node.animationState||e===i)return;const r=this.node.animationState.setActive("exit",!e);t&&!e&&r.then(()=>t(this.id))}mount(){const{register:e}=this.node.presenceContext||{};e&&(this.unmount=e(this.id))}unmount(){}}const Mce={animation:{Feature:Ece},exit:{Feature:Ace}};function yg(n,e,t,i={passive:!0}){return n.addEventListener(e,t,i),()=>n.removeEventListener(e,t)}function ey(n){return{point:{x:n.pageX,y:n.pageY}}}const Ice=n=>e=>sI(e)&&n(e,ey(e));function fm(n,e,t,i){return yg(n,e,Ice(t),i)}const Mk=(n,e)=>Math.abs(n-e);function Pce(n,e){const t=Mk(n.x,e.x),i=Mk(n.y,e.y);return Math.sqrt(t**2+i**2)}class a5{constructor(e,t,{transformPagePoint:i,contextWindow:r,dragSnapToOrigin:s=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const p=kT(this.lastMoveEventInfo,this.history),m=this.startEvent!==null,g=Pce(p.offset,{x:0,y:0})>=3;if(!m&&!g)return;const{point:x}=p,{timestamp:b}=Wi;this.history.push({...x,timestamp:b});const{onStart:w,onMove:v}=this.handlers;m||(w&&w(this.lastMoveEvent,p),this.startEvent=this.lastMoveEvent),v&&v(this.lastMoveEvent,p)},this.handlePointerMove=(p,m)=>{this.lastMoveEvent=p,this.lastMoveEventInfo=LT(m,this.transformPagePoint),Fn.update(this.updatePoint,!0)},this.handlePointerUp=(p,m)=>{this.end();const{onEnd:g,onSessionEnd:x,resumeAnimation:b}=this.handlers;if(this.dragSnapToOrigin&&b&&b(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const w=kT(p.type==="pointercancel"?this.lastMoveEventInfo:LT(m,this.transformPagePoint),this.history);this.startEvent&&g&&g(p,w),x&&x(p,w)},!sI(e))return;this.dragSnapToOrigin=s,this.handlers=t,this.transformPagePoint=i,this.contextWindow=r||window;const o=ey(e),a=LT(o,this.transformPagePoint),{point:l}=a,{timestamp:c}=Wi;this.history=[{...l,timestamp:c}];const{onSessionStart:u}=t;u&&u(e,kT(a,this.history)),this.removeListeners=Zg(fm(this.contextWindow,"pointermove",this.handlePointerMove),fm(this.contextWindow,"pointerup",this.handlePointerUp),fm(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(e){this.handlers=e}end(){this.removeListeners&&this.removeListeners(),ac(this.updatePoint)}}function LT(n,e){return e?{point:e(n.point)}:n}function Ik(n,e){return{x:n.x-e.x,y:n.y-e.y}}function kT({point:n},e){return{point:n,delta:Ik(n,l5(e)),offset:Ik(n,Rce(e)),velocity:Nce(e,.1)}}function Rce(n){return n[0]}function l5(n){return n[n.length-1]}function Nce(n,e){if(n.length<2)return{x:0,y:0};let t=n.length-1,i=null;const r=l5(n);for(;t>=0&&(i=n[t],!(r.timestamp-i.timestamp>Ca(e)));)t--;if(!i)return{x:0,y:0};const s=Aa(r.timestamp-i.timestamp);if(s===0)return{x:0,y:0};const o={x:(r.x-i.x)/s,y:(r.y-i.y)/s};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}const c5=1e-4,Dce=1-c5,Lce=1+c5,u5=.01,kce=0-u5,Oce=0+u5;function Ts(n){return n.max-n.min}function Uce(n,e,t){return Math.abs(n-e)<=t}function Pk(n,e,t,i=.5){n.origin=i,n.originPoint=qn(e.min,e.max,n.origin),n.scale=Ts(t)/Ts(e),n.translate=qn(t.min,t.max,n.origin)-n.originPoint,(n.scale>=Dce&&n.scale<=Lce||isNaN(n.scale))&&(n.scale=1),(n.translate>=kce&&n.translate<=Oce||isNaN(n.translate))&&(n.translate=0)}function pm(n,e,t,i){Pk(n.x,e.x,t.x,i?i.originX:void 0),Pk(n.y,e.y,t.y,i?i.originY:void 0)}function Rk(n,e,t){n.min=t.min+e.min,n.max=n.min+Ts(e)}function jce(n,e,t){Rk(n.x,e.x,t.x),Rk(n.y,e.y,t.y)}function Nk(n,e,t){n.min=e.min-t.min,n.max=n.min+Ts(e)}function mm(n,e,t){Nk(n.x,e.x,t.x),Nk(n.y,e.y,t.y)}function Fce(n,{min:e,max:t},i){return e!==void 0&&n<e?n=i?qn(e,n,i.min):Math.max(n,e):t!==void 0&&n>t&&(n=i?qn(t,n,i.max):Math.min(n,t)),n}function Dk(n,e,t){return{min:e!==void 0?n.min+e:void 0,max:t!==void 0?n.max+t-(n.max-n.min):void 0}}function Vce(n,{top:e,left:t,bottom:i,right:r}){return{x:Dk(n.x,t,r),y:Dk(n.y,e,i)}}function Lk(n,e){let t=e.min-n.min,i=e.max-n.max;return e.max-e.min<n.max-n.min&&([t,i]=[i,t]),{min:t,max:i}}function Bce(n,e){return{x:Lk(n.x,e.x),y:Lk(n.y,e.y)}}function zce(n,e){let t=.5;const i=Ts(n),r=Ts(e);return r>i?t=cf(e.min,e.max-i,n.min):i>r&&(t=cf(n.min,n.max-r,e.min)),Va(0,1,t)}function Hce(n,e){const t={};return e.min!==void 0&&(t.min=e.min-n.min),e.max!==void 0&&(t.max=e.max-n.min),t}const B1=.35;function Gce(n=B1){return n===!1?n=0:n===!0&&(n=B1),{x:kk(n,"left","right"),y:kk(n,"top","bottom")}}function kk(n,e,t){return{min:Ok(n,e),max:Ok(n,t)}}function Ok(n,e){return typeof n=="number"?n:n[e]||0}const Uk=()=>({translate:0,scale:1,origin:0,originPoint:0}),Ad=()=>({x:Uk(),y:Uk()}),jk=()=>({min:0,max:0}),si=()=>({x:jk(),y:jk()});function Fs(n){return[n("x"),n("y")]}function h5({top:n,left:e,right:t,bottom:i}){return{x:{min:e,max:t},y:{min:n,max:i}}}function Wce({x:n,y:e}){return{top:e.min,right:n.max,bottom:e.max,left:n.min}}function qce(n,e){if(!e)return n;const t=e({x:n.left,y:n.top}),i=e({x:n.right,y:n.bottom});return{top:t.y,left:t.x,bottom:i.y,right:i.x}}function OT(n){return n===void 0||n===1}function z1({scale:n,scaleX:e,scaleY:t}){return!OT(n)||!OT(e)||!OT(t)}function uu(n){return z1(n)||d5(n)||n.z||n.rotate||n.rotateX||n.rotateY||n.skewX||n.skewY}function d5(n){return Fk(n.x)||Fk(n.y)}function Fk(n){return n&&n!=="0%"}function b_(n,e,t){const i=n-t,r=e*i;return t+r}function Vk(n,e,t,i,r){return r!==void 0&&(n=b_(n,r,i)),b_(n,t,i)+e}function H1(n,e=0,t=1,i,r){n.min=Vk(n.min,e,t,i,r),n.max=Vk(n.max,e,t,i,r)}function f5(n,{x:e,y:t}){H1(n.x,e.translate,e.scale,e.originPoint),H1(n.y,t.translate,t.scale,t.originPoint)}const Bk=.999999999999,zk=1.0000000000001;function $ce(n,e,t,i=!1){const r=t.length;if(!r)return;e.x=e.y=1;let s,o;for(let a=0;a<r;a++){s=t[a],o=s.projectionDelta;const{visualElement:l}=s.options;l&&l.props.style&&l.props.style.display==="contents"||(i&&s.options.layoutScroll&&s.scroll&&s!==s.root&&Id(n,{x:-s.scroll.offset.x,y:-s.scroll.offset.y}),o&&(e.x*=o.x.scale,e.y*=o.y.scale,f5(n,o)),i&&uu(s.latestValues)&&Id(n,s.latestValues))}e.x<zk&&e.x>Bk&&(e.x=1),e.y<zk&&e.y>Bk&&(e.y=1)}function Md(n,e){n.min=n.min+e,n.max=n.max+e}function Hk(n,e,t,i,r=.5){const s=qn(n.min,n.max,r);H1(n,e,t,s,i)}function Id(n,e){Hk(n.x,e.x,e.scaleX,e.scale,e.originX),Hk(n.y,e.y,e.scaleY,e.scale,e.originY)}function p5(n,e){return h5(qce(n.getBoundingClientRect(),e))}function Xce(n,e,t){const i=p5(n,t),{scroll:r}=e;return r&&(Md(i.x,r.offset.x),Md(i.y,r.offset.y)),i}const m5=({current:n})=>n?n.ownerDocument.defaultView:null,Kce=new WeakMap;class Yce{constructor(e){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=si(),this.visualElement=e}start(e,{snapToCursor:t=!1}={}){const{presenceContext:i}=this.visualElement;if(i&&i.isPresent===!1)return;const r=u=>{const{dragSnapToOrigin:p}=this.getProps();p?this.pauseAnimation():this.stopAnimation(),t&&this.snapToCursor(ey(u).point)},s=(u,p)=>{const{drag:m,dragPropagation:g,onDragStart:x}=this.getProps();if(m&&!g&&(this.openDragLock&&this.openDragLock(),this.openDragLock=zae(m),!this.openDragLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Fs(w=>{let v=this.getAxisMotionValue(w).get()||0;if(Wo.test(v)){const{projection:S}=this.visualElement;if(S&&S.layout){const E=S.layout.layoutBox[w];E&&(v=Ts(E)*(parseFloat(v)/100))}}this.originPoint[w]=v}),x&&Fn.postRender(()=>x(u,p)),D1(this.visualElement,"transform");const{animationState:b}=this.visualElement;b&&b.setActive("whileDrag",!0)},o=(u,p)=>{const{dragPropagation:m,dragDirectionLock:g,onDirectionLock:x,onDrag:b}=this.getProps();if(!m&&!this.openDragLock)return;const{offset:w}=p;if(g&&this.currentDirection===null){this.currentDirection=Jce(w),this.currentDirection!==null&&x&&x(this.currentDirection);return}this.updateAxis("x",p.point,w),this.updateAxis("y",p.point,w),this.visualElement.render(),b&&b(u,p)},a=(u,p)=>this.stop(u,p),l=()=>Fs(u=>{var p;return this.getAnimationState(u)==="paused"&&((p=this.getAxisMotionValue(u).animation)===null||p===void 0?void 0:p.play())}),{dragSnapToOrigin:c}=this.getProps();this.panSession=new a5(e,{onSessionStart:r,onStart:s,onMove:o,onSessionEnd:a,resumeAnimation:l},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:c,contextWindow:m5(this.visualElement)})}stop(e,t){const i=this.isDragging;if(this.cancel(),!i)return;const{velocity:r}=t;this.startAnimation(r);const{onDragEnd:s}=this.getProps();s&&Fn.postRender(()=>s(e,t))}cancel(){this.isDragging=!1;const{projection:e,animationState:t}=this.visualElement;e&&(e.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:i}=this.getProps();!i&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),t&&t.setActive("whileDrag",!1)}updateAxis(e,t,i){const{drag:r}=this.getProps();if(!i||!rx(e,r,this.currentDirection))return;const s=this.getAxisMotionValue(e);let o=this.originPoint[e]+i[e];this.constraints&&this.constraints[e]&&(o=Fce(o,this.constraints[e],this.elastic[e])),s.set(o)}resolveConstraints(){var e;const{dragConstraints:t,dragElastic:i}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(e=this.visualElement.projection)===null||e===void 0?void 0:e.layout,s=this.constraints;t&&Ed(t)?this.constraints||(this.constraints=this.resolveRefConstraints()):t&&r?this.constraints=Vce(r.layoutBox,t):this.constraints=!1,this.elastic=Gce(i),s!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&Fs(o=>{this.constraints!==!1&&this.getAxisMotionValue(o)&&(this.constraints[o]=Hce(r.layoutBox[o],this.constraints[o]))})}resolveRefConstraints(){const{dragConstraints:e,onMeasureDragConstraints:t}=this.getProps();if(!e||!Ed(e))return!1;const i=e.current,{projection:r}=this.visualElement;if(!r||!r.layout)return!1;const s=Xce(i,r.root,this.visualElement.getTransformPagePoint());let o=Bce(r.layout.layoutBox,s);if(t){const a=t(Wce(o));this.hasMutatedConstraints=!!a,a&&(o=h5(a))}return o}startAnimation(e){const{drag:t,dragMomentum:i,dragElastic:r,dragTransition:s,dragSnapToOrigin:o,onDragTransitionEnd:a}=this.getProps(),l=this.constraints||{},c=Fs(u=>{if(!rx(u,t,this.currentDirection))return;let p=l&&l[u]||{};o&&(p={min:0,max:0});const m=r?200:1e6,g=r?40:1e7,x={type:"inertia",velocity:i?e[u]:0,bounceStiffness:m,bounceDamping:g,timeConstant:750,restDelta:1,restSpeed:10,...s,...p};return this.startAxisValueAnimation(u,x)});return Promise.all(c).then(a)}startAxisValueAnimation(e,t){const i=this.getAxisMotionValue(e);return D1(this.visualElement,e),i.start(yI(e,i,0,t,this.visualElement,!1))}stopAnimation(){Fs(e=>this.getAxisMotionValue(e).stop())}pauseAnimation(){Fs(e=>{var t;return(t=this.getAxisMotionValue(e).animation)===null||t===void 0?void 0:t.pause()})}getAnimationState(e){var t;return(t=this.getAxisMotionValue(e).animation)===null||t===void 0?void 0:t.state}getAxisMotionValue(e){const t=`_drag${e.toUpperCase()}`,i=this.visualElement.getProps(),r=i[t];return r||this.visualElement.getValue(e,(i.initial?i.initial[e]:void 0)||0)}snapToCursor(e){Fs(t=>{const{drag:i}=this.getProps();if(!rx(t,i,this.currentDirection))return;const{projection:r}=this.visualElement,s=this.getAxisMotionValue(t);if(r&&r.layout){const{min:o,max:a}=r.layout.layoutBox[t];s.set(e[t]-qn(o,a,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:e,dragConstraints:t}=this.getProps(),{projection:i}=this.visualElement;if(!Ed(t)||!i||!this.constraints)return;this.stopAnimation();const r={x:0,y:0};Fs(o=>{const a=this.getAxisMotionValue(o);if(a&&this.constraints!==!1){const l=a.get();r[o]=zce({min:l,max:l},this.constraints[o])}});const{transformTemplate:s}=this.visualElement.getProps();this.visualElement.current.style.transform=s?s({},""):"none",i.root&&i.root.updateScroll(),i.updateLayout(),this.resolveConstraints(),Fs(o=>{if(!rx(o,e,null))return;const a=this.getAxisMotionValue(o),{min:l,max:c}=this.constraints[o];a.set(qn(l,c,r[o]))})}addListeners(){if(!this.visualElement.current)return;Kce.set(this.visualElement,this);const e=this.visualElement.current,t=fm(e,"pointerdown",l=>{const{drag:c,dragListener:u=!0}=this.getProps();c&&u&&this.start(l)}),i=()=>{const{dragConstraints:l}=this.getProps();Ed(l)&&l.current&&(this.constraints=this.resolveRefConstraints())},{projection:r}=this.visualElement,s=r.addEventListener("measure",i);r&&!r.layout&&(r.root&&r.root.updateScroll(),r.updateLayout()),Fn.read(i);const o=yg(window,"resize",()=>this.scalePositionWithinConstraints()),a=r.addEventListener("didUpdate",({delta:l,hasLayoutChanged:c})=>{this.isDragging&&c&&(Fs(u=>{const p=this.getAxisMotionValue(u);p&&(this.originPoint[u]+=l[u].translate,p.set(p.get()+l[u].translate))}),this.visualElement.render())});return()=>{o(),t(),s(),a&&a()}}getProps(){const e=this.visualElement.getProps(),{drag:t=!1,dragDirectionLock:i=!1,dragPropagation:r=!1,dragConstraints:s=!1,dragElastic:o=B1,dragMomentum:a=!0}=e;return{...e,drag:t,dragDirectionLock:i,dragPropagation:r,dragConstraints:s,dragElastic:o,dragMomentum:a}}}function rx(n,e,t){return(e===!0||e===n)&&(t===null||t===n)}function Jce(n,e=10){let t=null;return Math.abs(n.y)>e?t="y":Math.abs(n.x)>e&&(t="x"),t}class Qce extends _c{constructor(e){super(e),this.removeGroupControls=ws,this.removeListeners=ws,this.controls=new Yce(e)}mount(){const{dragControls:e}=this.node.getProps();e&&(this.removeGroupControls=e.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||ws}unmount(){this.removeGroupControls(),this.removeListeners()}}const Gk=n=>(e,t)=>{n&&Fn.postRender(()=>n(e,t))};class Zce extends _c{constructor(){super(...arguments),this.removePointerDownListener=ws}onPointerDown(e){this.session=new a5(e,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:m5(this.node)})}createPanHandlers(){const{onPanSessionStart:e,onPanStart:t,onPan:i,onPanEnd:r}=this.node.getProps();return{onSessionStart:Gk(e),onStart:Gk(t),onMove:i,onEnd:(s,o)=>{delete this.session,r&&Fn.postRender(()=>r(s,o))}}}mount(){this.removePointerDownListener=fm(this.node.current,"pointerdown",e=>this.onPointerDown(e))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const jx={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function Wk(n,e){return e.max===e.min?0:n/(e.max-e.min)*100}const Ep={correct:(n,e)=>{if(!e.target)return n;if(typeof n=="string")if(Et.test(n))n=parseFloat(n);else return n;const t=Wk(n,e.target.x),i=Wk(n,e.target.y);return`${t}% ${i}%`}},eue={correct:(n,{treeScale:e,projectionDelta:t})=>{const i=n,r=lc.parse(n);if(r.length>5)return i;const s=lc.createTransformer(n),o=typeof r[0]!="number"?1:0,a=t.x.scale*e.x,l=t.y.scale*e.y;r[0+o]/=a,r[1+o]/=l;const c=qn(a,l,.5);return typeof r[2+o]=="number"&&(r[2+o]/=c),typeof r[3+o]=="number"&&(r[3+o]/=c),s(r)}};class tue extends V.Component{componentDidMount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:i,layoutId:r}=this.props,{projection:s}=e;wae(nue),s&&(t.group&&t.group.add(s),i&&i.register&&r&&i.register(s),s.root.didUpdate(),s.addEventListener("animationComplete",()=>{this.safeToRemove()}),s.setOptions({...s.options,onExitComplete:()=>this.safeToRemove()})),jx.hasEverUpdated=!0}getSnapshotBeforeUpdate(e){const{layoutDependency:t,visualElement:i,drag:r,isPresent:s}=this.props,o=i.projection;return o&&(o.isPresent=s,r||e.layoutDependency!==t||t===void 0?o.willUpdate():this.safeToRemove(),e.isPresent!==s&&(s?o.promote():o.relegate()||Fn.postRender(()=>{const a=o.getStack();(!a||!a.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:e}=this.props.visualElement;e&&(e.root.didUpdate(),qM.postRender(()=>{!e.currentAnimation&&e.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:e,layoutGroup:t,switchLayoutGroup:i}=this.props,{projection:r}=e;r&&(r.scheduleCheckAfterUnmount(),t&&t.group&&t.group.remove(r),i&&i.deregister&&i.deregister(r))}safeToRemove(){const{safeToRemove:e}=this.props;e&&e()}render(){return null}}function g5(n){const[e,t]=Ooe(),i=V.useContext(QB);return h.jsx(tue,{...n,layoutGroup:i,switchLayoutGroup:V.useContext(oz),isPresent:e,safeToRemove:t})}const nue={borderRadius:{...Ep,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Ep,borderTopRightRadius:Ep,borderBottomLeftRadius:Ep,borderBottomRightRadius:Ep,boxShadow:eue};function iue(n,e,t){const i=yr(n)?n:mg(n);return i.start(yI("",i,e,t)),i.animation}function rue(n){return n instanceof SVGElement&&n.tagName!=="svg"}const sue=(n,e)=>n.depth-e.depth;class oue{constructor(){this.children=[],this.isDirty=!1}add(e){oI(this.children,e),this.isDirty=!0}remove(e){aI(this.children,e),this.isDirty=!0}forEach(e){this.isDirty&&this.children.sort(sue),this.isDirty=!1,this.children.forEach(e)}}function aue(n,e){const t=qo.now(),i=({timestamp:r})=>{const s=r-t;s>=e&&(ac(i),n(s-e))};return Fn.read(i,!0),()=>ac(i)}const y5=["TopLeft","TopRight","BottomLeft","BottomRight"],lue=y5.length,qk=n=>typeof n=="string"?parseFloat(n):n,$k=n=>typeof n=="number"||Et.test(n);function cue(n,e,t,i,r,s){r?(n.opacity=qn(0,t.opacity!==void 0?t.opacity:1,uue(i)),n.opacityExit=qn(e.opacity!==void 0?e.opacity:1,0,hue(i))):s&&(n.opacity=qn(e.opacity!==void 0?e.opacity:1,t.opacity!==void 0?t.opacity:1,i));for(let o=0;o<lue;o++){const a=`border${y5[o]}Radius`;let l=Xk(e,a),c=Xk(t,a);if(l===void 0&&c===void 0)continue;l||(l=0),c||(c=0),l===0||c===0||$k(l)===$k(c)?(n[a]=Math.max(qn(qk(l),qk(c),i),0),(Wo.test(c)||Wo.test(l))&&(n[a]+="%")):n[a]=c}(e.rotate||t.rotate)&&(n.rotate=qn(e.rotate||0,t.rotate||0,i))}function Xk(n,e){return n[e]!==void 0?n[e]:n.borderRadius}const uue=v5(0,.5,Oz),hue=v5(.5,.95,ws);function v5(n,e,t){return i=>i<n?0:i>e?1:t(cf(n,e,i))}function Kk(n,e){n.min=e.min,n.max=e.max}function js(n,e){Kk(n.x,e.x),Kk(n.y,e.y)}function Yk(n,e){n.translate=e.translate,n.scale=e.scale,n.originPoint=e.originPoint,n.origin=e.origin}function Jk(n,e,t,i,r){return n-=e,n=b_(n,1/t,i),r!==void 0&&(n=b_(n,1/r,i)),n}function due(n,e=0,t=1,i=.5,r,s=n,o=n){if(Wo.test(e)&&(e=parseFloat(e),e=qn(o.min,o.max,e/100)-o.min),typeof e!="number")return;let a=qn(s.min,s.max,i);n===s&&(a-=e),n.min=Jk(n.min,e,t,a,r),n.max=Jk(n.max,e,t,a,r)}function Qk(n,e,[t,i,r],s,o){due(n,e[t],e[i],e[r],e.scale,s,o)}const fue=["x","scaleX","originX"],pue=["y","scaleY","originY"];function Zk(n,e,t,i){Qk(n.x,e,fue,t?t.x:void 0,i?i.x:void 0),Qk(n.y,e,pue,t?t.y:void 0,i?i.y:void 0)}function e3(n){return n.translate===0&&n.scale===1}function x5(n){return e3(n.x)&&e3(n.y)}function t3(n,e){return n.min===e.min&&n.max===e.max}function mue(n,e){return t3(n.x,e.x)&&t3(n.y,e.y)}function n3(n,e){return Math.round(n.min)===Math.round(e.min)&&Math.round(n.max)===Math.round(e.max)}function _5(n,e){return n3(n.x,e.x)&&n3(n.y,e.y)}function i3(n){return Ts(n.x)/Ts(n.y)}function r3(n,e){return n.translate===e.translate&&n.scale===e.scale&&n.originPoint===e.originPoint}class gue{constructor(){this.members=[]}add(e){oI(this.members,e),e.scheduleRender()}remove(e){if(aI(this.members,e),e===this.prevLead&&(this.prevLead=void 0),e===this.lead){const t=this.members[this.members.length-1];t&&this.promote(t)}}relegate(e){const t=this.members.findIndex(r=>e===r);if(t===0)return!1;let i;for(let r=t;r>=0;r--){const s=this.members[r];if(s.isPresent!==!1){i=s;break}}return i?(this.promote(i),!0):!1}promote(e,t){const i=this.lead;if(e!==i&&(this.prevLead=i,this.lead=e,e.show(),i)){i.instance&&i.scheduleRender(),e.scheduleRender(),e.resumeFrom=i,t&&(e.resumeFrom.preserveOpacity=!0),i.snapshot&&(e.snapshot=i.snapshot,e.snapshot.latestValues=i.animationValues||i.latestValues),e.root&&e.root.isUpdating&&(e.isLayoutDirty=!0);const{crossfade:r}=e.options;r===!1&&i.hide()}}exitAnimationComplete(){this.members.forEach(e=>{const{options:t,resumingFrom:i}=e;t.onExitComplete&&t.onExitComplete(),i&&i.options.onExitComplete&&i.options.onExitComplete()})}scheduleRender(){this.members.forEach(e=>{e.instance&&e.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function yue(n,e,t){let i="";const r=n.x.translate/e.x,s=n.y.translate/e.y,o=t?.z||0;if((r||s||o)&&(i=`translate3d(${r}px, ${s}px, ${o}px) `),(e.x!==1||e.y!==1)&&(i+=`scale(${1/e.x}, ${1/e.y}) `),t){const{transformPerspective:c,rotate:u,rotateX:p,rotateY:m,skewX:g,skewY:x}=t;c&&(i=`perspective(${c}px) ${i}`),u&&(i+=`rotate(${u}deg) `),p&&(i+=`rotateX(${p}deg) `),m&&(i+=`rotateY(${m}deg) `),g&&(i+=`skewX(${g}deg) `),x&&(i+=`skewY(${x}deg) `)}const a=n.x.scale*e.x,l=n.y.scale*e.y;return(a!==1||l!==1)&&(i+=`scale(${a}, ${l})`),i||"none"}const hu={type:"projectionFrame",totalNodes:0,resolvedTargetDeltas:0,recalculatedProjection:0},Vp=typeof window<"u"&&window.MotionDebug!==void 0,UT=["","X","Y","Z"],vue={visibility:"hidden"},s3=1e3;let xue=0;function jT(n,e,t,i){const{latestValues:r}=e;r[n]&&(t[n]=r[n],e.setStaticValue(n,0),i&&(i[n]=0))}function w5(n){if(n.hasCheckedOptimisedAppear=!0,n.root===n)return;const{visualElement:e}=n.options;if(!e)return;const t=Iz(e);if(window.MotionHasOptimisedAnimation(t,"transform")){const{layout:r,layoutId:s}=n.options;window.MotionCancelOptimisedAnimation(t,"transform",Fn,!(r||s))}const{parent:i}=n;i&&!i.hasCheckedOptimisedAppear&&w5(i)}function b5({attachResizeListener:n,defaultParent:e,measureScroll:t,checkIsScrollRoot:i,resetTransform:r}){return class{constructor(o={},a=e?.()){this.id=xue++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,Vp&&(hu.totalNodes=hu.resolvedTargetDeltas=hu.recalculatedProjection=0),this.nodes.forEach(bue),this.nodes.forEach(Aue),this.nodes.forEach(Mue),this.nodes.forEach(Sue),Vp&&window.MotionDebug.record(hu)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=a?a.root||a:this,this.path=a?[...a.path,a]:[],this.parent=a,this.depth=a?a.depth+1:0;for(let l=0;l<this.path.length;l++)this.path[l].shouldResetTransform=!0;this.root===this&&(this.nodes=new oue)}addEventListener(o,a){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new lI),this.eventHandlers.get(o).add(a)}notifyListeners(o,...a){const l=this.eventHandlers.get(o);l&&l.notify(...a)}hasListeners(o){return this.eventHandlers.has(o)}mount(o,a=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=rue(o),this.instance=o;const{layoutId:l,layout:c,visualElement:u}=this.options;if(u&&!u.current&&u.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),a&&(c||l)&&(this.isLayoutDirty=!0),n){let p;const m=()=>this.root.updateBlockedByResize=!1;n(o,()=>{this.root.updateBlockedByResize=!0,p&&p(),p=aue(m,250),jx.hasAnimatedSinceResize&&(jx.hasAnimatedSinceResize=!1,this.nodes.forEach(a3))})}l&&this.root.registerSharedNode(l,this),this.options.animate!==!1&&u&&(l||c)&&this.addEventListener("didUpdate",({delta:p,hasLayoutChanged:m,hasRelativeTargetChanged:g,layout:x})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const b=this.options.transition||u.getDefaultTransition()||Due,{onLayoutAnimationStart:w,onLayoutAnimationComplete:v}=u.getProps(),S=!this.targetLayout||!_5(this.targetLayout,x)||g,E=!m&&g;if(this.options.layoutRoot||this.resumeFrom&&this.resumeFrom.instance||E||m&&(S||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(p,E);const C={...nI(b,"layout"),onPlay:w,onComplete:v};(u.shouldReduceMotion||this.options.layoutRoot)&&(C.delay=0,C.type=!1),this.startAnimation(C)}else m||a3(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=x})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,ac(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(Iue),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&w5(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let u=0;u<this.path.length;u++){const p=this.path[u];p.shouldResetTransform=!0,p.updateScroll("snapshot"),p.options.layoutRoot&&p.willUpdate(!1)}const{layoutId:a,layout:l}=this.options;if(a===void 0&&!l)return;const c=this.getTransformTemplate();this.prevTransformTemplateValue=c?c(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(o3);return}this.isUpdating||this.nodes.forEach(Eue),this.isUpdating=!1,this.nodes.forEach(Cue),this.nodes.forEach(_ue),this.nodes.forEach(wue),this.clearAllSnapshots();const a=qo.now();Wi.delta=Va(0,1e3/60,a-Wi.timestamp),Wi.timestamp=a,Wi.isProcessing=!0,IT.update.process(Wi),IT.preRender.process(Wi),IT.render.process(Wi),Wi.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,qM.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(Tue),this.sharedNodes.forEach(Pue)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Fn.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Fn.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure())}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let l=0;l<this.path.length;l++)this.path[l].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutCorrected=si(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:a}=this.options;a&&a.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let a=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(a=!1),a){const l=i(this.instance);this.scroll={animationId:this.root.animationId,phase:o,isRoot:l,offset:t(this.instance),wasRoot:this.scroll?this.scroll.isRoot:l}}}resetTransform(){if(!r)return;const o=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,a=this.projectionDelta&&!x5(this.projectionDelta),l=this.getTransformTemplate(),c=l?l(this.latestValues,""):void 0,u=c!==this.prevTransformTemplateValue;o&&(a||uu(this.latestValues)||u)&&(r(this.instance,c),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const a=this.measurePageBox();let l=this.removeElementScroll(a);return o&&(l=this.removeTransform(l)),Lue(l),{animationId:this.root.animationId,measuredBox:a,layoutBox:l,latestValues:{},source:this.id}}measurePageBox(){var o;const{visualElement:a}=this.options;if(!a)return si();const l=a.measureViewportBox();if(!(((o=this.scroll)===null||o===void 0?void 0:o.wasRoot)||this.path.some(kue))){const{scroll:u}=this.root;u&&(Md(l.x,u.offset.x),Md(l.y,u.offset.y))}return l}removeElementScroll(o){var a;const l=si();if(js(l,o),!((a=this.scroll)===null||a===void 0)&&a.wasRoot)return l;for(let c=0;c<this.path.length;c++){const u=this.path[c],{scroll:p,options:m}=u;u!==this.root&&p&&m.layoutScroll&&(p.wasRoot&&js(l,o),Md(l.x,p.offset.x),Md(l.y,p.offset.y))}return l}applyTransform(o,a=!1){const l=si();js(l,o);for(let c=0;c<this.path.length;c++){const u=this.path[c];!a&&u.options.layoutScroll&&u.scroll&&u!==u.root&&Id(l,{x:-u.scroll.offset.x,y:-u.scroll.offset.y}),uu(u.latestValues)&&Id(l,u.latestValues)}return uu(this.latestValues)&&Id(l,this.latestValues),l}removeTransform(o){const a=si();js(a,o);for(let l=0;l<this.path.length;l++){const c=this.path[l];if(!c.instance||!uu(c.latestValues))continue;z1(c.latestValues)&&c.updateSnapshot();const u=si(),p=c.measurePageBox();js(u,p),Zk(a,c.latestValues,c.snapshot?c.snapshot.layoutBox:void 0,u)}return uu(this.latestValues)&&Zk(a,this.latestValues),a}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Wi.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){var a;const l=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=l.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=l.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=l.isSharedProjectionDirty);const c=!!this.resumingFrom||this!==l;if(!(o||c&&this.isSharedProjectionDirty||this.isProjectionDirty||!((a=this.parent)===null||a===void 0)&&a.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:p,layoutId:m}=this.options;if(!(!this.layout||!(p||m))){if(this.resolvedRelativeTargetAt=Wi.timestamp,!this.targetDelta&&!this.relativeTarget){const g=this.getClosestProjectingParent();g&&g.layout&&this.animationProgress!==1?(this.relativeParent=g,this.forceRelativeParentToResolveTarget(),this.relativeTarget=si(),this.relativeTargetOrigin=si(),mm(this.relativeTargetOrigin,this.layout.layoutBox,g.layout.layoutBox),js(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)){if(this.target||(this.target=si(),this.targetWithTransforms=si()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),jce(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):js(this.target,this.layout.layoutBox),f5(this.target,this.targetDelta)):js(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget){this.attemptToResolveRelativeTarget=!1;const g=this.getClosestProjectingParent();g&&!!g.resumingFrom==!!this.resumingFrom&&!g.options.layoutScroll&&g.target&&this.animationProgress!==1?(this.relativeParent=g,this.forceRelativeParentToResolveTarget(),this.relativeTarget=si(),this.relativeTargetOrigin=si(),mm(this.relativeTargetOrigin,this.target,g.target),js(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}Vp&&hu.resolvedTargetDeltas++}}}getClosestProjectingParent(){if(!(!this.parent||z1(this.parent.latestValues)||d5(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var o;const a=this.getLead(),l=!!this.resumingFrom||this!==a;let c=!0;if((this.isProjectionDirty||!((o=this.parent)===null||o===void 0)&&o.isProjectionDirty)&&(c=!1),l&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(c=!1),this.resolvedRelativeTargetAt===Wi.timestamp&&(c=!1),c)return;const{layout:u,layoutId:p}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(u||p))return;js(this.layoutCorrected,this.layout.layoutBox);const m=this.treeScale.x,g=this.treeScale.y;$ce(this.layoutCorrected,this.treeScale,this.path,l),a.layout&&!a.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(a.target=a.layout.layoutBox,a.targetWithTransforms=si());const{target:x}=a;if(!x){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(Yk(this.prevProjectionDelta.x,this.projectionDelta.x),Yk(this.prevProjectionDelta.y,this.projectionDelta.y)),pm(this.projectionDelta,this.layoutCorrected,x,this.latestValues),(this.treeScale.x!==m||this.treeScale.y!==g||!r3(this.projectionDelta.x,this.prevProjectionDelta.x)||!r3(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",x)),Vp&&hu.recalculatedProjection++}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){var a;if((a=this.options.visualElement)===null||a===void 0||a.scheduleRender(),o){const l=this.getStack();l&&l.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Ad(),this.projectionDelta=Ad(),this.projectionDeltaWithTransform=Ad()}setAnimationOrigin(o,a=!1){const l=this.snapshot,c=l?l.latestValues:{},u={...this.latestValues},p=Ad();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!a;const m=si(),g=l?l.source:void 0,x=this.layout?this.layout.source:void 0,b=g!==x,w=this.getStack(),v=!w||w.members.length<=1,S=!!(b&&!v&&this.options.crossfade===!0&&!this.path.some(Nue));this.animationProgress=0;let E;this.mixTargetDelta=C=>{const U=C/1e3;l3(p.x,o.x,U),l3(p.y,o.y,U),this.setTargetDelta(p),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(mm(m,this.layout.layoutBox,this.relativeParent.layout.layoutBox),Rue(this.relativeTarget,this.relativeTargetOrigin,m,U),E&&mue(this.relativeTarget,E)&&(this.isProjectionDirty=!1),E||(E=si()),js(E,this.relativeTarget)),b&&(this.animationValues=u,cue(u,c,this.latestValues,U,S,v)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=U},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(ac(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Fn.update(()=>{jx.hasAnimatedSinceResize=!0,this.currentAnimation=iue(0,s3,{...o,onUpdate:a=>{this.mixTargetDelta(a),o.onUpdate&&o.onUpdate(a)},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(s3),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:a,target:l,layout:c,latestValues:u}=o;if(!(!a||!l||!c)){if(this!==o&&this.layout&&c&&S5(this.options.animationType,this.layout.layoutBox,c.layoutBox)){l=this.target||si();const p=Ts(this.layout.layoutBox.x);l.x.min=o.target.x.min,l.x.max=l.x.min+p;const m=Ts(this.layout.layoutBox.y);l.y.min=o.target.y.min,l.y.max=l.y.min+m}js(a,l),Id(a,u),pm(this.projectionDeltaWithTransform,this.layoutCorrected,a,u)}}registerSharedNode(o,a){this.sharedNodes.has(o)||this.sharedNodes.set(o,new gue),this.sharedNodes.get(o).add(a);const c=a.options.initialPromotionConfig;a.promote({transition:c?c.transition:void 0,preserveFollowOpacity:c&&c.shouldPreserveFollowOpacity?c.shouldPreserveFollowOpacity(a):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){var o;const{layoutId:a}=this.options;return a?((o=this.getStack())===null||o===void 0?void 0:o.lead)||this:this}getPrevLead(){var o;const{layoutId:a}=this.options;return a?(o=this.getStack())===null||o===void 0?void 0:o.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:a,preserveFollowOpacity:l}={}){const c=this.getStack();c&&c.promote(this,l),o&&(this.projectionDelta=void 0,this.needsReset=!0),a&&this.setOptions({transition:a})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetSkewAndRotation(){const{visualElement:o}=this.options;if(!o)return;let a=!1;const{latestValues:l}=o;if((l.z||l.rotate||l.rotateX||l.rotateY||l.rotateZ||l.skewX||l.skewY)&&(a=!0),!a)return;const c={};l.z&&jT("z",o,c,this.animationValues);for(let u=0;u<UT.length;u++)jT(`rotate${UT[u]}`,o,c,this.animationValues),jT(`skew${UT[u]}`,o,c,this.animationValues);o.render();for(const u in c)o.setStaticValue(u,c[u]),this.animationValues&&(this.animationValues[u]=c[u]);o.scheduleRender()}getProjectionStyles(o){var a,l;if(!this.instance||this.isSVG)return;if(!this.isVisible)return vue;const c={visibility:""},u=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,c.opacity="",c.pointerEvents=Ox(o?.pointerEvents)||"",c.transform=u?u(this.latestValues,""):"none",c;const p=this.getLead();if(!this.projectionDelta||!this.layout||!p.target){const b={};return this.options.layoutId&&(b.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,b.pointerEvents=Ox(o?.pointerEvents)||""),this.hasProjected&&!uu(this.latestValues)&&(b.transform=u?u({},""):"none",this.hasProjected=!1),b}const m=p.animationValues||p.latestValues;this.applyTransformsToTarget(),c.transform=yue(this.projectionDeltaWithTransform,this.treeScale,m),u&&(c.transform=u(m,c.transform));const{x:g,y:x}=this.projectionDelta;c.transformOrigin=`${g.origin*100}% ${x.origin*100}% 0`,p.animationValues?c.opacity=p===this?(l=(a=m.opacity)!==null&&a!==void 0?a:this.latestValues.opacity)!==null&&l!==void 0?l:1:this.preserveOpacity?this.latestValues.opacity:m.opacityExit:c.opacity=p===this?m.opacity!==void 0?m.opacity:"":m.opacityExit!==void 0?m.opacityExit:0;for(const b in y_){if(m[b]===void 0)continue;const{correct:w,applyTo:v}=y_[b],S=c.transform==="none"?m[b]:w(m[b],p);if(v){const E=v.length;for(let C=0;C<E;C++)c[v[C]]=S}else c[b]=S}return this.options.layoutId&&(c.pointerEvents=p===this?Ox(o?.pointerEvents)||"":"none"),c}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>{var a;return(a=o.currentAnimation)===null||a===void 0?void 0:a.stop()}),this.root.nodes.forEach(o3),this.root.sharedNodes.clear()}}}function _ue(n){n.updateLayout()}function wue(n){var e;const t=((e=n.resumeFrom)===null||e===void 0?void 0:e.snapshot)||n.snapshot;if(n.isLead()&&n.layout&&t&&n.hasListeners("didUpdate")){const{layoutBox:i,measuredBox:r}=n.layout,{animationType:s}=n.options,o=t.source!==n.layout.source;s==="size"?Fs(p=>{const m=o?t.measuredBox[p]:t.layoutBox[p],g=Ts(m);m.min=i[p].min,m.max=m.min+g}):S5(s,t.layoutBox,i)&&Fs(p=>{const m=o?t.measuredBox[p]:t.layoutBox[p],g=Ts(i[p]);m.max=m.min+g,n.relativeTarget&&!n.currentAnimation&&(n.isProjectionDirty=!0,n.relativeTarget[p].max=n.relativeTarget[p].min+g)});const a=Ad();pm(a,i,t.layoutBox);const l=Ad();o?pm(l,n.applyTransform(r,!0),t.measuredBox):pm(l,i,t.layoutBox);const c=!x5(a);let u=!1;if(!n.resumeFrom){const p=n.getClosestProjectingParent();if(p&&!p.resumeFrom){const{snapshot:m,layout:g}=p;if(m&&g){const x=si();mm(x,t.layoutBox,m.layoutBox);const b=si();mm(b,i,g.layoutBox),_5(x,b)||(u=!0),p.options.layoutRoot&&(n.relativeTarget=b,n.relativeTargetOrigin=x,n.relativeParent=p)}}}n.notifyListeners("didUpdate",{layout:i,snapshot:t,delta:l,layoutDelta:a,hasLayoutChanged:c,hasRelativeTargetChanged:u})}else if(n.isLead()){const{onExitComplete:i}=n.options;i&&i()}n.options.transition=void 0}function bue(n){Vp&&hu.totalNodes++,n.parent&&(n.isProjecting()||(n.isProjectionDirty=n.parent.isProjectionDirty),n.isSharedProjectionDirty||(n.isSharedProjectionDirty=!!(n.isProjectionDirty||n.parent.isProjectionDirty||n.parent.isSharedProjectionDirty)),n.isTransformDirty||(n.isTransformDirty=n.parent.isTransformDirty))}function Sue(n){n.isProjectionDirty=n.isSharedProjectionDirty=n.isTransformDirty=!1}function Tue(n){n.clearSnapshot()}function o3(n){n.clearMeasurements()}function Eue(n){n.isLayoutDirty=!1}function Cue(n){const{visualElement:e}=n.options;e&&e.getProps().onBeforeLayoutMeasure&&e.notify("BeforeLayoutMeasure"),n.resetTransform()}function a3(n){n.finishAnimation(),n.targetDelta=n.relativeTarget=n.target=void 0,n.isProjectionDirty=!0}function Aue(n){n.resolveTargetDelta()}function Mue(n){n.calcProjection()}function Iue(n){n.resetSkewAndRotation()}function Pue(n){n.removeLeadSnapshot()}function l3(n,e,t){n.translate=qn(e.translate,0,t),n.scale=qn(e.scale,1,t),n.origin=e.origin,n.originPoint=e.originPoint}function c3(n,e,t,i){n.min=qn(e.min,t.min,i),n.max=qn(e.max,t.max,i)}function Rue(n,e,t,i){c3(n.x,e.x,t.x,i),c3(n.y,e.y,t.y,i)}function Nue(n){return n.animationValues&&n.animationValues.opacityExit!==void 0}const Due={duration:.45,ease:[.4,0,.1,1]},u3=n=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(n),h3=u3("applewebkit/")&&!u3("chrome/")?Math.round:ws;function d3(n){n.min=h3(n.min),n.max=h3(n.max)}function Lue(n){d3(n.x),d3(n.y)}function S5(n,e,t){return n==="position"||n==="preserve-aspect"&&!Uce(i3(e),i3(t),.2)}function kue(n){var e;return n!==n.root&&((e=n.scroll)===null||e===void 0?void 0:e.wasRoot)}const Oue=b5({attachResizeListener:(n,e)=>yg(n,"resize",e),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),FT={current:void 0},T5=b5({measureScroll:n=>({x:n.scrollLeft,y:n.scrollTop}),defaultParent:()=>{if(!FT.current){const n=new Oue({});n.mount(window),n.setOptions({layoutScroll:!0}),FT.current=n}return FT.current},resetTransform:(n,e)=>{n.style.transform=e!==void 0?e:"none"},checkIsScrollRoot:n=>window.getComputedStyle(n).position==="fixed"}),Uue={pan:{Feature:Zce},drag:{Feature:Qce,ProjectionNode:T5,MeasureLayout:g5}};function f3(n,e,t){const{props:i}=n;n.animationState&&i.whileHover&&n.animationState.setActive("whileHover",t==="Start");const r="onHover"+t,s=i[r];s&&Fn.postRender(()=>s(e,ey(e)))}class jue extends _c{mount(){const{current:e}=this.node;e&&(this.unmount=Uae(e,t=>(f3(this.node,t,"Start"),i=>f3(this.node,i,"End"))))}unmount(){}}class Fue extends _c{constructor(){super(...arguments),this.isActive=!1}onFocus(){let e=!1;try{e=this.node.current.matches(":focus-visible")}catch{e=!0}!e||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Zg(yg(this.node.current,"focus",()=>this.onFocus()),yg(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function p3(n,e,t){const{props:i}=n;n.animationState&&i.whileTap&&n.animationState.setActive("whileTap",t==="Start");const r="onTap"+(t==="End"?"":t),s=i[r];s&&Fn.postRender(()=>s(e,ey(e)))}class Vue extends _c{mount(){const{current:e}=this.node;e&&(this.unmount=Bae(e,t=>(p3(this.node,t,"Start"),(i,{success:r})=>p3(this.node,i,r?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const G1=new WeakMap,VT=new WeakMap,Bue=n=>{const e=G1.get(n.target);e&&e(n)},zue=n=>{n.forEach(Bue)};function Hue({root:n,...e}){const t=n||document;VT.has(t)||VT.set(t,{});const i=VT.get(t),r=JSON.stringify(e);return i[r]||(i[r]=new IntersectionObserver(zue,{root:n,...e})),i[r]}function Gue(n,e,t){const i=Hue(e);return G1.set(n,t),i.observe(n),()=>{G1.delete(n),i.unobserve(n)}}const Wue={some:0,all:1};class que extends _c{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:e={}}=this.node.getProps(),{root:t,margin:i,amount:r="some",once:s}=e,o={root:t?t.current:void 0,rootMargin:i,threshold:typeof r=="number"?r:Wue[r]},a=l=>{const{isIntersecting:c}=l;if(this.isInView===c||(this.isInView=c,s&&!c&&this.hasEnteredView))return;c&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",c);const{onViewportEnter:u,onViewportLeave:p}=this.node.getProps(),m=c?u:p;m&&m(l)};return Gue(this.node.current,o,a)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:e,prevProps:t}=this.node;["amount","margin","root"].some($ue(e,t))&&this.startObserver()}unmount(){}}function $ue({viewport:n={}},{viewport:e={}}={}){return t=>n[t]!==e[t]}const Xue={inView:{Feature:que},tap:{Feature:Vue},focus:{Feature:Fue},hover:{Feature:jue}},Kue={layout:{ProjectionNode:T5,MeasureLayout:g5}},W1={current:null},E5={current:!1};function Yue(){if(E5.current=!0,!!BM)if(window.matchMedia){const n=window.matchMedia("(prefers-reduced-motion)"),e=()=>W1.current=n.matches;n.addListener(e),e()}else W1.current=!1}const Jue=[...Yz,dr,lc],Que=n=>Jue.find(Kz(n)),m3=new WeakMap;function Zue(n,e,t){for(const i in e){const r=e[i],s=t[i];if(yr(r))n.addValue(i,r);else if(yr(s))n.addValue(i,mg(r,{owner:n}));else if(s!==r)if(n.hasValue(i)){const o=n.getValue(i);o.liveStyle===!0?o.jump(r):o.hasAnimated||o.set(r)}else{const o=n.getStaticValue(i);n.addValue(i,mg(o!==void 0?o:r,{owner:n}))}}for(const i in t)e[i]===void 0&&n.removeValue(i);return e}const g3=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class ehe{scrapeMotionValuesFromProps(e,t,i){return{}}constructor({parent:e,props:t,presenceContext:i,reducedMotionConfig:r,blockInitialAnimation:s,visualState:o},a={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=pI,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const g=qo.now();this.renderScheduledAt<g&&(this.renderScheduledAt=g,Fn.render(this.render,!1,!0))};const{latestValues:l,renderState:c,onUpdate:u}=o;this.onUpdate=u,this.latestValues=l,this.baseTarget={...l},this.initialValues=t.initial?{...l}:{},this.renderState=c,this.parent=e,this.props=t,this.presenceContext=i,this.depth=e?e.depth+1:0,this.reducedMotionConfig=r,this.options=a,this.blockInitialAnimation=!!s,this.isControllingVariants=Qw(t),this.isVariantNode=rz(t),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(e&&e.current);const{willChange:p,...m}=this.scrapeMotionValuesFromProps(t,{},this);for(const g in m){const x=m[g];l[g]!==void 0&&yr(x)&&x.set(l[g],!1)}}mount(e){this.current=e,m3.set(e,this),this.projection&&!this.projection.instance&&this.projection.mount(e),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((t,i)=>this.bindToMotionValue(i,t)),E5.current||Yue(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:W1.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){m3.delete(this.current),this.projection&&this.projection.unmount(),ac(this.notifyUpdate),ac(this.render),this.valueSubscriptions.forEach(e=>e()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const e in this.events)this.events[e].clear();for(const e in this.features){const t=this.features[e];t&&(t.unmount(),t.isMounted=!1)}this.current=null}bindToMotionValue(e,t){this.valueSubscriptions.has(e)&&this.valueSubscriptions.get(e)();const i=oh.has(e),r=t.on("change",a=>{this.latestValues[e]=a,this.props.onUpdate&&Fn.preRender(this.notifyUpdate),i&&this.projection&&(this.projection.isTransformDirty=!0)}),s=t.on("renderRequest",this.scheduleRender);let o;window.MotionCheckAppearSync&&(o=window.MotionCheckAppearSync(this,e,t)),this.valueSubscriptions.set(e,()=>{r(),s(),o&&o(),t.owner&&t.stop()})}sortNodePosition(e){return!this.current||!this.sortInstanceNodePosition||this.type!==e.type?0:this.sortInstanceNodePosition(this.current,e.current)}updateFeatures(){let e="animation";for(e in uf){const t=uf[e];if(!t)continue;const{isEnabled:i,Feature:r}=t;if(!this.features[e]&&r&&i(this.props)&&(this.features[e]=new r(this)),this.features[e]){const s=this.features[e];s.isMounted?s.update():(s.mount(),s.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):si()}getStaticValue(e){return this.latestValues[e]}setStaticValue(e,t){this.latestValues[e]=t}update(e,t){(e.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=e,this.prevPresenceContext=this.presenceContext,this.presenceContext=t;for(let i=0;i<g3.length;i++){const r=g3[i];this.propEventSubscriptions[r]&&(this.propEventSubscriptions[r](),delete this.propEventSubscriptions[r]);const s="on"+r,o=e[s];o&&(this.propEventSubscriptions[r]=this.on(r,o))}this.prevMotionValues=Zue(this,this.scrapeMotionValuesFromProps(e,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue(),this.onUpdate&&this.onUpdate(this)}getProps(){return this.props}getVariant(e){return this.props.variants?this.props.variants[e]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(e){const t=this.getClosestVariantNode();if(t)return t.variantChildren&&t.variantChildren.add(e),()=>t.variantChildren.delete(e)}addValue(e,t){const i=this.values.get(e);t!==i&&(i&&this.removeValue(e),this.bindToMotionValue(e,t),this.values.set(e,t),this.latestValues[e]=t.get())}removeValue(e){this.values.delete(e);const t=this.valueSubscriptions.get(e);t&&(t(),this.valueSubscriptions.delete(e)),delete this.latestValues[e],this.removeValueFromRenderState(e,this.renderState)}hasValue(e){return this.values.has(e)}getValue(e,t){if(this.props.values&&this.props.values[e])return this.props.values[e];let i=this.values.get(e);return i===void 0&&t!==void 0&&(i=mg(t===null?void 0:t,{owner:this}),this.addValue(e,i)),i}readValue(e,t){var i;let r=this.latestValues[e]!==void 0||!this.current?this.latestValues[e]:(i=this.getBaseTargetFromProps(this.props,e))!==null&&i!==void 0?i:this.readValueFromInstance(this.current,e,this.options);return r!=null&&(typeof r=="string"&&($z(r)||jz(r))?r=parseFloat(r):!Que(r)&&lc.test(t)&&(r=Gz(e,t)),this.setBaseTarget(e,yr(r)?r.get():r)),yr(r)?r.get():r}setBaseTarget(e,t){this.baseTarget[e]=t}getBaseTarget(e){var t;const{initial:i}=this.props;let r;if(typeof i=="string"||typeof i=="object"){const o=XM(this.props,i,(t=this.presenceContext)===null||t===void 0?void 0:t.custom);o&&(r=o[e])}if(i&&r!==void 0)return r;const s=this.getBaseTargetFromProps(this.props,e);return s!==void 0&&!yr(s)?s:this.initialValues[e]!==void 0&&r===void 0?void 0:this.baseTarget[e]}on(e,t){return this.events[e]||(this.events[e]=new lI),this.events[e].add(t)}notify(e,...t){this.events[e]&&this.events[e].notify(...t)}}class C5 extends ehe{constructor(){super(...arguments),this.KeyframeResolver=Jz}sortInstanceNodePosition(e,t){return e.compareDocumentPosition(t)&2?1:-1}getBaseTargetFromProps(e,t){return e.style?e.style[t]:void 0}removeValueFromRenderState(e,{vars:t,style:i}){delete t[e],delete i[e]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:e}=this.props;yr(e)&&(this.childSubscription=e.on("change",t=>{this.current&&(this.current.textContent=`${t}`)}))}}function the(n){return window.getComputedStyle(n)}class nhe extends C5{constructor(){super(...arguments),this.type="html",this.renderInstance=fz}readValueFromInstance(e,t){if(oh.has(t)){const i=fI(t);return i&&i.default||0}else{const i=the(e),r=(uz(t)?i.getPropertyValue(t):i[t])||0;return typeof r=="string"?r.trim():r}}measureInstanceViewportBox(e,{transformPagePoint:t}){return p5(e,t)}build(e,t,i){JM(e,t,i.transformTemplate)}scrapeMotionValuesFromProps(e,t,i){return tI(e,t,i)}}class ihe extends C5{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=si}getBaseTargetFromProps(e,t){return e[t]}readValueFromInstance(e,t){if(oh.has(t)){const i=fI(t);return i&&i.default||0}return t=pz.has(t)?t:WM(t),e.getAttribute(t)}scrapeMotionValuesFromProps(e,t,i){return yz(e,t,i)}build(e,t,i){QM(e,t,this.isSVGTag,i.transformTemplate)}renderInstance(e,t,i,r){mz(e,t,i,r)}mount(e){this.isSVGTag=eI(e.tagName),super.mount(e)}}const rhe=(n,e)=>$M(n)?new ihe(e):new nhe(e,{allowProjection:n!==V.Fragment}),she=Pae({...Mce,...Xue,...Uue,...Kue},rhe),pn=Woe(she),W={paddingX:"sm:px-16 px-6",paddingY:"sm:py-16 py-6",padding:"sm:px-16 px-6 sm:py-16 py-10",headText:"font-black text-white lg:text-[80px] sm:text-[60px] xs:text-[50px] text-[40px] lg:leading-[98px] mt-2",headSubText:"text-[#dfd9ff] font-medium lg:text-[30px] sm:text-[26px] xs:text-[20px] text-[16px] lg:leading-[40px]",paragraphHeadText:"text-white font-black md:text-[60px] sm:text-[50px] xs:text-[40px] text-[30px]",paragraphSubText:"sm:text-[18px] text-[14px] text-secondary uppercase tracking-wider",paragraphSubTextLower:"sm:text-[18px] text-[14px] text-secondary tracking-wider",dictionaryText:"text-black sm:text-[18px] text-[14px] tracking-wider uppercase mb-2",appointmentSubTextLower:"font-medium sm:text-[20px] text-[14px] text-secondary tracking-wide text-left"},oi=(n,e,t,i)=>({hidden:{x:n==="left"||n==="right"?100:0,y:n==="top"||n==="bottom"?100:0,opacity:0},show:{x:0,y:0,opacity:1,transition:{type:e,delay:t,duration:i,ease:"easeOut"}}}),S_=n=>({hidden:{y:-50,opacity:0},show:{y:0,opacity:1,transition:{type:"spring",duration:1.25,delay:n}}}),A5=(n,e)=>({hidden:{},show:{transition:{staggerChildren:n,delayChildren:e||0}}}),Mt=(n,e)=>function(i){return h.jsxs(pn.section,{variants:A5(),initial:"hidden",whileInView:"show",viewport:{once:!0,amount:.25},className:`${W.padding} max-w-7xl mx-auto relative z-0`,children:[h.jsxs("span",{className:"hash-span",id:e,children:[" ",""," "]}),h.jsx(n,{...i})]})},vn=({children:n})=>(V.useEffect(()=>{window.scrollTo(0,0)},[]),h.jsx(h.Fragment,{children:n})),ohe=()=>{const{progress:n}=foe();return h.jsxs(loe,{as:"div",center:!0,style:{display:"flex",justifyContent:"center",alignItems:"center",flexDirection:"column"},children:[h.jsx("span",{className:"canvas-loader"}),h.jsxs("p",{style:{fontSize:14,color:"#F1F1F1",fontWeight:800,marginTop:40},children:[n.toFixed(2),"%"]})]})},M5=()=>h.jsx(WB,{children:h.jsx(ohe,{})});var I5={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},y3=ko.createContext&&ko.createContext(I5),ahe=["attr","size","title"];function lhe(n,e){if(n==null)return{};var t=che(n,e),i,r;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(n);for(r=0;r<s.length;r++)i=s[r],!(e.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(n,i)&&(t[i]=n[i])}return t}function che(n,e){if(n==null)return{};var t={};for(var i in n)if(Object.prototype.hasOwnProperty.call(n,i)){if(e.indexOf(i)>=0)continue;t[i]=n[i]}return t}function T_(){return T_=Object.assign?Object.assign.bind():function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},T_.apply(this,arguments)}function v3(n,e){var t=Object.keys(n);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(n);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(n,r).enumerable})),t.push.apply(t,i)}return t}function E_(n){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?v3(Object(t),!0).forEach(function(i){uhe(n,i,t[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(n,Object.getOwnPropertyDescriptors(t)):v3(Object(t)).forEach(function(i){Object.defineProperty(n,i,Object.getOwnPropertyDescriptor(t,i))})}return n}function uhe(n,e,t){return e=hhe(e),e in n?Object.defineProperty(n,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):n[e]=t,n}function hhe(n){var e=dhe(n,"string");return typeof e=="symbol"?e:e+""}function dhe(n,e){if(typeof n!="object"||!n)return n;var t=n[Symbol.toPrimitive];if(t!==void 0){var i=t.call(n,e);if(typeof i!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(n)}function P5(n){return n&&n.map((e,t)=>ko.createElement(e.tag,E_({key:t},e.attr),P5(e.child)))}function ah(n){return e=>ko.createElement(fhe,T_({attr:E_({},n.attr)},e),P5(n.child))}function fhe(n){var e=t=>{var{attr:i,size:r,title:s}=n,o=lhe(n,ahe),a=r||t.size||"1em",l;return t.className&&(l=t.className),n.className&&(l=(l?l+" ":"")+n.className),ko.createElement("svg",T_({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,i,o,{className:l,style:E_(E_({color:n.color||t.color},t.style),n.style),height:a,width:a,xmlns:"http://www.w3.org/2000/svg"}),s&&ko.createElement("title",null,s),n.children)};return y3!==void 0?ko.createElement(y3.Consumer,null,t=>e(t)):e(I5)}function R5(n){return ah({attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M634 471L36 3.51A16 16 0 0 0 13.51 6l-10 12.49A16 16 0 0 0 6 41l598 467.49a16 16 0 0 0 22.49-2.49l10-12.49A16 16 0 0 0 634 471zM296.79 146.47l134.79 105.38C429.36 191.91 380.48 144 320 144a112.26 112.26 0 0 0-23.21 2.47zm46.42 219.07L208.42 260.16C210.65 320.09 259.53 368 320 368a113 113 0 0 0 23.21-2.46zM320 112c98.65 0 189.09 55 237.93 144a285.53 285.53 0 0 1-44 60.2l37.74 29.5a333.7 333.7 0 0 0 52.9-75.11 32.35 32.35 0 0 0 0-29.19C550.29 135.59 442.93 64 320 64c-36.7 0-71.71 7-104.63 18.81l46.41 36.29c18.94-4.3 38.34-7.1 58.22-7.1zm0 288c-98.65 0-189.08-55-237.93-144a285.47 285.47 0 0 1 44.05-60.19l-37.74-29.5a333.6 333.6 0 0 0-52.89 75.1 32.35 32.35 0 0 0 0 29.19C89.72 376.41 197.08 448 320 448c36.7 0 71.71-7.05 104.63-18.81l-46.41-36.28C359.28 397.2 339.89 400 320 400z"},child:[]}]})(n)}function N5(n){return ah({attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M288 144a110.94 110.94 0 0 0-31.24 5 55.4 55.4 0 0 1 7.24 27 56 56 0 0 1-56 56 55.4 55.4 0 0 1-27-7.24A111.71 111.71 0 1 0 288 144zm284.52 97.4C518.29 135.59 410.93 64 288 64S57.68 135.64 3.48 241.41a32.35 32.35 0 0 0 0 29.19C57.71 376.41 165.07 448 288 448s230.32-71.64 284.52-177.41a32.35 32.35 0 0 0 0-29.19zM288 400c-98.65 0-189.09-55-237.93-144C98.91 167 189.34 112 288 112s189.09 55 237.93 144C477.1 345 386.66 400 288 400z"},child:[]}]})(n)}const phe="/CapstoneOne/assets/logoLandscape.png";var mhe="firebase",ghe="11.4.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Gl(mhe,ghe,"app");const yhe={apiKey:"AIzaSyDPpcxhOuSbk_dknSoUgt34VSYfq2cLg2g",authDomain:"karapatanko-e686b.firebaseapp.com",projectId:"karapatanko-e686b",storageBucket:"karapatanko-e686b.appspot.com",messagingSenderId:"253855212071",appId:"1:253855212071:web:10e25578cb9140b3136402"},D5=aj(yhe),vI=Kl(D5),Lo=ic(D5),vhe=()=>{const n=Pt(),[e,t]=V.useState(""),[i,r]=V.useState(""),[s,o]=V.useState(""),[a,l]=V.useState(!1),[c,u]=V.useState(!1),p=async g=>{if(g.preventDefault(),!e||!i){o("Both fields are required.");return}l(!0);try{const b=(await Pq(vI,e,i)).user;console.log("User logged in:",b),AV(w=>{w==="admin"?n("/admin_main"):w==="user"?n("/main"):o("Unknown role. Please contact support.")})}catch(x){console.error("Error logging in:",x.message),o(x.message.includes("wrong-password")?"Incorrect password. Please try again.":"Failed to login. Please check your credentials.")}finally{l(!1)}},m=()=>{u(!c)};return h.jsx("div",{className:"login-container",children:a?h.jsx(M5,{}):h.jsx(pn.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.5},children:h.jsx("div",{id:"wrapper",children:h.jsxs("div",{id:"left",children:[h.jsxs("div",{id:"signin",children:[h.jsx("div",{className:"logo",children:h.jsx("img",{src:phe,alt:"Karapatan ko"})}),h.jsxs("form",{onSubmit:p,className:"space-y-4",children:[h.jsxs("div",{children:[h.jsx("label",{htmlFor:"email",className:"block text-sm font-medium",children:"Email"}),h.jsx("input",{type:"email",id:"email",className:"text-input border-gray-300 focus:ring-slate-500 focus:border-slate-500 block w-full sm:text-sm border rounded-md",value:e,onChange:g=>t(g.target.value),required:!0})]}),h.jsxs("div",{children:[h.jsx("label",{htmlFor:"password",className:"block text-sm font-medium",children:"Password"}),h.jsxs("div",{className:"relative",children:[h.jsx("input",{type:c?"text":"password",id:"password",className:"text-input border-gray-300 focus:ring-indigo-500 focus:border-indigo-500 block w-full sm:text-sm border rounded-md pr-10",value:i,onChange:g=>r(g.target.value),required:!0}),c?h.jsx(N5,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-500 cursor-pointer",onClick:m}):h.jsx(R5,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-500 cursor-pointer",onClick:m})]}),h.jsx("a",{onClick:()=>n("/forgotPass"),className:"text-sm cursor-pointer text-slate-600 hover:text-slate-500 mt-2 block",children:"Forgot my password"})]}),s&&h.jsx("p",{className:"text-red-500 text-sm",children:s}),h.jsx("button",{type:"submit",className:"primary-btn w-full py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-slate-600 hover:bg-slate-700 focus:outline-none",children:"Login"})]}),h.jsx("button",{onClick:()=>n("/signup"),className:"secondary-btn",children:"Don't have an account? SignUp"})]}),h.jsxs("footer",{id:"main-footer",className:"text-sm text-gray-500 mt-4",children:[h.jsx("p",{children:"Copyright  2024, KarapatanKo All Rights Reserved"}),h.jsxs("div",{children:[h.jsx("a",{href:"#",className:"hover:underline",children:"Terms of Use"})," ","|"," ",h.jsx("a",{href:"#",className:"hover:underline",children:"Privacy Policy"})]})]})]})})})})},x3=Mt(vhe),xhe=()=>{const n=Pt(),[e,t]=V.useState(""),[i,r]=V.useState(""),[s,o]=V.useState(""),[a,l]=V.useState(""),[c,u]=V.useState(""),[p,m]=V.useState(""),[g]=V.useState("user"),[x,b]=V.useState(""),[w,v]=V.useState(!1),[S,E]=V.useState(!1),C=async O=>{if(O.preventDefault(),!e||!s||!a||!c||!p){b("All fields are required.");return}if(parseInt(a,10)<18||parseInt(a,10)>80){b("You must be at least 18 years old to sign up.");return}if(p.length<6){b("Password must be at least 6 characters.");return}b(""),v(!0);try{const P=(await Iq(vI,c,p)).user;await mw(Xs(Lo,"users",P.uid),{firstName:e,middleName:i,lastName:s,age:parseInt(a,10),email:c,role:g,createdAt:new Date}),console.log("User registered and data saved to Firestore!"),n("/main")}catch(N){console.error("Error signing up:",N.message),b(N.message.includes("email-already-in-use")?"This email is already registered. Log in instead.":"Failed to sign up. Please try again.")}finally{v(!1)}},U=()=>{E(!S)};return h.jsx("div",{className:"login-container",children:w?h.jsx(M5,{}):h.jsx(pn.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.5},children:h.jsx("div",{id:"register",children:h.jsx("div",{id:"wrapper",children:h.jsxs("div",{id:"left",children:[h.jsxs("div",{id:"signin",children:[h.jsxs("div",{className:"logo",children:[h.jsx("h1",{className:`${W.paragraphHeadText}`,children:"Create an account"}),h.jsx("p",{className:`${W.paragraphSubText} text-center`,children:"Connect with legal professionals"})]}),h.jsxs("form",{onSubmit:C,children:[h.jsxs("div",{children:[h.jsx("label",{htmlFor:"firstName",children:"First Name"}),h.jsx("input",{type:"text",id:"firstName",className:"text-input",value:e,onChange:O=>t(O.target.value),required:!0})]}),h.jsxs("div",{children:[h.jsx("label",{htmlFor:"middleName",children:"Middle Name"}),h.jsx("input",{type:"text",id:"middleName",className:"text-input",value:i,onChange:O=>r(O.target.value)})]}),h.jsxs("div",{children:[h.jsx("label",{htmlFor:"lastName",children:"Last Name"}),h.jsx("input",{type:"text",id:"lastName",className:"text-input",value:s,onChange:O=>o(O.target.value),required:!0})]}),h.jsxs("div",{children:[h.jsx("label",{htmlFor:"age",children:"Age"}),h.jsx("input",{type:"number",id:"age",className:"text-input",value:a,onChange:O=>l(O.target.value),required:!0})]}),h.jsxs("div",{children:[h.jsx("label",{htmlFor:"email",children:"Email"}),h.jsx("input",{type:"email",id:"email",className:"text-input",value:c,onChange:O=>u(O.target.value),required:!0})]}),h.jsxs("div",{children:[h.jsx("label",{htmlFor:"password",children:"Password"}),h.jsxs("div",{className:"relative",children:[h.jsx("input",{type:S?"text":"password",id:"password",className:"text-input",value:p,onChange:O=>m(O.target.value),required:!0}),S?h.jsx(N5,{className:"absolute right-3 top-1/3 transform -translate-y-1/2 text-gray-500 cursor-pointer",onClick:U}):h.jsx(R5,{className:"absolute right-3 top-1/3 transform -translate-y-1/2 text-gray-500 cursor-pointer",onClick:U})]})]}),h.jsxs("div",{style:{display:"none"},children:[h.jsx("label",{htmlFor:"role",children:"Role"}),h.jsx("input",{type:"text",id:"role",className:"text-input",value:g,disabled:!0})]}),x&&h.jsx("p",{className:"error-message text-red-500",children:x}),h.jsx("button",{type:"submit",className:"primary-btn",children:"Sign Up"})]}),h.jsx("button",{onClick:()=>n("/login"),className:"secondary-btn",children:"Already have an account? Login"})]}),h.jsxs("footer",{id:"main-footer",children:[h.jsx("p",{children:"Copyright  2024, KarapatanKo All Rights Reserved"}),h.jsxs("div",{children:[h.jsx("a",{href:"#",children:"Terms of Use"})," | ",h.jsx("a",{href:"#",children:"Privacy Policy"})]})]})]})})})})})},_he=Mt(xhe),whe=()=>{const n=Pt(),[e,t]=V.useState(""),[i,r]=V.useState(""),s=async o=>{o.preventDefault();try{await Mq(vI,e),alert("Check your email for a password reset link."),n("/signin")}catch(a){r(a.message),alert(`Error: ${a.message}`)}};return h.jsx(pn.div,{initial:{opacity:0},animate:{opacity:1},exit:{opacity:0},transition:{duration:.5},children:h.jsx("div",{id:"wrapper",children:h.jsx("div",{id:"left",children:h.jsxs("div",{id:"signin",children:[h.jsxs("div",{className:"logo",children:[h.jsx("h1",{className:`${W.paragraphHeadText}`,children:"Forgot Your Password?"}),h.jsx("p",{className:`${W.paragraphSubText} text-center`,children:"Send your gmail to change password"})]}),h.jsxs("form",{onSubmit:s,className:"space-y-4",children:[h.jsxs("div",{children:[h.jsx("label",{htmlFor:"email",className:"block text-sm font-medium",children:"Email"}),h.jsx("input",{type:"email",id:"email",className:"text-input border-gray-300 focus:ring-slate-500 focus:border-slate-500 block w-full sm:text-sm border rounded-md",value:e,onChange:o=>t(o.target.value),required:!0})]}),i&&h.jsx("p",{className:"text-sm text-red-500 mt-2",children:i}),h.jsx("button",{type:"submit",className:"primary-btn w-full py-2 px-4 border border-transparent rounded-md shadow-sm text-sm font-medium text-white bg-slate-600 hover:bg-slate-700 focus:outline-none",children:"Submit"})]}),h.jsxs("div",{className:"button-grid",children:[h.jsx("button",{onClick:()=>n("/signup"),className:"pass",children:"Sign Up  |"}),h.jsx("button",{onClick:()=>n("/login"),className:"pass",children:"Login"})]})]})})})})},bhe=Mt(whe);function She(n){return ah({attr:{viewBox:"0 0 16 16",fill:"currentColor"},child:[{tag:"path",attr:{d:"M1 12v-1h9v1H1zm0-5h14v1H1V7zm11-4v1H1V3h11z"},child:[]}]})(n)}function L5(n){return ah({attr:{viewBox:"0 0 16 16",fill:"currentColor"},child:[{tag:"path",attr:{fillRule:"evenodd",clipRule:"evenodd",d:"M11.02 3.77v1.56l1-.99V2.5l-.5-.5h-9l-.5.5v.486L2 3v10.29l.36.46 5 1.72L8 15v-1h3.52l.5-.5v-1.81l-1-1V13H8V4.71l-.33-.46L4.036 3h6.984v.77zM7 14.28l-4-1.34V3.72l4 1.34v9.22zm6.52-5.8H8.55v-1h4.93l-1.6-1.6.71-.7 2.47 2.46v.71l-2.49 2.48-.7-.7 1.65-1.65z"},child:[]}]})(n)}function The(n){return ah({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"line",attr:{x1:"18",y1:"6",x2:"6",y2:"18"},child:[]},{tag:"line",attr:{x1:"6",y1:"6",x2:"18",y2:"18"},child:[]}]})(n)}const k5=[{topic:"ARTICLE I National Territory",href:"/articleOne"},{topic:"ARTICLE II Declaration of Principles and State Policies",href:"/articleTwo"},{topic:"ARTICLE III Bill of Rights",href:"/articleThree"},{topic:"ARTICLE IV Citizenship",href:"/articleFour"},{topic:"ARTICLE V Suffrage",href:"/articleFive"},{topic:"ARTICLE VI Legislative Department",href:"/articleSix"},{topic:"ARTICLE VII Executive Department",href:"/articleSeven"},{topic:"ARTICLE VIII Judicial Department",href:"/articleEight"},{topic:"ARTICLE IX Constitutional Commissions",href:"/articleNine"},{topic:"ARTICLE X Local Government",href:"/articleTen"},{topic:"ARTICLE XI Accountability of Public Officers",href:"/articleEleven"},{topic:"ARTICLE XII National Economy and Patrimony",href:"/articleTwelve"},{topic:"ARTICLE XIII Social Justice and Human Rights",href:"/articleThirteen"},{topic:"ARTICLE XIV Education, Science and Technology, Arts, Culture and Sports",href:"/articleFourteen"},{topic:"ARTICLE XV The Family",href:"/articleFifteen"},{topic:"ARTICLE XVI General Provisions",href:"/articleSixteen"},{topic:"ARTICLE XVII Amendments or Revisions",href:"/articleSeventeen"},{topic:"ARTICLE XVIII Transitory Provisions",href:"/articleEighteen"}],O5=[{topic:"Chapter I: General Provisions",href:"/chapterOne"},{topic:"Chapter II: Definition of Terms",href:"/chapterTwo"},{topic:"Chapter III: Rights to Ancestral Domains",href:"/chapterThree"},{topic:"Chapter IV: Right to Self-Governance and Empowerment",href:"/chapterFour"},{topic:"Chapter V: Social Justice and Human Rights",href:"/chapterFive"},{topic:"Chapter VI: Cultural Integrity",href:"/chapterSix"},{topic:"Chapter VII: National Commission on Indigenous Peoples (NCIP)",href:"/chapterSeven"},{topic:"Chapter VIII: Delineation and Recognition of Ancestral Domains",href:"/chapterEight"},{topic:"Chapter IX: Jurisdiction and Procedures for Enforcement of Rights",href:"/chapterNine"},{topic:"Chapter X: Ancestral Domains Fund",href:"/chapterTen"},{topic:"Chapter XI: Penalties",href:"/chapterEleven"},{topic:"Chapter XII: Merger of the Office for Northern Cultural Communities (ONCC) and the Office for Southern Cultural Communities (OSCC)",href:"/chapterTwelve"},{topic:"Chapter XIII: Final Provisions",href:"/chapterThirteen"}],U5=()=>{const[n,e]=V.useState(!1),[t,i]=V.useState(""),r=Ks(),s=r.pathname.startsWith("/article")?k5:r.pathname.startsWith("/chapter")?O5:[],o=a=>{i(a),e(!1)};return h.jsxs("div",{className:"relative",children:[h.jsx("button",{id:"navbar-toggle",onClick:()=>e(a=>!a),className:"fixed top-4 left-4 z-30 bg-primary dark:bg-gray-800 p-2 rounded","aria-label":n?"Close Navigation":"Open Navigation",children:n?h.jsx(The,{className:"text-white w-6 h-6"}):h.jsx(She,{className:"text-white w-6 h-6"})}),n&&h.jsx("div",{className:"fixed inset-0 bg-black/50 z-10",onClick:()=>e(!1),"aria-hidden":"true"}),h.jsx("div",{id:"navbar",className:`fixed top-0 left-0 h-full w-64 bg-primary dark:bg-gray-800 transform transition-transform duration-300 ease-in-out z-20 ${n?"translate-x-0":"-translate-x-full"}`,children:h.jsxs("div",{className:"flex flex-col h-full",children:[h.jsx("div",{className:"p-5 border-b border-secondary dark:border-gray-700 flex items-center",children:h.jsxs(ns,{to:"/main",className:"flex items-center gap-2",onClick:()=>o(""),children:[h.jsx("div",{className:"w-8 h-8 object-contain"}),h.jsx("p",{className:"text-white dark:text-gray-200 text-lg font-bold highlight-border",children:"Karapatan Ko"})]})}),h.jsx("nav",{className:"flex-1 py-4 overflow-y-auto",children:h.jsx("ul",{className:"px-4 space-y-2",children:s.length>0?s.map(a=>h.jsx("li",{className:"group text-white",children:h.jsx(ns,{to:a.href,className:`block p-3 rounded-lg text-lg transition-colors duration-200 ${t===a.topic?"bg-secondary/20 dark:bg-gray-700/30 text-white":"text-secondary dark:text-gray-300"}`,onClick:()=>o(a.topic),children:a.topic})},a.href)):h.jsxs(ns,{to:"/",className:"text-center text-secondary dark:text-gray-400 bg-transparent border-0 p-0 cursor-pointer flex items-center gap-2",children:[h.jsx(L5,{className:"text-secondary dark:text-gray-400 w-5 h-5"}),"SIGN OUT"]})})})]})})]})},Ehe="/assets/lawbook.png",Che="/assets/lawyerIcon.png",Ahe="/assets/icon/helenaIcon.png",Mhe="/assets/helena.png",Ihe="/assets/match.png",Phe="/assets/profile.png",q1="/assets/profile1.png",Rhe="/assets/profile2.png",Nhe="/assets/testimonial1.png",Dhe="/assets/icon/bookIcon.png",Lhe="/assets/close.svg",khe="/assets/menu.svg",_3=[{id:"ai",title:"HELENA AI"},{id:"lawyer-status",title:"LEGAL MATCH"},{id:"lawyer-appoinments",title:"APPOINTMENT"}],Ohe=[{title:"Law books",subtitle:"Simply highlight any word in our law books to instantly fetch its definition.",icon:Ehe,iconBg:"#383E56",color:"blue-text-gradient",points:[{text:"The Constitution Of The Republic Of The Philippines",id:"Constitution_ID",li:"/constitution"},{text:"Indigenous Peoples Rights Act",id:"RA_8371_ID",li:"/RA_8371"}],image:Dhe,span:"More law books to come"},{title:"Legal Matching",subtitle:"Connecting You with the Right Expertise, Every Time.",icon:Che,iconBg:"#383E56",color:"green-text-gradient",btn:"/lawyer-status",image:Ihe},{title:"Helena",subtitle:"Your Smart Guide for Legal Books",icon:Ahe,iconBg:"#383E56",color:"pink-text-gradient",btn:"/ai",image:Mhe}],Uhe=[{testimonial:"The website is well designed and user-friendly, with features like AI chat and definitions for any highlighted text. It is clear how to use it from the first time, and I didn't face any complications.",name:"Jamil Al Amin",designation:"Student",company:"University of the Cordilleras",image:Nhe},{testimonial:"The website has a clean and professional look, and suitable for legal resources. However, some areas could benefit from improved visual appeal, such as personalized dashboard and inclusion of search bar.",name:"Lina An-an",designation:"Student",company:"University of the Cordilleras",image:Rhe},{testimonial:"It will help many people, especially those who are unaware of their rights. I love the Legal Matching, as it connects us with professionals. The convenience of booking appointments directly on the site is a great addition.",name:"Palmer Bugtong",designation:"Lawyer",company:"Magalgalit Law Office",image:q1}],vr=[{image:q1,name:"Palmer Fagyan Bugtong",nickname:"Atty. Palmer",title:"Criminal Law",currentSP:"Face to Face",currentPoints:"5 years lawyer",talent:"Negotiation, Persuasion",tagline:"The Defender of the Defenseless",address:"Liaison Officer at Magalgalit Law Office",btn:"/appointmentLawyer1"},{image:Phe,name:"Noel Magalgalit",nickname:"Atty. Magalgalit",title:"Civil Law",currentSP:"Face to Face",currentPoints:"15 years lawyer",talent:"Public Speaking, Negotiation",tagline:"The Defender of the Defenseless",address:"Liaison Officer at Magalgalit Law Office",btn:"/appointmentLawyer2"},{image:q1,name:"Jess B. Evasco",nickname:"Atty. Evasco",title:"Criminal Law",currentSP:"Face to Face",currentPoints:"5 years lawyer",talent:"Persuasion, Public Speaking",tagline:"The Fast Talker and Thinker",address:"Liaison Officer at Magalgalit Law Office",btn:"/appointmentLawyer3"}];var tb={},j5={exports:{}};/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/(function(n){(function(){var e={}.hasOwnProperty;function t(){for(var s="",o=0;o<arguments.length;o++){var a=arguments[o];a&&(s=r(s,i(a)))}return s}function i(s){if(typeof s=="string"||typeof s=="number")return s;if(typeof s!="object")return"";if(Array.isArray(s))return t.apply(null,s);if(s.toString!==Object.prototype.toString&&!s.toString.toString().includes("[native code]"))return s.toString();var o="";for(var a in s)e.call(s,a)&&s[a]&&(o=r(o,a));return o}function r(s,o){return o?s?s+" "+o:s+o:s}n.exports?(t.default=t,n.exports=t):window.classNames=t})()})(j5);var F5=j5.exports;tb.__esModule=!0;tb.default=void 0;var jhe=xI(V),dl=xI(FM),Fhe=xI(F5);function xI(n){return n&&n.__esModule?n:{default:n}}const V5=({animate:n=!0,className:e="",layout:t="2-columns",lineColor:i="#FFF",children:r})=>(typeof window=="object"&&document.documentElement.style.setProperty("--line-color",i),jhe.default.createElement("div",{className:(0,Fhe.default)(e,"vertical-timeline",{"vertical-timeline--animate":n,"vertical-timeline--two-columns":t==="2-columns","vertical-timeline--one-column-left":t==="1-column"||t==="1-column-left","vertical-timeline--one-column-right":t==="1-column-right"})},r));V5.propTypes={children:dl.default.oneOfType([dl.default.arrayOf(dl.default.node),dl.default.node]).isRequired,className:dl.default.string,animate:dl.default.bool,layout:dl.default.oneOf(["1-column-left","1-column","2-columns","1-column-right"]),lineColor:dl.default.string};var Vhe=V5;tb.default=Vhe;var nb={};function $1(){return $1=Object.assign||function(n){for(var e=1;e<arguments.length;e++){var t=arguments[e];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(n[i]=t[i])}return n},$1.apply(this,arguments)}function Bhe(n,e){n.prototype=Object.create(e.prototype),n.prototype.constructor=n,X1(n,e)}function X1(n,e){return X1=Object.setPrototypeOf||function(i,r){return i.__proto__=r,i},X1(n,e)}function zhe(n,e){if(n==null)return{};var t={},i=Object.keys(n),r,s;for(s=0;s<i.length;s++)r=i[s],!(e.indexOf(r)>=0)&&(t[r]=n[r]);return t}var K1=new Map,sx=new WeakMap,w3=0,B5=void 0;function Hhe(n){B5=n}function Ghe(n){return n?(sx.has(n)||(w3+=1,sx.set(n,w3.toString())),sx.get(n)):"0"}function Whe(n){return Object.keys(n).sort().filter(function(e){return n[e]!==void 0}).map(function(e){return e+"_"+(e==="root"?Ghe(n.root):n[e])}).toString()}function qhe(n){var e=Whe(n),t=K1.get(e);if(!t){var i=new Map,r,s=new IntersectionObserver(function(o){o.forEach(function(a){var l,c=a.isIntersecting&&r.some(function(u){return a.intersectionRatio>=u});n.trackVisibility&&typeof a.isVisible>"u"&&(a.isVisible=c),(l=i.get(a.target))==null||l.forEach(function(u){u(c,a)})})},n);r=s.thresholds||(Array.isArray(n.threshold)?n.threshold:[n.threshold||0]),t={id:e,observer:s,elements:i},K1.set(e,t)}return t}function _I(n,e,t,i){if(t===void 0&&(t={}),i===void 0&&(i=B5),typeof window.IntersectionObserver>"u"&&i!==void 0){var r=n.getBoundingClientRect();return e(i,{isIntersecting:i,target:n,intersectionRatio:typeof t.threshold=="number"?t.threshold:0,time:0,boundingClientRect:r,intersectionRect:r,rootBounds:r}),function(){}}var s=qhe(t),o=s.id,a=s.observer,l=s.elements,c=l.get(n)||[];return l.has(n)||l.set(n,c),c.push(e),a.observe(n),function(){c.splice(c.indexOf(e),1),c.length===0&&(l.delete(n),a.unobserve(n)),l.size===0&&(a.disconnect(),K1.delete(o))}}var $he=["children","as","triggerOnce","threshold","root","rootMargin","onChange","skip","trackVisibility","delay","initialInView","fallbackInView"];function b3(n){return typeof n.children!="function"}var C_=function(n){Bhe(e,n);function e(i){var r;return r=n.call(this,i)||this,r.node=null,r._unobserveCb=null,r.handleNode=function(s){r.node&&(r.unobserve(),!s&&!r.props.triggerOnce&&!r.props.skip&&r.setState({inView:!!r.props.initialInView,entry:void 0})),r.node=s||null,r.observeNode()},r.handleChange=function(s,o){s&&r.props.triggerOnce&&r.unobserve(),b3(r.props)||r.setState({inView:s,entry:o}),r.props.onChange&&r.props.onChange(s,o)},r.state={inView:!!i.initialInView,entry:void 0},r}var t=e.prototype;return t.componentDidUpdate=function(r){(r.rootMargin!==this.props.rootMargin||r.root!==this.props.root||r.threshold!==this.props.threshold||r.skip!==this.props.skip||r.trackVisibility!==this.props.trackVisibility||r.delay!==this.props.delay)&&(this.unobserve(),this.observeNode())},t.componentWillUnmount=function(){this.unobserve(),this.node=null},t.observeNode=function(){if(!(!this.node||this.props.skip)){var r=this.props,s=r.threshold,o=r.root,a=r.rootMargin,l=r.trackVisibility,c=r.delay,u=r.fallbackInView;this._unobserveCb=_I(this.node,this.handleChange,{threshold:s,root:o,rootMargin:a,trackVisibility:l,delay:c},u)}},t.unobserve=function(){this._unobserveCb&&(this._unobserveCb(),this._unobserveCb=null)},t.render=function(){if(!b3(this.props)){var r=this.state,s=r.inView,o=r.entry;return this.props.children({inView:s,entry:o,ref:this.handleNode})}var a=this.props,l=a.children,c=a.as,u=zhe(a,$he);return V.createElement(c||"div",$1({ref:this.handleNode},u),l)},e}(V.Component);C_.displayName="InView";C_.defaultProps={threshold:0,triggerOnce:!1,initialInView:!1};function Xhe(n){var e=n===void 0?{}:n,t=e.threshold,i=e.delay,r=e.trackVisibility,s=e.rootMargin,o=e.root,a=e.triggerOnce,l=e.skip,c=e.initialInView,u=e.fallbackInView,p=V.useRef(),m=V.useState({inView:!!c}),g=m[0],x=m[1],b=V.useCallback(function(v){p.current!==void 0&&(p.current(),p.current=void 0),!l&&v&&(p.current=_I(v,function(S,E){x({inView:S,entry:E}),E.isIntersecting&&a&&p.current&&(p.current(),p.current=void 0)},{root:o,rootMargin:s,threshold:t,trackVisibility:r,delay:i},u))},[Array.isArray(t)?t.toString():t,o,s,a,l,r,u,i]);V.useEffect(function(){!p.current&&g.entry&&!a&&!l&&x({inView:!!c})});var w=[b,g.inView,g.entry];return w.ref=w[0],w.inView=w[1],w.entry=w[2],w}const Khe=Object.freeze(Object.defineProperty({__proto__:null,InView:C_,default:C_,defaultFallbackInView:Hhe,observe:_I,useInView:Xhe},Symbol.toStringTag,{value:"Module"})),Yhe=j6(Khe);nb.__esModule=!0;nb.default=void 0;var fl=wI(V),Bn=wI(FM),ox=wI(F5),Jhe=Yhe;function wI(n){return n&&n.__esModule?n:{default:n}}const z5=({children:n="",className:e="",contentArrowStyle:t=null,contentStyle:i=null,date:r="",dateClassName:s="",icon:o=null,iconClassName:a="",iconOnClick:l=null,onTimelineElementClick:c=null,iconStyle:u=null,id:p="",position:m="",style:g=null,textClassName:x="",intersectionObserverProps:b={rootMargin:"0px 0px -40px 0px",triggerOnce:!0},visible:w=!1})=>fl.default.createElement(Jhe.InView,b,({inView:v,ref:S})=>fl.default.createElement("div",{ref:S,id:p,className:(0,ox.default)(e,"vertical-timeline-element",{"vertical-timeline-element--left":m==="left","vertical-timeline-element--right":m==="right","vertical-timeline-element--no-children":n===""}),style:g},fl.default.createElement(fl.default.Fragment,null,fl.default.createElement("span",{style:u,onClick:l,className:(0,ox.default)(a,"vertical-timeline-element-icon",{"bounce-in":v||w,"is-hidden":!(v||w)})},o),fl.default.createElement("div",{style:i,onClick:c,className:(0,ox.default)(x,"vertical-timeline-element-content",{"bounce-in":v||w,"is-hidden":!(v||w)})},fl.default.createElement("div",{style:t,className:"vertical-timeline-element-content-arrow"}),n,fl.default.createElement("span",{className:(0,ox.default)(s,"vertical-timeline-element-date")},r)))));z5.propTypes={children:Bn.default.oneOfType([Bn.default.arrayOf(Bn.default.node),Bn.default.node]),className:Bn.default.string,contentArrowStyle:Bn.default.shape({}),contentStyle:Bn.default.shape({}),date:Bn.default.node,dateClassName:Bn.default.string,icon:Bn.default.element,iconClassName:Bn.default.string,iconStyle:Bn.default.shape({}),iconOnClick:Bn.default.func,onTimelineElementClick:Bn.default.func,id:Bn.default.string,position:Bn.default.string,style:Bn.default.shape({}),textClassName:Bn.default.string,visible:Bn.default.bool,intersectionObserverProps:Bn.default.shape({root:Bn.default.object,rootMargin:Bn.default.string,threshold:Bn.default.number,triggerOnce:Bn.default.bool})};var Qhe=z5;nb.default=Qhe;var H5={VerticalTimeline:tb.default,VerticalTimelineElement:nb.default};const G5=({feature:n})=>{const e=Pt();return h.jsxs(H5.VerticalTimelineElement,{contentStyle:{background:"black",border:"4px solid",borderImage:"linear-gradient(to top, #f12711, #f5af19) 1",borderRadius:"12px",boxShadow:"0 10px 15px rgba(0, 0, 0, 0.5), 0 4px 6px rgba(0, 0, 0, 0.3)",transition:"transform 0.2s ease, box-shadow 0.2s ease"},contentArrowStyle:{borderRight:"15px solid #f5af19"},iconStyle:{background:n.iconBg},icon:h.jsx("div",{className:"flex justify-center items-center w-full h-full",children:h.jsx("img",{src:n.icon,alt:n.title,className:"w-[90%] h-[90%] object-contain",loading:"lazy"})}),children:[h.jsxs("div",{children:[h.jsx("h3",{className:"text-white text-[24px] font-bold",children:n.title}),h.jsx("p",{className:"text-secondary text-[16px] font-semibold",style:{margin:0},children:n.subtitle})]}),n.points&&h.jsx("ul",{className:"mt-5 list-disc ml-5 space-y-2",children:n.points.map((t,i)=>h.jsx("li",{className:"text-gray-100 text-[14px] pl-1 tracking-wider cursor-pointer hover:underline",onClick:()=>e(`${t.li}#${t.id}`),children:t.text},`features-point-${i}`))}),n.image&&h.jsx("div",{className:"flex justify-center mt-3",children:h.jsx("img",{src:n.image,alt:n.title,className:"w-[50%] h-[50%] rounded-lg"})}),n.span&&h.jsx("p",{className:"flex flex-col justify-between items-center mt-3",children:h.jsx("em",{children:n.span})}),n.tags&&h.jsx("div",{className:"flex flex-wrap gap-2 mt-3 justify-center",children:n.tags.map((t,i)=>h.jsx("span",{className:`text-[12px] px-2 py-1 rounded-lg ${t.color}`,children:t.name},i))}),n.btn&&h.jsx("div",{className:"mt-5 flex justify-center",children:h.jsx(ns,{to:n.btn,className:"px-6 py-2 text-white rounded-lg text-sm font-semibold flex items-center",children:h.jsxs("i",{children:["See More",h.jsx("i",{className:"fa-solid fa-arrow-right ml-1"})]})})})]})};G5.propTypes={feature:Ze.shape({title:Ze.string.isRequired,subtitle:Ze.string.isRequired,icon:Ze.string.isRequired,iconBg:Ze.string.isRequired,overview:Ze.string,update:Ze.string,born:Ze.string,color:Ze.string.isRequired,btn:Ze.string,points:Ze.arrayOf(Ze.shape({text:Ze.string.isRequired,li:Ze.string,id:Ze.string})),span:Ze.string,tags:Ze.arrayOf(Ze.shape({name:Ze.string.isRequired,color:Ze.string.isRequired})),image:Ze.string}).isRequired};const Zhe=()=>h.jsx(vn,{children:h.jsxs(h.Fragment,{children:[h.jsxs(pn.div,{variants:S_(),children:[h.jsx("p",{id:"features",className:`${W.paragraphSubText} `,children:"Explore Our"}),h.jsx("h2",{className:`${W.headText} highlight-border`,children:h.jsx("span",{className:"title-with-line",children:"Features"})})]}),h.jsx(pn.div,{variants:S_(),className:"text-secondary text-[17px] max-w-3xl leading-[30px] tracking-wide",children:h.jsx("p",{className:W.paragraphSubTextLower,children:"Access AI Helena for expert help, Legal Match for connections, and a Law Books Library with a tooltip dictionary."})}),h.jsx("div",{className:"mt-20 flex flex-col",children:h.jsx(H5.VerticalTimeline,{children:Ohe.map((n,e)=>h.jsx(G5,{feature:n},e))})})]})}),ede=Mt(Zhe),tde="/CapstoneOne/assets/sunflower.png",nde="/CapstoneOne/assets/blindfold_woman.png",ide=()=>h.jsxs("section",{id:"home",className:"relative w-full h-screen mx-auto",children:[h.jsxs("div",{className:"relative w-full h-full",children:[h.jsx("img",{src:tde,alt:"Sunflower",className:"absolute inset-0 w-full h-full object-cover z-0",loading:"lazy"}),h.jsx("img",{src:nde,alt:"Blindfold Woman",className:"absolute inset-0 w-full h-full object-cover z-0",loading:"lazy"})]}),h.jsx("div",{className:"fixed inset-0 bg-slate-800/20"}),h.jsxs("div",{className:`absolute inset-0 top-[120px] max-w-7xl mx-auto ${W.paddingX} flex flex-row items-start gap-5`,children:[h.jsxs("div",{className:"flex flex-col justify-center items-center mt-5",children:[h.jsx("div",{className:"w-5 h-5 rounded-full bg-[#ffb42a]"}),h.jsx("div",{className:"w-1 sm:h-80 h-40 orange-gradient"})]}),h.jsxs("div",{children:[h.jsxs("h1",{className:`${W.headText} text-3d`,children:["KARAPATAN",h.jsx("span",{className:"text-white",children:"KO"})]}),h.jsxs("p",{className:`${W.headSubText} mt-2 text-white-100`,children:["Built for Everyone. ",h.jsx("br",{className:"sm:block hidden"})," Your Smart Guide to Legal Understanding"]})]})]}),h.jsx("div",{className:"absolute xs:bottom-10 bottom-32 w-full flex justify-center items-center",children:h.jsx("a",{href:"#features",children:h.jsx("div",{className:"w-[35px] h-[64px] rounded-3xl border-4 border-white flex justify-center items-start p-2",children:h.jsx(pn.div,{className:"w-3 h-3 rounded-full bg-white mb-1",animate:{y:[0,24,0]},transition:{duration:1.5,repeat:1/0,repeatType:"loop"}})})})})]}),rde=()=>h.jsxs(pn.footer,{initial:{opacity:0,y:50},whileInView:{opacity:1,y:0},transition:{duration:.6,ease:"easeOut"},className:`border-t-2 border-orange-800 text-white ${W.paddingY} mt-16`,children:[h.jsxs("div",{className:`container mx-auto ${W.paddingX} grid lg:grid-cols-4 md:grid-cols-2 gap-8`,children:[h.jsxs("div",{children:[h.jsx("h4",{className:`${W.headSubText} highlight-border mb-4`,children:"About Us"}),h.jsx("hr",{className:"title-with-line mb-3"}),h.jsx("p",{className:"text-sm",children:"KARAPATAN KO: A Digital Platform for Legal Rights and Resources Information System is designed to empower students with accessible legal rights information and resources, and connect them with trusted legal professionals."})]}),h.jsxs("div",{children:[h.jsx("h4",{className:`${W.headSubText} highlight-border mb-4`,children:"Our Mission"}),h.jsx("hr",{className:"title-with-line mb-3"}),h.jsx("p",{className:"text-sm",children:"Our mission is to help all individuals, especially students to understand and exercise their rights. Through future AI-powered tools, users can receive real-time support to guide them through legal processes and understanding."})]}),h.jsxs("div",{children:[h.jsx("h4",{className:`${W.headSubText} highlight-border mb-4`,children:"Partnership"}),h.jsx("hr",{className:"title-with-line mb-3"}),h.jsx("p",{className:"text-sm mb-2",children:"Our partnership is non government organization that includes professional lawyers."})]}),h.jsxs("div",{children:[h.jsx("h4",{className:`${W.headSubText} highlight-border mb-4`,children:"Contact Us"}),h.jsx("hr",{className:"title-with-line mb-3"}),h.jsxs("p",{className:"text-sm mb-2",children:["Email: ",h.jsx("span",{className:"text-white",children:"karapatanko@gmail.com"})]}),h.jsx("p",{className:"text-sm mb-2",children:"Phone: (+63) 966-630-6322"}),h.jsx("p",{className:"text-sm mb-2",children:"Address: Legarda Government Pack Road"})]})]}),h.jsx("div",{className:`mt-10 text-center text-sm border-t border-orange-800 pt-6 ${W.paddingX}`,children:h.jsxs("p",{children:[" ",new Date().getFullYear()," KARAPATAN KO. All rights reserved."]})})]}),W5=({index:n,testimonial:e,name:t,designation:i,company:r,image:s})=>h.jsxs(pn.div,{variants:oi("","spring",n*.5,.75),className:"border-2 border-orange-800 opacity-1 p-10 rounded-3xl xs:w-[320px] w-full",children:[h.jsx("p",{className:"text-white font-black text-[48px]",children:'"'}),h.jsxs("div",{className:"mt-1",children:[h.jsxs("p",{className:"text-white tracking-wider text-[18px]",children:[" ",e," "]}),h.jsxs("div",{className:"mt-7 flex justify-between items-center gap-1",children:[h.jsxs("div",{className:"flex-1 flex flex-col",children:[h.jsxs("p",{className:"text-white font-medium text-[16px]",children:[h.jsx("span",{className:"blue-text-gradient",children:"@"}),t]}),h.jsxs("p",{className:"mt-1 text-secondary text-[12px]",children:[" ",i," at ",r]})]}),h.jsx("img",{src:s,alt:`feedback-by-${t}`,className:"w-10 h-10 rounded-full object-cover",loading:"lazy"})]})]})]});W5.propTypes={index:Ze.number.isRequired,testimonial:Ze.string.isRequired,name:Ze.string.isRequired,designation:Ze.string.isRequired,company:Ze.string.isRequired,image:Ze.string.isRequired};const sde=()=>h.jsxs("div",{className:"mt-12 rounded-[20px]",children:[h.jsx("div",{className:`${W.padding} rounded-2xl min-h-[300px]`,children:h.jsxs(pn.div,{variants:S_(),children:[h.jsx("p",{className:W.paragraphSubText,children:"What others say"}),h.jsx("h2",{className:`${W.headText} highlight-border`,children:h.jsx("span",{className:"title-with-line",children:"Testimonial"})})]})}),h.jsx("div",{className:`${W.paddingX} -mt-20 pb-14 flex flex-wrap gap-7`,children:Uhe.map((n,e)=>h.jsx(W5,{index:e,...n},n.name))})]}),ode=Mt(sde),bn=()=>{const[n,e]=V.useState(null),[t,i]=V.useState(null),[r,s]=V.useState({top:0,left:0}),o="d87993c8-62f0-4e2f-a1ba-ccd973139434",a=c=>{const u=window.getSelection(),p=u.toString().trim();if(p){e(p),l(p);const g=u.getRangeAt(0).getBoundingClientRect();s({top:g.bottom+window.scrollY+8,left:g.left+window.scrollX})}else e(null),i(null)},l=async c=>{const u=`https://dictionaryapi.com/api/v3/references/learners/json/${c}?key=${o}`;try{const p=await fetch(u);if(p.ok){const m=await p.json();m.length>0&&m[0].shortdef?i(m[0].shortdef[0]):i("No definition found.")}else i("No definition found.")}catch(p){console.error("Error fetching definition:",p),i("Error fetching definition.")}};return{selectedWord:n,definition:t,tooltipPosition:r,handleTextSelection:a}},ade=()=>{const{selectedWord:n,definition:e,tooltipPosition:t,handleTextSelection:i}=bn();return h.jsx(vn,{children:h.jsxs("div",{id:"Constitution_ID",className:"p-8 min-h-screen text-center image-border-table",children:[h.jsxs("div",{className:"mb-16",children:[h.jsx(pn.p,{onMouseUp:i,variants:oi("top","tween",.1,.6),initial:"hidden",animate:"show",className:`${W.paragraphSubTextLower} text-white mb-2`,children:h.jsx("em",{children:"Principles"})}),h.jsx(pn.h3,{variants:oi("top","tween",.2,.8),initial:"hidden",animate:"show",className:`${W.paragraphSubText} text-white mb-4`,children:h.jsx("strong",{children:"THE 1987 CONSTITUTION"})}),h.jsx(pn.h1,{variants:oi("top","tween",.3,1),initial:"hidden",animate:"show",onMouseUp:i,className:`${W.paragraphHeadText} text-white mb-6`,children:h.jsx("strong",{className:"tracking-wide",children:"THE CONSTITUTION OF THE REPUBLIC OF THE PHILIPPINES"})}),h.jsxs(pn.p,{onMouseUp:i,variants:oi("top","tween",.4,1.2),initial:"hidden",animate:"show",className:`${W.paragraphSubTextLower} text-white mb-12`,children:[h.jsx("strong",{children:"PREAMBLE:"})," ",h.jsx("br",{}),"We, the sovereign Filipino people, imploring the aid of Almighty God, in order to build a just and humane society and establish a Government that shall embody our ideals and aspirations, promote the common good, conserve and develop our patrimony, and secure to ourselves and our posterity the blessings of independence and democracy under the rule of law and a regime of truth, justice, freedom, love, equality, and peace, do ordain and promulgate this Constitution."]})]}),h.jsxs("div",{className:"mb-12",children:[h.jsx(pn.h3,{variants:oi("top","tween",.5,1.2),initial:"hidden",animate:"show",className:`${W.paragraphSubText} text-white text-2xl font-semibold`,children:"Table of Contents"}),h.jsx(pn.hr,{variants:oi("top","tween",.6,1.2),initial:"hidden",animate:"show",className:"w-20 mx-auto border-t-2 border-white my-4"})]}),h.jsx(pn.div,{variants:oi("bottom","tween",.7,1),initial:"hidden",animate:"show",className:"space-y-4 text-left max-w-3xl mx-auto",children:k5.map(r=>h.jsx(ns,{to:r.href,className:`${W.paragraphSubText} text-white hover:underline hover:text-purple-400 block py-2 px-4 rounded-md transition duration-300 transform hover:scale-105 hover:shadow-lg`,children:r.topic},r.href))}),n&&h.jsxs("div",{className:"absolute text-left bg-white p-4 shadow-lg rounded-lg max-w-xs text-black",style:{left:t.left,top:t.top,zIndex:100},children:[h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsx("p",{className:W.dictionaryText,children:n}),h.jsx("i",{className:"fas fa-volume-up ml-5 text-gray-600"})]}),h.jsx("hr",{className:"border-2 mb-2"}),h.jsx("p",{children:e})]})]})})},lde=Mt(ade,"Constitution"),cde=()=>h.jsxs(h.Fragment,{children:[h.jsx("div",{className:"bg-hero-pattern bg-cover bg-no-repeat bg-center",children:h.jsx(ide,{})}),h.jsx(ede,{}),h.jsx(ode,{}),h.jsx(i9,{}),h.jsx(rde,{})]}),ude=()=>{const[n,e]=V.useState(!1),t=V.useRef(null),i=V.useRef(null),r=V.useRef(null);V.useEffect(()=>{const o=()=>{window.scrollY>50?t.current?.classList.add("scrolled"):t.current?.classList.remove("scrolled")},a=()=>{window.innerWidth>768&&n&&s()},l=c=>{c.key==="Escape"&&n&&s()};return window.addEventListener("scroll",o),window.addEventListener("resize",a),document.addEventListener("keydown",l),()=>{window.removeEventListener("scroll",o),window.removeEventListener("resize",a),document.removeEventListener("keydown",l)}},[n]);const s=()=>{e(o=>!o),document.body.style.overflow=n?"":"hidden"};return h.jsxs(h.Fragment,{children:[h.jsx("nav",{className:"admin_navbar",ref:t,children:h.jsxs("div",{className:"admin_navbar-container",children:[h.jsx("div",{className:"text-white dark:text-gray-200 text-lg font-bold admin_logo highlight-border",children:"KARAPATAN KO"}),h.jsxs("button",{className:`admin-mobile-nav-toggle ${n?"active":""}`,"aria-label":"Toggle navigation",onClick:s,children:[h.jsx("span",{className:"bar"}),h.jsx("span",{className:"bar"}),h.jsx("span",{className:"bar"})]}),h.jsxs("ul",{className:`admin-nav-links ${n?"active":""}`,ref:i,children:[h.jsx("li",{children:h.jsx("a",{href:"",onClick:s,children:"HOME"})}),h.jsx("li",{children:h.jsx("a",{href:"#admin_appointment",children:"APPOINTMENT"})}),h.jsx("li",{children:h.jsx("a",{href:"#admin_books",children:"BOOKS"})})]})]})}),h.jsx("div",{className:`admin-overlay ${n?"active":""}`,ref:r,onClick:s})]})},hde={"Noel Magalgalit":{name:"Noel Magalgalit",title:"Civil Law",address:"Insular Life Building, Legarda Street, corner Abanao extension, Baguio, 2660 Benguet"},"Palmer Fagyan Bugtong":{name:"Palmer Fagyan Bugtong",title:"Criminal Law",address:"Insular Life Building, Legarda Street, corner Abanao extension, Baguio, 2600 Benguet"},"Jess B. Evasco":{name:"Jess B. Evasco",title:"Criminal Law",address:"Insular Life Building, Legarda Street, corner Abanao extension, Baguio, 2600 Benguet"}},dde=()=>{const[n,e]=V.useState({}),[t,i]=V.useState({}),[r,s]=V.useState(null),[o,a]=V.useState(!1),[l,c]=V.useState(!1),[u,p]=V.useState([]);V.useEffect(()=>{const g=Su(Lo,"appointments"),x=c1(g,b=>{const w={},v={},S=new Date;b.forEach(E=>{const C=E.data(),U=C.lawyer?.name||"Unknown Lawyer";if(!hde[U])return;w[U]||(w[U]=[]),v[U]||(v[U]=[]);const O=C.date instanceof bi?C.date.toDate():new Date(C.date),N={id:E.id,date:O.toLocaleDateString(),time:C.time||"No time provided",reasons:C.reasons||"No reasons provided",client:`${C.firstName||""} ${C.lastName||""}`.trim()||"Unknown Client"};O>=S?w[U].push(N):v[U].push(N)}),e(w),i(v)});return()=>x()},[]);const m=async()=>{if(l){c(!1);return}try{const g=Su(Lo,"archived_appointments"),b=(await SV(g)).docs.map(w=>({id:w.id,...w.data()}));p(b),c(!0),a(!1)}catch(g){console.error("Error fetching archived appointments:",g)}};return h.jsxs(h.Fragment,{children:[h.jsx(ude,{}),h.jsx(pn.div,{variants:S_(),children:h.jsx("h2",{id:"admin_appointment",className:`${W.headText} highlight-border`,children:h.jsx("span",{className:"title-with-line",children:"Appointments"})})}),h.jsx(pn.p,{variants:oi("","",.1,1),className:"text-secondary text-[17px] max-w-3xl leading-[30px] tracking-wide mb-5 mt-2",children:"Manage appointments, send messages, and delete bookings."}),h.jsxs("div",{className:"flex",children:[h.jsxs("div",{className:`${W.paragraphSubTextLower} mt-3 p-4 border-r`,children:[" ",h.jsxs("table",{children:[h.jsx("thead",{children:h.jsx("tr",{children:h.jsx("th",{children:"Lawyer Name"})})}),h.jsxs("tbody",{children:[Object.keys(n).map((g,x)=>h.jsx("tr",{onClick:()=>s(g),children:h.jsxs("td",{className:"cursor-pointer mb-1 hover:text-orange-700 p-2",children:[x+1,". ",g]})},g)),h.jsx("br",{}),h.jsx("br",{}),h.jsx("hr",{}),h.jsx("br",{}),h.jsx("button",{className:"cursor-pointer mb-1 text-orange-400 rounded hover:text-orange-900",onClick:m,children:l?"Hide Archived":"Show Archived"})]})]})]}),h.jsx("div",{className:"w-3/4 p-4",children:r&&h.jsxs(h.Fragment,{children:[h.jsxs("h3",{className:"text-lg font-bold",children:["Appointments for ",r]}),h.jsx("button",{className:"px-4 py-2 text-orange-400 rounded hover:text-orange-900 ml-2",onClick:()=>{a(!o),c(!1)},children:o?"Show Current Appointments":"Show Past Appointments"}),!o&&!l&&h.jsx("h3",{className:"mt-4 text-lg font-bold",children:"Current Appointments"}),!o&&!l&&n[r]?.map((g,x)=>h.jsxs("div",{className:"border p-2 mt-2 rounded shadow-md",children:[h.jsxs("p",{children:[h.jsx("strong",{children:"Date:"})," ",g.date]}),h.jsxs("p",{children:[h.jsx("strong",{children:"Time:"})," ",g.time]}),h.jsxs("p",{children:[h.jsx("strong",{children:"Client:"})," ",g.client]}),h.jsxs("p",{children:[h.jsx("strong",{children:"Reason:"})," ",g.reasons]}),h.jsx("button",{className:"text-red-600 hover:text-red-800",onClick:()=>p(g.id,r),children:"Archive"})]},x)),o&&h.jsx("h3",{className:"mt-4 text-lg font-bold",children:"Past Appointments"}),o&&t[r]?.map((g,x)=>h.jsxs("div",{className:"border p-2 mt-2 rounded shadow-md",children:[h.jsxs("p",{children:[h.jsx("strong",{children:"Date:"})," ",g.date]}),h.jsxs("p",{children:[h.jsx("strong",{children:"Time:"})," ",g.time]}),h.jsxs("p",{children:[h.jsx("strong",{children:"Client:"})," ",g.client]}),h.jsxs("p",{children:[h.jsx("strong",{children:"Reason:"})," ",g.reasons]})]},x)),l&&u.length>0?h.jsxs("div",{className:"mt-2 p-2 shadow-md",children:[h.jsx("h3",{className:"text-lg font-bold",children:"Archived Appointments"}),u.map((g,x)=>h.jsxs("div",{className:"border p-2 mt-2 rounded shadow-md",children:[h.jsxs("p",{children:[h.jsx("strong",{children:"Date:"})," ",g.date]}),h.jsxs("p",{children:[h.jsx("strong",{children:"Time:"})," ",g.time]}),h.jsxs("p",{children:[h.jsx("strong",{children:"Client:"})," ",g.client]}),h.jsxs("p",{children:[h.jsx("strong",{children:"Reason:"})," ",g.reasons]})]},x))]}):l&&h.jsx("p",{children:"No archived appointments found."})]})})]})]})},fde=Mt(dde,"header"),q5=({LawyerProfile:n})=>h.jsx("div",{children:h.jsxs(pn.div,{className:"max-w-md p-6 mt-10 rounded-lg shadow-lg relative text-white image-border-lawyer",initial:{opacity:0},animate:{opacity:1},transition:{duration:.5},children:[h.jsxs("div",{className:"flex flex-col items-center",children:[h.jsx("img",{src:n.image,alt:n.name,className:"w-24 h-24 rounded-lg border-2 bg-white shadow-md",width:96,height:96,loading:"lazy"}),h.jsx("h2",{className:"text-md font-bold mt-2",children:n.name}),h.jsx("p",{className:"text-sm",children:n.title})]}),h.jsxs("div",{className:"mt-5 text-sm",children:[h.jsxs("p",{className:"font-semibold",children:["Consultation:"," ",h.jsx("span",{className:"text-orange-400",children:n.currentSP})]}),h.jsxs("p",{className:"mt-1 font-semibold",children:["Experience:"," ",h.jsx("span",{className:"text-orange-400",children:n.currentPoints})]})]}),h.jsx("hr",{className:"my-4 mt-6 border-white"}),n.tagline&&h.jsx("div",{className:"text-center tracking-wide text-sm text-white mb-4",children:h.jsx("b",{children:n.tagline})}),h.jsxs("div",{className:"grid grid-cols-1 gap-4 text-xs",children:[h.jsxs("div",{children:[h.jsx("p",{className:"font-semibold",children:"TALENT"}),h.jsx("p",{className:"text-center tracking-wide text-sm text-white mb-4",children:n.talent})]}),h.jsxs("div",{children:[h.jsx("p",{className:"font-semibold mt-2",children:"ADDRESS:"}),h.jsx("p",{className:"text-center tracking-wide text-sm text-white mb-4",children:n.address})]})]}),n.btn&&h.jsx("div",{className:"mt-5 flex justify-center",children:h.jsx(ns,{to:{pathname:n.btn,state:{lawyerName:n.name,lawyerProfile:n}},className:"px-6 py-2 border-2 border-orange-500 hover:bg-slate-700 text-white rounded-lg text-sm font-semibold flex items-center",children:"Get an Appointment"})})]})});q5.propTypes={LawyerProfile:Ze.shape({image:Ze.string.isRequired,name:Ze.string.isRequired,title:Ze.string.isRequired,currentSP:Ze.string.isRequired,currentPoints:Ze.string.isRequired,talent:Ze.string.isRequired,tagline:Ze.string,address:Ze.string.isRequired,btn:Ze.string.isRequired}).isRequired};const pde=()=>(V.useEffect(()=>{window.scrollTo(0,0)},[]),h.jsxs("div",{className:"container mx-auto px-4 py-6",children:[h.jsx("span",{className:W.paragraphSubText,children:"Choose Your Lawyer"}),h.jsx("h2",{className:`${W.headText} highlight-border`,children:h.jsx("span",{className:"title-with-line mb-5",children:"Legal Matching"})}),h.jsx("p",{className:W.paragraphSubTextLower,children:"Finding the right lawyer is a crucial step in ensuring the best possible outcome for your legal case. Whether you're dealing with workplace discrimination, personal injury, or family law matters, we connect you with experienced professionals who specialize in your area of need. Legal match helps you find qualified attorneys and lawyers based on your specific legal concerns, ensuring you receive expert guidance."}),h.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-2 lg:grid-cols-3 gap-4",children:vr.map((n,e)=>h.jsx(q5,{LawyerProfile:n},e))})]})),mde=Mt(pde,"lawyer-section"),gde="/CapstoneOne/assets/plus_icon.png",yde="/CapstoneOne/assets/message_icon.png",vde="/CapstoneOne/assets/question_icon.png",xde="/CapstoneOne/assets/history_icon.png",_de="/CapstoneOne/assets/setting_icon.png",wde=({children:n})=>{const[e,t]=V.useState(!1),{newChat:i,darkMode:r,setDarkMode:s}=V.useContext(Um),[o,a]=V.useState([]),{setSelectedMessage:l}=V.useContext(Um),c=ic(),u=(p,m)=>{l({message:p,response:m})};return V.useEffect(()=>{(async()=>{const m=l1(Su(c,"Ai_Message"),vV("timestamp","desc"),XY(5)),x=(await SV(m)).docs.map(b=>({id:b.id,...b.data()}));a(x)})()},[]),h.jsx("div",{className:`Ai_sidebar-container ${r?"dark-mode":""}`,children:h.jsx("div",{className:`Ai_sidebar ${e?"extended":""}`,children:h.jsxs("div",{className:"top",children:[h.jsxs("div",{className:"Ai_menu",children:[h.jsx("img",{onClick:()=>t(p=>!p),src:"menu_icon",alt:"menu_icon"}),e&&h.jsx("p",{onClick:()=>t(p=>!p),children:"Menu"})]}),h.jsxs("div",{onClick:()=>i(),className:"Ai_new-chat",children:[h.jsx("img",{src:gde,alt:"plus_icon"}),e&&h.jsx("p",{children:"New chat"})]}),e&&h.jsxs("div",{className:"Ai_recent",children:[h.jsx("p",{className:"Ai_recent-title",children:"Recent Messages"}),o.map(p=>h.jsxs("div",{className:"Ai_recent-entry",onClick:()=>u(p.message,p.response),children:[h.jsx("img",{src:yde,alt:"message_icon"}),h.jsxs("p",{children:[p.message.substring(0,18),"..."]})]},p.id))]}),h.jsxs("div",{className:"Ai_bottom",children:[h.jsxs("div",{className:"Ai_bottom-item Ai_recent-entry",children:[h.jsx("img",{onClick:()=>window.open("https://gemini.google.com/faq","_blank"),src:vde,alt:"question_icon"}),e&&h.jsx("p",{onClick:()=>window.open("https://gemini.google.com/faq","_blank"),children:"Help"})]}),h.jsxs("div",{className:"Ai_bottom-item Ai_recent-entry",children:[h.jsx("img",{src:xde,alt:"history_icon"}),e&&h.jsx("p",{children:"Activity"})]}),h.jsxs("div",{className:"Ai_bottom-item Ai_recent-entry",children:[h.jsx("img",{src:_de,alt:"setting_icon"}),e&&h.jsxs("div",{className:"settings",children:[h.jsxs("label",{className:"toggle-switch",children:[h.jsx("input",{type:"checkbox",checked:r,onChange:()=>s(!r)}),h.jsx("span",{className:"slider"})]}),h.jsx("p",{children:r?"Dark Mode On":"Dark Mode Off"})]})]})]})]})})})},bde=()=>h.jsxs("div",{className:"relative",children:[h.jsxs(ns,{to:"/main",className:"text-center text-secondary dark:text-gray-400 bg-transparent border-0 p-0 cursor-pointer flex items-center gap-2",children:[h.jsx("p",{className:"sign text-secondary dark:text-gray-400 w-5 h-5"}),"DASHBOARD"]}),h.jsxs(ns,{to:"/lawyer-status",className:"text-center text-secondary dark:text-gray-400 bg-transparent border-0 p-0 cursor-pointer flex items-center gap-2",children:[h.jsx("p",{className:"sign text-secondary dark:text-gray-400 w-5 h-5"}),"APPOINTMENT"]}),h.jsxs(ns,{to:"/",className:"text-center text-secondary dark:text-gray-400 bg-transparent border-0 p-0 cursor-pointer flex items-center gap-2",children:[h.jsx(L5,{className:"sign text-secondary dark:text-gray-400 w-5 h-5"}),"SIGN OUT"]})]}),S3="/CapstoneOne/assets/user_icon.png",Sde="/CapstoneOne/assets/gemini_icon.png",Tde="/CapstoneOne/assets/mic_icon.png",Ede="/CapstoneOne/assets/send_icon.png",Cde=window.SpeechRecognition||window.webkitSpeechRecognition,Cl=new Cde;Cl.continuous=!0;Cl.interimResults=!0;Cl.lang="en-US";const Ade=()=>{const{onSent:n,recentPrompt:e,showResult:t,loading:i,resultData:r,setInput:s,input:o,darkMode:a}=V.useContext(Um),[l,c]=V.useState(null),[u,p]=V.useState(!1),[m,g]=V.useState(!1),[x,b]=V.useState(!1),[w,v]=V.useState(null),{selectedMessage:S}=V.useContext(Um),E=ic();V.useEffect(()=>{(async()=>{const A=Kl().currentUser;if(A){const M=Xs(E,"users",A.uid),D=await bf(M);D.exists()&&c(D.data())}})()},[]),V.useEffect(()=>{m?Cl.start():Cl.stop(),Cl.onresult=N=>{const P=Array.from(N.results).map(A=>A[0].transcript).join("");s(P)},Cl.onerror=N=>console.error(N.error)},[m]);const C=N=>{N.key==="Enter"&&o.trim()&&O()},U=()=>{g(!1),Cl.stop(),setTimeout(()=>{o.trim()&&O()},500)},O=async()=>{if(!o.trim())return;const P=Kl().currentUser,A=ic();if(P)try{const D=(await TV(Su(A,"Ai_Message"),{userId:P.uid,message:o,response:"",timestamp:CV()})).id;n(),b(!1),v(D)}catch(M){console.error("Error saving message:",M)}};return V.useEffect(()=>{(async()=>{!w||!r||x||setTimeout(async()=>{try{await JY(Xs(E,"Ai_Message",w),{response:r}),b(!0)}catch(P){console.error("Error updating AI response:",P)}},12e4)})()},[r]),h.jsxs("div",{className:`Ai_layout ${a?"dark-mode":""}`,children:[h.jsx(wde,{}),h.jsxs("div",{className:"Ai_main",children:[h.jsxs("div",{className:"Ai_nav",children:[h.jsx("p",{id:"helena",children:"Karapatan Ko"}),h.jsx("img",{onClick:()=>p(!u),src:S3,alt:"user_icon"}),u&&h.jsx("div",{className:"navbar-popup",children:h.jsx(bde,{})})]}),h.jsxs("div",{className:"Ai_main-container",children:[S?h.jsxs("div",{className:"Ai_result",children:[h.jsxs("div",{className:"Ai_result-title",children:[h.jsx("img",{src:S3,alt:"user_icon"}),h.jsx("p",{children:S.message})]}),h.jsxs("div",{className:"Ai_result-data",children:[h.jsx("img",{src:Sde,alt:"gemini_icon"}),h.jsx("p",{dangerouslySetInnerHTML:{__html:S.response}})]})]}):h.jsx(h.Fragment,{children:h.jsxs("div",{className:"Ai_greet",children:[h.jsx("p",{children:h.jsxs("span",{children:["Hello, ",l?`${l.firstName}`:"User"]})}),h.jsx("p",{children:"How can I help you today?"})]})}),h.jsxs("div",{className:"Ai_main-bottom",children:[h.jsxs("div",{className:"Ai_search-box",children:[h.jsx("input",{onChange:N=>s(N.target.value),value:o,type:"text",placeholder:"Enter a prompt here",onKeyDown:C}),h.jsxs("div",{children:[h.jsx("img",{src:Tde,alt:"mic_icon",style:{cursor:"pointer"},onMouseDown:()=>g(!0),onMouseUp:()=>U()}),o?h.jsx("img",{onClick:O,src:Ede,alt:"send_icon"}):null]})]}),h.jsx("div",{className:"mic-container text-black",children:m?h.jsx("span",{children:" Listening..."}):null}),h.jsx("p",{className:"Ai_bottom-info",children:"Gemini may display inaccurate info, including about people, so double-check its responses."})]})]})]})]})},Mde="/CapstoneOne/assets/logo2.webp",Ide=()=>{const[n,e]=V.useState(""),[t,i]=V.useState(!1),[r,s]=V.useState(!1),o=Pt();V.useEffect(()=>{const l=()=>{const c=window.scrollY;s(c>100)};return window.addEventListener("scroll",l),()=>window.removeEventListener("scroll",l)},[]);const a=l=>{l==="/"?(o("/"),window.scrollTo(0,0)):(o(l),e(l))};return h.jsx("nav",{className:`${W.paddingX} w-full flex items-center py-5 fixed top-0 z-20 
        bg-primary`,children:h.jsxs("div",{className:"w-full flex justify-between items-center max-w-7xl mx-auto",children:[h.jsxs(ns,{to:"/main",className:"flex items-center gap-2",onClick:()=>a("/"),children:[h.jsx("img",{className:"w-9 h-9 object-contain",src:Mde,alt:"Logo"}),h.jsxs("p",{className:"text-white text-[18px] font-bold cursor-pointer flex",children:["Karapatan ",h.jsx("span",{className:"sm:block hidden",children:"Ko"})]})]}),h.jsx("ul",{className:"list-none hidden sm:flex flex-row gap-10",children:_3.map(l=>h.jsx("li",{className:`${n===l.id?"text-white":"text-secondary"} hover:text-white text-[18px] font-medium cursor-pointer`,onClick:()=>a(l.id),children:l.title},l.id))}),h.jsxs("div",{className:"sm:hidden flex flex-1 justify-end items-center",children:[h.jsx("img",{src:t?Lhe:khe,alt:"menu",className:"w-[28px] h-[28px] object-contain",onClick:()=>i(!t)}),h.jsx("div",{className:`${t?"flex":"hidden"} p-6 black-gradient absolute top-20 right-0 mx-4 my-2 min-w-[140px] z-10 rounded-xl`,children:h.jsx("ul",{className:"list-none flex justify-end items-start flex-1 flex-col gap-4",children:_3.map(l=>h.jsx("li",{className:`font-poppins font-medium cursor-pointer text-[16px] ${n===l.id?"text-white":"text-secondary"}`,onClick:()=>{i(!t),a(l.id)},children:l.title},l.id))})})]})]})})},Pde={"Noel Magalgalit":{name:"Noel Magalgalit",title:"Civil Law",address:"Insular Life Building, Legarda Street, corner Abanao extension, Baguio, 2660 Benguet"},"Palmer Fagyan Bugtong":{name:"Palmer Fagyan Bugtong",title:"Criminal Law",address:"Insular Life Building, Legarda Street, corner Abanao extension, Baguio, 2660 Benguet"},"Jess B. Evasco":{name:"Jess B. Evasco",title:"Criminal Law",address:"Insular Life Building, Legarda Street, corner Abanao extension, Baguio, 2660 Benguet"}},Rde=()=>{const[n,e]=V.useState(null),[t,i]=V.useState([]),[r,s]=V.useState(null),[o,a]=V.useState([]),[l,c]=V.useState(""),[u,p]=V.useState(!0),m=Kl(),g=async()=>{if(!r||!l.trim()){alert("Message cannot be empty.");return}const x=m.currentUser;if(!x){alert("User is not authenticated.");return}try{const b=Xs(Lo,"users",x.uid),w=await bf(b);let v=x.displayName||"Unknown User";w.exists()&&(v=w.data().firstName+" "+w.data().lastName),await TV(Su(Lo,"messages"),{date:CV(),details:l.trim(),sender:v,userId:x.uid,appointmentId:r.id}),c("")}catch(b){console.error("Error sending message:",b),alert("Failed to send the message. Please try again.")}};return V.useEffect(()=>{if(!r)return;const x=Su(Lo,"messages"),b=l1(x,Y2("appointmentId","==",r.id)),w=c1(b,v=>{const S=v.docs.map(E=>({id:E.id,...E.data()}));a(S)});return()=>w()},[r]),V.useEffect(()=>{let x=null,b=null;return x=Pg(m,w=>{w?(()=>{const S=Su(Lo,"appointments"),E=l1(S,Y2("email","==",w.email),vV("timestamp","desc"));b=c1(E,C=>{if(C.empty)e(null),i([]);else{const U=C.docs.map(O=>({id:O.id,...O.data(),lawyerInfo:Pde[O.data().lawyer?.name]||{}}));e(U[0]),i(U.slice(1))}p(!1)})})():(e(null),i([]),p(!1))}),()=>{x&&x(),b&&b()}},[m]),u?h.jsx("p",{children:"Loading appointments..."}):h.jsxs(h.Fragment,{children:[h.jsx("h2",{className:`${W.headText} highlight-border`,children:h.jsx("span",{className:"title-with-line mb-5",children:"Appointments"})}),h.jsxs("div",{className:"p-4",children:[h.jsxs("div",{className:"mb-6",children:[h.jsx("h3",{className:"text-lg font-bold mt-3 mb-4",children:"Recent Appointment"}),h.jsx("div",{className:"space-y-4",children:n?h.jsx("div",{className:"p-2 mt-2 rounded shadow-md border-gray-300 tracking-wide",children:h.jsx("table",{className:"min-w-full table-auto border-collapse border border-gray-300 mb-14",children:h.jsxs("tbody",{children:[h.jsxs("tr",{children:[h.jsx("td",{className:"px-4 py-3 text-right border font-semibold",children:"Name"}),h.jsxs("td",{className:"px-4 py-3 text-left border",children:[n.firstName," ",n.lastName]})]}),h.jsxs("tr",{children:[h.jsx("td",{className:"px-4 py-3 text-right border font-semibold",children:"Email"}),h.jsx("td",{className:"px-4 py-3 text-left border",children:n.email})]}),h.jsxs("tr",{children:[h.jsx("td",{className:"px-4 py-3 text-right border font-semibold",children:"Date"}),h.jsx("td",{className:"px-4 py-3 text-left border",children:n.date})]}),h.jsxs("tr",{children:[h.jsx("td",{className:"px-4 py-3 text-right border font-semibold",children:"Time"}),h.jsx("td",{className:"px-4 py-3 text-left border",children:n.time})]}),h.jsxs("tr",{children:[h.jsx("td",{className:"px-4 py-3 text-right border font-semibold",children:"Reason"}),h.jsx("td",{className:"px-4 py-3 text-left border",children:n.reasons})]}),h.jsxs("tr",{children:[h.jsx("td",{className:"px-4 py-3 text-right border font-semibold",children:"Lawyer"}),h.jsx("td",{className:"px-4 py-3 text-left border",children:n.lawyerInfo?.name||"Unknown Lawyer"})]}),h.jsx("tr",{children:h.jsx("td",{colSpan:"2",className:"px-4 py-3 text-center border",children:h.jsx("button",{className:"px-3 py-1 text-orange-400 rounded hover:text-orange-900",onClick:()=>s(n),children:"Message"})})})]})})},n.id):h.jsx("p",{className:"text-gray-500",children:"No recent appointments found."})})]}),h.jsxs("div",{className:"mt-6",children:[h.jsx("h3",{className:"text-lg font-bold mb-4",children:"Past Appointments"}),h.jsx("div",{className:"space-y-4",children:t.length>0?t.map(x=>h.jsx("div",{className:"p-2 mt-2 rounded shadow-md border-gray-300 tracking-wide",children:h.jsx("table",{className:"min-w-full table-auto border-collapse border border-gray-300 mb-14",children:h.jsxs("tbody",{children:[h.jsxs("tr",{children:[h.jsx("td",{className:"px-4 py-3 text-right border font-semibold",children:"Name"}),h.jsxs("td",{className:"px-4 py-3 text-left border",children:[x.firstName," ",x.lastName]})]}),h.jsxs("tr",{children:[h.jsx("td",{className:"px-4 py-3 text-right border font-semibold",children:"Email"}),h.jsx("td",{className:"px-4 py-3 text-left border",children:x.email})]}),h.jsxs("tr",{children:[h.jsx("td",{className:"px-4 py-3 text-right border font-semibold",children:"Date"}),h.jsx("td",{className:"px-4 py-3 text-left border",children:x.date})]}),h.jsxs("tr",{children:[h.jsx("td",{className:"px-4 py-3 text-right border font-semibold",children:"Time"}),h.jsx("td",{className:"px-4 py-3 text-left border",children:x.time})]}),h.jsxs("tr",{children:[h.jsx("td",{className:"px-4 py-3 text-right border font-semibold",children:"Reason"}),h.jsx("td",{className:"px-4 py-3 text-left border",children:x.reasons})]}),h.jsxs("tr",{children:[h.jsx("td",{className:"px-4 py-3 text-right border font-semibold",children:"Lawyer"}),h.jsx("td",{className:"px-4 py-3 text-left border",children:x.lawyerInfo?.name||"Unknown Lawyer"})]}),h.jsx("tr",{children:h.jsx("td",{colSpan:"2",className:"px-4 py-3 text-center border",children:h.jsx("button",{className:"px-3 py-1 text-orange-400 rounded hover:text-orange-900",onClick:()=>s(x),children:"Message"})})})]})})},x.id)):h.jsx("p",{className:"text-gray-500",children:"No past appointments found."})})]})]}),r&&h.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center",children:h.jsxs("div",{className:"bg-white border border-2 rounded-lg p-4 shadow-lg w-8/12",children:[h.jsxs("h6",{className:"text-black mb-4",children:[h.jsx("b",{children:"Chat with:"})," ",r?.lawyer?.name]}),h.jsx("div",{className:"mb-4 p-2 h-40 overflow-y-scroll text-black",children:o.length>0?o.map(x=>h.jsxs("div",{className:`mb-2 ${x.sender==="admin"?"text-right":"text-left"}`,children:[h.jsxs("p",{children:[h.jsx("strong",{children:x.sender==="admin"?"Admin":x.sender||"User"}),": ",x.details]}),h.jsx("p",{className:"text-xs text-gray-500",children:x.date?new Date(x.date.toDate()).toLocaleString():""})]},x.id)):h.jsx("p",{className:"text-gray-500 text-center p-12",children:"No messages yet."})}),h.jsx("textarea",{className:"p-2 w-full bg-gray-200 rounded mb-4 text-black",rows:"3",value:l,onChange:x=>c(x.target.value),placeholder:"Type your message here..."}),h.jsxs("div",{className:"flex justify-end space-x-2",children:[h.jsx("button",{className:"px-4 py-2 text-red-600 hover:text-red-800",onClick:()=>s(null),children:"Cancel"}),h.jsx("button",{className:"px-4 py-2 text-orange-400 rounded hover:text-orange-900",onClick:g,children:"Send"})]})]})})]})},Nde=Mt(Rde),Dde=()=>{const n=Pt(),[e,t]=V.useState(!1);return h.jsxs("div",{children:[h.jsx("p",{className:W.paragraphSubText,children:"Instructions for booking an Appointment with"}),h.jsx("h2",{className:`${W.headText} highlight-border`,children:h.jsxs("span",{className:"title-with-line",children:[" ",vr[0].nickname]})}),h.jsx("table",{className:"mt-5 w-full border-collapse border border-gray-200",children:h.jsxs("tbody",{children:[h.jsx("tr",{children:h.jsxs("td",{className:`${W.appointmentSubTextLower} border border-gray-300 p-3`,children:["1. Securing an appointment is ",h.jsx("b",{children:"FREE OF CHARGE"})," and Appointment Slip is ",h.jsx("b",{children:"NON-TRANSFERABLE"}),"."]})}),h.jsx("tr",{children:h.jsx("td",{className:`${W.appointmentSubTextLower} border border-gray-300 p-3`,children:"2. The appointment must be named after the requester who will personally apply at the Magalgalit Law Office."})}),h.jsx("tr",{children:h.jsx("td",{className:`${W.appointmentSubTextLower} border border-gray-300 p-3`,children:"3. Be at the Magalgalit Law Office at least fifteen minutes before the appointment schedule."})}),h.jsx("tr",{children:h.jsx("td",{className:`${W.appointmentSubTextLower} border border-gray-300 p-3`,children:h.jsxs("label",{children:[h.jsx("input",{type:"checkbox",checked:e,onChange:i=>t(i.target.checked),className:"mr-2"}),"I agree to the collection and use of the data that I will provide through this form for the purpose of booking an appointment. I understand that the collection and use of this data, which may include personal and sensitive personal information, shall be in accordance with the Data Privacy Act of 2021."]})})})]})}),h.jsxs("div",{className:"flex justify-between mt-10",children:[h.jsx("button",{type:"button",onClick:()=>n("/lawyer-status"),className:"px-6 py-2 border-2 border-orange-700 text-white rounded-lg hover:bg-gray-500",children:"Back"}),h.jsx("div",{className:"w-1/4"}),h.jsx(ns,{to:e?"/appointmentTableLawyer1":"#",className:`px-6 py-2 border-2 border-orange-500 text-white rounded-lg text-sm font-semibold flex items-center ${e?"hover:bg-slate-700":"bg-gray-500 cursor-not-allowed"}`,onClick:i=>{e||i.preventDefault()},children:"Next"})]})]})},Lde=Mt(Dde);function bI(n){return ah({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"m8.854 11.646 5.792-5.792a.5.5 0 0 1 .854.353v11.586a.5.5 0 0 1-.854.353l-5.792-5.792a.5.5 0 0 1 0-.708Z"},child:[]}]})(n)}function SI(n){return ah({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"m15.146 12.354-5.792 5.792a.5.5 0 0 1-.854-.353V6.207a.5.5 0 0 1 .854-.353l5.792 5.792a.5.5 0 0 1 0 .708Z"},child:[]}]})(n)}const kde=()=>{const n=Pt(),{state:e}=Ks(),{name:t,email:i}=e||{},[r,s]=V.useState({firstName:"",middleName:"",lastName:"",email:"",date:"",time:""}),[o,a]=V.useState(new Date),[l,c]=V.useState(null),u=["2024-12-24","2024-12-25","2024-12-30","2025-01-01","2025-04-09","2025-04-17","2025-04-19","2025-05-01","2025-06-12","2025-08-21","2025-08-25","2025-11-01","2025-11-30","2025-12-08","2025-12-24","2025-12-25","2025-12-30","2025-12-31"];V.useEffect(()=>{const j=Kl(),J=ic(),ce=Pg(j,async me=>{if(me){const oe=Xs(J,"users",me.uid),ye=await bf(oe);if(ye.exists()){const Re=ye.data();s(Me=>({...Me,firstName:Re.firstName||"",middleName:Re.middleName||"",lastName:Re.lastName||"",email:Re.email||me.email}))}}});return()=>ce()},[]);const p=()=>{n("/appointmentLawyer2")},m=(j,J)=>{s(ce=>({...ce,[j]:J}))},g=()=>!r.firstName||!r.lastName||!r.email?(alert("Please fill in all required fields!"),!1):!r.date||!r.time?(alert("Please select a valid date and time slot!"),!1):!0,x=j=>{j.preventDefault(),g()&&n("/appointmentResultLawyer1",{state:{formData:r}})},b=j=>j<new Date().setHours(0,0,0,0),w=j=>u.includes(U(j)),v=j=>!b(j)&&j.getDay()!==0&&j.getDay()!==6&&!w(j),S=j=>new Date(j.getFullYear(),j.getMonth(),1).getDay(),E=j=>new Date(j.getFullYear(),j.getMonth()+1,0).getDate(),C=()=>{const j=S(o),J=E(o),ce=[];for(let me=0;me<j;me++)ce.push(null);for(let me=1;me<=J;me++){const oe=new Date(o.getFullYear(),o.getMonth(),me);ce.push(oe)}return ce},U=j=>{const J=j.getFullYear(),ce=String(j.getMonth()+1).padStart(2,"0"),me=String(j.getDate()).padStart(2,"0");return`${J}-${ce}-${me}`},O=j=>{v(j)&&(c(j),s(J=>({...J,date:U(j),time:""})))},N=()=>{a(j=>{const J=new Date(j.getFullYear(),j.getMonth()-1,1);return J<new Date(2024,0,1)?j:J})},P=()=>{a(j=>new Date(j.getFullYear(),j.getMonth()+1,1))},A=[{id:1,start:"8:00 am",end:"9:00 am"},{id:2,start:"9:00 am",end:"10:00 am"},{id:3,start:"10:00 am",end:"11:00 am"}],M=j=>{const J=new Date,ce=new Date().setHours(0,0,0,0),[me,oe]=j.split(" ");let[ye,Re]=me.split(":").map(Number);return oe==="pm"&&ye!==12?ye+=12:oe==="am"&&ye===12&&(ye=0),new Date(ce).setHours(ye,Re,0,0)<J},D=(j,J)=>{if(!(l&&l.toDateString()!==new Date().toDateString())){if(M(j))return}const ce=`${j} - ${J}`;s(me=>({...me,time:me.time===ce?"":ce}))};A.forEach(j=>{console.log(`Time Slot: ${j.start} - Disabled: ${M(j.start)}`)});const z=j=>j?w(j)||j.getDay()===0||j.getDay()===6||b(j)?"bg-gray-800":l?.toDateString()===j?.toDateString()?"bg-orange-800":new Date().toDateString()===j.toDateString()?"border":"hover:bg-orange-900 cursor-pointer":"bg-dark",[F,re]=V.useState(""),[le,he]=V.useState(""),ue=["Legal consultation for personal matters","Business-related legal advice","Assistance with document preparation","Representation in a court case","Other reasons"],q=j=>{re(j),s(J=>({...J,reasons:j==="Other reasons"?le:j}))},Q=j=>{he(j),F==="Other reasons"&&s(J=>({...J,reasons:j}))};return h.jsxs(h.Fragment,{children:[h.jsx("p",{className:W.paragraphSubText,children:"Schedule a"}),h.jsx("h2",{className:`${W.headText} highlight-border`,children:h.jsx("span",{className:"title-with-line",children:"Consultation"})}),h.jsx("div",{className:"p-6 border-2 border-orange-700 shadow-lg rounded-lg mt-10",children:h.jsxs("form",{onSubmit:x,children:[h.jsxs("div",{className:"flex space-x-4 mb-4",children:[h.jsxs("div",{className:"w-1/3",children:[h.jsx("label",{className:"block text-white font-medium mb-2",htmlFor:"firstName",children:"First Name"}),h.jsx("input",{type:"text",id:"firstName",name:"firstName",value:r.firstName,onChange:j=>m("firstName",j.target.value),className:"w-full px-4 py-2 border border-gray-300 text-white rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-700",placeholder:"First name",required:!0})]}),h.jsxs("div",{className:"w-1/3",children:[h.jsx("label",{className:"block text-white font-medium mb-2",htmlFor:"middleName",children:"Middle Name"}),h.jsx("input",{type:"text",id:"middleName",name:"middleName",value:r.middleName,onChange:j=>m("middleName",j.target.value),className:"w-full px-4 py-2 border border-gray-300 text-white rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-700",placeholder:"Middle name"})]}),h.jsxs("div",{className:"w-1/3",children:[h.jsx("label",{className:"block text-white font-medium mb-2",htmlFor:"lastName",children:"Last Name"}),h.jsx("input",{type:"text",id:"lastName",name:"lastName",value:r.lastName,onChange:j=>m("lastName",j.target.value),className:"w-full px-4 py-2 border border-gray-300 text-white rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-700",placeholder:"Last name",required:!0})]})]}),h.jsxs("div",{className:"w-full mb-4",children:[h.jsx("label",{className:"text-white font-medium mb-2",htmlFor:"email",children:"Email"}),h.jsx("input",{type:"email",id:"email",name:"email",value:r.email,onChange:j=>m("email",j.target.value),className:"w-full px-4 py-2 border border-gray-300 text-white rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-700",placeholder:"sample@gmail.com",required:!0})]}),h.jsx("br",{}),h.jsx("label",{className:"text-white font-medium mb-2",htmlFor:"reason",children:"Select a Reason"}),h.jsx("div",{className:"space-y-3",children:h.jsx("table",{className:"min-w-full border rounded-lg border-gray-300",children:h.jsxs("tbody",{children:[ue.map((j,J)=>h.jsx("tr",{className:"rounded-lg",children:h.jsx("td",{className:"border border-gray-300 p-3 rounded-lg",children:h.jsxs("label",{className:"flex items-center space-x-3",children:[h.jsx("input",{type:"radio",name:"reason",value:j,checked:F===j,onChange:ce=>q(ce.target.value),className:"w-4 h-4"}),h.jsx("span",{className:"text-white",children:j})]})})},J)),F==="Other reasons"&&h.jsx("textarea",{placeholder:"Please specify your reason",value:le,onChange:j=>Q(j.target.value),className:"w-full mt-2 p-6 focus:ring-2 focus:ring-orange-700"})]})})}),h.jsx("br",{}),h.jsx("br",{}),h.jsxs("div",{className:"mb-4",children:[h.jsxs("div",{className:"flex justify-between mb-2",children:[h.jsx("button",{type:"button",onClick:N,className:"text-white font-medium py-2 px-4 rounded-lg hover:border-orange-600 focus:outline-none focus:ring-2 focus:ring-orange-700",children:h.jsx(bI,{size:30})}),h.jsxs("p",{className:"text-white font-medium",children:[o.toLocaleString("default",{month:"long"})," ",o.getFullYear()]}),h.jsx("button",{type:"button",onClick:P,className:"text-white font-medium py-2 px-4 rounded-lg hover:border-orange-600 focus:outline-none focus:ring-2 focus:ring-orange-700",children:h.jsx(SI,{size:30})})]}),h.jsx("div",{className:"grid grid-cols-7 gap-2 text-center",children:C().map((j,J)=>h.jsx("div",{className:`py-2 px-4 rounded-lg cursor-pointer ${z(j)}`,onClick:()=>j&&O(j),children:j?j.getDate():""},J))})]}),h.jsx("br",{}),h.jsx("br",{}),h.jsx("br",{}),h.jsxs("div",{className:"mb-4",children:[h.jsx("h3",{className:"text-white font-medium mb-4",children:"These are the available time slots:"}),"            ",h.jsx("div",{className:"grid grid-cols-3 gap-4",children:A.map(j=>h.jsxs("button",{type:"button",onClick:()=>D(j.start,j.end),className:`w-full py-2 text-white rounded-lg border ${r.time===`${j.start} - ${j.end}`?"bg-orange-900":"bg-gray-800"}`,children:[j.start," - ",j.end]},j.id))})]}),h.jsx("br",{})," ",h.jsx("br",{}),h.jsxs("div",{className:"text-center flex justify-between",children:[h.jsx("button",{onClick:p,className:"px-6 py-2 border-2 border-orange-700 text-white rounded-lg hover:bg-gray-500",children:"Go back"}),h.jsx("button",{type:"submit",className:"px-6 py-2 border-2 border-orange-700 text-white rounded-lg hover:bg-gray-500",children:"Confirm"})]})]})})]})},Ode=Mt(kde);class ty{constructor(e=0,t="Network Error"){this.status=e,this.text=t}}const Ude=()=>{if(!(typeof localStorage>"u"))return{get:n=>Promise.resolve(localStorage.getItem(n)),set:(n,e)=>Promise.resolve(localStorage.setItem(n,e)),remove:n=>Promise.resolve(localStorage.removeItem(n))}},$i={origin:"https://api.emailjs.com",blockHeadless:!1,storageProvider:Ude()},TI=n=>n?typeof n=="string"?{publicKey:n}:n.toString()==="[object Object]"?n:{}:{},jde=(n,e="https://api.emailjs.com")=>{if(!n)return;const t=TI(n);$i.publicKey=t.publicKey,$i.blockHeadless=t.blockHeadless,$i.storageProvider=t.storageProvider,$i.blockList=t.blockList,$i.limitRate=t.limitRate,$i.origin=t.origin||e},$5=async(n,e,t={})=>{const i=await fetch($i.origin+n,{method:"POST",headers:t,body:e}),r=await i.text(),s=new ty(i.status,r);if(i.ok)return s;throw s},X5=(n,e,t)=>{if(!n||typeof n!="string")throw"The public key is required. Visit https://dashboard.emailjs.com/admin/account";if(!e||typeof e!="string")throw"The service ID is required. Visit https://dashboard.emailjs.com/admin";if(!t||typeof t!="string")throw"The template ID is required. Visit https://dashboard.emailjs.com/admin/templates"},Fde=n=>{if(n&&n.toString()!=="[object Object]")throw"The template params have to be the object. Visit https://www.emailjs.com/docs/sdk/send/"},K5=n=>n.webdriver||!n.languages||n.languages.length===0,Y5=()=>new ty(451,"Unavailable For Headless Browser"),Vde=(n,e)=>{if(!Array.isArray(n))throw"The BlockList list has to be an array";if(typeof e!="string")throw"The BlockList watchVariable has to be a string"},Bde=n=>!n.list?.length||!n.watchVariable,zde=(n,e)=>n instanceof FormData?n.get(e):n[e],J5=(n,e)=>{if(Bde(n))return!1;Vde(n.list,n.watchVariable);const t=zde(e,n.watchVariable);return typeof t!="string"?!1:n.list.includes(t)},Q5=()=>new ty(403,"Forbidden"),Hde=(n,e)=>{if(typeof n!="number"||n<0)throw"The LimitRate throttle has to be a positive number";if(e&&typeof e!="string")throw"The LimitRate ID has to be a non-empty string"},Gde=async(n,e,t)=>{const i=Number(await t.get(n)||0);return e-Date.now()+i},Z5=async(n,e,t)=>{if(!e.throttle||!t)return!1;Hde(e.throttle,e.id);const i=e.id||n;return await Gde(i,e.throttle,t)>0?!0:(await t.set(i,Date.now().toString()),!1)},e6=()=>new ty(429,"Too Many Requests"),Wde=async(n,e,t,i)=>{const r=TI(i),s=r.publicKey||$i.publicKey,o=r.blockHeadless||$i.blockHeadless,a=r.storageProvider||$i.storageProvider,l={...$i.blockList,...r.blockList},c={...$i.limitRate,...r.limitRate};return o&&K5(navigator)?Promise.reject(Y5()):(X5(s,n,e),Fde(t),t&&J5(l,t)?Promise.reject(Q5()):await Z5(location.pathname,c,a)?Promise.reject(e6()):$5("/api/v1.0/email/send",JSON.stringify({lib_version:"4.4.1",user_id:s,service_id:n,template_id:e,template_params:t}),{"Content-type":"application/json"}))},qde=n=>{if(!n||n.nodeName!=="FORM")throw"The 3rd parameter is expected to be the HTML form element or the style selector of the form"},$de=n=>typeof n=="string"?document.querySelector(n):n,Xde=async(n,e,t,i)=>{const r=TI(i),s=r.publicKey||$i.publicKey,o=r.blockHeadless||$i.blockHeadless,a=$i.storageProvider||r.storageProvider,l={...$i.blockList,...r.blockList},c={...$i.limitRate,...r.limitRate};if(o&&K5(navigator))return Promise.reject(Y5());const u=$de(t);X5(s,n,e),qde(u);const p=new FormData(u);return J5(l,p)?Promise.reject(Q5()):await Z5(location.pathname,c,a)?Promise.reject(e6()):(p.append("lib_version","4.4.1"),p.append("service_id",n),p.append("template_id",e),p.append("user_id",s),$5("/api/v1.0/email/send-form",p))},EI={init:jde,send:Wde,sendForm:Xde,EmailJSResponseStatus:ty},t6=({formData:n,isOpen:e,onClose:t})=>{const i=Pt();if(!e)return null;const r=()=>{t(),i("/lawyer-status")};return h.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex justify-center items-center",children:h.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6 w-96",children:[h.jsx("h2",{className:"text-xl font-semibold mb-4 text-center text-orange-700",children:"Appointment Confirmed!"}),h.jsxs("p",{className:"text-gray-700 text-center",children:["You have successfully booked an appointment in"," ",h.jsx("strong",{children:"Magalgalit Law Office"}),", Baguio City on"," ",h.jsx("strong",{children:n.date})," at ",h.jsx("strong",{children:n.time}),"."]}),h.jsx("div",{className:"mt-6 flex justify-center",children:h.jsx("button",{onClick:r,className:"px-4 py-2 border-2 border-orange-700 text-black rounded hover:bg-gray-500 transition",children:"Close"})})]})})};t6.propTypes={formData:Ze.shape({date:Ze.string.isRequired,time:Ze.string.isRequired}).isRequired,isOpen:Ze.bool.isRequired,onClose:Ze.func.isRequired};const n6=()=>{const[n,e]=V.useState(!1),t=Pt(),r=Ks().state?.formData,s=()=>{t("/appointmentTableLawyer1")},o=async()=>{if(!r){alert("No appointment details found.");return}try{const l=Xs(Lo,"appointments",`${r.email}_${r.date}_${r.time}`);await mw(l,{firstName:r.firstName,middleName:r.middleName||"",lastName:r.lastName,email:r.email,date:r.date,time:r.time,reasons:r.reasons||"No reason selected",lawyer:{name:vr[0].name,title:vr[0].title,address:"Insular Life Building, Legarda Street, corner Abanao extension, Baguio, 2660 Benguet"},timestamp:new Date}),await EI.send("service_f8p4u88","template_rtaqjfs",{from_name:`${r.firstName} ${r.lastName}`,to_name:"Siabell",from_email:r.email,message:`Appointment confirmed for ${r.firstName} ${r.lastName} on ${r.date} at ${r.time}.`},"Z-JlpUZqWVtTdl2mp"),e(!0)}catch(l){console.error("Error saving appointment or sending email:",l),alert("Something went wrong, please try again.")}},a=()=>{e(!1)};return r?h.jsxs("div",{className:"container mx-auto p-6",children:[h.jsx("p",{className:W.paragraphSubText,children:"Appointment"}),h.jsx("h2",{className:`${W.headText} highlight-border`,children:h.jsx("span",{className:"title-with-line",children:"Confirmation"})}),h.jsx("p",{className:W.paragraphSubTextLower,children:"Please review the details of your appointment. Keep in mind that this appointment is non-transferable."}),h.jsx("div",{className:"mt-6 mb-6",children:h.jsx("table",{className:"min-w-full table-auto border-collapse border border-gray-300",children:h.jsxs("tbody",{children:[h.jsxs("tr",{children:[h.jsx("td",{className:"w-1/3 px-4 py-3 text-right border border-gray-300 font-semibold",children:"First Name"}),h.jsx("td",{className:"w-2/3 px-4 py-3 border border-gray-300",children:r.firstName})]}),h.jsxs("tr",{children:[h.jsx("td",{className:"w-1/3 px-4 py-3 text-right border border-gray-300 font-semibold",children:"Middle Name"}),h.jsx("td",{className:"w-2/3 px-4 py-3 border border-gray-300",children:r.middleName||"N/A"})]}),h.jsxs("tr",{children:[h.jsx("td",{className:"w-1/3 px-4 py-3 text-right border border-gray-300 font-semibold",children:"Last Name"}),h.jsx("td",{className:"w-2/3 px-4 py-3 border border-gray-300",children:r.lastName})]}),h.jsxs("tr",{children:[h.jsx("td",{className:"w-1/3 px-4 py-3 text-right border border-gray-300 font-semibold",children:"Date of Appointment"}),h.jsx("td",{className:"w-2/3 px-4 py-3 border border-gray-300",children:r.date})]}),h.jsxs("tr",{children:[h.jsx("td",{className:"w-1/3 px-4 py-3 text-right border border-gray-300 font-semibold",children:"Time of Appointment"}),h.jsx("td",{className:"w-2/3 px-4 py-3 border border-gray-300",children:r.time})]}),h.jsxs("tr",{children:[h.jsx("td",{className:"w-1/3 px-4 py-3 text-right border border-gray-300 font-semibold",children:"Selected Reason"}),h.jsx("td",{className:"w-2/3 px-4 py-3 border border-gray-300",children:r.reasons||"No reason selected"})]})]})})}),h.jsx("br",{}),h.jsx("p",{className:W.paragraphSubText,children:"Contact Information"}),h.jsx("div",{className:"mt-6 mb-6",children:h.jsx("table",{className:"min-w-full table-auto border-collapse border border-gray-300",children:h.jsx("tbody",{children:h.jsxs("tr",{children:[h.jsx("td",{className:"w-1/3 px-4 py-3 text-right border border-gray-300 font-semibold",children:"Email"}),h.jsx("td",{className:"w-2/3 px-4 py-3 border border-gray-300",children:r.email})]})})})}),h.jsx("br",{}),h.jsx("p",{className:W.paragraphSubText,children:"You've got an appointment with an attorney"}),h.jsx("div",{className:"mt-6 mb-6",children:h.jsx("table",{className:"min-w-full table-auto border-collapse border border-gray-300",children:h.jsxs("tbody",{children:[h.jsxs("tr",{children:[h.jsx("td",{className:"w-1/3 px-4 py-3 text-right border border-gray-300 font-semibold",children:"Name"}),h.jsx("td",{className:"w-2/3 px-4 py-3 border border-gray-300",children:vr[0].name})]}),h.jsxs("tr",{children:[h.jsx("td",{className:"w-1/3 px-4 py-3 text-right border border-gray-300 font-semibold",children:"Title"}),h.jsxs("td",{className:"w-2/3 px-4 py-3 border border-gray-300",children:["Attorney at Law specializing in ",vr[0].title]})]}),h.jsxs("tr",{children:[h.jsx("td",{className:"w-1/3 px-4 py-3 text-right border border-gray-300 font-semibold",children:"Address"}),h.jsx("td",{className:"w-2/3 px-4 py-3 border border-gray-300",children:"Insular Life Building, Legarda Street, corner Abanao extension, Baguio, 2660 Benguet"})]})]})})}),h.jsxs("div",{className:"mt-10 text-center flex justify-between",children:[h.jsx("button",{onClick:s,className:"px-6 py-2 border-2 border-orange-700 text-white rounded-lg hover:bg-gray-500",children:"Go back"}),h.jsx("button",{onClick:o,className:"px-6 py-2 border-2 border-orange-700 hover:bg-slate-700 text-white rounded-lg text-sm font-semibold flex items-center",children:"Confirm"})]}),h.jsx(t6,{formData:r,isOpen:n,onClose:a})]}):h.jsx("div",{className:"text-center mt-10",children:h.jsx("p",{className:"text-white text-lg",children:"No appointment details found."})})};n6.propTypes={formData:Ze.shape({firstName:Ze.string.isRequired,middleName:Ze.string,lastName:Ze.string.isRequired,date:Ze.string.isRequired,time:Ze.string.isRequired,email:Ze.string.isRequired})};const Kde=Mt(n6),Yde=()=>{const n=Pt(),[e,t]=V.useState(!1);return h.jsxs("div",{children:[h.jsx("p",{className:W.paragraphSubText,children:"Instructions for booking an Appointment with"}),h.jsx("h2",{className:`${W.headText} highlight-border`,children:h.jsxs("span",{className:"title-with-line",children:[" ",vr[1].nickname]})}),h.jsx("table",{className:"mt-5 w-full border-collapse border border-gray-200",children:h.jsxs("tbody",{children:[h.jsx("tr",{children:h.jsxs("td",{className:`${W.appointmentSubTextLower} border border-gray-300 p-3`,children:["1. Securing an appointment is ",h.jsx("b",{children:"FREE OF CHARGE"})," and Appointment Slip is ",h.jsx("b",{children:"NON-TRANSFERABLE"}),"."]})}),h.jsx("tr",{children:h.jsx("td",{className:`${W.appointmentSubTextLower} border border-gray-300 p-3`,children:"2. The appointment must be named after the requester who will personally apply at the Magalgalit Law Office."})}),h.jsx("tr",{children:h.jsx("td",{className:`${W.appointmentSubTextLower} border border-gray-300 p-3`,children:"3. Be at the Magalgalit Law Office at least fifteen minutes before the appointment schedule."})}),h.jsx("tr",{children:h.jsx("td",{className:`${W.appointmentSubTextLower} border border-gray-300 p-3`,children:h.jsxs("label",{children:[h.jsx("input",{type:"checkbox",checked:e,onChange:i=>t(i.target.checked),className:"mr-2"}),"I agree to the collection and use of the data that I will provide through this form for the purpose of booking an appointment. I understand that the collection and use of this data, which may include personal and sensitive personal information, shall be in accordance with the Data Privacy Act of 2021."]})})})]})}),h.jsxs("div",{className:"flex justify-between mt-10",children:[h.jsx("button",{type:"button",onClick:()=>n("/lawyer-status"),className:"px-6 py-2 border-2 border-orange-700 text-white rounded-lg hover:bg-gray-500",children:"Back"}),h.jsx("div",{className:"w-1/4"}),h.jsx(ns,{to:e?"/appointmentTableLawyer2":"#",className:`px-6 py-2 border-2 border-orange-500 text-white rounded-lg text-sm font-semibold flex items-center ${e?"hover:bg-slate-700":"bg-gray-500 cursor-not-allowed"}`,onClick:i=>{e||i.preventDefault()},children:"Next"})]})]})},Jde=Mt(Yde),Qde=()=>{const n=Pt(),{state:e}=Ks(),{name:t,email:i}=e||{},[r,s]=V.useState({firstName:"",middleName:"",lastName:"",email:"",date:"",time:""}),[o,a]=V.useState(new Date),[l,c]=V.useState(null),u=["2024-12-24","2024-12-25","2024-12-30","2025-01-01","2025-04-09","2025-04-17","2025-04-19","2025-05-01","2025-06-12","2025-08-21","2025-08-25","2025-11-01","2025-11-30","2025-12-08","2025-12-24","2025-12-25","2025-12-30","2025-12-31"];V.useEffect(()=>{const j=Kl(),J=ic(),ce=Pg(j,async me=>{if(me){const oe=Xs(J,"users",me.uid),ye=await bf(oe);if(ye.exists()){const Re=ye.data();s(Me=>({...Me,firstName:Re.firstName||"",middleName:Re.middleName||"",lastName:Re.lastName||"",email:Re.email||me.email}))}}});return()=>ce()},[]);const p=()=>{n("/appointmentLawyer2")},m=(j,J)=>{s(ce=>({...ce,[j]:J}))},g=()=>!r.firstName||!r.lastName||!r.email?(alert("Please fill in all required fields!"),!1):!r.date||!r.time?(alert("Please select a valid date and time slot!"),!1):!0,x=j=>{j.preventDefault(),g()&&n("/appointmentResultLawyer2",{state:{formData:r}})},b=j=>j<new Date().setHours(0,0,0,0),w=j=>u.includes(U(j)),v=j=>!b(j)&&j.getDay()!==0&&j.getDay()!==6&&!w(j),S=j=>new Date(j.getFullYear(),j.getMonth(),1).getDay(),E=j=>new Date(j.getFullYear(),j.getMonth()+1,0).getDate(),C=()=>{const j=S(o),J=E(o),ce=[];for(let me=0;me<j;me++)ce.push(null);for(let me=1;me<=J;me++){const oe=new Date(o.getFullYear(),o.getMonth(),me);ce.push(oe)}return ce},U=j=>{const J=j.getFullYear(),ce=String(j.getMonth()+1).padStart(2,"0"),me=String(j.getDate()).padStart(2,"0");return`${J}-${ce}-${me}`},O=j=>{v(j)&&(c(j),s(J=>({...J,date:U(j),time:""})))},N=()=>{a(j=>{const J=new Date(j.getFullYear(),j.getMonth()-1,1);return J<new Date(2024,0,1)?j:J})},P=()=>{a(j=>new Date(j.getFullYear(),j.getMonth()+1,1))},A=[{id:1,start:"8:00 am",end:"9:00 am"},{id:2,start:"9:00 am",end:"10:00 am"},{id:3,start:"10:00 am",end:"11:00 am"}],M=j=>{const J=new Date,ce=new Date().setHours(0,0,0,0),[me,oe]=j.split(" ");let[ye,Re]=me.split(":").map(Number);return oe==="pm"&&ye!==12?ye+=12:oe==="am"&&ye===12&&(ye=0),new Date(ce).setHours(ye,Re,0,0)<J},D=(j,J)=>{if(!(l&&l.toDateString()!==new Date().toDateString())){if(M(j))return}const ce=`${j} - ${J}`;s(me=>({...me,time:me.time===ce?"":ce}))};A.forEach(j=>{console.log(`Time Slot: ${j.start} - Disabled: ${M(j.start)}`)});const z=j=>j?w(j)||j.getDay()===0||j.getDay()===6||b(j)?"bg-gray-800":l?.toDateString()===j?.toDateString()?"bg-orange-800":new Date().toDateString()===j.toDateString()?"border":"hover:bg-orange-900 cursor-pointer":"bg-dark",[F,re]=V.useState(""),[le,he]=V.useState(""),ue=["Legal consultation for personal matters","Business-related legal advice","Assistance with document preparation","Representation in a court case","Other reasons"],q=j=>{re(j),s(J=>({...J,reasons:j==="Other reasons"?le:j}))},Q=j=>{he(j),F==="Other reasons"&&s(J=>({...J,reasons:j}))};return h.jsxs(h.Fragment,{children:[h.jsx("p",{className:W.paragraphSubText,children:"Schedule a"}),h.jsx("h2",{className:`${W.headText} highlight-border`,children:h.jsx("span",{className:"title-with-line",children:"Consultation"})}),h.jsx("div",{className:"p-6 border-2 border-orange-700 shadow-lg rounded-lg mt-10",children:h.jsxs("form",{onSubmit:x,children:[h.jsxs("div",{className:"flex space-x-4 mb-4",children:[h.jsxs("div",{className:"w-1/3",children:[h.jsx("label",{className:"block text-white font-medium mb-2",htmlFor:"firstName",children:"First Name"}),h.jsx("input",{type:"text",id:"firstName",name:"firstName",value:r.firstName,onChange:j=>m("firstName",j.target.value),className:"w-full px-4 py-2 border border-gray-300 text-white rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-700",placeholder:"First name",required:!0})]}),h.jsxs("div",{className:"w-1/3",children:[h.jsx("label",{className:"block text-white font-medium mb-2",htmlFor:"middleName",children:"Middle Name"}),h.jsx("input",{type:"text",id:"middleName",name:"middleName",value:r.middleName,onChange:j=>m("middleName",j.target.value),className:"w-full px-4 py-2 border border-gray-300 text-white rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-700",placeholder:"Middle name"})]}),h.jsxs("div",{className:"w-1/3",children:[h.jsx("label",{className:"block text-white font-medium mb-2",htmlFor:"lastName",children:"Last Name"}),h.jsx("input",{type:"text",id:"lastName",name:"lastName",value:r.lastName,onChange:j=>m("lastName",j.target.value),className:"w-full px-4 py-2 border border-gray-300 text-white rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-700",placeholder:"Last name",required:!0})]})]}),h.jsxs("div",{className:"w-full mb-4",children:[h.jsx("label",{className:"text-white font-medium mb-2",htmlFor:"email",children:"Email"}),h.jsx("input",{type:"email",id:"email",name:"email",value:r.email,onChange:j=>m("email",j.target.value),className:"w-full px-4 py-2 border border-gray-300 text-white rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-700",placeholder:"sample@gmail.com",required:!0})]}),h.jsx("br",{}),h.jsx("label",{className:"text-white font-medium mb-2",htmlFor:"reason",children:"Select a Reason"}),h.jsx("div",{className:"space-y-3",children:h.jsx("table",{className:"min-w-full border rounded-lg border-gray-300",children:h.jsxs("tbody",{children:[ue.map((j,J)=>h.jsx("tr",{className:"rounded-lg",children:h.jsx("td",{className:"border border-gray-300 p-3 rounded-lg",children:h.jsxs("label",{className:"flex items-center space-x-3",children:[h.jsx("input",{type:"radio",name:"reason",value:j,checked:F===j,onChange:ce=>q(ce.target.value),className:"w-4 h-4"}),h.jsx("span",{className:"text-white",children:j})]})})},J)),F==="Other reasons"&&h.jsx("textarea",{placeholder:"Please specify your reason",value:le,onChange:j=>Q(j.target.value),className:"w-full mt-2 p-6 focus:ring-2 focus:ring-orange-700"})]})})}),h.jsx("br",{}),h.jsx("br",{}),h.jsxs("div",{className:"mb-4",children:[h.jsxs("div",{className:"flex justify-between mb-2",children:[h.jsx("button",{type:"button",onClick:N,className:"text-white font-medium py-2 px-4 rounded-lg hover:border-orange-600 focus:outline-none focus:ring-2 focus:ring-orange-700",children:h.jsx(bI,{size:30})}),h.jsxs("p",{className:"text-white font-medium",children:[o.toLocaleString("default",{month:"long"})," ",o.getFullYear()]}),h.jsx("button",{type:"button",onClick:P,className:"text-white font-medium py-2 px-4 rounded-lg hover:border-orange-600 focus:outline-none focus:ring-2 focus:ring-orange-700",children:h.jsx(SI,{size:30})})]}),h.jsx("div",{className:"grid grid-cols-7 gap-2 text-center",children:C().map((j,J)=>h.jsx("div",{className:`py-2 px-4 rounded-lg cursor-pointer ${z(j)}`,onClick:()=>j&&O(j),children:j?j.getDate():""},J))})]}),h.jsx("br",{}),h.jsx("br",{}),h.jsx("br",{}),h.jsxs("div",{className:"mb-4",children:[h.jsx("h3",{className:"text-white font-medium mb-4",children:"These are the available time slots:"}),h.jsx("div",{className:"grid grid-cols-3 gap-4",children:A.map(j=>h.jsxs("button",{type:"button",onClick:()=>D(j.start,j.end),className:`w-full py-2 text-white rounded-lg border ${r.time===`${j.start} - ${j.end}`?"bg-orange-900":"bg-gray-800"}`,children:[j.start," - ",j.end]},j.id))})]}),h.jsx("br",{})," ",h.jsx("br",{}),h.jsxs("div",{className:"text-center flex justify-between",children:[h.jsx("button",{onClick:p,className:"px-6 py-2 border-2 border-orange-700 text-white rounded-lg hover:bg-gray-500",children:"Go back"}),h.jsx("button",{type:"submit",className:"px-6 py-2 border-2 border-orange-700 text-white rounded-lg hover:bg-gray-500",children:"Confirm"})]})]})})]})},Zde=Mt(Qde),i6=({formData:n,isOpen:e,onClose:t})=>{const i=Pt();if(!e)return null;const r=()=>{t(),i("/lawyer-status")};return h.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex justify-center items-center",children:h.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6 w-96",children:[h.jsx("h2",{className:"text-xl font-semibold mb-4 text-center text-orange-700",children:"Appointment Confirmed!"}),h.jsxs("p",{className:"text-gray-700 text-center",children:["You have successfully booked an appointment in"," ",h.jsx("strong",{children:"Magalgalit Law Office"}),", Baguio City on"," ",h.jsx("strong",{children:n.date})," at ",h.jsx("strong",{children:n.time}),"."]}),h.jsx("div",{className:"mt-6 flex justify-center",children:h.jsx("button",{onClick:r,className:"px-4 py-2 border-2 border-orange-700 text-black rounded hover:bg-gray-500 transition",children:"Close"})})]})})};i6.propTypes={formData:Ze.shape({date:Ze.string.isRequired,time:Ze.string.isRequired}).isRequired,isOpen:Ze.bool.isRequired,onClose:Ze.func.isRequired};const r6=()=>{const[n,e]=V.useState(!1),t=Pt(),r=Ks().state?.formData,s=()=>{t("/appointmentTableLawyer2")},o=async()=>{if(!r){alert("No appointment details found.");return}try{const l=Xs(Lo,"appointments",`${r.email}_${r.date}_${r.time}`);await mw(l,{firstName:r.firstName,middleName:r.middleName||"",lastName:r.lastName,email:r.email,date:r.date,time:r.time,reasons:r.reasons||"No reason selected",lawyer:{name:vr[1].name,title:vr[2].title,address:"Insular Life Building, Legarda Street, corner Abanao extension, Baguio, 2660 Benguet"},timestamp:new Date}),await EI.send("service_f8p4u88","template_rtaqjfs",{from_name:`${r.firstName} ${r.lastName}`,to_name:"Siabell",from_email:r.email,message:`Appointment confirmed for ${r.firstName} ${r.lastName} on ${r.date} at ${r.time}.`},"Z-JlpUZqWVtTdl2mp"),e(!0)}catch(l){console.error("Error saving appointment or sending email:",l),alert("Something went wrong, please try again.")}},a=()=>{e(!1)};return r?h.jsxs("div",{className:"container mx-auto p-6",children:[h.jsx("p",{className:W.paragraphSubText,children:"Appointment"}),h.jsx("h2",{className:`${W.headText} highlight-border`,children:h.jsx("span",{className:"title-with-line",children:"Confirmation"})}),h.jsx("p",{className:W.paragraphSubTextLower,children:"Please review the details of your appointment. Keep in mind that this appointment is non-transferable."}),h.jsx("div",{className:"mt-6 mb-6",children:h.jsx("table",{className:"min-w-full table-auto border-collapse border border-gray-300",children:h.jsxs("tbody",{children:[h.jsxs("tr",{children:[h.jsx("td",{className:"w-1/3 px-4 py-3 text-right border border-gray-300 font-semibold",children:"First Name"}),h.jsx("td",{className:"w-2/3 px-4 py-3 border border-gray-300",children:r.firstName})]}),h.jsxs("tr",{children:[h.jsx("td",{className:"w-1/3 px-4 py-3 text-right border border-gray-300 font-semibold",children:"Middle Name"}),h.jsx("td",{className:"w-2/3 px-4 py-3 border border-gray-300",children:r.middleName||"N/A"})]}),h.jsxs("tr",{children:[h.jsx("td",{className:"w-1/3 px-4 py-3 text-right border border-gray-300 font-semibold",children:"Last Name"}),h.jsx("td",{className:"w-2/3 px-4 py-3 border border-gray-300",children:r.lastName})]}),h.jsxs("tr",{children:[h.jsx("td",{className:"w-1/3 px-4 py-3 text-right border border-gray-300 font-semibold",children:"Date of Appointment"}),h.jsx("td",{className:"w-2/3 px-4 py-3 border border-gray-300",children:r.date})]}),h.jsxs("tr",{children:[h.jsx("td",{className:"w-1/3 px-4 py-3 text-right border border-gray-300 font-semibold",children:"Time of Appointment"}),h.jsx("td",{className:"w-2/3 px-4 py-3 border border-gray-300",children:r.time})]}),h.jsxs("tr",{children:[h.jsx("td",{className:"w-1/3 px-4 py-3 text-right border border-gray-300 font-semibold",children:"Selected Reason"}),h.jsx("td",{className:"w-2/3 px-4 py-3 border border-gray-300",children:r.reasons||"No reason selected"})]})]})})}),h.jsx("br",{}),h.jsx("p",{className:W.paragraphSubText,children:"Contact Information"}),h.jsx("div",{className:"mt-6 mb-6",children:h.jsx("table",{className:"min-w-full table-auto border-collapse border border-gray-300",children:h.jsx("tbody",{children:h.jsxs("tr",{children:[h.jsx("td",{className:"w-1/3 px-4 py-3 text-right border border-gray-300 font-semibold",children:"Email"}),h.jsx("td",{className:"w-2/3 px-4 py-3 border border-gray-300",children:r.email})]})})})}),h.jsx("br",{}),h.jsx("p",{className:W.paragraphSubText,children:"You've got an appointment with an attorney"}),h.jsx("div",{className:"mt-6 mb-6",children:h.jsx("table",{className:"min-w-full table-auto border-collapse border border-gray-300",children:h.jsxs("tbody",{children:[h.jsxs("tr",{children:[h.jsx("td",{className:"w-1/3 px-4 py-3 text-right border border-gray-300 font-semibold",children:"Name"}),h.jsx("td",{className:"w-2/3 px-4 py-3 border border-gray-300",children:vr[1].name})]}),h.jsxs("tr",{children:[h.jsx("td",{className:"w-1/3 px-4 py-3 text-right border border-gray-300 font-semibold",children:"Title"}),h.jsxs("td",{className:"w-2/3 px-4 py-3 border border-gray-300",children:["Attorney at Law specializing in ",vr[1].title]})]}),h.jsxs("tr",{children:[h.jsx("td",{className:"w-1/3 px-4 py-3 text-right border border-gray-300 font-semibold",children:"Address"}),h.jsx("td",{className:"w-2/3 px-4 py-3 border border-gray-300",children:"Insular Life Building, Legarda Street, corner Abanao extension, Baguio, 2660 Benguet"})]})]})})}),h.jsxs("div",{className:"mt-10 text-center flex justify-between",children:[h.jsx("button",{onClick:s,className:"px-6 py-2 border-2 border-orange-700 text-white rounded-lg hover:bg-gray-500",children:"Go back"}),h.jsx("button",{onClick:o,className:"px-6 py-2 border-2 border-orange-700 hover:bg-slate-700 text-white rounded-lg text-sm font-semibold flex items-center",children:"Confirm"})]}),h.jsx(i6,{formData:r,isOpen:n,onClose:a})]}):h.jsx("div",{className:"text-center mt-10",children:h.jsx("p",{className:"text-white text-lg",children:"No appointment details found."})})};r6.propTypes={formData:Ze.shape({firstName:Ze.string.isRequired,middleName:Ze.string,lastName:Ze.string.isRequired,date:Ze.string.isRequired,time:Ze.string.isRequired,email:Ze.string.isRequired})};const efe=Mt(r6),tfe=()=>{const n=Pt(),[e,t]=V.useState(!1);return h.jsxs("div",{children:[h.jsx("p",{className:W.paragraphSubText,children:"Instructions for booking an Appointment with"}),h.jsx("h2",{className:`${W.headText} highlight-border`,children:h.jsxs("span",{className:"title-with-line",children:[" ",vr[2].nickname]})}),h.jsx("table",{className:"mt-5 w-full border-collapse border border-gray-200",children:h.jsxs("tbody",{children:[h.jsx("tr",{children:h.jsxs("td",{className:`${W.appointmentSubTextLower} border border-gray-300 p-3`,children:["1. Securing an appointment is ",h.jsx("b",{children:"FREE OF CHARGE"})," and Appointment Slip is ",h.jsx("b",{children:"NON-TRANSFERABLE"}),"."]})}),h.jsx("tr",{children:h.jsx("td",{className:`${W.appointmentSubTextLower} border border-gray-300 p-3`,children:"2. The appointment must be named after the requester who will personally apply at the Magalgalit Law Office."})}),h.jsx("tr",{children:h.jsx("td",{className:`${W.appointmentSubTextLower} border border-gray-300 p-3`,children:"3. Be at the Magalgalit Law Office at least fifteen minutes before the appointment schedule."})}),h.jsx("tr",{children:h.jsx("td",{className:`${W.appointmentSubTextLower} border border-gray-300 p-3`,children:h.jsxs("label",{children:[h.jsx("input",{type:"checkbox",checked:e,onChange:i=>t(i.target.checked),className:"mr-2"}),"I agree to the collection and use of the data that I will provide through this form for the purpose of booking an appointment. I understand that the collection and use of this data, which may include personal and sensitive personal information, shall be in accordance with the Data Privacy Act of 2021."]})})})]})}),h.jsxs("div",{className:"flex justify-between mt-10",children:[h.jsx("button",{type:"button",onClick:()=>n("/lawyer-status"),className:"px-6 py-2 border-2 border-orange-700 text-white rounded-lg hover:bg-gray-500",children:"Back"}),h.jsx("div",{className:"w-1/4"}),h.jsx(ns,{to:e?"/appointmentTableLawyer3":"#",className:`px-6 py-2 border-2 border-orange-500 text-white rounded-lg text-sm font-semibold flex items-center ${e?"hover:bg-slate-700":"bg-gray-500 cursor-not-allowed"}`,onClick:i=>{e||i.preventDefault()},children:"Next"})]})]})},nfe=Mt(tfe),ife=()=>{const n=Pt(),{state:e}=Ks(),{name:t,email:i}=e||{},[r,s]=V.useState({firstName:"",middleName:"",lastName:"",email:"",date:"",time:""}),[o,a]=V.useState(new Date),[l,c]=V.useState(null),u=["2024-12-24","2024-12-25","2024-12-30","2025-01-01","2025-04-09","2025-04-17","2025-04-19","2025-05-01","2025-06-12","2025-08-21","2025-08-25","2025-11-01","2025-11-30","2025-12-08","2025-12-24","2025-12-25","2025-12-30","2025-12-31"];V.useEffect(()=>{const j=Kl(),J=ic(),ce=Pg(j,async me=>{if(me){const oe=Xs(J,"users",me.uid),ye=await bf(oe);if(ye.exists()){const Re=ye.data();s(Me=>({...Me,firstName:Re.firstName||"",middleName:Re.middleName||"",lastName:Re.lastName||"",email:Re.email||me.email}))}}});return()=>ce()},[]);const p=()=>{n("/appointmentLawyer2")},m=(j,J)=>{s(ce=>({...ce,[j]:J}))},g=()=>!r.firstName||!r.lastName||!r.email?(alert("Please fill in all required fields!"),!1):!r.date||!r.time?(alert("Please select a valid date and time slot!"),!1):!0,x=j=>{j.preventDefault(),g()&&n("/appointmentResultLawyer3",{state:{formData:r}})},b=j=>j<new Date().setHours(0,0,0,0),w=j=>u.includes(U(j)),v=j=>!b(j)&&j.getDay()!==0&&j.getDay()!==6&&!w(j),S=j=>new Date(j.getFullYear(),j.getMonth(),1).getDay(),E=j=>new Date(j.getFullYear(),j.getMonth()+1,0).getDate(),C=()=>{const j=S(o),J=E(o),ce=[];for(let me=0;me<j;me++)ce.push(null);for(let me=1;me<=J;me++){const oe=new Date(o.getFullYear(),o.getMonth(),me);ce.push(oe)}return ce},U=j=>{const J=j.getFullYear(),ce=String(j.getMonth()+1).padStart(2,"0"),me=String(j.getDate()).padStart(2,"0");return`${J}-${ce}-${me}`},O=j=>{v(j)&&(c(j),s(J=>({...J,date:U(j),time:""})))},N=()=>{a(j=>{const J=new Date(j.getFullYear(),j.getMonth()-1,1);return J<new Date(2024,0,1)?j:J})},P=()=>{a(j=>new Date(j.getFullYear(),j.getMonth()+1,1))},A=[{id:1,start:"8:00 am",end:"9:00 am"},{id:2,start:"9:00 am",end:"10:00 am"},{id:3,start:"10:00 am",end:"11:00 am"}],M=j=>{const J=new Date,ce=new Date().setHours(0,0,0,0),[me,oe]=j.split(" ");let[ye,Re]=me.split(":").map(Number);return oe==="pm"&&ye!==12?ye+=12:oe==="am"&&ye===12&&(ye=0),new Date(ce).setHours(ye,Re,0,0)<J},D=(j,J)=>{if(!(l&&l.toDateString()!==new Date().toDateString())){if(M(j))return}const ce=`${j} - ${J}`;s(me=>({...me,time:me.time===ce?"":ce}))};A.forEach(j=>{console.log(`Time Slot: ${j.start} - Disabled: ${M(j.start)}`)});const z=j=>j?w(j)||j.getDay()===0||j.getDay()===6||b(j)?"bg-gray-800":l?.toDateString()===j?.toDateString()?"bg-orange-800":new Date().toDateString()===j.toDateString()?"border":"hover:bg-orange-900 cursor-pointer":"bg-dark",[F,re]=V.useState(""),[le,he]=V.useState(""),ue=["Legal consultation for personal matters","Business-related legal advice","Assistance with document preparation","Representation in a court case","Other reasons"],q=j=>{re(j),s(J=>({...J,reasons:j==="Other reasons"?le:j}))},Q=j=>{he(j),F==="Other reasons"&&s(J=>({...J,reasons:j}))};return h.jsxs(h.Fragment,{children:[h.jsx("p",{className:W.paragraphSubText,children:"Schedule a"}),h.jsx("h2",{className:`${W.headText} highlight-border`,children:h.jsx("span",{className:"title-with-line",children:"Consultation"})}),h.jsx("div",{className:"p-6 border-2 border-orange-700 shadow-lg rounded-lg mt-10",children:h.jsxs("form",{onSubmit:x,children:[h.jsxs("div",{className:"flex space-x-4 mb-4",children:[h.jsxs("div",{className:"w-1/3",children:[h.jsx("label",{className:"block text-white font-medium mb-2",htmlFor:"firstName",children:"First Name"}),h.jsx("input",{type:"text",id:"firstName",name:"firstName",value:r.firstName,onChange:j=>m("firstName",j.target.value),className:"w-full px-4 py-2 border border-gray-300 text-white rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-700",placeholder:"First name",required:!0})]}),h.jsxs("div",{className:"w-1/3",children:[h.jsx("label",{className:"block text-white font-medium mb-2",htmlFor:"middleName",children:"Middle Name"}),h.jsx("input",{type:"text",id:"middleName",name:"middleName",value:r.middleName,onChange:j=>m("middleName",j.target.value),className:"w-full px-4 py-2 border border-gray-300 text-white rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-700",placeholder:"Middle name"})]}),h.jsxs("div",{className:"w-1/3",children:[h.jsx("label",{className:"block text-white font-medium mb-2",htmlFor:"lastName",children:"Last Name"}),h.jsx("input",{type:"text",id:"lastName",name:"lastName",value:r.lastName,onChange:j=>m("lastName",j.target.value),className:"w-full px-4 py-2 border border-gray-300 text-white rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-700",placeholder:"Last name",required:!0})]})]}),h.jsxs("div",{className:"w-full mb-4",children:[h.jsx("label",{className:"text-white font-medium mb-2",htmlFor:"email",children:"Email"}),h.jsx("input",{type:"email",id:"email",name:"email",value:r.email,onChange:j=>m("email",j.target.value),className:"w-full px-4 py-2 border border-gray-300 text-white rounded-lg focus:outline-none focus:ring-2 focus:ring-orange-700",placeholder:"sample@gmail.com",required:!0})]}),h.jsx("br",{}),h.jsx("label",{className:"text-white font-medium mb-2",htmlFor:"reason",children:"Select a Reason"}),h.jsx("div",{className:"space-y-3",children:h.jsx("table",{className:"min-w-full border rounded-lg border-gray-300",children:h.jsxs("tbody",{children:[ue.map((j,J)=>h.jsx("tr",{className:"rounded-lg",children:h.jsx("td",{className:"border border-gray-300 p-3 rounded-lg",children:h.jsxs("label",{className:"flex items-center space-x-3",children:[h.jsx("input",{type:"radio",name:"reason",value:j,checked:F===j,onChange:ce=>q(ce.target.value),className:"w-4 h-4"}),h.jsx("span",{className:"text-white",children:j})]})})},J)),F==="Other reasons"&&h.jsx("textarea",{placeholder:"Please specify your reason",value:le,onChange:j=>Q(j.target.value),className:"w-full mt-2 p-6 focus:ring-2 focus:ring-orange-700"})]})})}),h.jsx("br",{}),h.jsx("br",{}),h.jsxs("div",{className:"mb-4",children:[h.jsxs("div",{className:"flex justify-between mb-2",children:[h.jsx("button",{type:"button",onClick:N,className:"text-white font-medium py-2 px-4 rounded-lg hover:border-orange-600 focus:outline-none focus:ring-2 focus:ring-orange-700",children:h.jsx(bI,{size:30})}),h.jsxs("p",{className:"text-white font-medium",children:[o.toLocaleString("default",{month:"long"})," ",o.getFullYear()]}),h.jsx("button",{type:"button",onClick:P,className:"text-white font-medium py-2 px-4 rounded-lg hover:border-orange-600 focus:outline-none focus:ring-2 focus:ring-orange-700",children:h.jsx(SI,{size:30})})]}),h.jsx("div",{className:"grid grid-cols-7 gap-2 text-center",children:C().map((j,J)=>h.jsx("div",{className:`py-2 px-4 rounded-lg cursor-pointer ${z(j)}`,onClick:()=>j&&O(j),children:j?j.getDate():""},J))})]}),h.jsx("br",{}),h.jsx("br",{}),h.jsxs("div",{className:"mb-4",children:[h.jsx("h3",{className:"text-white font-medium mb-4",children:"These are the available time slots:"}),h.jsx("div",{className:"grid grid-cols-3 gap-4",children:A.map(j=>h.jsxs("button",{type:"button",onClick:()=>D(j.start,j.end),className:`w-full py-2 text-white rounded-lg border ${r.time===`${j.start} - ${j.end}`?"bg-orange-900":"bg-gray-800"}`,children:[j.start," - ",j.end]},j.id))})]}),h.jsx("br",{})," ",h.jsx("br",{}),h.jsxs("div",{className:"text-center flex justify-between",children:[h.jsx("button",{onClick:p,className:"px-6 py-2 border-2 border-orange-700 text-white rounded-lg hover:bg-gray-500",children:"Go back"}),h.jsx("button",{type:"submit",className:"px-6 py-2 border-2 border-orange-700 text-white rounded-lg hover:bg-gray-500",children:"Confirm"})]})]})})]})},rfe=Mt(ife),s6=({formData:n,isOpen:e,onClose:t})=>{const i=Pt();if(!e)return null;const r=()=>{t(),i("/lawyer-status")};return h.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex justify-center items-center",children:h.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6 w-96",children:[h.jsx("h2",{className:"text-xl font-semibold mb-4 text-center text-orange-700",children:"Appointment Confirmed!"}),h.jsxs("p",{className:"text-gray-700 text-center",children:["You have successfully booked an appointment in"," ",h.jsx("strong",{children:"Magalgalit Law Office"}),", Baguio City on"," ",h.jsx("strong",{children:n.date})," at ",h.jsx("strong",{children:n.time}),"."]}),h.jsx("div",{className:"mt-6 flex justify-center",children:h.jsx("button",{onClick:r,className:"px-4 py-2 border-2 border-orange-700 text-black rounded hover:bg-gray-500 transition",children:"Close"})})]})})};s6.propTypes={formData:Ze.shape({date:Ze.string.isRequired,time:Ze.string.isRequired}).isRequired,isOpen:Ze.bool.isRequired,onClose:Ze.func.isRequired};const o6=()=>{const[n,e]=V.useState(!1),t=Pt(),r=Ks().state?.formData,s=()=>{t("/appointmentTableLawyer3")},o=async()=>{if(!r){alert("No appointment details found.");return}try{const l=Xs(Lo,"appointments",`${r.email}_${r.date}_${r.time}`);await mw(l,{firstName:r.firstName,middleName:r.middleName||"",lastName:r.lastName,email:r.email,date:r.date,time:r.time,reasons:r.reasons||"No reason selected",lawyer:{name:vr[2].name,title:vr[2].title,address:"Insular Life Building, Legarda Street, corner Abanao extension, Baguio, 2660 Benguet"},timestamp:new Date}),await EI.send("service_f8p4u88","template_rtaqjfs",{from_name:`${r.firstName} ${r.lastName}`,to_name:"Siabell",from_email:r.email,message:`Appointment confirmed for ${r.firstName} ${r.lastName} on ${r.date} at ${r.time}.`},"Z-JlpUZqWVtTdl2mp"),e(!0)}catch(l){console.error("Error saving appointment or sending email:",l),alert("Something went wrong, please try again.")}},a=()=>{e(!1)};return r?h.jsxs("div",{className:"container mx-auto p-6",children:[h.jsx("p",{className:W.paragraphSubText,children:"Appointment"}),h.jsx("h2",{className:`${W.headText} highlight-border`,children:h.jsx("span",{className:"title-with-line",children:"Confirmation"})}),h.jsx("p",{className:W.paragraphSubTextLower,children:"Please review the details of your appointment. Keep in mind that this appointment is non-transferable."}),h.jsx("div",{className:"mt-6 mb-6",children:h.jsx("table",{className:"min-w-full table-auto border-collapse border border-gray-300",children:h.jsxs("tbody",{children:[h.jsxs("tr",{children:[h.jsx("td",{className:"w-1/3 px-4 py-3 text-right border border-gray-300 font-semibold",children:"First Name"}),h.jsx("td",{className:"w-2/3 px-4 py-3 border border-gray-300",children:r.firstName})]}),h.jsxs("tr",{children:[h.jsx("td",{className:"w-1/3 px-4 py-3 text-right border border-gray-300 font-semibold",children:"Middle Name"}),h.jsx("td",{className:"w-2/3 px-4 py-3 border border-gray-300",children:r.middleName||"N/A"})]}),h.jsxs("tr",{children:[h.jsx("td",{className:"w-1/3 px-4 py-3 text-right border border-gray-300 font-semibold",children:"Last Name"}),h.jsx("td",{className:"w-2/3 px-4 py-3 border border-gray-300",children:r.lastName})]}),h.jsxs("tr",{children:[h.jsx("td",{className:"w-1/3 px-4 py-3 text-right border border-gray-300 font-semibold",children:"Date of Appointment"}),h.jsx("td",{className:"w-2/3 px-4 py-3 border border-gray-300",children:r.date})]}),h.jsxs("tr",{children:[h.jsx("td",{className:"w-1/3 px-4 py-3 text-right border border-gray-300 font-semibold",children:"Time of Appointment"}),h.jsx("td",{className:"w-2/3 px-4 py-3 border border-gray-300",children:r.time})]}),h.jsxs("tr",{children:[h.jsx("td",{className:"w-1/3 px-4 py-3 text-right border border-gray-300 font-semibold",children:"Selected Reasons"}),h.jsx("td",{className:"w-2/3 px-4 py-3 border border-gray-300",children:r.reasons||"No reason selected"})]})]})})}),h.jsx("br",{}),h.jsx("p",{className:W.paragraphSubText,children:"Contact Information"}),h.jsx("div",{className:"mt-6 mb-6",children:h.jsx("table",{className:"min-w-full table-auto border-collapse border border-gray-300",children:h.jsx("tbody",{children:h.jsxs("tr",{children:[h.jsx("td",{className:"w-1/3 px-4 py-3 text-right border border-gray-300 font-semibold",children:"Email"}),h.jsx("td",{className:"w-2/3 px-4 py-3 border border-gray-300",children:r.email})]})})})}),h.jsx("br",{}),h.jsx("p",{className:W.paragraphSubText,children:"You've got an appointment with an attorney"}),h.jsx("div",{className:"mt-6 mb-6",children:h.jsx("table",{className:"min-w-full table-auto border-collapse border border-gray-300",children:h.jsxs("tbody",{children:[h.jsxs("tr",{children:[h.jsx("td",{className:"w-1/3 px-4 py-3 text-right border border-gray-300 font-semibold",children:"Name"}),h.jsx("td",{className:"w-2/3 px-4 py-3 border border-gray-300",children:vr[2].name})]}),h.jsxs("tr",{children:[h.jsx("td",{className:"w-1/3 px-4 py-3 text-right border border-gray-300 font-semibold",children:"Title"}),h.jsxs("td",{className:"w-2/3 px-4 py-3 border border-gray-300",children:["Attorney at Law specializing in ",vr[2].title]})]}),h.jsxs("tr",{children:[h.jsx("td",{className:"w-1/3 px-4 py-3 text-right border border-gray-300 font-semibold",children:"Address"}),h.jsx("td",{className:"w-2/3 px-4 py-3 border border-gray-300",children:"Insular Life Building, Legarda Street, corner Abanao extension, Baguio, 2660 Benguet"})]})]})})}),h.jsxs("div",{className:"mt-10 text-center flex justify-between",children:[h.jsx("button",{onClick:s,className:"px-6 py-2 border-2 border-orange-700 text-white rounded-lg hover:bg-gray-500",children:"Go back"}),h.jsx("button",{onClick:o,className:"px-6 py-2 border-2 border-orange-700 hover:bg-slate-700 text-white rounded-lg text-sm font-semibold flex items-center",children:"Confirm"})]}),h.jsx(s6,{formData:r,isOpen:n,onClose:a})]}):h.jsx("div",{className:"text-center mt-10",children:h.jsx("p",{className:"text-white text-lg",children:"No appointment details found."})})};o6.propTypes={formData:Ze.shape({firstName:Ze.string.isRequired,middleName:Ze.string,lastName:Ze.string.isRequired,date:Ze.string.isRequired,time:Ze.string.isRequired,email:Ze.string.isRequired})};const sfe=Mt(o6),Tn=({children:n})=>h.jsxs("div",{children:[h.jsx(U5,{}),h.jsx("main",{children:n})]}),ofe=()=>{const{selectedWord:n,definition:e,tooltipPosition:t,handleTextSelection:i}=bn();return h.jsxs("div",{children:[h.jsx(vn,{children:h.jsxs(pn.div,{initial:"hidden",animate:"show",variants:oi("top","spring",.5,1),id:"Constitution_ID",className:"p-8 min-h-screen text-center image-border-table",children:[h.jsxs(pn.div,{variants:oi("top","spring",.5,1),className:"mb-16",children:[h.jsx(pn.p,{variants:oi("top","spring",.5,1.5),onMouseUp:i,className:`${W.paragraphSubTextLower} text-white mb-2`,children:h.jsx("em",{children:"Republic of the Philippines"})}),h.jsx(pn.p,{variants:oi("top","spring",.5,2),onMouseUp:i,className:`${W.paragraphSubText} text-white mb-2`,children:h.jsx("strong",{children:"Congress of the Philippines"})}),h.jsx("br",{}),h.jsx(pn.p,{variants:oi("top","spring",.5,3),onMouseUp:i,className:`${W.paragraphSubTextLower} text-white mb-2`,children:"Metro Manila"}),h.jsx("br",{}),h.jsx("br",{}),h.jsx(pn.p,{variants:oi("top","spring",.5,4),onMouseUp:i,className:`${W.paragraphSubTextLower} text-white mb-2`,children:"Nineteenth Congress"}),h.jsx("br",{}),h.jsx("br",{}),h.jsx(pn.p,{variants:oi("top","spring",.5,6),onMouseUp:i,className:`${W.paragraphSubTextLower} text-white mb-2`,children:"Third Regular Session"}),h.jsx("br",{}),h.jsx("br",{}),h.jsxs(pn.p,{variants:oi("top","spring",.5,5),onMouseUp:i,className:`${W.paragraphSubTextLower} text-white mb-2`,children:["Begun and held in Metro Manila, on Monday, the twenty-second ",h.jsx("br",{})," day of July, two thousand twenty-four."]}),h.jsx(pn.hr,{variants:oi("top","tween",.5,4),initial:"hidden",animate:"show",className:"w-20 mx-auto border-t-2 border-white my-4"})]}),h.jsxs(pn.div,{variants:oi("top","spring",.5,7),className:"mb-6",children:[h.jsx("h3",{onMouseUp:i,className:`${W.paragraphSubText} text-white mb-4 font-semibold`,children:"This Act shall be known as The Indigenous Peoples Rights Act of 1997."}),h.jsx("p",{onMouseUp:i,className:`${W.paragraphSubTextLower} text-white mb-12`,children:"AN ACT AMENDING SECTIONS 27, 28, 32, 34, 57, 106, 108, 109, 112, 135, 237, 237-A, 269, 292, 293, 294, 295, 296, 297, 300, 301, 308, 309, 310, AND 311, AND ADDING NEW SECTIONS 135-A, 295-A, 296-A, AND 297-A OF THE NATIONAL INTERNAL REVENUE CODE OF 1997, AS AMENDED, AND FOR OTHER PURPOSES"})]}),h.jsxs(pn.div,{variants:oi("top","spring",.6,8),className:"mb-12",children:[h.jsx("h3",{className:`${W.paragraphSubText} text-white text-2xl font-semibold`,children:"Table of Contents"}),h.jsx("hr",{className:"w-20 mx-auto border-t-2 border-white my-4"})]}),h.jsx(pn.div,{variants:A5(.2),className:"space-y-4 text-left max-w-3xl mx-auto",children:O5.map((r,s)=>h.jsx(pn.div,{variants:oi("bottom","spring",s*.2,.9),children:h.jsx(ns,{to:r.href,className:`${W.paragraphSubText} text-white hover:underline hover:text-purple-400 block py-2 px-4 rounded-md transition duration-300 transform hover:scale-105 hover:shadow-lg`,children:r.topic})},r.href))})]})}),n&&h.jsxs("div",{className:"absolute text-left bg-white p-4 shadow-lg rounded-lg max-w-xs text-black",style:{left:t.left,top:t.top,zIndex:100},children:[h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsx("p",{className:W.dictionaryText,children:n}),h.jsx("i",{className:"fas fa-volume-up ml-5 text-gray-600"})]}),h.jsx("hr",{className:"border-2 mb-2"}),h.jsx("p",{children:e})]})]})},afe=Mt(ofe,""),T3=[{id:"national_territory",title:"National Territory",subtitle:"ARTICLE I",paragraph:"The national territory comprises the Philippine archipelago, with all the islands and waters embraced therein, and all other territories over which the Philippines has sovereignty or jurisdiction, consisting of its terrestrial, fluvial, and aerial domains, including its territorial sea, the seabed, the subsoil, the insular shelves, and other submarine areas. The waters around, between, and connecting the islands of the archipelago, regardless of their breadth and dimensions, form part of the internal waters of the Philippines.",btn:"/articleTwo"}],lfe=()=>{const n=Pt(),{selectedWord:e,definition:t,tooltipPosition:i,handleTextSelection:r}=bn(),[s,o]=V.useState(!1);V.useEffect(()=>{const c=()=>{window.scrollY>200?o(!0):o(!1)};return window.addEventListener("scroll",c),()=>window.removeEventListener("scroll",c)},[]);const a=()=>{window.scrollTo({top:0,behavior:"smooth"})},l=()=>{n(T3[0].btn)};return h.jsxs("div",{className:"text-spacing-3 leading-relaxed tracking-wide",onMouseUp:r,children:[h.jsx(vn,{children:h.jsxs("div",{children:[T3.map(c=>h.jsxs("div",{className:"my-5",children:[h.jsx("h5",{className:W.paragraphSubText,children:c.subtitle}),h.jsx("h4",{className:`${W.headText} mb-10`,children:c.title}),h.jsx("p",{onMouseUp:r,className:W.paragraphSubTextLower,children:c.paragraph})]},c.id)),e&&h.jsxs("div",{className:"absolute text-left bg-white p-4 shadow-lg rounded-lg max-w-xs text-black",style:{left:i.left,top:i.top,zIndex:100},children:[h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsx("p",{className:W.dictionaryText,children:e}),h.jsx("i",{className:"fas fa-volume-up ml-5 text-gray-600"})]}),h.jsx("hr",{className:"border-2 mb-2"}),h.jsx("p",{children:t})]}),h.jsxs("div",{className:"mt-5 text-center",children:[h.jsx("hr",{}),h.jsx("br",{}),h.jsx("button",{onClick:l,className:"px-6 py-2 border justify-end text-white rounded-lg hover:bg-gray-500 flex ml-auto",children:h.jsx("span",{className:"text-xs",children:"ARTICLE II"})})]})]})}),s&&h.jsx("button",{onClick:a,className:"fixed bottom-6 right-6 w-12 h-12 bg-gray-600 text-white rounded-full shadow-lg flex items-center justify-center hover:bg-gray-800 transition-all duration-300",children:h.jsx("i",{className:"fas fa-arrow-up"})})]})},cfe=Mt(lfe),ufe=[{id:"principles_and_state_policies",title:"Declaration of Principles and State Policies",subtitle:"ARTICLE II",btn:"/articleThree",principle:"Principles",principle_section:[{name:"Section 1",paragraph:"The Philippines is a democratic and republican State. Sovereignty resides in the people and all government authority emanates from them."},{name:"Section 2",paragraph:"The Philippines renounces war as an instrument of national policy, adopts the generally accepted principles of international law as part of the law of the land and adheres to the policy of peace, equality, justice, freedom, cooperation, and amity with all nations"},{name:"Section 3",paragraph:"Civilian authority is, at all times, supreme over the military. The Armed Forces of the Philippines is the protector of the people and the State. Its goal is to secure the sovereignty of the State and the integrity of the national territory"},{name:"Section 4",paragraph:"The prime duty of the Government is to serve and protect the people. The Government may call upon the people to defend the State and, in the fulfillment thereof, all citizens may be required, under conditions provided by law, to render personal military or civil service."},{name:"Section 5",paragraph:"The maintenance of peace and order, the protection of life, liberty, and property, and the promotion of the general welfare are essential for the enjoyment by all the people of the blessings of democracy."},{name:"Section 6",paragraph:"The separation of Church and State shall be inviolable."}],policy:"Policies",policy_section:[{name:"Section 7",paragraph:"The State shall pursue an independent foreign policy. In its relations with other states the paramount consideration shall be national sovereignty, territorial integrity, national interest, and the right to self-determination."},{name:"Section 8",paragraph:"The Philippines, consistent with the national interest, adopts and pursues a policy of freedom from nuclear weapons in its territory."},{name:"Section 9",paragraph:"The State shall promote a just and dynamic social order that will ensure the prosperity and independence of the nation and free the people from poverty through policies that provide adequate social services, promote full employment, a rising standard of living, and an improved quality of life for all."},{name:"Section 10",paragraph:"The State shall promote social justice in all phases of national development."},{name:"Section 11",paragraph:"The State values the dignity of every human person and guarantees full respect for human rights."},{name:"Section 12",paragraph:"The State recognizes the sanctity of family life and shall protect and strengthen the family as a basic autonomous social institution. It shall equally protect the life of the mother and the life of the unborn from conception. The natural and primary right and duty of parents in the rearing of the youth for civic efficiency and the development of moral character shall receive the support of the Government."},{name:"Section 13",paragraph:"The State recognizes the vital role of the youth in nation-building and shall promote and protect their physical, moral, spiritual, intellectual, and social well-being. It shall inculcate in the youth patriotism and nationalism, and encourage their involvement in public and civic affairs."},{name:"Section 14",paragraph:"The State recognizes the role of women in nation-building, and shall ensure the fundamental equality before the law of women and men."},{name:"Section 15",paragraph:"The State shall protect and promote the right to health of the people and instill health consciousness among them."},{name:"Section 16",paragraph:"The State shall protect and advance the right of the people to a balanced and healthful ecology in accord with the rhythm and harmony of nature."},{name:"Section 17",paragraph:"The State shall give priority to education, science and technology, arts, culture, and sports to foster patriotism and nationalism, accelerate social progress, and promote total human liberation and development."},{name:"Section 18",paragraph:"The State affirms labor as a primary social economic force. It shall protect the rights of workers and promote their welfare."},{name:"Section 19",paragraph:"The State shall develop a self-reliant and independent national economy effectively controlled by Filipinos."},{name:"Section 20",paragraph:"The State recognizes the indispensable role of the private sector, encourages private enterprise, and provides incentives to needed investments."},{name:"Section 21",paragraph:"The State shall promote comprehensive rural development and agrarian reform."},{name:"Section 22",paragraph:"The State recognizes and promotes the rights of indigenous cultural communities within the framework of national unity and development."},{name:"Section 23",paragraph:"The State shall encourage non-governmental, community-based, or sectoral organizations that promote the welfare of the nation."},{name:"Section 24",paragraph:"The State recognizes the vital role of communication and information in nation-building."},{name:"Section 25",paragraph:"The State shall ensure the autonomy of local governments."},{name:"Section 26",paragraph:"The State shall guarantee equal access to opportunities for public service, and prohibit political dynasties as may be defined by law."},{name:"Section 27",paragraph:"The State shall maintain honesty and integrity in the public service and take positive and effective measures against graft and corruption."},{name:"Section 28",paragraph:"Subject to reasonable conditions prescribed by law, the State adopts and implements a policy of full public disclosure of all its transactions involving public interest."}]}],hfe=()=>{const n=Pt(),{selectedWord:e,definition:t,tooltipPosition:i,handleTextSelection:r}=bn(),[s,o]=V.useState(!1);V.useEffect(()=>{const u=()=>{window.scrollY>200?o(!0):o(!1)};return window.addEventListener("scroll",u),()=>window.removeEventListener("scroll",u)},[]);const a=()=>{window.scrollTo({top:0,behavior:"smooth"})},l=()=>{n("/articleThree")},c=()=>{n("/articleOne")};return h.jsxs("div",{className:"text-spacing-3 leading-relaxed tracking-wide",children:[h.jsx(vn,{children:h.jsxs("div",{children:[ufe.map(u=>h.jsxs("div",{className:"my-5",children:[h.jsx("h5",{className:W.paragraphSubText,children:u.subtitle}),h.jsx("h4",{className:`${W.headText} mb-10`,children:u.title}),h.jsxs("div",{children:[h.jsx("h5",{id:"principles",className:W.paragraphSubText,children:"Principles"}),u.principle_section.map((p,m)=>h.jsxs("div",{className:"my-4",children:[h.jsx("h6",{className:W.paragraphSubText,children:p.name}),h.jsx("p",{onMouseUp:r,className:W.paragraphSubTextLower,children:p.paragraph})]},m))]}),h.jsxs("div",{children:[h.jsx("h5",{id:"policies",className:`${W.paragraphSubText} mt-5`,children:"Policies"}),u.policy_section.map((p,m)=>h.jsxs("div",{className:"my-4",children:[h.jsx("h6",{className:W.paragraphSubText,children:p.name}),h.jsx("p",{onMouseUp:r,className:W.paragraphSubTextLower,children:p.paragraph})]},m))]})]},u.id)),e&&h.jsxs("div",{className:"absolute text-left bg-white p-4 shadow-lg rounded-lg max-w-xs text-black",style:{left:i.left,top:i.top,zIndex:100},children:[h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsx("p",{className:W.dictionaryText,children:e}),h.jsx("i",{className:"fas fa-volume-up ml-5 text-gray-600"})]}),h.jsx("hr",{className:"border-2 mb-2"}),h.jsx("p",{children:t})]}),h.jsxs("div",{className:"mt-10 text-center flex justify-between",children:[h.jsx("button",{onClick:c,className:"px-6 py-2 border justify-end text-white rounded-lg hover:bg-gray-500",children:"Article I"}),h.jsx("button",{onClick:l,className:"px-6 py-2 border justify-end text-white rounded-lg hover:bg-gray-500",children:"Article III"})]})]})}),s&&h.jsx("button",{onClick:a,className:"fixed bottom-6 right-6 w-12 h-12 bg-gray-600 text-white rounded-full shadow-lg flex items-center justify-center hover:bg-gray-800 transition-all duration-300",children:h.jsx("i",{className:"fas fa-arrow-up"})})]})},dfe=Mt(hfe),ffe=[{id:"bill_of_rights",title:"Bill of Rights",subtitle:"ARTICLE III",sections:[{name:"Section 1",paragraph:"No person shall be deprived of life, liberty, or property without due process of law, nor shall any person be denied the equal protection of the laws."},{name:"Section 2",paragraph:"The right of the people to be secure in their persons, houses, papers, and effects against unreasonable searches and seizures of whatever nature and for any purpose shall be inviolable, and no search warrant or warrant of arrest shall issue except upon probable cause to be determined personally by the judge after examination under oath or affirmation of the complainant and the witnesses he may produce, and particularly describing the place to be searched and the persons or things to be seized."},{name:"Section 3",paragraph:["(1) The privacy of communication and correspondence shall be inviolable except upon lawful order of the court, or when public safety or order requires otherwise as prescribed by law","(2) Any evidence obtained in violation of this or the preceding section shall be inadmissible for any purpose in any proceeding."]},{name:"Section 4",paragraph:"No law shall be passed abridging the freedom of speech, of expression, or of the press, or the right of the people peaceably to assemble and petition the government for redress of grievances."},{name:"Section 5",paragraph:"No law shall be made respecting an establishment of religion, or prohibiting the free exercise thereof. The free exercise and enjoyment of religious profession and worship, without discrimination or preference, shall forever be allowed. No religious test shall be required for the exercise of civil or political rights."},{name:"Section 6",paragraph:"The liberty of abode and of changing the same within the limits prescribed by law shall not be impaired except upon lawful order of the court. Neither shall the right to travel be impaired except in the interest of national security, public safety, or public health, as may be provided by law."},{name:"Section 7",paragraph:"The right of the people to information on matters of public concern shall be recognized. Access to official records, and to documents, and papers pertaining to official acts, transactions, or decisions, as well as to government research data used as basis for policy development, shall be afforded the citizen, subject to such limitations as may be provided by law."},{name:"Section 8",paragraph:"The right of the people, including those employed in the public and private sectors, to form unions, associations, or societies for purposes not contrary to law shall not be abridged"},{name:"Section 9",paragraph:"Private property shall not be taken for public use without just compensation."},{name:"Section 10",paragraph:"No law impairing the obligation of contracts shall be passed."},{name:"Section 11",paragraph:"Free access to the courts and quasi-judicial bodies and adequate legal assistance shall not be denied to any person by reason of poverty."},{name:"Section 12",paragraph:["(1) Any person under investigation for the commission of an offense shall have the right to be informed of his right to remain silent and to have competent and independent counsel preferably of his own choice. If the person cannot afford the services of counsel, he must be provided with one. These rights cannot be waived except in writing and in the presence of counsel.","(2) No torture, force, violence, threat, intimidation, or any other means which vitiate the free will shall be used against him. Secret detention places, solitary, incommunicado, or other similar forms of detention are prohibited.","(3) Any confession or admission obtained in violation of this or Section 17 hereof shall be inadmissible in evidence against him.","(4) The law shall provide for penal and civil sanctions for violations of this section as well as compensation to and rehabilitation of victims of torture or similar practices, and their families."]},{name:"Section 13",paragraph:"All persons, except those charged with offenses punishable by reclusion perpetua when evidence of guilt is strong, shall, before conviction, be bailable by sufficient sureties, or be released on recognizance as may be provided by law. The right to bail shall not be impaired even when the privilege of the writ of habeas corpus is suspended. Excessive bail shall not be required."},{name:"Section 14",paragraph:[". (1) No person shall be held to answer for a criminal offense without due process of law.","(2) In all criminal prosecutions, the accused shall be presumed innocent until the contrary is proved, and shall enjoy the right to be heard by himself and counsel, to be informed of the nature and cause of the accusation against him, to have a speedy, impartial, and public trial, to meet the witnesses face to face, and to have compulsory process to secure the attendance of witnesses and the production of evidence in his behalf. However, after arraignment, trial may proceed notwithstanding the absence of the accused provided that he has been duly notified and his failure to appear is unjustifiable."]},{name:"Section 15",paragraph:"The privilege of the writ of habeas corpus shall not be suspended except in cases of invasion or rebellion when the public safety requires it."},{name:"Section 16",paragraph:"All persons shall have the right to a speedy disposition of their cases before all judicial, quasi-judicial, or administrative bodies."},{name:"Section 17",paragraph:"No person shall be compelled to be a witness against himself."},{name:"Section 18",paragraph:["(1) No person shall be detained solely by reason of his political beliefs and aspirations.","(2) No involuntary servitude in any form shall exist except as a punishment for a crime whereof the party shall have been duly convicted."]},{name:"Section 19",paragraph:["(1) Excessive fines shall not be imposed, nor cruel, degrading or inhuman punishment inflicted. Neither shall death penalty be imposed, unless, for compelling reasons involving heinous crimes, the Congress hereafter provides for it. Any death penalty already imposed shall be reduced to reclusion perpetua.","(2) The employment of physical, psychological, or degrading punishment against any prisoner or detainee or the use of substandard or inadequate penal facilities under subhuman conditions shall be dealt with by law."]},{name:"Section 20",paragraph:"No person shall be imprisoned for debt or non-payment of a poll tax."},{name:"Section 21",paragraph:"No person shall be twice put in jeopardy of punishment for the same offense. If an act is punished by a law and an ordinance, conviction or acquittal under either shall constitute a bar to another prosecution for the same act."},{name:"Section 22",paragraph:" No ex post facto law or bill of attainder shall be enacted."}]}],pfe=()=>{const n=Pt(),{selectedWord:e,definition:t,tooltipPosition:i,handleTextSelection:r}=bn(),[s,o]=V.useState(!1);V.useEffect(()=>{const u=()=>{window.scrollY>200?o(!0):o(!1)};return window.addEventListener("scroll",u),()=>window.removeEventListener("scroll",u)},[]);const a=()=>{window.scrollTo({top:0,behavior:"smooth"})},l=()=>{n("/articleFour")},c=()=>{n("/articleTwo")};return h.jsxs("div",{className:"text-spacing-3 leading-relaxed tracking-wide",children:[h.jsx(vn,{children:h.jsxs("div",{children:[ffe.map(u=>h.jsxs("div",{className:"my-5",children:[h.jsx("h5",{className:W.paragraphSubText,children:u.subtitle}),h.jsx("h4",{className:`${W.headText} mb-10`,children:u.title}),h.jsx("div",{children:u.sections.map((p,m)=>h.jsxs("div",{className:"my-4",children:[h.jsx("h6",{className:W.paragraphSubText,children:p.name}),h.jsx("p",{onMouseUp:r,className:W.paragraphSubTextLower,children:p.paragraph})]},m))})]},u.id)),e&&h.jsxs("div",{className:"absolute text-left bg-white p-4 shadow-lg rounded-lg max-w-xs text-black",style:{left:i.left,top:i.top,zIndex:100},children:[h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsx("p",{className:W.dictionaryText,children:e}),h.jsx("i",{className:"fas fa-volume-up ml-5 text-gray-600"})]}),h.jsx("hr",{className:"border-2 mb-2"}),h.jsx("p",{children:t})]}),h.jsxs("div",{className:"mt-10 text-center flex justify-between",children:[h.jsx("button",{onClick:c,className:"px-6 py-2 border justify-end text-white rounded-lg hover:bg-gray-500",children:"Previous Article"}),h.jsx("button",{onClick:l,className:"px-6 py-2 border justify-end text-white rounded-lg hover:bg-gray-500",children:"Next Article"})]})]})}),s&&h.jsx("button",{onClick:a,className:"fixed bottom-6 right-6 w-12 h-12 bg-gray-600 text-white rounded-full shadow-lg flex items-center justify-center hover:bg-gray-800 transition-all duration-300",children:h.jsx("i",{className:"fas fa-arrow-up"})})]})},mfe=Mt(pfe),gfe=[{id:"citizenship",title:"Citizenship",subtitle:"ARTICLE IV",sections:[{name:"Section 1",paragraph:["(1) Those who are citizens of the Philippines at the time of the adoption of this Constitution;","(2) Those whose fathers or mothers are citizens of the Philippines;","(3) Those born before January 17, 1973, of Filipino mothers, who elect Philippine citizenship upon reaching the age of majority; and","(4) Those who are naturalized in accordance with law."]},{name:"Section 2",paragraph:"Natural-born citizens are those who are citizens of the Philippines from birth without having to perform any act to acquire or perfect their Philippine citizenship. Those who elect Philippine citizenship in accordance with paragraph (3), Section 1 hereof shall be deemed natural-born citizens."},{name:"Section 3",paragraph:"Philippine citizenship may be lost or reacquired in the manner provided by law."},{name:"Section 4",paragraph:"Citizens of the Philippines who marry aliens shall retain their citizenship, unless by their act or omission they are deemed, under the law, to have renounced it."},{name:"Section 5",paragraph:"Dual allegiance of citizens is inimical to the national interest and shall be dealt with by law."}]}],yfe=()=>{const n=Pt(),{selectedWord:e,definition:t,tooltipPosition:i,handleTextSelection:r}=bn(),[s,o]=V.useState(!1);V.useEffect(()=>{const u=()=>{window.scrollY>200?o(!0):o(!1)};return window.addEventListener("scroll",u),()=>window.removeEventListener("scroll",u)},[]);const a=()=>{window.scrollTo({top:0,behavior:"smooth"})},l=()=>{n("/articleFive")},c=()=>{n("/articleThree")};return h.jsxs("div",{className:"text-spacing-3 leading-relaxed tracking-wide",children:[h.jsx(vn,{children:h.jsxs("div",{children:[gfe.map(u=>h.jsxs("div",{className:"my-5",children:[h.jsx("h5",{className:W.paragraphSubText,children:u.subtitle}),h.jsx("h4",{className:`${W.headText} mb-10`,children:u.title}),h.jsx("div",{children:u.sections.map((p,m)=>h.jsxs("div",{className:"my-4",children:[h.jsx("h6",{className:W.paragraphSubText,children:p.name}),h.jsx("p",{onMouseUp:r,className:W.paragraphSubTextLower,children:p.paragraph})]},m))})]},u.id)),e&&h.jsxs("div",{className:"absolute text-left bg-white p-4 shadow-lg rounded-lg max-w-xs text-black",style:{left:i.left,top:i.top,zIndex:100},children:[h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsx("p",{className:W.dictionaryText,children:e}),h.jsx("i",{className:"fas fa-volume-up ml-5 text-gray-600"})]}),h.jsx("hr",{className:"border-2 mb-2"}),h.jsx("p",{children:t})]}),h.jsxs("div",{className:"mt-10 text-center flex justify-between",children:[h.jsx("button",{onClick:c,className:"px-6 py-2 border justify-end text-white rounded-lg hover:bg-gray-500",children:"Previous Article"}),h.jsx("button",{onClick:l,className:"px-6 py-2 border justify-end text-white rounded-lg hover:bg-gray-500",children:"Next Article"})]})]})}),s&&h.jsx("button",{onClick:a,className:"fixed bottom-6 right-6 w-12 h-12 bg-gray-600 text-white rounded-full shadow-lg flex items-center justify-center hover:bg-gray-800 transition-all duration-300",children:h.jsx("i",{className:"fas fa-arrow-up"})})]})},vfe=Mt(yfe),xfe=[{id:"suff",title:"Suffrage",subtitle:"ARTICLE V",sections:[{name:"Section 1",paragraph:"Suffrage may be exercised by all citizens of the Philippines not otherwise disqualified by law, who are at least eighteen years of age, and who shall have resided in the Philippines for at least one year and in the place wherein they propose to vote for at least six months immediately preceding the election. No literacy, property, or other substantive requirement shall be imposed on the exercise of suffrage."},{name:"Section 2",paragraph:"The Congress shall provide a system for securing the secrecy and sanctity of the ballot as well as a system for absentee voting by qualified Filipinos abroad."}]}],_fe=()=>{const n=Pt(),{selectedWord:e,definition:t,tooltipPosition:i,handleTextSelection:r}=bn(),[s,o]=V.useState(!1);V.useEffect(()=>{const u=()=>{window.scrollY>200?o(!0):o(!1)};return window.addEventListener("scroll",u),()=>window.removeEventListener("scroll",u)},[]);const a=()=>{window.scrollTo({top:0,behavior:"smooth"})},l=()=>{n("/articleSix")},c=()=>{n("/articleFour")};return h.jsxs("div",{className:"text-spacing-3 leading-relaxed tracking-wide",children:[h.jsx(vn,{children:h.jsxs("div",{children:[xfe.map(u=>h.jsxs("div",{className:"my-5",children:[h.jsx("h5",{className:W.paragraphSubText,children:u.subtitle}),h.jsx("h4",{className:`${W.headText} mb-10`,children:u.title}),h.jsx("div",{children:u.sections.map((p,m)=>h.jsxs("div",{className:"my-4",children:[h.jsx("h6",{className:W.paragraphSubText,children:p.name}),h.jsx("p",{onMouseUp:r,className:W.paragraphSubTextLower,children:p.paragraph})]},m))})]},u.id)),e&&h.jsxs("div",{className:"absolute text-left bg-white p-4 shadow-lg rounded-lg max-w-xs text-black",style:{left:i.left,top:i.top,zIndex:100},children:[h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsx("p",{className:W.dictionaryText,children:e}),h.jsx("i",{className:"fas fa-volume-up ml-5 text-gray-600"})]}),h.jsx("hr",{className:"border-2 mb-2"}),h.jsx("p",{children:t})]}),h.jsxs("div",{className:"mt-10 text-center flex justify-between",children:[h.jsx("button",{onClick:c,className:"px-6 py-2 border justify-end text-white rounded-lg hover:bg-gray-500",children:"Previous Article"}),h.jsx("button",{onClick:l,className:"px-6 py-2 border justify-end text-white rounded-lg hover:bg-gray-500",children:"Next Article"})]})]})}),s&&h.jsx("button",{onClick:a,className:"fixed bottom-6 right-6 w-12 h-12 bg-gray-600 text-white rounded-full shadow-lg flex items-center justify-center hover:bg-gray-800 transition-all duration-300",children:h.jsx("i",{className:"fas fa-arrow-up"})})]})},wfe=Mt(_fe),bfe=[{id:"legislative_department",title:"The Legislative Department",subtitle:"ARTICLE VI",sections:[{name:"Section 1",paragraph:"The legislative power shall be vested in the Congress of the Philippines which shall consist of a Senate and a House of Representatives, except to the extent reserved to the people by the provision on initiative and referendum."},{name:"Section 2",paragraph:"The Senate shall be composed of twenty-four Senators who shall be elected at large by the qualified voters of the Philippines, as may be provided by law."},{name:"Section 3",paragraph:"No person shall be a Senator unless he is a natural-born citizen of the Philippines, and, on the day of the election, is at least thirty-five years of age, able to read and write, a registered voter, and a resident of the Philippines for not less than two years immediately preceding the day of the election."},{name:"Section 4",paragraph:"The term of office of the Senators shall be six years and shall commence, unless otherwise provided by law, at noon on the thirtieth day of June next following their election. No Senator shall serve for more than two consecutive terms. Voluntary renunciation of the office for any length of time shall not be considered as an interruption in the continuity of his service for the full term for which he was elected."},{name:"Section 5",paragraph:[" (1) The House of Representatives shall be composed of not more than two hundred and fifty members, unless otherwise fixed by law, who shall be elected from legislative districts apportioned among the provinces, cities, and the Metropolitan Manila area in accordance with the number of their respective inhabitants, and on the basis of a uniform and progressive ratio, and those who, as provided by law, shall be elected through a party-list system of registered national, regional, and sectoral parties or organizations.","(2) The party-list representatives shall constitute twenty per centum of the total number of representatives including those under the party list. For three consecutive terms after the ratification of this Constitution, one-half of the seats allocated to party-list representatives shall be filled, as provided by law, by selection or election from the labor, peasant, urban poor, indigenous cultural communities, women, youth, and such other sectors as may be provided by law, except the religious sector.","(3) Each legislative district shall comprise, as far as practicable, contiguous, compact and adjacent territory. Each city with a population of at least two hundred fifty thousand, or each province, shall have at least one representative.","(4) Within three years following the return of every census, the Congress shall make a reapportionment of legislative districts based on the standards provided in this section."]},{name:"Section 6",paragraph:"No person shall be a Member of the House of Representatives unless he is a natural-born citizen of the Philippines and, on the day of the election, is at least twenty-five years of age, able to read and write, and, except the party-list representatives, a registered voter in the district in which he shall be elected, and a resident thereof for a period of not less than one year immediately preceding the day of the election."},{name:"Section 7",paragraph:["The Members of the House of Representatives shall be elected for a term of three years which shall begin, unless otherwise provided by law, at noon on the thirtieth day of June next following their election.","No member of the House of Representatives shall serve for more than three consecutive terms. Voluntary renunciation of the office for any length of time shall not be considered as an interruption in the continuity of his service for the full term for which he was elected."]},{name:"Section 8",paragraph:"Unless otherwise provided by law, the regular election of the Senators and the Members of the House of Representatives shall be held on the second Monday of May."},{name:"Section 9",paragraph:"In case of vacancy in the Senate or in the House of Representatives, a special election may be called to fill such vacancy in the manner prescribed by law, but the Senator or Member of the House of Representatives thus elected shall serve only for the unexpired term."},{name:"Section 10",paragraph:"The salaries of Senators and Members of the House of Representatives shall be determined by law. No increase in said compensation shall take effect until after the expiration of the full term of all the Members of the Senate and the House of Representatives approving such increase."},{name:"Section 11",paragraph:"A Senator or Member of the House of Representatives shall, in all offenses punishable by not more than six years imprisonment, be privileged from arrest while the Congress is in session. No Member shall be questioned nor be held liable in any other place for any speech or debate in the Congress or in any committee thereof."},{name:"Section 12",paragraph:"All Members of the Senate and the House of Representatives shall, upon assumption of office, make a full disclosure of their financial and business interests. They shall notify the House concerned of a potential conflict of interest that may arise from the filing of a proposed legislation of which they are authors."},{name:"Section 13",paragraph:"No Senator or Member of the House of Representatives may hold any other office or employment in the Government, or any subdivision, agency, or instrumentality thereof, including government-owned or controlled corporations or their subsidiaries, during his term without forfeiting his seat. Neither shall he be appointed to any office which may have been created or the emoluments thereof increased during the term for which he was elected."},{name:"Section 14",paragraph:"No Senator or Member of the House of Representatives may personally appear as counsel before any court of justice or before the Electoral Tribunals, or quasi-judicial and other administrative bodies. Neither shall he, directly or indirectly, be interested financially in any contract with, or in any franchise or special privilege granted by the Government, or any subdivision, agency, or instrumentality thereof, including any government-owned or controlled corporation, or its subsidiary, during his term of office. He shall not intervene in any matter before any office of the Government for his pecuniary benefit or where he may be called upon to act on account of his office."},{name:"Section 15",paragraph:"The Congress shall convene once every year on the fourth Monday of July for its regular session, unless a different date is fixed by law, and shall continue to be in session for such number of days as it may determine until thirty days before the opening of its next regular session, exclusive of Saturdays, Sundays, and legal holidays. The President may call a special session at any time."},{name:"Section 16",paragraph:["(1) The Senate shall elect its President and the House of Representatives its Speaker, by a majority vote of all its respective Members.","Each House shall choose such other officers as it may deem necessary.","(2) A majority of each House shall constitute a quorum to do business, but a smaller number may adjourn from day to day and may compel the attendance of absent Members in such manner, and under such penalties, as such House may provide.","(3) Each House may determine the rules of its proceedings, punish its Members for disorderly behavior, and, with the concurrence of two-thirds of all its Members, suspend or expel a Member. A penalty of suspension, when imposed, shall not exceed sixty days.","(4) Each House shall keep a Journal of its proceedings, and from time to time publish the same, excepting such parts as may, in its judgment, affect national security; and the yeas and nays on any question shall, at the request of one-fifth of the Members present, be entered in the Journal.","Each House shall also keep a Record of its proceedings.","(5) Neither House during the sessions of the Congress shall, without the consent of the other, adjourn for more than three days, nor to any other place than that in which the two Houses shall be sitting."]},{name:"Section 17",paragraph:"The Senate and the House of Representatives shall each have an Electoral Tribunal which shall be the sole judge of all contests relating to the election, returns, and qualifications of their respective Members. Each Electoral Tribunal shall be composed of nine Members, three of whom shall be Justices of the Supreme Court to be designated by the Chief Justice, and the remaining six shall be Members of the Senate or the House of Representatives, as the case may be, who shall be chosen on the basis of proportional representation from the political parties and the parties or organizations registered under the party-list system represented therein. The senior Justice in the Electoral Tribunal shall be its Chairman."},{name:"Section 18",paragraph:"There shall be a Commission on Appointments consisting of the President of the Senate, as ex officio Chairman, twelve Senators and twelve Members of the House of Representatives, elected by each House on the basis of proportional representation from the political parties and parties or organizations registered under the party-list system represented therein. The Chairman of the Commission shall not vote, except in case of a tie. The Commission shall act on all appointments submitted to it within thirty session days of the Congress from their submission. The Commission shall rule by a majority vote of all the Members."},{name:"Section 19",paragraph:"The Electoral Tribunals and the Commission on Appointments shall be constituted within thirty days after the Senate and the House of Representatives shall have been organized with the election of the President and the Speaker. The Commission on Appointments shall meet only while the Congress is in session, at the call of its Chairman or a majority of all its Members, to discharge such powers and functions as are herein conferred upon it."},{name:"Section 20",paragraph:"The records and books of accounts of the Congress shall be preserved and be open to the public in accordance with law, and such books shall be audited by the Commission on Audit which shall publish annually an itemized list of amounts paid to and expenses incurred for each Member."},{name:"Section 21",paragraph:"The Senate or the House of Representatives or any of its respective committees may conduct inquiries in aid of legislation in accordance with its duly published rules of procedure. The rights of persons appearing in or affected by such inquiries shall be respected."},{name:"Section 22",paragraph:"The heads of departments may upon their own initiative, with the consent of the President, or upon the request of either House, as the rules of each House shall provide, appear before and be heard by such House on any matter pertaining to their departments. Written questions shall be submitted to the President of the Senate or the Speaker of the House of Representatives at least three days before their scheduled appearance. Interpellations shall not be limited to written questions, but may cover matters related thereto. When the security of the State or the public interest so requires and the President so states in writing, the appearance shall be conducted in executive session."},{name:"Section 23",paragraph:["(1) The Congress, by a vote of two-thirds of both Houses in joint session assembled, voting separately, shall have the sole power to declare the existence of a state of war.","(2) In times of war or other national emergency, the Congress may, by law, authorize the President, for a limited period and subject to such restrictions as it may prescribe, to exercise powers necessary and proper to carry out a declared national policy. Unless sooner withdrawn by resolution of the Congress, such powers shall cease upon the next adjournment thereof."]},{name:"Section 24",paragraph:"All appropriation, revenue or tariff bills, bills authorizing increase of the public debt, bills of local application, and private bills shall originate exclusively in the House of Representatives, but the Senate may propose or concur with amendments."},{name:"Section 25",paragraph:["(1) The Congress may not increase the appropriations recommended by the President for the operation of the Government as specified in the budget. The form, content, and manner of preparation of the budget shall be prescribed by law.","(2) No provision or enactment shall be embraced in the general appropriations bill unless it relates specifically to some particular appropriation therein. Any such provision or enactment shall be limited in its operation to the appropriation to which it relates.","(3) The procedure in approving appropriations for the Congress shall strictly follow the procedure for approving appropriations for other departments and agencies.","(4) A special appropriations bill shall specify the purpose for which it is intended, and shall be supported by funds actually available as certified by the National Treasurer, or to be raised by a corresponding revenue proposed therein.","(5) No law shall be passed authorizing any transfer of appropriations; however, the President, the President of the Senate, the Speaker of the House of Representatives, the Chief Justice of the Supreme Court, and the heads of Constitutional Commissions may, by law, be authorized to augment any item in the general appropriations law for their respective offices from savings in other items of their respective appropriations.","(6) Discretionary funds appropriated for particular officials shall be disbursed only for public purposes to be supported by appropriate vouchers and subject to such guidelines as may be prescribed by law.","(7) If, by the end of any fiscal year, the Congress shall have failed to pass the general appropriations bill for the ensuing fiscal year, the general appropriations law for the preceding fiscal year shall be deemed reenacted and shall remain in force and effect until the general appropriations bill is passed by the Congress."]},{name:"Section 26",paragraph:["(1) Every bill passed by the Congress shall embrace only one subject which shall be expressed in the title thereof.","(2) No bill passed by either House shall become a law unless it has passed three readings on separate days, and printed copies thereof in its final form have been distributed to its Members three days before its passage, except when the President certifies to the necessity of its immediate enactment to meet a public calamity or emergency. Upon the last reading of a bill, no amendment thereto shall be allowed, and the vote thereon shall be taken immediately thereafter, and the yeas and nays entered in the Journal."]},{name:"Section 27",paragraph:["(1) Every bill passed by the Congress shall, before it becomes a law, be presented to the President. If he approves the same, he shall sign it; otherwise, he shall veto it and return the same with his objections to the House where it originated, which shall enter the objections at large in its Journal and proceed to reconsider it. If, after such reconsideration, two-thirds of all the Members of such House shall agree to pass the bill, it shall be sent, together with the objections, to the other House by which it shall likewise be reconsidered, and if approved by two-thirds of all the Members of that House, it shall become a law. In all such cases, the votes of each House shall be determined by yeas or nays, and the names of the Members voting for or against shall be entered in its Journal. The President shall communicate his veto of any bill to the House where it originated within thirty days after the date of receipt thereof; otherwise, it shall become a law as if he had signed it.","(2) The President shall have the power to veto any particular item or items in an appropriation, revenue, or tariff bill, but the veto shall not affect the item or items to which he does not object."]},{name:"Section 28",paragraph:["(1) The rule of taxation shall be uniform and equitable. The Congress shall evolve a progressive system of taxation.","(2) The Congress may, by law, authorize the President to fix within specified limits, and subject to such limitations and restrictions as it may impose, tariff rates, import and export quotas, tonnage and wharfage dues, and other duties or imposts within the framework of the national development program of the Government.","(3) Charitable institutions, churches and parsonages or convents appurtenant thereto, mosques, non-profit cemeteries, and all lands, buildings, and improvements, actually, directly, and exclusively used for religious, charitable, or educational purposes shall be exempt from taxation.","(4) No law granting any tax exemption shall be passed without the concurrence of a majority of all the Members of the Congress."]},{name:"Section 29",paragraph:["(1) No money shall be paid out of the Treasury except in pursuance of an appropriation made by law.","(2) No public money or property shall be appropriated, applied, paid, or employed, directly or indirectly, for the use, benefit, or support of any sect, church, denomination, sectarian institution, or system of religion, or of any priest, preacher, minister, or other religious teacher, or dignitary as such, except when such priest, preacher, minister, or dignitary is assigned to the armed forces, or to any penal institution, or government orphanage or leprosarium.","(3) All money collected on any tax levied for a special purpose shall be treated as a special fund and paid out for such purpose only. If the purpose for which a special fund was created has been fulfilled or abandoned, the balance, if any, shall be transferred to the general funds of the Government."]},{name:"Section 30",paragraph:"No law shall be passed increasing the appellate jurisdiction of the Supreme Court as provided in this Constitution without its advice and concurrence."},{name:"Section 31",paragraph:"No law granting a title of royalty or nobility shall be enacted."},{name:"Section 32",paragraph:"The Congress shall, as early as possible, provide for a system of initiative and referendum, and the exceptions therefrom, whereby the people can directly propose and enact laws or approve or reject any act or law or part thereof passed by the Congress or local legislative body after the registration of a petition therefor signed by at least ten per centum of the total number of registered voters, of which every legislative district must be represented by at least three per centum of the registered voters thereof."}]}],Sfe=()=>{const n=Pt(),{selectedWord:e,definition:t,tooltipPosition:i,handleTextSelection:r}=bn(),[s,o]=V.useState(!1);V.useEffect(()=>{const u=()=>{window.scrollY>200?o(!0):o(!1)};return window.addEventListener("scroll",u),()=>window.removeEventListener("scroll",u)},[]);const a=()=>{window.scrollTo({top:0,behavior:"smooth"})},l=()=>{n("/articleSeven")},c=()=>{n("/articleFive")};return h.jsxs("div",{className:"text-spacing-3 leading-relaxed tracking-wide",children:[h.jsx(vn,{children:h.jsxs("div",{children:[bfe.map(u=>h.jsxs("div",{className:"my-5",children:[h.jsx("h5",{className:W.paragraphSubText,children:u.subtitle}),h.jsx("h4",{className:`${W.headText} mb-10`,children:u.title}),h.jsx("div",{children:u.sections.map((p,m)=>h.jsxs("div",{className:"my-4",children:[h.jsx("h6",{className:W.paragraphSubText,children:p.name}),h.jsx("p",{onMouseUp:r,className:W.paragraphSubTextLower,children:p.paragraph})]},m))})]},u.id)),e&&h.jsxs("div",{className:"absolute text-left bg-white p-4 shadow-lg rounded-lg max-w-xs text-black",style:{left:i.left,top:i.top,zIndex:100},children:[h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsx("p",{className:W.dictionaryText,children:e}),h.jsx("i",{className:"fas fa-volume-up ml-5 text-gray-600"})]}),h.jsx("hr",{className:"border-2 mb-2"}),h.jsx("p",{children:t})]}),h.jsxs("div",{className:"mt-10 text-center flex justify-between",children:[h.jsx("button",{onClick:c,className:"px-6 py-2 border justify-end text-white rounded-lg hover:bg-gray-500",children:"Previous Article"}),h.jsx("button",{onClick:l,className:"px-6 py-2 border justify-end text-white rounded-lg hover:bg-gray-500",children:"Next Article"})]})]})}),s&&h.jsx("button",{onClick:a,className:"fixed bottom-6 right-6 w-12 h-12 bg-gray-600 text-white rounded-full shadow-lg flex items-center justify-center hover:bg-gray-800 transition-all duration-300",children:h.jsx("i",{className:"fas fa-arrow-up"})})]})},Tfe=Mt(Sfe),Efe=[{id:"executive_department",title:"Executive Department",subtitle:"ARTICLE VII",sections:[{name:"Section 1",paragraph:"The executive power shall be vested in the President of the Philippines."},{name:"Section 2",paragraph:"No person may be elected President unless he is a natural-born citizen of the Philippines, a registered voter, able to read and write, at least forty years of age on the day of the election, and a resident of the Philippines for at least ten years immediately preceding such election."},{name:"Section 3",paragraph:"There shall be a Vice-President who shall have the same qualifications and term of office and be elected with and in the same manner as the President. He may be removed from office in the same manner as the President."},{name:"Section 3",paragraph:["There shall be a Vice-President who shall have the same qualifications and term of office and be elected with and in the same manner as the President. He may be removed from office in the same manner as the President.","The Vice-President may be appointed as a Member of the Cabinet. Such appointment requires no confirmation."]},{name:"Section 4",paragraph:["The President and the Vice-President shall be elected by direct vote of the people for a term of six years which shall begin at noon on the thirtieth day of June next following the day of the election and shall end at noon of the same date six years thereafter. The President shall not be eligible for any reelection. No person who has succeeded as President and has served as such for more than four years shall be qualified for election to the same office at any time.","No Vice-President shall serve for more than two consecutive terms. Voluntary renunciation of the office for any length of time shall not be considered as an interruption in the continuity of the service for the full term for which he was elected.","No Vice-President shall serve for more than two consecutive terms. Voluntary renunciation of the office for any length of time shall not be considered as an interruption in the continuity of the service for the full term for which he was elected.","The returns of every election for President and Vice-President, duly certified by the board of canvassers of each province or city, shall be transmitted to the Congress, directed to the President of the Senate. Upon receipt of the certificates of canvass, the President of the Senate shall, not later than thirty days after the day of the election, open all certificates in the presence of the Senate and the House of Representatives in joint public session, and the Congress, upon determination of the authenticity and due execution thereof in the manner provided by law, canvass the votes.","The returns of every election for President and Vice-President, duly certified by the board of canvassers of each province or city, shall be transmitted to the Congress, directed to the President of the Senate. Upon receipt of the certificates of canvass, the President of the Senate shall, not later than thirty days after the day of the election, open all certificates in the presence of the Senate and the House of Representatives in joint public session, and the Congress, upon determination of the authenticity and due execution thereof in the manner provided by law, canvass the votes.","The Congress shall promulgate its rules for the canvassing of the certificates.","The Supreme Court, sitting en banc, shall be the sole judge of all contests relating to the election, returns, and qualifications of the President or Vice- President, and may promulgate its rules for the purpose."]},{name:"Section 5",paragraph:["Before they enter on the execution of their office, the President, the Vice-President, or the Acting President shall take the following oath or affirmation:","I do solemnly swear (or affirm) that I will faithfully and conscientiously fulfill my duties as President (or Vice-President or Acting President) of the Philippines, preserve and defend its Constitution, execute its laws, do justice to every man, and consecrate myself to the service of the Nation. So help me God. (In case of affirmation, last sentence will be omitted.)"]},{name:"Section 6",paragraph:"The President shall have an official residence. The salaries of the President and Vice-President shall be determined by law and shall not be decreased during their tenure. No increase in said compensation shall take effect until after the expiration of the term of the incumbent during which such increase was approved. They shall not receive during their tenure any other emolument from the Government or any other source."},{name:"Section 7",paragraph:["The President-elect and the Vice-President-elect shall assume office at the beginning of their terms.","If the President-elect fails to qualify, the Vice-President-elect shall act as President until the President-elect shall have qualified.","If a President shall not have been chosen, the Vice-President-elect shall act as President until a President shall have been chosen and qualified.","If a President shall not have been chosen, the Vice-President-elect shall act as President until a President shall have been chosen and qualified.","Where no President and Vice-President shall have been chosen or shall have qualified, or where both shall have died or become permanently disabled, the President of the Senate or, in case of his inability, the Speaker of the House of Representatives shall act as President until a President or a Vice-President shall have been chosen and qualified.","The Congress shall, by law, provide for the manner in which one who is to act as President shall be selected until a President or a Vice-President shall have qualified, in case of death, permanent disability, or inability of the officials mentioned in the next preceding paragraph."]},{name:"Section 8",paragraph:["In case of death, permanent disability, removal from office, or resignation of the President, the Vice-President shall become the President to serve the unexpired term. In case of death, permanent disability, removal from office, or resignation of both the President and Vice-President, the President of the Senate or, in case of his inability, the Speaker of the House of Representatives, shall then act as President until the President or Vice-President shall have been elected and qualified.","The Congress shall, by law, provide who shall serve as President in case of death, permanent disability, or resignation of the Acting President. He shall serve until the President or the Vice-President shall have been elected and qualified, and be subject to the same restrictions of powers and disqualifications as the Acting President."]},{name:"Section 9",paragraph:"Whenever there is a vacancy in the Office of the Vice-President during the term for which he was elected, the President shall nominate a Vice-President from among the Members of the Senate and the House of Representatives who shall assume office upon confirmation by a majority vote of all the Members of both Houses of the Congress, voting separately."},{name:"Section 10",paragraph:"The Congress shall, at ten oclock in the morning of the third day after the vacancy in the offices of the President and Vice-President occurs, convene in accordance with its rules without need of a call and within seven days enact a law calling for a special election to elect a President and a Vice-President to be held not earlier than forty-five days nor later than sixty days from the time of such call. The bill calling such special election shall be deemed certified under paragraph 2, Section 26, Article VI of this Constitution and shall become law upon its approval on third reading by the Congress. Appropriations for the special election shall be charged against any current appropriations and shall be exempt from the requirements of paragraph 4, Section 25, Article VI of this Constitution. The convening of the Congress cannot be suspended nor the special election postponed. No special election shall be called if the vacancy occurs within eighteen months before the date of the next presidential election."},{name:"Section 11",paragraph:["Whenever the President transmits to the President of the Senate and the Speaker of the House of Representatives his written declaration that he is unable to discharge the powers and duties of his office, and until he transmits to them a written declaration to the contrary, such powers and duties shall be discharged by the Vice-President as Acting President.","Whenever a majority of all the Members of the Cabinet transmit to the President of the Senate and to the Speaker of the House of Representatives their written declaration that the President is unable to discharge the powers and duties of his office, the Vice-President shall immediately assume the powers and duties of the office as Acting President.","Thereafter, when the President transmits to the President of the Senate and to the Speaker of the House of Representatives his written declaration that no inability exists, he shall reassume the powers and duties of his office. Meanwhile, should a majority of all the Members of the Cabinet transmit within five days to the President of the Senate and to the Speaker of the House of Representatives their written declaration that the President is unable to discharge the powers and duties of his office, the Congress shall decide the issue. For that purpose, the Congress shall convene, if it is not in session, within forty-eight hours, in accordance with its rules and without need of call.","If the Congress, within ten days after receipt of the last written declaration, or, if not in session, within twelve days after it is required to assemble, determines by a two-thirds vote of both Houses, voting separately, that the President is unable to discharge the powers and duties of his office, the Vice-President shall act as the President; otherwise, the President shall continue exercising the powers and duties of his office."]},{name:"Section 12",paragraph:"In case of serious illness of the President, the public shall be informed of the state of his health. The Members of the Cabinet in charge of national security and foreign relations and the Chief of Staff of the Armed Forces of the Philippines, shall not be denied access to the President during such illness."},{name:"Section 8",paragraph:["The President, Vice-President, the Members of the Cabinet, and their deputies or assistants shall not, unless otherwise provided in this Constitution, hold any other office or employment during their tenure. They shall not, during said tenure, directly or indirectly, practice any other profession, participate in any business, or be financially interested in any contract with, or in any franchise, or special privilege granted by the Government or any subdivision, agency, or instrumentality thereof, including government-owned or controlled corporations or their subsidiaries. They shall strictly avoid conflict of interest in the conduct of their office.","The spouse and relatives by consanguinity or affinity within the fourth civil degree of the President shall not during his tenure be appointed as members of the Constitutional Commissions, or the Office of the Ombudsman, or as Secretaries, Undersecretaries, chairmen or heads of bureaus or offices, including government-owned or controlled corporations and their subsidiaries."]},{name:"Section 14",paragraph:"Appointments extended by an Acting President shall remain effective, unless revoked by the elected President within ninety days from his assumption or reassumption of office."},{name:"Section 15",paragraph:"Two months immediately before the next presidential elections and up to the end of his term, a President or Acting President shall not make appointments, except temporary appointments to executive positions when continued vacancies therein will prejudice public service or endanger public safety."},{name:"Section 16",paragraph:["The President shall nominate and, with the consent of the Commission on Appointments, appoint the heads of the executive departments, ambassadors, other public ministers and consuls, or officers of the armed forces from the rank of colonel or naval captain, and other officers whose appointments are vested in him in this Constitution. He shall also appoint all other officers of the Government whose appointments are not otherwise provided for by law, and those whom he may be authorized by law to appoint. The Congress may, by law, vest the appointment of other officers lower in rank in the President alone, in the courts, or in the heads of departments, agencies, commissions, or boards.","The President shall have the power to make appointments during the recess of the Congress, whether voluntary or compulsory, but such appointments shall be effective only until after disapproval by the Commission on Appointments or until the next adjournment of the Congress."]},{name:"Section 17",paragraph:"The President shall have control of all the executive departments, bureaus, and offices. He shall ensure that the laws be faithfully executed."},{name:"Section 18",paragraph:["The President shall be the Commander-in-Chief of all armed forces of the Philippines and whenever it becomes necessary, he may call out such armed forces to prevent or suppress lawless violence, invasion or rebellion. In case of invasion or rebellion, when the public safety requires it, he may, for a period not exceeding sixty days, suspend the privilege of the writ of habeas corpus or place the Philippines or any part thereof under martial law. Within forty-eight hours from the proclamation of martial law or the suspension of the privilege of the writ of habeas corpus, the President shall submit a report in person or in writing to the Congress.","The Congress, voting jointly, by a vote of at least a majority of all its Members in regular or special session, may revoke such proclamation or suspension, which revocation shall not be set aside by the President. Upon the initiative of the President, the Congress may, in the same manner, extend such proclamation or suspension for a period to be determined by the Congress, if the invasion or rebellion shall persist and public safety requires it.","The Congress, if not in session, shall, within twenty-four hours following such proclamation or suspension, convene in accordance with its rules without any need of a call.","The Supreme Court may review, in an appropriate proceeding filed by any citizen, the sufficiency of the factual basis of the proclamation of martial law or the suspension of the privilege of the writ or the extension thereof, and must promulgate its decision thereon within thirty days from its filing.","A state of martial law does not suspend the operation of the Constitution, nor supplant the functioning of the civil courts or legislative assemblies, nor authorize the conferment of jurisdiction on military courts and agencies over civilians where civil courts are able to function, nor automatically suspend the privilege of the writ.","The suspension of the privilege of the writ shall apply only to persons judicially charged for rebellion or offenses inherent in or directly connected with the invasion.","During the suspension of the privilege of the writ, any person thus arrested or detained shall be judicially charged within three days, otherwise he shall be released."]},{name:"Section 19",paragraph:["Except in cases of impeachment, or as otherwise provided in this Constitution, the President may grant reprieves, commutations and pardons, and remit fines and forfeitures, after conviction by final judgment.","He shall also have the power to grant amnesty with the concurrence of a majority of all the Members of the Congress."]},{name:"Section 20",paragraph:"The President may contract or guarantee foreign loans on behalf of the Republic of the Philippines with the prior concurrence of the Monetary Board, and subject to such limitations as may be provided by law. The Monetary Board shall, within thirty days from the end of every quarter of the calendar year, submit to the Congress a complete report of its decisions on applications for loans to be contracted or guaranteed by the Government or government-owned and controlled corporations which would have the effect of increasing the foreign debt, and containing other matters as may be provided by law."},{name:"Section 21",paragraph:"No treaty or international agreement shall be valid and effective unless concurred in by at least two-thirds of all the Members of the Senate."},{name:"Section 22",paragraph:"The President shall submit to the Congress within thirty days from the opening of every regular session, as the basis of the general appropriations bill, a budget of expenditures and sources of financing, including receipts from existing and proposed revenue measures."},{name:"Section 23",paragraph:"The President shall address the Congress at the opening of its regular session. He may also appear before it at any other time."}]}],Cfe=()=>{const n=Pt(),{selectedWord:e,definition:t,tooltipPosition:i,handleTextSelection:r}=bn(),[s,o]=V.useState(!1);V.useEffect(()=>{const u=()=>{window.scrollY>200?o(!0):o(!1)};return window.addEventListener("scroll",u),()=>window.removeEventListener("scroll",u)},[]);const a=()=>{window.scrollTo({top:0,behavior:"smooth"})},l=()=>{n("/articleEight")},c=()=>{n("/articleSix")};return h.jsxs("div",{className:"text-spacing-3 leading-relaxed tracking-wide",children:[h.jsx(vn,{children:h.jsxs("div",{children:[Efe.map(u=>h.jsxs("div",{className:"my-5",children:[h.jsx("h5",{className:W.paragraphSubText,children:u.subtitle}),h.jsx("h4",{className:`${W.headText} mb-10`,children:u.title}),h.jsx("div",{children:u.sections.map((p,m)=>h.jsxs("div",{className:"my-4",children:[h.jsx("h6",{className:W.paragraphSubText,children:p.name}),h.jsx("p",{onMouseUp:r,className:W.paragraphSubTextLower,children:p.paragraph})]},m))})]},u.id)),e&&h.jsxs("div",{className:"absolute text-left bg-white p-4 shadow-lg rounded-lg max-w-xs text-black",style:{left:i.left,top:i.top,zIndex:100},children:[h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsx("p",{className:W.dictionaryText,children:e}),h.jsx("i",{className:"fas fa-volume-up ml-5 text-gray-600"})]}),h.jsx("hr",{className:"border-2 mb-2"}),h.jsx("p",{children:t})]}),h.jsxs("div",{className:"mt-10 text-center flex justify-between",children:[h.jsx("button",{onClick:c,className:"px-6 py-2 border justify-end text-white rounded-lg hover:bg-gray-500",children:"Previous Article"}),h.jsx("button",{onClick:l,className:"px-6 py-2 border justify-end text-white rounded-lg hover:bg-gray-500",children:"Next Article"})]})]})}),s&&h.jsx("button",{onClick:a,className:"fixed bottom-6 right-6 w-12 h-12 bg-gray-600 text-white rounded-full shadow-lg flex items-center justify-center hover:bg-gray-800 transition-all duration-300",children:h.jsx("i",{className:"fas fa-arrow-up"})})]})},Afe=Mt(Cfe),Mfe=[{id:"judicial_department",title:"Judicial Department",subtitle:"ARTICLE VIII",sections:[{name:"Section 1",paragraph:["The judicial power shall be vested in one Supreme Court and in such lower courts as may be established by law.","Judicial power includes the duty of the courts of justice to settle actual controversies involving rights which are legally demandable and enforceable, and to determine whether or not there has been a grave abuse of discretion amounting to lack or excess of jurisdiction on the part of any branch or instrumentality of the Government."]},{name:"Section 2",paragraph:["The Congress shall have the power to define, prescribe, and apportion the jurisdiction of various courts but may not deprive the Supreme Court of its jurisdiction over cases enumerated in Section 5 hereof.","No law shall be passed reorganizing the Judiciary when it undermines the security of tenure of its Members."]},{name:"Section 3",paragraph:"The Judiciary shall enjoy fiscal autonomy. Appropriations for the Judiciary may not be reduced by the legislature below the amount appropriated for the previous year and, after approval, shall be automatically and regularly released."},{name:"Section 4",paragraph:["(1) The Supreme Court shall be composed of a Chief Justice and fourteen Associate Justices. It may sit en banc or in its discretion, in divisions of three, five, or seven Members. Any vacancy shall be filled within ninety days from the occurrence thereof.","(2) All cases involving the constitutionality of a treaty, international or executive agreement, or law, which shall be heard by the Supreme Court en banc, and all other cases which under the Rules of Court are required to be heard en banc, including those involving the constitutionality, application, or operation of presidential decrees, proclamations, orders, instructions, ordinances, and other regulations, shall be decided with the concurrence of a majority of the Members who actually took part in the deliberations on the issues in the case and voted thereon.","(3) Cases or matters heard by a division shall be decided or resolved with the concurrence of a majority of the Members who actually took part in the deliberations on the issues in the case and voted thereon, and in no case, without the concurrence of at least three of such Members. When the required number is not obtained, the case shall be decided en banc: Provided, that no doctrine or principle of law laid down by the court in a decision rendered en banc or in division may be modified or reversed except by the court sitting en banc."]},{name:"Section 5",paragraph:["The Supreme Court shall have the following powers:","(1) Exercise original jurisdiction over cases affecting ambassadors, other public ministers and consuls, and over petitions for certiorari, prohibition, mandamus, quo warranto, and habeas corpus.","(2) Review, revise, reverse, modify, or affirm on appeal or certiorari, as the law or the Rules of Court may provide, final judgments and orders of lower courts in:","(a) All cases in which the constitutionality or validity of any treaty, international or executive agreement, law, presidential decree, proclamation, order, instruction, ordinance, or regulation is in question.","(b) All cases involving the legality of any tax, impost, assessment, or toll, or any penalty imposed in relation thereto.","(c) All cases in which the jurisdiction of any lower court is in issue.","(d) All criminal cases in which the penalty imposed is reclusion perpetua or higher.","(e) All cases in which only an error or question of law is involved.","(3) Assign temporarily judges of lower courts to other stations as public interest may require. Such temporary assignment shall not exceed six months without the consent of the judge concerned.","(4) Order a change of venue or place of trial to avoid a miscarriage of justice.","(5) Promulgate rules concerning the protection and enforcement of constitutional rights, pleading, practice, and procedure in all courts, the admission to the practice of law, the Integrated Bar, and legal assistance to the underprivileged. Such rules shall provide a simplified and inexpensive procedure for the speedy disposition of cases, shall be uniform for all courts of the same grade, and shall not diminish, increase, or modify substantive rights. Rules of procedure of special courts and quasi-judicial bodies shall remain effective unless disapproved by the Supreme Court.","(6) Appoint all officials and employees of the Judiciary in accordance with the Civil Service Law."]},{name:"Section 6",paragraph:"The Supreme Court shall have administrative supervision over all courts and the personnel thereof."},{name:"Section 7",paragraph:["(1) No person shall be appointed Member of the Supreme Court or any lower collegiate court unless he is a natural-born citizen of the Philippines. A Member of the Supreme Court must be at least forty years of age, and must have been for fifteen years or more a judge of a lower court or engaged in the practice of law in the Philippines.","(2) The Congress shall prescribe the qualifications of judges of lower courts, but no person may be appointed judge thereof unless he is a citizen of the Philippines and a member of the Philippine Bar.","(3) A Member of the Judiciary must be a person of proven competence, integrity, probity, and independence."]},{name:"Section 8",paragraph:["(1) A Judicial and Bar Council is hereby created under the supervision of the Supreme Court composed of the Chief Justice as ex officio Chairman, the Secretary of Justice, and a representative of the Congress as ex officio Members, a representative of the Integrated Bar, a professor of law, a retired Member of the Supreme Court, and a representative of the private sector.","(2) The regular Members of the Council shall be appointed by the President for a term of four years with the consent of the Commission on Appointments. Of the Members first appointed, the representative of the Integrated Bar shall serve for four years, the professor of law for three years, the retired Justice for two years, and the representative of the private sector for one year.","(3) The Clerk of the Supreme Court shall be the Secretary ex officio of the Council and shall keep a record of its proceedings.","(4) The regular Members of the Council shall receive such emoluments as may be determined by the Supreme Court. The Supreme Court shall provide in its annual budget the appropriations for the Council.","(5) The Council shall have the principal function of recommending appointees to the Judiciary. It may exercise such other functions and duties as the Supreme Court may assign to it."]},{name:"Section 9",paragraph:["The Members of the Supreme Court and judges of lower courts shall be appointed by the President from a list of at least three nominees prepared by the Judicial and Bar Council for every vacancy. Such appointments need no confirmation.","For the lower courts, the President shall issue the appointments within ninety days from the submission of the list."]},{name:"Section 10",paragraph:["The salary of the Chief Justice and of the Associate Justices of the Supreme Court, and of judges of lower courts shall be fixed by law. During their continuance in office, their salary shall not be decreased."]},{name:"Section 11",paragraph:["The Members of the Supreme Court and judges of lower courts shall hold office during good behavior until they reached the age of seventy years or become incapacitated to discharge the duties of their office. The Supreme Court en banc shall have the power to discipline judges of lower courts, or order their dismissal by a vote of a majority of the Members who actually took part in the deliberations on the issues in the case and voted thereon."]},{name:"Section 12",paragraph:["The Members of the Supreme Court and of other courts established by law shall not be designated to any agency performing quasi-judicial or administrative functions."]},{name:"Section 13",paragraph:["The conclusions of the Supreme Court in any case submitted to it for decision en banc or in division shall be reached in consultation before the case is assigned to a Member for the writing of the opinion of the Court. A certification to this effect signed by the Chief Justice shall be issued and a copy thereof attached to the record of the case and served upon the parties. Any Member who took no part, or dissented, or abstained from a decision or resolution must state the reason therefor. The same requirements shall be observed by all lower collegiate courts."]},{name:"Section 14",paragraph:["No decision shall be rendered by any court without expressing therein clearly and distinctly the facts and the law on which it is based.","No petition for review or motion for reconsideration of a decision of the court shall be refused due course or denied without stating the legal basis therefor."]},{name:"Section 15",paragraph:[" (1) All cases or matters filed after the effectivity of this Constitution must be decided or resolved within twenty-four months from date of submission for the Supreme Court, and, unless reduced by the Supreme Court, twelve months for all lower collegiate courts, and three months for all other lower courts.","(2) A case or matter shall be deemed submitted for decision or resolution upon the filing of the last pending, brief, or memorandum required by the Rules of Court or by the court itself.","(3) Upon the expiration of the corresponding period, a certification to this effect signed by the Chief Justice or the presiding judge shall forthwith be issued and a copy thereof attached to the record of the case or matter, and served upon the parties. The certification shall state why a decision or resolution has not been rendered or issued within said period.","(4) Despite the expiration of the applicable mandatory period, the court, without prejudice to such responsibility as may have been incurred in consequence thereof, shall decide or resolve the case or matter submitted thereto for determination, without further delay."]},{name:"Section 16",paragraph:["The Supreme Court shall, within thirty days from the opening of each regular session of the Congress, submit to the President and the Congress an annual report on the operations and activities of the Judiciary."]}]}],Ife=()=>{const n=Pt(),{selectedWord:e,definition:t,tooltipPosition:i,handleTextSelection:r}=bn(),[s,o]=V.useState(!1);V.useEffect(()=>{const u=()=>{window.scrollY>200?o(!0):o(!1)};return window.addEventListener("scroll",u),()=>window.removeEventListener("scroll",u)},[]);const a=()=>{window.scrollTo({top:0,behavior:"smooth"})},l=()=>{n("/articleNine")},c=()=>{n("/articleSeven")};return h.jsxs("div",{className:"text-spacing-3 leading-relaxed tracking-wide",children:[h.jsx(vn,{children:h.jsxs("div",{children:[Mfe.map(u=>h.jsxs("div",{className:"my-5",children:[h.jsx("h5",{className:W.paragraphSubText,children:u.subtitle}),h.jsx("h4",{className:`${W.headText} mb-10`,children:u.title}),h.jsx("div",{children:u.sections.map((p,m)=>h.jsxs("div",{className:"my-4",children:[h.jsx("h6",{className:W.paragraphSubText,children:p.name}),h.jsx("p",{className:W.paragraphSubTextLower,onMouseUp:r,children:p.paragraph})]},m))})]},u.id)),e&&h.jsxs("div",{className:"absolute text-left bg-white p-4 shadow-lg rounded-lg max-w-xs text-black",style:{left:i.left,top:i.top,zIndex:100},children:[h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsx("p",{className:W.dictionaryText,children:e}),h.jsx("i",{className:"fas fa-volume-up ml-5 text-gray-600"})]}),h.jsx("hr",{className:"border-2 mb-2"}),h.jsx("p",{children:t})]}),h.jsxs("div",{className:"mt-10 text-center flex justify-between",children:[h.jsx("button",{onClick:c,className:"px-6 py-2 border justify-end text-white rounded-lg hover:bg-gray-500",children:"Previous Article"}),h.jsx("button",{onClick:l,className:"px-6 py-2 border justify-end text-white rounded-lg hover:bg-gray-500",children:"Next Article"})]})]})}),s&&h.jsx("button",{onClick:a,className:"fixed bottom-6 right-6 w-12 h-12 bg-gray-600 text-white rounded-full shadow-lg flex items-center justify-center hover:bg-gray-800 transition-all duration-300",children:h.jsx("i",{className:"fas fa-arrow-up"})})]})},Pfe=Mt(Ife),Rfe=[{id:"constitutional_commissions",title:"Constitutional Commissions",subtitle:"ARTICLE IX - Common Provisions",sections:[{name:"Section 1",paragraph:"The Constitutional Commissions, which shall be independent, are the Civil Service Commission, the Commission on Elections, and the Commission on Audit."},{name:"Section 2",paragraph:"No Member of a Constitutional Commission shall, during his tenure, hold any other office or employment. Neither shall he engage in the practice of any profession or in the active management or control of any business which in any way be affected by the functions of his office, nor shall he be financially interested, directly or indirectly, in any contract with, or in any franchise or privilege granted by the Government, any of its subdivisions, agencies, or instrumentalities, including government-owned or controlled corporations or their subsidiaries."},{name:"Section 3",paragraph:"The salary of the Chairman and the Commissioners shall be fixed by law and shall not be decreased during their tenure."},{name:"Section 4",paragraph:"The Constitutional Commissions shall appoint their officials and employees in accordance with law."},{name:"Section 5",paragraph:"The Commission shall enjoy fiscal autonomy. Their approved annual appropriations shall be automatically and regularly released."},{name:"Section 6",paragraph:"Each Commission en banc may promulgate its own rules concerning pleadings and practice before it or before any of its offices. Such rules however shall not diminish, increase, or modify substantive rights."},{name:"Section 7",paragraph:"Each Commission shall decide by a majority vote of all its Members any case or matter brought before it within sixty days from the date of its submission for decision or resolution. A case or matter is deemed submitted for decision or resolution upon the filing of the last pleading, brief, or memorandum required by the rules of the Commission or by the Commission itself. Unless otherwise provided by this Constitution or by law, any decision, order, or ruling of each Commission may be brought to the Supreme Court on certiorari by the aggrieved party within thirty days from receipt of a copy thereof."},{name:"Section 8",paragraph:"Each Commission shall perform such other functions as may be provided by law."}]}],Nfe=[{id:"civil_service",title:"The Civil Service Commission",subtitle:"ARTICLE IX",sections:[{name:"Section 1",paragraph:["(1) The Civil Service shall be administered by the Civil Service Commission composed of a Chairman and two Commissioners who shall be natural-born citizens of the Philippines and, at the time of their appointment, at least thirty-five years of age, with proven capacity for public administration, and must not have been candidates for any elective position in the elections immediately preceding their appointment.","(2) The Chairman and the Commissioners shall be appointed by the President with the consent of the Commission on Appointments for a term of seven years without reappointment. Of those first appointed, the Chairman shall hold office for seven years, a Commissioner for five years, and another Commissioner for three years, without reappointment. Appointment to any vacancy shall be only for the unexpired term of the predecessor. In no case shall any Member be appointed or designated in a temporary or acting capacity."]},{name:"Section 2",paragraph:["(1) The civil service embraces all branches, subdivisions, instrumentalities, and agencies of the Government, including government-owned or controlled corporations with original charters.","(2) Appointments in the civil service shall be made only according to merit and fitness to be determined, as far as practicable, and, except to positions which are policy-determining, primarily confidential, or highly technical, by competitive examination.","(3) No officer or employee of the civil service shall be removed or suspended except for cause provided by law.","(4) No officer or employee in the civil service shall engage, directly or indirectly, in any electioneering or partisan political campaign.","(5) The right to self-organization shall not be denied to government employees.","(6) Temporary employees of the Government shall be given such protection as may be provided by law."]},{name:"Section 3",paragraph:["The Civil Service Commission, as the central personnel agency of the Government, shall establish a career service and adopt measures to promote morale, efficiency, integrity, responsiveness, progressiveness, and courtesy in the civil service.","It shall strengthen the merit and rewards system, integrate all human resources development programs for all levels and ranks, and institutionalize a management climate conducive to public accountability.","It shall submit to the President and the Congress an annual report on its personnel programs."]},{name:"Section 4",paragraph:["All public officers and employees shall take an oath or affirmation to uphold and defend this Constitution."]},{name:"Section 5",paragraph:["The Congress shall provide for the standardization of compensation of government officials and employees, including those in government-owned or controlled corporations with original charters, taking into account the nature of the responsibilities pertaining to, and the qualifications required for their positions."]},{name:"Section 6",paragraph:["No candidate who has lost in any election shall, within one year after such election, be appointed to any office in the Government or any government-owned or controlled corporations or in any of their subsidiaries."]},{name:"Section 7",paragraph:["No elective official shall be eligible for appointment or designation in any capacity to any public office or position during his tenure.","Unless otherwise allowed by law or by the primary functions of his position, no appointive official shall hold any other office or employment in the Government or any subdivision, agency or instrumentality thereof, including government-owned or controlled corporations or their subsidiaries."]},{name:"Section 8",paragraph:["No elective or appointive public officer or employee shall receive additional, double, or indirect compensation, unless specifically authorized by law, nor accept without the consent of the Congress, any present, emolument, office, or title of any kind from any foreign government.","Pensions or gratuities shall not be considered as additional, double, or indirect compensation."]}]}],Dfe=[{id:"commission_on_elections",title:"The Commission on Elections",subtitle:"ARTICLE IX - C",sections:[{name:"Section 1",paragraph:["(1) There shall be a Commission on Elections composed of a Chairman and six Commissioners who shall be natural-born citizens of the Philippines and, at the time of their appointment, at least thirty-five years of age, holders of a college degree, and must not have been candidates for any elective position in the immediately preceding elections. However, a majority thereof, including the Chairman, shall be Members of the Philippine Bar who have been engaged in the practice of law for at least ten years.","(2) The Chairman and the Commissioners shall be appointed by the President with the consent of the Commission on Appointments for a term of seven years without reappointment. Of those first appointed, three Members shall hold office for seven years, two Members for five years, and the last Members for three years, without reappointment. Appointment to any vacancy shall be only for the unexpired term of the predecessor. In no case shall any Member be appointed or designated in a temporary or acting capacity."]},{name:"Section 2",paragraph:["(1) Enforce and administer all laws and regulations relative to the conduct of an election, plebiscite, initiative, referendum, and recall.","(2) Exercise exclusive original jurisdiction over all contests relating to the elections, returns, and qualifications of all elective regional, provincial, and city officials, and appellate jurisdiction over all contests involving elective municipal officials decided by trial courts of general jurisdiction, or involving elective barangay officials decided by trial courts of limited jurisdiction.","Decisions, final orders, or rulings of the Commission on election contests involving elective municipal and barangay offices shall be final, executory, and not appealable.","(3) Decide, except those involving the right to vote, all questions affecting elections, including determination of the number and location of polling places, appointment of election officials and inspectors, and registration of voters.","(4) Deputize, with the concurrence of the President, law enforcement agencies and instrumentalities of the Government, including the Armed Forces of the Philippines, for the exclusive purpose of ensuring free, orderly, honest, peaceful, and credible elections.","(5) Register, after sufficient publication, political parties, organizations, or coalitions which, in addition to other requirements, must present their platform or program of government; and accredit citizens arms of the Commission on Elections. Religious denominations and sects shall not be registered. Those which seek to achieve their goals through violence or unlawful means, or refuse to uphold and adhere to this Constitution, or which are supported by any foreign government shall likewise be refused registration.","Financial contributions from foreign governments and their agencies to political parties, organizations, coalitions, or candidates related to elections constitute interference in national affairs, and, when accepted, shall be an additional ground for the cancellation of their registration with the Commission, in addition to other penalties that may be prescribed by law.","(6) File, upon a verified complaint, or on its own initiative, petitions in court for inclusion or exclusion of voters; investigate and, where appropriate, prosecute cases of violations of election laws, including acts or omissions constituting election frauds, offenses, and malpractices.","(7) Recommend to the Congress effective measures to minimize election spending, including limitation of places where propaganda materials shall be posted, and to prevent and penalize all forms of election frauds, offenses, malpractices, and nuisance candidacies.","(8) Recommend to the President the removal of any officer or employee it has deputized, or the imposition of any other disciplinary action, for violation or disregard of, or disobedience to its directive, order, or decision.","(9) Submit to the President and the Congress a comprehensive report on the conduct of each election, plebiscite, initiative, referendum, or recall."]},{name:"Section 3",paragraph:["The Commission on Elections may sit en banc or in two divisions, and shall promulgate its rules of procedure in order to expedite disposition of election cases, including pre-proclamation controversies. All such election cases shall be heard and decided in division, provided that motions for reconsideration of decisions shall be decided by the Commission en banc."]},{name:"Section 4",paragraph:["The Commission may, during the election period, supervise or regulate the enjoyment or utilization of all franchises or permits for the operation of transportation and other public utilities, media of communication or information, all grants, special privileges, or concessions granted by the Government or any subdivision, agency, or instrumentality thereof, including any government-owned or controlled corporation or its subsidiary.","Such supervision or regulation shall aim to ensure equal opportunity, time, and space, and the right to reply, including reasonable, equal rates therefor, for public information campaigns and forums among candidates in connection with the objective of holding free, orderly, honest, peaceful, and credible elections."]},{name:"Section 5",paragraph:["No pardon, amnesty, parole, or suspension of sentence for violation of election laws, rules, and regulations shall be granted by the President without the favorable recommendation of the Commission."]},{name:"Section 6",paragraph:["A free and open party system shall be allowed to evolve according to the free choice of the people, subject to the provisions of this Article."]},{name:"Section 7",paragraph:["No votes cast in favor of a political party, organization, or coalition shall be valid, except for those registered under the party-list system as provided in this Constitution."]},{name:"Section 8",paragraph:["Political parties, or organizations or coalitions registered under the party-list system, shall not be represented in the voters registration boards, boards of election inspectors, boards of canvassers, or other similar bodies.","However, they shall be entitled to appoint poll watchers in accordance with law."]},{name:"Section 9",paragraph:["Unless otherwise fixed by the Commission in special cases, the election period shall commence ninety days before the day of the election and shall end thirty days after."]},{name:"Section 10",paragraph:["Bona fide candidates for any public office shall be free from any form of harassment and discrimination."]},{name:"Section 11",paragraph:["Funds certified by the Commission as necessary to defray the expenses for holding regular and special elections, plebiscites, initiatives, referenda, and recalls, shall be provided in the regular or special appropriations and, once approved, shall be released automatically upon certification by the Chairman of the Commission."]}]}],Lfe=[{id:"commission_on_audit",title:"Commission on Audit",subtitle:"ARTICLE IX - D",sections:[{name:"Section 1",paragraph:["(1) There shall be a Commission on Audit composed of a Chairman and two Commissioners, who shall be natural-born citizens of the Philippines and, at the time of their appointment, at least thirty-five years of age, certified public accountants with not less than ten years of auditing experience, or members of the Philippine Bar who have been engaged in the practice of law for at least ten years, and must not have been candidates for any elective position in the elections immediately preceding their appointment. At no time shall all Members of the Commission belong to the same profession.","(2) The Chairman and the Commissioners shall be appointed by the President with the consent of the Commission on Appointments for a term of seven years without reappointment. Of those first appointed, the Chairman shall hold office for seven years, one Commissioner for five years, and the other Commissioner for three years, without reappointment. Appointment to any vacancy shall be only for the unexpired portion of the term of the predecessor. In no case shall any Member be appointed or designated in a temporary or acting capacity."]},{name:"Section 2",paragraph:["(1) The Commission on Audit shall have the power, authority, and duty to examine, audit, and settle all accounts pertaining to the revenue and receipts of, and expenditures or uses of funds and property, owned or held in trust by, or pertaining to, the Government, or any of its subdivisions, agencies, or instrumentalities, including government-owned or controlled corporations with original charters, and on a post-audit basis: (a) constitutional bodies, commissions and offices that have been granted fiscal autonomy under this Constitution; (b) autonomous state colleges and universities; (c) other government-owned or controlled corporations and their subsidiaries; and (d) such non-governmental entities receiving subsidy or equity, directly or indirectly, from or through the Government, which are required by law or the granting institution to submit to such audit as a condition of subsidy or equity.","However, where the internal control system of the audited agencies is inadequate, the Commission may adopt such measures, including temporary or special pre-audit, as are necessary and appropriate to correct the deficiencies. It shall keep the general accounts of the Government and, for such period as may be provided by law, preserve the vouchers and other supporting papers pertaining thereto.","(2) The Commission shall have exclusive authority, subject to the limitations in this Article, to define the scope of its audit and examination, establish the techniques and methods required therefor, and promulgate accounting and auditing rules and regulations, including those for the prevention and disallowance of irregular, unnecessary, excessive, extravagant, or unconscionable expenditures, or uses of government funds and properties."]},{name:"Section 3",paragraph:["No law shall be passed exempting any entity of the Government or its subsidiary in any guise whatever, or any investment of public funds, from the jurisdiction of the Commission on Audit."]},{name:"Section 4",paragraph:["The Commission shall submit to the President and the Congress, within the time fixed by law, an annual report covering the financial condition and operation of the Government, its subdivisions, agencies, and instrumentalities, including government-owned or controlled corporations, and non-governmental entities subject to its audit, and recommend measures necessary to improve their effectiveness and efficiency. It shall submit such other reports as may be required by law."]}]}],kfe=()=>{const n=Pt(),{selectedWord:e,definition:t,tooltipPosition:i,handleTextSelection:r}=bn(),[s,o]=V.useState(!1);V.useEffect(()=>{const u=()=>{window.scrollY>200?o(!0):o(!1)};return window.addEventListener("scroll",u),()=>window.removeEventListener("scroll",u)},[]);const a=()=>{window.scrollTo({top:0,behavior:"smooth"})},l=()=>{n("/articleTen")},c=()=>{n("/articleEight")};return h.jsxs("div",{className:"text-spacing-3 leading-relaxed tracking-wide",children:[h.jsx(vn,{children:h.jsxs("div",{children:[Rfe.map(u=>h.jsxs("div",{className:"my-5",children:[h.jsx("h5",{className:W.paragraphSubText,children:u.subtitle}),h.jsx("h4",{className:`${W.headText} mb-10`,children:u.title}),h.jsx("div",{children:u.sections.map((p,m)=>h.jsxs("div",{className:"my-4",children:[h.jsx("h6",{className:W.paragraphSubText,children:p.name}),h.jsx("p",{onMouseUp:r,className:W.paragraphSubTextLower,children:p.paragraph})]},m))})]},u.id)),h.jsx("br",{}),h.jsx("br",{}),Nfe.map(u=>h.jsxs("div",{className:"my-5",children:[h.jsx("h5",{className:W.paragraphSubText,children:u.subtitle}),h.jsx("h5",{className:W.paragraphHeadText,children:u.title}),h.jsx("div",{children:u.sections.map((p,m)=>h.jsxs("div",{className:"my-4",children:[h.jsx("h6",{className:W.paragraphSubText,children:p.name}),h.jsx("p",{onMouseUp:r,className:W.paragraphSubTextLower,children:p.paragraph})]},m))})]},u.id)),h.jsx("br",{}),h.jsx("br",{}),Dfe.map(u=>h.jsxs("div",{className:"my-5",children:[h.jsx("h5",{className:W.paragraphSubText,children:u.subtitle}),h.jsx("h5",{className:W.paragraphHeadText,children:u.title}),h.jsx("div",{children:u.sections.map((p,m)=>h.jsxs("div",{className:"my-4",children:[h.jsx("h6",{className:W.paragraphSubText,children:p.name}),h.jsx("p",{onMouseUp:r,className:W.paragraphSubTextLower,children:p.paragraph})]},m))})]},u.id)),h.jsx("br",{}),h.jsx("br",{}),Lfe.map(u=>h.jsxs("div",{className:"my-5",children:[h.jsx("h5",{className:W.paragraphSubText,children:u.subtitle}),h.jsx("h5",{className:W.paragraphHeadText,children:u.title}),h.jsx("div",{children:u.sections.map((p,m)=>h.jsxs("div",{className:"my-4",children:[h.jsx("h6",{className:W.paragraphSubText,children:p.name}),h.jsx("p",{onMouseUp:r,className:W.paragraphSubTextLower,children:p.paragraph})]},m))})]},u.id)),e&&h.jsxs("div",{className:"absolute text-left bg-white p-4 shadow-lg rounded-lg max-w-xs text-black",style:{left:i.left,top:i.top,zIndex:100},children:[h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsx("p",{className:W.dictionaryText,children:e}),h.jsx("i",{className:"fas fa-volume-up ml-5 text-gray-600"})]}),h.jsx("hr",{className:"border-2 mb-2"}),h.jsx("p",{children:t})]}),h.jsxs("div",{className:"mt-10 text-center flex justify-between",children:[h.jsx("button",{onClick:c,className:"px-6 py-2 border justify-end text-white rounded-lg hover:bg-gray-500",children:"Previous Article"}),h.jsx("button",{onClick:l,className:"px-6 py-2 border justify-end text-white rounded-lg hover:bg-gray-500",children:"Next Article"})]})]})}),s&&h.jsx("button",{onClick:a,className:"fixed bottom-6 right-6 w-12 h-12 bg-gray-600 text-white rounded-full shadow-lg flex items-center justify-center hover:bg-gray-800 transition-all duration-300",children:h.jsx("i",{className:"fas fa-arrow-up"})})]})},Ofe=Mt(kfe),Ufe=[{id:"local_government",title:"Local Government",subtitle:"ARTICLE X - General Provisions",sections:[{name:"Section 1",paragraph:["The territorial and political subdivisions of the Republic of the Philippines are the provinces, cities, municipalities, and barangays. There shall be autonomous regions in Muslim Mindanao and the Cordilleras as hereinafter provided."]},{name:"Section 2",paragraph:["The territorial and political subdivisions shall enjoy local autonomy."]},{name:"Section 3",paragraph:["The Congress shall enact a local government code which shall provide for a more responsive and accountable local government structure instituted through a system of decentralization with effective mechanisms of recall, initiative, and referendum, allocate among the different local government units their powers, responsibilities, and resources, and provide for the qualifications, election, appointment and removal, term, salaries, powers and functions and duties of local officials, and all other matters relating to the organization and operation of the local units."]},{name:"Section 4",paragraph:["The President of the Philippines shall exercise general supervision over local governments. Provinces with respect to component cities and municipalities, and cities and municipalities with respect to component barangays shall ensure that the acts of their component units are within the scope of their prescribed powers and functions."]},{name:"Section 5",paragraph:["Each local government unit shall have the power to create its own sources of revenues and to levy taxes, fees, and charges subject to such guidelines and limitations as the Congress may provide, consistent with the basic policy of local autonomy. Such taxes, fees, and charges shall accrue exclusively to the local governments."]},{name:"Section 6",paragraph:["Local government units shall have a just share, as determined by law, in the national taxes which shall be automatically released to them."]},{name:"Section 7",paragraph:["Local governments shall be entitled to an equitable share in the proceeds of the utilization and development of the national wealth within their respective areas, in the manner provided by law, including sharing the same with the inhabitants by way of direct benefits."]},{name:"Section 8",paragraph:["The term of office of elective local officials, except barangay officials, which shall be determined by law, shall be three years and no such official shall serve for more than three consecutive terms. Voluntary renunciation of the office for any length of time shall not be considered as an interruption in the continuity of his service for the full term for which he was elected."]},{name:"Section 9",paragraph:["Legislative bodies of local governments shall have sectoral representation as may be prescribed by law."]},{name:"Section 10",paragraph:["No province, city, municipality, or barangay may be created, divided, merged, abolished, or its boundary substantially altered, except in accordance with the criteria established in the Local Government Code and subject to approval by a majority of the votes cast in a plebiscite in the political units directly affected."]},{name:"Section 11",paragraph:["The Congress may, by law, create special metropolitan political subdivisions, subject to a plebiscite as set forth in Section 10 hereof. The component cities and municipalities shall retain their basic autonomy and shall be entitled to their own local executives and legislative assemblies. The jurisdiction of the metropolitan authority that will hereby be created shall be limited to basic services requiring coordination."]},{name:"Section 12",paragraph:["Cities that are highly urbanized, as determined by law, and component cities whose charters prohibit their voters from voting for provincial elective officials, shall be independent of the province. The voters of component cities within a province, whose charters contain no such prohibition, shall not be deprived of their right to vote for elective provincial officials."]},{name:"Section 13",paragraph:["Local government units may group themselves, consolidate or coordinate their efforts, services, and resources for purposes commonly beneficial to them in accordance with law."]},{name:"Section 14",paragraph:["The President shall provide for regional development councils or other similar bodies composed of local government officials, regional heads of departments and other government offices, and representatives from non-governmental organizations within the regions for purposes of administrative decentralization to strengthen the autonomy of the units therein and to accelerate the economic and social growth and development of the units in the region."]}]}],jfe=[{id:"auto_region",title:"Autonomous Region",sections:[{name:"Section 15",paragraph:["There shall be created autonomous regions in Muslim Mindanao and in the Cordilleras consisting of provinces, cities, municipalities, and geographical areas sharing common and distinctive historical and cultural heritage, economic and social structures, and other relevant characteristics within the framework of this Constitution and the national sovereignty as well as territorial integrity of the Republic of the Philippines."]},{name:"Section 16",paragraph:["The President shall exercise general supervision over autonomous regions to ensure that the laws are faithfully executed."]},{name:"Section 17",paragraph:["All powers, functions, and responsibilities not granted by this Constitution or by law to the autonomous regions shall be vested in the National Government."]},{name:"Section 18",paragraph:["The Congress shall enact an organic act for each autonomous region with the assistance and participation of the regional consultative commission composed of representatives appointed by the President from a list of nominees from multisectoral bodies. The organic act shall define the basic structure of government for the region consisting of the executive department and legislative assembly, both of which shall be elective and representative of the constituent political units. The organic acts shall likewise provide for special courts with personal, family, and property law jurisdiction consistent with the provisions of this Constitution and national laws.","The creation of the autonomous region shall be effective when approved by majority of the votes cast by the constituent units in a plebiscite called for the purpose, provided that only provinces, cities, and geographic areas voting favorably in such plebiscite shall be included in the autonomous region."]},{name:"Section 19",paragraph:["The first Congress elected under this Constitution shall, within eighteen months from the time of organization of both Houses, pass the organic acts for the autonomous regions in Muslim Mindanao and the Cordilleras."]},{name:"Section 20",paragraph:["Within its territorial jurisdiction and subject to the provisions of this Constitution and national laws, the organic act of autonomous regions shall provide for legislative powers over:","(1) Administrative organization;","(2) Creation of sources of revenues;","(3) Ancestral domain and natural resources;","(4) Personal, family, and property relations;","(5) Regional urban and rural planning development;","(6) Economic, social, and tourism development;","(7) Educational policies;","(8) Preservation and development of the cultural heritage; and","(9) Such other matters as may be authorized by law for the promotion of the general welfare of the people of the region."]},{name:"Section 21",paragraph:["The preservation of peace and order within the regions shall be the responsibility of the local police agencies which shall be organized, maintained, supervised, and utilized in accordance with applicable laws. The defense and security of the regions shall be the responsibility of the National Government."]}]}],Ffe=()=>{const n=Pt(),{selectedWord:e,definition:t,tooltipPosition:i,handleTextSelection:r}=bn(),[s,o]=V.useState(!1);V.useEffect(()=>{const u=()=>{window.scrollY>200?o(!0):o(!1)};return window.addEventListener("scroll",u),()=>window.removeEventListener("scroll",u)},[]);const a=()=>{window.scrollTo({top:0,behavior:"smooth"})},l=()=>{n("/articleEleven")},c=()=>{n("/articleNine")};return h.jsxs("div",{className:"text-spacing-3 leading-relaxed tracking-wide",children:[h.jsx(vn,{children:h.jsxs("div",{children:[Ufe.map(u=>h.jsxs("div",{className:"my-5",children:[h.jsx("h5",{className:W.paragraphSubText,children:u.subtitle}),h.jsx("h4",{className:`${W.headText} mb-10`,children:u.title}),h.jsx("div",{children:u.sections.map((p,m)=>h.jsxs("div",{className:"my-4",children:[h.jsx("h6",{className:W.paragraphSubText,children:p.name}),h.jsx("p",{onMouseUp:r,className:W.paragraphSubTextLower,children:p.paragraph})]},m))})]},u.id)),h.jsx("br",{}),h.jsx("br",{}),jfe.map(u=>h.jsxs("div",{className:"my-5",children:[h.jsx("h5",{className:W.paragraphSubText,children:u.subtitle}),h.jsx("h4",{className:`${W.headText} mb-10`,children:u.title}),h.jsx("div",{children:u.sections.map((p,m)=>h.jsxs("div",{className:"my-4",children:[h.jsx("h6",{className:W.paragraphSubText,children:p.name}),h.jsx("p",{onMouseUp:r,className:W.paragraphSubTextLower,children:p.paragraph})]},m))})]},u.id)),e&&h.jsxs("div",{className:"absolute text-left bg-white p-4 shadow-lg rounded-lg max-w-xs text-black",style:{left:i.left,top:i.top,zIndex:100},children:[h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsx("p",{className:W.dictionaryText,children:e}),h.jsx("i",{className:"fas fa-volume-up ml-5 text-gray-600"})]}),h.jsx("hr",{className:"border-2 mb-2"}),h.jsx("p",{children:t})]}),h.jsxs("div",{className:"mt-10 text-center flex justify-between",children:[h.jsx("button",{onClick:c,className:"px-6 py-2 border justify-end text-white rounded-lg hover:bg-gray-500",children:"Previous Article"}),h.jsx("button",{onClick:l,className:"px-6 py-2 border justify-end text-white rounded-lg hover:bg-gray-500",children:"Next Article"})]})]})}),s&&h.jsx("button",{onClick:a,className:"fixed bottom-6 right-6 w-12 h-12 bg-gray-600 text-white rounded-full shadow-lg flex items-center justify-center hover:bg-gray-800 transition-all duration-300",children:h.jsx("i",{className:"fas fa-arrow-up"})})]})},Vfe=Mt(Ffe),Bfe=[{id:"public_officers",title:"Accountability of Public Officers",subtitle:"ARTICLE XI",sections:[{name:"Section 1",paragraph:["Public office is a public trust. Public officers and employees must at all times be accountable to the people, serve them with utmost responsibility, integrity, loyalty, and efficiency, act with patriotism and justice, and lead modest lives."]},{name:"Section 2",paragraph:["The President, the Vice-President, the Members of the Supreme Court, the Members of the Constitutional Commissions, and the Ombudsman may be removed from office, on impeachment for, and conviction of, culpable violation of the Constitution, treason, bribery, graft and corruption, other high crimes, or betrayal of public trust.","All other public officers and employees may be removed from office as provided by law, but not by impeachment."]},{name:"Section 3",paragraph:["(1) The House of Representatives shall have the exclusive power to initiate all cases of impeachment.","(2) A verified complaint for impeachment may be filed by any Member of the House of Representatives or by any citizen upon a resolution of endorsement by any Member thereof, which shall be included in the Order of Business within ten session days, and referred to the proper Committee within three session days thereafter. The Committee, after hearing, and by a majority vote of all its Members, shall submit its report to the House within sixty session days from such referral, together with the corresponding resolution. The resolution shall be calendared for consideration by the House within ten session days from receipt thereof.","(3) A vote of at least one-third of all the Members of the House shall be necessary either to affirm a favorable resolution with the Articles of Impeachment of the Committee, or override its contrary resolution. The vote of each Member shall be recorded.","(4) In case the verified complaint or resolution of impeachment is filed by at least one-third of all the Members of the House, the same shall constitute the Articles of Impeachment, and trial by the Senate shall forthwith proceed.","(5) No impeachment proceedings shall be initiated against the same official more than once within a period of one year.","(6) The Senate shall have the sole power to try and decide all cases of impeachment. When sitting for that purpose, the Senators shall be on oath or affirmation. When the President of the Philippines is on trial, the Chief Justice of the Supreme Court shall preside, but shall not vote. No person shall be convicted without the concurrence of two-thirds of all the Members of the Senate.","(7) Judgment in cases of impeachment shall not extend further than removal from office and disqualification to hold any office under the Republic of the Philippines, but the party convicted shall nevertheless be liable and subject to prosecution, trial, and punishment according to law.","(8) The Congress shall promulgate its rules on impeachment to effectively carry out the purpose of this section."]},{name:"Section 4",paragraph:["The present anti-graft court known as the Sandiganbayan shall continue to function and exercise its jurisdiction as now or hereafter may be provided by law."]},{name:"Section 5",paragraph:["There is hereby created the independent Office of the Ombudsman, composed of the Ombudsman to be known as Tanodbayan, one overall Deputy and at least one Deputy each for Luzon, Visayas, and Mindanao. A separate Deputy for the military establishment may likewise be appointed."]},{name:"Section 6",paragraph:["The officials and employees of the Office of the Ombudsman, other than the Deputies, shall be appointed by the Ombudsman according to the Civil Service Law."]},{name:"Section 7",paragraph:["The existing Tanodbayan shall hereafter be known as the Office of the Special Prosecutor. It shall continue to function and exercise its powers as now or hereafter may be provided by law, except those conferred on the Office of the Ombudsman created under this Constitution."]},{name:"Section 8",paragraph:["The Ombudsman and his Deputies shall be natural-born citizens of the Philippines, and at the time of their appointment, at least forty years old, of recognized probity and independence, and members of the Philippine Bar, and must not have been candidates for any elective office in the immediately preceding election. The Ombudsman must have for ten years or more been a judge or engaged in the practice of law in the Philippines.","During their tenure, they shall be subject to the same disqualifications and prohibitions as provided for in Section 2 of Article IX-A of this Constitution."]},{name:"Section 9",paragraph:["The Ombudsman and his Deputies shall be appointed by the President from a list of at least six nominees prepared by the Judicial and Bar Council, and from a list of three nominees for every vacancy thereafter. Such appointments shall require no confirmation. All vacancies shall be filled within three months after they occur."]},{name:"Section 10",paragraph:["The Ombudsman and his Deputies shall have the rank of Chairman and Members, respectively, of the Constitutional Commissions, and they shall receive the same salary, which shall not be decreased during their term of office."]},{name:"Section 11",paragraph:["The Ombudsman and his Deputies shall serve for a term of seven years without reappointment. They shall not be qualified to run for any office in the election immediately succeeding their cessation from office."]},{name:"Section 12",paragraph:["The Ombudsman and his Deputies, as protectors of the people, shall act promptly on complaints filed in any form or manner against public officials or employees of the Government, or any subdivision, agency or instrumentality thereof, including government-owned or controlled corporations, and shall, in appropriate cases, notify the complainants of the action taken and the result thereof."]},{name:"Section 13",paragraph:["(1) Investigate on its own, or on complaint by any person, any act or omission of any public official, employee, office or agency, when such act or omission appears to be illegal, unjust, improper, or inefficient.","(2) Direct, upon complaint or at its own instance, any public official or employee of the Government, or any subdivision, agency or instrumentality thereof, as well as of any government-owned or controlled corporation with original charter, to perform and expedite any act or duty required by law, or to stop, prevent, and correct any abuse or impropriety in the performance of duties.","(3) Direct the officer concerned to take appropriate action against a public official or employee at fault, and recommend his removal, suspension, demotion, fine, censure, or prosecution, and ensure compliance therewith.","(4) Direct the officer concerned, in any appropriate case, and subject to such limitations as may be provided by law, to furnish it with copies of documents relating to contracts or transactions entered into by his office involving the disbursement or use of public funds or properties, and report any irregularity to the Commission on Audit for appropriate action.","(5) Request any government agency for assistance and information necessary in the discharge of its responsibilities, and to examine, if necessary, pertinent records and documents.","(6) Publicize matters covered by its investigation when circumstances so warrant and with due prudence.","(7) Determine the causes of inefficiency, red tape, mismanagement, fraud, and corruption in the Government and make recommendations for their elimination and the observance of high standards of ethics and efficiency.","(8) Promulgate its rules of procedure and exercise such other powers or perform such functions or duties as may be provided by law."]},{name:"Section 14",paragraph:["The Office of the Ombudsman shall enjoy fiscal autonomy. Its approved annual appropriations shall be automatically and regularly released."]},{name:"Section 15",paragraph:["The right of the State to recover properties unlawfully acquired by public officials or employees, from them or from their nominees or transferees, shall not be barred by prescription, laches, or estoppel."]},{name:"Section 16",paragraph:["No loan, guaranty, or other form of financial accommodation for any business purpose may be granted, directly or indirectly, by any government-owned or controlled bank or financial institution to the President, the Vice-President, the Members of the Cabinet, the Congress, the Supreme Court, and the Constitutional Commissions, the Ombudsman, or to any firm or entity in which they have controlling interest, during their tenure."]},{name:"Section 17",paragraph:["A public officer or employee shall, upon assumption of office and as often thereafter as may be required by law, submit a declaration under oath of his assets, liabilities, and net worth. In the case of the President, the Vice-President, the Members of the Cabinet, the Congress, the Supreme Court, the Constitutional Commissions and other constitutional offices, and officers of the armed forces with general or flag rank, the declaration shall be disclosed to the public in the manner provided by law."]},{name:"Section 18",paragraph:["Public officers and employees owe the State and this Constitution allegiance at all times, and any public officer or employee who seeks to change his citizenship or acquire the status of an immigrant of another country during his tenure shall be dealt with by law."]}]}],zfe=()=>{const n=Pt(),{selectedWord:e,definition:t,tooltipPosition:i,handleTextSelection:r}=bn(),[s,o]=V.useState(!1);V.useEffect(()=>{const u=()=>{window.scrollY>200?o(!0):o(!1)};return window.addEventListener("scroll",u),()=>window.removeEventListener("scroll",u)},[]);const a=()=>{window.scrollTo({top:0,behavior:"smooth"})},l=()=>{n("/articleTwelve")},c=()=>{n("/articleTen")};return h.jsxs("div",{className:"text-spacing-3 leading-relaxed tracking-wide",children:[h.jsx(vn,{children:h.jsxs("div",{children:[Bfe.map(u=>h.jsxs("div",{className:"my-5",children:[h.jsx("h5",{className:W.paragraphSubText,children:u.subtitle}),h.jsx("h4",{className:`${W.headText} mb-10`,children:u.title}),h.jsx("div",{children:u.sections.map((p,m)=>h.jsxs("div",{className:"my-4",children:[h.jsx("h6",{className:W.paragraphSubText,children:p.name}),h.jsx("p",{onMouseUp:r,className:W.paragraphSubTextLower,children:p.paragraph})]},m))})]},u.id)),e&&h.jsxs("div",{className:"absolute text-left bg-white p-4 shadow-lg rounded-lg max-w-xs text-black",style:{left:i.left,top:i.top,zIndex:100},children:[h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsx("p",{className:W.dictionaryText,children:e}),h.jsx("i",{className:"fas fa-volume-up ml-5 text-gray-600"})]}),h.jsx("hr",{className:"border-2 mb-2"}),h.jsx("p",{children:t})]}),h.jsxs("div",{className:"mt-10 text-center flex justify-between",children:[h.jsx("button",{onClick:c,className:"px-6 py-2 border justify-end text-white rounded-lg hover:bg-gray-500",children:"Previous Article"}),h.jsx("button",{onClick:l,className:"px-6 py-2 border justify-end text-white rounded-lg hover:bg-gray-500",children:"Next Article"})]})]})}),s&&h.jsx("button",{onClick:a,className:"fixed bottom-6 right-6 w-12 h-12 bg-gray-600 text-white rounded-full shadow-lg flex items-center justify-center hover:bg-gray-800 transition-all duration-300",children:h.jsx("i",{className:"fas fa-arrow-up"})})]})},Hfe=Mt(zfe),Gfe=[{id:"economy_and_patrimony",title:"National Economy and Patrimony",subtitle:"ARTICLE XII",sections:[{name:"Section 1",paragraph:["The goals of the national economy are a more equitable distribution of opportunities, income, and wealth; a sustained increase in the amount of goods and services produced by the nation for the benefit of the people; and an expanding productivity as the key to raising the quality of life for all, especially the underprivileged.","The State shall promote industrialization and full employment based on sound agricultural development and agrarian reform, through industries that make full and efficient use of human and natural resources, and which are competitive in both domestic and foreign markets. However, the State shall protect Filipino enterprises against unfair foreign competition and trade practices.","In the pursuit of these goals, all sectors of the economy and all regions of the country shall be given optimum opportunity to develop. Private enterprises, including corporations, cooperatives, and similar collective organizations, shall be encouraged to broaden the base of their ownership."]},{name:"Section 2",paragraph:["All lands of the public domain, waters, minerals, coal, petroleum, and other mineral oils, all forces of potential energy, fisheries, forests or timber, wildlife, flora and fauna, and other natural resources are owned by the State. With the exception of agricultural lands, all other natural resources shall not be alienated. The exploration, development, and utilization of natural resources shall be under the full control and supervision of the State.","The State may directly undertake such activities, or it may enter into co-production, joint venture, or production-sharing agreements with Filipino citizens, or corporations or associations at least sixty per centum of whose capital is owned by such citizens. Such agreements may be for a period not exceeding twenty-five years, renewable for not more than twenty-five years, and under such terms and conditions as may be provided by law. In cases of water rights for irrigation, water supply, fisheries, or industrial uses other than the development of water power, beneficial use may be the measure and limit of the grant.","The State shall protect the nations marine wealth in its archipelagic waters, territorial sea, and exclusive economic zone, and reserve its use and enjoyment exclusively to Filipino citizens.","The Congress may, by law, allow small-scale utilization of natural resources by Filipino citizens, as well as cooperative fish farming, with priority to subsistence fishermen and fishworkers in rivers, lakes, bays, and lagoons.","The President may enter into agreements with foreign-owned corporations involving either technical or financial assistance for large-scale exploration, development, and utilization of minerals, petroleum, and other mineral oils according to the general terms and conditions provided by law, based on real contributions to the economic growth and general welfare of the country. In such agreements, the State shall promote the development and use of local scientific and technical resources.","The President shall notify the Congress of every contract entered into in accordance with this provision, within thirty days from its execution."]},{name:"Section 3",paragraph:["Lands of the public domain are classified into agricultural, forest or timber, mineral lands, and national parks. Agricultural lands of the public domain may be further classified by law according to the uses which they may be devoted. Alienable lands of the public domain shall be limited to agricultural lands. Private corporations or associations may not hold such alienable lands of the public domain except by lease, for a period not exceeding twenty-five years, renewable for not more than twenty-five years, and not to exceed one thousand hectares in area. Citizens of the Philippines may lease not more than five hundred hectares, or acquire not more than twelve hectares thereof by purchase, homestead, or grant.","Taking into account the requirements of conservation, ecology, and development, and subject to the requirements of agrarian reform, the Congress shall determine, by law, the size of lands of the public domain which may be acquired, developed, held, or leased and the conditions therefor."]},{name:"Section 4",paragraph:"The Congress shall, as soon as possible, determine by law the specific limits of forest lands and national parks, marking clearly their boundaries on the ground. Thereafter, such forest lands and national parks shall be conserved and may not be increased nor diminished, except by law. The Congress shall provide, for such period as it may determine, measures to prohibit logging in endangered forests and watershed areas."},{name:"Section 5",paragraph:["The State, subject to the provisions of this Constitution and national development policies and programs, shall protect the rights of indigenous cultural communities to their ancestral lands to ensure their economic, social, and cultural well-being.","The Congress may provide for the applicability of customary laws governing property rights or relations in determining the ownership and extent of ancestral domain."]},{name:"Section 6",paragraph:"The use of property bears a social function, and all economic agents shall contribute to the common good. Individuals and private groups, including corporations, cooperatives, and similar collective organizations, shall have the right to own, establish, and operate economic enterprises, subject to the duty of the State to promote distributive justice and to intervene when the common good so demands."},{name:"Section 7",paragraph:"Save in cases of hereditary succession, no private lands shall be transferred or conveyed except to individuals, corporations, or associations qualified to acquire or hold lands of the public domain."},{name:"Section 8",paragraph:"Notwithstanding the provisions of Section 7 of this Article, a natural-born citizen of the Philippines who has lost his Philippine citizenship may be a transferee of private lands, subject to limitations provided by law."},{name:"Section 9",paragraph:["The Congress may establish an independent economic and planning agency headed by the President, which shall, after consultations with the appropriate public agencies, various private sectors, and local government units, recommend to Congress, and implement continuing integrated and coordinated programs and policies for national development.","Until the Congress provides otherwise, the National Economic and Development Authority shall function as the independent planning agency of the government."]},{name:"Section 10",paragraph:["The Congress shall, upon recommendation of the economic and planning agency, when the national interest dictates, reserve to citizens of the Philippines or to corporations or associations at least sixty per centum of whose capital is owned by such citizens, or such higher percentage as Congress may prescribe, certain areas of investments. The Congress shall enact measures that will encourage the formation and operation of enterprises whose capital is wholly owned by Filipinos.","In the grant of rights, privileges, and concessions covering the national economy and patrimony, the State shall give preference to qualified Filipinos.","The State shall regulate and exercise authority over foreign investments within its national jurisdiction and in accordance with its national goals and priorities."]},{name:"Section 11",paragraph:["No franchise, certificate, or any other form of authorization for the operation of a public utility shall be granted except to citizens of the Philippines or to corporations or associations organized under the laws of the Philippines at least sixty per centum of whose capital is owned by such citizens, nor shall such franchise, certificate, or authorization be exclusive in character or for a longer period than fifty years. Neither shall any such franchise or right be granted except under the condition that it shall be subject to amendment, alteration, or repeal by the Congress when the common good so requires.","The State shall encourage equity participation in public utilities by the general public. The participation of foreign investors in the governing body of any public utility enterprise shall be limited to their proportionate share in its capital, and all the executive and managing officers of such corporation or association must be citizens of the Philippines."]},{name:"Section 12",paragraph:"The State shall promote the preferential use of Filipino labor, domestic materials and locally produced goods, and adopt measures that help make them competitive."},{name:"Section 13",paragraph:"The State shall pursue a trade policy that serves the general welfare and utilizes all forms and arrangements of exchange on the basis of equality and reciprocity."},{name:"Section 14",paragraph:["The sustained development of a reservoir of national talents consisting of Filipino scientists, entrepreneurs, professionals, managers, high-level technical manpower and skilled workers and craftsmen in all fields shall be promoted by the State. The State shall encourage appropriate technology and regulate its transfer for the national benefit.","The practice of all professions in the Philippines shall be limited to Filipino citizens, save in cases prescribed by law."]},{name:"Section 15",paragraph:"The Congress shall create an agency to promote the viability and growth of cooperatives as instruments for social justice and economic development."},{name:"Section 16",paragraph:"The Congress shall not, except by general law, provide for the formation, organization, or regulation of private corporations. Government-owned or controlled corporations may be created or established by special charters in the interest of the common good and subject to the test of economic viability."},{name:"Section 17",paragraph:"In times of national emergency, when the public interest so requires, the State may, during the emergency and under reasonable terms prescribed by it, temporarily take over or direct the operation of any privately owned public utility or business affected with public interest."},{name:"Section 18",paragraph:"The State may, in the interest of national welfare or defense, establish and operate vital industries and, upon payment of just compensation, transfer to public ownership utilities and other private enterprises to be operated by the Government."},{name:"Section 19",paragraph:"The State shall regulate or prohibit monopolies when the public interest so requires. No combinations in restraint of trade or unfair competition shall be allowed."},{name:"Section 20",paragraph:["The Congress shall establish central monetary authority, which shall provide policy direction in the areas of money, banking, and credit. It shall have supervision over the operations of banks and exercise such regulatory powers as may be provided by law over the operations of finance companies and other institutions performing similar functions.","Until the Congress otherwise provides, the Central Bank of the Philippines, operating under existing laws, shall function as the central monetary authority."]},{name:"Section 21",paragraph:"Foreign loans may only be incurred in accordance with law and the regulation of the monetary authority. Information on such loans shall be made available to the public."},{name:"Section 22",paragraph:"Acts which circumvent or negate any of the provisions of this Article shall be considered inimical to the national interest and subject to criminal and civil sanctions, as may be provided by law."}]}],Wfe=()=>{const n=Pt(),{selectedWord:e,definition:t,tooltipPosition:i,handleTextSelection:r}=bn(),[s,o]=V.useState(!1);V.useEffect(()=>{const u=()=>{window.scrollY>200?o(!0):o(!1)};return window.addEventListener("scroll",u),()=>window.removeEventListener("scroll",u)},[]);const a=()=>{window.scrollTo({top:0,behavior:"smooth"})},l=()=>{n("/articleThirteen")},c=()=>{n("/articleEleven")};return h.jsxs("div",{className:"text-spacing-3 leading-relaxed tracking-wide",children:[h.jsx(vn,{children:h.jsxs("div",{children:[Gfe.map(u=>h.jsxs("div",{className:"my-5",children:[h.jsx("h5",{className:W.paragraphSubText,children:u.subtitle}),h.jsx("h4",{className:`${W.headText} mb-10`,children:u.title}),h.jsx("div",{children:u.sections.map((p,m)=>h.jsxs("div",{className:"my-4",children:[h.jsx("h6",{className:W.paragraphSubText,children:p.name}),h.jsx("p",{onMouseUp:r,className:W.paragraphSubTextLower,children:p.paragraph})]},m))})]},u.id)),e&&h.jsxs("div",{className:"absolute text-left bg-white p-4 shadow-lg rounded-lg max-w-xs text-black",style:{left:i.left,top:i.top,zIndex:100},children:[h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsx("p",{className:W.dictionaryText,children:e}),h.jsx("i",{className:"fas fa-volume-up ml-5 text-gray-600"})]}),h.jsx("hr",{className:"border-2 mb-2"}),h.jsx("p",{children:t})]}),h.jsxs("div",{className:"mt-10 text-center flex justify-between",children:[h.jsx("button",{onClick:c,className:"px-6 py-2 border justify-end text-white rounded-lg hover:bg-gray-500",children:"Previous Article"}),h.jsx("button",{onClick:l,className:"px-6 py-2 border justify-end text-white rounded-lg hover:bg-gray-500",children:"Next Article"})]})]})}),s&&h.jsx("button",{onClick:a,className:"fixed bottom-6 right-6 w-12 h-12 bg-gray-600 text-white rounded-full shadow-lg flex items-center justify-center hover:bg-gray-800 transition-all duration-300",children:h.jsx("i",{className:"fas fa-arrow-up"})})]})},qfe=Mt(Wfe),$fe=[{id:"justice_human_rights",title:"Social Justice and Human Rights",subtitle:"ARTICLE XIII",sections:[{name:"Section 1",paragraph:["The Congress shall give highest priority to the enactment of measures that protect and enhance the right of all the people to human dignity, reduce social, economic, and political inequalities, and remove cultural inequities by equitably diffusing wealth and political power for the common good.","To this end, the State shall regulate the acquisition, ownership, use, and disposition of property and its increments."]},{name:"Section 2",paragraph:"The promotion of social justice shall include the commitment to create economic opportunities based on freedom of initiative and self-reliance."}]}],Xfe=[{id:"labor",title:"Labor",sections:[{name:"Section 3",paragraph:["The State shall afford full protection to labor, local and overseas, organized and unorganized, and promote full employment and equality of employment opportunities for all.","It shall guarantee the rights of all workers to self-organization, collective bargaining and negotiations, and peaceful concerted activities, including the right to strike in accordance with law. They shall be entitled to security of tenure, humane conditions of work, and a living wage. They shall also participate in policy and decision-making processes affecting their rights and benefits as may be provided by law.","The State shall promote the principle of shared responsibility between workers and employers and the preferential use of voluntary modes in settling disputes, including conciliation, and shall enforce their mutual compliance therewith to foster industrial peace.","The State shall regulate the relations between workers and employers, recognizing the right of labor to its just share in the fruits of production and the right of enterprises to reasonable returns on investments, and to expansion and growth."]}]}],Kfe=[{id:"agrarian_reform",title:"Agrarian and Natural Resources Reform",sections:[{name:"Section 4",paragraph:"The State shall, by law, undertake an agrarian reform program founded on the right of farmers and regular farmworkers, who are landless, to own directly or collectively the lands they till or, in the case of other farmworkers, to receive a just share of the fruits thereof. To this end, the State shall encourage and undertake the just distribution of all agricultural lands, subject to such priorities and reasonable retention limits as the Congress may prescribe, taking into account ecological, developmental, or equity considerations, and subject to the payment of just compensation. In determining retention limits, the State shall respect the right of small landowners. The State shall further provide incentives for voluntary land-sharing."},{name:"Section 5",paragraph:"The State shall recognize the right of farmers, farmworkers, and landowners, as well as cooperatives, and other independent farmers organizations to participate in the planning, organization, and management of the program, and shall provide support to agriculture through appropriate technology and research, and adequate financial, production, marketing, and other support services"},{name:"Section 6",paragraph:["The State shall apply the principles of agrarian reform or stewardship, whenever applicable in accordance with law, in the disposition or utilization of other natural resources, including lands of the public domain under lease or concession suitable to agriculture, subject to prior rights, homestead rights of small settlers, and the rights of indigenous communities to their ancestral lands.","The State may resettle landless farmers and farmworkers in its own agricultural estates which shall be distributed to them in the manner provided by law."]},{name:"Section 7",paragraph:"The State shall protect the rights of subsistence fishermen, especially of local communities, to the preferential use of local marine and fishing resources, both inland and offshore. It shall provide support to such fishermen through appropriate technology and research, adequate financial, production, and marketing assistance, and other services. The State shall also protect, develop, and conserve such resources. The protection shall extend to offshore fishing grounds of subsistence fishermen against foreign intrusion. Fishworkers shall receive a just share from their labor in the utilization of marine and fishing resources."},{name:"Section 8",paragraph:"The State shall provide incentives to landowners to invest the proceeds of the agrarian reform program to promote industrialization, employment creation, and privatization of public sector enterprises. Financial instruments used as payment for their lands shall be honored as equity in enterprises of their choice."}]}],Yfe=[{id:"suff",title:"Urban Land Reform and Housing",sections:[{name:"Section 9",paragraph:"The State shall, by law, and for the common good, undertake, in cooperation with the public sector, a continuing program of urban land reform and housing which will make available at affordable cost decent housing and basic services to underprivileged and homeless citizens in urban centers and resettlements areas. It shall also promote adequate employment opportunities to such citizens. In the implementation of such program the State shall respect the rights of small property owners."},{name:"Section 10",paragraph:["Urban or rural poor dwellers shall not be evicted nor their dwellings demolished, except in accordance with law and in a just and humane manner.","No resettlement of urban or rural dwellers shall be undertaken without adequate consultation with them and the communities where they are to be relocated."]}]}],Jfe=[{id:"health",title:"Health",sections:[{name:"Section 11",paragraph:"The State shall adopt an integrated and comprehensive approach to health development which shall endeavor to make essential goods, health and other social services available to all the people at affordable cost. There shall be priority for the needs of the underprivileged sick, elderly, disabled, women, and children. The State shall endeavor to provide free medical care to paupers."},{name:"Section 12",paragraph:"The State shall establish and maintain an effective food and drug regulatory system and undertake appropriate health manpower development and research, responsive to the countrys health needs and problems."},{name:"Section 13",paragraph:"The State shall establish a special agency for disabled persons for rehabilitation, self-development and self-reliance, and their integration into the mainstream of society."}]}],Qfe=[{id:"women",title:"Women",sections:[{name:"Section 14",paragraph:"The State shall protect working women by providing safe and healthful working conditions, taking into account their maternal functions, and such facilities and opportunities that will enhance their welfare and enable them to realize their full potential in the service of the nation."}]}],Zfe=[{id:"people_orgs",title:"Role and Rights of Peoples Organizations",sections:[{name:"Section 15",paragraph:["The State shall respect the role of independent peoples organizations to enable the people to pursue and protect, within the democratic framework, their legitimate and collective interests and aspirations through peaceful and lawful means.","The State shall respect the role of independent peoples organizations to enable the people to pursue and protect, within the democratic framework, their legitimate and collective interests and aspirations through peaceful and lawful means."]},{name:"Section 16",paragraph:"The right of the people and their organizations to effective and reasonable participation at all levels of social, political, and economic decision-making shall not be abridged. The State shall, by law, facilitate the establishment of adequate consultation mechanisms."}]}],epe=[{id:"human_rights",title:"Human Rights",sections:[{name:"Section 17",paragraph:["(1) There is hereby created an independent office called the Commission on Human Rights.","(2) The Commission shall be composed of a Chairman and four Members who must be natural-born citizens of the Philippines and a majority of whom shall be members of the Bar. The term of office and other qualifications and disabilities of the Members of the Commission shall be provided by law.","(3) Until this Commission is constituted, the existing Presidential Committee on Human Rights shall continue to exercise its present functions and powers.","(4) The approved annual appropriations of the Commission shall be automatically and regularly released."]},{name:"Section 18",paragraph:["The Commission on Human Rights shall have the following powers and functions:","(1) Investigate, on its own or on complaint by any party, all forms of human rights violations involving civil and political rights;","(2) Adopt its operational guidelines and rules of procedure, and cite for contempt for violations thereof in accordance with the Rules of Court;","(3) Provide appropriate legal measures for the protection of human rights of all persons within the Philippines, as well as Filipinos residing abroad, and provide for preventive measures and legal aid services to the underprivileged whose human rights have been violated or need protection;","(4) Exercise visitorial powers over jails, prisons, or detention facilities;","(5) Establish a continuing program of research, education, and information to enhance respect for the primacy of human rights;","(6) Recommend to the Congress effective measures to promote human rights and to provide for compensation to victims of violations of human rights, or their families;","(7) Monitor the Philippine Governments compliance with international treaty obligations on human rights;","(8) Grant immunity from prosecution to any person whose testimony or whose possession of documents or other evidence is necessary or convenient to determine the truth in any investigation conducted by it or under its authority;","(9) Request the assistance of any department, bureau, office, or agency in the performance of its functions;","(10) Appoint its officers and employees in accordance with law; and","(11) Perform such other duties and functions as may be provided by law."]},{name:"Section 19",paragraph:"The Congress may provide for other cases of violations of human rights that should fall within the authority of the Commission, taking into account its recommendations."}]}],tpe=()=>{const n=Pt(),{selectedWord:e,definition:t,tooltipPosition:i,handleTextSelection:r}=bn(),[s,o]=V.useState(!1);V.useEffect(()=>{const u=()=>{window.scrollY>200?o(!0):o(!1)};return window.addEventListener("scroll",u),()=>window.removeEventListener("scroll",u)},[]);const a=()=>{window.scrollTo({top:0,behavior:"smooth"})},l=()=>{n("/articleFourteen")},c=()=>{n("/articleTwelve")};return h.jsxs("div",{className:"text-spacing-3 leading-relaxed tracking-wide",children:[h.jsx(vn,{children:h.jsxs("div",{children:[$fe.map(u=>h.jsxs("div",{className:"my-5",children:[h.jsx("h5",{className:W.paragraphSubText,children:u.subtitle}),h.jsx("h4",{className:`${W.headText} mb-10`,children:u.title}),h.jsx("div",{children:u.sections.map((p,m)=>h.jsxs("div",{className:"my-4",children:[h.jsx("h6",{className:W.paragraphSubText,children:p.name}),h.jsx("p",{onMouseUp:r,className:W.paragraphSubTextLower,children:p.paragraph})]},m))})]},u.id)),h.jsx("br",{}),Xfe.map(u=>h.jsxs("div",{className:"my-5",children:[h.jsx("h5",{className:W.paragraphHeadText,children:u.title}),h.jsx("div",{children:u.sections.map((p,m)=>h.jsxs("div",{className:"my-4",children:[h.jsx("h6",{className:W.paragraphSubText,children:p.name}),h.jsx("p",{onMouseUp:r,className:W.paragraphSubTextLower,children:p.paragraph})]},m))})]},u.id)),h.jsx("br",{}),Kfe.map(u=>h.jsxs("div",{className:"my-5",children:[h.jsx("h5",{className:W.paragraphSubText,children:u.subtitle}),h.jsx("h4",{className:`${W.headText} mb-10`,children:u.title}),h.jsx("div",{children:u.sections.map((p,m)=>h.jsxs("div",{className:"my-4",children:[h.jsx("h6",{className:W.paragraphSubText,children:p.name}),h.jsx("p",{onMouseUp:r,className:W.paragraphSubTextLower,children:p.paragraph})]},m))})]},u.id)),h.jsx("br",{}),Yfe.map(u=>h.jsxs("div",{className:"my-5",children:[h.jsx("h5",{className:W.paragraphSubText,children:u.subtitle}),h.jsx("h4",{className:`${W.headText} mb-10`,children:u.title}),h.jsx("div",{children:u.sections.map((p,m)=>h.jsxs("div",{className:"my-4",children:[h.jsx("h6",{className:W.paragraphSubText,children:p.name}),h.jsx("p",{onMouseUp:r,className:W.paragraphSubTextLower,children:p.paragraph})]},m))})]},u.id)),h.jsx("br",{}),Jfe.map(u=>h.jsxs("div",{className:"my-5",children:[h.jsx("h5",{className:W.paragraphSubText,children:u.subtitle}),h.jsx("h4",{className:`${W.headText} mb-10`,children:u.title}),h.jsx("div",{children:u.sections.map((p,m)=>h.jsxs("div",{className:"my-4",children:[h.jsx("h6",{className:W.paragraphSubText,children:p.name}),h.jsx("p",{onMouseUp:r,className:W.paragraphSubTextLower,children:p.paragraph})]},m))})]},u.id)),h.jsx("br",{}),Qfe.map(u=>h.jsxs("div",{className:"my-5",children:[h.jsx("h5",{className:W.paragraphSubText,children:u.subtitle}),h.jsx("h4",{className:`${W.headText} mb-10`,children:u.title}),h.jsx("div",{children:u.sections.map((p,m)=>h.jsxs("div",{className:"my-4",children:[h.jsx("h6",{className:W.paragraphSubText,children:p.name}),h.jsx("p",{onMouseUp:r,className:W.paragraphSubTextLower,children:p.paragraph})]},m))})]},u.id)),h.jsx("br",{}),Zfe.map(u=>h.jsxs("div",{className:"my-5",children:[h.jsx("h5",{className:W.paragraphSubText,children:u.subtitle}),h.jsx("h4",{className:`${W.headText} mb-10`,children:u.title}),h.jsx("div",{children:u.sections.map((p,m)=>h.jsxs("div",{className:"my-4",children:[h.jsx("h6",{className:W.paragraphSubText,children:p.name}),h.jsx("p",{onMouseUp:r,className:W.paragraphSubTextLower,children:p.paragraph})]},m))})]},u.id)),h.jsx("br",{}),epe.map(u=>h.jsxs("div",{className:"my-5",children:[h.jsx("h5",{className:W.paragraphSubText,children:u.subtitle}),h.jsx("h4",{className:`${W.headText} mb-10`,children:u.title}),h.jsx("div",{children:u.sections.map((p,m)=>h.jsxs("div",{className:"my-4",children:[h.jsx("h6",{className:W.paragraphSubText,children:p.name}),h.jsx("p",{onMouseUp:r,className:W.paragraphSubTextLower,children:p.paragraph})]},m))})]},u.id)),h.jsx("br",{}),e&&h.jsxs("div",{className:"absolute text-left bg-white p-4 shadow-lg rounded-lg max-w-xs text-black",style:{left:i.left,top:i.top,zIndex:100},children:[h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsx("p",{className:W.dictionaryText,children:e}),h.jsx("i",{className:"fas fa-volume-up ml-5 text-gray-600"})]}),h.jsx("hr",{className:"border-2 mb-2"}),h.jsx("p",{children:t})]}),h.jsxs("div",{className:"mt-10 text-center flex justify-between",children:[h.jsx("button",{onClick:c,className:"px-6 py-2 border justify-end text-white rounded-lg hover:bg-gray-500",children:"Previous Article"}),h.jsx("button",{onClick:l,className:"px-6 py-2 border justify-end text-white rounded-lg hover:bg-gray-500",children:"Next Article"})]})]})}),s&&h.jsx("button",{onClick:a,className:"fixed bottom-6 right-6 w-12 h-12 bg-gray-600 text-white rounded-full shadow-lg flex items-center justify-center hover:bg-gray-800 transition-all duration-300",children:h.jsx("i",{className:"fas fa-arrow-up"})})]})},npe=Mt(tpe),ipe=[{id:"education",title:"Education",subtitle:"ARTICLE XIV - Education, Science and Technology, Arts, Culture, and Sports",sections:[{name:"Section 1",paragraph:"The State shall protect and promote the right of all citizens to quality education at all levels and shall take appropriate steps to make such education accessible to all."},{name:"Section 2",paragraph:["(1) Establish, maintain, and support a complete, adequate, and integrated system of education relevant to the needs of the people and society.","(2) Establish and maintain a system of free public education in the elementary and high school levels. Without limiting the natural right of parents to rear their children, elementary education is compulsory for all children of school age.","(3) Establish and maintain a system of scholarship grants, student loan programs, subsidies, and other incentives which shall be available to deserving students in both public and private schools, especially to the underprivileged.","(4) Encourage non-formal, informal, and indigenous learning systems, as well as self-learning, independent, and out-of-school study programs particularly those that respond to community needs.","(5) Provide adult citizens, the disabled, and out-of-school youth with training in civics, vocational efficiency, and other skills."]},{name:"Section 3",paragraph:["(1) All educational institutions shall include the study of the Constitution as part of the curricula.","(2) They shall inculcate patriotism and nationalism, foster love of humanity, respect for human rights, appreciation of the role of national heroes in the historical development of the country, teach the rights and duties of citizenship, strengthen ethical and spiritual values, develop moral character and personal discipline, encourage critical and creative thinking, broaden scientific and technological knowledge, and promote vocational efficiency.","(3) At the option expressed in writing by the parents or guardians, religion shall be allowed to be taught to their children or wards in public elementary and high schools within the regular class hours by instructors designated or approved by the religious authorities of the religion to which the children or wards belong, without additional cost to the Government."]},{name:"Section 4",paragraph:["(1) The State recognizes the complementary roles of public and private institutions in the educational system and shall exercise reasonable supervision and regulation of all educational institutions.","(2) Educational institutions, other than those established by religious groups and mission boards, shall be owned solely by citizens of the Philippines or corporations or associations at least sixty per centum of the capital of which is owned by such citizens. The Congress may, however, require increased Filipino equity participation in all educational institutions.","The control and administration of educational institutions shall be vested in citizens of the Philippines.","No educational institution shall be established exclusively for aliens and no group of aliens shall comprise more than one-third of the enrollment in any school. The provisions of this subsection shall not apply to schools established for foreign diplomatic personnel and their dependents and, unless otherwise provided by law, for other foreign temporary residents.","(3) All revenues and assets of non-stock, non-profit educational institutions used actually, directly, and exclusively for educational purposes shall be exempt from taxes and duties. Upon the dissolution or cessation of the corporate existence of such institutions, their assets shall be disposed of in the manner provided by law.","Proprietary educational institutions, including those cooperatively owned, may likewise be entitled to such exemptions subject to the limitations provided by law including restrictions on dividends and provisions for reinvestment.","(4) Subject to conditions prescribed by law, all grants, endowments, donations, or contributions used actually, directly, and exclusively for educational purposes shall be exempt from tax."]},{name:"Section 5",paragraph:["(1) The State shall take into account regional and sectoral needs and conditions and shall encourage local planning in the development of educational policies and programs.","(2) Academic freedom shall be enjoyed in all institutions of higher learning.","(3) Every citizen has a right to select a profession or course of study, subject to fair, reasonable, and equitable admission and academic requirements.","(4) The State shall enhance the right of teachers to professional advancement. Non-teaching academic and non-academic personnel shall enjoy the protection of the State.","(5) The State shall assign the highest budgetary priority to education and ensure that teaching will attract and retain its rightful share of the best available talents through adequate remuneration and other means of job satisfaction and fulfillment."]}]}],rpe=[{id:"language",title:"Language",subtitle:"ARTICLE XIV",sections:[{name:"Section 6",paragraph:"The national language of the Philippines is Filipino. As it evolves, it shall be further developed and enriched on the basis of existing Philippine and other languages. Subject to provisions of law and as the Congress may deem appropriate, the Government shall take steps to initiate and sustain the use of Filipino as a medium of official communication and as language of instruction in the educational system."},{name:"Section 7",paragraph:["For purposes of communication and instruction, the official languages of the Philippines are Filipino and, until otherwise provided by law, English.","The regional languages are the auxiliary official languages in the regions and shall serve as auxiliary media of instruction therein.","Spanish and Arabic shall be promoted on a voluntary and optional basis."]},{name:"Section 8",paragraph:"This Constitution shall be promulgated in Filipino and English and shall be translated into major regional languages, Arabic, and Spanish."},{name:"Section 9",paragraph:"The Congress shall establish a national language commission composed of representatives of various regions and disciplines which shall undertake, coordinate, and promote researches for the development, propagation, and preservation of Filipino and other languages."}]}],spe=[{id:"science_Tech",title:"Science and Technology",subtitle:"ARTICLE XIV",sections:[{name:"Section 10",paragraph:"Science and technology are essential for national development and progress. The State shall give priority to research and development, invention, innovation, and their utilization; and to science and technology education, training, and services. It shall support indigenous, appropriate, and self-reliant scientific and technological capabilities, and their application to the countrys productive systems and national life."},{name:"Section 11",paragraph:["The Congress may provide for incentives, including tax deductions, to encourage private participation in programs of basic and applied scientific research.","Scholarships, grants-in-aid, or other forms of incentives shall be provided to deserving science students, researchers, scientists, inventors, technologists, and specially gifted citizens."]},{name:"Section 12",paragraph:"The State shall regulate the transfer and promote the adaptation of technology from all sources for the national benefit. It shall encourage the widest participation of private groups, local governments, and community-based organizations in the generation and utilization of science and technology."},{name:"Section 13",paragraph:"The State shall protect and secure the exclusive rights of scientists, inventors, artists, and other gifted citizens to their intellectual property and creations, particularly when beneficial to the people, for such period as may be provided by law."}]}],ope=[{id:"arts_Culture",title:"Arts and Culture",subtitle:"ARTICLE XIV",sections:[{name:"Section 14",paragraph:"The State shall foster the preservation, enrichment, and dynamic evolution of a Filipino national culture based on the principle of unity in diversity in a climate of free artistic and intellectual expression."},{name:"Section 15",paragraph:"Arts and letters shall enjoy the patronage of the State. The State shall conserve, promote, and popularize the nations historical and cultural heritage and resources, as well as artistic creations."},{name:"Section 16",paragraph:"All the countrys artistic and historic wealth constitutes the cultural treasure of the nation and shall be under the protection of the State which may regulate its disposition."},{name:"Section 17",paragraph:"The State shall recognize, respect, and protect the rights of indigenous cultural communities to preserve and develop their cultures, traditions, and institutions. It shall consider these rights in the formulation of national plans and policies."},{name:"Section 18",paragraph:["(1) The State shall ensure equal access to cultural opportunities through the educational system, public or private cultural entities, scholarships, grants and other incentives, and community cultural centers, and other public venues.","(2) The State shall encourage and support researches and studies on the arts and culture."]}]}],ape=[{id:"sport",title:"Sports",subtitle:"ARTICLE XIV",sections:[{name:"Section 19",paragraph:["(1) The State shall promote physical education and encourage sports programs, league competitions, and amateur sports, including training for international competitions, to foster self-discipline, teamwork, and excellence for the development of a healthy and alert citizenry.","(2) All educational institutions shall undertake regular sports activities throughout the country in cooperation with athletic clubs and other sectors."]}]}],lpe=()=>{const n=Pt(),{selectedWord:e,definition:t,tooltipPosition:i,handleTextSelection:r}=bn(),[s,o]=V.useState(!1);V.useEffect(()=>{const u=()=>{window.scrollY>200?o(!0):o(!1)};return window.addEventListener("scroll",u),()=>window.removeEventListener("scroll",u)},[]);const a=()=>{window.scrollTo({top:0,behavior:"smooth"})},l=()=>{n("/articleFifteen")},c=()=>{n("/articleThirteen")};return h.jsxs("div",{className:"text-spacing-3 leading-relaxed tracking-wide",children:[h.jsx(vn,{children:h.jsxs("div",{children:[ipe.map(u=>h.jsxs("div",{className:"my-5",children:[h.jsx("h5",{className:W.paragraphSubText,children:u.subtitle}),h.jsx("h4",{className:`${W.headText} mb-10`,children:u.title}),h.jsx("div",{children:u.sections.map((p,m)=>h.jsxs("div",{className:"my-4",children:[h.jsx("h6",{className:W.paragraphSubText,children:p.name}),h.jsx("p",{onMouseUp:r,className:W.paragraphSubTextLower,children:p.paragraph})]},m))})]},u.id)),h.jsx("br",{}),rpe.map(u=>h.jsxs("div",{className:"my-5",children:[h.jsx("h5",{className:W.paragraphHeadText,children:u.title}),h.jsx("div",{children:u.sections.map((p,m)=>h.jsxs("div",{className:"my-4",children:[h.jsx("h6",{className:W.paragraphSubText,children:p.name}),h.jsx("p",{onMouseUp:r,className:W.paragraphSubTextLower,children:p.paragraph})]},m))})]},u.id)),h.jsx("br",{}),spe.map(u=>h.jsxs("div",{className:"my-5",children:[h.jsx("h5",{className:W.paragraphSubText,children:u.subtitle}),h.jsx("h4",{className:`${W.headText} mb-10`,children:u.title}),h.jsx("div",{children:u.sections.map((p,m)=>h.jsxs("div",{className:"my-4",children:[h.jsx("h6",{className:W.paragraphSubText,children:p.name}),h.jsx("p",{onMouseUp:r,className:W.paragraphSubTextLower,children:p.paragraph})]},m))})]},u.id)),h.jsx("br",{}),ope.map(u=>h.jsxs("div",{className:"my-5",children:[h.jsx("h5",{className:W.paragraphSubText,children:u.subtitle}),h.jsx("h4",{className:`${W.headText} mb-10`,children:u.title}),h.jsx("div",{children:u.sections.map((p,m)=>h.jsxs("div",{className:"my-4",children:[h.jsx("h6",{className:W.paragraphSubText,children:p.name}),h.jsx("p",{onMouseUp:r,className:W.paragraphSubTextLower,children:p.paragraph})]},m))})]},u.id)),h.jsx("br",{}),ape.map(u=>h.jsxs("div",{className:"my-5",children:[h.jsx("h5",{className:W.paragraphSubText,children:u.subtitle}),h.jsx("h4",{className:`${W.headText} mb-10`,children:u.title}),h.jsx("div",{children:u.sections.map((p,m)=>h.jsxs("div",{className:"my-4",children:[h.jsx("h6",{className:W.paragraphSubText,children:p.name}),h.jsx("p",{onMouseUp:r,className:W.paragraphSubTextLower,children:p.paragraph})]},m))})]},u.id)),h.jsx("br",{}),e&&h.jsxs("div",{className:"absolute text-left bg-white p-4 shadow-lg rounded-lg max-w-xs text-black",style:{left:i.left,top:i.top,zIndex:100},children:[h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsx("p",{className:W.dictionaryText,children:e}),h.jsx("i",{className:"fas fa-volume-up ml-5 text-gray-600"})]}),h.jsx("hr",{className:"border-2 mb-2"}),h.jsx("p",{children:t})]}),h.jsxs("div",{className:"mt-10 text-center flex justify-between",children:[h.jsx("button",{onClick:c,className:"px-6 py-2 border justify-end text-white rounded-lg hover:bg-gray-500",children:"Previous Article"}),h.jsx("button",{onClick:l,className:"px-6 py-2 border justify-end text-white rounded-lg hover:bg-gray-500",children:"Next Article"})]})]})}),s&&h.jsx("button",{onClick:a,className:"fixed bottom-6 right-6 w-12 h-12 bg-gray-600 text-white rounded-full shadow-lg flex items-center justify-center hover:bg-gray-800 transition-all duration-300",children:h.jsx("i",{className:"fas fa-arrow-up"})})]})},cpe=Mt(lpe),upe=[{id:"family",title:"The Family",subtitle:"ARTICLE XV",sections:[{name:"Section 1",paragraph:"The State recognizes the Filipino family as the foundation of the nation. Accordingly, it shall strengthen its solidarity and actively promote its total development."},{name:"Section 2",paragraph:"Marriage, as an inviolable social institution, is the foundation of the family and shall be protected by the State."},{name:"Section 3",paragraph:["(1) The right of spouses to found a family in accordance with their religious convictions and the demands of responsible parenthood.","(2) The right of children to assistance, including proper care and nutrition, and special protection from all forms of neglect, abuse, cruelty, exploitation, and other conditions prejudicial to their development.","(3) The right of the family to a family living wage and income.","(4) The right of families or family associations to participate in the planning and implementation of policies and programs that affect them."]},{name:"Section 4",paragraph:"The family has the duty to care for its elderly members but the State may also do so through just programs of social security."}]}],hpe=()=>{const n=Pt(),{selectedWord:e,definition:t,tooltipPosition:i,handleTextSelection:r}=bn(),[s,o]=V.useState(!1);V.useEffect(()=>{const u=()=>{window.scrollY>200?o(!0):o(!1)};return window.addEventListener("scroll",u),()=>window.removeEventListener("scroll",u)},[]);const a=()=>{window.scrollTo({top:0,behavior:"smooth"})},l=()=>{n("/articleSixteen")},c=()=>{n("/articleFourteen")};return h.jsxs("div",{className:"text-spacing-3 leading-relaxed tracking-wide",children:[h.jsx(vn,{children:h.jsxs("div",{children:[upe.map(u=>h.jsxs("div",{className:"my-5",children:[h.jsx("h5",{className:W.paragraphSubText,children:u.subtitle}),h.jsx("h4",{className:`${W.headText} mb-10`,children:u.title}),h.jsx("div",{children:u.sections.map((p,m)=>h.jsxs("div",{className:"my-4",children:[h.jsx("h6",{className:W.paragraphSubText,children:p.name}),h.jsx("p",{onMouseUp:r,className:W.paragraphSubTextLower,children:p.paragraph})]},m))})]},u.id)),e&&h.jsxs("div",{className:"absolute text-left bg-white p-4 shadow-lg rounded-lg max-w-xs text-black",style:{left:i.left,top:i.top,zIndex:100},children:[h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsx("p",{className:W.dictionaryText,children:e}),h.jsx("i",{className:"fas fa-volume-up ml-5 text-gray-600"})]}),h.jsx("hr",{className:"border-2 mb-2"}),h.jsx("p",{children:t})]}),h.jsxs("div",{className:"mt-10 text-center flex justify-between",children:[h.jsx("button",{onClick:c,className:"px-6 py-2 border justify-end text-white rounded-lg hover:bg-gray-500",children:"Previous Article"}),h.jsx("button",{onClick:l,className:"px-6 py-2 border justify-end text-white rounded-lg hover:bg-gray-500",children:"Next Article"})]})]})}),s&&h.jsx("button",{onClick:a,className:"fixed bottom-6 right-6 w-12 h-12 bg-gray-600 text-white rounded-full shadow-lg flex items-center justify-center hover:bg-gray-800 transition-all duration-300",children:h.jsx("i",{className:"fas fa-arrow-up"})})]})},dpe=Mt(hpe),fpe=[{id:"general_provisions",title:"General Provisions",subtitle:"ARTICLE XVI",sections:[{name:"Section 1",paragraph:"The flag of the Philippines shall be red, white, and blue, with a sun and three stars, as consecrated and honored by the people and recognized by law."},{name:"Section 2",paragraph:"The Congress may, by law, adopt a new name for the country, a national anthem, or a national seal, which shall all be truly reflective and symbolic of the ideals, history, and traditions of the people. Such law shall take effect only upon its ratification by the people in a national referendum."},{name:"Section 3",paragraph:"The State may not be sued without its consent."},{name:"Section 4",paragraph:"The Armed Forces of the Philippines shall be composed of a citizen armed force which shall undergo military training and serve, as may be provided by law. It shall keep a regular force necessary for the security of the State."},{name:"Section 5",paragraph:["(1) All members of the armed forces shall take an oath or affirmation to uphold and defend this Constitution.","(2) The State shall strengthen the patriotic spirit and nationalist consciousness of the military, and respect for peoples rights in the performance of their duty.","(3) Professionalism in the armed forces and adequate remuneration and benefits of its members shall be a prime concern of the State. The armed forces shall be insulated from partisan politics. No member of the military shall engage directly or indirectly in any partisan political activity, except to vote.","(4) No member of the armed forces in the active service shall, at any time, be appointed or designated in any capacity to a civilian position in the Government including government-owned or controlled corporations or any of their subsidiaries.","(5) Laws on retirement of military officers shall not allow extension of their service.","(6) The officers and men of the regular force of the armed forces shall be recruited proportionately from all provinces and cities as far as practicable.","(7) The tour of duty of the Chief of Staff of the armed forces shall not exceed three years. However, in times of war or other national emergency declared by the Congress, the President may extend such tour of duty."]},{name:"Section 6",paragraph:"The State shall establish and maintain one police force, which shall be national in scope and civilian in character, to be administered and controlled by a national police commission. The authority of local executives over the police units in their jurisdiction shall be provided by law."},{name:"Section 7",paragraph:"The State shall provide immediate and adequate care, benefits, and other forms of assistance to war veterans and veterans of military campaigns, their surviving spouses and orphans. Funds shall be provided therefor and due consideration shall be given them in the disposition of agricultural lands of the public domain and, in appropriate cases, in the utilization of natural resources."},{name:"Section 8",paragraph:"The State shall, from time to time, review to upgrade the pensions and other benefits due to retirees of both the government and the private sectors."},{name:"Section 9",paragraph:"The State shall protect consumers from trade malpractices and from substandard or hazardous products."},{name:"Section 10",paragraph:"The State shall provide the policy environment for the full development of Filipino capability and the emergence of communication structures suitable to the needs and aspirations of the nation and the balanced flow of information into, out of, and across the country, in accordance with a policy that respects the freedom of speech and of the press."},{name:"Section 11",paragraph:["(1) The ownership and management of mass media shall be limited to citizens of the Philippines, or to corporations, cooperatives or associations, wholly-owned and managed by such citizens. The Congress shall regulate or prohibit monopolies in commercial mass media when the public interest so requires. No combinations in restraint of trade or unfair competition therein shall be allowed.","(2) The advertising industry is impressed with public interest, and shall be regulated by law for the protection of consumers and the promotion of the general welfare. Only Filipino citizens or corporations or associations at least seventy per centum of the capital of which is owned by such citizens shall be allowed to engage in the advertising industry. The participation of foreign investors in the governing body of entities in such industry shall be limited to their proportionate share in the capital thereof, and all the executive and managing officers of such entities must be citizens of the Philippines."]},{name:"Section 12",paragraph:"The Congress may create a consultative body to advise the President on policies affecting indigenous cultural communities, the majority of the members of which shall come from such communities."}]}],ppe=()=>{const n=Pt(),{selectedWord:e,definition:t,tooltipPosition:i,handleTextSelection:r}=bn(),[s,o]=V.useState(!1);V.useEffect(()=>{const u=()=>{window.scrollY>200?o(!0):o(!1)};return window.addEventListener("scroll",u),()=>window.removeEventListener("scroll",u)},[]);const a=()=>{window.scrollTo({top:0,behavior:"smooth"})},l=()=>{n("/articleSeventeen")},c=()=>{n("/articleFifteen")};return h.jsxs("div",{className:"text-spacing-3 leading-relaxed tracking-wide",children:[h.jsx(vn,{children:h.jsxs("div",{children:[fpe.map(u=>h.jsxs("div",{className:"my-5",children:[h.jsx("h5",{className:W.paragraphSubText,children:u.subtitle}),h.jsx("h4",{className:`${W.headText} mb-10`,children:u.title}),h.jsx("div",{children:u.sections.map((p,m)=>h.jsxs("div",{className:"my-4",children:[h.jsx("h6",{className:W.paragraphSubText,children:p.name}),h.jsx("p",{onMouseUp:r,className:W.paragraphSubTextLower,children:p.paragraph})]},m))})]},u.id)),e&&h.jsxs("div",{className:"absolute text-left bg-white p-4 shadow-lg rounded-lg max-w-xs text-black",style:{left:i.left,top:i.top,zIndex:100},children:[h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsx("p",{className:W.dictionaryText,children:e}),h.jsx("i",{className:"fas fa-volume-up ml-5 text-gray-600"})]}),h.jsx("hr",{className:"border-2 mb-2"}),h.jsx("p",{children:t})]}),h.jsxs("div",{className:"mt-10 text-center flex justify-between",children:[h.jsx("button",{onClick:c,className:"px-6 py-2 border justify-end text-white rounded-lg hover:bg-gray-500",children:"Previous Article"}),h.jsx("button",{onClick:l,className:"px-6 py-2 border justify-end text-white rounded-lg hover:bg-gray-500",children:"Next Article"})]})]})}),s&&h.jsx("button",{onClick:a,className:"fixed bottom-6 right-6 w-12 h-12 bg-gray-600 text-white rounded-full shadow-lg flex items-center justify-center hover:bg-gray-800 transition-all duration-300",children:h.jsx("i",{className:"fas fa-arrow-up"})})]})},mpe=Mt(ppe),gpe=[{id:"amendment",title:"Amendments or Revisions",subtitle:"ARTICLE XVII",sections:[{name:"Section 1",paragraph:["Any amendment to, or revision of, this Constitution may be proposed by:","(1) The Congress, upon a vote of three-fourths of all its Members; or","(2) A constitutional convention."]},{name:"Section 2",paragraph:["Amendments to this Constitution may likewise be directly proposed by the people through initiative upon a petition of at least twelve per centum of the total number of registered voters, of which every legislative district must be represented by at least three per centum of the registered voters therein.","No amendment under this section shall be authorized within five years following the ratification of this Constitution nor oftener than once every five years thereafter.","The Congress shall provide for the implementation of the exercise of this right."]},{name:"Section 3",paragraph:["The Congress may, by a vote of two-thirds of all its Members, call a constitutional convention, or by a majority vote of all its Members, submit to the electorate the question of calling such a convention."]},{name:"Section 4",paragraph:["Any amendment to, or revision of, this Constitution under Section 1 hereof shall be valid when ratified by a majority of the votes cast in a plebiscite which shall be held not earlier than sixty days nor later than ninety days after the approval of such amendment or revision.","Any amendment under Section 2 hereof shall be valid when ratified by a majority of the votes cast in a plebiscite which shall be held not earlier than sixty days nor later than ninety days after the certification by the Commission on Elections of the sufficiency of the petition."]}]}],ype=()=>{const n=Pt(),{selectedWord:e,definition:t,tooltipPosition:i,handleTextSelection:r}=bn(),[s,o]=V.useState(!1);V.useEffect(()=>{const u=()=>{window.scrollY>200?o(!0):o(!1)};return window.addEventListener("scroll",u),()=>window.removeEventListener("scroll",u)},[]);const a=()=>{window.scrollTo({top:0,behavior:"smooth"})},l=()=>{n("/articleEighteen")},c=()=>{n("/articleSixteen")};return h.jsxs("div",{className:"text-spacing-3 leading-relaxed tracking-wide",children:[h.jsx(vn,{children:h.jsxs("div",{children:[gpe.map(u=>h.jsxs("div",{className:"my-5",children:[h.jsx("h5",{className:W.paragraphSubText,children:u.subtitle}),h.jsx("h4",{className:`${W.headText} mb-10`,children:u.title}),h.jsx("div",{children:u.sections.map((p,m)=>h.jsxs("div",{className:"my-4",children:[h.jsx("h6",{className:W.paragraphSubText,children:p.name}),h.jsx("p",{onMouseUp:r,className:W.paragraphSubTextLower,children:p.paragraph})]},m))})]},u.id)),e&&h.jsxs("div",{className:"absolute text-left bg-white p-4 shadow-lg rounded-lg max-w-xs text-black",style:{left:i.left,top:i.top,zIndex:100},children:[h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsx("p",{className:W.dictionaryText,children:e}),h.jsx("i",{className:"fas fa-volume-up ml-5 text-gray-600"})]}),h.jsx("hr",{className:"border-2 mb-2"}),h.jsx("p",{children:t})]}),h.jsxs("div",{className:"mt-10 text-center flex justify-between",children:[h.jsx("button",{onClick:c,className:"px-6 py-2 border justify-end text-white rounded-lg hover:bg-gray-500",children:"Previous Article"}),h.jsx("button",{onClick:l,className:"px-6 py-2 border justify-end text-white rounded-lg hover:bg-gray-500",children:"Next Article"})]})]})}),s&&h.jsx("button",{onClick:a,className:"fixed bottom-6 right-6 w-12 h-12 bg-gray-600 text-white rounded-full shadow-lg flex items-center justify-center hover:bg-gray-800 transition-all duration-300",children:h.jsx("i",{className:"fas fa-arrow-up"})})]})},vpe=Mt(ype),xpe=[{id:"transitory_provisions",title:"Transitory Provisions",subtitle:"ARTICLE XVIII",sections:[{name:"Section 1",paragraph:["The first elections of Members of the Congress under this Constitution shall be held on the second Monday of May, 1987.","The first local elections shall be held on a date to be determined by the President, which may be simultaneous with the election of the Members of the Congress. It shall include the election of all Members of the city or municipal councils in the Metropolitan Manila area."]},{name:"Section 2",paragraph:["The Senators, Members of the House of Representatives, and the local officials first elected under this Constitution shall serve until noon of June 30, 1992.","Of the Senators elected in the election of 1992, the first twelve obtaining the highest number of votes shall serve for six years and the remaining twelve for three years."]},{name:"Section 3",paragraph:"All existing laws, decrees, executive orders, proclamations, letters of instructions, and other executive issuances not inconsistent with this Constitution shall remain operative until amended, repealed, or revoked."},{name:"Section 4",paragraph:"All existing treaties or international agreements which have not been ratified shall not be renewed or extended without the concurrence of at least two-thirds of all the Members of the Senate."},{name:"Section 5",paragraph:["The six-year term of the incumbent President and Vice-President elected in the February 7, 1986 election is, for purposes of synchronization of elections, hereby extended to noon of June 30, 1992.","The first regular elections for the President and Vice-President under this Constitution shall be held on the second Monday of May, 1992."]},{name:"Section 6",paragraph:"The incumbent President shall continue to exercise legislative powers until the first Congress is convened."},{name:"Section 7",paragraph:"Until a law is passed, the President may fill by appointment from a list of nominees by the respective sectors the seats reserved for sectoral representation in paragraph (2), Section 5 of Article VI of this Constitution."},{name:"Section 8",paragraph:"Until otherwise provided by the Congress, the President may constitute the Metropolitan Authority to be composed of the heads of all local government units comprising the Metropolitan Manila area."},{name:"Section 9",paragraph:"A sub-province shall continue to exist and operate until it is converted into a regular province or until its component municipalities are reverted to the mother province."},{name:"Section 10",paragraph:"All courts existing at the time of the ratification of this Constitution shall continue to exercise their jurisdiction, until otherwise provided by law. The provisions of the existing Rules of Court, judiciary acts, and procedural laws not inconsistent with this Constitution shall remain operative unless amended or repealed by the Supreme Court or the Congress."},{name:"Section 11",paragraph:"The incumbent Members of the Judiciary shall continue in office until they reach the age of seventy years or become incapacitated to discharge the duties of their office or are removed for cause."},{name:"Section 12",paragraph:"The Supreme Court shall, within one year after the ratification of this Constitution, adopt a systematic plan to expedite the decision or resolution of cases or matters pending in the Supreme Court or the lower courts prior to the effectivity of this Constitution. A similar plan shall be adopted for all special courts and quasi-judicial bodies."},{name:"Section 13",paragraph:"The legal effect of the lapse, before the ratification of this Constitution, of the applicable period for the decision or resolution of the cases or matters submitted for adjudication by the courts, shall be determined by the Supreme Court as soon as practicable."},{name:"Section 14",paragraph:"The provisions of paragraphs (3) and (4), Section 15 of Article VIII of this Constitution shall apply to cases or matters filed before the ratification of this Constitution, when the applicable period lapses after such ratification."},{name:"Section 15",paragraph:"The incumbent Members of the Civil Service Commission, the Commission on Elections, and the Commission on Audit shall continue in office for one year after the ratification of this Constitution, unless they are sooner removed for cause or become incapacitated to discharge the duties of their office or appointed to a new term thereunder. In no case shall any Member serve longer than seven years including service before the ratification of this Constitution."},{name:"Section 16",paragraph:"Career civil service employees separated from the service not for cause but as a result of the reorganization pursuant to Proclamation No. 3 dated March 25, 1986 and the reorganization following the ratification of this Constitution shall be entitled to appropriate separation pay and to retirement and other benefits accruing to them under the laws of general application in force at the time of their separation. In lieu thereof, at the option of the employees, they may be considered for employment in the Government or in any of its subdivisions, instrumentalities, or agencies, including government-owned or controlled corporations and their subsidiaries. This provision also applies to career officers whose resignation, tendered in line with the existing policy, had been accepted."},{name:"Section 17",paragraph:"Until the Congress provides otherwise, the President shall receive an annual salary of three hundred thousand pesos; the Vice-President, the President of the Senate, the Speaker of the House of Representatives, and the Chief Justice of the Supreme Court, two hundred forty thousand pesos each; the Senators, the Members of the House of Representatives, the Associate Justices of the Supreme Court, and the Chairmen of the Constitutional Commissions, two hundred four thousand pesos each; and the Members of the Constitutional Commissions, one hundred eighty thousand pesos each."},{name:"Section 18",paragraph:"At the earliest possible time, the Government shall increase the salary scales of the other officials and employees of the National Government."},{name:"Section 19",paragraph:"All properties, records, equipment, buildings, facilities, and other assets of any office or body abolished or reorganized under Proclamation No. 3 dated March 25, 1986 or this Constitution shall be transferred to the office or body to which its powers, functions, and responsibilities substantially pertain."},{name:"Section 20",paragraph:"The first Congress shall give priority to the determination of the period for the full implementation of free public secondary education."},{name:"Section 21",paragraph:"The Congress shall provide efficacious procedures and adequate remedies for the reversion to the State of all lands of the public domain and real rights connected therewith which were acquired in violation of the Constitution or the public land laws, or through corrupt practices. No transfer or disposition of such lands or real rights shall be allowed until after the lapse of one year from the ratification of this Constitution."},{name:"Section 22",paragraph:"At the earliest possible time, the Government shall expropriate idle or abandoned agricultural lands as may be defined by law, for distribution to the beneficiaries of the agrarian reform program."},{name:"Section 23",paragraph:"Advertising entities affected by paragraph (2), Section 11 of Article XVI of this Constitution shall have five years from its ratification to comply on a graduated and proportionate basis with the minimum Filipino ownership requirement therein."},{name:"Section 24",paragraph:"Private armies and other armed groups not recognized by duly constituted authority shall be dismantled. All paramilitary forces including Civilian Home Defense Forces not consistent with the citizen armed force established in this Constitution, shall be dissolved or, where appropriate, converted into the regular force."},{name:"Section 25",paragraph:"After the expiration in 1991 of the Agreement between the Republic of the Philippines and the United States of America concerning Military Bases, foreign military bases, troops, or facilities shall not be allowed in the Philippines except under a treaty duly concurred in by the Senate and, when the Congress so requires, ratified by a majority of the votes cast by the people in a national referendum held for that purpose, and recognized as a treaty by the other contracting State."},{name:"Section 26",paragraph:["The authority to issue sequestration or freeze orders under Proclamation No. 3 dated March 25, 1986 in relation to the recovery of ill-gotten wealth shall remain operative for not more than eighteen months after the ratification of this Constitution. However, in the national interest, as certified by the President, the Congress may extend said period.","A sequestration or freeze order shall be issued only upon showing of a prima facie case. The order and the list of the sequestered or frozen properties shall forthwith be registered with the proper court. For orders issued before the ratification of this Constitution, the corresponding judicial action or proceeding shall be filed within six months from its ratification. For those issued after such ratification, the judicial action or proceeding shall be commenced within six months from the issuance thereof.","The sequestration or freeze order is deemed automatically lifted if no judicial action or proceeding is commenced as herein provided."]},{name:"Section 27",paragraph:"This Constitution shall take effect immediately upon its ratification by a majority of the votes cast in a plebiscite held for the purpose and shall supersede all previous Constitutions."}]}],_pe=()=>{const n=Pt(),{selectedWord:e,definition:t,tooltipPosition:i,handleTextSelection:r}=bn(),[s,o]=V.useState(!1);V.useEffect(()=>{const c=()=>{window.scrollY>200?o(!0):o(!1)};return window.addEventListener("scroll",c),()=>window.removeEventListener("scroll",c)},[]);const a=()=>{window.scrollTo({top:0,behavior:"smooth"})},l=()=>{n("/articleSixteen")};return h.jsxs("div",{className:"text-spacing-3 leading-relaxed tracking-wide",children:[h.jsx(vn,{children:h.jsxs("div",{children:[xpe.map(c=>h.jsxs("div",{className:"my-5",children:[h.jsx("h5",{className:W.paragraphSubText,children:c.subtitle}),h.jsx("h4",{className:`${W.headText} mb-10`,children:c.title}),h.jsx("div",{children:c.sections.map((u,p)=>h.jsxs("div",{className:"my-4",children:[h.jsx("h6",{className:W.paragraphSubText,children:u.name}),h.jsx("p",{onMouseUp:r,className:W.paragraphSubTextLower,children:u.paragraph})]},p))})]},c.id)),e&&h.jsxs("div",{className:"absolute text-left bg-white p-4 shadow-lg rounded-lg max-w-xs text-black",style:{left:i.left,top:i.top,zIndex:100},children:[h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsx("p",{className:W.dictionaryText,children:e}),h.jsx("i",{className:"fas fa-volume-up ml-5 text-gray-600"})]}),h.jsx("hr",{className:"border-2 mb-2"}),h.jsx("p",{children:t})]}),h.jsx("div",{className:"mt-10 text-center flex justify-between",children:h.jsx("button",{onClick:l,className:"px-6 py-2 border justify-end text-white rounded-lg hover:bg-gray-500",children:"Previous Article"})})]})}),s&&h.jsx("button",{onClick:a,className:"fixed bottom-6 right-6 w-12 h-12 bg-gray-600 text-white rounded-full shadow-lg flex items-center justify-center hover:bg-gray-800 transition-all duration-300",children:h.jsx("i",{className:"fas fa-arrow-up"})})]})},wpe=Mt(_pe),bpe=[{id:"general_provisions",title:"General Provisions",subtitle:"Chapter I",sections:[{name:"Section 1",paragraph:"This Act shall be known as The Indigenous Peoples Rights Act of 1997."},{name:"Section 2",paragraph:"a. The State shall recognize and promote the rights of ICCs/IPs within the framework of national unity and development;"},{paragraph:"b. The State shall protect the rights of ICCs/IPs to their ancestral domains to ensure their economic, social and cultural well being and shall recognize the applicability of customary laws governing property rights or relations in determining the ownership and extent of ancestral domain;"},{paragraph:"c. The State shall recognize, respect and protect the rights of ICCs/IPs to preserve and develop their cultures, traditions and institutions. It shall consider these rights in the formulation of national laws and policies;"},{paragraph:"d. The State shall guarantee that members of the ICCs/IPs regardless of sex, shall equally enjoy the full measure of human rights and freedoms without distinction or discrimination;"},{paragraph:"e. The State shall take measures, with the participation of the ICCs/IPs concerned, to protect their rights and guarantee respect for their cultural integrity, and to ensure that members of the ICCs/IPs benefit on an equal footing from the rights and opportunities which national laws and regulations grant to other members of the population; and"},{paragraph:"f. The State recognizes its obligations to respond to the strong expression of the ICCs/IPs for cultural integrity by assuring maximum ICC/IP participation in the direction of education, health, as well as other services of ICCs/IPs, in order to render such services more responsive to the needs and desires of these communities."},{paragraph:["Towards these ends, the State shall institute and establish the necessary mechanisms to enforce and guarantee the realization of these rights, taking into consideration their customs, traditions, values, beliefs, interests and institutions, and to adopt and implement measures to protect their rights to their ancestral domains."]}]}],Spe=()=>{const n=Pt(),{selectedWord:e,definition:t,tooltipPosition:i,handleTextSelection:r}=bn(),[s,o]=V.useState(!1);V.useEffect(()=>{const c=()=>{window.scrollY>200?o(!0):o(!1)};return window.addEventListener("scroll",c),()=>window.removeEventListener("scroll",c)},[]);const a=()=>{window.scrollTo({top:0,behavior:"smooth"})},l=()=>{n("/chapterTwo")};return h.jsxs("div",{className:"text-spacing-3 leading-relaxed tracking-wide ",children:[h.jsx(vn,{children:h.jsxs("div",{children:[bpe.map(c=>h.jsxs("div",{className:"my-5",children:[h.jsx("h5",{className:W.paragraphSubText,children:c.subtitle}),h.jsx("h4",{className:`${W.headText} mb-10`,children:c.title}),h.jsx("div",{children:c.sections.map((u,p)=>h.jsxs("div",{className:"my-4",children:[h.jsx("h6",{className:W.paragraphSubText,children:u.name}),h.jsx("p",{onMouseUp:r,className:W.paragraphSubTextLower,children:u.paragraph})]},p))})]},c.id)),e&&h.jsxs("div",{className:"absolute text-left bg-white p-4 shadow-lg rounded-lg max-w-xs text-black",style:{left:i.left,top:i.top,zIndex:100},children:[h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsx("p",{className:W.dictionaryText,children:e}),h.jsx("i",{className:"fas fa-volume-up ml-5 text-gray-600"})]}),h.jsx("hr",{className:"border-2 mb-2"}),h.jsx("p",{children:t})]}),h.jsx("div",{className:"mt-5 text-center",children:h.jsx("button",{onClick:l,className:"px-6 py-2 border justify-end text-white rounded-lg hover:bg-gray-500 flex ml-auto",children:"Next Chapter"})})]})}),s&&h.jsx("button",{onClick:a,className:"fixed bottom-6 right-6 w-12 h-12 bg-gray-600 text-white rounded-full shadow-lg flex items-center justify-center hover:bg-gray-800 transition-all duration-300",children:h.jsx("i",{className:"fas fa-arrow-up"})})]})},Tpe=Mt(Spe),Epe=[{id:"definition",title:"Definition of Terms",subtitle:"Chapter II",sections:[{name:"Section 3",paragraph:"For purposes of this Act, the following terms shall mean:"},{name:"a. Ancestral Domains",paragraph:["Subject to Section 56 hereof, refer to all areas generally belonging to ICCs/IPs comprising lands, inland waters, coastal areas, and natural resources therein, held under a claim of ownership, occupied or possessed by ICCs/IPs, by themselves or through their ancestors, communally or individually since time immemorial, continuously to the present except when interrupted by war, force majeure or displacement by force, deceit, stealth or as a consequence of government projects or any other voluntary dealings entered into by government and private individuals/corporations, and which are necessary to ensure their economic, social and cultural welfare.","It shall include ancestral lands, forests, pasture, residential, agricultural, and other lands individually owned whether alienable and disposable or otherwise, hunting grounds, burial grounds, worship areas, bodies of water, mineral and other natural resources, and lands which may no longer be exclusively occupied by ICCs/IPs but from which they traditionally had access to for their subsistence and traditional activities, particularly the home ranges of ICCs/IPs who are still nomadic and/or shifting cultivators;"]},{name:"b. Ancestral Lands",paragraph:["Subject to Section 56 hereof, refers to land occupied, possessed and utilized by individuals, families and clans who are members of the ICCs/IPs since time immemorial, by themselves or through their predecessors-in-interest, under claims of individual or traditional group ownership, continuously, to the present except when interrupted by war, force majeure or displacement by force, deceit, stealth, or as a consequence of government projects and other voluntary dealings entered into by government and private individuals/corporations, including, but not limited to, residential lots, rice terraces or paddies, private forests, swidden farms and tree lots;"]},{name:"c. Certificate of Ancestral Domain Title",paragraph:["refers to a title formally recognizing the rights of possession and ownership of ICCs/IPs over their ancestral domains identified and delineated in accordance with this law;"]},{name:"d. Certificate of Ancestral Lands Title ",paragraph:["refers to a title formally recognizing the rights of ICCs/IPs over their ancestral lands;"]},{name:"e. Communal Claims",paragraph:[" refer to claims on land, resources and rights thereon, belonging to the whole community within a defined territory;"]},{name:"f. Customary Laws",paragraph:["refer to a body of written and/or unwritten rules, usages, customs and practices traditionally and continually recognized, accepted and observed by respective ICCs/IPs;"]},{name:"g. Free and Prior Informed Consent ",paragraph:[" as used in this Act shall mean the consensus of all members of the ICCs/IPs to be determined in accordance with their respective customary laws and practices, free from any external manipulation, interference and coercion, and obtained after fully disclosing the intent and scope of the activity, in a language and process understandable to the community;"]},{name:"h. Indigenous Cultural Communities/Indigenous Peoples",paragraph:["refer to a group of people or homogenous societies identified by self-ascription and ascription by others, who have continuously lived as organized community on communally bounded and defined territory, and who have, under claims of ownership since time immemorial, occupied, possessed and utilized such territories, sharing common bonds of language, customs, traditions and other distinctive cultural traits, or who have, through resistance to political, social and cultural inroads of colonization, non-indigenous religions and cultures, became historically differentiated from the majority of Filipinos. ","ICCs/IPs shall likewise include peoples who are regarded as indigenous on account of their descent from the populations which inhabited the country, at the time of conquest or colonization, or at the time of inroads of non-indigenous religions and cultures, or the establishment of present state boundaries, who retain some or all of their own social, economic, cultural and political institutions, but who may have been displaced from their traditional domains or who may have resettled outside their ancestral domains;"]},{name:"i. Indigenous Political Structures",paragraph:["refer to organizational and cultural leadership systems, institutions, relationships, patterns and processes for decision-making and participation, identified by ICCs/IPs such as, but not limited to, Council of Elders, Council of Timuays, Bodong Holders, or any other tribunal or body of similar nature;"]},{name:"j. Individual Claims",paragraph:[" refer to claims on land and rights thereon which have been devolved to individuals, families and clans including, but not limited to, residential lots, rice terraces or paddies and tree lots;"]},{name:"k. National Commission on Indigenous Peoples (NCIP) ",paragraph:["refers to the office created under this Act, which shall be under the Office of the President, and which shall be the primary government agency responsible for the formulation and implementation of policies, plans and programs to recognize, protect and promote the rights of ICCs/IPs;"]},{name:"l. Native Title",paragraph:["refers to pre-conquest rights to lands and domains which, as far back as memory reaches, have been held under a claim of private ownership by ICCs/IPs, have never been public lands and are thus indisputably presumed to have been held that way since before the Spanish Conquest;"]},{name:"m. Nongovernment Organization ",paragraph:["refers to a private, nonprofit voluntary organization that has been organized primarily for the delivery of various services to the ICCs/IPs and has an established track record for effectiveness and acceptability in the community where it serves;"]},{name:"n. Peoples Organization",paragraph:[" refers to a private, nonprofit voluntary organization of members of an ICC/IP which is accepted as representative of such ICCs/IPs;"]},{name:"o. Sustainable Traditional Resource Rights ",paragraph:["refer to the rights of ICCs/IPs to sustainably use, manage, protect and conserve a) land, air, water, and minerals; b) plants, animals and other organisms; c) collecting, fishing and hunting grounds; d) sacred sites; and e) other areas of economic, ceremonial and aesthetic value in accordance with their indigenous knowledge, beliefs, systems and practices; and"]},{name:"p. Time Immemorial ",paragraph:["refers to a period of time when as far back as memory can go, certain ICCs/IPs are known to have occupied, possessed in the concept of owner, and utilized a defined territory devolved to them, by operation of customary law or inherited from their ancestors, in accordance with their customs and traditions."]}]}],Cpe=()=>{const n=Pt(),{selectedWord:e,definition:t,tooltipPosition:i,handleTextSelection:r}=bn(),[s,o]=V.useState(!1);V.useEffect(()=>{const u=()=>{window.scrollY>200?o(!0):o(!1)};return window.addEventListener("scroll",u),()=>window.removeEventListener("scroll",u)},[]);const a=()=>{window.scrollTo({top:0,behavior:"smooth"})},l=()=>{n("/chapterThree")},c=()=>{n("/chapterOne")};return h.jsxs("div",{className:"text-spacing-3 leading-relaxed tracking-wide",children:[h.jsx(vn,{children:h.jsxs("div",{children:[Epe.map(u=>h.jsxs("div",{className:"my-5",children:[h.jsx("h5",{className:W.paragraphSubText,children:u.subtitle}),h.jsx("h4",{className:`${W.headText} mb-10`,children:u.title}),h.jsx("div",{children:u.sections.map((p,m)=>h.jsxs("div",{className:"my-4",children:[h.jsx("h6",{className:W.paragraphSubText,children:p.name}),h.jsx("p",{onMouseUp:r,className:W.paragraphSubTextLower,children:p.paragraph})]},m))})]},u.id)),e&&h.jsxs("div",{className:"absolute text-left bg-white p-4 shadow-lg rounded-lg max-w-xs text-black",style:{left:i.left,top:i.top,zIndex:100},children:[h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsx("p",{className:W.dictionaryText,children:e}),h.jsx("i",{className:"fas fa-volume-up ml-5 text-gray-600"})]}),h.jsx("hr",{className:"border-2 mb-2"}),h.jsx("p",{children:t})]}),h.jsxs("div",{className:"mt-10 text-center flex justify-between",children:[h.jsx("button",{onClick:c,className:"px-6 py-2 border justify-end text-white rounded-lg hover:bg-gray-500",children:"Previous Article"}),h.jsx("button",{onClick:l,className:"px-6 py-2 border justify-end text-white rounded-lg hover:bg-gray-500",children:"Next Article"})]})]})}),s&&h.jsx("button",{onClick:a,className:"fixed bottom-6 right-6 w-12 h-12 bg-gray-600 text-white rounded-full shadow-lg flex items-center justify-center hover:bg-gray-800 transition-all duration-300",children:h.jsx("i",{className:"fas fa-arrow-up"})})]})},Ape=Mt(Cpe),Mpe=[{id:"domains",title:"Rights to Ancestral Domains",subtitle:"Chapter III",sections:[{name:"Section 4",subtitle:"Concept of Ancestral Lands/Domains.",paragraph:"Ancestral lands/domains shall include such concepts of territories which cover not only the physical environment but the total environment including the spiritual and cultural bonds to the areas which the ICCs/IPs possess, occupy and use and to which they have claims of ownership."},{name:"Section 5",subtitle:"Indigenous Concept of Ownership.",paragraph:"Indigenous concept of ownership sustains the view that ancestral domains and all resources found therein shall serve as the material bases of their cultural integrity. The indigenous concept of ownership generally holds that ancestral domains are the ICCs/IPs private but community property which belongs to all generations and therefore cannot be sold, disposed or destroyed. It likewise covers sustainable traditional resource rights."},{name:"Section 6",subtitle:"Composition of Ancestral Lands/Domains.",paragraph:"Ancestral lands and domains shall consist of all areas generally belonging to ICCs/IPs as referred under Sec. 3, items (a) and (b) of this Act."},{name:"Section 7",subtitle:"Rights to Ancestral Domains.",paragraph:[{sub_paragraph:"The rights of ownership and possession of ICCs/IPs to their ancestral domains shall be recognized and protected. Such rights shall include:",name:"a. Right of Ownership.",paragraph:"The right to claim ownership over lands, bodies of water traditionally and actually occupied by ICCs/IPs, sacred places, traditional hunting and fishing grounds, and all improvements made by them at any time within the domains;"},{name:"b. Right to Develop Lands and Natural Resources. 9",paragraph:"Subject to Section 56 hereof, right to develop, control and use lands and territories traditionally occupied, owned, or used; to manage and conserve natural resources within the territories and uphold the responsibilities for future generations; to benefit and share the profits from allocation and utilization of the natural resources found therein; the right to negotiate the terms and conditions for the exploration of natural resources in the areas for the purpose of ensuring ecological, environmental protection and the conservation measures, pursuant to national and customary laws; the right to an informed and intelligent participation in the formulation and implementation of any project, government or private, that will affect or impact upon the ancestral domains and to receive just and fair compensation for any damages which they may sustain as a result of the project; and the right to effective measures by the government to prevent any interference with, alienation and encroachment upon these rights;"},{name:"c. Right to Stay in the Territories",paragraph:"The right to stay in the territory and not to be removed therefrom. No ICCs/IPs will be relocated without their free and prior informed consent, nor through any means other than eminent domain. Where relocation is considered necessary as an exceptional measure, such relocation shall take place only with the free and prior informed consent of the ICCs/IPs concerned and whenever possible, they shall be guaranteed the right to return to their ancestral domains, as soon as the grounds for relocation cease to exist. When such return is not possible, as determined by agreement or through appropriate procedures, ICCs/IPs shall be provided in all possible cases with lands of quality and legal status at least equal to that of the land previously occupied by them, suitable to provide for their present needs and future development. Persons thus relocated shall likewise be fully compensated for any resulting loss or injury;"},{name:"d. Right in Case of Displacement",paragraph:"In case displacement occurs as a result of natural catastrophes, the State shall endeavor to resettle the displaced ICCs/IPs in suitable areas where they can have temporary life support systems: Provided, That the displaced ICCs/IPs shall have the right to return to their abandoned lands until such time that the normalcy and safety of such lands shall be determined: Provided, further, That should their ancestral domain cease to exist and normalcy and safety of the previous settlements are not possible, displaced ICCs/IPs shall enjoy security of tenure over lands to which they have been resettled: Provided, furthermore, That basic services and livelihood shall be provided to them to ensure that their needs are adequately addressed;"},{name:"e. Right to Regulate Entry of Migrants",paragraph:"Right to regulate the entry of migrant settlers and organizations into the domains;"},{name:"f. Right to Safe and Clean Air and Water.",paragraph:"For this purpose, the ICCs/IPs shall have access to integrated systems for the management of their inland waters and air space;"},{name:"g. Right to Claim Parts of Reservations",paragraph:" The right to claim parts of the ancestral domains which have been reserved for various purposes, except those reserved and intended for common public welfare and service; and"},{name:"h. Right to Resolve Conflict",paragraph:" Right to resolve land conflicts in accordance with customary laws of the area where the land is located, and only in default thereof shall the complaints be submitted to amicable settlement and to the Courts of Justice whenever necessary."}]},{name:"Section 8",subtitle:"Rights to Ancestral Lands.",paragraph:[{sub_paragraph:"The right of ownership and possession of the ICCs/IPs to their ancestral lands shall be recognized and protected.",name:"Right to transfer land/property.",paragraph:"Such right shall include the right to transfer land or property rights to/among members of the same ICCs/IPs, subject to customary laws and traditions of the community concerned."},{name:"Right to Redemption",paragraph:"In cases where it is shown that the transfer of land/property rights by virtue of any agreement or devise, to a non-member of the concerned ICCs/IPs is tainted by the vitiated consent of the ICCs/IPs, or is transferred for an unconscionable consideration or price, the transferor ICC/IP shall have the right to redeem the same within a period not exceeding fifteen (15) years from the date of transfer."}]},{name:"Section 9",subtitle:"Responsibilities of ICCs/IPs to their Ancestral Domains.",paragraph:[{sub_paragraph:"ICCs/IPs occupying a duly certified ancestral domain shall have the following responsibilities:",name:"a. Maintain Ecological Balance.",paragraph:" To preserve, restore, and maintain a balanced ecology in the ancestral domain by protecting the flora and fauna, watershed areas, and other reserves;"},{name:"b. Restore Denuded Areas",paragraph:"To actively initiate, undertake and participate in the reforestation of denuded areas and other development programs and projects subject to just and reasonable remuneration; and"},{name:"c. Observe Laws",paragraph:"To observe and comply with the provisions of this Act and the rules and regulations for its effective implementation."}]},{name:"Section 10",subtitle:"Unauthorized and Unlawful Intrusion.",paragraph:"Unauthorized and unlawful intrusion upon, or use of any portion of the ancestral domain, or any violation of the rights hereinbefore enumerated, shall be punishable under this law. Furthermore, the Government shall take measures to prevent non-ICCs/IPs from taking advantage of the ICCs/IPs customs or lack of understanding of laws to secure ownership, possession of land belonging to said ICCs/IPs."},{name:"Section 11",subtitle:"Recognition of Ancestral Domain Rights.",paragraph:"The rights of ICCs/IPs to their ancestral domains by virtue of Native Title shall be recognized and respected. Formal recognition, when solicited by ICCs/IPs concerned, shall be embodied in a Certificate of Ancestral Domain Title (CADT), which shall recognize the title of the concerned ICCs/IPs over the territories identified and delineated."},{name:"Section 12",subtitle:"Option to Secure Certificate of Title Under Commonwealth Act 141, as amended, or the Land Registration Act 496.",paragraph:["Individual members of cultural communities, with respect to their individually-owned ancestral lands who, by themselves or through their predecessors-in-interest, have been in continuous possession and occupation of the same in the concept of owner since time immemorial or for a period of not less than thirty (30) years immediately preceding the approval of this Act and uncontested by the members of the same ICCs/IPs shall have the option to secure title to their ancestral lands under the provisions of Commonwealth Act 141, as amended, or the Land Registration Act 496.","For this purpose, said individually-owned ancestral lands, which are agricultural in character and actually used for agricultural, residential, pasture, and tree farming purposes, including those with a slope of eighteen percent (18%) or more, are hereby classified as alienable and disposable agricultural lands.","The option granted under this section shall be exercised within twenty (20) years from the approval of this Act."]}]}],Ipe=()=>{const n=Pt(),{selectedWord:e,definition:t,tooltipPosition:i,handleTextSelection:r}=bn(),[s,o]=V.useState(!1);V.useEffect(()=>{const u=()=>{window.scrollY>200?o(!0):o(!1)};return window.addEventListener("scroll",u),()=>window.removeEventListener("scroll",u)},[]);const a=()=>{window.scrollTo({top:0,behavior:"smooth"})},l=()=>{n("/chapterFour")},c=()=>{n("/chapterTwo")};return h.jsxs("div",{className:"text-spacing-3 leading-relaxed tracking-wide",children:[h.jsx(vn,{children:h.jsxs("div",{children:[Mpe.map(u=>h.jsxs("div",{className:"my-5",children:[h.jsx("h5",{className:W.paragraphSubText,children:u.subtitle}),h.jsx("h4",{className:`${W.headText} mb-10`,children:u.title}),u.sections.map((p,m)=>h.jsxs("div",{className:"my-4",children:[h.jsx("h6",{className:W.paragraphSubText,children:p.name}),h.jsx("h5",{className:W.paragraphSubText,children:p.subtitle}),Array.isArray(p.paragraph)?p.paragraph.map((g,x)=>h.jsxs("div",{className:"my-2",children:[h.jsx("h6",{className:W.paragraphSubText,children:g.name}),g.sub_paragraph&&h.jsx("p",{onMouseUp:r,className:W.paragraphSubText,children:h.jsx("strong",{children:g.sub_paragraph})}),h.jsx("p",{onMouseUp:r,className:W.paragraphSubTextLower,children:g.paragraph})]},x)):h.jsx("p",{onMouseUp:r,className:W.paragraphSubTextLower,children:p.paragraph})]},m))]},u.id)),e&&h.jsxs("div",{className:"absolute text-left bg-white p-4 shadow-lg rounded-lg max-w-xs text-black",style:{left:i.left,top:i.top,zIndex:100},children:[h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsx("p",{className:W.dictionaryText,children:e}),h.jsx("i",{className:"fas fa-volume-up ml-5 text-gray-600"})]}),h.jsx("hr",{className:"border-2 mb-2"}),h.jsx("p",{children:t})]}),h.jsxs("div",{className:"mt-10 text-center flex justify-between",children:[h.jsx("button",{onClick:c,className:"px-6 py-2 border justify-end text-white rounded-lg hover:bg-gray-500",children:"Previous Article"}),h.jsx("button",{onClick:l,className:"px-6 py-2 border justify-end text-white rounded-lg hover:bg-gray-500",children:"Next Article"})]})]})}),s&&h.jsx("button",{onClick:a,className:"fixed bottom-6 right-6 w-12 h-12 bg-gray-600 text-white rounded-full shadow-lg flex items-center justify-center hover:bg-gray-800 transition-all duration-300",children:h.jsx("i",{className:"fas fa-arrow-up"})})]})},Ppe=Mt(Ipe),Rpe=[{id:"self-governance",title:"Right to Self-Governance and Empowerment",subtitle:"Chapter IV",sections:[{name:"Section 13",paragraph:"The State recognizes the inherent right of ICCs/IPs to self-governance and self-determination and respects the integrity of their values, practices and institutions. Consequently, the State shall guarantee the right of ICCs/IPs to freely pursue their economic, social and cultural development."},{name:"Section 14",subtitle:"Support for Autonomous Regions.",paragraph:"The State shall continue to strengthen and support the autonomous regions created under the Constitution as they may require or need. The State shall likewise encourage other ICCs/IPs not included or outside Muslim Mindanao and the Cordilleras to use the form and content of their ways of life as may be compatible with the fundamental rights defined in the Constitution of the Republic of the Philippines and other internationally recognized human rights."},{name:"Section 15",subtitle:"Justice System, Conflict Resolution Institutions, and Peace Building Processes.",paragraph:"The ICCs/IPs shall have the right to use their own commonly accepted justice systems, conflict resolution institutions, peace building processes or mechanisms and other customary laws and practices within their respective communities and as may be compatible with the national legal system and with internationally recognized human rights."},{name:"Section 16",subtitle:"Right to Participate in Decision-Making.",paragraph:"ICCs/IPs have the right to participate fully, if they so choose, at all levels of decision-making in matters which may affect their rights, lives and destinies through procedures determined by them as well as to maintain and develop their own indigenous political structures. Consequently, the State shall ensure that the ICCs/IPs shall be given mandatory representation in policy-making bodies and other local legislative councils."},{name:"Section 17",subtitle:"Right to Determine and Decide Priorities for Development.",paragraph:"The ICCs/IPs shall have the right to determine and decide their own priorities for development affecting their lives, beliefs, institutions, spiritual well-being, and the lands they own, occupy or use. They shall participate in the formulation, implementation and evaluation of policies, plans and programs for national, regional and local development which may directly affect them."},{name:"Section 18",subtitle:"Tribal Barangays.",paragraph:"The ICCs/IPs living in contiguous areas or communities where they form the predominant population but which are located in municipalities, provinces or cities where they do not constitute the majority of the population, may form or constitute a separate barangay in accordance with the Local Government Code on the creation of tribal barangays."},{name:"Section 19",subtitle:"Role of Peoples Organizations.",paragraph:"The State shall recognize and respect the role of independent ICCs/IPs organizations to enable the ICCs/IPs to pursue and protect their legitimate and collective interests and aspirations through peaceful and lawful means."},{name:"Section 20",subtitle:"Means for Development/Empowerment of ICCs/IPs.",paragraph:"The Government shall establish the means for the full development/empowerment of the ICCs/IPs own institutions and initiatives and, where necessary, provide the resources needed therefor."}]}],Npe=()=>{const n=Pt(),{selectedWord:e,definition:t,tooltipPosition:i,handleTextSelection:r}=bn(),[s,o]=V.useState(!1);V.useEffect(()=>{const u=()=>{window.scrollY>200?o(!0):o(!1)};return window.addEventListener("scroll",u),()=>window.removeEventListener("scroll",u)},[]);const a=()=>{window.scrollTo({top:0,behavior:"smooth"})},l=()=>{n("/chapterFive")},c=()=>{n("/chapterThree")};return h.jsxs("div",{className:"text-spacing-3 leading-relaxed tracking-wide",children:[h.jsx(vn,{children:h.jsxs("div",{children:[Rpe.map(u=>h.jsxs("div",{className:"my-5",children:[h.jsx("h5",{className:W.paragraphSubText,children:u.subtitle}),h.jsx("h4",{className:`${W.headText} mb-10`,children:u.title}),h.jsx("div",{children:u.sections.map((p,m)=>h.jsxs("div",{className:"my-4",children:[h.jsxs("h6",{className:W.paragraphSubText,children:[p.name," ",p.subtitle]}),h.jsx("p",{onMouseUp:r,className:W.paragraphSubTextLower,children:p.paragraph})]},m))})]},u.id)),e&&h.jsxs("div",{className:"absolute text-left bg-white p-4 shadow-lg rounded-lg max-w-xs text-black",style:{left:i.left,top:i.top,zIndex:100},children:[h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsx("p",{className:W.dictionaryText,children:e}),h.jsx("i",{className:"fas fa-volume-up ml-5 text-gray-600"})]}),h.jsx("hr",{className:"border-2 mb-2"}),h.jsx("p",{children:t})]}),h.jsxs("div",{className:"mt-10 text-center flex justify-between",children:[h.jsx("button",{onClick:c,className:"px-6 py-2 border justify-end text-white rounded-lg hover:bg-gray-500",children:"Previous Article"}),h.jsx("button",{onClick:l,className:"px-6 py-2 border justify-end text-white rounded-lg hover:bg-gray-500",children:"Next Article"})]})]})}),s&&h.jsx("button",{onClick:a,className:"fixed bottom-6 right-6 w-12 h-12 bg-gray-600 text-white rounded-full shadow-lg flex items-center justify-center hover:bg-gray-800 transition-all duration-300",children:h.jsx("i",{className:"fas fa-arrow-up"})})]})},Dpe=Mt(Npe),Lpe=[{id:"general_provisions",title:"Social Justice and Human Rights",subtitle:"Chapter V",sections:[{name:"Section 21",subtitle:"Equal Protection and Non-discrimination of ICCs/IPs.",paragraph:["Consistent with the equal protection clause of the Constitution of the Republic of the Philippines, the Charter of the United Nations, the Universal Declaration of Human Rights including the Convention on the Elimination of Discrimination Against Women and International Human Rights Law, the State shall, with due recognition of their distinct characteristics and identity, accord to the members of the ICCs/IPs the rights, protections and privileges enjoyed by the rest of the citizenry. ","It shall extend to them the same employment rights, opportunities, basic services, educational and other rights and privileges available to every member of the society. Accordingly, the State shall likewise ensure that the employment of any form of force or coercion against ICCs/IPs shall be dealt with by law.","The State shall ensure that the fundamental human rights and freedoms as enshrined in the Constitution and relevant international instruments are guaranteed also to indigenous women. Towards this end, no provision in this Act shall be interpreted so as to result in the diminution of rights and privileges already recognized and accorded to women under existing laws of general application."]},{name:"Section 22",subtitle:"Rights During Armed Conflict.",paragraph:"ICCs/IPs have the right to special protection and security in periods of armed conflict. The State shall observe international standards, in particular, the Fourth Geneva Convention of 1949, for the protection of civilian populations in circumstances of emergency and armed conflict, and shall not recruit members of the ICCs/IPs against their will into the armed forces, and in particular, for use against other ICCs/IPs; nor recruit children of ICCs/IPs into the armed forces under any circumstance; nor force indigenous individuals to abandon their lands, territories and means of subsistence, or relocate them in special centers for military purposes under any discriminatory condition."},{name:"Section 23",subtitle:"Right to Participate in Decision-Making.",paragraph:"ICCs/IPs have the right to participate fully, if they so choose, at all levels of decision-making in matters which may affect their rights, lives and destinies through procedures determined by them as well as to maintain and develop their own indigenous political structures. Consequently, the State shall ensure that the ICCs/IPs shall be given mandatory representation in policy-making bodies and other local legislative councils."},{name:"Section 17",subtitle:"Freedom from Discrimination and Right to Equal Opportunity and Treatment.",paragraph:["It shall be the right of the ICCs/IPs to be free from any form of discrimination, with respect to recruitment and conditions of employment, such that they may enjoy equal opportunities for admission to employment, medical and social assistance, safety as well as other occupationally-related benefits, informed of their rights under existing labor legislation and of means available to them for redress, not subject to any coercive recruitment systems, including bonded labor and other forms of debt servitude; and equal treatment in employment for men and women, including the protection from sexual harassment.","Towards this end, the State shall, within the framework of national laws and regulations, and in cooperation with the ICCs/IPs concerned, adopt special measures to ensure the effective protection with regard to the recruitment and conditions of employment of persons belonging to these communities, to the extent that they are not effectively protected by laws applicable to workers in general.","ICCs/IPs shall have the right to association and freedom for all trade union activities and the right to conclude collective bargaining agreements with employers organizations. They shall likewise have the right not to be subject to working conditions hazardous to their health, particularly through exposure to pesticides and other toxic substances."]},{name:"Section 24",subtitle:"Unlawful Acts Pertaining to Employment.",sub_paragraph:"It shall be unlawful for any person:",paragraph:["a. To discriminate against any ICC/IP with respect to the terms and conditions of employment on account of their descent. Equal remuneration shall be paid to ICC/IP and non-ICC/IP for work of equal value; and","b. To deny any ICC/IP employee any right or benefit herein provided for or to discharge them for the purpose of preventing them from enjoying any of the rights or benefits provided under this Act."]},{name:"Section 25",subtitle:"Basic Services.",paragraph:"The ICCs/IPs have the right to special measures for the immediate, effective and continuing improvement of their economic and social conditions, including in the areas of employment, vocational training and retraining, housing, sanitation, health and social security. Particular attention shall be paid to the rights and special needs of indigenous women, elderly, youth, children and differently-abled persons. Accordingly, the State shall guarantee the right of ICCs/IPs to governments basic services which shall include, but not limited to, water and electrical facilities, education, health, and infrastructure."},{name:"Section 26",subtitle:"Women",paragraph:["ICC/IP women shall enjoy equal rights and opportunities with men, as regards the social, economic, political and cultural spheres of life. The participation of indigenous women in the decision-making process in all levels, as well as in the development of society, shall be given due respect and recognition.","The State shall provide full access to education, maternal and child care, health and nutrition, and housing services to indigenous women. Vocational, technical, professional and other forms of training shall be provided to enable these women to fully participate in all aspects of social life. As far as possible, the State shall ensure that indigenous women have access to all services in their own languages."]},{name:"Section 27",subtitle:"Children and Youth.",paragraph:"The State shall recognize the vital role of the children and youth of ICCs/IPs in nation-building and shall promote and protect their physical, moral, spiritual, intellectual and social well-being. Towards this end, the State shall support all government programs intended for the development and rearing of the children and youth of ICCs/IPs for civic efficiency and establish such mechanisms as may be necessary for the protection of the rights of the indigenous children and youth."},{name:"Section 28",subtitle:"Integrated System of Education.",paragraph:"The State shall, through the NCIP, provide a complete, adequate and integrated system of education, relevant to the needs of the children and young people of ICCs/IPs."}]}],kpe=()=>{const n=Pt(),{selectedWord:e,definition:t,tooltipPosition:i,handleTextSelection:r}=bn(),[s,o]=V.useState(!1);V.useEffect(()=>{const u=()=>{window.scrollY>200?o(!0):o(!1)};return window.addEventListener("scroll",u),()=>window.removeEventListener("scroll",u)},[]);const a=()=>{window.scrollTo({top:0,behavior:"smooth"})},l=()=>{n("/chapterSix")},c=()=>{n("/chapterFour")};return h.jsxs("div",{className:"text-spacing-3 leading-relaxed tracking-wide",children:[h.jsx(vn,{children:h.jsxs("div",{children:[Lpe.map(u=>h.jsxs("div",{className:"my-5",children:[h.jsx("h5",{className:W.paragraphSubText,children:u.subtitle}),h.jsx("h4",{className:`${W.headText} mb-10`,children:u.title}),h.jsx("div",{children:u.sections.map((p,m)=>h.jsxs("div",{className:"my-4",children:[h.jsxs("h6",{className:W.paragraphSubText,children:[p.name," ",p.subtitle]}),h.jsx("p",{onMouseUp:r,className:W.paragraphSubTextLower,children:p.paragraph})]},m))})]},u.id)),e&&h.jsxs("div",{className:"absolute text-left bg-white p-4 shadow-lg rounded-lg max-w-xs text-black",style:{left:i.left,top:i.top,zIndex:100},children:[h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsx("p",{className:W.dictionaryText,children:e}),h.jsx("i",{className:"fas fa-volume-up ml-5 text-gray-600"})]}),h.jsx("hr",{className:"border-2 mb-2"}),h.jsx("p",{children:t})]}),h.jsxs("div",{className:"mt-10 text-center flex justify-between",children:[h.jsx("button",{onClick:c,className:"px-6 py-2 border justify-end text-white rounded-lg hover:bg-gray-500",children:"Previous Article"}),h.jsx("button",{onClick:l,className:"px-6 py-2 border justify-end text-white rounded-lg hover:bg-gray-500",children:"Next Article"})]})]})}),s&&h.jsx("button",{onClick:a,className:"fixed bottom-6 right-6 w-12 h-12 bg-gray-600 text-white rounded-full shadow-lg flex items-center justify-center hover:bg-gray-800 transition-all duration-300",children:h.jsx("i",{className:"fas fa-arrow-up"})})]})},Ope=Mt(kpe),Upe=[{id:"integrity",title:"Cultural Integrity",subtitle:"Chapter VI",sections:[{name:"Section 29",subtitle:"Protection of Indigenous Culture, Traditions and Institutions.",paragraph:"The State shall respect, recognize and protect the right of ICCs/IPs to preserve and protect their culture, traditions and institutions. It shall consider these rights in the formulation and application of national plans and policies."},{name:"Section 30",subtitle:"Educational Systems.",paragraph:"The State shall provide equal access to various cultural opportunities to the ICCs/IPs through the educational system, public or private cultural entities, scholarships, grants and other incentives without prejudice to their right to establish and control their educational systems and institutions by providing education in their own language, in a manner appropriate to their cultural methods of teaching and learning. Indigenous children/youth shall have the right to all levels and forms of education of the State."},{name:"Section 31",subtitle:"Recognition of Cultural Diversity.",paragraph:"The State shall endeavor to have the dignity and diversity of the cultures, traditions, histories and aspirations of the ICCs/IPs appropriately reflected in all forms of education, public information and cultural-educational exchange. Consequently, the State shall take effective measures, in consultation with ICCs/IPs concerned, to eliminate prejudice and discrimination and to promote tolerance, understanding and good relations among ICCs/IPs and all segments of society. Furthermore, the Government shall take effective measures to ensure that the State-owned media duly reflect indigenous cultural diversity. The State shall likewise ensure the participation of appropriate indigenous leaders in schools, communities and international cooperative undertakings like festivals, conferences, seminars and workshops to promote and enhance their distinctive heritage and values."},{name:"Section 32",subtitle:"Community Intellectual Rights.",paragraph:"ICCs/IPs have the right to practice and revitalize their own cultural traditions and customs. The State shall preserve, protect and develop the past, present and future manifestations of their cultures as well as the right to the restitution of cultural, intellectual, religious, and spiritual property taken without their free and prior informed consent or in violation of their laws, traditions and customs."},{name:"Section 33",subtitle:"Rights to Religious, Cultural Sites and Ceremonies.",paragraph:["ICCs/IPs shall have the right to manifest, practice, develop, and teach their spiritual and religious traditions, customs and ceremonies; the right to maintain, protect and have access to their religious and cultural sites; the right to use and control of ceremonial objects; and, the right to the repatriation of human remains. Accordingly, the State shall take effective measures, in cooperation with the ICCs/IPs concerned, to ensure that indigenous sacred places, including burial sites, be preserved, respected and protected. To achieve this purpose, it shall be unlawful to:","a. Explore, excavate or make diggings on archeological sites of the ICCs/IPs for the purpose of obtaining materials of cultural values without the free and prior informed consent of the community concerned; and","b.Deface, remove or otherwise destroy artifacts which are of great importance to the ICCs/IPs for the preservation of their cultural heritage."]},{name:"Section 34",subtitle:"Right to Indigenous Knowledge Systems and Practices and to Develop own Sciences and Technologies.",paragraph:"ICCs/IPs are entitled to the recognition of the full ownership and control and protection of their cultural and intellectual rights. They shall have the right to special measures to control, develop and protect their sciences, technologies and cultural manifestations, including human and other genetic resources, seeds, including derivatives of these resources, traditional medicines and health practices, vital medicinal plants, animals and minerals, indigenous knowledge systems and practices, knowledge of the properties of fauna and flora, oral traditions, literature, designs, and visual and performing arts."},{name:"Section 35",subtitle:"Access to Biological and Genetic Resources.",paragraph:"Access to biological and genetic resources and to indigenous knowledge related to the conservation, utilization and enhancement of these resources, shall be allowed within ancestral lands and domains of the ICCs/IPs only with a free and prior informed consent of such communities, obtained in accordance with customary laws of the concerned community."},{name:"Section 36",subtitle:"Sustainable Agro-Technical Development.",paragraph:"The State shall recognize the right of ICCs/IPs to a sustainable agro-technological development and shall formulate and implement programs of action for its effective implementation. The State shall likewise promote the bio-genetic and resource management systems among the ICCs/IPs and shall encourage cooperation among government agencies to ensure the successful sustainable development of ICCs/IPs."},{name:"Section 36",subtitle:"Funds for Archeological and Historical Sites.",paragraph:"The ICCs/IPs shall have the right to receive from the national government all funds especially earmarked or allocated for the management and preservation of their archeological and historical sites and artifacts with the financial and technical support of the national government agencies."}]}],jpe=()=>{const n=Pt(),{selectedWord:e,definition:t,tooltipPosition:i,handleTextSelection:r}=bn(),[s,o]=V.useState(!1);V.useEffect(()=>{const u=()=>{window.scrollY>200?o(!0):o(!1)};return window.addEventListener("scroll",u),()=>window.removeEventListener("scroll",u)},[]);const a=()=>{window.scrollTo({top:0,behavior:"smooth"})},l=()=>{n("/chapterSeven")},c=()=>{n("/chapterFive")};return h.jsxs("div",{className:"text-spacing-3 leading-relaxed tracking-wide",children:[h.jsx(vn,{children:h.jsxs("div",{children:[Upe.map(u=>h.jsxs("div",{className:"my-5",children:[h.jsx("h5",{className:W.paragraphSubText,children:u.subtitle}),h.jsx("h4",{className:`${W.headText} mb-10`,children:u.title}),h.jsx("div",{children:u.sections.map((p,m)=>h.jsxs("div",{className:"my-4",children:[h.jsxs("h6",{className:W.paragraphSubText,children:[p.name," ",p.subtitle]}),h.jsx("p",{onMouseUp:r,className:W.paragraphSubTextLower,children:p.paragraph})]},m))})]},u.id)),e&&h.jsxs("div",{className:"absolute text-left bg-white p-4 shadow-lg rounded-lg max-w-xs text-black",style:{left:i.left,top:i.top,zIndex:100},children:[h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsx("p",{className:W.dictionaryText,children:e}),h.jsx("i",{className:"fas fa-volume-up ml-5 text-gray-600"})]}),h.jsx("hr",{className:"border-2 mb-2"}),h.jsx("p",{children:t})]}),h.jsxs("div",{className:"mt-10 text-center flex justify-between",children:[h.jsx("button",{onClick:c,className:"px-6 py-2 border justify-end text-white rounded-lg hover:bg-gray-500",children:"Previous Article"}),h.jsx("button",{onClick:l,className:"px-6 py-2 border justify-end text-white rounded-lg hover:bg-gray-500",children:"Next Article"})]})]})}),s&&h.jsx("button",{onClick:a,className:"fixed bottom-6 right-6 w-12 h-12 bg-gray-600 text-white rounded-full shadow-lg flex items-center justify-center hover:bg-gray-800 transition-all duration-300",children:h.jsx("i",{className:"fas fa-arrow-up"})})]})},Fpe=Mt(jpe),Vpe=[{id:"NCIP",title:"National Commission on Indigenous Peoples (NCIP)",subtitle:"Chapter VII",sections:[{name:"Section 38",subtitle:"National Commission on Indigenous Cultural Communities/Indigenous Peoples (NCIP).",paragraph:"To carry out the policies herein set forth, there shall be created the National Commission on ICCs/IPs (NCIP), which shall be the primary government agency responsible for the formulation and implementation of policies, plans and programs to promote and protect the rights and well-being of the ICCs/IPs and the recognition of their ancestral domains as well as the rights thereto."},{name:"Section 39",subtitle:"Mandate.",paragraph:"The NCIP shall protect and promote the interest and well-being of the ICCs/IPs with due regard to their beliefs, customs, traditions and institutions."},{name:"Section 40",subtitle:"Composition",paragraph:"The NCIP shall be an independent agency under the Office of the President and shall be composed of seven (7) Commissioners belonging to ICCs/IPs, one (1) of whom shall be the Chairperson. The Commissioners shall be appointed by the President of the Philippines from a list of recommendees submitted by authentic ICCs/IPs: Provided, That the seven (7) Commissioners shall be appointed specifically from each of the following ethnographic areas: Region I and the Cordilleras; Region II; the rest of Luzon; Island Groups including Mindoro, Palawan, Romblon, Panay and the rest of the Visayas; Northern and Western Mindanao; Southern and Eastern Mindanao; and Central Mindanao: Provided, That at least two (2) of the seven (7) Commissioners shall be women."},{name:"Section 41",subtitle:"Qualifications, Tenure, Compensation.",paragraph:["The Chairperson and the six (6) Commissioners must be natural born Filipino citizens, bona fide members of the ICCs/IPs as certified by his/her tribe, experienced in ethnic affairs and who have worked for at least ten (10) years with an ICC/IP community and/or any government agency involved in ICC/IP, at least 35 years of age at the time of appointment, and must be of proven honesty and integrity: Provided, That at least two (2) of the seven (7) Commissioners shall be members of the Philippine Bar: Provided, further, That the members of the NCIP shall hold office for a period of three (3) years, and may be subject to re-appointment for another term: Provided, furthermore, That no person shall serve for more than two (2) terms.","Appointment to any vacancy shall only be for the unexpired term of the predecessor and in no case shall a member be appointed or designated in a temporary or acting capacity: Provided, finally, That the Chairperson and the Commissioners shall be entitled to compensation in accordance with the Salary Standardization Law."]},{name:"Section 42",subtitle:"Removal from Office.",paragraph:"Any member of the NCIP may be removed from office by the President, on his own initiative or upon recommendation by any indigenous community, before the expiration of his term for cause and after complying with due process requirement of law."},{name:"Section 43",subtitle:"Appointment of Commissioners.",paragraph:"The President shall appoint the seven (7) Commissioners of the NCIP within ninety (90) days from the effectivity of this Act."}]}],Bpe=[{name:"Section 44",subtitle:"Powers and Functions.",sub_paragraphs:"To accomplish its mandate, the NCIP shall have the following powers, jurisdiction and function:",section:{paragraph:["a. To accomplish its mandate, the NCIP shall have the following powers, jurisdiction and function.","b. To review and assess the conditions of ICCs/IPs including existing laws and policies pertinent thereto and to propose relevant laws and policies to address their role in national development;","c. To formulate and implement policies, plans, programs and projects for the economic, social and cultural development of the ICCs/IPs and to monitor the implementation thereof;","d, To request and engage the services and support of experts from other agencies of government or employ private experts and consultants as may be required in the pursuit of its objectives;","e.To issue certificate of ancestral land/domain title;","f. Subject to existing laws, to enter into contracts, agreements, or arrangement, with government or private agencies or entities as may be necessary to attain the objectives of this Act, and subject to the approval of the President, to obtain loans from government lending institutions and other lending institutions to finance its programs;","g. To negotiate for funds and to accept grants, donations, gifts and/or properties in whatever form and from whatever source, local and international, subject to the approval of the President of the Philippines, for the benefit of ICCs/IPs and administer the same in accordance with the terms thereof; or in the absence of any condition, in such manner consistent with the interest of ICCs/IPs as well as existing laws;","h. To coordinate development programs and projects for the advancement of the ICCs/IPs and to oversee the proper implementation thereof;","i. To convene periodic conventions or assemblies of IPs to review, assess as well as propose policies or plans;","j. To advise the President of the Philippines on all matters relating to the ICCs/IPs and to submit within sixty (60) days after the close of each calendar year, a report of its operations and achievements;","k. To submit to Congress appropriate legislative proposals intended to carry out the policies under this Act;","l. To prepare and submit the appropriate budget to the Office of the President;","m. To issue appropriate certification as a pre-condition to the grant of permit, lease, grant, or any other similar authority for the disposition, utilization, management and appropriation by any private individual, corporate entity or any government agency, corporation or subdivision thereof on any part or portion of the ancestral domain taking into consideration the consensus approval of the ICCs/IPs concerned;","n. To decide all appeals from the decisions and acts of all the various offices within the Commission;","o. To promulgate the necessary rules and regulations for the implementation of this Act;","p. To exercise such other powers and functions as may be directed by the President of the Republic of the Philippines; and","q. To represent the Philippine ICCs/IPs in all international conferences and conventions dealing with indigenous peoples and other related concerns."]}}],zpe=[{name:"Section 45",subtitle:"Accessibility and Transparency.",paragraph:"Subject to such limitations as may be provided by law or by rules and regulations promulgated pursuant thereto, all official records, documents and papers pertaining to official acts, transactions or decisions, as well as research data used as basis for policy development of the Commission shall be made accessible to the public."}],Hpe=[{name:"Section 46",subtitle:"Offices within the NCIP.",sub_paragraphs:"The NCIP shall have the following offices which shall be responsible for the implementation of the policies hereinafter provided:",sections:[{name:"a. Ancestral Domains Office",paragraph:"The Ancestral Domain Office shall be responsible for the identification, delineation and recognition of ancestral lands/domains. It shall also be responsible for the management of ancestral lands/domains in accordance with a master plan as well as the implementation of the ancestral domain rights of the ICCs/IPs as provided in Chapter III of this Act. It shall also issue, upon the free and prior informed consent of the ICCs/IPs concerned, certification prior to the grant of any license, lease or permit for the exploitation of natural resources affecting the interests of ICCs/IPs or their ancestral domains and to assist the ICCs/IPs in protecting the territorial integrity of all ancestral domains. It shall likewise perform such other functions as the Commission may deem appropriate and necessary;"},{name:"b. Office on Policy, Planning and Research",paragraph:"The Office on Policy, Planning and Research shall be responsible for the formulation of appropriate policies and programs for ICCs/IPs such as, but not limited to, the development of a Five-Year Master Plan for the ICCs/IPs. Such plan shall undergo a process such that every five years, the Commission shall endeavor to assess the plan and make ramifications in accordance with the changing situations. The Office shall also undertake the documentation of customary law and shall establish and maintain a Research Center that would serve as a depository of ethnographic information for monitoring, evaluation and policy formulation. It shall assist the legislative branch of the national government in the formulation of appropriate legislation benefiting ICCs/IPs;"},{name:"c. Office of Education, Culture and Health",paragraph:["The Office on Culture, Education and Health shall be responsible for the effective implementation of the education, cultural and related rights as provided in this Act. It shall assist, promote and support community schools, both formal and non-formal, for the benefit of the local indigenous community, especially in areas where existing educational facilities are not accessible to members of the indigenous group. It shall administer all scholarship programs and other educational rights intended for ICC/IP beneficiaries in coordination with the Department of Education, Culture and Sports and the Commission on Higher Education. It shall undertake, within the limits of available appropriation, a special program which includes language and vocational training, public health and family assistance program and related subjects.","It shall also identify ICCs/IPs with potential training in the health profession and encourage and assist them to enroll in schools of medicine, nursing, physical therapy and other allied courses pertaining to the health profession.","Towards this end, the NCIP shall deploy a representative in each of the said offices who shall personally perform the foregoing task and who shall receive complaints from the ICCs/IPs and compel action from appropriate agency. It shall also monitor the activities of the National Museum and other similar government agencies generally intended to manage and preserve historical and archeological artifacts of the ICCs/IPs and shall be responsible for the implementation of such other functions as the NCIP may deem appropriate and necessary;"]},{name:"d. Office on Socio-Economic Services and Special Concerns",paragraph:"The Office on Socio-Economic Services and Special Concerns shall serve as the Office through which the NCIP shall coordinate with pertinent government agencies specially charged with the implementation of various basic socio-economic services, policies, plans and programs affecting the ICCs/IPs to ensure that the same are properly and directly enjoyed by them. It shall also be responsible for such other functions as the NCIP may deem appropriate and necessary;"},{name:"e. Office of Empowerment and Human Rights",paragraph:"The Office of Empowerment and Human Rights shall ensure that indigenous socio-political, cultural and economic rights are respected and recognized. It shall ensure that capacity building mechanisms are instituted and ICCs/IPs are afforded every opportunity, if they so choose, to participate in all levels of decision-making. It shall likewise ensure that the basic human rights, and such other rights as the NCIP may determine, subject to existing laws, rules and regulations, are protected and promoted;"},{name:"f. Administrative Office",paragraph:"The Administrative Office shall provide the NCIP with economical, efficient and effective services pertaining to personnel, finance, records, equipment, security, supplies and related services. It shall also administer the Ancestral Domains Fund; and"},{name:"g. Legal Affairs Office",paragraph:"There shall be a Legal Affairs Office which shall advice the NCIP on all legal matters concerning ICCs/IPs and which shall be responsible for providing ICCs/IPs with legal assistance in litigation involving community interest. It shall conduct preliminary investigation on the basis of complaints filed by the ICCs/IPs against a natural or juridical person believed to have violated ICCs/IPs rights. On the basis of its findings, it shall initiate the filing of appropriate legal or administrative action to the NCIP."}]}],Gpe=[{name:"Section 47",subtitle:"Other Offices.",paragraph:"The NCIP shall have the power to create additional offices as it may deem necessary subject to existing rules and regulations."},{name:"Section 48",subtitle:"Regional and Field Offices.",paragraph:"Existing regional and field offices shall remain to function under the strengthened organizational structure of the NCIP. Other field offices shall be created wherever appropriate and the staffing pattern thereof shall be determined by the NCIP: Provided, That in provinces where there are ICCs/IPs but without field offices, the NCIP shall establish field offices in said provinces."},{name:"Section 49",subtitle:"Office of the Executive Director.",paragraph:"The NCIP shall create the Office of the Executive Director which shall serve as its secretariat. The Office shall be headed by an Executive Director who shall be appointed by the President of the Republic of the Philippines upon recommendation of the NCIP on a permanent basis. The staffing pattern of the office shall be determined by the NCIP subject to the existing rules and regulations."},{name:"Section 50",subtitle:"Consultative Body.",paragraph:"A body consisting of the traditional leaders, elders and representatives from the women and youth sectors of the different ICCs/IPs shall be constituted by the NCIP from time to time to advise it on matters relating to the problems, aspirations and interests of the ICCs/IPs."}],Wpe=()=>{const n=Pt(),{selectedWord:e,definition:t,tooltipPosition:i,handleTextSelection:r}=bn(),[s,o]=V.useState(!1);V.useEffect(()=>{const u=()=>{window.scrollY>200?o(!0):o(!1)};return window.addEventListener("scroll",u),()=>window.removeEventListener("scroll",u)},[]);const a=()=>{window.scrollTo({top:0,behavior:"smooth"})},l=()=>n("/chapterEight"),c=()=>n("/ChapterSix");return h.jsxs("div",{children:[h.jsx(vn,{children:h.jsxs("div",{children:[Vpe.map(u=>h.jsxs("div",{className:"my-5",children:[h.jsx("h5",{className:W.paragraphSubText,children:u.subtitle}),h.jsx("h4",{className:`${W.headText} mb-10`,children:u.title}),h.jsx("div",{children:u.sections.map((p,m)=>h.jsxs("div",{className:"my-4",children:[h.jsxs("h6",{className:W.paragraphSubText,children:[p.name," ",p.subtitle]}),h.jsx("p",{onMouseUp:r,className:W.paragraphSubTextLower,children:p.paragraph})]},m))})]},u.id)),Bpe.map(u=>h.jsxs("div",{className:"my-5",children:[h.jsxs("h5",{className:W.paragraphSubText,children:[u.name," ",u.subtitle]}),h.jsxs("div",{children:[h.jsx("p",{onMouseUp:r,className:W.paragraphSubTextLower,children:u.sub_paragraphs}),h.jsx("br",{}),u.section.paragraph.map((p,m)=>h.jsx("p",{onMouseUp:r,className:W.paragraphSubTextLower,children:p},m))]})]},u.name)),zpe.map(u=>h.jsxs("div",{className:"my-5",children:[h.jsxs("h6",{className:W.paragraphSubText,children:[u.name," ",u.subtitle]}),h.jsx("p",{onMouseUp:r,className:W.paragraphSubTextLower,children:u.paragraph})]},u.name)),Hpe.map(u=>h.jsxs("div",{className:"my-5",children:[h.jsxs("h5",{className:W.paragraphSubText,children:[u.name," ",u.subtitle]}),h.jsx("p",{onMouseUp:r,className:W.paragraphSubTextLower,children:u.sub_paragraphs}),h.jsx("div",{children:u.sections.map((p,m)=>h.jsxs("div",{className:"my-4",children:[h.jsx("h6",{className:W.paragraphSubText,children:p.name}),h.jsx("p",{onMouseUp:r,className:W.paragraphSubTextLower,children:p.paragraph})]},m))})]},u.name)),Gpe.map(u=>h.jsxs("div",{className:"my-5",children:[h.jsxs("h5",{className:W.paragraphSubText,children:[u.name," ",u.subtitle]}),h.jsx("p",{onMouseUp:r,className:W.paragraphSubTextLower,children:u.paragraph})]},u.name)),e&&h.jsxs("div",{className:"absolute text-left bg-white p-4 shadow-lg rounded-lg max-w-xs text-black",style:{left:i.left,top:i.top,zIndex:100},children:[h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsx("p",{className:W.dictionaryText,children:e}),h.jsx("i",{className:"fas fa-volume-up ml-5 text-gray-600"})]}),h.jsx("hr",{className:"border-2 mb-2"}),h.jsx("p",{children:t})]}),h.jsxs("div",{className:"mt-10 text-center flex justify-between",children:[h.jsx("button",{onClick:c,className:"px-6 py-2 border text-white rounded-lg hover:bg-gray-500",children:"Previous Article"}),h.jsx("button",{onClick:l,className:"px-6 py-2 border text-white rounded-lg hover:bg-gray-500",children:"Next Article"})]})]})}),s&&h.jsx("button",{onClick:a,className:"fixed bottom-6 right-6 w-12 h-12 bg-gray-600 text-white rounded-full shadow-lg flex items-center justify-center hover:bg-gray-800 transition-all duration-300",children:h.jsx("i",{className:"fas fa-arrow-up"})})]})},qpe=Mt(Wpe),BT=[{id:"recognition",title:"Delineation and Recognition of Ancestral Domains",subtitle:"Chapter VIII",sections:[{name:"Section 51",subtitle:"Delineation and Recognition of Ancestral Domains.",paragraph:"Self-delineation shall be the guiding principle in the identification and delineation of ancestral domains. As such, the ICCs/IPs concerned shall have a decisive role in all the activities pertinent thereto. The Sworn Statement of the Elders as to the scope of the territories and agreements/pacts made with neighboring ICCs/IPs, if any, will be essential to the determination of these traditional territories. The Government shall take the necessary steps to identify lands which the ICCs/IPs concerned traditionally occupy and guarantee effective protection of their rights of ownership and possession thereto. Measures shall be taken in appropriate cases to safeguard the right of the ICCs/IPs concerned to land which may no longer be exclusively occupied by them, but to which they have traditionally had access for their subsistence and traditional activities, particularly of ICCs/IPs who are still nomadic and/or shifting cultivators."},{name:"Section 52",subtitle:"Delineation Process.",sub_paragraphs:"The identification and delineation of ancestral domains shall be done in accordance with the following procedures:",paragraph:[{name:"Ancestral Domains Delineated Prior to this Act.",paragraph:"The provisions hereunder shall not apply to ancestral domains/lands already delineated according to DENR Administrative Order No. 2, series of 1993, nor to ancestral lands and domains delineated under any other community/ancestral domain program prior to the enactment of this law. ICCs/IPs whose ancestral lands/domains were officially delineated prior to the enactment of this law shall have the right to apply for the issuance of a Certificate of Ancestral Domain Title (CADT) over the area without going through the process outlined hereunder;"},{name:"Petition for Delineation",paragraph:"The process of delineating a specific perimeter may be initiated by the NCIP with the consent of the ICC/IP concerned, or through a Petition for Delineation filed with the NCIP, by a majority of the members of the ICCs/IPs;"},{name:"Delineation Proper.",paragraph:"The official delineation of ancestral domain boundaries including census of all community members therein, shall be immediately undertaken by the Ancestral Domains Office upon filing of the application by the ICCs/IPs concerned. Delineation will be done in coordination with the community concerned and shall at all times include genuine involvement and participation by the members of the communities concerned;"},{name:"Proof Required",paragraph:["Proof of Ancestral Domain Claims shall include the testimony of elders or community under oath, and other documents directly or indirectly attesting to the possession or occupation of the area since time immemorial by such ICCs/IPs in the concept of owners which shall be any one (1) of the following authentic documents:","1. Written accounts of the ICCs/IPs customs and traditions","2. Written accounts of the ICCs/IPs political structure and institution;","3. Pictures showing long term occupation such as those of old improvements, burial grounds, sacred places and old villages;","4. Historical accounts, including pacts and agreements concerning boundaries entered into by the ICCs/IPs concerned with other ICCs/IPs;","5. Survey plans and sketch maps;","6. Anthropological data;","7. Genealogical surveys;","8. Pictures and descriptive histories of traditional communal forests and hunting grounds;","9. Pictures and descriptive histories of traditional landmarks such as mountains, rivers, creeks, ridges, hills, terraces and the like; and","10. Write-ups of names and places derived from the native dialect of the community."]},{name:"Preparation of Maps.",paragraph:"On the basis of such investigation and the findings of fact based thereon, the Ancestral Domains Office of the NCIP shall prepare a perimeter map, complete with technical descriptions, and a description of the natural features and landmarks embraced therein;"},{name:"Report of Investigation and Other Documents",paragraph:"A complete copy of the preliminary census and a report of investigation, shall be prepared by the Ancestral Domains Office of the NCIP;"},{name:"Notice and Publication",paragraph:"A copy of each document, including a translation in the native language of the ICCs/IPs concerned shall be posted in a prominent place therein for at least fifteen (15) days. A copy of the document shall also be posted at the local, provincial and regional offices of the NCIP, and shall be published in a newspaper of general circulation once a week for two (2) consecutive weeks to allow other claimants to file opposition thereto within fifteen (15) days from date of such publication: Provided, That in areas where no such newspaper exists, broadcasting in a radio station will be a valid substitute: Provided, further, That mere posting shall be deemed sufficient if both newspaper and radio station are not available;"},{name:"Endorsement to NCIP.",paragraph:" Within fifteen (15) days from publication, and of the inspection process, the Ancestral Domains Office shall prepare a report to the NCIP endorsing a favorable action upon a claim that is deemed to have sufficient proof. However, if the proof is deemed insufficient, the Ancestral Domains Office shall require the submission of additional evidence: Provided, That the Ancestral Domains Office shall reject any claim that is deemed patently false or fraudulent after inspection and verification: Provided, further, That in case of rejection, the Ancestral Domains Office shall give the applicant due notice, copy furnished all concerned, containing the grounds for denial. The denial shall be appealable to the NCIP: Provided, furthermore, That in cases where there are conflicting claims among ICCs/IPs on the boundaries of ancestral domain claims, the Ancestral Domains Office shall cause the contending parties to meet and assist them in coming up with a preliminary resolution of the conflict, without prejudice to its full adjudication according to the section below."},{name:"Turnover of Areas Within Ancestral Domains Managed by Other Government Agencies.",paragraph:" The Chairperson of the NCIP shall certify that the area covered is an ancestral domain. The secretaries of the Department of Agrarian Reform, Department of Environment and Natural Resources, Department of the Interior and Local Government, and Department of Justice, the Commissioner of the National Development Corporation, and any other government agency claiming jurisdiction over the area shall be notified thereof. Such notification shall terminate any legal basis for the jurisdiction previously claimed;"},{name:"Turnover of Areas Within Ancestral Domains Managed by Other Government Agencies.",paragraph:" The Chairperson of the NCIP shall certify that the area covered is an ancestral domain. The secretaries of the Department of Agrarian Reform, Department of Environment and Natural Resources, Department of the Interior and Local Government, and Department of Justice, the Commissioner of the National Development Corporation, and any other government agency claiming jurisdiction over the area shall be notified thereof. Such notification shall terminate any legal basis for the jurisdiction previously claimed;"},{name:"Issuance of CADT",paragraph:"ICCs/IPs whose ancestral domains have been officially delineated and determined by the NCIP shall be issued a CADT in the name of the community concerned, containing a list of all those identified in the census; and"},{name:"Registration of CADTs",paragraph:"The NCIP shall register issued certificates of ancestral domain titles and certificates of ancestral lands titles before the Register of Deeds in the place where the property is situated."}]},{name:"Section 53",subtitle:"Identification, Delineation and Certification of Ancestral Lands.",paragraph:["a. The allocation of lands within any ancestral domain to individual or indigenous corporate (family or clan) claimants shall be left to the ICCs/IPs concerned to decide in accordance with customs and traditions;","b. Individual and indigenous corporate claimants of ancestral lands which are not within ancestral domains, may have their claims officially established by filing applications for the identification and delineation of their claims with the Ancestral Domains Office. An individual or recognized head of a family or clan may file such application in his behalf or in behalf of his family or clan, respectively;","c. Proofs of such claims shall accompany the application form which shall include the testimony under oath of elders of the community and other documents directly or indirectly attesting to the possession or occupation of the areas since time immemorial by the individual or corporate claimants in the concept of owners which shall be any of the authentic documents enumerated under Sec. 52 (d) of this Act, including tax declarations and proofs of payment of taxes;","d. The Ancestral Domains Office may require from each ancestral claimant the submission of such other documents, Sworn Statements and the like, which in its opinion, may shed light on the veracity of the contents of the application/claim;","e. Upon receipt of the applications for delineation and recognition of ancestral land claims, the Ancestral Domains Office shall cause the publication of the application and a copy of each document submitted including a translation in the native language of the ICCs/IPs concerned in a prominent place therein for at least fifteen (15) days. A copy of the document shall also be posted at the local, provincial, and regional offices of the NCIP and shall be published in a newspaper of general circulation once a week for two (2) consecutive weeks to allow other claimants to file opposition thereto within fifteen (15) days from the date of such publication: Provided, That in areas where no such newspaper exists, broadcasting in a radio station will be a valid substitute: Provided, further, That mere posting shall be deemed sufficient if both newspapers and radio station are not available;","f. Fifteen (15) days after such publication, the Ancestral Domains Office shall investigate and inspect each application, and if found to be meritorious, shall cause a parcellary survey of the area being claimed. The Ancestral Domains Office shall reject any claim that is deemed patently false or fraudulent after inspection and verification. In case of rejection, the Ancestral Domains Office shall give the applicant due notice, copy furnished all concerned, containing the grounds for denial. The denial shall be appealable to the NCIP.","In case of conflicting claims among individuals or indigenous corporate claimants, the Ancestral Domains Office shall cause the contending parties to meet and assist them in coming up with a preliminary resolution of the conflict, without prejudice to its full adjudication according to Sec. 62 of this Act. In all proceedings for the identification or delineation of the ancestral domains as herein provided, the Director of Lands shall represent the interest of the Republic of the Philippines; and","g. The Ancestral Domains Office shall prepare and submit a report on each and every application surveyed and delineated to the NCIP, which shall, in turn, evaluate the report submitted. If the NCIP finds such claim meritorious, it shall issue a certificate of ancestral land, declaring and certifying the claim of each individual or corporate (family or clan) claimant over ancestral lands."]},{name:"Section 54",subtitle:"Fraudulent Claims.",paragraph:"The Ancestral Domains Office may, upon written request from the ICCs/IPs, review existing claims which have been fraudulently acquired by any person or community. Any claim found to be fraudulently acquired by, and issued to, any person or community may be cancelled by the NCIP after due notice and hearing of all parties concerned."},{name:"Section 55",subtitle:"Communal Rights.",paragraph:"Subject to Section 56 hereof, areas within the ancestral domains, whether delineated or not, shall be presumed to be communally held: Provided, That communal rights under this Act shall not be construed as co-ownership as provided in Republic Act No. 386, otherwise known as the New Civil Code."},{name:"Section 56",subtitle:"Existing Property Rights Regimes.",paragraph:"Property rights within the ancestral domains already existing and/or vested upon effectivity of this Act, shall be recognized and respected."},{name:"Section 57",sub_paragraphs:"Natural Resources within Ancestral Domains.",paragraph:"The ICCs/IPs shall have priority rights in the harvesting, extraction, development or exploitation of any natural resources within the ancestral domains. A non-member of the ICCs/IPs concerned may be allowed to take part in the development and utilization of the natural resources for a period of not exceeding twenty-five (25) years renewable for not more than twenty-five (25) years: Provided, That a formal and written agreement is entered into with the ICCs/IPs concerned or that the community, pursuant to its own decision making process, has agreed to allow such operation: Provided, finally, That the NCIP may exercise visitorial powers and take appropriate action to safeguard the rights of the ICCs/IPs under the same contract."},{name:"Section 58",subtitle:"Environmental Considerations.",paragraph:"Ancestral domains or portions thereof, which are found to be necessary for critical watersheds, mangroves, wildlife sanctuaries, wilderness, protected areas, forest cover, or reforestation as determined by appropriate agencies with the full participation of the ICCs/IPs concerned shall be maintained, managed and developed for such purposes. The ICCs/IPs concerned shall be given the responsibility to maintain, develop, protect and conserve such areas with the full and effective assistance of government agencies. Should the ICCs/IPs decide to transfer the responsibility over the areas, said decision must be made in writing. The consent of the ICCs/IPs should be arrived at in accordance with its customary laws without prejudice to the basic requirements of existing laws on free and prior informed consent: Provided, That the transfer shall be temporary and will ultimately revert to the ICCs/IPs in accordance with a program for technology transfer: Provided, further, That no ICCs/IPs shall be displaced or relocated for the purpose enumerated under this section without the written consent of the specific persons authorized to give consent."},{name:"Section 59",subtitle:"Certification Precondition.",paragraph:"All departments and other governmental agencies shall henceforth be strictly enjoined from issuing, renewing, or granting any concession, license or lease, or entering into any production-sharing agreement, without prior certification from the NCIP that the area affected does not overlap with any ancestral domain. Such certification shall only be issued after a field-based investigation is conducted by the Ancestral Domains Office of the area concerned: Provided, That no certification shall be issued by the NCIP without the free and prior informed and written consent of ICCs/IPs concerned: Provided, further, That no department, government agency or government-owned or -controlled corporation may issue new concession, license, lease, or production sharing agreement while there is a pending application for a CADT: Provided, finally, That the ICCs/IPs shall have the right to stop or suspend, in accordance with this Act, any project that has not satisfied the requirement of this consultation process."},{name:"Section 60",sub_paragraphs:"Exemption from Taxes.",paragraph:"All lands certified to be ancestral domains shall be exempt from real property taxes, special levies, and other forms of exaction except such portion of the ancestral domains as are actually used for large-scale agriculture, commercial forest plantation and residential purposes or upon titling by private persons: Provided, That all exactions shall be used to facilitate the development and improvement of the ancestral domains."},{name:"Section 61",subtitle:"Temporary Requisition Powers.",paragraph:"Prior to the establishment of an institutional surveying capacity whereby it can effectively fulfill its mandate, but in no case beyond three (3) years after its creation, the NCIP is hereby authorized to request the Department of Environment and Natural Resources (DENR) survey teams as well as other equally capable private survey teams, through a Memorandum of Agreement (MOA), to delineate ancestral domain perimeters. The DENR Secretary shall accommodate any such request within one (1) month of its issuance: Provided, That the Memorandum of Agreement shall stipulate, among others, a provision for technology transfer to the NCIP."},{name:"Section 62",subtitle:"Resolution of Conflicts.",paragraph:"In cases of conflicting interest, where there are adverse claims within the ancestral domains as delineated in the survey plan, and which can not be resolved, the NCIP shall hear and decide, after notice to the proper parties, the disputes arising from the delineation of such ancestral domains: Provided, That if the dispute is between and/or among ICCs/IPs regarding the traditional boundaries of their respective ancestral domains, customary process shall be followed. The NCIP shall promulgate the necessary rules and regulations to carry out its adjudicatory functions: Provided, further, That any decision, order, award or ruling of the NCIP on any ancestral domain dispute or on any matter pertaining to the application, implementation, enforcement and interpretation of this Act may be brought for Petition for Review to the Court of Appeals within fifteen (15) days from receipt of a copy thereof."},{name:"Section 63",subtitle:"Applicable Laws.",paragraph:"Customary laws, traditions and practices of the ICCs/IPs of the land where the conflict arises shall be applied first with respect to property rights, claims and ownerships, hereditary succession and settlement of land disputes. Any doubt or ambiguity in the application and interpretation of laws shall be resolved in favor of the ICCs/IPs."},{name:"Section 64",subtitle:"Remedial Measures.",paragraph:"Expropriation may be resorted to in the resolution of conflicts of interest following the principle of the common good. The NCIP shall take appropriate legal action for the cancellation of officially documented titles which were acquired illegally: Provided, That such procedure shall ensure that the rights of possessors in good faith shall be respected: Provided, further, That the action for cancellation shall be initiated within two (2) years from the effectivity of this Act: Provided, finally, That the action for reconveyance shall be within a period of ten (10) years in accordance with existing laws."}]}],$pe=()=>{const n=Pt(),{selectedWord:e,definition:t,tooltipPosition:i,handleTextSelection:r}=bn(),[s,o]=V.useState(!1);V.useEffect(()=>{const u=()=>{window.scrollY>200?o(!0):o(!1)};return window.addEventListener("scroll",u),()=>window.removeEventListener("scroll",u)},[]);const a=()=>{window.scrollTo({top:0,behavior:"smooth"})},l=()=>n("/chapterNine"),c=()=>n("/chapterSeven");return!BT||BT.length===0?h.jsx("div",{children:"No data available"}):h.jsxs("div",{className:"text-spacing-3 leading-relaxed tracking-wide",children:[h.jsx(vn,{children:h.jsxs("div",{children:[BT.map(u=>h.jsxs("div",{className:"my-5",children:[h.jsx("h5",{className:W.paragraphSubText,children:u.subtitle}),h.jsx("h4",{className:`${W.headText} mb-10`,children:u.title}),h.jsx("div",{children:u.sections?.map((p,m)=>h.jsxs("div",{className:"my-4",children:[h.jsxs("h6",{className:W.paragraphSubText,children:[p.name," ",p.subtitle]}),Array.isArray(p.paragraph)?h.jsx("div",{children:p.paragraph.map((g,x)=>h.jsxs("div",{className:"my-2",children:[h.jsx("h6",{className:W.paragraphSubTextLower,children:g.name}),h.jsx("p",{onMouseUp:r,className:W.paragraphSubTextLower,children:g.paragraph})]},x))}):h.jsx("p",{onMouseUp:r,className:W.paragraphSubTextLower,children:p.paragraph})]},m))})]},u.id)),e&&h.jsxs("div",{className:"absolute text-left bg-white p-4 shadow-lg rounded-lg max-w-xs text-black",style:{left:i.left,top:i.top,zIndex:100},children:[h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsx("p",{className:W.dictionaryText,children:e}),h.jsx("i",{className:"fas fa-volume-up ml-5 text-gray-600"})]}),h.jsx("hr",{className:"border-2 mb-2"}),h.jsx("p",{children:t})]}),h.jsxs("div",{className:"mt-10 text-center flex justify-between",children:[h.jsx("button",{onClick:c,className:"px-6 py-2 border text-white rounded-lg hover:bg-gray-500 transition duration-200",children:"Previous Article"}),h.jsx("button",{onClick:l,className:"px-6 py-2 border text-white rounded-lg hover:bg-gray-500 transition duration-200",children:"Next Article"})]})]})}),s&&h.jsx("button",{onClick:a,className:"fixed bottom-6 right-6 w-12 h-12 bg-gray-600 text-white rounded-full shadow-lg flex items-center justify-center hover:bg-gray-800 transition-all duration-300",children:h.jsx("i",{className:"fas fa-arrow-up"})})]})},Xpe=Mt($pe),Kpe=[{id:"enforcement",title:"Jurisdiction and Procedures for Enforcement of Rights",subtitle:"Chapter IX",sections:[{name:"Section 65",subtitle:"Primacy of Customary Laws and Practices.",paragraph:"When disputes involve ICCs/IPs, customary laws and practices shall be used to resolve the dispute."},{name:"Section 66",subtitle:"Primacy of Customary Laws and Practices.",paragraph:"The NCIP, through its regional offices, shall have jurisdiction over all claims and disputes involving rights of ICCs/IPs: Provided, however, That no such dispute shall be brought to the NCIP unless the parties have exhausted all remedies provided under their customary laws. For this purpose, a certification shall be issued by the Council of Elders/Leaders who participated in the attempt to settle the dispute that the same has not been resolved, which certification shall be a condition precedent to the filing of a petition with the NCIP."},{name:"Section 67",subtitle:"Appeals to the Court of Appeals.",paragraph:"Decisions of the NCIP shall be appealable to the Court of Appeals by way of a petition for review."},{name:"Section 68",subtitle:"Execution of Decisions, Awards, Orders.",paragraph:"Upon expiration of the period herein provided and no appeal is perfected by any of the contending parties, the Hearing Officer of the NCIP, on its own initiative or upon motion by the prevailing party, shall issue a writ of execution requiring the sheriff or the proper officer to execute final decisions, orders or awards of the Regional Hearing Officer of the NCIP."},{name:"Section 69",subtitle:"Quasi-Judicial Powers of the NCIP.",sub_paragraph:"The NCIP shall have the power and authority:",paragraph:["a. To promulgate rules and regulations governing the hearing and disposition of cases filed before it as well as those pertaining to its internal functions and such rules and regulations as may be necessary to carry out the purposes of this Act;","b. To administer oaths, summon the parties to a controversy, issue subpoenas requiring the attendance and testimony of witnesses or the production of such books, papers, contracts, records, agreements and other document of similar nature as may be material to a just determination of the matter under investigation or hearing conducted in pursuance of this Act;","c. To hold any person in contempt, directly or indirectly, and impose appropriate penalties therefor; and","d. To enjoin any or all acts involving or arising from any case pending before it which, if not restrained forthwith, may cause grave or irreparable damage to any of the parties to the case or seriously affect social or economic activity."]},{name:"Section 70",subtitle:"No Restraining Order or Preliminary Injunction.",paragraph:"No inferior court of the Philippines shall have jurisdiction to issue any restraining order or writ of preliminary injunction against the NCIP or any of its duly authorized or designated offices in any case, dispute or controversy arising from, necessary to, or interpretation of this Act and other pertinent laws relating to ICCs/IPs and ancestral domains."}]}],Ype=()=>{const n=Pt(),{selectedWord:e,definition:t,tooltipPosition:i,handleTextSelection:r}=bn(),[s,o]=V.useState(!1);V.useEffect(()=>{const u=()=>{window.scrollY>200?o(!0):o(!1)};return window.addEventListener("scroll",u),()=>window.removeEventListener("scroll",u)},[]);const a=()=>{window.scrollTo({top:0,behavior:"smooth"})},l=()=>{n("/chapterTen")},c=()=>{n("/chapterEight")};return h.jsxs("div",{className:"text-spacing-3 leading-relaxed tracking-wide",children:[h.jsx(vn,{children:h.jsxs("div",{children:[Kpe.map(u=>h.jsxs("div",{className:"my-5",children:[h.jsx("h5",{className:W.paragraphSubText,children:u.subtitle}),h.jsx("h4",{className:`${W.headText} mb-10`,children:u.title}),h.jsx("div",{children:u.sections.map((p,m)=>h.jsxs("div",{className:"my-4",children:[h.jsxs("h6",{className:W.paragraphSubText,children:[p.name," ",p.subtitle]}),h.jsx("p",{onMouseUp:r,className:W.paragraphSubTextLower,children:p.paragraph})]},m))})]},u.id)),e&&h.jsxs("div",{className:"absolute text-left bg-white p-4 shadow-lg rounded-lg max-w-xs text-black",style:{left:i.left,top:i.top,zIndex:100},children:[h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsx("p",{className:W.dictionaryText,children:e}),h.jsx("i",{className:"fas fa-volume-up ml-5 text-gray-600"})]}),h.jsx("hr",{className:"border-2 mb-2"}),h.jsx("p",{children:t})]}),h.jsxs("div",{className:"mt-10 text-center flex justify-between",children:[h.jsx("button",{onClick:c,className:"px-6 py-2 border justify-end text-white rounded-lg hover:bg-gray-500",children:"Previous Article"}),h.jsx("button",{onClick:l,className:"px-6 py-2 border justify-end text-white rounded-lg hover:bg-gray-500",children:"Next Article"})]})]})}),s&&h.jsx("button",{onClick:a,className:"fixed bottom-6 right-6 w-12 h-12 bg-gray-600 text-white rounded-full shadow-lg flex items-center justify-center hover:bg-gray-800 transition-all duration-300",children:h.jsx("i",{className:"fas fa-arrow-up"})})]})},Jpe=Mt(Ype),Qpe=[{id:"fund",title:"Ancestral Domains Fund",subtitle:"Chapter X",sections:[{name:"Section 71",subtitle:"Ancestral Domains Fund.",paragraph:"There is hereby created a special fund, to be known as the Ancestral Domains Fund, an initial amount of One hundred thirty million pesos (P130,000,000) to cover compensation for expropriated lands, delineation and development of ancestral domains. An amount of Fifty million pesos (P50,000,000) shall be sourced from the gross income of the Philippine Charity Sweepstakes Office (PCSO) from its lotto operation, Ten million pesos (P10,000,000) from the gross receipts of the travel tax of the preceding year, the fund of the Social Reform Council intended for survey and delineation of ancestral lands/domains, and such other source as the government may deem appropriate. Thereafter, such amount shall be included in the annual General Appropriations Act. Foreign as well as local funds which are made available for the ICCs/IPs through the government of the Philippines shall be coursed through the NCIP. The NCIP may also solicit and receive donations, endowments and grants in the form of contributions, and such endowments shall be exempted from income or gift taxes and all other taxes, charges or fees imposed by the government or any political subdivision or instrumentality thereof."}]}],Zpe=()=>{const n=Pt(),{selectedWord:e,definition:t,tooltipPosition:i,handleTextSelection:r}=bn(),[s,o]=V.useState(!1);V.useEffect(()=>{const u=()=>{window.scrollY>200?o(!0):o(!1)};return window.addEventListener("scroll",u),()=>window.removeEventListener("scroll",u)},[]);const a=()=>{window.scrollTo({top:0,behavior:"smooth"})},l=()=>{n("/chapterEleven")},c=()=>{n("/chapterNine")};return h.jsxs("div",{className:"text-spacing-3 leading-relaxed tracking-wide",children:[h.jsx(vn,{children:h.jsxs("div",{children:[Qpe.map(u=>h.jsxs("div",{className:"my-5",children:[h.jsx("h5",{className:W.paragraphSubText,children:u.subtitle}),h.jsx("h4",{className:`${W.headText} mb-10`,children:u.title}),h.jsx("div",{children:u.sections.map((p,m)=>h.jsxs("div",{className:"my-4",children:[h.jsxs("h6",{className:W.paragraphSubText,children:[p.name," ",p.subtitle]}),h.jsx("p",{onMouseUp:r,className:W.paragraphSubTextLower,children:p.paragraph})]},m))})]},u.id)),e&&h.jsxs("div",{className:"absolute text-left bg-white p-4 shadow-lg rounded-lg max-w-xs text-black",style:{left:i.left,top:i.top,zIndex:100},children:[h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsx("p",{className:W.dictionaryText,children:e}),h.jsx("i",{className:"fas fa-volume-up ml-5 text-gray-600"})]}),h.jsx("hr",{className:"border-2 mb-2"}),h.jsx("p",{children:t})]}),h.jsxs("div",{className:"mt-10 text-center flex justify-between",children:[h.jsx("button",{onClick:c,className:"px-6 py-2 border justify-end text-white rounded-lg hover:bg-gray-500",children:"Previous Article"}),h.jsx("button",{onClick:l,className:"px-6 py-2 border justify-end text-white rounded-lg hover:bg-gray-500",children:"Next Article"})]})]})}),s&&h.jsx("button",{onClick:a,className:"fixed bottom-6 right-6 w-12 h-12 bg-gray-600 text-white rounded-full shadow-lg flex items-center justify-center hover:bg-gray-800 transition-all duration-300",children:h.jsx("i",{className:"fas fa-arrow-up"})})]})},eme=Mt(Zpe),tme=[{id:"penalty",title:"Penalties",subtitle:"Chapter XI",sections:[{name:"Section 72",subtitle:"Punishable Acts and Applicable Penalties.",paragraph:"Any person who commits violation of any of the provisions of this Act, such as, but not limited to, unauthorized and/or unlawful intrusion upon any ancestral lands or domains as stated in Sec. 10, Chapter III, or shall commit any of the prohibited acts mentioned in Sections 21 and 24, Chapter V, Section 33, Chapter VI hereof, shall be punished in accordance with the customary laws of the ICCs/IPs concerned: Provided, That no such penalty shall be cruel, degrading or inhuman punishment: Provided, further, That neither shall the death penalty or excessive fines be imposed. This provision shall be without prejudice to the right of any ICCs/IPs to avail of the protection of existing laws. In which case, any person who violates any provision of this Act shall, upon conviction, be punished by imprisonment of not less than nine (9) months but not more than twelve (12) years or a fine of not less than One hundred thousand pesos (P100,000) nor more than Five hundred thousand pesos (P500,000) or both such fine and imprisonment upon the discretion of the court. In addition, he shall be obliged to pay to the ICCs/IPs concerned whatever damage may have been suffered by the latter as a consequence of the unlawful act."},{name:"Section 73",subtitle:"Persons Subject to Punishment.",paragraph:"If the offender is a juridical person, all officers such as, but not limited to, its president, manager, or head of office responsible for their unlawful act shall be criminally liable therefor, in addition to the cancellation of certificates of their registration and/or license: Provided, That if the offender is a public official, the penalty shall include perpetual disqualification to hold public office."}]}],nme=()=>{const n=Pt(),{selectedWord:e,definition:t,tooltipPosition:i,handleTextSelection:r}=bn(),[s,o]=V.useState(!1);V.useEffect(()=>{const u=()=>{window.scrollY>200?o(!0):o(!1)};return window.addEventListener("scroll",u),()=>window.removeEventListener("scroll",u)},[]);const a=()=>{window.scrollTo({top:0,behavior:"smooth"})},l=()=>{n("/chapterTwelve")},c=()=>{n("/chapterTen")};return h.jsxs("div",{className:"text-spacing-3 leading-relaxed tracking-wide",children:[h.jsx(vn,{children:h.jsxs("div",{children:[tme.map(u=>h.jsxs("div",{className:"my-5",children:[h.jsx("h5",{className:W.paragraphSubText,children:u.subtitle}),h.jsx("h4",{className:`${W.headText} mb-10`,children:u.title}),h.jsx("div",{children:u.sections.map((p,m)=>h.jsxs("div",{className:"my-4",children:[h.jsxs("h6",{className:W.paragraphSubText,children:[p.name," ",p.subtitle]}),h.jsx("p",{onMouseUp:r,className:W.paragraphSubTextLower,children:p.paragraph})]},m))})]},u.id)),e&&h.jsxs("div",{className:"absolute text-left bg-white p-4 shadow-lg rounded-lg max-w-xs text-black",style:{left:i.left,top:i.top,zIndex:100},children:[h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsx("p",{className:W.dictionaryText,children:e}),h.jsx("i",{className:"fas fa-volume-up ml-5 text-gray-600"})]}),h.jsx("hr",{className:"border-2 mb-2"}),h.jsx("p",{children:t})]}),h.jsxs("div",{className:"mt-10 text-center flex justify-between",children:[h.jsx("button",{onClick:c,className:"px-6 py-2 border justify-end text-white rounded-lg hover:bg-gray-500",children:"Previous Article"}),h.jsx("button",{onClick:l,className:"px-6 py-2 border justify-end text-white rounded-lg hover:bg-gray-500",children:"Next Article"})]})]})}),s&&h.jsx("button",{onClick:a,className:"fixed bottom-6 right-6 w-12 h-12 bg-gray-600 text-white rounded-full shadow-lg flex items-center justify-center hover:bg-gray-800 transition-all duration-300",children:h.jsx("i",{className:"fas fa-arrow-up"})})]})},ime=Mt(nme),rme=[{id:"penalty",title:"Merger of the Office for Northern Cultural Communities and the Office for Southern Cultural Communities",subtitle:"Chapter XII",sections:[{name:"Section 74",subtitle:"Merger of ONCC/OSCC.",paragraph:"The Office for Northern Cultural Communities (ONCC) and the Office of Southern Cultural Communities (OSCC), created under Executive Order Nos. 122-B and 122-C respectively, are hereby merged as organic offices of the NCIP and shall continue to function under a revitalized and strengthened structures to achieve the objectives of the NCIP: Provided, That the positions of Staff Directors, Bureau Directors, Deputy Executive Directors and Executive Directors, except positions of Regional Directors and below, are hereby phased-out upon the effectivity of this Act: Provided, further, That officials and employees of the phased-out offices who may be qualified may apply for reappointment with the NCIP and may be given prior rights in the filling up of the newly created positions of NCIP, subject to the qualifications set by the Placement Committee: Provided, furthermore, That in the case where an indigenous person and a non-indigenous person with similar qualifications apply for the same position, priority shall be given to the former. Officers and employees who are to be phased-out as a result of the merger of their offices shall be entitled to gratuity a rate equivalent to one and a half (1 ) months salary for every year of continuous and satisfactory service rendered or the equivalent nearest fraction thereof favorable to them on the basis of the highest salary received. If they are already entitled to retirement or gratuity, they shall have the option to select either such retirement benefits or the gratuity herein provided. Officers and employees who may be reinstated shall refund such retirement benefits or gratuity received: Provided, finally, That absorbed personnel must still meet the qualifications and standards set by the Civil Service and the Placement Committee herein created."},{name:"Section 75",subtitle:"Transition Period.",paragraph:"The ONCC/OSCC shall have a period of six (6) months from the effectivity of this Act within which to wind up its affairs and to conduct audit of its finances."},{name:"Section 76",subtitle:"Transfer of Assets/Properties.",paragraph:"All real and personal properties which are vested in, or belonging to, the merged offices as aforestated shall be transferred to the NCIP without further need of conveyance, transfer or assignment and shall be held for the same purpose as they were held by the former offices: Provided, That all contracts, records and documents relating to the operations of the merged offices shall be transferred to the NCIP. All agreements and contracts entered into by the merged offices shall remain in full force and effect unless otherwise terminated, modified or amended by the NCIP."},{name:"Section 77",subtitle:"Placement Committee.",paragraph:"Subject to rules on government reorganization, a Placement Committee shall be created by the NCIP, in coordination with the Civil Service Commission, which shall assist in the judicious selection and placement of personnel in order that the best qualified and most deserving persons shall be appointed in the reorganized agency. The Placement Committee shall be composed of seven (7) commissioners and an ICCs/IPs representative from each of the first and second level employees association in the Offices for Northern and Southern Cultural Communities (ONCC/OSCC), nongovernment organizations (NGOs) who have served the community for at least five (5) years and peoples organizations (POs) with at least five (5) years of existence. They shall be guided by the criteria of retention and appointment to be prepared by the consultative body and by the pertinent provisions of the civil service law."}]}],sme=()=>{const n=Pt(),{selectedWord:e,definition:t,tooltipPosition:i,handleTextSelection:r}=bn(),[s,o]=V.useState(!1);V.useEffect(()=>{const c=()=>{window.scrollY>200?o(!0):o(!1)};return window.addEventListener("scroll",c),()=>window.removeEventListener("scroll",c)},[]);const a=()=>{window.scrollTo({top:0,behavior:"smooth"})},l=()=>{n("/chapterEleven")};return h.jsxs("div",{className:"text-spacing-3 leading-relaxed tracking-wide",children:[h.jsx(vn,{children:h.jsxs("div",{children:[rme.map(c=>h.jsxs("div",{className:"my-5",children:[h.jsx("h5",{className:W.paragraphSubText,children:c.subtitle}),h.jsx("h4",{className:`${W.headText} mb-10`,children:c.title}),h.jsx("div",{children:c.sections.map((u,p)=>h.jsxs("div",{className:"my-4",children:[h.jsxs("h6",{className:W.paragraphSubText,children:[u.name," ",u.subtitle]}),h.jsx("p",{onMouseUp:r,className:W.paragraphSubTextLower,children:u.paragraph})]},p))})]},c.id)),e&&h.jsxs("div",{className:"absolute text-left bg-white p-4 shadow-lg rounded-lg max-w-xs text-black",style:{left:i.left,top:i.top,zIndex:100},children:[h.jsxs("div",{className:"flex items-center justify-between",children:[h.jsx("p",{className:W.dictionaryText,children:e}),h.jsx("i",{className:"fas fa-volume-up ml-5 text-gray-600"})]}),h.jsx("hr",{className:"border-2 mb-2"}),h.jsx("p",{children:t})]}),h.jsx("div",{className:"mt-10 text-center flex justify-between",children:h.jsx("button",{onClick:l,className:"px-6 py-2 border justify-end text-white rounded-lg hover:bg-gray-500",children:"Previous Article"})})]})}),s&&h.jsx("button",{onClick:a,className:"fixed bottom-6 right-6 w-12 h-12 bg-gray-600 text-white rounded-full shadow-lg flex items-center justify-center hover:bg-gray-800 transition-all duration-300",children:h.jsx("i",{className:"fas fa-arrow-up"})})]})},ome=Mt(sme),ame=({children:n})=>{const e=Ks(),t=e.pathname.startsWith("/articleOne")||e.pathname.startsWith("/chapterOne")||e.pathname.startsWith("/main"),i=e.pathname.startsWith("/lawyer-status")||e.pathname.startsWith("/appointment")||e.pathname.startsWith("/lawyer-appoinments");return h.jsxs(h.Fragment,{children:[t&&h.jsx(U5,{}),i&&h.jsx(Ide,{}),n]})},ax=({children:n})=>h.jsxs("div",{className:"relative",children:[h.jsx(Loe,{}),h.jsx("div",{className:"relative z-10",children:n})]}),lme=()=>{const[n,e]=V.useState(null),[t,i]=V.useState(!0);return V.useEffect(()=>{AV(r=>{e(r),i(!1)})},[]),t?h.jsx("div",{className:"flex items-center justify-center h-screen",children:h.jsx("div",{className:"loader",children:"Loading..."})}):h.jsx(ame,{children:h.jsxs(s9,{children:[h.jsx(St,{path:"/CapstoneOne",element:h.jsx(ax,{children:h.jsx(x3,{})})}),h.jsx(St,{path:"/login",element:h.jsx(ax,{children:h.jsx(x3,{})})}),h.jsx(St,{path:"/signup",element:h.jsx(ax,{children:h.jsx(_he,{})})}),h.jsx(St,{path:"/forgotPass",element:h.jsx(ax,{children:h.jsx(bhe,{})})}),n==="user"&&h.jsxs(h.Fragment,{children:[h.jsx(St,{path:"main",element:h.jsx(cde,{})}),h.jsx(St,{path:"/lawyer-status",element:h.jsx(mde,{})}),h.jsx(St,{path:"/lawyer-appoinments",element:h.jsx(Nde,{})}),h.jsx(St,{path:"/appointmentLawyer1",element:h.jsx(Lde,{})}),h.jsx(St,{path:"/appointmentTableLawyer1",element:h.jsx(Ode,{})}),h.jsx(St,{path:"/appointmentResultLawyer1",element:h.jsx(Kde,{})}),h.jsx(St,{path:"/appointmentLawyer2",element:h.jsx(Jde,{})}),h.jsx(St,{path:"/appointmentTableLawyer2",element:h.jsx(Zde,{})}),h.jsx(St,{path:"/appointmentResultLawyer2",element:h.jsx(efe,{})}),h.jsx(St,{path:"/appointmentLawyer3",element:h.jsx(nfe,{})}),h.jsx(St,{path:"/appointmentTableLawyer3",element:h.jsx(rfe,{})}),h.jsx(St,{path:"/appointmentResultLawyer3",element:h.jsx(sfe,{})}),h.jsx(St,{path:"/ai",element:h.jsx(Ade,{})}),h.jsx(St,{path:"/constitution",element:h.jsx(lde,{})}),h.jsx(St,{path:"/RA_8371",element:h.jsx(afe,{})}),h.jsx(St,{path:"/articleOne",element:h.jsx(Tn,{children:h.jsx(cfe,{})})}),h.jsx(St,{path:"/articleTwo",element:h.jsx(Tn,{children:h.jsx(dfe,{})})}),h.jsx(St,{path:"/articleThree",element:h.jsx(Tn,{children:h.jsx(mfe,{})})}),h.jsx(St,{path:"/articleFour",element:h.jsx(Tn,{children:h.jsx(vfe,{})})}),h.jsx(St,{path:"/articleFive",element:h.jsxs(Tn,{children:[h.jsx(wfe,{})," "]})}),h.jsx(St,{path:"/articleSix",element:h.jsxs(Tn,{children:[h.jsx(Tfe,{})," "]})}),h.jsx(St,{path:"/articleSeven",element:h.jsxs(Tn,{children:[h.jsx(Afe,{})," "]})}),h.jsx(St,{path:"/articleEight",element:h.jsxs(Tn,{children:[h.jsx(Pfe,{})," "]})}),h.jsx(St,{path:"/articleNine",element:h.jsxs(Tn,{children:[h.jsx(Ofe,{})," "]})}),h.jsx(St,{path:"/articleTen",element:h.jsxs(Tn,{children:[h.jsx(Vfe,{})," "]})}),h.jsx(St,{path:"/articleEleven",element:h.jsxs(Tn,{children:[h.jsx(Hfe,{})," "]})}),h.jsx(St,{path:"/articleTwelve",element:h.jsxs(Tn,{children:[h.jsx(qfe,{})," "]})}),h.jsx(St,{path:"/articleThirteen",element:h.jsxs(Tn,{children:[h.jsx(npe,{})," "]})}),h.jsx(St,{path:"/articleFourteen",element:h.jsxs(Tn,{children:[h.jsx(cpe,{})," "]})}),h.jsx(St,{path:"/articleFifteen",element:h.jsxs(Tn,{children:[h.jsx(dpe,{})," "]})}),h.jsx(St,{path:"/articleSixteen",element:h.jsxs(Tn,{children:[h.jsx(mpe,{})," "]})}),h.jsx(St,{path:"/articleSeventeen",element:h.jsxs(Tn,{children:[h.jsx(vpe,{})," "]})}),h.jsx(St,{path:"/articleEighteen",element:h.jsxs(Tn,{children:[h.jsx(wpe,{})," "]})}),h.jsx(St,{path:"/chapterOne",element:h.jsx(Tn,{children:h.jsx(Tpe,{})})}),h.jsx(St,{path:"/chapterTwo",element:h.jsxs(Tn,{children:[" ",h.jsx(Ape,{})]})}),h.jsx(St,{path:"/chapterThree",element:h.jsxs(Tn,{children:[" ",h.jsx(Ppe,{})]})}),h.jsx(St,{path:"/chapterFour",element:h.jsxs(Tn,{children:[" ",h.jsx(Dpe,{})]})}),h.jsx(St,{path:"/chapterFive",element:h.jsxs(Tn,{children:[" ",h.jsx(Ope,{})]})}),h.jsx(St,{path:"/chapterSix",element:h.jsxs(Tn,{children:[" ",h.jsx(Fpe,{})]})}),h.jsx(St,{path:"/chapterSeven",element:h.jsxs(Tn,{children:[" ",h.jsx(qpe,{})]})}),h.jsx(St,{path:"/chapterEight",element:h.jsxs(Tn,{children:[" ",h.jsx(Xpe,{})]})}),h.jsx(St,{path:"/chapterNine",element:h.jsxs(Tn,{children:[" ",h.jsx(Jpe,{})]})}),h.jsx(St,{path:"/chapterTen",element:h.jsxs(Tn,{children:[" ",h.jsx(eme,{})]})}),h.jsx(St,{path:"/chapterEleven",element:h.jsxs(Tn,{children:[" ",h.jsx(ime,{})]})}),h.jsx(St,{path:"/chapterTwelve",element:h.jsxs(Tn,{children:[" ",h.jsx(ome,{})]})})]}),n==="admin"&&h.jsx(h.Fragment,{children:h.jsx(St,{path:"/admin_main",element:h.jsx(fde,{})})}),h.jsx(St,{path:"*",element:h.jsx("div",{children:"404 - Page Not Found"})})]})})};zT.createRoot(document.getElementById("root")).render(h.jsx(V.StrictMode,{children:h.jsx(X9,{children:h.jsx(d9,{children:h.jsx(lme,{})})})}));
